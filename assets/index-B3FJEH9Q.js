var C$=Object.defineProperty;var A$=(e,t,n)=>t in e?C$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ua=(e,t,n)=>A$(e,typeof t!="symbol"?t+"":t,n);function T$(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ja(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R_={exports:{}},Fp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m3;function R$(){if(m3)return Fp;m3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Fp.Fragment=t,Fp.jsx=n,Fp.jsxs=n,Fp}var g3;function N$(){return g3||(g3=1,R_.exports=R$()),R_.exports}var y=N$(),N_={exports:{}};function I$(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var z4={exports:{}},na=z4.exports={},gs,ys;function zS(){throw new Error("setTimeout has not been defined")}function US(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?gs=setTimeout:gs=zS}catch{gs=zS}try{typeof clearTimeout=="function"?ys=clearTimeout:ys=US}catch{ys=US}})();function U4(e){if(gs===setTimeout)return setTimeout(e,0);if((gs===zS||!gs)&&setTimeout)return gs=setTimeout,setTimeout(e,0);try{return gs(e,0)}catch{try{return gs.call(null,e,0)}catch{return gs.call(this,e,0)}}}function O$(e){if(ys===clearTimeout)return clearTimeout(e);if((ys===US||!ys)&&clearTimeout)return ys=clearTimeout,clearTimeout(e);try{return ys(e)}catch{try{return ys.call(null,e)}catch{return ys.call(this,e)}}}var wl=[],Nf=!1,qc,Vy=-1;function j$(){!Nf||!qc||(Nf=!1,qc.length?wl=qc.concat(wl):Vy=-1,wl.length&&q4())}function q4(){if(!Nf){var e=U4(j$);Nf=!0;for(var t=wl.length;t;){for(qc=wl,wl=[];++Vy<t;)qc&&qc[Vy].run();Vy=-1,t=wl.length}qc=null,Nf=!1,O$(e)}}na.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];wl.push(new H4(e,t)),wl.length===1&&!Nf&&U4(q4)};function H4(e,t){this.fun=e,this.array=t}H4.prototype.run=function(){this.fun.apply(null,this.array)};na.title="browser";na.browser=!0;na.env={};na.argv=[];na.version="";na.versions={};function Dl(){}na.on=Dl;na.addListener=Dl;na.once=Dl;na.off=Dl;na.removeListener=Dl;na.removeAllListeners=Dl;na.emit=Dl;na.prependListener=Dl;na.prependOnceListener=Dl;na.listeners=function(e){return[]};na.binding=function(e){throw new Error("process.binding is not supported")};na.cwd=function(){return"/"};na.chdir=function(e){throw new Error("process.chdir is not supported")};na.umask=function(){return 0};var D$=z4.exports;const Wr=I$(D$);var On={},y3;function M$(){if(y3)return On;y3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function _(G,Q,ne){this.props=G,this.context=Q,this.refs=w,this.updater=ne||g}_.prototype.isReactComponent={},_.prototype.setState=function(G,Q){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Q,"setState")},_.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function x(){}x.prototype=_.prototype;function S(G,Q,ne){this.props=G,this.context=Q,this.refs=w,this.updater=ne||g}var E=S.prototype=new x;E.constructor=S,v(E,_.prototype),E.isPureReactComponent=!0;var A=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function O(G,Q,ne,de,_e,ve){return ne=ve.ref,{$$typeof:e,type:G,key:Q,ref:ne!==void 0?ne:null,props:ve}}function N(G,Q){return O(G.type,Q,void 0,void 0,void 0,G.props)}function z(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function H(G){var Q={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ne){return Q[ne]})}var ee=/\/+/g;function P(G,Q){return typeof G=="object"&&G!==null&&G.key!=null?H(""+G.key):Q.toString(36)}function Z(){}function V(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(Z,Z):(G.status="pending",G.then(function(Q){G.status==="pending"&&(G.status="fulfilled",G.value=Q)},function(Q){G.status==="pending"&&(G.status="rejected",G.reason=Q)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function fe(G,Q,ne,de,_e){var ve=typeof G;(ve==="undefined"||ve==="boolean")&&(G=null);var Pe=!1;if(G===null)Pe=!0;else switch(ve){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(G.$$typeof){case e:case t:Pe=!0;break;case f:return Pe=G._init,fe(Pe(G._payload),Q,ne,de,_e)}}if(Pe)return _e=_e(G),Pe=de===""?"."+P(G,0):de,A(_e)?(ne="",Pe!=null&&(ne=Pe.replace(ee,"$&/")+"/"),fe(_e,Q,ne,"",function(Te){return Te})):_e!=null&&(z(_e)&&(_e=N(_e,ne+(_e.key==null||G&&G.key===_e.key?"":(""+_e.key).replace(ee,"$&/")+"/")+Pe)),Q.push(_e)),1;Pe=0;var Fe=de===""?".":de+":";if(A(G))for(var Ie=0;Ie<G.length;Ie++)de=G[Ie],ve=Fe+P(de,Ie),Pe+=fe(de,Q,ne,ve,_e);else if(Ie=m(G),typeof Ie=="function")for(G=Ie.call(G),Ie=0;!(de=G.next()).done;)de=de.value,ve=Fe+P(de,Ie++),Pe+=fe(de,Q,ne,ve,_e);else if(ve==="object"){if(typeof G.then=="function")return fe(V(G),Q,ne,de,_e);throw Q=String(G),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ue(G,Q,ne){if(G==null)return G;var de=[],_e=0;return fe(G,de,"","",function(ve){return Q.call(ne,ve,_e++)}),de}function Y(G){if(G._status===-1){var Q=G._result;Q=Q(),Q.then(function(ne){(G._status===0||G._status===-1)&&(G._status=1,G._result=ne)},function(ne){(G._status===0||G._status===-1)&&(G._status=2,G._result=ne)}),G._status===-1&&(G._status=0,G._result=Q)}if(G._status===1)return G._result.default;throw G._result}var X=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Q))return}else if(typeof Wr=="object"&&typeof Wr.emit=="function"){Wr.emit("uncaughtException",G);return}console.error(G)};function ae(){}return On.Children={map:ue,forEach:function(G,Q,ne){ue(G,function(){Q.apply(this,arguments)},ne)},count:function(G){var Q=0;return ue(G,function(){Q++}),Q},toArray:function(G){return ue(G,function(Q){return Q})||[]},only:function(G){if(!z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},On.Component=_,On.Fragment=n,On.Profiler=a,On.PureComponent=S,On.StrictMode=r,On.Suspense=u,On.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,On.__COMPILER_RUNTIME={__proto__:null,c:function(G){return k.H.useMemoCache(G)}},On.cache=function(G){return function(){return G.apply(null,arguments)}},On.cloneElement=function(G,Q,ne){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var de=v({},G.props),_e=G.key,ve=void 0;if(Q!=null)for(Pe in Q.ref!==void 0&&(ve=void 0),Q.key!==void 0&&(_e=""+Q.key),Q)!D.call(Q,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&Q.ref===void 0||(de[Pe]=Q[Pe]);var Pe=arguments.length-2;if(Pe===1)de.children=ne;else if(1<Pe){for(var Fe=Array(Pe),Ie=0;Ie<Pe;Ie++)Fe[Ie]=arguments[Ie+2];de.children=Fe}return O(G.type,_e,void 0,void 0,ve,de)},On.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:i,_context:G},G},On.createElement=function(G,Q,ne){var de,_e={},ve=null;if(Q!=null)for(de in Q.key!==void 0&&(ve=""+Q.key),Q)D.call(Q,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(_e[de]=Q[de]);var Pe=arguments.length-2;if(Pe===1)_e.children=ne;else if(1<Pe){for(var Fe=Array(Pe),Ie=0;Ie<Pe;Ie++)Fe[Ie]=arguments[Ie+2];_e.children=Fe}if(G&&G.defaultProps)for(de in Pe=G.defaultProps,Pe)_e[de]===void 0&&(_e[de]=Pe[de]);return O(G,ve,void 0,void 0,null,_e)},On.createRef=function(){return{current:null}},On.forwardRef=function(G){return{$$typeof:s,render:G}},On.isValidElement=z,On.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:Y}},On.memo=function(G,Q){return{$$typeof:c,type:G,compare:Q===void 0?null:Q}},On.startTransition=function(G){var Q=k.T,ne={};k.T=ne;try{var de=G(),_e=k.S;_e!==null&&_e(ne,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ae,X)}catch(ve){X(ve)}finally{k.T=Q}},On.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},On.use=function(G){return k.H.use(G)},On.useActionState=function(G,Q,ne){return k.H.useActionState(G,Q,ne)},On.useCallback=function(G,Q){return k.H.useCallback(G,Q)},On.useContext=function(G){return k.H.useContext(G)},On.useDebugValue=function(){},On.useDeferredValue=function(G,Q){return k.H.useDeferredValue(G,Q)},On.useEffect=function(G,Q,ne){var de=k.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(G,Q)},On.useId=function(){return k.H.useId()},On.useImperativeHandle=function(G,Q,ne){return k.H.useImperativeHandle(G,Q,ne)},On.useInsertionEffect=function(G,Q){return k.H.useInsertionEffect(G,Q)},On.useLayoutEffect=function(G,Q){return k.H.useLayoutEffect(G,Q)},On.useMemo=function(G,Q){return k.H.useMemo(G,Q)},On.useOptimistic=function(G,Q){return k.H.useOptimistic(G,Q)},On.useReducer=function(G,Q,ne){return k.H.useReducer(G,Q,ne)},On.useRef=function(G){return k.H.useRef(G)},On.useState=function(G){return k.H.useState(G)},On.useSyncExternalStore=function(G,Q,ne){return k.H.useSyncExternalStore(G,Q,ne)},On.useTransition=function(){return k.H.useTransition()},On.version="19.1.0",On}var b3;function iE(){return b3||(b3=1,N_.exports=M$()),N_.exports}var L=iE();const wt=Ja(L),V4=T$({__proto__:null,default:wt},[L]);var I_={exports:{}},Lp={},O_={exports:{}},j_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v3;function P$(){return v3||(v3=1,function(e){function t(ue,Y){var X=ue.length;ue.push(Y);e:for(;0<X;){var ae=X-1>>>1,G=ue[ae];if(0<a(G,Y))ue[ae]=Y,ue[X]=G,X=ae;else break e}}function n(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var Y=ue[0],X=ue.pop();if(X!==Y){ue[0]=X;e:for(var ae=0,G=ue.length,Q=G>>>1;ae<Q;){var ne=2*(ae+1)-1,de=ue[ne],_e=ne+1,ve=ue[_e];if(0>a(de,X))_e<G&&0>a(ve,de)?(ue[ae]=ve,ue[_e]=X,ae=_e):(ue[ae]=de,ue[ne]=X,ae=ne);else if(_e<G&&0>a(ve,X))ue[ae]=ve,ue[_e]=X,ae=_e;else break e}}return Y}function a(ue,Y){var X=ue.sortIndex-Y.sortIndex;return X!==0?X:ue.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var u=[],c=[],f=1,h=null,m=3,g=!1,v=!1,w=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function A(ue){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=ue)r(c),Y.sortIndex=Y.expirationTime,t(u,Y);else break;Y=n(c)}}function k(ue){if(w=!1,A(ue),!v)if(n(u)!==null)v=!0,D||(D=!0,P());else{var Y=n(c);Y!==null&&fe(k,Y.startTime-ue)}}var D=!1,O=-1,N=5,z=-1;function H(){return _?!0:!(e.unstable_now()-z<N)}function ee(){if(_=!1,D){var ue=e.unstable_now();z=ue;var Y=!0;try{e:{v=!1,w&&(w=!1,S(O),O=-1),g=!0;var X=m;try{t:{for(A(ue),h=n(u);h!==null&&!(h.expirationTime>ue&&H());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,m=h.priorityLevel;var G=ae(h.expirationTime<=ue);if(ue=e.unstable_now(),typeof G=="function"){h.callback=G,A(ue),Y=!0;break t}h===n(u)&&r(u),A(ue)}else r(u);h=n(u)}if(h!==null)Y=!0;else{var Q=n(c);Q!==null&&fe(k,Q.startTime-ue),Y=!1}}break e}finally{h=null,m=X,g=!1}Y=void 0}}finally{Y?P():D=!1}}}var P;if(typeof E=="function")P=function(){E(ee)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,V=Z.port2;Z.port1.onmessage=ee,P=function(){V.postMessage(null)}}else P=function(){x(ee,0)};function fe(ue,Y){O=x(function(){ue(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(ue){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var X=m;m=Y;try{return ue()}finally{m=X}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(ue,Y){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var X=m;m=ue;try{return Y()}finally{m=X}},e.unstable_scheduleCallback=function(ue,Y,X){var ae=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ae+X:ae):X=ae,ue){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=X+G,ue={id:f++,callback:Y,priorityLevel:ue,startTime:X,expirationTime:G,sortIndex:-1},X>ae?(ue.sortIndex=X,t(c,ue),n(u)===null&&ue===n(c)&&(w?(S(O),O=-1):w=!0,fe(k,X-ae))):(ue.sortIndex=G,t(u,ue),v||g||(v=!0,D||(D=!0,P()))),ue},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(ue){var Y=m;return function(){var X=m;m=Y;try{return ue.apply(this,arguments)}finally{m=X}}}}(j_)),j_}var w3;function F$(){return w3||(w3=1,O_.exports=P$()),O_.exports}var D_={exports:{}},qa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _3;function L$(){if(_3)return qa;_3=1;var e=iE();function t(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:u,containerInfo:c,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return qa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,qa.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(u,c,null,f)},qa.flushSync=function(u){var c=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=c,r.p=f,r.d.f()}},qa.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},qa.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},qa.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):f==="script"&&r.d.X(u,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},qa.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=s(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},qa.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},qa.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=s(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},qa.requestFormReset=function(u){r.d.r(u)},qa.unstable_batchedUpdates=function(u,c){return u(c)},qa.useFormState=function(u,c,f){return o.H.useFormState(u,c,f)},qa.useFormStatus=function(){return o.H.useHostTransitionStatus()},qa.version="19.1.0",qa}var x3;function G4(){if(x3)return D_.exports;x3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),D_.exports=L$(),D_.exports}var S3;function $$(){if(S3)return Lp;S3=1;var e=F$(),t=iE(),n=G4();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function s(l){if(i(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,b=d;;){var T=p.return;if(T===null)break;var M=T.alternate;if(M===null){if(b=T.return,b!==null){p=b;continue}break}if(T.child===M.child){for(M=T.child;M;){if(M===p)return s(T),l;if(M===b)return s(T),d;M=M.sibling}throw Error(r(188))}if(p.return!==b.return)p=T,b=M;else{for(var re=!1,we=T.child;we;){if(we===p){re=!0,p=T,b=M;break}if(we===b){re=!0,b=T,p=M;break}we=we.sibling}if(!re){for(we=M.child;we;){if(we===p){re=!0,p=M,b=T;break}if(we===b){re=!0,b=M,p=T;break}we=we.sibling}if(!re)throw Error(r(189))}}if(p.alternate!==b)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:(l=ee&&l[ee]||l["@@iterator"],typeof l=="function"?l:null)}var Z=Symbol.for("react.client.reference");function V(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case k:return"Suspense";case D:return"SuspenseList";case z:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case E:return(l.displayName||"Context")+".Provider";case S:return(l._context.displayName||"Context")+".Consumer";case A:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return d=l.displayName||null,d!==null?d:V(l.type)||"Memo";case N:d=l._payload,l=l._init;try{return V(l(d))}catch{}}return null}var fe=Array.isArray,ue=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ae=[],G=-1;function Q(l){return{current:l}}function ne(l){0>G||(l.current=ae[G],ae[G]=null,G--)}function de(l,d){G++,ae[G]=l.current,l.current=d}var _e=Q(null),ve=Q(null),Pe=Q(null),Fe=Q(null);function Ie(l,d){switch(de(Pe,d),de(ve,l),de(_e,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?qT(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=qT(d),l=HT(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(_e),de(_e,l)}function Te(){ne(_e),ne(ve),ne(Pe)}function Ue(l){l.memoizedState!==null&&de(Fe,l);var d=_e.current,p=HT(d,l.type);d!==p&&(de(ve,l),de(_e,p))}function Ve(l){ve.current===l&&(ne(_e),ne(ve)),Fe.current===l&&(ne(Fe),Op._currentValue=X)}var Ee=Object.prototype.hasOwnProperty,Ae=e.unstable_scheduleCallback,B=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,Re=e.unstable_requestPaint,se=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,J=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Me=e.unstable_NormalPriority,Se=e.unstable_LowPriority,Ze=e.unstable_IdlePriority,Et=e.log,at=e.unstable_setDisableYieldValue,_t=null,Nt=null;function Rt(l){if(typeof Et=="function"&&at(l),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(_t,l)}catch{}}var Kt=Math.clz32?Math.clz32:q,pe=Math.log,R=Math.LN2;function q(l){return l>>>=0,l===0?32:31-(pe(l)/R|0)|0}var ce=256,Oe=4194304;function ye(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ke(l,d,p){var b=l.pendingLanes;if(b===0)return 0;var T=0,M=l.suspendedLanes,re=l.pingedLanes;l=l.warmLanes;var we=b&134217727;return we!==0?(b=we&~M,b!==0?T=ye(b):(re&=we,re!==0?T=ye(re):p||(p=we&~l,p!==0&&(T=ye(p))))):(we=b&~M,we!==0?T=ye(we):re!==0?T=ye(re):p||(p=b&~l,p!==0&&(T=ye(p)))),T===0?0:d!==0&&d!==T&&(d&M)===0&&(M=T&-T,p=d&-d,M>=p||M===32&&(p&4194048)!==0)?d:T}function oe(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ft(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var l=ce;return ce<<=1,(ce&4194048)===0&&(ce=256),l}function j(){var l=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),l}function $e(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function st(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ge(l,d,p,b,T,M){var re=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var we=l.entanglements,Be=l.expirationTimes,ut=l.hiddenUpdates;for(p=re&~p;0<p;){var St=31-Kt(p),At=1<<St;we[St]=0,Be[St]=-1;var pt=ut[St];if(pt!==null)for(ut[St]=null,St=0;St<pt.length;St++){var mt=pt[St];mt!==null&&(mt.lane&=-536870913)}p&=~At}b!==0&&De(l,b,0),M!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=M&~(re&~d))}function De(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-Kt(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|p&4194090}function Je(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var b=31-Kt(p),T=1<<b;T&d|l[b]&d&&(l[b]|=d),p&=~T}}function It(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function me(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function U(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:u3(l.type))}function $(l,d){var p=Y.p;try{return Y.p=l,d()}finally{Y.p=p}}var W=Math.random().toString(36).slice(2),he="__reactFiber$"+W,Ne="__reactProps$"+W,He="__reactContainer$"+W,gt="__reactEvents$"+W,Gt="__reactListeners$"+W,ht="__reactHandles$"+W,Ct="__reactResources$"+W,Ot="__reactMarker$"+W;function Zt(l){delete l[he],delete l[Ne],delete l[gt],delete l[Gt],delete l[ht]}function En(l){var d=l[he];if(d)return d;for(var p=l.parentNode;p;){if(d=p[He]||p[he]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=KT(l);l!==null;){if(p=l[he])return p;l=KT(l)}return d}l=p,p=l.parentNode}return null}function Bn(l){if(l=l[he]||l[He]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function fr(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function hr(l){var d=l[Ct];return d||(d=l[Ct]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Dn(l){l[Ot]=!0}var ei=new Set,Xo={};function Jo(l,d){Qo(l,d),Qo(l+"Capture",d)}function Qo(l,d){for(Xo[l]=d,l=0;l<d.length;l++)ei.add(d[l])}var Br=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),es={},Yi={};function tg(l){return Ee.call(Yi,l)?!0:Ee.call(es,l)?!1:Br.test(l)?Yi[l]=!0:(es[l]=!0,!1)}function xo(l,d,p){if(tg(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Bs(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Ii(l,d,p,b){if(b===null)l.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+b)}}var uc,ts;function zs(l){if(uc===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);uc=d&&d[1]||"",ts=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uc+l+ts}var Ll=!1;function kd(l,d){if(!l||Ll)return"";Ll=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var At=function(){throw Error()};if(Object.defineProperty(At.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(At,[])}catch(mt){var pt=mt}Reflect.construct(l,[],At)}else{try{At.call()}catch(mt){pt=mt}l.call(At.prototype)}}else{try{throw Error()}catch(mt){pt=mt}(At=l())&&typeof At.catch=="function"&&At.catch(function(){})}}catch(mt){if(mt&&pt&&typeof mt.stack=="string")return[mt.stack,pt.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=b.DetermineComponentFrameRoot(),re=M[0],we=M[1];if(re&&we){var Be=re.split(`
`),ut=we.split(`
`);for(T=b=0;b<Be.length&&!Be[b].includes("DetermineComponentFrameRoot");)b++;for(;T<ut.length&&!ut[T].includes("DetermineComponentFrameRoot");)T++;if(b===Be.length||T===ut.length)for(b=Be.length-1,T=ut.length-1;1<=b&&0<=T&&Be[b]!==ut[T];)T--;for(;1<=b&&0<=T;b--,T--)if(Be[b]!==ut[T]){if(b!==1||T!==1)do if(b--,T--,0>T||Be[b]!==ut[T]){var St=`
`+Be[b].replace(" at new "," at ");return l.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",l.displayName)),St}while(1<=b&&0<=T);break}}}finally{Ll=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?zs(p):""}function zn(l){switch(l.tag){case 26:case 27:case 5:return zs(l.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 15:return kd(l.type,!1);case 11:return kd(l.type.render,!1);case 1:return kd(l.type,!0);case 31:return zs("Activity");default:return""}}function Dh(l){try{var d="";do d+=zn(l),l=l.return;while(l);return d}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ti(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Mh(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function wr(l){var d=Mh(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var T=p.get,M=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(re){b=""+re,M.call(this,re)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return b},setValue:function(re){b=""+re},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function ns(l){l._valueTracker||(l._valueTracker=wr(l))}function $l(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),b="";return l&&(b=Mh(l)?l.checked?"true":"false":l.value),l=b,l!==p?(d.setValue(l),!0):!1}function So(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Ph=/[\n"\\]/g;function La(l){return l.replace(Ph,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Bl(l,d,p,b,T,M,re,we){l.name="",re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?l.type=re:l.removeAttribute("type"),d!=null?re==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ti(d)):l.value!==""+ti(d)&&(l.value=""+ti(d)):re!=="submit"&&re!=="reset"||l.removeAttribute("value"),d!=null?zl(l,re,ti(d)):p!=null?zl(l,re,ti(p)):b!=null&&l.removeAttribute("value"),T==null&&M!=null&&(l.defaultChecked=!!M),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?l.name=""+ti(we):l.removeAttribute("name")}function Fh(l,d,p,b,T,M,re,we){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(l.type=M),d!=null||p!=null){if(!(M!=="submit"&&M!=="reset"||d!=null))return;p=p!=null?""+ti(p):"",d=d!=null?""+ti(d):p,we||d===l.value||(l.value=d),l.defaultValue=d}b=b??T,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=we?l.checked:!!b,l.defaultChecked=!!b,re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"&&(l.name=re)}function zl(l,d,p){d==="number"&&So(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Us(l,d,p,b){if(l=l.options,d){d={};for(var T=0;T<p.length;T++)d["$"+p[T]]=!0;for(p=0;p<l.length;p++)T=d.hasOwnProperty("$"+l[p].value),l[p].selected!==T&&(l[p].selected=T),T&&b&&(l[p].defaultSelected=!0)}else{for(p=""+ti(p),d=null,T=0;T<l.length;T++){if(l[T].value===p){l[T].selected=!0,b&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function Ul(l,d,p){if(d!=null&&(d=""+ti(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+ti(p):""}function Lh(l,d,p,b){if(d==null){if(b!=null){if(p!=null)throw Error(r(92));if(fe(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),d=p}p=ti(d),l.defaultValue=p,b=l.textContent,b===p&&b!==""&&b!==null&&(l.value=b)}function ql(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var Vn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cd(l,d,p){var b=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,p):typeof p!="number"||p===0||Vn.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function ng(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var b in p)!p.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var T in d)b=d[T],d.hasOwnProperty(T)&&p[T]!==b&&Cd(l,T,b)}else for(var M in d)d.hasOwnProperty(M)&&Cd(l,M,d[M])}function $h(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ni=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qs(l){return Hl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Xi=null;function Ad(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Hs=null,Rr=null;function Oi(l){var d=Bn(l);if(d&&(l=d.stateNode)){var p=l[Ne]||null;e:switch(l=d.stateNode,d.type){case"input":if(Bl(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+La(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var b=p[d];if(b!==l&&b.form===l.form){var T=b[Ne]||null;if(!T)throw Error(r(90));Bl(b,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<p.length;d++)b=p[d],b.form===l.form&&$l(b)}break e;case"textarea":Ul(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Us(l,!!p.multiple,d,!1)}}}var Vs=!1;function Vl(l,d,p){if(Vs)return l(d,p);Vs=!0;try{var b=l(d);return b}finally{if(Vs=!1,(Hs!==null||Rr!==null)&&(Hg(),Hs&&(d=Hs,l=Rr,Rr=Hs=null,Oi(d),l)))for(d=0;d<l.length;d++)Oi(l[d])}}function Gs(l,d){var p=l.stateNode;if(p===null)return null;var b=p[Ne]||null;if(b===null)return null;p=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bh=!1;if(ga)try{var $a={};Object.defineProperty($a,"passive",{get:function(){Bh=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{Bh=!1}var Ji=null,Td=null,Gl=null;function Wl(){if(Gl)return Gl;var l,d=Td,p=d.length,b,T="value"in Ji?Ji.value:Ji.textContent,M=T.length;for(l=0;l<p&&d[l]===T[l];l++);var re=p-l;for(b=1;b<=re&&d[p-b]===T[M-b];b++);return Gl=T.slice(l,1<b?1-b:void 0)}function Kl(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function cc(){return!0}function rg(){return!1}function ra(l){function d(p,b,T,M,re){this._reactName=p,this._targetInst=T,this.type=b,this.nativeEvent=M,this.target=re,this.currentTarget=null;for(var we in l)l.hasOwnProperty(we)&&(p=l[we],this[we]=p?p(M):M[we]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?cc:rg,this.isPropagationStopped=rg,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),d}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rd=ra(Ws),rs=f({},Ws,{view:0,detail:0}),Nd=ra(rs),dc,zh,fc,Id=f({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ks,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==fc&&(fc&&l.type==="mousemove"?(dc=l.screenX-fc.screenX,zh=l.screenY-fc.screenY):zh=dc=0,fc=l),dc)},movementY:function(l){return"movementY"in l?l.movementY:zh}}),Od=ra(Id),Uh=f({},Id,{dataTransfer:0}),ag=ra(Uh),jd=f({},rs,{relatedTarget:0}),Zl=ra(jd),Dd=f({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),ig=ra(Dd),qw=f({},Ws,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Md=ra(qw),qh=f({},Ws,{data:0}),Pd=ra(qh),Hh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ya={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=ya[l])?!!d[l]:!1}function Ks(){return hc}var og=f({},rs,{key:function(l){if(l.key){var d=Hh[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Kl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Vh[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ks,charCode:function(l){return l.type==="keypress"?Kl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Kl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Fd=ra(og),sg=f({},Id,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gh=ra(sg),Ld=f({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ks}),Wh=ra(Ld),Zs=f({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kh=ra(Zs),Zh=f({},Id,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),$d=ra(Zh),Yh=f({},Ws,{newState:0,oldState:0}),lg=ra(Yh),Hw=[9,13,27,32],pc=ga&&"CompositionEvent"in window,as=null;ga&&"documentMode"in document&&(as=document.documentMode);var Vw=ga&&"TextEvent"in window&&!as,Bd=ga&&(!pc||as&&8<as&&11>=as),zd=" ",ug=!1;function Xh(l,d){switch(l){case"keyup":return Hw.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cg(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ys=!1;function dg(l,d){switch(l){case"compositionend":return cg(d);case"keypress":return d.which!==32?null:(ug=!0,zd);case"textInput":return l=d.data,l===zd&&ug?null:l;default:return null}}function Gw(l,d){if(Ys)return l==="compositionend"||!pc&&Xh(l,d)?(l=Wl(),Gl=Td=Ji=null,Ys=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Bd&&d.locale!=="ko"?null:d.data;default:return null}}var fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ud(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!fg[l.type]:d==="textarea"}function Jh(l,d,p,b){Hs?Rr?Rr.push(b):Rr=[b]:Hs=b,d=Yg(d,"onChange"),0<d.length&&(p=new Rd("onChange","change",null,p,b),l.push({event:p,listeners:d}))}var Yl=null,mc=null;function Ww(l){LT(l,0)}function qd(l){var d=fr(l);if($l(d))return l}function gc(l,d){if(l==="change")return d}var Qi=!1;if(ga){var Nr;if(ga){var Xl="oninput"in document;if(!Xl){var ri=document.createElement("div");ri.setAttribute("oninput","return;"),Xl=typeof ri.oninput=="function"}Nr=Xl}else Nr=!1;Qi=Nr&&(!document.documentMode||9<document.documentMode)}function hg(){Yl&&(Yl.detachEvent("onpropertychange",Hd),mc=Yl=null)}function Hd(l){if(l.propertyName==="value"&&qd(mc)){var d=[];Jh(d,mc,l,Ad(l)),Vl(Ww,d)}}function pg(l,d,p){l==="focusin"?(hg(),Yl=d,mc=p,Yl.attachEvent("onpropertychange",Hd)):l==="focusout"&&hg()}function Xs(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return qd(mc)}function Qh(l,d){if(l==="click")return qd(d)}function Jl(l,d){if(l==="input"||l==="change")return qd(d)}function is(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ba=typeof Object.is=="function"?Object.is:is;function C(l,d){if(Ba(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),b=Object.keys(d);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var T=p[b];if(!Ee.call(d,T)||!Ba(l[T],d[T]))return!1}return!0}function I(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function K(l,d){var p=I(l);l=0;for(var b;p;){if(p.nodeType===3){if(b=l+p.textContent.length,l<=d&&b>=d)return{node:p,offset:d-l};l=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=I(p)}}function te(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?te(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function le(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=So(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=So(l.document)}return d}function be(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var je=ga&&"documentMode"in document&&11>=document.documentMode,Le=null,We=null,Ye=null,tt=!1;function qe(l,d,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;tt||Le==null||Le!==So(b)||(b=Le,"selectionStart"in b&&be(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ye&&C(Ye,b)||(Ye=b,b=Yg(We,"onSelect"),0<b.length&&(d=new Rd("onSelect","select",null,d,p),l.push({event:d,listeners:b}),d.target=Le)))}function rt(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Ge={animationend:rt("Animation","AnimationEnd"),animationiteration:rt("Animation","AnimationIteration"),animationstart:rt("Animation","AnimationStart"),transitionrun:rt("Transition","TransitionRun"),transitionstart:rt("Transition","TransitionStart"),transitioncancel:rt("Transition","TransitionCancel"),transitionend:rt("Transition","TransitionEnd")},et={},it={};ga&&(it=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Xe(l){if(et[l])return et[l];if(!Ge[l])return l;var d=Ge[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in it)return et[l]=d[p];return l}var dt=Xe("animationend"),yt=Xe("animationiteration"),bt=Xe("animationstart"),xt=Xe("transitionrun"),Ft=Xe("transitionstart"),Ut=Xe("transitioncancel"),Dt=Xe("transitionend"),Bt=new Map,Vt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vt.push("scrollEnd");function Mt(l,d){Bt.set(l,d),Jo(d,[l])}var Xt=new WeakMap;function un(l,d){if(typeof l=="object"&&l!==null){var p=Xt.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Dh(d)},Xt.set(l,d),d)}return{value:l,source:d,stack:Dh(d)}}var fn=[],kn=0,Ia=0;function bn(){for(var l=kn,d=Ia=kn=0;d<l;){var p=fn[d];fn[d++]=null;var b=fn[d];fn[d++]=null;var T=fn[d];fn[d++]=null;var M=fn[d];if(fn[d++]=null,b!==null&&T!==null){var re=b.pending;re===null?T.next=T:(T.next=re.next,re.next=T),b.pending=T}M!==0&&ba(p,T,M)}}function Yr(l,d,p,b){fn[kn++]=l,fn[kn++]=d,fn[kn++]=p,fn[kn++]=b,Ia|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function aa(l,d,p,b){return Yr(l,d,p,b),eo(l)}function Eo(l,d){return Yr(l,null,null,d),eo(l)}function ba(l,d,p){l.lanes|=p;var b=l.alternate;b!==null&&(b.lanes|=p);for(var T=!1,M=l.return;M!==null;)M.childLanes|=p,b=M.alternate,b!==null&&(b.childLanes|=p),M.tag===22&&(l=M.stateNode,l===null||l._visibility&1||(T=!0)),l=M,M=M.return;return l.tag===3?(M=l.stateNode,T&&d!==null&&(T=31-Kt(p),l=M.hiddenUpdates,b=l[T],b===null?l[T]=[d]:b.push(d),d.lane=p|536870912),M):null}function eo(l){if(50<Ep)throw Ep=0,Q1=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var os={};function dL(l,d,p,b){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(l,d,p,b){return new dL(l,d,p,b)}function Kw(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Js(l,d){var p=l.alternate;return p===null?(p=ji(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function SC(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function mg(l,d,p,b,T,M){var re=0;if(b=l,typeof l=="function")Kw(l)&&(re=1);else if(typeof l=="string")re=h$(l,p,_e.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case z:return l=ji(31,p,d,T),l.elementType=z,l.lanes=M,l;case v:return yc(p.children,T,M,d);case w:re=8,T|=24;break;case _:return l=ji(12,p,d,T|2),l.elementType=_,l.lanes=M,l;case k:return l=ji(13,p,d,T),l.elementType=k,l.lanes=M,l;case D:return l=ji(19,p,d,T),l.elementType=D,l.lanes=M,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case E:re=10;break e;case S:re=9;break e;case A:re=11;break e;case O:re=14;break e;case N:re=16,b=null;break e}re=29,p=Error(r(130,l===null?"null":typeof l,"")),b=null}return d=ji(re,p,d,T),d.elementType=l,d.type=b,d.lanes=M,d}function yc(l,d,p,b){return l=ji(7,l,b,d),l.lanes=p,l}function Zw(l,d,p){return l=ji(6,l,null,d),l.lanes=p,l}function Yw(l,d,p){return d=ji(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Vd=[],Gd=0,gg=null,yg=0,to=[],no=0,bc=null,Qs=1,el="";function vc(l,d){Vd[Gd++]=yg,Vd[Gd++]=gg,gg=l,yg=d}function EC(l,d,p){to[no++]=Qs,to[no++]=el,to[no++]=bc,bc=l;var b=Qs;l=el;var T=32-Kt(b)-1;b&=~(1<<T),p+=1;var M=32-Kt(d)+T;if(30<M){var re=T-T%5;M=(b&(1<<re)-1).toString(32),b>>=re,T-=re,Qs=1<<32-Kt(d)+T|p<<T|b,el=M+l}else Qs=1<<M|p<<T|b,el=l}function Xw(l){l.return!==null&&(vc(l,1),EC(l,1,0))}function Jw(l){for(;l===gg;)gg=Vd[--Gd],Vd[Gd]=null,yg=Vd[--Gd],Vd[Gd]=null;for(;l===bc;)bc=to[--no],to[no]=null,el=to[--no],to[no]=null,Qs=to[--no],to[no]=null}var ai=null,Vr=null,er=!1,wc=null,ss=!1,Qw=Error(r(519));function _c(l){var d=Error(r(418,""));throw np(un(d,l)),Qw}function kC(l){var d=l.stateNode,p=l.type,b=l.memoizedProps;switch(d[he]=l,d[Ne]=b,p){case"dialog":qn("cancel",d),qn("close",d);break;case"iframe":case"object":case"embed":qn("load",d);break;case"video":case"audio":for(p=0;p<Cp.length;p++)qn(Cp[p],d);break;case"source":qn("error",d);break;case"img":case"image":case"link":qn("error",d),qn("load",d);break;case"details":qn("toggle",d);break;case"input":qn("invalid",d),Fh(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),ns(d);break;case"select":qn("invalid",d);break;case"textarea":qn("invalid",d),Lh(d,b.value,b.defaultValue,b.children),ns(d)}p=b.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||b.suppressHydrationWarning===!0||UT(d.textContent,p)?(b.popover!=null&&(qn("beforetoggle",d),qn("toggle",d)),b.onScroll!=null&&qn("scroll",d),b.onScrollEnd!=null&&qn("scrollend",d),b.onClick!=null&&(d.onclick=Xg),d=!0):d=!1,d||_c(l)}function CC(l){for(ai=l.return;ai;)switch(ai.tag){case 5:case 13:ss=!1;return;case 27:case 3:ss=!0;return;default:ai=ai.return}}function ep(l){if(l!==ai)return!1;if(!er)return CC(l),er=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||m_(l.type,l.memoizedProps)),p=!p),p&&Vr&&_c(l),CC(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(d===0){Vr=Co(l.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++;l=l.nextSibling}Vr=null}}else d===27?(d=Vr,pu(l.type)?(l=v_,v_=null,Vr=l):Vr=d):Vr=ai?Co(l.stateNode.nextSibling):null;return!0}function tp(){Vr=ai=null,er=!1}function AC(){var l=wc;return l!==null&&(vi===null?vi=l:vi.push.apply(vi,l),wc=null),l}function np(l){wc===null?wc=[l]:wc.push(l)}var e1=Q(null),xc=null,tl=null;function Ql(l,d,p){de(e1,d._currentValue),d._currentValue=p}function nl(l){l._currentValue=e1.current,ne(e1)}function t1(l,d,p){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===p)break;l=l.return}}function n1(l,d,p,b){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var M=T.dependencies;if(M!==null){var re=T.child;M=M.firstContext;e:for(;M!==null;){var we=M;M=T;for(var Be=0;Be<d.length;Be++)if(we.context===d[Be]){M.lanes|=p,we=M.alternate,we!==null&&(we.lanes|=p),t1(M.return,p,l),b||(re=null);break e}M=we.next}}else if(T.tag===18){if(re=T.return,re===null)throw Error(r(341));re.lanes|=p,M=re.alternate,M!==null&&(M.lanes|=p),t1(re,p,l),re=null}else re=T.child;if(re!==null)re.return=T;else for(re=T;re!==null;){if(re===l){re=null;break}if(T=re.sibling,T!==null){T.return=re.return,re=T;break}re=re.return}T=re}}function rp(l,d,p,b){l=null;for(var T=d,M=!1;T!==null;){if(!M){if((T.flags&524288)!==0)M=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var re=T.alternate;if(re===null)throw Error(r(387));if(re=re.memoizedProps,re!==null){var we=T.type;Ba(T.pendingProps.value,re.value)||(l!==null?l.push(we):l=[we])}}else if(T===Fe.current){if(re=T.alternate,re===null)throw Error(r(387));re.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Op):l=[Op])}T=T.return}l!==null&&n1(d,l,p,b),d.flags|=262144}function bg(l){for(l=l.firstContext;l!==null;){if(!Ba(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Sc(l){xc=l,tl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function za(l){return TC(xc,l)}function vg(l,d){return xc===null&&Sc(l),TC(l,d)}function TC(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},tl===null){if(l===null)throw Error(r(308));tl=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else tl=tl.next=d;return p}var fL=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},hL=e.unstable_scheduleCallback,pL=e.unstable_NormalPriority,ca={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function r1(){return{controller:new fL,data:new Map,refCount:0}}function ap(l){l.refCount--,l.refCount===0&&hL(pL,function(){l.controller.abort()})}var ip=null,a1=0,Wd=0,Kd=null;function mL(l,d){if(ip===null){var p=ip=[];a1=0,Wd=o_(),Kd={status:"pending",value:void 0,then:function(b){p.push(b)}}}return a1++,d.then(RC,RC),d}function RC(){if(--a1===0&&ip!==null){Kd!==null&&(Kd.status="fulfilled");var l=ip;ip=null,Wd=0,Kd=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function gL(l,d){var p=[],b={status:"pending",value:null,reason:null,then:function(T){p.push(T)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var T=0;T<p.length;T++)(0,p[T])(d)},function(T){for(b.status="rejected",b.reason=T,T=0;T<p.length;T++)(0,p[T])(void 0)}),b}var NC=ue.S;ue.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&mL(l,d),NC!==null&&NC(l,d)};var Ec=Q(null);function i1(){var l=Ec.current;return l!==null?l:kr.pooledCache}function wg(l,d){d===null?de(Ec,Ec.current):de(Ec,d.pool)}function IC(){var l=i1();return l===null?null:{parent:ca._currentValue,pool:l}}var op=Error(r(460)),OC=Error(r(474)),_g=Error(r(542)),o1={then:function(){}};function jC(l){return l=l.status,l==="fulfilled"||l==="rejected"}function xg(){}function DC(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(xg,xg),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,PC(l),l;default:if(typeof d.status=="string")d.then(xg,xg);else{if(l=kr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=b}},function(b){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,PC(l),l}throw sp=d,op}}var sp=null;function MC(){if(sp===null)throw Error(r(459));var l=sp;return sp=null,l}function PC(l){if(l===op||l===_g)throw Error(r(483))}var eu=!1;function s1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function l1(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function tu(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function nu(l,d,p){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(sr&2)!==0){var T=b.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),b.pending=d,d=eo(l),ba(l,null,p),d}return Yr(l,b,d,p),eo(l)}function lp(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Je(l,p)}}function u1(l,d){var p=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var T=null,M=null;if(p=p.firstBaseUpdate,p!==null){do{var re={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};M===null?T=M=re:M=M.next=re,p=p.next}while(p!==null);M===null?T=M=d:M=M.next=d}else T=M=d;p={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:M,shared:b.shared,callbacks:b.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var c1=!1;function up(){if(c1){var l=Kd;if(l!==null)throw l}}function cp(l,d,p,b){c1=!1;var T=l.updateQueue;eu=!1;var M=T.firstBaseUpdate,re=T.lastBaseUpdate,we=T.shared.pending;if(we!==null){T.shared.pending=null;var Be=we,ut=Be.next;Be.next=null,re===null?M=ut:re.next=ut,re=Be;var St=l.alternate;St!==null&&(St=St.updateQueue,we=St.lastBaseUpdate,we!==re&&(we===null?St.firstBaseUpdate=ut:we.next=ut,St.lastBaseUpdate=Be))}if(M!==null){var At=T.baseState;re=0,St=ut=Be=null,we=M;do{var pt=we.lane&-536870913,mt=pt!==we.lane;if(mt?(Gn&pt)===pt:(b&pt)===pt){pt!==0&&pt===Wd&&(c1=!0),St!==null&&(St=St.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var vn=l,hn=we;pt=d;var gr=p;switch(hn.tag){case 1:if(vn=hn.payload,typeof vn=="function"){At=vn.call(gr,At,pt);break e}At=vn;break e;case 3:vn.flags=vn.flags&-65537|128;case 0:if(vn=hn.payload,pt=typeof vn=="function"?vn.call(gr,At,pt):vn,pt==null)break e;At=f({},At,pt);break e;case 2:eu=!0}}pt=we.callback,pt!==null&&(l.flags|=64,mt&&(l.flags|=8192),mt=T.callbacks,mt===null?T.callbacks=[pt]:mt.push(pt))}else mt={lane:pt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},St===null?(ut=St=mt,Be=At):St=St.next=mt,re|=pt;if(we=we.next,we===null){if(we=T.shared.pending,we===null)break;mt=we,we=mt.next,mt.next=null,T.lastBaseUpdate=mt,T.shared.pending=null}}while(!0);St===null&&(Be=At),T.baseState=Be,T.firstBaseUpdate=ut,T.lastBaseUpdate=St,M===null&&(T.shared.lanes=0),cu|=re,l.lanes=re,l.memoizedState=At}}function FC(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function LC(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)FC(p[l],d)}var Zd=Q(null),Sg=Q(0);function $C(l,d){l=ul,de(Sg,l),de(Zd,d),ul=l|d.baseLanes}function d1(){de(Sg,ul),de(Zd,Zd.current)}function f1(){ul=Sg.current,ne(Zd),ne(Sg)}var ru=0,Fn=null,pr=null,ia=null,Eg=!1,Yd=!1,kc=!1,kg=0,dp=0,Xd=null,yL=0;function Xr(){throw Error(r(321))}function h1(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Ba(l[p],d[p]))return!1;return!0}function p1(l,d,p,b,T,M){return ru=M,Fn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ue.H=l===null||l.memoizedState===null?xA:SA,kc=!1,M=p(b,T),kc=!1,Yd&&(M=zC(d,p,b,T)),BC(l),M}function BC(l){ue.H=Ig;var d=pr!==null&&pr.next!==null;if(ru=0,ia=pr=Fn=null,Eg=!1,dp=0,Xd=null,d)throw Error(r(300));l===null||va||(l=l.dependencies,l!==null&&bg(l)&&(va=!0))}function zC(l,d,p,b){Fn=l;var T=0;do{if(Yd&&(Xd=null),dp=0,Yd=!1,25<=T)throw Error(r(301));if(T+=1,ia=pr=null,l.updateQueue!=null){var M=l.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}ue.H=EL,M=d(p,b)}while(Yd);return M}function bL(){var l=ue.H,d=l.useState()[0];return d=typeof d.then=="function"?fp(d):d,l=l.useState()[0],(pr!==null?pr.memoizedState:null)!==l&&(Fn.flags|=1024),d}function m1(){var l=kg!==0;return kg=0,l}function g1(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function y1(l){if(Eg){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Eg=!1}ru=0,ia=pr=Fn=null,Yd=!1,dp=kg=0,Xd=null}function yi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ia===null?Fn.memoizedState=ia=l:ia=ia.next=l,ia}function oa(){if(pr===null){var l=Fn.alternate;l=l!==null?l.memoizedState:null}else l=pr.next;var d=ia===null?Fn.memoizedState:ia.next;if(d!==null)ia=d,pr=l;else{if(l===null)throw Fn.alternate===null?Error(r(467)):Error(r(310));pr=l,l={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},ia===null?Fn.memoizedState=ia=l:ia=ia.next=l}return ia}function b1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fp(l){var d=dp;return dp+=1,Xd===null&&(Xd=[]),l=DC(Xd,l,d),d=Fn,(ia===null?d.memoizedState:ia.next)===null&&(d=d.alternate,ue.H=d===null||d.memoizedState===null?xA:SA),l}function Cg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return fp(l);if(l.$$typeof===E)return za(l)}throw Error(r(438,String(l)))}function v1(l){var d=null,p=Fn.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var b=Fn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=b1(),Fn.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),b=0;b<l;b++)p[b]=H;return d.index++,p}function rl(l,d){return typeof d=="function"?d(l):d}function Ag(l){var d=oa();return w1(d,pr,l)}function w1(l,d,p){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=p;var T=l.baseQueue,M=b.pending;if(M!==null){if(T!==null){var re=T.next;T.next=M.next,M.next=re}d.baseQueue=T=M,b.pending=null}if(M=l.baseState,T===null)l.memoizedState=M;else{d=T.next;var we=re=null,Be=null,ut=d,St=!1;do{var At=ut.lane&-536870913;if(At!==ut.lane?(Gn&At)===At:(ru&At)===At){var pt=ut.revertLane;if(pt===0)Be!==null&&(Be=Be.next={lane:0,revertLane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),At===Wd&&(St=!0);else if((ru&pt)===pt){ut=ut.next,pt===Wd&&(St=!0);continue}else At={lane:0,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},Be===null?(we=Be=At,re=M):Be=Be.next=At,Fn.lanes|=pt,cu|=pt;At=ut.action,kc&&p(M,At),M=ut.hasEagerState?ut.eagerState:p(M,At)}else pt={lane:At,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},Be===null?(we=Be=pt,re=M):Be=Be.next=pt,Fn.lanes|=At,cu|=At;ut=ut.next}while(ut!==null&&ut!==d);if(Be===null?re=M:Be.next=we,!Ba(M,l.memoizedState)&&(va=!0,St&&(p=Kd,p!==null)))throw p;l.memoizedState=M,l.baseState=re,l.baseQueue=Be,b.lastRenderedState=M}return T===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function _1(l){var d=oa(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var b=p.dispatch,T=p.pending,M=d.memoizedState;if(T!==null){p.pending=null;var re=T=T.next;do M=l(M,re.action),re=re.next;while(re!==T);Ba(M,d.memoizedState)||(va=!0),d.memoizedState=M,d.baseQueue===null&&(d.baseState=M),p.lastRenderedState=M}return[M,b]}function UC(l,d,p){var b=Fn,T=oa(),M=er;if(M){if(p===void 0)throw Error(r(407));p=p()}else p=d();var re=!Ba((pr||T).memoizedState,p);re&&(T.memoizedState=p,va=!0),T=T.queue;var we=VC.bind(null,b,T,l);if(hp(2048,8,we,[l]),T.getSnapshot!==d||re||ia!==null&&ia.memoizedState.tag&1){if(b.flags|=2048,Jd(9,Tg(),HC.bind(null,b,T,p,d),null),kr===null)throw Error(r(349));M||(ru&124)!==0||qC(b,d,p)}return p}function qC(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=Fn.updateQueue,d===null?(d=b1(),Fn.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function HC(l,d,p,b){d.value=p,d.getSnapshot=b,GC(d)&&WC(l)}function VC(l,d,p){return p(function(){GC(d)&&WC(l)})}function GC(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Ba(l,p)}catch{return!0}}function WC(l){var d=Eo(l,2);d!==null&&Li(d,l,2)}function x1(l){var d=yi();if(typeof l=="function"){var p=l;if(l=p(),kc){Rt(!0);try{p()}finally{Rt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:l},d}function KC(l,d,p,b){return l.baseState=p,w1(l,pr,typeof b=="function"?b:rl)}function vL(l,d,p,b,T){if(Ng(l))throw Error(r(485));if(l=d.action,l!==null){var M={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(re){M.listeners.push(re)}};ue.T!==null?p(!0):M.isTransition=!1,b(M),p=d.pending,p===null?(M.next=d.pending=M,ZC(d,M)):(M.next=p.next,d.pending=p.next=M)}}function ZC(l,d){var p=d.action,b=d.payload,T=l.state;if(d.isTransition){var M=ue.T,re={};ue.T=re;try{var we=p(T,b),Be=ue.S;Be!==null&&Be(re,we),YC(l,d,we)}catch(ut){S1(l,d,ut)}finally{ue.T=M}}else try{M=p(T,b),YC(l,d,M)}catch(ut){S1(l,d,ut)}}function YC(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(b){XC(l,d,b)},function(b){return S1(l,d,b)}):XC(l,d,p)}function XC(l,d,p){d.status="fulfilled",d.value=p,JC(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,ZC(l,p)))}function S1(l,d,p){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=p,JC(d),d=d.next;while(d!==b)}l.action=null}function JC(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function QC(l,d){return d}function eA(l,d){if(er){var p=kr.formState;if(p!==null){e:{var b=Fn;if(er){if(Vr){t:{for(var T=Vr,M=ss;T.nodeType!==8;){if(!M){T=null;break t}if(T=Co(T.nextSibling),T===null){T=null;break t}}M=T.data,T=M==="F!"||M==="F"?T:null}if(T){Vr=Co(T.nextSibling),b=T.data==="F!";break e}}_c(b)}b=!1}b&&(d=p[0])}}return p=yi(),p.memoizedState=p.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QC,lastRenderedState:d},p.queue=b,p=vA.bind(null,Fn,b),b.dispatch=p,b=x1(!1),M=T1.bind(null,Fn,!1,b.queue),b=yi(),T={state:d,dispatch:null,action:l,pending:null},b.queue=T,p=vL.bind(null,Fn,T,M,p),T.dispatch=p,b.memoizedState=l,[d,p,!1]}function tA(l){var d=oa();return nA(d,pr,l)}function nA(l,d,p){if(d=w1(l,d,QC)[0],l=Ag(rl)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=fp(d)}catch(re){throw re===op?_g:re}else b=d;d=oa();var T=d.queue,M=T.dispatch;return p!==d.memoizedState&&(Fn.flags|=2048,Jd(9,Tg(),wL.bind(null,T,p),null)),[b,M,l]}function wL(l,d){l.action=d}function rA(l){var d=oa(),p=pr;if(p!==null)return nA(d,p,l);oa(),d=d.memoizedState,p=oa();var b=p.queue.dispatch;return p.memoizedState=l,[d,b,!1]}function Jd(l,d,p,b){return l={tag:l,create:p,deps:b,inst:d,next:null},d=Fn.updateQueue,d===null&&(d=b1(),Fn.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(b=p.next,p.next=l,l.next=b,d.lastEffect=l),l}function Tg(){return{destroy:void 0,resource:void 0}}function aA(){return oa().memoizedState}function Rg(l,d,p,b){var T=yi();b=b===void 0?null:b,Fn.flags|=l,T.memoizedState=Jd(1|d,Tg(),p,b)}function hp(l,d,p,b){var T=oa();b=b===void 0?null:b;var M=T.memoizedState.inst;pr!==null&&b!==null&&h1(b,pr.memoizedState.deps)?T.memoizedState=Jd(d,M,p,b):(Fn.flags|=l,T.memoizedState=Jd(1|d,M,p,b))}function iA(l,d){Rg(8390656,8,l,d)}function oA(l,d){hp(2048,8,l,d)}function sA(l,d){return hp(4,2,l,d)}function lA(l,d){return hp(4,4,l,d)}function uA(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function cA(l,d,p){p=p!=null?p.concat([l]):null,hp(4,4,uA.bind(null,d,l),p)}function E1(){}function dA(l,d){var p=oa();d=d===void 0?null:d;var b=p.memoizedState;return d!==null&&h1(d,b[1])?b[0]:(p.memoizedState=[l,d],l)}function fA(l,d){var p=oa();d=d===void 0?null:d;var b=p.memoizedState;if(d!==null&&h1(d,b[1]))return b[0];if(b=l(),kc){Rt(!0);try{l()}finally{Rt(!1)}}return p.memoizedState=[b,d],b}function k1(l,d,p){return p===void 0||(ru&1073741824)!==0?l.memoizedState=d:(l.memoizedState=p,l=mT(),Fn.lanes|=l,cu|=l,p)}function hA(l,d,p,b){return Ba(p,d)?p:Zd.current!==null?(l=k1(l,p,b),Ba(l,d)||(va=!0),l):(ru&42)===0?(va=!0,l.memoizedState=p):(l=mT(),Fn.lanes|=l,cu|=l,d)}function pA(l,d,p,b,T){var M=Y.p;Y.p=M!==0&&8>M?M:8;var re=ue.T,we={};ue.T=we,T1(l,!1,d,p);try{var Be=T(),ut=ue.S;if(ut!==null&&ut(we,Be),Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var St=gL(Be,b);pp(l,d,St,Fi(l))}else pp(l,d,b,Fi(l))}catch(At){pp(l,d,{then:function(){},status:"rejected",reason:At},Fi())}finally{Y.p=M,ue.T=re}}function _L(){}function C1(l,d,p,b){if(l.tag!==5)throw Error(r(476));var T=mA(l).queue;pA(l,T,d,X,p===null?_L:function(){return gA(l),p(b)})}function mA(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:X},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function gA(l){var d=mA(l).next.queue;pp(l,d,{},Fi())}function A1(){return za(Op)}function yA(){return oa().memoizedState}function bA(){return oa().memoizedState}function xL(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=Fi();l=tu(p);var b=nu(d,l,p);b!==null&&(Li(b,d,p),lp(b,d,p)),d={cache:r1()},l.payload=d;return}d=d.return}}function SL(l,d,p){var b=Fi();p={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Ng(l)?wA(d,p):(p=aa(l,d,p,b),p!==null&&(Li(p,l,b),_A(p,d,b)))}function vA(l,d,p){var b=Fi();pp(l,d,p,b)}function pp(l,d,p,b){var T={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ng(l))wA(d,T);else{var M=l.alternate;if(l.lanes===0&&(M===null||M.lanes===0)&&(M=d.lastRenderedReducer,M!==null))try{var re=d.lastRenderedState,we=M(re,p);if(T.hasEagerState=!0,T.eagerState=we,Ba(we,re))return Yr(l,d,T,0),kr===null&&bn(),!1}catch{}finally{}if(p=aa(l,d,T,b),p!==null)return Li(p,l,b),_A(p,d,b),!0}return!1}function T1(l,d,p,b){if(b={lane:2,revertLane:o_(),action:b,hasEagerState:!1,eagerState:null,next:null},Ng(l)){if(d)throw Error(r(479))}else d=aa(l,p,b,2),d!==null&&Li(d,l,2)}function Ng(l){var d=l.alternate;return l===Fn||d!==null&&d===Fn}function wA(l,d){Yd=Eg=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function _A(l,d,p){if((p&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Je(l,p)}}var Ig={readContext:za,use:Cg,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useLayoutEffect:Xr,useInsertionEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useSyncExternalStore:Xr,useId:Xr,useHostTransitionStatus:Xr,useFormState:Xr,useActionState:Xr,useOptimistic:Xr,useMemoCache:Xr,useCacheRefresh:Xr},xA={readContext:za,use:Cg,useCallback:function(l,d){return yi().memoizedState=[l,d===void 0?null:d],l},useContext:za,useEffect:iA,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Rg(4194308,4,uA.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Rg(4194308,4,l,d)},useInsertionEffect:function(l,d){Rg(4,2,l,d)},useMemo:function(l,d){var p=yi();d=d===void 0?null:d;var b=l();if(kc){Rt(!0);try{l()}finally{Rt(!1)}}return p.memoizedState=[b,d],b},useReducer:function(l,d,p){var b=yi();if(p!==void 0){var T=p(d);if(kc){Rt(!0);try{p(d)}finally{Rt(!1)}}}else T=d;return b.memoizedState=b.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},b.queue=l,l=l.dispatch=SL.bind(null,Fn,l),[b.memoizedState,l]},useRef:function(l){var d=yi();return l={current:l},d.memoizedState=l},useState:function(l){l=x1(l);var d=l.queue,p=vA.bind(null,Fn,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:E1,useDeferredValue:function(l,d){var p=yi();return k1(p,l,d)},useTransition:function(){var l=x1(!1);return l=pA.bind(null,Fn,l.queue,!0,!1),yi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var b=Fn,T=yi();if(er){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),kr===null)throw Error(r(349));(Gn&124)!==0||qC(b,d,p)}T.memoizedState=p;var M={value:p,getSnapshot:d};return T.queue=M,iA(VC.bind(null,b,M,l),[l]),b.flags|=2048,Jd(9,Tg(),HC.bind(null,b,M,p,d),null),p},useId:function(){var l=yi(),d=kr.identifierPrefix;if(er){var p=el,b=Qs;p=(b&~(1<<32-Kt(b)-1)).toString(32)+p,d=""+d+"R"+p,p=kg++,0<p&&(d+="H"+p.toString(32)),d+=""}else p=yL++,d=""+d+"r"+p.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:A1,useFormState:eA,useActionState:eA,useOptimistic:function(l){var d=yi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=T1.bind(null,Fn,!0,p),p.dispatch=d,[l,d]},useMemoCache:v1,useCacheRefresh:function(){return yi().memoizedState=xL.bind(null,Fn)}},SA={readContext:za,use:Cg,useCallback:dA,useContext:za,useEffect:oA,useImperativeHandle:cA,useInsertionEffect:sA,useLayoutEffect:lA,useMemo:fA,useReducer:Ag,useRef:aA,useState:function(){return Ag(rl)},useDebugValue:E1,useDeferredValue:function(l,d){var p=oa();return hA(p,pr.memoizedState,l,d)},useTransition:function(){var l=Ag(rl)[0],d=oa().memoizedState;return[typeof l=="boolean"?l:fp(l),d]},useSyncExternalStore:UC,useId:yA,useHostTransitionStatus:A1,useFormState:tA,useActionState:tA,useOptimistic:function(l,d){var p=oa();return KC(p,pr,l,d)},useMemoCache:v1,useCacheRefresh:bA},EL={readContext:za,use:Cg,useCallback:dA,useContext:za,useEffect:oA,useImperativeHandle:cA,useInsertionEffect:sA,useLayoutEffect:lA,useMemo:fA,useReducer:_1,useRef:aA,useState:function(){return _1(rl)},useDebugValue:E1,useDeferredValue:function(l,d){var p=oa();return pr===null?k1(p,l,d):hA(p,pr.memoizedState,l,d)},useTransition:function(){var l=_1(rl)[0],d=oa().memoizedState;return[typeof l=="boolean"?l:fp(l),d]},useSyncExternalStore:UC,useId:yA,useHostTransitionStatus:A1,useFormState:rA,useActionState:rA,useOptimistic:function(l,d){var p=oa();return pr!==null?KC(p,pr,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:v1,useCacheRefresh:bA},Qd=null,mp=0;function Og(l){var d=mp;return mp+=1,Qd===null&&(Qd=[]),DC(Qd,l,d)}function gp(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function jg(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function EA(l){var d=l._init;return d(l._payload)}function kA(l){function d(nt,Ke){if(l){var lt=nt.deletions;lt===null?(nt.deletions=[Ke],nt.flags|=16):lt.push(Ke)}}function p(nt,Ke){if(!l)return null;for(;Ke!==null;)d(nt,Ke),Ke=Ke.sibling;return null}function b(nt){for(var Ke=new Map;nt!==null;)nt.key!==null?Ke.set(nt.key,nt):Ke.set(nt.index,nt),nt=nt.sibling;return Ke}function T(nt,Ke){return nt=Js(nt,Ke),nt.index=0,nt.sibling=null,nt}function M(nt,Ke,lt){return nt.index=lt,l?(lt=nt.alternate,lt!==null?(lt=lt.index,lt<Ke?(nt.flags|=67108866,Ke):lt):(nt.flags|=67108866,Ke)):(nt.flags|=1048576,Ke)}function re(nt){return l&&nt.alternate===null&&(nt.flags|=67108866),nt}function we(nt,Ke,lt,kt){return Ke===null||Ke.tag!==6?(Ke=Zw(lt,nt.mode,kt),Ke.return=nt,Ke):(Ke=T(Ke,lt),Ke.return=nt,Ke)}function Be(nt,Ke,lt,kt){var Qt=lt.type;return Qt===v?St(nt,Ke,lt.props.children,kt,lt.key):Ke!==null&&(Ke.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===N&&EA(Qt)===Ke.type)?(Ke=T(Ke,lt.props),gp(Ke,lt),Ke.return=nt,Ke):(Ke=mg(lt.type,lt.key,lt.props,null,nt.mode,kt),gp(Ke,lt),Ke.return=nt,Ke)}function ut(nt,Ke,lt,kt){return Ke===null||Ke.tag!==4||Ke.stateNode.containerInfo!==lt.containerInfo||Ke.stateNode.implementation!==lt.implementation?(Ke=Yw(lt,nt.mode,kt),Ke.return=nt,Ke):(Ke=T(Ke,lt.children||[]),Ke.return=nt,Ke)}function St(nt,Ke,lt,kt,Qt){return Ke===null||Ke.tag!==7?(Ke=yc(lt,nt.mode,kt,Qt),Ke.return=nt,Ke):(Ke=T(Ke,lt),Ke.return=nt,Ke)}function At(nt,Ke,lt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ke=Zw(""+Ke,nt.mode,lt),Ke.return=nt,Ke;if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case m:return lt=mg(Ke.type,Ke.key,Ke.props,null,nt.mode,lt),gp(lt,Ke),lt.return=nt,lt;case g:return Ke=Yw(Ke,nt.mode,lt),Ke.return=nt,Ke;case N:var kt=Ke._init;return Ke=kt(Ke._payload),At(nt,Ke,lt)}if(fe(Ke)||P(Ke))return Ke=yc(Ke,nt.mode,lt,null),Ke.return=nt,Ke;if(typeof Ke.then=="function")return At(nt,Og(Ke),lt);if(Ke.$$typeof===E)return At(nt,vg(nt,Ke),lt);jg(nt,Ke)}return null}function pt(nt,Ke,lt,kt){var Qt=Ke!==null?Ke.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Qt!==null?null:we(nt,Ke,""+lt,kt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:return lt.key===Qt?Be(nt,Ke,lt,kt):null;case g:return lt.key===Qt?ut(nt,Ke,lt,kt):null;case N:return Qt=lt._init,lt=Qt(lt._payload),pt(nt,Ke,lt,kt)}if(fe(lt)||P(lt))return Qt!==null?null:St(nt,Ke,lt,kt,null);if(typeof lt.then=="function")return pt(nt,Ke,Og(lt),kt);if(lt.$$typeof===E)return pt(nt,Ke,vg(nt,lt),kt);jg(nt,lt)}return null}function mt(nt,Ke,lt,kt,Qt){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return nt=nt.get(lt)||null,we(Ke,nt,""+kt,Qt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case m:return nt=nt.get(kt.key===null?lt:kt.key)||null,Be(Ke,nt,kt,Qt);case g:return nt=nt.get(kt.key===null?lt:kt.key)||null,ut(Ke,nt,kt,Qt);case N:var $n=kt._init;return kt=$n(kt._payload),mt(nt,Ke,lt,kt,Qt)}if(fe(kt)||P(kt))return nt=nt.get(lt)||null,St(Ke,nt,kt,Qt,null);if(typeof kt.then=="function")return mt(nt,Ke,lt,Og(kt),Qt);if(kt.$$typeof===E)return mt(nt,Ke,lt,vg(Ke,kt),Qt);jg(Ke,kt)}return null}function vn(nt,Ke,lt,kt){for(var Qt=null,$n=null,on=Ke,gn=Ke=0,_a=null;on!==null&&gn<lt.length;gn++){on.index>gn?(_a=on,on=null):_a=on.sibling;var Jn=pt(nt,on,lt[gn],kt);if(Jn===null){on===null&&(on=_a);break}l&&on&&Jn.alternate===null&&d(nt,on),Ke=M(Jn,Ke,gn),$n===null?Qt=Jn:$n.sibling=Jn,$n=Jn,on=_a}if(gn===lt.length)return p(nt,on),er&&vc(nt,gn),Qt;if(on===null){for(;gn<lt.length;gn++)on=At(nt,lt[gn],kt),on!==null&&(Ke=M(on,Ke,gn),$n===null?Qt=on:$n.sibling=on,$n=on);return er&&vc(nt,gn),Qt}for(on=b(on);gn<lt.length;gn++)_a=mt(on,nt,gn,lt[gn],kt),_a!==null&&(l&&_a.alternate!==null&&on.delete(_a.key===null?gn:_a.key),Ke=M(_a,Ke,gn),$n===null?Qt=_a:$n.sibling=_a,$n=_a);return l&&on.forEach(function(vu){return d(nt,vu)}),er&&vc(nt,gn),Qt}function hn(nt,Ke,lt,kt){if(lt==null)throw Error(r(151));for(var Qt=null,$n=null,on=Ke,gn=Ke=0,_a=null,Jn=lt.next();on!==null&&!Jn.done;gn++,Jn=lt.next()){on.index>gn?(_a=on,on=null):_a=on.sibling;var vu=pt(nt,on,Jn.value,kt);if(vu===null){on===null&&(on=_a);break}l&&on&&vu.alternate===null&&d(nt,on),Ke=M(vu,Ke,gn),$n===null?Qt=vu:$n.sibling=vu,$n=vu,on=_a}if(Jn.done)return p(nt,on),er&&vc(nt,gn),Qt;if(on===null){for(;!Jn.done;gn++,Jn=lt.next())Jn=At(nt,Jn.value,kt),Jn!==null&&(Ke=M(Jn,Ke,gn),$n===null?Qt=Jn:$n.sibling=Jn,$n=Jn);return er&&vc(nt,gn),Qt}for(on=b(on);!Jn.done;gn++,Jn=lt.next())Jn=mt(on,nt,gn,Jn.value,kt),Jn!==null&&(l&&Jn.alternate!==null&&on.delete(Jn.key===null?gn:Jn.key),Ke=M(Jn,Ke,gn),$n===null?Qt=Jn:$n.sibling=Jn,$n=Jn);return l&&on.forEach(function(k$){return d(nt,k$)}),er&&vc(nt,gn),Qt}function gr(nt,Ke,lt,kt){if(typeof lt=="object"&&lt!==null&&lt.type===v&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:e:{for(var Qt=lt.key;Ke!==null;){if(Ke.key===Qt){if(Qt=lt.type,Qt===v){if(Ke.tag===7){p(nt,Ke.sibling),kt=T(Ke,lt.props.children),kt.return=nt,nt=kt;break e}}else if(Ke.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===N&&EA(Qt)===Ke.type){p(nt,Ke.sibling),kt=T(Ke,lt.props),gp(kt,lt),kt.return=nt,nt=kt;break e}p(nt,Ke);break}else d(nt,Ke);Ke=Ke.sibling}lt.type===v?(kt=yc(lt.props.children,nt.mode,kt,lt.key),kt.return=nt,nt=kt):(kt=mg(lt.type,lt.key,lt.props,null,nt.mode,kt),gp(kt,lt),kt.return=nt,nt=kt)}return re(nt);case g:e:{for(Qt=lt.key;Ke!==null;){if(Ke.key===Qt)if(Ke.tag===4&&Ke.stateNode.containerInfo===lt.containerInfo&&Ke.stateNode.implementation===lt.implementation){p(nt,Ke.sibling),kt=T(Ke,lt.children||[]),kt.return=nt,nt=kt;break e}else{p(nt,Ke);break}else d(nt,Ke);Ke=Ke.sibling}kt=Yw(lt,nt.mode,kt),kt.return=nt,nt=kt}return re(nt);case N:return Qt=lt._init,lt=Qt(lt._payload),gr(nt,Ke,lt,kt)}if(fe(lt))return vn(nt,Ke,lt,kt);if(P(lt)){if(Qt=P(lt),typeof Qt!="function")throw Error(r(150));return lt=Qt.call(lt),hn(nt,Ke,lt,kt)}if(typeof lt.then=="function")return gr(nt,Ke,Og(lt),kt);if(lt.$$typeof===E)return gr(nt,Ke,vg(nt,lt),kt);jg(nt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Ke!==null&&Ke.tag===6?(p(nt,Ke.sibling),kt=T(Ke,lt),kt.return=nt,nt=kt):(p(nt,Ke),kt=Zw(lt,nt.mode,kt),kt.return=nt,nt=kt),re(nt)):p(nt,Ke)}return function(nt,Ke,lt,kt){try{mp=0;var Qt=gr(nt,Ke,lt,kt);return Qd=null,Qt}catch(on){if(on===op||on===_g)throw on;var $n=ji(29,on,null,nt.mode);return $n.lanes=kt,$n.return=nt,$n}finally{}}}var ef=kA(!0),CA=kA(!1),ro=Q(null),ls=null;function au(l){var d=l.alternate;de(da,da.current&1),de(ro,l),ls===null&&(d===null||Zd.current!==null||d.memoizedState!==null)&&(ls=l)}function AA(l){if(l.tag===22){if(de(da,da.current),de(ro,l),ls===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(ls=l)}}else iu()}function iu(){de(da,da.current),de(ro,ro.current)}function al(l){ne(ro),ls===l&&(ls=null),ne(da)}var da=Q(0);function Dg(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||b_(p)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function R1(l,d,p,b){d=l.memoizedState,p=p(b,d),p=p==null?d:f({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var N1={enqueueSetState:function(l,d,p){l=l._reactInternals;var b=Fi(),T=tu(b);T.payload=d,p!=null&&(T.callback=p),d=nu(l,T,b),d!==null&&(Li(d,l,b),lp(d,l,b))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var b=Fi(),T=tu(b);T.tag=1,T.payload=d,p!=null&&(T.callback=p),d=nu(l,T,b),d!==null&&(Li(d,l,b),lp(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=Fi(),b=tu(p);b.tag=2,d!=null&&(b.callback=d),d=nu(l,b,p),d!==null&&(Li(d,l,p),lp(d,l,p))}};function TA(l,d,p,b,T,M,re){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,M,re):d.prototype&&d.prototype.isPureReactComponent?!C(p,b)||!C(T,M):!0}function RA(l,d,p,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,b),d.state!==l&&N1.enqueueReplaceState(d,d.state,null)}function Cc(l,d){var p=d;if("ref"in d){p={};for(var b in d)b!=="ref"&&(p[b]=d[b])}if(l=l.defaultProps){p===d&&(p=f({},p));for(var T in l)p[T]===void 0&&(p[T]=l[T])}return p}var Mg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof Wr=="object"&&typeof Wr.emit=="function"){Wr.emit("uncaughtException",l);return}console.error(l)};function NA(l){Mg(l)}function IA(l){console.error(l)}function OA(l){Mg(l)}function Pg(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function jA(l,d,p){try{var b=l.onCaughtError;b(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function I1(l,d,p){return p=tu(p),p.tag=3,p.payload={element:null},p.callback=function(){Pg(l,d)},p}function DA(l){return l=tu(l),l.tag=3,l}function MA(l,d,p,b){var T=p.type.getDerivedStateFromError;if(typeof T=="function"){var M=b.value;l.payload=function(){return T(M)},l.callback=function(){jA(d,p,b)}}var re=p.stateNode;re!==null&&typeof re.componentDidCatch=="function"&&(l.callback=function(){jA(d,p,b),typeof T!="function"&&(du===null?du=new Set([this]):du.add(this));var we=b.stack;this.componentDidCatch(b.value,{componentStack:we!==null?we:""})})}function kL(l,d,p,b,T){if(p.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=p.alternate,d!==null&&rp(d,p,T,!0),p=ro.current,p!==null){switch(p.tag){case 13:return ls===null?t_():p.alternate===null&&Gr===0&&(Gr=3),p.flags&=-257,p.flags|=65536,p.lanes=T,b===o1?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([b]):d.add(b),r_(l,b,T)),!1;case 22:return p.flags|=65536,b===o1?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([b]):p.add(b)),r_(l,b,T)),!1}throw Error(r(435,p.tag))}return r_(l,b,T),t_(),!1}if(er)return d=ro.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,b!==Qw&&(l=Error(r(422),{cause:b}),np(un(l,p)))):(b!==Qw&&(d=Error(r(423),{cause:b}),np(un(d,p))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,b=un(b,p),T=I1(l.stateNode,b,T),u1(l,T),Gr!==4&&(Gr=2)),!1;var M=Error(r(520),{cause:b});if(M=un(M,p),Sp===null?Sp=[M]:Sp.push(M),Gr!==4&&(Gr=2),d===null)return!0;b=un(b,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=T&-T,p.lanes|=l,l=I1(p.stateNode,b,l),u1(p,l),!1;case 1:if(d=p.type,M=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(du===null||!du.has(M))))return p.flags|=65536,T&=-T,p.lanes|=T,T=DA(T),MA(T,l,p,b),u1(p,T),!1}p=p.return}while(p!==null);return!1}var PA=Error(r(461)),va=!1;function Oa(l,d,p,b){d.child=l===null?CA(d,null,p,b):ef(d,l.child,p,b)}function FA(l,d,p,b,T){p=p.render;var M=d.ref;if("ref"in b){var re={};for(var we in b)we!=="ref"&&(re[we]=b[we])}else re=b;return Sc(d),b=p1(l,d,p,re,M,T),we=m1(),l!==null&&!va?(g1(l,d,T),il(l,d,T)):(er&&we&&Xw(d),d.flags|=1,Oa(l,d,b,T),d.child)}function LA(l,d,p,b,T){if(l===null){var M=p.type;return typeof M=="function"&&!Kw(M)&&M.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=M,$A(l,d,M,b,T)):(l=mg(p.type,null,b,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(M=l.child,!$1(l,T)){var re=M.memoizedProps;if(p=p.compare,p=p!==null?p:C,p(re,b)&&l.ref===d.ref)return il(l,d,T)}return d.flags|=1,l=Js(M,b),l.ref=d.ref,l.return=d,d.child=l}function $A(l,d,p,b,T){if(l!==null){var M=l.memoizedProps;if(C(M,b)&&l.ref===d.ref)if(va=!1,d.pendingProps=b=M,$1(l,T))(l.flags&131072)!==0&&(va=!0);else return d.lanes=l.lanes,il(l,d,T)}return O1(l,d,p,b,T)}function BA(l,d,p){var b=d.pendingProps,T=b.children,M=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((d.flags&128)!==0){if(b=M!==null?M.baseLanes|p:p,l!==null){for(T=d.child=l.child,M=0;T!==null;)M=M|T.lanes|T.childLanes,T=T.sibling;d.childLanes=M&~b}else d.childLanes=0,d.child=null;return zA(l,d,b,p)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&wg(d,M!==null?M.cachePool:null),M!==null?$C(d,M):d1(),AA(d);else return d.lanes=d.childLanes=536870912,zA(l,d,M!==null?M.baseLanes|p:p,p)}else M!==null?(wg(d,M.cachePool),$C(d,M),iu(),d.memoizedState=null):(l!==null&&wg(d,null),d1(),iu());return Oa(l,d,T,p),d.child}function zA(l,d,p,b){var T=i1();return T=T===null?null:{parent:ca._currentValue,pool:T},d.memoizedState={baseLanes:p,cachePool:T},l!==null&&wg(d,null),d1(),AA(d),l!==null&&rp(l,d,b,!0),null}function Fg(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function O1(l,d,p,b,T){return Sc(d),p=p1(l,d,p,b,void 0,T),b=m1(),l!==null&&!va?(g1(l,d,T),il(l,d,T)):(er&&b&&Xw(d),d.flags|=1,Oa(l,d,p,T),d.child)}function UA(l,d,p,b,T,M){return Sc(d),d.updateQueue=null,p=zC(d,b,p,T),BC(l),b=m1(),l!==null&&!va?(g1(l,d,M),il(l,d,M)):(er&&b&&Xw(d),d.flags|=1,Oa(l,d,p,M),d.child)}function qA(l,d,p,b,T){if(Sc(d),d.stateNode===null){var M=os,re=p.contextType;typeof re=="object"&&re!==null&&(M=za(re)),M=new p(b,M),d.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=N1,d.stateNode=M,M._reactInternals=d,M=d.stateNode,M.props=b,M.state=d.memoizedState,M.refs={},s1(d),re=p.contextType,M.context=typeof re=="object"&&re!==null?za(re):os,M.state=d.memoizedState,re=p.getDerivedStateFromProps,typeof re=="function"&&(R1(d,p,re,b),M.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(re=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),re!==M.state&&N1.enqueueReplaceState(M,M.state,null),cp(d,b,M,T),up(),M.state=d.memoizedState),typeof M.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){M=d.stateNode;var we=d.memoizedProps,Be=Cc(p,we);M.props=Be;var ut=M.context,St=p.contextType;re=os,typeof St=="object"&&St!==null&&(re=za(St));var At=p.getDerivedStateFromProps;St=typeof At=="function"||typeof M.getSnapshotBeforeUpdate=="function",we=d.pendingProps!==we,St||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(we||ut!==re)&&RA(d,M,b,re),eu=!1;var pt=d.memoizedState;M.state=pt,cp(d,b,M,T),up(),ut=d.memoizedState,we||pt!==ut||eu?(typeof At=="function"&&(R1(d,p,At,b),ut=d.memoizedState),(Be=eu||TA(d,p,Be,b,pt,ut,re))?(St||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(d.flags|=4194308)):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ut),M.props=b,M.state=ut,M.context=re,b=Be):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{M=d.stateNode,l1(l,d),re=d.memoizedProps,St=Cc(p,re),M.props=St,At=d.pendingProps,pt=M.context,ut=p.contextType,Be=os,typeof ut=="object"&&ut!==null&&(Be=za(ut)),we=p.getDerivedStateFromProps,(ut=typeof we=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(re!==At||pt!==Be)&&RA(d,M,b,Be),eu=!1,pt=d.memoizedState,M.state=pt,cp(d,b,M,T),up();var mt=d.memoizedState;re!==At||pt!==mt||eu||l!==null&&l.dependencies!==null&&bg(l.dependencies)?(typeof we=="function"&&(R1(d,p,we,b),mt=d.memoizedState),(St=eu||TA(d,p,St,b,pt,mt,Be)||l!==null&&l.dependencies!==null&&bg(l.dependencies))?(ut||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(b,mt,Be),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(b,mt,Be)),typeof M.componentDidUpdate=="function"&&(d.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof M.componentDidUpdate!="function"||re===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=mt),M.props=b,M.state=mt,M.context=Be,b=St):(typeof M.componentDidUpdate!="function"||re===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),b=!1)}return M=b,Fg(l,d),b=(d.flags&128)!==0,M||b?(M=d.stateNode,p=b&&typeof p.getDerivedStateFromError!="function"?null:M.render(),d.flags|=1,l!==null&&b?(d.child=ef(d,l.child,null,T),d.child=ef(d,null,p,T)):Oa(l,d,p,T),d.memoizedState=M.state,l=d.child):l=il(l,d,T),l}function HA(l,d,p,b){return tp(),d.flags|=256,Oa(l,d,p,b),d.child}var j1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function D1(l){return{baseLanes:l,cachePool:IC()}}function M1(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=ao),l}function VA(l,d,p){var b=d.pendingProps,T=!1,M=(d.flags&128)!==0,re;if((re=M)||(re=l!==null&&l.memoizedState===null?!1:(da.current&2)!==0),re&&(T=!0,d.flags&=-129),re=(d.flags&32)!==0,d.flags&=-33,l===null){if(er){if(T?au(d):iu(),er){var we=Vr,Be;if(Be=we){e:{for(Be=we,we=ss;Be.nodeType!==8;){if(!we){we=null;break e}if(Be=Co(Be.nextSibling),Be===null){we=null;break e}}we=Be}we!==null?(d.memoizedState={dehydrated:we,treeContext:bc!==null?{id:Qs,overflow:el}:null,retryLane:536870912,hydrationErrors:null},Be=ji(18,null,null,0),Be.stateNode=we,Be.return=d,d.child=Be,ai=d,Vr=null,Be=!0):Be=!1}Be||_c(d)}if(we=d.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return b_(we)?d.lanes=32:d.lanes=536870912,null;al(d)}return we=b.children,b=b.fallback,T?(iu(),T=d.mode,we=Lg({mode:"hidden",children:we},T),b=yc(b,T,p,null),we.return=d,b.return=d,we.sibling=b,d.child=we,T=d.child,T.memoizedState=D1(p),T.childLanes=M1(l,re,p),d.memoizedState=j1,b):(au(d),P1(d,we))}if(Be=l.memoizedState,Be!==null&&(we=Be.dehydrated,we!==null)){if(M)d.flags&256?(au(d),d.flags&=-257,d=F1(l,d,p)):d.memoizedState!==null?(iu(),d.child=l.child,d.flags|=128,d=null):(iu(),T=b.fallback,we=d.mode,b=Lg({mode:"visible",children:b.children},we),T=yc(T,we,p,null),T.flags|=2,b.return=d,T.return=d,b.sibling=T,d.child=b,ef(d,l.child,null,p),b=d.child,b.memoizedState=D1(p),b.childLanes=M1(l,re,p),d.memoizedState=j1,d=T);else if(au(d),b_(we)){if(re=we.nextSibling&&we.nextSibling.dataset,re)var ut=re.dgst;re=ut,b=Error(r(419)),b.stack="",b.digest=re,np({value:b,source:null,stack:null}),d=F1(l,d,p)}else if(va||rp(l,d,p,!1),re=(p&l.childLanes)!==0,va||re){if(re=kr,re!==null&&(b=p&-p,b=(b&42)!==0?1:It(b),b=(b&(re.suspendedLanes|p))!==0?0:b,b!==0&&b!==Be.retryLane))throw Be.retryLane=b,Eo(l,b),Li(re,l,b),PA;we.data==="$?"||t_(),d=F1(l,d,p)}else we.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=Be.treeContext,Vr=Co(we.nextSibling),ai=d,er=!0,wc=null,ss=!1,l!==null&&(to[no++]=Qs,to[no++]=el,to[no++]=bc,Qs=l.id,el=l.overflow,bc=d),d=P1(d,b.children),d.flags|=4096);return d}return T?(iu(),T=b.fallback,we=d.mode,Be=l.child,ut=Be.sibling,b=Js(Be,{mode:"hidden",children:b.children}),b.subtreeFlags=Be.subtreeFlags&65011712,ut!==null?T=Js(ut,T):(T=yc(T,we,p,null),T.flags|=2),T.return=d,b.return=d,b.sibling=T,d.child=b,b=T,T=d.child,we=l.child.memoizedState,we===null?we=D1(p):(Be=we.cachePool,Be!==null?(ut=ca._currentValue,Be=Be.parent!==ut?{parent:ut,pool:ut}:Be):Be=IC(),we={baseLanes:we.baseLanes|p,cachePool:Be}),T.memoizedState=we,T.childLanes=M1(l,re,p),d.memoizedState=j1,b):(au(d),p=l.child,l=p.sibling,p=Js(p,{mode:"visible",children:b.children}),p.return=d,p.sibling=null,l!==null&&(re=d.deletions,re===null?(d.deletions=[l],d.flags|=16):re.push(l)),d.child=p,d.memoizedState=null,p)}function P1(l,d){return d=Lg({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Lg(l,d){return l=ji(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function F1(l,d,p){return ef(d,l.child,null,p),l=P1(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function GA(l,d,p){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),t1(l.return,d,p)}function L1(l,d,p,b,T){var M=l.memoizedState;M===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:T}:(M.isBackwards=d,M.rendering=null,M.renderingStartTime=0,M.last=b,M.tail=p,M.tailMode=T)}function WA(l,d,p){var b=d.pendingProps,T=b.revealOrder,M=b.tail;if(Oa(l,d,b.children,p),b=da.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&GA(l,p,d);else if(l.tag===19)GA(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(de(da,b),T){case"forwards":for(p=d.child,T=null;p!==null;)l=p.alternate,l!==null&&Dg(l)===null&&(T=p),p=p.sibling;p=T,p===null?(T=d.child,d.child=null):(T=p.sibling,p.sibling=null),L1(d,!1,T,p,M);break;case"backwards":for(p=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&Dg(l)===null){d.child=T;break}l=T.sibling,T.sibling=p,p=T,T=l}L1(d,!0,p,null,M);break;case"together":L1(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function il(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),cu|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(rp(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Js(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Js(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function $1(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&bg(l)))}function CL(l,d,p){switch(d.tag){case 3:Ie(d,d.stateNode.containerInfo),Ql(d,ca,l.memoizedState.cache),tp();break;case 27:case 5:Ue(d);break;case 4:Ie(d,d.stateNode.containerInfo);break;case 10:Ql(d,d.type,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(au(d),d.flags|=128,null):(p&d.child.childLanes)!==0?VA(l,d,p):(au(d),l=il(l,d,p),l!==null?l.sibling:null);au(d);break;case 19:var T=(l.flags&128)!==0;if(b=(p&d.childLanes)!==0,b||(rp(l,d,p,!1),b=(p&d.childLanes)!==0),T){if(b)return WA(l,d,p);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),de(da,da.current),b)break;return null;case 22:case 23:return d.lanes=0,BA(l,d,p);case 24:Ql(d,ca,l.memoizedState.cache)}return il(l,d,p)}function KA(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)va=!0;else{if(!$1(l,p)&&(d.flags&128)===0)return va=!1,CL(l,d,p);va=(l.flags&131072)!==0}else va=!1,er&&(d.flags&1048576)!==0&&EC(d,yg,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var b=d.elementType,T=b._init;if(b=T(b._payload),d.type=b,typeof b=="function")Kw(b)?(l=Cc(b,l),d.tag=1,d=qA(null,d,b,l,p)):(d.tag=0,d=O1(null,d,b,l,p));else{if(b!=null){if(T=b.$$typeof,T===A){d.tag=11,d=FA(null,d,b,l,p);break e}else if(T===O){d.tag=14,d=LA(null,d,b,l,p);break e}}throw d=V(b)||b,Error(r(306,d,""))}}return d;case 0:return O1(l,d,d.type,d.pendingProps,p);case 1:return b=d.type,T=Cc(b,d.pendingProps),qA(l,d,b,T,p);case 3:e:{if(Ie(d,d.stateNode.containerInfo),l===null)throw Error(r(387));b=d.pendingProps;var M=d.memoizedState;T=M.element,l1(l,d),cp(d,b,null,p);var re=d.memoizedState;if(b=re.cache,Ql(d,ca,b),b!==M.cache&&n1(d,[ca],p,!0),up(),b=re.element,M.isDehydrated)if(M={element:b,isDehydrated:!1,cache:re.cache},d.updateQueue.baseState=M,d.memoizedState=M,d.flags&256){d=HA(l,d,b,p);break e}else if(b!==T){T=un(Error(r(424)),d),np(T),d=HA(l,d,b,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Vr=Co(l.firstChild),ai=d,er=!0,wc=null,ss=!0,p=CA(d,null,b,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(tp(),b===T){d=il(l,d,p);break e}Oa(l,d,b,p)}d=d.child}return d;case 26:return Fg(l,d),l===null?(p=JT(d.type,null,d.pendingProps,null))?d.memoizedState=p:er||(p=d.type,l=d.pendingProps,b=Jg(Pe.current).createElement(p),b[he]=d,b[Ne]=l,Da(b,p,l),Dn(b),d.stateNode=b):d.memoizedState=JT(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Ue(d),l===null&&er&&(b=d.stateNode=ZT(d.type,d.pendingProps,Pe.current),ai=d,ss=!0,T=Vr,pu(d.type)?(v_=T,Vr=Co(b.firstChild)):Vr=T),Oa(l,d,d.pendingProps.children,p),Fg(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&er&&((T=b=Vr)&&(b=e$(b,d.type,d.pendingProps,ss),b!==null?(d.stateNode=b,ai=d,Vr=Co(b.firstChild),ss=!1,T=!0):T=!1),T||_c(d)),Ue(d),T=d.type,M=d.pendingProps,re=l!==null?l.memoizedProps:null,b=M.children,m_(T,M)?b=null:re!==null&&m_(T,re)&&(d.flags|=32),d.memoizedState!==null&&(T=p1(l,d,bL,null,null,p),Op._currentValue=T),Fg(l,d),Oa(l,d,b,p),d.child;case 6:return l===null&&er&&((l=p=Vr)&&(p=t$(p,d.pendingProps,ss),p!==null?(d.stateNode=p,ai=d,Vr=null,l=!0):l=!1),l||_c(d)),null;case 13:return VA(l,d,p);case 4:return Ie(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=ef(d,null,b,p):Oa(l,d,b,p),d.child;case 11:return FA(l,d,d.type,d.pendingProps,p);case 7:return Oa(l,d,d.pendingProps,p),d.child;case 8:return Oa(l,d,d.pendingProps.children,p),d.child;case 12:return Oa(l,d,d.pendingProps.children,p),d.child;case 10:return b=d.pendingProps,Ql(d,d.type,b.value),Oa(l,d,b.children,p),d.child;case 9:return T=d.type._context,b=d.pendingProps.children,Sc(d),T=za(T),b=b(T),d.flags|=1,Oa(l,d,b,p),d.child;case 14:return LA(l,d,d.type,d.pendingProps,p);case 15:return $A(l,d,d.type,d.pendingProps,p);case 19:return WA(l,d,p);case 31:return b=d.pendingProps,p=d.mode,b={mode:b.mode,children:b.children},l===null?(p=Lg(b,p),p.ref=d.ref,d.child=p,p.return=d,d=p):(p=Js(l.child,b),p.ref=d.ref,d.child=p,p.return=d,d=p),d;case 22:return BA(l,d,p);case 24:return Sc(d),b=za(ca),l===null?(T=i1(),T===null&&(T=kr,M=r1(),T.pooledCache=M,M.refCount++,M!==null&&(T.pooledCacheLanes|=p),T=M),d.memoizedState={parent:b,cache:T},s1(d),Ql(d,ca,T)):((l.lanes&p)!==0&&(l1(l,d),cp(d,null,null,p),up()),T=l.memoizedState,M=d.memoizedState,T.parent!==b?(T={parent:b,cache:b},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),Ql(d,ca,b)):(b=M.cache,Ql(d,ca,b),b!==T.cache&&n1(d,[ca],p,!0))),Oa(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function ol(l){l.flags|=4}function ZA(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!r3(d)){if(d=ro.current,d!==null&&((Gn&4194048)===Gn?ls!==null:(Gn&62914560)!==Gn&&(Gn&536870912)===0||d!==ls))throw sp=o1,OC;l.flags|=8192}}function $g(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?j():536870912,l.lanes|=d,af|=d)}function yp(l,d){if(!er)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function zr(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,b=0;if(d)for(var T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags&65011712,b|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=b,l.childLanes=p,d}function AL(l,d,p){var b=d.pendingProps;switch(Jw(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zr(d),null;case 1:return zr(d),null;case 3:return p=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),nl(ca),Te(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(ep(d)?ol(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,AC())),zr(d),null;case 26:return p=d.memoizedState,l===null?(ol(d),p!==null?(zr(d),ZA(d,p)):(zr(d),d.flags&=-16777217)):p?p!==l.memoizedState?(ol(d),zr(d),ZA(d,p)):(zr(d),d.flags&=-16777217):(l.memoizedProps!==b&&ol(d),zr(d),d.flags&=-16777217),null;case 27:Ve(d),p=Pe.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ol(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return zr(d),null}l=_e.current,ep(d)?kC(d):(l=ZT(T,b,p),d.stateNode=l,ol(d))}return zr(d),null;case 5:if(Ve(d),p=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ol(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return zr(d),null}if(l=_e.current,ep(d))kC(d);else{switch(T=Jg(Pe.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?T.createElement("select",{is:b.is}):T.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?T.createElement(p,{is:b.is}):T.createElement(p)}}l[he]=d,l[Ne]=b;e:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break e;for(;T.sibling===null;){if(T.return===null||T.return===d)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;e:switch(Da(l,p,b),p){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ol(d)}}return zr(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&ol(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(l=Pe.current,ep(d)){if(l=d.stateNode,p=d.memoizedProps,b=null,T=ai,T!==null)switch(T.tag){case 27:case 5:b=T.memoizedProps}l[he]=d,l=!!(l.nodeValue===p||b!==null&&b.suppressHydrationWarning===!0||UT(l.nodeValue,p)),l||_c(d)}else l=Jg(l).createTextNode(b),l[he]=d,d.stateNode=l}return zr(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=ep(d),b!==null&&b.dehydrated!==null){if(l===null){if(!T)throw Error(r(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[he]=d}else tp(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;zr(d),T=!1}else T=AC(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(al(d),d):(al(d),null)}if(al(d),(d.flags&128)!==0)return d.lanes=p,d;if(p=b!==null,l=l!==null&&l.memoizedState!==null,p){b=d.child,T=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(T=b.alternate.memoizedState.cachePool.pool);var M=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(M=b.memoizedState.cachePool.pool),M!==T&&(b.flags|=2048)}return p!==l&&p&&(d.child.flags|=8192),$g(d,d.updateQueue),zr(d),null;case 4:return Te(),l===null&&c_(d.stateNode.containerInfo),zr(d),null;case 10:return nl(d.type),zr(d),null;case 19:if(ne(da),T=d.memoizedState,T===null)return zr(d),null;if(b=(d.flags&128)!==0,M=T.rendering,M===null)if(b)yp(T,!1);else{if(Gr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(M=Dg(l),M!==null){for(d.flags|=128,yp(T,!1),l=M.updateQueue,d.updateQueue=l,$g(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)SC(p,l),p=p.sibling;return de(da,da.current&1|2),d.child}l=l.sibling}T.tail!==null&&se()>Ug&&(d.flags|=128,b=!0,yp(T,!1),d.lanes=4194304)}else{if(!b)if(l=Dg(M),l!==null){if(d.flags|=128,b=!0,l=l.updateQueue,d.updateQueue=l,$g(d,l),yp(T,!0),T.tail===null&&T.tailMode==="hidden"&&!M.alternate&&!er)return zr(d),null}else 2*se()-T.renderingStartTime>Ug&&p!==536870912&&(d.flags|=128,b=!0,yp(T,!1),d.lanes=4194304);T.isBackwards?(M.sibling=d.child,d.child=M):(l=T.last,l!==null?l.sibling=M:d.child=M,T.last=M)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=se(),d.sibling=null,l=da.current,de(da,b?l&1|2:l&1),d):(zr(d),null);case 22:case 23:return al(d),f1(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(p&536870912)!==0&&(d.flags&128)===0&&(zr(d),d.subtreeFlags&6&&(d.flags|=8192)):zr(d),p=d.updateQueue,p!==null&&$g(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==p&&(d.flags|=2048),l!==null&&ne(Ec),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),nl(ca),zr(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function TL(l,d){switch(Jw(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return nl(ca),Te(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Ve(d),null;case 13:if(al(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));tp()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return ne(da),null;case 4:return Te(),null;case 10:return nl(d.type),null;case 22:case 23:return al(d),f1(),l!==null&&ne(Ec),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return nl(ca),null;case 25:return null;default:return null}}function YA(l,d){switch(Jw(d),d.tag){case 3:nl(ca),Te();break;case 26:case 27:case 5:Ve(d);break;case 4:Te();break;case 13:al(d);break;case 19:ne(da);break;case 10:nl(d.type);break;case 22:case 23:al(d),f1(),l!==null&&ne(Ec);break;case 24:nl(ca)}}function bp(l,d){try{var p=d.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var T=b.next;p=T;do{if((p.tag&l)===l){b=void 0;var M=p.create,re=p.inst;b=M(),re.destroy=b}p=p.next}while(p!==T)}}catch(we){_r(d,d.return,we)}}function ou(l,d,p){try{var b=d.updateQueue,T=b!==null?b.lastEffect:null;if(T!==null){var M=T.next;b=M;do{if((b.tag&l)===l){var re=b.inst,we=re.destroy;if(we!==void 0){re.destroy=void 0,T=d;var Be=p,ut=we;try{ut()}catch(St){_r(T,Be,St)}}}b=b.next}while(b!==M)}}catch(St){_r(d,d.return,St)}}function XA(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{LC(d,p)}catch(b){_r(l,l.return,b)}}}function JA(l,d,p){p.props=Cc(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(b){_r(l,d,b)}}function vp(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof p=="function"?l.refCleanup=p(b):p.current=b}}catch(T){_r(l,d,T)}}function us(l,d){var p=l.ref,b=l.refCleanup;if(p!==null)if(typeof b=="function")try{b()}catch(T){_r(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(T){_r(l,d,T)}else p.current=null}function QA(l){var d=l.type,p=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&b.focus();break e;case"img":p.src?b.src=p.src:p.srcSet&&(b.srcset=p.srcSet)}}catch(T){_r(l,l.return,T)}}function B1(l,d,p){try{var b=l.stateNode;ZL(b,l.type,p,d),b[Ne]=d}catch(T){_r(l,l.return,T)}}function eT(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&pu(l.type)||l.tag===4}function z1(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||eT(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&pu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function U1(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=Xg));else if(b!==4&&(b===27&&pu(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(U1(l,d,p),l=l.sibling;l!==null;)U1(l,d,p),l=l.sibling}function Bg(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(b!==4&&(b===27&&pu(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Bg(l,d,p),l=l.sibling;l!==null;)Bg(l,d,p),l=l.sibling}function tT(l){var d=l.stateNode,p=l.memoizedProps;try{for(var b=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);Da(d,b,p),d[he]=l,d[Ne]=p}catch(M){_r(l,l.return,M)}}var sl=!1,Jr=!1,q1=!1,nT=typeof WeakSet=="function"?WeakSet:Set,wa=null;function RL(l,d){if(l=l.containerInfo,h_=ay,l=le(l),be(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var T=b.anchorOffset,M=b.focusNode;b=b.focusOffset;try{p.nodeType,M.nodeType}catch{p=null;break e}var re=0,we=-1,Be=-1,ut=0,St=0,At=l,pt=null;t:for(;;){for(var mt;At!==p||T!==0&&At.nodeType!==3||(we=re+T),At!==M||b!==0&&At.nodeType!==3||(Be=re+b),At.nodeType===3&&(re+=At.nodeValue.length),(mt=At.firstChild)!==null;)pt=At,At=mt;for(;;){if(At===l)break t;if(pt===p&&++ut===T&&(we=re),pt===M&&++St===b&&(Be=re),(mt=At.nextSibling)!==null)break;At=pt,pt=At.parentNode}At=mt}p=we===-1||Be===-1?null:{start:we,end:Be}}else p=null}p=p||{start:0,end:0}}else p=null;for(p_={focusedElem:l,selectionRange:p},ay=!1,wa=d;wa!==null;)if(d=wa,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,wa=l;else for(;wa!==null;){switch(d=wa,M=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&M!==null){l=void 0,p=d,T=M.memoizedProps,M=M.memoizedState,b=p.stateNode;try{var vn=Cc(p.type,T,p.elementType===p.type);l=b.getSnapshotBeforeUpdate(vn,M),b.__reactInternalSnapshotBeforeUpdate=l}catch(hn){_r(p,p.return,hn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)y_(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":y_(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,wa=l;break}wa=d.return}}function rT(l,d,p){var b=p.flags;switch(p.tag){case 0:case 11:case 15:su(l,p),b&4&&bp(5,p);break;case 1:if(su(l,p),b&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(re){_r(p,p.return,re)}else{var T=Cc(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(re){_r(p,p.return,re)}}b&64&&XA(p),b&512&&vp(p,p.return);break;case 3:if(su(l,p),b&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{LC(l,d)}catch(re){_r(p,p.return,re)}}break;case 27:d===null&&b&4&&tT(p);case 26:case 5:su(l,p),d===null&&b&4&&QA(p),b&512&&vp(p,p.return);break;case 12:su(l,p);break;case 13:su(l,p),b&4&&oT(l,p),b&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=LL.bind(null,p),n$(l,p))));break;case 22:if(b=p.memoizedState!==null||sl,!b){d=d!==null&&d.memoizedState!==null||Jr,T=sl;var M=Jr;sl=b,(Jr=d)&&!M?lu(l,p,(p.subtreeFlags&8772)!==0):su(l,p),sl=T,Jr=M}break;case 30:break;default:su(l,p)}}function aT(l){var d=l.alternate;d!==null&&(l.alternate=null,aT(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Zt(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Mr=null,bi=!1;function ll(l,d,p){for(p=p.child;p!==null;)iT(l,d,p),p=p.sibling}function iT(l,d,p){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(_t,p)}catch{}switch(p.tag){case 26:Jr||us(p,d),ll(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Jr||us(p,d);var b=Mr,T=bi;pu(p.type)&&(Mr=p.stateNode,bi=!1),ll(l,d,p),Tp(p.stateNode),Mr=b,bi=T;break;case 5:Jr||us(p,d);case 6:if(b=Mr,T=bi,Mr=null,ll(l,d,p),Mr=b,bi=T,Mr!==null)if(bi)try{(Mr.nodeType===9?Mr.body:Mr.nodeName==="HTML"?Mr.ownerDocument.body:Mr).removeChild(p.stateNode)}catch(M){_r(p,d,M)}else try{Mr.removeChild(p.stateNode)}catch(M){_r(p,d,M)}break;case 18:Mr!==null&&(bi?(l=Mr,WT(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Pp(l)):WT(Mr,p.stateNode));break;case 4:b=Mr,T=bi,Mr=p.stateNode.containerInfo,bi=!0,ll(l,d,p),Mr=b,bi=T;break;case 0:case 11:case 14:case 15:Jr||ou(2,p,d),Jr||ou(4,p,d),ll(l,d,p);break;case 1:Jr||(us(p,d),b=p.stateNode,typeof b.componentWillUnmount=="function"&&JA(p,d,b)),ll(l,d,p);break;case 21:ll(l,d,p);break;case 22:Jr=(b=Jr)||p.memoizedState!==null,ll(l,d,p),Jr=b;break;default:ll(l,d,p)}}function oT(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Pp(l)}catch(p){_r(d,d.return,p)}}function NL(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new nT),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new nT),d;default:throw Error(r(435,l.tag))}}function H1(l,d){var p=NL(l);d.forEach(function(b){var T=$L.bind(null,l,b);p.has(b)||(p.add(b),b.then(T,T))})}function Di(l,d){var p=d.deletions;if(p!==null)for(var b=0;b<p.length;b++){var T=p[b],M=l,re=d,we=re;e:for(;we!==null;){switch(we.tag){case 27:if(pu(we.type)){Mr=we.stateNode,bi=!1;break e}break;case 5:Mr=we.stateNode,bi=!1;break e;case 3:case 4:Mr=we.stateNode.containerInfo,bi=!0;break e}we=we.return}if(Mr===null)throw Error(r(160));iT(M,re,T),Mr=null,bi=!1,M=T.alternate,M!==null&&(M.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)sT(d,l),d=d.sibling}var ko=null;function sT(l,d){var p=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Di(d,l),Mi(l),b&4&&(ou(3,l,l.return),bp(3,l),ou(5,l,l.return));break;case 1:Di(d,l),Mi(l),b&512&&(Jr||p===null||us(p,p.return)),b&64&&sl&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?b:p.concat(b))));break;case 26:var T=ko;if(Di(d,l),Mi(l),b&512&&(Jr||p===null||us(p,p.return)),b&4){var M=p!==null?p.memoizedState:null;if(b=l.memoizedState,p===null)if(b===null)if(l.stateNode===null){e:{b=l.type,p=l.memoizedProps,T=T.ownerDocument||T;t:switch(b){case"title":M=T.getElementsByTagName("title")[0],(!M||M[Ot]||M[he]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=T.createElement(b),T.head.insertBefore(M,T.querySelector("head > title"))),Da(M,b,p),M[he]=l,Dn(M),b=M;break e;case"link":var re=t3("link","href",T).get(b+(p.href||""));if(re){for(var we=0;we<re.length;we++)if(M=re[we],M.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&M.getAttribute("rel")===(p.rel==null?null:p.rel)&&M.getAttribute("title")===(p.title==null?null:p.title)&&M.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){re.splice(we,1);break t}}M=T.createElement(b),Da(M,b,p),T.head.appendChild(M);break;case"meta":if(re=t3("meta","content",T).get(b+(p.content||""))){for(we=0;we<re.length;we++)if(M=re[we],M.getAttribute("content")===(p.content==null?null:""+p.content)&&M.getAttribute("name")===(p.name==null?null:p.name)&&M.getAttribute("property")===(p.property==null?null:p.property)&&M.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&M.getAttribute("charset")===(p.charSet==null?null:p.charSet)){re.splice(we,1);break t}}M=T.createElement(b),Da(M,b,p),T.head.appendChild(M);break;default:throw Error(r(468,b))}M[he]=l,Dn(M),b=M}l.stateNode=b}else n3(T,l.type,l.stateNode);else l.stateNode=e3(T,b,l.memoizedProps);else M!==b?(M===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):M.count--,b===null?n3(T,l.type,l.stateNode):e3(T,b,l.memoizedProps)):b===null&&l.stateNode!==null&&B1(l,l.memoizedProps,p.memoizedProps)}break;case 27:Di(d,l),Mi(l),b&512&&(Jr||p===null||us(p,p.return)),p!==null&&b&4&&B1(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Di(d,l),Mi(l),b&512&&(Jr||p===null||us(p,p.return)),l.flags&32){T=l.stateNode;try{ql(T,"")}catch(mt){_r(l,l.return,mt)}}b&4&&l.stateNode!=null&&(T=l.memoizedProps,B1(l,T,p!==null?p.memoizedProps:T)),b&1024&&(q1=!0);break;case 6:if(Di(d,l),Mi(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,p=l.stateNode;try{p.nodeValue=b}catch(mt){_r(l,l.return,mt)}}break;case 3:if(ty=null,T=ko,ko=Qg(d.containerInfo),Di(d,l),ko=T,Mi(l),b&4&&p!==null&&p.memoizedState.isDehydrated)try{Pp(d.containerInfo)}catch(mt){_r(l,l.return,mt)}q1&&(q1=!1,lT(l));break;case 4:b=ko,ko=Qg(l.stateNode.containerInfo),Di(d,l),Mi(l),ko=b;break;case 12:Di(d,l),Mi(l);break;case 13:Di(d,l),Mi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Y1=se()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,H1(l,b)));break;case 22:T=l.memoizedState!==null;var Be=p!==null&&p.memoizedState!==null,ut=sl,St=Jr;if(sl=ut||T,Jr=St||Be,Di(d,l),Jr=St,sl=ut,Mi(l),b&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(p===null||Be||sl||Jr||Ac(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){Be=p=d;try{if(M=Be.stateNode,T)re=M.style,typeof re.setProperty=="function"?re.setProperty("display","none","important"):re.display="none";else{we=Be.stateNode;var At=Be.memoizedProps.style,pt=At!=null&&At.hasOwnProperty("display")?At.display:null;we.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(mt){_r(Be,Be.return,mt)}}}else if(d.tag===6){if(p===null){Be=d;try{Be.stateNode.nodeValue=T?"":Be.memoizedProps}catch(mt){_r(Be,Be.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(p=b.retryQueue,p!==null&&(b.retryQueue=null,H1(l,p))));break;case 19:Di(d,l),Mi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,H1(l,b)));break;case 30:break;case 21:break;default:Di(d,l),Mi(l)}}function Mi(l){var d=l.flags;if(d&2){try{for(var p,b=l.return;b!==null;){if(eT(b)){p=b;break}b=b.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var T=p.stateNode,M=z1(l);Bg(l,M,T);break;case 5:var re=p.stateNode;p.flags&32&&(ql(re,""),p.flags&=-33);var we=z1(l);Bg(l,we,re);break;case 3:case 4:var Be=p.stateNode.containerInfo,ut=z1(l);U1(l,ut,Be);break;default:throw Error(r(161))}}catch(St){_r(l,l.return,St)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function lT(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;lT(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function su(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)rT(l,d.alternate,d),d=d.sibling}function Ac(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:ou(4,d,d.return),Ac(d);break;case 1:us(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&JA(d,d.return,p),Ac(d);break;case 27:Tp(d.stateNode);case 26:case 5:us(d,d.return),Ac(d);break;case 22:d.memoizedState===null&&Ac(d);break;case 30:Ac(d);break;default:Ac(d)}l=l.sibling}}function lu(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,T=l,M=d,re=M.flags;switch(M.tag){case 0:case 11:case 15:lu(T,M,p),bp(4,M);break;case 1:if(lu(T,M,p),b=M,T=b.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ut){_r(b,b.return,ut)}if(b=M,T=b.updateQueue,T!==null){var we=b.stateNode;try{var Be=T.shared.hiddenCallbacks;if(Be!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Be.length;T++)FC(Be[T],we)}catch(ut){_r(b,b.return,ut)}}p&&re&64&&XA(M),vp(M,M.return);break;case 27:tT(M);case 26:case 5:lu(T,M,p),p&&b===null&&re&4&&QA(M),vp(M,M.return);break;case 12:lu(T,M,p);break;case 13:lu(T,M,p),p&&re&4&&oT(T,M);break;case 22:M.memoizedState===null&&lu(T,M,p),vp(M,M.return);break;case 30:break;default:lu(T,M,p)}d=d.sibling}}function V1(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&ap(p))}function G1(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ap(l))}function cs(l,d,p,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)uT(l,d,p,b),d=d.sibling}function uT(l,d,p,b){var T=d.flags;switch(d.tag){case 0:case 11:case 15:cs(l,d,p,b),T&2048&&bp(9,d);break;case 1:cs(l,d,p,b);break;case 3:cs(l,d,p,b),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ap(l)));break;case 12:if(T&2048){cs(l,d,p,b),l=d.stateNode;try{var M=d.memoizedProps,re=M.id,we=M.onPostCommit;typeof we=="function"&&we(re,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Be){_r(d,d.return,Be)}}else cs(l,d,p,b);break;case 13:cs(l,d,p,b);break;case 23:break;case 22:M=d.stateNode,re=d.alternate,d.memoizedState!==null?M._visibility&2?cs(l,d,p,b):wp(l,d):M._visibility&2?cs(l,d,p,b):(M._visibility|=2,tf(l,d,p,b,(d.subtreeFlags&10256)!==0)),T&2048&&V1(re,d);break;case 24:cs(l,d,p,b),T&2048&&G1(d.alternate,d);break;default:cs(l,d,p,b)}}function tf(l,d,p,b,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var M=l,re=d,we=p,Be=b,ut=re.flags;switch(re.tag){case 0:case 11:case 15:tf(M,re,we,Be,T),bp(8,re);break;case 23:break;case 22:var St=re.stateNode;re.memoizedState!==null?St._visibility&2?tf(M,re,we,Be,T):wp(M,re):(St._visibility|=2,tf(M,re,we,Be,T)),T&&ut&2048&&V1(re.alternate,re);break;case 24:tf(M,re,we,Be,T),T&&ut&2048&&G1(re.alternate,re);break;default:tf(M,re,we,Be,T)}d=d.sibling}}function wp(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,b=d,T=b.flags;switch(b.tag){case 22:wp(p,b),T&2048&&V1(b.alternate,b);break;case 24:wp(p,b),T&2048&&G1(b.alternate,b);break;default:wp(p,b)}d=d.sibling}}var _p=8192;function nf(l){if(l.subtreeFlags&_p)for(l=l.child;l!==null;)cT(l),l=l.sibling}function cT(l){switch(l.tag){case 26:nf(l),l.flags&_p&&l.memoizedState!==null&&m$(ko,l.memoizedState,l.memoizedProps);break;case 5:nf(l);break;case 3:case 4:var d=ko;ko=Qg(l.stateNode.containerInfo),nf(l),ko=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=_p,_p=16777216,nf(l),_p=d):nf(l));break;default:nf(l)}}function dT(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function xp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];wa=b,hT(b,l)}dT(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)fT(l),l=l.sibling}function fT(l){switch(l.tag){case 0:case 11:case 15:xp(l),l.flags&2048&&ou(9,l,l.return);break;case 3:xp(l);break;case 12:xp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,zg(l)):xp(l);break;default:xp(l)}}function zg(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];wa=b,hT(b,l)}dT(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:ou(8,d,d.return),zg(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,zg(d));break;default:zg(d)}l=l.sibling}}function hT(l,d){for(;wa!==null;){var p=wa;switch(p.tag){case 0:case 11:case 15:ou(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var b=p.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:ap(p.memoizedState.cache)}if(b=p.child,b!==null)b.return=p,wa=b;else e:for(p=l;wa!==null;){b=wa;var T=b.sibling,M=b.return;if(aT(b),b===p){wa=null;break e}if(T!==null){T.return=M,wa=T;break e}wa=M}}}var IL={getCacheForType:function(l){var d=za(ca),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p}},OL=typeof WeakMap=="function"?WeakMap:Map,sr=0,kr=null,Un=null,Gn=0,lr=0,Pi=null,uu=!1,rf=!1,W1=!1,ul=0,Gr=0,cu=0,Tc=0,K1=0,ao=0,af=0,Sp=null,vi=null,Z1=!1,Y1=0,Ug=1/0,qg=null,du=null,ja=0,fu=null,of=null,sf=0,X1=0,J1=null,pT=null,Ep=0,Q1=null;function Fi(){if((sr&2)!==0&&Gn!==0)return Gn&-Gn;if(ue.T!==null){var l=Wd;return l!==0?l:o_()}return U()}function mT(){ao===0&&(ao=(Gn&536870912)===0||er?vt():536870912);var l=ro.current;return l!==null&&(l.flags|=32),ao}function Li(l,d,p){(l===kr&&(lr===2||lr===9)||l.cancelPendingCommit!==null)&&(lf(l,0),hu(l,Gn,ao,!1)),st(l,p),((sr&2)===0||l!==kr)&&(l===kr&&((sr&2)===0&&(Tc|=p),Gr===4&&hu(l,Gn,ao,!1)),ds(l))}function gT(l,d,p){if((sr&6)!==0)throw Error(r(327));var b=!p&&(d&124)===0&&(d&l.expiredLanes)===0||oe(l,d),T=b?ML(l,d):n_(l,d,!0),M=b;do{if(T===0){rf&&!b&&hu(l,d,0,!1);break}else{if(p=l.current.alternate,M&&!jL(p)){T=n_(l,d,!1),M=!1;continue}if(T===2){if(M=d,l.errorRecoveryDisabledLanes&M)var re=0;else re=l.pendingLanes&-536870913,re=re!==0?re:re&536870912?536870912:0;if(re!==0){d=re;e:{var we=l;T=Sp;var Be=we.current.memoizedState.isDehydrated;if(Be&&(lf(we,re).flags|=256),re=n_(we,re,!1),re!==2){if(W1&&!Be){we.errorRecoveryDisabledLanes|=M,Tc|=M,T=4;break e}M=vi,vi=T,M!==null&&(vi===null?vi=M:vi.push.apply(vi,M))}T=re}if(M=!1,T!==2)continue}}if(T===1){lf(l,0),hu(l,d,0,!0);break}e:{switch(b=l,M=T,M){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:hu(b,d,ao,!uu);break e;case 2:vi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(T=Y1+300-se(),10<T)){if(hu(b,d,ao,!uu),ke(b,0,!0)!==0)break e;b.timeoutHandle=VT(yT.bind(null,b,p,vi,qg,Z1,d,ao,Tc,af,uu,M,2,-0,0),T);break e}yT(b,p,vi,qg,Z1,d,ao,Tc,af,uu,M,0,-0,0)}}break}while(!0);ds(l)}function yT(l,d,p,b,T,M,re,we,Be,ut,St,At,pt,mt){if(l.timeoutHandle=-1,At=d.subtreeFlags,(At&8192||(At&16785408)===16785408)&&(Ip={stylesheets:null,count:0,unsuspend:p$},cT(d),At=g$(),At!==null)){l.cancelPendingCommit=At(ET.bind(null,l,d,M,p,b,T,re,we,Be,St,1,pt,mt)),hu(l,M,re,!ut);return}ET(l,d,M,p,b,T,re,we,Be)}function jL(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var b=0;b<p.length;b++){var T=p[b],M=T.getSnapshot;T=T.value;try{if(!Ba(M(),T))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function hu(l,d,p,b){d&=~K1,d&=~Tc,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var T=d;0<T;){var M=31-Kt(T),re=1<<M;b[M]=-1,T&=~re}p!==0&&De(l,p,d)}function Hg(){return(sr&6)===0?(kp(0),!1):!0}function e_(){if(Un!==null){if(lr===0)var l=Un.return;else l=Un,tl=xc=null,y1(l),Qd=null,mp=0,l=Un;for(;l!==null;)YA(l.alternate,l),l=l.return;Un=null}}function lf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,XL(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),e_(),kr=l,Un=p=Js(l.current,null),Gn=d,lr=0,Pi=null,uu=!1,rf=oe(l,d),W1=!1,af=ao=K1=Tc=cu=Gr=0,vi=Sp=null,Z1=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var T=31-Kt(b),M=1<<T;d|=l[T],b&=~M}return ul=d,bn(),p}function bT(l,d){Fn=null,ue.H=Ig,d===op||d===_g?(d=MC(),lr=3):d===OC?(d=MC(),lr=4):lr=d===PA?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Pi=d,Un===null&&(Gr=1,Pg(l,un(d,l.current)))}function vT(){var l=ue.H;return ue.H=Ig,l===null?Ig:l}function wT(){var l=ue.A;return ue.A=IL,l}function t_(){Gr=4,uu||(Gn&4194048)!==Gn&&ro.current!==null||(rf=!0),(cu&134217727)===0&&(Tc&134217727)===0||kr===null||hu(kr,Gn,ao,!1)}function n_(l,d,p){var b=sr;sr|=2;var T=vT(),M=wT();(kr!==l||Gn!==d)&&(qg=null,lf(l,d)),d=!1;var re=Gr;e:do try{if(lr!==0&&Un!==null){var we=Un,Be=Pi;switch(lr){case 8:e_(),re=6;break e;case 3:case 2:case 9:case 6:ro.current===null&&(d=!0);var ut=lr;if(lr=0,Pi=null,uf(l,we,Be,ut),p&&rf){re=0;break e}break;default:ut=lr,lr=0,Pi=null,uf(l,we,Be,ut)}}DL(),re=Gr;break}catch(St){bT(l,St)}while(!0);return d&&l.shellSuspendCounter++,tl=xc=null,sr=b,ue.H=T,ue.A=M,Un===null&&(kr=null,Gn=0,bn()),re}function DL(){for(;Un!==null;)_T(Un)}function ML(l,d){var p=sr;sr|=2;var b=vT(),T=wT();kr!==l||Gn!==d?(qg=null,Ug=se()+500,lf(l,d)):rf=oe(l,d);e:do try{if(lr!==0&&Un!==null){d=Un;var M=Pi;t:switch(lr){case 1:lr=0,Pi=null,uf(l,d,M,1);break;case 2:case 9:if(jC(M)){lr=0,Pi=null,xT(d);break}d=function(){lr!==2&&lr!==9||kr!==l||(lr=7),ds(l)},M.then(d,d);break e;case 3:lr=7;break e;case 4:lr=5;break e;case 7:jC(M)?(lr=0,Pi=null,xT(d)):(lr=0,Pi=null,uf(l,d,M,7));break;case 5:var re=null;switch(Un.tag){case 26:re=Un.memoizedState;case 5:case 27:var we=Un;if(!re||r3(re)){lr=0,Pi=null;var Be=we.sibling;if(Be!==null)Un=Be;else{var ut=we.return;ut!==null?(Un=ut,Vg(ut)):Un=null}break t}}lr=0,Pi=null,uf(l,d,M,5);break;case 6:lr=0,Pi=null,uf(l,d,M,6);break;case 8:e_(),Gr=6;break e;default:throw Error(r(462))}}PL();break}catch(St){bT(l,St)}while(!0);return tl=xc=null,ue.H=b,ue.A=T,sr=p,Un!==null?0:(kr=null,Gn=0,bn(),Gr)}function PL(){for(;Un!==null&&!Ce();)_T(Un)}function _T(l){var d=KA(l.alternate,l,ul);l.memoizedProps=l.pendingProps,d===null?Vg(l):Un=d}function xT(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=UA(p,d,d.pendingProps,d.type,void 0,Gn);break;case 11:d=UA(p,d,d.pendingProps,d.type.render,d.ref,Gn);break;case 5:y1(d);default:YA(p,d),d=Un=SC(d,ul),d=KA(p,d,ul)}l.memoizedProps=l.pendingProps,d===null?Vg(l):Un=d}function uf(l,d,p,b){tl=xc=null,y1(d),Qd=null,mp=0;var T=d.return;try{if(kL(l,T,d,p,Gn)){Gr=1,Pg(l,un(p,l.current)),Un=null;return}}catch(M){if(T!==null)throw Un=T,M;Gr=1,Pg(l,un(p,l.current)),Un=null;return}d.flags&32768?(er||b===1?l=!0:rf||(Gn&536870912)!==0?l=!1:(uu=l=!0,(b===2||b===9||b===3||b===6)&&(b=ro.current,b!==null&&b.tag===13&&(b.flags|=16384))),ST(d,l)):Vg(d)}function Vg(l){var d=l;do{if((d.flags&32768)!==0){ST(d,uu);return}l=d.return;var p=AL(d.alternate,d,ul);if(p!==null){Un=p;return}if(d=d.sibling,d!==null){Un=d;return}Un=d=l}while(d!==null);Gr===0&&(Gr=5)}function ST(l,d){do{var p=TL(l.alternate,l);if(p!==null){p.flags&=32767,Un=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){Un=l;return}Un=l=p}while(l!==null);Gr=6,Un=null}function ET(l,d,p,b,T,M,re,we,Be){l.cancelPendingCommit=null;do Gg();while(ja!==0);if((sr&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(M=d.lanes|d.childLanes,M|=Ia,ge(l,p,M,re,we,Be),l===kr&&(Un=kr=null,Gn=0),of=d,fu=l,sf=p,X1=M,J1=T,pT=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,BL(Me,function(){return RT(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=ue.T,ue.T=null,T=Y.p,Y.p=2,re=sr,sr|=4;try{RL(l,d,p)}finally{sr=re,Y.p=T,ue.T=b}}ja=1,kT(),CT(),AT()}}function kT(){if(ja===1){ja=0;var l=fu,d=of,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=ue.T,ue.T=null;var b=Y.p;Y.p=2;var T=sr;sr|=4;try{sT(d,l);var M=p_,re=le(l.containerInfo),we=M.focusedElem,Be=M.selectionRange;if(re!==we&&we&&we.ownerDocument&&te(we.ownerDocument.documentElement,we)){if(Be!==null&&be(we)){var ut=Be.start,St=Be.end;if(St===void 0&&(St=ut),"selectionStart"in we)we.selectionStart=ut,we.selectionEnd=Math.min(St,we.value.length);else{var At=we.ownerDocument||document,pt=At&&At.defaultView||window;if(pt.getSelection){var mt=pt.getSelection(),vn=we.textContent.length,hn=Math.min(Be.start,vn),gr=Be.end===void 0?hn:Math.min(Be.end,vn);!mt.extend&&hn>gr&&(re=gr,gr=hn,hn=re);var nt=K(we,hn),Ke=K(we,gr);if(nt&&Ke&&(mt.rangeCount!==1||mt.anchorNode!==nt.node||mt.anchorOffset!==nt.offset||mt.focusNode!==Ke.node||mt.focusOffset!==Ke.offset)){var lt=At.createRange();lt.setStart(nt.node,nt.offset),mt.removeAllRanges(),hn>gr?(mt.addRange(lt),mt.extend(Ke.node,Ke.offset)):(lt.setEnd(Ke.node,Ke.offset),mt.addRange(lt))}}}}for(At=[],mt=we;mt=mt.parentNode;)mt.nodeType===1&&At.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<At.length;we++){var kt=At[we];kt.element.scrollLeft=kt.left,kt.element.scrollTop=kt.top}}ay=!!h_,p_=h_=null}finally{sr=T,Y.p=b,ue.T=p}}l.current=d,ja=2}}function CT(){if(ja===2){ja=0;var l=fu,d=of,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=ue.T,ue.T=null;var b=Y.p;Y.p=2;var T=sr;sr|=4;try{rT(l,d.alternate,d)}finally{sr=T,Y.p=b,ue.T=p}}ja=3}}function AT(){if(ja===4||ja===3){ja=0,Re();var l=fu,d=of,p=sf,b=pT;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?ja=5:(ja=0,of=fu=null,TT(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(du=null),me(p),d=d.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(_t,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=ue.T,T=Y.p,Y.p=2,ue.T=null;try{for(var M=l.onRecoverableError,re=0;re<b.length;re++){var we=b[re];M(we.value,{componentStack:we.stack})}}finally{ue.T=d,Y.p=T}}(sf&3)!==0&&Gg(),ds(l),T=l.pendingLanes,(p&4194090)!==0&&(T&42)!==0?l===Q1?Ep++:(Ep=0,Q1=l):Ep=0,kp(0)}}function TT(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,ap(d)))}function Gg(l){return kT(),CT(),AT(),RT()}function RT(){if(ja!==5)return!1;var l=fu,d=X1;X1=0;var p=me(sf),b=ue.T,T=Y.p;try{Y.p=32>p?32:p,ue.T=null,p=J1,J1=null;var M=fu,re=sf;if(ja=0,of=fu=null,sf=0,(sr&6)!==0)throw Error(r(331));var we=sr;if(sr|=4,fT(M.current),uT(M,M.current,re,p),sr=we,kp(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(_t,M)}catch{}return!0}finally{Y.p=T,ue.T=b,TT(l,d)}}function NT(l,d,p){d=un(p,d),d=I1(l.stateNode,d,2),l=nu(l,d,2),l!==null&&(st(l,2),ds(l))}function _r(l,d,p){if(l.tag===3)NT(l,l,p);else for(;d!==null;){if(d.tag===3){NT(d,l,p);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(du===null||!du.has(b))){l=un(p,l),p=DA(2),b=nu(d,p,2),b!==null&&(MA(p,b,d,l),st(b,2),ds(b));break}}d=d.return}}function r_(l,d,p){var b=l.pingCache;if(b===null){b=l.pingCache=new OL;var T=new Set;b.set(d,T)}else T=b.get(d),T===void 0&&(T=new Set,b.set(d,T));T.has(p)||(W1=!0,T.add(p),l=FL.bind(null,l,d,p),d.then(l,l))}function FL(l,d,p){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,kr===l&&(Gn&p)===p&&(Gr===4||Gr===3&&(Gn&62914560)===Gn&&300>se()-Y1?(sr&2)===0&&lf(l,0):K1|=p,af===Gn&&(af=0)),ds(l)}function IT(l,d){d===0&&(d=j()),l=Eo(l,d),l!==null&&(st(l,d),ds(l))}function LL(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),IT(l,p)}function $L(l,d){var p=0;switch(l.tag){case 13:var b=l.stateNode,T=l.memoizedState;T!==null&&(p=T.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),IT(l,p)}function BL(l,d){return Ae(l,d)}var Wg=null,cf=null,a_=!1,Kg=!1,i_=!1,Rc=0;function ds(l){l!==cf&&l.next===null&&(cf===null?Wg=cf=l:cf=cf.next=l),Kg=!0,a_||(a_=!0,UL())}function kp(l,d){if(!i_&&Kg){i_=!0;do for(var p=!1,b=Wg;b!==null;){if(l!==0){var T=b.pendingLanes;if(T===0)var M=0;else{var re=b.suspendedLanes,we=b.pingedLanes;M=(1<<31-Kt(42|l)+1)-1,M&=T&~(re&~we),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(p=!0,MT(b,M))}else M=Gn,M=ke(b,b===kr?M:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(M&3)===0||oe(b,M)||(p=!0,MT(b,M));b=b.next}while(p);i_=!1}}function zL(){OT()}function OT(){Kg=a_=!1;var l=0;Rc!==0&&(YL()&&(l=Rc),Rc=0);for(var d=se(),p=null,b=Wg;b!==null;){var T=b.next,M=jT(b,d);M===0?(b.next=null,p===null?Wg=T:p.next=T,T===null&&(cf=p)):(p=b,(l!==0||(M&3)!==0)&&(Kg=!0)),b=T}kp(l)}function jT(l,d){for(var p=l.suspendedLanes,b=l.pingedLanes,T=l.expirationTimes,M=l.pendingLanes&-62914561;0<M;){var re=31-Kt(M),we=1<<re,Be=T[re];Be===-1?((we&p)===0||(we&b)!==0)&&(T[re]=ft(we,d)):Be<=d&&(l.expiredLanes|=we),M&=~we}if(d=kr,p=Gn,p=ke(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,p===0||l===d&&(lr===2||lr===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&B(b),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||oe(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(b!==null&&B(b),me(p)){case 2:case 8:p=xe;break;case 32:p=Me;break;case 268435456:p=Ze;break;default:p=Me}return b=DT.bind(null,l),p=Ae(p,b),l.callbackPriority=d,l.callbackNode=p,d}return b!==null&&b!==null&&B(b),l.callbackPriority=2,l.callbackNode=null,2}function DT(l,d){if(ja!==0&&ja!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Gg()&&l.callbackNode!==p)return null;var b=Gn;return b=ke(l,l===kr?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(gT(l,b,d),jT(l,se()),l.callbackNode!=null&&l.callbackNode===p?DT.bind(null,l):null)}function MT(l,d){if(Gg())return null;gT(l,d,!0)}function UL(){JL(function(){(sr&6)!==0?Ae(J,zL):OT()})}function o_(){return Rc===0&&(Rc=vt()),Rc}function PT(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:qs(""+l)}function FT(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function qL(l,d,p,b,T){if(d==="submit"&&p&&p.stateNode===T){var M=PT((T[Ne]||null).action),re=b.submitter;re&&(d=(d=re[Ne]||null)?PT(d.formAction):re.getAttribute("formAction"),d!==null&&(M=d,re=null));var we=new Rd("action","action",null,b,T);l.push({event:we,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Rc!==0){var Be=re?FT(T,re):new FormData(T);C1(p,{pending:!0,data:Be,method:T.method,action:M},null,Be)}}else typeof M=="function"&&(we.preventDefault(),Be=re?FT(T,re):new FormData(T),C1(p,{pending:!0,data:Be,method:T.method,action:M},M,Be))},currentTarget:T}]})}}for(var s_=0;s_<Vt.length;s_++){var l_=Vt[s_],HL=l_.toLowerCase(),VL=l_[0].toUpperCase()+l_.slice(1);Mt(HL,"on"+VL)}Mt(dt,"onAnimationEnd"),Mt(yt,"onAnimationIteration"),Mt(bt,"onAnimationStart"),Mt("dblclick","onDoubleClick"),Mt("focusin","onFocus"),Mt("focusout","onBlur"),Mt(xt,"onTransitionRun"),Mt(Ft,"onTransitionStart"),Mt(Ut,"onTransitionCancel"),Mt(Dt,"onTransitionEnd"),Qo("onMouseEnter",["mouseout","mouseover"]),Qo("onMouseLeave",["mouseout","mouseover"]),Qo("onPointerEnter",["pointerout","pointerover"]),Qo("onPointerLeave",["pointerout","pointerover"]),Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cp));function LT(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var b=l[p],T=b.event;b=b.listeners;e:{var M=void 0;if(d)for(var re=b.length-1;0<=re;re--){var we=b[re],Be=we.instance,ut=we.currentTarget;if(we=we.listener,Be!==M&&T.isPropagationStopped())break e;M=we,T.currentTarget=ut;try{M(T)}catch(St){Mg(St)}T.currentTarget=null,M=Be}else for(re=0;re<b.length;re++){if(we=b[re],Be=we.instance,ut=we.currentTarget,we=we.listener,Be!==M&&T.isPropagationStopped())break e;M=we,T.currentTarget=ut;try{M(T)}catch(St){Mg(St)}T.currentTarget=null,M=Be}}}}function qn(l,d){var p=d[gt];p===void 0&&(p=d[gt]=new Set);var b=l+"__bubble";p.has(b)||($T(d,l,2,!1),p.add(b))}function u_(l,d,p){var b=0;d&&(b|=4),$T(p,l,b,d)}var Zg="_reactListening"+Math.random().toString(36).slice(2);function c_(l){if(!l[Zg]){l[Zg]=!0,ei.forEach(function(p){p!=="selectionchange"&&(GL.has(p)||u_(p,!1,l),u_(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Zg]||(d[Zg]=!0,u_("selectionchange",!1,d))}}function $T(l,d,p,b){switch(u3(d)){case 2:var T=v$;break;case 8:T=w$;break;default:T=E_}p=T.bind(null,d,p,l),T=void 0,!Bh||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),b?T!==void 0?l.addEventListener(d,p,{capture:!0,passive:T}):l.addEventListener(d,p,!0):T!==void 0?l.addEventListener(d,p,{passive:T}):l.addEventListener(d,p,!1)}function d_(l,d,p,b,T){var M=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var re=b.tag;if(re===3||re===4){var we=b.stateNode.containerInfo;if(we===T)break;if(re===4)for(re=b.return;re!==null;){var Be=re.tag;if((Be===3||Be===4)&&re.stateNode.containerInfo===T)return;re=re.return}for(;we!==null;){if(re=En(we),re===null)return;if(Be=re.tag,Be===5||Be===6||Be===26||Be===27){b=M=re;continue e}we=we.parentNode}}b=b.return}Vl(function(){var ut=M,St=Ad(p),At=[];e:{var pt=Bt.get(l);if(pt!==void 0){var mt=Rd,vn=l;switch(l){case"keypress":if(Kl(p)===0)break e;case"keydown":case"keyup":mt=Fd;break;case"focusin":vn="focus",mt=Zl;break;case"focusout":vn="blur",mt=Zl;break;case"beforeblur":case"afterblur":mt=Zl;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=Wh;break;case dt:case yt:case bt:mt=ig;break;case Dt:mt=Kh;break;case"scroll":case"scrollend":mt=Nd;break;case"wheel":mt=$d;break;case"copy":case"cut":case"paste":mt=Md;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Gh;break;case"toggle":case"beforetoggle":mt=lg}var hn=(d&4)!==0,gr=!hn&&(l==="scroll"||l==="scrollend"),nt=hn?pt!==null?pt+"Capture":null:pt;hn=[];for(var Ke=ut,lt;Ke!==null;){var kt=Ke;if(lt=kt.stateNode,kt=kt.tag,kt!==5&&kt!==26&&kt!==27||lt===null||nt===null||(kt=Gs(Ke,nt),kt!=null&&hn.push(Ap(Ke,kt,lt))),gr)break;Ke=Ke.return}0<hn.length&&(pt=new mt(pt,vn,null,p,St),At.push({event:pt,listeners:hn}))}}if((d&7)===0){e:{if(pt=l==="mouseover"||l==="pointerover",mt=l==="mouseout"||l==="pointerout",pt&&p!==Xi&&(vn=p.relatedTarget||p.fromElement)&&(En(vn)||vn[He]))break e;if((mt||pt)&&(pt=St.window===St?St:(pt=St.ownerDocument)?pt.defaultView||pt.parentWindow:window,mt?(vn=p.relatedTarget||p.toElement,mt=ut,vn=vn?En(vn):null,vn!==null&&(gr=i(vn),hn=vn.tag,vn!==gr||hn!==5&&hn!==27&&hn!==6)&&(vn=null)):(mt=null,vn=ut),mt!==vn)){if(hn=Od,kt="onMouseLeave",nt="onMouseEnter",Ke="mouse",(l==="pointerout"||l==="pointerover")&&(hn=Gh,kt="onPointerLeave",nt="onPointerEnter",Ke="pointer"),gr=mt==null?pt:fr(mt),lt=vn==null?pt:fr(vn),pt=new hn(kt,Ke+"leave",mt,p,St),pt.target=gr,pt.relatedTarget=lt,kt=null,En(St)===ut&&(hn=new hn(nt,Ke+"enter",vn,p,St),hn.target=lt,hn.relatedTarget=gr,kt=hn),gr=kt,mt&&vn)t:{for(hn=mt,nt=vn,Ke=0,lt=hn;lt;lt=df(lt))Ke++;for(lt=0,kt=nt;kt;kt=df(kt))lt++;for(;0<Ke-lt;)hn=df(hn),Ke--;for(;0<lt-Ke;)nt=df(nt),lt--;for(;Ke--;){if(hn===nt||nt!==null&&hn===nt.alternate)break t;hn=df(hn),nt=df(nt)}hn=null}else hn=null;mt!==null&&BT(At,pt,mt,hn,!1),vn!==null&&gr!==null&&BT(At,gr,vn,hn,!0)}}e:{if(pt=ut?fr(ut):window,mt=pt.nodeName&&pt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&pt.type==="file")var Qt=gc;else if(Ud(pt))if(Qi)Qt=Jl;else{Qt=Xs;var $n=pg}else mt=pt.nodeName,!mt||mt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?ut&&$h(ut.elementType)&&(Qt=gc):Qt=Qh;if(Qt&&(Qt=Qt(l,ut))){Jh(At,Qt,p,St);break e}$n&&$n(l,pt,ut),l==="focusout"&&ut&&pt.type==="number"&&ut.memoizedProps.value!=null&&zl(pt,"number",pt.value)}switch($n=ut?fr(ut):window,l){case"focusin":(Ud($n)||$n.contentEditable==="true")&&(Le=$n,We=ut,Ye=null);break;case"focusout":Ye=We=Le=null;break;case"mousedown":tt=!0;break;case"contextmenu":case"mouseup":case"dragend":tt=!1,qe(At,p,St);break;case"selectionchange":if(je)break;case"keydown":case"keyup":qe(At,p,St)}var on;if(pc)e:{switch(l){case"compositionstart":var gn="onCompositionStart";break e;case"compositionend":gn="onCompositionEnd";break e;case"compositionupdate":gn="onCompositionUpdate";break e}gn=void 0}else Ys?Xh(l,p)&&(gn="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(gn="onCompositionStart");gn&&(Bd&&p.locale!=="ko"&&(Ys||gn!=="onCompositionStart"?gn==="onCompositionEnd"&&Ys&&(on=Wl()):(Ji=St,Td="value"in Ji?Ji.value:Ji.textContent,Ys=!0)),$n=Yg(ut,gn),0<$n.length&&(gn=new Pd(gn,l,null,p,St),At.push({event:gn,listeners:$n}),on?gn.data=on:(on=cg(p),on!==null&&(gn.data=on)))),(on=Vw?dg(l,p):Gw(l,p))&&(gn=Yg(ut,"onBeforeInput"),0<gn.length&&($n=new Pd("onBeforeInput","beforeinput",null,p,St),At.push({event:$n,listeners:gn}),$n.data=on)),qL(At,l,ut,p,St)}LT(At,d)})}function Ap(l,d,p){return{instance:l,listener:d,currentTarget:p}}function Yg(l,d){for(var p=d+"Capture",b=[];l!==null;){var T=l,M=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||M===null||(T=Gs(l,p),T!=null&&b.unshift(Ap(l,T,M)),T=Gs(l,d),T!=null&&b.push(Ap(l,T,M))),l.tag===3)return b;l=l.return}return[]}function df(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function BT(l,d,p,b,T){for(var M=d._reactName,re=[];p!==null&&p!==b;){var we=p,Be=we.alternate,ut=we.stateNode;if(we=we.tag,Be!==null&&Be===b)break;we!==5&&we!==26&&we!==27||ut===null||(Be=ut,T?(ut=Gs(p,M),ut!=null&&re.unshift(Ap(p,ut,Be))):T||(ut=Gs(p,M),ut!=null&&re.push(Ap(p,ut,Be)))),p=p.return}re.length!==0&&l.push({event:d,listeners:re})}var WL=/\r\n?/g,KL=/\u0000|\uFFFD/g;function zT(l){return(typeof l=="string"?l:""+l).replace(WL,`
`).replace(KL,"")}function UT(l,d){return d=zT(d),zT(l)===d}function Xg(){}function mr(l,d,p,b,T,M){switch(p){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||ql(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&ql(l,""+b);break;case"className":Bs(l,"class",b);break;case"tabIndex":Bs(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(l,p,b);break;case"style":ng(l,b,M);break;case"data":if(d!=="object"){Bs(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=qs(""+b),l.setAttribute(p,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(p==="formAction"?(d!=="input"&&mr(l,d,"name",T.name,T,null),mr(l,d,"formEncType",T.formEncType,T,null),mr(l,d,"formMethod",T.formMethod,T,null),mr(l,d,"formTarget",T.formTarget,T,null)):(mr(l,d,"encType",T.encType,T,null),mr(l,d,"method",T.method,T,null),mr(l,d,"target",T.target,T,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=qs(""+b),l.setAttribute(p,b);break;case"onClick":b!=null&&(l.onclick=Xg);break;case"onScroll":b!=null&&qn("scroll",l);break;case"onScrollEnd":b!=null&&qn("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}p=qs(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""+b):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":b===!0?l.setAttribute(p,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,b):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(p,b):l.removeAttribute(p);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(p):l.setAttribute(p,b);break;case"popover":qn("beforetoggle",l),qn("toggle",l),xo(l,"popover",b);break;case"xlinkActuate":Ii(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Ii(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Ii(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Ii(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Ii(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Ii(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Ii(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Ii(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Ii(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":xo(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=ni.get(p)||p,xo(l,p,b))}}function f_(l,d,p,b,T,M){switch(p){case"style":ng(l,b,M);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof b=="string"?ql(l,b):(typeof b=="number"||typeof b=="bigint")&&ql(l,""+b);break;case"onScroll":b!=null&&qn("scroll",l);break;case"onScrollEnd":b!=null&&qn("scrollend",l);break;case"onClick":b!=null&&(l.onclick=Xg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xo.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(T=p.endsWith("Capture"),d=p.slice(2,T?p.length-7:void 0),M=l[Ne]||null,M=M!=null?M[p]:null,typeof M=="function"&&l.removeEventListener(d,M,T),typeof b=="function")){typeof M!="function"&&M!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,b,T);break e}p in l?l[p]=b:b===!0?l.setAttribute(p,""):xo(l,p,b)}}}function Da(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qn("error",l),qn("load",l);var b=!1,T=!1,M;for(M in p)if(p.hasOwnProperty(M)){var re=p[M];if(re!=null)switch(M){case"src":b=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,M,re,p,null)}}T&&mr(l,d,"srcSet",p.srcSet,p,null),b&&mr(l,d,"src",p.src,p,null);return;case"input":qn("invalid",l);var we=M=re=T=null,Be=null,ut=null;for(b in p)if(p.hasOwnProperty(b)){var St=p[b];if(St!=null)switch(b){case"name":T=St;break;case"type":re=St;break;case"checked":Be=St;break;case"defaultChecked":ut=St;break;case"value":M=St;break;case"defaultValue":we=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,d));break;default:mr(l,d,b,St,p,null)}}Fh(l,M,we,Be,ut,re,T,!1),ns(l);return;case"select":qn("invalid",l),b=re=M=null;for(T in p)if(p.hasOwnProperty(T)&&(we=p[T],we!=null))switch(T){case"value":M=we;break;case"defaultValue":re=we;break;case"multiple":b=we;default:mr(l,d,T,we,p,null)}d=M,p=re,l.multiple=!!b,d!=null?Us(l,!!b,d,!1):p!=null&&Us(l,!!b,p,!0);return;case"textarea":qn("invalid",l),M=T=b=null;for(re in p)if(p.hasOwnProperty(re)&&(we=p[re],we!=null))switch(re){case"value":b=we;break;case"defaultValue":T=we;break;case"children":M=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(91));break;default:mr(l,d,re,we,p,null)}Lh(l,b,T,M),ns(l);return;case"option":for(Be in p)if(p.hasOwnProperty(Be)&&(b=p[Be],b!=null))switch(Be){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:mr(l,d,Be,b,p,null)}return;case"dialog":qn("beforetoggle",l),qn("toggle",l),qn("cancel",l),qn("close",l);break;case"iframe":case"object":qn("load",l);break;case"video":case"audio":for(b=0;b<Cp.length;b++)qn(Cp[b],l);break;case"image":qn("error",l),qn("load",l);break;case"details":qn("toggle",l);break;case"embed":case"source":case"link":qn("error",l),qn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in p)if(p.hasOwnProperty(ut)&&(b=p[ut],b!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,ut,b,p,null)}return;default:if($h(d)){for(St in p)p.hasOwnProperty(St)&&(b=p[St],b!==void 0&&f_(l,d,St,b,p,void 0));return}}for(we in p)p.hasOwnProperty(we)&&(b=p[we],b!=null&&mr(l,d,we,b,p,null))}function ZL(l,d,p,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,M=null,re=null,we=null,Be=null,ut=null,St=null;for(mt in p){var At=p[mt];if(p.hasOwnProperty(mt)&&At!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Be=At;default:b.hasOwnProperty(mt)||mr(l,d,mt,null,b,At)}}for(var pt in b){var mt=b[pt];if(At=p[pt],b.hasOwnProperty(pt)&&(mt!=null||At!=null))switch(pt){case"type":M=mt;break;case"name":T=mt;break;case"checked":ut=mt;break;case"defaultChecked":St=mt;break;case"value":re=mt;break;case"defaultValue":we=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,d));break;default:mt!==At&&mr(l,d,pt,mt,b,At)}}Bl(l,re,we,Be,ut,St,M,T);return;case"select":mt=re=we=pt=null;for(M in p)if(Be=p[M],p.hasOwnProperty(M)&&Be!=null)switch(M){case"value":break;case"multiple":mt=Be;default:b.hasOwnProperty(M)||mr(l,d,M,null,b,Be)}for(T in b)if(M=b[T],Be=p[T],b.hasOwnProperty(T)&&(M!=null||Be!=null))switch(T){case"value":pt=M;break;case"defaultValue":we=M;break;case"multiple":re=M;default:M!==Be&&mr(l,d,T,M,b,Be)}d=we,p=re,b=mt,pt!=null?Us(l,!!p,pt,!1):!!b!=!!p&&(d!=null?Us(l,!!p,d,!0):Us(l,!!p,p?[]:"",!1));return;case"textarea":mt=pt=null;for(we in p)if(T=p[we],p.hasOwnProperty(we)&&T!=null&&!b.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:mr(l,d,we,null,b,T)}for(re in b)if(T=b[re],M=p[re],b.hasOwnProperty(re)&&(T!=null||M!=null))switch(re){case"value":pt=T;break;case"defaultValue":mt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==M&&mr(l,d,re,T,b,M)}Ul(l,pt,mt);return;case"option":for(var vn in p)if(pt=p[vn],p.hasOwnProperty(vn)&&pt!=null&&!b.hasOwnProperty(vn))switch(vn){case"selected":l.selected=!1;break;default:mr(l,d,vn,null,b,pt)}for(Be in b)if(pt=b[Be],mt=p[Be],b.hasOwnProperty(Be)&&pt!==mt&&(pt!=null||mt!=null))switch(Be){case"selected":l.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:mr(l,d,Be,pt,b,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hn in p)pt=p[hn],p.hasOwnProperty(hn)&&pt!=null&&!b.hasOwnProperty(hn)&&mr(l,d,hn,null,b,pt);for(ut in b)if(pt=b[ut],mt=p[ut],b.hasOwnProperty(ut)&&pt!==mt&&(pt!=null||mt!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,d));break;default:mr(l,d,ut,pt,b,mt)}return;default:if($h(d)){for(var gr in p)pt=p[gr],p.hasOwnProperty(gr)&&pt!==void 0&&!b.hasOwnProperty(gr)&&f_(l,d,gr,void 0,b,pt);for(St in b)pt=b[St],mt=p[St],!b.hasOwnProperty(St)||pt===mt||pt===void 0&&mt===void 0||f_(l,d,St,pt,b,mt);return}}for(var nt in p)pt=p[nt],p.hasOwnProperty(nt)&&pt!=null&&!b.hasOwnProperty(nt)&&mr(l,d,nt,null,b,pt);for(At in b)pt=b[At],mt=p[At],!b.hasOwnProperty(At)||pt===mt||pt==null&&mt==null||mr(l,d,At,pt,b,mt)}var h_=null,p_=null;function Jg(l){return l.nodeType===9?l:l.ownerDocument}function qT(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function HT(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function m_(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var g_=null;function YL(){var l=window.event;return l&&l.type==="popstate"?l===g_?!1:(g_=l,!0):(g_=null,!1)}var VT=typeof setTimeout=="function"?setTimeout:void 0,XL=typeof clearTimeout=="function"?clearTimeout:void 0,GT=typeof Promise=="function"?Promise:void 0,JL=typeof queueMicrotask=="function"?queueMicrotask:typeof GT<"u"?function(l){return GT.resolve(null).then(l).catch(QL)}:VT;function QL(l){setTimeout(function(){throw l})}function pu(l){return l==="head"}function WT(l,d){var p=d,b=0,T=0;do{var M=p.nextSibling;if(l.removeChild(p),M&&M.nodeType===8)if(p=M.data,p==="/$"){if(0<b&&8>b){p=b;var re=l.ownerDocument;if(p&1&&Tp(re.documentElement),p&2&&Tp(re.body),p&4)for(p=re.head,Tp(p),re=p.firstChild;re;){var we=re.nextSibling,Be=re.nodeName;re[Ot]||Be==="SCRIPT"||Be==="STYLE"||Be==="LINK"&&re.rel.toLowerCase()==="stylesheet"||p.removeChild(re),re=we}}if(T===0){l.removeChild(M),Pp(d);return}T--}else p==="$"||p==="$?"||p==="$!"?T++:b=p.charCodeAt(0)-48;else b=0;p=M}while(p);Pp(d)}function y_(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":y_(p),Zt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function e$(l,d,p,b){for(;l.nodeType===1;){var T=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Ot])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(M=l.getAttribute("rel"),M==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(M!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(M=l.getAttribute("src"),(M!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&M&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var M=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===M)return l}else return l;if(l=Co(l.nextSibling),l===null)break}return null}function t$(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Co(l.nextSibling),l===null))return null;return l}function b_(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function n$(l,d){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")d();else{var b=function(){d(),p.removeEventListener("DOMContentLoaded",b)};p.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Co(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var v_=null;function KT(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return l;d--}else p==="/$"&&d++}l=l.previousSibling}return null}function ZT(l,d,p){switch(d=Jg(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Tp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Zt(l)}var io=new Map,YT=new Set;function Qg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var cl=Y.d;Y.d={f:r$,r:a$,D:i$,C:o$,L:s$,m:l$,X:c$,S:u$,M:d$};function r$(){var l=cl.f(),d=Hg();return l||d}function a$(l){var d=Bn(l);d!==null&&d.tag===5&&d.type==="form"?gA(d):cl.r(l)}var ff=typeof document>"u"?null:document;function XT(l,d,p){var b=ff;if(b&&typeof d=="string"&&d){var T=La(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof p=="string"&&(T+='[crossorigin="'+p+'"]'),YT.has(T)||(YT.add(T),l={rel:l,crossOrigin:p,href:d},b.querySelector(T)===null&&(d=b.createElement("link"),Da(d,"link",l),Dn(d),b.head.appendChild(d)))}}function i$(l){cl.D(l),XT("dns-prefetch",l,null)}function o$(l,d){cl.C(l,d),XT("preconnect",l,d)}function s$(l,d,p){cl.L(l,d,p);var b=ff;if(b&&l&&d){var T='link[rel="preload"][as="'+La(d)+'"]';d==="image"&&p&&p.imageSrcSet?(T+='[imagesrcset="'+La(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(T+='[imagesizes="'+La(p.imageSizes)+'"]')):T+='[href="'+La(l)+'"]';var M=T;switch(d){case"style":M=hf(l);break;case"script":M=pf(l)}io.has(M)||(l=f({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),io.set(M,l),b.querySelector(T)!==null||d==="style"&&b.querySelector(Rp(M))||d==="script"&&b.querySelector(Np(M))||(d=b.createElement("link"),Da(d,"link",l),Dn(d),b.head.appendChild(d)))}}function l$(l,d){cl.m(l,d);var p=ff;if(p&&l){var b=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+La(b)+'"][href="'+La(l)+'"]',M=T;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=pf(l)}if(!io.has(M)&&(l=f({rel:"modulepreload",href:l},d),io.set(M,l),p.querySelector(T)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Np(M)))return}b=p.createElement("link"),Da(b,"link",l),Dn(b),p.head.appendChild(b)}}}function u$(l,d,p){cl.S(l,d,p);var b=ff;if(b&&l){var T=hr(b).hoistableStyles,M=hf(l);d=d||"default";var re=T.get(M);if(!re){var we={loading:0,preload:null};if(re=b.querySelector(Rp(M)))we.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},p),(p=io.get(M))&&w_(l,p);var Be=re=b.createElement("link");Dn(Be),Da(Be,"link",l),Be._p=new Promise(function(ut,St){Be.onload=ut,Be.onerror=St}),Be.addEventListener("load",function(){we.loading|=1}),Be.addEventListener("error",function(){we.loading|=2}),we.loading|=4,ey(re,d,b)}re={type:"stylesheet",instance:re,count:1,state:we},T.set(M,re)}}}function c$(l,d){cl.X(l,d);var p=ff;if(p&&l){var b=hr(p).hoistableScripts,T=pf(l),M=b.get(T);M||(M=p.querySelector(Np(T)),M||(l=f({src:l,async:!0},d),(d=io.get(T))&&__(l,d),M=p.createElement("script"),Dn(M),Da(M,"link",l),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},b.set(T,M))}}function d$(l,d){cl.M(l,d);var p=ff;if(p&&l){var b=hr(p).hoistableScripts,T=pf(l),M=b.get(T);M||(M=p.querySelector(Np(T)),M||(l=f({src:l,async:!0,type:"module"},d),(d=io.get(T))&&__(l,d),M=p.createElement("script"),Dn(M),Da(M,"link",l),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},b.set(T,M))}}function JT(l,d,p,b){var T=(T=Pe.current)?Qg(T):null;if(!T)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=hf(p.href),p=hr(T).hoistableStyles,b=p.get(d),b||(b={type:"style",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=hf(p.href);var M=hr(T).hoistableStyles,re=M.get(l);if(re||(T=T.ownerDocument||T,re={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(l,re),(M=T.querySelector(Rp(l)))&&!M._p&&(re.instance=M,re.state.loading=5),io.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},io.set(l,p),M||f$(T,l,p,re.state))),d&&b===null)throw Error(r(528,""));return re}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=pf(p),p=hr(T).hoistableScripts,b=p.get(d),b||(b={type:"script",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function hf(l){return'href="'+La(l)+'"'}function Rp(l){return'link[rel="stylesheet"]['+l+"]"}function QT(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function f$(l,d,p,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),Da(d,"link",p),Dn(d),l.head.appendChild(d))}function pf(l){return'[src="'+La(l)+'"]'}function Np(l){return"script[async]"+l}function e3(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+La(p.href)+'"]');if(b)return d.instance=b,Dn(b),b;var T=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Dn(b),Da(b,"style",T),ey(b,p.precedence,l),d.instance=b;case"stylesheet":T=hf(p.href);var M=l.querySelector(Rp(T));if(M)return d.state.loading|=4,d.instance=M,Dn(M),M;b=QT(p),(T=io.get(T))&&w_(b,T),M=(l.ownerDocument||l).createElement("link"),Dn(M);var re=M;return re._p=new Promise(function(we,Be){re.onload=we,re.onerror=Be}),Da(M,"link",b),d.state.loading|=4,ey(M,p.precedence,l),d.instance=M;case"script":return M=pf(p.src),(T=l.querySelector(Np(M)))?(d.instance=T,Dn(T),T):(b=p,(T=io.get(M))&&(b=f({},p),__(b,T)),l=l.ownerDocument||l,T=l.createElement("script"),Dn(T),Da(T,"link",b),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,ey(b,p.precedence,l));return d.instance}function ey(l,d,p){for(var b=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=b.length?b[b.length-1]:null,M=T,re=0;re<b.length;re++){var we=b[re];if(we.dataset.precedence===d)M=we;else if(M!==T)break}M?M.parentNode.insertBefore(l,M.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function w_(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function __(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var ty=null;function t3(l,d,p){if(ty===null){var b=new Map,T=ty=new Map;T.set(p,b)}else T=ty,b=T.get(p),b||(b=new Map,T.set(p,b));if(b.has(l))return b;for(b.set(l,null),p=p.getElementsByTagName(l),T=0;T<p.length;T++){var M=p[T];if(!(M[Ot]||M[he]||l==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var re=M.getAttribute(d)||"";re=l+re;var we=b.get(re);we?we.push(M):b.set(re,[M])}}return b}function n3(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function h$(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function r3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Ip=null;function p$(){}function m$(l,d,p){if(Ip===null)throw Error(r(475));var b=Ip;if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=hf(p.href),M=l.querySelector(Rp(T));if(M){l=M._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=ny.bind(b),l.then(b,b)),d.state.loading|=4,d.instance=M,Dn(M);return}M=l.ownerDocument||l,p=QT(p),(T=io.get(T))&&w_(p,T),M=M.createElement("link"),Dn(M);var re=M;re._p=new Promise(function(we,Be){re.onload=we,re.onerror=Be}),Da(M,"link",p),d.instance=M}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(b.count++,d=ny.bind(b),l.addEventListener("load",d),l.addEventListener("error",d))}}function g$(){if(Ip===null)throw Error(r(475));var l=Ip;return l.stylesheets&&l.count===0&&x_(l,l.stylesheets),0<l.count?function(d){var p=setTimeout(function(){if(l.stylesheets&&x_(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(p)}}:null}function ny(){if(this.count--,this.count===0){if(this.stylesheets)x_(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ry=null;function x_(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ry=new Map,d.forEach(y$,l),ry=null,ny.call(l))}function y$(l,d){if(!(d.state.loading&4)){var p=ry.get(l);if(p)var b=p.get(null);else{p=new Map,ry.set(l,p);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<T.length;M++){var re=T[M];(re.nodeName==="LINK"||re.getAttribute("media")!=="not all")&&(p.set(re.dataset.precedence,re),b=re)}b&&p.set(null,b)}T=d.instance,re=T.getAttribute("data-precedence"),M=p.get(re)||b,M===b&&p.set(null,T),p.set(re,T),this.count++,b=ny.bind(this),T.addEventListener("load",b),T.addEventListener("error",b),M?M.parentNode.insertBefore(T,M.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var Op={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function b$(l,d,p,b,T,M,re,we){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=b,this.onUncaughtError=T,this.onCaughtError=M,this.onRecoverableError=re,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function a3(l,d,p,b,T,M,re,we,Be,ut,St,At){return l=new b$(l,d,p,re,we,Be,ut,At),d=1,M===!0&&(d|=24),M=ji(3,null,null,d),l.current=M,M.stateNode=l,d=r1(),d.refCount++,l.pooledCache=d,d.refCount++,M.memoizedState={element:b,isDehydrated:p,cache:d},s1(M),l}function i3(l){return l?(l=os,l):os}function o3(l,d,p,b,T,M){T=i3(T),b.context===null?b.context=T:b.pendingContext=T,b=tu(d),b.payload={element:p},M=M===void 0?null:M,M!==null&&(b.callback=M),p=nu(l,b,d),p!==null&&(Li(p,l,d),lp(p,l,d))}function s3(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function S_(l,d){s3(l,d),(l=l.alternate)&&s3(l,d)}function l3(l){if(l.tag===13){var d=Eo(l,67108864);d!==null&&Li(d,l,67108864),S_(l,67108864)}}var ay=!0;function v$(l,d,p,b){var T=ue.T;ue.T=null;var M=Y.p;try{Y.p=2,E_(l,d,p,b)}finally{Y.p=M,ue.T=T}}function w$(l,d,p,b){var T=ue.T;ue.T=null;var M=Y.p;try{Y.p=8,E_(l,d,p,b)}finally{Y.p=M,ue.T=T}}function E_(l,d,p,b){if(ay){var T=k_(b);if(T===null)d_(l,d,b,iy,p),c3(l,b);else if(x$(T,l,d,p,b))b.stopPropagation();else if(c3(l,b),d&4&&-1<_$.indexOf(l)){for(;T!==null;){var M=Bn(T);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var re=ye(M.pendingLanes);if(re!==0){var we=M;for(we.pendingLanes|=2,we.entangledLanes|=2;re;){var Be=1<<31-Kt(re);we.entanglements[1]|=Be,re&=~Be}ds(M),(sr&6)===0&&(Ug=se()+500,kp(0))}}break;case 13:we=Eo(M,2),we!==null&&Li(we,M,2),Hg(),S_(M,2)}if(M=k_(b),M===null&&d_(l,d,b,iy,p),M===T)break;T=M}T!==null&&b.stopPropagation()}else d_(l,d,b,null,p)}}function k_(l){return l=Ad(l),C_(l)}var iy=null;function C_(l){if(iy=null,l=En(l),l!==null){var d=i(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return iy=l,null}function u3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case J:return 2;case xe:return 8;case Me:case Se:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var A_=!1,mu=null,gu=null,yu=null,jp=new Map,Dp=new Map,bu=[],_$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c3(l,d){switch(l){case"focusin":case"focusout":mu=null;break;case"dragenter":case"dragleave":gu=null;break;case"mouseover":case"mouseout":yu=null;break;case"pointerover":case"pointerout":jp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dp.delete(d.pointerId)}}function Mp(l,d,p,b,T,M){return l===null||l.nativeEvent!==M?(l={blockedOn:d,domEventName:p,eventSystemFlags:b,nativeEvent:M,targetContainers:[T]},d!==null&&(d=Bn(d),d!==null&&l3(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function x$(l,d,p,b,T){switch(d){case"focusin":return mu=Mp(mu,l,d,p,b,T),!0;case"dragenter":return gu=Mp(gu,l,d,p,b,T),!0;case"mouseover":return yu=Mp(yu,l,d,p,b,T),!0;case"pointerover":var M=T.pointerId;return jp.set(M,Mp(jp.get(M)||null,l,d,p,b,T)),!0;case"gotpointercapture":return M=T.pointerId,Dp.set(M,Mp(Dp.get(M)||null,l,d,p,b,T)),!0}return!1}function d3(l){var d=En(l.target);if(d!==null){var p=i(d);if(p!==null){if(d=p.tag,d===13){if(d=o(p),d!==null){l.blockedOn=d,$(l.priority,function(){if(p.tag===13){var b=Fi();b=It(b);var T=Eo(p,b);T!==null&&Li(T,p,b),S_(p,b)}});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function oy(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=k_(l.nativeEvent);if(p===null){p=l.nativeEvent;var b=new p.constructor(p.type,p);Xi=b,p.target.dispatchEvent(b),Xi=null}else return d=Bn(p),d!==null&&l3(d),l.blockedOn=p,!1;d.shift()}return!0}function f3(l,d,p){oy(l)&&p.delete(d)}function S$(){A_=!1,mu!==null&&oy(mu)&&(mu=null),gu!==null&&oy(gu)&&(gu=null),yu!==null&&oy(yu)&&(yu=null),jp.forEach(f3),Dp.forEach(f3)}function sy(l,d){l.blockedOn===d&&(l.blockedOn=null,A_||(A_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,S$)))}var ly=null;function h3(l){ly!==l&&(ly=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ly===l&&(ly=null);for(var d=0;d<l.length;d+=3){var p=l[d],b=l[d+1],T=l[d+2];if(typeof b!="function"){if(C_(b||p)===null)continue;break}var M=Bn(p);M!==null&&(l.splice(d,3),d-=3,C1(M,{pending:!0,data:T,method:p.method,action:b},b,T))}}))}function Pp(l){function d(Be){return sy(Be,l)}mu!==null&&sy(mu,l),gu!==null&&sy(gu,l),yu!==null&&sy(yu,l),jp.forEach(d),Dp.forEach(d);for(var p=0;p<bu.length;p++){var b=bu[p];b.blockedOn===l&&(b.blockedOn=null)}for(;0<bu.length&&(p=bu[0],p.blockedOn===null);)d3(p),p.blockedOn===null&&bu.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(b=0;b<p.length;b+=3){var T=p[b],M=p[b+1],re=T[Ne]||null;if(typeof M=="function")re||h3(p);else if(re){var we=null;if(M&&M.hasAttribute("formAction")){if(T=M,re=M[Ne]||null)we=re.formAction;else if(C_(T)!==null)continue}else we=re.action;typeof we=="function"?p[b+1]=we:(p.splice(b,3),b-=3),h3(p)}}}function T_(l){this._internalRoot=l}uy.prototype.render=T_.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,b=Fi();o3(p,b,l,d,null,null)},uy.prototype.unmount=T_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;o3(l.current,2,null,l,null,null),Hg(),d[He]=null}};function uy(l){this._internalRoot=l}uy.prototype.unstable_scheduleHydration=function(l){if(l){var d=U();l={blockedOn:null,target:l,priority:d};for(var p=0;p<bu.length&&d!==0&&d<bu[p].priority;p++);bu.splice(p,0,l),p===0&&d3(l)}};var p3=t.version;if(p3!=="19.1.0")throw Error(r(527,p3,"19.1.0"));Y.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var E$={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cy.isDisabled&&cy.supportsFiber)try{_t=cy.inject(E$),Nt=cy}catch{}}return Lp.createRoot=function(l,d){if(!a(l))throw Error(r(299));var p=!1,b="",T=NA,M=IA,re=OA,we=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(M=d.onCaughtError),d.onRecoverableError!==void 0&&(re=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(we=d.unstable_transitionCallbacks)),d=a3(l,1,!1,null,null,p,b,T,M,re,we,null),l[He]=d.current,c_(l),new T_(d)},Lp.hydrateRoot=function(l,d,p){if(!a(l))throw Error(r(299));var b=!1,T="",M=NA,re=IA,we=OA,Be=null,ut=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(T=p.identifierPrefix),p.onUncaughtError!==void 0&&(M=p.onUncaughtError),p.onCaughtError!==void 0&&(re=p.onCaughtError),p.onRecoverableError!==void 0&&(we=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Be=p.unstable_transitionCallbacks),p.formState!==void 0&&(ut=p.formState)),d=a3(l,1,!0,d,p??null,b,T,M,re,we,Be,ut),d.context=i3(null),p=d.current,b=Fi(),b=It(b),T=tu(b),T.callback=null,nu(p,T,b),p=b,d.current.lanes=p,st(d,p),ds(d),l[He]=d.current,c_(l),new uy(d)},Lp.version="19.1.0",Lp}var E3;function B$(){if(E3)return I_.exports;E3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),I_.exports=$$(),I_.exports}var z$=B$();const U$=Ja(z$);function k3(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function oE(...e){return t=>{let n=!1;const r=e.map(a=>{const i=k3(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():k3(e[a],null)}}}}function xn(...e){return L.useCallback(oE(...e),e)}function Nu(e){const t=H$(e),n=L.forwardRef((r,a)=>{const{children:i,...o}=r,s=L.Children.toArray(i),u=s.find(G$);if(u){const c=u.props.children,f=s.map(h=>h===u?L.Children.count(c)>1?L.Children.only(null):L.isValidElement(c)?c.props.children:null:h);return y.jsx(t,{...o,ref:a,children:L.isValidElement(c)?L.cloneElement(c,void 0,f):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var q$=Nu("Slot");function H$(e){const t=L.forwardRef((n,r)=>{const{children:a,...i}=n;if(L.isValidElement(a)){const o=K$(a),s=W$(i,a.props);return a.type!==L.Fragment&&(s.ref=r?oE(r,o):o),L.cloneElement(a,s)}return L.Children.count(a)>1?L.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var W4=Symbol("radix.slottable");function V$(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=W4,t}function G$(e){return L.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===W4}function W$(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function K$(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function K4(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=K4(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Z4(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=K4(e))&&(r&&(r+=" "),r+=t);return r}const C3=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,A3=Z4,Y4=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return A3(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const f=n==null?void 0:n[c],h=i==null?void 0:i[c];if(f===null)return null;const m=C3(f)||C3(h);return a[c][m]}),s=n&&Object.entries(n).reduce((c,f)=>{let[h,m]=f;return m===void 0||(c[h]=m),c},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:m,...g}=f;return Object.entries(g).every(v=>{let[w,_]=v;return Array.isArray(_)?_.includes({...i,...s}[w]):{...i,...s}[w]===_})?[...c,h,m]:c},[]);return A3(e,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},sE="-",Z$=e=>{const t=X$(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(sE);return s[0]===""&&s.length!==1&&s.shift(),X4(s,t)||Y$(o)},getConflictingClassGroupIds:(o,s)=>{const u=n[o]||[];return s&&r[o]?[...u,...r[o]]:u}}},X4=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?X4(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(sE);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},T3=/^\[(.+)\]$/,Y$=e=>{if(T3.test(e)){const t=T3.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},X$=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)qS(n[a],r,a,t);return r},qS=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:R3(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(J$(a)){qS(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{qS(o,R3(t,i),n,r)})})},R3=(e,t)=>{let n=e;return t.split(sE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},J$=e=>e.isThemeGetter,Q$=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},HS="!",VS=":",eB=VS.length,tB=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,u=0,c;for(let v=0;v<a.length;v++){let w=a[v];if(o===0&&s===0){if(w===VS){i.push(a.slice(u,v)),u=v+eB;continue}if(w==="/"){c=v;continue}}w==="["?o++:w==="]"?o--:w==="("?s++:w===")"&&s--}const f=i.length===0?a:a.substring(u),h=nB(f),m=h!==f,g=c&&c>u?c-u:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+VS,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},nB=e=>e.endsWith(HS)?e.substring(0,e.length-1):e.startsWith(HS)?e.substring(1):e,rB=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},aB=e=>({cache:Q$(e.cacheSize),parseClassName:tB(e),sortModifiers:rB(e),...Z$(e)}),iB=/\s+/,oB=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(iB);let u="";for(let c=s.length-1;c>=0;c-=1){const f=s[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:w}=n(f);if(h){u=f+(u.length>0?" "+u:u);continue}let _=!!w,x=r(_?v.substring(0,w):v);if(!x){if(!_){u=f+(u.length>0?" "+u:u);continue}if(x=r(v),!x){u=f+(u.length>0?" "+u:u);continue}_=!1}const S=i(m).join(":"),E=g?S+HS:S,A=E+x;if(o.includes(A))continue;o.push(A);const k=a(x,_);for(let D=0;D<k.length;++D){const O=k[D];o.push(E+O)}u=f+(u.length>0?" "+u:u)}return u};function sB(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=J4(t))&&(r&&(r+=" "),r+=n);return r}const J4=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=J4(e[r]))&&(n&&(n+=" "),n+=t);return n};function lB(e,...t){let n,r,a,i=o;function o(u){const c=t.reduce((f,h)=>h(f),e());return n=aB(c),r=n.cache.get,a=n.cache.set,i=s,s(u)}function s(u){const c=r(u);if(c)return c;const f=oB(u,n);return a(u,f),f}return function(){return i(sB.apply(null,arguments))}}const fa=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Q4=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,e6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,uB=/^\d+\/\d+$/,cB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mf=e=>uB.test(e),Ln=e=>!!e&&!Number.isNaN(Number(e)),wu=e=>!!e&&Number.isInteger(Number(e)),M_=e=>e.endsWith("%")&&Ln(e.slice(0,-1)),dl=e=>cB.test(e),mB=()=>!0,gB=e=>dB.test(e)&&!fB.test(e),t6=()=>!1,yB=e=>hB.test(e),bB=e=>pB.test(e),vB=e=>!en(e)&&!tn(e),wB=e=>ch(e,a6,t6),en=e=>Q4.test(e),Nc=e=>ch(e,i6,gB),P_=e=>ch(e,kB,Ln),N3=e=>ch(e,n6,t6),_B=e=>ch(e,r6,bB),dy=e=>ch(e,o6,yB),tn=e=>e6.test(e),$p=e=>dh(e,i6),xB=e=>dh(e,CB),I3=e=>dh(e,n6),SB=e=>dh(e,a6),EB=e=>dh(e,r6),fy=e=>dh(e,o6,!0),ch=(e,t,n)=>{const r=Q4.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},dh=(e,t,n=!1)=>{const r=e6.exec(e);return r?r[1]?t(r[1]):n:!1},n6=e=>e==="position"||e==="percentage",r6=e=>e==="image"||e==="url",a6=e=>e==="length"||e==="size"||e==="bg-size",i6=e=>e==="length",kB=e=>e==="number",CB=e=>e==="family-name",o6=e=>e==="shadow",AB=()=>{const e=fa("color"),t=fa("font"),n=fa("text"),r=fa("font-weight"),a=fa("tracking"),i=fa("leading"),o=fa("breakpoint"),s=fa("container"),u=fa("spacing"),c=fa("radius"),f=fa("shadow"),h=fa("inset-shadow"),m=fa("text-shadow"),g=fa("drop-shadow"),v=fa("blur"),w=fa("perspective"),_=fa("aspect"),x=fa("ease"),S=fa("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...A(),tn,en],D=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],N=()=>[tn,en,u],z=()=>[mf,"full","auto",...N()],H=()=>[wu,"none","subgrid",tn,en],ee=()=>["auto",{span:["full",wu,tn,en]},wu,tn,en],P=()=>[wu,"auto",tn,en],Z=()=>["auto","min","max","fr",tn,en],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],fe=()=>["start","end","center","stretch","center-safe","end-safe"],ue=()=>["auto",...N()],Y=()=>[mf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],X=()=>[e,tn,en],ae=()=>[...A(),I3,N3,{position:[tn,en]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",SB,wB,{size:[tn,en]}],ne=()=>[M_,$p,Nc],de=()=>["","none","full",c,tn,en],_e=()=>["",Ln,$p,Nc],ve=()=>["solid","dashed","dotted","double"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Fe=()=>[Ln,M_,I3,N3],Ie=()=>["","none",v,tn,en],Te=()=>["none",Ln,tn,en],Ue=()=>["none",Ln,tn,en],Ve=()=>[Ln,tn,en],Ee=()=>[mf,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[dl],breakpoint:[dl],color:[mB],container:[dl],"drop-shadow":[dl],ease:["in","out","in-out"],font:[vB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[dl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[dl],shadow:[dl],spacing:["px",Ln],text:[dl],"text-shadow":[dl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",mf,en,tn,_]}],container:["container"],columns:[{columns:[Ln,en,tn,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[wu,"auto",tn,en]}],basis:[{basis:[mf,"full","auto",s,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ln,mf,"auto","initial","none",en]}],grow:[{grow:["",Ln,tn,en]}],shrink:[{shrink:["",Ln,tn,en]}],order:[{order:[wu,"first","last","none",tn,en]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:ee()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:ee()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...fe(),"normal"]}],"justify-self":[{"justify-self":["auto",...fe()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...fe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...fe(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...fe(),"baseline"]}],"place-self":[{"place-self":["auto",...fe()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:ue()}],mx:[{mx:ue()}],my:[{my:ue()}],ms:[{ms:ue()}],me:[{me:ue()}],mt:[{mt:ue()}],mr:[{mr:ue()}],mb:[{mb:ue()}],ml:[{ml:ue()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[s,"screen",...Y()]}],"min-w":[{"min-w":[s,"screen","none",...Y()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...Y()]}],h:[{h:["screen",...Y()]}],"min-h":[{"min-h":["screen","none",...Y()]}],"max-h":[{"max-h":["screen",...Y()]}],"font-size":[{text:["base",n,$p,Nc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tn,P_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",M_,en]}],"font-family":[{font:[xB,en,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tn,en]}],"line-clamp":[{"line-clamp":[Ln,"none",tn,P_]}],leading:[{leading:[i,...N()]}],"list-image":[{"list-image":["none",tn,en]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tn,en]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ln,"from-font","auto",tn,Nc]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[Ln,"auto",tn,en]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn,en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn,en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ae()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wu,tn,en],radial:["",tn,en],conic:[wu,tn,en]},EB,_B]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:de()}],"rounded-s":[{"rounded-s":de()}],"rounded-e":[{"rounded-e":de()}],"rounded-t":[{"rounded-t":de()}],"rounded-r":[{"rounded-r":de()}],"rounded-b":[{"rounded-b":de()}],"rounded-l":[{"rounded-l":de()}],"rounded-ss":[{"rounded-ss":de()}],"rounded-se":[{"rounded-se":de()}],"rounded-ee":[{"rounded-ee":de()}],"rounded-es":[{"rounded-es":de()}],"rounded-tl":[{"rounded-tl":de()}],"rounded-tr":[{"rounded-tr":de()}],"rounded-br":[{"rounded-br":de()}],"rounded-bl":[{"rounded-bl":de()}],"border-w":[{border:_e()}],"border-w-x":[{"border-x":_e()}],"border-w-y":[{"border-y":_e()}],"border-w-s":[{"border-s":_e()}],"border-w-e":[{"border-e":_e()}],"border-w-t":[{"border-t":_e()}],"border-w-r":[{"border-r":_e()}],"border-w-b":[{"border-b":_e()}],"border-w-l":[{"border-l":_e()}],"divide-x":[{"divide-x":_e()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_e()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ln,tn,en]}],"outline-w":[{outline:["",Ln,$p,Nc]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",f,fy,dy]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,fy,dy]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:_e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[Ln,Nc]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":_e()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",m,fy,dy]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[Ln,tn,en]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ln]}],"mask-image-linear-from-pos":[{"mask-linear-from":Fe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Fe()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Fe()}],"mask-image-t-to-pos":[{"mask-t-to":Fe()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Fe()}],"mask-image-r-to-pos":[{"mask-r-to":Fe()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Fe()}],"mask-image-b-to-pos":[{"mask-b-to":Fe()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Fe()}],"mask-image-l-to-pos":[{"mask-l-to":Fe()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Fe()}],"mask-image-x-to-pos":[{"mask-x-to":Fe()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Fe()}],"mask-image-y-to-pos":[{"mask-y-to":Fe()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[tn,en]}],"mask-image-radial-from-pos":[{"mask-radial-from":Fe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Fe()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Ln]}],"mask-image-conic-from-pos":[{"mask-conic-from":Fe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Fe()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ae()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tn,en]}],filter:[{filter:["","none",tn,en]}],blur:[{blur:Ie()}],brightness:[{brightness:[Ln,tn,en]}],contrast:[{contrast:[Ln,tn,en]}],"drop-shadow":[{"drop-shadow":["","none",g,fy,dy]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",Ln,tn,en]}],"hue-rotate":[{"hue-rotate":[Ln,tn,en]}],invert:[{invert:["",Ln,tn,en]}],saturate:[{saturate:[Ln,tn,en]}],sepia:[{sepia:["",Ln,tn,en]}],"backdrop-filter":[{"backdrop-filter":["","none",tn,en]}],"backdrop-blur":[{"backdrop-blur":Ie()}],"backdrop-brightness":[{"backdrop-brightness":[Ln,tn,en]}],"backdrop-contrast":[{"backdrop-contrast":[Ln,tn,en]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ln,tn,en]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ln,tn,en]}],"backdrop-invert":[{"backdrop-invert":["",Ln,tn,en]}],"backdrop-opacity":[{"backdrop-opacity":[Ln,tn,en]}],"backdrop-saturate":[{"backdrop-saturate":[Ln,tn,en]}],"backdrop-sepia":[{"backdrop-sepia":["",Ln,tn,en]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tn,en]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ln,"initial",tn,en]}],ease:[{ease:["linear","initial",x,tn,en]}],delay:[{delay:[Ln,tn,en]}],animate:[{animate:["none",S,tn,en]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,tn,en]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:Ue()}],"scale-x":[{"scale-x":Ue()}],"scale-y":[{"scale-y":Ue()}],"scale-z":[{"scale-z":Ue()}],"scale-3d":["scale-3d"],skew:[{skew:Ve()}],"skew-x":[{"skew-x":Ve()}],"skew-y":[{"skew-y":Ve()}],transform:[{transform:[tn,en,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ee()}],"translate-x":[{"translate-x":Ee()}],"translate-y":[{"translate-y":Ee()}],"translate-z":[{"translate-z":Ee()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn,en]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn,en]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[Ln,$p,Nc,P_]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},TB=lB(AB);function Ht(...e){return TB(Z4(e))}const RB=Y4("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Lt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?q$:"button";return y.jsx(i,{"data-slot":"button",className:Ht(RB({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IB=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),O3=e=>{const t=IB(e);return t.charAt(0).toUpperCase()+t.slice(1)},s6=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=L.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},u)=>L.createElement("svg",{ref:u,...OB,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:s6("lucide",a),...s},[...o.map(([c,f])=>L.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=(e,t)=>{const n=L.forwardRef(({className:r,...a},i)=>L.createElement(jB,{ref:i,iconNode:t,className:s6(`lucide-${NB(O3(e))}`,`lucide-${e}`,r),...a}));return n.displayName=O3(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],MB=cn("archive",DB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],id=cn("check",PB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],lE=cn("chevron-down",FB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$B=cn("chevron-right",LB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],zB=cn("chevron-up",BB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],l6=cn("chevrons-up-down",UB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ff=cn("circle-alert",qB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],u6=cn("circle-check",HB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],GB=cn("clipboard",VB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],c6=cn("cloud-upload",WB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],ZB=cn("cog",KB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],rb=cn("download",YB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],JB=cn("file-archive",XB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],e7=cn("file-json",QB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],n7=cn("file-question",t7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],a7=cn("file-text",r7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],o7=cn("file",i7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],l7=cn("folder-git",s7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],uE=cn("folder-plus",u7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],d7=cn("folder-up",c7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],a0=cn("folder",f7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],tm=cn("git-branch",h7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],m7=cn("git-commit-horizontal",p7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],y7=cn("git-merge",g7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],d6=cn("git-pull-request",b7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],w7=cn("hard-drive",v7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],x7=cn("house",_7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],E7=cn("image",S7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],C7=cn("info",k7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],T7=cn("key",A7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xn=cn("loader-circle",R7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],I7=cn("message-square",N7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],j7=cn("music",O7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],M7=cn("panel-left-close",D7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],F7=cn("panel-right-close",P7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],$7=cn("paperclip",L7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],cE=cn("pen",B7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gv=cn("plus",z7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yv=cn("refresh-cw",U7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],H7=cn("rotate-ccw",q7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dE=cn("save",V7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],f6=cn("search",G7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],K7=cn("send-horizontal",W7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Y7=cn("settings",Z7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],J7=cn("sliders-horizontal",X7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],GS=cn("square-pen",Q7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],tz=cn("square",ez);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Iu=cn("trash-2",nz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fE=cn("triangle-alert",rz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],iz=cn("upload",az);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],j3=cn("users",oz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],lz=cn("video",sz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],cz=cn("wrench",uz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zu=cn("x",dz),D3=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:Ht(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(wt.Fragment,{children:i},a.id):null})})},M3=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,m))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(r,a,s);return s},fz=e=>e?M3(e):M3,hz=e=>e;function pz(e,t=hz){const n=wt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return wt.useDebugValue(n),n}const P3=e=>{const t=fz(e),n=r=>pz(t,r);return Object.assign(n,t),n},Ds=e=>e?P3(e):P3;var h6=Symbol.for("immer-nothing"),F3=Symbol.for("immer-draftable"),ar=Symbol.for("immer-state");function ho(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Lf=Object.getPrototypeOf;function $f(e){return!!e&&!!e[ar]}function kl(e){var t;return e?p6(e)||Array.isArray(e)||!!e[F3]||!!((t=e.constructor)!=null&&t[F3])||vv(e)||wv(e):!1}var mz=Object.prototype.constructor.toString();function p6(e){if(!e||typeof e!="object")return!1;const t=Lf(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===mz}function nm(e,t){bv(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function bv(e){const t=e[ar];return t?t.type_:Array.isArray(e)?1:vv(e)?2:wv(e)?3:0}function WS(e,t){return bv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function m6(e,t,n){const r=bv(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function gz(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function vv(e){return e instanceof Map}function wv(e){return e instanceof Set}function Sa(e){return e.copy_||e.base_}function KS(e,t){if(vv(e))return new Map(e);if(wv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=p6(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ar];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Lf(e),r)}else{const r=Lf(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function hE(e,t=!1){return _v(e)||$f(e)||!kl(e)||(bv(e)>1&&(e.set=e.add=e.clear=e.delete=yz),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>hE(r,!0))),e}function yz(){ho(2)}function _v(e){return Object.isFrozen(e)}var ZS={};function Kc(e){const t=ZS[e];return t||ho(0,e),t}function bz(e,t){ZS[e]||(ZS[e]=t)}var rm;function ab(){return rm}function vz(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function L3(e,t){t&&(Kc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function YS(e){XS(e),e.drafts_.forEach(wz),e.drafts_=null}function XS(e){e===rm&&(rm=e.parent_)}function $3(e){return rm=vz(rm,e)}function wz(e){const t=e[ar];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function B3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ar].modified_&&(YS(t),ho(4)),kl(e)&&(e=ib(t,e),t.parent_||ob(t,e)),t.patches_&&Kc("Patches").generateReplacementPatches_(n[ar].base_,e,t.patches_,t.inversePatches_)):e=ib(t,n,[]),YS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==h6?e:void 0}function ib(e,t,n){if(_v(t))return t;const r=t[ar];if(!r)return nm(t,(a,i)=>z3(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ob(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),nm(i,(s,u)=>z3(e,r,a,s,u,n,o)),ob(e,a,!1),n&&e.patches_&&Kc("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function z3(e,t,n,r,a,i,o){if($f(a)){const s=i&&t&&t.type_!==3&&!WS(t.assigned_,r)?i.concat(r):void 0,u=ib(e,a,s);if(m6(n,r,u),$f(u))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(kl(a)&&!_v(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ib(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&ob(e,a)}}function ob(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&hE(t,n)}function _z(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ab(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=pE;n&&(a=[r],i=am);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var pE={get(e,t){if(t===ar)return e;const n=Sa(e);if(!WS(n,t))return xz(e,n,t);const r=n[t];return e.finalized_||!kl(r)?r:r===F_(e.base_,t)?(L_(e),e.copy_[t]=im(r,e)):r},has(e,t){return t in Sa(e)},ownKeys(e){return Reflect.ownKeys(Sa(e))},set(e,t,n){const r=g6(Sa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=F_(Sa(e),t),i=a==null?void 0:a[ar];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(gz(n,a)&&(n!==void 0||WS(e.base_,t)))return!0;L_(e),ml(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return F_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,L_(e),ml(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Sa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ho(11)},getPrototypeOf(e){return Lf(e.base_)},setPrototypeOf(){ho(12)}},am={};nm(pE,(e,t)=>{am[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});am.deleteProperty=function(e,t){return am.set.call(this,e,t,void 0)};am.set=function(e,t,n){return pE.set.call(this,e[0],t,n,e[0])};function F_(e,t){const n=e[ar];return(n?Sa(n):e)[t]}function xz(e,t,n){var a;const r=g6(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function g6(e,t){if(!(t in e))return;let n=Lf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Lf(n)}}function ml(e){e.modified_||(e.modified_=!0,e.parent_&&ml(e.parent_))}function L_(e){e.copy_||(e.copy_=KS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Sz=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(u=i,...c){return o.produce(u,f=>n.call(this,f,...c))}}typeof n!="function"&&ho(6),r!==void 0&&typeof r!="function"&&ho(7);let a;if(kl(t)){const i=$3(this),o=im(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?YS(i):XS(i)}return L3(i,r),B3(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===h6&&(a=void 0),this.autoFreeze_&&hE(a,!0),r){const i=[],o=[];Kc("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else ho(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,u=>t(u,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){kl(e)||ho(8),$f(e)&&(e=Ez(e));const t=$3(this),n=im(e,void 0);return n[ar].isManual_=!0,XS(t),n}finishDraft(e,t){const n=e&&e[ar];(!n||!n.isManual_)&&ho(9);const{scope_:r}=n;return L3(r,t),B3(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=Kc("Patches").applyPatches_;return $f(e)?r(e,t):this.produce(e,a=>r(a,t))}};function im(e,t){const n=vv(e)?Kc("MapSet").proxyMap_(e,t):wv(e)?Kc("MapSet").proxySet_(e,t):_z(e,t);return(t?t.scope_:ab()).drafts_.push(n),n}function Ez(e){return $f(e)||ho(10,e),y6(e)}function y6(e){if(!kl(e)||_v(e))return e;const t=e[ar];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=KS(e,t.scope_.immer_.useStrictShallowCopy_)}else n=KS(e,!0);return nm(n,(r,a)=>{m6(n,r,y6(a))}),t&&(t.finalized_=!1),n}function kz(){class e extends Map{constructor(u,c){super(),this[ar]={type_:2,parent_:c,scope_:c?c.scope_:ab(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Sa(this[ar]).size}has(u){return Sa(this[ar]).has(u)}set(u,c){const f=this[ar];return o(f),(!Sa(f).has(u)||Sa(f).get(u)!==c)&&(n(f),ml(f),f.assigned_.set(u,!0),f.copy_.set(u,c),f.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const c=this[ar];return o(c),n(c),ml(c),c.base_.has(u)?c.assigned_.set(u,!1):c.assigned_.delete(u),c.copy_.delete(u),!0}clear(){const u=this[ar];o(u),Sa(u).size&&(n(u),ml(u),u.assigned_=new Map,nm(u.base_,c=>{u.assigned_.set(c,!1)}),u.copy_.clear())}forEach(u,c){const f=this[ar];Sa(f).forEach((h,m,g)=>{u.call(c,this.get(m),m,this)})}get(u){const c=this[ar];o(c);const f=Sa(c).get(u);if(c.finalized_||!kl(f)||f!==c.base_.get(u))return f;const h=im(f,c);return n(c),c.copy_.set(u,h),h}keys(){return Sa(this[ar]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=u.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=u.next();if(c.done)return c;const f=this.get(c.value);return{done:!1,value:[c.value,f]}}}}[Symbol.iterator](){return this.entries()}}function t(s,u){return new e(s,u)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(u,c){super(),this[ar]={type_:3,parent_:c,scope_:c?c.scope_:ab(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Sa(this[ar]).size}has(u){const c=this[ar];return o(c),c.copy_?!!(c.copy_.has(u)||c.drafts_.has(u)&&c.copy_.has(c.drafts_.get(u))):c.base_.has(u)}add(u){const c=this[ar];return o(c),this.has(u)||(i(c),ml(c),c.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const c=this[ar];return o(c),i(c),ml(c),c.copy_.delete(u)||(c.drafts_.has(u)?c.copy_.delete(c.drafts_.get(u)):!1)}clear(){const u=this[ar];o(u),Sa(u).size&&(i(u),ml(u),u.copy_.clear())}values(){const u=this[ar];return o(u),i(u),u.copy_.values()}entries(){const u=this[ar];return o(u),i(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,c){const f=this.values();let h=f.next();for(;!h.done;)u.call(c,h.value,h.value,this),h=f.next()}}function a(s,u){return new r(s,u)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(u=>{if(kl(u)){const c=im(u,s);s.drafts_.set(u,c),s.copy_.add(c)}else s.copy_.add(u)}))}function o(s){s.revoked_&&ho(3,JSON.stringify(Sa(s)))}bz("MapSet",{proxyMap_:t,proxySet_:a})}var Wi=new Sz,Cz=Wi.produce;Wi.produceWithPatches.bind(Wi);Wi.setAutoFreeze.bind(Wi);Wi.setUseStrictShallowCopy.bind(Wi);Wi.applyPatches.bind(Wi);Wi.createDraft.bind(Wi);Wi.finishDraft.bind(Wi);const Az=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?Cz(a):a;return t(s,i,...o)},e(r.setState,n,r)),Ms=Az,ta=Ds(Ms((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((u,c)=>(u.order??0)-(c.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var Gy={exports:{}},Tz=Gy.exports,U3;function Rz(){return U3||(U3=1,function(e,t){(function(n,r){e.exports=r()})(Tz,function(){var n=function(C,I){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,te){K.__proto__=te}||function(K,te){for(var le in te)Object.prototype.hasOwnProperty.call(te,le)&&(K[le]=te[le])})(C,I)},r=function(){return(r=Object.assign||function(C){for(var I,K=1,te=arguments.length;K<te;K++)for(var le in I=arguments[K])Object.prototype.hasOwnProperty.call(I,le)&&(C[le]=I[le]);return C}).apply(this,arguments)};function a(C,I,K){for(var te,le=0,be=I.length;le<be;le++)!te&&le in I||((te=te||Array.prototype.slice.call(I,0,le))[le]=I[le]);return C.concat(te||Array.prototype.slice.call(I))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Uc,o=Object.keys,s=Array.isArray;function u(C,I){return typeof I!="object"||o(I).forEach(function(K){C[K]=I[K]}),C}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function h(C,I){return f.call(C,I)}function m(C,I){typeof I=="function"&&(I=I(c(C))),(typeof Reflect>"u"?o:Reflect.ownKeys)(I).forEach(function(K){v(C,K,I[K])})}var g=Object.defineProperty;function v(C,I,K,te){g(C,I,u(K&&h(K,"get")&&typeof K.get=="function"?{get:K.get,set:K.set,configurable:!0}:{value:K,configurable:!0,writable:!0},te))}function w(C){return{from:function(I){return C.prototype=Object.create(I.prototype),v(C.prototype,"constructor",C),{extend:m.bind(null,C.prototype)}}}}var _=Object.getOwnPropertyDescriptor,x=[].slice;function S(C,I,K){return x.call(C,I,K)}function E(C,I){return I(C)}function A(C){if(!C)throw new Error("Assertion Failed")}function k(C){i.setImmediate?setImmediate(C):setTimeout(C,0)}function D(C,I){if(typeof I=="string"&&h(C,I))return C[I];if(!I)return C;if(typeof I!="string"){for(var K=[],te=0,le=I.length;te<le;++te){var be=D(C,I[te]);K.push(be)}return K}var je=I.indexOf(".");if(je!==-1){var Le=C[I.substr(0,je)];return Le==null?void 0:D(Le,I.substr(je+1))}}function O(C,I,K){if(C&&I!==void 0&&!("isFrozen"in Object&&Object.isFrozen(C)))if(typeof I!="string"&&"length"in I){A(typeof K!="string"&&"length"in K);for(var te=0,le=I.length;te<le;++te)O(C,I[te],K[te])}else{var be,je,Le=I.indexOf(".");Le!==-1?(be=I.substr(0,Le),(je=I.substr(Le+1))===""?K===void 0?s(C)&&!isNaN(parseInt(be))?C.splice(be,1):delete C[be]:C[be]=K:O(Le=!(Le=C[be])||!h(C,be)?C[be]={}:Le,je,K)):K===void 0?s(C)&&!isNaN(parseInt(I))?C.splice(I,1):delete C[I]:C[I]=K}}function N(C){var I,K={};for(I in C)h(C,I)&&(K[I]=C[I]);return K}var z=[].concat;function H(C){return z.apply([],C)}var _t="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(H([8,16,32,64].map(function(C){return["Int","Uint","Float"].map(function(I){return I+C+"Array"})}))).filter(function(C){return i[C]}),ee=new Set(_t.map(function(C){return i[C]})),P=null;function Z(C){return P=new WeakMap,C=function I(K){if(!K||typeof K!="object")return K;var te=P.get(K);if(te)return te;if(s(K)){te=[],P.set(K,te);for(var le=0,be=K.length;le<be;++le)te.push(I(K[le]))}else if(ee.has(K.constructor))te=K;else{var je,Le=c(K);for(je in te=Le===Object.prototype?{}:Object.create(Le),P.set(K,te),K)h(K,je)&&(te[je]=I(K[je]))}return te}(C),P=null,C}var V={}.toString;function fe(C){return V.call(C).slice(8,-1)}var ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Y=typeof ue=="symbol"?function(C){var I;return C!=null&&(I=C[ue])&&I.apply(C)}:function(){return null};function X(C,I){return I=C.indexOf(I),0<=I&&C.splice(I,1),0<=I}var ae={};function G(C){var I,K,te,le;if(arguments.length===1){if(s(C))return C.slice();if(this===ae&&typeof C=="string")return[C];if(le=Y(C)){for(K=[];!(te=le.next()).done;)K.push(te.value);return K}if(C==null)return[C];if(typeof(I=C.length)!="number")return[C];for(K=new Array(I);I--;)K[I]=C[I];return K}for(I=arguments.length,K=new Array(I);I--;)K[I]=arguments[I];return K}var Q=typeof Symbol<"u"?function(C){return C[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},at=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ri=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(at),ne={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(C,I){this.name=C,this.message=I}function _e(C,I){return C+". Errors: "+Object.keys(I).map(function(K){return I[K].toString()}).filter(function(K,te,le){return le.indexOf(K)===te}).join(`
`)}function ve(C,I,K,te){this.failures=I,this.failedKeys=te,this.successCount=K,this.message=_e(C,I)}function Pe(C,I){this.name="BulkError",this.failures=Object.keys(I).map(function(K){return I[K]}),this.failuresByPos=I,this.message=_e(C,this.failures)}w(de).from(Error).extend({toString:function(){return this.name+": "+this.message}}),w(ve).from(de),w(Pe).from(de);var Fe=ri.reduce(function(C,I){return C[I]=I+"Error",C},{}),Ie=de,Te=ri.reduce(function(C,I){var K=I+"Error";function te(le,be){this.name=K,le?typeof le=="string"?(this.message="".concat(le).concat(be?`
 `+be:""),this.inner=be||null):typeof le=="object"&&(this.message="".concat(le.name," ").concat(le.message),this.inner=le):(this.message=ne[I]||K,this.inner=null)}return w(te).from(Ie),C[I]=te,C},{});Te.Syntax=SyntaxError,Te.Type=TypeError,Te.Range=RangeError;var Ue=at.reduce(function(C,I){return C[I+"Error"]=Te[I],C},{}),Ve=ri.reduce(function(C,I){return["Syntax","Type","Range"].indexOf(I)===-1&&(C[I+"Error"]=Te[I]),C},{});function Ee(){}function Ae(C){return C}function B(C,I){return C==null||C===Ae?I:function(K){return I(C(K))}}function Ce(C,I){return function(){C.apply(this,arguments),I.apply(this,arguments)}}function Re(C,I){return C===Ee?I:function(){var K=C.apply(this,arguments);K!==void 0&&(arguments[0]=K);var te=this.onsuccess,le=this.onerror;this.onsuccess=null,this.onerror=null;var be=I.apply(this,arguments);return te&&(this.onsuccess=this.onsuccess?Ce(te,this.onsuccess):te),le&&(this.onerror=this.onerror?Ce(le,this.onerror):le),be!==void 0?be:K}}function se(C,I){return C===Ee?I:function(){C.apply(this,arguments);var K=this.onsuccess,te=this.onerror;this.onsuccess=this.onerror=null,I.apply(this,arguments),K&&(this.onsuccess=this.onsuccess?Ce(K,this.onsuccess):K),te&&(this.onerror=this.onerror?Ce(te,this.onerror):te)}}function ie(C,I){return C===Ee?I:function(K){var te=C.apply(this,arguments);u(K,te);var le=this.onsuccess,be=this.onerror;return this.onsuccess=null,this.onerror=null,K=I.apply(this,arguments),le&&(this.onsuccess=this.onsuccess?Ce(le,this.onsuccess):le),be&&(this.onerror=this.onerror?Ce(be,this.onerror):be),te===void 0?K===void 0?void 0:K:u(te,K)}}function J(C,I){return C===Ee?I:function(){return I.apply(this,arguments)!==!1&&C.apply(this,arguments)}}function xe(C,I){return C===Ee?I:function(){var K=C.apply(this,arguments);if(K&&typeof K.then=="function"){for(var te=this,le=arguments.length,be=new Array(le);le--;)be[le]=arguments[le];return K.then(function(){return I.apply(te,be)})}return I.apply(this,arguments)}}Ve.ModifyError=ve,Ve.DexieError=de,Ve.BulkError=Pe;var Me=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Se(C){Me=C}var Ze={},Et=100,_t=typeof Promise>"u"?[]:function(){var C=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[C,c(C),C];var I=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[I,c(I),C]}(),at=_t[0],ri=_t[1],_t=_t[2],ri=ri&&ri.then,Nt=at&&at.constructor,Rt=!!_t,Kt=function(C,I){oe.push([C,I]),R&&(queueMicrotask(me),R=!1)},pe=!0,R=!0,q=[],ce=[],Oe=Ae,ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ee,pgp:!1,env:{},finalize:Ee},ke=ye,oe=[],ft=0,vt=[];function j(C){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var I=this._PSD=ke;if(typeof C!="function"){if(C!==Ze)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ge(this,this._value))}this._state=null,this._value=null,++I.ref,function K(te,le){try{le(function(be){if(te._state===null){if(be===te)throw new TypeError("A promise cannot be resolved with itself.");var je=te._lib&&U();be&&typeof be.then=="function"?K(te,function(Le,We){be instanceof j?be._then(Le,We):be.then(Le,We)}):(te._state=!0,te._value=be,De(te)),je&&$()}},ge.bind(null,te))}catch(be){ge(te,be)}}(this,C)}var $e={get:function(){var C=ke,I=Ct;function K(te,le){var be=this,je=!C.global&&(C!==ke||I!==Ct),Le=je&&!Bn(),We=new j(function(Ye,tt){Je(be,new st(Jo(te,C,je,Le),Jo(le,C,je,Le),Ye,tt,C))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return K.prototype=Ze,K},set:function(C){v(this,"then",C&&C.prototype===Ze?$e:{get:function(){return C},set:$e.set})}};function st(C,I,K,te,le){this.onFulfilled=typeof C=="function"?C:null,this.onRejected=typeof I=="function"?I:null,this.resolve=K,this.reject=te,this.psd=le}function ge(C,I){var K,te;ce.push(I),C._state===null&&(K=C._lib&&U(),I=Oe(I),C._state=!1,C._value=I,te=C,q.some(function(le){return le._value===te._value})||q.push(te),De(C),K&&$())}function De(C){var I=C._listeners;C._listeners=[];for(var K=0,te=I.length;K<te;++K)Je(C,I[K]);var le=C._PSD;--le.ref||le.finalize(),ft===0&&(++ft,Kt(function(){--ft==0&&W()},[]))}function Je(C,I){if(C._state!==null){var K=C._state?I.onFulfilled:I.onRejected;if(K===null)return(C._state?I.resolve:I.reject)(C._value);++I.psd.ref,++ft,Kt(It,[K,C,I])}else C._listeners.push(I)}function It(C,I,K){try{var te,le=I._value;!I._state&&ce.length&&(ce=[]),te=Me&&I._consoleTask?I._consoleTask.run(function(){return C(le)}):C(le),I._state||ce.indexOf(le)!==-1||function(be){for(var je=q.length;je;)if(q[--je]._value===be._value)return q.splice(je,1)}(I),K.resolve(te)}catch(be){K.reject(be)}finally{--ft==0&&W(),--K.psd.ref||K.psd.finalize()}}function me(){Xo(ye,function(){U()&&$()})}function U(){var C=pe;return R=pe=!1,C}function $(){var C,I,K;do for(;0<oe.length;)for(C=oe,oe=[],K=C.length,I=0;I<K;++I){var te=C[I];te[0].apply(null,te[1])}while(0<oe.length);R=pe=!0}function W(){var C=q;q=[],C.forEach(function(te){te._PSD.onunhandled.call(null,te._value,te)});for(var I=vt.slice(0),K=I.length;K;)I[--K]()}function he(C){return new j(Ze,!1,C)}function Ne(C,I){var K=ke;return function(){var te=U(),le=ke;try{return Dn(K,!0),C.apply(this,arguments)}catch(be){I&&I(be)}finally{Dn(le,!1),te&&$()}}}m(j.prototype,{then:$e,_then:function(C,I){Je(this,new st(null,null,C,I,ke))},catch:function(C){if(arguments.length===1)return this.then(null,C);var I=C,K=arguments[1];return typeof I=="function"?this.then(null,function(te){return(te instanceof I?K:he)(te)}):this.then(null,function(te){return(te&&te.name===I?K:he)(te)})},finally:function(C){return this.then(function(I){return j.resolve(C()).then(function(){return I})},function(I){return j.resolve(C()).then(function(){return he(I)})})},timeout:function(C,I){var K=this;return C<1/0?new j(function(te,le){var be=setTimeout(function(){return le(new Te.Timeout(I))},C);K.then(te,le).finally(clearTimeout.bind(null,be))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(j.prototype,Symbol.toStringTag,"Dexie.Promise"),ye.env=ei(),m(j,{all:function(){var C=G.apply(null,arguments).map(fr);return new j(function(I,K){C.length===0&&I([]);var te=C.length;C.forEach(function(le,be){return j.resolve(le).then(function(je){C[be]=je,--te||I(C)},K)})})},resolve:function(C){return C instanceof j?C:C&&typeof C.then=="function"?new j(function(I,K){C.then(I,K)}):new j(Ze,!0,C)},reject:he,race:function(){var C=G.apply(null,arguments).map(fr);return new j(function(I,K){C.map(function(te){return j.resolve(te).then(I,K)})})},PSD:{get:function(){return ke},set:function(C){return ke=C}},totalEchoes:{get:function(){return Ct}},newPSD:Zt,usePSD:Xo,scheduler:{get:function(){return Kt},set:function(C){Kt=C}},rejectionMapper:{get:function(){return Oe},set:function(C){Oe=C}},follow:function(C,I){return new j(function(K,te){return Zt(function(le,be){var je=ke;je.unhandleds=[],je.onunhandled=be,je.finalize=Ce(function(){var Le,We=this;Le=function(){We.unhandleds.length===0?le():be(We.unhandleds[0])},vt.push(function Ye(){Le(),vt.splice(vt.indexOf(Ye),1)}),++ft,Kt(function(){--ft==0&&W()},[])},je.finalize),C()},I,K,te)})}}),Nt&&(Nt.allSettled&&v(j,"allSettled",function(){var C=G.apply(null,arguments).map(fr);return new j(function(I){C.length===0&&I([]);var K=C.length,te=new Array(K);C.forEach(function(le,be){return j.resolve(le).then(function(je){return te[be]={status:"fulfilled",value:je}},function(je){return te[be]={status:"rejected",reason:je}}).then(function(){return--K||I(te)})})})}),Nt.any&&typeof AggregateError<"u"&&v(j,"any",function(){var C=G.apply(null,arguments).map(fr);return new j(function(I,K){C.length===0&&K(new AggregateError([]));var te=C.length,le=new Array(te);C.forEach(function(be,je){return j.resolve(be).then(function(Le){return I(Le)},function(Le){le[je]=Le,--te||K(new AggregateError(le))})})})}),Nt.withResolvers&&(j.withResolvers=Nt.withResolvers));var He={awaits:0,echoes:0,id:0},gt=0,Gt=[],ht=0,Ct=0,Ot=0;function Zt(C,I,K,te){var le=ke,be=Object.create(le);return be.parent=le,be.ref=0,be.global=!1,be.id=++Ot,ye.env,be.env=Rt?{Promise:j,PromiseProp:{value:j,configurable:!0,writable:!0},all:j.all,race:j.race,allSettled:j.allSettled,any:j.any,resolve:j.resolve,reject:j.reject}:{},I&&u(be,I),++le.ref,be.finalize=function(){--this.parent.ref||this.parent.finalize()},te=Xo(be,C,K,te),be.ref===0&&be.finalize(),te}function En(){return He.id||(He.id=++gt),++He.awaits,He.echoes+=Et,He.id}function Bn(){return!!He.awaits&&(--He.awaits==0&&(He.id=0),He.echoes=He.awaits*Et,!0)}function fr(C){return He.echoes&&C&&C.constructor===Nt?(En(),C.then(function(I){return Bn(),I},function(I){return Bn(),Br(I)})):C}function hr(){var C=Gt[Gt.length-1];Gt.pop(),Dn(C,!1)}function Dn(C,I){var K,te=ke;(I?!He.echoes||ht++&&C===ke:!ht||--ht&&C===ke)||queueMicrotask(I?(function(le){++Ct,He.echoes&&--He.echoes!=0||(He.echoes=He.awaits=He.id=0),Gt.push(ke),Dn(le,!0)}).bind(null,C):hr),C!==ke&&(ke=C,te===ye&&(ye.env=ei()),Rt&&(K=ye.env.Promise,I=C.env,(te.global||C.global)&&(Object.defineProperty(i,"Promise",I.PromiseProp),K.all=I.all,K.race=I.race,K.resolve=I.resolve,K.reject=I.reject,I.allSettled&&(K.allSettled=I.allSettled),I.any&&(K.any=I.any))))}function ei(){var C=i.Promise;return Rt?{Promise:C,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject}:{}}function Xo(C,I,K,te,le){var be=ke;try{return Dn(C,!0),I(K,te,le)}finally{Dn(be,!1)}}function Jo(C,I,K,te){return typeof C!="function"?C:function(){var le=ke;K&&En(),Dn(I,!0);try{return C.apply(this,arguments)}finally{Dn(le,!1),te&&queueMicrotask(Bn)}}}function Qo(C){Promise===Nt&&He.echoes===0?ht===0?C():enqueueNativeMicroTask(C):setTimeout(C,0)}(""+ri).indexOf("[native code]")===-1&&(En=Bn=Ee);var Br=j.reject,es="",Yi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",tg="String expected.",xo=[],Bs="__dbnames",Ii="readonly",uc="readwrite";function ts(C,I){return C?I?function(){return C.apply(this,arguments)&&I.apply(this,arguments)}:C:I}var zs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ll(C){return typeof C!="string"||/\./.test(C)?function(I){return I}:function(I){return I[C]===void 0&&C in I&&delete(I=Z(I))[C],I}}function kd(){throw Te.Type()}function zn(C,I){try{var K=Dh(C),te=Dh(I);if(K!==te)return K==="Array"?1:te==="Array"?-1:K==="binary"?1:te==="binary"?-1:K==="string"?1:te==="string"?-1:K==="Date"?1:te!=="Date"?NaN:-1;switch(K){case"number":case"Date":case"string":return I<C?1:C<I?-1:0;case"binary":return function(le,be){for(var je=le.length,Le=be.length,We=je<Le?je:Le,Ye=0;Ye<We;++Ye)if(le[Ye]!==be[Ye])return le[Ye]<be[Ye]?-1:1;return je===Le?0:je<Le?-1:1}(ti(C),ti(I));case"Array":return function(le,be){for(var je=le.length,Le=be.length,We=je<Le?je:Le,Ye=0;Ye<We;++Ye){var tt=zn(le[Ye],be[Ye]);if(tt!==0)return tt}return je===Le?0:je<Le?-1:1}(C,I)}}catch{}return NaN}function Dh(C){var I=typeof C;return I!="object"?I:ArrayBuffer.isView(C)?"binary":(C=fe(C),C==="ArrayBuffer"?"binary":C)}function ti(C){return C instanceof Uint8Array?C:ArrayBuffer.isView(C)?new Uint8Array(C.buffer,C.byteOffset,C.byteLength):new Uint8Array(C)}var Mh=(wr.prototype._trans=function(C,I,K){var te=this._tx||ke.trans,le=this.name,be=Me&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(C==="readonly"?"read":"write"," ").concat(this.name));function je(Ye,tt,qe){if(!qe.schema[le])throw new Te.NotFound("Table "+le+" not part of transaction");return I(qe.idbtrans,qe)}var Le=U();try{var We=te&&te.db._novip===this.db._novip?te===ke.trans?te._promise(C,je,K):Zt(function(){return te._promise(C,je,K)},{trans:te,transless:ke.transless||ke}):function Ye(tt,qe,rt,Ge){if(tt.idbdb&&(tt._state.openComplete||ke.letThrough||tt._vip)){var et=tt._createTransaction(qe,rt,tt._dbSchema);try{et.create(),tt._state.PR1398_maxLoop=3}catch(it){return it.name===Fe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,qe,rt,Ge)})):Br(it)}return et._promise(qe,function(it,Xe){return Zt(function(){return ke.trans=et,Ge(it,Xe,et)})}).then(function(it){if(qe==="readwrite")try{et.idbtrans.commit()}catch{}return qe==="readonly"?it:et._completion.then(function(){return it})})}if(tt._state.openComplete)return Br(new Te.DatabaseClosed(tt._state.dbOpenError));if(!tt._state.isBeingOpened){if(!tt._state.autoOpen)return Br(new Te.DatabaseClosed);tt.open().catch(Ee)}return tt._state.dbReadyPromise.then(function(){return Ye(tt,qe,rt,Ge)})}(this.db,C,[this.name],je);return be&&(We._consoleTask=be,We=We.catch(function(Ye){return console.trace(Ye),Br(Ye)})),We}finally{Le&&$()}},wr.prototype.get=function(C,I){var K=this;return C&&C.constructor===Object?this.where(C).first(I):C==null?Br(new Te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(te){return K.core.get({trans:te,key:C}).then(function(le){return K.hook.reading.fire(le)})}).then(I)},wr.prototype.where=function(C){if(typeof C=="string")return new this.db.WhereClause(this,C);if(s(C))return new this.db.WhereClause(this,"[".concat(C.join("+"),"]"));var I=o(C);if(I.length===1)return this.where(I[0]).equals(C[I[0]]);var K=this.schema.indexes.concat(this.schema.primKey).filter(function(Le){if(Le.compound&&I.every(function(Ye){return 0<=Le.keyPath.indexOf(Ye)})){for(var We=0;We<I.length;++We)if(I.indexOf(Le.keyPath[We])===-1)return!1;return!0}return!1}).sort(function(Le,We){return Le.keyPath.length-We.keyPath.length})[0];if(K&&this.db._maxKey!==es){var be=K.keyPath.slice(0,I.length);return this.where(be).equals(be.map(function(We){return C[We]}))}!K&&Me&&console.warn("The query ".concat(JSON.stringify(C)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(I.join("+"),"]"));var te=this.schema.idxByName;function le(Le,We){return zn(Le,We)===0}var je=I.reduce(function(qe,We){var Ye=qe[0],tt=qe[1],qe=te[We],rt=C[We];return[Ye||qe,Ye||!qe?ts(tt,qe&&qe.multi?function(Ge){return Ge=D(Ge,We),s(Ge)&&Ge.some(function(et){return le(rt,et)})}:function(Ge){return le(rt,D(Ge,We))}):tt]},[null,null]),be=je[0],je=je[1];return be?this.where(be.name).equals(C[be.keyPath]).filter(je):K?this.filter(je):this.where(I).equals("")},wr.prototype.filter=function(C){return this.toCollection().and(C)},wr.prototype.count=function(C){return this.toCollection().count(C)},wr.prototype.offset=function(C){return this.toCollection().offset(C)},wr.prototype.limit=function(C){return this.toCollection().limit(C)},wr.prototype.each=function(C){return this.toCollection().each(C)},wr.prototype.toArray=function(C){return this.toCollection().toArray(C)},wr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},wr.prototype.orderBy=function(C){return new this.db.Collection(new this.db.WhereClause(this,s(C)?"[".concat(C.join("+"),"]"):C))},wr.prototype.reverse=function(){return this.toCollection().reverse()},wr.prototype.mapToClass=function(C){var I,K=this.db,te=this.name;function le(){return I!==null&&I.apply(this,arguments)||this}(this.schema.mappedClass=C).prototype instanceof kd&&(function(We,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function tt(){this.constructor=We}n(We,Ye),We.prototype=Ye===null?Object.create(Ye):(tt.prototype=Ye.prototype,new tt)}(le,I=C),Object.defineProperty(le.prototype,"db",{get:function(){return K},enumerable:!1,configurable:!0}),le.prototype.table=function(){return te},C=le);for(var be=new Set,je=C.prototype;je;je=c(je))Object.getOwnPropertyNames(je).forEach(function(We){return be.add(We)});function Le(We){if(!We)return We;var Ye,tt=Object.create(C.prototype);for(Ye in We)if(!be.has(Ye))try{tt[Ye]=We[Ye]}catch{}return tt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Le,this.hook("reading",Le),C},wr.prototype.defineClass=function(){return this.mapToClass(function(C){u(this,C)})},wr.prototype.add=function(C,I){var K=this,te=this.schema.primKey,le=te.auto,be=te.keyPath,je=C;return be&&le&&(je=Ll(be)(C)),this._trans("readwrite",function(Le){return K.core.mutate({trans:Le,type:"add",keys:I!=null?[I]:null,values:[je]})}).then(function(Le){return Le.numFailures?j.reject(Le.failures[0]):Le.lastResult}).then(function(Le){if(be)try{O(C,be,Le)}catch{}return Le})},wr.prototype.update=function(C,I){return typeof C!="object"||s(C)?this.where(":id").equals(C).modify(I):(C=D(C,this.schema.primKey.keyPath),C===void 0?Br(new Te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(C).modify(I))},wr.prototype.put=function(C,I){var K=this,te=this.schema.primKey,le=te.auto,be=te.keyPath,je=C;return be&&le&&(je=Ll(be)(C)),this._trans("readwrite",function(Le){return K.core.mutate({trans:Le,type:"put",values:[je],keys:I!=null?[I]:null})}).then(function(Le){return Le.numFailures?j.reject(Le.failures[0]):Le.lastResult}).then(function(Le){if(be)try{O(C,be,Le)}catch{}return Le})},wr.prototype.delete=function(C){var I=this;return this._trans("readwrite",function(K){return I.core.mutate({trans:K,type:"delete",keys:[C]})}).then(function(K){return K.numFailures?j.reject(K.failures[0]):void 0})},wr.prototype.clear=function(){var C=this;return this._trans("readwrite",function(I){return C.core.mutate({trans:I,type:"deleteRange",range:zs})}).then(function(I){return I.numFailures?j.reject(I.failures[0]):void 0})},wr.prototype.bulkGet=function(C){var I=this;return this._trans("readonly",function(K){return I.core.getMany({keys:C,trans:K}).then(function(te){return te.map(function(le){return I.hook.reading.fire(le)})})})},wr.prototype.bulkAdd=function(C,I,K){var te=this,le=Array.isArray(I)?I:void 0,be=(K=K||(le?void 0:I))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,Le=Ye.auto,Ye=Ye.keyPath;if(Ye&&le)throw new Te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(le&&le.length!==C.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var We=C.length,Ye=Ye&&Le?C.map(Ll(Ye)):C;return te.core.mutate({trans:je,type:"add",keys:le,values:Ye,wantResults:be}).then(function(et){var qe=et.numFailures,rt=et.results,Ge=et.lastResult,et=et.failures;if(qe===0)return be?rt:Ge;throw new Pe("".concat(te.name,".bulkAdd(): ").concat(qe," of ").concat(We," operations failed"),et)})})},wr.prototype.bulkPut=function(C,I,K){var te=this,le=Array.isArray(I)?I:void 0,be=(K=K||(le?void 0:I))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,Le=Ye.auto,Ye=Ye.keyPath;if(Ye&&le)throw new Te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(le&&le.length!==C.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var We=C.length,Ye=Ye&&Le?C.map(Ll(Ye)):C;return te.core.mutate({trans:je,type:"put",keys:le,values:Ye,wantResults:be}).then(function(et){var qe=et.numFailures,rt=et.results,Ge=et.lastResult,et=et.failures;if(qe===0)return be?rt:Ge;throw new Pe("".concat(te.name,".bulkPut(): ").concat(qe," of ").concat(We," operations failed"),et)})})},wr.prototype.bulkUpdate=function(C){var I=this,K=this.core,te=C.map(function(je){return je.key}),le=C.map(function(je){return je.changes}),be=[];return this._trans("readwrite",function(je){return K.getMany({trans:je,keys:te,cache:"clone"}).then(function(Le){var We=[],Ye=[];C.forEach(function(qe,rt){var Ge=qe.key,et=qe.changes,it=Le[rt];if(it){for(var Xe=0,dt=Object.keys(et);Xe<dt.length;Xe++){var yt=dt[Xe],bt=et[yt];if(yt===I.schema.primKey.keyPath){if(zn(bt,Ge)!==0)throw new Te.Constraint("Cannot update primary key in bulkUpdate()")}else O(it,yt,bt)}be.push(rt),We.push(Ge),Ye.push(it)}});var tt=We.length;return K.mutate({trans:je,type:"put",keys:We,values:Ye,updates:{keys:te,changeSpecs:le}}).then(function(qe){var rt=qe.numFailures,Ge=qe.failures;if(rt===0)return tt;for(var et=0,it=Object.keys(Ge);et<it.length;et++){var Xe,dt=it[et],yt=be[Number(dt)];yt!=null&&(Xe=Ge[dt],delete Ge[dt],Ge[yt]=Xe)}throw new Pe("".concat(I.name,".bulkUpdate(): ").concat(rt," of ").concat(tt," operations failed"),Ge)})})})},wr.prototype.bulkDelete=function(C){var I=this,K=C.length;return this._trans("readwrite",function(te){return I.core.mutate({trans:te,type:"delete",keys:C})}).then(function(je){var le=je.numFailures,be=je.lastResult,je=je.failures;if(le===0)return be;throw new Pe("".concat(I.name,".bulkDelete(): ").concat(le," of ").concat(K," operations failed"),je)})},wr);function wr(){}function ns(C){function I(je,Le){if(Le){for(var We=arguments.length,Ye=new Array(We-1);--We;)Ye[We-1]=arguments[We];return K[je].subscribe.apply(null,Ye),C}if(typeof je=="string")return K[je]}var K={};I.addEventType=be;for(var te=1,le=arguments.length;te<le;++te)be(arguments[te]);return I;function be(je,Le,We){if(typeof je!="object"){var Ye;Le=Le||J;var tt={subscribers:[],fire:We=We||Ee,subscribe:function(qe){tt.subscribers.indexOf(qe)===-1&&(tt.subscribers.push(qe),tt.fire=Le(tt.fire,qe))},unsubscribe:function(qe){tt.subscribers=tt.subscribers.filter(function(rt){return rt!==qe}),tt.fire=tt.subscribers.reduce(Le,We)}};return K[je]=I[je]=tt}o(Ye=je).forEach(function(qe){var rt=Ye[qe];if(s(rt))be(qe,Ye[qe][0],Ye[qe][1]);else{if(rt!=="asap")throw new Te.InvalidArgument("Invalid event config");var Ge=be(qe,Ae,function(){for(var et=arguments.length,it=new Array(et);et--;)it[et]=arguments[et];Ge.subscribers.forEach(function(Xe){k(function(){Xe.apply(null,it)})})})}})}}function $l(C,I){return w(I).from({prototype:C}),I}function So(C,I){return!(C.filter||C.algorithm||C.or)&&(I?C.justLimit:!C.replayFilter)}function Ph(C,I){C.filter=ts(C.filter,I)}function La(C,I,K){var te=C.replayFilter;C.replayFilter=te?function(){return ts(te(),I())}:I,C.justLimit=K&&!te}function Bl(C,I){if(C.isPrimKey)return I.primaryKey;var K=I.getIndexByKeyPath(C.index);if(!K)throw new Te.Schema("KeyPath "+C.index+" on object store "+I.name+" is not indexed");return K}function Fh(C,I,K){var te=Bl(C,I.schema);return I.openCursor({trans:K,values:!C.keysOnly,reverse:C.dir==="prev",unique:!!C.unique,query:{index:te,range:C.range}})}function zl(C,I,K,te){var le=C.replayFilter?ts(C.filter,C.replayFilter()):C.filter;if(C.or){var be={},je=function(Le,We,Ye){var tt,qe;le&&!le(We,Ye,function(rt){return We.stop(rt)},function(rt){return We.fail(rt)})||((qe=""+(tt=We.primaryKey))=="[object ArrayBuffer]"&&(qe=""+new Uint8Array(tt)),h(be,qe)||(be[qe]=!0,I(Le,We,Ye)))};return Promise.all([C.or._iterate(je,K),Us(Fh(C,te,K),C.algorithm,je,!C.keysOnly&&C.valueMapper)])}return Us(Fh(C,te,K),ts(C.algorithm,le),I,!C.keysOnly&&C.valueMapper)}function Us(C,I,K,te){var le=Ne(te?function(be,je,Le){return K(te(be),je,Le)}:K);return C.then(function(be){if(be)return be.start(function(){var je=function(){return be.continue()};I&&!I(be,function(Le){return je=Le},function(Le){be.stop(Le),je=Ee},function(Le){be.fail(Le),je=Ee})||le(be.value,be,function(Le){return je=Le}),je()})})}var Ul=(Lh.prototype.execute=function(C){var I=this["@@propmod"];if(I.add!==void 0){var K=I.add;if(s(K))return a(a([],s(C)?C:[],!0),K).sort();if(typeof K=="number")return(Number(C)||0)+K;if(typeof K=="bigint")try{return BigInt(C)+K}catch{return BigInt(0)+K}throw new TypeError("Invalid term ".concat(K))}if(I.remove!==void 0){var te=I.remove;if(s(te))return s(C)?C.filter(function(le){return!te.includes(le)}).sort():[];if(typeof te=="number")return Number(C)-te;if(typeof te=="bigint")try{return BigInt(C)-te}catch{return BigInt(0)-te}throw new TypeError("Invalid subtrahend ".concat(te))}return K=(K=I.replacePrefix)===null||K===void 0?void 0:K[0],K&&typeof C=="string"&&C.startsWith(K)?I.replacePrefix[1]+C.substring(K.length):C},Lh);function Lh(C){this["@@propmod"]=C}var ql=(Vn.prototype._read=function(C,I){var K=this._ctx;return K.error?K.table._trans(null,Br.bind(null,K.error)):K.table._trans("readonly",C).then(I)},Vn.prototype._write=function(C){var I=this._ctx;return I.error?I.table._trans(null,Br.bind(null,I.error)):I.table._trans("readwrite",C,"locked")},Vn.prototype._addAlgorithm=function(C){var I=this._ctx;I.algorithm=ts(I.algorithm,C)},Vn.prototype._iterate=function(C,I){return zl(this._ctx,C,I,this._ctx.table.core)},Vn.prototype.clone=function(C){var I=Object.create(this.constructor.prototype),K=Object.create(this._ctx);return C&&u(K,C),I._ctx=K,I},Vn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Vn.prototype.each=function(C){var I=this._ctx;return this._read(function(K){return zl(I,C,K,I.table.core)})},Vn.prototype.count=function(C){var I=this;return this._read(function(K){var te=I._ctx,le=te.table.core;if(So(te,!0))return le.count({trans:K,query:{index:Bl(te,le.schema),range:te.range}}).then(function(je){return Math.min(je,te.limit)});var be=0;return zl(te,function(){return++be,!1},K,le).then(function(){return be})}).then(C)},Vn.prototype.sortBy=function(C,I){var K=C.split(".").reverse(),te=K[0],le=K.length-1;function be(We,Ye){return Ye?be(We[K[Ye]],Ye-1):We[te]}var je=this._ctx.dir==="next"?1:-1;function Le(We,Ye){return zn(be(We,le),be(Ye,le))*je}return this.toArray(function(We){return We.sort(Le)}).then(I)},Vn.prototype.toArray=function(C){var I=this;return this._read(function(K){var te=I._ctx;if(te.dir==="next"&&So(te,!0)&&0<te.limit){var le=te.valueMapper,be=Bl(te,te.table.core.schema);return te.table.core.query({trans:K,limit:te.limit,values:!0,query:{index:be,range:te.range}}).then(function(Le){return Le=Le.result,le?Le.map(le):Le})}var je=[];return zl(te,function(Le){return je.push(Le)},K,te.table.core).then(function(){return je})},C)},Vn.prototype.offset=function(C){var I=this._ctx;return C<=0||(I.offset+=C,So(I)?La(I,function(){var K=C;return function(te,le){return K===0||(K===1?--K:le(function(){te.advance(K),K=0}),!1)}}):La(I,function(){var K=C;return function(){return--K<0}})),this},Vn.prototype.limit=function(C){return this._ctx.limit=Math.min(this._ctx.limit,C),La(this._ctx,function(){var I=C;return function(K,te,le){return--I<=0&&te(le),0<=I}},!0),this},Vn.prototype.until=function(C,I){return Ph(this._ctx,function(K,te,le){return!C(K.value)||(te(le),I)}),this},Vn.prototype.first=function(C){return this.limit(1).toArray(function(I){return I[0]}).then(C)},Vn.prototype.last=function(C){return this.reverse().first(C)},Vn.prototype.filter=function(C){var I;return Ph(this._ctx,function(K){return C(K.value)}),(I=this._ctx).isMatch=ts(I.isMatch,C),this},Vn.prototype.and=function(C){return this.filter(C)},Vn.prototype.or=function(C){return new this.db.WhereClause(this._ctx.table,C,this)},Vn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Vn.prototype.desc=function(){return this.reverse()},Vn.prototype.eachKey=function(C){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(K,te){C(te.key,te)})},Vn.prototype.eachUniqueKey=function(C){return this._ctx.unique="unique",this.eachKey(C)},Vn.prototype.eachPrimaryKey=function(C){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(K,te){C(te.primaryKey,te)})},Vn.prototype.keys=function(C){var I=this._ctx;I.keysOnly=!I.isMatch;var K=[];return this.each(function(te,le){K.push(le.key)}).then(function(){return K}).then(C)},Vn.prototype.primaryKeys=function(C){var I=this._ctx;if(I.dir==="next"&&So(I,!0)&&0<I.limit)return this._read(function(te){var le=Bl(I,I.table.core.schema);return I.table.core.query({trans:te,values:!1,limit:I.limit,query:{index:le,range:I.range}})}).then(function(te){return te.result}).then(C);I.keysOnly=!I.isMatch;var K=[];return this.each(function(te,le){K.push(le.primaryKey)}).then(function(){return K}).then(C)},Vn.prototype.uniqueKeys=function(C){return this._ctx.unique="unique",this.keys(C)},Vn.prototype.firstKey=function(C){return this.limit(1).keys(function(I){return I[0]}).then(C)},Vn.prototype.lastKey=function(C){return this.reverse().firstKey(C)},Vn.prototype.distinct=function(){var C=this._ctx,C=C.index&&C.table.schema.idxByName[C.index];if(!C||!C.multi)return this;var I={};return Ph(this._ctx,function(le){var te=le.primaryKey.toString(),le=h(I,te);return I[te]=!0,!le}),this},Vn.prototype.modify=function(C){var I=this,K=this._ctx;return this._write(function(te){var le,be,je;je=typeof C=="function"?C:(le=o(C),be=le.length,function(Xe){for(var dt=!1,yt=0;yt<be;++yt){var bt=le[yt],xt=C[bt],Ft=D(Xe,bt);xt instanceof Ul?(O(Xe,bt,xt.execute(Ft)),dt=!0):Ft!==xt&&(O(Xe,bt,xt),dt=!0)}return dt});var Le=K.table.core,qe=Le.schema.primaryKey,We=qe.outbound,Ye=qe.extractKey,tt=200,qe=I.db._options.modifyChunkSize;qe&&(tt=typeof qe=="object"?qe[Le.name]||qe["*"]||200:qe);function rt(Xe,bt){var yt=bt.failures,bt=bt.numFailures;et+=Xe-bt;for(var xt=0,Ft=o(yt);xt<Ft.length;xt++){var Ut=Ft[xt];Ge.push(yt[Ut])}}var Ge=[],et=0,it=[];return I.clone().primaryKeys().then(function(Xe){function dt(bt){var xt=Math.min(tt,Xe.length-bt);return Le.getMany({trans:te,keys:Xe.slice(bt,bt+xt),cache:"immutable"}).then(function(Ft){for(var Ut=[],Dt=[],Bt=We?[]:null,Vt=[],Mt=0;Mt<xt;++Mt){var Xt=Ft[Mt],un={value:Z(Xt),primKey:Xe[bt+Mt]};je.call(un,un.value,un)!==!1&&(un.value==null?Vt.push(Xe[bt+Mt]):We||zn(Ye(Xt),Ye(un.value))===0?(Dt.push(un.value),We&&Bt.push(Xe[bt+Mt])):(Vt.push(Xe[bt+Mt]),Ut.push(un.value)))}return Promise.resolve(0<Ut.length&&Le.mutate({trans:te,type:"add",values:Ut}).then(function(fn){for(var kn in fn.failures)Vt.splice(parseInt(kn),1);rt(Ut.length,fn)})).then(function(){return(0<Dt.length||yt&&typeof C=="object")&&Le.mutate({trans:te,type:"put",keys:Bt,values:Dt,criteria:yt,changeSpec:typeof C!="function"&&C,isAdditionalChunk:0<bt}).then(function(fn){return rt(Dt.length,fn)})}).then(function(){return(0<Vt.length||yt&&C===Cd)&&Le.mutate({trans:te,type:"delete",keys:Vt,criteria:yt,isAdditionalChunk:0<bt}).then(function(fn){return rt(Vt.length,fn)})}).then(function(){return Xe.length>bt+xt&&dt(bt+tt)})})}var yt=So(K)&&K.limit===1/0&&(typeof C!="function"||C===Cd)&&{index:K.index,range:K.range};return dt(0).then(function(){if(0<Ge.length)throw new ve("Error modifying one or more objects",Ge,et,it);return Xe.length})})})},Vn.prototype.delete=function(){var C=this._ctx,I=C.range;return So(C)&&(C.isPrimKey||I.type===3)?this._write(function(K){var te=C.table.core.schema.primaryKey,le=I;return C.table.core.count({trans:K,query:{index:te,range:le}}).then(function(be){return C.table.core.mutate({trans:K,type:"deleteRange",range:le}).then(function(je){var Le=je.failures;if(je.lastResult,je.results,je=je.numFailures,je)throw new ve("Could not delete some values",Object.keys(Le).map(function(We){return Le[We]}),be-je);return be-je})})}):this.modify(Cd)},Vn);function Vn(){}var Cd=function(C,I){return I.value=null};function ng(C,I){return C<I?-1:C===I?0:1}function $h(C,I){return I<C?-1:C===I?0:1}function ni(C,I,K){return C=C instanceof Hs?new C.Collection(C):C,C._ctx.error=new(K||TypeError)(I),C}function Hl(C){return new C.Collection(C,function(){return Ad("")}).limit(0)}function qs(C,I,K,te){var le,be,je,Le,We,Ye,tt,qe=K.length;if(!K.every(function(et){return typeof et=="string"}))return ni(C,tg);function rt(et){le=et==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},be=et==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},je=et==="next"?ng:$h;var it=K.map(function(Xe){return{lower:be(Xe),upper:le(Xe)}}).sort(function(Xe,dt){return je(Xe.lower,dt.lower)});Le=it.map(function(Xe){return Xe.upper}),We=it.map(function(Xe){return Xe.lower}),tt=(Ye=et)==="next"?"":te}rt("next"),C=new C.Collection(C,function(){return Xi(Le[0],We[qe-1]+te)}),C._ondirectionchange=function(et){rt(et)};var Ge=0;return C._addAlgorithm(function(et,it,Xe){var dt=et.key;if(typeof dt!="string")return!1;var yt=be(dt);if(I(yt,We,Ge))return!0;for(var bt=null,xt=Ge;xt<qe;++xt){var Ft=function(Ut,Dt,Bt,Vt,Mt,Xt){for(var un=Math.min(Ut.length,Vt.length),fn=-1,kn=0;kn<un;++kn){var Ia=Dt[kn];if(Ia!==Vt[kn])return Mt(Ut[kn],Bt[kn])<0?Ut.substr(0,kn)+Bt[kn]+Bt.substr(kn+1):Mt(Ut[kn],Vt[kn])<0?Ut.substr(0,kn)+Vt[kn]+Bt.substr(kn+1):0<=fn?Ut.substr(0,fn)+Dt[fn]+Bt.substr(fn+1):null;Mt(Ut[kn],Ia)<0&&(fn=kn)}return un<Vt.length&&Xt==="next"?Ut+Bt.substr(Ut.length):un<Ut.length&&Xt==="prev"?Ut.substr(0,Bt.length):fn<0?null:Ut.substr(0,fn)+Vt[fn]+Bt.substr(fn+1)}(dt,yt,Le[xt],We[xt],je,Ye);Ft===null&&bt===null?Ge=xt+1:(bt===null||0<je(bt,Ft))&&(bt=Ft)}return it(bt!==null?function(){et.continue(bt+tt)}:Xe),!1}),C}function Xi(C,I,K,te){return{type:2,lower:C,upper:I,lowerOpen:K,upperOpen:te}}function Ad(C){return{type:1,lower:C,upper:C}}var Hs=(Object.defineProperty(Rr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Rr.prototype.between=function(C,I,K,te){K=K!==!1,te=te===!0;try{return 0<this._cmp(C,I)||this._cmp(C,I)===0&&(K||te)&&(!K||!te)?Hl(this):new this.Collection(this,function(){return Xi(C,I,!K,!te)})}catch{return ni(this,Yi)}},Rr.prototype.equals=function(C){return C==null?ni(this,Yi):new this.Collection(this,function(){return Ad(C)})},Rr.prototype.above=function(C){return C==null?ni(this,Yi):new this.Collection(this,function(){return Xi(C,void 0,!0)})},Rr.prototype.aboveOrEqual=function(C){return C==null?ni(this,Yi):new this.Collection(this,function(){return Xi(C,void 0,!1)})},Rr.prototype.below=function(C){return C==null?ni(this,Yi):new this.Collection(this,function(){return Xi(void 0,C,!1,!0)})},Rr.prototype.belowOrEqual=function(C){return C==null?ni(this,Yi):new this.Collection(this,function(){return Xi(void 0,C)})},Rr.prototype.startsWith=function(C){return typeof C!="string"?ni(this,tg):this.between(C,C+es,!0,!0)},Rr.prototype.startsWithIgnoreCase=function(C){return C===""?this.startsWith(C):qs(this,function(I,K){return I.indexOf(K[0])===0},[C],es)},Rr.prototype.equalsIgnoreCase=function(C){return qs(this,function(I,K){return I===K[0]},[C],"")},Rr.prototype.anyOfIgnoreCase=function(){var C=G.apply(ae,arguments);return C.length===0?Hl(this):qs(this,function(I,K){return K.indexOf(I)!==-1},C,"")},Rr.prototype.startsWithAnyOfIgnoreCase=function(){var C=G.apply(ae,arguments);return C.length===0?Hl(this):qs(this,function(I,K){return K.some(function(te){return I.indexOf(te)===0})},C,es)},Rr.prototype.anyOf=function(){var C=this,I=G.apply(ae,arguments),K=this._cmp;try{I.sort(K)}catch{return ni(this,Yi)}if(I.length===0)return Hl(this);var te=new this.Collection(this,function(){return Xi(I[0],I[I.length-1])});te._ondirectionchange=function(be){K=be==="next"?C._ascending:C._descending,I.sort(K)};var le=0;return te._addAlgorithm(function(be,je,Le){for(var We=be.key;0<K(We,I[le]);)if(++le===I.length)return je(Le),!1;return K(We,I[le])===0||(je(function(){be.continue(I[le])}),!1)}),te},Rr.prototype.notEqual=function(C){return this.inAnyRange([[-1/0,C],[C,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Rr.prototype.noneOf=function(){var C=G.apply(ae,arguments);if(C.length===0)return new this.Collection(this);try{C.sort(this._ascending)}catch{return ni(this,Yi)}var I=C.reduce(function(K,te){return K?K.concat([[K[K.length-1][1],te]]):[[-1/0,te]]},null);return I.push([C[C.length-1],this.db._maxKey]),this.inAnyRange(I,{includeLowers:!1,includeUppers:!1})},Rr.prototype.inAnyRange=function(dt,I){var K=this,te=this._cmp,le=this._ascending,be=this._descending,je=this._min,Le=this._max;if(dt.length===0)return Hl(this);if(!dt.every(function(yt){return yt[0]!==void 0&&yt[1]!==void 0&&le(yt[0],yt[1])<=0}))return ni(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Te.InvalidArgument);var We=!I||I.includeLowers!==!1,Ye=I&&I.includeUppers===!0,tt,qe=le;function rt(yt,bt){return qe(yt[0],bt[0])}try{(tt=dt.reduce(function(yt,bt){for(var xt=0,Ft=yt.length;xt<Ft;++xt){var Ut=yt[xt];if(te(bt[0],Ut[1])<0&&0<te(bt[1],Ut[0])){Ut[0]=je(Ut[0],bt[0]),Ut[1]=Le(Ut[1],bt[1]);break}}return xt===Ft&&yt.push(bt),yt},[])).sort(rt)}catch{return ni(this,Yi)}var Ge=0,et=Ye?function(yt){return 0<le(yt,tt[Ge][1])}:function(yt){return 0<=le(yt,tt[Ge][1])},it=We?function(yt){return 0<be(yt,tt[Ge][0])}:function(yt){return 0<=be(yt,tt[Ge][0])},Xe=et,dt=new this.Collection(this,function(){return Xi(tt[0][0],tt[tt.length-1][1],!We,!Ye)});return dt._ondirectionchange=function(yt){qe=yt==="next"?(Xe=et,le):(Xe=it,be),tt.sort(rt)},dt._addAlgorithm(function(yt,bt,xt){for(var Ft,Ut=yt.key;Xe(Ut);)if(++Ge===tt.length)return bt(xt),!1;return!et(Ft=Ut)&&!it(Ft)||(K._cmp(Ut,tt[Ge][1])===0||K._cmp(Ut,tt[Ge][0])===0||bt(function(){qe===le?yt.continue(tt[Ge][0]):yt.continue(tt[Ge][1])}),!1)}),dt},Rr.prototype.startsWithAnyOf=function(){var C=G.apply(ae,arguments);return C.every(function(I){return typeof I=="string"})?C.length===0?Hl(this):this.inAnyRange(C.map(function(I){return[I,I+es]})):ni(this,"startsWithAnyOf() only works with strings")},Rr);function Rr(){}function Oi(C){return Ne(function(I){return Vs(I),C(I.target.error),!1})}function Vs(C){C.stopPropagation&&C.stopPropagation(),C.preventDefault&&C.preventDefault()}var Vl="storagemutated",Gs="x-storagemutated-1",ga=ns(null,Vl),Bh=($a.prototype._lock=function(){return A(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},$a.prototype._unlock=function(){if(A(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var C=this._blockedFuncs.shift();try{Xo(C[1],C[0])}catch{}}return this},$a.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},$a.prototype.create=function(C){var I=this;if(!this.mode)return this;var K=this.db.idbdb,te=this.db._state.dbOpenError;if(A(!this.idbtrans),!C&&!K)switch(te&&te.name){case"DatabaseClosedError":throw new Te.DatabaseClosed(te);case"MissingAPIError":throw new Te.MissingAPI(te.message,te);default:throw new Te.OpenFailed(te)}if(!this.active)throw new Te.TransactionInactive;return A(this._completion._state===null),(C=this.idbtrans=C||(this.db.core||K).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ne(function(le){Vs(le),I._reject(C.error)}),C.onabort=Ne(function(le){Vs(le),I.active&&I._reject(new Te.Abort(C.error)),I.active=!1,I.on("abort").fire(le)}),C.oncomplete=Ne(function(){I.active=!1,I._resolve(),"mutatedParts"in C&&ga.storagemutated.fire(C.mutatedParts)}),this},$a.prototype._promise=function(C,I,K){var te=this;if(C==="readwrite"&&this.mode!=="readwrite")return Br(new Te.ReadOnly("Transaction is readonly"));if(!this.active)return Br(new Te.TransactionInactive);if(this._locked())return new j(function(be,je){te._blockedFuncs.push([function(){te._promise(C,I,K).then(be,je)},ke])});if(K)return Zt(function(){var be=new j(function(je,Le){te._lock();var We=I(je,Le,te);We&&We.then&&We.then(je,Le)});return be.finally(function(){return te._unlock()}),be._lib=!0,be});var le=new j(function(be,je){var Le=I(be,je,te);Le&&Le.then&&Le.then(be,je)});return le._lib=!0,le},$a.prototype._root=function(){return this.parent?this.parent._root():this},$a.prototype.waitFor=function(C){var I,K=this._root(),te=j.resolve(C);K._waitingFor?K._waitingFor=K._waitingFor.then(function(){return te}):(K._waitingFor=te,K._waitingQueue=[],I=K.idbtrans.objectStore(K.storeNames[0]),function be(){for(++K._spinCount;K._waitingQueue.length;)K._waitingQueue.shift()();K._waitingFor&&(I.get(-1/0).onsuccess=be)}());var le=K._waitingFor;return new j(function(be,je){te.then(function(Le){return K._waitingQueue.push(Ne(be.bind(null,Le)))},function(Le){return K._waitingQueue.push(Ne(je.bind(null,Le)))}).finally(function(){K._waitingFor===le&&(K._waitingFor=null)})})},$a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Te.Abort))},$a.prototype.table=function(C){var I=this._memoizedTables||(this._memoizedTables={});if(h(I,C))return I[C];var K=this.schema[C];if(!K)throw new Te.NotFound("Table "+C+" not part of transaction");return K=new this.db.Table(C,K,this),K.core=this.db.core.table(C),I[C]=K},$a);function $a(){}function Ji(C,I,K,te,le,be,je){return{name:C,keyPath:I,unique:K,multi:te,auto:le,compound:be,src:(K&&!je?"&":"")+(te?"*":"")+(le?"++":"")+Td(I)}}function Td(C){return typeof C=="string"?C:C?"["+[].join.call(C,"+")+"]":""}function Gl(C,I,K){return{name:C,primKey:I,indexes:K,mappedClass:null,idxByName:(te=function(le){return[le.name,le]},K.reduce(function(le,be,je){return je=te(be,je),je&&(le[je[0]]=je[1]),le},{}))};var te}var Wl=function(C){try{return C.only([[]]),Wl=function(){return[[]]},[[]]}catch{return Wl=function(){return es},es}};function Kl(C){return C==null?function(){}:typeof C=="string"?(I=C).split(".").length===1?function(K){return K[I]}:function(K){return D(K,I)}:function(K){return D(K,C)};var I}function cc(C){return[].slice.call(C)}var rg=0;function ra(C){return C==null?":id":typeof C=="string"?C:"[".concat(C.join("+"),"]")}function Ws(C,I,We){function te(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Xe.lower,et=Xe.upper,it=Xe.lowerOpen,Xe=Xe.upperOpen;return Ge===void 0?et===void 0?null:I.upperBound(et,!!Xe):et===void 0?I.lowerBound(Ge,!!it):I.bound(Ge,et,!!it,!!Xe)}function le(rt){var Ge,et=rt.name;return{name:et,schema:rt,mutate:function(it){var Xe=it.trans,dt=it.type,yt=it.keys,bt=it.values,xt=it.range;return new Promise(function(Ft,Ut){Ft=Ne(Ft);var Dt=Xe.objectStore(et),Bt=Dt.keyPath==null,Vt=dt==="put"||dt==="add";if(!Vt&&dt!=="delete"&&dt!=="deleteRange")throw new Error("Invalid operation type: "+dt);var Mt,Xt=(yt||bt||{length:1}).length;if(yt&&bt&&yt.length!==bt.length)throw new Error("Given keys array must have same length as given values array.");if(Xt===0)return Ft({numFailures:0,failures:{},results:[],lastResult:void 0});function un(ba){++Ia,Vs(ba)}var fn=[],kn=[],Ia=0;if(dt==="deleteRange"){if(xt.type===4)return Ft({numFailures:Ia,failures:kn,results:[],lastResult:void 0});xt.type===3?fn.push(Mt=Dt.clear()):fn.push(Mt=Dt.delete(te(xt)))}else{var Bt=Vt?Bt?[bt,yt]:[bt,null]:[yt,null],bn=Bt[0],Yr=Bt[1];if(Vt)for(var aa=0;aa<Xt;++aa)fn.push(Mt=Yr&&Yr[aa]!==void 0?Dt[dt](bn[aa],Yr[aa]):Dt[dt](bn[aa])),Mt.onerror=un;else for(aa=0;aa<Xt;++aa)fn.push(Mt=Dt[dt](bn[aa])),Mt.onerror=un}function Eo(ba){ba=ba.target.result,fn.forEach(function(eo,os){return eo.error!=null&&(kn[os]=eo.error)}),Ft({numFailures:Ia,failures:kn,results:dt==="delete"?yt:fn.map(function(eo){return eo.result}),lastResult:ba})}Mt.onerror=function(ba){un(ba),Eo(ba)},Mt.onsuccess=Eo})},getMany:function(it){var Xe=it.trans,dt=it.keys;return new Promise(function(yt,bt){yt=Ne(yt);for(var xt,Ft=Xe.objectStore(et),Ut=dt.length,Dt=new Array(Ut),Bt=0,Vt=0,Mt=function(fn){fn=fn.target,Dt[fn._pos]=fn.result,++Vt===Bt&&yt(Dt)},Xt=Oi(bt),un=0;un<Ut;++un)dt[un]!=null&&((xt=Ft.get(dt[un]))._pos=un,xt.onsuccess=Mt,xt.onerror=Xt,++Bt);Bt===0&&yt(Dt)})},get:function(it){var Xe=it.trans,dt=it.key;return new Promise(function(yt,bt){yt=Ne(yt);var xt=Xe.objectStore(et).get(dt);xt.onsuccess=function(Ft){return yt(Ft.target.result)},xt.onerror=Oi(bt)})},query:(Ge=Ye,function(it){return new Promise(function(Xe,dt){Xe=Ne(Xe);var yt,bt,xt,Bt=it.trans,Ft=it.values,Ut=it.limit,Mt=it.query,Dt=Ut===1/0?void 0:Ut,Vt=Mt.index,Mt=Mt.range,Bt=Bt.objectStore(et),Vt=Vt.isPrimaryKey?Bt:Bt.index(Vt.name),Mt=te(Mt);if(Ut===0)return Xe({result:[]});Ge?((Dt=Ft?Vt.getAll(Mt,Dt):Vt.getAllKeys(Mt,Dt)).onsuccess=function(Xt){return Xe({result:Xt.target.result})},Dt.onerror=Oi(dt)):(yt=0,bt=!Ft&&"openKeyCursor"in Vt?Vt.openKeyCursor(Mt):Vt.openCursor(Mt),xt=[],bt.onsuccess=function(Xt){var un=bt.result;return un?(xt.push(Ft?un.value:un.primaryKey),++yt===Ut?Xe({result:xt}):void un.continue()):Xe({result:xt})},bt.onerror=Oi(dt))})}),openCursor:function(it){var Xe=it.trans,dt=it.values,yt=it.query,bt=it.reverse,xt=it.unique;return new Promise(function(Ft,Ut){Ft=Ne(Ft);var Vt=yt.index,Dt=yt.range,Bt=Xe.objectStore(et),Bt=Vt.isPrimaryKey?Bt:Bt.index(Vt.name),Vt=bt?xt?"prevunique":"prev":xt?"nextunique":"next",Mt=!dt&&"openKeyCursor"in Bt?Bt.openKeyCursor(te(Dt),Vt):Bt.openCursor(te(Dt),Vt);Mt.onerror=Oi(Ut),Mt.onsuccess=Ne(function(Xt){var un,fn,kn,Ia,bn=Mt.result;bn?(bn.___id=++rg,bn.done=!1,un=bn.continue.bind(bn),fn=(fn=bn.continuePrimaryKey)&&fn.bind(bn),kn=bn.advance.bind(bn),Ia=function(){throw new Error("Cursor not stopped")},bn.trans=Xe,bn.stop=bn.continue=bn.continuePrimaryKey=bn.advance=function(){throw new Error("Cursor not started")},bn.fail=Ne(Ut),bn.next=function(){var Yr=this,aa=1;return this.start(function(){return aa--?Yr.continue():Yr.stop()}).then(function(){return Yr})},bn.start=function(Yr){function aa(){if(Mt.result)try{Yr()}catch(ba){bn.fail(ba)}else bn.done=!0,bn.start=function(){throw new Error("Cursor behind last entry")},bn.stop()}var Eo=new Promise(function(ba,eo){ba=Ne(ba),Mt.onerror=Oi(eo),bn.fail=eo,bn.stop=function(os){bn.stop=bn.continue=bn.continuePrimaryKey=bn.advance=Ia,ba(os)}});return Mt.onsuccess=Ne(function(ba){Mt.onsuccess=aa,aa()}),bn.continue=un,bn.continuePrimaryKey=fn,bn.advance=kn,aa(),Eo},Ft(bn)):Ft(null)},Ut)})},count:function(it){var Xe=it.query,dt=it.trans,yt=Xe.index,bt=Xe.range;return new Promise(function(xt,Ft){var Ut=dt.objectStore(et),Dt=yt.isPrimaryKey?Ut:Ut.index(yt.name),Ut=te(bt),Dt=Ut?Dt.count(Ut):Dt.count();Dt.onsuccess=Ne(function(Bt){return xt(Bt.target.result)}),Dt.onerror=Oi(Ft)})}}}var be,je,Le,tt=(je=We,Le=cc((be=C).objectStoreNames),{schema:{name:be.name,tables:Le.map(function(rt){return je.objectStore(rt)}).map(function(rt){var Ge=rt.keyPath,Xe=rt.autoIncrement,et=s(Ge),it={},Xe={name:rt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:et,keyPath:Ge,autoIncrement:Xe,unique:!0,extractKey:Kl(Ge)},indexes:cc(rt.indexNames).map(function(dt){return rt.index(dt)}).map(function(xt){var yt=xt.name,bt=xt.unique,Ft=xt.multiEntry,xt=xt.keyPath,Ft={name:yt,compound:s(xt),keyPath:xt,unique:bt,multiEntry:Ft,extractKey:Kl(xt)};return it[ra(xt)]=Ft}),getIndexByKeyPath:function(dt){return it[ra(dt)]}};return it[":id"]=Xe.primaryKey,Ge!=null&&(it[ra(Ge)]=Xe.primaryKey),Xe})},hasGetAll:0<Le.length&&"getAll"in je.objectStore(Le[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=tt.schema,Ye=tt.hasGetAll,tt=We.tables.map(le),qe={};return tt.forEach(function(rt){return qe[rt.name]=rt}),{stack:"dbcore",transaction:C.transaction.bind(C),table:function(rt){if(!qe[rt])throw new Error("Table '".concat(rt,"' not found"));return qe[rt]},MIN_KEY:-1/0,MAX_KEY:Wl(I),schema:We}}function Rd(C,I,K,te){var le=K.IDBKeyRange;return K.indexedDB,{dbcore:(te=Ws(I,le,te),C.dbcore.reduce(function(be,je){return je=je.create,r(r({},be),je(be))},te))}}function rs(C,te){var K=te.db,te=Rd(C._middlewares,K,C._deps,te);C.core=te.dbcore,C.tables.forEach(function(le){var be=le.name;C.core.schema.tables.some(function(je){return je.name===be})&&(le.core=C.core.table(be),C[be]instanceof C.Table&&(C[be].core=le.core))})}function Nd(C,I,K,te){K.forEach(function(le){var be=te[le];I.forEach(function(je){var Le=function We(Ye,tt){return _(Ye,tt)||(Ye=c(Ye))&&We(Ye,tt)}(je,le);(!Le||"value"in Le&&Le.value===void 0)&&(je===C.Transaction.prototype||je instanceof C.Transaction?v(je,le,{get:function(){return this.table(le)},set:function(We){g(this,le,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):je[le]=new C.Table(le,be))})})}function dc(C,I){I.forEach(function(K){for(var te in K)K[te]instanceof C.Table&&delete K[te]})}function zh(C,I){return C._cfg.version-I._cfg.version}function fc(C,I,K,te){var le=C._dbSchema;K.objectStoreNames.contains("$meta")&&!le.$meta&&(le.$meta=Gl("$meta",ig("")[0],[]),C._storeNames.push("$meta"));var be=C._createTransaction("readwrite",C._storeNames,le);be.create(K),be._completion.catch(te);var je=be._reject.bind(be),Le=ke.transless||ke;Zt(function(){return ke.trans=be,ke.transless=Le,I!==0?(rs(C,K),Ye=I,((We=be).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(tt){return tt??Ye}):j.resolve(Ye)).then(function(tt){return rt=tt,Ge=be,et=K,it=[],tt=(qe=C)._versions,Xe=qe._dbSchema=Zl(0,qe.idbdb,et),(tt=tt.filter(function(dt){return dt._cfg.version>=rt})).length!==0?(tt.forEach(function(dt){it.push(function(){var yt=Xe,bt=dt._cfg.dbschema;Dd(qe,yt,et),Dd(qe,bt,et),Xe=qe._dbSchema=bt;var xt=Od(yt,bt);xt.add.forEach(function(Vt){Uh(et,Vt[0],Vt[1].primKey,Vt[1].indexes)}),xt.change.forEach(function(Vt){if(Vt.recreate)throw new Te.Upgrade("Not yet support for changing primary key");var Mt=et.objectStore(Vt.name);Vt.add.forEach(function(Xt){return jd(Mt,Xt)}),Vt.change.forEach(function(Xt){Mt.deleteIndex(Xt.name),jd(Mt,Xt)}),Vt.del.forEach(function(Xt){return Mt.deleteIndex(Xt)})});var Ft=dt._cfg.contentUpgrade;if(Ft&&dt._cfg.version>rt){rs(qe,et),Ge._memoizedTables={};var Ut=N(bt);xt.del.forEach(function(Vt){Ut[Vt]=yt[Vt]}),dc(qe,[qe.Transaction.prototype]),Nd(qe,[qe.Transaction.prototype],o(Ut),Ut),Ge.schema=Ut;var Dt,Bt=Q(Ft);return Bt&&En(),xt=j.follow(function(){var Vt;(Dt=Ft(Ge))&&Bt&&(Vt=Bn.bind(null,null),Dt.then(Vt,Vt))}),Dt&&typeof Dt.then=="function"?j.resolve(Dt):xt.then(function(){return Dt})}}),it.push(function(yt){var bt,xt,Ft=dt._cfg.dbschema;bt=Ft,xt=yt,[].slice.call(xt.db.objectStoreNames).forEach(function(Ut){return bt[Ut]==null&&xt.db.deleteObjectStore(Ut)}),dc(qe,[qe.Transaction.prototype]),Nd(qe,[qe.Transaction.prototype],qe._storeNames,qe._dbSchema),Ge.schema=qe._dbSchema}),it.push(function(yt){qe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qe.idbdb.version/10)===dt._cfg.version?(qe.idbdb.deleteObjectStore("$meta"),delete qe._dbSchema.$meta,qe._storeNames=qe._storeNames.filter(function(bt){return bt!=="$meta"})):yt.objectStore("$meta").put(dt._cfg.version,"version"))})}),function dt(){return it.length?j.resolve(it.shift()(Ge.idbtrans)).then(dt):j.resolve()}().then(function(){ag(Xe,et)})):j.resolve();var qe,rt,Ge,et,it,Xe}).catch(je)):(o(le).forEach(function(tt){Uh(K,tt,le[tt].primKey,le[tt].indexes)}),rs(C,K),void j.follow(function(){return C.on.populate.fire(be)}).catch(je));var We,Ye})}function Id(C,I){ag(C._dbSchema,I),I.db.version%10!=0||I.objectStoreNames.contains("$meta")||I.db.createObjectStore("$meta").add(Math.ceil(I.db.version/10-1),"version");var K=Zl(0,C.idbdb,I);Dd(C,C._dbSchema,I);for(var te=0,le=Od(K,C._dbSchema).change;te<le.length;te++){var be=function(je){if(je.change.length||je.recreate)return console.warn("Unable to patch indexes of table ".concat(je.name," because it has changes on the type of index or primary key.")),{value:void 0};var Le=I.objectStore(je.name);je.add.forEach(function(We){Me&&console.debug("Dexie upgrade patch: Creating missing index ".concat(je.name,".").concat(We.src)),jd(Le,We)})}(le[te]);if(typeof be=="object")return be.value}}function Od(C,I){var K,te={del:[],add:[],change:[]};for(K in C)I[K]||te.del.push(K);for(K in I){var le=C[K],be=I[K];if(le){var je={name:K,def:be,recreate:!1,del:[],add:[],change:[]};if(""+(le.primKey.keyPath||"")!=""+(be.primKey.keyPath||"")||le.primKey.auto!==be.primKey.auto)je.recreate=!0,te.change.push(je);else{var Le=le.idxByName,We=be.idxByName,Ye=void 0;for(Ye in Le)We[Ye]||je.del.push(Ye);for(Ye in We){var tt=Le[Ye],qe=We[Ye];tt?tt.src!==qe.src&&je.change.push(qe):je.add.push(qe)}(0<je.del.length||0<je.add.length||0<je.change.length)&&te.change.push(je)}}else te.add.push([K,be])}return te}function Uh(C,I,K,te){var le=C.db.createObjectStore(I,K.keyPath?{keyPath:K.keyPath,autoIncrement:K.auto}:{autoIncrement:K.auto});return te.forEach(function(be){return jd(le,be)}),le}function ag(C,I){o(C).forEach(function(K){I.db.objectStoreNames.contains(K)||(Me&&console.debug("Dexie: Creating missing table",K),Uh(I,K,C[K].primKey,C[K].indexes))})}function jd(C,I){C.createIndex(I.name,I.keyPath,{unique:I.unique,multiEntry:I.multi})}function Zl(C,I,K){var te={};return S(I.objectStoreNames,0).forEach(function(le){for(var be=K.objectStore(le),je=Ji(Td(Ye=be.keyPath),Ye||"",!0,!1,!!be.autoIncrement,Ye&&typeof Ye!="string",!0),Le=[],We=0;We<be.indexNames.length;++We){var tt=be.index(be.indexNames[We]),Ye=tt.keyPath,tt=Ji(tt.name,Ye,!!tt.unique,!!tt.multiEntry,!1,Ye&&typeof Ye!="string",!1);Le.push(tt)}te[le]=Gl(le,je,Le)}),te}function Dd(C,I,K){for(var te=K.db.objectStoreNames,le=0;le<te.length;++le){var be=te[le],je=K.objectStore(be);C._hasGetAll="getAll"in je;for(var Le=0;Le<je.indexNames.length;++Le){var We=je.indexNames[Le],Ye=je.index(We).keyPath,tt=typeof Ye=="string"?Ye:"["+S(Ye).join("+")+"]";!I[be]||(Ye=I[be].idxByName[tt])&&(Ye.name=We,delete I[be].idxByName[tt],I[be].idxByName[We]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(C._hasGetAll=!1)}function ig(C){return C.split(",").map(function(I,K){var te=(I=I.trim()).replace(/([&*]|\+\+)/g,""),le=/^\[/.test(te)?te.match(/^\[(.*)\]$/)[1].split("+"):te;return Ji(te,le||null,/\&/.test(I),/\*/.test(I),/\+\+/.test(I),s(le),K===0)})}var qw=(Md.prototype._parseStoresSpec=function(C,I){o(C).forEach(function(K){if(C[K]!==null){var te=ig(C[K]),le=te.shift();if(le.unique=!0,le.multi)throw new Te.Schema("Primary key cannot be multi-valued");te.forEach(function(be){if(be.auto)throw new Te.Schema("Only primary key can be marked as autoIncrement (++)");if(!be.keyPath)throw new Te.Schema("Index must have a name and cannot be an empty string")}),I[K]=Gl(K,le,te)}})},Md.prototype.stores=function(K){var I=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,K):K;var K=I._versions,te={},le={};return K.forEach(function(be){u(te,be._cfg.storesSource),le=be._cfg.dbschema={},be._parseStoresSpec(te,le)}),I._dbSchema=le,dc(I,[I._allTables,I,I.Transaction.prototype]),Nd(I,[I._allTables,I,I.Transaction.prototype,this._cfg.tables],o(le),le),I._storeNames=o(le),this},Md.prototype.upgrade=function(C){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Ee,C),this},Md);function Md(){}function qh(C,I){var K=C._dbNamesDB;return K||(K=C._dbNamesDB=new Qi(Bs,{addons:[],indexedDB:C,IDBKeyRange:I})).version(1).stores({dbnames:"name"}),K.table("dbnames")}function Pd(C){return C&&typeof C.databases=="function"}function Hh(C){return Zt(function(){return ke.letThrough=!0,C()})}function Vh(C){return!("from"in C)}var ya=function(C,I){if(!this){var K=new ya;return C&&"d"in C&&u(K,C),K}u(this,arguments.length?{d:1,from:C,to:1<arguments.length?I:C}:{d:0})};function hc(C,I,K){var te=zn(I,K);if(!isNaN(te)){if(0<te)throw RangeError();if(Vh(C))return u(C,{from:I,to:K,d:1});var le=C.l,te=C.r;if(zn(K,C.from)<0)return le?hc(le,I,K):C.l={from:I,to:K,d:1,l:null,r:null},sg(C);if(0<zn(I,C.to))return te?hc(te,I,K):C.r={from:I,to:K,d:1,l:null,r:null},sg(C);zn(I,C.from)<0&&(C.from=I,C.l=null,C.d=te?te.d+1:1),0<zn(K,C.to)&&(C.to=K,C.r=null,C.d=C.l?C.l.d+1:1),K=!C.r,le&&!C.l&&Ks(C,le),te&&K&&Ks(C,te)}}function Ks(C,I){Vh(I)||function K(te,We){var be=We.from,je=We.to,Le=We.l,We=We.r;hc(te,be,je),Le&&K(te,Le),We&&K(te,We)}(C,I)}function og(C,I){var K=Fd(I),te=K.next();if(te.done)return!1;for(var le=te.value,be=Fd(C),je=be.next(le.from),Le=je.value;!te.done&&!je.done;){if(zn(Le.from,le.to)<=0&&0<=zn(Le.to,le.from))return!0;zn(le.from,Le.from)<0?le=(te=K.next(Le.from)).value:Le=(je=be.next(le.from)).value}return!1}function Fd(C){var I=Vh(C)?null:{s:0,n:C};return{next:function(K){for(var te=0<arguments.length;I;)switch(I.s){case 0:if(I.s=1,te)for(;I.n.l&&zn(K,I.n.from)<0;)I={up:I,n:I.n.l,s:1};else for(;I.n.l;)I={up:I,n:I.n.l,s:1};case 1:if(I.s=2,!te||zn(K,I.n.to)<=0)return{value:I.n,done:!1};case 2:if(I.n.r){I.s=3,I={up:I,n:I.n.r,s:0};continue}case 3:I=I.up}return{done:!0}}}}function sg(C){var I,K,te=(((I=C.r)===null||I===void 0?void 0:I.d)||0)-(((K=C.l)===null||K===void 0?void 0:K.d)||0),le=1<te?"r":te<-1?"l":"";le&&(I=le=="r"?"l":"r",K=r({},C),te=C[le],C.from=te.from,C.to=te.to,C[le]=te[le],K[le]=te[I],(C[I]=K).d=Gh(K)),C.d=Gh(C)}function Gh(K){var I=K.r,K=K.l;return(I?K?Math.max(I.d,K.d):I.d:K?K.d:0)+1}function Ld(C,I){return o(I).forEach(function(K){C[K]?Ks(C[K],I[K]):C[K]=function te(le){var be,je,Le={};for(be in le)h(le,be)&&(je=le[be],Le[be]=!je||typeof je!="object"||ee.has(je.constructor)?je:te(je));return Le}(I[K])}),C}function Wh(C,I){return C.all||I.all||Object.keys(C).some(function(K){return I[K]&&og(I[K],C[K])})}m(ya.prototype,((ri={add:function(C){return Ks(this,C),this},addKey:function(C){return hc(this,C,C),this},addKeys:function(C){var I=this;return C.forEach(function(K){return hc(I,K,K)}),this},hasKey:function(C){var I=Fd(this).next(C).value;return I&&zn(I.from,C)<=0&&0<=zn(I.to,C)}})[ue]=function(){return Fd(this)},ri));var Zs={},Kh={},Zh=!1;function $d(C){Ld(Kh,C),Zh||(Zh=!0,setTimeout(function(){Zh=!1,Yh(Kh,!(Kh={}))},0))}function Yh(C,I){I===void 0&&(I=!1);var K=new Set;if(C.all)for(var te=0,le=Object.values(Zs);te<le.length;te++)lg(je=le[te],C,K,I);else for(var be in C){var je,Le=/^idb\:\/\/(.*)\/(.*)\//.exec(be);Le&&(be=Le[1],Le=Le[2],(je=Zs["idb://".concat(be,"/").concat(Le)])&&lg(je,C,K,I))}K.forEach(function(We){return We()})}function lg(C,I,K,te){for(var le=[],be=0,je=Object.entries(C.queries.query);be<je.length;be++){for(var Le=je[be],We=Le[0],Ye=[],tt=0,qe=Le[1];tt<qe.length;tt++){var rt=qe[tt];Wh(I,rt.obsSet)?rt.subscribers.forEach(function(Xe){return K.add(Xe)}):te&&Ye.push(rt)}te&&le.push([We,Ye])}if(te)for(var Ge=0,et=le;Ge<et.length;Ge++){var it=et[Ge],We=it[0],Ye=it[1];C.queries.query[We]=Ye}}function Hw(C){var I=C._state,K=C._deps.indexedDB;if(I.isBeingOpened||C.idbdb)return I.dbReadyPromise.then(function(){return I.dbOpenError?Br(I.dbOpenError):C});I.isBeingOpened=!0,I.dbOpenError=null,I.openComplete=!1;var te=I.openCanceller,le=Math.round(10*C.verno),be=!1;function je(){if(I.openCanceller!==te)throw new Te.DatabaseClosed("db.open() was cancelled")}function Le(){return new j(function(rt,Ge){if(je(),!K)throw new Te.MissingAPI;var et=C.name,it=I.autoSchema||!le?K.open(et):K.open(et,le);if(!it)throw new Te.MissingAPI;it.onerror=Oi(Ge),it.onblocked=Ne(C._fireOnBlocked),it.onupgradeneeded=Ne(function(Xe){var dt;tt=it.transaction,I.autoSchema&&!C._options.allowEmptyDB?(it.onerror=Vs,tt.abort(),it.result.close(),(dt=K.deleteDatabase(et)).onsuccess=dt.onerror=Ne(function(){Ge(new Te.NoSuchDatabase("Database ".concat(et," doesnt exist")))})):(tt.onerror=Oi(Ge),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,qe=Xe<1,C.idbdb=it.result,be&&Id(C,tt),fc(C,Xe/10,tt,Ge))},Ge),it.onsuccess=Ne(function(){tt=null;var Xe,dt,yt,bt,xt,Ft=C.idbdb=it.result,Ut=S(Ft.objectStoreNames);if(0<Ut.length)try{var Dt=Ft.transaction((bt=Ut).length===1?bt[0]:bt,"readonly");if(I.autoSchema)dt=Ft,yt=Dt,(Xe=C).verno=dt.version/10,yt=Xe._dbSchema=Zl(0,dt,yt),Xe._storeNames=S(dt.objectStoreNames,0),Nd(Xe,[Xe._allTables],o(yt),yt);else if(Dd(C,C._dbSchema,Dt),((xt=Od(Zl(0,(xt=C).idbdb,Dt),xt._dbSchema)).add.length||xt.change.some(function(Bt){return Bt.add.length||Bt.change.length}))&&!be)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ft.close(),le=Ft.version+1,be=!0,rt(Le());rs(C,Dt)}catch{}xo.push(C),Ft.onversionchange=Ne(function(Bt){I.vcFired=!0,C.on("versionchange").fire(Bt)}),Ft.onclose=Ne(function(Bt){C.on("close").fire(Bt)}),qe&&(xt=C._deps,Dt=et,Ft=xt.indexedDB,xt=xt.IDBKeyRange,Pd(Ft)||Dt===Bs||qh(Ft,xt).put({name:Dt}).catch(Ee)),rt()},Ge)}).catch(function(rt){switch(rt==null?void 0:rt.name){case"UnknownError":if(0<I.PR1398_maxLoop)return I.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Le();break;case"VersionError":if(0<le)return le=0,Le()}return j.reject(rt)})}var We,Ye=I.dbReadyResolve,tt=null,qe=!1;return j.race([te,(typeof navigator>"u"?j.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(rt){function Ge(){return indexedDB.databases().finally(rt)}We=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then(Le)]).then(function(){return je(),I.onReadyBeingFired=[],j.resolve(Hh(function(){return C.on.ready.fire(C.vip)})).then(function rt(){if(0<I.onReadyBeingFired.length){var Ge=I.onReadyBeingFired.reduce(xe,Ee);return I.onReadyBeingFired=[],j.resolve(Hh(function(){return Ge(C.vip)})).then(rt)}})}).finally(function(){I.openCanceller===te&&(I.onReadyBeingFired=null,I.isBeingOpened=!1)}).catch(function(rt){I.dbOpenError=rt;try{tt&&tt.abort()}catch{}return te===I.openCanceller&&C._close(),Br(rt)}).finally(function(){I.openComplete=!0,Ye()}).then(function(){var rt;return qe&&(rt={},C.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(et){et.name&&(rt["idb://".concat(C.name,"/").concat(Ge.name,"/").concat(et.name)]=new ya(-1/0,[[[]]]))}),rt["idb://".concat(C.name,"/").concat(Ge.name,"/")]=rt["idb://".concat(C.name,"/").concat(Ge.name,"/:dels")]=new ya(-1/0,[[[]]])}),ga(Vl).fire(rt),Yh(rt,!0)),C})}function pc(C){function I(be){return C.next(be)}var K=le(I),te=le(function(be){return C.throw(be)});function le(be){return function(We){var Le=be(We),We=Le.value;return Le.done?We:We&&typeof We.then=="function"?We.then(K,te):s(We)?Promise.all(We).then(K,te):K(We)}}return le(I)()}function as(C,I,K){for(var te=s(C)?C.slice():[C],le=0;le<K;++le)te.push(I);return te}var Vw={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(C){return r(r({},C),{table:function(I){var K=C.table(I),te=K.schema,le={},be=[];function je(qe,rt,Ge){var et=ra(qe),it=le[et]=le[et]||[],Xe=qe==null?0:typeof qe=="string"?1:qe.length,dt=0<rt,dt=r(r({},Ge),{name:dt?"".concat(et,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:dt,keyTail:rt,keyLength:Xe,extractKey:Kl(qe),unique:!dt&&Ge.unique});return it.push(dt),dt.isPrimaryKey||be.push(dt),1<Xe&&je(Xe===2?qe[0]:qe.slice(0,Xe-1),rt+1,Ge),it.sort(function(yt,bt){return yt.keyTail-bt.keyTail}),dt}I=je(te.primaryKey.keyPath,0,te.primaryKey),le[":id"]=[I];for(var Le=0,We=te.indexes;Le<We.length;Le++){var Ye=We[Le];je(Ye.keyPath,0,Ye)}function tt(qe){var rt,Ge=qe.query.index;return Ge.isVirtual?r(r({},qe),{query:{index:Ge.lowLevelIndex,range:(rt=qe.query.range,Ge=Ge.keyTail,{type:rt.type===1?2:rt.type,lower:as(rt.lower,rt.lowerOpen?C.MAX_KEY:C.MIN_KEY,Ge),lowerOpen:!0,upper:as(rt.upper,rt.upperOpen?C.MIN_KEY:C.MAX_KEY,Ge),upperOpen:!0})}}):qe}return r(r({},K),{schema:r(r({},te),{primaryKey:I,indexes:be,getIndexByKeyPath:function(qe){return(qe=le[ra(qe)])&&qe[0]}}),count:function(qe){return K.count(tt(qe))},query:function(qe){return K.query(tt(qe))},openCursor:function(qe){var rt=qe.query.index,Ge=rt.keyTail,et=rt.isVirtual,it=rt.keyLength;return et?K.openCursor(tt(qe)).then(function(dt){return dt&&Xe(dt)}):K.openCursor(qe);function Xe(dt){return Object.create(dt,{continue:{value:function(yt){yt!=null?dt.continue(as(yt,qe.reverse?C.MAX_KEY:C.MIN_KEY,Ge)):qe.unique?dt.continue(dt.key.slice(0,it).concat(qe.reverse?C.MIN_KEY:C.MAX_KEY,Ge)):dt.continue()}},continuePrimaryKey:{value:function(yt,bt){dt.continuePrimaryKey(as(yt,C.MAX_KEY,Ge),bt)}},primaryKey:{get:function(){return dt.primaryKey}},key:{get:function(){var yt=dt.key;return it===1?yt[0]:yt.slice(0,it)}},value:{get:function(){return dt.value}}})}}})}})}};function Bd(C,I,K,te){return K=K||{},te=te||"",o(C).forEach(function(le){var be,je,Le;h(I,le)?(be=C[le],je=I[le],typeof be=="object"&&typeof je=="object"&&be&&je?(Le=fe(be))!==fe(je)?K[te+le]=I[le]:Le==="Object"?Bd(be,je,K,te+le+"."):be!==je&&(K[te+le]=I[le]):be!==je&&(K[te+le]=I[le])):K[te+le]=void 0}),o(I).forEach(function(le){h(C,le)||(K[te+le]=I[le])}),K}function zd(C,I){return I.type==="delete"?I.keys:I.keys||I.values.map(C.extractKey)}var ug={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(C){return r(r({},C),{table:function(I){var K=C.table(I),te=K.schema.primaryKey;return r(r({},K),{mutate:function(le){var be=ke.trans,je=be.table(I).hook,Le=je.deleting,We=je.creating,Ye=je.updating;switch(le.type){case"add":if(We.fire===Ee)break;return be._promise("readwrite",function(){return tt(le)},!0);case"put":if(We.fire===Ee&&Ye.fire===Ee)break;return be._promise("readwrite",function(){return tt(le)},!0);case"delete":if(Le.fire===Ee)break;return be._promise("readwrite",function(){return tt(le)},!0);case"deleteRange":if(Le.fire===Ee)break;return be._promise("readwrite",function(){return function qe(rt,Ge,et){return K.query({trans:rt,values:!1,query:{index:te,range:Ge},limit:et}).then(function(it){var Xe=it.result;return tt({type:"delete",keys:Xe,trans:rt}).then(function(dt){return 0<dt.numFailures?Promise.reject(dt.failures[0]):Xe.length<et?{failures:[],numFailures:0,lastResult:void 0}:qe(rt,r(r({},Ge),{lower:Xe[Xe.length-1],lowerOpen:!0}),et)})})}(le.trans,le.range,1e4)},!0)}return K.mutate(le);function tt(qe){var rt,Ge,et,it=ke.trans,Xe=qe.keys||zd(te,qe);if(!Xe)throw new Error("Keys missing");return(qe=qe.type==="add"||qe.type==="put"?r(r({},qe),{keys:Xe}):r({},qe)).type!=="delete"&&(qe.values=a([],qe.values)),qe.keys&&(qe.keys=a([],qe.keys)),rt=K,et=Xe,((Ge=qe).type==="add"?Promise.resolve([]):rt.getMany({trans:Ge.trans,keys:et,cache:"immutable"})).then(function(dt){var yt=Xe.map(function(bt,xt){var Ft,Ut,Dt,Bt=dt[xt],Vt={onerror:null,onsuccess:null};return qe.type==="delete"?Le.fire.call(Vt,bt,Bt,it):qe.type==="add"||Bt===void 0?(Ft=We.fire.call(Vt,bt,qe.values[xt],it),bt==null&&Ft!=null&&(qe.keys[xt]=bt=Ft,te.outbound||O(qe.values[xt],te.keyPath,bt))):(Ft=Bd(Bt,qe.values[xt]),(Ut=Ye.fire.call(Vt,Ft,bt,Bt,it))&&(Dt=qe.values[xt],Object.keys(Ut).forEach(function(Mt){h(Dt,Mt)?Dt[Mt]=Ut[Mt]:O(Dt,Mt,Ut[Mt])}))),Vt});return K.mutate(qe).then(function(bt){for(var xt=bt.failures,Ft=bt.results,Ut=bt.numFailures,bt=bt.lastResult,Dt=0;Dt<Xe.length;++Dt){var Bt=(Ft||Xe)[Dt],Vt=yt[Dt];Bt==null?Vt.onerror&&Vt.onerror(xt[Dt]):Vt.onsuccess&&Vt.onsuccess(qe.type==="put"&&dt[Dt]?qe.values[Dt]:Bt)}return{failures:xt,results:Ft,numFailures:Ut,lastResult:bt}}).catch(function(bt){return yt.forEach(function(xt){return xt.onerror&&xt.onerror(bt)}),Promise.reject(bt)})})}}})}})}};function Xh(C,I,K){try{if(!I||I.keys.length<C.length)return null;for(var te=[],le=0,be=0;le<I.keys.length&&be<C.length;++le)zn(I.keys[le],C[be])===0&&(te.push(K?Z(I.values[le]):I.values[le]),++be);return te.length===C.length?te:null}catch{return null}}var cg={stack:"dbcore",level:-1,create:function(C){return{table:function(I){var K=C.table(I);return r(r({},K),{getMany:function(te){if(!te.cache)return K.getMany(te);var le=Xh(te.keys,te.trans._cache,te.cache==="clone");return le?j.resolve(le):K.getMany(te).then(function(be){return te.trans._cache={keys:te.keys,values:te.cache==="clone"?Z(be):be},be})},mutate:function(te){return te.type!=="add"&&(te.trans._cache=null),K.mutate(te)}})}}}};function Ys(C,I){return C.trans.mode==="readonly"&&!!C.subscr&&!C.trans.explicit&&C.trans.db._options.cache!=="disabled"&&!I.schema.primaryKey.outbound}function dg(C,I){switch(C){case"query":return I.values&&!I.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gw={stack:"dbcore",level:0,name:"Observability",create:function(C){var I=C.schema.name,K=new ya(C.MIN_KEY,C.MAX_KEY);return r(r({},C),{transaction:function(te,le,be){if(ke.subscr&&le!=="readonly")throw new Te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return C.transaction(te,le,be)},table:function(te){var le=C.table(te),be=le.schema,je=be.primaryKey,qe=be.indexes,Le=je.extractKey,We=je.outbound,Ye=je.autoIncrement&&qe.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(je.keyPath)}),tt=r(r({},le),{mutate:function(Ge){function et(Mt){return Mt="idb://".concat(I,"/").concat(te,"/").concat(Mt),bt[Mt]||(bt[Mt]=new ya)}var it,Xe,dt,yt=Ge.trans,bt=Ge.mutatedParts||(Ge.mutatedParts={}),xt=et(""),Ft=et(":dels"),Ut=Ge.type,Vt=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[zd(je,Ge).filter(function(Mt){return Mt}),Ge.values]:[],Dt=Vt[0],Bt=Vt[1],Vt=Ge.trans._cache;return s(Dt)?(xt.addKeys(Dt),(Vt=Ut==="delete"||Dt.length===Bt.length?Xh(Dt,Vt):null)||Ft.addKeys(Dt),(Vt||Bt)&&(it=et,Xe=Vt,dt=Bt,be.indexes.forEach(function(Mt){var Xt=it(Mt.name||"");function un(kn){return kn!=null?Mt.extractKey(kn):null}function fn(kn){return Mt.multiEntry&&s(kn)?kn.forEach(function(Ia){return Xt.addKey(Ia)}):Xt.addKey(kn)}(Xe||dt).forEach(function(kn,Yr){var bn=Xe&&un(Xe[Yr]),Yr=dt&&un(dt[Yr]);zn(bn,Yr)!==0&&(bn!=null&&fn(bn),Yr!=null&&fn(Yr))})}))):Dt?(Bt={from:(Bt=Dt.lower)!==null&&Bt!==void 0?Bt:C.MIN_KEY,to:(Bt=Dt.upper)!==null&&Bt!==void 0?Bt:C.MAX_KEY},Ft.add(Bt),xt.add(Bt)):(xt.add(K),Ft.add(K),be.indexes.forEach(function(Mt){return et(Mt.name).add(K)})),le.mutate(Ge).then(function(Mt){return!Dt||Ge.type!=="add"&&Ge.type!=="put"||(xt.addKeys(Mt.results),Ye&&Ye.forEach(function(Xt){for(var un=Ge.values.map(function(bn){return Xt.extractKey(bn)}),fn=Xt.keyPath.findIndex(function(bn){return bn===je.keyPath}),kn=0,Ia=Mt.results.length;kn<Ia;++kn)un[kn][fn]=Mt.results[kn];et(Xt.name).addKeys(un)})),yt.mutatedParts=Ld(yt.mutatedParts||{},bt),Mt})}}),qe=function(et){var it=et.query,et=it.index,it=it.range;return[et,new ya((et=it.lower)!==null&&et!==void 0?et:C.MIN_KEY,(it=it.upper)!==null&&it!==void 0?it:C.MAX_KEY)]},rt={get:function(Ge){return[je,new ya(Ge.key)]},getMany:function(Ge){return[je,new ya().addKeys(Ge.keys)]},count:qe,query:qe,openCursor:qe};return o(rt).forEach(function(Ge){tt[Ge]=function(et){var it=ke.subscr,Xe=!!it,dt=Ys(ke,le)&&dg(Ge,et)?et.obsSet={}:it;if(Xe){var yt=function(Bt){return Bt="idb://".concat(I,"/").concat(te,"/").concat(Bt),dt[Bt]||(dt[Bt]=new ya)},bt=yt(""),xt=yt(":dels"),it=rt[Ge](et),Xe=it[0],it=it[1];if((Ge==="query"&&Xe.isPrimaryKey&&!et.values?xt:yt(Xe.name||"")).add(it),!Xe.isPrimaryKey){if(Ge!=="count"){var Ft=Ge==="query"&&We&&et.values&&le.query(r(r({},et),{values:!1}));return le[Ge].apply(this,arguments).then(function(Bt){if(Ge==="query"){if(We&&et.values)return Ft.then(function(un){return un=un.result,bt.addKeys(un),Bt});var Vt=et.values?Bt.result.map(Le):Bt.result;(et.values?bt:xt).addKeys(Vt)}else if(Ge==="openCursor"){var Mt=Bt,Xt=et.values;return Mt&&Object.create(Mt,{key:{get:function(){return xt.addKey(Mt.primaryKey),Mt.key}},primaryKey:{get:function(){var un=Mt.primaryKey;return xt.addKey(un),un}},value:{get:function(){return Xt&&bt.addKey(Mt.primaryKey),Mt.value}}})}return Bt})}xt.add(K)}}return le[Ge].apply(this,arguments)}}),tt}})}};function fg(C,I,K){if(K.numFailures===0)return I;if(I.type==="deleteRange")return null;var te=I.keys?I.keys.length:"values"in I&&I.values?I.values.length:1;return K.numFailures===te?null:(I=r({},I),s(I.keys)&&(I.keys=I.keys.filter(function(le,be){return!(be in K.failures)})),"values"in I&&s(I.values)&&(I.values=I.values.filter(function(le,be){return!(be in K.failures)})),I)}function Ud(C,I){return K=C,((te=I).lower===void 0||(te.lowerOpen?0<zn(K,te.lower):0<=zn(K,te.lower)))&&(C=C,(I=I).upper===void 0||(I.upperOpen?zn(C,I.upper)<0:zn(C,I.upper)<=0));var K,te}function Jh(C,I,rt,te,le,be){if(!rt||rt.length===0)return C;var je=I.query.index,Le=je.multiEntry,We=I.query.range,Ye=te.schema.primaryKey.extractKey,tt=je.extractKey,qe=(je.lowLevelIndex||je).extractKey,rt=rt.reduce(function(Ge,et){var it=Ge,Xe=[];if(et.type==="add"||et.type==="put")for(var dt=new ya,yt=et.values.length-1;0<=yt;--yt){var bt,xt=et.values[yt],Ft=Ye(xt);dt.hasKey(Ft)||(bt=tt(xt),(Le&&s(bt)?bt.some(function(Mt){return Ud(Mt,We)}):Ud(bt,We))&&(dt.addKey(Ft),Xe.push(xt)))}switch(et.type){case"add":var Ut=new ya().addKeys(I.values?Ge.map(function(Xt){return Ye(Xt)}):Ge),it=Ge.concat(I.values?Xe.filter(function(Xt){return Xt=Ye(Xt),!Ut.hasKey(Xt)&&(Ut.addKey(Xt),!0)}):Xe.map(function(Xt){return Ye(Xt)}).filter(function(Xt){return!Ut.hasKey(Xt)&&(Ut.addKey(Xt),!0)}));break;case"put":var Dt=new ya().addKeys(et.values.map(function(Xt){return Ye(Xt)}));it=Ge.filter(function(Xt){return!Dt.hasKey(I.values?Ye(Xt):Xt)}).concat(I.values?Xe:Xe.map(function(Xt){return Ye(Xt)}));break;case"delete":var Bt=new ya().addKeys(et.keys);it=Ge.filter(function(Xt){return!Bt.hasKey(I.values?Ye(Xt):Xt)});break;case"deleteRange":var Vt=et.range;it=Ge.filter(function(Xt){return!Ud(Ye(Xt),Vt)})}return it},C);return rt===C?C:(rt.sort(function(Ge,et){return zn(qe(Ge),qe(et))||zn(Ye(Ge),Ye(et))}),I.limit&&I.limit<1/0&&(rt.length>I.limit?rt.length=I.limit:C.length===I.limit&&rt.length<I.limit&&(le.dirty=!0)),be?Object.freeze(rt):rt)}function Yl(C,I){return zn(C.lower,I.lower)===0&&zn(C.upper,I.upper)===0&&!!C.lowerOpen==!!I.lowerOpen&&!!C.upperOpen==!!I.upperOpen}function mc(C,I){return function(K,te,le,be){if(K===void 0)return te!==void 0?-1:0;if(te===void 0)return 1;if((te=zn(K,te))===0){if(le&&be)return 0;if(le)return 1;if(be)return-1}return te}(C.lower,I.lower,C.lowerOpen,I.lowerOpen)<=0&&0<=function(K,te,le,be){if(K===void 0)return te!==void 0?1:0;if(te===void 0)return-1;if((te=zn(K,te))===0){if(le&&be)return 0;if(le)return-1;if(be)return 1}return te}(C.upper,I.upper,C.upperOpen,I.upperOpen)}function Ww(C,I,K,te){C.subscribers.add(K),te.addEventListener("abort",function(){var le,be;C.subscribers.delete(K),C.subscribers.size===0&&(le=C,be=I,setTimeout(function(){le.subscribers.size===0&&X(be,le)},3e3))})}var qd={stack:"dbcore",level:0,name:"Cache",create:function(C){var I=C.schema.name;return r(r({},C),{transaction:function(K,te,le){var be,je,Le=C.transaction(K,te,le);return te==="readwrite"&&(je=(be=new AbortController).signal,le=function(We){return function(){if(be.abort(),te==="readwrite"){for(var Ye=new Set,tt=0,qe=K;tt<qe.length;tt++){var rt=qe[tt],Ge=Zs["idb://".concat(I,"/").concat(rt)];if(Ge){var et=C.table(rt),it=Ge.optimisticOps.filter(function(Xt){return Xt.trans===Le});if(Le._explicit&&We&&Le.mutatedParts)for(var Xe=0,dt=Object.values(Ge.queries.query);Xe<dt.length;Xe++)for(var yt=0,bt=(Ut=dt[Xe]).slice();yt<bt.length;yt++)Wh((Dt=bt[yt]).obsSet,Le.mutatedParts)&&(X(Ut,Dt),Dt.subscribers.forEach(function(Xt){return Ye.add(Xt)}));else if(0<it.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(Xt){return Xt.trans!==Le});for(var xt=0,Ft=Object.values(Ge.queries.query);xt<Ft.length;xt++)for(var Ut,Dt,Bt,Vt=0,Mt=(Ut=Ft[xt]).slice();Vt<Mt.length;Vt++)(Dt=Mt[Vt]).res!=null&&Le.mutatedParts&&(We&&!Dt.dirty?(Bt=Object.isFrozen(Dt.res),Bt=Jh(Dt.res,Dt.req,it,et,Dt,Bt),Dt.dirty?(X(Ut,Dt),Dt.subscribers.forEach(function(Xt){return Ye.add(Xt)})):Bt!==Dt.res&&(Dt.res=Bt,Dt.promise=j.resolve({result:Bt}))):(Dt.dirty&&X(Ut,Dt),Dt.subscribers.forEach(function(Xt){return Ye.add(Xt)})))}}}Ye.forEach(function(Xt){return Xt()})}}},Le.addEventListener("abort",le(!1),{signal:je}),Le.addEventListener("error",le(!1),{signal:je}),Le.addEventListener("complete",le(!0),{signal:je})),Le},table:function(K){var te=C.table(K),le=te.schema.primaryKey;return r(r({},te),{mutate:function(be){var je=ke.trans;if(le.outbound||je.db._options.cache==="disabled"||je.explicit||je.idbtrans.mode!=="readwrite")return te.mutate(be);var Le=Zs["idb://".concat(I,"/").concat(K)];return Le?(je=te.mutate(be),be.type!=="add"&&be.type!=="put"||!(50<=be.values.length||zd(le,be).some(function(We){return We==null}))?(Le.optimisticOps.push(be),be.mutatedParts&&$d(be.mutatedParts),je.then(function(We){0<We.numFailures&&(X(Le.optimisticOps,be),(We=fg(0,be,We))&&Le.optimisticOps.push(We),be.mutatedParts&&$d(be.mutatedParts))}),je.catch(function(){X(Le.optimisticOps,be),be.mutatedParts&&$d(be.mutatedParts)})):je.then(function(We){var Ye=fg(0,r(r({},be),{values:be.values.map(function(tt,qe){var rt;return We.failures[qe]?tt:(tt=(rt=le.keyPath)!==null&&rt!==void 0&&rt.includes(".")?Z(tt):r({},tt),O(tt,le.keyPath,We.results[qe]),tt)})}),We);Le.optimisticOps.push(Ye),queueMicrotask(function(){return be.mutatedParts&&$d(be.mutatedParts)})}),je):te.mutate(be)},query:function(be){if(!Ys(ke,te)||!dg("query",be))return te.query(be);var je=((Ye=ke.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",qe=ke,Le=qe.requery,We=qe.signal,Ye=function(et,it,Xe,dt){var yt=Zs["idb://".concat(et,"/").concat(it)];if(!yt)return[];if(!(it=yt.queries[Xe]))return[null,!1,yt,null];var bt=it[(dt.query?dt.query.index.name:null)||""];if(!bt)return[null,!1,yt,null];switch(Xe){case"query":var xt=bt.find(function(Ft){return Ft.req.limit===dt.limit&&Ft.req.values===dt.values&&Yl(Ft.req.query.range,dt.query.range)});return xt?[xt,!0,yt,bt]:[bt.find(function(Ft){return("limit"in Ft.req?Ft.req.limit:1/0)>=dt.limit&&(!dt.values||Ft.req.values)&&mc(Ft.req.query.range,dt.query.range)}),!1,yt,bt];case"count":return xt=bt.find(function(Ft){return Yl(Ft.req.query.range,dt.query.range)}),[xt,!!xt,yt,bt]}}(I,K,"query",be),tt=Ye[0],qe=Ye[1],rt=Ye[2],Ge=Ye[3];return tt&&qe?tt.obsSet=be.obsSet:(qe=te.query(be).then(function(et){var it=et.result;if(tt&&(tt.res=it),je){for(var Xe=0,dt=it.length;Xe<dt;++Xe)Object.freeze(it[Xe]);Object.freeze(it)}else et.result=Z(it);return et}).catch(function(et){return Ge&&tt&&X(Ge,tt),Promise.reject(et)}),tt={obsSet:be.obsSet,promise:qe,subscribers:new Set,type:"query",req:be,dirty:!1},Ge?Ge.push(tt):(Ge=[tt],(rt=rt||(Zs["idb://".concat(I,"/").concat(K)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[be.query.index.name||""]=Ge)),Ww(tt,Ge,Le,We),tt.promise.then(function(et){return{result:Jh(et.result,be,rt==null?void 0:rt.optimisticOps,te,tt,je)}})}})}})}};function gc(C,I){return new Proxy(C,{get:function(K,te,le){return te==="db"?I:Reflect.get(K,te,le)}})}var Qi=(Nr.prototype.version=function(C){if(isNaN(C)||C<.1)throw new Te.Type("Given version is not a positive number");if(C=Math.round(10*C)/10,this.idbdb||this._state.isBeingOpened)throw new Te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,C);var I=this._versions,K=I.filter(function(te){return te._cfg.version===C})[0];return K||(K=new this.Version(C),I.push(K),I.sort(zh),K.stores({}),this._state.autoSchema=!1,K)},Nr.prototype._whenReady=function(C){var I=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?C():new j(function(K,te){if(I._state.openComplete)return te(new Te.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return void te(new Te.DatabaseClosed);I.open().catch(Ee)}I._state.dbReadyPromise.then(K,te)}).then(C)},Nr.prototype.use=function(C){var I=C.stack,K=C.create,te=C.level,le=C.name;return le&&this.unuse({stack:I,name:le}),C=this._middlewares[I]||(this._middlewares[I]=[]),C.push({stack:I,create:K,level:te??10,name:le}),C.sort(function(be,je){return be.level-je.level}),this},Nr.prototype.unuse=function(C){var I=C.stack,K=C.name,te=C.create;return I&&this._middlewares[I]&&(this._middlewares[I]=this._middlewares[I].filter(function(le){return te?le.create!==te:!!K&&le.name!==K})),this},Nr.prototype.open=function(){var C=this;return Xo(ye,function(){return Hw(C)})},Nr.prototype._close=function(){var C=this._state,I=xo.indexOf(this);if(0<=I&&xo.splice(I,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}C.isBeingOpened||(C.dbReadyPromise=new j(function(K){C.dbReadyResolve=K}),C.openCanceller=new j(function(K,te){C.cancelOpen=te}))},Nr.prototype.close=function(K){var I=(K===void 0?{disableAutoOpen:!0}:K).disableAutoOpen,K=this._state;I?(K.isBeingOpened&&K.cancelOpen(new Te.DatabaseClosed),this._close(),K.autoOpen=!1,K.dbOpenError=new Te.DatabaseClosed):(this._close(),K.autoOpen=this._options.autoOpen||K.isBeingOpened,K.openComplete=!1,K.dbOpenError=null)},Nr.prototype.delete=function(C){var I=this;C===void 0&&(C={disableAutoOpen:!0});var K=0<arguments.length&&typeof arguments[0]!="object",te=this._state;return new j(function(le,be){function je(){I.close(C);var Le=I._deps.indexedDB.deleteDatabase(I.name);Le.onsuccess=Ne(function(){var We,Ye,tt;We=I._deps,Ye=I.name,tt=We.indexedDB,We=We.IDBKeyRange,Pd(tt)||Ye===Bs||qh(tt,We).delete(Ye).catch(Ee),le()}),Le.onerror=Oi(be),Le.onblocked=I._fireOnBlocked}if(K)throw new Te.InvalidArgument("Invalid closeOptions argument to db.delete()");te.isBeingOpened?te.dbReadyPromise.then(je):je()})},Nr.prototype.backendDB=function(){return this.idbdb},Nr.prototype.isOpen=function(){return this.idbdb!==null},Nr.prototype.hasBeenClosed=function(){var C=this._state.dbOpenError;return C&&C.name==="DatabaseClosed"},Nr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Nr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Nr.prototype,"tables",{get:function(){var C=this;return o(this._allTables).map(function(I){return C._allTables[I]})},enumerable:!1,configurable:!0}),Nr.prototype.transaction=function(){var C=(function(I,K,te){var le=arguments.length;if(le<2)throw new Te.InvalidArgument("Too few arguments");for(var be=new Array(le-1);--le;)be[le-1]=arguments[le];return te=be.pop(),[I,H(be),te]}).apply(this,arguments);return this._transaction.apply(this,C)},Nr.prototype._transaction=function(C,I,K){var te=this,le=ke.trans;le&&le.db===this&&C.indexOf("!")===-1||(le=null);var be,je,Le=C.indexOf("?")!==-1;C=C.replace("!","").replace("?","");try{if(je=I.map(function(Ye){if(Ye=Ye instanceof te.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),C=="r"||C===Ii)be=Ii;else{if(C!="rw"&&C!=uc)throw new Te.InvalidArgument("Invalid transaction mode: "+C);be=uc}if(le){if(le.mode===Ii&&be===uc){if(!Le)throw new Te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");le=null}le&&je.forEach(function(Ye){if(le&&le.storeNames.indexOf(Ye)===-1){if(!Le)throw new Te.SubTransaction("Table "+Ye+" not included in parent transaction.");le=null}}),Le&&le&&!le.active&&(le=null)}}catch(Ye){return le?le._promise(null,function(tt,qe){qe(Ye)}):Br(Ye)}var We=(function Ye(tt,qe,rt,Ge,et){return j.resolve().then(function(){var it=ke.transless||ke,Xe=tt._createTransaction(qe,rt,tt._dbSchema,Ge);if(Xe.explicit=!0,it={trans:Xe,transless:it},Ge)Xe.idbtrans=Ge.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,tt._state.PR1398_maxLoop=3}catch(bt){return bt.name===Fe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,qe,rt,null,et)})):Br(bt)}var dt,yt=Q(et);return yt&&En(),it=j.follow(function(){var bt;(dt=et.call(Xe,Xe))&&(yt?(bt=Bn.bind(null,null),dt.then(bt,bt)):typeof dt.next=="function"&&typeof dt.throw=="function"&&(dt=pc(dt)))},it),(dt&&typeof dt.then=="function"?j.resolve(dt).then(function(bt){return Xe.active?bt:Br(new Te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):it.then(function(){return dt})).then(function(bt){return Ge&&Xe._resolve(),Xe._completion.then(function(){return bt})}).catch(function(bt){return Xe._reject(bt),Br(bt)})})}).bind(null,this,be,je,le,K);return le?le._promise(be,We,"lock"):ke.trans?Xo(ke.transless,function(){return te._whenReady(We)}):this._whenReady(We)},Nr.prototype.table=function(C){if(!h(this._allTables,C))throw new Te.InvalidTable("Table ".concat(C," does not exist"));return this._allTables[C]},Nr);function Nr(C,I){var K=this;this._middlewares={},this.verno=0;var te=Nr.dependencies;this._options=I=r({addons:Nr.addons,autoOpen:!0,indexedDB:te.indexedDB,IDBKeyRange:te.IDBKeyRange,cache:"cloned"},I),this._deps={indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange},te=I.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var le,be,je,Le,We,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ee,dbReadyPromise:null,cancelOpen:Ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:I.autoOpen};Ye.dbReadyPromise=new j(function(qe){Ye.dbReadyResolve=qe}),Ye.openCanceller=new j(function(qe,rt){Ye.cancelOpen=rt}),this._state=Ye,this.name=C,this.on=ns(this,"populate","blocked","versionchange","close",{ready:[xe,Ee]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(qe){return function(rt,Ge){Nr.vip(function(){var et,it=K._state;it.openComplete?(it.dbOpenError||j.resolve().then(rt),Ge&&qe(rt)):it.onReadyBeingFired?(it.onReadyBeingFired.push(rt),Ge&&qe(rt)):(qe(rt),et=K,Ge||qe(function Xe(){et.on.ready.unsubscribe(rt),et.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(le=this,$l(ql.prototype,function(dt,Xe){this.db=le;var Ge=zs,et=null;if(Xe)try{Ge=Xe()}catch(yt){et=yt}var it=dt._ctx,Xe=it.table,dt=Xe.hook.reading.fire;this._ctx={table:Xe,index:it.index,isPrimKey:!it.index||Xe.schema.primKey.keyPath&&it.index===Xe.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:et,or:it.or,valueMapper:dt!==Ae?dt:null}})),this.Table=(be=this,$l(Mh.prototype,function(qe,rt,Ge){this.db=be,this._tx=Ge,this.name=qe,this.schema=rt,this.hook=be._allTables[qe]?be._allTables[qe].hook:ns(null,{creating:[Re,Ee],reading:[B,Ae],updating:[ie,Ee],deleting:[se,Ee]})})),this.Transaction=(je=this,$l(Bh.prototype,function(qe,rt,Ge,et,it){var Xe=this;this.db=je,this.mode=qe,this.storeNames=rt,this.schema=Ge,this.chromeTransactionDurability=et,this.idbtrans=null,this.on=ns(this,"complete","error","abort"),this.parent=it||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new j(function(dt,yt){Xe._resolve=dt,Xe._reject=yt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(dt){var yt=Xe.active;return Xe.active=!1,Xe.on.error.fire(dt),Xe.parent?Xe.parent._reject(dt):yt&&Xe.idbtrans&&Xe.idbtrans.abort(),Br(dt)})})),this.Version=(Le=this,$l(qw.prototype,function(qe){this.db=Le,this._cfg={version:qe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,$l(Hs.prototype,function(qe,rt,Ge){if(this.db=We,this._ctx={table:qe,index:rt===":id"?null:rt,or:Ge},this._cmp=this._ascending=zn,this._descending=function(et,it){return zn(it,et)},this._max=function(et,it){return 0<zn(et,it)?et:it},this._min=function(et,it){return zn(et,it)<0?et:it},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new Te.MissingAPI})),this.on("versionchange",function(qe){0<qe.newVersion?console.warn("Another connection wants to upgrade database '".concat(K.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(K.name,"'. Closing db now to resume the delete request.")),K.close({disableAutoOpen:!1})}),this.on("blocked",function(qe){!qe.newVersion||qe.newVersion<qe.oldVersion?console.warn("Dexie.delete('".concat(K.name,"') was blocked")):console.warn("Upgrade '".concat(K.name,"' blocked by other connection holding version ").concat(qe.oldVersion/10))}),this._maxKey=Wl(I.IDBKeyRange),this._createTransaction=function(qe,rt,Ge,et){return new K.Transaction(qe,rt,Ge,K._options.chromeTransactionDurability,et)},this._fireOnBlocked=function(qe){K.on("blocked").fire(qe),xo.filter(function(rt){return rt.name===K.name&&rt!==K&&!rt._state.vcFired}).map(function(rt){return rt.on("versionchange").fire(qe)})},this.use(cg),this.use(qd),this.use(Gw),this.use(Vw),this.use(ug);var tt=new Proxy(this,{get:function(qe,rt,Ge){if(rt==="_vip")return!0;if(rt==="table")return function(it){return gc(K.table(it),tt)};var et=Reflect.get(qe,rt,Ge);return et instanceof Mh?gc(et,tt):rt==="tables"?et.map(function(it){return gc(it,tt)}):rt==="_createTransaction"?function(){return gc(et.apply(this,arguments),tt)}:et}});this.vip=tt,te.forEach(function(qe){return qe(K)})}var Xl,ri=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",hg=(Hd.prototype.subscribe=function(C,I,K){return this._subscribe(C&&typeof C!="function"?C:{next:C,error:I,complete:K})},Hd.prototype[ri]=function(){return this},Hd);function Hd(C){this._subscribe=C}try{Xl={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Xl={indexedDB:null,IDBKeyRange:null}}function pg(C){var I,K=!1,te=new hg(function(le){var be=Q(C),je,Le=!1,We={},Ye={},tt={get closed(){return Le},unsubscribe:function(){Le||(Le=!0,je&&je.abort(),qe&&ga.storagemutated.unsubscribe(Ge))}};le.start&&le.start(tt);var qe=!1,rt=function(){return Qo(et)},Ge=function(it){Ld(We,it),Wh(Ye,We)&&rt()},et=function(){var it,Xe,dt;!Le&&Xl.indexedDB&&(We={},it={},je&&je.abort(),je=new AbortController,dt=function(yt){var bt=U();try{be&&En();var xt=Zt(C,yt);return xt=be?xt.finally(Bn):xt}finally{bt&&$()}}(Xe={subscr:it,signal:je.signal,requery:rt,querier:C,trans:null}),Promise.resolve(dt).then(function(yt){K=!0,I=yt,Le||Xe.signal.aborted||(We={},function(bt){for(var xt in bt)if(h(bt,xt))return;return 1}(Ye=it)||qe||(ga(Vl,Ge),qe=!0),Qo(function(){return!Le&&le.next&&le.next(yt)}))},function(yt){K=!1,["DatabaseClosedError","AbortError"].includes(yt==null?void 0:yt.name)||Le||Qo(function(){Le||le.error&&le.error(yt)})}))};return setTimeout(rt,0),tt});return te.hasValue=function(){return K},te.getValue=function(){return I},te}var Xs=Qi;function Qh(C){var I=is;try{is=!0,ga.storagemutated.fire(C),Yh(C,!0)}finally{is=I}}m(Xs,r(r({},Ve),{delete:function(C){return new Xs(C,{addons:[]}).delete()},exists:function(C){return new Xs(C,{addons:[]}).open().then(function(I){return I.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(C){try{return I=Xs.dependencies,K=I.indexedDB,I=I.IDBKeyRange,(Pd(K)?Promise.resolve(K.databases()).then(function(te){return te.map(function(le){return le.name}).filter(function(le){return le!==Bs})}):qh(K,I).toCollection().primaryKeys()).then(C)}catch{return Br(new Te.MissingAPI)}var I,K},defineClass:function(){return function(C){u(this,C)}},ignoreTransaction:function(C){return ke.trans?Xo(ke.transless,C):C()},vip:Hh,async:function(C){return function(){try{var I=pc(C.apply(this,arguments));return I&&typeof I.then=="function"?I:j.resolve(I)}catch(K){return Br(K)}}},spawn:function(C,I,K){try{var te=pc(C.apply(K,I||[]));return te&&typeof te.then=="function"?te:j.resolve(te)}catch(le){return Br(le)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(C,I){return I=j.resolve(typeof C=="function"?Xs.ignoreTransaction(C):C).timeout(I||6e4),ke.trans?ke.trans.waitFor(I):I},Promise:j,debug:{get:function(){return Me},set:function(C){Se(C)}},derive:w,extend:u,props:m,override:E,Events:ns,on:ga,liveQuery:pg,extendObservabilitySet:Ld,getByKeyPath:D,setByKeyPath:O,delByKeyPath:function(C,I){typeof I=="string"?O(C,I,void 0):"length"in I&&[].map.call(I,function(K){O(C,K,void 0)})},shallowClone:N,deepClone:Z,getObjectDiff:Bd,cmp:zn,asap:k,minKey:-1/0,addons:[],connections:xo,errnames:Fe,dependencies:Xl,cache:Zs,semVer:"4.0.11",version:"4.0.11".split(".").map(function(C){return parseInt(C)}).reduce(function(C,I,K){return C+I/Math.pow(10,2*K)})})),Xs.maxKey=Wl(Xs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ga(Vl,function(C){is||(C=new CustomEvent(Gs,{detail:C}),is=!0,dispatchEvent(C),is=!1)}),addEventListener(Gs,function(C){C=C.detail,is||Qh(C)}));var Jl,is=!1,Ba=function(){};return typeof BroadcastChannel<"u"&&((Ba=function(){(Jl=new BroadcastChannel(Gs)).onmessage=function(C){return C.data&&Qh(C.data)}})(),typeof Jl.unref=="function"&&Jl.unref(),ga(Vl,function(C){is||Jl.postMessage(C)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(C){if(!Qi.disableBfCache&&C.persisted){Me&&console.debug("Dexie: handling persisted pagehide"),Jl!=null&&Jl.close();for(var I=0,K=xo;I<K.length;I++)K[I].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(C){!Qi.disableBfCache&&C.persisted&&(Me&&console.debug("Dexie: handling persisted pageshow"),Ba(),Qh({all:new ya(-1/0,[[]])}))})),j.rejectionMapper=function(C,I){return!C||C instanceof de||C instanceof TypeError||C instanceof SyntaxError||!C.name||!Ue[C.name]?C:(I=new Ue[C.name](I||C.message,C),"stack"in C&&v(I,"stack",{get:function(){return this.inner.stack}}),I)},Se(Me),r(Qi,Object.freeze({__proto__:null,Dexie:Qi,liveQuery:pg,Entity:kd,cmp:zn,PropModification:Ul,replacePrefix:function(C,I){return new Ul({replacePrefix:[C,I]})},add:function(C){return new Ul({add:C})},remove:function(C){return new Ul({remove:C})},default:Qi,RangeSet:ya,mergeRanges:Ks,rangesOverlap:og}),{default:Qi}),Qi})}(Gy)),Gy.exports}var Nz=Rz();const JS=Ja(Nz),q3=Symbol.for("Dexie"),sb=globalThis[q3]||(globalThis[q3]=JS);if(JS.semVer!==sb.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${JS.semVer} and ${sb.semVer}`);const{liveQuery:H0e,mergeRanges:V0e,rangesOverlap:G0e,RangeSet:W0e,cmp:K0e,Entity:Z0e,PropModification:Y0e,replacePrefix:X0e,add:J0e,remove:Q0e}=sb;class Iz extends sb{constructor(){super("LiteChatDatabase_Rewrite_v1");Ua(this,"conversations");Ua(this,"interactions");Ua(this,"mods");Ua(this,"appState");Ua(this,"providerConfigs");Ua(this,"apiKeys");Ua(this,"syncRepos");Ua(this,"projects");this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const sn=new Iz,Ic=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class qt{static async loadConversations(){try{return(await sn.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Ic(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await sn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await sn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await sn.interactions.where({conversationId:t}).sortBy("index")).map(r=>Ic(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await sn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await sn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await sn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await sn.mods.orderBy("loadOrder").toArray()).map(n=>Ic(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await sn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await sn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await sn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await sn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=sn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Ic(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await sn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await sn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=sn.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Ic(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await sn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await sn.transaction("rw",[sn.apiKeys,sn.providerConfigs],async()=>{const n=await sn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await sn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await sn.syncRepos.toArray()).map(n=>Ic(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await sn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await sn.transaction("rw",[sn.syncRepos,sn.conversations],async()=>{const n=await sn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await sn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await sn.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Ic(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await sn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await sn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await sn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>sn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await sn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await sn.transaction("rw",[sn.projects,sn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await sn.transaction("rw",[sn.conversations,sn.interactions,sn.mods,sn.appState,sn.providerConfigs,sn.apiKeys,sn.syncRepos,sn.projects],async()=>{await sn.interactions.clear(),await sn.conversations.clear(),await sn.projects.clear(),await sn.mods.clear(),await sn.appState.clear(),await sn.providerConfigs.clear(),await sn.apiKeys.clear(),await sn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const Qn=Ds(Ms((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n});try{const r=await qt.loadInteractionsForConversation(n);r.sort((a,i)=>a.index-i.index),e({interactions:r,status:"idle"})}catch(r){console.error("InteractionStore: Error loading interactions",r),e({error:"Failed load interactions",status:"error"})}},_addInteractionToState:n=>{const r=t().interactions;if(r.some(a=>a.id===n.id))console.warn(`InteractionStore: Interaction ${n.id} already exists in state.`);else{const a=[...r,n];a.sort((i,o)=>i.index-o.index),e({interactions:a})}},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];let s={...o.metadata||{}};r.metadata&&(s={...s,...r.metadata},r.metadata.toolCalls!==void 0&&(s.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&(s.toolResults=[...r.metadata.toolResults])),Object.assign(o,{...r,metadata:void 0}),o.metadata=s}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)?a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r:console.warn(`InteractionStore: Tried to append chunk to non-streaming interaction buffer ${n}.`)})},_removeInteractionFromState:n=>{const a=t().interactions.filter(i=>i.id!==n);e({interactions:a})},addInteractionAndPersist:async n=>{const a=t().interactions.filter(u=>u.conversationId===n.conversationId),i=a.reduce((u,c)=>Math.max(u,c.index),-1)+1,o=a.length>0?a[a.length-1].id:null,s={...n,index:i,parentId:o};t()._addInteractionToState(s);try{return await qt.saveInteraction(s),s}catch(u){throw console.error("InteractionStore: Error persisting added interaction",u),t()._removeInteractionFromState(s.id),e({error:"Failed to save interaction"}),u}},updateInteractionAndPersist:async n=>{try{await qt.saveInteraction({...n})}catch(r){throw console.error(`InteractionStore: Error persisting final update for ${n.id}`,r),e({error:"Failed to save final interaction state"}),r}},deleteInteraction:async n=>{const r=t().interactions.find(i=>i.id===n);if(!r)return;const a={...r};t()._removeInteractionFromState(n),t()._removeStreamingId(n);try{await qt.deleteInteraction(n)}catch(i){throw console.error("InteractionStore: Error deleting interaction",i),t()._addInteractionToState(a),a.status==="STREAMING"&&t()._addStreamingId(n),e({error:"Failed to delete interaction"}),i}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions."),e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null})},setError:n=>{e(r=>{r.error=n,n?r.status="error":r.status==="error"&&(r.status=r.streamingInteractionIds.length>0?"streaming":"idle")})},setStatus:n=>{t().status!==n&&e({status:n})},_addStreamingId:n=>{e(r=>{r.streamingInteractionIds.includes(n)||(r.streamingInteractionIds.push(n),r.activeStreamBuffers[n]="",r.streamingInteractionIds.length===1&&(r.status="streaming"),r.error=null)})},_removeStreamingId:n=>{e(r=>{const a=r.streamingInteractionIds.indexOf(n);a!==-1&&(r.streamingInteractionIds.splice(a,1),delete r.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),r.streamingInteractionIds.length===0&&r.status==="streaming"&&(r.status=r.error?"error":"idle"))})}}))),ui=Ds(Ms(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})}}))),lb=Ds(Ms(e=>({attachedFilesMetadata:[],enabledTools:new Set,addAttachedFile:t=>{e(n=>{if(n.attachedFilesMetadata.some(a=>a.source==="direct"&&t.source==="direct"?a.name===t.name:a.source==="vfs"&&t.source==="vfs"?a.path===t.path:!1))console.warn(`InputStore: File "${t.name}" (source: ${t.source}) already attached. Skipping.`);else{const a={id:crypto.randomUUID(),...t};n.attachedFilesMetadata.push(a)}})},removeAttachedFile:t=>{e(n=>{n.attachedFilesMetadata=n.attachedFilesMetadata.filter(r=>r.id!==t)})},clearAttachedFiles:()=>{e({attachedFilesMetadata:[],enabledTools:new Set})},setEnabledTools:t=>{e(n=>{n.enabledTools=t(n.enabledTools)})}}))),Oz="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let jo=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Oz[n[e]&63];return t};function jz(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ei=jz();var b6="vercel.ai.error",Dz=Symbol.for(b6),v6,Mz=class w6 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[v6]=!0,this.name=t,this.cause=r}static isInstance(t){return w6.hasMarker(t,b6)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};v6=Dz;var Sn=Mz,_6="AI_APICallError",x6=`vercel.ai.error.${_6}`,Pz=Symbol.for(x6),S6,ha=class extends Sn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:_6,message:t,cause:s}),this[S6]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Sn.hasMarker(t,x6)}};S6=Pz;var E6="AI_EmptyResponseBodyError",k6=`vercel.ai.error.${E6}`,Fz=Symbol.for(k6),C6,mE=class extends Sn{constructor({message:t="Empty response body"}={}){super({name:E6,message:t}),this[C6]=!0}static isInstance(t){return Sn.hasMarker(t,k6)}};C6=Fz;function i0(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var A6="AI_InvalidArgumentError",T6=`vercel.ai.error.${A6}`,Lz=Symbol.for(T6),R6,gE=class extends Sn{constructor({message:t,cause:n,argument:r}){super({name:A6,message:t,cause:n}),this[R6]=!0,this.argument=r}static isInstance(t){return Sn.hasMarker(t,T6)}};R6=Lz;var N6="AI_InvalidPromptError",I6=`vercel.ai.error.${N6}`,$z=Symbol.for(I6),O6,pl=class extends Sn{constructor({prompt:t,message:n,cause:r}){super({name:N6,message:`Invalid prompt: ${n}`,cause:r}),this[O6]=!0,this.prompt=t}static isInstance(t){return Sn.hasMarker(t,I6)}};O6=$z;var j6="AI_InvalidResponseDataError",D6=`vercel.ai.error.${j6}`,Bz=Symbol.for(D6),M6,If=class extends Sn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:j6,message:n}),this[M6]=!0,this.data=t}static isInstance(t){return Sn.hasMarker(t,D6)}};M6=Bz;var P6="AI_JSONParseError",F6=`vercel.ai.error.${P6}`,zz=Symbol.for(F6),L6,Ou=class extends Sn{constructor({text:t,cause:n}){super({name:P6,message:`JSON parsing failed: Text: ${t}.
Error message: ${i0(n)}`,cause:n}),this[L6]=!0,this.text=t}static isInstance(t){return Sn.hasMarker(t,F6)}};L6=zz;var $6="AI_LoadAPIKeyError",B6=`vercel.ai.error.${$6}`,Uz=Symbol.for(B6),z6,hy=class extends Sn{constructor({message:t}){super({name:$6,message:t}),this[z6]=!0}static isInstance(t){return Sn.hasMarker(t,B6)}};z6=Uz;var U6="AI_TooManyEmbeddingValuesForCallError",q6=`vercel.ai.error.${U6}`,qz=Symbol.for(q6),H6,yE=class extends Sn{constructor(t){super({name:U6,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[H6]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Sn.hasMarker(t,q6)}};H6=qz;var V6="AI_TypeValidationError",G6=`vercel.ai.error.${V6}`,Hz=Symbol.for(G6),W6,Vz=class QS extends Sn{constructor({value:t,cause:n}){super({name:V6,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${i0(n)}`,cause:n}),this[W6]=!0,this.value=t}static isInstance(t){return Sn.hasMarker(t,G6)}static wrap({value:t,cause:n}){return QS.isInstance(n)&&n.value===t?n:new QS({value:t,cause:n})}};W6=Hz;var ju=Vz,K6="AI_UnsupportedFunctionalityError",Z6=`vercel.ai.error.${K6}`,Gz=Symbol.for(Z6),Y6,br=class extends Sn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:K6,message:n}),this[Y6]=!0,this.functionality=t}static isInstance(t){return Sn.hasMarker(t,Z6)}};Y6=Gz;let Wz=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var bE={},xv={};xv.byteLength=Yz;xv.toByteArray=Jz;xv.fromByteArray=tU;var bs=[],uo=[],Kz=typeof Uint8Array<"u"?Uint8Array:Array,$_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var gf=0,Zz=$_.length;gf<Zz;++gf)bs[gf]=$_[gf],uo[$_.charCodeAt(gf)]=gf;uo[45]=62;uo[95]=63;function X6(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function Yz(e){var t=X6(e),n=t[0],r=t[1];return(n+r)*3/4-r}function Xz(e,t,n){return(t+n)*3/4-n}function Jz(e){var t,n=X6(e),r=n[0],a=n[1],i=new Kz(Xz(e,r,a)),o=0,s=a>0?r-4:r,u;for(u=0;u<s;u+=4)t=uo[e.charCodeAt(u)]<<18|uo[e.charCodeAt(u+1)]<<12|uo[e.charCodeAt(u+2)]<<6|uo[e.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=uo[e.charCodeAt(u)]<<2|uo[e.charCodeAt(u+1)]>>4,i[o++]=t&255),a===1&&(t=uo[e.charCodeAt(u)]<<10|uo[e.charCodeAt(u+1)]<<4|uo[e.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function Qz(e){return bs[e>>18&63]+bs[e>>12&63]+bs[e>>6&63]+bs[e&63]}function eU(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(Qz(r));return a.join("")}function tU(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(eU(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(bs[t>>2]+bs[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(bs[t>>10]+bs[t>>4&63]+bs[t<<2&63]+"=")),a.join("")}var vE={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */vE.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,u=(1<<s)-1,c=u>>1,f=-7,h=n?a-1:0,m=n?-1:1,g=e[t+h];for(h+=m,i=g&(1<<-f)-1,g>>=-f,f+=s;f>0;i=i*256+e[t+h],h+=m,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+e[t+h],h+=m,f-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(g?-1:1)*o*Math.pow(2,i-r)};vE.write=function(e,t,n,r,a,i){var o,s,u,c=i*8-a-1,f=(1<<c)-1,h=f>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=m/u:t+=m*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=v,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[n+g]=o&255,g+=v,o/=256,c-=8);e[n+g-v]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=xv,n=vE,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;f.TYPED_ARRAY_SUPPORT=u(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const pe=new i(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,i.prototype),Object.setPrototypeOf(pe,R),pe.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(pe){if(pe>a)throw new RangeError('The value "'+pe+'" is invalid for option "size"');const R=new i(pe);return Object.setPrototypeOf(R,f.prototype),R}function f(pe,R,q){if(typeof pe=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(pe)}return h(pe,R,q)}f.poolSize=8192;function h(pe,R,q){if(typeof pe=="string")return w(pe,R);if(o.isView(pe))return x(pe);if(pe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe);if(at(pe,o)||pe&&at(pe.buffer,o)||typeof s<"u"&&(at(pe,s)||pe&&at(pe.buffer,s)))return S(pe,R,q);if(typeof pe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ce=pe.valueOf&&pe.valueOf();if(ce!=null&&ce!==pe)return f.from(ce,R,q);const Oe=E(pe);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof pe[Symbol.toPrimitive]=="function")return f.from(pe[Symbol.toPrimitive]("string"),R,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe)}f.from=function(pe,R,q){return h(pe,R,q)},Object.setPrototypeOf(f.prototype,i.prototype),Object.setPrototypeOf(f,i);function m(pe){if(typeof pe!="number")throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function g(pe,R,q){return m(pe),pe<=0?c(pe):R!==void 0?typeof q=="string"?c(pe).fill(R,q):c(pe).fill(R):c(pe)}f.alloc=function(pe,R,q){return g(pe,R,q)};function v(pe){return m(pe),c(pe<0?0:A(pe)|0)}f.allocUnsafe=function(pe){return v(pe)},f.allocUnsafeSlow=function(pe){return v(pe)};function w(pe,R){if((typeof R!="string"||R==="")&&(R="utf8"),!f.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const q=D(pe,R)|0;let ce=c(q);const Oe=ce.write(pe,R);return Oe!==q&&(ce=ce.slice(0,Oe)),ce}function _(pe){const R=pe.length<0?0:A(pe.length)|0,q=c(R);for(let ce=0;ce<R;ce+=1)q[ce]=pe[ce]&255;return q}function x(pe){if(at(pe,i)){const R=new i(pe);return S(R.buffer,R.byteOffset,R.byteLength)}return _(pe)}function S(pe,R,q){if(R<0||pe.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<R+(q||0))throw new RangeError('"length" is outside of buffer bounds');let ce;return R===void 0&&q===void 0?ce=new i(pe):q===void 0?ce=new i(pe,R):ce=new i(pe,R,q),Object.setPrototypeOf(ce,f.prototype),ce}function E(pe){if(f.isBuffer(pe)){const R=A(pe.length)|0,q=c(R);return q.length===0||pe.copy(q,0,0,R),q}if(pe.length!==void 0)return typeof pe.length!="number"||_t(pe.length)?c(0):_(pe);if(pe.type==="Buffer"&&Array.isArray(pe.data))return _(pe.data)}function A(pe){if(pe>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return pe|0}function k(pe){return+pe!=pe&&(pe=0),f.alloc(+pe)}f.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==f.prototype},f.compare=function(R,q){if(at(R,i)&&(R=f.from(R,R.offset,R.byteLength)),at(q,i)&&(q=f.from(q,q.offset,q.byteLength)),!f.isBuffer(R)||!f.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===q)return 0;let ce=R.length,Oe=q.length;for(let ye=0,ke=Math.min(ce,Oe);ye<ke;++ye)if(R[ye]!==q[ye]){ce=R[ye],Oe=q[ye];break}return ce<Oe?-1:Oe<ce?1:0},f.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(R,q){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return f.alloc(0);let ce;if(q===void 0)for(q=0,ce=0;ce<R.length;++ce)q+=R[ce].length;const Oe=f.allocUnsafe(q);let ye=0;for(ce=0;ce<R.length;++ce){let ke=R[ce];if(at(ke,i))ye+ke.length>Oe.length?(f.isBuffer(ke)||(ke=f.from(ke)),ke.copy(Oe,ye)):i.prototype.set.call(Oe,ke,ye);else if(f.isBuffer(ke))ke.copy(Oe,ye);else throw new TypeError('"list" argument must be an Array of Buffers');ye+=ke.length}return Oe};function D(pe,R){if(f.isBuffer(pe))return pe.length;if(o.isView(pe)||at(pe,o))return pe.byteLength;if(typeof pe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pe);const q=pe.length,ce=arguments.length>2&&arguments[2]===!0;if(!ce&&q===0)return 0;let Oe=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return xe(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return Ze(pe).length;default:if(Oe)return ce?-1:xe(pe).length;R=(""+R).toLowerCase(),Oe=!0}}f.byteLength=D;function O(pe,R,q){let ce=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,R>>>=0,q<=R))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return ne(this,R,q);case"utf8":case"utf-8":return Y(this,R,q);case"ascii":return G(this,R,q);case"latin1":case"binary":return Q(this,R,q);case"base64":return ue(this,R,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,R,q);default:if(ce)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),ce=!0}}f.prototype._isBuffer=!0;function N(pe,R,q){const ce=pe[R];pe[R]=pe[q],pe[q]=ce}f.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let q=0;q<R;q+=2)N(this,q,q+1);return this},f.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let q=0;q<R;q+=4)N(this,q,q+3),N(this,q+1,q+2);return this},f.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let q=0;q<R;q+=8)N(this,q,q+7),N(this,q+1,q+6),N(this,q+2,q+5),N(this,q+3,q+4);return this},f.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?Y(this,0,R):O.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(R){if(!f.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:f.compare(this,R)===0},f.prototype.inspect=function(){let R="";const q=e.INSPECT_MAX_BYTES;return R=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(R+=" ... "),"<Buffer "+R+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(R,q,ce,Oe,ye){if(at(R,i)&&(R=f.from(R,R.offset,R.byteLength)),!f.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(q===void 0&&(q=0),ce===void 0&&(ce=R?R.length:0),Oe===void 0&&(Oe=0),ye===void 0&&(ye=this.length),q<0||ce>R.length||Oe<0||ye>this.length)throw new RangeError("out of range index");if(Oe>=ye&&q>=ce)return 0;if(Oe>=ye)return-1;if(q>=ce)return 1;if(q>>>=0,ce>>>=0,Oe>>>=0,ye>>>=0,this===R)return 0;let ke=ye-Oe,oe=ce-q;const ft=Math.min(ke,oe),vt=this.slice(Oe,ye),j=R.slice(q,ce);for(let $e=0;$e<ft;++$e)if(vt[$e]!==j[$e]){ke=vt[$e],oe=j[$e];break}return ke<oe?-1:oe<ke?1:0};function z(pe,R,q,ce,Oe){if(pe.length===0)return-1;if(typeof q=="string"?(ce=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,_t(q)&&(q=Oe?0:pe.length-1),q<0&&(q=pe.length+q),q>=pe.length){if(Oe)return-1;q=pe.length-1}else if(q<0)if(Oe)q=0;else return-1;if(typeof R=="string"&&(R=f.from(R,ce)),f.isBuffer(R))return R.length===0?-1:H(pe,R,q,ce,Oe);if(typeof R=="number")return R=R&255,typeof i.prototype.indexOf=="function"?Oe?i.prototype.indexOf.call(pe,R,q):i.prototype.lastIndexOf.call(pe,R,q):H(pe,[R],q,ce,Oe);throw new TypeError("val must be string, number or Buffer")}function H(pe,R,q,ce,Oe){let ye=1,ke=pe.length,oe=R.length;if(ce!==void 0&&(ce=String(ce).toLowerCase(),ce==="ucs2"||ce==="ucs-2"||ce==="utf16le"||ce==="utf-16le")){if(pe.length<2||R.length<2)return-1;ye=2,ke/=2,oe/=2,q/=2}function ft(j,$e){return ye===1?j[$e]:j.readUInt16BE($e*ye)}let vt;if(Oe){let j=-1;for(vt=q;vt<ke;vt++)if(ft(pe,vt)===ft(R,j===-1?0:vt-j)){if(j===-1&&(j=vt),vt-j+1===oe)return j*ye}else j!==-1&&(vt-=vt-j),j=-1}else for(q+oe>ke&&(q=ke-oe),vt=q;vt>=0;vt--){let j=!0;for(let $e=0;$e<oe;$e++)if(ft(pe,vt+$e)!==ft(R,$e)){j=!1;break}if(j)return vt}return-1}f.prototype.includes=function(R,q,ce){return this.indexOf(R,q,ce)!==-1},f.prototype.indexOf=function(R,q,ce){return z(this,R,q,ce,!0)},f.prototype.lastIndexOf=function(R,q,ce){return z(this,R,q,ce,!1)};function ee(pe,R,q,ce){q=Number(q)||0;const Oe=pe.length-q;ce?(ce=Number(ce),ce>Oe&&(ce=Oe)):ce=Oe;const ye=R.length;ce>ye/2&&(ce=ye/2);let ke;for(ke=0;ke<ce;++ke){const oe=parseInt(R.substr(ke*2,2),16);if(_t(oe))return ke;pe[q+ke]=oe}return ke}function P(pe,R,q,ce){return Et(xe(R,pe.length-q),pe,q,ce)}function Z(pe,R,q,ce){return Et(Me(R),pe,q,ce)}function V(pe,R,q,ce){return Et(Ze(R),pe,q,ce)}function fe(pe,R,q,ce){return Et(Se(R,pe.length-q),pe,q,ce)}f.prototype.write=function(R,q,ce,Oe){if(q===void 0)Oe="utf8",ce=this.length,q=0;else if(ce===void 0&&typeof q=="string")Oe=q,ce=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(ce)?(ce=ce>>>0,Oe===void 0&&(Oe="utf8")):(Oe=ce,ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ye=this.length-q;if((ce===void 0||ce>ye)&&(ce=ye),R.length>0&&(ce<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let ke=!1;for(;;)switch(Oe){case"hex":return ee(this,R,q,ce);case"utf8":case"utf-8":return P(this,R,q,ce);case"ascii":case"latin1":case"binary":return Z(this,R,q,ce);case"base64":return V(this,R,q,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,R,q,ce);default:if(ke)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),ke=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(pe,R,q){return R===0&&q===pe.length?t.fromByteArray(pe):t.fromByteArray(pe.slice(R,q))}function Y(pe,R,q){q=Math.min(pe.length,q);const ce=[];let Oe=R;for(;Oe<q;){const ye=pe[Oe];let ke=null,oe=ye>239?4:ye>223?3:ye>191?2:1;if(Oe+oe<=q){let ft,vt,j,$e;switch(oe){case 1:ye<128&&(ke=ye);break;case 2:ft=pe[Oe+1],(ft&192)===128&&($e=(ye&31)<<6|ft&63,$e>127&&(ke=$e));break;case 3:ft=pe[Oe+1],vt=pe[Oe+2],(ft&192)===128&&(vt&192)===128&&($e=(ye&15)<<12|(ft&63)<<6|vt&63,$e>2047&&($e<55296||$e>57343)&&(ke=$e));break;case 4:ft=pe[Oe+1],vt=pe[Oe+2],j=pe[Oe+3],(ft&192)===128&&(vt&192)===128&&(j&192)===128&&($e=(ye&15)<<18|(ft&63)<<12|(vt&63)<<6|j&63,$e>65535&&$e<1114112&&(ke=$e))}}ke===null?(ke=65533,oe=1):ke>65535&&(ke-=65536,ce.push(ke>>>10&1023|55296),ke=56320|ke&1023),ce.push(ke),Oe+=oe}return ae(ce)}const X=4096;function ae(pe){const R=pe.length;if(R<=X)return String.fromCharCode.apply(String,pe);let q="",ce=0;for(;ce<R;)q+=String.fromCharCode.apply(String,pe.slice(ce,ce+=X));return q}function G(pe,R,q){let ce="";q=Math.min(pe.length,q);for(let Oe=R;Oe<q;++Oe)ce+=String.fromCharCode(pe[Oe]&127);return ce}function Q(pe,R,q){let ce="";q=Math.min(pe.length,q);for(let Oe=R;Oe<q;++Oe)ce+=String.fromCharCode(pe[Oe]);return ce}function ne(pe,R,q){const ce=pe.length;(!R||R<0)&&(R=0),(!q||q<0||q>ce)&&(q=ce);let Oe="";for(let ye=R;ye<q;++ye)Oe+=Nt[pe[ye]];return Oe}function de(pe,R,q){const ce=pe.slice(R,q);let Oe="";for(let ye=0;ye<ce.length-1;ye+=2)Oe+=String.fromCharCode(ce[ye]+ce[ye+1]*256);return Oe}f.prototype.slice=function(R,q){const ce=this.length;R=~~R,q=q===void 0?ce:~~q,R<0?(R+=ce,R<0&&(R=0)):R>ce&&(R=ce),q<0?(q+=ce,q<0&&(q=0)):q>ce&&(q=ce),q<R&&(q=R);const Oe=this.subarray(R,q);return Object.setPrototypeOf(Oe,f.prototype),Oe};function _e(pe,R,q){if(pe%1!==0||pe<0)throw new RangeError("offset is not uint");if(pe+R>q)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(R,q,ce){R=R>>>0,q=q>>>0,ce||_e(R,q,this.length);let Oe=this[R],ye=1,ke=0;for(;++ke<q&&(ye*=256);)Oe+=this[R+ke]*ye;return Oe},f.prototype.readUintBE=f.prototype.readUIntBE=function(R,q,ce){R=R>>>0,q=q>>>0,ce||_e(R,q,this.length);let Oe=this[R+--q],ye=1;for(;q>0&&(ye*=256);)Oe+=this[R+--q]*ye;return Oe},f.prototype.readUint8=f.prototype.readUInt8=function(R,q){return R=R>>>0,q||_e(R,1,this.length),this[R]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(R,q){return R=R>>>0,q||_e(R,2,this.length),this[R]|this[R+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(R,q){return R=R>>>0,q||_e(R,2,this.length),this[R]<<8|this[R+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(R,q){return R=R>>>0,q||_e(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(R,q){return R=R>>>0,q||_e(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},f.prototype.readBigUInt64LE=Rt(function(R){R=R>>>0,Re(R,"offset");const q=this[R],ce=this[R+7];(q===void 0||ce===void 0)&&se(R,this.length-8);const Oe=q+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,ye=this[++R]+this[++R]*2**8+this[++R]*2**16+ce*2**24;return BigInt(Oe)+(BigInt(ye)<<BigInt(32))}),f.prototype.readBigUInt64BE=Rt(function(R){R=R>>>0,Re(R,"offset");const q=this[R],ce=this[R+7];(q===void 0||ce===void 0)&&se(R,this.length-8);const Oe=q*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],ye=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+ce;return(BigInt(Oe)<<BigInt(32))+BigInt(ye)}),f.prototype.readIntLE=function(R,q,ce){R=R>>>0,q=q>>>0,ce||_e(R,q,this.length);let Oe=this[R],ye=1,ke=0;for(;++ke<q&&(ye*=256);)Oe+=this[R+ke]*ye;return ye*=128,Oe>=ye&&(Oe-=Math.pow(2,8*q)),Oe},f.prototype.readIntBE=function(R,q,ce){R=R>>>0,q=q>>>0,ce||_e(R,q,this.length);let Oe=q,ye=1,ke=this[R+--Oe];for(;Oe>0&&(ye*=256);)ke+=this[R+--Oe]*ye;return ye*=128,ke>=ye&&(ke-=Math.pow(2,8*q)),ke},f.prototype.readInt8=function(R,q){return R=R>>>0,q||_e(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},f.prototype.readInt16LE=function(R,q){R=R>>>0,q||_e(R,2,this.length);const ce=this[R]|this[R+1]<<8;return ce&32768?ce|4294901760:ce},f.prototype.readInt16BE=function(R,q){R=R>>>0,q||_e(R,2,this.length);const ce=this[R+1]|this[R]<<8;return ce&32768?ce|4294901760:ce},f.prototype.readInt32LE=function(R,q){return R=R>>>0,q||_e(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},f.prototype.readInt32BE=function(R,q){return R=R>>>0,q||_e(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},f.prototype.readBigInt64LE=Rt(function(R){R=R>>>0,Re(R,"offset");const q=this[R],ce=this[R+7];(q===void 0||ce===void 0)&&se(R,this.length-8);const Oe=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(ce<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(q+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),f.prototype.readBigInt64BE=Rt(function(R){R=R>>>0,Re(R,"offset");const q=this[R],ce=this[R+7];(q===void 0||ce===void 0)&&se(R,this.length-8);const Oe=(q<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+ce)}),f.prototype.readFloatLE=function(R,q){return R=R>>>0,q||_e(R,4,this.length),n.read(this,R,!0,23,4)},f.prototype.readFloatBE=function(R,q){return R=R>>>0,q||_e(R,4,this.length),n.read(this,R,!1,23,4)},f.prototype.readDoubleLE=function(R,q){return R=R>>>0,q||_e(R,8,this.length),n.read(this,R,!0,52,8)},f.prototype.readDoubleBE=function(R,q){return R=R>>>0,q||_e(R,8,this.length),n.read(this,R,!1,52,8)};function ve(pe,R,q,ce,Oe,ye){if(!f.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Oe||R<ye)throw new RangeError('"value" argument is out of bounds');if(q+ce>pe.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(R,q,ce,Oe){if(R=+R,q=q>>>0,ce=ce>>>0,!Oe){const oe=Math.pow(2,8*ce)-1;ve(this,R,q,ce,oe,0)}let ye=1,ke=0;for(this[q]=R&255;++ke<ce&&(ye*=256);)this[q+ke]=R/ye&255;return q+ce},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(R,q,ce,Oe){if(R=+R,q=q>>>0,ce=ce>>>0,!Oe){const oe=Math.pow(2,8*ce)-1;ve(this,R,q,ce,oe,0)}let ye=ce-1,ke=1;for(this[q+ye]=R&255;--ye>=0&&(ke*=256);)this[q+ye]=R/ke&255;return q+ce},f.prototype.writeUint8=f.prototype.writeUInt8=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,1,255,0),this[q]=R&255,q+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,2,65535,0),this[q]=R&255,this[q+1]=R>>>8,q+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,2,65535,0),this[q]=R>>>8,this[q+1]=R&255,q+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,4,4294967295,0),this[q+3]=R>>>24,this[q+2]=R>>>16,this[q+1]=R>>>8,this[q]=R&255,q+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,4,4294967295,0),this[q]=R>>>24,this[q+1]=R>>>16,this[q+2]=R>>>8,this[q+3]=R&255,q+4};function Pe(pe,R,q,ce,Oe){Ce(R,ce,Oe,pe,q,7);let ye=Number(R&BigInt(4294967295));pe[q++]=ye,ye=ye>>8,pe[q++]=ye,ye=ye>>8,pe[q++]=ye,ye=ye>>8,pe[q++]=ye;let ke=Number(R>>BigInt(32)&BigInt(4294967295));return pe[q++]=ke,ke=ke>>8,pe[q++]=ke,ke=ke>>8,pe[q++]=ke,ke=ke>>8,pe[q++]=ke,q}function Fe(pe,R,q,ce,Oe){Ce(R,ce,Oe,pe,q,7);let ye=Number(R&BigInt(4294967295));pe[q+7]=ye,ye=ye>>8,pe[q+6]=ye,ye=ye>>8,pe[q+5]=ye,ye=ye>>8,pe[q+4]=ye;let ke=Number(R>>BigInt(32)&BigInt(4294967295));return pe[q+3]=ke,ke=ke>>8,pe[q+2]=ke,ke=ke>>8,pe[q+1]=ke,ke=ke>>8,pe[q]=ke,q+8}f.prototype.writeBigUInt64LE=Rt(function(R,q=0){return Pe(this,R,q,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Rt(function(R,q=0){return Fe(this,R,q,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(R,q,ce,Oe){if(R=+R,q=q>>>0,!Oe){const ft=Math.pow(2,8*ce-1);ve(this,R,q,ce,ft-1,-ft)}let ye=0,ke=1,oe=0;for(this[q]=R&255;++ye<ce&&(ke*=256);)R<0&&oe===0&&this[q+ye-1]!==0&&(oe=1),this[q+ye]=(R/ke>>0)-oe&255;return q+ce},f.prototype.writeIntBE=function(R,q,ce,Oe){if(R=+R,q=q>>>0,!Oe){const ft=Math.pow(2,8*ce-1);ve(this,R,q,ce,ft-1,-ft)}let ye=ce-1,ke=1,oe=0;for(this[q+ye]=R&255;--ye>=0&&(ke*=256);)R<0&&oe===0&&this[q+ye+1]!==0&&(oe=1),this[q+ye]=(R/ke>>0)-oe&255;return q+ce},f.prototype.writeInt8=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,1,127,-128),R<0&&(R=255+R+1),this[q]=R&255,q+1},f.prototype.writeInt16LE=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,2,32767,-32768),this[q]=R&255,this[q+1]=R>>>8,q+2},f.prototype.writeInt16BE=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,2,32767,-32768),this[q]=R>>>8,this[q+1]=R&255,q+2},f.prototype.writeInt32LE=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,4,2147483647,-2147483648),this[q]=R&255,this[q+1]=R>>>8,this[q+2]=R>>>16,this[q+3]=R>>>24,q+4},f.prototype.writeInt32BE=function(R,q,ce){return R=+R,q=q>>>0,ce||ve(this,R,q,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[q]=R>>>24,this[q+1]=R>>>16,this[q+2]=R>>>8,this[q+3]=R&255,q+4},f.prototype.writeBigInt64LE=Rt(function(R,q=0){return Pe(this,R,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Rt(function(R,q=0){return Fe(this,R,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(pe,R,q,ce,Oe,ye){if(q+ce>pe.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Te(pe,R,q,ce,Oe){return R=+R,q=q>>>0,Oe||Ie(pe,R,q,4),n.write(pe,R,q,ce,23,4),q+4}f.prototype.writeFloatLE=function(R,q,ce){return Te(this,R,q,!0,ce)},f.prototype.writeFloatBE=function(R,q,ce){return Te(this,R,q,!1,ce)};function Ue(pe,R,q,ce,Oe){return R=+R,q=q>>>0,Oe||Ie(pe,R,q,8),n.write(pe,R,q,ce,52,8),q+8}f.prototype.writeDoubleLE=function(R,q,ce){return Ue(this,R,q,!0,ce)},f.prototype.writeDoubleBE=function(R,q,ce){return Ue(this,R,q,!1,ce)},f.prototype.copy=function(R,q,ce,Oe){if(!f.isBuffer(R))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),!Oe&&Oe!==0&&(Oe=this.length),q>=R.length&&(q=R.length),q||(q=0),Oe>0&&Oe<ce&&(Oe=ce),Oe===ce||R.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),R.length-q<Oe-ce&&(Oe=R.length-q+ce);const ye=Oe-ce;return this===R&&typeof i.prototype.copyWithin=="function"?this.copyWithin(q,ce,Oe):i.prototype.set.call(R,this.subarray(ce,Oe),q),ye},f.prototype.fill=function(R,q,ce,Oe){if(typeof R=="string"){if(typeof q=="string"?(Oe=q,q=0,ce=this.length):typeof ce=="string"&&(Oe=ce,ce=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!f.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(R.length===1){const ke=R.charCodeAt(0);(Oe==="utf8"&&ke<128||Oe==="latin1")&&(R=ke)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(q<0||this.length<q||this.length<ce)throw new RangeError("Out of range index");if(ce<=q)return this;q=q>>>0,ce=ce===void 0?this.length:ce>>>0,R||(R=0);let ye;if(typeof R=="number")for(ye=q;ye<ce;++ye)this[ye]=R;else{const ke=f.isBuffer(R)?R:f.from(R,Oe),oe=ke.length;if(oe===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(ye=0;ye<ce-q;++ye)this[ye+q]=ke[ye%oe]}return this};const Ve={};function Ee(pe,R,q){Ve[pe]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${pe}]`,this.stack,delete this.name}get code(){return pe}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${pe}]: ${this.message}`}}}Ee("ERR_BUFFER_OUT_OF_BOUNDS",function(pe){return pe?`${pe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ee("ERR_INVALID_ARG_TYPE",function(pe,R){return`The "${pe}" argument must be of type number. Received type ${typeof R}`},TypeError),Ee("ERR_OUT_OF_RANGE",function(pe,R,q){let ce=`The value of "${pe}" is out of range.`,Oe=q;return Number.isInteger(q)&&Math.abs(q)>2**32?Oe=Ae(String(q)):typeof q=="bigint"&&(Oe=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(Oe=Ae(Oe)),Oe+="n"),ce+=` It must be ${R}. Received ${Oe}`,ce},RangeError);function Ae(pe){let R="",q=pe.length;const ce=pe[0]==="-"?1:0;for(;q>=ce+4;q-=3)R=`_${pe.slice(q-3,q)}${R}`;return`${pe.slice(0,q)}${R}`}function B(pe,R,q){Re(R,"offset"),(pe[R]===void 0||pe[R+q]===void 0)&&se(R,pe.length-(q+1))}function Ce(pe,R,q,ce,Oe,ye){if(pe>q||pe<R){const ke=typeof R=="bigint"?"n":"";let oe;throw R===0||R===BigInt(0)?oe=`>= 0${ke} and < 2${ke} ** ${(ye+1)*8}${ke}`:oe=`>= -(2${ke} ** ${(ye+1)*8-1}${ke}) and < 2 ** ${(ye+1)*8-1}${ke}`,new Ve.ERR_OUT_OF_RANGE("value",oe,pe)}B(ce,Oe,ye)}function Re(pe,R){if(typeof pe!="number")throw new Ve.ERR_INVALID_ARG_TYPE(R,"number",pe)}function se(pe,R,q){throw Math.floor(pe)!==pe?(Re(pe,q),new Ve.ERR_OUT_OF_RANGE("offset","an integer",pe)):R<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${R}`,pe)}const ie=/[^+/0-9A-Za-z-_]/g;function J(pe){if(pe=pe.split("=")[0],pe=pe.trim().replace(ie,""),pe.length<2)return"";for(;pe.length%4!==0;)pe=pe+"=";return pe}function xe(pe,R){R=R||1/0;let q;const ce=pe.length;let Oe=null;const ye=[];for(let ke=0;ke<ce;++ke){if(q=pe.charCodeAt(ke),q>55295&&q<57344){if(!Oe){if(q>56319){(R-=3)>-1&&ye.push(239,191,189);continue}else if(ke+1===ce){(R-=3)>-1&&ye.push(239,191,189);continue}Oe=q;continue}if(q<56320){(R-=3)>-1&&ye.push(239,191,189),Oe=q;continue}q=(Oe-55296<<10|q-56320)+65536}else Oe&&(R-=3)>-1&&ye.push(239,191,189);if(Oe=null,q<128){if((R-=1)<0)break;ye.push(q)}else if(q<2048){if((R-=2)<0)break;ye.push(q>>6|192,q&63|128)}else if(q<65536){if((R-=3)<0)break;ye.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((R-=4)<0)break;ye.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return ye}function Me(pe){const R=[];for(let q=0;q<pe.length;++q)R.push(pe.charCodeAt(q)&255);return R}function Se(pe,R){let q,ce,Oe;const ye=[];for(let ke=0;ke<pe.length&&!((R-=2)<0);++ke)q=pe.charCodeAt(ke),ce=q>>8,Oe=q%256,ye.push(Oe),ye.push(ce);return ye}function Ze(pe){return t.toByteArray(J(pe))}function Et(pe,R,q,ce){let Oe;for(Oe=0;Oe<ce&&!(Oe+q>=R.length||Oe>=pe.length);++Oe)R[Oe+q]=pe[Oe];return Oe}function at(pe,R){return pe instanceof R||pe!=null&&pe.constructor!=null&&pe.constructor.name!=null&&pe.constructor.name===R.name}function _t(pe){return pe!==pe}const Nt=function(){const pe="0123456789abcdef",R=new Array(256);for(let q=0;q<16;++q){const ce=q*16;for(let Oe=0;Oe<16;++Oe)R[ce+Oe]=pe[q]+pe[Oe]}return R}();function Rt(pe){return typeof BigInt>"u"?Kt:pe}function Kt(){throw new Error("BigInt not supported")}})(bE);const Wt=bE.Buffer,Ar=bE.Buffer;var Oc={exports:{}},H3;function nU(){if(H3)return Oc.exports;H3=1;const e=typeof Wt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,u,c){c==null&&u!==null&&typeof u=="object"&&(c=u,u=void 0),e&&Wt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const f=JSON.parse(s,u);if(f===null||typeof f!="object")return f;const h=c&&c.protoAction||"error",m=c&&c.constructorAction||"error";if(h==="ignore"&&m==="ignore")return f;if(h!=="ignore"&&m!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return f}else if(h!=="ignore"&&m==="ignore"){if(t.test(s)===!1)return f}else if(n.test(s)===!1)return f;return a(f,{protoAction:h,constructorAction:m,safe:c&&c.safe})}function a(s,{protoAction:u="error",constructorAction:c="error",safe:f}={}){let h=[s];for(;h.length;){const m=h;h=[];for(const g of m){if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(f===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const w=g[v];w&&typeof w=="object"&&h.push(w)}}}return s}function i(s,u,c){const f=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,c)}finally{Error.stackTraceLimit=f}}function o(s,u){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Oc.exports=i,Oc.exports.default=i,Oc.exports.parse=i,Oc.exports.safeParse=o,Oc.exports.scan=a,Oc.exports}var rU=nU();const Go=Ja(rU);var aU={};function Ts(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function iU(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function oU(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function sU(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=lU(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function lU(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function o0(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var od=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Wz(n,t);if(e==null)return a;if(n.includes(r))throw new gE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},vs=od();function uU(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function cU(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Wy(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function dU({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new hy({message:`${r} API key must be a string.`});if(typeof Wr>"u")throw new hy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=aU[t],e==null)throw new hy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new hy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var ub=Symbol.for("vercel.ai.validator");function fU(e){return{[ub]:!0,validate:e}}function hU(e){return typeof e=="object"&&e!==null&&ub in e&&e[ub]===!0&&"validate"in e}function pU(e){return hU(e)?e:mU(e)}function mU(e){return fU(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function gU({value:e,schema:t}){const n=fh({value:e,schema:t});if(!n.success)throw ju.wrap({value:e,cause:n.error});return n.value}function fh({value:e,schema:t}){const n=pU(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ju.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ju.wrap({value:e,cause:r})}}}function yU({text:e,schema:t}){try{const n=Go.parse(e);return t==null?n:gU({value:n,schema:t})}catch(n){throw Ou.isInstance(n)||ju.isInstance(n)?n:new Ou({text:e,cause:n})}}function Zc({text:e,schema:t}){try{const n=Go.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=fh({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Ou.isInstance(n)?n:new Ou({text:e,cause:n})}}}function V3(e){try{return Go.parse(e),!0}catch{return!1}}function bU({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=fh({value:t[e],schema:n});if(!r.success)throw new gE({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var vU=()=>globalThis.fetch,Bo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>wU({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),wU=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=vU()})=>{try{const s=await o(e,{method:"POST",headers:cU(t),body:n.content,signal:i}),u=o0(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw Wy(f)||ha.isInstance(f)?f:new ha({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Wy(c)||ha.isInstance(c))?c:new ha({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(Wy(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new ha({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},J6=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=o0(r);if(o.trim()==="")return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=yU({text:o,schema:e});return{responseHeaders:s,value:new ha({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},wE=e=>async({response:t})=>{const n=o0(t);if(t.body==null)throw new mE({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(sU()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Zc({text:r,schema:e}))}}))}},sd=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Zc({text:a,schema:e}),o=o0(t);if(!i.success)throw new ha({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:_U,atob:xU}=globalThis;function Q6(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=xU(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Bf(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return _U(t)}function eO(e){return e==null?void 0:e.replace(/\/$/,"")}var Kn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Kn||(Kn={}));var e2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(e2||(e2={}));const Jt=Kn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gl=e=>{switch(typeof e){case"undefined":return Jt.undefined;case"string":return Jt.string;case"number":return isNaN(e)?Jt.nan:Jt.number;case"boolean":return Jt.boolean;case"function":return Jt.function;case"bigint":return Jt.bigint;case"symbol":return Jt.symbol;case"object":return Array.isArray(e)?Jt.array:e===null?Jt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Jt.promise:typeof Map<"u"&&e instanceof Map?Jt.map:typeof Set<"u"&&e instanceof Set?Jt.set:typeof Date<"u"&&e instanceof Date?Jt.date:Jt.object;default:return Jt.unknown}},jt=Kn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),SU=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Hi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(n(o))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}};return a(this),r}static assert(t){if(!(t instanceof Hi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Hi.create=e=>new Hi(e);const zf=(e,t)=>{let n;switch(e.code){case jt.invalid_type:e.received===Jt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case jt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Kn.jsonStringifyReplacer)}`;break;case jt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Kn.joinValues(e.keys,", ")}`;break;case jt.invalid_union:n="Invalid input";break;case jt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Kn.joinValues(e.options)}`;break;case jt.invalid_enum_value:n=`Invalid enum value. Expected ${Kn.joinValues(e.options)}, received '${e.received}'`;break;case jt.invalid_arguments:n="Invalid function arguments";break;case jt.invalid_return_type:n="Invalid function return type";break;case jt.invalid_date:n="Invalid date";break;case jt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Kn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case jt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case jt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case jt.custom:n="Invalid input";break;case jt.invalid_intersection_types:n="Intersection results could not be merged";break;case jt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case jt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Kn.assertNever(e)}return{message:n}};let tO=zf;function EU(e){tO=e}function cb(){return tO}const db=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)s=c(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},kU=[];function Yt(e,t){const n=cb(),r=db({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===zf?void 0:zf].filter(a=>!!a)});e.common.issues.push(r)}class Ka{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return wn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Ka.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return wn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const wn=Object.freeze({status:"aborted"}),kf=e=>({status:"dirty",value:e}),di=e=>({status:"valid",value:e}),t2=e=>e.status==="aborted",n2=e=>e.status==="dirty",Yc=e=>e.status==="valid",om=e=>typeof Promise<"u"&&e instanceof Promise;function fb(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function nO(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var rn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(rn||(rn={}));var Kp,Zp;class Rs{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const G3=(e,t)=>{if(Yc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Hi(e.common.issues);return this._error=n,this._error}}};function In(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var u,c;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??s.defaultError}:typeof s.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:s.defaultError}},description:a}}class Mn{get description(){return this._def.description}_getType(t){return gl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ka,ctx:{common:t.parent.common,data:t.data,parsedType:gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(om(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return G3(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return Yc(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>Yc(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(om(a)?a:Promise.resolve(a));return G3(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:jt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new zo({schema:this,typeName:$t.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Fo.create(this,this._def)}nullable(){return Fu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Po.create(this)}promise(){return qf.create(this,this._def)}or(t){return cm.create([this,t],this._def)}and(t){return dm.create(this,t,this._def)}transform(t){return new zo({...In(this._def),schema:this,typeName:$t.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new gm({...In(this._def),innerType:this,defaultValue:n,typeName:$t.ZodDefault})}brand(){return new _E({typeName:$t.ZodBranded,type:this,...In(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new ym({...In(this._def),innerType:this,catchValue:n,typeName:$t.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return s0.create(this,t)}readonly(){return bm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const CU=/^c[^\s-]{8,}$/i,AU=/^[0-9a-z]+$/,TU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,RU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,NU=/^[a-z0-9_-]{21}$/i,IU=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,OU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,jU=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,DU="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let B_;const MU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,PU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,FU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,LU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$U=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,BU=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,rO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zU=new RegExp(`^${rO}$`);function aO(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function UU(e){return new RegExp(`^${aO(e)}$`)}function iO(e){let t=`${rO}T${aO(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function qU(e,t){return!!((t==="v4"||!t)&&MU.test(e)||(t==="v6"||!t)&&FU.test(e))}function HU(e,t){if(!IU.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function VU(e,t){return!!((t==="v4"||!t)&&PU.test(e)||(t==="v6"||!t)&&LU.test(e))}class Do extends Mn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Jt.string){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_type,expected:Jt.string,received:i.parsedType}),wn}const r=new Ka;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Yt(a,{code:jt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Yt(a,{code:jt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")jU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"email",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")B_||(B_=new RegExp(DU,"u")),B_.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"emoji",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")RU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"uuid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")NU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"nanoid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")CU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"cuid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")AU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"cuid2",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")TU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"ulid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Yt(a,{validation:"url",code:jt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"regex",code:jt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?iO(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?zU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?UU(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?OU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"duration",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?qU(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"ip",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?HU(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"jwt",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?VU(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"cidr",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?$U.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"base64",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?BU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"base64url",code:jt.invalid_string,message:i.message}),r.dirty()):Kn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:jt.invalid_string,...rn.errToObj(r)})}_addCheck(t){return new Do({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...rn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...rn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...rn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...rn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...rn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...rn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...rn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...rn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...rn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...rn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...rn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...rn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...rn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...rn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...rn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...rn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...rn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...rn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...rn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...rn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...rn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...rn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...rn.errToObj(n)})}nonempty(t){return this.min(1,rn.errToObj(t))}trim(){return new Do({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Do({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Do({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Do.create=e=>{var t;return new Do({checks:[],typeName:$t.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...In(e)})};function GU(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class Du extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Jt.number){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_type,expected:Jt.number,received:i.parsedType}),wn}let r;const a=new Ka;for(const i of this._def.checks)i.kind==="int"?Kn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?GU(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.not_finite,message:i.message}),a.dirty()):Kn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new Du({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new Du({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:rn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:rn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Kn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Du.create=e=>new Du({checks:[],typeName:$t.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...In(e)});class Mu extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Jt.bigint)return this._getInvalidInput(t);let r;const a=new Ka;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Kn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Yt(n,{code:jt.invalid_type,expected:Jt.bigint,received:n.parsedType}),wn}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new Mu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new Mu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Mu.create=e=>{var t;return new Mu({checks:[],typeName:$t.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...In(e)})};class sm extends Mn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Jt.boolean){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.boolean,received:r.parsedType}),wn}return di(t.data)}}sm.create=e=>new sm({typeName:$t.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...In(e)});class Xc extends Mn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Jt.date){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_type,expected:Jt.date,received:i.parsedType}),wn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_date}),wn}const r=new Ka;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Kn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Xc({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:rn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:rn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Xc.create=e=>new Xc({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:$t.ZodDate,...In(e)});class hb extends Mn{_parse(t){if(this._getType(t)!==Jt.symbol){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.symbol,received:r.parsedType}),wn}return di(t.data)}}hb.create=e=>new hb({typeName:$t.ZodSymbol,...In(e)});class lm extends Mn{_parse(t){if(this._getType(t)!==Jt.undefined){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.undefined,received:r.parsedType}),wn}return di(t.data)}}lm.create=e=>new lm({typeName:$t.ZodUndefined,...In(e)});class um extends Mn{_parse(t){if(this._getType(t)!==Jt.null){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.null,received:r.parsedType}),wn}return di(t.data)}}um.create=e=>new um({typeName:$t.ZodNull,...In(e)});class Uf extends Mn{constructor(){super(...arguments),this._any=!0}_parse(t){return di(t.data)}}Uf.create=e=>new Uf({typeName:$t.ZodAny,...In(e)});class Gc extends Mn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return di(t.data)}}Gc.create=e=>new Gc({typeName:$t.ZodUnknown,...In(e)});class Cl extends Mn{_parse(t){const n=this._getOrReturnCtx(t);return Yt(n,{code:jt.invalid_type,expected:Jt.never,received:n.parsedType}),wn}}Cl.create=e=>new Cl({typeName:$t.ZodNever,...In(e)});class pb extends Mn{_parse(t){if(this._getType(t)!==Jt.undefined){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.void,received:r.parsedType}),wn}return di(t.data)}}pb.create=e=>new pb({typeName:$t.ZodVoid,...In(e)});class Po extends Mn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==Jt.array)return Yt(n,{code:jt.invalid_type,expected:Jt.array,received:n.parsedType}),wn;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Yt(n,{code:o?jt.too_big:jt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Yt(n,{code:jt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Yt(n,{code:jt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new Rs(n,o,n.path,s)))).then(o=>Ka.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new Rs(n,o,n.path,s)));return Ka.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Po({...this._def,minLength:{value:t,message:rn.toString(n)}})}max(t,n){return new Po({...this._def,maxLength:{value:t,message:rn.toString(n)}})}length(t,n){return new Po({...this._def,exactLength:{value:t,message:rn.toString(n)}})}nonempty(t){return this.min(1,t)}}Po.create=(e,t)=>new Po({type:e,minLength:null,maxLength:null,exactLength:null,typeName:$t.ZodArray,...In(t)});function Ef(e){if(e instanceof Ur){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Fo.create(Ef(r))}return new Ur({...e._def,shape:()=>t})}else return e instanceof Po?new Po({...e._def,type:Ef(e.element)}):e instanceof Fo?Fo.create(Ef(e.unwrap())):e instanceof Fu?Fu.create(Ef(e.unwrap())):e instanceof Ns?Ns.create(e.items.map(t=>Ef(t))):e}class Ur extends Mn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Kn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==Jt.object){const c=this._getOrReturnCtx(t);return Yt(c,{code:jt.invalid_type,expected:Jt.object,received:c.parsedType}),wn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Cl&&this._def.unknownKeys==="strip"))for(const c in a.data)o.includes(c)||s.push(c);const u=[];for(const c of o){const f=i[c],h=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new Rs(a,h,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Cl){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of s)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")s.length>0&&(Yt(a,{code:jt.unrecognized_keys,keys:s}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of s){const h=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new Rs(a,h,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const h=await f.key,m=await f.value;c.push({key:h,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>Ka.mergeObjectSync(r,c)):Ka.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return rn.errToObj,new Ur({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const u=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=rn.errToObj(t).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new Ur({...this._def,unknownKeys:"strip"})}passthrough(){return new Ur({...this._def,unknownKeys:"passthrough"})}extend(t){return new Ur({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Ur({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:$t.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Ur({...this._def,catchall:t})}pick(t){const n={};return Kn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ur({...this._def,shape:()=>n})}omit(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Ur({...this._def,shape:()=>n})}deepPartial(){return Ef(this)}partial(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Ur({...this._def,shape:()=>n})}required(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Fo;)i=i._def.innerType;n[r]=i}}),new Ur({...this._def,shape:()=>n})}keyof(){return oO(Kn.objectKeys(this.shape))}}Ur.create=(e,t)=>new Ur({shape:()=>e,unknownKeys:"strip",catchall:Cl.create(),typeName:$t.ZodObject,...In(t)});Ur.strictCreate=(e,t)=>new Ur({shape:()=>e,unknownKeys:"strict",catchall:Cl.create(),typeName:$t.ZodObject,...In(t)});Ur.lazycreate=(e,t)=>new Ur({shape:e,unknownKeys:"strip",catchall:Cl.create(),typeName:$t.ZodObject,...In(t)});class cm extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new Hi(s.ctx.common.issues));return Yt(n,{code:jt.invalid_union,unionErrors:o}),wn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(u=>new Hi(u));return Yt(n,{code:jt.invalid_union,unionErrors:s}),wn}}get options(){return this._def.options}}cm.create=(e,t)=>new cm({options:e,typeName:$t.ZodUnion,...In(t)});const hl=e=>e instanceof hm?hl(e.schema):e instanceof zo?hl(e.innerType()):e instanceof pm?[e.value]:e instanceof Pu?e.options:e instanceof mm?Kn.objectValues(e.enum):e instanceof gm?hl(e._def.innerType):e instanceof lm?[void 0]:e instanceof um?[null]:e instanceof Fo?[void 0,...hl(e.unwrap())]:e instanceof Fu?[null,...hl(e.unwrap())]:e instanceof _E||e instanceof bm?hl(e.unwrap()):e instanceof ym?hl(e._def.innerType):[];class Sv extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Jt.object)return Yt(n,{code:jt.invalid_type,expected:Jt.object,received:n.parsedType}),wn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Yt(n,{code:jt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),wn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=hl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new Sv({typeName:$t.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...In(r)})}}function r2(e,t){const n=gl(e),r=gl(t);if(e===t)return{valid:!0,data:e};if(n===Jt.object&&r===Jt.object){const a=Kn.objectKeys(t),i=Kn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const u=r2(e[s],t[s]);if(!u.valid)return{valid:!1};o[s]=u.data}return{valid:!0,data:o}}else if(n===Jt.array&&r===Jt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],u=r2(o,s);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return n===Jt.date&&r===Jt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class dm extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(t2(i)||t2(o))return wn;const s=r2(i.value,o.value);return s.valid?((n2(i)||n2(o))&&n.dirty(),{status:n.value,value:s.data}):(Yt(r,{code:jt.invalid_intersection_types}),wn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}dm.create=(e,t,n)=>new dm({left:e,right:t,typeName:$t.ZodIntersection,...In(n)});class Ns extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.array)return Yt(r,{code:jt.invalid_type,expected:Jt.array,received:r.parsedType}),wn;if(r.data.length<this._def.items.length)return Yt(r,{code:jt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),wn;!this._def.rest&&r.data.length>this._def.items.length&&(Yt(r,{code:jt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new Rs(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Ka.mergeArray(n,o)):Ka.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Ns({...this._def,rest:t})}}Ns.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ns({items:e,typeName:$t.ZodTuple,rest:null,...In(t)})};class fm extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.object)return Yt(r,{code:jt.invalid_type,expected:Jt.object,received:r.parsedType}),wn;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new Rs(r,s,r.path,s)),value:o._parse(new Rs(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Ka.mergeObjectAsync(n,a):Ka.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Mn?new fm({keyType:t,valueType:n,typeName:$t.ZodRecord,...In(r)}):new fm({keyType:Do.create(),valueType:t,typeName:$t.ZodRecord,...In(n)})}}class mb extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.map)return Yt(r,{code:jt.invalid_type,expected:Jt.map,received:r.parsedType}),wn;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,u],c)=>({key:a._parse(new Rs(r,s,r.path,[c,"key"])),value:i._parse(new Rs(r,u,r.path,[c,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of o){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return wn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const u of o){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return wn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}}}}mb.create=(e,t,n)=>new mb({valueType:t,keyType:e,typeName:$t.ZodMap,...In(n)});class Jc extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.set)return Yt(r,{code:jt.invalid_type,expected:Jt.set,received:r.parsedType}),wn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Yt(r,{code:jt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Yt(r,{code:jt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const c=new Set;for(const f of u){if(f.status==="aborted")return wn;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const s=[...r.data.values()].map((u,c)=>i._parse(new Rs(r,u,r.path,c)));return r.common.async?Promise.all(s).then(u=>o(u)):o(s)}min(t,n){return new Jc({...this._def,minSize:{value:t,message:rn.toString(n)}})}max(t,n){return new Jc({...this._def,maxSize:{value:t,message:rn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Jc.create=(e,t)=>new Jc({valueType:e,minSize:null,maxSize:null,typeName:$t.ZodSet,...In(t)});class Of extends Mn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Jt.function)return Yt(n,{code:jt.invalid_type,expected:Jt.function,received:n.parsedType}),wn;function r(s,u){return db({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,cb(),zf].filter(c=>!!c),issueData:{code:jt.invalid_arguments,argumentsError:u}})}function a(s,u){return db({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,cb(),zf].filter(c=>!!c),issueData:{code:jt.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof qf){const s=this;return di(async function(...u){const c=new Hi([]),f=await s._def.args.parseAsync(u,i).catch(g=>{throw c.addIssue(r(u,g)),c}),h=await Reflect.apply(o,this,f);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(a(h,g)),c})})}else{const s=this;return di(function(...u){const c=s._def.args.safeParse(u,i);if(!c.success)throw new Hi([r(u,c.error)]);const f=Reflect.apply(o,this,c.data),h=s._def.returns.safeParse(f,i);if(!h.success)throw new Hi([a(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Of({...this._def,args:Ns.create(t).rest(Gc.create())})}returns(t){return new Of({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Of({args:t||Ns.create([]).rest(Gc.create()),returns:n||Gc.create(),typeName:$t.ZodFunction,...In(r)})}}class hm extends Mn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}hm.create=(e,t)=>new hm({getter:e,typeName:$t.ZodLazy,...In(t)});class pm extends Mn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Yt(n,{received:n.data,code:jt.invalid_literal,expected:this._def.value}),wn}return{status:"valid",value:t.data}}get value(){return this._def.value}}pm.create=(e,t)=>new pm({value:e,typeName:$t.ZodLiteral,...In(t)});function oO(e,t){return new Pu({values:e,typeName:$t.ZodEnum,...In(t)})}class Pu extends Mn{constructor(){super(...arguments),Kp.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Yt(n,{expected:Kn.joinValues(r),received:n.parsedType,code:jt.invalid_type}),wn}if(fb(this,Kp)||nO(this,Kp,new Set(this._def.values)),!fb(this,Kp).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Yt(n,{received:n.data,code:jt.invalid_enum_value,options:r}),wn}return di(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Pu.create(t,{...this._def,...n})}exclude(t,n=this._def){return Pu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Kp=new WeakMap;Pu.create=oO;class mm extends Mn{constructor(){super(...arguments),Zp.set(this,void 0)}_parse(t){const n=Kn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Jt.string&&r.parsedType!==Jt.number){const a=Kn.objectValues(n);return Yt(r,{expected:Kn.joinValues(a),received:r.parsedType,code:jt.invalid_type}),wn}if(fb(this,Zp)||nO(this,Zp,new Set(Kn.getValidEnumValues(this._def.values))),!fb(this,Zp).has(t.data)){const a=Kn.objectValues(n);return Yt(r,{received:r.data,code:jt.invalid_enum_value,options:a}),wn}return di(t.data)}get enum(){return this._def.values}}Zp=new WeakMap;mm.create=(e,t)=>new mm({values:e,typeName:$t.ZodNativeEnum,...In(t)});class qf extends Mn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Jt.promise&&n.common.async===!1)return Yt(n,{code:jt.invalid_type,expected:Jt.promise,received:n.parsedType}),wn;const r=n.parsedType===Jt.promise?n.data:Promise.resolve(n.data);return di(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}qf.create=(e,t)=>new qf({type:e,typeName:$t.ZodPromise,...In(t)});class zo extends Mn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Yt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return wn;const u=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return u.status==="aborted"?wn:u.status==="dirty"||n.value==="dirty"?kf(u.value):u});{if(n.value==="aborted")return wn;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?wn:s.status==="dirty"||n.value==="dirty"?kf(s.value):s}}if(a.type==="refinement"){const o=s=>{const u=a.refinement(s,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?wn:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?wn:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Yc(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Yc(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Kn.assertNever(a)}}zo.create=(e,t,n)=>new zo({schema:e,typeName:$t.ZodEffects,effect:t,...In(n)});zo.createWithPreprocess=(e,t,n)=>new zo({schema:t,effect:{type:"preprocess",transform:e},typeName:$t.ZodEffects,...In(n)});class Fo extends Mn{_parse(t){return this._getType(t)===Jt.undefined?di(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Fo.create=(e,t)=>new Fo({innerType:e,typeName:$t.ZodOptional,...In(t)});class Fu extends Mn{_parse(t){return this._getType(t)===Jt.null?di(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Fu.create=(e,t)=>new Fu({innerType:e,typeName:$t.ZodNullable,...In(t)});class gm extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Jt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}gm.create=(e,t)=>new gm({innerType:e,typeName:$t.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...In(t)});class ym extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return om(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Hi(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Hi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ym.create=(e,t)=>new ym({innerType:e,typeName:$t.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...In(t)});class gb extends Mn{_parse(t){if(this._getType(t)!==Jt.nan){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.nan,received:r.parsedType}),wn}return{status:"valid",value:t.data}}}gb.create=e=>new gb({typeName:$t.ZodNaN,...In(e)});const WU=Symbol("zod_brand");class _E extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class s0 extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?wn:i.status==="dirty"?(n.dirty(),kf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?wn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new s0({in:t,out:n,typeName:$t.ZodPipeline})}}class bm extends Mn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(Yc(a)&&(a.value=Object.freeze(a.value)),a);return om(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}bm.create=(e,t)=>new bm({innerType:e,typeName:$t.ZodReadonly,...In(t)});function W3(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function sO(e,t={},n){return e?Uf.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(u=>{var c,f;if(!u){const h=W3(t,r),m=(f=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&f!==void 0?f:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!s){const u=W3(t,r),c=(o=(i=u.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...u,fatal:c})}}):Uf.create()}const KU={object:Ur.lazycreate};var $t;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})($t||($t={}));const ZU=(e,t={message:`Input not instance of ${e.name}`})=>sO(n=>n instanceof e,t),lO=Do.create,uO=Du.create,YU=gb.create,XU=Mu.create,cO=sm.create,JU=Xc.create,QU=hb.create,eq=lm.create,tq=um.create,nq=Uf.create,rq=Gc.create,aq=Cl.create,iq=pb.create,oq=Po.create,sq=Ur.create,lq=Ur.strictCreate,uq=cm.create,cq=Sv.create,dq=dm.create,fq=Ns.create,hq=fm.create,pq=mb.create,mq=Jc.create,gq=Of.create,yq=hm.create,bq=pm.create,vq=Pu.create,wq=mm.create,_q=qf.create,K3=zo.create,xq=Fo.create,Sq=Fu.create,Eq=zo.createWithPreprocess,kq=s0.create,Cq=()=>lO().optional(),Aq=()=>uO().optional(),Tq=()=>cO().optional(),Rq={string:e=>Do.create({...e,coerce:!0}),number:e=>Du.create({...e,coerce:!0}),boolean:e=>sm.create({...e,coerce:!0}),bigint:e=>Mu.create({...e,coerce:!0}),date:e=>Xc.create({...e,coerce:!0})},Nq=wn;var F=Object.freeze({__proto__:null,defaultErrorMap:zf,setErrorMap:EU,getErrorMap:cb,makeIssue:db,EMPTY_PATH:kU,addIssueToContext:Yt,ParseStatus:Ka,INVALID:wn,DIRTY:kf,OK:di,isAborted:t2,isDirty:n2,isValid:Yc,isAsync:om,get util(){return Kn},get objectUtil(){return e2},ZodParsedType:Jt,getParsedType:gl,ZodType:Mn,datetimeRegex:iO,ZodString:Do,ZodNumber:Du,ZodBigInt:Mu,ZodBoolean:sm,ZodDate:Xc,ZodSymbol:hb,ZodUndefined:lm,ZodNull:um,ZodAny:Uf,ZodUnknown:Gc,ZodNever:Cl,ZodVoid:pb,ZodArray:Po,ZodObject:Ur,ZodUnion:cm,ZodDiscriminatedUnion:Sv,ZodIntersection:dm,ZodTuple:Ns,ZodRecord:fm,ZodMap:mb,ZodSet:Jc,ZodFunction:Of,ZodLazy:hm,ZodLiteral:pm,ZodEnum:Pu,ZodNativeEnum:mm,ZodPromise:qf,ZodEffects:zo,ZodTransformer:zo,ZodOptional:Fo,ZodNullable:Fu,ZodDefault:gm,ZodCatch:ym,ZodNaN:gb,BRAND:WU,ZodBranded:_E,ZodPipeline:s0,ZodReadonly:bm,custom:sO,Schema:Mn,ZodSchema:Mn,late:KU,get ZodFirstPartyTypeKind(){return $t},coerce:Rq,any:nq,array:oq,bigint:XU,boolean:cO,date:JU,discriminatedUnion:cq,effect:K3,enum:vq,function:gq,instanceof:ZU,intersection:dq,lazy:yq,literal:bq,map:pq,nan:YU,nativeEnum:wq,never:aq,null:tq,nullable:Sq,number:uO,object:sq,oboolean:Tq,onumber:Aq,optional:xq,ostring:Cq,pipeline:kq,preprocess:Eq,promise:_q,record:hq,set:mq,strictObject:lq,string:lO,symbol:QU,transformer:K3,tuple:fq,undefined:eq,union:uq,unknown:rq,void:iq,NEVER:Nq,ZodIssueCode:jt,quotelessJson:SU,ZodError:Hi});function Iq({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,u)=>{var c,f,h,m;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(c=s.mimeType)!=null?c:"image/jpeg"};base64,${Bf(s.image)}`,detail:(h=(f=s.providerMetadata)==null?void 0:f.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new br({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=s.filename)!=null?m:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new br({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const u=[];for(const c of o)switch(c.type){case"text":{s+=c.text;break}case"tool-call":{u.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(u.length>1)throw new br({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:u.length>0?u[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:u.length>0?u:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function Z3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function yb(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var xE=F.object({error:F.object({message:F.string(),type:F.string().nullish(),param:F.any().nullish(),code:F.union([F.string(),F.number()]).nullish()})}),Lu=J6({errorSchema:xE,errorToMessage:e=>e.error.message});function bb({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Oq({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const c=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new br({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const c of a)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):s.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const u=o.type;switch(u){case"auto":case"none":case"required":return{tools:s,tool_choice:u,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=u;throw new br({functionality:`Unsupported tool choice type: ${c}`})}}}var jq=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:a2(this.modelId)}get defaultObjectGenerationMode(){return Pq(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g,v,w,_,x,S,E;const A=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const D=this.settings.useLegacyFunctionCalling;if(D&&this.settings.parallelToolCalls===!0)throw new br({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(D&&this.supportsStructuredOutputs)throw new br({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:O,warnings:N}=Iq({prompt:t,useLegacyFunctionCalling:D,systemMessageMode:Fq(this.modelId)});k.push(...N);const z={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(m=c.name)!=null?m:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:f,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(w=h==null?void 0:h.openai)==null?void 0:w.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:O};switch(a2(this.modelId)&&(z.temperature!=null&&(z.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),z.top_p!=null&&(z.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),z.frequency_penalty!=null&&(z.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),z.presence_penalty!=null&&(z.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),z.logit_bias!=null&&(z.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),z.logprobs!=null&&(z.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),z.top_logprobs!=null&&(z.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),z.max_tokens!=null&&(z.max_completion_tokens==null&&(z.max_completion_tokens=z.max_tokens),z.max_tokens=void 0)),A){case"regular":{const{tools:H,tool_choice:ee,functions:P,function_call:Z,toolWarnings:V}=Oq({mode:e,useLegacyFunctionCalling:D,structuredOutputs:this.supportsStructuredOutputs});return{args:{...z,tools:H,tool_choice:ee,functions:P,function_call:Z},warnings:[...k,...V]}}case"object-json":return{args:{...z,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:D?{...z,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...z,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const H=A;throw new Error(`Unsupported type: ${H}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u;const{args:c,warnings:f}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:g}=await Bo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:c,failedResponseHandler:Lu,successfulResponseHandler:sd(Dq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...w}=c,_=m.choices[0],x=(t=m.usage)==null?void 0:t.completion_tokens_details,S=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:vs(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(A=>{var k;return{toolCallType:"function",toolCallId:(k=A.id)!=null?k:vs(),toolName:A.function.name,args:A.function.arguments}}),finishReason:yb(_.finish_reason),usage:{promptTokens:(o=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(u=(s=m.usage)==null?void 0:s.completion_tokens)!=null?u:NaN},rawCall:{rawPrompt:v,rawSettings:w},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:bb(m),warnings:f,logprobs:Z3(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const w=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...w.response}),w.text&&x.enqueue({type:"text-delta",textDelta:w.text}),w.toolCalls)for(const S of w.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:w.finishReason,usage:w.usage,logprobs:w.logprobs,providerMetadata:w.providerMetadata}),x.close()}}),rawCall:w.rawCall,rawResponse:w.rawResponse,warnings:w.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Bo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:r,failedResponseHandler:Lu,successfulResponseHandler:wE(Mq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,u=[];let c="unknown",f={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(w,_){var x,S,E,A,k,D,O,N,z,H,ee,P;if(!w.success){c="error",_.enqueue({type:"error",error:w.error});return}const Z=w.value;if("error"in Z){c="error",_.enqueue({type:"error",error:Z.error});return}if(m&&(m=!1,_.enqueue({type:"response-metadata",...bb(Z)})),Z.usage!=null){const{prompt_tokens:X,completion_tokens:ae,prompt_tokens_details:G,completion_tokens_details:Q}=Z.usage;f={promptTokens:X??void 0,completionTokens:ae??void 0},(Q==null?void 0:Q.reasoning_tokens)!=null&&(v.openai.reasoningTokens=Q==null?void 0:Q.reasoning_tokens),(Q==null?void 0:Q.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=Q==null?void 0:Q.accepted_prediction_tokens),(Q==null?void 0:Q.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=Q==null?void 0:Q.rejected_prediction_tokens),(G==null?void 0:G.cached_tokens)!=null&&(v.openai.cachedPromptTokens=G==null?void 0:G.cached_tokens)}const V=Z.choices[0];if((V==null?void 0:V.finish_reason)!=null&&(c=yb(V.finish_reason)),(V==null?void 0:V.delta)==null)return;const fe=V.delta;fe.content!=null&&_.enqueue({type:"text-delta",textDelta:fe.content});const ue=Z3(V==null?void 0:V.logprobs);ue!=null&&ue.length&&(h===void 0&&(h=[]),h.push(...ue));const Y=g&&fe.function_call!=null?[{type:"function",id:vs(),function:fe.function_call,index:0}]:fe.tool_calls;if(Y!=null)for(const X of Y){const ae=X.index;if(u[ae]==null){if(X.type!=="function")throw new If({data:X,message:"Expected 'function' type."});if(X.id==null)throw new If({data:X,message:"Expected 'id' to be a string."});if(((x=X.function)==null?void 0:x.name)==null)throw new If({data:X,message:"Expected 'function.name' to be a string."});u[ae]={id:X.id,type:"function",function:{name:X.function.name,arguments:(S=X.function.arguments)!=null?S:""},hasFinished:!1};const Q=u[ae];((E=Q.function)==null?void 0:E.name)!=null&&((A=Q.function)==null?void 0:A.arguments)!=null&&(Q.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Q.id,toolName:Q.function.name,argsTextDelta:Q.function.arguments}),V3(Q.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=Q.id)!=null?k:vs(),toolName:Q.function.name,args:Q.function.arguments}),Q.hasFinished=!0));continue}const G=u[ae];G.hasFinished||(((D=X.function)==null?void 0:D.arguments)!=null&&(G.function.arguments+=(N=(O=X.function)==null?void 0:O.arguments)!=null?N:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:(z=X.function.arguments)!=null?z:""}),((H=G.function)==null?void 0:H.name)!=null&&((ee=G.function)==null?void 0:ee.arguments)!=null&&V3(G.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(P=G.id)!=null?P:vs(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0))}},flush(w){var _,x;w.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(_=f.promptTokens)!=null?_:NaN,completionTokens:(x=f.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},dO=F.object({prompt_tokens:F.number().nullish(),completion_tokens:F.number().nullish(),prompt_tokens_details:F.object({cached_tokens:F.number().nullish()}).nullish(),completion_tokens_details:F.object({reasoning_tokens:F.number().nullish(),accepted_prediction_tokens:F.number().nullish(),rejected_prediction_tokens:F.number().nullish()}).nullish()}).nullish(),Dq=F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({message:F.object({role:F.literal("assistant").nullish(),content:F.string().nullish(),function_call:F.object({arguments:F.string(),name:F.string()}).nullish(),tool_calls:F.array(F.object({id:F.string().nullish(),type:F.literal("function"),function:F.object({name:F.string(),arguments:F.string()})})).nullish()}),index:F.number(),logprobs:F.object({content:F.array(F.object({token:F.string(),logprob:F.number(),top_logprobs:F.array(F.object({token:F.string(),logprob:F.number()}))})).nullable()}).nullish(),finish_reason:F.string().nullish()})),usage:dO}),Mq=F.union([F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({delta:F.object({role:F.enum(["assistant"]).nullish(),content:F.string().nullish(),function_call:F.object({name:F.string().optional(),arguments:F.string().optional()}).nullish(),tool_calls:F.array(F.object({index:F.number(),id:F.string().nullish(),type:F.literal("function").optional(),function:F.object({name:F.string().nullish(),arguments:F.string().nullish()})})).nullish()}).nullish(),logprobs:F.object({content:F.array(F.object({token:F.string(),logprob:F.number(),top_logprobs:F.array(F.object({token:F.string(),logprob:F.number()}))})).nullable()}).nullish(),finish_reason:F.string().nullable().optional(),index:F.number()})),usage:dO}),xE]);function a2(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function Pq(e){return e.startsWith("gpt-4o-audio-preview")}function Fq(e){var t,n;return a2(e)?(n=(t=Lq[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var Lq={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function $q({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new pl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new br({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new br({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new br({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function Y3(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var Bq=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h}){var m;const g=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:w,stopSequences:_}=$q({prompt:n,inputFormat:t}),x=[..._??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,prompt:w,stop:x.length>0?x:void 0};switch(g){case"regular":{if((m=e.tools)!=null&&m.length)throw new br({functionality:"tools"});if(e.toolChoice)throw new br({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new br({functionality:"object-json mode"});case"object-tool":throw new br({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Bo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:t,failedResponseHandler:Lu,successfulResponseHandler:sd(zq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,u=a.choices[0];return{text:u.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:yb(u.finish_reason),logprobs:Y3(u.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:bb(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Bo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:r,failedResponseHandler:Lu,successfulResponseHandler:wE(Uq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,g){if(!m.success){u="error",g.enqueue({type:"error",error:m.error});return}const v=m.value;if("error"in v){u="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...bb(v)})),v.usage!=null&&(c={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const w=v.choices[0];(w==null?void 0:w.finish_reason)!=null&&(u=yb(w.finish_reason)),(w==null?void 0:w.text)!=null&&g.enqueue({type:"text-delta",textDelta:w.text});const _=Y3(w==null?void 0:w.logprobs);_!=null&&_.length&&(f===void 0&&(f=[]),f.push(..._))},flush(m){m.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},zq=F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({text:F.string(),finish_reason:F.string(),logprobs:F.object({tokens:F.array(F.string()),token_logprobs:F.array(F.number()),top_logprobs:F.array(F.record(F.string(),F.number())).nullable()}).nullish()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()})}),Uq=F.union([F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({text:F.string(),finish_reason:F.string().nullish(),index:F.number(),logprobs:F.object({tokens:F.array(F.string()),token_logprobs:F.array(F.number()),top_logprobs:F.array(F.record(F.string(),F.number())).nullable()}).nullish()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()}).nullish()}),xE]),qq=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new yE({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Bo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ts(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Lu,successfulResponseHandler:sd(Hq),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Hq=F.object({data:F.array(F.object({embedding:F.array(F.number())})),usage:F.object({prompt_tokens:F.number()}).nullish()}),Vq={"dall-e-3":1,"dall-e-2":10},Gq=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:Vq[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const g=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:v,responseHeaders:w}=await Bo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ts(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:Lu,successfulResponseHandler:sd(Wq),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(_=>_.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:w}}}},Wq=F.object({data:F.array(F.object({b64_json:F.string()}))});function Kq({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var u,c,f,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${Bf(o.image)}`,detail:(f=(c=o.providerMetadata)==null?void 0:c.openai)==null?void 0:f.imageDetail};case"file":{if(o.data instanceof URL)throw new br({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new br({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function X3({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function Zq({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)switch(u.type){case"function":o.push({type:"function",name:u.name,description:u.description,parameters:u.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(u.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:u.args.searchContextSize,user_location:u.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:u});break}break;default:a.push({type:"unsupported-tool",tool:u});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const u=s;throw new br({functionality:`Unsupported tool choice type: ${u}`})}}}var Yq=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:u,prompt:c,providerMetadata:f,responseFormat:h}){var m,g,v;const w=[],_=fH(this.modelId),x=e.type;i!=null&&w.push({type:"unsupported-setting",setting:"topK"}),u!=null&&w.push({type:"unsupported-setting",setting:"seed"}),o!=null&&w.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&w.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&w.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=Kq({prompt:c,systemMessageMode:_.systemMessageMode});w.push(...E);const A=bU({provider:"openai",providerOptions:f,schema:hH}),k=(m=A==null?void 0:A.strictSchemas)!=null?m:!0,D={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:A==null?void 0:A.metadata,parallel_tool_calls:A==null?void 0:A.parallelToolCalls,previous_response_id:A==null?void 0:A.previousResponseId,store:A==null?void 0:A.store,user:A==null?void 0:A.user,instructions:A==null?void 0:A.instructions,..._.isReasoningModel&&(A==null?void 0:A.reasoningEffort)!=null&&{reasoning:{effort:A==null?void 0:A.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(D.temperature!=null&&(D.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),D.top_p!=null&&(D.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:O,tool_choice:N,toolWarnings:z}=Zq({mode:e,strict:k});return{args:{...D,tools:O,tool_choice:N},warnings:[...w,...z]}}case"object-json":return{args:{...D,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:w};case"object-tool":return{args:{...D,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:w};default:{const O=x;throw new Error(`Unsupported type: ${O}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:u,value:c,rawValue:f}=await Bo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:o,failedResponseHandler:Lu,successfulResponseHandler:sd(F.object({id:F.string(),created_at:F.number(),model:F.string(),output:F.array(F.discriminatedUnion("type",[F.object({type:F.literal("message"),role:F.literal("assistant"),content:F.array(F.object({type:F.literal("output_text"),text:F.string(),annotations:F.array(F.object({type:F.literal("url_citation"),start_index:F.number(),end_index:F.number(),url:F.string(),title:F.string()}))}))}),F.object({type:F.literal("function_call"),call_id:F.string(),name:F.string(),arguments:F.string()}),F.object({type:F.literal("web_search_call")}),F.object({type:F.literal("computer_call")}),F.object({type:F.literal("reasoning")})])),incomplete_details:F.object({reason:F.string()}).nullable(),usage:fO})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),m=c.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(v=>{var w,_,x;return{sourceType:"url",id:(x=(_=(w=this.config).generateId)==null?void 0:_.call(w))!=null?x:vs(),url:v.url,title:v.title}})),finishReason:X3({finishReason:(t=c.incomplete_details)==null?void 0:t.reason,hasToolCalls:m.length>0}),toolCalls:m.length>0?m:void 0,usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:f},request:{body:JSON.stringify(o)},response:{id:c.id,timestamp:new Date(c.created_at*1e3),modelId:c.model},providerMetadata:{openai:{responseId:c.id,cachedPromptTokens:(r=(n=c.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=c.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Bo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ts(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:Lu,successfulResponseHandler:wE(aH),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,u=NaN,c=null,f=null,h=null;const m={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,w){var _,x,S,E,A,k,D,O;if(!v.success){o="error",w.enqueue({type:"error",error:v.error});return}const N=v.value;if(cH(N))N.item.type==="function_call"&&(m[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,argsTextDelta:N.item.arguments}));else if(uH(N)){const z=m[N.output_index];z!=null&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:z.toolCallId,toolName:z.toolName,argsTextDelta:N.delta})}else lH(N)?(h=N.response.id,w.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(N.response.created_at*1e3),modelId:N.response.model})):iH(N)?w.enqueue({type:"text-delta",textDelta:N.delta}):oH(N)&&N.item.type==="function_call"?(m[N.output_index]=void 0,g=!0,w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,args:N.item.arguments})):sH(N)?(o=X3({finishReason:(_=N.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=N.response.usage.input_tokens,u=N.response.usage.output_tokens,c=(S=(x=N.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:c,f=(A=(E=N.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?A:f):dH(N)&&w.enqueue({type:"source",source:{sourceType:"url",id:(O=(D=(k=i.config).generateId)==null?void 0:D.call(k))!=null?O:vs(),url:N.annotation.url,title:N.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:u},...(c!=null||f!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:f}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},fO=F.object({input_tokens:F.number(),input_tokens_details:F.object({cached_tokens:F.number().nullish()}).nullish(),output_tokens:F.number(),output_tokens_details:F.object({reasoning_tokens:F.number().nullish()}).nullish()}),Xq=F.object({type:F.literal("response.output_text.delta"),delta:F.string()}),Jq=F.object({type:F.enum(["response.completed","response.incomplete"]),response:F.object({incomplete_details:F.object({reason:F.string()}).nullish(),usage:fO})}),Qq=F.object({type:F.literal("response.created"),response:F.object({id:F.string(),created_at:F.number(),model:F.string()})}),eH=F.object({type:F.literal("response.output_item.done"),output_index:F.number(),item:F.discriminatedUnion("type",[F.object({type:F.literal("message")}),F.object({type:F.literal("function_call"),id:F.string(),call_id:F.string(),name:F.string(),arguments:F.string(),status:F.literal("completed")})])}),tH=F.object({type:F.literal("response.function_call_arguments.delta"),item_id:F.string(),output_index:F.number(),delta:F.string()}),nH=F.object({type:F.literal("response.output_item.added"),output_index:F.number(),item:F.discriminatedUnion("type",[F.object({type:F.literal("message")}),F.object({type:F.literal("function_call"),id:F.string(),call_id:F.string(),name:F.string(),arguments:F.string()})])}),rH=F.object({type:F.literal("response.output_text.annotation.added"),annotation:F.object({type:F.literal("url_citation"),url:F.string(),title:F.string()})}),aH=F.union([Xq,Jq,Qq,eH,tH,nH,rH,F.object({type:F.string()}).passthrough()]);function iH(e){return e.type==="response.output_text.delta"}function oH(e){return e.type==="response.output_item.done"}function sH(e){return e.type==="response.completed"||e.type==="response.incomplete"}function lH(e){return e.type==="response.created"}function uH(e){return e.type==="response.function_call_arguments.delta"}function cH(e){return e.type==="response.output_item.added"}function dH(e){return e.type==="response.output_text.annotation.added"}function fH(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var hH=F.object({metadata:F.any().nullish(),parallelToolCalls:F.boolean().nullish(),previousResponseId:F.string().nullish(),store:F.boolean().nullish(),user:F.string().nullish(),reasoningEffort:F.string().nullish(),strictSchemas:F.boolean().nullish(),instructions:F.string().nullish()}),pH=F.object({});function mH({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:pH}}var gH={webSearchPreview:mH};function hO(e={}){var t,n,r;const a=(t=eO(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${dU({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(w,_={})=>new jq(w,_,{provider:`${o}.chat`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),c=(w,_={})=>new Bq(w,_,{provider:`${o}.completion`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),f=(w,_={})=>new qq(w,_,{provider:`${o}.embedding`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),h=(w,_={})=>new Gq(w,_,{provider:`${o}.image`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),m=(w,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return w==="gpt-3.5-turbo-instruct"?c(w,_):u(w,_)},g=w=>new Yq(w,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),v=function(w,_){return m(w,_)};return v.languageModel=m,v.chat=u,v.completion=c,v.responses=g,v.embedding=f,v.textEmbedding=f,v.textEmbeddingModel=f,v.image=h,v.imageModel=h,v.tools=gH,v}hO({compatibility:"strict"});var pO="vercel.ai.error",yH=Symbol.for(pO),mO,bH=class gO extends Error{constructor({name:t,message:n,cause:r}){super(n),this[mO]=!0,this.name=t,this.cause=r}static isInstance(t){return gO.hasMarker(t,pO)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};mO=yH;var Za=bH,yO="AI_APICallError",bO=`vercel.ai.error.${yO}`,vH=Symbol.for(bO),vO,bl=class extends Za{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:yO,message:t,cause:s}),this[vO]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Za.hasMarker(t,bO)}};vO=vH;var wO="AI_EmptyResponseBodyError",_O=`vercel.ai.error.${wO}`,wH=Symbol.for(_O),xO,_H=class extends Za{constructor({message:t="Empty response body"}={}){super({name:wO,message:t}),this[xO]=!0}static isInstance(t){return Za.hasMarker(t,_O)}};xO=wH;function SO(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var EO="AI_InvalidArgumentError",kO=`vercel.ai.error.${EO}`,xH=Symbol.for(kO),CO,AO=class extends Za{constructor({message:t,cause:n,argument:r}){super({name:EO,message:t,cause:n}),this[CO]=!0,this.argument=r}static isInstance(t){return Za.hasMarker(t,kO)}};CO=xH;var TO="AI_JSONParseError",RO=`vercel.ai.error.${TO}`,SH=Symbol.for(RO),NO,vb=class extends Za{constructor({text:t,cause:n}){super({name:TO,message:`JSON parsing failed: Text: ${t}.
Error message: ${SO(n)}`,cause:n}),this[NO]=!0,this.text=t}static isInstance(t){return Za.hasMarker(t,RO)}};NO=SH;var IO="AI_LoadAPIKeyError",OO=`vercel.ai.error.${IO}`,EH=Symbol.for(OO),jO,py=class extends Za{constructor({message:t}){super({name:IO,message:t}),this[jO]=!0}static isInstance(t){return Za.hasMarker(t,OO)}};jO=EH;var DO="AI_TooManyEmbeddingValuesForCallError",MO=`vercel.ai.error.${DO}`,kH=Symbol.for(MO),PO,CH=class extends Za{constructor(e){super({name:DO,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[PO]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Za.hasMarker(e,MO)}};PO=kH;var FO="AI_TypeValidationError",LO=`vercel.ai.error.${FO}`,AH=Symbol.for(LO),$O,TH=class i2 extends Za{constructor({value:t,cause:n}){super({name:FO,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${SO(n)}`,cause:n}),this[$O]=!0,this.value=t}static isInstance(t){return Za.hasMarker(t,LO)}static wrap({value:t,cause:n}){return i2.isInstance(n)&&n.value===t?n:new i2({value:t,cause:n})}};$O=AH;var wb=TH,BO="AI_UnsupportedFunctionalityError",zO=`vercel.ai.error.${BO}`,RH=Symbol.for(zO),UO,Ky=class extends Za{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:BO,message:n}),this[UO]=!0,this.functionality=t}static isInstance(t){return Za.hasMarker(t,zO)}};UO=RH;let NH=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var IH={};function o2(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function OH(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=jH(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function jH(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Ev(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var DH=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=NH(n,t);if(e==null)return a;if(n.includes(r))throw new AO({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},MH=DH();function PH(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function z_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function FH({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new py({message:`${r} API key must be a string.`});if(typeof Wr>"u")throw new py({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=IH[t],e==null)throw new py({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new py({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var s2=Symbol.for("vercel.ai.validator");function LH(e){return{[s2]:!0,validate:e}}function $H(e){return typeof e=="object"&&e!==null&&s2 in e&&e[s2]===!0&&"validate"in e}function BH(e){return $H(e)?e:zH(e)}function zH(e){return LH(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function UH({value:e,schema:t}){const n=SE({value:e,schema:t});if(!n.success)throw wb.wrap({value:e,cause:n.error});return n.value}function SE({value:e,schema:t}){const n=BH(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:wb.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:wb.wrap({value:e,cause:r})}}}function qH({text:e,schema:t}){try{const n=Go.parse(e);return t==null?n:UH({value:n,schema:t})}catch(n){throw vb.isInstance(n)||wb.isInstance(n)?n:new vb({text:e,cause:n})}}function qO({text:e,schema:t}){try{const n=Go.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=SE({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:vb.isInstance(n)?n:new vb({text:e,cause:n})}}}function HH({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=SE({value:t[e],schema:n});if(!r.success)throw new AO({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var VH=()=>globalThis.fetch,l2=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>GH({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),GH=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=VH()})=>{try{const s=await o(e,{method:"POST",headers:PH(t),body:n.content,signal:i}),u=Ev(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw z_(f)||bl.isInstance(f)?f:new bl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(z_(c)||bl.isInstance(c))?c:new bl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(z_(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new bl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function u2(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var WH=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Ev(r);if(o.trim()==="")return{responseHeaders:s,value:new bl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=qH({text:o,schema:e});return{responseHeaders:s,value:new bl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new bl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},KH=e=>async({response:t})=>{const n=Ev(t);if(t.body==null)throw new _H({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(OH()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(qO({text:r,schema:e}))}}))}},HO=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=qO({text:a,schema:e}),o=Ev(t);if(!i.success)throw new bl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:ZH}=globalThis;function YH(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return ZH(t)}function XH(e){return e==null?void 0:e.replace(/\/$/,"")}function co(e){if(JH(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:u,format:c,const:f,minLength:h,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),f!==void 0&&(g.enum=[f]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),m!==void 0&&(g.enum=m),a!=null&&(g.properties=Object.entries(a).reduce((v,[w,_])=>(v[w]=co(_),v),{})),i&&(g.items=Array.isArray(i)?i.map(co):co(i)),o&&(g.allOf=o.map(co)),s)if(s.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=s.filter(w=>!(typeof w=="object"&&(w==null?void 0:w.type)==="null"));if(v.length===1){const w=co(v[0]);typeof w=="object"&&(g.nullable=!0,Object.assign(g,w))}else g.anyOf=v.map(co),g.nullable=!0}else g.anyOf=s.map(co);return u&&(g.oneOf=u.map(co)),h!==void 0&&(g.minLength=h),g}function JH(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function QH(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new Ky({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const u=[];for(const c of s)switch(c.type){case"text":{u.push({text:c.text});break}case"image":{u.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:YH(c.image)}});break}case"file":{u.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}a.push({role:"user",parts:u});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(u=>{switch(u.type){case"text":return u.text.length===0?void 0:{text:u.text};case"file":{if(u.mimeType!=="image/png")throw new Ky({functionality:"Only PNG images are supported in assistant messages"});if(u.data instanceof URL)throw new Ky({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:u.mimeType,data:u.data}}}case"tool-call":return{functionCall:{name:u.toolName,args:u.args}}}}).filter(u=>u!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(u=>({functionResponse:{name:u.toolName,response:{name:u.toolName,content:u.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function J3(e){return e.includes("/")?e:`models/${e}`}var eV=F.object({error:F.object({code:F.number().nullable(),message:F.string(),status:F.string()})}),c2=WH({errorSchema:eV,errorToMessage:e=>e.error.message});function tV(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],u=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:u?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const f=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):f.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:co(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:f},toolConfig:void 0,toolWarnings:s};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=m;throw new Ky({functionality:`Unsupported tool choice type: ${g}`})}}}function Q3({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var nV=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g;const v=e.type,w=[],_=HH({provider:"google",providerOptions:h,schema:oV}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:u,seed:f,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?co(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:S,systemInstruction:E}=QH(t);switch(v){case"regular":{const{tools:A,toolConfig:k,toolWarnings:D}=tV(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:A,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...w,...D]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?co(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:w};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:co(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:w};default:{const A=v;throw new Error(`Unsupported type: ${A}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),u=JSON.stringify(o),c=o2(await u2(this.config.headers),e.headers),{responseHeaders:f,value:h,rawValue:m}=await l2({url:`${this.config.baseURL}/${J3(this.modelId)}:generateContent`,headers:c,body:o,failedResponseHandler:c2,successfulResponseHandler:HO(aV),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=o,w=h.candidates[0],_=w.content==null||typeof w.content!="object"||!("parts"in w.content)?[]:w.content.parts,x=eR({parts:_,generateId:this.config.generateId}),S=h.usageMetadata;return{text:tR(_),files:(t=nR(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:Q3({finishReason:w.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:f,body:m},warnings:s,providerMetadata:{google:{groundingMetadata:(a=w.groundingMetadata)!=null?a:null,safetyRatings:(i=w.safetyRatings)!=null?i:null}},sources:rR({groundingMetadata:w.groundingMetadata,generateId:this.config.generateId}),request:{body:u}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=o2(await u2(this.config.headers),e.headers),{responseHeaders:i,value:o}=await l2({url:`${this.config.baseURL}/${J3(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:c2,successfulResponseHandler:KH(iV),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...u}=t;let c="unknown",f={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(v,w){var _,x,S,E,A,k;if(!v.success){w.enqueue({type:"error",error:v.error});return}const D=v.value,O=D.usageMetadata;O!=null&&(f={promptTokens:(_=O.promptTokenCount)!=null?_:NaN,completionTokens:(x=O.candidatesTokenCount)!=null?x:NaN});const N=(S=D.candidates)==null?void 0:S[0];if(N==null)return;const z=N.content;if(z!=null){const H=tR(z.parts);H!=null&&w.enqueue({type:"text-delta",textDelta:H});const ee=nR(z.parts);if(ee!=null)for(const Z of ee)w.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const P=eR({parts:z.parts,generateId:m});if(P!=null)for(const Z of P)w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),g=!0}if(N.finishReason!=null){c=Q3({finishReason:N.finishReason,hasToolCalls:g});const H=(E=rR({groundingMetadata:N.groundingMetadata,generateId:m}))!=null?E:[];for(const ee of H)w.enqueue({type:"source",source:ee});h={google:{groundingMetadata:(A=N.groundingMetadata)!=null?A:null,safetyRatings:(k=N.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:c,usage:f,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:u},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function eR({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function tR(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function nR(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function rR({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var VO=F.object({role:F.string(),parts:F.array(F.union([F.object({text:F.string()}),F.object({functionCall:F.object({name:F.string(),args:F.unknown()})}),F.object({inlineData:F.object({mimeType:F.string(),data:F.string()})})])).nullish()}),rV=F.object({web:F.object({uri:F.string(),title:F.string()}).nullish(),retrievedContext:F.object({uri:F.string(),title:F.string()}).nullish()}),GO=F.object({webSearchQueries:F.array(F.string()).nullish(),retrievalQueries:F.array(F.string()).nullish(),searchEntryPoint:F.object({renderedContent:F.string()}).nullish(),groundingChunks:F.array(rV).nullish(),groundingSupports:F.array(F.object({segment:F.object({startIndex:F.number().nullish(),endIndex:F.number().nullish(),text:F.string().nullish()}),segment_text:F.string().nullish(),groundingChunkIndices:F.array(F.number()).nullish(),supportChunkIndices:F.array(F.number()).nullish(),confidenceScores:F.array(F.number()).nullish(),confidenceScore:F.array(F.number()).nullish()})).nullish(),retrievalMetadata:F.union([F.object({webDynamicRetrievalScore:F.number()}),F.object({})]).nullish()}),WO=F.object({category:F.string(),probability:F.string(),probabilityScore:F.number().nullish(),severity:F.string().nullish(),severityScore:F.number().nullish(),blocked:F.boolean().nullish()}),aV=F.object({candidates:F.array(F.object({content:VO.nullish().or(F.object({}).strict()),finishReason:F.string().nullish(),safetyRatings:F.array(WO).nullish(),groundingMetadata:GO.nullish()})),usageMetadata:F.object({promptTokenCount:F.number().nullish(),candidatesTokenCount:F.number().nullish(),totalTokenCount:F.number().nullish()}).nullish()}),iV=F.object({candidates:F.array(F.object({content:VO.nullish(),finishReason:F.string().nullish(),safetyRatings:F.array(WO).nullish(),groundingMetadata:GO.nullish()})).nullish(),usageMetadata:F.object({promptTokenCount:F.number().nullish(),candidatesTokenCount:F.number().nullish(),totalTokenCount:F.number().nullish()}).nullish()}),oV=F.object({responseModalities:F.array(F.enum(["TEXT","IMAGE"])).nullish()}),sV=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new CH({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=o2(await u2(this.config.headers),t),{responseHeaders:a,value:i}=await l2({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:c2,successfulResponseHandler:HO(lV),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},lV=F.object({embeddings:F.array(F.object({values:F.array(F.number())}))});function uV(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function KO(e={}){var t;const n=(t=XH(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":FH({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,u={})=>{var c;return new nV(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:MH,isSupportedUrl:uV,fetch:e.fetch})},i=(s,u={})=>new sV(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,u)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}KO();var ZO="vercel.ai.error",cV=Symbol.for(ZO),YO,dV=class XO extends Error{constructor({name:t,message:n,cause:r}){super(n),this[YO]=!0,this.name=t,this.cause=r}static isInstance(t){return XO.hasMarker(t,ZO)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};YO=cV;var Ta=dV,JO="AI_APICallError",QO=`vercel.ai.error.${JO}`,fV=Symbol.for(QO),ej,vl=class extends Ta{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:u}){super({name:JO,message:e,cause:o}),this[ej]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=u}static isInstance(e){return Ta.hasMarker(e,QO)}};ej=fV;var tj="AI_EmptyResponseBodyError",nj=`vercel.ai.error.${tj}`,hV=Symbol.for(nj),rj,pV=class extends Ta{constructor({message:e="Empty response body"}={}){super({name:tj,message:e}),this[rj]=!0}static isInstance(e){return Ta.hasMarker(e,nj)}};rj=hV;function aj(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var ij="AI_InvalidArgumentError",oj=`vercel.ai.error.${ij}`,mV=Symbol.for(oj),sj,gV=class extends Ta{constructor({message:t,cause:n,argument:r}){super({name:ij,message:t,cause:n}),this[sj]=!0,this.argument=r}static isInstance(t){return Ta.hasMarker(t,oj)}};sj=mV;var lj="AI_InvalidPromptError",uj=`vercel.ai.error.${lj}`,yV=Symbol.for(uj),cj,bV=class extends Ta{constructor({prompt:e,message:t,cause:n}){super({name:lj,message:`Invalid prompt: ${t}`,cause:n}),this[cj]=!0,this.prompt=e}static isInstance(e){return Ta.hasMarker(e,uj)}};cj=yV;var dj="AI_InvalidResponseDataError",fj=`vercel.ai.error.${dj}`,vV=Symbol.for(fj),hj,U_=class extends Ta{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:dj,message:t}),this[hj]=!0,this.data=e}static isInstance(e){return Ta.hasMarker(e,fj)}};hj=vV;var pj="AI_JSONParseError",mj=`vercel.ai.error.${pj}`,wV=Symbol.for(mj),gj,_b=class extends Ta{constructor({text:e,cause:t}){super({name:pj,message:`JSON parsing failed: Text: ${e}.
Error message: ${aj(t)}`,cause:t}),this[gj]=!0,this.text=e}static isInstance(e){return Ta.hasMarker(e,mj)}};gj=wV;var yj="AI_LoadAPIKeyError",bj=`vercel.ai.error.${yj}`,_V=Symbol.for(bj),vj,my=class extends Ta{constructor({message:e}){super({name:yj,message:e}),this[vj]=!0}static isInstance(e){return Ta.hasMarker(e,bj)}};vj=_V;var wj="AI_TypeValidationError",_j=`vercel.ai.error.${wj}`,xV=Symbol.for(_j),xj,SV=class d2 extends Ta{constructor({value:t,cause:n}){super({name:wj,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${aj(n)}`,cause:n}),this[xj]=!0,this.value=t}static isInstance(t){return Ta.hasMarker(t,_j)}static wrap({value:t,cause:n}){return d2.isInstance(n)&&n.value===t?n:new d2({value:t,cause:n})}};xj=xV;var xb=SV,Sj="AI_UnsupportedFunctionalityError",Ej=`vercel.ai.error.${Sj}`,EV=Symbol.for(Ej),kj,fo=class extends Ta{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Sj,message:t}),this[kj]=!0,this.functionality=e}static isInstance(e){return Ta.hasMarker(e,Ej)}};kj=EV;let kV=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},aR=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function q_(e){}function CV(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=q_,onError:n=q_,onRetry:r=q_,onComment:a}=e;let i="",o=!0,s,u="",c="";function f(w){const _=o?w.replace(/^\xEF\xBB\xBF/,""):w,[x,S]=AV(`${i}${_}`);for(const E of x)h(E);i=S,o=!1}function h(w){if(w===""){g();return}if(w.startsWith(":")){a&&a(w.slice(w.startsWith(": ")?2:1));return}const _=w.indexOf(":");if(_!==-1){const x=w.slice(0,_),S=w[_+1]===" "?2:1,E=w.slice(_+S);m(x,E,w);return}m(w,"",w)}function m(w,_,x){switch(w){case"event":c=_;break;case"data":u=`${u}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new aR(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:x}));break;default:n(new aR(`Unknown field "${w.length>20?`${w.slice(0,20)}`:w}"`,{type:"unknown-field",field:w,value:_,line:x}));break}}function g(){u.length>0&&t({id:s,event:c||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),s=void 0,u="",c=""}function v(w={}){i&&w.consume&&h(i),o=!0,s=void 0,u="",c="",i=""}return{feed:f,reset:v}}function AV(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class TV extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=CV({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var RV={};function Sb(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function kv(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var NV=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=kV(n,t);if(e==null)return a;if(n.includes(r))throw new gV({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},gy=NV();function IV(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function H_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function OV({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new my({message:`${r} API key must be a string.`});if(typeof Wr>"u")throw new my({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=RV[t],e==null)throw new my({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new my({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var f2=Symbol.for("vercel.ai.validator");function jV(e){return{[f2]:!0,validate:e}}function DV(e){return typeof e=="object"&&e!==null&&f2 in e&&e[f2]===!0&&"validate"in e}function MV(e){return DV(e)?e:PV(e)}function PV(e){return jV(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function FV({value:e,schema:t}){const n=Cj({value:e,schema:t});if(!n.success)throw xb.wrap({value:e,cause:n.error});return n.value}function Cj({value:e,schema:t}){const n=MV(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:xb.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:xb.wrap({value:e,cause:r})}}}function LV({text:e,schema:t}){try{const n=Go.parse(e);return t==null?n:FV({value:n,schema:t})}catch(n){throw _b.isInstance(n)||xb.isInstance(n)?n:new _b({text:e,cause:n})}}function Aj({text:e,schema:t}){try{const n=Go.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Cj({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:_b.isInstance(n)?n:new _b({text:e,cause:n})}}}function V_(e){try{return Go.parse(e),!0}catch{return!1}}var $V=()=>globalThis.fetch,Eb=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>BV({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),BV=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=$V()})=>{try{const s=await o(e,{method:"POST",headers:IV(t),body:n.content,signal:i}),u=kv(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw H_(f)||vl.isInstance(f)?f:new vl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(H_(c)||vl.isInstance(c))?c:new vl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(H_(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new vl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},zV=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=kv(r);if(o.trim()==="")return{responseHeaders:s,value:new vl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=LV({text:o,schema:e});return{responseHeaders:s,value:new vl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new vl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Tj=e=>async({response:t})=>{const n=kv(t);if(t.body==null)throw new pV({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new TV).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Aj({text:r,schema:e}))}}))}},Rj=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Aj({text:a,schema:e}),o=kv(t);if(!i.success)throw new vl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:UV}=globalThis;function qV(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return UV(t)}function HV(e){return e==null?void 0:e.replace(/\/$/,"")}var VV=Object.defineProperty,GV=Object.defineProperties,WV=Object.getOwnPropertyDescriptors,kb=Object.getOwnPropertySymbols,Nj=Object.prototype.hasOwnProperty,Ij=Object.prototype.propertyIsEnumerable,iR=(e,t,n)=>t in e?VV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ui=(e,t)=>{for(var n in t||(t={}))Nj.call(t,n)&&iR(e,n,t[n]);if(kb)for(var n of kb(t))Ij.call(t,n)&&iR(e,n,t[n]);return e},Zy=(e,t)=>GV(e,WV(t)),Cb=(e,t)=>{var n={};for(var r in e)Nj.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kb)for(var r of kb(e))t.indexOf(r)<0&&Ij.call(e,r)&&(n[r]=e[r]);return n};function fs(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function KV(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:fs(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=fs(s))!=null?n:fs(o[0].providerMetadata)});break}const u=fs(s),c=o.map(f=>{var h,m,g,v;switch(f.type){case"text":return{type:"text",text:f.text,cache_control:(h=fs(f.providerMetadata))!=null?h:u};case"image":return{type:"image_url",image_url:{url:f.image instanceof URL?f.image.toString():`data:${(m=f.mimeType)!=null?m:"image/jpeg"};base64,${qV(f.image)}`},cache_control:(g=fs(f.providerMetadata))!=null?g:u};case"file":return{type:"text",text:f.data instanceof URL?f.data.toString():f.data,cache_control:(v=fs(f.providerMetadata))!=null?v:u};default:{const w=f;throw new Error(`Unsupported content part type: ${w}`)}}});a.push({role:"user",content:c});break}case"assistant":{let u="";const c=[];for(const f of o)switch(f.type){case"text":{u+=f.text;break}case"tool-call":{c.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=f;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0,cache_control:fs(s)});break}case"tool":{for(const u of o)a.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),cache_control:(r=fs(s))!=null?r:fs(u.providerMetadata)});break}default:{const u=i;throw new Error(`Unsupported role: ${u}`)}}return a}function oR(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function Ab(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var EE=F.object({error:F.object({message:F.string(),type:F.string(),param:F.any().nullable(),code:F.string().nullable()})}),Tb=zV({errorSchema:EE,errorToMessage:e=>e.error.message});function ZV(e){return"parameters"in e}var YV=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:u,responseFormat:c,topK:f,providerMetadata:h}){var m;const g=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},w=Ui(Ui(Ui({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:u,response_format:c,top_k:f,messages:KV(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return Ui(Ui({},w),QV(e));case"object-json":return Zy(Ui({},w),{response_format:{type:"json_object"}});case"object-tool":return Zy(Ui({},w),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new fo({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const u=this.getArgs(e),{responseHeaders:c,value:f}=await Eb({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Sb(this.config.headers(),e.headers),body:u,failedResponseHandler:Tb,successfulResponseHandler:Rj(XV),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u,{messages:m}=h,g=Cb(h,["messages"]),v=f.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:f.id,modelId:f.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(w=>{var _;return{toolCallType:"function",toolCallId:(_=w.id)!=null?_:gy(),toolName:w.function.name,args:w.function.arguments}}),finishReason:Ab(v.finish_reason),usage:{promptTokens:(i=(a=f.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=f.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:oR(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Eb({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Sb(this.config.headers(),e.headers),body:Zy(Ui({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Tb,successfulResponseHandler:Tj(JV),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=Cb(a,["messages"]),s=[];let u="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var g,v,w,_,x,S,E,A,k,D,O,N;if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const z=h.value;if("error"in z){u="error",m.enqueue({type:"error",error:z.error});return}z.id&&m.enqueue({type:"response-metadata",id:z.id}),z.model&&m.enqueue({type:"response-metadata",modelId:z.model}),z.usage!=null&&(c={promptTokens:z.usage.prompt_tokens,completionTokens:z.usage.completion_tokens});const H=z.choices[0];if((H==null?void 0:H.finish_reason)!=null&&(u=Ab(H.finish_reason)),(H==null?void 0:H.delta)==null)return;const ee=H.delta;ee.content!=null&&m.enqueue({type:"text-delta",textDelta:ee.content}),ee.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:ee.reasoning});const P=oR(H==null?void 0:H.logprobs);if(P!=null&&P.length&&(f===void 0&&(f=[]),f.push(...P)),ee.tool_calls!=null)for(const Z of ee.tool_calls){const V=Z.index;if(s[V]==null){if(Z.type!=="function")throw new U_({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new U_({data:Z,message:"Expected 'id' to be a string."});if(((g=Z.function)==null?void 0:g.name)==null)throw new U_({data:Z,message:"Expected 'function.name' to be a string."});s[V]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const ue=s[V];if(ue==null)throw new Error("Tool call is missing");((w=ue.function)==null?void 0:w.name)!=null&&((_=ue.function)==null?void 0:_.arguments)!=null&&V_(ue.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ue.id,toolName:ue.function.name,argsTextDelta:ue.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=ue.id)!=null?x:gy(),toolName:ue.function.name,args:ue.function.arguments}),ue.sent=!0);continue}const fe=s[V];if(fe==null)throw new Error("Tool call is missing");((S=Z.function)==null?void 0:S.arguments)!=null&&(fe.function.arguments+=(A=(E=Z.function)==null?void 0:E.arguments)!=null?A:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:fe.id,toolName:fe.function.name,argsTextDelta:(k=Z.function.arguments)!=null?k:""}),((D=fe.function)==null?void 0:D.name)!=null&&((O=fe.function)==null?void 0:O.arguments)!=null&&V_(fe.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(N=fe.id)!=null?N:gy(),toolName:fe.function.name,args:fe.function.arguments}),fe.sent=!0)}},flush(h){var m;if(u==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=g.id)!=null?m:gy(),toolName:g.function.name,args:V_(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},Oj=F.object({id:F.string().optional(),model:F.string().optional(),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number(),total_tokens:F.number()}).nullish()}),XV=Oj.extend({choices:F.array(F.object({message:F.object({role:F.literal("assistant"),content:F.string().nullable().optional(),reasoning:F.string().nullable().optional(),tool_calls:F.array(F.object({id:F.string().optional().nullable(),type:F.literal("function"),function:F.object({name:F.string(),arguments:F.string()})})).optional()}),index:F.number(),logprobs:F.object({content:F.array(F.object({token:F.string(),logprob:F.number(),top_logprobs:F.array(F.object({token:F.string(),logprob:F.number()}))})).nullable()}).nullable().optional(),finish_reason:F.string().optional().nullable()}))}),JV=F.union([Oj.extend({choices:F.array(F.object({delta:F.object({role:F.enum(["assistant"]).optional(),content:F.string().nullish(),reasoning:F.string().nullish().optional(),tool_calls:F.array(F.object({index:F.number(),id:F.string().nullish(),type:F.literal("function").optional(),function:F.object({name:F.string().nullish(),arguments:F.string().nullish()})})).nullish()}).nullish(),logprobs:F.object({content:F.array(F.object({token:F.string(),logprob:F.number(),top_logprobs:F.array(F.object({token:F.string(),logprob:F.number()}))})).nullable()}).nullish(),finish_reason:F.string().nullable().optional(),index:F.number()}))}),EE]);function QV(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>ZV(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function eG({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new bV({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new fo({functionality:"images"});case"file":throw new fo({functionality:"file attachments"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new fo({functionality:"tool-call messages"});case"reasoning":throw new fo({functionality:"reasoning messages"});case"redacted-reasoning":throw new fo({functionality:"redacted reasoning messages"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new fo({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function sR(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var tG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:u,responseFormat:c,topK:f,stopSequences:h,providerMetadata:m}){var g,v;const w=e.type,_=(g=m==null?void 0:m.openrouter)!=null?g:{},{prompt:x}=eG({prompt:n,inputFormat:t}),S=Ui(Ui(Ui({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:u,stop:h,response_format:c,top_k:f,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(w){case"regular":{if((v=e.tools)!=null&&v.length)throw new fo({functionality:"tools"});if(e.toolChoice)throw new fo({functionality:"toolChoice"});return S}case"object-json":throw new fo({functionality:"object-json mode"});case"object-tool":throw new fo({functionality:"object-tool mode"});default:{const E=w;throw new fo({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:u}=await Eb({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Sb(this.config.headers(),e.headers),body:o,failedResponseHandler:Tb,successfulResponseHandler:Rj(lR),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=o,{prompt:f}=c,h=Cb(c,["prompt"]);if("error"in u)throw new Error(`${u.error.message}`);const m=u.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:u.id,modelId:u.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=u.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=u.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:Ab(m.finish_reason),logprobs:sR(m.logprobs),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Eb({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Sb(this.config.headers(),e.headers),body:Zy(Ui({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Tb,successfulResponseHandler:Tj(lR),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=Cb(a,["prompt"]);let s="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(f,h){if(!f.success){s="error",h.enqueue({type:"error",error:f.error});return}const m=f.value;if("error"in m){s="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(u={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const g=m.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=Ab(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=sR(g==null?void 0:g.logprobs);v!=null&&v.length&&(c===void 0&&(c=[]),c.push(...v))},flush(f){f.enqueue({type:"finish",finishReason:s,logprobs:c,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},lR=F.union([F.object({id:F.string().optional(),model:F.string().optional(),choices:F.array(F.object({text:F.string(),reasoning:F.string().nullish().optional(),finish_reason:F.string().nullish(),index:F.number(),logprobs:F.object({tokens:F.array(F.string()),token_logprobs:F.array(F.number()),top_logprobs:F.array(F.record(F.string(),F.number())).nullable()}).nullable().optional()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()}).optional().nullable()}),EE]);function jj(e={}){var t,n,r;const a=(n=HV((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>Ui({Authorization:`Bearer ${OV({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,m={})=>new YV(h,m,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m={})=>new tG(h,m,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?u(h,m):s(h,m)},f=function(h,m){return c(h,m)};return f.languageModel=c,f.chat=s,f.completion=u,f}jj({compatibility:"strict"});var jc={},G_={},uR;function cR(){return uR||(uR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(G_)),G_}var dR;function nG(){return dR||(dR=1,function(e){var t=jc&&jc.__createBinding||(Object.create?function(c,f,h,m){m===void 0&&(m=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,m,g)}:function(c,f,h,m){m===void 0&&(m=h),c[m]=f[h]}),n=jc&&jc.__exportStar||function(c,f){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&t(f,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=cR();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(cR(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(c,f=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return s(c.trim(),f)}e.parseJSON=o;const s=(c,f)=>{const h=c.length;let m=0;const g=k=>{throw new a(`${k} at position ${m}`)},v=k=>{throw new i(`${k} at position ${m}`)},w=()=>(A(),m>=h&&g("Unexpected end of input"),c[m]==='"'?_():c[m]==="{"?x():c[m]==="["?S():c.substring(m,m+4)==="null"||r.Allow.NULL&f&&h-m<4&&"null".startsWith(c.substring(m))?(m+=4,null):c.substring(m,m+4)==="true"||r.Allow.BOOL&f&&h-m<4&&"true".startsWith(c.substring(m))?(m+=4,!0):c.substring(m,m+5)==="false"||r.Allow.BOOL&f&&h-m<5&&"false".startsWith(c.substring(m))?(m+=5,!1):c.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&f&&h-m<8&&"Infinity".startsWith(c.substring(m))?(m+=8,1/0):c.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&f&&1<h-m&&h-m<9&&"-Infinity".startsWith(c.substring(m))?(m+=9,-1/0):c.substring(m,m+3)==="NaN"||r.Allow.NAN&f&&h-m<3&&"NaN".startsWith(c.substring(m))?(m+=3,NaN):E()),_=()=>{const k=m;let D=!1;for(m++;m<h&&(c[m]!=='"'||D&&c[m-1]==="\\");)D=c[m]==="\\"?!D:!1,m++;if(c.charAt(m)=='"')try{return JSON.parse(c.substring(k,++m-Number(D)))}catch(O){v(String(O))}else if(r.Allow.STR&f)try{return JSON.parse(c.substring(k,m-Number(D))+'"')}catch{return JSON.parse(c.substring(k,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{m++,A();const k={};try{for(;c[m]!=="}";){if(A(),m>=h&&r.Allow.OBJ&f)return k;const D=_();A(),m++;try{const O=w();k[D]=O}catch(O){if(r.Allow.OBJ&f)return k;throw O}A(),c[m]===","&&m++}}catch{if(r.Allow.OBJ&f)return k;g("Expected '}' at end of object")}return m++,k},S=()=>{m++;const k=[];try{for(;c[m]!=="]";)k.push(w()),A(),c[m]===","&&m++}catch{if(r.Allow.ARR&f)return k;g("Expected ']' at end of array")}return m++,k},E=()=>{if(m===0){c==="-"&&v("Not sure what '-' is");try{return JSON.parse(c)}catch(D){if(r.Allow.NUM&f)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}v(String(D))}}const k=m;for(c[m]==="-"&&m++;c[m]&&",]}".indexOf(c[m])===-1;)m++;m==h&&!(r.Allow.NUM&f)&&g("Unterminated number literal");try{return JSON.parse(c.substring(k,m))}catch{c.substring(k,m)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(k,c.lastIndexOf("e")))}catch(O){v(String(O))}}},A=()=>{for(;m<h&&` 
\r	`.includes(c[m]);)m++};return w()},u=o;e.parse=u}(jc)),jc}var rG=nG();function W_(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new br({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(Bf(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var aG=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=rG.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:vs(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function iG({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var oG=F.object({error:F.object({code:F.string().nullable(),message:F.string(),param:F.any().nullable(),type:F.string()})}),h2=J6({errorSchema:oG,errorToMessage:e=>e.error.message});function sG({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new br({functionality:`Unsupported tool choice type: ${s}`})}}}function lG(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var uG=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},cG=e=>async({response:t})=>{const n=o0(t);if(t.body===null)throw new mE({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new uG).pipeThrough(new TransformStream({transform(r,a){a.enqueue(Zc({schema:e,text:r}))}}))}},dG=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:u,topK:c,topP:f}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:lG({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:u,tfs_z:this.settings.tfsZ,top_k:c,top_p:f,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:w}=sG({mode:n});return{args:{...g,messages:W_(a),tools:v},type:h,warnings:[...m,...w]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:W_(a)},type:h,warnings:m};case"object-tool":return{args:{...g,messages:W_(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Bo({abortSignal:e.abortSignal,body:i,failedResponseHandler:h2,fetch:this.config.fetch,headers:Ts(this.config.headers(),e.headers),successfulResponseHandler:sd(fG),url:`${this.config.baseURL}/chat`}),{messages:u,...c}=i,f=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:vs(),toolCallType:"function",toolName:h.function.name}});return{finishReason:iG({finishReason:s.done_reason,hasToolCalls:f!==void 0&&f.length>0}),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:f,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...g.response}),g.text&&w.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)w.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),w.enqueue({type:"tool-call",..._});w.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),w.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Bo({abortSignal:e.abortSignal,body:t,failedResponseHandler:h2,fetch:this.config.fetch,headers:Ts(this.config.headers(),e.headers),successfulResponseHandler:cG(hG),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,u=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new aG({tools:u,type:n});let f="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:f,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const w=g.value;if(w.done){f=c.finish({controller:v}),h={completionTokens:w.eval_count,promptTokens:w.prompt_eval_count||0};return}m&&c.parse({controller:v,delta:w.message.content})||w.message.content!==null&&v.enqueue({textDelta:w.message.content,type:"text-delta"})}})),warnings:r}}},fG=F.object({created_at:F.string(),done:F.literal(!0),done_reason:F.string().optional().nullable(),eval_count:F.number(),eval_duration:F.number(),load_duration:F.number().optional(),message:F.object({content:F.string(),role:F.string(),tool_calls:F.array(F.object({function:F.object({arguments:F.record(F.any()),name:F.string()}),id:F.string().optional()})).optional().nullable()}),model:F.string(),prompt_eval_count:F.number().optional(),prompt_eval_duration:F.number().optional(),total_duration:F.number()}),hG=F.discriminatedUnion("done",[F.object({created_at:F.string(),done:F.literal(!1),message:F.object({content:F.string(),role:F.string()}),model:F.string()}),F.object({created_at:F.string(),done:F.literal(!0),eval_count:F.number(),eval_duration:F.number(),load_duration:F.number().optional(),model:F.string(),prompt_eval_count:F.number().optional(),prompt_eval_duration:F.number().optional(),total_duration:F.number()})]),pG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new yE({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Bo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:h2,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:sd(mG),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},mG=F.object({embeddings:F.array(F.array(F.number())),prompt_eval_count:F.number().nullable()});function Dj(e={}){var t;const n=(t=eO(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,u={})=>new dG(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,u={})=>new pG(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,u){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,u)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}Dj();let gG=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function Hf(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function yG(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=bG(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function bG(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Cv(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var vG=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=gG(n,t);if(e==null)return a;if(n.includes(r))throw new gE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},K_=vG();function wG(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Z_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var p2=Symbol.for("vercel.ai.validator");function _G(e){return{[p2]:!0,validate:e}}function xG(e){return typeof e=="object"&&e!==null&&p2 in e&&e[p2]===!0&&"validate"in e}function SG(e){return xG(e)?e:EG(e)}function EG(e){return _G(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function kG({value:e,schema:t}){const n=Mj({value:e,schema:t});if(!n.success)throw ju.wrap({value:e,cause:n.error});return n.value}function Mj({value:e,schema:t}){const n=SG(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ju.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ju.wrap({value:e,cause:r})}}}function CG({text:e,schema:t}){try{const n=Go.parse(e);return t==null?n:kG({value:n,schema:t})}catch(n){throw Ou.isInstance(n)||ju.isInstance(n)?n:new Ou({text:e,cause:n})}}function Pj({text:e,schema:t}){try{const n=Go.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Mj({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Ou.isInstance(n)?n:new Ou({text:e,cause:n})}}}function fR(e){try{return Go.parse(e),!0}catch{return!1}}var AG=()=>globalThis.fetch,Vf=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>TG({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),TG=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=AG()})=>{try{const s=await o(e,{method:"POST",headers:wG(t),body:n.content,signal:i}),u=Cv(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw Z_(f)||ha.isInstance(f)?f:new ha({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Z_(c)||ha.isInstance(c))?c:new ha({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(Z_(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new ha({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},Av=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Cv(r);if(o.trim()==="")return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=CG({text:o,schema:e});return{responseHeaders:s,value:new ha({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Fj=e=>async({response:t})=>{const n=Cv(t);if(t.body==null)throw new mE({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(yG()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Pj({text:r,schema:e}))}}))}},Tv=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Pj({text:a,schema:e}),o=Cv(t);if(!i.success)throw new ha({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:RG}=globalThis;function NG(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return RG(t)}function IG(e){return e==null?void 0:e.replace(/\/$/,"")}function Bp(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function OG(e){const t=[];for(const{role:n,content:r,...a}of e){const i=Bp({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Bp(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const u=Bp(o);switch(o.type){case"text":return{type:"text",text:o.text,...u};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${NG(o.image)}`},...u};case"file":throw new br({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const u of r){const c=Bp(u);switch(u.type){case"text":{o+=u.text;break}case"tool-call":{s.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)},...c});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=Bp(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function Rb({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Nb(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var jG=F.object({error:F.object({message:F.string(),type:F.string().nullish(),param:F.any().nullish(),code:F.union([F.string(),F.number()]).nullish()})}),Rv={errorSchema:jG,errorToMessage:e=>e.error.message};function DG({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)u.type==="provider-defined"?a.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const u=s;throw new br({functionality:`Unsupported tool choice type: ${u}`})}}}var MG=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Rv;this.chunkSchema=FG(i.errorSchema),this.failedResponseHandler=Av(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:u,stopSequences:c,responseFormat:f,seed:h}){var m,g;const v=e.type,w=[];i!=null&&w.push({type:"unsupported-setting",setting:"topK"}),(f==null?void 0:f.type)==="json"&&f.schema!=null&&!this.supportsStructuredOutputs&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(f==null?void 0:f.type)==="json"?this.supportsStructuredOutputs===!0&&f.schema!=null?{type:"json_schema",json_schema:{schema:f.schema,name:(m=f.name)!=null?m:"response",description:f.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...u==null?void 0:u[this.providerOptionsName],messages:OG(t)};switch(v){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=DG({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:x,tool_choice:S},warnings:[...w,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:w};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:w};default:{const x=v;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u,c;const{args:f,warnings:h}=this.getArgs({...e}),m=JSON.stringify(f),{responseHeaders:g,value:v,rawValue:w}=await Vf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Hf(this.config.headers(),e.headers),body:f,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Tv(PG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...x}=f,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:w});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(A=>{var k;return{toolCallType:"function",toolCallId:(k=A.id)!=null?k:K_(),toolName:A.function.name,args:A.function.arguments}}),finishReason:Nb(S.finish_reason),usage:{promptTokens:(s=(o=v.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(c=(u=v.usage)==null?void 0:u.completion_tokens)!=null?c:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:x},rawResponse:{headers:g,body:w},response:Rb(v),warnings:h,request:{body:m}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const x of v.reasoning)x.type==="text"&&_.enqueue({type:"reasoning",textDelta:x.text});else _.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&_.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const x of v.toolCalls)_.enqueue({type:"tool-call",...x});_.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),_.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await Vf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Hf(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Fj(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=n,f=[];let h="unknown",m={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(v,w){var _,x,S,E,A,k,D,O,N,z,H,ee,P,Z;if(!v.success){h="error",w.enqueue({type:"error",error:v.error});return}const V=v.value;if(i==null||i.processChunk(v.rawValue),"error"in V){h="error",w.enqueue({type:"error",error:V.error.message});return}g&&(g=!1,w.enqueue({type:"response-metadata",...Rb(V)})),V.usage!=null&&(m={promptTokens:(_=V.usage.prompt_tokens)!=null?_:void 0,completionTokens:(x=V.usage.completion_tokens)!=null?x:void 0});const fe=V.choices[0];if((fe==null?void 0:fe.finish_reason)!=null&&(h=Nb(fe.finish_reason)),(fe==null?void 0:fe.delta)==null)return;const ue=fe.delta;if(ue.reasoning_content!=null&&w.enqueue({type:"reasoning",textDelta:ue.reasoning_content}),ue.content!=null&&w.enqueue({type:"text-delta",textDelta:ue.content}),ue.tool_calls!=null)for(const Y of ue.tool_calls){const X=Y.index;if(f[X]==null){if(Y.type!=="function")throw new If({data:Y,message:"Expected 'function' type."});if(Y.id==null)throw new If({data:Y,message:"Expected 'id' to be a string."});if(((S=Y.function)==null?void 0:S.name)==null)throw new If({data:Y,message:"Expected 'function.name' to be a string."});f[X]={id:Y.id,type:"function",function:{name:Y.function.name,arguments:(E=Y.function.arguments)!=null?E:""},hasFinished:!1};const G=f[X];((A=G.function)==null?void 0:A.name)!=null&&((k=G.function)==null?void 0:k.arguments)!=null&&(G.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:G.function.arguments}),fR(G.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(D=G.id)!=null?D:K_(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0));continue}const ae=f[X];ae.hasFinished||(((O=Y.function)==null?void 0:O.arguments)!=null&&(ae.function.arguments+=(z=(N=Y.function)==null?void 0:N.arguments)!=null?z:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:(H=Y.function.arguments)!=null?H:""}),((ee=ae.function)==null?void 0:ee.name)!=null&&((P=ae.function)==null?void 0:P.arguments)!=null&&fR(ae.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=ae.id)!=null?Z:K_(),toolName:ae.function.name,args:ae.function.arguments}),ae.hasFinished=!0))}},flush(v){var w,_;const x=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(w=m.promptTokens)!=null?w:NaN,completionTokens:(_=m.completionTokens)!=null?_:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:a}}}},PG=F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({message:F.object({role:F.literal("assistant").nullish(),content:F.string().nullish(),reasoning_content:F.string().nullish(),tool_calls:F.array(F.object({id:F.string().nullish(),type:F.literal("function"),function:F.object({name:F.string(),arguments:F.string()})})).nullish()}),finish_reason:F.string().nullish()})),usage:F.object({prompt_tokens:F.number().nullish(),completion_tokens:F.number().nullish()}).nullish()}),FG=e=>F.union([F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({delta:F.object({role:F.enum(["assistant"]).nullish(),content:F.string().nullish(),reasoning_content:F.string().nullish(),tool_calls:F.array(F.object({index:F.number(),id:F.string().nullish(),type:F.literal("function").optional(),function:F.object({name:F.string().nullish(),arguments:F.string().nullish()})})).nullish()}).nullish(),finish_reason:F.string().nullish()})),usage:F.object({prompt_tokens:F.number().nullish(),completion_tokens:F.number().nullish()}).nullish()}),e]);function LG({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new pl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new br({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new br({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new br({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var $G=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:Rv;this.chunkSchema=zG(a.errorSchema),this.failedResponseHandler=Av(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h,providerMetadata:m}){var g;const v=e.type,w=[];o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:x}=LG({prompt:n,inputFormat:t}),S=[...x??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:_,stop:S.length>0?S:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new br({functionality:"tools"});if(e.toolChoice)throw new br({functionality:"toolChoice"});return{args:E,warnings:w}}case"object-json":throw new br({functionality:"object-json mode"});case"object-tool":throw new br({functionality:"object-tool mode"});default:{const A=v;throw new Error(`Unsupported type: ${A}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:u,rawValue:c}=await Vf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Hf(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Tv(BG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:f,...h}=i,m=u.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=u.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=u.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:Nb(m.finish_reason),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s,body:c},response:Rb(u),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await Vf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Hf(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Fj(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){u="error",m.enqueue({type:"error",error:g.error});return}f&&(f=!1,m.enqueue({type:"response-metadata",...Rb(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(u=Nb(v.finish_reason)),(v==null?void 0:v.text)!=null&&m.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},BG=F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({text:F.string(),finish_reason:F.string()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()}).nullish()}),zG=e=>F.union([F.object({id:F.string().nullish(),created:F.number().nullish(),model:F.string().nullish(),choices:F.array(F.object({text:F.string(),finish_reason:F.string().nullish(),index:F.number()})),usage:F.object({prompt_tokens:F.number(),completion_tokens:F.number()}).nullish()}),e]),UG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new yE({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await Vf({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Hf(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Av((r=this.config.errorStructure)!=null?r:Rv),successfulResponseHandler:Tv(qG),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},qG=F.object({data:F.array(F.object({embedding:F.array(F.number())})),usage:F.object({prompt_tokens:F.number()}).nullish()}),HG=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h,m;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:w,responseHeaders:_}=await Vf({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Hf(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:Av((m=this.config.errorStructure)!=null?m:Rv),successfulResponseHandler:Tv(VG),abortSignal:s,fetch:this.config.fetch});return{images:w.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:_}}}},VG=F.object({data:F.array(F.object({b64_json:F.string()}))});function GG(e){const t=IG(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const g=new URL(`${t}${m}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>o(h,m),o=(h,m={})=>new MG(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,m={})=>new $G(h,m,a("completion")),u=(h,m={})=>new UG(h,m,a("embedding")),c=(h,m={})=>new HG(h,m,a("image")),f=(h,m)=>i(h,m);return f.languageModel=i,f.chatModel=o,f.completionModel=s,f.textEmbeddingModel=u,f.imageModel=c,f}const Cf=(e,t)=>`${e}:${t}`,l0=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},kE=e=>e==="openai"||e==="openrouter"||e==="google",CE=e=>e==="ollama"||e==="openai-compatible",Jp=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",Lj=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],m2={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},$j=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function WG(e,t,n){try{switch(e.type){case"openai":return hO({apiKey:n})(t);case"google":return KO({apiKey:n})(t);case"openrouter":return jj({apiKey:n})(t);case"ollama":return Dj({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return GG({baseURL:$j(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function KG(e,t,n){const r=e.type,i=(e.fetchedModels&&e.fetchedModels.length>0?e.fetchedModels:m2[r]||[]).find(c=>c.id===t);if(!i)return;const o=WG(e,t,n);if(!o)return;const s=e.type==="openai",u=["openai","google","openrouter"].includes(e.type);return{id:Cf(e.id,t),name:i.name,providerId:e.id,providerName:e.name,instance:o,supportsImageGeneration:s,supportsToolCalling:u,metadata:i.metadata}}var u0=G4();const Bj=Ja(u0);function ZG(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const YG=e=>{switch(e){case"success":return QG;case"info":return tW;case"warning":return eW;case"error":return nW;default:return null}},XG=Array(12).fill(0),JG=({visible:e,className:t})=>wt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},wt.createElement("div",{className:"sonner-spinner"},XG.map((n,r)=>wt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),QG=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),eW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),tW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),nW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),rW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},wt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),wt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),aW=()=>{const[e,t]=wt.useState(document.hidden);return wt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let g2=1;class iW{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:g2++,o=this.toasts.find(u=>u.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:r}),{...u,...t,id:i,dismissible:s,title:r}):u):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async c=>{if(o=["resolve",c],wt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(sW(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,v=typeof h=="object"&&!wt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,m=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!wt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,m=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!wt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...v})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof f=="object"&&!wt.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((c,f)=>s.then(()=>o[0]==="reject"?f(o[1]):c(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||g2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const _i=new iW,oW=(e,t)=>{const n=(t==null?void 0:t.id)||g2++;return _i.addToast({title:e,...t,id:n}),n},sW=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",lW=oW,uW=()=>_i.toasts,cW=()=>_i.getActiveToasts(),ct=Object.assign(lW,{success:_i.success,info:_i.info,warning:_i.warning,error:_i.error,custom:_i.custom,message:_i.message,promise:_i.promise,dismiss:_i.dismiss,loading:_i.loading},{getHistory:uW,getToasts:cW});ZG("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function yy(e){return e.label!==void 0}const dW=3,fW="24px",hW="16px",hR=4e3,pW=356,mW=14,gW=45,yW=200;function hs(...e){return e.filter(Boolean).join(" ")}function bW(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const vW=e=>{var t,n,r,a,i,o,s,u,c;const{invert:f,toast:h,unstyled:m,interacting:g,setHeights:v,visibleToasts:w,heights:_,index:x,toasts:S,expanded:E,removeToast:A,defaultRichColors:k,closeButton:D,style:O,cancelButtonStyle:N,actionButtonStyle:z,className:H="",descriptionClassName:ee="",duration:P,position:Z,gap:V,expandByDefault:fe,classNames:ue,icons:Y,closeButtonAriaLabel:X="Close toast"}=e,[ae,G]=wt.useState(null),[Q,ne]=wt.useState(null),[de,_e]=wt.useState(!1),[ve,Pe]=wt.useState(!1),[Fe,Ie]=wt.useState(!1),[Te,Ue]=wt.useState(!1),[Ve,Ee]=wt.useState(!1),[Ae,B]=wt.useState(0),[Ce,Re]=wt.useState(0),se=wt.useRef(h.duration||P||hR),ie=wt.useRef(null),J=wt.useRef(null),xe=x===0,Me=x+1<=w,Se=h.type,Ze=h.dismissible!==!1,Et=h.className||"",at=h.descriptionClassName||"",_t=wt.useMemo(()=>_.findIndex(De=>De.toastId===h.id)||0,[_,h.id]),Nt=wt.useMemo(()=>{var De;return(De=h.closeButton)!=null?De:D},[h.closeButton,D]),Rt=wt.useMemo(()=>h.duration||P||hR,[h.duration,P]),Kt=wt.useRef(0),pe=wt.useRef(0),R=wt.useRef(0),q=wt.useRef(null),[ce,Oe]=Z.split("-"),ye=wt.useMemo(()=>_.reduce((De,Je,It)=>It>=_t?De:De+Je.height,0),[_,_t]),ke=aW(),oe=h.invert||f,ft=Se==="loading";pe.current=wt.useMemo(()=>_t*V+ye,[_t,ye]),wt.useEffect(()=>{se.current=Rt},[Rt]),wt.useEffect(()=>{_e(!0)},[]),wt.useEffect(()=>{const De=J.current;if(De){const Je=De.getBoundingClientRect().height;return Re(Je),v(It=>[{toastId:h.id,height:Je,position:h.position},...It]),()=>v(It=>It.filter(me=>me.toastId!==h.id))}},[v,h.id]),wt.useLayoutEffect(()=>{if(!de)return;const De=J.current,Je=De.style.height;De.style.height="auto";const It=De.getBoundingClientRect().height;De.style.height=Je,Re(It),v(me=>me.find($=>$.toastId===h.id)?me.map($=>$.toastId===h.id?{...$,height:It}:$):[{toastId:h.id,height:It,position:h.position},...me])},[de,h.title,h.description,v,h.id]);const vt=wt.useCallback(()=>{Pe(!0),B(pe.current),v(De=>De.filter(Je=>Je.toastId!==h.id)),setTimeout(()=>{A(h)},yW)},[h,A,v,pe]);wt.useEffect(()=>{if(h.promise&&Se==="loading"||h.duration===1/0||h.type==="loading")return;let De;return E||g||ke?(()=>{if(R.current<Kt.current){const me=new Date().getTime()-Kt.current;se.current=se.current-me}R.current=new Date().getTime()})():(()=>{se.current!==1/0&&(Kt.current=new Date().getTime(),De=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},se.current))})(),()=>clearTimeout(De)},[E,g,h,Se,ke,vt]),wt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function j(){var De;if(Y!=null&&Y.loading){var Je;return wt.createElement("div",{className:hs(ue==null?void 0:ue.loader,h==null||(Je=h.classNames)==null?void 0:Je.loader,"sonner-loader"),"data-visible":Se==="loading"},Y.loading)}return wt.createElement(JG,{className:hs(ue==null?void 0:ue.loader,h==null||(De=h.classNames)==null?void 0:De.loader),visible:Se==="loading"})}const $e=h.icon||(Y==null?void 0:Y[Se])||YG(Se);var st,ge;return wt.createElement("li",{tabIndex:0,ref:J,className:hs(H,Et,ue==null?void 0:ue.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ue==null?void 0:ue.default,ue==null?void 0:ue[Se],h==null||(n=h.classNames)==null?void 0:n[Se]),"data-sonner-toast":"","data-rich-colors":(st=h.richColors)!=null?st:k,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":de,"data-promise":!!h.promise,"data-swiped":Ve,"data-removed":ve,"data-visible":Me,"data-y-position":ce,"data-x-position":Oe,"data-index":x,"data-front":xe,"data-swiping":Fe,"data-dismissible":Ze,"data-type":Se,"data-invert":oe,"data-swipe-out":Te,"data-swipe-direction":Q,"data-expanded":!!(E||fe&&de),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${ve?Ae:pe.current}px`,"--initial-height":fe?"auto":`${Ce}px`,...O,...h.style},onDragEnd:()=>{Ie(!1),G(null),q.current=null},onPointerDown:De=>{ft||!Ze||(ie.current=new Date,B(pe.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(Ie(!0),q.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,Je,It;if(Te||!Ze)return;q.current=null;const me=Number(((De=J.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),U=Number(((Je=J.current)==null?void 0:Je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$=new Date().getTime()-((It=ie.current)==null?void 0:It.getTime()),W=ae==="x"?me:U,he=Math.abs(W)/$;if(Math.abs(W)>=gW||he>.11){B(pe.current),h.onDismiss==null||h.onDismiss.call(h,h),ne(ae==="x"?me>0?"right":"left":U>0?"down":"up"),vt(),Ue(!0);return}else{var Ne,He;(Ne=J.current)==null||Ne.style.setProperty("--swipe-amount-x","0px"),(He=J.current)==null||He.style.setProperty("--swipe-amount-y","0px")}Ee(!1),Ie(!1),G(null)},onPointerMove:De=>{var Je,It,me;if(!q.current||!Ze||((Je=window.getSelection())==null?void 0:Je.toString().length)>0)return;const $=De.clientY-q.current.y,W=De.clientX-q.current.x;var he;const Ne=(he=e.swipeDirections)!=null?he:bW(Z);!ae&&(Math.abs(W)>1||Math.abs($)>1)&&G(Math.abs(W)>Math.abs($)?"x":"y");let He={x:0,y:0};const gt=Gt=>1/(1.5+Math.abs(Gt)/20);if(ae==="y"){if(Ne.includes("top")||Ne.includes("bottom"))if(Ne.includes("top")&&$<0||Ne.includes("bottom")&&$>0)He.y=$;else{const Gt=$*gt($);He.y=Math.abs(Gt)<Math.abs($)?Gt:$}}else if(ae==="x"&&(Ne.includes("left")||Ne.includes("right")))if(Ne.includes("left")&&W<0||Ne.includes("right")&&W>0)He.x=W;else{const Gt=W*gt(W);He.x=Math.abs(Gt)<Math.abs(W)?Gt:W}(Math.abs(He.x)>0||Math.abs(He.y)>0)&&Ee(!0),(It=J.current)==null||It.style.setProperty("--swipe-amount-x",`${He.x}px`),(me=J.current)==null||me.style.setProperty("--swipe-amount-y",`${He.y}px`)}},Nt&&!h.jsx&&Se!=="loading"?wt.createElement("button",{"aria-label":X,"data-disabled":ft,"data-close-button":!0,onClick:ft||!Ze?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:hs(ue==null?void 0:ue.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ge=Y==null?void 0:Y.close)!=null?ge:rW):null,(Se||h.icon||h.promise)&&h.icon!==null&&((Y==null?void 0:Y[Se])!==null||h.icon)?wt.createElement("div",{"data-icon":"",className:hs(ue==null?void 0:ue.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||j():null,h.type!=="loading"?$e:null):null,wt.createElement("div",{"data-content":"",className:hs(ue==null?void 0:ue.content,h==null||(i=h.classNames)==null?void 0:i.content)},wt.createElement("div",{"data-title":"",className:hs(ue==null?void 0:ue.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?wt.createElement("div",{"data-description":"",className:hs(ee,at,ue==null?void 0:ue.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),wt.isValidElement(h.cancel)?h.cancel:h.cancel&&yy(h.cancel)?wt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||N,onClick:De=>{yy(h.cancel)&&Ze&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,De),vt())},className:hs(ue==null?void 0:ue.cancelButton,h==null||(u=h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,wt.isValidElement(h.action)?h.action:h.action&&yy(h.action)?wt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||z,onClick:De=>{yy(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,De),!De.defaultPrevented&&vt())},className:hs(ue==null?void 0:ue.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function pR(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function wW(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?hW:fW;function u(c){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=s:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):u(s)}),n}const _W=wt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:u,offset:c,mobileOffset:f,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:w=dW,toastOptions:_,dir:x=pR(),gap:S=mW,icons:E,containerAriaLabel:A="Notifications"}=t,[k,D]=wt.useState([]),O=wt.useMemo(()=>Array.from(new Set([a].concat(k.filter(Q=>Q.position).map(Q=>Q.position)))),[k,a]),[N,z]=wt.useState([]),[H,ee]=wt.useState(!1),[P,Z]=wt.useState(!1),[V,fe]=wt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ue=wt.useRef(null),Y=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=wt.useRef(null),ae=wt.useRef(!1),G=wt.useCallback(Q=>{D(ne=>{var de;return(de=ne.find(_e=>_e.id===Q.id))!=null&&de.delete||_i.dismiss(Q.id),ne.filter(({id:_e})=>_e!==Q.id)})},[]);return wt.useEffect(()=>_i.subscribe(Q=>{if(Q.dismiss){requestAnimationFrame(()=>{D(ne=>ne.map(de=>de.id===Q.id?{...de,delete:!0}:de))});return}setTimeout(()=>{Bj.flushSync(()=>{D(ne=>{const de=ne.findIndex(_e=>_e.id===Q.id);return de!==-1?[...ne.slice(0,de),{...ne[de],...Q},...ne.slice(de+1)]:[Q,...ne]})})})}),[k]),wt.useEffect(()=>{if(h!=="system"){fe(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?fe("dark"):fe("light")),typeof window>"u")return;const Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:ne})=>{fe(ne?"dark":"light")})}catch{Q.addListener(({matches:de})=>{try{fe(de?"dark":"light")}catch(_e){console.error(_e)}})}},[h]),wt.useEffect(()=>{k.length<=1&&ee(!1)},[k]),wt.useEffect(()=>{const Q=ne=>{var de;if(i.every(Pe=>ne[Pe]||ne.code===Pe)){var ve;ee(!0),(ve=ue.current)==null||ve.focus()}ne.code==="Escape"&&(document.activeElement===ue.current||(de=ue.current)!=null&&de.contains(document.activeElement))&&ee(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[i]),wt.useEffect(()=>{if(ue.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,ae.current=!1)}},[ue.current]),wt.createElement("section",{ref:n,"aria-label":`${A} ${Y}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((Q,ne)=>{var de;const[_e,ve]=Q.split("-");return k.length?wt.createElement("ol",{key:Q,dir:x==="auto"?pR():x,tabIndex:-1,ref:ue,className:u,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":_e,"data-lifted":H&&k.length>1&&!o,"data-x-position":ve,style:{"--front-toast-height":`${((de=N[0])==null?void 0:de.height)||0}px`,"--width":`${pW}px`,"--gap":`${S}px`,...v,...wW(c,f)},onBlur:Pe=>{ae.current&&!Pe.currentTarget.contains(Pe.relatedTarget)&&(ae.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||ae.current||(ae.current=!0,X.current=Pe.relatedTarget)},onMouseEnter:()=>ee(!0),onMouseMove:()=>ee(!0),onMouseLeave:()=>{P||ee(!1)},onDragEnd:()=>ee(!1),onPointerDown:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},k.filter(Pe=>!Pe.position&&ne===0||Pe.position===Q).map((Pe,Fe)=>{var Ie,Te;return wt.createElement(vW,{key:Pe.id,icons:E,index:Fe,toast:Pe,defaultRichColors:m,duration:(Ie=_==null?void 0:_.duration)!=null?Ie:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:w,closeButton:(Te=_==null?void 0:_.closeButton)!=null?Te:s,interacting:P,position:Q,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:G,toasts:k.filter(Ue=>Ue.position==Pe.position),heights:N.filter(Ue=>Ue.position==Pe.position),setHeights:z,expandByDefault:o,gap:S,expanded:H,swipeDirections:t.swipeDirections})})):null}))}),zp=new Map,xW=5*60*1e3;async function SW(e,t){const n=`${e.id}-${e.baseURL||""}`,r=zp.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,u,c;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":{if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break}case"openrouter":{if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break}case"ollama":{const f=((u=e.baseURL)==null?void 0:u.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",f).toString(),delete o.Authorization;break}case"openai-compatible":{if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const f=$j(e.baseURL);i=new URL("models",f.endsWith("/")?f:f+"/").toString();break}case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(f){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,f),ct.error(`Invalid Base URL for ${e.name}: ${f instanceof Error?f.message:String(f)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const f=await fetch(i,{headers:o});if(!f.ok){let g=`(${f.status} ${f.statusText})`;try{const v=await f.text();try{const w=JSON.parse(v);g=((c=w==null?void 0:w.error)==null?void 0:c.message)||(w==null?void 0:w.message)||v||g}catch{g=v||g}}catch(v){console.warn("[ModelFetcher] Failed to read error response body:",v)}throw new Error(`API Error: ${g}`)}const h=await f.json();let m=[];if(e.type==="ollama")h.models&&Array.isArray(h.models)?m=h.models.map(g=>({id:g.name,name:g.name,metadata:g.details??{}})):console.warn(`[ModelFetcher] Unexpected response structure from Ollama for ${e.name}:`,h);else if(e.type==="openrouter"){const g=h.data||h;Array.isArray(g)?m=g.map(v=>{const{id:w,name:_,...x}=v;return{id:w,name:_||w,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}else{const g=h.data||h;Array.isArray(g)?m=g.map(v=>{const{id:w,name:_,...x}=v;return{id:w,name:_||w,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}return m.sort((g,v)=>(g.name||g.id).localeCompare(v.name||v.id)),console.log(`[ModelFetcher] Fetched ${m.length} models for ${e.name}`),m}catch(f){const h=f instanceof Error?f.message:String(f);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),ct.error(`Failed to fetch models for ${e.name}: ${h}`),zp.delete(n),[]}})();return zp.set(n,a),setTimeout(()=>{zp.get(n)===a&&(zp.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},xW),a}const Y_="provider:lastModelSelection",mR="provider:globalModelSortOrder",fi=Ds(Ms((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),qt.saveSetting("enableApiKeyManagement",n)},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await qt.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([qt.loadProviderConfigs(),qt.loadApiKeys(),qt.loadSetting(mR,[]),qt.loadSetting(Y_,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{m.push(Cf(g.id,v))}),m),[]),u=new Set(s),c=i.filter(m=>u.has(m));let f=o;f&&u.has(f)||(f=c[0]??null,f||(f=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${f}`)),e({globalModelSortOrder:c,selectedModelId:f,isLoading:!1}),await qt.saveSetting(Y_,f)}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),ct.error("Failed to load provider data")}},selectModel:n=>{e({selectedModelId:n}),qt.saveSetting(Y_,n)},addApiKey:async(n,r,a)=>{const i=jo(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await qt.saveApiKey(s),e(u=>{u.dbApiKeys.push(s)}),ct.success(`API Key "${n}" added.`),i}catch(u){throw console.error("ProviderStore: Error adding API key",u),ct.error(`Failed to add API Key: ${u instanceof Error?u.message:String(u)}`),u}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await qt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),ct.success(`API Key "${r}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting API key",i),ct.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=jo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await qt.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),ct.success(`Provider "${n.name}" added.`),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),ct.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await qt.saveProviderConfig(i),e(m=>{const g=m.dbProviderConfigs.findIndex(v=>v.id===n);g!==-1&&(m.dbProviderConfigs[g]=i)});const o=t().globalModelSortOrder,s=t().dbProviderConfigs;let u=[...o],c=!1;const f=s.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{m.push(Cf(g.id,v))}),m),[]),h=new Set(f);u=o.filter(m=>h.has(m)),h.forEach(m=>{u.includes(m)||u.push(m)}),c=!0,(JSON.stringify(u)!==JSON.stringify(o)||c)&&await t().setGlobalModelSortOrder(u)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),ct.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await qt.deleteProviderConfig(n),e(f=>{f.dbProviderConfigs=f.dbProviderConfigs.filter(h=>h.id!==n)});const o=t().dbProviderConfigs.reduce((f,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(m=>{f.push(Cf(h.id,m))}),f),[]),s=new Set(o),c=t().globalModelSortOrder.filter(f=>s.has(f));await t().setGlobalModelSortOrder(c),ct.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),ct.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){ct.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(u=>u.id===i))==null?void 0:a.value,s=await SW(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),ct.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await qt.saveSetting(mR,r);const a=t().selectedModelId,o=t().dbProviderConfigs.reduce((u,c)=>(c.isEnabled&&c.enabledModels&&c.enabledModels.forEach(f=>{u.push(Cf(c.id,f))}),u),[]),s=new Set(o);if(a&&!s.has(a)){const u=r.find(c=>s.has(c))??o.find(c=>r.includes(c))??o[0]??null;console.log(`[ProviderStore] Selection ${a} invalidated by order change. Selecting ${u}`),t().selectModel(u)}else if(!a&&r.length>0){const u=r.find(c=>s.has(c))??o[0]??null;console.log(`[ProviderStore] No selection, selecting first from new order: ${u}`),t().selectModel(u)}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=l0(n);if(!i||!o)return;const s=r.find(c=>c.id===i);if(!s)return;const u=a.find(c=>c.id===s.apiKeyId);return KG(s,o,u==null?void 0:u.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=n.type,a=[...n.fetchedModels??(m2[r]||[])];return{id:n.id,name:n.name,type:n.type,allAvailableModels:a}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return[];const a=r.type;return[...r.fetchedModels??(m2[a]||[])].map(i=>({...i}))}}))),by="system",gR="You are a helpful AI assistant.",yR=.7,bR=null,vR=null,wR=null,_R=0,xR=0,SR=!0,vy=!0,wy=30,_y=10,ER=null,kR=null,CR=5,xy=null,qr=Ds(Ms(e=>({theme:by,globalSystemPrompt:gR,temperature:yR,maxTokens:bR,topP:vR,topK:wR,presencePenalty:_R,frequencyPenalty:xR,enableAdvancedSettings:SR,enableStreamingMarkdown:vy,streamingRenderFPS:wy,streamingCodeRenderFPS:_y,gitUserName:ER,gitUserEmail:kR,toolMaxSteps:CR,prismThemeUrl:xy,setTheme:t=>{e({theme:t}),qt.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),qt.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),qt.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),qt.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),qt.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),qt.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),qt.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),qt.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),qt.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),qt.saveSetting("enableStreamingMarkdown",t)},setStreamingRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingRenderFPS:n}),qt.saveSetting("streamingRenderFPS",n)},setStreamingCodeRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingCodeRenderFPS:n}),qt.saveSetting("streamingCodeRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),qt.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),qt.saveSetting("gitUserEmail",n)},setToolMaxSteps:t=>{const n=Math.max(1,Math.min(20,t));e({toolMaxSteps:n}),qt.saveSetting("toolMaxSteps",n)},setPrismThemeUrl:t=>{const n=(t==null?void 0:t.trim())||null;e({prismThemeUrl:n}),qt.saveSetting("prismThemeUrl",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,u,c,f,h,m,g,v,w,_]=await Promise.all([qt.loadSetting("theme",by),qt.loadSetting("temperature",yR),qt.loadSetting("maxTokens",bR),qt.loadSetting("topP",vR),qt.loadSetting("topK",wR),qt.loadSetting("presencePenalty",_R),qt.loadSetting("frequencyPenalty",xR),qt.loadSetting("globalSystemPrompt",gR),qt.loadSetting("enableAdvancedSettings",SR),qt.loadSetting("enableStreamingMarkdown",vy),qt.loadSetting("streamingRenderFPS",wy),qt.loadSetting("streamingCodeRenderFPS",_y),qt.loadSetting("gitUserName",ER),qt.loadSetting("gitUserEmail",kR),qt.loadSetting("toolMaxSteps",CR),qt.loadSetting("prismThemeUrl",xy)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:u,enableAdvancedSettings:c,enableStreamingMarkdown:f,streamingRenderFPS:h,streamingCodeRenderFPS:m,gitUserName:g,gitUserEmail:v,toolMaxSteps:w,prismThemeUrl:_})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:by,enableStreamingMarkdown:vy,streamingRenderFPS:wy,streamingCodeRenderFPS:_y,prismThemeUrl:xy}),await Promise.all([qt.saveSetting("theme",by),qt.saveSetting("enableStreamingMarkdown",vy),qt.saveSetting("streamingRenderFPS",wy),qt.saveSetting("streamingCodeRenderFPS",_y),qt.saveSetting("prismThemeUrl",xy)]),ct.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),ct.error("Failed to reset general settings.")}}})));async function y2(e,t){const n=ta.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}function EW(){const e=Qn.getState(),t=fi.getState(),n=qr.getState(),{providerId:r}=l0(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function kW(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}const CW=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"];function AW(e){try{const t=e.type||"application/octet-stream",n=e.name.toLowerCase(),r=t.startsWith("text/")||t==="application/json"||CW.some(i=>n.endsWith(i)),a=t.startsWith("image/");if(r&&e.contentText!==void 0)return{type:"text",text:e.contentText};if(a&&e.contentBase64!==void 0)return{type:"image",image:kW(e.contentBase64),mimeType:t};if(!r&&e.contentBase64!==void 0)return console.warn(`AIService: Unsupported file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw new Error(`Missing content or unable to determine type for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),ct.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function Sy(e){return e.flatMap(t=>{var r,a,i,o,s,u;const n=[];if((r=t.prompt)!=null&&r.content&&typeof t.prompt.content=="string"?n.push({role:"user",content:t.prompt.content}):(i=(a=t.prompt)==null?void 0:a.metadata)!=null&&i.attachedFiles&&t.prompt.metadata.attachedFiles.length>0&&((o=t.prompt)!=null&&o.content),t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(s=t.metadata)!=null&&s.toolCalls&&Array.isArray(t.metadata.toolCalls)){const c=[];t.metadata.toolCalls.forEach(f=>{try{const h=JSON.parse(f);h&&h.type==="tool-call"&&h.toolCallId&&h.toolName&&h.args!==void 0?c.push(h):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",f)}catch(h){console.error("[AIService] buildHistory: Failed to parse tool call string:",f,h)}}),c.length>0&&n.push({role:"assistant",content:c})}if((u=t.metadata)!=null&&u.toolResults&&Array.isArray(t.metadata.toolResults)){const c=[];t.metadata.toolResults.forEach(f=>{try{const h=JSON.parse(f);h&&h.type==="tool-result"&&h.toolCallId&&h.toolName&&h.result!==void 0?c.push(h):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",f)}catch(h){console.error("[AIService] buildHistory: Failed to parse tool result string:",f,h)}}),c.length>0&&n.push({role:"tool",content:c})}return n})}const AR=e=>Symbol.iterator in e,TR=e=>"entries"in e,RR=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},TW=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function RW(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!AR(e)||!AR(t)?RR({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):TR(e)&&TR(t)?RR(e,t):TW(e,t)}function Hn(e){const t=wt.useRef(void 0);return n=>{const r=e(n);return RW(t.current,r)?t.current:t.current=r}}const NW=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message..."})=>{var x;const a=L.useRef(null),[i,o]=L.useState(!1),s=ta(Hn(S=>S.promptControls)),u=Qn(Hn(S=>S.status==="streaming")),{focusInputOnNextRender:c,setFocusInputFlag:f}=ui(Hn(S=>({focusInputOnNextRender:S.focusInputOnNextRender,setFocusInputFlag:S.setFocusInputFlag}))),{attachedFilesMetadata:h,clearAttachedFiles:m}=lb(Hn(S=>({attachedFilesMetadata:S.attachedFilesMetadata,clearAttachedFiles:S.clearAttachedFiles})));L.useEffect(()=>{c&&a.current&&(a.current.focus(),f(!1))},[c,f]);const g=L.useMemo(()=>Object.values(s).filter(S=>S.show?S.show():!0).sort((S,E)=>(S.order??1/0)-(E.order??1/0)),[s]),v=L.useMemo(()=>g.filter(S=>S.renderer),[g]),w=L.useMemo(()=>g.filter(S=>S.triggerRenderer),[g]),_=L.useCallback(async()=>{var A;const E=(((A=a.current)==null?void 0:A.getValue())??"").trim();if(!(!E&&h.length===0)&&!(u||i)){o(!0);try{let k={},D={};for(const H of g){if(H.getParameters){const ee=await H.getParameters();ee&&(k={...k,...ee})}if(H.getMetadata){const ee=await H.getMetadata();ee&&(D={...D,...ee})}}h.length>0&&(D.attachedFiles=[...h]);let O={id:jo(),content:E,parameters:k,metadata:D};Ei.emit("prompt:submitted",{turnData:O});const N=await y2("middleware:prompt:turnFinalize",{turnData:O});if(N===!1){console.log("Prompt submission cancelled by middleware."),o(!1);return}const z=N&&typeof N=="object"?N.turnData:O;await t(z),m(),g.forEach(H=>{H.clearOnSubmit&&H.clearOnSubmit()}),f(!0)}catch(k){console.error("Error during prompt submission:",k),ct.error(`Failed to send message: ${k instanceof Error?k.message:String(k)}`)}finally{o(!1)}}},[u,i,g,t,h,m,f]);return y.jsxs("div",{className:Ht("p-4 space-y-3",n),children:[v.length>0&&y.jsx(D3,{controls:v,area:"panel",className:"flex flex-wrap gap-2 items-start mb-2"}),y.jsx(e,{ref:a,onSubmit:_,disabled:u||i,placeholder:r}),y.jsxs("div",{className:"flex items-center justify-between gap-2 mt-2",children:[y.jsx(D3,{controls:w,area:"trigger",className:"flex items-center gap-1 flex-shrink-0"}),y.jsx("div",{className:"flex-grow"}),y.jsx(Lt,{type:"button",size:"icon",onClick:_,disabled:u||i||(((x=a.current)==null?void 0:x.getValue())??"").trim().length===0&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(K7,{className:"h-4 w-4"})})]})]})};function zt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function IW(e,t){const n=L.createContext(t),r=i=>{const{children:o,...s}=i,u=L.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:u,children:o})};r.displayName=e+"Provider";function a(i){const o=L.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Ri(e,t=[]){let n=[];function r(i,o){const s=L.createContext(o),u=n.length;n=[...n,o];const c=h=>{var x;const{scope:m,children:g,...v}=h,w=((x=m==null?void 0:m[e])==null?void 0:x[u])||s,_=L.useMemo(()=>v,Object.values(v));return y.jsx(w.Provider,{value:_,children:g})};c.displayName=i+"Provider";function f(h,m){var w;const g=((w=m==null?void 0:m[e])==null?void 0:w[u])||s,v=L.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const a=()=>{const i=n.map(o=>L.createContext(o));return function(s){const u=(s==null?void 0:s[e])||i;return L.useMemo(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return a.scopeName=e,[r,OW(a,...t)]}function OW(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...s,...h}},{});return L.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var jW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],an=jW.reduce((e,t)=>{const n=Nu(`Primitive.${t}`),r=L.forwardRef((a,i)=>{const{asChild:o,...s}=a,u=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function zj(e,t){e&&u0.flushSync(()=>e.dispatchEvent(t))}function Ea(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function DW(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e);L.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var MW="DismissableLayer",b2="dismissableLayer.update",PW="dismissableLayer.pointerDownOutside",FW="dismissableLayer.focusOutside",NR,Uj=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hh=L.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...u}=e,c=L.useContext(Uj),[f,h]=L.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=L.useState({}),v=xn(t,O=>h(O)),w=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(_),S=f?w.indexOf(f):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,A=S>=x,k=BW(O=>{const N=O.target,z=[...c.branches].some(H=>H.contains(N));!A||z||(a==null||a(O),o==null||o(O),O.defaultPrevented||s==null||s())},m),D=zW(O=>{const N=O.target;[...c.branches].some(H=>H.contains(N))||(i==null||i(O),o==null||o(O),O.defaultPrevented||s==null||s())},m);return DW(O=>{S===c.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&s&&(O.preventDefault(),s()))},m),L.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(NR=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),IR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=NR)}},[f,m,n,c]),L.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),IR())},[f,c]),L.useEffect(()=>{const O=()=>g({});return document.addEventListener(b2,O),()=>document.removeEventListener(b2,O)},[]),y.jsx(an.div,{...u,ref:v,style:{pointerEvents:E?A?"auto":"none":void 0,...e.style},onFocusCapture:zt(e.onFocusCapture,D.onFocusCapture),onBlurCapture:zt(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:zt(e.onPointerDownCapture,k.onPointerDownCapture)})});hh.displayName=MW;var LW="DismissableLayerBranch",$W=L.forwardRef((e,t)=>{const n=L.useContext(Uj),r=L.useRef(null),a=xn(t,r);return L.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(an.div,{...e,ref:a})});$W.displayName=LW;function BW(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e),r=L.useRef(!1),a=L.useRef(()=>{});return L.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let u=function(){qj(PW,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function zW(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e),r=L.useRef(!1);return L.useEffect(()=>{const a=i=>{i.target&&!r.current&&qj(FW,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function IR(){const e=new CustomEvent(b2);document.dispatchEvent(e)}function qj(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?zj(a,i):a.dispatchEvent(i)}var Fa=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},UW=V4[" useId ".trim().toString()]||(()=>{}),qW=0;function Cs(e){const[t,n]=L.useState(UW());return Fa(()=>{n(r=>r??String(qW++))},[e]),t?`radix-${t}`:""}const HW=["top","right","bottom","left"],$u=Math.min,qi=Math.max,Ib=Math.round,Ey=Math.floor,As=e=>({x:e,y:e}),VW={left:"right",right:"left",bottom:"top",top:"bottom"},GW={start:"end",end:"start"};function v2(e,t,n){return qi(e,$u(t,n))}function Al(e,t){return typeof e=="function"?e(t):e}function Tl(e){return e.split("-")[0]}function ph(e){return e.split("-")[1]}function AE(e){return e==="x"?"y":"x"}function TE(e){return e==="y"?"height":"width"}function Bu(e){return["top","bottom"].includes(Tl(e))?"y":"x"}function RE(e){return AE(Bu(e))}function WW(e,t,n){n===void 0&&(n=!1);const r=ph(e),a=RE(e),i=TE(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Ob(o)),[o,Ob(o)]}function KW(e){const t=Ob(e);return[w2(e),t,w2(t)]}function w2(e){return e.replace(/start|end/g,t=>GW[t])}function ZW(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function YW(e,t,n,r){const a=ph(e);let i=ZW(Tl(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(w2)))),i}function Ob(e){return e.replace(/left|right|bottom|top/g,t=>VW[t])}function XW(e){return{top:0,right:0,bottom:0,left:0,...e}}function Hj(e){return typeof e!="number"?XW(e):{top:e,right:e,bottom:e,left:e}}function jb(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function OR(e,t,n){let{reference:r,floating:a}=e;const i=Bu(t),o=RE(t),s=TE(o),u=Tl(t),c=i==="y",f=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[s]/2-a[s]/2;let g;switch(u){case"top":g={x:f,y:r.y-a.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(ph(t)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const JW=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=OR(c,r,u),m=r,g={},v=0;for(let w=0;w<s.length;w++){const{name:_,fn:x}=s[w],{x:S,y:E,data:A,reset:k}=await x({x:f,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});f=S??f,h=E??h,g={...g,[_]:{...g[_],...A}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:f,y:h}=OR(c,m,u)),w=-1)}return{x:f,y:h,placement:m,strategy:a,middlewareData:g}};async function vm(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Al(t,e),v=Hj(g),_=s[m?h==="floating"?"reference":"floating":h],x=jb(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:u})),S=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),A=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=jb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:u}):S);return{top:(x.top-k.top+v.top)/A.y,bottom:(k.bottom-x.bottom+v.bottom)/A.y,left:(x.left-k.left+v.left)/A.x,right:(k.right-x.right+v.right)/A.x}}const QW=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:u}=t,{element:c,padding:f=0}=Al(e,t)||{};if(c==null)return{};const h=Hj(f),m={x:n,y:r},g=RE(a),v=TE(g),w=await o.getDimensions(c),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",E=_?"clientHeight":"clientWidth",A=i.reference[v]+i.reference[g]-m[g]-i.floating[v],k=m[g]-i.reference[g],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let O=D?D[E]:0;(!O||!await(o.isElement==null?void 0:o.isElement(D)))&&(O=s.floating[E]||i.floating[v]);const N=A/2-k/2,z=O/2-w[v]/2-1,H=$u(h[x],z),ee=$u(h[S],z),P=H,Z=O-w[v]-ee,V=O/2-w[v]/2+N,fe=v2(P,V,Z),ue=!u.arrow&&ph(a)!=null&&V!==fe&&i.reference[v]/2-(V<P?H:ee)-w[v]/2<0,Y=ue?V<P?V-P:V-Z:0;return{[g]:m[g]+Y,data:{[g]:fe,centerOffset:V-fe-Y,...ue&&{alignmentOffset:Y}},reset:ue}}}),eK=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:u,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,..._}=Al(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Tl(a),S=Bu(s),E=Tl(s)===s,A=await(u.isRTL==null?void 0:u.isRTL(c.floating)),k=m||(E||!w?[Ob(s)]:KW(s)),D=v!=="none";!m&&D&&k.push(...YW(s,w,v,A));const O=[s,...k],N=await vm(t,_),z=[];let H=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&z.push(N[x]),h){const V=WW(a,o,A);z.push(N[V[0]],N[V[1]])}if(H=[...H,{placement:a,overflows:z}],!z.every(V=>V<=0)){var ee,P;const V=(((ee=i.flip)==null?void 0:ee.index)||0)+1,fe=O[V];if(fe)return{data:{index:V,overflows:H},reset:{placement:fe}};let ue=(P=H.filter(Y=>Y.overflows[0]<=0).sort((Y,X)=>Y.overflows[1]-X.overflows[1])[0])==null?void 0:P.placement;if(!ue)switch(g){case"bestFit":{var Z;const Y=(Z=H.filter(X=>{if(D){const ae=Bu(X.placement);return ae===S||ae==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ae=>ae>0).reduce((ae,G)=>ae+G,0)]).sort((X,ae)=>X[1]-ae[1])[0])==null?void 0:Z[0];Y&&(ue=Y);break}case"initialPlacement":ue=s;break}if(a!==ue)return{reset:{placement:ue}}}return{}}}};function jR(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function DR(e){return HW.some(t=>e[t]>=0)}const tK=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Al(e,t);switch(r){case"referenceHidden":{const i=await vm(t,{...a,elementContext:"reference"}),o=jR(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:DR(o)}}}case"escaped":{const i=await vm(t,{...a,altBoundary:!0}),o=jR(i,n.floating);return{data:{escapedOffsets:o,escaped:DR(o)}}}default:return{}}}}};async function nK(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Tl(n),s=ph(n),u=Bu(n)==="y",c=["left","top"].includes(o)?-1:1,f=i&&u?-1:1,h=Al(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof v=="number"&&(g=s==="end"?v*-1:v),u?{x:g*f,y:m*c}:{x:m*c,y:g*f}}const rK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,u=await nK(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:o}}}}},aK=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...u}=Al(e,t),c={x:n,y:r},f=await vm(t,u),h=Bu(Tl(a)),m=AE(h);let g=c[m],v=c[h];if(i){const _=m==="y"?"top":"left",x=m==="y"?"bottom":"right",S=g+f[_],E=g-f[x];g=v2(S,g,E)}if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=v+f[_],E=v-f[x];v=v2(S,v,E)}const w=s.fn({...t,[m]:g,[h]:v});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:i,[h]:o}}}}}},iK=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:u=!0,crossAxis:c=!0}=Al(e,t),f={x:n,y:r},h=Bu(a),m=AE(h);let g=f[m],v=f[h];const w=Al(s,t),_=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(u){const E=m==="y"?"height":"width",A=i.reference[m]-i.floating[E]+_.mainAxis,k=i.reference[m]+i.reference[E]-_.mainAxis;g<A?g=A:g>k&&(g=k)}if(c){var x,S;const E=m==="y"?"width":"height",A=["top","left"].includes(Tl(a)),k=i.reference[h]-i.floating[E]+(A&&((x=o.offset)==null?void 0:x[h])||0)+(A?0:_.crossAxis),D=i.reference[h]+i.reference[E]+(A?0:((S=o.offset)==null?void 0:S[h])||0)-(A?_.crossAxis:0);v<k?v=k:v>D&&(v=D)}return{[m]:g,[h]:v}}}},oK=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:u=()=>{},...c}=Al(e,t),f=await vm(t,c),h=Tl(a),m=ph(a),g=Bu(a)==="y",{width:v,height:w}=i.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=m===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,_=m==="end"?"top":"bottom");const S=w-f.top-f.bottom,E=v-f.left-f.right,A=$u(w-f[_],S),k=$u(v-f[x],E),D=!t.middlewareData.shift;let O=A,N=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(O=S),D&&!m){const H=qi(f.left,0),ee=qi(f.right,0),P=qi(f.top,0),Z=qi(f.bottom,0);g?N=v-2*(H!==0||ee!==0?H+ee:qi(f.left,f.right)):O=w-2*(P!==0||Z!==0?P+Z:qi(f.top,f.bottom))}await u({...t,availableWidth:N,availableHeight:O});const z=await o.getDimensions(s.floating);return v!==z.width||w!==z.height?{reset:{rects:!0}}:{}}}};function Nv(){return typeof window<"u"}function mh(e){return Vj(e)?(e.nodeName||"").toLowerCase():"#document"}function Vi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ps(e){var t;return(t=(Vj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Vj(e){return Nv()?e instanceof Node||e instanceof Vi(e).Node:!1}function Uo(e){return Nv()?e instanceof Element||e instanceof Vi(e).Element:!1}function Is(e){return Nv()?e instanceof HTMLElement||e instanceof Vi(e).HTMLElement:!1}function MR(e){return!Nv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vi(e).ShadowRoot}function c0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=qo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function sK(e){return["table","td","th"].includes(mh(e))}function Iv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function NE(e){const t=IE(),n=Uo(e)?qo(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function lK(e){let t=zu(e);for(;Is(t)&&!Gf(t);){if(NE(t))return t;if(Iv(t))return null;t=zu(t)}return null}function IE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gf(e){return["html","body","#document"].includes(mh(e))}function qo(e){return Vi(e).getComputedStyle(e)}function Ov(e){return Uo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zu(e){if(mh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||MR(e)&&e.host||Ps(e);return MR(t)?t.host:t}function Gj(e){const t=zu(e);return Gf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Is(t)&&c0(t)?t:Gj(t)}function wm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=Gj(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Vi(a);if(i){const s=_2(o);return t.concat(o,o.visualViewport||[],c0(a)?a:[],s&&n?wm(s):[])}return t.concat(a,wm(a,[],n))}function _2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Wj(e){const t=qo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Is(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Ib(n)!==i||Ib(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function OE(e){return Uo(e)?e:e.contextElement}function jf(e){const t=OE(e);if(!Is(t))return As(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=Wj(t);let o=(i?Ib(n.width):n.width)/r,s=(i?Ib(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const uK=As(0);function Kj(e){const t=Vi(e);return!IE()||!t.visualViewport?uK:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cK(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vi(e)?!1:t}function Qc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=OE(e);let o=As(1);t&&(r?Uo(r)&&(o=jf(r)):o=jf(e));const s=cK(i,n,r)?Kj(i):As(0);let u=(a.left+s.x)/o.x,c=(a.top+s.y)/o.y,f=a.width/o.x,h=a.height/o.y;if(i){const m=Vi(i),g=r&&Uo(r)?Vi(r):r;let v=m,w=_2(v);for(;w&&r&&g!==v;){const _=jf(w),x=w.getBoundingClientRect(),S=qo(w),E=x.left+(w.clientLeft+parseFloat(S.paddingLeft))*_.x,A=x.top+(w.clientTop+parseFloat(S.paddingTop))*_.y;u*=_.x,c*=_.y,f*=_.x,h*=_.y,u+=E,c+=A,v=Vi(w),w=_2(v)}}return jb({width:f,height:h,x:u,y:c})}function jE(e,t){const n=Ov(e).scrollLeft;return t?t.left+n:Qc(Ps(e)).left+n}function Zj(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:jE(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function dK(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Ps(r),s=t?Iv(t.floating):!1;if(r===o||s&&i)return n;let u={scrollLeft:0,scrollTop:0},c=As(1);const f=As(0),h=Is(r);if((h||!h&&!i)&&((mh(r)!=="body"||c0(o))&&(u=Ov(r)),Is(r))){const g=Qc(r);c=jf(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const m=o&&!h&&!i?Zj(o,u,!0):As(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+f.x+m.x,y:n.y*c.y-u.scrollTop*c.y+f.y+m.y}}function fK(e){return Array.from(e.getClientRects())}function hK(e){const t=Ps(e),n=Ov(e),r=e.ownerDocument.body,a=qi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=qi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+jE(e);const s=-n.scrollTop;return qo(r).direction==="rtl"&&(o+=qi(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function pK(e,t){const n=Vi(e),r=Ps(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,u=0;if(a){i=a.width,o=a.height;const c=IE();(!c||c&&t==="fixed")&&(s=a.offsetLeft,u=a.offsetTop)}return{width:i,height:o,x:s,y:u}}function mK(e,t){const n=Qc(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Is(e)?jf(e):As(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,u=a*i.x,c=r*i.y;return{width:o,height:s,x:u,y:c}}function PR(e,t,n){let r;if(t==="viewport")r=pK(e,n);else if(t==="document")r=hK(Ps(e));else if(Uo(t))r=mK(t,n);else{const a=Kj(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return jb(r)}function Yj(e,t){const n=zu(e);return n===t||!Uo(n)||Gf(n)?!1:qo(n).position==="fixed"||Yj(n,t)}function gK(e,t){const n=t.get(e);if(n)return n;let r=wm(e,[],!1).filter(s=>Uo(s)&&mh(s)!=="body"),a=null;const i=qo(e).position==="fixed";let o=i?zu(e):e;for(;Uo(o)&&!Gf(o);){const s=qo(o),u=NE(o);!u&&s.position==="fixed"&&(a=null),(i?!u&&!a:!u&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||c0(o)&&!u&&Yj(e,o))?r=r.filter(f=>f!==o):a=s,o=zu(o)}return t.set(e,r),r}function yK(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Iv(t)?[]:gK(t,this._c):[].concat(n),r],s=o[0],u=o.reduce((c,f)=>{const h=PR(t,f,a);return c.top=qi(h.top,c.top),c.right=$u(h.right,c.right),c.bottom=$u(h.bottom,c.bottom),c.left=qi(h.left,c.left),c},PR(t,s,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function bK(e){const{width:t,height:n}=Wj(e);return{width:t,height:n}}function vK(e,t,n){const r=Is(t),a=Ps(t),i=n==="fixed",o=Qc(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=As(0);if(r||!r&&!i)if((mh(t)!=="body"||c0(a))&&(s=Ov(t)),r){const m=Qc(t,!0,i,t);u.x=m.x+t.clientLeft,u.y=m.y+t.clientTop}else a&&(u.x=jE(a));const c=a&&!r&&!i?Zj(a,s):As(0),f=o.left+s.scrollLeft-u.x-c.x,h=o.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:o.width,height:o.height}}function X_(e){return qo(e).position==="static"}function FR(e,t){if(!Is(e)||qo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ps(e)===n&&(n=n.ownerDocument.body),n}function Xj(e,t){const n=Vi(e);if(Iv(e))return n;if(!Is(e)){let a=zu(e);for(;a&&!Gf(a);){if(Uo(a)&&!X_(a))return a;a=zu(a)}return n}let r=FR(e,t);for(;r&&sK(r)&&X_(r);)r=FR(r,t);return r&&Gf(r)&&X_(r)&&!NE(r)?n:r||lK(e)||n}const wK=async function(e){const t=this.getOffsetParent||Xj,n=this.getDimensions,r=await n(e.floating);return{reference:vK(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _K(e){return qo(e).direction==="rtl"}const xK={convertOffsetParentRelativeRectToViewportRelativeRect:dK,getDocumentElement:Ps,getClippingRect:yK,getOffsetParent:Xj,getElementRects:wK,getClientRects:fK,getDimensions:bK,getScale:jf,isElement:Uo,isRTL:_K};function Jj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function SK(e,t){let n=null,r;const a=Ps(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),i();const c=e.getBoundingClientRect(),{left:f,top:h,width:m,height:g}=c;if(s||t(),!m||!g)return;const v=Ey(h),w=Ey(a.clientWidth-(f+m)),_=Ey(a.clientHeight-(h+g)),x=Ey(f),E={rootMargin:-v+"px "+-w+"px "+-_+"px "+-x+"px",threshold:qi(0,$u(1,u))||1};let A=!0;function k(D){const O=D[0].intersectionRatio;if(O!==u){if(!A)return o();O?o(!1,O):r=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!Jj(c,e.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return o(!0),i}function EK(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=OE(e),f=a||i?[...c?wm(c):[],...wm(t)]:[];f.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&s?SK(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!u&&g.observe(c),g.observe(t));let v,w=u?Qc(e):null;u&&_();function _(){const x=Qc(e);w&&!Jj(w,x)&&n(),w=x,v=requestAnimationFrame(_)}return n(),()=>{var x;f.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,u&&cancelAnimationFrame(v)}}const kK=rK,CK=aK,AK=eK,TK=oK,RK=tK,LR=QW,NK=iK,IK=(e,t,n)=>{const r=new Map,a={platform:xK,...n},i={...a.platform,_c:r};return JW(e,t,{...a,platform:i})};var Yy=typeof document<"u"?L.useLayoutEffect:L.useEffect;function Db(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Db(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Db(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Qj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $R(e,t){const n=Qj(e);return Math.round(t*n)/n}function J_(e){const t=L.useRef(e);return Yy(()=>{t.current=e}),t}function OK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:u,open:c}=e,[f,h]=L.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=L.useState(r);Db(m,r)||g(r);const[v,w]=L.useState(null),[_,x]=L.useState(null),S=L.useCallback(X=>{X!==D.current&&(D.current=X,w(X))},[]),E=L.useCallback(X=>{X!==O.current&&(O.current=X,x(X))},[]),A=i||v,k=o||_,D=L.useRef(null),O=L.useRef(null),N=L.useRef(f),z=u!=null,H=J_(u),ee=J_(a),P=J_(c),Z=L.useCallback(()=>{if(!D.current||!O.current)return;const X={placement:t,strategy:n,middleware:m};ee.current&&(X.platform=ee.current),IK(D.current,O.current,X).then(ae=>{const G={...ae,isPositioned:P.current!==!1};V.current&&!Db(N.current,G)&&(N.current=G,u0.flushSync(()=>{h(G)}))})},[m,t,n,ee,P]);Yy(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[c]);const V=L.useRef(!1);Yy(()=>(V.current=!0,()=>{V.current=!1}),[]),Yy(()=>{if(A&&(D.current=A),k&&(O.current=k),A&&k){if(H.current)return H.current(A,k,Z);Z()}},[A,k,Z,H,z]);const fe=L.useMemo(()=>({reference:D,floating:O,setReference:S,setFloating:E}),[S,E]),ue=L.useMemo(()=>({reference:A,floating:k}),[A,k]),Y=L.useMemo(()=>{const X={position:n,left:0,top:0};if(!ue.floating)return X;const ae=$R(ue.floating,f.x),G=$R(ue.floating,f.y);return s?{...X,transform:"translate("+ae+"px, "+G+"px)",...Qj(ue.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ae,top:G}},[n,s,ue.floating,f.x,f.y]);return L.useMemo(()=>({...f,update:Z,refs:fe,elements:ue,floatingStyles:Y}),[f,Z,fe,ue,Y])}const jK=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?LR({element:r.current,padding:a}).fn(n):{}:r?LR({element:r,padding:a}).fn(n):{}}}},DK=(e,t)=>({...kK(e),options:[e,t]}),MK=(e,t)=>({...CK(e),options:[e,t]}),PK=(e,t)=>({...NK(e),options:[e,t]}),FK=(e,t)=>({...AK(e),options:[e,t]}),LK=(e,t)=>({...TK(e),options:[e,t]}),$K=(e,t)=>({...RK(e),options:[e,t]}),BK=(e,t)=>({...jK(e),options:[e,t]});var zK="Arrow",eD=L.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(an.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});eD.displayName=zK;var UK=eD;function jv(e){const[t,n]=L.useState(void 0);return Fa(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const u=i.borderBoxSize,c=Array.isArray(u)?u[0]:u;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var DE="Popper",[tD,Yu]=Ri(DE),[qK,nD]=tD(DE),rD=e=>{const{__scopePopper:t,children:n}=e,[r,a]=L.useState(null);return y.jsx(qK,{scope:t,anchor:r,onAnchorChange:a,children:n})};rD.displayName=DE;var aD="PopperAnchor",iD=L.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=nD(aD,n),o=L.useRef(null),s=xn(t,o);return L.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(an.div,{...a,ref:s})});iD.displayName=aD;var ME="PopperContent",[HK,VK]=tD(ME),oD=L.forwardRef((e,t)=>{var Fe,Ie,Te,Ue,Ve,Ee;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...w}=e,_=nD(ME,n),[x,S]=L.useState(null),E=xn(t,Ae=>S(Ae)),[A,k]=L.useState(null),D=jv(A),O=(D==null?void 0:D.width)??0,N=(D==null?void 0:D.height)??0,z=r+(i!=="center"?"-"+i:""),H=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},ee=Array.isArray(c)?c:[c],P=ee.length>0,Z={padding:H,boundary:ee.filter(WK),altBoundary:P},{refs:V,floatingStyles:fe,placement:ue,isPositioned:Y,middlewareData:X}=OK({strategy:"fixed",placement:z,whileElementsMounted:(...Ae)=>EK(...Ae,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[DK({mainAxis:a+N,alignmentAxis:o}),u&&MK({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?PK():void 0,...Z}),u&&FK({...Z}),LK({...Z,apply:({elements:Ae,rects:B,availableWidth:Ce,availableHeight:Re})=>{const{width:se,height:ie}=B.reference,J=Ae.floating.style;J.setProperty("--radix-popper-available-width",`${Ce}px`),J.setProperty("--radix-popper-available-height",`${Re}px`),J.setProperty("--radix-popper-anchor-width",`${se}px`),J.setProperty("--radix-popper-anchor-height",`${ie}px`)}}),A&&BK({element:A,padding:s}),KK({arrowWidth:O,arrowHeight:N}),m&&$K({strategy:"referenceHidden",...Z})]}),[ae,G]=uD(ue),Q=Ea(v);Fa(()=>{Y&&(Q==null||Q())},[Y,Q]);const ne=(Fe=X.arrow)==null?void 0:Fe.x,de=(Ie=X.arrow)==null?void 0:Ie.y,_e=((Te=X.arrow)==null?void 0:Te.centerOffset)!==0,[ve,Pe]=L.useState();return Fa(()=>{x&&Pe(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...fe,transform:Y?fe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Ue=X.transformOrigin)==null?void 0:Ue.x,(Ve=X.transformOrigin)==null?void 0:Ve.y].join(" "),...((Ee=X.hide)==null?void 0:Ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(HK,{scope:n,placedSide:ae,onArrowChange:k,arrowX:ne,arrowY:de,shouldHideArrow:_e,children:y.jsx(an.div,{"data-side":ae,"data-align":G,...w,ref:E,style:{...w.style,animation:Y?void 0:"none"}})})})});oD.displayName=ME;var sD="PopperArrow",GK={top:"bottom",right:"left",bottom:"top",left:"right"},lD=L.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=VK(sD,r),o=GK[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(UK,{...a,ref:n,style:{...a.style,display:"block"}})})});lD.displayName=sD;function WK(e){return e!==null}var KK=e=>({name:"transformOrigin",options:e,fn(t){var _,x,S;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[c,f]=uD(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((x=a.arrow)==null?void 0:x.x)??0)+s/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+u/2;let v="",w="";return c==="bottom"?(v=o?h:`${m}px`,w=`${-u}px`):c==="top"?(v=o?h:`${m}px`,w=`${r.floating.height+u}px`):c==="right"?(v=`${-u}px`,w=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+u}px`,w=o?h:`${g}px`),{data:{x:v,y:w}}}});function uD(e){const[t,n="center"]=e.split("-");return[t,n]}var Dv=rD,d0=iD,Mv=oD,Pv=lD,ZK="Portal",gh=L.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=L.useState(!1);Fa(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?Bj.createPortal(y.jsx(an.div,{...r,ref:t}),o):null});gh.displayName=ZK;function YK(e,t){return L.useReducer((n,r)=>t[n][r]??n,e)}var Na=e=>{const{present:t,children:n}=e,r=XK(t),a=typeof n=="function"?n({present:r.isPresent}):L.Children.only(n),i=xn(r.ref,JK(a));return typeof n=="function"||r.isPresent?L.cloneElement(a,{ref:i}):null};Na.displayName="Presence";function XK(e){const[t,n]=L.useState(),r=L.useRef(null),a=L.useRef(e),i=L.useRef("none"),o=e?"mounted":"unmounted",[s,u]=YK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const c=ky(r.current);i.current=s==="mounted"?c:"none"},[s]),Fa(()=>{const c=r.current,f=a.current;if(f!==e){const m=i.current,g=ky(c);e?u("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),Fa(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=g=>{const w=ky(r.current).includes(g.animationName);if(g.target===t&&w&&(u("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},m=g=>{g.target===t&&(i.current=ky(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:L.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function ky(e){return(e==null?void 0:e.animationName)||"none"}function JK(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var QK=V4[" useInsertionEffect ".trim().toString()]||Fa;function Os({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=eZ({defaultProp:t,onChange:n}),s=e!==void 0,u=s?e:a;{const f=L.useRef(e!==void 0);L.useEffect(()=>{const h=f.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=s},[s,r])}const c=L.useCallback(f=>{var h;if(s){const m=tZ(f)?f(e):f;m!==e&&((h=o.current)==null||h.call(o,m))}else i(f)},[s,e,i,o]);return[u,c]}function eZ({defaultProp:e,onChange:t}){const[n,r]=L.useState(e),a=L.useRef(n),i=L.useRef(t);return QK(()=>{i.current=t},[t]),L.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function tZ(e){return typeof e=="function"}var cD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),nZ="VisuallyHidden",dD=L.forwardRef((e,t)=>y.jsx(an.span,{...e,ref:t,style:{...cD,...e.style}}));dD.displayName=nZ;var rZ=dD,[Fv,bge]=Ri("Tooltip",[Yu]),Lv=Yu(),fD="TooltipProvider",aZ=700,x2="tooltip.open",[iZ,PE]=Fv(fD),hD=e=>{const{__scopeTooltip:t,delayDuration:n=aZ,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=L.useRef(!0),s=L.useRef(!1),u=L.useRef(0);return L.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),y.jsx(iZ,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:L.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:L.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:L.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:i})};hD.displayName=fD;var _m="Tooltip",[oZ,f0]=Fv(_m),pD=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,u=PE(_m,e.__scopeTooltip),c=Lv(t),[f,h]=L.useState(null),m=Cs(),g=L.useRef(0),v=o??u.disableHoverableContent,w=s??u.delayDuration,_=L.useRef(!1),[x,S]=Os({prop:r,defaultProp:a??!1,onChange:O=>{O?(u.onOpen(),document.dispatchEvent(new CustomEvent(x2))):u.onClose(),i==null||i(O)},caller:_m}),E=L.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),A=L.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,S(!0)},[S]),k=L.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),D=L.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,S(!0),g.current=0},w)},[w,S]);return L.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(Dv,{...c,children:y.jsx(oZ,{scope:t,contentId:m,open:x,stateAttribute:E,trigger:f,onTriggerChange:h,onTriggerEnter:L.useCallback(()=>{u.isOpenDelayedRef.current?D():A()},[u.isOpenDelayedRef,D,A]),onTriggerLeave:L.useCallback(()=>{v?k():(window.clearTimeout(g.current),g.current=0)},[k,v]),onOpen:A,onClose:k,disableHoverableContent:v,children:n})})};pD.displayName=_m;var S2="TooltipTrigger",mD=L.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=f0(S2,n),i=PE(S2,n),o=Lv(n),s=L.useRef(null),u=xn(t,s,a.onTriggerChange),c=L.useRef(!1),f=L.useRef(!1),h=L.useCallback(()=>c.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(d0,{asChild:!0,...o,children:y.jsx(an.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:u,onPointerMove:zt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:zt(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:zt(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:zt(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:zt(e.onBlur,a.onClose),onClick:zt(e.onClick,a.onClose)})})});mD.displayName=S2;var FE="TooltipPortal",[sZ,lZ]=Fv(FE,{forceMount:void 0}),gD=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=f0(FE,t);return y.jsx(sZ,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(gh,{asChild:!0,container:a,children:r})})})};gD.displayName=FE;var Wf="TooltipContent",yD=L.forwardRef((e,t)=>{const n=lZ(Wf,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=f0(Wf,e.__scopeTooltip);return y.jsx(Na,{present:r||o.open,children:o.disableHoverableContent?y.jsx(bD,{side:a,...i,ref:t}):y.jsx(uZ,{side:a,...i,ref:t})})}),uZ=L.forwardRef((e,t)=>{const n=f0(Wf,e.__scopeTooltip),r=PE(Wf,e.__scopeTooltip),a=L.useRef(null),i=xn(t,a),[o,s]=L.useState(null),{trigger:u,onClose:c}=n,f=a.current,{onPointerInTransitChange:h}=r,m=L.useCallback(()=>{s(null),h(!1)},[h]),g=L.useCallback((v,w)=>{const _=v.currentTarget,x={x:v.clientX,y:v.clientY},S=hZ(x,_.getBoundingClientRect()),E=pZ(x,S),A=mZ(w.getBoundingClientRect()),k=yZ([...E,...A]);s(k),h(!0)},[h]);return L.useEffect(()=>()=>m(),[m]),L.useEffect(()=>{if(u&&f){const v=_=>g(_,f),w=_=>g(_,u);return u.addEventListener("pointerleave",v),f.addEventListener("pointerleave",w),()=>{u.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",w)}}},[u,f,g,m]),L.useEffect(()=>{if(o){const v=w=>{const _=w.target,x={x:w.clientX,y:w.clientY},S=(u==null?void 0:u.contains(_))||(f==null?void 0:f.contains(_)),E=!gZ(x,o);S?m():E&&(m(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,f,o,c,m]),y.jsx(bD,{...e,ref:i})}),[cZ,dZ]=Fv(_m,{isInside:!1}),fZ=V$("TooltipContent"),bD=L.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,u=f0(Wf,n),c=Lv(n),{onClose:f}=u;return L.useEffect(()=>(document.addEventListener(x2,f),()=>document.removeEventListener(x2,f)),[f]),L.useEffect(()=>{if(u.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(u.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[u.trigger,f]),y.jsx(hh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:y.jsxs(Mv,{"data-state":u.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(fZ,{children:r}),y.jsx(cZ,{scope:n,isInside:!0,children:y.jsx(rZ,{id:u.contentId,role:"tooltip",children:a||r})})]})})});yD.displayName=Wf;var vD="TooltipArrow",wD=L.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Lv(n);return dZ(vD,n).isInside?null:y.jsx(Pv,{...a,...r,ref:t})});wD.displayName=vD;function hZ(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function pZ(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function mZ(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function gZ(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function yZ(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),bZ(t)}function bZ(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var vZ=hD,wZ=pD,_Z=mD,xZ=gD,SZ=yD,EZ=wD;function jn({delayDuration:e=0,...t}){return y.jsx(vZ,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Tn({...e}){return y.jsx(jn,{children:y.jsx(wZ,{"data-slot":"tooltip",...e})})}function Rn({...e}){return y.jsx(_Z,{"data-slot":"tooltip-trigger",...e})}function Nn({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(xZ,{children:y.jsxs(SZ,{"data-slot":"tooltip-content",sideOffset:t,className:Ht("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx(EZ,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var Q_={exports:{}},BR;function kZ(){return BR||(BR=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof u?new u(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,A){A=A||{};var k,D;switch(s.util.type(E)){case"Object":if(D=s.util.objId(E),A[D])return A[D];k={},A[D]=k;for(var O in E)E.hasOwnProperty(O)&&(k[O]=S(E[O],A));return k;case"Array":return D=s.util.objId(E),A[D]?A[D]:(k=[],A[D]=k,E.forEach(function(N,z){k[z]=S(N,A)}),k);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var A in E)if(E[A].src==S)return E[A]}return null}},isActive:function(S,E,A){for(var k="no-"+E;S;){var D=S.classList;if(D.contains(E))return!0;if(D.contains(k))return!1;S=S.parentElement}return!!A}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(S,E){var A=s.util.clone(s.languages[S]);for(var k in E)A[k]=E[k];return A},insertBefore:function(S,E,A,k){k=k||s.languages;var D=k[S],O={};for(var N in D)if(D.hasOwnProperty(N)){if(N==E)for(var z in A)A.hasOwnProperty(z)&&(O[z]=A[z]);A.hasOwnProperty(N)||(O[N]=D[N])}var H=k[S];return k[S]=O,s.languages.DFS(s.languages,function(ee,P){P===H&&ee!=S&&(this[ee]=O)}),O},DFS:function S(E,A,k,D){D=D||{};var O=s.util.objId;for(var N in E)if(E.hasOwnProperty(N)){A.call(E,N,E[N],k||N);var z=E[N],H=s.util.type(z);H==="Object"&&!D[O(z)]?(D[O(z)]=!0,S(z,A,null,D)):H==="Array"&&!D[O(z)]&&(D[O(z)]=!0,S(z,A,N,D))}}},plugins:{},highlightAll:function(S,E){s.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,A){var k={callback:A,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),s.hooks.run("before-all-elements-highlight",k);for(var D=0,O;O=k.elements[D++];)s.highlightElement(O,E===!0,k.callback)},highlightElement:function(S,E,A){var k=s.util.getLanguage(S),D=s.languages[k];s.util.setLanguage(S,k);var O=S.parentElement;O&&O.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(O,k);var N=S.textContent,z={element:S,language:k,grammar:D,code:N};function H(P){z.highlightedCode=P,s.hooks.run("before-insert",z),z.element.innerHTML=z.highlightedCode,s.hooks.run("after-highlight",z),s.hooks.run("complete",z),A&&A.call(z.element)}if(s.hooks.run("before-sanity-check",z),O=z.element.parentElement,O&&O.nodeName.toLowerCase()==="pre"&&!O.hasAttribute("tabindex")&&O.setAttribute("tabindex","0"),!z.code){s.hooks.run("complete",z),A&&A.call(z.element);return}if(s.hooks.run("before-highlight",z),!z.grammar){H(s.util.encode(z.code));return}if(E&&r.Worker){var ee=new Worker(s.filename);ee.onmessage=function(P){H(P.data)},ee.postMessage(JSON.stringify({language:z.language,code:z.code,immediateClose:!0}))}else H(s.highlight(z.code,z.grammar,z.language))},highlight:function(S,E,A){var k={code:S,grammar:E,language:A};if(s.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=s.tokenize(k.code,k.grammar),s.hooks.run("after-tokenize",k),u.stringify(s.util.encode(k.tokens),k.language)},tokenize:function(S,E){var A=E.rest;if(A){for(var k in A)E[k]=A[k];delete E.rest}var D=new h;return m(D,D.head,S),f(S,D,E,D.head,0),v(D)},hooks:{all:{},add:function(S,E){var A=s.hooks.all;A[S]=A[S]||[],A[S].push(E)},run:function(S,E){var A=s.hooks.all[S];if(!(!A||!A.length))for(var k=0,D;D=A[k++];)D(E)}},Token:u};r.Prism=s;function u(S,E,A,k){this.type=S,this.content=E,this.alias=A,this.length=(k||"").length|0}u.stringify=function S(E,A){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(H){k+=S(H,A)}),k}var D={type:E.type,content:S(E.content,A),tag:"span",classes:["token",E.type],attributes:{},language:A},O=E.alias;O&&(Array.isArray(O)?Array.prototype.push.apply(D.classes,O):D.classes.push(O)),s.hooks.run("wrap",D);var N="";for(var z in D.attributes)N+=" "+z+'="'+(D.attributes[z]||"").replace(/"/g,"&quot;")+'"';return"<"+D.tag+' class="'+D.classes.join(" ")+'"'+N+">"+D.content+"</"+D.tag+">"};function c(S,E,A,k){S.lastIndex=E;var D=S.exec(A);if(D&&k&&D[1]){var O=D[1].length;D.index+=O,D[0]=D[0].slice(O)}return D}function f(S,E,A,k,D,O){for(var N in A)if(!(!A.hasOwnProperty(N)||!A[N])){var z=A[N];z=Array.isArray(z)?z:[z];for(var H=0;H<z.length;++H){if(O&&O.cause==N+","+H)return;var ee=z[H],P=ee.inside,Z=!!ee.lookbehind,V=!!ee.greedy,fe=ee.alias;if(V&&!ee.pattern.global){var ue=ee.pattern.toString().match(/[imsuy]*$/)[0];ee.pattern=RegExp(ee.pattern.source,ue+"g")}for(var Y=ee.pattern||ee,X=k.next,ae=D;X!==E.tail&&!(O&&ae>=O.reach);ae+=X.value.length,X=X.next){var G=X.value;if(E.length>S.length)return;if(!(G instanceof u)){var Q=1,ne;if(V){if(ne=c(Y,ae,S,Z),!ne||ne.index>=S.length)break;var Pe=ne.index,de=ne.index+ne[0].length,_e=ae;for(_e+=X.value.length;Pe>=_e;)X=X.next,_e+=X.value.length;if(_e-=X.value.length,ae=_e,X.value instanceof u)continue;for(var ve=X;ve!==E.tail&&(_e<de||typeof ve.value=="string");ve=ve.next)Q++,_e+=ve.value.length;Q--,G=S.slice(ae,_e),ne.index-=ae}else if(ne=c(Y,0,G,Z),!ne)continue;var Pe=ne.index,Fe=ne[0],Ie=G.slice(0,Pe),Te=G.slice(Pe+Fe.length),Ue=ae+G.length;O&&Ue>O.reach&&(O.reach=Ue);var Ve=X.prev;Ie&&(Ve=m(E,Ve,Ie),ae+=Ie.length),g(E,Ve,Q);var Ee=new u(N,P?s.tokenize(Fe,P):Fe,fe,Fe);if(X=m(E,Ve,Ee),Te&&m(E,X,Te),Q>1){var Ae={cause:N+","+H,reach:Ue};f(S,E,A,X.prev,ae,Ae),O&&Ae.reach>O.reach&&(O.reach=Ae.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function m(S,E,A){var k=E.next,D={value:A,prev:E,next:k};return E.next=D,k.prev=D,S.length++,D}function g(S,E,A){for(var k=E.next,D=0;D<A&&k!==S.tail;D++)k=k.next;E.next=k,k.prev=E,S.length-=D}function v(S){for(var E=[],A=S.head.next;A!==S.tail;)E.push(A.value),A=A.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),A=E.language,k=E.code,D=E.immediateClose;r.postMessage(s.highlight(k,s.languages[A],A)),D&&r.close()},!1)),s;var w=s.util.currentScript();w&&(s.filename=w.src,w.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var x=document.readyState;x==="loading"||x==="interactive"&&w&&w.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof Uc<"u"&&(Uc.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(w,_){return" Error "+w+" while fetching file: "+_},i=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",c="loaded",f="failed",h="pre[data-src]:not(["+s+'="'+c+'"]):not(['+s+'="'+u+'"])';function m(w,_,x){var S=new XMLHttpRequest;S.open("GET",w,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?_(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function g(w){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(w||"");if(_){var x=Number(_[1]),S=_[2],E=_[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(w){w.selector+=", "+h}),n.hooks.add("before-sanity-check",function(w){var _=w.element;if(_.matches(h)){w.code="",_.setAttribute(s,u);var x=_.appendChild(document.createElement("CODE"));x.textContent=r;var S=_.getAttribute("data-src"),E=w.language;if(E==="none"){var A=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=o[A]||A}n.util.setLanguage(x,E),n.util.setLanguage(_,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),m(S,function(D){_.setAttribute(s,c);var O=g(_.getAttribute("data-range"));if(O){var N=D.split(/\r\n?|\n/g),z=O[0],H=O[1]==null?N.length:O[1];z<0&&(z+=N.length),z=Math.max(0,Math.min(z-1,N.length)),H<0&&(H+=N.length),H=Math.max(0,Math.min(H,N.length)),D=N.slice(z,H).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(z+1))}x.textContent=D,n.highlightElement(x)},function(D){_.setAttribute(s,f),x.textContent=D})}}),n.plugins.fileHighlight={highlight:function(_){for(var x=(_||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(Q_)),Q_.exports}var CZ=kZ();const AZ=Ja(CZ);var zR={},UR;function TZ(){return UR||(UR=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),zR}TZ();var qR={},HR;function RZ(){return HR||(HR=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),qR}RZ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(f){return f=f.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+f+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(f){["url","bold","italic","strike","code-snippet"].forEach(function(h){f!==h&&(e.languages.markdown[f].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(f){if(f.language!=="markdown"&&f.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var g=0,v=m.length;g<v;g++){var w=m[g];if(w.type!=="code"){h(w.content);continue}var _=w.content[1],x=w.content[3];if(_&&x&&_.type==="code-language"&&x.type==="code-block"&&typeof _.content=="string"){var S=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(f.tokens)}),e.hooks.add("wrap",function(f){if(f.type==="code-block"){for(var h="",m=0,g=f.classes.length;m<g;m++){var v=f.classes[m],w=/language-(.+)/.exec(v);if(w){h=w[1];break}}var _=e.languages[h];if(_)f.content=e.highlight(c(f.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);f.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(f){var h=f.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),u(v)}else{var w=s[g];return w||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,u){u=(u||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(c,u)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var VR={},GR;function NZ(){return GR||(GR=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),VR}NZ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const WR="prism-theme-link",ex="prism-default-light-theme-link",tx="prism-default-dark-theme-link",IZ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-material-light.min.css",OZ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-coldark-dark.min.css",KR=e=>e.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"),_D=({lang:e,code:t})=>{const[n,r]=L.useState(!1),[a,i]=L.useState(!1),o=L.useRef(null),{prismThemeUrl:s,theme:u}=qr(Hn(_=>({prismThemeUrl:_.prismThemeUrl,theme:_.theme}))),c=L.useMemo(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),f=u==="system"?c:u;L.useEffect(()=>{const _=(S,E)=>{const A=document.getElementById(E);if(A)A.href!==S&&(A.href=S);else{const k=document.createElement("link");k.id=E,k.rel="stylesheet",k.href=S,document.head.appendChild(k)}},x=S=>{const E=document.getElementById(S);E&&E.remove()};return s?(_(s,WR),x(ex),x(tx)):(x(WR),f==="dark"?(_(KR(OZ),tx),x(ex)):(_(KR(IZ),ex),x(tx))),()=>{}},[s,f]);const h=L.useCallback(()=>{if(o.current&&t)try{o.current.textContent=t,AZ.highlightElement(o.current)}catch(_){console.error("Prism highlight error:",_),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);L.useEffect(()=>{a||h()},[t,e,a,h]);const m=async()=>{try{await navigator.clipboard.writeText(t),r(!0),ct.success("Code copied to clipboard!"),setTimeout(()=>r(!1),1500)}catch(_){ct.error("Failed to copy code."),console.error("Clipboard copy failed:",_)}},g=()=>{const _=a;i(x=>!x),_&&setTimeout(h,0)},v=e?`language-${e}`:"language-plaintext",w=L.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container my-4",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("span",{className:"text-xs text-muted-foreground",children:e||"code"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:g,"aria-label":a?"Unfold code":"Fold code",children:y.jsx(l6,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:a?"Unfold":"Fold"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:m,"aria-label":"Copy code",children:n?y.jsx(id,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(GB,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Copy"})]})})]})]}),!a&&y.jsx("pre",{className:"code-block-content",children:y.jsx("code",{ref:o,className:v,children:t})}),a&&y.jsx("div",{className:"folded-content-preview p-4 pt-0",onClick:g,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:w})})]})};var ot;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(ot||(ot={}));const ZR={[ot.EPERM]:"Operation not permitted",[ot.ENOENT]:"No such file or directory",[ot.EINTR]:"Interrupted system call",[ot.EIO]:"Input/output error",[ot.ENXIO]:"No such device or address",[ot.EBADF]:"Bad file descriptor",[ot.EAGAIN]:"Resource temporarily unavailable",[ot.ENOMEM]:"Cannot allocate memory",[ot.EACCES]:"Permission denied",[ot.EFAULT]:"Bad address",[ot.ENOTBLK]:"Block device required",[ot.EBUSY]:"Resource busy or locked",[ot.EEXIST]:"File exists",[ot.EXDEV]:"Invalid cross-device link",[ot.ENODEV]:"No such device",[ot.ENOTDIR]:"File is not a directory",[ot.EISDIR]:"File is a directory",[ot.EINVAL]:"Invalid argument",[ot.ENFILE]:"Too many open files in system",[ot.EMFILE]:"Too many open files",[ot.ETXTBSY]:"Text file busy",[ot.EFBIG]:"File is too big",[ot.ENOSPC]:"No space left on disk",[ot.ESPIPE]:"Illegal seek",[ot.EROFS]:"Cannot modify a read-only file system",[ot.EMLINK]:"Too many links",[ot.EPIPE]:"Broken pipe",[ot.EDOM]:"Numerical argument out of domain",[ot.ERANGE]:"Numerical result out of range",[ot.EDEADLK]:"Resource deadlock would occur",[ot.ENAMETOOLONG]:"File name too long",[ot.ENOLCK]:"No locks available",[ot.ENOSYS]:"Function not implemented",[ot.ENOTEMPTY]:"Directory is not empty",[ot.ELOOP]:"Too many levels of symbolic links",[ot.ENOMSG]:"No message of desired type",[ot.EBADE]:"Invalid exchange",[ot.EBADR]:"Invalid request descriptor",[ot.EXFULL]:"Exchange full",[ot.ENOANO]:"No anode",[ot.EBADRQC]:"Invalid request code",[ot.ENOSTR]:"Device not a stream",[ot.ENODATA]:"No data available",[ot.ETIME]:"Timer expired",[ot.ENOSR]:"Out of streams resources",[ot.ENONET]:"Machine is not on the network",[ot.EREMOTE]:"Object is remote",[ot.ENOLINK]:"Link has been severed",[ot.ECOMM]:"Communication error on send",[ot.EPROTO]:"Protocol error",[ot.EBADMSG]:"Bad message",[ot.EOVERFLOW]:"Value too large for defined data type",[ot.EBADFD]:"File descriptor in bad state",[ot.ESTRPIPE]:"Streams pipe error",[ot.ENOTSOCK]:"Socket operation on non-socket",[ot.EDESTADDRREQ]:"Destination address required",[ot.EMSGSIZE]:"Message too long",[ot.EPROTOTYPE]:"Protocol wrong type for socket",[ot.ENOPROTOOPT]:"Protocol not available",[ot.EPROTONOSUPPORT]:"Protocol not supported",[ot.ESOCKTNOSUPPORT]:"Socket type not supported",[ot.ENOTSUP]:"Operation is not supported",[ot.ENETDOWN]:"Network is down",[ot.ENETUNREACH]:"Network is unreachable",[ot.ENETRESET]:"Network dropped connection on reset",[ot.ETIMEDOUT]:"Connection timed out",[ot.ECONNREFUSED]:"Connection refused",[ot.EHOSTDOWN]:"Host is down",[ot.EHOSTUNREACH]:"No route to host",[ot.EALREADY]:"Operation already in progress",[ot.EINPROGRESS]:"Operation now in progress",[ot.ESTALE]:"Stale file handle",[ot.EREMOTEIO]:"Remote I/O error",[ot.EDQUOT]:"Disk quota exceeded"};class ze extends Error{static fromJSON(t){const n=new ze(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new ze(ot[t],ZR[ot[t]],n,r)}constructor(t,n=ZR[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=ot[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var nx={exports:{}},YR;function jZ(){return YR||(YR=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function i(u,c,f,h,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,h||u,m),v=n?n+c:c;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],g]:u._events[v].push(g):(u._events[v]=g,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)t.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},s.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,v=new Array(g);m<g;m++)v[m]=h[m].fn;return v},s.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},s.prototype.emit=function(c,f,h,m,g,v){var w=n?n+c:c;if(!this._events[w])return!1;var _=this._events[w],x=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,h),!0;case 4:return _.fn.call(_.context,f,h,m),!0;case 5:return _.fn.call(_.context,f,h,m,g),!0;case 6:return _.fn.call(_.context,f,h,m,g,v),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var A=_.length,k;for(E=0;E<A;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),x){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,f);break;case 3:_[E].fn.call(_[E].context,f,h);break;case 4:_[E].fn.call(_[E].context,f,h,m);break;default:if(!S)for(k=1,S=new Array(x-1);k<x;k++)S[k-1]=arguments[k];_[E].fn.apply(_[E].context,S)}}return!0},s.prototype.on=function(c,f,h){return i(this,c,f,h,!1)},s.prototype.once=function(c,f,h){return i(this,c,f,h,!0)},s.prototype.removeListener=function(c,f,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===f&&(!m||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var w=0,_=[],x=v.length;w<x;w++)(v[w].fn!==f||m&&!v[w].once||h&&v[w].context!==h)&&_.push(v[w]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(nx)),nx.exports}var DZ=jZ();const LE=Ja(DZ);var B4;let MZ=class extends LE{constructor(n){super();Ua(this,B4,"List");Ua(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(B4=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function XR(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function ur(e){throw e}const JR=Intl.NumberFormat("en",{notation:"compact"});JR.format.bind(JR);function ld(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function PZ(e){try{return JSON.parse(e),!0}catch{return!1}}function E2(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function $E(e){return e.at(0).toUpperCase()+e.slice(1)}const FZ=new TextEncoder;function Bc(e){return FZ.encode(e)}const QR=new TextDecoder;function BE(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return QR.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),QR.decode(t)}function xm(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=xm(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function LZ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var $Z={};let BZ="process"in globalThis&&"env"in globalThis.process&&$Z.U_DEBUG=="true";function Sm(...e){BZ&&console.debug("[U]",...e)}const eN=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],zZ=[...eN,...eN.map(e=>$E(e)),"char"],zE=/^(u?int|float)(8|16|32|64|128)$/i;function xD(e){return e=="char"?"uint8":e.toLowerCase()}function UE(e){return zE.test(e.toString())}function k2(e){return e=="char"||zE.test(e.toString().toLowerCase())}function UZ(e){if(!k2(e))throw new TypeError("Not a valid primitive type: "+e)}const tN=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function SD(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function qZ(e){return e!=null&&typeof e=="object"&&"struct"in e}function $v(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function Lo(e){return typeof e=="function"&&Symbol.metadata in e&&qZ(e[Symbol.metadata])}function h0(e){return e!=null&&typeof e=="object"&&Lo(e.constructor)}function ED(e){if(!h0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function qE(e){return h0(e)||Lo(e)}function kD(e){if(!qE(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function HE(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Dr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=Dr(e[i]);return a}if(typeof e=="string")return UZ(e),+xD(e).match(zE)[2]/8;if(HE(e))return e[Symbol.size];kD(e);const t=Lo(e)?e:e.constructor;$v(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(Lo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(h0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Dr(i)):r+=Dr(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=Dr(qE(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function HZ(e,t){var i;kD(e);const n=Lo(e)?e:e.constructor;$v(n);const{struct:r}=n[Symbol.metadata];if(Lo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??ur(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=Dr(qE(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function VZ(e,t){return Math.ceil(e/t)*t}function ud(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:u,length:c}of SD(r)){if(!k2(u)&&!Lo(u))throw new TypeError("Not a valid type: "+u);if(typeof c=="string"){const m=a.get(c);if(!m)throw new Error(`"${c}" is undefined or declared after "${s}"`);if(!UE(m.type))throw new Error(`"${c}" is not a number and cannot be used to count "${s}"`)}let f=`${typeof u=="string"?u:u.name} ${s}`;c!==void 0&&(f+=`[${c}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:k2(u)?xD(u):u,length:c,decl:f});const h=typeof c=="string"||Lo(u)&&u[Symbol.metadata].struct.isDynamic?0:Dr(u)*(c||1);o||(o=Lo(u)?u[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=VZ(i,e.align||1),Sm("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function Em(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return SD(r).push({name:a,type:e,length:t}),n}}function CD(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:ur(new Error("Array lengths must be natural numbers"))}function Ma(e){if(HE(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();ED(e),$v(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Dr(e),a=new Uint8Array(r),i=new DataView(a.buffer);Sm("serialize",e.constructor.name);let o=0,s=0;for(const u of n.values()){const c=CD(e,u);Sm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name][f]:e[u.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=h0(h)?Dr(h):Dr(u.type),!UE(u.type)){a.set(h?Ma(h):new Uint8Array(Dr(u.type)),o);continue}const m=`set${$E(u.type)}`;if(m=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&tN,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&tN,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](o,Number(h),!t.bigEndian)}}return a}function Bv(e,t){const n=LZ(t);if(HE(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);ED(e),$v(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);Sm("deserialize",e.constructor.name);let o=0,s=0;for(const u of a.values()){const c=CD(e,u);Sm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name]:e;const m=c!=-1?f:u.name,g=h[m]===null||h[m]===void 0,v=g&&Lo(u.type)&&u.type[Symbol.metadata].struct.isDynamic;if(o=s,!h0(h[m])&&!v&&(s+=Dr(u.type)),typeof e[u.name]=="string"){e[u.name]=e[u.name].slice(0,f)+String.fromCharCode(i.getUint8(o))+e[u.name].slice(f+1);continue}if(!UE(u.type)){if(v&&Lo(u.type))h[m]??(h[m]=new u.type);else if(g)continue;Bv(h[m],new Uint8Array(n.subarray(o))),s+=Dr(h[m]);continue}c&&c!=-1&&(h||(h=[]));const w=`get${$E(u.type)}`;if(w=="getInt64"){h[m]=i.getBigInt64(o,!r.bigEndian);continue}if(w=="getUint64"){h[m]=i.getBigUint64(o,!r.bigEndian);continue}if(w=="getInt128"){h[m]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(w=="getUint128"){h[m]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(w=="getFloat128"){h[m]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[w](o,!r.bigEndian)}}}function GZ(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Em(e,n):Em(e)(n,r)}return t}const yn=Object.fromEntries(zZ.map(e=>[e,GZ(e)]));function WZ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const Wo={root:"/",pwd:"/",credentials:WZ({uid:0,gid:0}),descriptors:new Map};function AD(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const u=n.lastIndexOf("/");u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function Rl(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:Wo.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=AD(n,!r),r?`/${n}`:n.length?n:"/"}function KZ(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=AD(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function tr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?KZ(t):"."}function TD(e,t){if(e===t||(e=Rl.call(this,e),t=Rl.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let u=-1,c=0;for(;c<s;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(u=c)}if(c===s)if(o>s){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else a>s&&(e[n+c]==="/"?u=c:c===0&&(u=0));let f="";for(c=n+u+1;c<=r;++c)(c===r||e[c]==="/")&&(f+=f.length===0?"..":"/..");return`${f}${t.slice(i+u)}`}function Zn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function Kf(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function ms(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,u=e.length-1,c=0;for(;u>=r;--u){if(e[u]==="/"){if(!s){i=u+1;break}continue}o===-1&&(s=!1,o=u+1),e[u]==="."?a===-1?a=u:c!==1&&(c=1):a!==-1&&(c=-1)}if(o!==-1){const f=i===0&&t?1:i;a===-1||c===0||c===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(f,o):(n.name=e.slice(f,a),n.base=e.slice(f,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var mn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(mn||(mn={}));mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"";const ZZ=new MZ;function YZ(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};ZZ.add(n),aY(n)}function XZ(e,t){var n,r;if(!(e instanceof ze))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+tr(i,e.path)}function Xu(e){return function(t,n={}){return YZ(e,XZ(t,n)),t}}Xu(mn.EMERG);const JZ=Xu(mn.ALERT),zv=Xu(mn.CRIT),xi=Xu(mn.ERR),Wa=Xu(mn.WARN),VE=Xu(mn.NOTICE),RD=Xu(mn.INFO),Qp=Xu(mn.DEBUG);function QZ(e,t){return`\x1B[${t}m${e}\x1B[0m`}function eY(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[QZ(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"",mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"";mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"",mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"";let tY=e=>[...eY(e),e.message];function nY(e){const t=tY(e);return typeof t=="string"?[t]:Array.from(t)}let rY=console.error;function aY(e){e.level>iY||rY(...nY(e))}let iY=mn.ALERT;function GE(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function oY(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function sY(e,t){if(typeof t!="object"||t===null)throw xi(new ze(ot.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){Qp("Using default for option: "+n);continue}throw xi(new ze(ot.EINVAL,"Missing required option: "+n))}const i=(c,f=a)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?a instanceof c:c(a):typeof a===c||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,u=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw xi(new ze(ot.EINVAL,`Incorrect type for "${n}": ${o} (expected ${u})`))}}function ND(e){return e!=null&&typeof e=="object"&&"backend"in e&&GE(e.backend)}const WE=0,pa=4,Kr=2,Xy=1,KE=1,lY=2,uY=4,ID=0,Va=1,_l=2,Uv=64,qv=128,cY=256,Hv=512,ed=1024,dY=65536,fY=262144,hY=131072,Vv=1052672,pY=4096,mY=32768,gY=16384,yY=2048,yr=61440,cd=49152,Ml=40960,$o=32768,dd=24576,la=16384,fd=8192,hd=4096,p0=2048,m0=1024,bY=512,vY=448,OD=256,jD=128,DD=64,wY=56,MD=32,PD=16,FD=8,_Y=7,LD=4,$D=2,BD=1,xY=0,hi=4294967295,zD=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:KE,COPYFILE_FICLONE:lY,COPYFILE_FICLONE_FORCE:uY,F_OK:WE,O_APPEND:ed,O_CREAT:Uv,O_DIRECT:gY,O_DIRECTORY:dY,O_DSYNC:pY,O_EXCL:qv,O_NOATIME:fY,O_NOCTTY:cY,O_NOFOLLOW:hY,O_NONBLOCK:yY,O_RDONLY:ID,O_RDWR:_l,O_SYMLINK:mY,O_SYNC:Vv,O_TRUNC:Hv,O_WRONLY:Va,R_OK:pa,S_IFBLK:dd,S_IFCHR:fd,S_IFDIR:la,S_IFIFO:hd,S_IFLNK:Ml,S_IFMT:yr,S_IFREG:$o,S_IFSOCK:cd,S_IRGRP:MD,S_IROTH:LD,S_IRUSR:OD,S_IRWXG:wY,S_IRWXO:_Y,S_IRWXU:vY,S_ISGID:m0,S_ISUID:p0,S_ISVTX:bY,S_IWGRP:PD,S_IWOTH:$D,S_IWUSR:jD,S_IXGRP:FD,S_IXOTH:BD,S_IXUSR:DD,UV_FS_O_FILEMAP:xY,W_OK:Kr,X_OK:Xy,size_max:hi},Symbol.toStringTag,{value:"Module"})),Cy=BigInt(1e3);class UD{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:u,ino:c,...f}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(c??0),this.mode=this._convert(u??420&$o),(this.mode&yr)==0&&(this.mode=this.mode|this._convert($o)),Object.assign(this,f)}isFile(){return(this.mode&yr)===$o}isDirectory(){return(this.mode&yr)===la}isSymbolicLink(){return(this.mode&yr)===Ml}isSocket(){return(this.mode&yr)===cd}isBlockDevice(){return(this.mode&yr)===dd}isCharacterDevice(){return(this.mode&yr)===fd}isFIFO(){return(this.mode&yr)===hd}toJSON(){return ld(this,C2)}hasAccess(t,n){return ir(n,this._isBigint?new Pl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*Cy}get mtimeNs(){return BigInt(this.mtimeMs)*Cy}get ctimeNs(){return BigInt(this.ctimeMs)*Cy}get birthtimeNs(){return BigInt(this.birthtimeMs)*Cy}}function qD(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<hi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<hi?e.gid=n:r=!1,r}class Pl extends UD{constructor(){super(...arguments),this._isBigint=!1}}class pd extends UD{constructor(){super(...arguments),this._isBigint=!0}}function SY(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class EY{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=hi,this.ffree=hi}}class kY{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(hi),this.ffree=BigInt(hi)}}var Er=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},pn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},ZE=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const $i=0,CY=1024;let nN=(()=>{var e,t;let n=[ud()],r,a=[],i,o,s=[],u=[],c,f=[],h=[],m,g=[],v=[],w,_=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=pn(this,s,0),this.valueSize=(pn(this,u),pn(this,f,0)),this._key=(pn(this,h),pn(this,g,"")),this._value=(pn(this,v),pn(this,_,new Uint8Array(CY))),pn(this,x),S&&(this.key=S),E&&(this.value=E)}},ZE(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=yn).uint32.bind(e)],c=[(t=yn).uint32.bind(t)],m=[yn.char("keySize")],w=[yn.uint8("valueSize")],Er(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,A)=>{E.keySize=A}},metadata:S},s,u),Er(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,A)=>{E.valueSize=A}},metadata:S},f,h),Er(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,A)=>{E._key=A}},metadata:S},g,v),Er(null,null,w,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,A)=>{E._value=A}},metadata:S},_,x),Er(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),pn(i,a)})(),i})(),Uu=(()=>{var e;let t=[ud()],n,r=[],a,i,o=[],s=[],u,c=[],f=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const g=this.get(h);if(g){g.value=m;return}this.data.push(new nN(h,m)),this.size++}remove(h){const m=this.data.findIndex(g=>g.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=pn(this,o,0),this.data=(pn(this,s),pn(this,c,[])),pn(this,f)}},ZE(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=yn).uint32.bind(e)],u=[Em(nN,"size")],Er(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:h},o,s),Er(null,null,u,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,g)=>{m.data=g}},metadata:h},c,f),Er(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),pn(a,r)})(),a})();const C2=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],AY=4;var Si;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Si||(Si={}));let sa=(()=>{var e,t,n,r,a,i,o,s,u,c,f,h,m,g,v,w;let _=[ud()],x,S=[],E,A,k=[],D=[],O,N=[],z=[],H,ee=[],P=[],Z,V=[],fe=[],ue,Y=[],X=[],ae,G=[],Q=[],ne,de=[],_e=[],ve,Pe=[],Fe=[],Ie,Te=[],Ue=[],Ve,Ee=[],Ae=[],B,Ce=[],Re=[],se,ie=[],J=[],xe,Me=[],Se=[],Ze,Et=[],at=[],_t,Nt=[],Rt=[],Kt,pe=[],R=[],q,ce=[],Oe=[],ye,ke=[],oe=[];var ft=E=class{constructor(vt){if(this.data=pn(this,k,E2(0,hi)),this.__data_old=(pn(this,D),pn(this,N,0)),this.size=(pn(this,z),pn(this,ee,0)),this.mode=(pn(this,P),pn(this,V,0)),this.nlink=(pn(this,fe),pn(this,Y,1)),this.uid=(pn(this,X),pn(this,G,0)),this.gid=(pn(this,Q),pn(this,de,0)),this.atimeMs=(pn(this,_e),pn(this,Pe,Date.now())),this.birthtimeMs=(pn(this,Fe),pn(this,Te,Date.now())),this.mtimeMs=(pn(this,Ue),pn(this,Ee,Date.now())),this.ctimeMs=(pn(this,Ae),pn(this,Ce,Date.now())),this.ino=(pn(this,Re),pn(this,ie,E2(0,hi))),this.__ino_old=(pn(this,J),pn(this,Me,0)),this.flags=(pn(this,Se),pn(this,Et,0)),this.__after_flags=(pn(this,at),pn(this,Nt,0)),this.version=(pn(this,Rt),pn(this,pe,0)),this.__padding=(pn(this,R),pn(this,ce,[])),this.attributes=(pn(this,Oe),pn(this,ke,new Uu)),pn(this,oe),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<Dr(ft))throw zv(new ze(ot.EIO,"Buffer is too small to create an inode"));Bv(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...ld(this,C2),attributes:this.attributes}}toStats(){return new Pl(this)}update(vt){if(!vt)return!1;let j=!1;for(const $e of C2)vt[$e]!==void 0&&($e=="ino"||$e=="data"||this[$e]!==vt[$e]&&($e=="atimeMs"&&this.flags&Si.NoAtime||(this[$e]=vt[$e],j=!0)));return vt.attributes&&(this.attributes=vt.attributes,j=!0),j&&(this.ctimeMs=Date.now()),j}};return ZE(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;A=[(e=yn).uint32.bind(e)],O=[(t=yn).uint32.bind(t)],H=[(n=yn).uint32.bind(n)],Z=[(r=yn).uint16.bind(r)],ue=[(a=yn).uint32.bind(a)],ae=[(i=yn).uint32.bind(i)],ne=[(o=yn).uint32.bind(o)],ve=[(s=yn).float64.bind(s)],Ie=[(u=yn).float64.bind(u)],Ve=[(c=yn).float64.bind(c)],B=[(f=yn).float64.bind(f)],se=[(h=yn).uint32.bind(h)],xe=[(m=yn).uint32.bind(m)],Ze=[(g=yn).uint32.bind(g)],_t=[(v=yn).uint16.bind(v)],Kt=[(w=yn).uint32.bind(w)],q=[yn.uint8(48)],ye=[Em(Uu)],Er(null,null,A,{kind:"field",name:"data",static:!1,private:!1,access:{has:j=>"data"in j,get:j=>j.data,set:(j,$e)=>{j.data=$e}},metadata:vt},k,D),Er(null,null,O,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:j=>"__data_old"in j,get:j=>j.__data_old,set:(j,$e)=>{j.__data_old=$e}},metadata:vt},N,z),Er(null,null,H,{kind:"field",name:"size",static:!1,private:!1,access:{has:j=>"size"in j,get:j=>j.size,set:(j,$e)=>{j.size=$e}},metadata:vt},ee,P),Er(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:j=>"mode"in j,get:j=>j.mode,set:(j,$e)=>{j.mode=$e}},metadata:vt},V,fe),Er(null,null,ue,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:j=>"nlink"in j,get:j=>j.nlink,set:(j,$e)=>{j.nlink=$e}},metadata:vt},Y,X),Er(null,null,ae,{kind:"field",name:"uid",static:!1,private:!1,access:{has:j=>"uid"in j,get:j=>j.uid,set:(j,$e)=>{j.uid=$e}},metadata:vt},G,Q),Er(null,null,ne,{kind:"field",name:"gid",static:!1,private:!1,access:{has:j=>"gid"in j,get:j=>j.gid,set:(j,$e)=>{j.gid=$e}},metadata:vt},de,_e),Er(null,null,ve,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:j=>"atimeMs"in j,get:j=>j.atimeMs,set:(j,$e)=>{j.atimeMs=$e}},metadata:vt},Pe,Fe),Er(null,null,Ie,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:j=>"birthtimeMs"in j,get:j=>j.birthtimeMs,set:(j,$e)=>{j.birthtimeMs=$e}},metadata:vt},Te,Ue),Er(null,null,Ve,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:j=>"mtimeMs"in j,get:j=>j.mtimeMs,set:(j,$e)=>{j.mtimeMs=$e}},metadata:vt},Ee,Ae),Er(null,null,B,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:j=>"ctimeMs"in j,get:j=>j.ctimeMs,set:(j,$e)=>{j.ctimeMs=$e}},metadata:vt},Ce,Re),Er(null,null,se,{kind:"field",name:"ino",static:!1,private:!1,access:{has:j=>"ino"in j,get:j=>j.ino,set:(j,$e)=>{j.ino=$e}},metadata:vt},ie,J),Er(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:j=>"__ino_old"in j,get:j=>j.__ino_old,set:(j,$e)=>{j.__ino_old=$e}},metadata:vt},Me,Se),Er(null,null,Ze,{kind:"field",name:"flags",static:!1,private:!1,access:{has:j=>"flags"in j,get:j=>j.flags,set:(j,$e)=>{j.flags=$e}},metadata:vt},Et,at),Er(null,null,_t,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:j=>"__after_flags"in j,get:j=>j.__after_flags,set:(j,$e)=>{j.__after_flags=$e}},metadata:vt},Nt,Rt),Er(null,null,Kt,{kind:"field",name:"version",static:!1,private:!1,access:{has:j=>"version"in j,get:j=>j.version,set:(j,$e)=>{j.version=$e}},metadata:vt},pe,R),Er(null,null,q,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:j=>"__padding"in j,get:j=>j.__padding,set:(j,$e)=>{j.__padding=$e}},metadata:vt},ce,Oe),Er(null,null,ye,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:j=>"attributes"in j,get:j=>j.attributes,set:(j,$e)=>{j.attributes=$e}},metadata:vt},ke,oe),Er(null,x={value:E},_,{kind:"class",name:E.name,metadata:vt},null,S),ft=E=x.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),pn(E,S)})(),ft=E})();function TY(e){return(e.mode&yr)===$o}function Ho(e){return(e.mode&yr)===la}function Zf(e){return(e.mode&yr)===Ml}function RY(e){return(e.mode&yr)===cd}function km(e){return(e.mode&yr)===dd}function Cm(e){return(e.mode&yr)===fd}function NY(e){return(e.mode&yr)===hd}function ir(e,t,n){const r=(e==null?void 0:e.credentials)||Wo.credentials;if(Zf(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&OD&&(a|=pa),t.mode&jD&&(a|=Kr),t.mode&DD&&(a|=Xy)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&MD&&(a|=pa),t.mode&PD&&(a|=Kr),t.mode&FD&&(a|=Xy)),t.mode&LD&&(a|=pa),t.mode&$D&&(a|=Kr),t.mode&BD&&(a|=Xy),(a&n)===n}const rN=1;class Mb extends Map{constructor(){super(...arguments),this.maxSize=hi}toJSON(){return{version:rN,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Dr(sa);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw ze.With("ENOENT",t);if((n.mode&yr)!=la)throw ze.With("ENOTDIR",t);const r={};for(const a of this.keys())Zn(a)==t&&a!=t&&(r[Kf(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&yr)!=la)continue;const a={};for(const i of this.keys())Zn(i)==n&&i!=n&&(a[Kf(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=rN)throw new ze(ot.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=E2(1,hi)),r=="/"&&(a.ino=0),this.set(r,new sa(a));return this}static parse(t){if(!PZ(t))throw new ze(ot.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Mb;return r.fromJSON(n),r}}const rx=4096;let YE=class A2{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===A2.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===A2.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=rx){const u=s+rx>o?o-s:rx,c=new Uint8Array(u);await this.read(t,c,s,s+u).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const u=f=>{s=!0,o.error(f)},{size:c}=await this.stat(t);await this.write(t,i,a).catch(u),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,a)}).catch(u))}})}};function ii(e){return JSON.parse(BE(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function oo(e){return Bc(JSON.stringify(e))}function Ju(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new ze(ot.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Pb(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new ze(ot.EINVAL,"Invalid time.")}}function ln(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new ze(ot.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new ze(ot.EINVAL,"Path can not contain null character");if(e.length==0)throw new ze(ot.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Rl(e)}function xl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:Ju("mode"in e?e==null?void 0:e.mode:null,r)}}class IY{constructor(t,n,r,a){Ua(this,"id");Ua(this,"_size");Ua(this,"options");Ua(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=xm(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=xm(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,u)=>s.start-u.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var ax,ix,ox;(ax=Promise.withResolvers)!==null&&ax!==void 0||(Promise.withResolvers=(Wa("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(ix=Symbol.dispose)!==null&&ix!==void 0||(Symbol.dispose=(Wa("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(ox=Symbol.asyncDispose)!==null&&ox!==void 0||(Symbol.asyncDispose=(Wa("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class HD{constructor(t){this.store=t}}class OY extends HD{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class T2 extends HD{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new IY(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:u,end:c}of o)this.async(this.get(t,u,c));if(o.length)throw xi(ze.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){Wa("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class jY{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof T2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,await this.raw.get(t,u.start,u.end),u.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof T2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,u.start,u.end),u.start)}}}var xr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Sr=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class VD extends YE{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=TD(t,a);if(o.startsWith(".."))continue;let s=tr(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){Wa("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,Qp(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,Ma(o)),a.has(i)&&await r.set(o.data,oo(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,Ma(o)),a.has(i)&&r.setSync(o.data,oo(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Mb,a=xr(n,this.transaction(),!0),i=[["/",0]],o=XR(ze.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new sa(await a.get(u));if(r.set(s,c),c.mode&la){const f=ii((t=await a.get(c.data))!==null&&t!==void 0?t:ur(ze.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([tr(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Mb,a=xr(n,this.transaction(),!1),i=[["/",0]],o=XR(ze.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new sa(a.getSync(u));if(r.set(s,c),c.mode&la){const f=ii((t=a.getSync(c.data))!==null&&t!==void 0?t:ur(ze.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([tr(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!0),u=ms(t),c=ms(n),f=await this.findInode(s,u.dir,"rename"),h=ii((r=await s.get(f.data))!==null&&r!==void 0?r:ur(ze.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw ze.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&xi(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new ze(ot.EBUSY,u.dir);const g=c.dir==u.dir,v=g?f:await this.findInode(s,c.dir,"rename"),w=g?h:ii((a=await s.get(v.data))!==null&&a!==void 0?a:ur(ze.With("ENODATA",c.dir,"rename")));if(w[c.base]){const _=new sa((i=await s.get(w[c.base]))!==null&&i!==void 0?i:ur(ze.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw ze.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(w[c.base])}w[c.base]=m,await s.set(f.data,oo(h)),await s.set(v.data,oo(w)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!1),u=ms(t),c=ms(n),f=this.findInodeSync(s,u.dir,"rename"),h=ii((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(ze.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw ze.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&xi(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new ze(ot.EBUSY,u.dir);const g=c.dir===u.dir,v=g?f:this.findInodeSync(s,c.dir,"rename"),w=g?h:ii((a=s.getSync(v.data))!==null&&a!==void 0?a:ur(ze.With("ENODATA",c.dir,"rename")));if(w[c.base]){const _=new sa((i=s.getSync(w[c.base]))!==null&&i!==void 0?i:ur(ze.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw ze.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(w[c.base])}w[c.base]=m,s.setSync(f.data,oo(h)),s.setSync(v.data,oo(w)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ma(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Sr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ma(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Sr(r)}}async createFile(t,n){return n.mode|=$o,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=$o,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw ze.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw ze.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=la,await this.commitNew(t,n,Bc("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=la,this.commitNewSync(t,n,Bc("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(ii((n=await a.get(i.data))!==null&&n!==void 0?n:ur(ze.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Sr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(ii((n=a.getSync(i.data))!==null&&n!==void 0?n:ur(ze.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Sr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,Ma(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Sr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,Ma(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Sr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!0),o=Zn(n),s=await this.findInode(i,o,"link"),u=ii((r=await i.get(s.data))!==null&&r!==void 0?r:ur(ze.With("ENOENT",o,"link"))),c=await this.findInode(i,t,"link");c.nlink++,u[Kf(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,Ma(c)),await i.set(s.data,oo(u)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Sr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!1),o=Zn(n),s=this.findInodeSync(i,o,"link"),u=ii((r=i.getSync(s.data))!==null&&r!==void 0?r:ur(ze.With("ENOENT",o,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,u[Kf(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,Ma(c)),i.setSync(s.data,oo(u)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Sr(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!0),u=await this.findInode(s,t,"read");if(u.size==0)return;const c=(i=await s.get(u.data,r,a))!==null&&i!==void 0?i:ur(ze.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&xi(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!1),u=this.findInodeSync(s,t,"read");if(u.size==0)return;const c=(i=s.getSync(u.data,r,a))!==null&&i!==void 0?i:ur(ze.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&xi(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=xr(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let u=n;o.flag("partial")||(u=xm((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),await o.set(s.data,u,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Sr(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=xr(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let u=n;o.flag("partial")||(u=xm((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),o.setSync(s.data,u,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Sr(i)}}transaction(){return new jY(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=xr(t,this.transaction(),!0);if(await n.get($i))return;const r=new sa({ino:$i,data:1,mode:511|la});await n.set(r.data,Bc("{}")),this._add($i,"/"),await n.set($i,Ma(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Sr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=xr(t,this.transaction(),!1);if(n.getSync($i))return;const r=new sa({ino:$i,data:1,mode:511|la});n.setSync(r.data,Bc("{}")),this._add($i,"/"),n.setSync($i,Ma(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Sr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Wa("Attempted to populate tables after initialization");return}Qp("Populating tables with existing store metadata");const n=xr(t,this.transaction(),!0),r=await n.get($i);if(!r){VE("Store does not have a root inode");const s=new sa({ino:$i,data:1,mode:511|la});await n.set(s.data,Bc("{}")),this._add($i,"/"),await n.set($i,Ma(s)),await n.commit();return}if(r.length<Dr(sa)){zv("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",$i]];for(;o.length>0;){i++;const[s,u]=o.shift();this._add(u,s);const c=await n.get(u);if(!c){Wa("Store is missing data for inode: "+u);continue}if(c.length<Dr(sa)){Wa(`Invalid inode size for ino ${u}: ${c.length}`);continue}const f=new sa(c);if((f.mode&la)!=la||a.has(u))continue;a.add(u);const h=await n.get(f.data);if(!h){Wa("Store is missing directory data: "+f.data);continue}const m=ii(h);for(const[g,v]of Object.entries(m))o.push([tr(s,g),v])}Qp(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Sr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw ze.With("ENOENT",n,r);return new sa((a=await t.get(i))!==null&&a!==void 0?a:ur(ze.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw ze.With("ENOENT",n,r);return new sa((a=t.getSync(i))!==null&&a!==void 0?a:ur(ze.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>hi)throw xi(new ze(ot.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw ze.With("EEXIST",t,a);const s=xr(o,this.transaction(),!0),{dir:u,base:c}=ms(t),f=await this.findInode(s,u,a),h=ii((i=await s.get(f.data))!==null&&i!==void 0?i:ur(ze.With("ENOENT",u,a)));if(h[c])throw ze.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new sa({...n,ino:m,data:m+1,size:r.byteLength});return await s.set(g.ino,Ma(g)),await s.set(g.data,r),h[c]=g.ino,await s.set(f.data,oo(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw ze.With("EEXIST",t,a);const s=xr(o,this.transaction(),!1),{dir:u,base:c}=ms(t),f=this.findInodeSync(s,u,a),h=ii((i=s.getSync(f.data))!==null&&i!==void 0?i:ur(ze.With("ENOENT",u,a)));if(h[c])throw ze.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new sa({...n,ino:m,data:m+1,size:r.byteLength});return s.setSync(g.ino,Ma(g)),s.setSync(g.data,r),h[c]=g.ino,s.setSync(f.data,oo(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=xr(i,this.transaction(),!0),{dir:u,base:c}=ms(t),f=await this.findInode(s,u,o),h=ii((r=await s.get(f.data))!==null&&r!==void 0?r:ur(ze.With("ENOENT",u,o)));if(!h[c])throw ze.With("ENOENT",t,o);const m=h[c],g=new sa((a=await s.get(m))!==null&&a!==void 0?a:ur(ze.With("ENOENT",t,o)));if(delete h[c],!n&&Ho(g))throw ze.With("EISDIR",t,o);await s.set(f.data,oo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,Ma(g))):(await s.remove(g.data),await s.remove(m),this._remove(m)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Sr(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=xr(i,this.transaction(),!1),{dir:u,base:c}=ms(t),f=this.findInodeSync(s,u,o),h=ii((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(ze.With("ENOENT",u,o))),m=h[c];if(!m)throw ze.With("ENOENT",t,o);const g=new sa((a=s.getSync(m))!==null&&a!==void 0?a:ur(ze.With("ENOENT",t,o)));if(delete h[c],!n&&Ho(g))throw ze.With("EISDIR",t,o);s.setSync(f.data,oo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,Ma(g))):(s.removeSync(g.data),s.removeSync(m),this._remove(m)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Sr(i)}}}class DY extends OY{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class MY extends Map{constructor(t=hi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new DY(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const PY={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new VD(new MY(e,t));return n.checkRootSync(),n}},FY=PY;let ma=!0;class aN extends LE{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;so(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;so(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);Ay(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);Ay(this.output,0),so(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,so(this.output,-a.length,0),so(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;so(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(so(this.output,-this._cursor,0),so(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);Ay(this.output,0),so(this.output,0,0),this.output.write(this._prompt+r),this.line=r,so(this.output,-r.length,0),so(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(Ay(this.output,0),so(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Wa("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Wa("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function LY(e,t,n,r){return"input"in e?new aN(e.input,e.output,e.completer,e.terminal):new aN(e,t,n,r)}function Ay(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function so(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Fb{get position(){return this.flag&ed?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&Vv||this.inode.flags&Si.Sync)}sync(){if(this.closed)throw ze.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw ze.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw ze.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw ze.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw ze.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw ze.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Va||this.flag&_l))throw new ze(ot.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw ze.With("EBADF",this.path,"write");if(!(this.flag&Va||this.flag&_l))throw new ze(ot.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Si.Immutable)throw new ze(ot.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Cm(this.inode)&&!km(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw ze.With("EBADF",this.path,"read");if(this.flag&Va)throw new ze(ot.EPERM,"File not opened with a readable mode");this.inode.flags&Si.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Cm(this.inode)&&!km(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw ze.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>yr?-61441:yr)|t,(this._isSync||t>yr)&&this.sync()}chown(t,n){if(this.closed)throw ze.With("EBADF",this.path,"chown");this.dirty=!0,qD(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw ze.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw ze.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw ze.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Si.Immutable)throw new ze(ot.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Lb(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:Wo.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function Qa(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Wo.descriptors).get(t);if(!a)throw new ze(ot.EBADF);return a}function GD(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Wo.descriptors).delete(t)}const $Y=/[rwasx]{1,2}\+?/;function Sl(e){if(typeof e=="number")return e;if(!$Y.test(e))throw new ze(ot.EINVAL,"Invalid flag string: "+e);return BY(e)}function BY(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new ze(ot.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?ID:Uv;return e.includes("w")&&(t|=Hv),e.includes("a")&&(t|=ed),e.includes("+")?t|=_l:e.includes("r")||(t|=Va),e.includes("s")&&(t|=Vv),e.includes("x")&&(t|=qv),t}function WD(e){let t=0;return e&Va||(t|=pa),(e&Va||e&_l)&&(t|=Kr),t}const Am=new Map;XE("/",FY.create({label:"root"}));function XE(e,t){if(e[0]!="/"&&(e="/"+e),e=Rl.call(this,e),Am.has(e))throw xi(new ze(ot.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Am.set(e,t),RD(`Mounted ${t.name} on ${e}`),Qp(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function KD(e){if(e[0]!="/"&&(e="/"+e),e=Rl.call(this,e),!Am.has(e)){Wa(e+" is already unmounted");return}Am.delete(e),VE("Unmounted "+e)}function Pn(e,t){const n=(t==null?void 0:t.root)||Wo.root;e=ln(tr(n,e));const r=[...Am].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(UY(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw JZ(new ze(ot.EIO,"No file system",e))}function sx(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function or(e,t){typeof e.stack=="string"&&(e.stack=sx(e.stack,t));try{e.message=sx(e.message,t)}catch{}return e.path&&(e.path=sx(e.path,t)),e}function ZD(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||hi),files:(t?BigInt:Number)(n.totalNodes||hi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function zY(e){var t,n,r,a,i,o,s;const u=this!==null&&this!==void 0?this:Wo;if(((t=u.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=u.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=u.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=u.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new ze(ot.EPERM,"Can not chroot() as non-root user");(i=u.root)!==null&&i!==void 0||(u.root="/");const c=tr(u.root,e);for(const f of(s=(o=u.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!f.path.startsWith(u.root))throw ze.With("EBUSY",f.path,"chroot");f.path=f.path.slice(u.root.length)}if(c.length>u.root.length)throw new ze(ot.EPERM,"Can not chroot() outside of current root");u.root=c}function UY(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class YD extends LE{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw ze.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw ze.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw ze.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw ze.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw ze.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class XD extends YD{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?tr(t.root,n):n,HY(this.realpath,this)}close(){super.emit("close"),VY(this.realpath,this)}[Symbol.dispose](){this.close()}}class qY extends YD{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=qu(this.path);SY(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=qu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Cu=new Map;function HY(e,t){const n=ln(e);Cu.has(n)||Cu.set(n,new Set),Cu.get(n).add(t)}function VY(e,t){const n=ln(e);Cu.has(n)&&(Cu.get(n).delete(t),Cu.get(n).size===0&&Cu.delete(n))}function Pa(e,t,n){var r;e&&(n=tr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=ln(n);for(let a=n;a!="/";a=Zn(a)){const i=Cu.get(a);if(i)for(const o of i)o.emit("change",t,TD.call(o._context,a,n)||Kf(n))}}var g0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},y0=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function GY(e,t){e=ln(e),t=ln(t);const n=Pn(e,this),r=Pn(t,this);if(!qu.call(this,Zn(e)).hasAccess(Kr,this))throw ze.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),Pa(this,"rename",e.toString()),Pa(this,"change",t.toString());return}nk.call(this,t,tk(e)),ek.call(this,e),Pa(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}function JE(e){e=ln(e);try{const{fs:t,path:n}=Pn(Qu.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==ot.ENOENT)return!1;throw t}}function qu(e,t){e=ln(e);const{fs:n,path:r}=Pn(Qu.call(this,e),this);try{const a=n.statSync(r);if(ma&&!ir(this,a,pa))throw ze.With("EACCES",r,"stat");return t!=null&&t.bigint?new pd(a):new Pl(a)}catch(a){throw or(a,{[r]:e})}}function QE(e,t){e=ln(e);const{fs:n,path:r}=Pn(e,this);try{const a=n.statSync(r);if(ma&&!ir(this,a,pa))throw ze.With("EACCES",r,"lstat");return t!=null&&t.bigint?new pd(a):new Pl(a)}catch(a){throw or(a,{[r]:e})}}function WY(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=g0(n,md.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new ze(ot.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{y0(n)}}function ek(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{if(ma&&!ir(this,t.statSync(n),Kr))throw ze.With("EACCES",n,"unlink");t.unlinkSync(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function md(e,t){var n;e=ln(e);const r=Ju(t.mode,420),a=Sl(t.flag);e=t.preserveSymlinks?e:Qu.call(this,e);const{fs:i,path:o}=Pn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&Uv))throw ze.With("ENOENT",e,"_open");const c=i.statSync(Zn(o));if(!ir(this,c,Kr))throw ze.With("EACCES",Zn(e),"_open");if(!Ho(c))throw ze.With("ENOTDIR",Zn(e),"_open");if(!t.allowDirectory&&r&la)throw ze.With("EISDIR",e,"_open");if(!ir(this,c,Kr))throw ze.With("EACCES",Zn(o),"_open");const{euid:f,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Wo.credentials,m=i.createFileSync(o,{mode:r,uid:c.mode&p0?c.uid:f,gid:c.mode&m0?c.gid:h});return new Fb(this,e,i,o,a,m)}if(!ir(this,s,r)||!ir(this,s,WD(a)))throw ze.With("EACCES",e,"_open");if(a&qv)throw ze.With("EEXIST",e,"_open");const u=new Fb(this,e,i,o,a,s);if(a&Hv&&u.truncate(0),!t.allowDirectory&&s.mode&la)throw ze.With("EISDIR",e,"_open");return u}function Gv(e,t,n=WE){return Lb(md.call(this,e,{flag:t,mode:n}))}function Wv(e,t,n){return Lb(md.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function JD(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=g0(r,typeof e=="number"?Qa(this,e):md.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{y0(r)}}function tk(e,t={}){const n=xl(t,null,"r",420);if(Sl(n.flag)&Va)throw new ze(ot.EINVAL,"Flag passed to readFile must allow for reading");const a=Ar.from(JD.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function nk(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=xl(n,"utf8","w+",420),i=Sl(a.flag);if(!(i&Va||i&_l))throw new ze(ot.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new ze(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Ar.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new ze(ot.EINVAL,"Data not specified");g0(r,typeof e=="number"?Qa(this,e):md.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),Pa(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{y0(r)}}function KY(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=xl(n,"utf8","a+",420),i=Sl(a.flag);if(!(i&ed))throw new ze(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new ze(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Ar.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);g0(r,md.call(this,typeof e=="number"?Qa(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{y0(r)}}function ZY(e,t){const n=Qa(this,e).stat();return t!=null&&t.bigint?new pd(n):new Pl(n)}function gd(e){Qa(this,e).close(),GD(this,e)}function YY(e,t=0){if(t||(t=0),t<0)throw new ze(ot.EINVAL);Qa(this,e).truncate(t)}function XY(e){Qa(this,e).sync()}function JY(e){Qa(this,e).datasync()}function QY(e,t,n,r,a){let i,o,s,u;if(typeof t=="string"){u=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Ar.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,u=typeof a=="number"?a:null;const c=Qa(this,e);u??(u=c.position);const f=c.write(i,o,s,u);return Pa(this,"change",c.path),f}function eX(e,t,n,r,a){const i=Qa(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function rk(e,t,n){Qa(this,e).chown(t,n)}function ak(e,t){const n=Ju(t,-1);if(n<0)throw new ze(ot.EINVAL,"Invalid mode.");Qa(this,e).chmod(n)}function ik(e,t,n){Qa(this,e).utimes(Pb(t),Pb(n))}function QD(e){e=ln(e);const{fs:t,path:n}=Pn(Qu.call(this,e),this);try{const r=t.statSync(n);if(!Ho(r))throw ze.With("ENOTDIR",n,"rmdir");if(ma&&!ir(this,r,Kr))throw ze.With("EACCES",n,"rmdir");t.rmdirSync(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function ok(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Wo.credentials;t=typeof t=="object"?t:{mode:t};const o=Ju(t==null?void 0:t.mode,511);e=Qu.call(this,e);const{fs:s,path:u,root:c}=Pn(e,this),f={[u]:e},h=(m,g)=>{if(!ir(this,g,Kr))throw ze.With("EACCES",Zn(m),"mkdir");const v=s.mkdirSync(m,{mode:o,uid:g.mode&p0?g.uid:a,gid:g.mode&m0?g.gid:i});return Pa(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){h(u,s.statSync(Zn(u)));return}const m=[];for(let v=u,w=e;!s.existsSync(v);v=Zn(v),w=Zn(w))m.unshift(v),f[v]=w;if(!m.length)return;const g=[s.statSync(Zn(m[0]))];for(const[v,w]of m.entries())g.push(h(w,g[v]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw or(m,f)}}function yh(e,t){t=typeof t=="object"?t:{encoding:t},e=ln(e);const{fs:n,path:r}=Pn(Qu.call(this,e),this);let a;try{const o=n.statSync(r);if(ma&&!ir(this,o,pa))throw ze.With("EACCES",r,"readdir");if(!Ho(o))throw ze.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw or(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(tr(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new Tm(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Ar.from(o)):i.push(o),!(!Ho(s)||!(t!=null&&t.recursive)))for(const u of yh.call(this,tr(e,o),t))u instanceof Tm?(u.path=tr(o,u.path),i.push(u)):Ar.isBuffer(u)?i.push(Ar.from(tr(o,BE(u)))):i.push(tr(o,u))}return i}function tX(e,t){if(e=ln(e),!qu(Zn(e)).hasAccess(pa,this))throw ze.With("EACCES",Zn(e),"link");if(t=ln(t),!qu(Zn(t)).hasAccess(Kr,this))throw ze.With("EACCES",Zn(t),"link");const{fs:n,path:r}=Pn(e,this),a=Pn(t,this);if(n!=a.fs)throw ze.With("EXDEV",t,"link");try{if(ma&&!ir(this,n.statSync(r),pa))throw ze.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw or(i,{[r]:e,[a.path]:t})}}function nX(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new ze(ot.EINVAL,"Invalid type: "+n);t=ln(t);const a=g0(r,md.call(this,t,{flag:"wx",mode:420}),!1);a.write(Bc(ln(e,!0))),a.chmod(Ml)}catch(a){r.error=a,r.hasError=!0}finally{y0(r)}}function R2(e,t){const n=Ar.from(JD.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function rX(e,t,n){const r=Gv.call(this,e,"r+");rk.call(this,r,t,n),gd.call(this,r)}function aX(e,t,n){const r=Wv.call(this,e,"r+");rk.call(this,r,t,n),gd.call(this,r)}function iX(e,t){const n=Gv.call(this,e,"r+");ak.call(this,n,t),gd.call(this,n)}function oX(e,t){const n=Wv.call(this,e,"r+");ak.call(this,n,t),gd.call(this,n)}function e8(e,t,n){const r=Gv.call(this,e,"r+");ik.call(this,r,t,n),gd.call(this,r)}function sX(e,t,n){const r=Wv.call(this,e,"r+");ik.call(this,r,t,n),gd.call(this,r)}function N2(e,t,n){try{const u=Pn(t,e),c=u.fs.statSync(u.path);if(!Zf(c))return{...u,fullPath:t,stats:c};const f=Rl.call(e,Zn(t),R2.call(e,t).toString());return N2(e,f)}catch{}const{base:r,dir:a}=ms(t),i=a=="/"?"/":Qu.call(e,a),o=tr(i,r),s=Pn(o,e);try{const u=s.fs.statSync(s.path);if(!Zf(u))return{...s,fullPath:o,stats:u};const c=Rl.call(e,i,R2.call(e,o).toString());return N2(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}function Qu(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=N2(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Ar.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function lX(e,t=384){if(!ir(this,qu.call(this,e),t))throw new ze(ot.EACCES)}function t8(e,t){e=ln(e);let n;try{n=QE.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&yr){case la:if(t!=null&&t.recursive)for(const r of yh.call(this,e))t8.call(this,tr(e,r),t);QD.call(this,e);break;case $o:case Ml:case dd:case fd:ek.call(this,e);break;case hd:case cd:default:throw new ze(ot.EPERM,"File type not supported",e,"rm")}}function uX(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return ok.call(this,a),n=="buffer"?Ar.from(a):a}function n8(e,t,n){if(e=ln(e),t=ln(t),n&&n&KE&&JE(t))throw new ze(ot.EEXIST,"Destination file already exists",t,"copyFile");nk.call(this,t,tk(e)),Pa(this,"rename",t.toString())}function cX(e,t,n){const r=Qa(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function dX(e,t,n){const r=Qa(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function fX(e,t){return e=ln(e),new sk(e,this)}function r8(e,t,n){e=ln(e),t=ln(t);const r=QE.call(this,e);if(n!=null&&n.errorOnExist&&JE.call(this,t))throw new ze(ot.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&yr){case la:if(!(n!=null&&n.recursive))throw new ze(ot.EISDIR,e+" is a directory (not copied)",e,"cp");ok.call(this,t,{recursive:!0});for(const a of yh.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(tr(e,a.name),tr(t,a.name))||r8.call(this,tr(e,a.name),tr(t,a.name),n);break;case $o:case Ml:n8.call(this,e,t);break;case dd:case fd:case hd:case cd:default:throw new ze(ot.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&e8.call(this,t,r.atime,r.mtime)}function hX(e,t){e=ln(e);const{fs:n}=Pn(e,this);return ZD(n,t==null?void 0:t.bigint)}function pX(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(u=>(u=u.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${u}$`))),o=[];function s(u){const c=yh(u,{withFileTypes:r,encoding:"utf8"});for(const f of c){const h=r?f.path:u+"/"+f;a(r?f:h)||(qu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&s(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&o.push(r?f.path:h.replace(/^\/+/g,"")))}}return s(n),o}class Tm{get name(){return Kf(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return TY(this.stats)}isDirectory(){return Ho(this.stats)}isBlockDevice(){return km(this.stats)}isCharacterDevice(){return Cm(this.stats)}isSymbolicLink(){return Zf(this.stats)}isFIFO(){return NY(this.stats)}isSocket(){return RY(this.stats)}}class sk{checkClosed(){if(this.closed)throw new ze(ot.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await nc.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=yh.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var lx={exports:{}},ux={exports:{}},cx={},iN;function ec(){return iN||(iN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=f,n.toByteArray=m,n.fromByteArray=w;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function c(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=S.indexOf("=");A===-1&&(A=E);var k=A===E?0:4-A%4;return[A,k]}function f(S){var E=c(S),A=E[0],k=E[1];return(A+k)*3/4-k}function h(S,E,A){return(E+A)*3/4-A}function m(S){var E,A=c(S),k=A[0],D=A[1],O=new i(h(S,k,D)),N=0,z=D>0?k-4:k,H;for(H=0;H<z;H+=4)E=a[S.charCodeAt(H)]<<18|a[S.charCodeAt(H+1)]<<12|a[S.charCodeAt(H+2)]<<6|a[S.charCodeAt(H+3)],O[N++]=E>>16&255,O[N++]=E>>8&255,O[N++]=E&255;return D===2&&(E=a[S.charCodeAt(H)]<<2|a[S.charCodeAt(H+1)]>>4,O[N++]=E&255),D===1&&(E=a[S.charCodeAt(H)]<<10|a[S.charCodeAt(H+1)]<<4|a[S.charCodeAt(H+2)]>>2,O[N++]=E>>8&255,O[N++]=E&255),O}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,A){for(var k,D=[],O=E;O<A;O+=3)k=(S[O]<<16&16711680)+(S[O+1]<<8&65280)+(S[O+2]&255),D.push(g(k));return D.join("")}function w(S){for(var E,A=S.length,k=A%3,D=[],O=16383,N=0,z=A-k;N<z;N+=O)D.push(v(S,N,N+O>z?z:N+O));return k===1?(E=S[A-1],D.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(S[A-2]<<8)+S[A-1],D.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),D.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(S,E,A,k,D){var O,N,z=D*8-k-1,H=(1<<z)-1,ee=H>>1,P=-7,Z=A?D-1:0,V=A?-1:1,fe=S[E+Z];for(Z+=V,O=fe&(1<<-P)-1,fe>>=-P,P+=z;P>0;O=O*256+S[E+Z],Z+=V,P-=8);for(N=O&(1<<-P)-1,O>>=-P,P+=k;P>0;N=N*256+S[E+Z],Z+=V,P-=8);if(O===0)O=1-ee;else{if(O===H)return N?NaN:(fe?-1:1)*(1/0);N=N+Math.pow(2,k),O=O-ee}return(fe?-1:1)*N*Math.pow(2,O-k)},_.write=function(S,E,A,k,D,O){var N,z,H,ee=O*8-D-1,P=(1<<ee)-1,Z=P>>1,V=D===23?Math.pow(2,-24)-Math.pow(2,-77):0,fe=k?0:O-1,ue=k?1:-1,Y=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(z=isNaN(E)?1:0,N=P):(N=Math.floor(Math.log(E)/Math.LN2),E*(H=Math.pow(2,-N))<1&&(N--,H*=2),N+Z>=1?E+=V/H:E+=V*Math.pow(2,1-Z),E*H>=2&&(N++,H/=2),N+Z>=P?(z=0,N=P):N+Z>=1?(z=(E*H-1)*Math.pow(2,D),N=N+Z):(z=E*Math.pow(2,Z-1)*Math.pow(2,D),N=0));D>=8;S[A+fe]=z&255,fe+=ue,z/=256,D-=8);for(N=N<<D|z,ee+=D;ee>0;S[A+fe]=N&255,fe+=ue,N/=256,ee-=8);S[A+fe-ue]|=Y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,A=_,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=P,S.SlowBuffer=de,S.INSPECT_MAX_BYTES=50;const D=2147483647;S.kMaxLength=D;const{Uint8Array:O,ArrayBuffer:N,SharedArrayBuffer:z}=globalThis;P.TYPED_ARRAY_SUPPORT=H(),!P.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function H(){try{const U=new O(1),$={foo:function(){return 42}};return Object.setPrototypeOf($,O.prototype),Object.setPrototypeOf(U,$),U.foo()===42}catch{return!1}}Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}}),Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}});function ee(U){if(U>D)throw new RangeError('The value "'+U+'" is invalid for option "size"');const $=new O(U);return Object.setPrototypeOf($,P.prototype),$}function P(U,$,W){if(typeof U=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ue(U)}return Z(U,$,W)}P.poolSize=8192;function Z(U,$,W){if(typeof U=="string")return Y(U,$);if(N.isView(U))return ae(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(ge(U,N)||U&&ge(U.buffer,N)||typeof z<"u"&&(ge(U,z)||U&&ge(U.buffer,z)))return G(U,$,W);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=U.valueOf&&U.valueOf();if(he!=null&&he!==U)return P.from(he,$,W);const Ne=Q(U);if(Ne)return Ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return P.from(U[Symbol.toPrimitive]("string"),$,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}P.from=function(U,$,W){return Z(U,$,W)},Object.setPrototypeOf(P.prototype,O.prototype),Object.setPrototypeOf(P,O);function V(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function fe(U,$,W){return V(U),U<=0?ee(U):$!==void 0?typeof W=="string"?ee(U).fill($,W):ee(U).fill($):ee(U)}P.alloc=function(U,$,W){return fe(U,$,W)};function ue(U){return V(U),ee(U<0?0:ne(U)|0)}P.allocUnsafe=function(U){return ue(U)},P.allocUnsafeSlow=function(U){return ue(U)};function Y(U,$){if((typeof $!="string"||$==="")&&($="utf8"),!P.isEncoding($))throw new TypeError("Unknown encoding: "+$);const W=_e(U,$)|0;let he=ee(W);const Ne=he.write(U,$);return Ne!==W&&(he=he.slice(0,Ne)),he}function X(U){const $=U.length<0?0:ne(U.length)|0,W=ee($);for(let he=0;he<$;he+=1)W[he]=U[he]&255;return W}function ae(U){if(ge(U,O)){const $=new O(U);return G($.buffer,$.byteOffset,$.byteLength)}return X(U)}function G(U,$,W){if($<0||U.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<$+(W||0))throw new RangeError('"length" is outside of buffer bounds');let he;return $===void 0&&W===void 0?he=new O(U):W===void 0?he=new O(U,$):he=new O(U,$,W),Object.setPrototypeOf(he,P.prototype),he}function Q(U){if(P.isBuffer(U)){const $=ne(U.length)|0,W=ee($);return W.length===0||U.copy(W,0,0,$),W}if(U.length!==void 0)return typeof U.length!="number"||De(U.length)?ee(0):X(U);if(U.type==="Buffer"&&Array.isArray(U.data))return X(U.data)}function ne(U){if(U>=D)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+D.toString(16)+" bytes");return U|0}function de(U){return+U!=U&&(U=0),P.alloc(+U)}P.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==P.prototype},P.compare=function($,W){if(ge($,O)&&($=P.from($,$.offset,$.byteLength)),ge(W,O)&&(W=P.from(W,W.offset,W.byteLength)),!P.isBuffer($)||!P.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===W)return 0;let he=$.length,Ne=W.length;for(let He=0,gt=Math.min(he,Ne);He<gt;++He)if($[He]!==W[He]){he=$[He],Ne=W[He];break}return he<Ne?-1:Ne<he?1:0},P.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},P.concat=function($,W){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return P.alloc(0);let he;if(W===void 0)for(W=0,he=0;he<$.length;++he)W+=$[he].length;const Ne=P.allocUnsafe(W);let He=0;for(he=0;he<$.length;++he){let gt=$[he];if(ge(gt,O))He+gt.length>Ne.length?(P.isBuffer(gt)||(gt=P.from(gt)),gt.copy(Ne,He)):O.prototype.set.call(Ne,gt,He);else if(P.isBuffer(gt))gt.copy(Ne,He);else throw new TypeError('"list" argument must be an Array of Buffers');He+=gt.length}return Ne};function _e(U,$){if(P.isBuffer(U))return U.length;if(N.isView(U)||ge(U,N))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const W=U.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&W===0)return 0;let Ne=!1;for(;;)switch($){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ft(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return $e(U).length;default:if(Ne)return he?-1:ft(U).length;$=(""+$).toLowerCase(),Ne=!0}}P.byteLength=_e;function ve(U,$,W){let he=!1;if(($===void 0||$<0)&&($=0),$>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,$>>>=0,W<=$))return"";for(U||(U="utf8");;)switch(U){case"hex":return xe(this,$,W);case"utf8":case"utf-8":return Ce(this,$,W);case"ascii":return ie(this,$,W);case"latin1":case"binary":return J(this,$,W);case"base64":return B(this,$,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,$,W);default:if(he)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),he=!0}}P.prototype._isBuffer=!0;function Pe(U,$,W){const he=U[$];U[$]=U[W],U[W]=he}P.prototype.swap16=function(){const $=this.length;if($%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<$;W+=2)Pe(this,W,W+1);return this},P.prototype.swap32=function(){const $=this.length;if($%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<$;W+=4)Pe(this,W,W+3),Pe(this,W+1,W+2);return this},P.prototype.swap64=function(){const $=this.length;if($%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<$;W+=8)Pe(this,W,W+7),Pe(this,W+1,W+6),Pe(this,W+2,W+5),Pe(this,W+3,W+4);return this},P.prototype.toString=function(){const $=this.length;return $===0?"":arguments.length===0?Ce(this,0,$):ve.apply(this,arguments)},P.prototype.toLocaleString=P.prototype.toString,P.prototype.equals=function($){if(!P.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$?!0:P.compare(this,$)===0},P.prototype.inspect=function(){let $="";const W=S.INSPECT_MAX_BYTES;return $=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&($+=" ... "),"<Buffer "+$+">"},k&&(P.prototype[k]=P.prototype.inspect),P.prototype.compare=function($,W,he,Ne,He){if(ge($,O)&&($=P.from($,$.offset,$.byteLength)),!P.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(W===void 0&&(W=0),he===void 0&&(he=$?$.length:0),Ne===void 0&&(Ne=0),He===void 0&&(He=this.length),W<0||he>$.length||Ne<0||He>this.length)throw new RangeError("out of range index");if(Ne>=He&&W>=he)return 0;if(Ne>=He)return-1;if(W>=he)return 1;if(W>>>=0,he>>>=0,Ne>>>=0,He>>>=0,this===$)return 0;let gt=He-Ne,Gt=he-W;const ht=Math.min(gt,Gt),Ct=this.slice(Ne,He),Ot=$.slice(W,he);for(let Zt=0;Zt<ht;++Zt)if(Ct[Zt]!==Ot[Zt]){gt=Ct[Zt],Gt=Ot[Zt];break}return gt<Gt?-1:Gt<gt?1:0};function Fe(U,$,W,he,Ne){if(U.length===0)return-1;if(typeof W=="string"?(he=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,De(W)&&(W=Ne?0:U.length-1),W<0&&(W=U.length+W),W>=U.length){if(Ne)return-1;W=U.length-1}else if(W<0)if(Ne)W=0;else return-1;if(typeof $=="string"&&($=P.from($,he)),P.isBuffer($))return $.length===0?-1:Ie(U,$,W,he,Ne);if(typeof $=="number")return $=$&255,typeof O.prototype.indexOf=="function"?Ne?O.prototype.indexOf.call(U,$,W):O.prototype.lastIndexOf.call(U,$,W):Ie(U,[$],W,he,Ne);throw new TypeError("val must be string, number or Buffer")}function Ie(U,$,W,he,Ne){let He=1,gt=U.length,Gt=$.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(U.length<2||$.length<2)return-1;He=2,gt/=2,Gt/=2,W/=2}function ht(Ot,Zt){return He===1?Ot[Zt]:Ot.readUInt16BE(Zt*He)}let Ct;if(Ne){let Ot=-1;for(Ct=W;Ct<gt;Ct++)if(ht(U,Ct)===ht($,Ot===-1?0:Ct-Ot)){if(Ot===-1&&(Ot=Ct),Ct-Ot+1===Gt)return Ot*He}else Ot!==-1&&(Ct-=Ct-Ot),Ot=-1}else for(W+Gt>gt&&(W=gt-Gt),Ct=W;Ct>=0;Ct--){let Ot=!0;for(let Zt=0;Zt<Gt;Zt++)if(ht(U,Ct+Zt)!==ht($,Zt)){Ot=!1;break}if(Ot)return Ct}return-1}P.prototype.includes=function($,W,he){return this.indexOf($,W,he)!==-1},P.prototype.indexOf=function($,W,he){return Fe(this,$,W,he,!0)},P.prototype.lastIndexOf=function($,W,he){return Fe(this,$,W,he,!1)};function Te(U,$,W,he){W=Number(W)||0;const Ne=U.length-W;he?(he=Number(he),he>Ne&&(he=Ne)):he=Ne;const He=$.length;he>He/2&&(he=He/2);let gt;for(gt=0;gt<he;++gt){const Gt=parseInt($.substr(gt*2,2),16);if(De(Gt))return gt;U[W+gt]=Gt}return gt}function Ue(U,$,W,he){return st(ft($,U.length-W),U,W,he)}function Ve(U,$,W,he){return st(vt($),U,W,he)}function Ee(U,$,W,he){return st($e($),U,W,he)}function Ae(U,$,W,he){return st(j($,U.length-W),U,W,he)}P.prototype.write=function($,W,he,Ne){if(W===void 0)Ne="utf8",he=this.length,W=0;else if(he===void 0&&typeof W=="string")Ne=W,he=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(he)?(he=he>>>0,Ne===void 0&&(Ne="utf8")):(Ne=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const He=this.length-W;if((he===void 0||he>He)&&(he=He),$.length>0&&(he<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ne||(Ne="utf8");let gt=!1;for(;;)switch(Ne){case"hex":return Te(this,$,W,he);case"utf8":case"utf-8":return Ue(this,$,W,he);case"ascii":case"latin1":case"binary":return Ve(this,$,W,he);case"base64":return Ee(this,$,W,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae(this,$,W,he);default:if(gt)throw new TypeError("Unknown encoding: "+Ne);Ne=(""+Ne).toLowerCase(),gt=!0}},P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(U,$,W){return $===0&&W===U.length?E.fromByteArray(U):E.fromByteArray(U.slice($,W))}function Ce(U,$,W){W=Math.min(U.length,W);const he=[];let Ne=$;for(;Ne<W;){const He=U[Ne];let gt=null,Gt=He>239?4:He>223?3:He>191?2:1;if(Ne+Gt<=W){let ht,Ct,Ot,Zt;switch(Gt){case 1:He<128&&(gt=He);break;case 2:ht=U[Ne+1],(ht&192)===128&&(Zt=(He&31)<<6|ht&63,Zt>127&&(gt=Zt));break;case 3:ht=U[Ne+1],Ct=U[Ne+2],(ht&192)===128&&(Ct&192)===128&&(Zt=(He&15)<<12|(ht&63)<<6|Ct&63,Zt>2047&&(Zt<55296||Zt>57343)&&(gt=Zt));break;case 4:ht=U[Ne+1],Ct=U[Ne+2],Ot=U[Ne+3],(ht&192)===128&&(Ct&192)===128&&(Ot&192)===128&&(Zt=(He&15)<<18|(ht&63)<<12|(Ct&63)<<6|Ot&63,Zt>65535&&Zt<1114112&&(gt=Zt))}}gt===null?(gt=65533,Gt=1):gt>65535&&(gt-=65536,he.push(gt>>>10&1023|55296),gt=56320|gt&1023),he.push(gt),Ne+=Gt}return se(he)}const Re=4096;function se(U){const $=U.length;if($<=Re)return String.fromCharCode.apply(String,U);let W="",he=0;for(;he<$;)W+=String.fromCharCode.apply(String,U.slice(he,he+=Re));return W}function ie(U,$,W){let he="";W=Math.min(U.length,W);for(let Ne=$;Ne<W;++Ne)he+=String.fromCharCode(U[Ne]&127);return he}function J(U,$,W){let he="";W=Math.min(U.length,W);for(let Ne=$;Ne<W;++Ne)he+=String.fromCharCode(U[Ne]);return he}function xe(U,$,W){const he=U.length;(!$||$<0)&&($=0),(!W||W<0||W>he)&&(W=he);let Ne="";for(let He=$;He<W;++He)Ne+=Je[U[He]];return Ne}function Me(U,$,W){const he=U.slice($,W);let Ne="";for(let He=0;He<he.length-1;He+=2)Ne+=String.fromCharCode(he[He]+he[He+1]*256);return Ne}P.prototype.slice=function($,W){const he=this.length;$=~~$,W=W===void 0?he:~~W,$<0?($+=he,$<0&&($=0)):$>he&&($=he),W<0?(W+=he,W<0&&(W=0)):W>he&&(W=he),W<$&&(W=$);const Ne=this.subarray($,W);return Object.setPrototypeOf(Ne,P.prototype),Ne};function Se(U,$,W){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+$>W)throw new RangeError("Trying to access beyond buffer length")}P.prototype.readUintLE=P.prototype.readUIntLE=function($,W,he){$=$>>>0,W=W>>>0,he||Se($,W,this.length);let Ne=this[$],He=1,gt=0;for(;++gt<W&&(He*=256);)Ne+=this[$+gt]*He;return Ne},P.prototype.readUintBE=P.prototype.readUIntBE=function($,W,he){$=$>>>0,W=W>>>0,he||Se($,W,this.length);let Ne=this[$+--W],He=1;for(;W>0&&(He*=256);)Ne+=this[$+--W]*He;return Ne},P.prototype.readUint8=P.prototype.readUInt8=function($,W){return $=$>>>0,W||Se($,1,this.length),this[$]},P.prototype.readUint16LE=P.prototype.readUInt16LE=function($,W){return $=$>>>0,W||Se($,2,this.length),this[$]|this[$+1]<<8},P.prototype.readUint16BE=P.prototype.readUInt16BE=function($,W){return $=$>>>0,W||Se($,2,this.length),this[$]<<8|this[$+1]},P.prototype.readUint32LE=P.prototype.readUInt32LE=function($,W){return $=$>>>0,W||Se($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+this[$+3]*16777216},P.prototype.readUint32BE=P.prototype.readUInt32BE=function($,W){return $=$>>>0,W||Se($,4,this.length),this[$]*16777216+(this[$+1]<<16|this[$+2]<<8|this[$+3])},P.prototype.readBigUInt64LE=It(function($){$=$>>>0,Oe($,"offset");const W=this[$],he=this[$+7];(W===void 0||he===void 0)&&ye($,this.length-8);const Ne=W+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24,He=this[++$]+this[++$]*2**8+this[++$]*2**16+he*2**24;return BigInt(Ne)+(BigInt(He)<<BigInt(32))}),P.prototype.readBigUInt64BE=It(function($){$=$>>>0,Oe($,"offset");const W=this[$],he=this[$+7];(W===void 0||he===void 0)&&ye($,this.length-8);const Ne=W*2**24+this[++$]*2**16+this[++$]*2**8+this[++$],He=this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+he;return(BigInt(Ne)<<BigInt(32))+BigInt(He)}),P.prototype.readIntLE=function($,W,he){$=$>>>0,W=W>>>0,he||Se($,W,this.length);let Ne=this[$],He=1,gt=0;for(;++gt<W&&(He*=256);)Ne+=this[$+gt]*He;return He*=128,Ne>=He&&(Ne-=Math.pow(2,8*W)),Ne},P.prototype.readIntBE=function($,W,he){$=$>>>0,W=W>>>0,he||Se($,W,this.length);let Ne=W,He=1,gt=this[$+--Ne];for(;Ne>0&&(He*=256);)gt+=this[$+--Ne]*He;return He*=128,gt>=He&&(gt-=Math.pow(2,8*W)),gt},P.prototype.readInt8=function($,W){return $=$>>>0,W||Se($,1,this.length),this[$]&128?(255-this[$]+1)*-1:this[$]},P.prototype.readInt16LE=function($,W){$=$>>>0,W||Se($,2,this.length);const he=this[$]|this[$+1]<<8;return he&32768?he|4294901760:he},P.prototype.readInt16BE=function($,W){$=$>>>0,W||Se($,2,this.length);const he=this[$+1]|this[$]<<8;return he&32768?he|4294901760:he},P.prototype.readInt32LE=function($,W){return $=$>>>0,W||Se($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},P.prototype.readInt32BE=function($,W){return $=$>>>0,W||Se($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},P.prototype.readBigInt64LE=It(function($){$=$>>>0,Oe($,"offset");const W=this[$],he=this[$+7];(W===void 0||he===void 0)&&ye($,this.length-8);const Ne=this[$+4]+this[$+5]*2**8+this[$+6]*2**16+(he<<24);return(BigInt(Ne)<<BigInt(32))+BigInt(W+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24)}),P.prototype.readBigInt64BE=It(function($){$=$>>>0,Oe($,"offset");const W=this[$],he=this[$+7];(W===void 0||he===void 0)&&ye($,this.length-8);const Ne=(W<<24)+this[++$]*2**16+this[++$]*2**8+this[++$];return(BigInt(Ne)<<BigInt(32))+BigInt(this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+he)}),P.prototype.readFloatLE=function($,W){return $=$>>>0,W||Se($,4,this.length),A.read(this,$,!0,23,4)},P.prototype.readFloatBE=function($,W){return $=$>>>0,W||Se($,4,this.length),A.read(this,$,!1,23,4)},P.prototype.readDoubleLE=function($,W){return $=$>>>0,W||Se($,8,this.length),A.read(this,$,!0,52,8)},P.prototype.readDoubleBE=function($,W){return $=$>>>0,W||Se($,8,this.length),A.read(this,$,!1,52,8)};function Ze(U,$,W,he,Ne,He){if(!P.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if($>Ne||$<He)throw new RangeError('"value" argument is out of bounds');if(W+he>U.length)throw new RangeError("Index out of range")}P.prototype.writeUintLE=P.prototype.writeUIntLE=function($,W,he,Ne){if($=+$,W=W>>>0,he=he>>>0,!Ne){const Gt=Math.pow(2,8*he)-1;Ze(this,$,W,he,Gt,0)}let He=1,gt=0;for(this[W]=$&255;++gt<he&&(He*=256);)this[W+gt]=$/He&255;return W+he},P.prototype.writeUintBE=P.prototype.writeUIntBE=function($,W,he,Ne){if($=+$,W=W>>>0,he=he>>>0,!Ne){const Gt=Math.pow(2,8*he)-1;Ze(this,$,W,he,Gt,0)}let He=he-1,gt=1;for(this[W+He]=$&255;--He>=0&&(gt*=256);)this[W+He]=$/gt&255;return W+he},P.prototype.writeUint8=P.prototype.writeUInt8=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,1,255,0),this[W]=$&255,W+1},P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,2,65535,0),this[W]=$&255,this[W+1]=$>>>8,W+2},P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,2,65535,0),this[W]=$>>>8,this[W+1]=$&255,W+2},P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,4,4294967295,0),this[W+3]=$>>>24,this[W+2]=$>>>16,this[W+1]=$>>>8,this[W]=$&255,W+4},P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,4,4294967295,0),this[W]=$>>>24,this[W+1]=$>>>16,this[W+2]=$>>>8,this[W+3]=$&255,W+4};function Et(U,$,W,he,Ne){ce($,he,Ne,U,W,7);let He=Number($&BigInt(4294967295));U[W++]=He,He=He>>8,U[W++]=He,He=He>>8,U[W++]=He,He=He>>8,U[W++]=He;let gt=Number($>>BigInt(32)&BigInt(4294967295));return U[W++]=gt,gt=gt>>8,U[W++]=gt,gt=gt>>8,U[W++]=gt,gt=gt>>8,U[W++]=gt,W}function at(U,$,W,he,Ne){ce($,he,Ne,U,W,7);let He=Number($&BigInt(4294967295));U[W+7]=He,He=He>>8,U[W+6]=He,He=He>>8,U[W+5]=He,He=He>>8,U[W+4]=He;let gt=Number($>>BigInt(32)&BigInt(4294967295));return U[W+3]=gt,gt=gt>>8,U[W+2]=gt,gt=gt>>8,U[W+1]=gt,gt=gt>>8,U[W]=gt,W+8}P.prototype.writeBigUInt64LE=It(function($,W=0){return Et(this,$,W,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeBigUInt64BE=It(function($,W=0){return at(this,$,W,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeIntLE=function($,W,he,Ne){if($=+$,W=W>>>0,!Ne){const ht=Math.pow(2,8*he-1);Ze(this,$,W,he,ht-1,-ht)}let He=0,gt=1,Gt=0;for(this[W]=$&255;++He<he&&(gt*=256);)$<0&&Gt===0&&this[W+He-1]!==0&&(Gt=1),this[W+He]=($/gt>>0)-Gt&255;return W+he},P.prototype.writeIntBE=function($,W,he,Ne){if($=+$,W=W>>>0,!Ne){const ht=Math.pow(2,8*he-1);Ze(this,$,W,he,ht-1,-ht)}let He=he-1,gt=1,Gt=0;for(this[W+He]=$&255;--He>=0&&(gt*=256);)$<0&&Gt===0&&this[W+He+1]!==0&&(Gt=1),this[W+He]=($/gt>>0)-Gt&255;return W+he},P.prototype.writeInt8=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,1,127,-128),$<0&&($=255+$+1),this[W]=$&255,W+1},P.prototype.writeInt16LE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,2,32767,-32768),this[W]=$&255,this[W+1]=$>>>8,W+2},P.prototype.writeInt16BE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,2,32767,-32768),this[W]=$>>>8,this[W+1]=$&255,W+2},P.prototype.writeInt32LE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,4,2147483647,-2147483648),this[W]=$&255,this[W+1]=$>>>8,this[W+2]=$>>>16,this[W+3]=$>>>24,W+4},P.prototype.writeInt32BE=function($,W,he){return $=+$,W=W>>>0,he||Ze(this,$,W,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[W]=$>>>24,this[W+1]=$>>>16,this[W+2]=$>>>8,this[W+3]=$&255,W+4},P.prototype.writeBigInt64LE=It(function($,W=0){return Et(this,$,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),P.prototype.writeBigInt64BE=It(function($,W=0){return at(this,$,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _t(U,$,W,he,Ne,He){if(W+he>U.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Nt(U,$,W,he,Ne){return $=+$,W=W>>>0,Ne||_t(U,$,W,4),A.write(U,$,W,he,23,4),W+4}P.prototype.writeFloatLE=function($,W,he){return Nt(this,$,W,!0,he)},P.prototype.writeFloatBE=function($,W,he){return Nt(this,$,W,!1,he)};function Rt(U,$,W,he,Ne){return $=+$,W=W>>>0,Ne||_t(U,$,W,8),A.write(U,$,W,he,52,8),W+8}P.prototype.writeDoubleLE=function($,W,he){return Rt(this,$,W,!0,he)},P.prototype.writeDoubleBE=function($,W,he){return Rt(this,$,W,!1,he)},P.prototype.copy=function($,W,he,Ne){if(!P.isBuffer($))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Ne&&Ne!==0&&(Ne=this.length),W>=$.length&&(W=$.length),W||(W=0),Ne>0&&Ne<he&&(Ne=he),Ne===he||$.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Ne<0)throw new RangeError("sourceEnd out of bounds");Ne>this.length&&(Ne=this.length),$.length-W<Ne-he&&(Ne=$.length-W+he);const He=Ne-he;return this===$&&typeof O.prototype.copyWithin=="function"?this.copyWithin(W,he,Ne):O.prototype.set.call($,this.subarray(he,Ne),W),He},P.prototype.fill=function($,W,he,Ne){if(typeof $=="string"){if(typeof W=="string"?(Ne=W,W=0,he=this.length):typeof he=="string"&&(Ne=he,he=this.length),Ne!==void 0&&typeof Ne!="string")throw new TypeError("encoding must be a string");if(typeof Ne=="string"&&!P.isEncoding(Ne))throw new TypeError("Unknown encoding: "+Ne);if($.length===1){const gt=$.charCodeAt(0);(Ne==="utf8"&&gt<128||Ne==="latin1")&&($=gt)}}else typeof $=="number"?$=$&255:typeof $=="boolean"&&($=Number($));if(W<0||this.length<W||this.length<he)throw new RangeError("Out of range index");if(he<=W)return this;W=W>>>0,he=he===void 0?this.length:he>>>0,$||($=0);let He;if(typeof $=="number")for(He=W;He<he;++He)this[He]=$;else{const gt=P.isBuffer($)?$:P.from($,Ne),Gt=gt.length;if(Gt===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(He=0;He<he-W;++He)this[He+W]=gt[He%Gt]}return this};const Kt={};function pe(U,$,W){Kt[U]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:$.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(Ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ne,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(U,$){return`The "${U}" argument must be of type number. Received type ${typeof $}`},TypeError),pe("ERR_OUT_OF_RANGE",function(U,$,W){let he=`The value of "${U}" is out of range.`,Ne=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Ne=R(String(W)):typeof W=="bigint"&&(Ne=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Ne=R(Ne)),Ne+="n"),he+=` It must be ${$}. Received ${Ne}`,he},RangeError);function R(U){let $="",W=U.length;const he=U[0]==="-"?1:0;for(;W>=he+4;W-=3)$=`_${U.slice(W-3,W)}${$}`;return`${U.slice(0,W)}${$}`}function q(U,$,W){Oe($,"offset"),(U[$]===void 0||U[$+W]===void 0)&&ye($,U.length-(W+1))}function ce(U,$,W,he,Ne,He){if(U>W||U<$){const gt=typeof $=="bigint"?"n":"";let Gt;throw $===0||$===BigInt(0)?Gt=`>= 0${gt} and < 2${gt} ** ${(He+1)*8}${gt}`:Gt=`>= -(2${gt} ** ${(He+1)*8-1}${gt}) and < 2 ** ${(He+1)*8-1}${gt}`,new Kt.ERR_OUT_OF_RANGE("value",Gt,U)}q(he,Ne,He)}function Oe(U,$){if(typeof U!="number")throw new Kt.ERR_INVALID_ARG_TYPE($,"number",U)}function ye(U,$,W){throw Math.floor(U)!==U?(Oe(U,W),new Kt.ERR_OUT_OF_RANGE("offset","an integer",U)):$<0?new Kt.ERR_BUFFER_OUT_OF_BOUNDS:new Kt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${$}`,U)}const ke=/[^+/0-9A-Za-z-_]/g;function oe(U){if(U=U.split("=")[0],U=U.trim().replace(ke,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function ft(U,$){$=$||1/0;let W;const he=U.length;let Ne=null;const He=[];for(let gt=0;gt<he;++gt){if(W=U.charCodeAt(gt),W>55295&&W<57344){if(!Ne){if(W>56319){($-=3)>-1&&He.push(239,191,189);continue}else if(gt+1===he){($-=3)>-1&&He.push(239,191,189);continue}Ne=W;continue}if(W<56320){($-=3)>-1&&He.push(239,191,189),Ne=W;continue}W=(Ne-55296<<10|W-56320)+65536}else Ne&&($-=3)>-1&&He.push(239,191,189);if(Ne=null,W<128){if(($-=1)<0)break;He.push(W)}else if(W<2048){if(($-=2)<0)break;He.push(W>>6|192,W&63|128)}else if(W<65536){if(($-=3)<0)break;He.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if(($-=4)<0)break;He.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return He}function vt(U){const $=[];for(let W=0;W<U.length;++W)$.push(U.charCodeAt(W)&255);return $}function j(U,$){let W,he,Ne;const He=[];for(let gt=0;gt<U.length&&!(($-=2)<0);++gt)W=U.charCodeAt(gt),he=W>>8,Ne=W%256,He.push(Ne),He.push(he);return He}function $e(U){return E.toByteArray(oe(U))}function st(U,$,W,he){let Ne;for(Ne=0;Ne<he&&!(Ne+W>=$.length||Ne>=U.length);++Ne)$[Ne+W]=U[Ne];return Ne}function ge(U,$){return U instanceof $||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===$.name}function De(U){return U!==U}const Je=function(){const U="0123456789abcdef",$=new Array(256);for(let W=0;W<16;++W){const he=W*16;for(let Ne=0;Ne<16;++Ne)$[he+Ne]=U[W]+U[Ne]}return $}();function It(U){return typeof BigInt>"u"?me:U}function me(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(cx)),cx}var dx,oN;function Hr(){if(oN)return dx;oN=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return dx={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},dx}var fx={exports:{}},hx,sN;function a8(){return sN||(sN=1,hx={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),hx}var px,lN;function pi(){if(lN)return px;lN=1;const{format:e,inspect:t}=a8(),{AggregateError:n}=Hr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function c(_,x){if(!_)throw new u.ERR_INTERNAL_ASSERTION(x)}function f(_){let x="",S=_.length;const E=_[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${_.slice(S-3,S)}${x}`;return`${_.slice(0,S)}${x}`}function h(_,x,S){if(typeof x=="function")return c(x.length<=S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return c(E===S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function m(_,x,S){S||(S=Error);class E extends S{constructor(...k){super(h(_,x,k))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,u[_]=E}function g(_){const x=s+_.name;return Object.defineProperty(_,"name",{value:x}),_}function v(_,x){if(_&&x&&_!==x){if(Array.isArray(x.errors))return x.errors.push(_),x;const S=new r([x,_],x.message);return S.code=x.code,S}return _||x}class w extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(_,x,S)=>{c(typeof _=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const A=[],k=[],D=[];for(const N of x)c(typeof N=="string","All expected entries have to be of type string"),i.includes(N)?A.push(N.toLowerCase()):o.test(N)?k.push(N):(c(N!=="object",'The value "object" should be written as "Object"'),D.push(N));if(k.length>0){const N=A.indexOf("object");N!==-1&&(A.splice(A,N,1),k.push("Object"))}if(A.length>0){switch(A.length){case 1:E+=`of type ${A[0]}`;break;case 2:E+=`one of type ${A[0]} or ${A[1]}`;break;default:{const N=A.pop();E+=`one of type ${A.join(", ")}, or ${N}`}}(k.length>0||D.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const N=k.pop();E+=`an instance of ${k.join(", ")}, or ${N}`}}D.length>0&&(E+=" or ")}switch(D.length){case 0:break;case 1:D[0].toLowerCase()!==D[0]&&(E+="an "),E+=`${D[0]}`;break;case 2:E+=`one of ${D[0]} or ${D[1]}`;break;default:{const N=D.pop();E+=`one of ${D.join(", ")}, or ${N}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var O;if((O=S.constructor)!==null&&O!==void 0&&O.name)E+=`. Received an instance of ${S.constructor.name}`;else{const N=t(S,{depth:-1});E+=`. Received ${N}`}}else{let N=t(S,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),E+=`. Received type ${typeof S} (${N})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(_,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${S}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(_,x,S)=>{var E;const A=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${_} to be returned from the "${x}" function but got ${A}.`},TypeError),m("ERR_MISSING_ARGS",(..._)=>{c(_.length>0,"At least one arg needs to be specified");let x;const S=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${_[0]} argument`;break;case 2:x+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();x+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(_,x,S)=>{c(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=f(String(S));else if(typeof S=="bigint"){E=String(S);const A=BigInt(2)**BigInt(32);(S>A||S<-A)&&(E=f(E)),E+="n"}else E=t(S);return`The value of "${_}" is out of range. It must be ${x}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),px={AbortError:w,aggregateTwoErrors:g(v),hideStackFrames:g,codes:u},px}var Up={exports:{}},uN;function Rm(){if(uN)return Up.exports;uN=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Up.exports=e,Up.exports.AbortSignal=t,Up.exports.default=e,Up.exports}var Ty={exports:{}},cN;function Kv(){if(cN)return Ty.exports;cN=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,D,O){return Function.prototype.apply.call(k,D,O)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(A){console&&console.warn&&console.warn(A)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}Ty.exports=i,Ty.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(A){if(typeof A!="number"||A<0||a(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");o=A}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function u(A){return A._maxListeners===void 0?i.defaultMaxListeners:A._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(k){for(var D=[],O=1;O<arguments.length;O++)D.push(arguments[O]);var N=k==="error",z=this._events;if(z!==void 0)N=N&&z.error===void 0;else if(!N)return!1;if(N){var H;if(D.length>0&&(H=D[0]),H instanceof Error)throw H;var ee=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw ee.context=H,ee}var P=z[k];if(P===void 0)return!1;if(typeof P=="function")t(P,this,D);else for(var Z=P.length,V=v(P,Z),O=0;O<Z;++O)t(V[O],this,D);return!0};function c(A,k,D,O){var N,z,H;if(s(D),z=A._events,z===void 0?(z=A._events=Object.create(null),A._eventsCount=0):(z.newListener!==void 0&&(A.emit("newListener",k,D.listener?D.listener:D),z=A._events),H=z[k]),H===void 0)H=z[k]=D,++A._eventsCount;else if(typeof H=="function"?H=z[k]=O?[D,H]:[H,D]:O?H.unshift(D):H.push(D),N=u(A),N>0&&H.length>N&&!H.warned){H.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=A,ee.type=k,ee.count=H.length,r(ee)}return A}i.prototype.addListener=function(k,D){return c(this,k,D,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,D){return c(this,k,D,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(A,k,D){var O={fired:!1,wrapFn:void 0,target:A,type:k,listener:D},N=f.bind(O);return N.listener=D,O.wrapFn=N,N}i.prototype.once=function(k,D){return s(D),this.on(k,h(this,k,D)),this},i.prototype.prependOnceListener=function(k,D){return s(D),this.prependListener(k,h(this,k,D)),this},i.prototype.removeListener=function(k,D){var O,N,z,H,ee;if(s(D),N=this._events,N===void 0)return this;if(O=N[k],O===void 0)return this;if(O===D||O.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete N[k],N.removeListener&&this.emit("removeListener",k,O.listener||D));else if(typeof O!="function"){for(z=-1,H=O.length-1;H>=0;H--)if(O[H]===D||O[H].listener===D){ee=O[H].listener,z=H;break}if(z<0)return this;z===0?O.shift():w(O,z),O.length===1&&(N[k]=O[0]),N.removeListener!==void 0&&this.emit("removeListener",k,ee||D)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var D,O,N;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[k]),this;if(arguments.length===0){var z=Object.keys(O),H;for(N=0;N<z.length;++N)H=z[N],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=O[k],typeof D=="function")this.removeListener(k,D);else if(D!==void 0)for(N=D.length-1;N>=0;N--)this.removeListener(k,D[N]);return this};function m(A,k,D){var O=A._events;if(O===void 0)return[];var N=O[k];return N===void 0?[]:typeof N=="function"?D?[N.listener||N]:[N]:D?_(N):v(N,N.length)}i.prototype.listeners=function(k){return m(this,k,!0)},i.prototype.rawListeners=function(k){return m(this,k,!1)},i.listenerCount=function(A,k){return typeof A.listenerCount=="function"?A.listenerCount(k):g.call(A,k)},i.prototype.listenerCount=g;function g(A){var k=this._events;if(k!==void 0){var D=k[A];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(A,k){for(var D=new Array(k),O=0;O<k;++O)D[O]=A[O];return D}function w(A,k){for(;k+1<A.length;k++)A[k]=A[k+1];A.pop()}function _(A){for(var k=new Array(A.length),D=0;D<k.length;++D)k[D]=A[D].listener||A[D];return k}function x(A,k){return new Promise(function(D,O){function N(H){A.removeListener(k,z),O(H)}function z(){typeof A.removeListener=="function"&&A.removeListener("error",N),D([].slice.call(arguments))}E(A,k,z,{once:!0}),k!=="error"&&S(A,N,{once:!0})})}function S(A,k,D){typeof A.on=="function"&&E(A,"error",k,D)}function E(A,k,D,O){if(typeof A.on=="function")O.once?A.once(k,D):A.on(k,D);else if(typeof A.addEventListener=="function")A.addEventListener(k,function N(z){O.once&&A.removeEventListener(k,N),D(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return Ty.exports}var dN;function ki(){return dN||(dN=1,function(e){const t=ec(),{format:n,inspect:r}=a8(),{codes:{ERR_INVALID_ARG_TYPE:a}}=pi(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Hr(),u=globalThis.AbortSignal||Rm().AbortSignal,c=globalThis.AbortController||Rm().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(w,_)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new a(_,"AbortSignal",w)},v=(w,_)=>{if(typeof w!="function")throw new a(_,"Function",w)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(w){let _=!1;return function(...x){_||(_=!0,w.apply(this,x))}},createDeferredPromise:function(){let w,_;return{promise:new Promise((S,E)=>{w=S,_=E}),resolve:w,reject:_}},promisify(w){return new Promise((_,x)=>{w((S,...E)=>S?x(S):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(w){return w instanceof f},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:m,deprecate(w,_){return w},addAbortListener:Kv().addAbortListener||function(_,x){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),v(x,"listener");let S;return _.aborted?queueMicrotask(()=>x()):(_.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{_.removeEventListener("abort",x)}),{__proto__:null,[s](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:u.any||function(_){if(_.length===1)return _[0];const x=new c,S=()=>x.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(fx)),fx.exports}var Ry={},mx,fN;function b0(){if(fN)return mx;fN=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=Hr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:w,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=pi(),{normalizeEncoding:A}=ki(),{isAsyncFunction:k,isArrayBufferView:D}=ki().types,O={};function N(J){return J===(J|0)}function z(J){return J===J>>>0}const H=/^[0-7]+$/,ee="must be a 32-bit unsigned integer or an octal string";function P(J,xe,Me){if(typeof J>"u"&&(J=Me),typeof J=="string"){if(f(H,J)===null)throw new x(xe,J,ee);J=u(J,8)}return fe(J,xe),J}const Z=v((J,xe,Me=s,Se=o)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);if(J<Me||J>Se)throw new S(xe,`>= ${Me} && <= ${Se}`,J)}),V=v((J,xe,Me=-2147483648,Se=2147483647)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);if(J<Me||J>Se)throw new S(xe,`>= ${Me} && <= ${Se}`,J)}),fe=v((J,xe,Me=!1)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);const Se=Me?1:0,Ze=4294967295;if(J<Se||J>Ze)throw new S(xe,`>= ${Se} && <= ${Ze}`,J)});function ue(J,xe){if(typeof J!="string")throw new _(xe,"string",J)}function Y(J,xe,Me=void 0,Se){if(typeof J!="number")throw new _(xe,"number",J);if(Me!=null&&J<Me||Se!=null&&J>Se||(Me!=null||Se!=null)&&i(J))throw new S(xe,`${Me!=null?`>= ${Me}`:""}${Me!=null&&Se!=null?" && ":""}${Se!=null?`<= ${Se}`:""}`,J)}const X=v((J,xe,Me)=>{if(!t(Me,J)){const Ze="must be one of: "+n(r(Me,Et=>typeof Et=="string"?`'${Et}'`:h(Et)),", ");throw new x(xe,J,Ze)}});function ae(J,xe){if(typeof J!="boolean")throw new _(xe,"boolean",J)}function G(J,xe,Me){return J==null||!c(J,xe)?Me:J[xe]}const Q=v((J,xe,Me=null)=>{const Se=G(Me,"allowArray",!1),Ze=G(Me,"allowFunction",!1);if(!G(Me,"nullable",!1)&&J===null||!Se&&e(J)||typeof J!="object"&&(!Ze||typeof J!="function"))throw new _(xe,"Object",J)}),ne=v((J,xe)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new _(xe,"a dictionary",J)}),de=v((J,xe,Me=0)=>{if(!e(J))throw new _(xe,"Array",J);if(J.length<Me){const Se=`must be longer than ${Me}`;throw new x(xe,J,Se)}});function _e(J,xe){de(J,xe);for(let Me=0;Me<J.length;Me++)ue(J[Me],`${xe}[${Me}]`)}function ve(J,xe){de(J,xe);for(let Me=0;Me<J.length;Me++)ae(J[Me],`${xe}[${Me}]`)}function Pe(J,xe){de(J,xe);for(let Me=0;Me<J.length;Me++){const Se=J[Me],Ze=`${xe}[${Me}]`;if(Se==null)throw new _(Ze,"AbortSignal",Se);Ve(Se,Ze)}}function Fe(J,xe="signal"){if(ue(J,xe),O[J]===void 0)throw O[m(J)]!==void 0?new E(J+" (signals must use all capital letters)"):new E(J)}const Ie=v((J,xe="buffer")=>{if(!D(J))throw new _(xe,["Buffer","TypedArray","DataView"],J)});function Te(J,xe){const Me=A(xe),Se=J.length;if(Me==="hex"&&Se%2!==0)throw new x("encoding",xe,`is invalid for data of length ${Se}`)}function Ue(J,xe="Port",Me=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&g(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Me)throw new w(xe,J,Me);return J|0}const Ve=v((J,xe)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new _(xe,"AbortSignal",J)}),Ee=v((J,xe)=>{if(typeof J!="function")throw new _(xe,"Function",J)}),Ae=v((J,xe)=>{if(typeof J!="function"||k(J))throw new _(xe,"Function",J)}),B=v((J,xe)=>{if(J!==void 0)throw new _(xe,"undefined",J)});function Ce(J,xe,Me){if(!t(Me,J))throw new _(xe,`('${n(Me,"|")}')`,J)}const Re=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function se(J,xe){if(typeof J>"u"||!f(Re,J))throw new x(xe,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(J){if(typeof J=="string")return se(J,"hints"),J;if(e(J)){const xe=J.length;let Me="";if(xe===0)return Me;for(let Se=0;Se<xe;Se++){const Ze=J[Se];se(Ze,"hints"),Me+=Ze,Se!==xe-1&&(Me+=", ")}return Me}throw new x("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return mx={isInt32:N,isUint32:z,parseFileMode:P,validateArray:de,validateStringArray:_e,validateBooleanArray:ve,validateAbortSignalArray:Pe,validateBoolean:ae,validateBuffer:Ie,validateDictionary:ne,validateEncoding:Te,validateFunction:Ee,validateInt32:V,validateInteger:Z,validateNumber:Y,validateObject:Q,validateOneOf:X,validatePlainFunction:Ae,validatePort:Ue,validateSignalName:Fe,validateString:ue,validateUint32:fe,validateUndefined:B,validateUnion:Ce,validateAbortSignal:Ve,validateLinkHeaderValue:ie},mx}var Ny={exports:{}},gx={},hN;function yd(){return hN||(hN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function u(A){if(a===setTimeout)return setTimeout(A,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(A,0);try{return a(A,0)}catch{try{return a.call(null,A,0)}catch{return a.call(this,A,0)}}}function c(A){if(i===clearTimeout)return clearTimeout(A);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(A);try{return i(A)}catch{try{return i.call(null,A)}catch{return i.call(this,A)}}}var f=[],h=!1,m,g=-1;function v(){!h||!m||(h=!1,m.length?f=m.concat(f):g=-1,f.length&&w())}function w(){if(!h){var A=u(v);h=!0;for(var k=f.length;k;){for(m=f,f=[];++g<k;)m&&m[g].run();g=-1,k=f.length}m=null,h=!1,c(A)}}r.nextTick=function(A){var k=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)k[D-1]=arguments[D];f.push(new _(A,k)),f.length===1&&!h&&u(w)};function _(A,k){this.fun=A,this.array=k}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(A){return[]},r.binding=function(A){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(A){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(gx)),gx}var yx,pN;function Fl(){if(pN)return yx;pN=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Hr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),u=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function f(G,Q=!1){var ne;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!Q||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((ne=G._readableState)===null||ne===void 0?void 0:ne.readable)!==!1)&&(!G._writableState||G._readableState))}function h(G){var Q;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((Q=G._writableState)===null||Q===void 0?void 0:Q.writable)!==!1))}function m(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function g(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function v(G){return!!(G&&!g(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function w(G){return!!(G&&!g(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function _(G){return!!(G&&!g(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function x(G){return v(G)||w(G)||_(G)}function S(G,Q){return G==null?!1:Q===!0?typeof G[e]=="function":Q===!1?typeof G[t]=="function":typeof G[e]=="function"||typeof G[t]=="function"}function E(G){if(!g(G))return null;const Q=G._writableState,ne=G._readableState,de=Q||ne;return!!(G.destroyed||G[r]||de!=null&&de.destroyed)}function A(G){if(!h(G))return null;if(G.writableEnded===!0)return!0;const Q=G._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.ended)!="boolean"?null:Q.ended}function k(G,Q){if(!h(G))return null;if(G.writableFinished===!0)return!0;const ne=G._writableState;return ne!=null&&ne.errored?!1:typeof(ne==null?void 0:ne.finished)!="boolean"?null:!!(ne.finished||Q===!1&&ne.ended===!0&&ne.length===0)}function D(G){if(!f(G))return null;if(G.readableEnded===!0)return!0;const Q=G._readableState;return!Q||Q.errored?!1:typeof(Q==null?void 0:Q.ended)!="boolean"?null:Q.ended}function O(G,Q){if(!f(G))return null;const ne=G._readableState;return ne!=null&&ne.errored?!1:typeof(ne==null?void 0:ne.endEmitted)!="boolean"?null:!!(ne.endEmitted||Q===!1&&ne.ended===!0&&ne.length===0)}function N(G){return G&&G[i]!=null?G[i]:typeof(G==null?void 0:G.readable)!="boolean"?null:E(G)?!1:f(G)&&G.readable&&!O(G)}function z(G){return G&&G[o]!=null?G[o]:typeof(G==null?void 0:G.writable)!="boolean"?null:E(G)?!1:h(G)&&G.writable&&!A(G)}function H(G,Q){return g(G)?E(G)?!0:!((Q==null?void 0:Q.readable)!==!1&&N(G)||(Q==null?void 0:Q.writable)!==!1&&z(G)):null}function ee(G){var Q,ne;return g(G)?G.writableErrored?G.writableErrored:(Q=(ne=G._writableState)===null||ne===void 0?void 0:ne.errored)!==null&&Q!==void 0?Q:null:null}function P(G){var Q,ne;return g(G)?G.readableErrored?G.readableErrored:(Q=(ne=G._readableState)===null||ne===void 0?void 0:ne.errored)!==null&&Q!==void 0?Q:null:null}function Z(G){if(!g(G))return null;if(typeof G.closed=="boolean")return G.closed;const Q=G._writableState,ne=G._readableState;return typeof(Q==null?void 0:Q.closed)=="boolean"||typeof(ne==null?void 0:ne.closed)=="boolean"?(Q==null?void 0:Q.closed)||(ne==null?void 0:ne.closed):typeof G._closed=="boolean"&&V(G)?G._closed:null}function V(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function fe(G){return typeof G._sent100=="boolean"&&V(G)}function ue(G){var Q;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((Q=G.req)===null||Q===void 0?void 0:Q.upgradeOrConnect)===void 0}function Y(G){if(!g(G))return null;const Q=G._writableState,ne=G._readableState,de=Q||ne;return!de&&fe(G)||!!(de&&de.autoDestroy&&de.emitClose&&de.closed===!1)}function X(G){var Q;return!!(G&&((Q=G[s])!==null&&Q!==void 0?Q:G.readableDidRead||G.readableAborted))}function ae(G){var Q,ne,de,_e,ve,Pe,Fe,Ie,Te,Ue;return!!(G&&((Q=(ne=(de=(_e=(ve=(Pe=G[a])!==null&&Pe!==void 0?Pe:G.readableErrored)!==null&&ve!==void 0?ve:G.writableErrored)!==null&&_e!==void 0?_e:(Fe=G._readableState)===null||Fe===void 0?void 0:Fe.errorEmitted)!==null&&de!==void 0?de:(Ie=G._writableState)===null||Ie===void 0?void 0:Ie.errorEmitted)!==null&&ne!==void 0?ne:(Te=G._readableState)===null||Te===void 0?void 0:Te.errored)!==null&&Q!==void 0?Q:!((Ue=G._writableState)===null||Ue===void 0)&&Ue.errored))}return yx={isDestroyed:E,kIsDestroyed:r,isDisturbed:X,kIsDisturbed:s,isErrored:ae,kIsErrored:a,isReadable:N,kIsReadable:i,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:o,isClosed:Z,isDuplexNodeStream:m,isFinished:H,isIterable:S,isReadableNodeStream:f,isReadableStream:v,isReadableEnded:D,isReadableFinished:O,isReadableErrored:P,isNodeStream:g,isWebStream:x,isWritable:z,isWritableNodeStream:h,isWritableStream:w,isWritableEnded:A,isWritableFinished:k,isWritableErrored:ee,isServerRequest:ue,isServerResponse:fe,willEmitClose:Y,isTransformStream:_},yx}var mN;function tc(){if(mN)return Ny.exports;mN=1;const e=yd(),{AbortError:t,codes:n}=pi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=ki(),{validateAbortSignal:s,validateFunction:u,validateObject:c,validateBoolean:f}=b0(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=Hr(),{isClosed:v,isReadable:w,isReadableNodeStream:_,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:A,isWritableNodeStream:k,isWritableStream:D,isWritableFinished:O,isWritableErrored:N,isNodeStream:z,willEmitClose:H,kIsClosedPromise:ee}=Fl();let P;function Z(X){return X.setHeader&&typeof X.abort=="function"}const V=()=>{};function fe(X,ae,G){var Q,ne;if(arguments.length===2?(G=ae,ae=i):ae==null?ae=i:c(ae,"options"),u(G,"callback"),s(ae.signal,"options.signal"),G=o(G),x(X)||D(X))return ue(X,ae,G);if(!z(X))throw new r("stream",["ReadableStream","WritableStream","Stream"],X);const de=(Q=ae.readable)!==null&&Q!==void 0?Q:_(X),_e=(ne=ae.writable)!==null&&ne!==void 0?ne:k(X),ve=X._writableState,Pe=X._readableState,Fe=()=>{X.writable||Ue()};let Ie=H(X)&&_(X)===de&&k(X)===_e,Te=O(X,!1);const Ue=()=>{Te=!0,X.destroyed&&(Ie=!1),!(Ie&&(!X.readable||de))&&(!de||Ve)&&G.call(X)};let Ve=S(X,!1);const Ee=()=>{Ve=!0,X.destroyed&&(Ie=!1),!(Ie&&(!X.writable||_e))&&(!_e||Te)&&G.call(X)},Ae=J=>{G.call(X,J)};let B=v(X);const Ce=()=>{B=!0;const J=N(X)||E(X);if(J&&typeof J!="boolean")return G.call(X,J);if(de&&!Ve&&_(X,!0)&&!S(X,!1))return G.call(X,new a);if(_e&&!Te&&!O(X,!1))return G.call(X,new a);G.call(X)},Re=()=>{B=!0;const J=N(X)||E(X);if(J&&typeof J!="boolean")return G.call(X,J);G.call(X)},se=()=>{X.req.on("finish",Ue)};Z(X)?(X.on("complete",Ue),Ie||X.on("abort",Ce),X.req?se():X.on("request",se)):_e&&!ve&&(X.on("end",Fe),X.on("close",Fe)),!Ie&&typeof X.aborted=="boolean"&&X.on("aborted",Ce),X.on("end",Ee),X.on("finish",Ue),ae.error!==!1&&X.on("error",Ae),X.on("close",Ce),B?e.nextTick(Ce):ve!=null&&ve.errorEmitted||Pe!=null&&Pe.errorEmitted?Ie||e.nextTick(Re):(!de&&(!Ie||w(X))&&(Te||A(X)===!1)||!_e&&(!Ie||A(X))&&(Ve||w(X)===!1)||Pe&&X.req&&X.aborted)&&e.nextTick(Re);const ie=()=>{G=V,X.removeListener("aborted",Ce),X.removeListener("complete",Ue),X.removeListener("abort",Ce),X.removeListener("request",se),X.req&&X.req.removeListener("finish",Ue),X.removeListener("end",Fe),X.removeListener("close",Fe),X.removeListener("finish",Ue),X.removeListener("end",Ee),X.removeListener("error",Ae),X.removeListener("close",Ce)};if(ae.signal&&!B){const J=()=>{const xe=G;ie(),xe.call(X,new t(void 0,{cause:ae.signal.reason}))};if(ae.signal.aborted)e.nextTick(J);else{P=P||ki().addAbortListener;const xe=P(ae.signal,J),Me=G;G=o((...Se)=>{xe[g](),Me.apply(X,Se)})}}return ie}function ue(X,ae,G){let Q=!1,ne=V;if(ae.signal)if(ne=()=>{Q=!0,G.call(X,new t(void 0,{cause:ae.signal.reason}))},ae.signal.aborted)e.nextTick(ne);else{P=P||ki().addAbortListener;const _e=P(ae.signal,ne),ve=G;G=o((...Pe)=>{_e[g](),ve.apply(X,Pe)})}const de=(..._e)=>{Q||e.nextTick(()=>G.apply(X,_e))};return m(X[ee].promise,de,de),V}function Y(X,ae){var G;let Q=!1;return ae===null&&(ae=i),(G=ae)!==null&&G!==void 0&&G.cleanup&&(f(ae.cleanup,"cleanup"),Q=ae.cleanup),new h((ne,de)=>{const _e=fe(X,ae,ve=>{Q&&_e(),ve?de(ve):ne()})})}return Ny.exports=fe,Ny.exports.finished=Y,Ny.exports}var bx,gN;function bh(){if(gN)return bx;gN=1;const e=yd(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=pi(),{Symbol:a}=Hr(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:u}=Fl(),c=a("kDestroy"),f=a("kConstruct");function h(H,ee,P){H&&(H.stack,ee&&!ee.errored&&(ee.errored=H),P&&!P.errored&&(P.errored=H))}function m(H,ee){const P=this._readableState,Z=this._writableState,V=Z||P;return Z!=null&&Z.destroyed||P!=null&&P.destroyed?(typeof ee=="function"&&ee(),this):(h(H,Z,P),Z&&(Z.destroyed=!0),P&&(P.destroyed=!0),V.constructed?g(this,H,ee):this.once(c,function(fe){g(this,t(fe,H),ee)}),this)}function g(H,ee,P){let Z=!1;function V(fe){if(Z)return;Z=!0;const ue=H._readableState,Y=H._writableState;h(fe,Y,ue),Y&&(Y.closed=!0),ue&&(ue.closed=!0),typeof P=="function"&&P(fe),fe?e.nextTick(v,H,fe):e.nextTick(w,H)}try{H._destroy(ee||null,V)}catch(fe){V(fe)}}function v(H,ee){_(H,ee),w(H)}function w(H){const ee=H._readableState,P=H._writableState;P&&(P.closeEmitted=!0),ee&&(ee.closeEmitted=!0),(P!=null&&P.emitClose||ee!=null&&ee.emitClose)&&H.emit("close")}function _(H,ee){const P=H._readableState,Z=H._writableState;Z!=null&&Z.errorEmitted||P!=null&&P.errorEmitted||(Z&&(Z.errorEmitted=!0),P&&(P.errorEmitted=!0),H.emit("error",ee))}function x(){const H=this._readableState,ee=this._writableState;H&&(H.constructed=!0,H.closed=!1,H.closeEmitted=!1,H.destroyed=!1,H.errored=null,H.errorEmitted=!1,H.reading=!1,H.ended=H.readable===!1,H.endEmitted=H.readable===!1),ee&&(ee.constructed=!0,ee.destroyed=!1,ee.closed=!1,ee.closeEmitted=!1,ee.errored=null,ee.errorEmitted=!1,ee.finalCalled=!1,ee.prefinished=!1,ee.ended=ee.writable===!1,ee.ending=ee.writable===!1,ee.finished=ee.writable===!1)}function S(H,ee,P){const Z=H._readableState,V=H._writableState;if(V!=null&&V.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||V!=null&&V.autoDestroy?H.destroy(ee):ee&&(ee.stack,V&&!V.errored&&(V.errored=ee),Z&&!Z.errored&&(Z.errored=ee),P?e.nextTick(_,H,ee):_(H,ee))}function E(H,ee){if(typeof H._construct!="function")return;const P=H._readableState,Z=H._writableState;P&&(P.constructed=!1),Z&&(Z.constructed=!1),H.once(f,ee),!(H.listenerCount(f)>1)&&e.nextTick(A,H)}function A(H){let ee=!1;function P(Z){if(ee){S(H,Z??new n);return}ee=!0;const V=H._readableState,fe=H._writableState,ue=fe||V;V&&(V.constructed=!0),fe&&(fe.constructed=!0),ue.destroyed?H.emit(c,Z):Z?S(H,Z,!0):e.nextTick(k,H)}try{H._construct(Z=>{e.nextTick(P,Z)})}catch(Z){e.nextTick(P,Z)}}function k(H){H.emit(f)}function D(H){return(H==null?void 0:H.setHeader)&&typeof H.abort=="function"}function O(H){H.emit("close")}function N(H,ee){H.emit("error",ee),e.nextTick(O,H)}function z(H,ee){!H||o(H)||(!ee&&!s(H)&&(ee=new r),u(H)?(H.socket=null,H.destroy(ee)):D(H)?H.abort():D(H.req)?H.req.abort():typeof H.destroy=="function"?H.destroy(ee):typeof H.close=="function"?H.close():ee?e.nextTick(N,H,ee):e.nextTick(O,H),H.destroyed||(H[i]=!0))}return bx={construct:E,destroyer:z,destroy:m,undestroy:x,errorOrDestroy:S},bx}var vx,yN;function lk(){if(yN)return vx;yN=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Hr(),{EventEmitter:n}=Kv();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function u(w){i.writable&&i.write(w)===!1&&s.pause&&s.pause()}s.on("data",u);function c(){s.readable&&s.resume&&s.resume()}i.on("drain",c),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",m));let f=!1;function h(){f||(f=!0,i.end())}function m(){f||(f=!0,typeof i.destroy=="function"&&i.destroy())}function g(w){v(),n.listenerCount(this,"error")===0&&this.emit("error",w)}a(s,"error",g),a(i,"error",g);function v(){s.removeListener("data",u),i.removeListener("drain",c),s.removeListener("end",h),s.removeListener("close",m),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",v),s.removeListener("close",v),i.removeListener("close",v)}return s.on("end",v),s.on("close",v),i.on("close",v),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return vx={Stream:r,prependListener:a},vx}var wx={exports:{}},bN;function Zv(){return bN||(bN=1,function(e){const{SymbolDispose:t}=Hr(),{AbortError:n,codes:r}=pi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Fl(),s=tc(),{ERR_INVALID_ARG_TYPE:u}=r;let c;const f=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new u(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,g){if(f(m,"signal"),!a(g)&&!i(g))throw new u("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const g=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||ki().addAbortListener;const v=c(h,g);s(m,v[t])}return m}}(wx)),wx.exports}var _x,vN;function mX(){if(vN)return _x;vN=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Hr(),{Buffer:a}=ec(),{inspect:i}=ki();return _x=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=s+u.data;return c}concat(s){if(this.length===0)return a.alloc(0);const u=a.allocUnsafe(s>>>0);let c=this.head,f=0;for(;c;)n(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(s,u){const c=this.head.data;if(s<c.length){const f=c.slice(0,s);return this.head.data=c.slice(s),f}return s===c.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",c=this.head,f=0;do{const h=c.data;if(s>h.length)u+=h,s-=h.length;else{s===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=e(h,0,s),this.head=c,c.data=e(h,s));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(s){const u=a.allocUnsafe(s),c=s;let f=this.head,h=0;do{const m=f.data;if(s>m.length)n(u,m,c-s),s-=m.length;else{s===m.length?(n(u,m,c-s),++h,f.next?this.head=f.next:this.head=this.tail=null):(n(u,new r(m.buffer,m.byteOffset,s),c-s),this.head=f,f.data=m.slice(s));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return i(this,{...u,depth:0,customInspect:!1})}},_x}var xx,wN;function Yv(){if(wN)return xx;wN=1;const{MathFloor:e,NumberIsInteger:t}=Hr(),{validateInteger:n}=b0(),{ERR_INVALID_ARG_VALUE:r}=pi().codes;let a=16*1024,i=16;function o(f,h,m){return f.highWaterMark!=null?f.highWaterMark:h?f[m]:null}function s(f){return f?i:a}function u(f,h){n(h,"value",0),f?i=h:a=h}function c(f,h,m,g){const v=o(h,g,m);if(v!=null){if(!t(v)||v<0){const w=g?`options.${m}`:"options.highWaterMark";throw new r(w,v)}return e(v)}return s(f.objectMode)}return xx={getHighWaterMark:c,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},xx}var Sx={},Iy={exports:{}},_N;function uk(){return _N||(_N=1,function(e,t){var n=ec(),r=n.Buffer;function a(o,s){for(var u in o)s[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,u){return r(o,s,u)}a(r,i),i.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,u)},i.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(Iy,Iy.exports)),Iy.exports}var xN;function gX(){if(xN)return Sx;xN=1;var e=uk().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}Sx.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=m,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=g,this.end=v,S=3;break;default:this.write=w,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=f,a.prototype.text=c,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,S,E){var A=S.length-1;if(A<E)return 0;var k=i(S[A]);return k>=0?(k>0&&(x.lastNeed=k-1),k):--A<E||k===-2?0:(k=i(S[A]),k>=0?(k>0&&(x.lastNeed=k-2),k):--A<E||k===-2?0:(k=i(S[A]),k>=0?(k>0&&(k===2?k=0:x.lastNeed=k-3),k):0))}function s(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function u(x){var S=this.lastTotal-this.lastNeed,E=s(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function c(x,S){var E=o(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var A=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,A),x.toString("utf8",S,A)}function f(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var A=E.charCodeAt(E.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function m(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function v(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function w(x){return x.toString(this.encoding)}function _(x){return x&&x.length?this.write(x):""}return Sx}var Ex,SN;function i8(){if(SN)return Ex;SN=1;const e=yd(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Hr(),{Buffer:a}=ec(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=pi().codes;function s(u,c,f){let h;if(typeof c=="string"||c instanceof a)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let m;if(c&&c[n])m=!0,h=c[n]();else if(c&&c[r])m=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new u({objectMode:!0,highWaterMark:1,...f});let v=!1;g._read=function(){v||(v=!0,_())},g._destroy=function(x,S){t(w(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function w(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:A,done:k}=await h.throw(x);if(await A,k)return}if(typeof h.return=="function"){const{value:A}=await h.return();await A}}async function _(){for(;;){try{const{value:x,done:S}=m?await h.next():h.next();if(S)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new o;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return Ex=s,Ex}var kx,EN;function Xv(){if(EN)return kx;EN=1;const e=yd(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:m}=Hr();kx=Se,Se.ReadableState=Me;const{EventEmitter:g}=Kv(),{Stream:v,prependListener:w}=lk(),{Buffer:_}=ec(),{addAbortSignal:x}=Zv(),S=tc();let E=ki().debuglog("stream",me=>{E=me});const A=mX(),k=bh(),{getHighWaterMark:D,getDefaultHighWaterMark:O}=Yv(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:H,ERR_OUT_OF_RANGE:ee,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:V}=pi(),{validateObject:fe}=b0(),ue=m("kPaused"),{StringDecoder:Y}=gX(),X=i8();s(Se.prototype,v.prototype),s(Se,v);const ae=()=>{},{errorOrDestroy:G}=k,Q=1,ne=2,de=4,_e=8,ve=16,Pe=32,Fe=64,Ie=128,Te=256,Ue=512,Ve=1024,Ee=2048,Ae=4096,B=8192,Ce=16384,Re=32768,se=65536,ie=1<<17,J=1<<18;function xe(me){return{enumerable:!1,get(){return(this.state&me)!==0},set(U){U?this.state|=me:this.state&=~me}}}i(Me.prototype,{objectMode:xe(Q),ended:xe(ne),endEmitted:xe(de),reading:xe(_e),constructed:xe(ve),sync:xe(Pe),needReadable:xe(Fe),emittedReadable:xe(Ie),readableListening:xe(Te),resumeScheduled:xe(Ue),errorEmitted:xe(Ve),emitClose:xe(Ee),autoDestroy:xe(Ae),destroyed:xe(B),closed:xe(Ce),closeEmitted:xe(Re),multiAwaitDrain:xe(se),readingMore:xe(ie),dataEmitted:xe(J)});function Me(me,U,$){typeof $!="boolean"&&($=U instanceof Nl()),this.state=Ee|Ae|ve|Pe,me&&me.objectMode&&(this.state|=Q),$&&me&&me.readableObjectMode&&(this.state|=Q),this.highWaterMark=me?D(this,me,"readableHighWaterMark",$):O(!1),this.buffer=new A,this.length=0,this.pipes=[],this.flowing=null,this[ue]=null,me&&me.emitClose===!1&&(this.state&=-2049),me&&me.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=me&&me.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,me&&me.encoding&&(this.decoder=new Y(me.encoding),this.encoding=me.encoding)}function Se(me){if(!(this instanceof Se))return new Se(me);const U=this instanceof Nl();this._readableState=new Me(me,this,U),me&&(typeof me.read=="function"&&(this._read=me.read),typeof me.destroy=="function"&&(this._destroy=me.destroy),typeof me.construct=="function"&&(this._construct=me.construct),me.signal&&!U&&x(me.signal,this)),v.call(this,me),k.construct(this,()=>{this._readableState.needReadable&&R(this,this._readableState)})}Se.prototype.destroy=k.destroy,Se.prototype._undestroy=k.undestroy,Se.prototype._destroy=function(me,U){U(me)},Se.prototype[g.captureRejectionSymbol]=function(me){this.destroy(me)},Se.prototype[f]=function(){let me;return this.destroyed||(me=this.readableEnded?null:new V,this.destroy(me)),new u((U,$)=>S(this,W=>W&&W!==me?$(W):U(null)))},Se.prototype.push=function(me,U){return Ze(this,me,U,!1)},Se.prototype.unshift=function(me,U){return Ze(this,me,U,!0)};function Ze(me,U,$,W){E("readableAddChunk",U);const he=me._readableState;let Ne;if((he.state&Q)===0&&(typeof U=="string"?($=$||he.defaultEncoding,he.encoding!==$&&(W&&he.encoding?U=_.from(U,$).toString(he.encoding):(U=_.from(U,$),$=""))):U instanceof _?$="":v._isUint8Array(U)?(U=v._uint8ArrayToBuffer(U),$=""):U!=null&&(Ne=new z("chunk",["string","Buffer","Uint8Array"],U))),Ne)G(me,Ne);else if(U===null)he.state&=-9,Rt(me,he);else if((he.state&Q)!==0||U&&U.length>0)if(W)if((he.state&de)!==0)G(me,new Z);else{if(he.destroyed||he.errored)return!1;Et(me,he,U,!0)}else if(he.ended)G(me,new P);else{if(he.destroyed||he.errored)return!1;he.state&=-9,he.decoder&&!$?(U=he.decoder.write(U),he.objectMode||U.length!==0?Et(me,he,U,!1):R(me,he)):Et(me,he,U,!1)}else W||(he.state&=-9,R(me,he));return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function Et(me,U,$,W){U.flowing&&U.length===0&&!U.sync&&me.listenerCount("data")>0?((U.state&se)!==0?U.awaitDrainWriters.clear():U.awaitDrainWriters=null,U.dataEmitted=!0,me.emit("data",$)):(U.length+=U.objectMode?1:$.length,W?U.buffer.unshift($):U.buffer.push($),(U.state&Fe)!==0&&Kt(me)),R(me,U)}Se.prototype.isPaused=function(){const me=this._readableState;return me[ue]===!0||me.flowing===!1},Se.prototype.setEncoding=function(me){const U=new Y(me);this._readableState.decoder=U,this._readableState.encoding=this._readableState.decoder.encoding;const $=this._readableState.buffer;let W="";for(const he of $)W+=U.write(he);return $.clear(),W!==""&&$.push(W),this._readableState.length=W.length,this};const at=1073741824;function _t(me){if(me>at)throw new ee("size","<= 1GiB",me);return me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++,me}function Nt(me,U){return me<=0||U.length===0&&U.ended?0:(U.state&Q)!==0?1:r(me)?U.flowing&&U.length?U.buffer.first().length:U.length:me<=U.length?me:U.ended?U.length:0}Se.prototype.read=function(me){E("read",me),me===void 0?me=NaN:n(me)||(me=a(me,10));const U=this._readableState,$=me;if(me>U.highWaterMark&&(U.highWaterMark=_t(me)),me!==0&&(U.state&=-129),me===0&&U.needReadable&&((U.highWaterMark!==0?U.length>=U.highWaterMark:U.length>0)||U.ended))return E("read: emitReadable",U.length,U.ended),U.length===0&&U.ended?st(this):Kt(this),null;if(me=Nt(me,U),me===0&&U.ended)return U.length===0&&st(this),null;let W=(U.state&Fe)!==0;if(E("need readable",W),(U.length===0||U.length-me<U.highWaterMark)&&(W=!0,E("length less than watermark",W)),U.ended||U.reading||U.destroyed||U.errored||!U.constructed)W=!1,E("reading, ended or constructing",W);else if(W){E("do read"),U.state|=_e|Pe,U.length===0&&(U.state|=Fe);try{this._read(U.highWaterMark)}catch(Ne){G(this,Ne)}U.state&=-33,U.reading||(me=Nt($,U))}let he;return me>0?he=$e(me,U):he=null,he===null?(U.needReadable=U.length<=U.highWaterMark,me=0):(U.length-=me,U.multiAwaitDrain?U.awaitDrainWriters.clear():U.awaitDrainWriters=null),U.length===0&&(U.ended||(U.needReadable=!0),$!==me&&U.ended&&st(this)),he!==null&&!U.errorEmitted&&!U.closeEmitted&&(U.dataEmitted=!0,this.emit("data",he)),he};function Rt(me,U){if(E("onEofChunk"),!U.ended){if(U.decoder){const $=U.decoder.end();$&&$.length&&(U.buffer.push($),U.length+=U.objectMode?1:$.length)}U.ended=!0,U.sync?Kt(me):(U.needReadable=!1,U.emittedReadable=!0,pe(me))}}function Kt(me){const U=me._readableState;E("emitReadable",U.needReadable,U.emittedReadable),U.needReadable=!1,U.emittedReadable||(E("emitReadable",U.flowing),U.emittedReadable=!0,e.nextTick(pe,me))}function pe(me){const U=me._readableState;E("emitReadable_",U.destroyed,U.length,U.ended),!U.destroyed&&!U.errored&&(U.length||U.ended)&&(me.emit("readable"),U.emittedReadable=!1),U.needReadable=!U.flowing&&!U.ended&&U.length<=U.highWaterMark,ft(me)}function R(me,U){!U.readingMore&&U.constructed&&(U.readingMore=!0,e.nextTick(q,me,U))}function q(me,U){for(;!U.reading&&!U.ended&&(U.length<U.highWaterMark||U.flowing&&U.length===0);){const $=U.length;if(E("maybeReadMore read 0"),me.read(0),$===U.length)break}U.readingMore=!1}Se.prototype._read=function(me){throw new H("_read()")},Se.prototype.pipe=function(me,U){const $=this,W=this._readableState;W.pipes.length===1&&(W.multiAwaitDrain||(W.multiAwaitDrain=!0,W.awaitDrainWriters=new c(W.awaitDrainWriters?[W.awaitDrainWriters]:[]))),W.pipes.push(me),E("pipe count=%d opts=%j",W.pipes.length,U);const Ne=(!U||U.end!==!1)&&me!==e.stdout&&me!==e.stderr?gt:hr;W.endEmitted?e.nextTick(Ne):$.once("end",Ne),me.on("unpipe",He);function He(Dn,ei){E("onunpipe"),Dn===$&&ei&&ei.hasUnpiped===!1&&(ei.hasUnpiped=!0,Ct())}function gt(){E("onend"),me.end()}let Gt,ht=!1;function Ct(){E("cleanup"),me.removeListener("close",Bn),me.removeListener("finish",fr),Gt&&me.removeListener("drain",Gt),me.removeListener("error",En),me.removeListener("unpipe",He),$.removeListener("end",gt),$.removeListener("end",hr),$.removeListener("data",Zt),ht=!0,Gt&&W.awaitDrainWriters&&(!me._writableState||me._writableState.needDrain)&&Gt()}function Ot(){ht||(W.pipes.length===1&&W.pipes[0]===me?(E("false write response, pause",0),W.awaitDrainWriters=me,W.multiAwaitDrain=!1):W.pipes.length>1&&W.pipes.includes(me)&&(E("false write response, pause",W.awaitDrainWriters.size),W.awaitDrainWriters.add(me)),$.pause()),Gt||(Gt=ce($,me),me.on("drain",Gt))}$.on("data",Zt);function Zt(Dn){E("ondata");const ei=me.write(Dn);E("dest.write",ei),ei===!1&&Ot()}function En(Dn){if(E("onerror",Dn),hr(),me.removeListener("error",En),me.listenerCount("error")===0){const ei=me._writableState||me._readableState;ei&&!ei.errorEmitted?G(me,Dn):me.emit("error",Dn)}}w(me,"error",En);function Bn(){me.removeListener("finish",fr),hr()}me.once("close",Bn);function fr(){E("onfinish"),me.removeListener("close",Bn),hr()}me.once("finish",fr);function hr(){E("unpipe"),$.unpipe(me)}return me.emit("pipe",$),me.writableNeedDrain===!0?Ot():W.flowing||(E("pipe resume"),$.resume()),me};function ce(me,U){return function(){const W=me._readableState;W.awaitDrainWriters===U?(E("pipeOnDrain",1),W.awaitDrainWriters=null):W.multiAwaitDrain&&(E("pipeOnDrain",W.awaitDrainWriters.size),W.awaitDrainWriters.delete(U)),(!W.awaitDrainWriters||W.awaitDrainWriters.size===0)&&me.listenerCount("data")&&me.resume()}}Se.prototype.unpipe=function(me){const U=this._readableState,$={hasUnpiped:!1};if(U.pipes.length===0)return this;if(!me){const he=U.pipes;U.pipes=[],this.pause();for(let Ne=0;Ne<he.length;Ne++)he[Ne].emit("unpipe",this,{hasUnpiped:!1});return this}const W=t(U.pipes,me);return W===-1?this:(U.pipes.splice(W,1),U.pipes.length===0&&this.pause(),me.emit("unpipe",this,$),this)},Se.prototype.on=function(me,U){const $=v.prototype.on.call(this,me,U),W=this._readableState;return me==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):me==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,E("on readable",W.length,W.reading),W.length?Kt(this):W.reading||e.nextTick(ye,this)),$},Se.prototype.addListener=Se.prototype.on,Se.prototype.removeListener=function(me,U){const $=v.prototype.removeListener.call(this,me,U);return me==="readable"&&e.nextTick(Oe,this),$},Se.prototype.off=Se.prototype.removeListener,Se.prototype.removeAllListeners=function(me){const U=v.prototype.removeAllListeners.apply(this,arguments);return(me==="readable"||me===void 0)&&e.nextTick(Oe,this),U};function Oe(me){const U=me._readableState;U.readableListening=me.listenerCount("readable")>0,U.resumeScheduled&&U[ue]===!1?U.flowing=!0:me.listenerCount("data")>0?me.resume():U.readableListening||(U.flowing=null)}function ye(me){E("readable nexttick read 0"),me.read(0)}Se.prototype.resume=function(){const me=this._readableState;return me.flowing||(E("resume"),me.flowing=!me.readableListening,ke(this,me)),me[ue]=!1,this};function ke(me,U){U.resumeScheduled||(U.resumeScheduled=!0,e.nextTick(oe,me,U))}function oe(me,U){E("resume",U.reading),U.reading||me.read(0),U.resumeScheduled=!1,me.emit("resume"),ft(me),U.flowing&&!U.reading&&me.read(0)}Se.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ue]=!0,this};function ft(me){const U=me._readableState;for(E("flow",U.flowing);U.flowing&&me.read()!==null;);}Se.prototype.wrap=function(me){let U=!1;me.on("data",W=>{!this.push(W)&&me.pause&&(U=!0,me.pause())}),me.on("end",()=>{this.push(null)}),me.on("error",W=>{G(this,W)}),me.on("close",()=>{this.destroy()}),me.on("destroy",()=>{this.destroy()}),this._read=()=>{U&&me.resume&&(U=!1,me.resume())};const $=o(me);for(let W=1;W<$.length;W++){const he=$[W];this[he]===void 0&&typeof me[he]=="function"&&(this[he]=me[he].bind(me))}return this},Se.prototype[h]=function(){return vt(this)},Se.prototype.iterator=function(me){return me!==void 0&&fe(me,"options"),vt(this,me)};function vt(me,U){typeof me.read!="function"&&(me=Se.wrap(me,{objectMode:!0}));const $=j(me,U);return $.stream=me,$}async function*j(me,U){let $=ae;function W(He){this===me?($(),$=ae):$=He}me.on("readable",W);let he;const Ne=S(me,{writable:!1},He=>{he=He?N(he,He):null,$(),$=ae});try{for(;;){const He=me.destroyed?null:me.read();if(He!==null)yield He;else{if(he)throw he;if(he===null)return;await new u(W)}}}catch(He){throw he=N(he,He),he}finally{(he||(U==null?void 0:U.destroyOnReturn)!==!1)&&(he===void 0||me._readableState.autoDestroy)?k.destroyer(me,null):(me.off("readable",W),Ne())}}i(Se.prototype,{readable:{__proto__:null,get(){const me=this._readableState;return!!me&&me.readable!==!1&&!me.destroyed&&!me.errorEmitted&&!me.endEmitted},set(me){this._readableState&&(this._readableState.readable=!!me)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(me){this._readableState&&(this._readableState.destroyed=me)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Me.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ue]!==!1},set(me){this[ue]=!!me}}}),Se._fromList=$e;function $e(me,U){if(U.length===0)return null;let $;return U.objectMode?$=U.buffer.shift():!me||me>=U.length?(U.decoder?$=U.buffer.join(""):U.buffer.length===1?$=U.buffer.first():$=U.buffer.concat(U.length),U.buffer.clear()):$=U.buffer.consume(me,U.decoder),$}function st(me){const U=me._readableState;E("endReadable",U.endEmitted),U.endEmitted||(U.ended=!0,e.nextTick(ge,U,me))}function ge(me,U){if(E("endReadableNT",me.endEmitted,me.length),!me.errored&&!me.closeEmitted&&!me.endEmitted&&me.length===0){if(me.endEmitted=!0,U.emit("end"),U.writable&&U.allowHalfOpen===!1)e.nextTick(De,U);else if(me.autoDestroy){const $=U._writableState;(!$||$.autoDestroy&&($.finished||$.writable===!1))&&U.destroy()}}}function De(me){me.writable&&!me.writableEnded&&!me.destroyed&&me.end()}Se.from=function(me,U){return X(Se,me,U)};let Je;function It(){return Je===void 0&&(Je={}),Je}return Se.fromWeb=function(me,U){return It().newStreamReadableFromReadableStream(me,U)},Se.toWeb=function(me,U){return It().newReadableStreamFromStreamReadable(me,U)},Se.wrap=function(me,U){var $,W;return new Se({objectMode:($=(W=me.readableObjectMode)!==null&&W!==void 0?W:me.objectMode)!==null&&$!==void 0?$:!0,...U,destroy(he,Ne){k.destroyer(me,he),Ne(he)}}).wrap(me)},kx}var Cx,kN;function ck(){if(kN)return Cx;kN=1;const e=yd(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:c}=Hr();Cx=fe,fe.WritableState=Z;const{EventEmitter:f}=Kv(),h=lk().Stream,{Buffer:m}=ec(),g=bh(),{addAbortSignal:v}=Zv(),{getHighWaterMark:w,getDefaultHighWaterMark:_}=Yv(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:A,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:D,ERR_STREAM_NULL_VALUES:O,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:z}=pi().codes,{errorOrDestroy:H}=g;o(fe.prototype,h.prototype),o(fe,h);function ee(){}const P=u("kOnFinished");function Z(Ae,B,Ce){typeof Ce!="boolean"&&(Ce=B instanceof Nl()),this.objectMode=!!(Ae&&Ae.objectMode),Ce&&(this.objectMode=this.objectMode||!!(Ae&&Ae.writableObjectMode)),this.highWaterMark=Ae?w(this,Ae,"writableHighWaterMark",Ce):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Re=!!(Ae&&Ae.decodeStrings===!1);this.decodeStrings=!Re,this.defaultEncoding=Ae&&Ae.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,B),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ae||Ae.emitClose!==!1,this.autoDestroy=!Ae||Ae.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function V(Ae){Ae.buffered=[],Ae.bufferedIndex=0,Ae.allBuffers=!0,Ae.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function fe(Ae){const B=this instanceof Nl();if(!B&&!r(fe,this))return new fe(Ae);this._writableState=new Z(Ae,this,B),Ae&&(typeof Ae.write=="function"&&(this._write=Ae.write),typeof Ae.writev=="function"&&(this._writev=Ae.writev),typeof Ae.destroy=="function"&&(this._destroy=Ae.destroy),typeof Ae.final=="function"&&(this._final=Ae.final),typeof Ae.construct=="function"&&(this._construct=Ae.construct),Ae.signal&&v(Ae.signal,this)),h.call(this,Ae),g.construct(this,()=>{const Ce=this._writableState;Ce.writing||_e(this,Ce),Ie(this,Ce)})}a(fe,c,{__proto__:null,value:function(Ae){return r(this,Ae)?!0:this!==fe?!1:Ae&&Ae._writableState instanceof Z}}),fe.prototype.pipe=function(){H(this,new A)};function ue(Ae,B,Ce,Re){const se=Ae._writableState;if(typeof Ce=="function")Re=Ce,Ce=se.defaultEncoding;else{if(!Ce)Ce=se.defaultEncoding;else if(Ce!=="buffer"&&!m.isEncoding(Ce))throw new z(Ce);typeof Re!="function"&&(Re=ee)}if(B===null)throw new O;if(!se.objectMode)if(typeof B=="string")se.decodeStrings!==!1&&(B=m.from(B,Ce),Ce="buffer");else if(B instanceof m)Ce="buffer";else if(h._isUint8Array(B))B=h._uint8ArrayToBuffer(B),Ce="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],B);let ie;return se.ending?ie=new N:se.destroyed&&(ie=new k("write")),ie?(e.nextTick(Re,ie),H(Ae,ie,!0),ie):(se.pendingcb++,Y(Ae,se,B,Ce,Re))}fe.prototype.write=function(Ae,B,Ce){return ue(this,Ae,B,Ce)===!0},fe.prototype.cork=function(){this._writableState.corked++},fe.prototype.uncork=function(){const Ae=this._writableState;Ae.corked&&(Ae.corked--,Ae.writing||_e(this,Ae))},fe.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=s(B)),!m.isEncoding(B))throw new z(B);return this._writableState.defaultEncoding=B,this};function Y(Ae,B,Ce,Re,se){const ie=B.objectMode?1:Ce.length;B.length+=ie;const J=B.length<B.highWaterMark;return J||(B.needDrain=!0),B.writing||B.corked||B.errored||!B.constructed?(B.buffered.push({chunk:Ce,encoding:Re,callback:se}),B.allBuffers&&Re!=="buffer"&&(B.allBuffers=!1),B.allNoop&&se!==ee&&(B.allNoop=!1)):(B.writelen=ie,B.writecb=se,B.writing=!0,B.sync=!0,Ae._write(Ce,Re,B.onwrite),B.sync=!1),J&&!B.errored&&!B.destroyed}function X(Ae,B,Ce,Re,se,ie,J){B.writelen=Re,B.writecb=J,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new k("write")):Ce?Ae._writev(se,B.onwrite):Ae._write(se,ie,B.onwrite),B.sync=!1}function ae(Ae,B,Ce,Re){--B.pendingcb,Re(Ce),de(B),H(Ae,Ce)}function G(Ae,B){const Ce=Ae._writableState,Re=Ce.sync,se=Ce.writecb;if(typeof se!="function"){H(Ae,new E);return}Ce.writing=!1,Ce.writecb=null,Ce.length-=Ce.writelen,Ce.writelen=0,B?(B.stack,Ce.errored||(Ce.errored=B),Ae._readableState&&!Ae._readableState.errored&&(Ae._readableState.errored=B),Re?e.nextTick(ae,Ae,Ce,B,se):ae(Ae,Ce,B,se)):(Ce.buffered.length>Ce.bufferedIndex&&_e(Ae,Ce),Re?Ce.afterWriteTickInfo!==null&&Ce.afterWriteTickInfo.cb===se?Ce.afterWriteTickInfo.count++:(Ce.afterWriteTickInfo={count:1,cb:se,stream:Ae,state:Ce},e.nextTick(Q,Ce.afterWriteTickInfo)):ne(Ae,Ce,1,se))}function Q({stream:Ae,state:B,count:Ce,cb:Re}){return B.afterWriteTickInfo=null,ne(Ae,B,Ce,Re)}function ne(Ae,B,Ce,Re){for(!B.ending&&!Ae.destroyed&&B.length===0&&B.needDrain&&(B.needDrain=!1,Ae.emit("drain"));Ce-- >0;)B.pendingcb--,Re();B.destroyed&&de(B),Ie(Ae,B)}function de(Ae){if(Ae.writing)return;for(let se=Ae.bufferedIndex;se<Ae.buffered.length;++se){var B;const{chunk:ie,callback:J}=Ae.buffered[se],xe=Ae.objectMode?1:ie.length;Ae.length-=xe,J((B=Ae.errored)!==null&&B!==void 0?B:new k("write"))}const Ce=Ae[P].splice(0);for(let se=0;se<Ce.length;se++){var Re;Ce[se]((Re=Ae.errored)!==null&&Re!==void 0?Re:new k("end"))}V(Ae)}function _e(Ae,B){if(B.corked||B.bufferProcessing||B.destroyed||!B.constructed)return;const{buffered:Ce,bufferedIndex:Re,objectMode:se}=B,ie=Ce.length-Re;if(!ie)return;let J=Re;if(B.bufferProcessing=!0,ie>1&&Ae._writev){B.pendingcb-=ie-1;const xe=B.allNoop?ee:Se=>{for(let Ze=J;Ze<Ce.length;++Ze)Ce[Ze].callback(Se)},Me=B.allNoop&&J===0?Ce:t(Ce,J);Me.allBuffers=B.allBuffers,X(Ae,B,!0,B.length,Me,"",xe),V(B)}else{do{const{chunk:xe,encoding:Me,callback:Se}=Ce[J];Ce[J++]=null;const Ze=se?1:xe.length;X(Ae,B,!1,Ze,xe,Me,Se)}while(J<Ce.length&&!B.writing);J===Ce.length?V(B):J>256?(Ce.splice(0,J),B.bufferedIndex=0):B.bufferedIndex=J}B.bufferProcessing=!1}fe.prototype._write=function(Ae,B,Ce){if(this._writev)this._writev([{chunk:Ae,encoding:B}],Ce);else throw new S("_write()")},fe.prototype._writev=null,fe.prototype.end=function(Ae,B,Ce){const Re=this._writableState;typeof Ae=="function"?(Ce=Ae,Ae=null,B=null):typeof B=="function"&&(Ce=B,B=null);let se;if(Ae!=null){const ie=ue(this,Ae,B);ie instanceof n&&(se=ie)}return Re.corked&&(Re.corked=1,this.uncork()),se||(!Re.errored&&!Re.ending?(Re.ending=!0,Ie(this,Re,!0),Re.ended=!0):Re.finished?se=new D("end"):Re.destroyed&&(se=new k("end"))),typeof Ce=="function"&&(se||Re.finished?e.nextTick(Ce,se):Re[P].push(Ce)),this};function ve(Ae){return Ae.ending&&!Ae.destroyed&&Ae.constructed&&Ae.length===0&&!Ae.errored&&Ae.buffered.length===0&&!Ae.finished&&!Ae.writing&&!Ae.errorEmitted&&!Ae.closeEmitted}function Pe(Ae,B){let Ce=!1;function Re(se){if(Ce){H(Ae,se??E());return}if(Ce=!0,B.pendingcb--,se){const ie=B[P].splice(0);for(let J=0;J<ie.length;J++)ie[J](se);H(Ae,se,B.sync)}else ve(B)&&(B.prefinished=!0,Ae.emit("prefinish"),B.pendingcb++,e.nextTick(Te,Ae,B))}B.sync=!0,B.pendingcb++;try{Ae._final(Re)}catch(se){Re(se)}B.sync=!1}function Fe(Ae,B){!B.prefinished&&!B.finalCalled&&(typeof Ae._final=="function"&&!B.destroyed?(B.finalCalled=!0,Pe(Ae,B)):(B.prefinished=!0,Ae.emit("prefinish")))}function Ie(Ae,B,Ce){ve(B)&&(Fe(Ae,B),B.pendingcb===0&&(Ce?(B.pendingcb++,e.nextTick((Re,se)=>{ve(se)?Te(Re,se):se.pendingcb--},Ae,B)):ve(B)&&(B.pendingcb++,Te(Ae,B))))}function Te(Ae,B){B.pendingcb--,B.finished=!0;const Ce=B[P].splice(0);for(let Re=0;Re<Ce.length;Re++)Ce[Re]();if(Ae.emit("finish"),B.autoDestroy){const Re=Ae._readableState;(!Re||Re.autoDestroy&&(Re.endEmitted||Re.readable===!1))&&Ae.destroy()}}i(fe.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ae){this._writableState&&(this._writableState.destroyed=Ae)}},writable:{__proto__:null,get(){const Ae=this._writableState;return!!Ae&&Ae.writable!==!1&&!Ae.destroyed&&!Ae.errored&&!Ae.ending&&!Ae.ended},set(Ae){this._writableState&&(this._writableState.writable=!!Ae)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ae=this._writableState;return Ae?!Ae.destroyed&&!Ae.ending&&Ae.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Ue=g.destroy;fe.prototype.destroy=function(Ae,B){const Ce=this._writableState;return!Ce.destroyed&&(Ce.bufferedIndex<Ce.buffered.length||Ce[P].length)&&e.nextTick(de,Ce),Ue.call(this,Ae,B),this},fe.prototype._undestroy=g.undestroy,fe.prototype._destroy=function(Ae,B){B(Ae)},fe.prototype[f.captureRejectionSymbol]=function(Ae){this.destroy(Ae)};let Ve;function Ee(){return Ve===void 0&&(Ve={}),Ve}return fe.fromWeb=function(Ae,B){return Ee().newStreamWritableFromWritableStream(Ae,B)},fe.toWeb=function(Ae){return Ee().newWritableStreamFromStreamWritable(Ae)},Cx}var Ax,CN;function yX(){if(CN)return Ax;CN=1;const e=yd(),t=ec(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=Fl(),h=tc(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=pi(),{destroyer:w}=bh(),_=Nl(),x=Xv(),S=ck(),{createDeferredPromise:E}=ki(),A=i8(),k=globalThis.Blob||t.Blob,D=typeof k<"u"?function(Z){return Z instanceof k}:function(Z){return!1},O=globalThis.AbortController||Rm().AbortController,{FunctionPrototypeCall:N}=Hr();class z extends _{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Ax=function P(Z,V){if(u(Z))return Z;if(o(Z))return ee({readable:Z});if(s(Z))return ee({writable:Z});if(i(Z))return ee({writable:!1,readable:!1});if(c(Z))return ee({readable:x.fromWeb(Z)});if(f(Z))return ee({writable:S.fromWeb(Z)});if(typeof Z=="function"){const{value:ue,write:Y,final:X,destroy:ae}=H(Z);if(a(ue))return A(z,ue,{objectMode:!0,write:Y,final:X,destroy:ae});const G=ue==null?void 0:ue.then;if(typeof G=="function"){let Q;const ne=N(G,ue,de=>{if(de!=null)throw new v("nully","body",de)},de=>{w(Q,de)});return Q=new z({objectMode:!0,readable:!1,write:Y,final(de){X(async()=>{try{await ne,e.nextTick(de,null)}catch(_e){e.nextTick(de,_e)}})},destroy:ae})}throw new v("Iterable, AsyncIterable or AsyncFunction",V,ue)}if(D(Z))return P(Z.arrayBuffer());if(a(Z))return A(z,Z,{objectMode:!0,writable:!1});if(c(Z==null?void 0:Z.readable)&&f(Z==null?void 0:Z.writable))return z.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const ue=Z!=null&&Z.readable?o(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:P(Z.readable):void 0,Y=Z!=null&&Z.writable?s(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:P(Z.writable):void 0;return ee({readable:ue,writable:Y})}const fe=Z==null?void 0:Z.then;if(typeof fe=="function"){let ue;return N(fe,Z,Y=>{Y!=null&&ue.push(Y),ue.push(null)},Y=>{w(ue,Y)}),ue=new z({objectMode:!0,writable:!1,read(){}})}throw new g(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function H(P){let{promise:Z,resolve:V}=E();const fe=new O,ue=fe.signal;return{value:P(async function*(){for(;;){const X=Z;Z=null;const{chunk:ae,done:G,cb:Q}=await X;if(e.nextTick(Q),G)return;if(ue.aborted)throw new m(void 0,{cause:ue.reason});({promise:Z,resolve:V}=E()),yield ae}}(),{signal:ue}),write(X,ae,G){const Q=V;V=null,Q({chunk:X,done:!1,cb:G})},final(X){const ae=V;V=null,ae({done:!0,cb:X})},destroy(X,ae){fe.abort(),ae(X)}}}function ee(P){const Z=P.readable&&typeof P.readable.read!="function"?x.wrap(P.readable):P.readable,V=P.writable;let fe=!!n(Z),ue=!!r(V),Y,X,ae,G,Q;function ne(de){const _e=G;G=null,_e?_e(de):de&&Q.destroy(de)}return Q=new z({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:fe,writable:ue}),ue&&(h(V,de=>{ue=!1,de&&w(Z,de),ne(de)}),Q._write=function(de,_e,ve){V.write(de,_e)?ve():Y=ve},Q._final=function(de){V.end(),X=de},V.on("drain",function(){if(Y){const de=Y;Y=null,de()}}),V.on("finish",function(){if(X){const de=X;X=null,de()}})),fe&&(h(Z,de=>{fe=!1,de&&w(Z,de),ne(de)}),Z.on("readable",function(){if(ae){const de=ae;ae=null,de()}}),Z.on("end",function(){Q.push(null)}),Q._read=function(){for(;;){const de=Z.read();if(de===null){ae=Q._read;return}if(!Q.push(de))return}}),Q._destroy=function(de,_e){!de&&G!==null&&(de=new m),ae=null,Y=null,X=null,G===null?_e(de):(G=_e,w(V,de),w(Z,de))},Q}return Ax}var Tx,AN;function Nl(){if(AN)return Tx;AN=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Hr();Tx=o;const a=Xv(),i=ck();r(o.prototype,a.prototype),r(o,a);{const f=n(i.prototype);for(let h=0;h<f.length;h++){const m=f[h];o.prototype[m]||(o.prototype[m]=i.prototype[m])}}function o(f){if(!(this instanceof o))return new o(f);a.call(this,f),i.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let s;function u(){return s===void 0&&(s={}),s}o.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},o.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return o.from=function(f){return c||(c=yX()),c(f,"body")},Tx}var Rx,TN;function o8(){if(TN)return Rx;TN=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Hr();Rx=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=pi().codes,r=Nl(),{getHighWaterMark:a}=Yv();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(c){if(!(this instanceof o))return new o(c);const f=c?a(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function s(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(c,f,h){throw new n("_transform()")},o.prototype._write=function(c,f,h){const m=this._readableState,g=this._writableState,v=m.length;this._transform(c,f,(w,_)=>{if(w){h(w);return}_!=null&&this.push(_),g.ended||v===m.length||m.length<m.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},Rx}var Nx,RN;function s8(){if(RN)return Nx;RN=1;const{ObjectSetPrototypeOf:e}=Hr();Nx=n;const t=o8();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},Nx}var Ix,NN;function dk(){if(NN)return Ix;NN=1;const e=yd(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Hr(),i=tc(),{once:o}=ki(),s=bh(),u=Nl(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:w}=pi(),{validateFunction:_,validateAbortSignal:x}=b0(),{isIterable:S,isReadable:E,isReadableNodeStream:A,isNodeStream:k,isTransformStream:D,isWebStream:O,isReadableStream:N,isReadableFinished:z}=Fl(),H=globalThis.AbortController||Rm().AbortController;let ee,P,Z;function V(de,_e,ve){let Pe=!1;de.on("close",()=>{Pe=!0});const Fe=i(de,{readable:_e,writable:ve},Ie=>{Pe=!Ie});return{destroy:Ie=>{Pe||(Pe=!0,s.destroyer(de,Ie||new g("pipe")))},cleanup:Fe}}function fe(de){return _(de[de.length-1],"streams[stream.length - 1]"),de.pop()}function ue(de){if(S(de))return de;if(A(de))return Y(de);throw new f("val",["Readable","Iterable","AsyncIterable"],de)}async function*Y(de){P||(P=Xv()),yield*P.prototype[r].call(de)}async function X(de,_e,ve,{end:Pe}){let Fe,Ie=null;const Te=Ee=>{if(Ee&&(Fe=Ee),Ie){const Ae=Ie;Ie=null,Ae()}},Ue=()=>new n((Ee,Ae)=>{Fe?Ae(Fe):Ie=()=>{Fe?Ae(Fe):Ee()}});_e.on("drain",Te);const Ve=i(_e,{readable:!1},Te);try{_e.writableNeedDrain&&await Ue();for await(const Ee of de)_e.write(Ee)||await Ue();Pe&&(_e.end(),await Ue()),ve()}catch(Ee){ve(Fe!==Ee?c(Fe,Ee):Ee)}finally{Ve(),_e.off("drain",Te)}}async function ae(de,_e,ve,{end:Pe}){D(_e)&&(_e=_e.writable);const Fe=_e.getWriter();try{for await(const Ie of de)await Fe.ready,Fe.write(Ie).catch(()=>{});await Fe.ready,Pe&&await Fe.close(),ve()}catch(Ie){try{await Fe.abort(Ie),ve(Ie)}catch(Te){ve(Te)}}}function G(...de){return Q(de,o(fe(de)))}function Q(de,_e,ve){if(de.length===1&&t(de[0])&&(de=de[0]),de.length<2)throw new m("streams");const Pe=new H,Fe=Pe.signal,Ie=ve==null?void 0:ve.signal,Te=[];x(Ie,"options.signal");function Ue(){se(new w)}Z=Z||ki().addAbortListener;let Ve;Ie&&(Ve=Z(Ie,Ue));let Ee,Ae;const B=[];let Ce=0;function Re(Se){se(Se,--Ce===0)}function se(Se,Ze){var Et;if(Se&&(!Ee||Ee.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Ee=Se),!(!Ee&&!Ze)){for(;B.length;)B.shift()(Ee);(Et=Ve)===null||Et===void 0||Et[a](),Pe.abort(),Ze&&(Ee||Te.forEach(at=>at()),e.nextTick(_e,Ee,Ae))}}let ie;for(let Se=0;Se<de.length;Se++){const Ze=de[Se],Et=Se<de.length-1,at=Se>0,_t=Et||(ve==null?void 0:ve.end)!==!1,Nt=Se===de.length-1;if(k(Ze)){let Rt=function(Kt){Kt&&Kt.name!=="AbortError"&&Kt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Re(Kt)};var Me=Rt;if(_t){const{destroy:Kt,cleanup:pe}=V(Ze,Et,at);B.push(Kt),E(Ze)&&Nt&&Te.push(pe)}Ze.on("error",Rt),E(Ze)&&Nt&&Te.push(()=>{Ze.removeListener("error",Rt)})}if(Se===0)if(typeof Ze=="function"){if(ie=Ze({signal:Fe}),!S(ie))throw new h("Iterable, AsyncIterable or Stream","source",ie)}else S(Ze)||A(Ze)||D(Ze)?ie=Ze:ie=u.from(Ze);else if(typeof Ze=="function"){if(D(ie)){var J;ie=ue((J=ie)===null||J===void 0?void 0:J.readable)}else ie=ue(ie);if(ie=Ze(ie,{signal:Fe}),Et){if(!S(ie,!0))throw new h("AsyncIterable",`transform[${Se-1}]`,ie)}else{var xe;ee||(ee=s8());const Rt=new ee({objectMode:!0}),Kt=(xe=ie)===null||xe===void 0?void 0:xe.then;if(typeof Kt=="function")Ce++,Kt.call(ie,q=>{Ae=q,q!=null&&Rt.write(q),_t&&Rt.end(),e.nextTick(Re)},q=>{Rt.destroy(q),e.nextTick(Re,q)});else if(S(ie,!0))Ce++,X(ie,Rt,Re,{end:_t});else if(N(ie)||D(ie)){const q=ie.readable||ie;Ce++,X(q,Rt,Re,{end:_t})}else throw new h("AsyncIterable or Promise","destination",ie);ie=Rt;const{destroy:pe,cleanup:R}=V(ie,!1,!0);B.push(pe),Nt&&Te.push(R)}}else if(k(Ze)){if(A(ie)){Ce+=2;const Rt=ne(ie,Ze,Re,{end:_t});E(Ze)&&Nt&&Te.push(Rt)}else if(D(ie)||N(ie)){const Rt=ie.readable||ie;Ce++,X(Rt,Ze,Re,{end:_t})}else if(S(ie))Ce++,X(ie,Ze,Re,{end:_t});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ze}else if(O(Ze)){if(A(ie))Ce++,ae(ue(ie),Ze,Re,{end:_t});else if(N(ie)||S(ie))Ce++,ae(ie,Ze,Re,{end:_t});else if(D(ie))Ce++,ae(ie.readable,Ze,Re,{end:_t});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ze}else ie=u.from(Ze)}return(Fe!=null&&Fe.aborted||Ie!=null&&Ie.aborted)&&e.nextTick(Ue),ie}function ne(de,_e,ve,{end:Pe}){let Fe=!1;if(_e.on("close",()=>{Fe||ve(new v)}),de.pipe(_e,{end:!1}),Pe){let Te=function(){Fe=!0,_e.end()};var Ie=Te;z(de)?e.nextTick(Te):de.once("end",Te)}else ve();return i(de,{readable:!0,writable:!1},Te=>{const Ue=de._readableState;Te&&Te.code==="ERR_STREAM_PREMATURE_CLOSE"&&Ue&&Ue.ended&&!Ue.errored&&!Ue.errorEmitted?de.once("end",ve).once("error",ve):ve(Te)}),i(_e,{readable:!1,writable:!0},ve)}return Ix={pipelineImpl:Q,pipeline:G},Ix}var Ox,IN;function l8(){if(IN)return Ox;IN=1;const{pipeline:e}=dk(),t=Nl(),{destroyer:n}=bh(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:u,isReadableStream:c}=Fl(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=pi(),g=tc();return Ox=function(...w){if(w.length===0)throw new m("streams");if(w.length===1)return t.from(w[0]);const _=[...w];if(typeof w[0]=="function"&&(w[0]=t.from(w[0])),typeof w[w.length-1]=="function"){const ee=w.length-1;w[ee]=t.from(w[ee])}for(let ee=0;ee<w.length;++ee)if(!(!r(w[ee])&&!o(w[ee]))){if(ee<w.length-1&&!(a(w[ee])||c(w[ee])||s(w[ee])))throw new h(`streams[${ee}]`,_[ee],"must be readable");if(ee>0&&!(i(w[ee])||u(w[ee])||s(w[ee])))throw new h(`streams[${ee}]`,_[ee],"must be writable")}let x,S,E,A,k;function D(ee){const P=A;A=null,P?P(ee):ee?k.destroy(ee):!H&&!z&&k.destroy()}const O=w[0],N=e(w,D),z=!!(i(O)||u(O)||s(O)),H=!!(a(N)||c(N)||s(N));if(k=new t({writableObjectMode:!!(O!=null&&O.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:z,readable:H}),z){if(r(O))k._write=function(P,Z,V){O.write(P,Z)?V():x=V},k._final=function(P){O.end(),S=P},O.on("drain",function(){if(x){const P=x;x=null,P()}});else if(o(O)){const Z=(s(O)?O.writable:O).getWriter();k._write=async function(V,fe,ue){try{await Z.ready,Z.write(V).catch(()=>{}),ue()}catch(Y){ue(Y)}},k._final=async function(V){try{await Z.ready,Z.close().catch(()=>{}),S=V}catch(fe){V(fe)}}}const ee=s(N)?N.readable:N;g(ee,()=>{if(S){const P=S;S=null,P()}})}if(H){if(r(N))N.on("readable",function(){if(E){const ee=E;E=null,ee()}}),N.on("end",function(){k.push(null)}),k._read=function(){for(;;){const ee=N.read();if(ee===null){E=k._read;return}if(!k.push(ee))return}};else if(o(N)){const P=(s(N)?N.readable:N).getReader();k._read=async function(){for(;;)try{const{value:Z,done:V}=await P.read();if(!k.push(Z))return;if(V){k.push(null);return}}catch{return}}}}return k._destroy=function(ee,P){!ee&&A!==null&&(ee=new f),E=null,x=null,S=null,A===null?P(ee):(A=P,r(N)&&n(N,ee))},k},Ox}var ON;function bX(){if(ON)return Ry;ON=1;const e=globalThis.AbortController||Rm().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=pi(),{validateAbortSignal:o,validateInteger:s,validateObject:u}=b0(),c=Hr().Symbol("kWeak"),f=Hr().Symbol("kResistStopPropagation"),{finished:h}=tc(),m=l8(),{addAbortSignalNoValidate:g}=Zv(),{isWritable:v,isNodeStream:w}=Fl(),{deprecate:_}=ki(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:A,NumberIsNaN:k,Promise:D,PromiseReject:O,PromiseResolve:N,PromisePrototypeThen:z,Symbol:H}=Hr(),ee=H("kEmpty"),P=H("kEof");function Z(Ie,Te){if(Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),w(Ie)&&!v(Ie))throw new t("stream",Ie,"must be writable");const Ue=m(this,Ie);return Te!=null&&Te.signal&&g(Te.signal,Ue),Ue}function V(Ie,Te){if(typeof Ie!="function")throw new n("fn",["Function","AsyncFunction"],Ie);Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal");let Ue=1;(Te==null?void 0:Te.concurrency)!=null&&(Ue=E(Te.concurrency));let Ve=Ue-1;return(Te==null?void 0:Te.highWaterMark)!=null&&(Ve=E(Te.highWaterMark)),s(Ue,"options.concurrency",1),s(Ve,"options.highWaterMark",0),Ve+=Ue,(async function*(){const Ae=ki().AbortSignalAny([Te==null?void 0:Te.signal].filter(S)),B=this,Ce=[],Re={signal:Ae};let se,ie,J=!1,xe=0;function Me(){J=!0,Se()}function Se(){xe-=1,Ze()}function Ze(){ie&&!J&&xe<Ue&&Ce.length<Ve&&(ie(),ie=null)}async function Et(){try{for await(let at of B){if(J)return;if(Ae.aborted)throw new i;try{if(at=Ie(at,Re),at===ee)continue;at=N(at)}catch(_t){at=O(_t)}xe+=1,z(at,Se,Me),Ce.push(at),se&&(se(),se=null),!J&&(Ce.length>=Ve||xe>=Ue)&&await new D(_t=>{ie=_t})}Ce.push(P)}catch(at){const _t=O(at);z(_t,Se,Me),Ce.push(_t)}finally{J=!0,se&&(se(),se=null)}}Et();try{for(;;){for(;Ce.length>0;){const at=await Ce[0];if(at===P)return;if(Ae.aborted)throw new i;at!==ee&&(yield at),Ce.shift(),Ze()}await new D(at=>{se=at})}}finally{J=!0,ie&&(ie(),ie=null)}}).call(this)}function fe(Ie=void 0){return Ie!=null&&u(Ie,"options"),(Ie==null?void 0:Ie.signal)!=null&&o(Ie.signal,"options.signal"),(async function*(){let Ue=0;for await(const Ee of this){var Ve;if(Ie!=null&&(Ve=Ie.signal)!==null&&Ve!==void 0&&Ve.aborted)throw new i({cause:Ie.signal.reason});yield[Ue++,Ee]}}).call(this)}async function ue(Ie,Te=void 0){for await(const Ue of G.call(this,Ie,Te))return!0;return!1}async function Y(Ie,Te=void 0){if(typeof Ie!="function")throw new n("fn",["Function","AsyncFunction"],Ie);return!await ue.call(this,async(...Ue)=>!await Ie(...Ue),Te)}async function X(Ie,Te){for await(const Ue of G.call(this,Ie,Te))return Ue}async function ae(Ie,Te){if(typeof Ie!="function")throw new n("fn",["Function","AsyncFunction"],Ie);async function Ue(Ve,Ee){return await Ie(Ve,Ee),ee}for await(const Ve of V.call(this,Ue,Te));}function G(Ie,Te){if(typeof Ie!="function")throw new n("fn",["Function","AsyncFunction"],Ie);async function Ue(Ve,Ee){return await Ie(Ve,Ee)?Ve:ee}return V.call(this,Ue,Te)}class Q extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ne(Ie,Te,Ue){var Ve;if(typeof Ie!="function")throw new n("reducer",["Function","AsyncFunction"],Ie);Ue!=null&&u(Ue,"options"),(Ue==null?void 0:Ue.signal)!=null&&o(Ue.signal,"options.signal");let Ee=arguments.length>1;if(Ue!=null&&(Ve=Ue.signal)!==null&&Ve!==void 0&&Ve.aborted){const se=new i(void 0,{cause:Ue.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(se)),se}const Ae=new e,B=Ae.signal;if(Ue!=null&&Ue.signal){const se={once:!0,[c]:this,[f]:!0};Ue.signal.addEventListener("abort",()=>Ae.abort(),se)}let Ce=!1;try{for await(const se of this){var Re;if(Ce=!0,Ue!=null&&(Re=Ue.signal)!==null&&Re!==void 0&&Re.aborted)throw new i;Ee?Te=await Ie(Te,se,{signal:B}):(Te=se,Ee=!0)}if(!Ce&&!Ee)throw new Q}finally{Ae.abort()}return Te}async function de(Ie){Ie!=null&&u(Ie,"options"),(Ie==null?void 0:Ie.signal)!=null&&o(Ie.signal,"options.signal");const Te=[];for await(const Ve of this){var Ue;if(Ie!=null&&(Ue=Ie.signal)!==null&&Ue!==void 0&&Ue.aborted)throw new i(void 0,{cause:Ie.signal.reason});x(Te,Ve)}return Te}function _e(Ie,Te){const Ue=V.call(this,Ie,Te);return(async function*(){for await(const Ee of Ue)yield*Ee}).call(this)}function ve(Ie){if(Ie=A(Ie),k(Ie))return 0;if(Ie<0)throw new a("number",">= 0",Ie);return Ie}function Pe(Ie,Te=void 0){return Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),Ie=ve(Ie),(async function*(){var Ve;if(Te!=null&&(Ve=Te.signal)!==null&&Ve!==void 0&&Ve.aborted)throw new i;for await(const Ae of this){var Ee;if(Te!=null&&(Ee=Te.signal)!==null&&Ee!==void 0&&Ee.aborted)throw new i;Ie--<=0&&(yield Ae)}}).call(this)}function Fe(Ie,Te=void 0){return Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),Ie=ve(Ie),(async function*(){var Ve;if(Te!=null&&(Ve=Te.signal)!==null&&Ve!==void 0&&Ve.aborted)throw new i;for await(const Ae of this){var Ee;if(Te!=null&&(Ee=Te.signal)!==null&&Ee!==void 0&&Ee.aborted)throw new i;if(Ie-- >0&&(yield Ae),Ie<=0)return}}).call(this)}return Ry.streamReturningOperators={asIndexedPairs:_(fe,"readable.asIndexedPairs will be removed in a future version."),drop:Pe,filter:G,flatMap:_e,map:V,take:Fe,compose:Z},Ry.promiseReturningOperators={every:Y,forEach:ae,reduce:ne,toArray:de,some:ue,find:X},Ry}var jx,jN;function u8(){if(jN)return jx;jN=1;const{ArrayPrototypePop:e,Promise:t}=Hr(),{isIterable:n,isNodeStream:r,isWebStream:a}=Fl(),{pipelineImpl:i}=dk(),{finished:o}=tc();c8();function s(...u){return new t((c,f)=>{let h,m;const g=u[u.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(u);h=v.signal,m=v.end}i(u,(v,w)=>{v?f(v):c(w)},{signal:h,end:m})})}return jx={finished:o,pipeline:s},jx}var DN;function c8(){if(DN)return ux.exports;DN=1;const{Buffer:e}=ec(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Hr(),{promisify:{custom:a}}=ki(),{streamReturningOperators:i,promiseReturningOperators:o}=bX(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=pi(),u=l8(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=Yv(),{pipeline:h}=dk(),{destroyer:m}=bh(),g=tc(),v=u8(),w=Fl(),_=ux.exports=lk().Stream;_.isDestroyed=w.isDestroyed,_.isDisturbed=w.isDisturbed,_.isErrored=w.isErrored,_.isReadable=w.isReadable,_.isWritable=w.isWritable,_.Readable=Xv();for(const E of n(i)){let k=function(...D){if(new.target)throw s();return _.Readable.from(r(A,this,D))};var S=k;const A=i[E];t(k,"name",{__proto__:null,value:A.name}),t(k,"length",{__proto__:null,value:A.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let k=function(...O){if(new.target)throw s();return r(A,this,O)};var S=k;const A=o[E];t(k,"name",{__proto__:null,value:A.name}),t(k,"length",{__proto__:null,value:A.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}_.Writable=ck(),_.Duplex=Nl(),_.Transform=o8(),_.PassThrough=s8(),_.pipeline=h;const{addAbortSignal:x}=Zv();return _.addAbortSignal=x,_.finished=g,_.destroy=m,_.compose=u,_.setDefaultHighWaterMark=c,_.getDefaultHighWaterMark=f,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),_.Stream=_,_._isUint8Array=function(A){return A instanceof Uint8Array},_._uint8ArrayToBuffer=function(A){return e.from(A.buffer,A.byteOffset,A.byteLength)},ux.exports}var MN;function vX(){return MN||(MN=1,function(e){const t=c8(),n=u8(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(lx)),lx.exports}var d8=vX();class fk extends d8.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new ze(ot.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new ze(ot.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class hk extends d8.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Wa(new ze(ot.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Wa(new ze(ot.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new ze(ot.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new ze(ot.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new ze(ot.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var bo=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},vo=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Ya{get position(){return this.flag&ed?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=Qa(t,n);Object.assign(this,ld(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&Vv||this.inode.flags&Si.Sync)}_emitChange(){Pa(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw ze.With("EBADF",this.path,"chown");this.dirty=!0,qD(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=Ju(t,-1);if(n<0)throw new ze(ot.EINVAL,"Invalid mode");if(this.closed)throw ze.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>yr?-61441:yr)|n,(this._isSync||n>yr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw ze.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw ze.With("EBADF",this.path,"truncate");if(t<0)throw new ze(ot.EINVAL);if(this.dirty=!0,!(this.flag&Va||this.flag&_l))throw new ze(ot.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw ze.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Pb(t),this.inode.mtimeMs=Pb(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=xl(n,"utf8","a",420);if(!(Sl(r.flag)&ed))throw new ze(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new ze(ot.EINVAL,"Encoding not specified");const i=typeof t=="string"?Ar.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw ze.With("EBADF",this.path,"read");if(this.flag&Va)throw new ze(ot.EPERM,"File not opened with a readable mode");this.inode.flags&Si.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Cm(this.inode)&&!km(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=xl(t,null,"r",292);if(Sl(n.flag)&Va)throw new ze(ot.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Ar.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw ze.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw ze.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Si.Immutable)throw new ze(ot.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Va)throw ze.With("EBADF",this.path,"readLines");return LY({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw ze.With("EBADF",this.path,"stat");if(!ir(this.context,this.inode,pa))throw ze.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new pd(this.inode):new Pl(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw ze.With("EBADF",this.path,"write");if(this.inode.flags&Si.Immutable)throw new ze(ot.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Va||this.flag&_l))throw new ze(ot.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Cm(this.inode)&&!km(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Ar.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const u=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:u}}async writeFile(t,n={}){const r=xl(n,"utf8","w",420),a=Sl(r.flag);if(!(a&Va||a&_l))throw new ze(ot.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new ze(ot.EINVAL,"Encoding not specified");const i=typeof t=="string"?Ar.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw ze.With("EBADF",this.path,"close");await this.sync(),this.dispose(),GD(this.context,this.fd)}dispose(t){if(this.closed)throw ze.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw ze.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Va)throw ze.With("EBADF",this.path,"createReadStream");return new fk(t,this)}createWriteStream(t={}){if(this.closed)throw ze.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Si.Immutable)throw new ze(ot.EPERM,"File is immutable",this.path,"createWriteStream");return new hk(t,this)}}async function pk(e,t){e=ln(e),t=ln(t);const n=Pn(e,this),r=Pn(t,this);if(!(await Ki.call(this,Zn(e))).hasAccess(Kr,this))throw ze.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),Pa(this,"rename",e.toString()),Pa(this,"change",t.toString());return}await x0.call(this,t,await _0(e)),await w0.call(this,e),Pa(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}async function v0(e){try{const{fs:t,path:n}=Pn(await rc.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof ze&&t.code=="ENOENT")return!1;throw t}}async function Ki(e,t){e=ln(e);const{fs:n,path:r}=Pn(await rc.call(this,e),this);try{const a=await n.stat(r);if(ma&&!ir(this,a,pa))throw ze.With("EACCES",r,"stat");return t!=null&&t.bigint?new pd(a):new Pl(a)}catch(a){throw or(a,{[r]:e})}}async function Jv(e,t){e=ln(e);const{fs:n,path:r}=Pn(e,this);try{const a=await n.stat(r);if(ma&&!ir(this,a,pa))throw ze.With("EACCES",r,"lstat");return t!=null&&t.bigint?new pd(a):new Pl(a)}catch(a){throw or(a,{[r]:e})}}async function f8(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await bo(n,await wo.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function w0(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{if(ma&&!ir(this,await t.stat(n),Kr))throw ze.With("EACCES",n,"unlink");await t.unlink(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function vh(e,t,n){var r;t=ln(t);const a=Ju(n.mode,420),i=Sl(n.flag),{fullPath:o,fs:s,path:u,stats:c}=await Bb(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&Uv))throw ze.With("ENOENT",o,"_open");const h=await s.stat(Zn(u));if(!ir(e,h,Kr))throw ze.With("EACCES",Zn(o),"_open");if(!Ho(h))throw ze.With("ENOTDIR",Zn(o),"_open");const{euid:m,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:Wo.credentials,v=await s.createFile(u,{mode:a,uid:h.mode&p0?h.uid:m,gid:h.mode&m0?h.gid:g});return new Ya(e,Lb(new Fb(e,t,s,u,i,v)))}if(!ir(e,c,WD(i)))throw ze.With("EACCES",o,"_open");if(i&qv)throw ze.With("EEXIST",o,"_open");const f=new Ya(e,Lb(new Fb(e,t,s,u,i,c)));return i&Hv&&await f.truncate(0),f}async function wo(e,t="r",n=420){return await vh(this,e,{flag:t,mode:n})}async function _0(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=xl(t,null,"r",292);return await bo(n,typeof e=="object"&&"fd"in e?e:await wo.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function x0(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xl(n,"utf8","w+",420),i=bo(r,e instanceof Ya?e:await wo.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new ze(ot.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function h8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xl(n,"utf8","a",420);if(!(Sl(a.flag)&ed))throw new ze(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new ze(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Ar.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await bo(r,typeof e=="object"&&"fd"in e?e:await wo.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function mk(e){e=await rc.call(this,e);const{fs:t,path:n}=Pn(e,this);try{const r=await t.stat(n);if(!r)throw ze.With("ENOENT",e,"rmdir");if(!Ho(r))throw ze.With("ENOTDIR",n,"rmdir");if(ma&&!ir(this,r,Kr))throw ze.With("EACCES",n,"rmdir");await t.rmdir(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function wh(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Wo.credentials;t=typeof t=="object"?t:{mode:t};const o=Ju(t==null?void 0:t.mode,511);e=await rc.call(this,e);const{fs:s,path:u,root:c}=Pn(e,this),f={[u]:e},h=async(m,g)=>{if(!ir(this,g,Kr))throw ze.With("EACCES",Zn(m),"mkdir");const v=await s.mkdir(m,{mode:o,uid:g.mode&p0?g.uid:a,gid:g.mode&m0?g.gid:i});return Pa(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){await h(u,await s.stat(Zn(u)));return}const m=[];for(let v=u,w=e;!await s.exists(v);v=Zn(v),w=Zn(w))m.unshift(v),f[v]=w;if(!m.length)return;const g=[await s.stat(Zn(m[0]))];for(const[v,w]of m.entries())g.push(await h(w,g[v]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw or(m,f)}}async function nc(e,t){t=typeof t=="object"?t:{encoding:t},e=await rc.call(this,e);const{fs:n,path:r}=Pn(e,this),a=await n.stat(r).catch(u=>ur(or(u,{[r]:e})));if(!a)throw ze.With("ENOENT",e,"readdir");if(!ir(this,a,pa))throw ze.With("EACCES",e,"readdir");if(!Ho(a))throw ze.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(u=>ur(or(u,{[r]:e}))),o=[],s=async u=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(tr(r,u)).catch(f=>{if(f.code!="ENOENT")throw or(f,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?o.push(new Tm(u,c)):(t==null?void 0:t.encoding)=="buffer"?o.push(Ar.from(u)):o.push(u),!(!(t!=null&&t.recursive)||!Ho(c))))for(const f of await nc.call(this,tr(e,u),t))f instanceof Tm?(f.path=tr(u,f.path),o.push(f)):Ar.isBuffer(f)?o.push(Ar.from(tr(u,BE(f)))):o.push(tr(u,f))};return await Promise.all(i.map(s)),o}async function p8(e,t){e=ln(e),t=ln(t);const{fs:n,path:r}=Pn(e,this),a=Pn(t,this);if(n!=a.fs)throw ze.With("EXDEV",t,"link");try{if(ma&&!ir(this,await n.stat(Zn(r)),pa))throw ze.With("EACCES",Zn(r),"link");if(ma&&!(await Ki.call(this,Zn(t))).hasAccess(Kr,this))throw ze.With("EACCES",Zn(t),"link");if(ma&&!ir(this,await n.stat(r),pa))throw ze.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw or(i,{[a.path]:t,[r]:e})}}async function m8(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new ze(ot.EINVAL,"Invalid symlink type: "+n);if(t=ln(t),await v0.call(this,t))throw ze.With("EEXIST",t,"symlink");const a=bo(r,await vh(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(ln(e,!0)),await a.chmod(Ml)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function $b(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await bo(n,await vh(this,ln(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function g8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await wo.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function y8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await vh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function b8(e,t){const n={stack:[],error:void 0,hasError:!1};try{await bo(n,await wo.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function v8(e,t){const n={stack:[],error:void 0,hasError:!1};try{await bo(n,await vh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function gk(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await wo.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function w8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await vh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function Bb(e,t,n){if(n){const u=Pn(t,e),c=await u.fs.stat(u.path).catch(()=>{});return{...u,fullPath:t,stats:c}}try{const u=Pn(t,e),c=await u.fs.stat(u.path);if(!Zf(c))return{...u,fullPath:t,stats:c};const f=Rl.call(e,Zn(t),(await $b.call(e,t)).toString());return await Bb(e,f)}catch{}const{base:r,dir:a}=ms(t),i=a=="/"?"/":await rc.call(e,a),o=tr(i,r),s=Pn(o,e);try{const u=await s.fs.stat(s.path);if(!Zf(u))return{...s,fullPath:o,stats:u};const c=Rl.call(e,i,(await $b.call(e,o)).toString());return await Bb(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}async function rc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=await Bb(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Ar.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function wX(e,t={}){const n=new XD(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var u;(u=r.shift())===null||u===void 0||u({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function _8(e,t=WE){if(!(await Ki.call(this,e)).hasAccess(t,this))throw new ze(ot.EACCES)}async function S0(e,t){e=ln(e);const n=await Jv.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&yr){case la:if(t!=null&&t.recursive)for(const r of await nc.call(this,e))await S0.call(this,tr(e,r),t);await mk.call(this,e);break;case $o:case Ml:case dd:case fd:await w0.call(this,e);break;case hd:case cd:default:throw new ze(ot.EPERM,"File type not supported",e,"rm")}}async function x8(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await wh.call(this,a),n=="buffer"?Ar.from(a):a}async function yk(e,t,n){if(e=ln(e),t=ln(t),n&&n&KE&&await v0.call(this,t))throw new ze(ot.EEXIST,"Destination file already exists",t,"copyFile");await x0.call(this,t,await _0.call(this,e)),Pa(this,"rename",t.toString())}function S8(e,t){return e=ln(e),Promise.resolve(new sk(e,this))}async function bk(e,t,n){e=ln(e),t=ln(t);const r=await Jv.call(this,e);if(n!=null&&n.errorOnExist&&await v0.call(this,t))throw new ze(ot.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&yr){case la:{if(!(n!=null&&n.recursive))throw new ze(ot.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([nc.call(this,e,{withFileTypes:!0}),wh.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(tr(e,o.name),tr(t,o.name))||await bk.call(this,tr(e,o.name),tr(t,o.name),n)};await Promise.all(a.map(i));break}case $o:case Ml:await yk.call(this,e,t);break;case dd:case fd:case hd:case cd:default:throw new ze(ot.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await gk.call(this,t,r.atime,r.mtime)}async function E8(e,t){e=ln(e);const{fs:n}=Pn(e,this);return Promise.resolve(ZD(n,t==null?void 0:t.bigint))}function k8(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const u=await nc(s,{withFileTypes:r,encoding:"utf8"});for(const c of u){const f=r?c.path:s+"/"+c;a(r?c:f)||((await Ki(f)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(f)),i.some(h=>h.test(f.replace(/^\/+/g,"")))&&(yield r?c:f.replace(/^\/+/g,"")))}}return o(n)}const _X=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Ya,access:_8,appendFile:h8,chmod:b8,chown:g8,constants:zD,copyFile:yk,cp:bk,exists:v0,glob:k8,lchmod:v8,lchown:y8,link:p8,lstat:Jv,lutimes:w8,mkdir:wh,mkdtemp:x8,open:wo,opendir:S8,readFile:_0,readdir:nc,readlink:$b,realpath:rc,rename:pk,rm:S0,rmdir:mk,stat:Ki,statfs:E8,symlink:m8,truncate:f8,unlink:w0,utimes:gk,watch:wX,writeFile:x0},Symbol.toStringTag,{value:"Module"})),Cn=()=>{};async function xX(e){const t=[];for await(const n of e)t.push(n);return t}function SX(e,t,n=Cn){pk.call(this,e,t).then(()=>n()).catch(n)}function EX(e,t=Cn){v0.call(this,e).then(t).catch(()=>t(!1))}function kX(e,t,n=Cn){n=typeof t=="function"?t:n,Ki.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function CX(e,t,n=Cn){n=typeof t=="function"?t:n,Jv.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function AX(e,t=0,n=Cn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;f8.call(this,e,r).then(()=>n()).catch(n)}function TX(e,t=Cn){w0.call(this,e).then(()=>t()).catch(t)}function RX(e,t,n,r=Cn){const a=Ju(n,420);r=typeof n=="function"?n:r,wo.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function NX(e,t,n=Cn){n=typeof t=="function"?t:n,_0.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function IX(e,t,n,r=Cn){r=typeof n=="function"?n:r,x0.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function OX(e,t,n,r=Cn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,h8.call(this,e,t,a).then(()=>r()).catch(r)}function jX(e,t,n=Cn){n=typeof t=="function"?t:n,new Ya(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new pd(r):r)).catch(n)}function DX(e,t=Cn){new Ya(this,e).close().then(()=>t()).catch(t)}function MX(e,t,n=Cn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new Ya(this,e);if(r<0)throw new ze(ot.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function PX(e,t=Cn){new Ya(this,e).sync().then(()=>t()).catch(t)}function FX(e,t=Cn){new Ya(this,e).datasync().then(()=>t()).catch(t)}function LX(e,t,n,r,a,i=Cn){let o,s,u,c,f;const h=new Ya(this,e);if(typeof t=="string"){switch(f="utf8",typeof n){case"function":i=n;break;case"number":c=n,f=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new ze(ot.EINVAL,"Invalid arguments"));return}o=Ar.from(t),s=0,u=o.length;const m=i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o.toString(f))).catch(m)}else{o=Ar.from(t.buffer),s=n,u=r,c=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o)).catch(m)}}function $X(e,t,n,r,a,i=Cn){new Ya(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function BX(e,t,n,r=Cn){new Ya(this,e).chown(t,n).then(()=>r()).catch(r)}function zX(e,t,n){new Ya(this,e).chmod(t).then(()=>n()).catch(n)}function UX(e,t,n,r=Cn){new Ya(this,e).utimes(t,n).then(()=>r()).catch(r)}function qX(e,t=Cn){mk.call(this,e).then(()=>t()).catch(t)}function HX(e,t,n=Cn){wh.call(this,e,t).then(()=>n()).catch(n)}function VX(e,t,n=Cn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};nc.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function GX(e,t,n=Cn){p8.call(this,e,t).then(()=>n()).catch(n)}function WX(e,t,n,r=Cn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,m8.call(this,e,t,a).then(()=>r()).catch(r)}function KX(e,t,n=Cn){n=typeof t=="function"?t:n,$b.call(this,e).then(r=>n(void 0,r)).catch(n)}function ZX(e,t,n,r=Cn){g8.call(this,e,t,n).then(()=>r()).catch(r)}function YX(e,t,n,r=Cn){y8.call(this,e,t,n).then(()=>r()).catch(r)}function XX(e,t,n=Cn){b8.call(this,e,t).then(()=>n()).catch(n)}function JX(e,t,n=Cn){v8.call(this,e,t).then(()=>n()).catch(n)}function QX(e,t,n,r=Cn){gk.call(this,e,t,n).then(()=>r()).catch(r)}function eJ(e,t,n,r=Cn){w8.call(this,e,t,n).then(()=>r()).catch(r)}function tJ(e,t,n=Cn){n=typeof t=="function"?t:n,rc.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function nJ(e,t,n=Cn){const r=typeof t=="number"?t:pa;n=typeof t=="function"?t:n,_8.call(this,e,r).then(()=>n()).catch(n)}const Af=new Map;function rJ(e,t,n){const r=ln(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new ze(ot.EINVAL,"No listener specified",e.toString(),"watchFile");if(Af.has(r)){const o=Af.get(r);o&&o.listeners.add(n);return}const i=new qY(this,r,a);i.on("change",(o,s)=>{const u=Af.get(r);if(u)for(const c of u.listeners)c(o,s)}),Af.set(r,{watcher:i,listeners:new Set})}function aJ(e,t=Cn){const n=ln(e),r=Af.get(n);r&&(t&&t!==Cn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Af.delete(n)))}function iJ(e,t,n){const r=new XD(this,ln(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Cn),r}function oJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=wo.call(this,e,"r",t==null?void 0:t.mode);return new fk({...t,autoClose:!0},n)}function sJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=wo.call(this,e,"w",t==null?void 0:t.mode);return new hk(t,n)}function lJ(e,t,n=Cn){n=typeof t=="function"?t:n,S0.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function uJ(e,t,n=Cn){n=typeof t=="function"?t:n,x8.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function cJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,yk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function dJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,new Ya(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function fJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,new Ya(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function hJ(e,t,n=Cn){n=typeof t=="function"?t:n,S8.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function pJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,bk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function mJ(e,t,n=Cn){n=typeof t=="function"?t:n,E8.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function gJ(e,t){const n=await wo.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function yJ(e,t,n=Cn){n=typeof t=="function"?t:n;const r=k8.call(this,e,typeof t=="function"?void 0:t);xX(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Dc=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},Bi=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},bJ=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},zb;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(zb||(zb={}));let C8=(()=>{var e,t,n,r,a;let i=[ud()],o,s=[],u,c,f=[],h=[],m,g=[],v=[],w,_=[],x=[],S,E=[],A=[],k,D=[],O=[],N,z=[],H=[];return u=class{constructor(ee=ur(new ze(ot.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Bi(this,f,0),this.extsize=(Bi(this,h),Bi(this,g,0)),this.nextents=(Bi(this,v),Bi(this,_,0)),this.projid=(Bi(this,x),Bi(this,E,0)),this.cowextsize=(Bi(this,A),Bi(this,D,0)),this.pad=(Bi(this,O),Bi(this,z,[])),Bi(this,H),this.extsize=ee.size,this.nextents=1,this.projid=ee.uid,this.cowextsize=ee.size;for(const P of Object.keys(Si))ee.flags&Si[P]&&P in zb&&(this.xflags|=zb[P])}},bJ(u,"fsxattr"),(()=>{const ee=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=yn).uint32.bind(e)],m=[(t=yn).uint32.bind(t)],w=[(n=yn).uint32.bind(n)],S=[(r=yn).uint32.bind(r)],k=[(a=yn).uint32.bind(a)],N=[yn.char(8)],Dc(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:P=>"xflags"in P,get:P=>P.xflags,set:(P,Z)=>{P.xflags=Z}},metadata:ee},f,h),Dc(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:P=>"extsize"in P,get:P=>P.extsize,set:(P,Z)=>{P.extsize=Z}},metadata:ee},g,v),Dc(null,null,w,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:P=>"nextents"in P,get:P=>P.nextents,set:(P,Z)=>{P.nextents=Z}},metadata:ee},_,x),Dc(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:P=>"projid"in P,get:P=>P.projid,set:(P,Z)=>{P.projid=Z}},metadata:ee},E,A),Dc(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:P=>"cowextsize"in P,get:P=>P.cowextsize,set:(P,Z)=>{P.cowextsize=Z}},metadata:ee},D,O),Dc(null,null,N,{kind:"field",name:"pad",static:!1,private:!1,access:{has:P=>"pad"in P,get:P=>P.pad,set:(P,Z)=>{P.pad=Z}},metadata:ee},z,H),Dc(null,o={value:u},i,{kind:"class",name:u.name,metadata:ee},null,s),u=o.value,ee&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ee}),Bi(u,s)})(),u})();var Or;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Or||(Or={}));var Mo;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Mo||(Mo={}));async function vJ(e,t,...n){e=ln(e);const{fs:r,path:a}=Pn(e,this);try{const i=new sa(await r.stat(a));switch(t){case Or.GetFlags:case Mo.GetFlags:return i.flags;case Or.SetFlags:case Mo.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Or.GetVersion:case Mo.GetVersion:return i.version;case Or.SetVersion:case Mo.SetVersion:i.version=n[0],await r.touch(a,i);return;case Or.Fiemap:break;case Or.GetXattr:return new C8(i);case Or.SetXattr:break;case Or.GetLabel:return r.label;case Or.SetLabel:r.label=n[0];return;case Or.GetUUID:return r.uuid;case Or.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new ze(ot.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function wJ(e,t,...n){e=ln(e);const{fs:r,path:a}=Pn(e,this);try{const i=new sa(r.statSync(a));switch(t){case Or.GetFlags:case Mo.GetFlags:return i.flags;case Or.SetFlags:case Mo.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Or.GetVersion:case Mo.GetVersion:return i.version;case Or.SetVersion:case Mo.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Or.Fiemap:break;case Or.GetXattr:return new C8(i);case Or.SetXattr:break;case Or.GetLabel:return r.label;case Or.SetLabel:r.label=n[0];return;case Or.GetUUID:return r.uuid;case Or.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new ze(ot.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const _J=[];function _h(e,t,n,r){if(!t.startsWith("user.")&&!_J.includes(t))throw new ze(ot.EPERM,"Only attributes in the user namespace are supported",n,r)}async function xJ(e,t,n={}){var r;e=ln(e);const{fs:a,path:i}=Pn(e,this);_h(this,t,e,"xattr.get");try{const o=await a.stat(i);if(ma&&!ir(this,o,pa))throw ze.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Uu);const s=o.attributes.get(t);if(!s)throw ze.With("ENODATA",i,"xattr.get");const u=Ar.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}function SJ(e,t,n={}){var r;e=ln(e),_h(this,t,e,"xattr.get");const{fs:a,path:i}=Pn(e,this);try{const o=a.statSync(i);if(ma&&!ir(this,o,pa))throw ze.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Uu);const s=o.attributes.get(t);if(!s)throw ze.With("ENODATA",i,"xattr.get");const u=Ar.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}async function EJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Pn(e,this);_h(this,t,e,"xattr.set");try{const s=await i.stat(o);if(ma&&!ir(this,s,Kr))throw ze.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Uu);const u=s.attributes.get(t);if(r.create&&u)throw ze.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw ze.With("ENODATA",o,"xattr.set");s.attributes.set(t,Ar.from(n)),await i.touch(o,ld(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}function kJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Pn(e,this);_h(this,t,e,"xattr.set");try{const s=i.statSync(o);if(ma&&!ir(this,s,Kr))throw ze.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Uu);const u=s.attributes.get(t);if(r.create&&u)throw ze.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw ze.With("ENODATA",o,"xattr.set");s.attributes.set(t,Ar.from(n)),i.touchSync(o,ld(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}async function CJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Pn(e,this);_h(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(ma&&!ir(this,i,Kr))throw ze.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Uu),!i.attributes.get(t))throw ze.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,ld(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}function AJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Pn(e,this);_h(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(ma&&!ir(this,i,Kr))throw ze.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Uu),!i.attributes.get(t))throw ze.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,ld(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}async function TJ(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}function RJ(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}const NJ=Object.freeze(Object.defineProperty({__proto__:null,get:xJ,getSync:SJ,list:TJ,listSync:RJ,remove:CJ,removeSync:AJ,set:EJ,setSync:kJ},Symbol.toStringTag,{value:"Module"})),jr=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:kY,Dir:sk,Dirent:Tm,get IOC(){return Or},get IOC32(){return Mo},ReadStream:fk,Stats:Pl,StatsFs:EY,WriteStream:hk,access:nJ,accessSync:lX,appendFile:OX,appendFileSync:KY,chmod:XX,chmodSync:iX,chown:ZX,chownSync:rX,chroot:zY,close:DX,closeSync:gd,constants:zD,copyFile:cJ,copyFileSync:n8,cp:pJ,cpSync:r8,createReadStream:oJ,createWriteStream:sJ,exists:EX,existsSync:JE,fchmod:zX,fchmodSync:ak,fchown:BX,fchownSync:rk,fdatasync:FX,fdatasyncSync:JY,fstat:jX,fstatSync:ZY,fsync:PX,fsyncSync:XY,ftruncate:MX,ftruncateSync:YY,futimes:UX,futimesSync:ik,glob:yJ,globSync:pX,ioctl:vJ,ioctlSync:wJ,lchmod:JX,lchmodSync:oX,lchown:YX,lchownSync:aX,link:GX,linkSync:tX,lopenSync:Wv,lstat:CX,lstatSync:QE,lutimes:eJ,lutimesSync:sX,mkdir:HX,mkdirSync:ok,mkdtemp:uJ,mkdtempSync:uX,mount:XE,open:RX,openAsBlob:gJ,openSync:Gv,opendir:hJ,opendirSync:fX,promises:_X,read:$X,readFile:NX,readFileSync:tk,readSync:eX,readdir:VX,readdirSync:yh,readlink:KX,readlinkSync:R2,readv:dJ,readvSync:cX,realpath:tJ,realpathSync:Qu,rename:SX,renameSync:GY,rm:lJ,rmSync:t8,rmdir:qX,rmdirSync:QD,stat:kX,statSync:qu,statfs:mJ,statfsSync:hX,symlink:WX,symlinkSync:nX,truncate:AX,truncateSync:WY,umount:KD,unlink:TX,unlinkSync:ek,unwatchFile:aJ,utimes:QX,utimesSync:e8,watch:iJ,watchFile:rJ,write:LX,writeFile:IX,writeFileSync:nk,writeSync:QY,writev:fJ,writevSync:dX,xattr:NJ},Symbol.toStringTag,{value:"Module"}));function PN(e){return ND(e)||GE(e)||e instanceof YE}async function A8(e,t=0){if(typeof e!="object"||e==null)throw xi(new ze(ot.EINVAL,"Invalid options on mount configuration"));if(!PN(e))throw xi(new ze(ot.EINVAL,"Invalid mount configuration"));if(e instanceof YE)return await e.ready(),e;GE(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&PN(i)){if(RD("Resolving nested mount configuration: "+a),t>10)throw xi(new ze(ot.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await A8(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw xi(new ze(ot.EPERM,"Backend not available: "+n.name));sY(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function IJ(e){if(!ND(e))throw new TypeError("Invalid single mount point configuration");const t=await A8(e);KD("/"),XE("/",t)}const OJ=["delete"];Math.max(...OJ.map(e=>e.length));oY("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const T8=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;T8[e]=t}function jJ(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^T8[(t^e[n])&255];return(t^4294967295)>>>0}var Ir=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},_n=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},vk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let FN=(()=>{var e,t,n,r;let a=[ud()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],v,w=[],_=[],x,S=[],E=[];return s=class{constructor(){this.id=_n(this,c,0),this.offset_=(_n(this,f),_n(this,m,0)),this.offset=(_n(this,g),_n(this,w,0)),this.size=(_n(this,_),_n(this,S,0)),_n(this,E)}},vk(s,"MetadataEntry"),(()=>{const A=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=yn).uint32.bind(e)],h=[(t=yn).uint32.bind(t)],v=[(n=yn).uint32.bind(n)],x=[(r=yn).uint32.bind(r)],Ir(null,null,u,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,D)=>{k.id=D}},metadata:A},c,f),Ir(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,D)=>{k.offset_=D}},metadata:A},m,g),Ir(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,D)=>{k.offset=D}},metadata:A},w,_),Ir(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,D)=>{k.size=D}},metadata:A},S,E),Ir(null,i={value:s},a,{kind:"class",name:s.name,metadata:A},null,o),s=i.value,A&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:A}),_n(s,o)})(),s})();const LN=255;let Mc=(()=>{var e,t,n,r;let a=[ud()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],v,w=[],_=[],x,S=[],E=[],A,k=[],D=[];var O=s=class{constructor(N=ur(new ze(ot.EINVAL,"Metadata block must be initialized with a superblock")),z=0){if(this.superblock=N,this.offset=z,this.checksum=_n(this,c,0),this.timestamp=(_n(this,f),_n(this,m,Date.now())),this.previous_offset_=(_n(this,g),_n(this,w,0)),this.previous_offset=(_n(this,_),_n(this,S,0)),this._previous=_n(this,E),this.entries=_n(this,k,Array.from({length:LN},()=>new FN)),_n(this,D),this.superblock=N,this.offset=z,!!z&&(Bv(this,N.store._buffer.subarray(z,z+Dr(O))),!R8(this)))throw zv(new ze(ot.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+z.toString(16)))}get previous(){var N;if(this.previous_offset)return(N=this._previous)!==null&&N!==void 0||(this._previous=new O(this.superblock,this.previous_offset)),this._previous}};return vk(s,"MetadataBlock"),(()=>{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=yn).uint32.bind(e)],h=[(t=yn).uint32.bind(t)],v=[(n=yn).uint32.bind(n)],x=[(r=yn).uint32.bind(r)],A=[Em(FN,LN)],Ir(null,null,u,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:z=>"checksum"in z,get:z=>z.checksum,set:(z,H)=>{z.checksum=H}},metadata:N},c,f),Ir(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:z=>"timestamp"in z,get:z=>z.timestamp,set:(z,H)=>{z.timestamp=H}},metadata:N},m,g),Ir(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:z=>"previous_offset_"in z,get:z=>z.previous_offset_,set:(z,H)=>{z.previous_offset_=H}},metadata:N},w,_),Ir(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:z=>"previous_offset"in z,get:z=>z.previous_offset,set:(z,H)=>{z.previous_offset=H}},metadata:N},S,E),Ir(null,null,A,{kind:"field",name:"entries",static:!1,private:!1,access:{has:z=>"entries"in z,get:z=>z.entries,set:(z,H)=>{z.entries=H}},metadata:N},k,D),Ir(null,i={value:s},a,{kind:"class",name:s.name,metadata:N},null,o),O=s=i.value,N&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),_n(s,o)})(),O=s})();const $N=2049864546;(()=>{var e,t,n,r,a,i,o,s,u,c,f;let h=[ud()],m,g=[],v,w,_=[],x=[],S,E=[],A=[],k,D=[],O=[],N,z=[],H=[],ee,P=[],Z=[],V,fe=[],ue=[],Y,X=[],ae=[],G,Q=[],ne=[],de,_e=[],ve=[],Pe,Fe=[],Ie=[],Te,Ue=[],Ve=[],Ee,Ae=[],B=[],Ce,Re=[],se=[];var ie=v=class{constructor(J=ur(new ze(ot.EINVAL,"Super block must be initialized with a store"))){if(this.store=J,this.checksum=_n(this,_,0),this.magic=(_n(this,x),_n(this,E,$N)),this.version=(_n(this,A),_n(this,D,1)),this.inode_format=(_n(this,O),_n(this,z,AY)),this.flags=(_n(this,H),_n(this,P,0)),this.used_bytes=(_n(this,Z),_n(this,fe,BigInt(0))),this.total_bytes=(_n(this,ue),_n(this,X,BigInt(0))),this.uuid=(_n(this,ae),_n(this,Q,BigInt(0))),this.metadata_block_size=(_n(this,ne),_n(this,_e,Dr(Mc))),this.metadata_offset_=(_n(this,ve),_n(this,Fe,0)),this.metadata_offset=(_n(this,Ie),_n(this,Ue,0)),this.metadata=_n(this,Ve),this.label=_n(this,Ae,""),this._padding=(_n(this,B),_n(this,Re,new Array(132).fill(0))),_n(this,se),this.store=J,J._view.getUint32(HZ(ie,"magic"),!0)!=$N){Wa("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Mc(this),this.metadata.offset=Dr(ie),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Dr(ie)+Dr(Mc)),this.total_bytes=BigInt(J._buffer.byteLength),J._write(this),J._write(this.metadata);return}if(Bv(this,J._buffer.subarray(0,Dr(ie))),!R8(this))throw zv(new ze(ot.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Mc(this,this.metadata_offset)}rotateMetadata(){const J=new Mc(this);return J.offset=Number(this.used_bytes),J.previous_offset=this.metadata_offset,this.metadata=J,this.metadata_offset=J.offset,this.store._write(J),this.used_bytes+=BigInt(Dr(Mc)),this.store._write(this),J}isUnused(J,xe){if(!xe)return!0;if(J+xe>this.total_bytes||J<Dr(ie))return!1;for(let Me=this.metadata;Me;Me=Me.previous){if(J<Me.offset+Dr(Mc)&&J+xe>Me.offset)return!1;for(const Se of Me.entries)if(Se.offset&&(J>=Se.offset&&J<Se.offset+Se.size||J+xe>Se.offset&&J+xe<=Se.offset+Se.size||J<=Se.offset&&J+xe>=Se.offset+Se.size))return!1}return!0}};return vk(v,"SuperBlock"),(()=>{const J=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;w=[(e=yn).uint32.bind(e)],S=[(t=yn).uint32.bind(t)],k=[(n=yn).uint16.bind(n)],N=[(r=yn).uint16.bind(r)],ee=[(a=yn).uint32.bind(a)],V=[(i=yn).uint64.bind(i)],Y=[(o=yn).uint64.bind(o)],G=[(s=yn).uint128.bind(s)],de=[(u=yn).uint32.bind(u)],Pe=[(c=yn).uint32.bind(c)],Te=[(f=yn).uint32.bind(f)],Ee=[yn.char(64)],Ce=[yn.char(132)],Ir(null,null,w,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Me)=>{xe.checksum=Me}},metadata:J},_,x),Ir(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Me)=>{xe.magic=Me}},metadata:J},E,A),Ir(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Me)=>{xe.version=Me}},metadata:J},D,O),Ir(null,null,N,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Me)=>{xe.inode_format=Me}},metadata:J},z,H),Ir(null,null,ee,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Me)=>{xe.flags=Me}},metadata:J},P,Z),Ir(null,null,V,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Me)=>{xe.used_bytes=Me}},metadata:J},fe,ue),Ir(null,null,Y,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Me)=>{xe.total_bytes=Me}},metadata:J},X,ae),Ir(null,null,G,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Me)=>{xe.uuid=Me}},metadata:J},Q,ne),Ir(null,null,de,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Me)=>{xe.metadata_block_size=Me}},metadata:J},_e,ve),Ir(null,null,Pe,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Me)=>{xe.metadata_offset_=Me}},metadata:J},Fe,Ie),Ir(null,null,Te,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Me)=>{xe.metadata_offset=Me}},metadata:J},Ue,Ve),Ir(null,null,Ee,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Me)=>{xe.label=Me}},metadata:J},Ae,B),Ir(null,null,Ce,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Me)=>{xe._padding=Me}},metadata:J},Re,se),Ir(null,m={value:v},h,{kind:"class",name:v.name,metadata:J},null,g),ie=v=m.value,J&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:J}),_n(v,g)})(),ie=v})();function R8(e){const t=Ma(e),n=jJ(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=jr;function DJ(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function I2(e,t,n){if(e instanceof ze)return e;const r=e instanceof DOMException?ot[DJ(e)]:ot.EIO,a=new ze(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Tf(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(I2(e.error))}})}class MJ extends T2{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Tf(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Tf(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Tf(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Tf(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(I2(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(I2(this.tx.error)),this.tx.abort(),t}}async function PJ(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Wa("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Tf(n)}class FJ{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new MJ(t,this)}}const LJ={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Tf(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await PJ(e.storeName||"zenfs",e.idbFactory),n=new FJ(t),r=new VD(n);if(e!=null&&e.disableAsyncCache)return VE("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},$J=LJ,Ub={APP_LOADED:"app:loaded",APP_ERROR:"app:error",CONVERSATION_SELECTED:"conversation:selected",CONVERSATION_CREATED:"conversation:created",CONVERSATION_DELETED:"conversation:deleted",CONVERSATION_RENAMED:"conversation:renamed",INTERACTION_STARTED:"interaction:started",INTERACTION_STREAM_CHUNK:"interaction:stream_chunk",INTERACTION_COMPLETED:"interaction:completed",PROMPT_SUBMITTED:"prompt:submitted",PROMPT_FINALISED:"prompt:finalised",SETTINGS_OPENED:"settings:opened",SETTINGS_CLOSED:"settings:closed",MOD_LOADED:"mod:loaded",MOD_ERROR:"mod:error",VFS_FILE_READ:"vfs:file:read",VFS_FILE_WRITTEN:"vfs:file:written",VFS_FILE_DELETED:"vfs:file:deleted"};function Oy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Dx={exports:{}},BN;function BJ(){return BN||(BN=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(c,f){if(!a[c]){if(!r[c]){var h=typeof Oy=="function"&&Oy;if(!f&&h)return h(c,!0);if(s)return s(c,!0);var m=new Error("Cannot find module '"+c+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[c]={exports:{}};r[c][0].call(g.exports,function(v){var w=r[c][1][v];return o(w||v)},g,g.exports,n,r,a,i)}return a[c].exports}for(var s=typeof Oy=="function"&&Oy,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,f,h,m,g,v,w,_=[],x=0,S=u.length,E=S,A=i.getTypeOf(u)!=="string";x<u.length;)E=S-x,h=A?(c=u[x++],f=x<S?u[x++]:0,x<S?u[x++]:0):(c=u.charCodeAt(x++),f=x<S?u.charCodeAt(x++):0,x<S?u.charCodeAt(x++):0),m=c>>2,g=(3&c)<<4|f>>4,v=1<E?(15&f)<<2|h>>6:64,w=2<E?63&h:64,_.push(s.charAt(m)+s.charAt(g)+s.charAt(v)+s.charAt(w));return _.join("")},a.decode=function(u){var c,f,h,m,g,v,w=0,_=0,x="data:";if(u.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&E--,u.charAt(u.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|E):new Array(0|E);w<u.length;)c=s.indexOf(u.charAt(w++))<<2|(m=s.indexOf(u.charAt(w++)))>>4,f=(15&m)<<4|(g=s.indexOf(u.charAt(w++)))>>2,h=(3&g)<<6|(v=s.indexOf(u.charAt(w++))),S[_++]=c,g!==64&&(S[_++]=f),v!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(f,h,m,g,v){this.compressedSize=f,this.uncompressedSize=h,this.crc32=m,this.compression=g,this.compressedContent=v}c.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,h,m){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,u=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[c]=s}return u}();r.exports=function(s,u){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(c,f,h,m){var g=o,v=m+h;c^=-1;for(var w=m;w<v;w++)c=c>>>8^g[255&(c^f[w])];return-1^c}(0|u,s,s.length,0):function(c,f,h,m){var g=o,v=m+h;c^=-1;for(var w=m;w<v;w++)c=c>>>8^g[255&(c^f.charCodeAt(w))];return-1^c}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),u=n("./stream/GenericWorker"),c=i?"uint8array":"array";function f(h,m){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,h.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new f("Deflate",h)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var w,_="";for(w=0;w<v;w++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,v,w,_,x,S){var E,A,k=g.file,D=g.compression,O=S!==c.utf8encode,N=s.transformTo("string",S(k.name)),z=s.transformTo("string",c.utf8encode(k.name)),H=k.comment,ee=s.transformTo("string",S(H)),P=s.transformTo("string",c.utf8encode(H)),Z=z.length!==k.name.length,V=P.length!==H.length,fe="",ue="",Y="",X=k.dir,ae=k.date,G={crc32:0,compressedSize:0,uncompressedSize:0};v&&!w||(G.crc32=g.crc32,G.compressedSize=g.compressedSize,G.uncompressedSize=g.uncompressedSize);var Q=0;v&&(Q|=8),O||!Z&&!V||(Q|=2048);var ne=0,de=0;X&&(ne|=16),x==="UNIX"?(de=798,ne|=function(ve,Pe){var Fe=ve;return ve||(Fe=Pe?16893:33204),(65535&Fe)<<16}(k.unixPermissions,X)):(de=20,ne|=function(ve){return 63&(ve||0)}(k.dosPermissions)),E=ae.getUTCHours(),E<<=6,E|=ae.getUTCMinutes(),E<<=5,E|=ae.getUTCSeconds()/2,A=ae.getUTCFullYear()-1980,A<<=4,A|=ae.getUTCMonth()+1,A<<=5,A|=ae.getUTCDate(),Z&&(ue=i(1,1)+i(f(N),4)+z,fe+="up"+i(ue.length,2)+ue),V&&(Y=i(1,1)+i(f(ee),4)+P,fe+="uc"+i(Y.length,2)+Y);var _e="";return _e+=`
\0`,_e+=i(Q,2),_e+=D.magic,_e+=i(E,2),_e+=i(A,2),_e+=i(G.crc32,4),_e+=i(G.compressedSize,4),_e+=i(G.uncompressedSize,4),_e+=i(N.length,2),_e+=i(fe.length,2),{fileRecord:h.LOCAL_FILE_HEADER+_e+N+fe,dirRecord:h.CENTRAL_FILE_HEADER+i(de,2)+_e+i(ee.length,2)+"\0\0\0\0"+i(ne,4)+i(_,4)+N+fe+ee}}var s=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),f=n("../crc32"),h=n("../signature");function m(g,v,w,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=w,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(m,u),m.prototype.push=function(g){var v=g.meta.percent||0,w=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(v+100*(w-_-1))/w:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var w=o(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,w=o(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),v)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var w=this.bytesWritten-g,_=function(x,S,E,A,k){var D=s.transformTo("string",k(A));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(D.length,2)+D}(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(w){v.processChunk(w)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(w){v.error(w)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var w=0;w<v.length;w++)try{v[w].error(g)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,u,c){var f=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{s.forEach(function(m,g){h++;var v=function(S,E){var A=S||E,k=i[A];if(!k)throw new Error(A+" is not a valid compression method !");return k}(g.options.compression,u.compression),w=g.options.compressionOptions||u.compressionOptions||{},_=g.dir,x=g.date;g._compressWorker(v,w).withStreamInfo("file",{name:m,dir:_,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(m){f.error(m)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(m){return new o.Promise(function(g,v){var w=m.decompressed.getContentWorker().pipe(new c);w.on("error",function(_){v(_)}).on("end",function(){w.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(w){var _=new u(g);return _.load(w),_}).then(function(w){var _=[o.Promise.resolve(w)],x=w.files;if(g.checkCRC32)for(var S=0;S<x.length;S++)_.push(h(x[S]));return o.Promise.all(_)}).then(function(w){for(var _=w.shift(),x=_.files,S=0;S<x.length;S++){var E=x[S],A=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(k).unsafeOriginalName=A)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(s,o),s.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,u,c){i.call(this,u),this._helper=s;var f=this;s.on("data",function(h,m){f.push(h)||f._helper.pause(),c&&c(m)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Wt<"u",newBufferFrom:function(i,o){if(Wt.from&&Wt.from!==Uint8Array.from)return Wt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Wt(i,o)},allocBuffer:function(i){if(Wt.alloc)return Wt.alloc(i);var o=new Wt(i);return o.fill(0),o},isBuffer:function(i){return Wt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,D,O){var N,z=s.getTypeOf(D),H=s.extend(O||{},f);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(k=x(k)),H.createFolders&&(N=_(k))&&S.call(this,N,!0);var ee=z==="string"&&H.binary===!1&&H.base64===!1;O&&O.binary!==void 0||(H.binary=!ee),(D instanceof h&&D.uncompressedSize===0||H.dir||!D||D.length===0)&&(H.base64=!1,H.binary=!0,D="",H.compression="STORE",z="string");var P=null;P=D instanceof h||D instanceof u?D:v.isNode&&v.isStream(D)?new w(k,D):s.prepareContent(k,D,H.binary,H.optimizedBinaryString,H.base64);var Z=new m(k,P,H);this.files[k]=Z}var o=n("./utf8"),s=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),w=n("./nodejs/NodejsStreamInputAdapter"),_=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var D=k.lastIndexOf("/");return 0<D?k.substring(0,D):""},x=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},S=function(k,D){return D=D!==void 0?D:f.createFolders,k=x(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:D}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var D,O,N;for(D in this.files)N=this.files[D],(O=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&k(O,N)},filter:function(k){var D=[];return this.forEach(function(O,N){k(O,N)&&D.push(N)}),D},file:function(k,D,O){if(arguments.length!==1)return k=this.root+k,i.call(this,k,D,O),this;if(E(k)){var N=k;return this.filter(function(H,ee){return!ee.dir&&N.test(H)})}var z=this.files[this.root+k];return z&&!z.dir?z:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(z,H){return H.dir&&k.test(z)});var D=this.root+k,O=S.call(this,D),N=this.clone();return N.root=O.name,N},remove:function(k){k=this.root+k;var D=this.files[k];if(D||(k.slice(-1)!=="/"&&(k+="/"),D=this.files[k]),D&&!D.dir)delete this.files[k];else for(var O=this.filter(function(z,H){return H.name.slice(0,k.length)===k}),N=0;N<O.length;N++)delete this.files[O[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var D,O={};try{if((O=s.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");s.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var N=O.comment||this.comment||"";D=g.generateWorker(this,O,N)}catch(z){(D=new u("error")).error(z)}return new c(D,O.type||"string",O.mimeType)},generateAsync:function(k,D){return this.generateInternalStream(k).accumulate(D)},generateNodeStream:function(k,D){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(D)}};r.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===c&&this.data[m+2]===f&&this.data[m+3]===h)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.readData(4);return u===m[0]&&c===m[1]&&f===m[2]&&h===m[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,c=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=s,c},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new c(h):o.uint8array?new f(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,i),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(s,o),s.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=i.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),u=n("../base64"),c=n("../support"),f=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,w){return new f.Promise(function(_,x){var S=[],E=v._internalType,A=v._outputType,k=v._mimeType;v.on("data",function(D,O){S.push(D),w&&w(O)}).on("error",function(D){S=[],x(D)}).on("end",function(){try{var D=function(O,N,z){switch(O){case"blob":return i.newBlob(i.transformTo("arraybuffer",N),z);case"base64":return u.encode(N);default:return i.transformTo(O,N)}}(A,function(O,N){var z,H=0,ee=null,P=0;for(z=0;z<N.length;z++)P+=N[z].length;switch(O){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(ee=new Uint8Array(P),z=0;z<N.length;z++)ee.set(N[z],H),H+=N[z].length;return ee;case"nodebuffer":return Wt.concat(N);default:throw new Error("concat : unsupported type '"+O+"'")}}(E,S),k);_(D)}catch(O){x(O)}S=[]}).resume()})}function g(v,w,_){var x=w;switch(w){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=w,this._mimeType=_,i.checkSupport(x),this._worker=v.pipe(new o(x)),v.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,w){var _=this;return v==="data"?this._worker.on(v,function(x){w.call(_,x.data,x.meta)}):this._worker.on(v,function(){i.delay(w,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Wt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(v){var w,_,x,S,E,A=v.length,k=0;for(S=0;S<A;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<A&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),k+=_<128?1:_<2048?2:_<65536?3:4;for(w=o.uint8array?new Uint8Array(k):new Array(k),S=E=0;E<k;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<A&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),_<128?w[E++]=_:(_<2048?w[E++]=192|_>>>6:(_<65536?w[E++]=224|_>>>12:(w[E++]=240|_>>>18,w[E++]=128|_>>>12&63),w[E++]=128|_>>>6&63),w[E++]=128|63&_);return w}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var w,_,x,S,E=v.length,A=new Array(2*E);for(w=_=0;w<E;)if((x=v[w++])<128)A[_++]=x;else if(4<(S=c[x]))A[_++]=65533,w+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&w<E;)x=x<<6|63&v[w++],S--;1<S?A[_++]=65533:x<65536?A[_++]=x:(x-=65536,A[_++]=55296|x>>10&1023,A[_++]=56320|1023&x)}return A.length!==_&&(A.subarray?A=A.subarray(0,_):A.length=_),i.applyFromCharCode(A)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,u),h.prototype.processChunk=function(g){var v=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=v;(v=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),v.set(w,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(S,E){var A;for((E=E||S.length)>S.length&&(E=S.length),A=E-1;0<=A&&(192&S[A])==128;)A--;return A<0||A===0?E:A+c[S[A]]>E?A:E}(v),x=v;_!==v.length&&(o.uint8array?(x=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(x=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,u),m.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),u=n("./external");function c(w){return w}function f(w,_){for(var x=0;x<w.length;++x)_[x]=255&w.charCodeAt(x);return _}n("setimmediate"),a.newBlob=function(w,_){a.checkSupport("blob");try{return new Blob([w],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(w),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(w,_,x){var S=[],E=0,A=w.length;if(A<=x)return String.fromCharCode.apply(null,w);for(;E<A;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,w.slice(E,Math.min(E+x,A)))):S.push(String.fromCharCode.apply(null,w.subarray(E,Math.min(E+x,A)))),E+=x;return S.join("")},stringifyByChar:function(w){for(var _="",x=0;x<w.length;x++)_+=String.fromCharCode(w[x]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function m(w){var _=65536,x=a.getTypeOf(w),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(w,x,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(w)}function g(w,_){for(var x=0;x<w.length;x++)_[x]=w[x];return _}a.applyFromCharCode=m;var v={};v.string={string:c,array:function(w){return f(w,new Array(w.length))},arraybuffer:function(w){return v.string.uint8array(w).buffer},uint8array:function(w){return f(w,new Uint8Array(w.length))},nodebuffer:function(w){return f(w,s.allocBuffer(w.length))}},v.array={string:m,array:c,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(w)}},v.arraybuffer={string:function(w){return m(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:c,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(new Uint8Array(w))}},v.uint8array={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:c,nodebuffer:function(w){return s.newBufferFrom(w)}},v.nodebuffer={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return v.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:c},a.transformTo=function(w,_){if(_=_||"",!w)return _;a.checkSupport(w);var x=a.getTypeOf(_);return v[x][w](_)},a.resolve=function(w){for(var _=w.split("/"),x=[],S=0;S<_.length;S++){var E=_[S];E==="."||E===""&&S!==0&&S!==_.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(w)?"nodebuffer":i.uint8array&&w instanceof Uint8Array?"uint8array":i.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(w){if(!i[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(w){var _,x,S="";for(x=0;x<(w||"").length;x++)S+="\\x"+((_=w.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return S},a.delay=function(w,_,x){setImmediate(function(){w.apply(x||null,_||[])})},a.inherits=function(w,_){function x(){}x.prototype=_.prototype,w.prototype=new x},a.extend=function(){var w,_,x={};for(w=0;w<arguments.length;w++)for(_ in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],_)&&x[_]===void 0&&(x[_]=arguments[w][_]);return x},a.prepareContent=function(w,_,x,S,E){return u.Promise.resolve(_).then(function(A){return i.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(k,D){var O=new FileReader;O.onload=function(N){k(N.target.result)},O.onerror=function(N){D(N.target.error)},O.readAsArrayBuffer(A)}):A}).then(function(A){var k=a.getTypeOf(A);return k?(k==="arraybuffer"?A=a.transformTo("uint8array",A):k==="string"&&(E?A=o.decode(A):x&&S!==!0&&(A=function(D){return f(D,i.uint8array?new Uint8Array(D.length):new Array(D.length))}(A))),A):u.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),u=n("./zipEntry"),c=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(h)+")")}},isSignature:function(h,m){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=c.uint8array?"uint8array":"array",g=o.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),f=n("./compressions"),h=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)&&f[x].magic===_)return f[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,w,_,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),w=g.readInt(2),_=g.readData(w),this.extraFields[v]={id:v,length:w,value:_};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var w=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,w,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=w,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var w=null,_="string";try{if(!v)throw new Error("No output type specified.");var x=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),w=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(w=w.pipe(new u.Utf8EncodeWorker)),!S&&x&&(w=w.pipe(new u.Utf8DecodeWorker))}catch(E){(w=new f("error")).error(E)}return new o(w,_,"")},async:function(v,w){return this.internalStream(v).accumulate(w)},nodeStream:function(v,w){return this.internalStream(v||"nodebuffer").toNodejsStream(w)},_compressWorker:function(v,w){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,v,w)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,f=new u(v),h=i.document.createTextNode("");f.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var w=i.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},i.document.documentElement.appendChild(w)}:function(){setTimeout(v,0)};else{var m=new i.MessageChannel;m.port1.onmessage=v,o=function(){m.port2.postMessage(0)}}var g=[];function v(){var w,_;s=!0;for(var x=g.length;x;){for(_=g,g=[],w=-1;++w<x;)_[w]();x=g.length}s=!1}r.exports=function(w){g.push(w)!==1||s||o()}}).call(this,typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},u=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,x!==o&&w(this,x)}function m(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,S,E){i(function(){var A;try{A=S(E)}catch(k){return s.reject(x,k)}A===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,A)})}function v(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function w(x,S){var E=!1;function A(O){E||(E=!0,s.reject(x,O))}function k(O){E||(E=!0,s.resolve(x,O))}var D=_(function(){S(k,A)});D.status==="error"&&A(D.value)}function _(x,S){var E={};try{E.value=x(S),E.status="success"}catch(A){E.status="error",E.value=A}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===c||typeof S!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==f?g(E,this.state===c?x:S,this.outcome):this.queue.push(new m(E,x,S)),E},m.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){s.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},s.resolve=function(x,S){var E=_(v,S);if(E.status==="error")return s.reject(x,E.value);var A=E.value;if(A)w(x,A);else{x.state=c,x.outcome=S;for(var k=-1,D=x.queue.length;++k<D;)x.queue[k].callFulfilled(S)}return x},s.reject=function(x,S){x.state=u,x.outcome=S;for(var E=-1,A=x.queue.length;++E<A;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var S=new this(o);return s.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,A=!1;if(!E)return this.resolve([]);for(var k=new Array(E),D=0,O=-1,N=new this(o);++O<E;)z(x[O],O);return N;function z(H,ee){S.resolve(H).then(function(P){k[ee]=P,++D!==E||A||(A=!0,s.resolve(N,k))},function(P){A||(A=!0,s.reject(N,P))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,A=!1;if(!E)return this.resolve([]);for(var k=-1,D=new this(o);++k<E;)O=x[k],S.resolve(O).then(function(N){A||(A=!0,s.resolve(D,N))},function(N){A||(A=!0,s.reject(D,N))});var O;return D}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=Object.prototype.toString,h=0,m=-1,g=0,v=8;function w(x){if(!(this instanceof w))return new w(x);this.options=o.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(u[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var A;if(A=typeof S.dictionary=="string"?s.string2buf(S.dictionary):f.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,A))!==h)throw new Error(u[E]);this._dict_set=!0}}function _(x,S){var E=new w(S);if(E.push(x,!0),E.err)throw E.msg||u[E.err];return E.result}w.prototype.push=function(x,S){var E,A,k=this.strm,D=this.options.chunkSize;if(this.ended)return!1;A=S===~~S?S:S===!0?4:0,typeof x=="string"?k.input=s.string2buf(x):f.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(D),k.next_out=0,k.avail_out=D),(E=i.deflate(k,A))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(k.output,k.next_out))):this.onData(o.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return A===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):A!==2||(this.onEnd(h),!(k.avail_out=0))},w.prototype.onData=function(x){this.chunks.push(x)},w.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=w,a.deflate=_,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,_(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,_(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||w&&w.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,_.windowBits);if(x!==u.Z_OK)throw new Error(c[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(w,_){var x=new g(_);if(x.push(w,!0),x.err)throw x.msg||c[x.err];return x.result}g.prototype.push=function(w,_){var x,S,E,A,k,D,O=this.strm,N=this.options.chunkSize,z=this.options.dictionary,H=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof w=="string"?O.input=s.binstring2buf(w):m.call(w)==="[object ArrayBuffer]"?O.input=new Uint8Array(w):O.input=w,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(N),O.next_out=0,O.avail_out=N),(x=i.inflate(O,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&z&&(D=typeof z=="string"?s.string2buf(z):m.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,x=i.inflateSetDictionary(this.strm,D)),x===u.Z_BUF_ERROR&&H===!0&&(x=u.Z_OK,H=!1),x!==u.Z_STREAM_END&&x!==u.Z_OK)return this.onEnd(x),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&x!==u.Z_STREAM_END&&(O.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(O.output,O.next_out),A=O.next_out-E,k=s.buf2string(O.output,E),O.next_out=A,O.avail_out=N-A,A&&o.arraySet(O.output,O.output,E,A,0),this.onData(k)):this.onData(o.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(H=!0)}while((0<O.avail_in||O.avail_out===0)&&x!==u.Z_STREAM_END);return x===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(O.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(w,_){return(_=_||{}).raw=!0,v(w,_)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,f,h,m){if(c.subarray&&u.subarray)u.set(c.subarray(f,f+h),m);else for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){var c,f,h,m,g,v;for(c=h=0,f=u.length;c<f;c++)h+=u[c].length;for(v=new Uint8Array(h),c=m=0,f=u.length;c<f;c++)g=u[c],v.set(g,m),m+=g.length;return v}},s={arraySet:function(u,c,f,h,m){for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(h,m){if(m<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(h[v]);return g}u[254]=u[254]=1,a.string2buf=function(h){var m,g,v,w,_,x=h.length,S=0;for(w=0;w<x;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),S+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(S),w=_=0;_<S;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),g<128?m[_++]=g:(g<2048?m[_++]=192|g>>>6:(g<65536?m[_++]=224|g>>>12:(m[_++]=240|g>>>18,m[_++]=128|g>>>12&63),m[_++]=128|g>>>6&63),m[_++]=128|63&g);return m},a.buf2binstring=function(h){return f(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),g=0,v=m.length;g<v;g++)m[g]=h.charCodeAt(g);return m},a.buf2string=function(h,m){var g,v,w,_,x=m||h.length,S=new Array(2*x);for(g=v=0;g<x;)if((w=h[g++])<128)S[v++]=w;else if(4<(_=u[w]))S[v++]=65533,g+=_-1;else{for(w&=_===2?31:_===3?15:7;1<_&&g<x;)w=w<<6|63&h[g++],_--;1<_?S[v++]=65533:w<65536?S[v++]=w:(w-=65536,S[v++]=55296|w>>10&1023,S[v++]=56320|1023&w)}return f(S,v)},a.utf8border=function(h,m){var g;for((m=m||h.length)>h.length&&(m=h.length),g=m-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?m:g+u[h[g]]>m?g:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,u){for(var c=65535&i|0,f=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;f=f+(c=c+o[u++]|0)|0,--h;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();r.exports=function(o,s,u,c){var f=i,h=c+u;o^=-1;for(var m=c;m<h;m++)o=o>>>8^f[255&(o^s[m])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),u=n("./adler32"),c=n("./crc32"),f=n("./messages"),h=0,m=4,g=0,v=-2,w=-1,_=4,x=2,S=8,E=9,A=286,k=30,D=19,O=2*A+1,N=15,z=3,H=258,ee=H+z+1,P=42,Z=113,V=1,fe=2,ue=3,Y=4;function X(B,Ce){return B.msg=f[Ce],Ce}function ae(B){return(B<<1)-(4<B?9:0)}function G(B){for(var Ce=B.length;0<=--Ce;)B[Ce]=0}function Q(B){var Ce=B.state,Re=Ce.pending;Re>B.avail_out&&(Re=B.avail_out),Re!==0&&(o.arraySet(B.output,Ce.pending_buf,Ce.pending_out,Re,B.next_out),B.next_out+=Re,Ce.pending_out+=Re,B.total_out+=Re,B.avail_out-=Re,Ce.pending-=Re,Ce.pending===0&&(Ce.pending_out=0))}function ne(B,Ce){s._tr_flush_block(B,0<=B.block_start?B.block_start:-1,B.strstart-B.block_start,Ce),B.block_start=B.strstart,Q(B.strm)}function de(B,Ce){B.pending_buf[B.pending++]=Ce}function _e(B,Ce){B.pending_buf[B.pending++]=Ce>>>8&255,B.pending_buf[B.pending++]=255&Ce}function ve(B,Ce){var Re,se,ie=B.max_chain_length,J=B.strstart,xe=B.prev_length,Me=B.nice_match,Se=B.strstart>B.w_size-ee?B.strstart-(B.w_size-ee):0,Ze=B.window,Et=B.w_mask,at=B.prev,_t=B.strstart+H,Nt=Ze[J+xe-1],Rt=Ze[J+xe];B.prev_length>=B.good_match&&(ie>>=2),Me>B.lookahead&&(Me=B.lookahead);do if(Ze[(Re=Ce)+xe]===Rt&&Ze[Re+xe-1]===Nt&&Ze[Re]===Ze[J]&&Ze[++Re]===Ze[J+1]){J+=2,Re++;do;while(Ze[++J]===Ze[++Re]&&Ze[++J]===Ze[++Re]&&Ze[++J]===Ze[++Re]&&Ze[++J]===Ze[++Re]&&Ze[++J]===Ze[++Re]&&Ze[++J]===Ze[++Re]&&Ze[++J]===Ze[++Re]&&Ze[++J]===Ze[++Re]&&J<_t);if(se=H-(_t-J),J=_t-H,xe<se){if(B.match_start=Ce,Me<=(xe=se))break;Nt=Ze[J+xe-1],Rt=Ze[J+xe]}}while((Ce=at[Ce&Et])>Se&&--ie!=0);return xe<=B.lookahead?xe:B.lookahead}function Pe(B){var Ce,Re,se,ie,J,xe,Me,Se,Ze,Et,at=B.w_size;do{if(ie=B.window_size-B.lookahead-B.strstart,B.strstart>=at+(at-ee)){for(o.arraySet(B.window,B.window,at,at,0),B.match_start-=at,B.strstart-=at,B.block_start-=at,Ce=Re=B.hash_size;se=B.head[--Ce],B.head[Ce]=at<=se?se-at:0,--Re;);for(Ce=Re=at;se=B.prev[--Ce],B.prev[Ce]=at<=se?se-at:0,--Re;);ie+=at}if(B.strm.avail_in===0)break;if(xe=B.strm,Me=B.window,Se=B.strstart+B.lookahead,Ze=ie,Et=void 0,Et=xe.avail_in,Ze<Et&&(Et=Ze),Re=Et===0?0:(xe.avail_in-=Et,o.arraySet(Me,xe.input,xe.next_in,Et,Se),xe.state.wrap===1?xe.adler=u(xe.adler,Me,Et,Se):xe.state.wrap===2&&(xe.adler=c(xe.adler,Me,Et,Se)),xe.next_in+=Et,xe.total_in+=Et,Et),B.lookahead+=Re,B.lookahead+B.insert>=z)for(J=B.strstart-B.insert,B.ins_h=B.window[J],B.ins_h=(B.ins_h<<B.hash_shift^B.window[J+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[J+z-1])&B.hash_mask,B.prev[J&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=J,J++,B.insert--,!(B.lookahead+B.insert<z)););}while(B.lookahead<ee&&B.strm.avail_in!==0)}function Fe(B,Ce){for(var Re,se;;){if(B.lookahead<ee){if(Pe(B),B.lookahead<ee&&Ce===h)return V;if(B.lookahead===0)break}if(Re=0,B.lookahead>=z&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Re=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),Re!==0&&B.strstart-Re<=B.w_size-ee&&(B.match_length=ve(B,Re)),B.match_length>=z)if(se=s._tr_tally(B,B.strstart-B.match_start,B.match_length-z),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=z){for(B.match_length--;B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Re=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart,--B.match_length!=0;);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else se=s._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(se&&(ne(B,!1),B.strm.avail_out===0))return V}return B.insert=B.strstart<z-1?B.strstart:z-1,Ce===m?(ne(B,!0),B.strm.avail_out===0?ue:Y):B.last_lit&&(ne(B,!1),B.strm.avail_out===0)?V:fe}function Ie(B,Ce){for(var Re,se,ie;;){if(B.lookahead<ee){if(Pe(B),B.lookahead<ee&&Ce===h)return V;if(B.lookahead===0)break}if(Re=0,B.lookahead>=z&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Re=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=z-1,Re!==0&&B.prev_length<B.max_lazy_match&&B.strstart-Re<=B.w_size-ee&&(B.match_length=ve(B,Re),B.match_length<=5&&(B.strategy===1||B.match_length===z&&4096<B.strstart-B.match_start)&&(B.match_length=z-1)),B.prev_length>=z&&B.match_length<=B.prev_length){for(ie=B.strstart+B.lookahead-z,se=s._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-z),B.lookahead-=B.prev_length-1,B.prev_length-=2;++B.strstart<=ie&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Re=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),--B.prev_length!=0;);if(B.match_available=0,B.match_length=z-1,B.strstart++,se&&(ne(B,!1),B.strm.avail_out===0))return V}else if(B.match_available){if((se=s._tr_tally(B,0,B.window[B.strstart-1]))&&ne(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return V}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(se=s._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<z-1?B.strstart:z-1,Ce===m?(ne(B,!0),B.strm.avail_out===0?ue:Y):B.last_lit&&(ne(B,!1),B.strm.avail_out===0)?V:fe}function Te(B,Ce,Re,se,ie){this.good_length=B,this.max_lazy=Ce,this.nice_length=Re,this.max_chain=se,this.func=ie}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*O),this.dyn_dtree=new o.Buf16(2*(2*k+1)),this.bl_tree=new o.Buf16(2*(2*D+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*A+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*A+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ve(B){var Ce;return B&&B.state?(B.total_in=B.total_out=0,B.data_type=x,(Ce=B.state).pending=0,Ce.pending_out=0,Ce.wrap<0&&(Ce.wrap=-Ce.wrap),Ce.status=Ce.wrap?P:Z,B.adler=Ce.wrap===2?0:1,Ce.last_flush=h,s._tr_init(Ce),g):X(B,v)}function Ee(B){var Ce=Ve(B);return Ce===g&&function(Re){Re.window_size=2*Re.w_size,G(Re.head),Re.max_lazy_match=i[Re.level].max_lazy,Re.good_match=i[Re.level].good_length,Re.nice_match=i[Re.level].nice_length,Re.max_chain_length=i[Re.level].max_chain,Re.strstart=0,Re.block_start=0,Re.lookahead=0,Re.insert=0,Re.match_length=Re.prev_length=z-1,Re.match_available=0,Re.ins_h=0}(B.state),Ce}function Ae(B,Ce,Re,se,ie,J){if(!B)return v;var xe=1;if(Ce===w&&(Ce=6),se<0?(xe=0,se=-se):15<se&&(xe=2,se-=16),ie<1||E<ie||Re!==S||se<8||15<se||Ce<0||9<Ce||J<0||_<J)return X(B,v);se===8&&(se=9);var Me=new Ue;return(B.state=Me).strm=B,Me.wrap=xe,Me.gzhead=null,Me.w_bits=se,Me.w_size=1<<Me.w_bits,Me.w_mask=Me.w_size-1,Me.hash_bits=ie+7,Me.hash_size=1<<Me.hash_bits,Me.hash_mask=Me.hash_size-1,Me.hash_shift=~~((Me.hash_bits+z-1)/z),Me.window=new o.Buf8(2*Me.w_size),Me.head=new o.Buf16(Me.hash_size),Me.prev=new o.Buf16(Me.w_size),Me.lit_bufsize=1<<ie+6,Me.pending_buf_size=4*Me.lit_bufsize,Me.pending_buf=new o.Buf8(Me.pending_buf_size),Me.d_buf=1*Me.lit_bufsize,Me.l_buf=3*Me.lit_bufsize,Me.level=Ce,Me.strategy=J,Me.method=Re,Ee(B)}i=[new Te(0,0,0,0,function(B,Ce){var Re=65535;for(Re>B.pending_buf_size-5&&(Re=B.pending_buf_size-5);;){if(B.lookahead<=1){if(Pe(B),B.lookahead===0&&Ce===h)return V;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var se=B.block_start+Re;if((B.strstart===0||B.strstart>=se)&&(B.lookahead=B.strstart-se,B.strstart=se,ne(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-ee&&(ne(B,!1),B.strm.avail_out===0))return V}return B.insert=0,Ce===m?(ne(B,!0),B.strm.avail_out===0?ue:Y):(B.strstart>B.block_start&&(ne(B,!1),B.strm.avail_out),V)}),new Te(4,4,8,4,Fe),new Te(4,5,16,8,Fe),new Te(4,6,32,32,Fe),new Te(4,4,16,16,Ie),new Te(8,16,32,32,Ie),new Te(8,16,128,128,Ie),new Te(8,32,128,256,Ie),new Te(32,128,258,1024,Ie),new Te(32,258,258,4096,Ie)],a.deflateInit=function(B,Ce){return Ae(B,Ce,S,15,8,0)},a.deflateInit2=Ae,a.deflateReset=Ee,a.deflateResetKeep=Ve,a.deflateSetHeader=function(B,Ce){return B&&B.state?B.state.wrap!==2?v:(B.state.gzhead=Ce,g):v},a.deflate=function(B,Ce){var Re,se,ie,J;if(!B||!B.state||5<Ce||Ce<0)return B?X(B,v):v;if(se=B.state,!B.output||!B.input&&B.avail_in!==0||se.status===666&&Ce!==m)return X(B,B.avail_out===0?-5:v);if(se.strm=B,Re=se.last_flush,se.last_flush=Ce,se.status===P)if(se.wrap===2)B.adler=0,de(se,31),de(se,139),de(se,8),se.gzhead?(de(se,(se.gzhead.text?1:0)+(se.gzhead.hcrc?2:0)+(se.gzhead.extra?4:0)+(se.gzhead.name?8:0)+(se.gzhead.comment?16:0)),de(se,255&se.gzhead.time),de(se,se.gzhead.time>>8&255),de(se,se.gzhead.time>>16&255),de(se,se.gzhead.time>>24&255),de(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),de(se,255&se.gzhead.os),se.gzhead.extra&&se.gzhead.extra.length&&(de(se,255&se.gzhead.extra.length),de(se,se.gzhead.extra.length>>8&255)),se.gzhead.hcrc&&(B.adler=c(B.adler,se.pending_buf,se.pending,0)),se.gzindex=0,se.status=69):(de(se,0),de(se,0),de(se,0),de(se,0),de(se,0),de(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),de(se,3),se.status=Z);else{var xe=S+(se.w_bits-8<<4)<<8;xe|=(2<=se.strategy||se.level<2?0:se.level<6?1:se.level===6?2:3)<<6,se.strstart!==0&&(xe|=32),xe+=31-xe%31,se.status=Z,_e(se,xe),se.strstart!==0&&(_e(se,B.adler>>>16),_e(se,65535&B.adler)),B.adler=1}if(se.status===69)if(se.gzhead.extra){for(ie=se.pending;se.gzindex<(65535&se.gzhead.extra.length)&&(se.pending!==se.pending_buf_size||(se.gzhead.hcrc&&se.pending>ie&&(B.adler=c(B.adler,se.pending_buf,se.pending-ie,ie)),Q(B),ie=se.pending,se.pending!==se.pending_buf_size));)de(se,255&se.gzhead.extra[se.gzindex]),se.gzindex++;se.gzhead.hcrc&&se.pending>ie&&(B.adler=c(B.adler,se.pending_buf,se.pending-ie,ie)),se.gzindex===se.gzhead.extra.length&&(se.gzindex=0,se.status=73)}else se.status=73;if(se.status===73)if(se.gzhead.name){ie=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ie&&(B.adler=c(B.adler,se.pending_buf,se.pending-ie,ie)),Q(B),ie=se.pending,se.pending===se.pending_buf_size)){J=1;break}J=se.gzindex<se.gzhead.name.length?255&se.gzhead.name.charCodeAt(se.gzindex++):0,de(se,J)}while(J!==0);se.gzhead.hcrc&&se.pending>ie&&(B.adler=c(B.adler,se.pending_buf,se.pending-ie,ie)),J===0&&(se.gzindex=0,se.status=91)}else se.status=91;if(se.status===91)if(se.gzhead.comment){ie=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ie&&(B.adler=c(B.adler,se.pending_buf,se.pending-ie,ie)),Q(B),ie=se.pending,se.pending===se.pending_buf_size)){J=1;break}J=se.gzindex<se.gzhead.comment.length?255&se.gzhead.comment.charCodeAt(se.gzindex++):0,de(se,J)}while(J!==0);se.gzhead.hcrc&&se.pending>ie&&(B.adler=c(B.adler,se.pending_buf,se.pending-ie,ie)),J===0&&(se.status=103)}else se.status=103;if(se.status===103&&(se.gzhead.hcrc?(se.pending+2>se.pending_buf_size&&Q(B),se.pending+2<=se.pending_buf_size&&(de(se,255&B.adler),de(se,B.adler>>8&255),B.adler=0,se.status=Z)):se.status=Z),se.pending!==0){if(Q(B),B.avail_out===0)return se.last_flush=-1,g}else if(B.avail_in===0&&ae(Ce)<=ae(Re)&&Ce!==m)return X(B,-5);if(se.status===666&&B.avail_in!==0)return X(B,-5);if(B.avail_in!==0||se.lookahead!==0||Ce!==h&&se.status!==666){var Me=se.strategy===2?function(Se,Ze){for(var Et;;){if(Se.lookahead===0&&(Pe(Se),Se.lookahead===0)){if(Ze===h)return V;break}if(Se.match_length=0,Et=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++,Et&&(ne(Se,!1),Se.strm.avail_out===0))return V}return Se.insert=0,Ze===m?(ne(Se,!0),Se.strm.avail_out===0?ue:Y):Se.last_lit&&(ne(Se,!1),Se.strm.avail_out===0)?V:fe}(se,Ce):se.strategy===3?function(Se,Ze){for(var Et,at,_t,Nt,Rt=Se.window;;){if(Se.lookahead<=H){if(Pe(Se),Se.lookahead<=H&&Ze===h)return V;if(Se.lookahead===0)break}if(Se.match_length=0,Se.lookahead>=z&&0<Se.strstart&&(at=Rt[_t=Se.strstart-1])===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]){Nt=Se.strstart+H;do;while(at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&_t<Nt);Se.match_length=H-(Nt-_t),Se.match_length>Se.lookahead&&(Se.match_length=Se.lookahead)}if(Se.match_length>=z?(Et=s._tr_tally(Se,1,Se.match_length-z),Se.lookahead-=Se.match_length,Se.strstart+=Se.match_length,Se.match_length=0):(Et=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++),Et&&(ne(Se,!1),Se.strm.avail_out===0))return V}return Se.insert=0,Ze===m?(ne(Se,!0),Se.strm.avail_out===0?ue:Y):Se.last_lit&&(ne(Se,!1),Se.strm.avail_out===0)?V:fe}(se,Ce):i[se.level].func(se,Ce);if(Me!==ue&&Me!==Y||(se.status=666),Me===V||Me===ue)return B.avail_out===0&&(se.last_flush=-1),g;if(Me===fe&&(Ce===1?s._tr_align(se):Ce!==5&&(s._tr_stored_block(se,0,0,!1),Ce===3&&(G(se.head),se.lookahead===0&&(se.strstart=0,se.block_start=0,se.insert=0))),Q(B),B.avail_out===0))return se.last_flush=-1,g}return Ce!==m?g:se.wrap<=0?1:(se.wrap===2?(de(se,255&B.adler),de(se,B.adler>>8&255),de(se,B.adler>>16&255),de(se,B.adler>>24&255),de(se,255&B.total_in),de(se,B.total_in>>8&255),de(se,B.total_in>>16&255),de(se,B.total_in>>24&255)):(_e(se,B.adler>>>16),_e(se,65535&B.adler)),Q(B),0<se.wrap&&(se.wrap=-se.wrap),se.pending!==0?g:1)},a.deflateEnd=function(B){var Ce;return B&&B.state?(Ce=B.state.status)!==P&&Ce!==69&&Ce!==73&&Ce!==91&&Ce!==103&&Ce!==Z&&Ce!==666?X(B,v):(B.state=null,Ce===Z?X(B,-3):g):v},a.deflateSetDictionary=function(B,Ce){var Re,se,ie,J,xe,Me,Se,Ze,Et=Ce.length;if(!B||!B.state||(J=(Re=B.state).wrap)===2||J===1&&Re.status!==P||Re.lookahead)return v;for(J===1&&(B.adler=u(B.adler,Ce,Et,0)),Re.wrap=0,Et>=Re.w_size&&(J===0&&(G(Re.head),Re.strstart=0,Re.block_start=0,Re.insert=0),Ze=new o.Buf8(Re.w_size),o.arraySet(Ze,Ce,Et-Re.w_size,Re.w_size,0),Ce=Ze,Et=Re.w_size),xe=B.avail_in,Me=B.next_in,Se=B.input,B.avail_in=Et,B.next_in=0,B.input=Ce,Pe(Re);Re.lookahead>=z;){for(se=Re.strstart,ie=Re.lookahead-(z-1);Re.ins_h=(Re.ins_h<<Re.hash_shift^Re.window[se+z-1])&Re.hash_mask,Re.prev[se&Re.w_mask]=Re.head[Re.ins_h],Re.head[Re.ins_h]=se,se++,--ie;);Re.strstart=se,Re.lookahead=z-1,Pe(Re)}return Re.strstart+=Re.lookahead,Re.block_start=Re.strstart,Re.insert=Re.lookahead,Re.lookahead=0,Re.match_length=Re.prev_length=z-1,Re.match_available=0,B.next_in=Me,B.input=Se,B.avail_in=xe,Re.wrap=J,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,u,c,f,h,m,g,v,w,_,x,S,E,A,k,D,O,N,z,H,ee,P,Z,V,fe;s=i.state,u=i.next_in,V=i.input,c=u+(i.avail_in-5),f=i.next_out,fe=i.output,h=f-(o-i.avail_out),m=f+(i.avail_out-257),g=s.dmax,v=s.wsize,w=s.whave,_=s.wnext,x=s.window,S=s.hold,E=s.bits,A=s.lencode,k=s.distcode,D=(1<<s.lenbits)-1,O=(1<<s.distbits)-1;e:do{E<15&&(S+=V[u++]<<E,E+=8,S+=V[u++]<<E,E+=8),N=A[S&D];t:for(;;){if(S>>>=z=N>>>24,E-=z,(z=N>>>16&255)===0)fe[f++]=65535&N;else{if(!(16&z)){if((64&z)==0){N=A[(65535&N)+(S&(1<<z)-1)];continue t}if(32&z){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}H=65535&N,(z&=15)&&(E<z&&(S+=V[u++]<<E,E+=8),H+=S&(1<<z)-1,S>>>=z,E-=z),E<15&&(S+=V[u++]<<E,E+=8,S+=V[u++]<<E,E+=8),N=k[S&O];n:for(;;){if(S>>>=z=N>>>24,E-=z,!(16&(z=N>>>16&255))){if((64&z)==0){N=k[(65535&N)+(S&(1<<z)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(ee=65535&N,E<(z&=15)&&(S+=V[u++]<<E,(E+=8)<z&&(S+=V[u++]<<E,E+=8)),g<(ee+=S&(1<<z)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=z,E-=z,(z=f-h)<ee){if(w<(z=ee-z)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(Z=x,(P=0)===_){if(P+=v-z,z<H){for(H-=z;fe[f++]=x[P++],--z;);P=f-ee,Z=fe}}else if(_<z){if(P+=v+_-z,(z-=_)<H){for(H-=z;fe[f++]=x[P++],--z;);if(P=0,_<H){for(H-=z=_;fe[f++]=x[P++],--z;);P=f-ee,Z=fe}}}else if(P+=_-z,z<H){for(H-=z;fe[f++]=x[P++],--z;);P=f-ee,Z=fe}for(;2<H;)fe[f++]=Z[P++],fe[f++]=Z[P++],fe[f++]=Z[P++],H-=3;H&&(fe[f++]=Z[P++],1<H&&(fe[f++]=Z[P++]))}else{for(P=f-ee;fe[f++]=fe[P++],fe[f++]=fe[P++],fe[f++]=fe[P++],2<(H-=3););H&&(fe[f++]=fe[P++],1<H&&(fe[f++]=fe[P++]))}break}}break}}while(u<c&&f<m);u-=H=E>>3,S&=(1<<(E-=H<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=f<m?m-f+257:257-(f-m),s.hold=S,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),f=1,h=2,m=0,g=-2,v=1,w=852,_=592;function x(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(P){var Z;return P&&P.state?(Z=P.state,P.total_in=P.total_out=Z.total=0,P.msg="",Z.wrap&&(P.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(w),Z.distcode=Z.distdyn=new i.Buf32(_),Z.sane=1,Z.back=-1,m):g}function A(P){var Z;return P&&P.state?((Z=P.state).wsize=0,Z.whave=0,Z.wnext=0,E(P)):g}function k(P,Z){var V,fe;return P&&P.state?(fe=P.state,Z<0?(V=0,Z=-Z):(V=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?g:(fe.window!==null&&fe.wbits!==Z&&(fe.window=null),fe.wrap=V,fe.wbits=Z,A(P))):g}function D(P,Z){var V,fe;return P?(fe=new S,(P.state=fe).window=null,(V=k(P,Z))!==m&&(P.state=null),V):g}var O,N,z=!0;function H(P){if(z){var Z;for(O=new i.Buf32(512),N=new i.Buf32(32),Z=0;Z<144;)P.lens[Z++]=8;for(;Z<256;)P.lens[Z++]=9;for(;Z<280;)P.lens[Z++]=7;for(;Z<288;)P.lens[Z++]=8;for(c(f,P.lens,0,288,O,0,P.work,{bits:9}),Z=0;Z<32;)P.lens[Z++]=5;c(h,P.lens,0,32,N,0,P.work,{bits:5}),z=!1}P.lencode=O,P.lenbits=9,P.distcode=N,P.distbits=5}function ee(P,Z,V,fe){var ue,Y=P.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new i.Buf8(Y.wsize)),fe>=Y.wsize?(i.arraySet(Y.window,Z,V-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):(fe<(ue=Y.wsize-Y.wnext)&&(ue=fe),i.arraySet(Y.window,Z,V-fe,ue,Y.wnext),(fe-=ue)?(i.arraySet(Y.window,Z,V-fe,fe,0),Y.wnext=fe,Y.whave=Y.wsize):(Y.wnext+=ue,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=ue))),0}a.inflateReset=A,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(P){return D(P,15)},a.inflateInit2=D,a.inflate=function(P,Z){var V,fe,ue,Y,X,ae,G,Q,ne,de,_e,ve,Pe,Fe,Ie,Te,Ue,Ve,Ee,Ae,B,Ce,Re,se,ie=0,J=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return g;(V=P.state).mode===12&&(V.mode=13),X=P.next_out,ue=P.output,G=P.avail_out,Y=P.next_in,fe=P.input,ae=P.avail_in,Q=V.hold,ne=V.bits,de=ae,_e=G,Ce=m;e:for(;;)switch(V.mode){case v:if(V.wrap===0){V.mode=13;break}for(;ne<16;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if(2&V.wrap&&Q===35615){J[V.check=0]=255&Q,J[1]=Q>>>8&255,V.check=s(V.check,J,2,0),ne=Q=0,V.mode=2;break}if(V.flags=0,V.head&&(V.head.done=!1),!(1&V.wrap)||(((255&Q)<<8)+(Q>>8))%31){P.msg="incorrect header check",V.mode=30;break}if((15&Q)!=8){P.msg="unknown compression method",V.mode=30;break}if(ne-=4,B=8+(15&(Q>>>=4)),V.wbits===0)V.wbits=B;else if(B>V.wbits){P.msg="invalid window size",V.mode=30;break}V.dmax=1<<B,P.adler=V.check=1,V.mode=512&Q?10:12,ne=Q=0;break;case 2:for(;ne<16;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if(V.flags=Q,(255&V.flags)!=8){P.msg="unknown compression method",V.mode=30;break}if(57344&V.flags){P.msg="unknown header flags set",V.mode=30;break}V.head&&(V.head.text=Q>>8&1),512&V.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,V.check=s(V.check,J,2,0)),ne=Q=0,V.mode=3;case 3:for(;ne<32;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}V.head&&(V.head.time=Q),512&V.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,J[2]=Q>>>16&255,J[3]=Q>>>24&255,V.check=s(V.check,J,4,0)),ne=Q=0,V.mode=4;case 4:for(;ne<16;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}V.head&&(V.head.xflags=255&Q,V.head.os=Q>>8),512&V.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,V.check=s(V.check,J,2,0)),ne=Q=0,V.mode=5;case 5:if(1024&V.flags){for(;ne<16;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}V.length=Q,V.head&&(V.head.extra_len=Q),512&V.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,V.check=s(V.check,J,2,0)),ne=Q=0}else V.head&&(V.head.extra=null);V.mode=6;case 6:if(1024&V.flags&&(ae<(ve=V.length)&&(ve=ae),ve&&(V.head&&(B=V.head.extra_len-V.length,V.head.extra||(V.head.extra=new Array(V.head.extra_len)),i.arraySet(V.head.extra,fe,Y,ve,B)),512&V.flags&&(V.check=s(V.check,fe,ve,Y)),ae-=ve,Y+=ve,V.length-=ve),V.length))break e;V.length=0,V.mode=7;case 7:if(2048&V.flags){if(ae===0)break e;for(ve=0;B=fe[Y+ve++],V.head&&B&&V.length<65536&&(V.head.name+=String.fromCharCode(B)),B&&ve<ae;);if(512&V.flags&&(V.check=s(V.check,fe,ve,Y)),ae-=ve,Y+=ve,B)break e}else V.head&&(V.head.name=null);V.length=0,V.mode=8;case 8:if(4096&V.flags){if(ae===0)break e;for(ve=0;B=fe[Y+ve++],V.head&&B&&V.length<65536&&(V.head.comment+=String.fromCharCode(B)),B&&ve<ae;);if(512&V.flags&&(V.check=s(V.check,fe,ve,Y)),ae-=ve,Y+=ve,B)break e}else V.head&&(V.head.comment=null);V.mode=9;case 9:if(512&V.flags){for(;ne<16;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if(Q!==(65535&V.check)){P.msg="header crc mismatch",V.mode=30;break}ne=Q=0}V.head&&(V.head.hcrc=V.flags>>9&1,V.head.done=!0),P.adler=V.check=0,V.mode=12;break;case 10:for(;ne<32;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}P.adler=V.check=x(Q),ne=Q=0,V.mode=11;case 11:if(V.havedict===0)return P.next_out=X,P.avail_out=G,P.next_in=Y,P.avail_in=ae,V.hold=Q,V.bits=ne,2;P.adler=V.check=1,V.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(V.last){Q>>>=7&ne,ne-=7&ne,V.mode=27;break}for(;ne<3;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}switch(V.last=1&Q,ne-=1,3&(Q>>>=1)){case 0:V.mode=14;break;case 1:if(H(V),V.mode=20,Z!==6)break;Q>>>=2,ne-=2;break e;case 2:V.mode=17;break;case 3:P.msg="invalid block type",V.mode=30}Q>>>=2,ne-=2;break;case 14:for(Q>>>=7&ne,ne-=7&ne;ne<32;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if((65535&Q)!=(Q>>>16^65535)){P.msg="invalid stored block lengths",V.mode=30;break}if(V.length=65535&Q,ne=Q=0,V.mode=15,Z===6)break e;case 15:V.mode=16;case 16:if(ve=V.length){if(ae<ve&&(ve=ae),G<ve&&(ve=G),ve===0)break e;i.arraySet(ue,fe,Y,ve,X),ae-=ve,Y+=ve,G-=ve,X+=ve,V.length-=ve;break}V.mode=12;break;case 17:for(;ne<14;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if(V.nlen=257+(31&Q),Q>>>=5,ne-=5,V.ndist=1+(31&Q),Q>>>=5,ne-=5,V.ncode=4+(15&Q),Q>>>=4,ne-=4,286<V.nlen||30<V.ndist){P.msg="too many length or distance symbols",V.mode=30;break}V.have=0,V.mode=18;case 18:for(;V.have<V.ncode;){for(;ne<3;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}V.lens[xe[V.have++]]=7&Q,Q>>>=3,ne-=3}for(;V.have<19;)V.lens[xe[V.have++]]=0;if(V.lencode=V.lendyn,V.lenbits=7,Re={bits:V.lenbits},Ce=c(0,V.lens,0,19,V.lencode,0,V.work,Re),V.lenbits=Re.bits,Ce){P.msg="invalid code lengths set",V.mode=30;break}V.have=0,V.mode=19;case 19:for(;V.have<V.nlen+V.ndist;){for(;Te=(ie=V.lencode[Q&(1<<V.lenbits)-1])>>>16&255,Ue=65535&ie,!((Ie=ie>>>24)<=ne);){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if(Ue<16)Q>>>=Ie,ne-=Ie,V.lens[V.have++]=Ue;else{if(Ue===16){for(se=Ie+2;ne<se;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if(Q>>>=Ie,ne-=Ie,V.have===0){P.msg="invalid bit length repeat",V.mode=30;break}B=V.lens[V.have-1],ve=3+(3&Q),Q>>>=2,ne-=2}else if(Ue===17){for(se=Ie+3;ne<se;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}ne-=Ie,B=0,ve=3+(7&(Q>>>=Ie)),Q>>>=3,ne-=3}else{for(se=Ie+7;ne<se;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}ne-=Ie,B=0,ve=11+(127&(Q>>>=Ie)),Q>>>=7,ne-=7}if(V.have+ve>V.nlen+V.ndist){P.msg="invalid bit length repeat",V.mode=30;break}for(;ve--;)V.lens[V.have++]=B}}if(V.mode===30)break;if(V.lens[256]===0){P.msg="invalid code -- missing end-of-block",V.mode=30;break}if(V.lenbits=9,Re={bits:V.lenbits},Ce=c(f,V.lens,0,V.nlen,V.lencode,0,V.work,Re),V.lenbits=Re.bits,Ce){P.msg="invalid literal/lengths set",V.mode=30;break}if(V.distbits=6,V.distcode=V.distdyn,Re={bits:V.distbits},Ce=c(h,V.lens,V.nlen,V.ndist,V.distcode,0,V.work,Re),V.distbits=Re.bits,Ce){P.msg="invalid distances set",V.mode=30;break}if(V.mode=20,Z===6)break e;case 20:V.mode=21;case 21:if(6<=ae&&258<=G){P.next_out=X,P.avail_out=G,P.next_in=Y,P.avail_in=ae,V.hold=Q,V.bits=ne,u(P,_e),X=P.next_out,ue=P.output,G=P.avail_out,Y=P.next_in,fe=P.input,ae=P.avail_in,Q=V.hold,ne=V.bits,V.mode===12&&(V.back=-1);break}for(V.back=0;Te=(ie=V.lencode[Q&(1<<V.lenbits)-1])>>>16&255,Ue=65535&ie,!((Ie=ie>>>24)<=ne);){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if(Te&&(240&Te)==0){for(Ve=Ie,Ee=Te,Ae=Ue;Te=(ie=V.lencode[Ae+((Q&(1<<Ve+Ee)-1)>>Ve)])>>>16&255,Ue=65535&ie,!(Ve+(Ie=ie>>>24)<=ne);){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}Q>>>=Ve,ne-=Ve,V.back+=Ve}if(Q>>>=Ie,ne-=Ie,V.back+=Ie,V.length=Ue,Te===0){V.mode=26;break}if(32&Te){V.back=-1,V.mode=12;break}if(64&Te){P.msg="invalid literal/length code",V.mode=30;break}V.extra=15&Te,V.mode=22;case 22:if(V.extra){for(se=V.extra;ne<se;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}V.length+=Q&(1<<V.extra)-1,Q>>>=V.extra,ne-=V.extra,V.back+=V.extra}V.was=V.length,V.mode=23;case 23:for(;Te=(ie=V.distcode[Q&(1<<V.distbits)-1])>>>16&255,Ue=65535&ie,!((Ie=ie>>>24)<=ne);){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if((240&Te)==0){for(Ve=Ie,Ee=Te,Ae=Ue;Te=(ie=V.distcode[Ae+((Q&(1<<Ve+Ee)-1)>>Ve)])>>>16&255,Ue=65535&ie,!(Ve+(Ie=ie>>>24)<=ne);){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}Q>>>=Ve,ne-=Ve,V.back+=Ve}if(Q>>>=Ie,ne-=Ie,V.back+=Ie,64&Te){P.msg="invalid distance code",V.mode=30;break}V.offset=Ue,V.extra=15&Te,V.mode=24;case 24:if(V.extra){for(se=V.extra;ne<se;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}V.offset+=Q&(1<<V.extra)-1,Q>>>=V.extra,ne-=V.extra,V.back+=V.extra}if(V.offset>V.dmax){P.msg="invalid distance too far back",V.mode=30;break}V.mode=25;case 25:if(G===0)break e;if(ve=_e-G,V.offset>ve){if((ve=V.offset-ve)>V.whave&&V.sane){P.msg="invalid distance too far back",V.mode=30;break}Pe=ve>V.wnext?(ve-=V.wnext,V.wsize-ve):V.wnext-ve,ve>V.length&&(ve=V.length),Fe=V.window}else Fe=ue,Pe=X-V.offset,ve=V.length;for(G<ve&&(ve=G),G-=ve,V.length-=ve;ue[X++]=Fe[Pe++],--ve;);V.length===0&&(V.mode=21);break;case 26:if(G===0)break e;ue[X++]=V.length,G--,V.mode=21;break;case 27:if(V.wrap){for(;ne<32;){if(ae===0)break e;ae--,Q|=fe[Y++]<<ne,ne+=8}if(_e-=G,P.total_out+=_e,V.total+=_e,_e&&(P.adler=V.check=V.flags?s(V.check,ue,_e,X-_e):o(V.check,ue,_e,X-_e)),_e=G,(V.flags?Q:x(Q))!==V.check){P.msg="incorrect data check",V.mode=30;break}ne=Q=0}V.mode=28;case 28:if(V.wrap&&V.flags){for(;ne<32;){if(ae===0)break e;ae--,Q+=fe[Y++]<<ne,ne+=8}if(Q!==(4294967295&V.total)){P.msg="incorrect length check",V.mode=30;break}ne=Q=0}V.mode=29;case 29:Ce=1;break e;case 30:Ce=-3;break e;case 31:return-4;case 32:default:return g}return P.next_out=X,P.avail_out=G,P.next_in=Y,P.avail_in=ae,V.hold=Q,V.bits=ne,(V.wsize||_e!==P.avail_out&&V.mode<30&&(V.mode<27||Z!==4))&&ee(P,P.output,P.next_out,_e-P.avail_out)?(V.mode=31,-4):(de-=P.avail_in,_e-=P.avail_out,P.total_in+=de,P.total_out+=_e,V.total+=_e,V.wrap&&_e&&(P.adler=V.check=V.flags?s(V.check,ue,_e,P.next_out-_e):o(V.check,ue,_e,P.next_out-_e)),P.data_type=V.bits+(V.last?64:0)+(V.mode===12?128:0)+(V.mode===20||V.mode===15?256:0),(de==0&&_e===0||Z===4)&&Ce===m&&(Ce=-5),Ce)},a.inflateEnd=function(P){if(!P||!P.state)return g;var Z=P.state;return Z.window&&(Z.window=null),P.state=null,m},a.inflateGetHeader=function(P,Z){var V;return P&&P.state?(2&(V=P.state).wrap)==0?g:((V.head=Z).done=!1,m):g},a.inflateSetDictionary=function(P,Z){var V,fe=Z.length;return P&&P.state?(V=P.state).wrap!==0&&V.mode!==11?g:V.mode===11&&o(1,Z,fe,0)!==V.check?-3:ee(P,Z,fe,fe)?(V.mode=31,-4):(V.havedict=1,m):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,m,g,v,w,_,x){var S,E,A,k,D,O,N,z,H,ee=x.bits,P=0,Z=0,V=0,fe=0,ue=0,Y=0,X=0,ae=0,G=0,Q=0,ne=null,de=0,_e=new i.Buf16(16),ve=new i.Buf16(16),Pe=null,Fe=0;for(P=0;P<=15;P++)_e[P]=0;for(Z=0;Z<g;Z++)_e[h[m+Z]]++;for(ue=ee,fe=15;1<=fe&&_e[fe]===0;fe--);if(fe<ue&&(ue=fe),fe===0)return v[w++]=20971520,v[w++]=20971520,x.bits=1,0;for(V=1;V<fe&&_e[V]===0;V++);for(ue<V&&(ue=V),P=ae=1;P<=15;P++)if(ae<<=1,(ae-=_e[P])<0)return-1;if(0<ae&&(f===0||fe!==1))return-1;for(ve[1]=0,P=1;P<15;P++)ve[P+1]=ve[P]+_e[P];for(Z=0;Z<g;Z++)h[m+Z]!==0&&(_[ve[h[m+Z]]++]=Z);if(O=f===0?(ne=Pe=_,19):f===1?(ne=o,de-=257,Pe=s,Fe-=257,256):(ne=u,Pe=c,-1),P=V,D=w,X=Z=Q=0,A=-1,k=(G=1<<(Y=ue))-1,f===1&&852<G||f===2&&592<G)return 1;for(;;){for(N=P-X,H=_[Z]<O?(z=0,_[Z]):_[Z]>O?(z=Pe[Fe+_[Z]],ne[de+_[Z]]):(z=96,0),S=1<<P-X,V=E=1<<Y;v[D+(Q>>X)+(E-=S)]=N<<24|z<<16|H|0,E!==0;);for(S=1<<P-1;Q&S;)S>>=1;if(S!==0?(Q&=S-1,Q+=S):Q=0,Z++,--_e[P]==0){if(P===fe)break;P=h[m+_[Z]]}if(ue<P&&(Q&k)!==A){for(X===0&&(X=ue),D+=V,ae=1<<(Y=P-X);Y+X<fe&&!((ae-=_e[Y+X])<=0);)Y++,ae<<=1;if(G+=1<<Y,f===1&&852<G||f===2&&592<G)return 1;v[A=Q&k]=ue<<24|Y<<16|D-w|0}}return Q!==0&&(v[D+Q]=P-X<<24|64<<16|0),x.bits=ue,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function u(ie){for(var J=ie.length;0<=--J;)ie[J]=0}var c=0,f=29,h=256,m=h+1+f,g=30,v=19,w=2*m+1,_=15,x=16,S=7,E=256,A=16,k=17,D=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=new Array(2*(m+2));u(ee);var P=new Array(2*g);u(P);var Z=new Array(512);u(Z);var V=new Array(256);u(V);var fe=new Array(f);u(fe);var ue,Y,X,ae=new Array(g);function G(ie,J,xe,Me,Se){this.static_tree=ie,this.extra_bits=J,this.extra_base=xe,this.elems=Me,this.max_length=Se,this.has_stree=ie&&ie.length}function Q(ie,J){this.dyn_tree=ie,this.max_code=0,this.stat_desc=J}function ne(ie){return ie<256?Z[ie]:Z[256+(ie>>>7)]}function de(ie,J){ie.pending_buf[ie.pending++]=255&J,ie.pending_buf[ie.pending++]=J>>>8&255}function _e(ie,J,xe){ie.bi_valid>x-xe?(ie.bi_buf|=J<<ie.bi_valid&65535,de(ie,ie.bi_buf),ie.bi_buf=J>>x-ie.bi_valid,ie.bi_valid+=xe-x):(ie.bi_buf|=J<<ie.bi_valid&65535,ie.bi_valid+=xe)}function ve(ie,J,xe){_e(ie,xe[2*J],xe[2*J+1])}function Pe(ie,J){for(var xe=0;xe|=1&ie,ie>>>=1,xe<<=1,0<--J;);return xe>>>1}function Fe(ie,J,xe){var Me,Se,Ze=new Array(_+1),Et=0;for(Me=1;Me<=_;Me++)Ze[Me]=Et=Et+xe[Me-1]<<1;for(Se=0;Se<=J;Se++){var at=ie[2*Se+1];at!==0&&(ie[2*Se]=Pe(Ze[at]++,at))}}function Ie(ie){var J;for(J=0;J<m;J++)ie.dyn_ltree[2*J]=0;for(J=0;J<g;J++)ie.dyn_dtree[2*J]=0;for(J=0;J<v;J++)ie.bl_tree[2*J]=0;ie.dyn_ltree[2*E]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function Te(ie){8<ie.bi_valid?de(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function Ue(ie,J,xe,Me){var Se=2*J,Ze=2*xe;return ie[Se]<ie[Ze]||ie[Se]===ie[Ze]&&Me[J]<=Me[xe]}function Ve(ie,J,xe){for(var Me=ie.heap[xe],Se=xe<<1;Se<=ie.heap_len&&(Se<ie.heap_len&&Ue(J,ie.heap[Se+1],ie.heap[Se],ie.depth)&&Se++,!Ue(J,Me,ie.heap[Se],ie.depth));)ie.heap[xe]=ie.heap[Se],xe=Se,Se<<=1;ie.heap[xe]=Me}function Ee(ie,J,xe){var Me,Se,Ze,Et,at=0;if(ie.last_lit!==0)for(;Me=ie.pending_buf[ie.d_buf+2*at]<<8|ie.pending_buf[ie.d_buf+2*at+1],Se=ie.pending_buf[ie.l_buf+at],at++,Me===0?ve(ie,Se,J):(ve(ie,(Ze=V[Se])+h+1,J),(Et=O[Ze])!==0&&_e(ie,Se-=fe[Ze],Et),ve(ie,Ze=ne(--Me),xe),(Et=N[Ze])!==0&&_e(ie,Me-=ae[Ze],Et)),at<ie.last_lit;);ve(ie,E,J)}function Ae(ie,J){var xe,Me,Se,Ze=J.dyn_tree,Et=J.stat_desc.static_tree,at=J.stat_desc.has_stree,_t=J.stat_desc.elems,Nt=-1;for(ie.heap_len=0,ie.heap_max=w,xe=0;xe<_t;xe++)Ze[2*xe]!==0?(ie.heap[++ie.heap_len]=Nt=xe,ie.depth[xe]=0):Ze[2*xe+1]=0;for(;ie.heap_len<2;)Ze[2*(Se=ie.heap[++ie.heap_len]=Nt<2?++Nt:0)]=1,ie.depth[Se]=0,ie.opt_len--,at&&(ie.static_len-=Et[2*Se+1]);for(J.max_code=Nt,xe=ie.heap_len>>1;1<=xe;xe--)Ve(ie,Ze,xe);for(Se=_t;xe=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],Ve(ie,Ze,1),Me=ie.heap[1],ie.heap[--ie.heap_max]=xe,ie.heap[--ie.heap_max]=Me,Ze[2*Se]=Ze[2*xe]+Ze[2*Me],ie.depth[Se]=(ie.depth[xe]>=ie.depth[Me]?ie.depth[xe]:ie.depth[Me])+1,Ze[2*xe+1]=Ze[2*Me+1]=Se,ie.heap[1]=Se++,Ve(ie,Ze,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],function(Rt,Kt){var pe,R,q,ce,Oe,ye,ke=Kt.dyn_tree,oe=Kt.max_code,ft=Kt.stat_desc.static_tree,vt=Kt.stat_desc.has_stree,j=Kt.stat_desc.extra_bits,$e=Kt.stat_desc.extra_base,st=Kt.stat_desc.max_length,ge=0;for(ce=0;ce<=_;ce++)Rt.bl_count[ce]=0;for(ke[2*Rt.heap[Rt.heap_max]+1]=0,pe=Rt.heap_max+1;pe<w;pe++)st<(ce=ke[2*ke[2*(R=Rt.heap[pe])+1]+1]+1)&&(ce=st,ge++),ke[2*R+1]=ce,oe<R||(Rt.bl_count[ce]++,Oe=0,$e<=R&&(Oe=j[R-$e]),ye=ke[2*R],Rt.opt_len+=ye*(ce+Oe),vt&&(Rt.static_len+=ye*(ft[2*R+1]+Oe)));if(ge!==0){do{for(ce=st-1;Rt.bl_count[ce]===0;)ce--;Rt.bl_count[ce]--,Rt.bl_count[ce+1]+=2,Rt.bl_count[st]--,ge-=2}while(0<ge);for(ce=st;ce!==0;ce--)for(R=Rt.bl_count[ce];R!==0;)oe<(q=Rt.heap[--pe])||(ke[2*q+1]!==ce&&(Rt.opt_len+=(ce-ke[2*q+1])*ke[2*q],ke[2*q+1]=ce),R--)}}(ie,J),Fe(Ze,Nt,ie.bl_count)}function B(ie,J,xe){var Me,Se,Ze=-1,Et=J[1],at=0,_t=7,Nt=4;for(Et===0&&(_t=138,Nt=3),J[2*(xe+1)+1]=65535,Me=0;Me<=xe;Me++)Se=Et,Et=J[2*(Me+1)+1],++at<_t&&Se===Et||(at<Nt?ie.bl_tree[2*Se]+=at:Se!==0?(Se!==Ze&&ie.bl_tree[2*Se]++,ie.bl_tree[2*A]++):at<=10?ie.bl_tree[2*k]++:ie.bl_tree[2*D]++,Ze=Se,Nt=(at=0)===Et?(_t=138,3):Se===Et?(_t=6,3):(_t=7,4))}function Ce(ie,J,xe){var Me,Se,Ze=-1,Et=J[1],at=0,_t=7,Nt=4;for(Et===0&&(_t=138,Nt=3),Me=0;Me<=xe;Me++)if(Se=Et,Et=J[2*(Me+1)+1],!(++at<_t&&Se===Et)){if(at<Nt)for(;ve(ie,Se,ie.bl_tree),--at!=0;);else Se!==0?(Se!==Ze&&(ve(ie,Se,ie.bl_tree),at--),ve(ie,A,ie.bl_tree),_e(ie,at-3,2)):at<=10?(ve(ie,k,ie.bl_tree),_e(ie,at-3,3)):(ve(ie,D,ie.bl_tree),_e(ie,at-11,7));Ze=Se,Nt=(at=0)===Et?(_t=138,3):Se===Et?(_t=6,3):(_t=7,4)}}u(ae);var Re=!1;function se(ie,J,xe,Me){_e(ie,(c<<1)+(Me?1:0),3),function(Se,Ze,Et,at){Te(Se),de(Se,Et),de(Se,~Et),i.arraySet(Se.pending_buf,Se.window,Ze,Et,Se.pending),Se.pending+=Et}(ie,J,xe)}a._tr_init=function(ie){Re||(function(){var J,xe,Me,Se,Ze,Et=new Array(_+1);for(Se=Me=0;Se<f-1;Se++)for(fe[Se]=Me,J=0;J<1<<O[Se];J++)V[Me++]=Se;for(V[Me-1]=Se,Se=Ze=0;Se<16;Se++)for(ae[Se]=Ze,J=0;J<1<<N[Se];J++)Z[Ze++]=Se;for(Ze>>=7;Se<g;Se++)for(ae[Se]=Ze<<7,J=0;J<1<<N[Se]-7;J++)Z[256+Ze++]=Se;for(xe=0;xe<=_;xe++)Et[xe]=0;for(J=0;J<=143;)ee[2*J+1]=8,J++,Et[8]++;for(;J<=255;)ee[2*J+1]=9,J++,Et[9]++;for(;J<=279;)ee[2*J+1]=7,J++,Et[7]++;for(;J<=287;)ee[2*J+1]=8,J++,Et[8]++;for(Fe(ee,m+1,Et),J=0;J<g;J++)P[2*J+1]=5,P[2*J]=Pe(J,5);ue=new G(ee,O,h+1,m,_),Y=new G(P,N,0,g,_),X=new G(new Array(0),z,0,v,S)}(),Re=!0),ie.l_desc=new Q(ie.dyn_ltree,ue),ie.d_desc=new Q(ie.dyn_dtree,Y),ie.bl_desc=new Q(ie.bl_tree,X),ie.bi_buf=0,ie.bi_valid=0,Ie(ie)},a._tr_stored_block=se,a._tr_flush_block=function(ie,J,xe,Me){var Se,Ze,Et=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=function(at){var _t,Nt=4093624447;for(_t=0;_t<=31;_t++,Nt>>>=1)if(1&Nt&&at.dyn_ltree[2*_t]!==0)return o;if(at.dyn_ltree[18]!==0||at.dyn_ltree[20]!==0||at.dyn_ltree[26]!==0)return s;for(_t=32;_t<h;_t++)if(at.dyn_ltree[2*_t]!==0)return s;return o}(ie)),Ae(ie,ie.l_desc),Ae(ie,ie.d_desc),Et=function(at){var _t;for(B(at,at.dyn_ltree,at.l_desc.max_code),B(at,at.dyn_dtree,at.d_desc.max_code),Ae(at,at.bl_desc),_t=v-1;3<=_t&&at.bl_tree[2*H[_t]+1]===0;_t--);return at.opt_len+=3*(_t+1)+5+5+4,_t}(ie),Se=ie.opt_len+3+7>>>3,(Ze=ie.static_len+3+7>>>3)<=Se&&(Se=Ze)):Se=Ze=xe+5,xe+4<=Se&&J!==-1?se(ie,J,xe,Me):ie.strategy===4||Ze===Se?(_e(ie,2+(Me?1:0),3),Ee(ie,ee,P)):(_e(ie,4+(Me?1:0),3),function(at,_t,Nt,Rt){var Kt;for(_e(at,_t-257,5),_e(at,Nt-1,5),_e(at,Rt-4,4),Kt=0;Kt<Rt;Kt++)_e(at,at.bl_tree[2*H[Kt]+1],3);Ce(at,at.dyn_ltree,_t-1),Ce(at,at.dyn_dtree,Nt-1)}(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,Et+1),Ee(ie,ie.dyn_ltree,ie.dyn_dtree)),Ie(ie),Me&&Te(ie)},a._tr_tally=function(ie,J,xe){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=J>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&J,ie.pending_buf[ie.l_buf+ie.last_lit]=255&xe,ie.last_lit++,J===0?ie.dyn_ltree[2*xe]++:(ie.matches++,J--,ie.dyn_ltree[2*(V[xe]+h+1)]++,ie.dyn_dtree[2*ne(J)]++),ie.last_lit===ie.lit_bufsize-1},a._tr_align=function(ie){_e(ie,2,3),ve(ie,E,ee),function(J){J.bi_valid===16?(de(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}(ie)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var u,c,f,h,m=1,g={},v=!1,w=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(A){Wr.nextTick(function(){S(A)})}:function(){if(o.postMessage&&!o.importScripts){var A=!0,k=o.onmessage;return o.onmessage=function(){A=!1},o.postMessage("","*"),o.onmessage=k,A}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(A){o.postMessage(h+A,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(A){S(A.data)},function(A){f.port2.postMessage(A)}):w&&"onreadystatechange"in w.createElement("script")?(c=w.documentElement,function(A){var k=w.createElement("script");k.onreadystatechange=function(){S(A),k.onreadystatechange=null,c.removeChild(k),k=null},c.appendChild(k)}):function(A){setTimeout(S,0,A)},_.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var k=new Array(arguments.length-1),D=0;D<k.length;D++)k[D]=arguments[D+1];var O={callback:A,args:k};return g[m]=O,u(m),m++},_.clearImmediate=x}function x(A){delete g[A]}function S(A){if(v)setTimeout(S,0,A);else{var k=g[A];if(k){v=!0;try{(function(D){var O=D.callback,N=D.args;switch(N.length){case 0:O();break;case 1:O(N[0]);break;case 2:O(N[0],N[1]);break;case 3:O(N[0],N[1],N[2]);break;default:O.apply(s,N)}})(k)}finally{x(A),v=!1}}}}function E(A){A.source===o&&typeof A.data=="string"&&A.data.indexOf(h)===0&&S(+A.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Dx)),Dx.exports}var zJ=BJ();const N8=Ja(zJ),qb=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},Wn=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},js=(...e)=>Wn(e.map(t=>t.trim()).filter(Boolean).join("/")),Qv=e=>{const t=Wn(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},ea=e=>{const t=Wn(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Nm=(e,t)=>Wn(e==="/"?`/${t}`:`${e}/${t}`);var Mx,zN;function UJ(){if(zN)return Mx;zN=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Wr>"u"||typeof Wr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,A){i=E,o=A})),a=a||{};var u=!1,c=null,f=null,h=null,m=this,g=function(E,A,k){f&&(clearTimeout(f),f=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),u||(s?A?o(A):i(k):typeof r=="function"&&r(A,k),u=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},v=function(E){if(u)return g(E);c&&(clearTimeout(c),c=null),m.domainReentrant&&E&&(m.domains[t]=Wr.domain);var A=a.maxExecutionTime||m.maxExecutionTime;if(A&&(h=setTimeout(function(){m.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},A)),n.length===1){var k=!1;try{n(function(D,O){k||(k=!0,g(E,D,O))})}catch(D){k||(k=!0,g(E,D))}}else m._promiseTry(function(){return n()}).then(function(D){g(E,void 0,D)},function(D){g(E,D)})};m.domainReentrant&&Wr.domain&&(v=Wr.domain.bind(v));var w=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],v(!0);else if(m.domainReentrant&&Wr.domain&&Wr.domain===m.domains[t])v(!1);else if(m.queues[t].length>=w)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){v(!0)};a.skipQueue?m.queues[t].unshift(_):m.queues[t].push(_);var x=a.timeout||m.timeout;x&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||m.maxOccupationTime;if(S&&(f=setTimeout(function(){m.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(u,c){return function(f){i.acquire(u,c,f,a)}},s=t.reduceRight(function(u,c){return o(c,u)},n);if(typeof r=="function")s(r);else return new this.Promise(function(u,c){s.length===1?s(function(f,h){f?c(f):u(h)}):u(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},Mx=e,Mx}var Px,UN;function qJ(){return UN||(UN=1,Px=UJ()),Px}var HJ=qJ();const Im=Ja(HJ);var jy={exports:{}},qN;function VJ(){return qN||(qN=1,typeof Object.create=="function"?jy.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:jy.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),jy.exports}var Fx,HN;function GJ(){if(HN)return Fx;HN=1;var e=uk().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,u=0;u<o;){for(var c=s%i,f=Math.min(o-u,i-c),h=0;h<f;h++)a[c+h]=n[u+h];s+=f,u+=f,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Fx=t,Fx}var Lx,VN;function WJ(){if(VN)return Lx;VN=1;var e=VJ(),t=GJ(),n=uk().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(f){return f<<1|f>>>31}function s(f){return f<<5|f>>>27}function u(f){return f<<30|f>>>2}function c(f,h,m,g){return f===0?h&m|~h&g:f===2?h&m|h&g|m&g:h^m^g}return i.prototype._update=function(f){for(var h=this._w,m=this._a|0,g=this._b|0,v=this._c|0,w=this._d|0,_=this._e|0,x=0;x<16;++x)h[x]=f.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),A=s(m)+c(E,g,v,w)+_+h[S]+r[E]|0;_=w,w=v,v=u(g),g=m,m=A}this._a=m+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=w+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var f=n.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},Lx=i,Lx}var KJ=WJ();const I8=Ja(KJ);var $x,GN;function ZJ(){if(GN)return $x;GN=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,u=-1,c=0,f,h=0;h<=a.length;++h){if(h<a.length)f=a.charCodeAt(h);else{if(f===47)break;f=47}if(f===47){if(!(u===h-1||c===1))if(u!==h-1&&c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var m=o.lastIndexOf("/");if(m!==o.length-1){m===-1?(o="",s=0):(o=o.slice(0,m),s=o.length-1-o.lastIndexOf("/")),u=h,c=0;continue}}else if(o.length===2||o.length===1){o="",s=0,u=h,c=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(u+1,h):o=a.slice(u+1,h),s=h-u-1;u=h,c=0}else f===46&&c!==-1?++c:c=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,u=arguments.length-1;u>=-1&&!o;u--){var c;u>=0?c=arguments[u]:(s===void 0&&(s=Wr.cwd()),c=s),e(c),c.length!==0&&(i=c+"/"+i,o=c.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var u=i.length,c=u-s,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var h=o.length,m=h-f,g=c<m?c:m,v=-1,w=0;w<=g;++w){if(w===g){if(m>g){if(o.charCodeAt(f+w)===47)return o.slice(f+w+1);if(w===0)return o.slice(f+w)}else c>g&&(i.charCodeAt(s+w)===47?v=w:w===0&&(v=0));break}var _=i.charCodeAt(s+w),x=o.charCodeAt(f+w);if(_!==x)break;_===47&&(v=w)}var S="";for(w=s+v+1;w<=u;++w)(w===u||i.charCodeAt(w)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+o.slice(f+v):(f+=v,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,u=-1,c=!0,f=i.length-1;f>=1;--f)if(o=i.charCodeAt(f),o===47){if(!c){u=f;break}}else c=!1;return u===-1?s?"/":".":s&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,u=-1,c=!0,f;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,m=-1;for(f=i.length-1;f>=0;--f){var g=i.charCodeAt(f);if(g===47){if(!c){s=f+1;break}}else m===-1&&(c=!1,m=f+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(u=f):(h=-1,u=m))}return s===u?u=m:u===-1&&(u=i.length),i.slice(s,u)}else{for(f=i.length-1;f>=0;--f)if(i.charCodeAt(f)===47){if(!c){s=f+1;break}}else u===-1&&(c=!1,u=f+1);return u===-1?"":i.slice(s,u)}},extname:function(i){e(i);for(var o=-1,s=0,u=-1,c=!0,f=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!c){s=h+1;break}continue}u===-1&&(c=!1,u=h+1),m===46?o===-1?o=h:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||u===-1||f===0||f===1&&o===u-1&&o===s+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),u=s===47,c;u?(o.root="/",c=1):c=0;for(var f=-1,h=0,m=-1,g=!0,v=i.length-1,w=0;v>=c;--v){if(s=i.charCodeAt(v),s===47){if(!g){h=v+1;break}continue}m===-1&&(g=!1,m=v+1),s===46?f===-1?f=v:w!==1&&(w=1):f!==-1&&(w=-1)}return f===-1||m===-1||w===0||w===1&&f===m-1&&f===h+1?m!==-1&&(h===0&&u?o.base=o.name=i.slice(1,m):o.base=o.name=i.slice(h,m)):(h===0&&u?(o.name=i.slice(1,f),o.base=i.slice(1,m)):(o.name=i.slice(h,f),o.base=i.slice(h,m)),o.ext=i.slice(f,m)),h>0?o.dir=i.slice(0,h-1):u&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,$x=r,$x}var Tt=ZJ(),Bx={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var WN;function YJ(){return WN||(WN=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var N=0,z=new Array(256),H=0;H!=256;++H)N=H,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,z[H]=N;return typeof Int32Array<"u"?new Int32Array(z):z}var r=n();function a(N){var z=0,H=0,ee=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ee=0;ee!=256;++ee)P[ee]=N[ee];for(ee=0;ee!=256;++ee)for(H=N[ee],z=256+ee;z<4096;z+=256)H=P[z]=H>>>8^N[H&255];var Z=[];for(ee=1;ee!=16;++ee)Z[ee-1]=typeof Int32Array<"u"?P.subarray(ee*256,ee*256+256):P.slice(ee*256,ee*256+256);return Z}var i=a(r),o=i[0],s=i[1],u=i[2],c=i[3],f=i[4],h=i[5],m=i[6],g=i[7],v=i[8],w=i[9],_=i[10],x=i[11],S=i[12],E=i[13],A=i[14];function k(N,z){for(var H=z^-1,ee=0,P=N.length;ee<P;)H=H>>>8^r[(H^N.charCodeAt(ee++))&255];return~H}function D(N,z){for(var H=z^-1,ee=N.length-15,P=0;P<ee;)H=A[N[P++]^H&255]^E[N[P++]^H>>8&255]^S[N[P++]^H>>16&255]^x[N[P++]^H>>>24]^_[N[P++]]^w[N[P++]]^v[N[P++]]^g[N[P++]]^m[N[P++]]^h[N[P++]]^f[N[P++]]^c[N[P++]]^u[N[P++]]^s[N[P++]]^o[N[P++]]^r[N[P++]];for(ee+=15;P<ee;)H=H>>>8^r[(H^N[P++])&255];return~H}function O(N,z){for(var H=z^-1,ee=0,P=N.length,Z=0,V=0;ee<P;)Z=N.charCodeAt(ee++),Z<128?H=H>>>8^r[(H^Z)&255]:Z<2048?(H=H>>>8^r[(H^(192|Z>>6&31))&255],H=H>>>8^r[(H^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,V=N.charCodeAt(ee++)&1023,H=H>>>8^r[(H^(240|Z>>8&7))&255],H=H>>>8^r[(H^(128|Z>>2&63))&255],H=H>>>8^r[(H^(128|V>>6&15|(Z&3)<<4))&255],H=H>>>8^r[(H^(128|V&63))&255]):(H=H>>>8^r[(H^(224|Z>>12&15))&255],H=H>>>8^r[(H^(128|Z>>6&63))&255],H=H>>>8^r[(H^(128|Z&63))&255]);return~H}t.table=r,t.bstr=k,t.buf=D,t.str=O})}(Bx)),Bx}var XJ=YJ();const JJ=Ja(XJ);var zx={},KN;function ac(){return KN||(KN=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(i[u]=s[u])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,u,c){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+u),c);return}for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){var o,s,u,c,f,h;for(u=0,o=0,s=i.length;o<s;o++)u+=i[o].length;for(h=new Uint8Array(u),c=0,o=0,s=i.length;o<s;o++)f=i[o],h.set(f,c),c+=f.length;return h}},a={arraySet:function(i,o,s,u,c){for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(zx)),zx}var yf={},Ao={},Pc={},ZN;function QJ(){if(ZN)return Pc;ZN=1;var e=ac(),t=4,n=0,r=1,a=2;function i(R){for(var q=R.length;--q>=0;)R[q]=0}var o=0,s=1,u=2,c=3,f=258,h=29,m=256,g=m+1+h,v=30,w=19,_=2*g+1,x=15,S=16,E=7,A=256,k=16,D=17,O=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=512,Z=new Array((g+2)*2);i(Z);var V=new Array(v*2);i(V);var fe=new Array(P);i(fe);var ue=new Array(f-c+1);i(ue);var Y=new Array(h);i(Y);var X=new Array(v);i(X);function ae(R,q,ce,Oe,ye){this.static_tree=R,this.extra_bits=q,this.extra_base=ce,this.elems=Oe,this.max_length=ye,this.has_stree=R&&R.length}var G,Q,ne;function de(R,q){this.dyn_tree=R,this.max_code=0,this.stat_desc=q}function _e(R){return R<256?fe[R]:fe[256+(R>>>7)]}function ve(R,q){R.pending_buf[R.pending++]=q&255,R.pending_buf[R.pending++]=q>>>8&255}function Pe(R,q,ce){R.bi_valid>S-ce?(R.bi_buf|=q<<R.bi_valid&65535,ve(R,R.bi_buf),R.bi_buf=q>>S-R.bi_valid,R.bi_valid+=ce-S):(R.bi_buf|=q<<R.bi_valid&65535,R.bi_valid+=ce)}function Fe(R,q,ce){Pe(R,ce[q*2],ce[q*2+1])}function Ie(R,q){var ce=0;do ce|=R&1,R>>>=1,ce<<=1;while(--q>0);return ce>>>1}function Te(R){R.bi_valid===16?(ve(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):R.bi_valid>=8&&(R.pending_buf[R.pending++]=R.bi_buf&255,R.bi_buf>>=8,R.bi_valid-=8)}function Ue(R,q){var ce=q.dyn_tree,Oe=q.max_code,ye=q.stat_desc.static_tree,ke=q.stat_desc.has_stree,oe=q.stat_desc.extra_bits,ft=q.stat_desc.extra_base,vt=q.stat_desc.max_length,j,$e,st,ge,De,Je,It=0;for(ge=0;ge<=x;ge++)R.bl_count[ge]=0;for(ce[R.heap[R.heap_max]*2+1]=0,j=R.heap_max+1;j<_;j++)$e=R.heap[j],ge=ce[ce[$e*2+1]*2+1]+1,ge>vt&&(ge=vt,It++),ce[$e*2+1]=ge,!($e>Oe)&&(R.bl_count[ge]++,De=0,$e>=ft&&(De=oe[$e-ft]),Je=ce[$e*2],R.opt_len+=Je*(ge+De),ke&&(R.static_len+=Je*(ye[$e*2+1]+De)));if(It!==0){do{for(ge=vt-1;R.bl_count[ge]===0;)ge--;R.bl_count[ge]--,R.bl_count[ge+1]+=2,R.bl_count[vt]--,It-=2}while(It>0);for(ge=vt;ge!==0;ge--)for($e=R.bl_count[ge];$e!==0;)st=R.heap[--j],!(st>Oe)&&(ce[st*2+1]!==ge&&(R.opt_len+=(ge-ce[st*2+1])*ce[st*2],ce[st*2+1]=ge),$e--)}}function Ve(R,q,ce){var Oe=new Array(x+1),ye=0,ke,oe;for(ke=1;ke<=x;ke++)Oe[ke]=ye=ye+ce[ke-1]<<1;for(oe=0;oe<=q;oe++){var ft=R[oe*2+1];ft!==0&&(R[oe*2]=Ie(Oe[ft]++,ft))}}function Ee(){var R,q,ce,Oe,ye,ke=new Array(x+1);for(ce=0,Oe=0;Oe<h-1;Oe++)for(Y[Oe]=ce,R=0;R<1<<N[Oe];R++)ue[ce++]=Oe;for(ue[ce-1]=Oe,ye=0,Oe=0;Oe<16;Oe++)for(X[Oe]=ye,R=0;R<1<<z[Oe];R++)fe[ye++]=Oe;for(ye>>=7;Oe<v;Oe++)for(X[Oe]=ye<<7,R=0;R<1<<z[Oe]-7;R++)fe[256+ye++]=Oe;for(q=0;q<=x;q++)ke[q]=0;for(R=0;R<=143;)Z[R*2+1]=8,R++,ke[8]++;for(;R<=255;)Z[R*2+1]=9,R++,ke[9]++;for(;R<=279;)Z[R*2+1]=7,R++,ke[7]++;for(;R<=287;)Z[R*2+1]=8,R++,ke[8]++;for(Ve(Z,g+1,ke),R=0;R<v;R++)V[R*2+1]=5,V[R*2]=Ie(R,5);G=new ae(Z,N,m+1,g,x),Q=new ae(V,z,0,v,x),ne=new ae(new Array(0),H,0,w,E)}function Ae(R){var q;for(q=0;q<g;q++)R.dyn_ltree[q*2]=0;for(q=0;q<v;q++)R.dyn_dtree[q*2]=0;for(q=0;q<w;q++)R.bl_tree[q*2]=0;R.dyn_ltree[A*2]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function B(R){R.bi_valid>8?ve(R,R.bi_buf):R.bi_valid>0&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function Ce(R,q,ce,Oe){B(R),ve(R,ce),ve(R,~ce),e.arraySet(R.pending_buf,R.window,q,ce,R.pending),R.pending+=ce}function Re(R,q,ce,Oe){var ye=q*2,ke=ce*2;return R[ye]<R[ke]||R[ye]===R[ke]&&Oe[q]<=Oe[ce]}function se(R,q,ce){for(var Oe=R.heap[ce],ye=ce<<1;ye<=R.heap_len&&(ye<R.heap_len&&Re(q,R.heap[ye+1],R.heap[ye],R.depth)&&ye++,!Re(q,Oe,R.heap[ye],R.depth));)R.heap[ce]=R.heap[ye],ce=ye,ye<<=1;R.heap[ce]=Oe}function ie(R,q,ce){var Oe,ye,ke=0,oe,ft;if(R.last_lit!==0)do Oe=R.pending_buf[R.d_buf+ke*2]<<8|R.pending_buf[R.d_buf+ke*2+1],ye=R.pending_buf[R.l_buf+ke],ke++,Oe===0?Fe(R,ye,q):(oe=ue[ye],Fe(R,oe+m+1,q),ft=N[oe],ft!==0&&(ye-=Y[oe],Pe(R,ye,ft)),Oe--,oe=_e(Oe),Fe(R,oe,ce),ft=z[oe],ft!==0&&(Oe-=X[oe],Pe(R,Oe,ft)));while(ke<R.last_lit);Fe(R,A,q)}function J(R,q){var ce=q.dyn_tree,Oe=q.stat_desc.static_tree,ye=q.stat_desc.has_stree,ke=q.stat_desc.elems,oe,ft,vt=-1,j;for(R.heap_len=0,R.heap_max=_,oe=0;oe<ke;oe++)ce[oe*2]!==0?(R.heap[++R.heap_len]=vt=oe,R.depth[oe]=0):ce[oe*2+1]=0;for(;R.heap_len<2;)j=R.heap[++R.heap_len]=vt<2?++vt:0,ce[j*2]=1,R.depth[j]=0,R.opt_len--,ye&&(R.static_len-=Oe[j*2+1]);for(q.max_code=vt,oe=R.heap_len>>1;oe>=1;oe--)se(R,ce,oe);j=ke;do oe=R.heap[1],R.heap[1]=R.heap[R.heap_len--],se(R,ce,1),ft=R.heap[1],R.heap[--R.heap_max]=oe,R.heap[--R.heap_max]=ft,ce[j*2]=ce[oe*2]+ce[ft*2],R.depth[j]=(R.depth[oe]>=R.depth[ft]?R.depth[oe]:R.depth[ft])+1,ce[oe*2+1]=ce[ft*2+1]=j,R.heap[1]=j++,se(R,ce,1);while(R.heap_len>=2);R.heap[--R.heap_max]=R.heap[1],Ue(R,q),Ve(ce,vt,R.bl_count)}function xe(R,q,ce){var Oe,ye=-1,ke,oe=q[0*2+1],ft=0,vt=7,j=4;for(oe===0&&(vt=138,j=3),q[(ce+1)*2+1]=65535,Oe=0;Oe<=ce;Oe++)ke=oe,oe=q[(Oe+1)*2+1],!(++ft<vt&&ke===oe)&&(ft<j?R.bl_tree[ke*2]+=ft:ke!==0?(ke!==ye&&R.bl_tree[ke*2]++,R.bl_tree[k*2]++):ft<=10?R.bl_tree[D*2]++:R.bl_tree[O*2]++,ft=0,ye=ke,oe===0?(vt=138,j=3):ke===oe?(vt=6,j=3):(vt=7,j=4))}function Me(R,q,ce){var Oe,ye=-1,ke,oe=q[0*2+1],ft=0,vt=7,j=4;for(oe===0&&(vt=138,j=3),Oe=0;Oe<=ce;Oe++)if(ke=oe,oe=q[(Oe+1)*2+1],!(++ft<vt&&ke===oe)){if(ft<j)do Fe(R,ke,R.bl_tree);while(--ft!==0);else ke!==0?(ke!==ye&&(Fe(R,ke,R.bl_tree),ft--),Fe(R,k,R.bl_tree),Pe(R,ft-3,2)):ft<=10?(Fe(R,D,R.bl_tree),Pe(R,ft-3,3)):(Fe(R,O,R.bl_tree),Pe(R,ft-11,7));ft=0,ye=ke,oe===0?(vt=138,j=3):ke===oe?(vt=6,j=3):(vt=7,j=4)}}function Se(R){var q;for(xe(R,R.dyn_ltree,R.l_desc.max_code),xe(R,R.dyn_dtree,R.d_desc.max_code),J(R,R.bl_desc),q=w-1;q>=3&&R.bl_tree[ee[q]*2+1]===0;q--);return R.opt_len+=3*(q+1)+5+5+4,q}function Ze(R,q,ce,Oe){var ye;for(Pe(R,q-257,5),Pe(R,ce-1,5),Pe(R,Oe-4,4),ye=0;ye<Oe;ye++)Pe(R,R.bl_tree[ee[ye]*2+1],3);Me(R,R.dyn_ltree,q-1),Me(R,R.dyn_dtree,ce-1)}function Et(R){var q=4093624447,ce;for(ce=0;ce<=31;ce++,q>>>=1)if(q&1&&R.dyn_ltree[ce*2]!==0)return n;if(R.dyn_ltree[9*2]!==0||R.dyn_ltree[10*2]!==0||R.dyn_ltree[13*2]!==0)return r;for(ce=32;ce<m;ce++)if(R.dyn_ltree[ce*2]!==0)return r;return n}var at=!1;function _t(R){at||(Ee(),at=!0),R.l_desc=new de(R.dyn_ltree,G),R.d_desc=new de(R.dyn_dtree,Q),R.bl_desc=new de(R.bl_tree,ne),R.bi_buf=0,R.bi_valid=0,Ae(R)}function Nt(R,q,ce,Oe){Pe(R,(o<<1)+(Oe?1:0),3),Ce(R,q,ce)}function Rt(R){Pe(R,s<<1,3),Fe(R,A,Z),Te(R)}function Kt(R,q,ce,Oe){var ye,ke,oe=0;R.level>0?(R.strm.data_type===a&&(R.strm.data_type=Et(R)),J(R,R.l_desc),J(R,R.d_desc),oe=Se(R),ye=R.opt_len+3+7>>>3,ke=R.static_len+3+7>>>3,ke<=ye&&(ye=ke)):ye=ke=ce+5,ce+4<=ye&&q!==-1?Nt(R,q,ce,Oe):R.strategy===t||ke===ye?(Pe(R,(s<<1)+(Oe?1:0),3),ie(R,Z,V)):(Pe(R,(u<<1)+(Oe?1:0),3),Ze(R,R.l_desc.max_code+1,R.d_desc.max_code+1,oe+1),ie(R,R.dyn_ltree,R.dyn_dtree)),Ae(R),Oe&&B(R)}function pe(R,q,ce){return R.pending_buf[R.d_buf+R.last_lit*2]=q>>>8&255,R.pending_buf[R.d_buf+R.last_lit*2+1]=q&255,R.pending_buf[R.l_buf+R.last_lit]=ce&255,R.last_lit++,q===0?R.dyn_ltree[ce*2]++:(R.matches++,q--,R.dyn_ltree[(ue[ce]+m+1)*2]++,R.dyn_dtree[_e(q)*2]++),R.last_lit===R.lit_bufsize-1}return Pc._tr_init=_t,Pc._tr_stored_block=Nt,Pc._tr_flush_block=Kt,Pc._tr_tally=pe,Pc._tr_align=Rt,Pc}var Ux,YN;function O8(){if(YN)return Ux;YN=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return Ux=e,Ux}var qx,XN;function j8(){if(XN)return qx;XN=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,u=o+i;r^=-1;for(var c=o;c<u;c++)r=r>>>8^s[(r^a[c])&255];return r^-1}return qx=n,qx}var Hx,JN;function wk(){return JN||(JN=1,Hx={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),Hx}var QN;function eQ(){if(QN)return Ao;QN=1;var e=ac(),t=QJ(),n=O8(),r=j8(),a=wk(),i=0,o=1,s=3,u=4,c=5,f=0,h=1,m=-2,g=-3,v=-5,w=-1,_=1,x=2,S=3,E=4,A=0,k=2,D=8,O=9,N=15,z=8,H=29,ee=256,P=ee+1+H,Z=30,V=19,fe=2*P+1,ue=15,Y=3,X=258,ae=X+Y+1,G=32,Q=42,ne=69,de=73,_e=91,ve=103,Pe=113,Fe=666,Ie=1,Te=2,Ue=3,Ve=4,Ee=3;function Ae(j,$e){return j.msg=a[$e],$e}function B(j){return(j<<1)-(j>4?9:0)}function Ce(j){for(var $e=j.length;--$e>=0;)j[$e]=0}function Re(j){var $e=j.state,st=$e.pending;st>j.avail_out&&(st=j.avail_out),st!==0&&(e.arraySet(j.output,$e.pending_buf,$e.pending_out,st,j.next_out),j.next_out+=st,$e.pending_out+=st,j.total_out+=st,j.avail_out-=st,$e.pending-=st,$e.pending===0&&($e.pending_out=0))}function se(j,$e){t._tr_flush_block(j,j.block_start>=0?j.block_start:-1,j.strstart-j.block_start,$e),j.block_start=j.strstart,Re(j.strm)}function ie(j,$e){j.pending_buf[j.pending++]=$e}function J(j,$e){j.pending_buf[j.pending++]=$e>>>8&255,j.pending_buf[j.pending++]=$e&255}function xe(j,$e,st,ge){var De=j.avail_in;return De>ge&&(De=ge),De===0?0:(j.avail_in-=De,e.arraySet($e,j.input,j.next_in,De,st),j.state.wrap===1?j.adler=n(j.adler,$e,De,st):j.state.wrap===2&&(j.adler=r(j.adler,$e,De,st)),j.next_in+=De,j.total_in+=De,De)}function Me(j,$e){var st=j.max_chain_length,ge=j.strstart,De,Je,It=j.prev_length,me=j.nice_match,U=j.strstart>j.w_size-ae?j.strstart-(j.w_size-ae):0,$=j.window,W=j.w_mask,he=j.prev,Ne=j.strstart+X,He=$[ge+It-1],gt=$[ge+It];j.prev_length>=j.good_match&&(st>>=2),me>j.lookahead&&(me=j.lookahead);do if(De=$e,!($[De+It]!==gt||$[De+It-1]!==He||$[De]!==$[ge]||$[++De]!==$[ge+1])){ge+=2,De++;do;while($[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&$[++ge]===$[++De]&&ge<Ne);if(Je=X-(Ne-ge),ge=Ne-X,Je>It){if(j.match_start=$e,It=Je,Je>=me)break;He=$[ge+It-1],gt=$[ge+It]}}while(($e=he[$e&W])>U&&--st!==0);return It<=j.lookahead?It:j.lookahead}function Se(j){var $e=j.w_size,st,ge,De,Je,It;do{if(Je=j.window_size-j.lookahead-j.strstart,j.strstart>=$e+($e-ae)){e.arraySet(j.window,j.window,$e,$e,0),j.match_start-=$e,j.strstart-=$e,j.block_start-=$e,ge=j.hash_size,st=ge;do De=j.head[--st],j.head[st]=De>=$e?De-$e:0;while(--ge);ge=$e,st=ge;do De=j.prev[--st],j.prev[st]=De>=$e?De-$e:0;while(--ge);Je+=$e}if(j.strm.avail_in===0)break;if(ge=xe(j.strm,j.window,j.strstart+j.lookahead,Je),j.lookahead+=ge,j.lookahead+j.insert>=Y)for(It=j.strstart-j.insert,j.ins_h=j.window[It],j.ins_h=(j.ins_h<<j.hash_shift^j.window[It+1])&j.hash_mask;j.insert&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[It+Y-1])&j.hash_mask,j.prev[It&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=It,It++,j.insert--,!(j.lookahead+j.insert<Y)););}while(j.lookahead<ae&&j.strm.avail_in!==0)}function Ze(j,$e){var st=65535;for(st>j.pending_buf_size-5&&(st=j.pending_buf_size-5);;){if(j.lookahead<=1){if(Se(j),j.lookahead===0&&$e===i)return Ie;if(j.lookahead===0)break}j.strstart+=j.lookahead,j.lookahead=0;var ge=j.block_start+st;if((j.strstart===0||j.strstart>=ge)&&(j.lookahead=j.strstart-ge,j.strstart=ge,se(j,!1),j.strm.avail_out===0)||j.strstart-j.block_start>=j.w_size-ae&&(se(j,!1),j.strm.avail_out===0))return Ie}return j.insert=0,$e===u?(se(j,!0),j.strm.avail_out===0?Ue:Ve):(j.strstart>j.block_start&&(se(j,!1),j.strm.avail_out===0),Ie)}function Et(j,$e){for(var st,ge;;){if(j.lookahead<ae){if(Se(j),j.lookahead<ae&&$e===i)return Ie;if(j.lookahead===0)break}if(st=0,j.lookahead>=Y&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+Y-1])&j.hash_mask,st=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),st!==0&&j.strstart-st<=j.w_size-ae&&(j.match_length=Me(j,st)),j.match_length>=Y)if(ge=t._tr_tally(j,j.strstart-j.match_start,j.match_length-Y),j.lookahead-=j.match_length,j.match_length<=j.max_lazy_match&&j.lookahead>=Y){j.match_length--;do j.strstart++,j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+Y-1])&j.hash_mask,st=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart;while(--j.match_length!==0);j.strstart++}else j.strstart+=j.match_length,j.match_length=0,j.ins_h=j.window[j.strstart],j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+1])&j.hash_mask;else ge=t._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++;if(ge&&(se(j,!1),j.strm.avail_out===0))return Ie}return j.insert=j.strstart<Y-1?j.strstart:Y-1,$e===u?(se(j,!0),j.strm.avail_out===0?Ue:Ve):j.last_lit&&(se(j,!1),j.strm.avail_out===0)?Ie:Te}function at(j,$e){for(var st,ge,De;;){if(j.lookahead<ae){if(Se(j),j.lookahead<ae&&$e===i)return Ie;if(j.lookahead===0)break}if(st=0,j.lookahead>=Y&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+Y-1])&j.hash_mask,st=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),j.prev_length=j.match_length,j.prev_match=j.match_start,j.match_length=Y-1,st!==0&&j.prev_length<j.max_lazy_match&&j.strstart-st<=j.w_size-ae&&(j.match_length=Me(j,st),j.match_length<=5&&(j.strategy===_||j.match_length===Y&&j.strstart-j.match_start>4096)&&(j.match_length=Y-1)),j.prev_length>=Y&&j.match_length<=j.prev_length){De=j.strstart+j.lookahead-Y,ge=t._tr_tally(j,j.strstart-1-j.prev_match,j.prev_length-Y),j.lookahead-=j.prev_length-1,j.prev_length-=2;do++j.strstart<=De&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+Y-1])&j.hash_mask,st=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart);while(--j.prev_length!==0);if(j.match_available=0,j.match_length=Y-1,j.strstart++,ge&&(se(j,!1),j.strm.avail_out===0))return Ie}else if(j.match_available){if(ge=t._tr_tally(j,0,j.window[j.strstart-1]),ge&&se(j,!1),j.strstart++,j.lookahead--,j.strm.avail_out===0)return Ie}else j.match_available=1,j.strstart++,j.lookahead--}return j.match_available&&(ge=t._tr_tally(j,0,j.window[j.strstart-1]),j.match_available=0),j.insert=j.strstart<Y-1?j.strstart:Y-1,$e===u?(se(j,!0),j.strm.avail_out===0?Ue:Ve):j.last_lit&&(se(j,!1),j.strm.avail_out===0)?Ie:Te}function _t(j,$e){for(var st,ge,De,Je,It=j.window;;){if(j.lookahead<=X){if(Se(j),j.lookahead<=X&&$e===i)return Ie;if(j.lookahead===0)break}if(j.match_length=0,j.lookahead>=Y&&j.strstart>0&&(De=j.strstart-1,ge=It[De],ge===It[++De]&&ge===It[++De]&&ge===It[++De])){Je=j.strstart+X;do;while(ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&ge===It[++De]&&De<Je);j.match_length=X-(Je-De),j.match_length>j.lookahead&&(j.match_length=j.lookahead)}if(j.match_length>=Y?(st=t._tr_tally(j,1,j.match_length-Y),j.lookahead-=j.match_length,j.strstart+=j.match_length,j.match_length=0):(st=t._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++),st&&(se(j,!1),j.strm.avail_out===0))return Ie}return j.insert=0,$e===u?(se(j,!0),j.strm.avail_out===0?Ue:Ve):j.last_lit&&(se(j,!1),j.strm.avail_out===0)?Ie:Te}function Nt(j,$e){for(var st;;){if(j.lookahead===0&&(Se(j),j.lookahead===0)){if($e===i)return Ie;break}if(j.match_length=0,st=t._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++,st&&(se(j,!1),j.strm.avail_out===0))return Ie}return j.insert=0,$e===u?(se(j,!0),j.strm.avail_out===0?Ue:Ve):j.last_lit&&(se(j,!1),j.strm.avail_out===0)?Ie:Te}function Rt(j,$e,st,ge,De){this.good_length=j,this.max_lazy=$e,this.nice_length=st,this.max_chain=ge,this.func=De}var Kt;Kt=[new Rt(0,0,0,0,Ze),new Rt(4,4,8,4,Et),new Rt(4,5,16,8,Et),new Rt(4,6,32,32,Et),new Rt(4,4,16,16,at),new Rt(8,16,32,32,at),new Rt(8,16,128,128,at),new Rt(8,32,128,256,at),new Rt(32,128,258,1024,at),new Rt(32,258,258,4096,at)];function pe(j){j.window_size=2*j.w_size,Ce(j.head),j.max_lazy_match=Kt[j.level].max_lazy,j.good_match=Kt[j.level].good_length,j.nice_match=Kt[j.level].nice_length,j.max_chain_length=Kt[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=Y-1,j.match_available=0,j.ins_h=0}function R(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(fe*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*V+1)*2),Ce(this.dyn_ltree),Ce(this.dyn_dtree),Ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ue+1),this.heap=new e.Buf16(2*P+1),Ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*P+1),Ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(j){var $e;return!j||!j.state?Ae(j,m):(j.total_in=j.total_out=0,j.data_type=k,$e=j.state,$e.pending=0,$e.pending_out=0,$e.wrap<0&&($e.wrap=-$e.wrap),$e.status=$e.wrap?Q:Pe,j.adler=$e.wrap===2?0:1,$e.last_flush=i,t._tr_init($e),f)}function ce(j){var $e=q(j);return $e===f&&pe(j.state),$e}function Oe(j,$e){return!j||!j.state||j.state.wrap!==2?m:(j.state.gzhead=$e,f)}function ye(j,$e,st,ge,De,Je){if(!j)return m;var It=1;if($e===w&&($e=6),ge<0?(It=0,ge=-ge):ge>15&&(It=2,ge-=16),De<1||De>O||st!==D||ge<8||ge>15||$e<0||$e>9||Je<0||Je>E)return Ae(j,m);ge===8&&(ge=9);var me=new R;return j.state=me,me.strm=j,me.wrap=It,me.gzhead=null,me.w_bits=ge,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=De+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+Y-1)/Y),me.window=new e.Buf8(me.w_size*2),me.head=new e.Buf16(me.hash_size),me.prev=new e.Buf16(me.w_size),me.lit_bufsize=1<<De+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new e.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=$e,me.strategy=Je,me.method=st,ce(j)}function ke(j,$e){return ye(j,$e,D,N,z,A)}function oe(j,$e){var st,ge,De,Je;if(!j||!j.state||$e>c||$e<0)return j?Ae(j,m):m;if(ge=j.state,!j.output||!j.input&&j.avail_in!==0||ge.status===Fe&&$e!==u)return Ae(j,j.avail_out===0?v:m);if(ge.strm=j,st=ge.last_flush,ge.last_flush=$e,ge.status===Q)if(ge.wrap===2)j.adler=0,ie(ge,31),ie(ge,139),ie(ge,8),ge.gzhead?(ie(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),ie(ge,ge.gzhead.time&255),ie(ge,ge.gzhead.time>>8&255),ie(ge,ge.gzhead.time>>16&255),ie(ge,ge.gzhead.time>>24&255),ie(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),ie(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(ie(ge,ge.gzhead.extra.length&255),ie(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(j.adler=r(j.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=ne):(ie(ge,0),ie(ge,0),ie(ge,0),ie(ge,0),ie(ge,0),ie(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),ie(ge,Ee),ge.status=Pe);else{var It=D+(ge.w_bits-8<<4)<<8,me=-1;ge.strategy>=x||ge.level<2?me=0:ge.level<6?me=1:ge.level===6?me=2:me=3,It|=me<<6,ge.strstart!==0&&(It|=G),It+=31-It%31,ge.status=Pe,J(ge,It),ge.strstart!==0&&(J(ge,j.adler>>>16),J(ge,j.adler&65535)),j.adler=1}if(ge.status===ne)if(ge.gzhead.extra){for(De=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(j.adler=r(j.adler,ge.pending_buf,ge.pending-De,De)),Re(j),De=ge.pending,ge.pending===ge.pending_buf_size));)ie(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>De&&(j.adler=r(j.adler,ge.pending_buf,ge.pending-De,De)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=de)}else ge.status=de;if(ge.status===de)if(ge.gzhead.name){De=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(j.adler=r(j.adler,ge.pending_buf,ge.pending-De,De)),Re(j),De=ge.pending,ge.pending===ge.pending_buf_size)){Je=1;break}ge.gzindex<ge.gzhead.name.length?Je=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Je=0,ie(ge,Je)}while(Je!==0);ge.gzhead.hcrc&&ge.pending>De&&(j.adler=r(j.adler,ge.pending_buf,ge.pending-De,De)),Je===0&&(ge.gzindex=0,ge.status=_e)}else ge.status=_e;if(ge.status===_e)if(ge.gzhead.comment){De=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(j.adler=r(j.adler,ge.pending_buf,ge.pending-De,De)),Re(j),De=ge.pending,ge.pending===ge.pending_buf_size)){Je=1;break}ge.gzindex<ge.gzhead.comment.length?Je=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Je=0,ie(ge,Je)}while(Je!==0);ge.gzhead.hcrc&&ge.pending>De&&(j.adler=r(j.adler,ge.pending_buf,ge.pending-De,De)),Je===0&&(ge.status=ve)}else ge.status=ve;if(ge.status===ve&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Re(j),ge.pending+2<=ge.pending_buf_size&&(ie(ge,j.adler&255),ie(ge,j.adler>>8&255),j.adler=0,ge.status=Pe)):ge.status=Pe),ge.pending!==0){if(Re(j),j.avail_out===0)return ge.last_flush=-1,f}else if(j.avail_in===0&&B($e)<=B(st)&&$e!==u)return Ae(j,v);if(ge.status===Fe&&j.avail_in!==0)return Ae(j,v);if(j.avail_in!==0||ge.lookahead!==0||$e!==i&&ge.status!==Fe){var U=ge.strategy===x?Nt(ge,$e):ge.strategy===S?_t(ge,$e):Kt[ge.level].func(ge,$e);if((U===Ue||U===Ve)&&(ge.status=Fe),U===Ie||U===Ue)return j.avail_out===0&&(ge.last_flush=-1),f;if(U===Te&&($e===o?t._tr_align(ge):$e!==c&&(t._tr_stored_block(ge,0,0,!1),$e===s&&(Ce(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Re(j),j.avail_out===0))return ge.last_flush=-1,f}return $e!==u?f:ge.wrap<=0?h:(ge.wrap===2?(ie(ge,j.adler&255),ie(ge,j.adler>>8&255),ie(ge,j.adler>>16&255),ie(ge,j.adler>>24&255),ie(ge,j.total_in&255),ie(ge,j.total_in>>8&255),ie(ge,j.total_in>>16&255),ie(ge,j.total_in>>24&255)):(J(ge,j.adler>>>16),J(ge,j.adler&65535)),Re(j),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?f:h)}function ft(j){var $e;return!j||!j.state?m:($e=j.state.status,$e!==Q&&$e!==ne&&$e!==de&&$e!==_e&&$e!==ve&&$e!==Pe&&$e!==Fe?Ae(j,m):(j.state=null,$e===Pe?Ae(j,g):f))}function vt(j,$e){var st=$e.length,ge,De,Je,It,me,U,$,W;if(!j||!j.state||(ge=j.state,It=ge.wrap,It===2||It===1&&ge.status!==Q||ge.lookahead))return m;for(It===1&&(j.adler=n(j.adler,$e,st,0)),ge.wrap=0,st>=ge.w_size&&(It===0&&(Ce(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),W=new e.Buf8(ge.w_size),e.arraySet(W,$e,st-ge.w_size,ge.w_size,0),$e=W,st=ge.w_size),me=j.avail_in,U=j.next_in,$=j.input,j.avail_in=st,j.next_in=0,j.input=$e,Se(ge);ge.lookahead>=Y;){De=ge.strstart,Je=ge.lookahead-(Y-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[De+Y-1])&ge.hash_mask,ge.prev[De&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=De,De++;while(--Je);ge.strstart=De,ge.lookahead=Y-1,Se(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=Y-1,ge.match_available=0,j.next_in=U,j.input=$,j.avail_in=me,ge.wrap=It,f}return Ao.deflateInit=ke,Ao.deflateInit2=ye,Ao.deflateReset=ce,Ao.deflateResetKeep=q,Ao.deflateSetHeader=Oe,Ao.deflate=oe,Ao.deflateEnd=ft,Ao.deflateSetDictionary=vt,Ao.deflateInfo="pako deflate (from Nodeca project)",Ao}var Fc={},eI;function D8(){if(eI)return Fc;eI=1;var e=ac(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Fc.string2buf=function(o){var s,u,c,f,h,m=o.length,g=0;for(f=0;f<m;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(s=new e.Buf8(g),h=0,f=0;h<g;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),u<128?s[h++]=u:u<2048?(s[h++]=192|u>>>6,s[h++]=128|u&63):u<65536?(s[h++]=224|u>>>12,s[h++]=128|u>>>6&63,s[h++]=128|u&63):(s[h++]=240|u>>>18,s[h++]=128|u>>>12&63,s[h++]=128|u>>>6&63,s[h++]=128|u&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var u="",c=0;c<s;c++)u+=String.fromCharCode(o[c]);return u}return Fc.buf2binstring=function(o){return i(o,o.length)},Fc.binstring2buf=function(o){for(var s=new e.Buf8(o.length),u=0,c=s.length;u<c;u++)s[u]=o.charCodeAt(u);return s},Fc.buf2string=function(o,s){var u,c,f,h,m=s||o.length,g=new Array(m*2);for(c=0,u=0;u<m;){if(f=o[u++],f<128){g[c++]=f;continue}if(h=r[f],h>4){g[c++]=65533,u+=h-1;continue}for(f&=h===2?31:h===3?15:7;h>1&&u<m;)f=f<<6|o[u++]&63,h--;if(h>1){g[c++]=65533;continue}f<65536?g[c++]=f:(f-=65536,g[c++]=55296|f>>10&1023,g[c++]=56320|f&1023)}return i(g,c)},Fc.utf8border=function(o,s){var u;for(s=s||o.length,s>o.length&&(s=o.length),u=s-1;u>=0&&(o[u]&192)===128;)u--;return u<0||u===0?s:u+r[o[u]]>s?u:s},Fc}var Vx,tI;function M8(){if(tI)return Vx;tI=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return Vx=e,Vx}var nI;function tQ(){if(nI)return yf;nI=1;var e=eQ(),t=ac(),n=D8(),r=wk(),a=M8(),i=Object.prototype.toString,o=0,s=4,u=0,c=1,f=2,h=-1,m=0,g=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var A=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(A!==u)throw new Error(r[A]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,A=e.deflateSetDictionary(this.strm,k),A!==u)throw new Error(r[A]);this._dict_set=!0}}v.prototype.push=function(S,E){var A=this.strm,k=this.options.chunkSize,D,O;if(this.ended)return!1;O=E===~~E?E:E===!0?s:o,typeof S=="string"?A.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?A.input=new Uint8Array(S):A.input=S,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new t.Buf8(k),A.next_out=0,A.avail_out=k),D=e.deflate(A,O),D!==c&&D!==u)return this.onEnd(D),this.ended=!0,!1;(A.avail_out===0||A.avail_in===0&&(O===s||O===f))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(A.output,A.next_out))):this.onData(t.shrinkBuf(A.output,A.next_out)))}while((A.avail_in>0||A.avail_out===0)&&D!==c);return O===s?(D=e.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===u):(O===f&&(this.onEnd(u),A.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function w(S,E){var A=new v(E);if(A.push(S,!0),A.err)throw A.msg||r[A.err];return A.result}function _(S,E){return E=E||{},E.raw=!0,w(S,E)}function x(S,E){return E=E||{},E.gzip=!0,w(S,E)}return yf.Deflate=v,yf.deflate=w,yf.deflateRaw=_,yf.gzip=x,yf}var bf={},lo={},Gx,rI;function nQ(){if(rI)return Gx;rI=1;var e=30,t=12;return Gx=function(r,a){var i,o,s,u,c,f,h,m,g,v,w,_,x,S,E,A,k,D,O,N,z,H,ee,P,Z;i=r.state,o=r.next_in,P=r.input,s=o+(r.avail_in-5),u=r.next_out,Z=r.output,c=u-(a-r.avail_out),f=u+(r.avail_out-257),h=i.dmax,m=i.wsize,g=i.whave,v=i.wnext,w=i.window,_=i.hold,x=i.bits,S=i.lencode,E=i.distcode,A=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{x<15&&(_+=P[o++]<<x,x+=8,_+=P[o++]<<x,x+=8),D=S[_&A];t:for(;;){if(O=D>>>24,_>>>=O,x-=O,O=D>>>16&255,O===0)Z[u++]=D&65535;else if(O&16){N=D&65535,O&=15,O&&(x<O&&(_+=P[o++]<<x,x+=8),N+=_&(1<<O)-1,_>>>=O,x-=O),x<15&&(_+=P[o++]<<x,x+=8,_+=P[o++]<<x,x+=8),D=E[_&k];n:for(;;){if(O=D>>>24,_>>>=O,x-=O,O=D>>>16&255,O&16){if(z=D&65535,O&=15,x<O&&(_+=P[o++]<<x,x+=8,x<O&&(_+=P[o++]<<x,x+=8)),z+=_&(1<<O)-1,z>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=O,x-=O,O=u-c,z>O){if(O=z-O,O>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(H=0,ee=w,v===0){if(H+=m-O,O<N){N-=O;do Z[u++]=w[H++];while(--O);H=u-z,ee=Z}}else if(v<O){if(H+=m+v-O,O-=v,O<N){N-=O;do Z[u++]=w[H++];while(--O);if(H=0,v<N){O=v,N-=O;do Z[u++]=w[H++];while(--O);H=u-z,ee=Z}}}else if(H+=v-O,O<N){N-=O;do Z[u++]=w[H++];while(--O);H=u-z,ee=Z}for(;N>2;)Z[u++]=ee[H++],Z[u++]=ee[H++],Z[u++]=ee[H++],N-=3;N&&(Z[u++]=ee[H++],N>1&&(Z[u++]=ee[H++]))}else{H=u-z;do Z[u++]=Z[H++],Z[u++]=Z[H++],Z[u++]=Z[H++],N-=3;while(N>2);N&&(Z[u++]=Z[H++],N>1&&(Z[u++]=Z[H++]))}}else if((O&64)===0){D=E[(D&65535)+(_&(1<<O)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((O&64)===0){D=S[(D&65535)+(_&(1<<O)-1)];continue t}else if(O&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&u<f);N=x>>3,o-=N,x-=N<<3,_&=(1<<x)-1,r.next_in=o,r.next_out=u,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=u<f?257+(f-u):257-(u-f),i.hold=_,i.bits=x},Gx}var Wx,aI;function rQ(){if(aI)return Wx;aI=1;var e=ac(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return Wx=function(m,g,v,w,_,x,S,E){var A=E.bits,k=0,D=0,O=0,N=0,z=0,H=0,ee=0,P=0,Z=0,V=0,fe,ue,Y,X,ae,G=null,Q=0,ne,de=new e.Buf16(t+1),_e=new e.Buf16(t+1),ve=null,Pe=0,Fe,Ie,Te;for(k=0;k<=t;k++)de[k]=0;for(D=0;D<w;D++)de[g[v+D]]++;for(z=A,N=t;N>=1&&de[N]===0;N--);if(z>N&&(z=N),N===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,E.bits=1,0;for(O=1;O<N&&de[O]===0;O++);for(z<O&&(z=O),P=1,k=1;k<=t;k++)if(P<<=1,P-=de[k],P<0)return-1;if(P>0&&(m===a||N!==1))return-1;for(_e[1]=0,k=1;k<t;k++)_e[k+1]=_e[k]+de[k];for(D=0;D<w;D++)g[v+D]!==0&&(S[_e[g[v+D]]++]=D);if(m===a?(G=ve=S,ne=19):m===i?(G=s,Q-=257,ve=u,Pe-=257,ne=256):(G=c,ve=f,ne=-1),V=0,D=0,k=O,ae=x,H=z,ee=0,Y=-1,Z=1<<z,X=Z-1,m===i&&Z>n||m===o&&Z>r)return 1;for(;;){Fe=k-ee,S[D]<ne?(Ie=0,Te=S[D]):S[D]>ne?(Ie=ve[Pe+S[D]],Te=G[Q+S[D]]):(Ie=96,Te=0),fe=1<<k-ee,ue=1<<H,O=ue;do ue-=fe,_[ae+(V>>ee)+ue]=Fe<<24|Ie<<16|Te|0;while(ue!==0);for(fe=1<<k-1;V&fe;)fe>>=1;if(fe!==0?(V&=fe-1,V+=fe):V=0,D++,--de[k]===0){if(k===N)break;k=g[v+S[D]]}if(k>z&&(V&X)!==Y){for(ee===0&&(ee=z),ae+=O,H=k-ee,P=1<<H;H+ee<N&&(P-=de[H+ee],!(P<=0));)H++,P<<=1;if(Z+=1<<H,m===i&&Z>n||m===o&&Z>r)return 1;Y=V&X,_[Y]=z<<24|H<<16|ae-x|0}}return V!==0&&(_[ae+V]=k-ee<<24|64<<16|0),E.bits=z,0},Wx}var iI;function aQ(){if(iI)return lo;iI=1;var e=ac(),t=O8(),n=j8(),r=nQ(),a=rQ(),i=0,o=1,s=2,u=4,c=5,f=6,h=0,m=1,g=2,v=-2,w=-3,_=-4,x=-5,S=8,E=1,A=2,k=3,D=4,O=5,N=6,z=7,H=8,ee=9,P=10,Z=11,V=12,fe=13,ue=14,Y=15,X=16,ae=17,G=18,Q=19,ne=20,de=21,_e=22,ve=23,Pe=24,Fe=25,Ie=26,Te=27,Ue=28,Ve=29,Ee=30,Ae=31,B=32,Ce=852,Re=592,se=15,ie=se;function J(ye){return(ye>>>24&255)+(ye>>>8&65280)+((ye&65280)<<8)+((ye&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Me(ye){var ke;return!ye||!ye.state?v:(ke=ye.state,ye.total_in=ye.total_out=ke.total=0,ye.msg="",ke.wrap&&(ye.adler=ke.wrap&1),ke.mode=E,ke.last=0,ke.havedict=0,ke.dmax=32768,ke.head=null,ke.hold=0,ke.bits=0,ke.lencode=ke.lendyn=new e.Buf32(Ce),ke.distcode=ke.distdyn=new e.Buf32(Re),ke.sane=1,ke.back=-1,h)}function Se(ye){var ke;return!ye||!ye.state?v:(ke=ye.state,ke.wsize=0,ke.whave=0,ke.wnext=0,Me(ye))}function Ze(ye,ke){var oe,ft;return!ye||!ye.state||(ft=ye.state,ke<0?(oe=0,ke=-ke):(oe=(ke>>4)+1,ke<48&&(ke&=15)),ke&&(ke<8||ke>15))?v:(ft.window!==null&&ft.wbits!==ke&&(ft.window=null),ft.wrap=oe,ft.wbits=ke,Se(ye))}function Et(ye,ke){var oe,ft;return ye?(ft=new xe,ye.state=ft,ft.window=null,oe=Ze(ye,ke),oe!==h&&(ye.state=null),oe):v}function at(ye){return Et(ye,ie)}var _t=!0,Nt,Rt;function Kt(ye){if(_t){var ke;for(Nt=new e.Buf32(512),Rt=new e.Buf32(32),ke=0;ke<144;)ye.lens[ke++]=8;for(;ke<256;)ye.lens[ke++]=9;for(;ke<280;)ye.lens[ke++]=7;for(;ke<288;)ye.lens[ke++]=8;for(a(o,ye.lens,0,288,Nt,0,ye.work,{bits:9}),ke=0;ke<32;)ye.lens[ke++]=5;a(s,ye.lens,0,32,Rt,0,ye.work,{bits:5}),_t=!1}ye.lencode=Nt,ye.lenbits=9,ye.distcode=Rt,ye.distbits=5}function pe(ye,ke,oe,ft){var vt,j=ye.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new e.Buf8(j.wsize)),ft>=j.wsize?(e.arraySet(j.window,ke,oe-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(vt=j.wsize-j.wnext,vt>ft&&(vt=ft),e.arraySet(j.window,ke,oe-ft,vt,j.wnext),ft-=vt,ft?(e.arraySet(j.window,ke,oe-ft,ft,0),j.wnext=ft,j.whave=j.wsize):(j.wnext+=vt,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=vt))),0}function R(ye,ke){var oe,ft,vt,j,$e,st,ge,De,Je,It,me,U,$,W,he=0,Ne,He,gt,Gt,ht,Ct,Ot,Zt,En=new e.Buf8(4),Bn,fr,hr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ye||!ye.state||!ye.output||!ye.input&&ye.avail_in!==0)return v;oe=ye.state,oe.mode===V&&(oe.mode=fe),$e=ye.next_out,vt=ye.output,ge=ye.avail_out,j=ye.next_in,ft=ye.input,st=ye.avail_in,De=oe.hold,Je=oe.bits,It=st,me=ge,Zt=h;e:for(;;)switch(oe.mode){case E:if(oe.wrap===0){oe.mode=fe;break}for(;Je<16;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if(oe.wrap&2&&De===35615){oe.check=0,En[0]=De&255,En[1]=De>>>8&255,oe.check=n(oe.check,En,2,0),De=0,Je=0,oe.mode=A;break}if(oe.flags=0,oe.head&&(oe.head.done=!1),!(oe.wrap&1)||(((De&255)<<8)+(De>>8))%31){ye.msg="incorrect header check",oe.mode=Ee;break}if((De&15)!==S){ye.msg="unknown compression method",oe.mode=Ee;break}if(De>>>=4,Je-=4,Ot=(De&15)+8,oe.wbits===0)oe.wbits=Ot;else if(Ot>oe.wbits){ye.msg="invalid window size",oe.mode=Ee;break}oe.dmax=1<<Ot,ye.adler=oe.check=1,oe.mode=De&512?P:V,De=0,Je=0;break;case A:for(;Je<16;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if(oe.flags=De,(oe.flags&255)!==S){ye.msg="unknown compression method",oe.mode=Ee;break}if(oe.flags&57344){ye.msg="unknown header flags set",oe.mode=Ee;break}oe.head&&(oe.head.text=De>>8&1),oe.flags&512&&(En[0]=De&255,En[1]=De>>>8&255,oe.check=n(oe.check,En,2,0)),De=0,Je=0,oe.mode=k;case k:for(;Je<32;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}oe.head&&(oe.head.time=De),oe.flags&512&&(En[0]=De&255,En[1]=De>>>8&255,En[2]=De>>>16&255,En[3]=De>>>24&255,oe.check=n(oe.check,En,4,0)),De=0,Je=0,oe.mode=D;case D:for(;Je<16;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}oe.head&&(oe.head.xflags=De&255,oe.head.os=De>>8),oe.flags&512&&(En[0]=De&255,En[1]=De>>>8&255,oe.check=n(oe.check,En,2,0)),De=0,Je=0,oe.mode=O;case O:if(oe.flags&1024){for(;Je<16;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}oe.length=De,oe.head&&(oe.head.extra_len=De),oe.flags&512&&(En[0]=De&255,En[1]=De>>>8&255,oe.check=n(oe.check,En,2,0)),De=0,Je=0}else oe.head&&(oe.head.extra=null);oe.mode=N;case N:if(oe.flags&1024&&(U=oe.length,U>st&&(U=st),U&&(oe.head&&(Ot=oe.head.extra_len-oe.length,oe.head.extra||(oe.head.extra=new Array(oe.head.extra_len)),e.arraySet(oe.head.extra,ft,j,U,Ot)),oe.flags&512&&(oe.check=n(oe.check,ft,U,j)),st-=U,j+=U,oe.length-=U),oe.length))break e;oe.length=0,oe.mode=z;case z:if(oe.flags&2048){if(st===0)break e;U=0;do Ot=ft[j+U++],oe.head&&Ot&&oe.length<65536&&(oe.head.name+=String.fromCharCode(Ot));while(Ot&&U<st);if(oe.flags&512&&(oe.check=n(oe.check,ft,U,j)),st-=U,j+=U,Ot)break e}else oe.head&&(oe.head.name=null);oe.length=0,oe.mode=H;case H:if(oe.flags&4096){if(st===0)break e;U=0;do Ot=ft[j+U++],oe.head&&Ot&&oe.length<65536&&(oe.head.comment+=String.fromCharCode(Ot));while(Ot&&U<st);if(oe.flags&512&&(oe.check=n(oe.check,ft,U,j)),st-=U,j+=U,Ot)break e}else oe.head&&(oe.head.comment=null);oe.mode=ee;case ee:if(oe.flags&512){for(;Je<16;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if(De!==(oe.check&65535)){ye.msg="header crc mismatch",oe.mode=Ee;break}De=0,Je=0}oe.head&&(oe.head.hcrc=oe.flags>>9&1,oe.head.done=!0),ye.adler=oe.check=0,oe.mode=V;break;case P:for(;Je<32;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}ye.adler=oe.check=J(De),De=0,Je=0,oe.mode=Z;case Z:if(oe.havedict===0)return ye.next_out=$e,ye.avail_out=ge,ye.next_in=j,ye.avail_in=st,oe.hold=De,oe.bits=Je,g;ye.adler=oe.check=1,oe.mode=V;case V:if(ke===c||ke===f)break e;case fe:if(oe.last){De>>>=Je&7,Je-=Je&7,oe.mode=Te;break}for(;Je<3;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}switch(oe.last=De&1,De>>>=1,Je-=1,De&3){case 0:oe.mode=ue;break;case 1:if(Kt(oe),oe.mode=ne,ke===f){De>>>=2,Je-=2;break e}break;case 2:oe.mode=ae;break;case 3:ye.msg="invalid block type",oe.mode=Ee}De>>>=2,Je-=2;break;case ue:for(De>>>=Je&7,Je-=Je&7;Je<32;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if((De&65535)!==(De>>>16^65535)){ye.msg="invalid stored block lengths",oe.mode=Ee;break}if(oe.length=De&65535,De=0,Je=0,oe.mode=Y,ke===f)break e;case Y:oe.mode=X;case X:if(U=oe.length,U){if(U>st&&(U=st),U>ge&&(U=ge),U===0)break e;e.arraySet(vt,ft,j,U,$e),st-=U,j+=U,ge-=U,$e+=U,oe.length-=U;break}oe.mode=V;break;case ae:for(;Je<14;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if(oe.nlen=(De&31)+257,De>>>=5,Je-=5,oe.ndist=(De&31)+1,De>>>=5,Je-=5,oe.ncode=(De&15)+4,De>>>=4,Je-=4,oe.nlen>286||oe.ndist>30){ye.msg="too many length or distance symbols",oe.mode=Ee;break}oe.have=0,oe.mode=G;case G:for(;oe.have<oe.ncode;){for(;Je<3;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}oe.lens[hr[oe.have++]]=De&7,De>>>=3,Je-=3}for(;oe.have<19;)oe.lens[hr[oe.have++]]=0;if(oe.lencode=oe.lendyn,oe.lenbits=7,Bn={bits:oe.lenbits},Zt=a(i,oe.lens,0,19,oe.lencode,0,oe.work,Bn),oe.lenbits=Bn.bits,Zt){ye.msg="invalid code lengths set",oe.mode=Ee;break}oe.have=0,oe.mode=Q;case Q:for(;oe.have<oe.nlen+oe.ndist;){for(;he=oe.lencode[De&(1<<oe.lenbits)-1],Ne=he>>>24,He=he>>>16&255,gt=he&65535,!(Ne<=Je);){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if(gt<16)De>>>=Ne,Je-=Ne,oe.lens[oe.have++]=gt;else{if(gt===16){for(fr=Ne+2;Je<fr;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if(De>>>=Ne,Je-=Ne,oe.have===0){ye.msg="invalid bit length repeat",oe.mode=Ee;break}Ot=oe.lens[oe.have-1],U=3+(De&3),De>>>=2,Je-=2}else if(gt===17){for(fr=Ne+3;Je<fr;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}De>>>=Ne,Je-=Ne,Ot=0,U=3+(De&7),De>>>=3,Je-=3}else{for(fr=Ne+7;Je<fr;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}De>>>=Ne,Je-=Ne,Ot=0,U=11+(De&127),De>>>=7,Je-=7}if(oe.have+U>oe.nlen+oe.ndist){ye.msg="invalid bit length repeat",oe.mode=Ee;break}for(;U--;)oe.lens[oe.have++]=Ot}}if(oe.mode===Ee)break;if(oe.lens[256]===0){ye.msg="invalid code -- missing end-of-block",oe.mode=Ee;break}if(oe.lenbits=9,Bn={bits:oe.lenbits},Zt=a(o,oe.lens,0,oe.nlen,oe.lencode,0,oe.work,Bn),oe.lenbits=Bn.bits,Zt){ye.msg="invalid literal/lengths set",oe.mode=Ee;break}if(oe.distbits=6,oe.distcode=oe.distdyn,Bn={bits:oe.distbits},Zt=a(s,oe.lens,oe.nlen,oe.ndist,oe.distcode,0,oe.work,Bn),oe.distbits=Bn.bits,Zt){ye.msg="invalid distances set",oe.mode=Ee;break}if(oe.mode=ne,ke===f)break e;case ne:oe.mode=de;case de:if(st>=6&&ge>=258){ye.next_out=$e,ye.avail_out=ge,ye.next_in=j,ye.avail_in=st,oe.hold=De,oe.bits=Je,r(ye,me),$e=ye.next_out,vt=ye.output,ge=ye.avail_out,j=ye.next_in,ft=ye.input,st=ye.avail_in,De=oe.hold,Je=oe.bits,oe.mode===V&&(oe.back=-1);break}for(oe.back=0;he=oe.lencode[De&(1<<oe.lenbits)-1],Ne=he>>>24,He=he>>>16&255,gt=he&65535,!(Ne<=Je);){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if(He&&(He&240)===0){for(Gt=Ne,ht=He,Ct=gt;he=oe.lencode[Ct+((De&(1<<Gt+ht)-1)>>Gt)],Ne=he>>>24,He=he>>>16&255,gt=he&65535,!(Gt+Ne<=Je);){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}De>>>=Gt,Je-=Gt,oe.back+=Gt}if(De>>>=Ne,Je-=Ne,oe.back+=Ne,oe.length=gt,He===0){oe.mode=Ie;break}if(He&32){oe.back=-1,oe.mode=V;break}if(He&64){ye.msg="invalid literal/length code",oe.mode=Ee;break}oe.extra=He&15,oe.mode=_e;case _e:if(oe.extra){for(fr=oe.extra;Je<fr;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}oe.length+=De&(1<<oe.extra)-1,De>>>=oe.extra,Je-=oe.extra,oe.back+=oe.extra}oe.was=oe.length,oe.mode=ve;case ve:for(;he=oe.distcode[De&(1<<oe.distbits)-1],Ne=he>>>24,He=he>>>16&255,gt=he&65535,!(Ne<=Je);){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if((He&240)===0){for(Gt=Ne,ht=He,Ct=gt;he=oe.distcode[Ct+((De&(1<<Gt+ht)-1)>>Gt)],Ne=he>>>24,He=he>>>16&255,gt=he&65535,!(Gt+Ne<=Je);){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}De>>>=Gt,Je-=Gt,oe.back+=Gt}if(De>>>=Ne,Je-=Ne,oe.back+=Ne,He&64){ye.msg="invalid distance code",oe.mode=Ee;break}oe.offset=gt,oe.extra=He&15,oe.mode=Pe;case Pe:if(oe.extra){for(fr=oe.extra;Je<fr;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}oe.offset+=De&(1<<oe.extra)-1,De>>>=oe.extra,Je-=oe.extra,oe.back+=oe.extra}if(oe.offset>oe.dmax){ye.msg="invalid distance too far back",oe.mode=Ee;break}oe.mode=Fe;case Fe:if(ge===0)break e;if(U=me-ge,oe.offset>U){if(U=oe.offset-U,U>oe.whave&&oe.sane){ye.msg="invalid distance too far back",oe.mode=Ee;break}U>oe.wnext?(U-=oe.wnext,$=oe.wsize-U):$=oe.wnext-U,U>oe.length&&(U=oe.length),W=oe.window}else W=vt,$=$e-oe.offset,U=oe.length;U>ge&&(U=ge),ge-=U,oe.length-=U;do vt[$e++]=W[$++];while(--U);oe.length===0&&(oe.mode=de);break;case Ie:if(ge===0)break e;vt[$e++]=oe.length,ge--,oe.mode=de;break;case Te:if(oe.wrap){for(;Je<32;){if(st===0)break e;st--,De|=ft[j++]<<Je,Je+=8}if(me-=ge,ye.total_out+=me,oe.total+=me,me&&(ye.adler=oe.check=oe.flags?n(oe.check,vt,me,$e-me):t(oe.check,vt,me,$e-me)),me=ge,(oe.flags?De:J(De))!==oe.check){ye.msg="incorrect data check",oe.mode=Ee;break}De=0,Je=0}oe.mode=Ue;case Ue:if(oe.wrap&&oe.flags){for(;Je<32;){if(st===0)break e;st--,De+=ft[j++]<<Je,Je+=8}if(De!==(oe.total&4294967295)){ye.msg="incorrect length check",oe.mode=Ee;break}De=0,Je=0}oe.mode=Ve;case Ve:Zt=m;break e;case Ee:Zt=w;break e;case Ae:return _;case B:default:return v}return ye.next_out=$e,ye.avail_out=ge,ye.next_in=j,ye.avail_in=st,oe.hold=De,oe.bits=Je,(oe.wsize||me!==ye.avail_out&&oe.mode<Ee&&(oe.mode<Te||ke!==u))&&pe(ye,ye.output,ye.next_out,me-ye.avail_out),It-=ye.avail_in,me-=ye.avail_out,ye.total_in+=It,ye.total_out+=me,oe.total+=me,oe.wrap&&me&&(ye.adler=oe.check=oe.flags?n(oe.check,vt,me,ye.next_out-me):t(oe.check,vt,me,ye.next_out-me)),ye.data_type=oe.bits+(oe.last?64:0)+(oe.mode===V?128:0)+(oe.mode===ne||oe.mode===Y?256:0),(It===0&&me===0||ke===u)&&Zt===h&&(Zt=x),Zt}function q(ye){if(!ye||!ye.state)return v;var ke=ye.state;return ke.window&&(ke.window=null),ye.state=null,h}function ce(ye,ke){var oe;return!ye||!ye.state||(oe=ye.state,(oe.wrap&2)===0)?v:(oe.head=ke,ke.done=!1,h)}function Oe(ye,ke){var oe=ke.length,ft,vt,j;return!ye||!ye.state||(ft=ye.state,ft.wrap!==0&&ft.mode!==Z)?v:ft.mode===Z&&(vt=1,vt=t(vt,ke,oe,0),vt!==ft.check)?w:(j=pe(ye,ke,oe,oe),j?(ft.mode=Ae,_):(ft.havedict=1,h))}return lo.inflateReset=Se,lo.inflateReset2=Ze,lo.inflateResetKeep=Me,lo.inflateInit=at,lo.inflateInit2=Et,lo.inflate=R,lo.inflateEnd=q,lo.inflateGetHeader=ce,lo.inflateSetDictionary=Oe,lo.inflateInfo="pako inflate (from Nodeca project)",lo}var Kx,oI;function P8(){return oI||(oI=1,Kx={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),Kx}var Zx,sI;function iQ(){if(sI)return Zx;sI=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return Zx=e,Zx}var lI;function oQ(){if(lI)return bf;lI=1;var e=aQ(),t=ac(),n=D8(),r=P8(),a=wk(),i=M8(),o=iQ(),s=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,m.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):s.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(g=e.inflateSetDictionary(this.strm,m.dictionary),g!==r.Z_OK)))throw new Error(a[g])}u.prototype.push=function(h,m){var g=this.strm,v=this.options.chunkSize,w=this.options.dictionary,_,x,S,E,A,k=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&w&&(_=e.inflateSetDictionary(this.strm,w)),_===r.Z_BUF_ERROR&&k===!0&&(_=r.Z_OK,k=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,A=n.buf2string(g.output,S),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(A)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,m){var g=new u(m);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function f(h,m){return m=m||{},m.raw=!0,c(h,m)}return bf.Inflate=u,bf.inflate=c,bf.inflateRaw=f,bf.ungzip=c,bf}var Yx,uI;function sQ(){if(uI)return Yx;uI=1;var e=ac().assign,t=tQ(),n=oQ(),r=P8(),a={};return e(a,t,n,r),Yx=a,Yx}var lQ=sQ();const _k=Ja(lQ);var Xx,cI;function uQ(){if(cI)return Xx;cI=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,u)=>{s?o(s):i(u)}):r.push(i),t.apply(this,r)})};return Xx=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=u=>typeof u=="string"?o===u:u.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},Xx}var cQ=uQ();const Jx=Ja(cQ);var Qx,dI;function dQ(){if(dI)return Qx;dI=1;var e={};function t(Y){return Array.isArray(Y)?Y:[Y]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,u=/^\\#/,c=/\r?\n/g,f=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const g=m,v=(Y,X,ae)=>Object.defineProperty(Y,X,{value:ae}),w=/([0-z])-([0-z])/g,_=()=>!1,x=Y=>Y.replace(w,(X,ae,G)=>ae.charCodeAt(0)<=G.charCodeAt(0)?X:n),S=Y=>{const{length:X}=Y;return Y.slice(0,X-X%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(Y,X,ae)=>X+(ae.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(Y,X)=>{const{length:ae}=X;return X.slice(0,ae-ae%2)+r}],[/[\\$.|*+(){^]/g,Y=>`\\${Y}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(Y,X,ae)=>X+6<ae.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(Y,X,ae)=>{const G=ae.replace(/\\\*/g,"[^\\/]*");return X+G}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(Y,X,ae,G,Q)=>X===a?`\\[${ae}${S(G)}${Q}`:Q==="]"&&G.length%2===0?`[${x(ae)}${G}]`:"[]"],[/(?:[^*])$/,Y=>/\/$/.test(Y)?`${Y}$`:`${Y}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(Y,X)=>`${X?`${X}[^/]+`:"[^/]*"}(?=$|\\/$)`]],A=Object.create(null),k=(Y,X)=>{let ae=A[Y];return ae||(ae=E.reduce((G,[Q,ne])=>G.replace(Q,ne.bind(Y)),Y),A[Y]=ae),X?new RegExp(ae,"i"):new RegExp(ae)},D=Y=>typeof Y=="string",O=Y=>Y&&D(Y)&&!i.test(Y)&&!o.test(Y)&&Y.indexOf("#")!==0,N=Y=>Y.split(c);class z{constructor(X,ae,G,Q){this.origin=X,this.pattern=ae,this.negative=G,this.regex=Q}}const H=(Y,X)=>{const ae=Y;let G=!1;Y.indexOf("!")===0&&(G=!0,Y=Y.substr(1)),Y=Y.replace(s,"!").replace(u,"#");const Q=k(Y,X);return new z(ae,Y,G,Q)},ee=(Y,X)=>{throw new X(Y)},P=(Y,X,ae)=>D(Y)?Y?P.isNotRelative(Y)?ae(`path should be a \`path.relative()\`d string, but got "${X}"`,RangeError):!0:ae("path must not be empty",TypeError):ae(`path must be a string, but got \`${X}\``,TypeError),Z=Y=>f.test(Y);P.isNotRelative=Z,P.convert=Y=>Y;class V{constructor({ignorecase:X=!0,ignoreCase:ae=X,allowRelativePaths:G=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=ae,this._allowRelativePaths=G,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(X){if(X&&X[g]){this._rules=this._rules.concat(X._rules),this._added=!0;return}if(O(X)){const ae=H(X,this._ignoreCase);this._added=!0,this._rules.push(ae)}}add(X){return this._added=!1,t(D(X)?N(X):X).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(X){return this.add(X)}_testOne(X,ae){let G=!1,Q=!1;return this._rules.forEach(ne=>{const{negative:de}=ne;if(Q===de&&G!==Q||de&&!G&&!Q&&!ae)return;ne.regex.test(X)&&(G=!de,Q=de)}),{ignored:G,unignored:Q}}_test(X,ae,G,Q){const ne=X&&P.convert(X);return P(ne,X,this._allowRelativePaths?_:ee),this._t(ne,ae,G,Q)}_t(X,ae,G,Q){if(X in ae)return ae[X];if(Q||(Q=X.split(h)),Q.pop(),!Q.length)return ae[X]=this._testOne(X,G);const ne=this._t(Q.join(h)+h,ae,G,Q);return ae[X]=ne.ignored?ne:this._testOne(X,G)}ignores(X){return this._test(X,this._ignoreCache,!1).ignored}createFilter(){return X=>!this.ignores(X)}filter(X){return t(X).filter(this.createFilter())}test(X){return this._test(X,this._testCache,!0)}}const fe=Y=>new V(Y),ue=Y=>P(Y&&P.convert(Y),Y,_);if(fe.isPathValid=ue,fe.default=fe,Qx=fe,typeof Wr<"u"&&(e&&e.IGNORE_TEST_WIN32||Wr.platform==="win32")){const Y=ae=>/^\\\\\?\\/.test(ae)||/["<>|\u0000-\u001F]+/u.test(ae)?ae:ae.replace(/\\/g,"/");P.convert=Y;const X=/^[a-z]:\//i;P.isNotRelative=ae=>X.test(ae)||Z(ae)}return Qx}var fQ=dQ();const hQ=Ja(fQ);var eS,fI;function pQ(){if(fI)return eS;fI=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return eS=n,eS}var mQ=pQ();const xs=Ja(mQ);var tS,hI;function gQ(){return hI||(hI=1,tS=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,u=a+1,c=[],f=[],h=[],m="",g=-1,v=0,w=1,_,x,S=function(){a>=i&&(_=n,x=a,n=r,r=_,a=i,i=x,o=!0,u=a+1)},E=function(O,N,z){return{x:O,y:N,k:z}},A=function(O,N){return{elem:O,t:N}},k=function(O,N,z){var H,ee,P;for(N>z?H=c[O-1+u]:H=c[O+1+u],P=Math.max(N,z),ee=P-O;ee<a&&P<i&&n[ee]===r[P];)++ee,++P;return c[O+u]=f.length,f[f.length]=new E(ee,P,H),P},D=function(O){var N,z,H;for(N=z=0,H=O.length-1;H>=0;--H)for(;N<O[H].x||z<O[H].y;)O[H].y-O[H].x>z-N?(o?h[h.length]=new A(r[z],g):h[h.length]=new A(r[z],w),++z):O[H].y-O[H].x<z-N?(o?h[h.length]=new A(n[N],w):h[h.length]=new A(n[N],g),++N):(h[h.length]=new A(n[N],v),m+=n[N],++N,++z)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return m},getses:function(){return h},compose:function(){var O,N,z,H,ee,P,Z,V;for(O=i-a,N=a+i+3,z={},Z=0;Z<N;++Z)z[Z]=-1,c[Z]=-1;H=-1;do{for(++H,V=-H;V<=O-1;++V)z[V+u]=k(V,z[V-1+u]+1,z[V+1+u]);for(V=O+H;V>=O+1;--V)z[V+u]=k(V,z[V-1+u]+1,z[V+1+u]);z[O+u]=k(O,z[O-1+u]+1,z[O+1+u])}while(z[O+u]!==i);for(s=O+2*H,ee=c[O+u],P=[];ee!==-1;)P[P.length]=new E(f[ee].x,f[ee].y,null),ee=f[ee].k;D(P)}}}),tS}var nS,pI;function yQ(){if(pI)return nS;pI=1;var e=gQ();function t(i,o){var s=new e(i,o);s.compose();for(var u=s.getses(),c,f,h=i.length-1,m=o.length-1,g=u.length-1;g>=0;--g)u[g].t===s.SES_COMMON?(f?(f.chain={file1index:h,file2index:m,chain:null},f=f.chain):(c={file1index:h,file2index:m,chain:null},f=c),h--,m--):u[g].t===s.SES_DELETE?h--:u[g].t===s.SES_ADD&&m--;var v={file1index:-1,file2index:-1,chain:null};return f?(f.chain=v,c):v}function n(i,o){for(var s=[],u=i.length,c=o.length,f=t(i,o);f!==null;f=f.chain){var h=u-f.file1index-1,m=c-f.file2index-1;u=f.file1index,c=f.file2index,(h||m)&&s.push({file1:[u+1,h],file2:[c+1,m]})}return s.reverse(),s}function r(i,o,s){var u,c=n(o,i),f=n(o,s),h=[];function m(X,ae){h.push([X.file1[0],ae,X.file1[1],X.file2[0],X.file2[1]])}for(u=0;u<c.length;u++)m(c[u],0);for(u=0;u<f.length;u++)m(f[u],2);h.sort(function(X,ae){return X[0]-ae[0]});var g=[],v=0;function w(X){X>v&&(g.push([1,v,X-v]),v=X)}for(var _=0;_<h.length;_++){for(var x=_,S=h[_],E=S[0],A=E+S[2];_<h.length-1;){var k=h[_+1],D=k[0];if(D>A)break;A=Math.max(A,D+k[2]),_++}if(w(E),x==_)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var O={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(u=x;u<=_;u++){S=h[u];var N=S[1],z=O[N],H=S[0],ee=H+S[2],P=S[3],Z=P+S[4];z[0]=Math.min(P,z[0]),z[1]=Math.max(Z,z[1]),z[2]=Math.min(H,z[2]),z[3]=Math.max(ee,z[3])}var V=O[0][0]+(E-O[0][2]),fe=O[0][1]+(A-O[0][3]),ue=O[2][0]+(E-O[2][2]),Y=O[2][1]+(A-O[2][3]);g.push([-1,V,fe-V,E,A-E,ue,Y-ue])}v=A}return w(o.length),g}function a(i,o,s){var u=[],c=[i,o,s],f=r(i,o,s),h=[];function m(){h.length&&u.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],A=S[5],k=0;k<S[2];k++)if(i[k+E]!=s[k+A])return!0;return!1}for(var w=0;w<f.length;w++){var _=f[w],x=_[0];x==-1?v(_)?(m(),u.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(c[0].slice(_[1],_[1]+_[2])):g(c[x].slice(_[1],_[1]+_[2]))}return m(),u}return nS=a,nS}var bQ=yQ();const vQ=Ja(bQ);class Yn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Yn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class E0 extends Yn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=E0.code,this.data={filepaths:t}}}E0.code="UnmergedPathsError";class An extends Yn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=An.code,this.data={message:t}}}An.code="InternalError";class xh extends Yn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=xh.code,this.data={filepath:t}}}xh.code="UnsafeFilepathError";class ws{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function ew(e,t){return-(e<t)||+(e>t)}function F8(e,t){return ew(e.path,t.path)}function L8(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const ps=2**32;function mI(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function Yf(e){const[t,n]=mI(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=mI(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%ps,ctimeNanoseconds:n%ps,mtimeSeconds:r%ps,mtimeNanoseconds:a%ps,dev:e.dev%ps,ino:e.ino%ps,mode:L8(e.mode%ps),uid:e.uid%ps,gid:e.gid%ps,size:e.size>-1?e.size%ps:0}}function wQ(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let rS=null;async function Il(e){return rS===null&&(rS=await xQ()),rS?$8(e):_Q(e)}function _Q(e){return new I8().update(e).digest("hex")}async function $8(e){const t=await crypto.subtle.digest("SHA-1",e);return wQ(t)}async function xQ(){try{if(await $8(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function SQ(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function EQ(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Wt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class zc{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Wt.isBuffer(t))return zc.fromBuffer(t);if(t===null)return new zc(null);throw new An("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new An("Index file is empty (.git/index)");const n=new zc,r=new ws(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new An(`Invalid dircache magic file number: ${a}`);const i=await Il(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new An(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new An(`Unsupported dircache version: ${s}`);const u=r.readUInt32BE();let c=0;for(;!r.eof()&&c<u;){const f={};f.ctimeSeconds=r.readUInt32BE(),f.ctimeNanoseconds=r.readUInt32BE(),f.mtimeSeconds=r.readUInt32BE(),f.mtimeNanoseconds=r.readUInt32BE(),f.dev=r.readUInt32BE(),f.ino=r.readUInt32BE(),f.mode=r.readUInt32BE(),f.uid=r.readUInt32BE(),f.gid=r.readUInt32BE(),f.size=r.readUInt32BE(),f.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();f.flags=SQ(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new An(`Got a path length of: ${m}`);if(f.path=r.toString("utf8",m),f.path.includes("..\\")||f.path.includes("../"))throw new xh(f.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new An(`Expected 1-8 null characters but got '${v}' after ${f.path}`);if(r.eof())throw new An("Unexpected end of file")}f.stages=[],n._addEntry(f),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(F8)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Yf(n);const i=Wt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Wt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Wt.alloc(r),i=new ws(a),o=Yf(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(EQ(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Wt.alloc(12),n=new ws(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(zc._entryToBuffer(s)),s.stages.length>1)for(const u of s.stages)u&&u!==s&&r.push(zc._entryToBuffer(u));r=await Promise.all(r);const a=Wt.concat(r),i=Wt.concat([t,a]),o=await Il(i);return Wt.concat([i,Wt.from(o,"hex")])}}function Hb(e,t,n=!0,r=!0){const a=Yf(e),i=Yf(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let aS=null;const iS=Symbol("IndexCache");function kQ(){return{map:new Map,stats:new Map}}async function CQ(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await zc.from(a);n.map.set(t,i),n.stats.set(t,r)}async function AQ(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Hb(r,a)}class Ca{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[iS]||(r[iS]=kQ());const o=`${n}/index`;aS===null&&(aS=new Im({maxPending:1/0}));let s,u=[];return await aS.acquire(o,async()=>{const c=r[iS];await AQ(t,o,c)&&await CQ(t,o,c);const f=c.map.get(o);if(u=f.unmergedPaths,u.length&&!a)throw new E0(u);if(s=await i(f),f._dirty){const h=await f.toObject();await t.write(o,h),c.stats.set(o,await t.lstat(o)),f._dirty=!1}}),s}}function Vb(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function Xf(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function B8(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Vb(a),metadata:{},children:[]};t.set(a,i),i.parent=n(Xf(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:Vb(a),metadata:i,parent:n(Xf(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function TQ(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new An(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class RQ{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ca.acquire({fs:t,gitdir:n,cache:r},async function(i){return B8(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(ew),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:Yf(r.metadata);t._type=r.type==="tree"?"tree":TQ(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const tw=Symbol("GitWalkSymbol");function Sh(){const e=Object.create(null);return Object.defineProperty(e,tw,{value:function({fs:t,gitdir:n,cache:r}){return new RQ({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class vr extends Yn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=vr.code,this.data={what:t}}}vr.code="NotFoundError";class mi extends Yn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=mi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}mi.code="ObjectTypeError";class Hu extends Yn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Hu.code,this.data={value:t}}}Hu.code="InvalidOidError";class k0 extends Yn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=k0.code,this.data={remote:t}}}k0.code="NoRefspecError";class Gb{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Gb(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Wb{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",u=a==="*";if(u!==(o==="*"))throw new An("Invalid refspec");return new Wb({remotePath:r,localPath:i,force:s,matchPrefix:u})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class xk{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Wb.from(r));return new xk(n)}add(t){const n=Wb.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function NQ(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const IQ=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},qp=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},gI={core:{filemode:qp,bare:qp,logallrefupdates:qp,symlinks:qp,ignorecase:qp,bigFileThreshold:IQ}},OQ=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,jQ=/^[A-Za-z0-9-.]+$/,DQ=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,MQ=/^[A-Za-z][A-Za-z-]*$/,PQ=/^(.*?)( *[#;].*)$/,FQ=e=>{const t=OQ.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},LQ=e=>{const t=DQ.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=$Q(r),i=BQ(a);return[n,i]}return null},$Q=e=>{const t=PQ.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return yI(n)&&yI(r)?`${n}${r}`:n},yI=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,BQ=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),bI=e=>e!=null?e.toLowerCase():null,O2=(e,t,n)=>[bI(e),t,bI(n)].filter(r=>r!=null).join("."),vI=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:O2(n,a,r),sectionPath:O2(n,a,null),isSection:!!n}},zQ=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class Sk{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),u=FQ(s),c=u!=null;if(c)[n,r]=u;else{const h=LQ(s);h!=null&&([i,o]=h)}const f=O2(n,r,i);return{line:a,isSection:c,section:n,subsection:r,name:i,value:o,path:f}}):[]}static from(t){return new Sk(t)}async get(t,n=!1){const r=vI(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const u=gI[i]&&gI[i][o];return u?u(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:u,isSection:c}=vI(t),f=zQ(this.parsedConfig,h=>h.path===s);if(n==null)f!==-1&&this.parsedConfig.splice(f,1);else if(f!==-1){const h=this.parsedConfig[f],m=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(f+1,0,m):this.parsedConfig[f]=m}else{const h=this.parsedConfig.findIndex(g=>g.path===u),m={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(jQ.test(a)&&MQ.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const g={isSection:c,section:a,subsection:i,modified:!0,path:u};this.parsedConfig.push(g,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class ua{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return Sk.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const Dy=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],UQ=["config","description","index","shallow","commondir"];let oS;async function _u(e,t){return oS===void 0&&(oS=new Im),oS.acquire(e,t)}class Pt{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:u=!1,pruneTags:c=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new Hu(_);const f=await ua.get({fs:t,gitdir:n});if(!s){if(s=await f.getall(`remote.${r}.fetch`),s.length===0)throw new k0(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=xk.from(s),m=new Map;if(c){const _=await Pt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Pt.deleteRefs({fs:t,gitdir:n,refs:_.map(x=>`refs/tags/${x}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await Pt.exists({fs:t,gitdir:n,ref:_})){const x=a.get(_);m.set(_,x)}}const g=h.translate([...a.keys()]);for(const[_,x]of g){const S=a.get(_);m.set(x,S)}const v=h.translate([...i.keys()]);for(const[_,x]of v){const S=i.get(_),E=h.translateOne(S);E&&m.set(x,`ref: ${E}`)}const w=[];if(u){for(const _ of h.localNamespaces()){const x=(await Pt.listRefs({fs:t,gitdir:n,filepath:_})).map(S=>`${_}/${S}`);for(const S of x)m.has(S)||w.push(S)}w.length>0&&await Pt.deleteRefs({fs:t,gitdir:n,refs:w})}for(const[_,x]of m)await _u(_,async()=>t.write(Tt.join(n,_),`${x.trim()}
`,"utf8"));return{pruned:w}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Hu(a);await _u(r,async()=>t.write(Tt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await _u(r,async()=>t.write(Tt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Pt.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(Tt.join(n,s))));let a=await _u("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Gb.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await _u("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Pt.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Pt.packedRefs({fs:t,gitdir:n}),o=Dy(r).filter(s=>!UQ.includes(s));for(const s of o){const u=await _u(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(u)return Pt.resolve({fs:t,gitdir:n,ref:u.trim(),depth:a})}throw new vr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Pt.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Pt.packedRefs({fs:t,gitdir:n}),i=Dy(r);for(const o of i)if(await _u(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new vr(r)}static async expandAgainstMap({ref:t,map:n}){const r=Dy(t);for(const a of r)if(await n.has(a))return a;throw new vr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Pt.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=Dy(t);for(const o of i){const s=a.get(o);if(s)return Pt.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new vr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await _u("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Gb.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Pt.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(NQ),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Pt.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Pt.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Pt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function qQ(e,t){return ew(wI(e),wI(t))}function wI(e){return e.mode==="040000"?e.path+"/":e.path}function z8(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new An(`Unexpected GitTree entry mode: ${e}`)}function HQ(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new An(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new An(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=z8(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new xh(s);const u=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:u,type:o})}return t}function VQ(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new An(`Could not understand file mode: ${e}`)}function GQ(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=VQ(e.mode),e.type||(e.type=z8(e.mode)),e}class Ai{constructor(t){if(Wt.isBuffer(t))this._entries=HQ(t);else if(Array.isArray(t))this._entries=t.map(GQ);else throw new An("invalid type passed to GitTree constructor");this._entries.sort(F8)}static from(t){return new Ai(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(qQ),Wt.concat(t.map(n=>{const r=Wt.from(n.mode.replace(/^0/,"")),a=Wt.from(" "),i=Wt.from(n.path,"utf8"),o=Wt.from([0]),s=Wt.from(n.oid,"hex");return Wt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Eh{static wrap({type:t,object:n}){return Wt.concat([Wt.from(`${t} ${n.byteLength.toString()}\0`),Wt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new An(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Wt.from(t.slice(r+1))}}}async function U8({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function WQ(e,t){const n=new ws(e),r=_I(n);if(r!==t.byteLength)throw new An(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=_I(n);let i;const o=SI(n,t);if(o.byteLength===a)i=o;else{i=Wt.alloc(a);const s=new ws(i);for(s.copy(o);!n.eof();)s.copy(SI(n,t));const u=s.tell();if(a!==u)throw new An(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${u} bytes`)}return i}function _I(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function xI(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function SI(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=xI(e,n&a,4);let s=xI(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function KQ(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function q8(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:KQ(e)}class H8{constructor(t){if(typeof Wt>"u")throw new Error("Missing Buffer dependency");this.stream=q8(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Wt.alloc(0):(n&&(n=Wt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>ZQ(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Wt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function ZQ(e){return e.reduce((t,n)=>t+n.length,0)}async function YQ(e,t){const n=new H8(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new An(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new An(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:u,ofs:c,reference:f}=await XQ(n),h=new _k.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new An(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==u)throw new An("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:f,ofs:c})}}}}async function XQ(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Wt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function V8(e){return _k.inflate(e)}function JQ(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function QQ(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class Jf{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new ws(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new An(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new An("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let f=0;f<o;f++){const h=r.slice(20).toString("hex");s[f]=h}r.seek(r.tell()+4*o);const u=new Map;for(let f=0;f<o;f++)u.set(s[f],r.readUInt32BE());const c=r.slice(20).toString("hex");return new Jf({hashes:s,crcs:{},offsets:u,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],u={},c=new Map;let f=null,h=null;await YQ([t],async({data:_,type:x,reference:S,offset:E,num:A})=>{f===null&&(f=A);const k=Math.floor((f-A)*100/f);k!==h&&r&&await r({phase:"Receiving objects",loaded:f-A,total:f}),h=k,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const m=Object.keys(i).map(Number);for(const[_,x]of m.entries()){const S=_+1===m.length?t.byteLength-20:m[_+1],E=i[x],A=JJ.buf(t.slice(x,S))>>>0;E.end=S,E.crc=A}const g=new Jf({pack:Promise.resolve(t),packfileSha:o,crcs:u,hashes:s,offsets:c,getExternalRefDelta:n});h=null;let v=0;const w=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const x=Math.floor(v*100/f);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:f}),v++,h=x;const S=i[_];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:A}=await g.readSlice({start:_});w[g.readDepth]+=1;const k=await Il(Eh.wrap({type:E,object:A}));S.oid=k,s.push(k),c.set(k,_),u[k]=S.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(c,f)=>{t.push(Wt.from(c,f))};n("ff744f63","hex"),n("00000002","hex");const r=new ws(Wt.alloc(256*4));for(let c=0;c<256;c++){let f=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&f++;r.writeUInt32BE(f)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const a=new ws(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)a.writeUInt32BE(this.crcs[c]);t.push(a.buffer);const i=new ws(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const o=Wt.concat(t),s=await Il(o),u=Wt.alloc(20);return u.write(s,"hex"),Wt.concat([o,u])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new An(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new An("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new ws(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new An("Unrecognized type: 0b"+o.toString(2));const u=i&15;let c=u;i&128&&(c=QQ(a,u));let h=null,m=null;if(s==="ofs_delta"){const v=JQ(a),w=t-v;({object:h,type:s}=await this.readSlice({start:w}))}if(s==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:v}))}const g=r.slice(a.tell());if(m=Wt.from(await V8(g)),m.byteLength!==c)throw new An(`Packfile told us object would have length ${c} but it had length ${m.byteLength}`);return h&&(m=Wt.from(WQ(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:m}),{type:s,format:"content",object:m}}}const My=Symbol("PackfileCache");async function eee({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return Jf.fromIdx({idx:i,getExternalRefDelta:n})}function Ek({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[My]||(t[My]=new Map);let o=t[My].get(n);return o||(o=eee({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[My].set(n,o)),o}async function tee({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(Tt.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await Ek({fs:e,cache:t,filename:u,getExternalRefDelta:i});if(c.error)throw new An(c.error);if(c.offsets.has(r)){if(!c.pack){const h=u.replace(/idx$/,"pack");c.pack=e.read(h)}const f=await c.read({oid:r,getExternalRefDelta:i});return f.format="content",f.source=`objects/pack/${s.replace(/idx$/,"pack")}`,f}}return null}async function $r({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=f=>$r({fs:e,cache:t,gitdir:n,oid:f});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Wt.from("tree 0\0")}),o||(o=await U8({fs:e,gitdir:n,oid:r})),!o){if(o=await tee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new vr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Wt.from(await V8(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await Il(o.object);if(s!==r)throw new An(`SHA check failed! Expected ${r}, computed ${s}`);const{object:u,type:c}=Eh.unwrap(o.object);if(o.type=c,o.object=u,o.format="content",a==="content")return o;throw new An(`invalid requested format "${a}"`)}class Ko extends Yn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=Ko.code,this.data={noun:t,where:n,canForce:r}}}Ko.code="AlreadyExistsError";class C0 extends Yn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=C0.code,this.data={nouns:t,short:n,matches:r}}}C0.code="AmbiguousError";class A0 extends Yn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=A0.code,this.data={filepaths:t}}}A0.code="CheckoutConflictError";class T0 extends Yn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=T0.code,this.data={ref:t,oid:n}}}T0.code="CommitNotFetchedError";class R0 extends Yn{constructor(){super("Empty response from git server."),this.code=this.name=R0.code,this.data={}}}R0.code="EmptyServerResponseError";class N0 extends Yn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=N0.code,this.data={}}}N0.code="FastForwardError";class I0 extends Yn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=I0.code,this.data={prettyDetails:t,result:n}}}I0.code="GitPushError";class Qf extends Yn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=Qf.code,this.data={statusCode:t,statusMessage:n,response:r}}}Qf.code="HttpError";class Vu extends Yn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Vu.code,this.data={reason:t}}}Vu.code="InvalidFilepathError";class Vo extends Yn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Vo.code,this.data={ref:t,suggestion:n}}}Vo.code="InvalidRefNameError";class O0 extends Yn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=O0.code,this.data={depth:t}}}O0.code="MaxDepthError";class kh extends Yn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=kh.code,this.data={}}}kh.code="MergeNotSupportedError";class Ch extends Yn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Ch.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}Ch.code="MergeConflictError";class Xa extends Yn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Xa.code,this.data={role:t}}}Xa.code="MissingNameError";class Ci extends Yn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Ci.code,this.data={parameter:t}}}Ci.code="MissingParameterError";class j0 extends Yn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=j0.code,this.data={errors:t},this.errors=t}}j0.code="MultipleGitError";class bd extends Yn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=bd.code,this.data={expected:t,actual:n}}}bd.code="ParseError";class eh extends Yn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=eh.code,this.data={reason:t}}}eh.code="PushRejectedError";class Au extends Yn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Au.code,this.data={capability:t,parameter:n}}}Au.code="RemoteCapabilityError";class D0 extends Yn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=D0.code,this.data={preview:t,response:n}}}D0.code="SmartHttpError";class M0 extends Yn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=M0.code,this.data={url:t,transport:n,suggestion:r}}}M0.code="UnknownTransportError";class P0 extends Yn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=P0.code,this.data={url:t}}}P0.code="UrlParseError";class Ah extends Yn{constructor(){super("The operation was canceled."),this.code=this.name=Ah.code,this.data={}}}Ah.code="UserCanceledError";class F0 extends Yn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=F0.code,this.data={filepath:t}}}F0.code="IndexResetError";class L0 extends Yn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=L0.code,this.data={ref:t}}}L0.code="NoCommitError";var nee=Object.freeze({__proto__:null,AlreadyExistsError:Ko,AmbiguousError:C0,CheckoutConflictError:A0,CommitNotFetchedError:T0,EmptyServerResponseError:R0,FastForwardError:N0,GitPushError:I0,HttpError:Qf,InternalError:An,InvalidFilepathError:Vu,InvalidOidError:Hu,InvalidRefNameError:Vo,MaxDepthError:O0,MergeNotSupportedError:kh,MergeConflictError:Ch,MissingNameError:Xa,MissingParameterError:Ci,MultipleGitError:j0,NoRefspecError:k0,NotFoundError:vr,ObjectTypeError:mi,ParseError:bd,PushRejectedError:eh,RemoteCapabilityError:Au,SmartHttpError:D0,UnknownTransportError:M0,UnsafeFilepathError:xh,UrlParseError:P0,UserCanceledError:Ah,UnmergedPathsError:E0,IndexResetError:F0,NoCommitError:L0});function j2({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=ree(r),`${e} <${t}> ${n} ${r}`}function ree(e){const t=aee(iee(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function aee(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function iee(e){return e===0?e:-e}function yl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Kb(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:oee(a)}}function oee(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),see(r)}function see(e){return e===0?e:-e}class ci{constructor(t){if(typeof t=="string")this._tag=t;else if(Wt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=ci.render(t);else throw new An("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new ci(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${j2(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=Kb(r.tagger)),r.committer&&(r.committer=Kb(r.committer)),r}withoutSignature(){const t=yl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return yl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Wt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=yl(i);const o=a+i;return ci.from(o)}}function sS(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function lee(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Pr{constructor(t){if(typeof t=="string")this._commit=t;else if(Wt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Pr.render(t);else throw new An("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Pr.justHeaders(t),a=Pr.justMessage(t),i=yl(r+`
gpgsig`+sS(n)+`
`+a);return new Pr(i)}static from(t){return new Pr(t)}toObject(){return Wt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Pr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return yl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Pr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=Kb(r.author)),r.committer&&(r.committer=Kb(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new An("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${j2(r)}
`;const a=t.committer||t.author;return n+=`committer ${j2(a)}
`,t.gpgsig&&(n+="gpgsig"+sS(t.gpgsig)),n}static render(t){return Pr.renderHeaders(t)+`
`+yl(t.message)}render(){return this._commit}withoutSignature(){const t=yl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return yl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return lee(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Pr.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=yl(o);const u=Pr.justHeaders(t._commit)+`
gpgsig`+sS(o)+`
`+i;return Pr.from(u)}}async function th({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ai.from([]),oid:r};const{type:a,object:i}=await $r({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ci.from(i).parse().object,th({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Pr.from(i).parse().tree,th({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new mi(r,a,"tree");return{tree:Ai.from(i),oid:r}}class uee{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await Pt.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof vr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const u=await th({fs:t,cache:this.cache,gitdir:n,oid:s});return u.type="tree",u.mode="40000",o.set(".",u),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const u=s.oid;if(!u)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:c,object:f}=await $r({fs:r,cache:a,gitdir:i,oid:u});if(c!==s.type)throw new mi(u,c,s.type);const h=Ai.from(f);for(const m of h)o.set(Tt.join(n,m.path),m);return h.entries().map(m=>Tt.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=L8(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:u,object:c}=await $r({fs:r,cache:a,gitdir:i,oid:s});u!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function po({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,tw,{value:function({fs:n,gitdir:r,cache:a}){return new uee({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class cee{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Tt.join(a,n));return i===null?null:i.map(o=>Tt.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=Yf(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Ca.acquire({fs:r,gitdir:a,cache:i},async function(s){const u=s.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof Wr<"u"?Wr.platform!=="win32":!0;if(!u||Hb(c,u,h,m)){const g=await t.content();g===void 0?o=void 0:(o=await Il(Eh.wrap({type:"blob",object:g})),u&&o===u.oid&&(!h||c.mode===u.mode)&&Hb(c,u,h,m)&&s.insert({filepath:t._fullpath,stats:c,oid:o}))}else o=u.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await ua.get({fs:t,gitdir:n}),this.config)}}function $0(){const e=Object.create(null);return Object.defineProperty(e,tw,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new cee({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function dee(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const G8=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class fee{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*hee(e){const t=new fee;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function Gu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(u,c)=>c,reduce:o=async(u,c)=>{const f=G8(c);return u!==void 0&&f.unshift(u),f},iterate:s=(u,c)=>Promise.all([...c].map(u))}){const u=a.map(g=>g[tw]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(u.length).fill("."),f=dee(0,u.length),h=async g=>{f.map(_=>{const x=g[_];g[_]=x&&new u[_].ConstructEntry(x)});const w=(await Promise.all(f.map(_=>{const x=g[_];return x?u[_].readdir(x):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:hee(w)}},m=async g=>{const{entries:v,children:w}=await h(g),_=v.find(S=>S&&S._fullpath)._fullpath,x=await i(_,v);if(x!==null){let S=await s(m,w);return S=S.filter(E=>E!==void 0),o(x,S)}};return m(c)}async function D2(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Tt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?D2(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function pee(e){return mee(e)&&EI(e.then)&&EI(e.catch)}function mee(e){return e&&typeof e=="object"}function EI(e){return typeof e=="function"}function kI(e){return pee((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const CI=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function AI(e,t){if(kI(t))for(const n of CI)e[`_${n}`]=t[n].bind(t);else for(const n of CI)e[`_${n}`]=Jx(t[n].bind(t));kI(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=D2.bind(null,e):t.rm?e._rm=Jx(t.rm.bind(t)):t.rmdir.length>2?e._rm=Jx(t.rmdir.bind(t)):e._rm=D2.bind(null,e)}class nn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?AI(this,t.promises):AI(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Wt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(Xf(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=Xf(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(ew),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Wt.isBuffer(r)?r:Wt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Qe(e,t){if(t===void 0)throw new Ci(e)}async function Zb(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function gee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n);const i=new nn(e),o=[po({ref:r}),$0(),Sh()];let s=[];await Ca.acquire({fs:i,gitdir:n,cache:a},async function(c){s=c.unmergedPaths});const u=await Gu({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(c,[f,h,m]){const g=!await Zb(h,m),v=s.includes(c),w=!await Zb(m,f);if(g||v)return f?{path:c,mode:await f.mode(),oid:await f.oid(),type:await f.type(),content:await f.content()}:void 0;if(w)return!1;throw new F0(c)}});await Ca.acquire({fs:i,gitdir:n,cache:a},async function(c){for(const f of u)if(f!==!1){if(!f){await i.rmdir(`${t}/${f.path}`,{recursive:!0}),c.delete({filepath:f.path});continue}if(f.type==="blob"){const h=new TextDecoder().decode(f.content);await i.write(`${t}/${f.path}`,h,{mode:f.mode}),c.insert({filepath:f.path,oid:f.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class Th{static async isIgnored({fs:t,dir:n,gitdir:r=Tt.join(n,".git"),filepath:a}){if(Vb(a)===".git")return!0;if(a===".")return!1;let i="";const o=Tt.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:Tt.join(n,".gitignore"),filepath:a}],u=a.split("/").filter(Boolean);for(let f=1;f<u.length;f++){const h=u.slice(0,f).join("/"),m=u.slice(f).join("/");s.push({gitignore:Tt.join(n,h,".gitignore"),filepath:m})}let c=!1;for(const f of s){let h;try{h=await t.read(f.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const m=hQ().add(i);m.add(h);const g=Xf(f.filepath);if(g!=="."&&m.ignores(g))return!0;c?c=!m.test(f.filepath).unignored:c=m.test(f.filepath).ignored}return c}}async function yee({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let lS=null;async function W8(e){return lS===null&&(lS=vee()),lS?bee(e):_k.deflate(e)}async function bee(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function vee(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Ni({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Eh.wrap({type:n,object:r})),i=await Il(r),r=Wt.from(await W8(r))),o||await yee({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function K8(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function wee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r);const s=new nn(e);await Ca.acquire({fs:s,gitdir:n,cache:a},async u=>{const f=await(await ua.get({fs:s,gitdir:n})).get("core.autocrlf");return M2({dir:t,gitdir:n,fs:s,filepath:r,index:u,force:i,parallel:o,autocrlf:f})})}catch(s){throw s.caller="git.add",s}}async function M2({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const u=r.map(async m=>{if(!i&&await Th.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const g=await n.lstat(Tt.join(e,m));if(!g)throw new vr(m);if(g.isDirectory()){const v=await n.readdir(Tt.join(e,m));if(o){const w=v.map(_=>M2({dir:e,gitdir:t,fs:n,filepath:[Tt.join(m,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(w)}else for(const w of v)await M2({dir:e,gitdir:t,fs:n,filepath:[Tt.join(m,w)],index:a,force:i,parallel:o,autocrlf:s})}else{const v=g.isSymbolicLink()?await n.readlink(Tt.join(e,m)).then(K8):await n.read(Tt.join(e,m),{autocrlf:s});if(v===null)throw new vr(m);const w=await Ni({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:m,stats:g,oid:w})}}),c=await Promise.allSettled(u),f=c.filter(m=>m.status==="rejected").map(m=>m.reason);if(f.length>1)throw new j0(f);if(f.length===1)throw f[0];return c.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function Om({fs:e,gitdir:t,path:n}){return(await ua.get({fs:e,gitdir:t})).get(n)}function Z8(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Wu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await Om({fs:e,gitdir:t,path:"user.name"}),email:await Om({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=Z8({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function nh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await Om({fs:e,gitdir:t,path:"user.name"}),email:await Om({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=Z8({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function Y8({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await $r({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ci.from(i).parse().object,Y8({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new mi(r,a,"commit");return{commit:Pr.from(i),oid:r}}async function rh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await Y8({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function nw({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g}){let v=!1;h||(h=await Pt.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let w,_;try{w=await Pt.resolve({fs:e,gitdir:r,ref:h}),_=await rh({fs:e,gitdir:r,oid:w,cache:{}})}catch{v=!0}if(u&&v)throw new L0(h);const x=u?await Wu({fs:e,gitdir:r,author:i,commit:_.commit}):await Wu({fs:e,gitdir:r,author:i});if(!x)throw new Xa("author");const S=u?await nh({fs:e,gitdir:r,author:x,committer:o,commit:_.commit}):await nh({fs:e,gitdir:r,author:x,committer:o});if(!S)throw new Xa("committer");return Ca.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=B8(E.entries).get(".");if(g||(g=await X8({fs:e,gitdir:r,inode:k,dryRun:c})),m?m=await Promise.all(m.map(N=>Pt.resolve({fs:e,gitdir:r,ref:N}))):u?m=_.commit.parent:m=w?[w]:[],!a)if(u)a=_.commit.message;else throw new Ci("message");let D=Pr.from({tree:g,parent:m,author:x,committer:S,message:a});s&&(D=await Pr.sign(D,n,s));const O=await Ni({fs:e,gitdir:r,type:"commit",object:D.toObject(),dryRun:c});return!f&&!c&&await Pt.writeRef({fs:e,gitdir:r,ref:h,value:O}),O})}async function X8({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const u of a)u.type==="tree"&&(u.metadata.mode="040000",u.metadata.oid=await X8({fs:e,gitdir:t,inode:u,dryRun:r}));const i=a.map(u=>({mode:u.metadata.mode,path:u.basename,oid:u.metadata.oid,type:u.type})),o=Ai.from(i);return await Ni({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function B0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Vu("leading-slash");if(a.endsWith("/"))throw new Vu("trailing-slash");const i=r,o=await th({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const u=a.split("/");r=await J8({fs:e,cache:t,gitdir:n,tree:s,pathArray:u,oid:i,filepath:a})}return r}async function J8({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const u of r)if(u.path===s){if(a.length===0)return u.oid;{const{type:c,object:f}=await $r({fs:e,cache:t,gitdir:n,oid:u.oid});if(c!=="tree")throw new mi(i,c,"tree",o);return r=Ai.from(f),J8({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new vr(`file or directory found at "${i}:${o}"`)}async function Rh({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await B0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await th({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function z0({fs:e,gitdir:t,tree:n}){const r=Ai.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function _ee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:u,committer:c,signingKey:f}){let h;try{h=await Pt.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof vr))throw x}let g=(await Rh({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new Ko("note",i);typeof o=="string"&&(o=Wt.from(o,"utf8"));const v=await Ni({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const w=await z0({fs:e,gitdir:r,tree:g});return await nw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:w,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:u,committer:c,signingKey:f})}async function xee({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:u,committer:c,signingKey:f,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i),Qe("note",o),f&&Qe("onSign",t);const m=new nn(e),g=await Wu({fs:m,gitdir:r,author:u});if(!g)throw new Xa("author");const v=await nh({fs:m,gitdir:r,author:g,committer:c});if(!v)throw new Xa("committer");return await _ee({fs:new nn(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:v,signingKey:f})}catch(m){throw m.caller="git.addNote",m}}async function Q8({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==xs.clean(n))throw new Vo(n,xs.clean(n));const i=await ua.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new Ko("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await ua.save({fs:e,gitdir:t,config:i})}async function See({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("remote",r),Qe("url",a),await Q8({fs:new nn(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function Eee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!f&&await Pt.exists({fs:e,gitdir:r,ref:a}))throw new Ko("tag",a);const h=await Pt.resolve({fs:e,gitdir:r,ref:u||"HEAD"}),{type:m}=await $r({fs:e,cache:t,gitdir:r,oid:h});let g=ci.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});c&&(g=await ci.sign(g,n,c));const v=await Ni({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Pt.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function kee({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("ref",a),c&&Qe("onSign",t);const m=new nn(e),g=await Wu({fs:m,gitdir:r,author:i});if(!g)throw new Xa("tagger");return await Eee({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:u,signingKey:c,force:f})}catch(m){throw m.caller="git.annotatedTag",m}}async function Cee({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==xs.clean(n))throw new Vo(n,xs.clean(n));const o=`refs/heads/${n}`;if(!i&&await Pt.exists({fs:e,gitdir:t,ref:o}))throw new Ko("branch",n,!1);let s;try{s=await Pt.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await Pt.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await Pt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Aee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Cee({fs:new nn(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const eM=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function kk({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:u,noCheckout:c,noUpdateHead:f,dryRun:h,force:m,track:g=!0}){let v;if(r)try{v=await Pt.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let w;try{w=await Pt.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const x=`${o}/${s}`;if(w=await Pt.resolve({fs:e,gitdir:i,ref:x}),g){const S=await ua.get({fs:e,gitdir:i});await S.set(`branch.${s}.remote`,o),await S.set(`branch.${s}.merge`,`refs/heads/${s}`),await ua.save({fs:e,gitdir:i,config:S})}await Pt.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:w})}if(!c){let _;try{_=await Tee({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:m,filepaths:u})}catch(k){throw k instanceof vr&&k.data.what===w?new T0(s,w):k}const x=_.filter(([k])=>k==="conflict").map(([k,D])=>D);if(x.length>0)throw new A0(x);const S=_.filter(([k])=>k==="error").map(([k,D])=>D);if(S.length>0)throw new An(S.join(", "));if(h){r&&await r({previousHead:v,newHead:w,type:u!=null&&u.length>0?"file":"branch"});return}let E=0;const A=_.length;await Ca.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([D])=>D==="delete"||D==="delete-index").map(async function([D,O]){const N=`${a}/${O}`;D==="delete"&&await e.rm(N),k.delete({filepath:O}),n&&await n({phase:"Updating workdir",loaded:++E,total:A})}))}),await Ca.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[D,O]of _)if(D==="rmdir"||D==="rmdir-index"){const N=`${a}/${O}`;try{D==="rmdir-index"&&k.delete({filepath:O}),await e.rmdir(N),n&&await n({phase:"Updating workdir",loaded:++E,total:A})}catch(z){if(z.code==="ENOTEMPTY")console.log(`Did not delete ${O} because directory is not empty`);else throw z}}}),await Promise.all(_.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,D]){const O=`${a}/${D}`;await e.mkdir(O),n&&await n({phase:"Updating workdir",loaded:++E,total:A})})),await Ca.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([D])=>D==="create"||D==="create-index"||D==="update"||D==="mkdir-index").map(async function([D,O,N,z,H]){const ee=`${a}/${O}`;try{if(D!=="create-index"&&D!=="mkdir-index"){const{object:Z}=await $r({fs:e,cache:t,gitdir:i,oid:N});if(H&&await e.rm(ee),z===33188)await e.write(ee,Z);else if(z===33261)await e.write(ee,Z,{mode:511});else if(z===40960)await e.writelink(ee,Z);else throw new An(`Invalid mode 0o${z.toString(8)} detected in blob ${N}`)}const P=await e.lstat(ee);z===33261&&(P.mode=493),D==="mkdir-index"&&(P.mode=57344),k.insert({filepath:O,stats:P,oid:N}),n&&await n({phase:"Updating workdir",loaded:++E,total:A})}catch(P){console.log(P)}}))}),r&&await r({previousHead:v,newHead:w,type:u!=null&&u.length>0?"file":"branch"})}if(!f){const _=await Pt.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await Pt.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await Pt.writeRef({fs:e,gitdir:i,ref:"HEAD",value:w})}}async function Tee({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let u=0;return Gu({fs:e,cache:t,dir:r,gitdir:a,trees:[po({ref:i}),$0(),Sh()],map:async function(c,[f,h,m]){if(c===".")return;if(s&&!s.some(v=>eM(c,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++u}),[!!m,!!f,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(c)?["delete",c]:void 0;case"010":switch(await f.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await f.oid(),await f.mode()];case"commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`new entry Unhandled type ${await f.type()}`]}case"011":switch(`${await f.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await f.oid()!==await h.oid()?o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]:await f.mode()!==await h.mode()?o?["update",c,await f.oid(),await f.mode(),!0]:["conflict",c]:["create-index",c,await f.oid(),await f.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${f.type}`]}case"100":return["delete-index",c];case"101":switch(await m.type()){case"tree":return["rmdir",c];case"blob":return await m.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await f.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await f.oid()&&await m.mode()===await f.mode()&&!o)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await f.oid())return o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await f.oid(),await f.mode(),await f.mode()!==await m.mode()];return await f.mode()!==await m.mode()?["update",c,await f.oid(),await f.mode(),!0]:await f.oid()!==await m.oid()?["update",c,await f.oid(),await f.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await f.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await f.type()}`]}}},reduce:async function(c,f){return f=G8(f),c?c&&c[0]==="rmdir"?(f.push(c),f):(f.unshift(c),f):f}})}async function tM({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Tt.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:u=!1,noUpdateHead:c=o===void 0,dryRun:f=!1,force:h=!1,track:m=!0,cache:g={}}){try{Qe("fs",e),Qe("dir",r),Qe("gitdir",a);const v=o||"HEAD";return await kk({fs:new nn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:s,noCheckout:u,noUpdateHead:c,dryRun:f,force:h,track:m})}catch(v){throw v.caller="git.checkout",v}}const Ree=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Hc(e){const t=Ree.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function ic({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Pt.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Pt.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:Hc(a)}function Nee(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function nM({username:e="",password:t=""}){return`Basic ${Wt.from(`${e}:${t}`).toString("base64")}`}async function U0(e,t){const n=q8(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Yb(e){let t=0;const n=[];await U0(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function TI(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function P2(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class Qr{static flush(){return Wt.from("0000","utf8")}static delim(){return Wt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Wt.from(t));const n=t.length+4,r=P2(4,n);return Wt.concat([Wt.from(r,"utf8"),t])}static streamReader(t){const n=new H8(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function RI(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function NI(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=Qr.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new R0;if(o.includes("version 2"))return RI(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new bd(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return RI(i);const[u,c]=uS(s,"\0","\\x00");if(c.split(" ").map(f=>n.add(f)),u!=="0000000000000000000000000000000000000000 capabilities^{}"){const[f,h]=uS(u," "," ");for(r.set(h,f);;){const m=await i();if(m===!0)break;if(m!==null){const[g,v]=uS(m.toString("utf8")," "," ");r.set(v,g)}}}for(const f of n)if(f.startsWith("symref=")){const h=f.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function uS(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new bd(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const II=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,OI=(e,t)=>{(t.username||t.password)&&(e.Authorization=nM(t)),t.headers&&Object.assign(e,t.headers)},cS=async e=>{try{const t=Wt.from(await Yb(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Xb{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:u,headers:c,protocolVersion:f}){let{url:h,auth:m}=TI(u);const g=o?II(o,h):h;(m.username||m.password)&&(c.Authorization=nM(m)),f===2&&(c["Git-Protocol"]="version=2");let v,w,_=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:c}),w=!1,v.statusCode===401||v.statusCode===203){const x=_?i:r;if(x){if(m=await x(h,{...m,headers:{...c}}),m&&m.cancel)throw new Ah;m&&(OI(c,m),_=!0,w=!0)}}else v.statusCode===200&&_&&a&&await a(h,m);while(w);if(v.statusCode!==200){const{response:x}=await cS(v);throw new Qf(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${s}-advertisement`){const x=await NI(v.body,{service:s});return x.auth=m,x}else{const{preview:x,response:S,data:E}=await cS(v);try{const A=await NI([E],{service:s});return A.auth=m,A}catch{throw new D0(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:u}){const c=TI(i);c&&(i=c.url),r&&(i=II(r,i)),u["content-type"]=`application/x-${a}-request`,u.accept=`application/x-${a}-result`,OI(u,o);const f=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:u});if(f.statusCode!==200){const{response:h}=cS(f);throw new Qf(f.statusCode,f.statusMessage,h)}return f}}function Iee({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class rw{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Xb),n.set("https",Xb);const r=Iee({url:t});if(!r)throw new P0(t);if(n.has(r.transport))return n.get(r.transport);throw new M0(t,r.transport,r.transport==="ssh"?Nee(t):void 0)}}let Lc=null;class jm{static async read({fs:t,gitdir:n}){Lc===null&&(Lc=new Im);const r=Tt.join(n,"shallow"),a=new Set;return await Lc.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){Lc===null&&(Lc=new Im);const a=Tt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Lc.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Lc.acquire(a,async function(){await t.rm(a)})}}async function Oee({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function jee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Tt.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,u=await Ek({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(u.error)throw new An(u.error);if(u.offsets.has(r))return!0}return!1}async function jI({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>$r({fs:e,cache:t,gitdir:n,oid:s});let o=await Oee({fs:e,gitdir:n,oid:r});return o||(o=await jee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function Dee(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function rM(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const aw={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Jy{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Mee(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function aM(e){const t=new Jy;let n="";return(async()=>(await U0(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Mee(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class iM{static demux(t){const n=Qr.streamReader(t),r=new Jy,a=new Jy,i=new Jy,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const u=s.slice(1);i.write(u),r.end(),i.end(),a.destroy(new Error(u.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function Pee(e){const{packetlines:t,packfile:n,progress:r}=iM.demux(e),a=[],i=[],o=[];let s=!1,u=!1;return new Promise((c,f)=>{U0(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Hu(g)),a.push(g)}else if(m.startsWith("unshallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Hu(g)),i.push(g)}else if(m.startsWith("ACK")){const[,g,v]=m.split(" ");o.push({oid:g,status:v}),v||(u=!0)}else m.startsWith("NAK")?(s=!0,u=!0):(u=!0,s=!0);u&&(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{u||(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function Fee({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let u=` ${e.join(" ")}`;for(const c of t)s.push(Qr.encode(`want ${c}${u}
`)),u="";for(const c of r)s.push(Qr.encode(`shallow ${c}
`));a!==null&&s.push(Qr.encode(`deepen ${a}
`)),i!==null&&s.push(Qr.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)s.push(Qr.encode(`deepen-not ${c}
`));s.push(Qr.flush());for(const c of n)s.push(Qr.encode(`have ${c}
`));return s.push(Qr.encode(`done
`)),s}async function Ck({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,ref:c,remoteRef:f,remote:h,url:m,corsProxy:g,depth:v=null,since:w=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:A={},prune:k=!1,pruneTags:D=!1}){const O=c||await ic({fs:e,gitdir:u,test:!0}),N=await ua.get({fs:e,gitdir:u}),z=h||O&&await N.get(`branch.${O}.remote`)||"origin",H=m||await N.get(`remote.${z}.url`);if(typeof H>"u")throw new Ci("remote OR url");const ee=f||O&&await N.get(`branch.${O}.merge`)||c||"HEAD";g===void 0&&(g=await N.get("http.corsProxy"));const P=rw.getRemoteHelperFor({url:H}),Z=await P.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:H,headers:A,protocolVersion:1}),V=Z.auth,fe=Z.refs;if(fe.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new Au("shallow","depth");if(w!==null&&!Z.capabilities.has("deepen-since"))throw new Au("deepen-since","since");if(_.length>0&&!Z.capabilities.has("deepen-not"))throw new Au("deepen-not","exclude");if(x===!0&&!Z.capabilities.has("deepen-relative"))throw new Au("deepen-relative","relative");const{oid:ue,fullref:Y}=Pt.resolveAgainstMap({ref:ee,map:fe});for(const Ee of fe.keys())Ee===Y||Ee==="HEAD"||Ee.startsWith("refs/heads/")||S&&Ee.startsWith("refs/tags/")||fe.delete(Ee);const X=rM([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${aw.agent}`]);x&&X.push("deepen-relative");const ae=E?[ue]:fe.values(),G=E?[O]:await Pt.listRefs({fs:e,gitdir:u,filepath:"refs"});let Q=[];for(let Ee of G)try{Ee=await Pt.expand({fs:e,gitdir:u,ref:Ee});const Ae=await Pt.resolve({fs:e,gitdir:u,ref:Ee});await jI({fs:e,cache:t,gitdir:u,oid:Ae})&&Q.push(Ae)}catch{}Q=[...new Set(Q)];const ne=await jm.read({fs:e,gitdir:u}),de=Z.capabilities.has("shallow")?[...ne]:[],_e=Fee({capabilities:X,wants:ae,haves:Q,shallows:de,depth:v,since:w,exclude:_}),ve=Wt.from(await Yb(_e)),Pe=await P.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:H,auth:V,body:[ve],headers:A}),Fe=await Pee(Pe.body);Pe.headers&&(Fe.headers=Pe.headers);for(const Ee of Fe.shallows)if(!ne.has(Ee))try{const{object:Ae}=await $r({fs:e,cache:t,gitdir:u,oid:Ee}),B=new Pr(Ae),Ce=await Promise.all(B.headers().parent.map(se=>jI({fs:e,cache:t,gitdir:u,oid:se})));Ce.length===0||Ce.every(se=>se)||ne.add(Ee)}catch{ne.add(Ee)}for(const Ee of Fe.unshallows)ne.delete(Ee);if(await jm.write({fs:e,gitdir:u,oids:ne}),E){const Ee=new Map([[Y,ue]]),Ae=new Map;let B=10,Ce=Y;for(;B--;){const ie=Z.symrefs.get(Ce);if(ie===void 0)break;Ae.set(Ce,ie),Ce=ie}const Re=fe.get(Ce);Re&&Ee.set(Ce,Re);const{pruned:se}=await Pt.updateRemoteRefs({fs:e,gitdir:u,remote:z,refs:Ee,symrefs:Ae,tags:S,prune:k});k&&(Fe.pruned=se)}else{const{pruned:Ee}=await Pt.updateRemoteRefs({fs:e,gitdir:u,remote:z,refs:fe,symrefs:Z.symrefs,tags:S,prune:k,pruneTags:D});k&&(Fe.pruned=Ee)}if(Fe.HEAD=Z.symrefs.get("HEAD"),Fe.HEAD===void 0){const{oid:Ee}=Pt.resolveAgainstMap({ref:"HEAD",map:fe});for(const[Ae,B]of fe.entries())if(Ae!=="HEAD"&&B===Ee){Fe.HEAD=Ae;break}}const Ie=Y.startsWith("refs/tags")?"tag":"branch";if(Fe.FETCH_HEAD={oid:ue,description:`${Ie} '${Hc(Y)}' of ${H}`},r||a){const Ee=aM(Fe.progress);U0(Ee,async Ae=>{if(a&&await a(Ae),r){const B=Ae.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);B&&await r({phase:B[1].trim(),loaded:parseInt(B[2],10),total:parseInt(B[3],10)})}})}const Te=Wt.from(await Yb(Fe.packfile));if(Pe.body.error)throw Pe.body.error;const Ue=Te.slice(-20).toString("hex"),Ve={defaultBranch:Fe.HEAD,fetchHead:Fe.FETCH_HEAD.oid,fetchHeadDescription:Fe.FETCH_HEAD.description};if(Fe.headers&&(Ve.headers=Fe.headers),k&&(Ve.pruned=Fe.pruned),Ue!==""&&!Dee(Te)){Ve.packfile=`objects/pack/pack-${Ue}.pack`;const Ee=Tt.join(u,Ve.packfile);await e.write(Ee,Te);const Ae=Ce=>$r({fs:e,cache:t,gitdir:u,oid:Ce}),B=await Jf.fromPack({pack:Te,getExternalRefDelta:Ae,onProgress:r});await e.write(Ee.replace(/\.pack$/,".idx"),await B.toBuffer())}return Ve}async function oM({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Tt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function Lee({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:u,dir:c,gitdir:f,url:h,corsProxy:m,ref:g,remote:v,depth:w,since:_,exclude:x,relative:S,singleBranch:E,noCheckout:A,noTags:k,headers:D}){try{if(await oM({fs:e,gitdir:f}),await Q8({fs:e,gitdir:f,remote:v,url:h,force:!1}),m){const z=await ua.get({fs:e,gitdir:f});await z.set("http.corsProxy",m),await ua.save({fs:e,gitdir:f,config:z})}const{defaultBranch:O,fetchHead:N}=await Ck({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:f,ref:g,remote:v,corsProxy:m,depth:w,since:_,exclude:x,relative:S,singleBranch:E,headers:D,tags:!k});if(N===null)return;g=g||O,g=g.replace("refs/heads/",""),await kk({fs:e,cache:t,onProgress:r,onPostCheckout:u,dir:c,gitdir:f,ref:g,remote:v,noCheckout:A})}catch(O){throw await e.rmdir(f,{recursive:!0,maxRetries:10}).catch(()=>{}),O}}async function $ee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c=Tt.join(u,".git"),url:f,corsProxy:h=void 0,ref:m=void 0,remote:g="origin",depth:v=void 0,since:w=void 0,exclude:_=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:A=!1,headers:k={},cache:D={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",c),E||Qe("dir",u),Qe("url",f),await Lee({fs:new nn(e),cache:D,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c,url:f,corsProxy:h,ref:m,remote:g,depth:v,since:w,exclude:_,relative:x,singleBranch:S,noCheckout:E,noTags:A,headers:k})}catch(O){throw O.caller="git.clone",O}}async function Bee({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g,cache:v={}}){try{Qe("fs",e),u||Qe("message",a),s&&Qe("onSign",t);const w=new nn(e);return await nw({fs:w,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u,dryRun:c,noUpdateBranch:f,ref:h,parent:m,tree:g})}catch(w){throw w.caller="git.commit",w}}async function zee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Qe("fs",e),Qe("gitdir",n),await ic({fs:new nn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Uee({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Pt.exists({fs:e,gitdir:t,ref:n}))throw new vr(n);const a=await Pt.expand({fs:e,gitdir:t,ref:n}),i=await ic({fs:e,gitdir:t,fullname:!0});if(a===i){const u=await Pt.resolve({fs:e,gitdir:t,ref:a});await Pt.writeRef({fs:e,gitdir:t,ref:"HEAD",value:u})}await Pt.deleteRef({fs:e,gitdir:t,ref:a});const o=Hc(n),s=await ua.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await ua.save({fs:e,gitdir:t,config:s})}async function qee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Uee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Hee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{Qe("fs",e),Qe("ref",r),await Pt.deleteRef({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Vee({fs:e,gitdir:t,remote:n}){const r=await ua.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await ua.save({fs:e,gitdir:t,config:r})}async function Gee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("remote",r),await Vee({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Wee({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Pt.deleteRef({fs:e,gitdir:t,ref:n})}async function Kee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Wee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Zee({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Yee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(Tt.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await Ek({fs:e,cache:t,filename:u,getExternalRefDelta:a});if(c.error)throw new An(c.error);for(const f of c.offsets.keys())f.startsWith(r)&&i.push(f)}return i}async function Xee({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>$r({fs:e,cache:t,gitdir:n,oid:s}),i=await Zee({fs:e,gitdir:n,oid:r}),o=await Yee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new C0("oids",r,i):new vr(`an object matching "${r}"`)}async function Jee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await Xee({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function Qee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Pt.expand({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function Ak({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,u)=>({index:u,oid:s}));for(;o.length;){const s=new Set;for(const{oid:c,index:f}of o)a[c]||(a[c]=new Set),a[c].add(f),a[c].size===i&&s.add(c);if(s.size>0)return[...s];const u=new Map;for(const{oid:c,index:f}of o)try{const{object:h}=await $r({fs:e,cache:t,gitdir:n,oid:c}),m=Pr.from(h),{parent:g}=m.parseHeaders();for(const v of g)(!a[v]||!a[v].has(f))&&u.set(v+":"+f,{oid:v,index:f})}catch{}o=Array.from(u.values())}return[]}const dS=/^.*(\r?\n|$)/gm;function ete({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(dS),u=a.match(dS),c=o.match(dS),f=vQ(s,u,c),h=7;let m="",g=!0;for(const v of f)v.ok&&(m+=v.ok.join("")),v.conflict&&(g=!1,m+=`${"<".repeat(h)} ${n}
`,m+=v.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=v.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:m}}async function tte({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:u="ours",baseName:c="base",theirName:f="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:g}){const v=po({ref:i}),w=po({ref:o}),_=po({ref:s}),x=[],S=[],E=[],A=[],k=await Gu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,w,_],map:async function(D,[O,N,z]){const H=Vb(D),ee=await Zb(O,N),P=await Zb(z,N);switch(`${ee}-${P}`){case"false-false":return{mode:await N.mode(),path:H,oid:await N.oid(),type:await N.type()};case"false-true":return z?{mode:await z.mode(),path:H,oid:await z.oid(),type:await z.type()}:void 0;case"true-false":return O?{mode:await O.mode(),path:H,oid:await O.oid(),type:await O.type()}:void 0;case"true-true":{if(O&&N&&z&&await O.type()==="blob"&&await N.type()==="blob"&&await z.type()==="blob")return nte({fs:e,gitdir:r,path:H,ours:O,base:N,theirs:z,ourName:u,baseName:c,theirName:f,mergeDriver:g}).then(async Z=>{if(Z.cleanMerge)m||a.insert({filepath:D,oid:Z.mergeResult.oid,stage:0});else if(x.push(D),S.push(D),!m){const V=await N.oid(),fe=await O.oid(),ue=await z.oid();a.delete({filepath:D}),a.insert({filepath:D,oid:V,stage:1}),a.insert({filepath:D,oid:fe,stage:2}),a.insert({filepath:D,oid:ue,stage:3})}return Z.mergeResult});if(N&&!O&&z&&await N.type()==="blob"&&await z.type()==="blob"){if(x.push(D),E.push(D),!m){const Z=await N.oid(),V=await z.oid();a.delete({filepath:D}),a.insert({filepath:D,oid:Z,stage:1}),a.insert({filepath:D,oid:V,stage:3})}return{mode:await z.mode(),oid:await z.oid(),type:"blob",path:H}}if(N&&O&&!z&&await N.type()==="blob"&&await O.type()==="blob"){if(x.push(D),A.push(D),!m){const Z=await N.oid(),V=await O.oid();a.delete({filepath:D}),a.insert({filepath:D,oid:Z,stage:1}),a.insert({filepath:D,oid:V,stage:2})}return{mode:await O.mode(),oid:await O.oid(),type:"blob",path:H}}if(N&&!O&&!z&&await N.type()==="blob")return;throw new kh}}},reduce:x.length!==0&&(!n||m)?void 0:async(D,O)=>{const N=O.filter(Boolean);if(D&&!(D&&D.type==="tree"&&N.length===0)){if(N.length>0){const H=new Ai(N).toObject(),ee=await Ni({fs:e,gitdir:r,type:"tree",object:H,dryRun:h});D.oid=ee}return D}}});return x.length!==0?(n&&!m&&await Gu({fs:e,cache:t,dir:n,gitdir:r,trees:[po({ref:k.oid})],map:async function(D,[O]){const N=`${n}/${D}`;if(await O.type()==="blob"){const z=await O.mode(),H=new TextDecoder().decode(await O.content());await e.write(N,H,{mode:z})}return!0}}),new Ch(x,S,E,A)):k.oid}async function nte({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:u,dryRun:c,mergeDriver:f=ete}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const g=Wt.from(await r.content()).toString("utf8"),v=Wt.from(await a.content()).toString("utf8"),w=Wt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:x}=await f({branches:[u,o,s],contents:[v,g,w],path:n}),S=await Ni({fs:e,gitdir:t,type:"blob",object:Wt.from(_,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:m,path:n,oid:S,type:h}}}async function sM({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:v,onSign:w,mergeDriver:_}){a===void 0&&(a=await ic({fs:e,gitdir:r,fullname:!0})),a=await Pt.expand({fs:e,gitdir:r,ref:a}),i=await Pt.expand({fs:e,gitdir:r,ref:i});const x=await Pt.resolve({fs:e,gitdir:r,ref:a}),S=await Pt.resolve({fs:e,gitdir:r,ref:i}),E=await Ak({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new kh;const A=E[0];if(A===S)return{oid:x,alreadyMerged:!0};if(o&&A===x)return!u&&!c&&await Pt.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(s)throw new N0;const k=await Ca.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async O=>tte({fs:e,cache:t,dir:n,gitdir:r,index:O,ourOid:x,theirOid:S,baseOid:A,ourName:Hc(a),baseName:"base",theirName:Hc(i),dryRun:u,abortOnConflict:f,mergeDriver:_}));if(k instanceof Ch)throw k;return h||(h=`Merge branch '${Hc(i)}' into ${Hc(a)}`),{oid:await nw({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[x,S],author:m,committer:g,signingKey:v,onSign:w,dryRun:u,noUpdateBranch:c}),tree:k,mergeCommit:!0}}}async function lM({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:u,gitdir:c,ref:f,url:h,remote:m,remoteRef:g,prune:v,pruneTags:w,fastForward:_,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:A,author:k,committer:D,signingKey:O}){try{if(!f){const H=await ic({fs:e,gitdir:c});if(!H)throw new Ci("ref");f=H}const{fetchHead:N,fetchHeadDescription:z}=await Ck({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:c,corsProxy:S,ref:f,url:h,remote:m,remoteRef:g,singleBranch:E,headers:A,prune:v,pruneTags:w});await sM({fs:e,cache:t,gitdir:c,ours:f,theirs:N,fastForward:_,fastForwardOnly:x,message:`Merge ${z}`,author:k,committer:D,signingKey:O,dryRun:!1,noUpdateBranch:!1}),await kk({fs:e,cache:t,onProgress:r,dir:u,gitdir:c,ref:f,remote:m,noCheckout:!1})}catch(N){throw N.caller="git.pull",N}}async function rte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=Tt.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,corsProxy:g,singleBranch:v,headers:w={},cache:_={}}){try{Qe("fs",e),Qe("http",t),Qe("gitdir",u);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await lM({fs:new nn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:w,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function ate({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=Tt.join(s,".git"),ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:v=null,since:w=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:A={},prune:k=!1,pruneTags:D=!1,cache:O={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",u),await Ck({fs:new nn(e),cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:u,ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:v,since:w,exclude:_,relative:x,tags:S,singleBranch:E,headers:A,prune:k,pruneTags:D})}catch(N){throw N.caller="git.fetch",N}}async function ite({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oids:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await Ak({fs:new nn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function uM({fs:e,filepath:t}){if(await e.exists(Tt.join(t,".git")))return t;{const n=Xf(t);if(n===t)throw new vr(`git root for ${t}`);return uM({fs:e,filepath:n})}}async function ote({fs:e,filepath:t}){try{return Qe("fs",e),Qe("filepath",t),await uM({fs:new nn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function ste({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await Om({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function lte({fs:e,gitdir:t,path:n}){return(await ua.get({fs:e,gitdir:t})).getall(n)}async function ute({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await lte({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function cte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Qe("http",e),Qe("url",i);const c=await rw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),f={capabilities:[...c.capabilities]};for(const[h,m]of c.refs){const g=h.split("/"),v=g.pop();let w=f;for(const _ of g)w[_]=w[_]||{},w=w[_];w[v]=m}for(const[h,m]of c.symrefs){const g=h.split("/"),v=g.pop();let w=f;for(const _ of g)w[_]=w[_]||{},w=w[_];w[v]=m}return f}catch(u){throw u.caller="git.getRemoteInfo",u}}function cM(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const u=i.replace("^{}",""),c=a[a.length-1],f=c.ref===u?c:a.find(h=>h.ref===u);if(f===void 0)throw new Error("I did not expect this to happen");f.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function dte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2}){try{Qe("http",e),Qe("url",i);const f=await rw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(f.protocolVersion===2)return{protocolVersion:f.protocolVersion,capabilities:f.capabilities2};const h={};for(const m of f.capabilities){const[g,v]=m.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:cM(f,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function fte({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Eh.wrap({type:e,object:t})),r=await Il(t)),{oid:r,object:t}}async function hte({object:e}){try{Qe("object",e),typeof e=="string"?e=Wt.from(e,"utf8"):e=Wt.from(e);const t="blob",{oid:n,object:r}=await fte({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function pte({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Tt.join(r,i);const o=await e.read(i),s=c=>$r({fs:e,cache:t,gitdir:a,oid:c}),u=await Jf.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await u.toBuffer()),{oids:[...u.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function mte({fs:e,onProgress:t,dir:n,gitdir:r=Tt.join(n,".git"),filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("dir",n),Qe("gitdir",n),Qe("filepath",a),await pte({fs:new nn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function gte({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Tt.join(n,".git"),defaultBranch:a="master"}){try{return Qe("fs",e),Qe("gitdir",r),t||Qe("dir",n),await oM({fs:new nn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function dM({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await jm.read({fs:e,gitdir:n});if(!r)throw new Ci("oid");if(!a)throw new Ci("ancestor");if(r===a)return!1;const s=[r],u=new Set;let c=0;for(;s.length;){if(c++===i)throw new O0(i);const f=s.shift(),{type:h,object:m}=await $r({fs:e,cache:t,gitdir:n,oid:f});if(h!=="commit")throw new mi(f,h,"commit");const g=Pr.from(m).parse();for(const v of g.parent)if(v===a)return!0;if(!o.has(f))for(const v of g.parent)u.has(v)||(s.push(v),u.add(v))}return!1}async function yte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),Qe("ancestor",a),await dM({fs:new nn(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function bte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r),Th.isIgnored({fs:new nn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function vte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("gitdir",n),Pt.listBranches({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function wte({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Pt.resolve({gitdir:t,fs:e,ref:n}),i=[];return await fM({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ca.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function fM({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await Rh({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await fM({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:Tt.join(i,s.path)}):a.push(Tt.join(i,s.path))}async function _te({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),await wte({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function xte({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Pt.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof vr)return[]}return(await Rh({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function Ste({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await xte({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Ete({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("gitdir",n),Pt.listRefs({fs:new nn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function kte({fs:e,gitdir:t}){const n=await ua.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function Cte({fs:e,dir:t,gitdir:n=Tt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),await kte({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Ate(e){const t=Qr.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const u of o){const[c,f]=u.split(":");c==="symref-target"?s.target=f:c==="peeled"&&(s.peeled=f)}n.push(s)}return n}async function Tte({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(Qr.encode(`command=ls-refs
`)),r.push(Qr.encode(`agent=${aw.agent}
`)),(n||t||e)&&r.push(Qr.delim()),n&&r.push(Qr.encode("peel")),t&&r.push(Qr.encode("symrefs")),e&&r.push(Qr.encode(`ref-prefix ${e}`)),r.push(Qr.flush()),r}async function Rte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2,prefix:c,symrefs:f,peelTags:h}){try{Qe("http",e),Qe("url",i);const m=await Xb.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(m.protocolVersion===1)return cM(m,c,f,h);const g=await Tte({prefix:c,symrefs:f,peelTags:h}),v=await Xb.connect({http:e,auth:m.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return Ate(v.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function Nte({fs:e,dir:t,gitdir:n=Tt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),Pt.listTags({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Ite(e,t){return e.committer.timestamp-t.committer.timestamp}const Ote="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function DI({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Ote)return;const i=r;let o;const s=await th({fs:e,cache:t,gitdir:n,oid:r}),u=s.tree;return a===s.oid?o=s.path:(o=await hM({fs:e,cache:t,gitdir:n,tree:u,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function hM({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const u=r.entries().map(function(c){let f;return c.oid===a?(f=Tt.join(s,c.path),o.push(f)):c.type==="tree"&&(f=$r({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return hM({fs:e,cache:t,gitdir:n,tree:Ai.from(h),fileId:a,oid:i,filepaths:o,parentPath:Tt.join(s,c.path)})})),f});return await Promise.all(u),o}async function jte({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),f=[],h=await jm.read({fs:e,gitdir:n}),m=await Pt.resolve({fs:e,gitdir:n,ref:a}),g=[await rh({fs:e,cache:t,gitdir:n,oid:m})];let v,w,_;function x(S){_&&r&&f.push(S)}for(;g.length>0;){const S=g.pop();if(c!==void 0&&S.commit.committer.timestamp<=c)break;if(r){let E;try{E=await B0({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),w&&v!==E&&f.push(w),v=E,w=S,_=!0}catch(A){if(A instanceof vr){let k=u&&v;if(k&&(k=await DI({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(w){const D=await DI({fs:e,cache:t,gitdir:n,oid:w.commit.tree,fileId:v});if(Array.isArray(D))if(k=k.filter(O=>D.indexOf(O)===-1),k.length===1)k=k[0],r=k,w&&f.push(w);else{k=!1,w&&f.push(w);break}}}else r=k,w&&f.push(w);if(!k){if(_&&v&&(f.push(w),!s))break;if(!s&&!u)throw A}w=S,_=!1}else throw A}}else f.push(S);if(i!==void 0&&f.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const A=await rh({fs:e,cache:t,gitdir:n,oid:E});g.map(k=>k.oid).includes(A.oid)||g.push(A)}g.length===0&&x(S),g.sort((E,A)=>Ite(E.commit,A.commit))}return f}async function Dte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:u,cache:c={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",a),await jte({fs:new nn(e),cache:c,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u})}catch(f){throw f.caller="git.log",f}}async function Mte({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:v,cache:w={},mergeDriver:_}){try{Qe("fs",e),v&&Qe("onSign",t);const x=new nn(e),S=await Wu({fs:x,gitdir:r,author:m});if(!S&&(!s||!o))throw new Xa("author");const E=await nh({fs:x,gitdir:r,author:S,committer:g});if(!E&&(!s||!o))throw new Xa("committer");return await sM({fs:x,cache:w,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:u,noUpdateBranch:c,abortOnConflict:f,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:_})}catch(x){throw x.caller="git.merge",x}}const Pte={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function pM({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),oids:a}){const i=new I8,o=[];function s(f,h){const m=Wt.from(f,h);o.push(m),i.update(m)}async function u({stype:f,object:h}){const m=Pte[f];let g=h.length,v=g>15?128:0;const w=g&15;g=g>>>4;let _=(v|m|w).toString(16);for(s(_,"hex");v;)v=g>127?128:0,_=v|g&127,s(P2(2,_),"hex"),g=g>>>7;s(Wt.from(await W8(h)))}s("PACK"),s("00000002","hex"),s(P2(8,a.length),"hex");for(const f of a){const{type:h,object:m}=await $r({fs:e,cache:t,gitdir:r,oid:f});await u({object:m,stype:h})}const c=i.digest();return o.push(c),o}async function Fte({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await pM({fs:e,cache:t,gitdir:n,oids:r}),o=Wt.from(await Yb(i)),u=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(Tt.join(n,`objects/pack/${u}`),o),{filename:u}):{filename:u,packfile:new Uint8Array(o)}}async function Lte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await Fte({fs:new nn(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function $te({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=Tt.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,prune:g=!1,pruneTags:v=!1,fastForward:w=!0,fastForwardOnly:_=!1,corsProxy:x,singleBranch:S,headers:E={},author:A,committer:k,signingKey:D,cache:O={}}){try{Qe("fs",e),Qe("gitdir",u);const N=new nn(e),z=await Wu({fs:N,gitdir:u,author:A});if(!z)throw new Xa("author");const H=await nh({fs:N,gitdir:u,author:z,committer:k});if(!H)throw new Xa("committer");return await lM({fs:N,cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForward:w,fastForwardOnly:_,corsProxy:x,singleBranch:S,headers:E,author:z,committer:H,signingKey:D,prune:g,pruneTags:v})}catch(N){throw N.caller="git.pull",N}}async function Bte({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),start:a,finish:i}){const o=await jm.read({fs:e,gitdir:r}),s=new Set,u=new Set;for(const h of a)s.add(await Pt.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Pt.resolve({fs:e,gitdir:r,ref:h});u.add(m)}catch{}const c=new Set;async function f(h){c.add(h);const{type:m,object:g}=await $r({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const w=ci.from(g).headers().object;return f(w)}if(m!=="commit")throw new mi(h,m,"commit");if(!o.has(h)){const w=Pr.from(g).headers().parent;for(h of w)!u.has(h)&&!c.has(h)&&await f(h)}}for(const h of s)await f(h);return c}async function fS({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:u,object:c}=await $r({fs:e,cache:t,gitdir:r,oid:s});if(u==="tag"){const h=ci.from(c).headers().object;await o(h)}else if(u==="commit"){const h=Pr.from(c).headers().tree;await o(h)}else if(u==="tree"){const f=Ai.from(c);for(const h of f)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function zte(e){const t={};let n="";const r=Qr.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new bd('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),u=o.slice(3);let c=u.indexOf(" ");c===-1&&(c=u.length);const f=u.slice(0,c),h=u.slice(c+1);t.refs[f]={ok:s==="ok",error:h}}return t}async function Ute({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(Qr.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(Qr.flush()),n}async function qte({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:u,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:v=!1,delete:w=!1,corsProxy:_,headers:x={}}){const S=f||await ic({fs:e,gitdir:c});if(typeof S>"u")throw new Ci("ref");const E=await ua.get({fs:e,gitdir:c});m=m||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const A=g||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof A>"u")throw new Ci("remote OR url");const k=h||await E.get(`branch.${S}.merge`);if(typeof A>"u")throw new Ci("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const D=await Pt.expand({fs:e,gitdir:c,ref:S}),O=w?"0000000000000000000000000000000000000000":await Pt.resolve({fs:e,gitdir:c,ref:D}),N=rw.getRemoteHelperFor({url:A}),z=await N.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:A,headers:x,protocolVersion:1}),H=z.auth;let ee;if(!k)ee=D;else try{ee=await Pt.expandAgainstMap({ref:k,map:z.refs})}catch(ne){if(ne instanceof vr)ee=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw ne}const P=z.refs.get(ee)||"0000000000000000000000000000000000000000";if(u&&!await u({remote:m,url:A,localRef:{ref:w?"(delete)":D,oid:O},remoteRef:{ref:ee,oid:P}}))throw new Ah;const Z=!z.capabilities.has("no-thin");let V=new Set;if(!w){const ne=[...z.refs.values()];let de=new Set;if(P!=="0000000000000000000000000000000000000000"){const _e=await Ak({fs:e,cache:t,gitdir:c,oids:[O,P]});for(const ve of _e)ne.push(ve);Z&&(de=await fS({fs:e,cache:t,gitdir:c,oids:_e}))}if(!ne.includes(O)){const _e=await Bte({fs:e,cache:t,gitdir:c,start:[O],finish:ne});V=await fS({fs:e,cache:t,gitdir:c,oids:_e})}if(Z){try{const _e=await Pt.resolve({fs:e,gitdir:c,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:ve}=await Pt.resolveAgainstMap({ref:_e.replace(`refs/remotes/${m}/`,""),fullref:_e,map:z.refs}),Pe=[ve];for(const Fe of await fS({fs:e,cache:t,gitdir:c,oids:Pe}))de.add(Fe)}catch{}for(const _e of de)V.delete(_e)}if(O===P&&(v=!0),!v){if(D.startsWith("refs/tags")&&P!=="0000000000000000000000000000000000000000")throw new eh("tag-exists");if(O!=="0000000000000000000000000000000000000000"&&P!=="0000000000000000000000000000000000000000"&&!await dM({fs:e,cache:t,gitdir:c,oid:O,ancestor:P,depth:-1}))throw new eh("not-fast-forward")}}const fe=rM([...z.capabilities],["report-status","side-band-64k",`agent=${aw.agent}`]),ue=await Ute({capabilities:fe,triplets:[{oldoid:P,oid:O,fullRef:ee}]}),Y=w?[]:await pM({fs:e,cache:t,gitdir:c,oids:[...V]}),X=await N.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:A,auth:H,headers:x,body:[...ue,...Y]}),{packfile:ae,progress:G}=await iM.demux(X.body);if(a){const ne=aM(G);U0(ne,async de=>{await a(de)})}const Q=await zte(ae);if(X.headers&&(Q.headers=X.headers),m&&Q.ok&&Q.refs[ee].ok&&!D.startsWith("refs/tags")){const ne=`refs/remotes/${m}/${ee.replace("refs/heads","")}`;w?await Pt.deleteRef({fs:e,gitdir:c,ref:ne}):await Pt.writeRef({fs:e,gitdir:c,ref:ne,value:O})}if(Q.ok&&Object.values(Q.refs).every(ne=>ne.ok))return Q;{const ne=Object.entries(Q.refs).filter(([de,_e])=>!_e.ok).map(([de,_e])=>`
  - ${de}: ${_e.error}`).join("");throw new I0(ne,Q)}}async function Hte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:u,gitdir:c=Tt.join(u,".git"),ref:f,remoteRef:h,remote:m="origin",url:g,force:v=!1,delete:w=!1,corsProxy:_,headers:x={},cache:S={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",c),await qte({fs:new nn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:v,delete:w,corsProxy:_,headers:x})}catch(E){throw E.caller="git.push",E}}async function mM({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await $r({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ci.from(i).parse().object,mM({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new mi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function gM({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await B0({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await mM({fs:e,cache:t,gitdir:n,oid:r})}async function Vte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await gM({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function yM({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await rh({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Gte({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Pt.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await gM({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function Wte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oid",a),await Gte({fs:new nn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function Kte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("oid",r);const u=new nn(e);i!==void 0&&(r=await B0({fs:u,cache:s,gitdir:n,oid:r,filepath:i}));const f=await $r({fs:u,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(f.oid=r,a==="parsed")switch(f.format="parsed",f.type){case"commit":f.object=Pr.from(f.object).parse();break;case"tree":f.object=Ai.from(f.object).entries();break;case"blob":o?f.object=f.object.toString(o):(f.object=new Uint8Array(f.object),f.format="content");break;case"tag":f.object=ci.from(f.object).parse();break;default:throw new mi(f.oid,f.type,"blob|commit|tag|tree")}else(f.format==="deflated"||f.format==="wrapped")&&(f.type=f.format);return f}catch(u){throw u.caller="git.readObject",u}}async function Zte({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await $r({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new mi(r,a,"tag");const o=ci.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function Yte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await Zte({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function Xte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await Rh({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function Jte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r),await Ca.acquire({fs:new nn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function Qte({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u}){let c;try{c=await Pt.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof vr))throw v}let h=(await Rh({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const m=await z0({fs:e,gitdir:r,tree:h});return await nw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:u})}async function ene({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u,cache:c={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i);const f=new nn(e),h=await Wu({fs:f,gitdir:r,author:o});if(!h)throw new Xa("author");const m=await nh({fs:f,gitdir:r,author:h,committer:s});if(!m)throw new Xa("committer");return await Qte({fs:f,cache:c,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:u})}catch(f){throw f.caller="git.removeNote",f}}async function tne({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==xs.clean(r))throw new Vo(r,xs.clean(r));if(n!==xs.clean(n))throw new Vo(n,xs.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await Pt.exists({fs:e,gitdir:t,ref:o}))throw new Ko("branch",r,!1);const u=await Pt.resolve({fs:e,gitdir:t,ref:i,depth:1});await Pt.writeRef({fs:e,gitdir:t,ref:o,value:u}),await Pt.deleteRef({fs:e,gitdir:t,ref:i});const f=await ic({fs:e,gitdir:t,fullname:!0})===i;(a||f)&&await Pt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function nne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oldref",a),await tne({fs:new nn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function bM({gitdir:e,type:t,object:n}){return Il(Eh.wrap({type:t,object:n}))}async function rne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const o=new nn(e);let s,u;try{s=await Pt.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await B0({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const f=t&&await o.read(Tt.join(t,r));f&&(u=await bM({gitdir:n,type:"blob",object:f}),s===u&&(c=await o.lstat(Tt.join(t,r)))),await Ca.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:c,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function ane({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,depth:a}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Pt.resolve({fs:new nn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function ine({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),path:r,value:a,append:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("path",r);const o=new nn(e),s=await ua.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await ua.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function vM({fs:e,gitdir:t,commit:n}){const r=Pr.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Jb{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=Jb.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const one={stage:Sh,workdir:$0};let hS;async function ah(e,t){return hS===void 0&&(hS=new Im),hS.acquire(e,t)}async function sne(e,t,n,r,a=null){const i=Tt.join(n,r),o=await e.lstat(i);if(!o)throw new vr(i);if(o.isDirectory())throw new An(`${i}: file expected, but found directory`);const s=a?await U8({fs:e,gitdir:t,oid:a}):void 0;let u=s?a:void 0;return s||await ah({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await e.readlink(i).then(K8):await e.read(i);if(c===null)throw new vr(i);u=await Ni({fs:e,gitdir:t,type:"blob",object:c})}),u}async function lne({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await z0({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await sne(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function MI({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?one[g]():g),o=[],f=await Gu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,w])=>{if(!(g==="."||await Th.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&w)return(!v||await v.oid()!==await w.oid()&&await w.oid()!==void 0)&&o.push([v,w]),{mode:await w.mode(),path:g,oid:await w.oid(),type:await w.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const w=[];for(const _ of v){const[x,S]=_;a?S&&(await e.exists(`${t}/${S.toString()}`)?w.push(_):o.push([null,S])):x&&(S?w.push(_):o.push([x,null]))}return w.length?Promise.all(w.map(g)):[]}});if(o.length===0||f.length===0)return null;const m=(await lne({fs:e,dir:t,gitdir:n,entries:f})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return z0({fs:e,gitdir:n,tree:m})}async function une({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],u=await Gu({fs:e,cache:{},dir:t,gitdir:n,trees:[po({ref:a}),po({ref:r})],map:async(c,[f,h])=>{if(c==="."||await Th.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const m=h?await h.type():await f.type();if(m!=="tree"&&m!=="blob")return;if(!h&&f){const v=m==="tree"?"rmdir":"rm";return m==="tree"&&o.push(c),m==="blob"&&i&&s.push({filepath:c,oid:await f.oid()}),{method:v,filepath:c}}const g=await h.oid();if(!f||await f.oid()!==g)return m==="tree"?{method:"mkdir",filepath:c}:(i&&s.push({filepath:c,oid:g,stats:await e.lstat(Tt.join(t,c))}),{method:"write",filepath:c,oid:g})}});await ah({fs:e,gitdir:n,dirRemoved:o,ops:u},async()=>{for(const c of u){const f=Tt.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(f);break;case"mkdir":await e.mkdir(f);break;case"rm":await e.rm(f);break;case"write":if(!o.some(h=>f.startsWith(h))){const{object:h}=await $r({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(f)&&await e.rm(f),await e.write(f,h)}break}}}),await Ca.acquire({fs:e,gitdir:n,cache:{}},async c=>{s.forEach(({filepath:f,stats:h,oid:m})=>{c.insert({filepath:f,stats:h,oid:m})})})}class El{constructor({fs:t,dir:n,gitdir:r=Tt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Tt.join(this.gitdir,El.refStash)}get refLogsStashPath(){return Tt.join(this.gitdir,El.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Wu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Xa("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return vM({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Vo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?rh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Pt.writeRef({fs:this.fs,gitdir:this.gitdir,ref:El.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Jb.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await ah({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Jb.getStashReflogEntry(r,t)}}async function cne({fs:e,dir:t,gitdir:n,message:r=""}){const a=new El({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await ic({fs:e,gitdir:n,fullname:!1}),o=await Pt.resolve({fs:e,gitdir:n,ref:"HEAD"}),u=(await yM({fs:e,dir:t,gitdir:n,oid:o})).commit.message,c=[o];let f=null,h=po({ref:"HEAD"});const m=await MI({fs:e,dir:t,gitdir:n,treePair:[po({ref:"HEAD"}),"stage"]});if(m){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:c});c.push(_),f=m,h=Sh()}const g=await MI({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(_),f=g}if(!f||!m&&!g)throw new vr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${u}`,w=await a.writeStashCommit({message:v,tree:f,parent:c});return await a.writeStashRef(w),await a.writeStashReflogEntry({stashCommit:w,message:v}),await tM({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),w}async function wM({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new El({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const c=(await rh({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await une({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:c})}}async function _M({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new El({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await ah(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const u=a.refLogsStashPath;await ah({reflogEntries:s,stashReflogPath:u,stashMgr:a},async()=>{if(s.length){await e.write(u,s.join(`
`),"utf8");const c=s[s.length-1].split(" ")[1];await a.writeStashRef(c)}else await e.rm(u)})}async function dne({fs:e,dir:t,gitdir:n}){return new El({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function fne({fs:e,dir:t,gitdir:n}){const r=new El({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await ah(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function hne({fs:e,dir:t,gitdir:n,refIdx:r=0}){await wM({fs:e,dir:t,gitdir:n,refIdx:r}),await _M({fs:e,dir:t,gitdir:n,refIdx:r})}async function pne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("op",r);const o={push:cne,apply:wM,drop:_M,list:dne,clear:fne,pop:hne},s=["apply","drop","pop"];try{const u=new nn(e);["refs","logs","logs/refs"].map(h=>Tt.join(n,h)).forEach(async h=>{await u.exists(h)||await u.mkdir(h)});const f=o[r];if(f){if(s.includes(r)&&i<0)throw new Vo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await f({fs:u,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(u){throw u.caller="git.stash",u}}async function mne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const i=new nn(e);if(await Th.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await gne({fs:i,cache:a,gitdir:n}),u=await xM({fs:i,cache:a,gitdir:n,tree:s,path:r}),c=await Ca.acquire({fs:i,gitdir:n,cache:a},async function(w){for(const _ of w)if(_.path===r)return _;return null}),f=await i.lstat(Tt.join(t,r)),h=u!==null,m=c!==null,g=f!==null,v=async()=>{if(m&&!Hb(c,f))return c.oid;{const w=await i.read(Tt.join(t,r)),_=await bM({gitdir:n,type:"blob",object:w});return m&&c.oid===_&&f.size!==-1&&Ca.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:f,oid:_})}),_}};if(!h&&!g&&!m)return"absent";if(!h&&!g&&m)return"*absent";if(!h&&g&&!m)return"*added";if(!h&&g&&m)return await v()===c.oid?"added":"*added";if(h&&!g&&!m)return"deleted";if(h&&!g&&m)return u===c.oid,"*deleted";if(h&&g&&!m)return await v()===u?"*undeleted":"*undeletemodified";if(h&&g&&m){const w=await v();return w===u?w===c.oid?"unmodified":"*unmodified":w===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function xM({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:u}=await $r({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const c=Ai.from(u);return xM({fs:e,cache:t,gitdir:n,tree:c,path:a})}if(s==="blob")throw new mi(o.oid,s,"blob",a.join("/"))}return null}async function gne({fs:e,cache:t,gitdir:n}){let r;try{r=await Pt.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof vr)return[]}const{tree:a}=await Rh({fs:e,cache:t,gitdir:n,oid:r});return a}async function yne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const u=new nn(e);return await Gu({fs:u,cache:o,dir:t,gitdir:n,trees:[po({ref:r}),$0(),Sh()],map:async function(c,[f,h,m]){if(!f&&!m&&h&&!s&&await Th.isIgnored({fs:u,dir:t,filepath:c})||!a.some(D=>eM(c,D)))return null;if(i&&!i(c))return;const[g,v,w]=await Promise.all([f&&f.type(),h&&h.type(),m&&m.type()]),_=[g,v,w].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!_)return;if(w==="commit")return null;if((w==="tree"||w==="special")&&!_)return;const x=g==="blob"?await f.oid():void 0,S=w==="blob"?await m.oid():void 0;let E;g!=="blob"&&v==="blob"&&w!=="blob"?E="42":v==="blob"&&(E=await h.oid());const A=[void 0,x,E,S],k=A.map(D=>A.indexOf(D));return k.shift(),[c,...k]}})}catch(u){throw u.caller="git.statusMatrix",u}}async function bne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,object:a,force:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const o=new nn(e);if(r===void 0)throw new Ci("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await Pt.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await Pt.exists({fs:o,gitdir:n,ref:r}))throw new Ko("tag",r);await Pt.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function vne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:u,force:c}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",a);const f=new nn(e);if(u)return await Ca.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!c){const g=await f.lstat(Tt.join(t,a));if(g){if(g.isDirectory())throw new Vu("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await f.lstat(Tt.join(t,a)),!h)throw new vr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Vu("directory")}return await Ca.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!s&&!m.has({filepath:a}))throw new vr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await f.readlink(Tt.join(t,a)):await f.read(Tt.join(t,a));i=await Ni({fs:f,gitdir:n,type:"blob",format:"content",object:v})}return m.insert({filepath:a,oid:i,stats:g}),i})}catch(f){throw f.caller="git.updateIndex",f}}function wne(){try{return aw.version}catch(e){throw e.caller="git.version",e}}async function _ne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("trees",r),await Gu({fs:new nn(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(u){throw u.caller="git.walk",u}}async function xne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),blob:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("blob",r),await Ni({fs:new nn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function Sne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),commit:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("commit",r),await vM({fs:new nn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function Ene({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const u=new nn(e);if(i==="parsed"){switch(r){case"commit":a=Pr.from(a).toObject();break;case"tree":a=Ai.from(a).toObject();break;case"blob":a=Wt.from(a,s);break;case"tag":a=ci.from(a).toObject();break;default:throw new mi(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Ni({fs:u,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(u){throw u.caller="git.writeObject",u}}async function kne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("value",a);const s=new nn(e);if(r!==xs.clean(r))throw new Vo(r,xs.clean(r));if(!i&&await Pt.exists({fs:s,gitdir:n,ref:r}))throw new Ko("ref",r);o?await Pt.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await Pt.resolve({fs:s,gitdir:n,ref:a}),await Pt.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function Cne({fs:e,gitdir:t,tag:n}){const r=ci.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function Ane({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),tag:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tag",r),await Cne({fs:new nn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function Tne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),tree:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tree",r),await z0({fs:new nn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Fr={Errors:nee,STAGE:Sh,TREE:po,WORKDIR:$0,add:wee,abortMerge:gee,addNote:xee,addRemote:See,annotatedTag:kee,branch:Aee,checkout:tM,clone:$ee,commit:Bee,getConfig:ste,getConfigAll:ute,setConfig:ine,currentBranch:zee,deleteBranch:qee,deleteRef:Hee,deleteRemote:Gee,deleteTag:Kee,expandOid:Jee,expandRef:Qee,fastForward:rte,fetch:ate,findMergeBase:ite,findRoot:ote,getRemoteInfo:cte,getRemoteInfo2:dte,hashBlob:hte,indexPack:mte,init:gte,isDescendent:yte,isIgnored:bte,listBranches:vte,listFiles:_te,listNotes:Ste,listRefs:Ete,listRemotes:Cte,listServerRefs:Rte,listTags:Nte,log:Dte,merge:Mte,packObjects:Lte,pull:$te,push:Hte,readBlob:Vte,readCommit:yM,readNote:Wte,readObject:Kte,readTag:Yte,readTree:Xte,remove:Jte,removeNote:ene,renameBranch:nne,resetIndex:rne,updateIndex:vne,resolveRef:ane,status:mne,statusMatrix:yne,tag:bne,version:wne,walk:_ne,writeBlob:xne,writeCommit:Sne,writeObject:Ene,writeRef:kne,writeTag:Ane,writeTree:Tne,stash:pne};function Rne(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Nne(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Rne(e)}async function Ine(e,t){const n=Nne(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function One(e){let t=0;const n=[];await Ine(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function jne(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Dne({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await One(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?jne(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,u]of i.headers.entries())r[s]=u;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var Dm={request:Dne};const Mm="https://cors.isomorphic-git.org",ih=new Map,SM=async e=>{const{gitUserName:t,gitUserEmail:n}=qr.getState();if(!t||!n)return ct.error("Git user name and email must be configured in Settings before committing."),!1;try{const r=await Fr.getConfig({fs:jr,dir:e,path:"user.name"}).catch(()=>null),a=await Fr.getConfig({fs:jr,dir:e,path:"user.email"}).catch(()=>null);return r!==t&&await Fr.setConfig({fs:jr,dir:e,path:"user.name",value:t}),a!==n&&await Fr.setConfig({fs:jr,dir:e,path:"user.email",value:n}),!0}catch(r){return console.error("[VFS Git Op] Error checking/setting Git config:",r),ct.error(`Failed to configure Git user: ${r instanceof Error?r.message:String(r)}`),!1}},Pm=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=ih.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return ct.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(ih.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(ct.error("Authentication cancelled: Password/token not provided."),null)},Fm=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),ih.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),ih.delete(n)),null},Lm=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!ih.has(n)&&t.username&&t.password&&(ih.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},Df=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e instanceof Error?e.message:String(e)},Mne=async e=>{const t=Wn(e),n=js(t,".git");try{return(await Ki(n)).isDirectory()}catch(r){return r instanceof Error&&r.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${t}:`,r),!1}},EM=async(e,t,n,r)=>{var i;const a=Wn(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${a}`);try{let o=!1;try{await Ki(js(a,".git")),o=!0}catch(f){if(f.code!=="ENOENT")throw f}if(o)throw console.warn(`[VFS Git Op] Clone target ${a} already contains a .git directory.`),new Error(`Repository already cloned at ${a}.`);const s=Qv(a);if(s!=="/")try{await wh(s,{recursive:!0})}catch(f){if(f.code!=="EEXIST")throw f}let u=n;if(!u)try{if(u=(i=(await Fr.getRemoteInfo({http:Dm,url:t,corsProxy:Mm,onAuth:h=>Pm(h,r),onAuthFailure:Fm,onAuthSuccess:Lm})).HEAD)==null?void 0:i.replace("refs/heads/",""),!u)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${u}`)}catch(f){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",f),new Error(`Failed to determine default branch: ${Df(f)}`)}await Fr.clone({fs:jr,http:Dm,dir:a,corsProxy:Mm,url:t,ref:u,singleBranch:!0,depth:10,onAuth:f=>Pm(f,r),onAuthFailure:Fm,onAuthSuccess:Lm,onProgress:f=>{f.phase==="counting objects"&&f.total?console.log(`Clone progress: ${f.phase} ${f.loaded}/${f.total}`):f.phase==="receiving objects"&&f.total?console.log(`Clone progress: ${f.phase} ${f.loaded}/${f.total}`):console.log(`Clone progress: ${f.phase}`)}}),await Ki(js(a,".git"));const c=await Fr.currentBranch({fs:jr,dir:a,fullname:!1}).catch(()=>null);c!==u&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${c}, expected ${u}. Checking out...`),await Fr.checkout({fs:jr,dir:a,ref:u})),ct.success(`Repository cloned successfully into ${a} (branch: ${u}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(o){console.error(`[VFS Git Op] Git clone failed for ${t}:`,o);const s=Df(o);if(o instanceof Error&&o.message.includes("already cloned")||ct.error(`Git clone failed: ${s}`),!(o instanceof Error&&o.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${a}`),await S0(a,{recursive:!0,force:!0})}catch(u){console.warn("[VFS Git Op] Failed cleanup after clone error:",u)}throw o}},kM=async e=>{const t=Wn(e);try{await Fr.init({fs:jr,dir:t}),ct.success(`Initialized empty Git repository in "${ea(t)}"`)}catch(n){throw console.error(`[VFS Git Op] Git init failed for ${t}:`,n),ct.error(`Git init failed: ${n instanceof Error?n.message:String(n)}`),n}},Tk=async(e,t)=>{const n=Wn(e);try{if(!await SM(n))throw new Error("Git user configuration is missing or invalid.");if(await Fr.add({fs:jr,dir:n,filepath:"."}),!(await Fr.statusMatrix({fs:jr,dir:n})).some(([,s])=>s!==0)){ct.info("No changes detected to commit.");return}const o=await Fr.commit({fs:jr,dir:n,message:t,author:{name:qr.getState().gitUserName,email:qr.getState().gitUserEmail}});ct.success(`Changes committed: ${o.substring(0,7)}`)}catch(r){throw console.error(`[VFS Git Op] Git commit failed for ${n}:`,r),ct.error(`Git commit failed: ${r instanceof Error?r.message:String(r)}`),r}},iw=async(e,t,n)=>{const r=Wn(e);try{if(!await SM(r))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");const i=await Fr.currentBranch({fs:jr,dir:r,fullname:!1}).catch(()=>null);if(i!==t){console.log(`[VFS Git Op] Current branch is ${i}, switching to ${t} before pull...`);try{await Fr.checkout({fs:jr,dir:r,ref:t}),console.log(`[VFS Git Op] Successfully checked out branch ${t}.`)}catch(u){if(u.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to create from origin/${t}...`);try{await Fr.fetch({fs:jr,http:Dm,dir:r,corsProxy:Mm,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:c=>Pm(c,n),onAuthFailure:Fm,onAuthSuccess:Lm}),await Fr.branch({fs:jr,dir:r,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(c){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,c),new Error(`Failed to switch to or create local branch "${t}": ${Df(c)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,u),new Error(`Failed to checkout branch "${t}": ${Df(u)}`)}}console.log(`[VFS Git Op] Fetching ${t} for ${r}`),await Fr.fetch({fs:jr,http:Dm,dir:r,corsProxy:Mm,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>Pm(u,n),onAuthFailure:Fm,onAuthSuccess:Lm}),console.log("[VFS Git Op] Fetch successful.");const o=await Fr.resolveRef({fs:jr,dir:r,ref:"FETCH_HEAD"}).catch(()=>null);if(!o)try{const u=`refs/remotes/origin/${t}`,c=await Fr.resolveRef({fs:jr,dir:r,ref:u}),f=await Fr.resolveRef({fs:jr,dir:r,ref:t});if(c===f){ct.info(`Branch "${t}" is already up-to-date.`),console.log(`[VFS Git Op] Branch ${t} already up-to-date.`);return}else console.warn(`[VFS Git Op] FETCH_HEAD missing after fetch, but remote ref ${u} exists. Proceeding with merge attempt.`)}catch(u){throw console.error("[VFS Git Op] Error resolving refs after fetch:",u),new Error(`Could not confirm remote branch "${t}" state after fetch.`)}console.log(`[VFS Git Op] Merging FETCH_HEAD (${o}) into ${t}`);const s=await Fr.merge({fs:jr,dir:r,ours:t,theirs:"FETCH_HEAD",fastForward:!1,author:{name:qr.getState().gitUserName,email:qr.getState().gitUserEmail}});if(console.log("[VFS Git Op] Merge result:",s),s.oid)await Fr.resolveRef({fs:jr,dir:r,ref:"HEAD"})===o?(ct.success(`Pulled and fast-forwarded changes for "${ea(r)}"`),console.log(`[VFS Git Op] Pull/Fast-forward successful for ${r}`)):(ct.success(`Pulled and merged changes (merge commit created) for "${ea(r)}"`),console.log(`[VFS Git Op] Pull/Merge successful (merge commit) for ${r}`));else if(s.alreadyMerged)ct.info(`Branch "${t}" is already up-to-date.`),console.log(`[VFS Git Op] Branch ${t} already up-to-date.`);else throw console.error("[VFS Git Op] Merge failed after fetch:",s),new Error("Merge failed after fetch. Conflicts likely occurred. Resolve manually.")}catch(a){throw console.error(`[VFS Git Op] Git pull (fetch/merge) failed for ${r}:`,a),ct.error(`Git pull failed: ${Df(a)}`),a}},Rk=async(e,t,n)=>{var a,i;const r=Wn(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${r}`);const o=await Fr.push({fs:jr,http:Dm,dir:r,corsProxy:Mm,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:s=>Pm(s,n),onAuthFailure:Fm,onAuthSuccess:Lm});if(o!=null&&o.ok)ct.success(`Pushed changes successfully for "${ea(r)}"`);else if((a=o==null?void 0:o.error)!=null&&a.includes("up-to-date"))ct.info(`Branch "${t}" already up-to-date on remote.`);else throw(i=o==null?void 0:o.error)!=null&&i.includes("rejected")?(ct.error(`Push rejected for "${ea(r)}". Pull changes first.`),new Error(o.error)):new Error((o==null?void 0:o.error)||"Push rejected by remote")}catch(o){throw console.error(`[VFS Git Op] Git push failed for ${r}:`,o),o instanceof Error&&o.message.includes("rejected")||ct.error(`Git push failed: ${Df(o)}`),o}},CM=async e=>{const t=Wn(e);console.log(`[VFS Git Op] Git Status on ${t}`);try{const n=await Fr.statusMatrix({fs:jr,dir:t});console.log("Git Status Matrix:",n);const r=n.map(([a,i,o,s])=>{let u="";return s===2&&(u+="INDEX_Modified "),s===3&&(u+="INDEX_Added "),i===0&&o===2?u+="WT_New":i===1&&o===2?u+="WT_Modified":i===1&&o===0?u+="WT_Deleted":i===1&&o===1&&s===0&&(u="Unmodified"),(!u||u==="INDEX_Unmodified ")&&(u=`h:${i} w:${o} s:${s}`),`${a}: ${u.trim()}`}).filter(a=>!a.endsWith("Unmodified")).join(`
`);ct.info(`Git Status for "${ea(t)}":
${r||"No changes"}`,{duration:15e3})}catch(n){throw console.error(`[VFS Git Op] Git status failed for ${t}:`,n),ct.error(`Git status failed: ${n instanceof Error?n.message:String(n)}`),n}},td=async e=>{const t=Wn(e);if(t!=="/")try{await wh(t,{recursive:!0})}catch(n){if(n instanceof Error&&n.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${t}`);return}throw console.error(`[VFS Op] Failed to create directory ${t}:`,n),ct.error(`Error creating directory "${ea(t)}": ${n instanceof Error?n.message:String(n)}`),n}},Pne=async e=>{try{const t={backend:$J,name:`litechat_vfs_${e}`};return await IJ(t),jr}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),ct.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},Nk=async e=>{const t=Wn(e);try{try{await Ki(t)}catch(o){if(o.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${t}`),await td(t),[];throw o}const r=(await nc(t)).map(async o=>{const s=js(t,o);try{const u=await Ki(s);return{name:o,path:s,isDirectory:u.isDirectory(),size:u.size,lastModified:u.mtime}}catch(u){return console.error(`[VFS Op] Failed to stat ${s}:`,u),null}});return(await Promise.all(r)).filter(o=>o!==null)}catch(n){throw console.error(`[VFS Op] Failed to list directory ${t}:`,n),ct.error(`Error listing files: ${n instanceof Error?n.message:String(n)}`),n}},q0=async e=>{const t=Wn(e);try{const n=await _0(t);return Ei.emit(Ub.VFS_FILE_READ,{path:t}),n}catch(n){throw console.error(`[VFS Op] Failed to read file ${t}:`,n),ct.error(`Error reading file "${ea(t)}": ${n instanceof Error?n.message:String(n)}`),n}},ow=async(e,t)=>{const n=Wn(e),r=Qv(n);try{r!=="/"&&await td(r),await x0(n,t),Ei.emit(Ub.VFS_FILE_WRITTEN,{path:n})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${n}:`,a),ct.error(`Error writing file "${ea(n)}": ${a instanceof Error?a.message:String(a)}`)),a}},Ik=async(e,t=!1)=>{const n=Wn(e);if(n==="/")throw ct.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await Ki(n)).isDirectory()?(await S0(n,{recursive:t}),Ei.emit(Ub.VFS_FILE_DELETED,{path:n})):(await w0(n),Ei.emit(Ub.VFS_FILE_DELETED,{path:n})),ct.success(`"${ea(n)}" deleted.`)}catch(r){if(r instanceof Error&&r.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${n}`);return}throw console.error(`[VFS Op] Failed to delete ${n}:`,r),ct.error(`Error deleting "${ea(n)}": ${r instanceof Error?r.message:String(r)}`),r}},AM=async e=>{await td(e)},Fne=async(e,t)=>{try{const n=await q0(e),r=new Blob([n]),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a;const o=Wn(e);i.download=t||ea(o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(n){console.error(`[VFS Op] Failed to initiate download for ${e}:`,n),n instanceof Error&&n.message.includes("Error reading file")||ct.error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}},TM=async(e,t)=>{const n=Wn(t);let r=0,a=0;const i=Array.from(e);try{await td(n);for(const o of i){const s=js(n,o.name);try{const u=await o.arrayBuffer();await ow(s,new Uint8Array(u)),r++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${o.name}:`,u)}}}catch(o){a=i.length,console.error(`[VFS Op] Failed to prepare target directory ${n} for upload:`,o)}finally{a>0&&r>0?ct.warning(`Upload complete with issues. ${r} succeeded, ${a} failed.`):a===0&&r>0&&ct.success(`Successfully uploaded ${r} file(s) to ${n==="/"?"root":ea(n)}.`)}},Lne=async(e,t)=>{if(!e.name.toLowerCase().endsWith(".zip")){ct.error("Please select a valid ZIP file.");return}const n=Wn(t);let r;try{await td(n),r=await N8.loadAsync(e);const a=Object.values(r.files),i=await Promise.allSettled(a.map(async c=>{const f=js(n,c.name);if(c.dir)await td(f);else{const h=await c.async("uint8array");await ow(f,h)}return{name:c.name,isDir:c.dir}}));let o=0,s=0,u=0;i.forEach(c=>{c.status==="fulfilled"&&c.value?c.value.isDir?s++:o++:c.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",c.reason))}),u>0?ct.warning(`Finished extracting "${e.name}". ${o+s} items succeeded, ${u} failed.`):ct.success(`Successfully extracted ${o} files and ${s} folders from "${e.name}" to ${n==="/"?"root":ea(n)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),ct.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},PI=async(e,t="/")=>{const n=new N8,r=Wn(t),a=ea(r)||"root";try{try{if(!(await Ki(r)).isDirectory()){ct.error(`Cannot export: "${a}" is not a directory.`);return}}catch(f){f instanceof Error&&f.code==="ENOENT"?ct.error(`Cannot export: Path "${a}" not found.`):ct.error(`Cannot export: Error accessing path "${a}". ${f instanceof Error?f.message:String(f)}`);return}const i=async(f,h)=>{const m=await Nk(f);for(const g of m)if(g.isDirectory){if(g.name===".git")continue;const v=h.folder(g.name);if(v)await i(g.path,v);else throw new Error(`Failed to create subfolder ${g.name} in zip.`)}else{const v=await q0(g.path);h.file(g.name,v)}};await i(r,n);const o=await n.generateAsync({type:"blob"}),s=URL.createObjectURL(o),u=document.createElement("a");u.href=s;const c=`vfs_${a}_export.zip`;u.download=e||c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s),ct.success(`"${a}" exported as ${u.download}.`)}catch(i){console.error("[VFS Op] Failed to download all as zip:",i),i instanceof Error&&(i.message.includes("Error listing files")||i.message.includes("Error reading file")||i.message.includes("Cannot export"))||ct.error(`ZIP export failed: ${i instanceof Error?i.message:String(i)}`)}},RM=async(e,t)=>{const n=Wn(e),r=Wn(t);if(n==="/"||r==="/")throw ct.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(n!==r)try{const a=Qv(r);a!=="/"&&await td(a),await pk(n,r),ct.success(`Renamed "${ea(n)}" to "${ea(r)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||ct.error(`Rename failed: Original item "${ea(n)}" not found.`):a instanceof Error&&a.code==="EEXIST"?ct.error(`Rename failed: An item named "${ea(r)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||ct.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${n} to ${r}:`,a),a}},$ne=1024*5,Bne=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},zne=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},Une=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],qne=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:Une.some(r=>n.endsWith(r))},NM=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=L.useState(null),[i,o]=L.useState(null),[s,u]=L.useState(!1),[c,f]=L.useState(!1),h=e.type||"application/octet-stream",m=qne(e.name,h),g=h.startsWith("image/"),v=h.startsWith("audio/"),w=h.startsWith("video/");L.useEffect(()=>{let k=null;return o(null),!m&&e.contentBase64?(k=Bne(e.contentBase64,h),k||o("Failed to decode file content for preview."),a(k)):a(null),()=>{k&&(URL.revokeObjectURL(k),a(null))}},[e.contentBase64,h,m]),L.useEffect(()=>{m&&e.contentText&&e.contentText.length>$ne?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):m&&e.contentText===void 0&&o("Text content missing from metadata.")},[e.contentText,e.size,m]);const _=async()=>{if(e.source==="vfs"){ct.info("File is already in VFS.");return}const k=zne(e);if(!k){ct.error("Cannot add to VFS: Failed to reconstruct file data.");return}u(!0);try{await TM([k],"/"),ct.success(`"${e.name}" added to VFS root.`)}catch(D){console.error("Failed to add file to VFS:",D),ct.error(`Failed to add "${e.name}" to VFS.`)}finally{u(!1)}},x=()=>f(k=>!k),S=()=>m?y.jsx(a7,{className:"h-5 w-5 text-blue-500"}):g?y.jsx(E7,{className:"h-5 w-5 text-purple-500"}):v?y.jsx(j7,{className:"h-5 w-5 text-green-500"}):w?y.jsx(lz,{className:"h-5 w-5 text-orange-500"}):y.jsx(n7,{className:"h-5 w-5 text-muted-foreground"}),E=()=>i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(Ff,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):m&&e.contentText!==void 0?y.jsx(_D,{lang:h==="text/markdown"?"markdown":"text",code:e.contentText}):g&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):v&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):w&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),A=L.useMemo(()=>{let k="File";return m?k="Text":g?k="Image":v?k="Audio":w&&(k="Video"),`${k} (${qb(e.size)})`},[m,g,v,w,e.size]);return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-2",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[S(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",qb(e.size),")"]}),e.source==="vfs"&&e.path&&y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-blue-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(Nn,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:x,"aria-label":c?"Unfold preview":"Fold preview",children:y.jsx(l6,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:c?"Unfold":"Fold"})]})}),!n&&t&&y.jsxs(y.Fragment,{children:[e.source==="direct"&&y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:_,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Xn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(c6,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{children:"Add to VFS"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(Zu,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{children:"Remove from Prompt"})]})})]})]})]}),c?y.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:x,children:A}):y.jsx("div",{className:Ht("p-2 max-h-80 overflow-y-auto"),children:E()})]})},IM=6048e5,Hne=864e5,Py=43200,FI=1440,LI=Symbol.for("constructDateFrom");function Ol(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&LI in e?e[LI](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ra(e,t){return Ol(t||e,e)}let Vne={};function H0(){return Vne}function $m(e,t){var s,u,c,f;const n=H0(),r=(t==null?void 0:t.weekStartsOn)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,a=Ra(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Qb(e,t){return $m(e,{...t,weekStartsOn:1})}function OM(e,t){const n=Ra(e,t==null?void 0:t.in),r=n.getFullYear(),a=Ol(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Qb(a),o=Ol(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=Qb(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function ev(e){const t=Ra(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function sw(e,...t){const n=Ol.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function $I(e,t){const n=Ra(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Gne(e,t,n){const[r,a]=sw(n==null?void 0:n.in,e,t),i=$I(r),o=$I(a),s=+i-ev(i),u=+o-ev(o);return Math.round((s-u)/Hne)}function Wne(e,t){const n=OM(e,t),r=Ol(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Qb(r)}function Qy(e,t){const n=+Ra(e)-+Ra(t);return n<0?-1:n>0?1:n}function Kne(e){return Ol(e,Date.now())}function Zne(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Yne(e){return!(!Zne(e)&&typeof e!="number"||isNaN(+Ra(e)))}function Xne(e,t,n){const[r,a]=sw(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function Jne(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function Qne(e,t){return+Ra(e)-+Ra(t)}function ere(e,t){const n=Ra(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function tre(e,t){const n=Ra(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function nre(e,t){const n=Ra(e,t==null?void 0:t.in);return+ere(n,t)==+tre(n,t)}function rre(e,t,n){const[r,a,i]=sw(n==null?void 0:n.in,e,e,t),o=Qy(a,i),s=Math.abs(Xne(a,i));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*s);let u=Qy(a,i)===-o;nre(r)&&s===1&&Qy(r,i)===1&&(u=!1);const c=o*(s-+u);return c===0?0:c}function are(e,t,n){const r=Qne(e,t)/1e3;return Jne(n==null?void 0:n.roundingMethod)(r)}function ire(e,t){const n=Ra(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ore={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sre=(e,t,n)=>{let r;const a=ore[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function pS(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const lre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ure={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dre={date:pS({formats:lre,defaultWidth:"full"}),time:pS({formats:ure,defaultWidth:"full"}),dateTime:pS({formats:cre,defaultWidth:"full"})},fre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},hre=(e,t,n,r)=>fre[e];function Hp(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const pre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},wre=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_re={ordinalNumber:wre,era:Hp({values:pre,defaultWidth:"wide"}),quarter:Hp({values:mre,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Hp({values:gre,defaultWidth:"wide"}),day:Hp({values:yre,defaultWidth:"wide"}),dayPeriod:Hp({values:bre,defaultWidth:"wide",formattingValues:vre,defaultFormattingWidth:"wide"})};function Vp(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?Sre(s,h=>h.test(o)):xre(s,h=>h.test(o));let c;c=e.valueCallback?e.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(o.length);return{value:c,rest:f}}}function xre(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Sre(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Ere(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const kre=/^(\d+)(th|st|nd|rd)?/i,Cre=/\d+/i,Are={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tre={any:[/^b/i,/^(a|c)/i]},Rre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Nre={any:[/1/i,/2/i,/3/i,/4/i]},Ire={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ore={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Dre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Pre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Fre={ordinalNumber:Ere({matchPattern:kre,parsePattern:Cre,valueCallback:e=>parseInt(e,10)}),era:Vp({matchPatterns:Are,defaultMatchWidth:"wide",parsePatterns:Tre,defaultParseWidth:"any"}),quarter:Vp({matchPatterns:Rre,defaultMatchWidth:"wide",parsePatterns:Nre,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Vp({matchPatterns:Ire,defaultMatchWidth:"wide",parsePatterns:Ore,defaultParseWidth:"any"}),day:Vp({matchPatterns:jre,defaultMatchWidth:"wide",parsePatterns:Dre,defaultParseWidth:"any"}),dayPeriod:Vp({matchPatterns:Mre,defaultMatchWidth:"any",parsePatterns:Pre,defaultParseWidth:"any"})},jM={code:"en-US",formatDistance:sre,formatLong:dre,formatRelative:hre,localize:_re,match:Fre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Lre(e,t){const n=Ra(e,t==null?void 0:t.in);return Gne(n,ire(n))+1}function $re(e,t){const n=Ra(e,t==null?void 0:t.in),r=+Qb(n)-+Wne(n);return Math.round(r/IM)+1}function DM(e,t){var f,h,m,g;const n=Ra(e,t==null?void 0:t.in),r=n.getFullYear(),a=H0(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(m=a.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Ol((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=$m(o,t),u=Ol((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=$m(u,t);return+n>=+s?r+1:+n>=+c?r:r-1}function Bre(e,t){var s,u,c,f;const n=H0(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,a=DM(e,t),i=Ol((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),$m(i,t)}function zre(e,t){const n=Ra(e,t==null?void 0:t.in),r=+$m(n,t)-+Bre(n,t);return Math.round(r/IM)+1}function cr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const xu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return cr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):cr(n+1,2)},d(e,t){return cr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return cr(e.getHours()%12||12,t.length)},H(e,t){return cr(e.getHours(),t.length)},m(e,t){return cr(e.getMinutes(),t.length)},s(e,t){return cr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return cr(a,t.length)}},vf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},BI={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return xu.y(e,t)},Y:function(e,t,n,r){const a=DM(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return cr(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):cr(i,t.length)},R:function(e,t){const n=OM(e);return cr(n,t.length)},u:function(e,t){const n=e.getFullYear();return cr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return cr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return cr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return xu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return cr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=zre(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):cr(a,t.length)},I:function(e,t,n){const r=$re(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):cr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):xu.d(e,t)},D:function(e,t,n){const r=Lre(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):cr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return cr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return cr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return cr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=vf.noon:r===0?a=vf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=vf.evening:r>=12?a=vf.afternoon:r>=4?a=vf.morning:a=vf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return xu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):xu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):xu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):xu.s(e,t)},S:function(e,t){return xu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return UI(r);case"XXXX":case"XX":return $c(r);case"XXXXX":case"XXX":default:return $c(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return UI(r);case"xxxx":case"xx":return $c(r);case"xxxxx":case"xxx":default:return $c(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+zI(r,":");case"OOOO":default:return"GMT"+$c(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+zI(r,":");case"zzzz":default:return"GMT"+$c(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return cr(r,t.length)},T:function(e,t,n){return cr(+e,t.length)}};function zI(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+cr(i,2)}function UI(e,t){return e%60===0?(e>0?"-":"+")+cr(Math.abs(e)/60,2):$c(e,t)}function $c(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=cr(Math.trunc(r/60),2),i=cr(r%60,2);return n+a+t+i}const qI=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},MM=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Ure=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return qI(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",qI(r,t)).replace("{{time}}",MM(a,t))},qre={p:MM,P:Ure},Hre=/^D+$/,Vre=/^Y+$/,Gre=["D","DD","YY","YYYY"];function Wre(e){return Hre.test(e)}function Kre(e){return Vre.test(e)}function Zre(e,t,n){const r=Yre(e,t,n);if(console.warn(r),Gre.includes(e))throw new RangeError(r)}function Yre(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Xre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qre=/^'([^]*?)'?$/,eae=/''/g,tae=/[a-zA-Z]/;function HI(e,t,n){var f,h,m,g;const r=H0(),a=r.locale??jM,i=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,s=Ra(e,n==null?void 0:n.in);if(!Yne(s))throw new RangeError("Invalid time value");let u=t.match(Jre).map(v=>{const w=v[0];if(w==="p"||w==="P"){const _=qre[w];return _(v,a.formatLong)}return v}).join("").match(Xre).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:nae(v)};if(BI[w])return{isToken:!0,value:v};if(w.match(tae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(u=a.localize.preprocessor(s,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(v=>{if(!v.isToken)return v.value;const w=v.value;(Kre(w)||Wre(w))&&Zre(w,t,String(e));const _=BI[w[0]];return _(s,w,a.localize,c)}).join("")}function nae(e){const t=e.match(Qre);return t?t[1].replace(eae,"'"):e}function rae(e,t,n){const r=H0(),a=(n==null?void 0:n.locale)??r.locale??jM,i=2520,o=Qy(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[u,c]=sw(n==null?void 0:n.in,...o>0?[t,e]:[e,t]),f=are(c,u),h=(ev(c)-ev(u))/1e3,m=Math.round((f-h)/60);let g;if(m<2)return n!=null&&n.includeSeconds?f<5?a.formatDistance("lessThanXSeconds",5,s):f<10?a.formatDistance("lessThanXSeconds",10,s):f<20?a.formatDistance("lessThanXSeconds",20,s):f<40?a.formatDistance("halfAMinute",0,s):f<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):m===0?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",m,s);if(m<45)return a.formatDistance("xMinutes",m,s);if(m<90)return a.formatDistance("aboutXHours",1,s);if(m<FI){const v=Math.round(m/60);return a.formatDistance("aboutXHours",v,s)}else{if(m<i)return a.formatDistance("xDays",1,s);if(m<Py){const v=Math.round(m/FI);return a.formatDistance("xDays",v,s)}else if(m<Py*2)return g=Math.round(m/Py),a.formatDistance("aboutXMonths",g,s)}if(g=rre(c,u),g<12){const v=Math.round(m/Py);return a.formatDistance("xMonths",v,s)}else{const v=g%12,w=Math.trunc(g/12);return v<3?a.formatDistance("aboutXYears",w,s):v<9?a.formatDistance("overXYears",w,s):a.formatDistance("almostXYears",w+1,s)}}function PM(e,t){return rae(e,Kne(e),t)}const Ok=wt.memo(({turnData:e,timestamp:t,className:n})=>{var o,s;const r=t?PM(new Date(t),{addSuffix:!0}):"Sending...",a=((o=e.metadata)==null?void 0:o.attachedFiles)&&e.metadata.attachedFiles.length>0,i=e.content&&e.content.trim().length>0;return y.jsxs("div",{className:Ht("user-prompt",n),children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"User"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:r})]}),a&&y.jsx("div",{className:"mb-2 space-y-1",children:(s=e.metadata.attachedFiles)==null?void 0:s.map(u=>y.jsx(NM,{fileMeta:u,isReadOnly:!0},u.id))}),i&&y.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:e.content})]})});Ok.displayName="UserPromptDisplay";const VI={};function aae(e){let t=VI[e];if(t)return t;t=VI[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function oh(e,t){typeof t!="string"&&(t=oh.defaultChars);const n=aae(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const u=parseInt(r.slice(i+4,i+6),16);if((u&192)===128){const c=s<<6&1984|u&63;c<128?a+="":a+=String.fromCharCode(c),i+=3;continue}}if((s&240)===224&&i+6<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const f=s<<12&61440|u<<6&4032|c&63;f<2048||f>=55296&&f<=57343?a+="":a+=String.fromCharCode(f),i+=6;continue}}if((s&248)===240&&i+9<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),f=parseInt(r.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(f&192)===128){let h=s<<18&1835008|u<<12&258048|c<<6&4032|f&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}oh.defaultChars=";/?:@&=+$,#";oh.componentChars="";const GI={};function iae(e){let t=GI[e];if(t)return t;t=GI[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function V0(e,t,n){typeof t!="string"&&(n=t,t=V0.defaultChars),typeof n>"u"&&(n=!0);const r=iae(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const u=e.charCodeAt(i+1);if(u>=56320&&u<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}V0.defaultChars=";/?:@&=+$,-_.!~*'()#";V0.componentChars="-_.!~*'()";function jk(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function tv(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const oae=/^([a-z0-9.+-]+:)/i,sae=/:[0-9]*$/,lae=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,uae=["<",">",'"',"`"," ","\r",`
`,"	"],cae=["{","}","|","\\","^","`"].concat(uae),dae=["'"].concat(cae),WI=["%","/","?",";","#"].concat(dae),KI=["/","?","#"],fae=255,ZI=/^[+a-z0-9A-Z_-]{0,63}$/,hae=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,YI={javascript:!0,"javascript:":!0},XI={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Dk(e,t){if(e&&e instanceof tv)return e;const n=new tv;return n.parse(e,t),n}tv.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=lae.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=oae.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&YI[o])&&(i=i.substr(2),this.slashes=!0)),!YI[o]&&(a||o&&!XI[o])){let c=-1;for(let v=0;v<KI.length;v++)r=i.indexOf(KI[v]),r!==-1&&(c===-1||r<c)&&(c=r);let f,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(f=i.slice(0,h),i=i.slice(h+1),this.auth=f),c=-1;for(let v=0;v<WI.length;v++)r=i.indexOf(WI[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const m=i.slice(0,c);i=i.slice(c),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let w=0,_=v.length;w<_;w++){const x=v[w];if(x&&!x.match(ZI)){let S="";for(let E=0,A=x.length;E<A;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(ZI)){const E=v.slice(0,w),A=v.slice(w+1),k=x.match(hae);k&&(E.push(k[1]),A.unshift(k[2])),A.length&&(i=A.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>fae&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),XI[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};tv.prototype.parseHost=function(e){let t=sae.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const pae=Object.freeze(Object.defineProperty({__proto__:null,decode:oh,encode:V0,format:jk,parse:Dk},Symbol.toStringTag,{value:"Module"})),FM=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,LM=/[\0-\x1F\x7F-\x9F]/,mae=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Mk=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,$M=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,BM=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,gae=Object.freeze(Object.defineProperty({__proto__:null,Any:FM,Cc:LM,Cf:mae,P:Mk,S:$M,Z:BM},Symbol.toStringTag,{value:"Module"})),yae=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),bae=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var mS;const vae=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),wae=(mS=String.fromCodePoint)!==null&&mS!==void 0?mS:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function _ae(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=vae.get(e))!==null&&t!==void 0?t:e}var ka;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ka||(ka={}));const xae=32;var Tu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Tu||(Tu={}));function F2(e){return e>=ka.ZERO&&e<=ka.NINE}function Sae(e){return e>=ka.UPPER_A&&e<=ka.UPPER_F||e>=ka.LOWER_A&&e<=ka.LOWER_F}function Eae(e){return e>=ka.UPPER_A&&e<=ka.UPPER_Z||e>=ka.LOWER_A&&e<=ka.LOWER_Z||F2(e)}function kae(e){return e===ka.EQUALS||Eae(e)}var xa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(xa||(xa={}));var ku;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(ku||(ku={}));class Cae{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=xa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ku.Strict}startEntity(t){this.decodeMode=t,this.state=xa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case xa.EntityStart:return t.charCodeAt(n)===ka.NUM?(this.state=xa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=xa.NamedEntity,this.stateNamedEntity(t,n));case xa.NumericStart:return this.stateNumericStart(t,n);case xa.NumericDecimal:return this.stateNumericDecimal(t,n);case xa.NumericHex:return this.stateNumericHex(t,n);case xa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|xae)===ka.LOWER_X?(this.state=xa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=xa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(F2(a)||Sae(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(F2(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ka.SEMI)this.consumed+=1;else if(this.decodeMode===ku.Strict)return 0;return this.emitCodePoint(_ae(this.result),this.consumed),this.errors&&(t!==ka.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Tu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Aae(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===ku.Attribute&&(i===0||kae(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Tu.VALUE_LENGTH)>>14,i!==0){if(o===ka.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==ku.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Tu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Tu.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case xa.NamedEntity:return this.result!==0&&(this.decodeMode!==ku.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case xa.NumericDecimal:return this.emitNumericEntity(0,2);case xa.NumericHex:return this.emitNumericEntity(0,3);case xa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case xa.EntityStart:return 0}}}function zM(e){let t="";const n=new Cae(e,r=>t+=wae(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const c=n.write(a,s+1);if(c<0){o=s+n.end();break}o=s+c,s=c===0?o+1:o}const u=t+a.slice(o);return t="",u}}function Aae(e,t,n,r){const a=(t&Tu.BRANCH_LENGTH)>>7,i=t&Tu.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=a?-1:e[n+u]-1}let o=n,s=o+a-1;for(;o<=s;){const u=o+s>>>1,c=e[u];if(c<r)o=u+1;else if(c>r)s=u-1;else return e[u+a]}return-1}const Tae=zM(yae);zM(bae);function UM(e,t=ku.Legacy){return Tae(e,t)}function Rae(e){return Object.prototype.toString.call(e)}function Pk(e){return Rae(e)==="[object String]"}const Nae=Object.prototype.hasOwnProperty;function Iae(e,t){return Nae.call(e,t)}function lw(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function qM(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function Fk(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function nv(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const HM=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Oae=/&([a-z#][a-z0-9]{1,31});/gi,jae=new RegExp(HM.source+"|"+Oae.source,"gi"),Dae=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Mae(e,t){if(t.charCodeAt(0)===35&&Dae.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return Fk(r)?nv(r):e}const n=UM(e);return n!==e?n:e}function Pae(e){return e.indexOf("\\")<0?e:e.replace(HM,"$1")}function sh(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(jae,function(t,n,r){return n||Mae(t,r)})}const Fae=/[&<>"]/,Lae=/[&<>"]/g,$ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Bae(e){return $ae[e]}function Ku(e){return Fae.test(e)?e.replace(Lae,Bae):e}const zae=/[.?*+^$[\]\\(){}|-]/g;function Uae(e){return e.replace(zae,"\\$&")}function Tr(e){switch(e){case 9:case 32:return!0}return!1}function Bm(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function zm(e){return Mk.test(e)||$M.test(e)}function Um(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function uw(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const qae={mdurl:pae,ucmicro:gae},Hae=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:qM,assign:lw,escapeHtml:Ku,escapeRE:Uae,fromCodePoint:nv,has:Iae,isMdAsciiPunct:Um,isPunctChar:zm,isSpace:Tr,isString:Pk,isValidEntityCode:Fk,isWhiteSpace:Bm,lib:qae,normalizeReference:uw,unescapeAll:sh,unescapeMd:Pae},Symbol.toStringTag,{value:"Module"}));function Vae(e,t,n){let r,a,i,o;const s=e.posMax,u=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=u,-1}}let c=-1;return a&&(c=e.pos),e.pos=u,c}function Gae(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=sh(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=sh(e.slice(t,a)),i.pos=a,i.ok=!0),i}function Wae(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=sh(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=sh(e.slice(t,i)),o}const Kae=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Gae,parseLinkLabel:Vae,parseLinkTitle:Wae},Symbol.toStringTag,{value:"Module"})),Fs={};Fs.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Ku(i.content)+"</code>"};Fs.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Ku(e[t].content)+`</code></pre>
`};Fs.fence=function(e,t,n,r,a){const i=e[t],o=i.info?sh(i.info).trim():"";let s="",u="";if(o){const f=o.split(/(\s+)/g);s=f[0],u=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,s,u)||Ku(i.content):c=Ku(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];f<0?h.push(["class",n.langPrefix+s]):(h[f]=h[f].slice(),h[f][1]+=" "+n.langPrefix+s);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${c}</code></pre>
`};Fs.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};Fs.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Fs.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Fs.text=function(e,t){return Ku(e[t].content)};Fs.html_block=function(e,t){return e[t].content};Fs.html_inline=function(e,t){return e[t].content};function Nh(){this.rules=lw({},Fs)}Nh.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Ku(t.attrs[n][0])+'="'+Ku(t.attrs[n][1])+'"';return a};Nh.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};Nh.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};Nh.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Nh.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Ti(){this.__rules__=[],this.__cache__=null}Ti.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ti.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ti.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Ti.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ti.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ti.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ti.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ti.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Zo(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Zo.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};Zo.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Zo.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};Zo.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Zo.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function VM(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}VM.prototype.Token=Zo;const Zae=/\r\n?|\n/g,Yae=/\0/g;function Xae(e){let t;t=e.src.replace(Zae,`
`),t=t.replace(Yae,""),e.src=t}function Jae(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Qae(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function eie(e){return/^<a[>\s]/i.test(e)}function tie(e){return/^<\/a\s*>/i.test(e)}function nie(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(eie(s.content)&&i>0&&i--,tie(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const u=s.content;let c=e.md.linkify.match(u);const f=[];let h=s.level,m=0;c.length>0&&c[0].index===0&&o>0&&a[o-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const v=c[g].url,w=e.md.normalizeLink(v);if(!e.md.validateLink(w))continue;let _=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const x=c[g].index;if(x>m){const k=new e.Token("text","",0);k.content=u.slice(m,x),k.level=h,f.push(k)}const S=new e.Token("link_open","a",1);S.attrs=[["href",w]],S.level=h++,S.markup="linkify",S.info="auto",f.push(S);const E=new e.Token("text","",0);E.content=_,E.level=h,f.push(E);const A=new e.Token("link_close","a",-1);A.level=--h,A.markup="linkify",A.info="auto",f.push(A),m=c[g].lastIndex}if(m<u.length){const g=new e.Token("text","",0);g.content=u.slice(m),g.level=h,f.push(g)}t[n].children=a=qM(a,o,f)}}}}const GM=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,rie=/\((c|tm|r)\)/i,aie=/\((c|tm|r)\)/ig,iie={c:"",r:"",tm:""};function oie(e,t){return iie[t.toLowerCase()]}function sie(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(aie,oie)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function lie(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&GM.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function uie(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(rie.test(e.tokens[t].content)&&sie(e.tokens[t].children),GM.test(e.tokens[t].content)&&lie(e.tokens[t].children))}const cie=/['"]/,JI=/['"]/g,QI="";function Fy(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function die(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,u=0,c=s.length;e:for(;u<c;){JI.lastIndex=u;const f=JI.exec(s);if(!f)break;let h=!0,m=!0;u=f.index+1;const g=f[0]==="'";let v=32;if(f.index-1>=0)v=s.charCodeAt(f.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let w=32;if(u<c)w=s.charCodeAt(u);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){w=e[n].content.charCodeAt(0);break}const _=Um(v)||zm(String.fromCharCode(v)),x=Um(w)||zm(String.fromCharCode(w)),S=Bm(v),E=Bm(w);if(E?h=!1:x&&(S||_||(h=!1)),S?m=!1:_&&(E||x||(m=!1)),w===34&&f[0]==='"'&&v>=48&&v<=57&&(m=h=!1),h&&m&&(h=_,m=x),!h&&!m){g&&(i.content=Fy(i.content,f.index,QI));continue}if(m)for(n=r.length-1;n>=0;n--){let A=r[n];if(r[n].level<o)break;if(A.single===g&&r[n].level===o){A=r[n];let k,D;g?(k=t.md.options.quotes[2],D=t.md.options.quotes[3]):(k=t.md.options.quotes[0],D=t.md.options.quotes[1]),i.content=Fy(i.content,f.index,D),e[A.token].content=Fy(e[A.token].content,A.pos,k),u+=D.length-1,A.token===a&&(u+=k.length-1),s=i.content,c=s.length,r.length=n;continue e}}h?r.push({token:a,pos:f.index,single:g,level:o}):m&&g&&(i.content=Fy(i.content,f.index,QI))}}}function fie(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!cie.test(e.tokens[t].content)||die(e.tokens[t].children,e)}function hie(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const gS=[["normalize",Xae],["block",Jae],["inline",Qae],["linkify",nie],["replacements",uie],["smartquotes",fie],["text_join",hie]];function Lk(){this.ruler=new Ti;for(let e=0;e<gS.length;e++)this.ruler.push(gS[e][0],gS[e][1])}Lk.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};Lk.prototype.State=VM;function Ls(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,u=0,c=a.length,f=!1;o<c;o++){const h=a.charCodeAt(o);if(!f)if(Tr(h)){s++,h===9?u+=4-u%4:u++;continue}else f=!0;(h===10||o===c-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(u),this.bsCount.push(0),f=!1,s=0,u=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Ls.prototype.push=function(e,t,n){const r=new Zo(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Ls.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Ls.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Ls.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Tr(r))break}return t};Ls.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Tr(this.src.charCodeAt(--t)))return t+1;return t};Ls.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Ls.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Ls.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let u=0;const c=this.bMarks[s];let f=c,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];f<h&&u<r;){const m=this.src.charCodeAt(f);if(Tr(m))m===9?u+=4-(u+this.bsCount[s])%4:u++;else if(f-c<this.tShift[s])u++;else break;f++}u>r?i[o]=new Array(u-r+1).join(" ")+this.src.slice(f,h):i[o]=this.src.slice(f,h)}return i.join("")};Ls.prototype.Token=Zo;const pie=65536;function yS(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function e4(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function mie(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!Tr(s)||o===45&&Tr(s))return!1;for(;i<e.eMarks[a];){const A=e.src.charCodeAt(i);if(A!==124&&A!==45&&A!==58&&!Tr(A))return!1;i++}let u=yS(e,t+1),c=u.split("|");const f=[];for(let A=0;A<c.length;A++){const k=c[A].trim();if(!k){if(A===0||A===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?f.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?f.push("left"):f.push("")}if(u=yS(e,t).trim(),u.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=e4(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==f.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),w=[t,0];v.map=w;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let A=0;A<c.length;A++){const k=e.push("th_open","th",1);f[A]&&(k.attrs=[["style","text-align:"+f[A]]]);const D=e.push("inline","",0);D.content=c[A].trim(),D.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let A=!1;for(let D=0,O=g.length;D<O;D++)if(g[D](e,a,n,!0)){A=!0;break}if(A||(u=yS(e,a).trim(),!u)||e.sCount[a]-e.blkIndent>=4||(c=e4(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>pie))break;if(a===t+2){const D=e.push("tbody_open","tbody",1);D.map=S=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let D=0;D<h;D++){const O=e.push("td_open","td",1);f[D]&&(O.attrs=[["style","text-align:"+f[D]]]);const N=e.push("inline","",0);N.content=c[D]?c[D].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),w[1]=a,e.parentType=m,e.line=a,!0}function gie(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function yie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let u=a-s;if(u<3)return!1;const c=e.src.slice(s,a),f=e.src.slice(a,i);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<u)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}u=e.sCount[t],e.line=h+(m?1:0);const g=e.push("fence","code",0);return g.info=f,g.content=e.getLines(t+1,h,u,!0),g.markup=c,g.map=[t,e.line],!0}function bie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],u=[],c=[],f=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,D,O;e.src.charCodeAt(a)===32?(a++,k++,O=!1,D=!0):e.src.charCodeAt(a)===9?(D=!0,(e.bsCount[v]+k)%4===3?(a++,k++,O=!1):O=!0):D=!1;let N=k;for(s.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const z=e.src.charCodeAt(a);if(Tr(z))z===9?N+=4-(N+e.bsCount[v]+(O?1:0))%4:N++;else break;a++}g=a>=i,u.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(D?1:0),c.push(e.sCount[v]),e.sCount[v]=N-k,f.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let A=!1;for(let k=0,D=h.length;k<D;k++)if(h[k](e,v,n,!0)){A=!0;break}if(A){e.lineMax=v,e.blkIndent!==0&&(s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]=-1}const w=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const x=[t,0];_.map=x,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=o,e.parentType=m,x[1]=e.line;for(let E=0;E<f.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=f[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=u[E];return e.blkIndent=w,!0}function vie(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const c=e.src.charCodeAt(i++);if(c!==o&&!Tr(c))return!1;c===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const u=e.push("hr","hr",0);return u.map=[t,e.line],u.markup=Array(s+1).join(String.fromCharCode(o)),!0}function t4(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Tr(i))return-1}return r}function n4(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Tr(i))?-1:a}function wie(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function _ie(e,t,n,r){let a,i,o,s,u=t,c=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[u]>=e.blkIndent&&(f=!0);let h,m,g;if((g=n4(e,u))>=0){if(h=!0,o=e.bMarks[u]+e.tShift[u],m=Number(e.src.slice(o,g-1)),f&&m!==1)return!1}else if((g=t4(e,u))>=0)h=!1;else return!1;if(f&&e.skipSpaces(g)>=e.eMarks[u])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),w=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),m!==1&&(s.attrs=[["start",m]])):s=e.push("bullet_list_open","ul",1);const _=[u,0];s.map=_,s.markup=String.fromCharCode(v);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";u<n;){i=g,a=e.eMarks[u];const A=e.sCount[u]+g-(e.bMarks[u]+e.tShift[u]);let k=A;for(;i<a;){const fe=e.src.charCodeAt(i);if(fe===9)k+=4-(k+e.bsCount[u])%4;else if(fe===32)k++;else break;i++}const D=i;let O;D>=a?O=1:O=k-A,O>4&&(O=1);const N=A+O;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(v);const z=[u,0];s.map=z,h&&(s.info=e.src.slice(o,g-1));const H=e.tight,ee=e.tShift[u],P=e.sCount[u],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[u]=D-e.bMarks[u],e.sCount[u]=k,D>=a&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,u,n,!0),(!e.tight||x)&&(c=!1),x=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[u]=ee,e.sCount[u]=P,e.tight=H,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(v),u=e.line,z[1]=u,u>=n||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let V=!1;for(let fe=0,ue=S.length;fe<ue;fe++)if(S[fe](e,u,n,!0)){V=!0;break}if(V)break;if(h){if(g=n4(e,u),g<0)break;o=e.bMarks[u]+e.tShift[u]}else if(g=t4(e,u),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(v),_[1]=u,e.line=u,e.parentType=E,c&&wie(e,w),!0}function xie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let A=!1;if(e.sCount[S]-e.blkIndent>3&&(A=!0),e.sCount[S]<0&&(A=!0),!A){const O=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let z=!1;for(let H=0,ee=O.length;H<ee;H++)if(O[H](e,S,E,!0)){z=!0;break}if(e.parentType=N,z)return null}const k=e.bMarks[S]+e.tShift[S],D=e.eMarks[S];return e.src.slice(k,D+1)}let u=e.src.slice(a,i+1);i=u.length;let c=-1;for(a=1;a<i;a++){const S=u.charCodeAt(a);if(S===91)return!1;if(S===93){c=a;break}else if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(S===92&&(a++,a<i&&u.charCodeAt(a)===10)){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}const f=e.md.helpers.parseLinkDestination(u,a,i);if(!f.ok)return!1;const h=e.md.normalizeLink(f.str);if(!e.md.validateLink(h))return!1;a=f.pos;const m=a,g=o,v=a;for(;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}let w=e.md.helpers.parseLinkTitle(u,a,i);for(;w.can_continue;){const S=s(o);if(S===null)break;u+=S,a=i,i=u.length,o++,w=e.md.helpers.parseLinkTitle(u,a,i,w)}let _;for(a<i&&v!==a&&w.ok?(_=w.str,a=w.pos):(_="",a=m,o=g);a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10&&_)for(_="",a=m,o=g;a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10)return!1;const x=uw(u.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:_,href:h}),e.line=o),!0):!1}const Sie=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Eie="[a-zA-Z_:][a-zA-Z0-9:._-]*",kie="[^\"'=<>`\\x00-\\x20]+",Cie="'[^']*'",Aie='"[^"]*"',Tie="(?:"+kie+"|"+Cie+"|"+Aie+")",Rie="(?:\\s+"+Eie+"(?:\\s*=\\s*"+Tie+")?)",WM="<[A-Za-z][A-Za-z0-9\\-]*"+Rie+"*\\s*\\/?>",KM="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Nie="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Iie="<[?][\\s\\S]*?[?]>",Oie="<![A-Za-z][^>]*>",jie="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Die=new RegExp("^(?:"+WM+"|"+KM+"|"+Nie+"|"+Iie+"|"+Oie+"|"+jie+")"),Mie=new RegExp("^(?:"+WM+"|"+KM+")"),wf=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Sie.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Mie.source+"\\s*$"),/^$/,!1]];function Pie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<wf.length&&!wf[s][0].test(o);s++);if(s===wf.length)return!1;if(r)return wf[s][2];let u=t+1;if(!wf[s][1].test(o)){for(;u<n&&!(e.sCount[u]<e.blkIndent);u++)if(a=e.bMarks[u]+e.tShift[u],i=e.eMarks[u],o=e.src.slice(a,i),wf[s][1].test(o)){o.length!==0&&u++;break}}e.line=u;const c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}function Fie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!Tr(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const u=e.skipCharsBack(i,35,a);u>a&&Tr(e.src.charCodeAt(u-1))&&(i=u),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(a,i).trim(),f.map=[t,e.line],f.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function Lie(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const v=e.eMarks[s];if(g<v&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=v))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let m=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,s,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const u=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=u,f.map=[t,e.line-1],f.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function $ie(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](e,i,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const u=e.push("inline","",0);return u.content=o,u.map=[t,e.line],u.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const Ly=[["table",mie,["paragraph","reference"]],["code",gie],["fence",yie,["paragraph","reference","blockquote","list"]],["blockquote",bie,["paragraph","reference","blockquote","list"]],["hr",vie,["paragraph","reference","blockquote","list"]],["list",_ie,["paragraph","reference","blockquote"]],["reference",xie],["html_block",Pie,["paragraph","reference","blockquote"]],["heading",Fie,["paragraph","reference","blockquote"]],["lheading",Lie],["paragraph",$ie]];function cw(){this.ruler=new Ti;for(let e=0;e<Ly.length;e++)this.ruler.push(Ly[e][0],Ly[e][1],{alt:(Ly[e][2]||[]).slice()})}cw.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const u=e.line;let c=!1;for(let f=0;f<a;f++)if(c=r[f](e,o,n,!1),c){if(u>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};cw.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};cw.prototype.State=Ls;function G0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}G0.prototype.pushPending=function(){const e=new Zo("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};G0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Zo(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};G0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,u=Um(a)||zm(String.fromCharCode(a)),c=Um(s)||zm(String.fromCharCode(s)),f=Bm(a),h=Bm(s),m=!h&&(!c||f||u),g=!f&&(!u||h||c);return{can_open:m&&(t||!g||u),can_close:g&&(t||!m||c),length:o}};G0.prototype.Token=Zo;function Bie(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function zie(e,t){let n=e.pos;for(;n<e.posMax&&!Bie(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Uie=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function qie(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(Uie);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const u=e.md.normalizeLink(s);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function Hie(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Tr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const $k=[];for(let e=0;e<256;e++)$k.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){$k[e.charCodeAt(0)]=1});function Vie(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Tr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&$k[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function Gie(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let u=n,c;for(;(c=e.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&e.src.charCodeAt(u)===96;)u++;const f=u-c;if(f===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=u,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function Wie(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let u=0;u<i;u+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function r4(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function Kie(e){const t=e.tokens_meta,n=e.tokens_meta.length;r4(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&r4(e,t[r].delimiters)}const ZM={tokenize:Wie,postProcess:Kie};function Zie(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function a4(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),u=e.tokens[a.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?s+s:s,u.content="";const c=e.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?s+s:s,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function Yie(e){const t=e.tokens_meta,n=e.tokens_meta.length;a4(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&a4(e,t[r].delimiters)}const YM={tokenize:Zie,postProcess:Yie};function Xie(e,t){let n,r,a,i,o="",s="",u=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,h=e.posMax,m=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(c=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(v>=h)return!1;if(u=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?v=a.pos:o="",u=v;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&u!==v&&a.ok)for(s=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(u=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(u,v++):v=g+1):v=g+1,r||(r=e.src.slice(m,g)),i=e.env.references[uw(r)],!i)return e.pos=f,!1;o=i.href,s=i.title}if(!t){e.pos=m,e.posMax=g;const w=e.push("link_open","a",1),_=[["href",o]];w.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function Jie(e,t){let n,r,a,i,o,s,u,c,f="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(i>=m)return!1;for(c=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(f=e.md.normalizeLink(s.str),e.md.validateLink(f)?i=s.pos:f=""),c=i;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&c!==i&&s.ok)for(u=s.str,i=s.pos;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);else u="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(c,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),o=e.env.references[uw(a)],!o)return e.pos=h,!1;f=o.href,u=o.title}if(!t){r=e.src.slice(g,v);const w=[];e.md.inline.parse(r,e.md,e.env,w);const _=e.push("image","img",0),x=[["src",f],["alt",""]];_.attrs=x,_.children=w,_.content=r,u&&x.push(["title",u])}return e.pos=i,e.posMax=m,!0}const Qie=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,eoe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function toe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(eoe.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(Qie.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function noe(e){return/^<a[>\s]/i.test(e)}function roe(e){return/^<\/a\s*>/i.test(e)}function aoe(e){const t=e|32;return t>=97&&t<=122}function ioe(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!aoe(a))return!1;const i=e.src.slice(r).match(Die);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],noe(o.content)&&e.linkLevel++,roe(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const ooe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,soe=/^&([a-z][a-z0-9]{1,31});/i;function loe(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(ooe);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=Fk(o)?nv(o):nv(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(soe);if(i){const o=UM(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function i4(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[s.marker][(s.open?3:0)+s.length%3];let c=r-i[r]-1,f=c;for(;c>u;c-=i[c]+1){const h=e[c];if(h.marker===s.marker&&h.open&&h.end<0){let m=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(m=!0),!m){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[o]=o-c+g,i[c]=g,s.open=!1,h.end=o,h.close=!1,f=-1,a=-2;break}}}f!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=f)}}function uoe(e){const t=e.tokens_meta,n=e.tokens_meta.length;i4(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&i4(t[r].delimiters)}function coe(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const bS=[["text",zie],["linkify",qie],["newline",Hie],["escape",Vie],["backticks",Gie],["strikethrough",ZM.tokenize],["emphasis",YM.tokenize],["link",Xie],["image",Jie],["autolink",toe],["html_inline",ioe],["entity",loe]],vS=[["balance_pairs",uoe],["strikethrough",ZM.postProcess],["emphasis",YM.postProcess],["fragments_join",coe]];function W0(){this.ruler=new Ti;for(let e=0;e<bS.length;e++)this.ruler.push(bS[e][0],bS[e][1]);this.ruler2=new Ti;for(let e=0;e<vS.length;e++)this.ruler2.push(vS[e][0],vS[e][1])}W0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};W0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};W0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};W0.prototype.State=G0;function doe(e){const t={};e=e||{},t.src_Any=FM.source,t.src_Cc=LM.source,t.src_Z=BM.source,t.src_P=Mk.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function L2(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function dw(e){return Object.prototype.toString.call(e)}function foe(e){return dw(e)==="[object String]"}function hoe(e){return dw(e)==="[object Object]"}function poe(e){return dw(e)==="[object RegExp]"}function o4(e){return dw(e)==="[object Function]"}function moe(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const XM={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function goe(e){return Object.keys(e||{}).reduce(function(t,n){return t||XM.hasOwnProperty(n)},!1)}const yoe={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},boe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",voe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function woe(e){e.__index__=-1,e.__text_cache__=""}function _oe(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function s4(){return function(e,t){t.normalize(e)}}function rv(e){const t=e.re=doe(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(boe),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,u){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+u)}Object.keys(e.__schemas__).forEach(function(s){const u=e.__schemas__[s];if(u===null)return;const c={validate:null,link:null};if(e.__compiled__[s]=c,hoe(u)){poe(u.validate)?c.validate=_oe(u.validate):o4(u.validate)?c.validate=u.validate:i(s,u),o4(u.normalize)?c.normalize=u.normalize:u.normalize?i(s,u):c.normalize=s4();return}if(foe(u)){a.push(s);return}i(s,u)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:s4()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(moe).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),woe(e)}function xoe(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function $2(e,t){const n=new xoe(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Zi(e,t){if(!(this instanceof Zi))return new Zi(e,t);t||goe(e)&&(t=e,e={}),this.__opts__=L2({},XM,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=L2({},yoe,e),this.__compiled__={},this.__tlds__=voe,this.__tlds_replaced__=!1,this.re={},rv(this)}Zi.prototype.add=function(t,n){return this.__schemas__[t]=n,rv(this),this};Zi.prototype.set=function(t){return this.__opts__=L2(this.__opts__,t),this};Zi.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,u,c,f;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],u.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};Zi.prototype.pretest=function(t){return this.re.pretest.test(t)};Zi.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Zi.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push($2(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push($2(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Zi.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,$2(this,0)):null};Zi.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),rv(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,rv(this),this)};Zi.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Zi.prototype.onCompile=function(){};const Mf=2147483647,Ss=36,Bk=1,qm=26,Soe=38,Eoe=700,JM=72,QM=128,eP="-",koe=/^xn--/,Coe=/[^\0-\x7F]/,Aoe=/[\x2E\u3002\uFF0E\uFF61]/g,Toe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},wS=Ss-Bk,Es=Math.floor,_S=String.fromCharCode;function Eu(e){throw new RangeError(Toe[e])}function Roe(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function tP(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Aoe,".");const a=e.split("."),i=Roe(a,t).join(".");return r+i}function nP(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const Noe=e=>String.fromCodePoint(...e),Ioe=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Ss},l4=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},rP=function(e,t,n){let r=0;for(e=n?Es(e/Eoe):e>>1,e+=Es(e/t);e>wS*qm>>1;r+=Ss)e=Es(e/wS);return Es(r+(wS+1)*e/(e+Soe))},aP=function(e){const t=[],n=e.length;let r=0,a=QM,i=JM,o=e.lastIndexOf(eP);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&Eu("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const u=r;for(let f=1,h=Ss;;h+=Ss){s>=n&&Eu("invalid-input");const m=Ioe(e.charCodeAt(s++));m>=Ss&&Eu("invalid-input"),m>Es((Mf-r)/f)&&Eu("overflow"),r+=m*f;const g=h<=i?Bk:h>=i+qm?qm:h-i;if(m<g)break;const v=Ss-g;f>Es(Mf/v)&&Eu("overflow"),f*=v}const c=t.length+1;i=rP(r-u,c,u==0),Es(r/c)>Mf-a&&Eu("overflow"),a+=Es(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},iP=function(e){const t=[];e=nP(e);const n=e.length;let r=QM,a=0,i=JM;for(const u of e)u<128&&t.push(_S(u));const o=t.length;let s=o;for(o&&t.push(eP);s<n;){let u=Mf;for(const f of e)f>=r&&f<u&&(u=f);const c=s+1;u-r>Es((Mf-a)/c)&&Eu("overflow"),a+=(u-r)*c,r=u;for(const f of e)if(f<r&&++a>Mf&&Eu("overflow"),f===r){let h=a;for(let m=Ss;;m+=Ss){const g=m<=i?Bk:m>=i+qm?qm:m-i;if(h<g)break;const v=h-g,w=Ss-g;t.push(_S(l4(g+v%w,0))),h=Es(v/w)}t.push(_S(l4(h,0))),i=rP(a,c,s===o),a=0,++s}++a,++r}return t.join("")},Ooe=function(e){return tP(e,function(t){return koe.test(t)?aP(t.slice(4).toLowerCase()):t})},joe=function(e){return tP(e,function(t){return Coe.test(t)?"xn--"+iP(t):t})},oP={version:"2.3.1",ucs2:{decode:nP,encode:Noe},decode:aP,encode:iP,toASCII:joe,toUnicode:Ooe},Doe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Moe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Poe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Foe={default:Doe,zero:Moe,commonmark:Poe},Loe=/^(vbscript|javascript|file|data):/,$oe=/^data:image\/(gif|png|jpeg|webp);/;function Boe(e){const t=e.trim().toLowerCase();return Loe.test(t)?$oe.test(t):!0}const sP=["http:","https:","mailto:"];function zoe(e){const t=Dk(e,!0);if(t.hostname&&(!t.protocol||sP.indexOf(t.protocol)>=0))try{t.hostname=oP.toASCII(t.hostname)}catch{}return V0(jk(t))}function Uoe(e){const t=Dk(e,!0);if(t.hostname&&(!t.protocol||sP.indexOf(t.protocol)>=0))try{t.hostname=oP.toUnicode(t.hostname)}catch{}return oh(jk(t),oh.defaultChars+"%")}function yo(e,t){if(!(this instanceof yo))return new yo(e,t);t||Pk(e)||(t=e||{},e="default"),this.inline=new W0,this.block=new cw,this.core=new Lk,this.renderer=new Nh,this.linkify=new Zi,this.validateLink=Boe,this.normalizeLink=zoe,this.normalizeLinkText=Uoe,this.utils=Hae,this.helpers=lw({},Kae),this.options={},this.configure(e),t&&this.set(t)}yo.prototype.set=function(e){return lw(this.options,e),this};yo.prototype.configure=function(e){const t=this;if(Pk(e)){const n=e;if(e=Foe[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};yo.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};yo.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};yo.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};yo.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};yo.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};yo.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};yo.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const xS=new yo({html:!1,linkify:!0,breaks:!0});function qoe(e){return L.useMemo(()=>{var n;if(!e)return[];try{const r=xS.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const u=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:u,code:s.content}),o++}else{const u=[];for(;o<r.length&&r[o].type!=="fence";)u.push(r[o]),o++;u.length>0&&(i+=xS.renderer.render(u,xS.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const lP=({markdownContent:e,isStreaming:t=!1,className:n})=>{const r=qr(o=>o.enableStreamingMarkdown),a=qoe(e),i=L.useMemo(()=>a.map((o,s)=>{if(typeof o=="string")return y.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:o}},`html-${s}`);if(o.type==="code"){const u=o;return y.jsx(_D,{lang:u.lang,code:u.code},`code-${s}`)}return null}),[a,t]);return e!=null&&e.trim()?t&&!r?y.jsx("pre",{className:Ht("whitespace-pre-wrap text-sm",n),children:e}):y.jsx("div",{className:Ht(n),children:i}):y.jsx("div",{className:Ht("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."})},uP=wt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var v,w;const{dbProviderConfigs:i,getAllAvailableModelDefsForProvider:o}=fi(Hn(_=>({dbProviderConfigs:_.dbProviderConfigs,getAllAvailableModelDefsForProvider:_.getAllAvailableModelDefsForProvider}))),s=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e.id)},u=()=>{t&&t(e.id)},c=()=>{r&&r(e.id)},f=e.endedAt?PM(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=L.useMemo(()=>{var O;const _=(O=e.metadata)==null?void 0:O.modelId;if(!_)return"Unknown Model";const{providerId:x,modelId:S}=l0(_);if(!x||!S)return _;const E=i.find(N=>N.id===x),A=(E==null?void 0:E.name)??x,D=o(x).find(N=>N.id===S);return`${(D==null?void 0:D.name)??S} (${A})`},[(v=e.metadata)==null?void 0:v.modelId,i,o]),m=e.status==="COMPLETED"||e.status==="ERROR",g=e.status==="ERROR";return y.jsxs("div",{className:Ht("group relative rounded-lg border bg-card p-4 shadow-sm transition-colors hover:bg-muted/50",g?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&y.jsx(Ok,{turnData:e.prompt,timestamp:e.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",h,")"]}),y.jsx("span",{className:"text-xs text-muted-foreground",children:f})]}),g&&((w=e.metadata)==null?void 0:w.error)&&y.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[y.jsx("p",{className:"font-semibold",children:"Error:"}),y.jsx("p",{children:e.metadata.error})]}),y.jsx(lP,{markdownContent:e.response,isStreaming:!1})]}),m&&y.jsx("div",{className:"absolute bottom-1 right-1 flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-card/80 backdrop-blur-sm p-0.5 rounded",children:y.jsxs(jn,{delayDuration:100,children:[r&&y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:c,"aria-label":"Edit User Prompt",children:y.jsx(GS,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]}),t&&y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:u,"aria-label":"Regenerate Response",children:y.jsx(yv,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Regenerate"})]}),n&&y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:s,"aria-label":"Delete Interaction",children:y.jsx(Iu,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})]})})]})});uP.displayName="InteractionCard";const Hoe=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:r,size:n,onClick:e,className:t,"aria-label":a,children:y.jsx(tz,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Stop"})]})}),B2=wt.memo(({interactionId:e,onStop:t,className:n})=>{var c;const{interaction:r,bufferedContent:a}=Qn(Hn(f=>({interaction:f.interactions.find(m=>m.id===e),bufferedContent:f.activeStreamBuffers[e]??""}))),{dbProviderConfigs:i,getAllAvailableModelDefsForProvider:o}=fi(Hn(f=>({dbProviderConfigs:f.dbProviderConfigs,getAllAvailableModelDefsForProvider:f.getAllAvailableModelDefsForProvider}))),s=L.useMemo(()=>{var x;const f=(x=r==null?void 0:r.metadata)==null?void 0:x.modelId;if(!f)return"Loading Model...";const{providerId:h,modelId:m}=l0(f);if(!h||!m)return f;const g=i.find(S=>S.id===h),v=(g==null?void 0:g.name)??h,_=o(h).find(S=>S.id===m);return`${(_==null?void 0:_.name)??m} (${v})`},[(c=r==null?void 0:r.metadata)==null?void 0:c.modelId,i,o]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),y.jsxs("div",{className:Ht("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[y.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const u=()=>{t&&t(e)};return y.jsxs("div",{className:Ht("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&y.jsx(Ok,{turnData:r.prompt,timestamp:r.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",s,")"]}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx(lP,{markdownContent:a,isStreaming:!0})]}),t&&y.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:y.jsx(Hoe,{onStop:u,"aria-label":"Stop Generation"})})]})});B2.displayName="StreamingInteractionCard";var Voe=L.createContext(void 0);function Ih(e){const t=L.useContext(Voe);return e||t||"ltr"}function Hm(e,[t,n]){return Math.min(n,Math.max(t,e))}function Goe(e,t){return L.useReducer((n,r)=>t[n][r]??n,e)}var zk="ScrollArea",[cP,kge]=Ri(zk),[Woe,_o]=cP(zk),dP=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,u]=L.useState(null),[c,f]=L.useState(null),[h,m]=L.useState(null),[g,v]=L.useState(null),[w,_]=L.useState(null),[x,S]=L.useState(0),[E,A]=L.useState(0),[k,D]=L.useState(!1),[O,N]=L.useState(!1),z=xn(t,ee=>u(ee)),H=Ih(a);return y.jsx(Woe,{scope:n,type:r,dir:H,scrollHideDelay:i,scrollArea:s,viewport:c,onViewportChange:f,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:_,scrollbarYEnabled:O,onScrollbarYEnabledChange:N,onCornerWidthChange:S,onCornerHeightChange:A,children:y.jsx(an.div,{dir:H,...o,ref:z,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});dP.displayName=zk;var fP="ScrollAreaViewport",hP=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=_o(fP,n),s=L.useRef(null),u=xn(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(an.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});hP.displayName=fP;var $s="ScrollAreaScrollbar",pP=L.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_o($s,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return L.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(Koe,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(Zoe,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(mP,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(Uk,{...r,ref:t}):null});pP.displayName=$s;var Koe=L.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_o($s,e.__scopeScrollArea),[i,o]=L.useState(!1);return L.useEffect(()=>{const s=a.scrollArea;let u=0;if(s){const c=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(Na,{present:n||i,children:y.jsx(mP,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Zoe=L.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_o($s,e.__scopeScrollArea),i=e.orientation==="horizontal",o=hw(()=>u("SCROLL_END"),100),[s,u]=Goe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return L.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,a.scrollHideDelay,u]),L.useEffect(()=>{const c=a.viewport,f=i?"scrollLeft":"scrollTop";if(c){let h=c[f];const m=()=>{const g=c[f];h!==g&&(u("SCROLL"),o()),h=g};return c.addEventListener("scroll",m),()=>c.removeEventListener("scroll",m)}},[a.viewport,i,u,o]),y.jsx(Na,{present:n||s!=="hidden",children:y.jsx(Uk,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:zt(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:zt(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),mP=L.forwardRef((e,t)=>{const n=_o($s,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=L.useState(!1),s=e.orientation==="horizontal",u=hw(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?c:f)}},10);return lh(n.viewport,u),lh(n.content,u),y.jsx(Na,{present:r||i,children:y.jsx(Uk,{"data-state":i?"visible":"hidden",...a,ref:t})})}),Uk=L.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=_o($s,e.__scopeScrollArea),i=L.useRef(null),o=L.useRef(0),[s,u]=L.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=wP(s.viewport,s.content),f={...r,sizes:s,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,g){return tse(m,o.current,s,g)}return n==="horizontal"?y.jsx(Yoe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=u4(m,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?y.jsx(Xoe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=u4(m,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),Yoe=L.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=_o($s,e.__scopeScrollArea),[o,s]=L.useState(),u=L.useRef(null),c=xn(t,u,i.onScrollbarXChange);return L.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(yP,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":fw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),xP(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:iv(o.paddingLeft),paddingEnd:iv(o.paddingRight)}})}})}),Xoe=L.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=_o($s,e.__scopeScrollArea),[o,s]=L.useState(),u=L.useRef(null),c=xn(t,u,i.onScrollbarYChange);return L.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(yP,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":fw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),xP(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:iv(o.paddingTop),paddingEnd:iv(o.paddingBottom)}})}})}),[Joe,gP]=cP($s),yP=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:f,onResize:h,...m}=e,g=_o($s,n),[v,w]=L.useState(null),_=xn(t,z=>w(z)),x=L.useRef(null),S=L.useRef(""),E=g.viewport,A=r.content-r.viewport,k=Ea(f),D=Ea(u),O=hw(h,10);function N(z){if(x.current){const H=z.clientX-x.current.left,ee=z.clientY-x.current.top;c({x:H,y:ee})}}return L.useEffect(()=>{const z=H=>{const ee=H.target;(v==null?void 0:v.contains(ee))&&k(H,A)};return document.addEventListener("wheel",z,{passive:!1}),()=>document.removeEventListener("wheel",z,{passive:!1})},[E,v,A,k]),L.useEffect(D,[r,D]),lh(v,O),lh(g.content,O),y.jsx(Joe,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ea(i),onThumbPointerUp:Ea(o),onThumbPositionChange:D,onThumbPointerDown:Ea(s),children:y.jsx(an.div,{...m,ref:_,style:{position:"absolute",...m.style},onPointerDown:zt(e.onPointerDown,z=>{z.button===0&&(z.target.setPointerCapture(z.pointerId),x.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),N(z))}),onPointerMove:zt(e.onPointerMove,N),onPointerUp:zt(e.onPointerUp,z=>{const H=z.target;H.hasPointerCapture(z.pointerId)&&H.releasePointerCapture(z.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),av="ScrollAreaThumb",bP=L.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=gP(av,e.__scopeScrollArea);return y.jsx(Na,{present:n||a.hasThumb,children:y.jsx(Qoe,{ref:t,...r})})}),Qoe=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=_o(av,n),o=gP(av,n),{onThumbPositionChange:s}=o,u=xn(t,h=>o.onThumbChange(h)),c=L.useRef(void 0),f=hw(()=>{c.current&&(c.current(),c.current=void 0)},100);return L.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(f(),!c.current){const g=nse(h,s);c.current=g,s()}};return s(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,f,s]),y.jsx(an.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:zt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,w=h.clientY-g.top;o.onThumbPointerDown({x:v,y:w})}),onPointerUp:zt(e.onPointerUp,o.onThumbPointerUp)})});bP.displayName=av;var qk="ScrollAreaCorner",vP=L.forwardRef((e,t)=>{const n=_o(qk,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(ese,{...e,ref:t}):null});vP.displayName=qk;var ese=L.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=_o(qk,n),[i,o]=L.useState(0),[s,u]=L.useState(0),c=!!(i&&s);return lh(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),u(f)}),lh(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),c?y.jsx(an.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function iv(e){return e?parseInt(e,10):0}function wP(e,t){const n=e/t;return isNaN(n)?0:n}function fw(e){const t=wP(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function tse(e,t,n,r="ltr"){const a=fw(n),i=a/2,o=t||i,s=a-o,u=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return _P([u,c],h)(e)}function u4(e,t,n="ltr"){const r=fw(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,u=n==="ltr"?[0,o]:[o*-1,0],c=Hm(e,u);return _P([0,o],[0,s])(c)}function _P(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function xP(e,t){return e>0&&e<t}var nse=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function hw(e,t){const n=Ea(e),r=L.useRef(0);return L.useEffect(()=>()=>window.clearTimeout(r.current),[]),L.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function lh(e,t){const n=Ea(t);Fa(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var rse=dP,ase=hP,ise=vP;function K0({className:e,children:t,...n}){return y.jsxs(rse,{"data-slot":"scroll-area",className:Ht("relative",e),...n,children:[y.jsx(ase,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(ose,{}),y.jsx(ise,{})]})}function ose({className:e,orientation:t="vertical",...n}){return y.jsx(pP,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Ht("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(bP,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Aa({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:Ht("bg-accent animate-pulse rounded-md",e),...t})}const sse=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:o})=>{const s=L.useRef(null),u=Qn(h=>h.streamingInteractionIds),c=L.useMemo(()=>{const h=[],m=new Set;return t.sort((g,v)=>g.index-v.index).forEach(g=>{if(m.has(g.id))return;const v=[g];m.add(g.id),h.push(v)}),h},[t]);L.useEffect(()=>{var m;const h=(m=s.current)==null?void 0:m.querySelector("[data-radix-scroll-area-viewport]");if(h){const{scrollHeight:g,clientHeight:v,scrollTop:w}=h,_=g-v<=w+100,x=n==="streaming"&&u.length>0;(_||x)&&h.scrollTo({top:g,behavior:"smooth"})}},[t,n,u]);const f=()=>n==="loading"?y.jsxs("div",{className:"space-y-4 p-4",children:[y.jsx(Aa,{className:"h-24 w-full"}),y.jsx(Aa,{className:"h-32 w-full"}),y.jsx(Aa,{className:"h-20 w-full"})]}):e?t.length===0&&n!=="streaming"?y.jsx("div",{className:"flex h-full items-center justify-center",children:y.jsx("p",{className:"text-muted-foreground",children:"No messages yet."})}):y.jsxs("div",{className:"space-y-4 p-4",children:[c.map(h=>{const m=h[0];return u.includes(m.id)?y.jsx(B2,{interactionId:m.id,onStop:o},`${m.id}-streaming`):y.jsx(uP,{interaction:m,onEdit:i,onRegenerate:a,onDelete:m.type==="message.user_assistant"?Qn.getState().deleteInteraction:void 0},m.id)}),n==="streaming"&&u.filter(h=>!t.some(m=>m.id===h)).map(h=>y.jsx(B2,{interactionId:h,onStop:o},`${h}-streaming-new`))]}):y.jsx("div",{className:"flex h-full items-center justify-center",children:y.jsx("p",{className:"text-muted-foreground",children:"Select a conversation or start a new one."})});return y.jsx(K0,{className:Ht("flex-grow",r),ref:s,children:f()})},Gp=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0)).sort((i,o)=>(i.order??1/0)-(o.order??1/0));return a.length===0?null:y.jsx("div",{className:Ht(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(wt.Fragment,{children:o?o():null},i.id)})})},lse=".litechat/conversations",SP="/synced_repos",SS="sync_repos";async function use(e,t,n){n(t.id,"syncing");const r=Wn(`${SP}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let o=!1;try{await e.promises.stat(js(r,".git")),o=!0}catch(s){if(s.code==="ENOENT")o=!1;else throw s}o?(ct.info(`Pulling latest changes for "${t.name}"...`),await iw(r,i,a),ct.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(ct.info(`Cloning repository "${t.name}"...`),await EM(r,t.remoteUrl,i,a),ct.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(o){console.error(`Failed to initialize/sync repository ${t.name}:`,o),n(t.id,"error")}}async function cse(e,t,n,r,a,i,o){var h,m;r(t.id,"syncing");const s=Wn(`${SP}/${n.id}`),u=js(s,lse,`${t.id}.json`),c={username:n.username,password:n.password},f=n.branch||"main";try{try{await e.promises.stat(js(s,".git"))}catch(x){if(x.code==="ENOENT"){ct.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}ct.info(`Pulling latest changes for "${n.name}"...`),await iw(s,f,c);let g=null,v=null;try{const x=await q0(u),S=new TextDecoder().decode(x);g=JSON.parse(S),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${u} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),ct.warning(`Could not read remote version of conversation: ${x.message}`))}const w=t.updatedAt.getTime(),_=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!g||w>(v??0)||w>_&&w>=(v??0)){ct.info("Local changes detected. Pushing to remote...");const x=await qt.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,A=JSON.stringify({conversation:E,interactions:x},null,2);await ow(u,A),await Tk(s,`Sync conversation: ${t.title} (${t.id})`),await Rk(s,f,c),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),ct.success("Conversation synced successfully (pushed).")}else if(v&&v>w){ct.info("Remote changes detected. Updating local conversation...");const x={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await qt.saveConversation(x),await qt.deleteInteractionsForConversation(t.id);const S=g.interactions.map(E=>qt.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&o()==="conversation"&&await Qn.getState().loadInteractions(t.id),r(t.id,"idle"),ct.success("Conversation synced successfully (pulled).")}else ct.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const mo=Ds(Ms((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&ct.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(u=>u.parentId===a).map(u=>u.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null})},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),n!==null?t().initializeVFS(n):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async n=>{if(!n){console.warn("[VfsStore] initializeVFS called without a valid vfsKey.");return}if(t().vfsKey!==n){console.warn(`[VfsStore] Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`);return}if(t().initializingKey!==null){console.warn(`[VfsStore] Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`);return}if(t().configuredVfsKey===n&&t().fs){console.log(`[VfsStore] Initialization skipped for key "${n}" (already configured).`),e({loading:!1});return}const{_setLoading:r,_setError:a,_addNodes:i,_setFsInstance:o,_setConfiguredVfsKey:s}=t();console.log(`[VfsStore] Initializing VFS with key: ${n}`),e({initializingKey:n}),r(!0),a(null);try{const u=await Pne(n);if(!u)throw new Error("Filesystem backend initialization failed.");if(t().vfsKey!==n){console.warn(`[VfsStore] Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`),e({initializingKey:null,loading:!1});return}o(u),s(n),console.log(`[VfsStore] VFS instance configured for key: ${n}`);const c="vfs-root";let f=t().nodes[c];try{await u.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(h){if(h.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw h}if(!f||f.path!=="/"){const h=Date.now();f={id:c,parentId:null,name:"",path:"/",type:"folder",createdAt:h,lastModified:h},i([f]),console.log("[VfsStore] Root node added/updated in state.")}e(h=>{h.rootId=f.id,h.currentParentId=f.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${f.id}`),await t().fetchNodes(f.id)}catch(u){console.error(`Failed to initialize VFS for key ${n}:`,u),t().initializingKey===n&&(a(`Failed to initialize VFS (${n}).`),o(null),s(null))}finally{t().initializingKey===n&&e({initializingKey:null,loading:!1})}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:u,configuredVfsKey:c,vfsKey:f,initializingKey:h}=t();if(!o||c!==f||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!o}, Match: ${c===f}, Init: ${h}`);return}r(!0);try{const m=n?s[n]:s[u||""],g=m?m.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${c})`);const v=await Nk(g);console.log(`[VfsStore] Fetched ${v.length} entries for ${g}`);const w=n??u??"",_=new Set(v.map(k=>k.path)),E=(t().childrenMap[w]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!_.has(k.path)).map(k=>k.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const A=v.map(k=>{const D=Object.values(t().nodes).find(N=>N.path===k.path),O=Date.now();return{id:(D==null?void 0:D.id)||jo(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(D==null?void 0:D.createdAt)??O,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});A.length>0&&(console.log(`[VfsStore] Adding/Updating ${A.length} nodes.`),i(A)),e(k=>{const D=A.map(O=>O.id);(!k.childrenMap[w]||JSON.stringify(k.childrenMap[w].sort())!==JSON.stringify(D.sort()))&&(k.childrenMap[w]=D,console.log(`[VfsStore] Updated childrenMap for parent: ${w}`))})}catch(m){console.error("Failed to fetch VFS nodes:",m),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Wn(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:o}=t();if(!o||t().vfsKey!==t().configuredVfsKey)return;const s=Wn(n),u=r(s);u&&u.type==="folder"?(e(c=>{c.currentParentId=u.id}),t().childrenMap[u.id]||await a(u.id)):s==="/"&&i?(e(c=>{c.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,_addNodes:c,configuredVfsKey:f,vfsKey:h}=t();if(!o||f!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const m=n?s[n]:s[u||""],g=m?m.path:"/",v=Nm(g,r.trim());try{throw await o.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(S){if(S.code!=="ENOENT")throw S}await AM(v);const w=Date.now(),x={id:jo(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:w,lastModified:w};c([x])}catch(m){console.error("Failed to create directory:",m),i(m.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,configuredVfsKey:c,vfsKey:f}=t();if(!o||c!==f){i("Filesystem not ready.");return}a(!0);try{const h=n?s[n]:s[u||""],m=h?h.path:"/";await TM(Array.from(r),m),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o,configuredVfsKey:s,vfsKey:u}=t();if(!o||s!==u){a("Filesystem not ready.");return}r(!0);try{const c=n.map(f=>t().nodes[f]).filter(Boolean);for(const f of c)await Ik(f.path,f.type==="folder");i(n)}catch(c){console.error("Failed to delete nodes:",c),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:u,rootId:c,configuredVfsKey:f,vfsKey:h}=t();if(!u||f!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const m=s[n];if(!m){i("Item not found.");return}if(m.name!==r.trim()){a(!0);try{const g=m.parentId?s[m.parentId]:s[c||""],v=g?g.path:"/",w=Nm(v,r.trim());try{throw await u.promises.stat(w),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await RM(m.path,w);const _={name:r.trim(),path:w,lastModified:Date.now()};o(n,_)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:o,vfsKey:s}=t();if(!a||o!==s)return i("Filesystem not ready."),null;const u=r[n];if(!u||u.type!=="file")return i("File not found."),null;try{const c=await q0(u.path),f=u.mimeType||"application/octet-stream",h=new Blob([c],{type:f});return{name:u.name,blob:h}}catch(c){return console.error("Failed to download file:",c),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),dse=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${HI(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${HI(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,u,c,f,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(u=r.prompt.metadata)!=null&&u.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${qb(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((f=r.metadata)!=null&&f.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n},ES=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},fse="/synced_repos",Cr=Ds(Ms((e,t)=>({conversations:[],projects:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{const n=mo.getState();if(n.fs&&n.configuredVfsKey===SS&&!n.loading)return n.fs;console.log(`[ConversationStore] Sync VFS not ready (key: ${n.configuredVfsKey}, fs: ${!!n.fs}, loading: ${n.loading}). Initializing...`);try{await n.initializeVFS(SS);const r=mo.getState();if(r.fs&&r.configuredVfsKey===SS)return console.log("[ConversationStore] Sync VFS initialized successfully."),r.fs;throw new Error("VFS initialization did not complete successfully.")}catch(r){return console.error("[ConversationStore] Failed to ensure Sync VFS:",r),ct.error(`Filesystem error for sync: ${r instanceof Error?r.message:String(r)}`),null}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([qt.loadConversations(),qt.loadProjects(),qt.loadSyncRepos()]),i={};n.forEach(o=>{if(o.syncRepoId){const s=o.lastSyncedAt instanceof Date?o.lastSyncedAt.getTime():null,u=o.updatedAt instanceof Date?o.updatedAt.getTime():null;s?u&&u>s?i[o.id]="needs-sync":i[o.id]="idle":i[o.id]="needs-sync"}else i[o.id]="idle"}),e({conversations:n,projects:r,syncRepos:a,conversationSyncStatus:i,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=jo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const o=t().getConversationById(r);if(o)await qt.saveConversation(o);else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(u=>u.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([u])=>u!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){const u=o.conversations[s].metadata??{},c=r.metadata??{},f={...u,...c};Object.assign(o.conversations[s],{...r,metadata:f,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),m=o.conversations[s].lastSyncedAt instanceof Date?o.conversations[s].lastSyncedAt.getTime():null,g=o.conversations[s].updatedAt.getTime();"syncRepoId"in r?o.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(!m||g>m)&&(o.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await qt.saveConversation(o)}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const u=s.conversations.findIndex(c=>c.id===n);if(u!==-1){s.conversations[u]=a;const c=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,f=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&c&&f<=c?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){o.conversations[s]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,c=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&c<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await qt.deleteConversation(n),await qt.deleteInteractionsForConversation(n),r===n&&a==="conversation"&&await Qn.getState().setCurrentConversationId(null)}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{if(i){s.conversations.push(i);const u=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,c=i.updatedAt.getTime();s.conversationSyncStatus[n]=i.syncRepoId&&u&&c<=u?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},addProject:async n=>{const r=n.parentId??null,a=t().getProjectById(r),i=a?a.path:"/",o=n.name.trim(),s=Nm(i,o),u=jo(),c=new Date,f={id:u,path:s,createdAt:c,updatedAt:c,name:o,parentId:r,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(h=>{h.projects.push(f)});try{const h=t().getProjectById(u);if(h){const m=JSON.parse(JSON.stringify(h));await qt.saveProject(m)}else throw new Error("Failed to retrieve newly added project state");return u}catch(h){throw console.error("ConversationStore: Error adding project",h),h.name==="ConstraintError"?ct.error(`A project or folder named "${o}" already exists in this location.`):ct.error("Failed to save new project."),e(m=>({error:"Failed to save new project",projects:m.projects.filter(g=>g.id!==u)})),h}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ConversationStore: Project ${n} not found.`);return}let i=a.path,o=a.name;if(r.name!==void 0&&r.name!==a.name){o=r.name.trim();const u=t().getProjectById(a.parentId),c=u?u.path:"/";i=Nm(c,o)}e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&Object.assign(u.projects[c],{...r,name:o,path:i,updatedAt:new Date})});const s=t().getProjectById(n);if(s)try{const u=JSON.parse(JSON.stringify(s));await qt.saveProject(u)}catch(u){throw console.error("ConversationStore: Error updating project",u),u.name==="ConstraintError"?ct.error(`A project or folder named "${o}" already exists in this location.`):ct.error("Failed to save project update."),e(c=>{const f=c.projects.findIndex(h=>h.id===n);f!==-1&&(c.projects[f]=a),c.error="Failed to save project update"}),u}else console.error("ConversationStore: Failed to retrieve updated project state after update."),e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&(u.projects[c]=a),u.error="Failed to save project update (state error)"})},deleteProject:async n=>{const r=t().selectedItemId,a=t().selectedItemType;if(!t().projects.find(c=>c.id===n))return;const o=new Set,s=new Set,u=c=>{o.add(c),t().projects.filter(f=>f.parentId===c).forEach(f=>u(f.id)),t().conversations.filter(f=>f.projectId===c).forEach(f=>s.add(f.id))};u(n),e(c=>({projects:c.projects.filter(f=>!o.has(f.id)),conversations:c.conversations.map(f=>s.has(f.id)?{...f,projectId:null}:f),selectedItemId:o.has(r??"")?null:r,selectedItemType:o.has(r??"")?null:a}));try{await qt.deleteProject(n),o.has(r??"")&&await Qn.getState().setCurrentConversationId(null)}catch(c){throw console.error("ConversationStore: Error deleting project",c),e({error:"Failed to delete project. Please reload."}),c}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await Qn.getState().setCurrentConversationId(r==="conversation"?n:null)):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{try{const r=await n.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.conversation||!Array.isArray(a.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const i=a.conversation,o=a.interactions;if(!i.id||!i.title||!i.createdAt||!i.updatedAt)throw new Error("Invalid conversation data in import file.");const s=await t().addConversation({title:i.title||"Imported Chat",metadata:i.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(c=>qt.saveInteraction({...c,conversationId:s,id:jo()}));await Promise.all(u),await t().selectItem(s,"conversation"),ct.success("Conversation imported successfully.")}catch(r){throw console.error("ConversationStore: Error importing conversation",r),ct.error(`Import failed: ${r instanceof Error?r.message:String(r)}`),r}},exportConversation:async(n,r)=>{try{const a=t().conversations.find(c=>c.id===n);if(!a)throw new Error("Conversation not found.");const i=await qt.loadInteractionsForConversation(n);let o,s;const u=a.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(r==="json"){const f=JSON.stringify({conversation:a,interactions:i},null,2);o=new Blob([f],{type:"application/json"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.json`}else if(r==="md"){const c=dse(a,i);o=new Blob([c],{type:"text/markdown"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");ES(o,s),ct.success(`Conversation exported as ${r.toUpperCase()}.`)}catch(a){throw console.error("ConversationStore: Error exporting conversation",a),ct.error(`Export failed: ${a instanceof Error?a.message:String(a)}`),a}},exportProject:async n=>{try{const r=t().getProjectById(n);if(!r)throw new Error("Project not found.");const a=t().projects,i=t().conversations,o=async m=>{const g=a.find(x=>x.id===m);if(!g)throw new Error(`Project ${m} not found in state.`);const v=a.filter(x=>x.parentId===m),w=i.filter(x=>x.projectId===m),_=[];for(const x of v)_.push(await o(x.id));for(const x of w){const S=await qt.loadInteractionsForConversation(x.id);_.push({conversation:x,interactions:S})}return{project:g,children:_}},s=await o(n),u=JSON.stringify(s,null,2),c=new Blob([u],{type:"application/json"}),h=`litechat_project_${r.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${n.substring(0,6)}.json`;ES(c,h),ct.success(`Project "${r.name}" exported.`)}catch(r){throw console.error("ConversationStore: Error exporting project",r),ct.error(`Project export failed: ${r instanceof Error?r.message:String(r)}`),r}},exportAllConversations:async()=>{try{const n=t().conversations,r=[];for(const s of n){const u=await qt.loadInteractionsForConversation(s.id);r.push({conversation:s,interactions:u})}const a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/json"}),o=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;ES(i,o),ct.success("All conversations exported.")}catch(n){throw console.error("ConversationStore: Error exporting conversations",n),ct.error(`Export failed: ${n instanceof Error?n.message:String(n)}`),n}},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await qt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=jo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await qt.saveSyncRepo(s)}else throw new Error("Failed to retrieve newly added sync repo state");return ct.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(u=>u.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,branch:r.branch||o.syncRepos[s].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await qt.saveSyncRepo(o),ct.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const u=s.syncRepos.findIndex(c=>c.id===n);u!==-1&&(s.syncRepos[u]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(o=>o.id===n);if(!r)return;const a=Wn(`${fse}/${n}`);if(!await t()._ensureSyncVfsReady()){ct.error("Filesystem not ready, cannot delete repository folder.");return}e(o=>({syncRepos:o.syncRepos.filter(s=>s.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(o.repoInitializationStatus).filter(([s])=>s!==n))}));try{await qt.deleteSyncRepo(n),ct.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await Ik(a,!0),ct.info(`Removed local sync folder for "${r.name}".`)}catch(o){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,o),o.code!=="ENOENT"&&ct.warning(`Failed to remove local sync folder: ${o.message}`)}}catch(o){throw console.error("ConversationStore: Error deleting sync repo",o),e(s=>{r&&s.syncRepos.push(r),s.error="Failed to delete sync repository"}),o}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),ct.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){ct.error("Sync repository configuration not found.");return}const a=await t()._ensureSyncVfsReady();if(!a){t()._setRepoInitializationStatus(n,"error");return}await use(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){ct.error("Conversation not found for syncing.");return}if(!r.syncRepoId){ct.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(s=>s.id===r.syncRepoId);if(!a){ct.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}const i=await t()._ensureSyncVfsReady();if(!i){t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await cse(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const o=t().getConversationById(n);o&&e(s=>{const u=s.conversations.findIndex(c=>c.id===n);u!==-1&&(s.conversations[u]=o)})},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},getTopLevelProjectId:(n,r)=>{if(!n||!r)return null;if(r==="conversation"){const i=t().getConversationById(n);n=(i==null?void 0:i.projectId)??null,r="project"}if(r!=="project"||!n)return null;let a=t().getProjectById(n);for(;a!=null&&a.parentId;){const i=t().getProjectById(a.parentId);if(!i)return a.id;a=i}return(a==null?void 0:a.id)??null},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const o=t().getConversationById(r);if(!o){console.warn("Cannot update tool settings: Selected conversation not found.");return}const s=o.metadata??{},u={...s};n.enabledTools!==void 0&&(u.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(u.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(u)!==JSON.stringify(s)||!o.metadata)&&await i(r,{metadata:u})},getEffectiveProjectSettings:n=>{const r=qr.getState(),a=fi.getState(),i={systemPrompt:r.globalSystemPrompt,modelId:a.selectedModelId,temperature:r.temperature,maxTokens:r.maxTokens,topP:r.topP,topK:r.topK,presencePenalty:r.presencePenalty,frequencyPenalty:r.frequencyPenalty};if(!n)return i;const o=[];let s=n;for(;s;){const c=t().getProjectById(s);c?(o.unshift(c),s=c.parentId):s=null}return o.reduce((c,f)=>({systemPrompt:f.systemPrompt!==void 0?f.systemPrompt:c.systemPrompt,modelId:f.modelId!==void 0?f.modelId:c.modelId,temperature:f.temperature!==void 0?f.temperature:c.temperature,maxTokens:f.maxTokens!==void 0?f.maxTokens:c.maxTokens,topP:f.topP!==void 0?f.topP:c.topP,topK:f.topK!==void 0?f.topK:c.topK,presencePenalty:f.presencePenalty!==void 0?f.presencePenalty:c.presencePenalty,frequencyPenalty:f.frequencyPenalty!==void 0?f.frequencyPenalty:c.frequencyPenalty}),i)}}))),hse=Symbol("Let zodToJsonSchema decide on which parser to use"),c4={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},pse=e=>typeof e=="string"?{...c4,name:e}:{...c4,...e},mse=e=>{const t=pse(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function EP(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function dr(e,t,n,r,a){e[t]=n,EP(e,t,r,a)}function gse(){return{}}function yse(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==$t.ZodAny&&(n.items=rr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&dr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&dr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(dr(n,"minItems",e.exactLength.value,e.exactLength.message,t),dr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function bse(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function vse(){return{type:"boolean"}}function kP(e,t){return rr(e.type._def,t)}const wse=(e,t)=>rr(e.innerType._def,t);function CP(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>CP(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return _se(e,t)}}const _se=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":dr(n,"minimum",r.value,r.message,t);break;case"max":dr(n,"maximum",r.value,r.message,t);break}return n};function xse(e,t){return{...rr(e.innerType._def,t),default:e.defaultValue()}}function Sse(e,t){return t.effectStrategy==="input"?rr(e.schema._def,t):{}}function Ese(e){return{type:"string",enum:Array.from(e.values)}}const kse=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Cse(e,t){const n=[rr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),rr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(kse(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...u}=i;o=u}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function Ase(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let kS;const To={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(kS===void 0&&(kS=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),kS),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function AP(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ro(n,"email",r.message,t);break;case"format:idn-email":Ro(n,"idn-email",r.message,t);break;case"pattern:zod":oi(n,To.email,r.message,t);break}break;case"url":Ro(n,"uri",r.message,t);break;case"uuid":Ro(n,"uuid",r.message,t);break;case"regex":oi(n,r.regex,r.message,t);break;case"cuid":oi(n,To.cuid,r.message,t);break;case"cuid2":oi(n,To.cuid2,r.message,t);break;case"startsWith":oi(n,RegExp(`^${CS(r.value,t)}`),r.message,t);break;case"endsWith":oi(n,RegExp(`${CS(r.value,t)}$`),r.message,t);break;case"datetime":Ro(n,"date-time",r.message,t);break;case"date":Ro(n,"date",r.message,t);break;case"time":Ro(n,"time",r.message,t);break;case"duration":Ro(n,"duration",r.message,t);break;case"length":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{oi(n,RegExp(CS(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Ro(n,"ipv4",r.message,t),r.version!=="v4"&&Ro(n,"ipv6",r.message,t);break}case"base64url":oi(n,To.base64url,r.message,t);break;case"jwt":oi(n,To.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&oi(n,To.ipv4Cidr,r.message,t),r.version!=="v4"&&oi(n,To.ipv6Cidr,r.message,t);break}case"emoji":oi(n,To.emoji(),r.message,t);break;case"ulid":{oi(n,To.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Ro(n,"binary",r.message,t);break}case"contentEncoding:base64":{dr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{oi(n,To.base64,r.message,t);break}}break}case"nanoid":oi(n,To.nanoid,r.message,t)}return n}function CS(e,t){return t.patternStrategy==="escape"?Rse(e):e}const Tse=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Rse(e){let t="";for(let n=0;n<e.length;n++)Tse.has(e[n])||(t+="\\"),t+=e[n];return t}function Ro(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):dr(e,"format",t,n,r)}function oi(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:d4(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):dr(e,"pattern",d4(t,r),n,r)}function d4(e,t){var u;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let c=0;c<r.length;c++){if(i){a+=r[c],i=!1;continue}if(n.i){if(o){if(r[c].match(/[a-z]/)){s?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),s=!1):r[c+1]==="-"&&((u=r[c+2])!=null&&u.match(/[a-z]/))?(a+=r[c],s=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=o?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?i=!0:o&&r[c]==="]"?o=!1:!o&&r[c]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function TP(e,t){var r,a,i,o,s,u;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===$t.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,f)=>({...c,[f]:rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",f]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===$t.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...f}=AP(e.keyType._def,t);return{...n,propertyNames:f}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===$t.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===$t.ZodBranded&&e.keyType._def.type._def.typeName===$t.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){const{type:c,...f}=kP(e.keyType._def,t);return{...n,propertyNames:f}}}return n}function Nse(e,t){if(t.mapStrategy==="record")return TP(e,t);const n=rr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Ise(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Ose(){return{not:{}}}function jse(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const ov={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Dse(e,t){if(t.target==="openApi3")return f4(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in ov&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=ov[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return f4(e,t)}const f4=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>rr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Mse(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:ov[e.innerType._def.typeName],nullable:!0}:{type:[ov[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=rr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=rr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Pse(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",EP(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function Fse(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let u=i[s];if(u===void 0||u._def===void 0)continue;let c=$se(u);c&&n&&(u instanceof Fo&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),c=!1);const f=rr(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});f!==void 0&&(r.properties[s]=f,c||a.push(s))}a.length&&(r.required=a);const o=Lse(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Lse(e,t){if(e.catchall._def.typeName!=="ZodNever")return rr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function $se(e){try{return e.isOptional()}catch{return!0}}const Bse=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return rr(e.innerType._def,t);const n=rr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},zse=(e,t)=>{if(t.pipeStrategy==="input")return rr(e.in._def,t);if(t.pipeStrategy==="output")return rr(e.out._def,t);const n=rr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=rr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function Use(e,t){return rr(e.type._def,t)}function qse(e,t){const r={type:"array",uniqueItems:!0,items:rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&dr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&dr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Hse(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>rr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:rr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>rr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Vse(){return{not:{}}}function Gse(){return{}}const Wse=(e,t)=>rr(e.innerType._def,t),Kse=(e,t,n)=>{switch(t){case $t.ZodString:return AP(e,n);case $t.ZodNumber:return Pse(e,n);case $t.ZodObject:return Fse(e,n);case $t.ZodBigInt:return bse(e,n);case $t.ZodBoolean:return vse();case $t.ZodDate:return CP(e,n);case $t.ZodUndefined:return Vse();case $t.ZodNull:return jse(n);case $t.ZodArray:return yse(e,n);case $t.ZodUnion:case $t.ZodDiscriminatedUnion:return Dse(e,n);case $t.ZodIntersection:return Cse(e,n);case $t.ZodTuple:return Hse(e,n);case $t.ZodRecord:return TP(e,n);case $t.ZodLiteral:return Ase(e,n);case $t.ZodEnum:return Ese(e);case $t.ZodNativeEnum:return Ise(e);case $t.ZodNullable:return Mse(e,n);case $t.ZodOptional:return Bse(e,n);case $t.ZodMap:return Nse(e,n);case $t.ZodSet:return qse(e,n);case $t.ZodLazy:return()=>e.getter()._def;case $t.ZodPromise:return Use(e,n);case $t.ZodNaN:case $t.ZodNever:return Ose();case $t.ZodEffects:return Sse(e,n);case $t.ZodAny:return gse();case $t.ZodUnknown:return Gse();case $t.ZodDefault:return xse(e,n);case $t.ZodBranded:return kP(e,n);case $t.ZodReadonly:return Wse(e,n);case $t.ZodCatch:return wse(e,n);case $t.ZodPipeline:return zse(e,n);case $t.ZodFunction:case $t.ZodVoid:case $t.ZodSymbol:return;default:return(r=>{})()}};function rr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(u!==hse)return u}if(r&&!n){const u=Zse(r,t);if(u!==void 0)return u}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Kse(e,e.typeName,t),o=typeof i=="function"?rr(i(),t):i;if(o&&Xse(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return a.jsonSchema=o,u}return a.jsonSchema=o,o}const Zse=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Yse(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Yse=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Xse=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Jse=(e,t)=>{const n=mse(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,f])=>({...u,[c]:rr(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=rr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var Vm={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Gm={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Wm={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Km={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Zm={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},Qse=[Vm,Gm,Wm,Km,Zm];Vm.code+"",Gm.code+"",Wm.code+"",Km.code+"",Zm.code+"";Vm.name+"",Vm.code,Gm.name+"",Gm.code,Wm.name+"",Wm.code,Km.name+"",Km.code,Zm.name+"",Zm.code;Qse.map(e=>e.code);function ele(e){const t=["ROOT"];let n=-1,r=null;function a(u,c,f){switch(u){case'"':{n=c,t.pop(),t.push(f),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(f),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(f),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(f),t.push("INSIDE_ARRAY_START");break}}}function i(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function o(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let u=0;u<e.length;u++){const c=e[u];switch(t[t.length-1]){case"ROOT":a(c,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,u);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=u}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=u,t.pop();break}default:{n=u,a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}default:{n=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=u;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,u+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u)):n=u;break}}}let s=e.slice(0,n+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const f=e.substring(r,e.length);"true".startsWith(f)?s+="true".slice(f.length):"false".startsWith(f)?s+="false".slice(f.length):"null".startsWith(f)&&(s+="null".slice(f.length))}}return s}function tle(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Zc({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Zc({text:ele(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var nle={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},rle={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},ale={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ile={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},ole={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},sle={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},lle={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},ule={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},cle={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},dle={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},fle={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},hle={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},ple={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},mle={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},gle={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},yle={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},pw=[nle,rle,ale,ile,ole,sle,lle,ule,cle,dle,fle,hle,ple,mle,gle,yle];Object.fromEntries(pw.map(e=>[e.code,e]));Object.fromEntries(pw.map(e=>[e.name,e.code]));pw.map(e=>e.code);function Ha(e,t){const n=pw.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function ble(e,t){var n;const r=(n=void 0)!=null?n:!1;return vle(Jse(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var z2=Symbol.for("vercel.ai.schema");function vle(e,{validate:t}={}){return{[z2]:!0,_type:void 0,[ub]:!0,jsonSchema:e,validate:t}}function wle(e){return typeof e=="object"&&e!==null&&z2 in e&&e[z2]===!0&&"jsonSchema"in e&&"validate"in e}function mw(e){return wle(e)?e:ble(e)}const h4=globalThis||void 0||self;var _le=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof h4=="object"?h4:{},Vc="1.9.0",p4=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function xle(e){var t=new Set([e]),n=new Set,r=e.match(p4);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(u){return u===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(u){if(t.has(u))return!0;if(n.has(u))return!1;var c=u.match(p4);if(!c)return i(u);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||a.major!==f.major?i(u):a.major===0?a.minor===f.minor&&a.patch<=f.patch?o(u):i(u):a.minor<=f.minor?o(u):i(u)}}var Sle=xle(Vc),Ele=Vc.split(".")[0],Ym=Symbol.for("opentelemetry.js.api."+Ele),Xm=_le;function Hk(e,t,n,r){var a;r===void 0&&(r=!1);var i=Xm[Ym]=(a=Xm[Ym])!==null&&a!==void 0?a:{version:Vc};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==Vc){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Vc);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Vc+"."),!0}function Jm(e){var t,n,r=(t=Xm[Ym])===null||t===void 0?void 0:t.version;if(!(!r||!Sle(r)))return(n=Xm[Ym])===null||n===void 0?void 0:n[e]}function Vk(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Vc+".");var n=Xm[Ym];n&&delete n[e]}var kle=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Cle=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Ale=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Wp("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Wp("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Wp("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Wp("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Wp("verbose",this._namespace,t)},e}();function Wp(e,t,n){var r=Jm("diag");if(r)return n.unshift(t),r[e].apply(r,Cle([],kle(n),!1))}var zi;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(zi||(zi={}));function Tle(e,t){e<zi.NONE?e=zi.NONE:e>zi.ALL&&(e=zi.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",zi.ERROR),warn:n("warn",zi.WARN),info:n("info",zi.INFO),debug:n("debug",zi.DEBUG),verbose:n("verbose",zi.VERBOSE)}}var Rle=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Nle=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Ile="diag",sv=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=Jm("diag");if(s)return s[a].apply(s,Nle([],Rle(i),!1))}}var n=this,r=function(a,i){var o,s,u;if(i===void 0&&(i={logLevel:zi.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var f=Jm("diag"),h=Tle((s=i.logLevel)!==null&&s!==void 0?s:zi.INFO,a);if(f&&!i.suppressOverrideMessage){var m=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return Hk("diag",h,n,!0)};n.setLogger=r,n.disable=function(){Vk(Ile,n)},n.createComponentLogger=function(a){return new Ale(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function Ole(e){return Symbol.for(e)}var jle=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Dle=new jle,Mle=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Ple=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Fle=function(){function e(){}return e.prototype.active=function(){return Dle},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,Ple([r],Mle(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Lle=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},$le=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},AS="context",Ble=new Fle,RP=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Hk(AS,t,sv.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,$le([t,n,r],Lle(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return Jm(AS)||Ble},e.prototype.disable=function(){this._getContextManager().disable(),Vk(AS,sv.instance())},e}(),U2;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(U2||(U2={}));var NP="0000000000000000",IP="00000000000000000000000000000000",zle={traceId:IP,spanId:NP,traceFlags:U2.NONE},em=function(){function e(t){t===void 0&&(t=zle),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),Gk=Ole("OpenTelemetry Context Key SPAN");function Wk(e){return e.getValue(Gk)||void 0}function Ule(){return Wk(RP.getInstance().active())}function Kk(e,t){return e.setValue(Gk,t)}function qle(e){return e.deleteValue(Gk)}function Hle(e,t){return Kk(e,new em(t))}function OP(e){var t;return(t=Wk(e))===null||t===void 0?void 0:t.spanContext()}var Vle=/^([0-9a-f]{32})$/i,Gle=/^[0-9a-f]{16}$/i;function Wle(e){return Vle.test(e)&&e!==IP}function Kle(e){return Gle.test(e)&&e!==NP}function jP(e){return Wle(e.traceId)&&Kle(e.spanId)}function Zle(e){return new em(e)}var TS=RP.getInstance(),DP=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=TS.active());var a=!!(n!=null&&n.root);if(a)return new em;var i=r&&OP(r);return Yle(i)&&jP(i)?new em(i):new em},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var u=o??TS.active(),c=this.startSpan(t,i,u),f=Kk(u,c);return TS.with(f,s,void 0,c)}},e}();function Yle(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Xle=new DP,Jle=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Xle},e}(),Qle=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new DP},e}(),eue=new Qle,m4=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Jle(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:eue},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),lv;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(lv||(lv={}));var RS="trace",tue=function(){function e(){this._proxyTracerProvider=new m4,this.wrapSpanContext=Zle,this.isSpanContextValid=jP,this.deleteSpan=qle,this.getSpan=Wk,this.getActiveSpan=Ule,this.getSpanContext=OP,this.setSpan=Kk,this.setSpanContext=Hle}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=Hk(RS,this._proxyTracerProvider,sv.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return Jm(RS)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Vk(RS,sv.instance()),this._proxyTracerProvider=new m4},e}(),nue=tue.getInstance(),rue=Object.defineProperty,Zk=(e,t)=>{for(var n in t)rue(e,n,{get:t[n],enumerable:!0})};function uv(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function g4(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function y4({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:u}=await i.read();if(s)break;e.write(u)}}catch(s){throw s}finally{e.end()}})()}var MP="AI_InvalidArgumentError",PP=`vercel.ai.error.${MP}`,aue=Symbol.for(PP),FP,Io=class extends Sn{constructor({parameter:e,value:t,message:n}){super({name:MP,message:`Invalid argument for parameter ${e}: ${n}`}),this[FP]=!0,this.parameter=e,this.value=t}static isInstance(e){return Sn.hasMarker(e,PP)}};FP=aue;var LP="AI_RetryError",$P=`vercel.ai.error.${LP}`,iue=Symbol.for($P),BP,b4=class extends Sn{constructor({message:e,reason:t,errors:n}){super({name:LP,message:e}),this[BP]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Sn.hasMarker(e,$P)}};BP=iue;var oue=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>zP(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function zP(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(Wy(i)||t===0)throw i;const o=uU(i),s=[...a,i],u=s.length;if(u>t)throw new b4({message:`Failed after ${u} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&ha.isInstance(i)&&i.isRetryable===!0&&u<=t)return await oU(n),zP(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw u===1?i:new b4({message:`Failed after ${u} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function sue({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Io({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Io({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:oue({maxRetries:t})}}function q2({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function lue({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var uue={startSpan(){return $y},startActiveSpan(e,t,n,r){if(typeof t=="function")return t($y);if(typeof n=="function")return n($y);if(typeof r=="function")return r($y)}},$y={spanContext(){return cue},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},cue={traceId:"",spanId:"",traceFlags:0};function due({isEnabled:e=!1,tracer:t}={}){return e?t||nue.getTracer("ai"):uue}function H2({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:lv.ERROR,message:o.message})):i.setStatus({code:lv.ERROR})}finally{i.end()}throw o}})}function Rf({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var fue=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=Bf(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=Q6(this.base64Data)),this.uint8ArrayData}},hue=class extends fue{constructor(e){super(e),this.type="file"}},pue=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function mue(e){for(const t of pue)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var UP="AI_NoObjectGeneratedError",qP=`vercel.ai.error.${UP}`,gue=Symbol.for(qP),HP,v4=class extends Sn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:UP,message:e,cause:t}),this[HP]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return Sn.hasMarker(e,qP)}};HP=gue;var VP="AI_DownloadError",GP=`vercel.ai.error.${VP}`,yue=Symbol.for(GP),WP,NS=class extends Sn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:VP,message:a,cause:r}),this[WP]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Sn.hasMarker(e,GP)}};WP=yue;async function bue({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new NS({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw NS.isInstance(a)?a:new NS({url:r,cause:a})}}var KP="AI_InvalidDataContentError",ZP=`vercel.ai.error.${KP}`,vue=Symbol.for(ZP),YP,w4=class extends Sn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:KP,message:n,cause:t}),this[YP]=!0,this.content=e}static isInstance(e){return Sn.hasMarker(e,ZP)}};YP=vue;var XP=F.union([F.string(),F.instanceof(Uint8Array),F.instanceof(ArrayBuffer),F.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function JP(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Bf(new Uint8Array(e)):Bf(e)}function cv(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return Q6(e)}catch(t){throw new w4({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new w4({content:e})}function wue(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var QP="AI_InvalidMessageRoleError",e5=`vercel.ai.error.${QP}`,_ue=Symbol.for(e5),t5,xue=class extends Sn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:QP,message:t}),this[t5]=!0,this.role=e}static isInstance(e){return Sn.hasMarker(e,e5)}};t5=_ue;function Sue(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function Eue({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=bue}){const a=await Cue(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>kue(i,a))]}function kue(e,t){var n,r,a,i,o,s;const u=e.role;switch(u){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>Aue(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var f;const h=(f=c.providerOptions)!=null?f:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:JP(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var f;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(f=c.providerOptions)!=null?f:c.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const c=u;throw new xue({role:c})}}}async function Cue(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function Aue(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,u,c;const f=e.type;switch(f){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${f}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){const{mimeType:h,base64Content:m}=Sue(u.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${f}`);o=h,c=cv(m)}else{const h=t[u.toString()];h?(c=h.data,o??(o=h.mimeType)):c=u}else c=cv(u);switch(f){case"image":return c instanceof Uint8Array&&(o=(r=mue(c))!=null?r:o),{type:"image",image:c,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?JP(c):c,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function Tue({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new Io({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Io({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Io({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Io({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Io({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Io({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Io({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Io({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function _4(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,u,c;try{[s,u]=i.url.split(","),c=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||u==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:cv(u)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:wue(cv(u))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:u,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var n5="AI_MessageConversionError",r5=`vercel.ai.error.${n5}`,Rue=Symbol.for(r5),a5,IS=class extends Sn{constructor({originalMessage:e,message:t}){super({name:n5,message:t}),this[a5]=!0,this.originalMessage=e}static isInstance(e){return Sn.hasMarker(e,r5)}};a5=Rue;function Nue(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],u=o===e.length-1,{role:c,content:f,experimental_attachments:h}=s;switch(c){case"system":{i.push({role:"system",content:f});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:f},..._4(h)]:f});else{const m=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...m,..._4(h)]:m})}break}case"assistant":{if(s.parts!=null){let v=function(){const S=[];for(const A of x)switch(A.type){case"file":case"text":{S.push(A);break}case"reasoning":{for(const k of A.details)switch(k.type){case"text":S.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:A.toolInvocation.toolCallId,toolName:A.toolInvocation.toolName,args:A.toolInvocation.args});break;default:{const k=A;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:S});const E=x.filter(A=>A.type==="tool-invocation").map(A=>A.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(A=>{if(!("result"in A))throw new IS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(A)});const{toolCallId:k,toolName:D,result:O}=A,N=a[D];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:D,result:N.experimental_toToolResultContent(O),experimental_content:N.experimental_toToolResultContent(O)}:{type:"tool-result",toolCallId:k,toolName:D,result:O}})}),x=[],_=!1,w++},w=0,_=!1,x=[];for(const S of s.parts)switch(S.type){case"text":{_&&v(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==w&&v(),x.push(S),_=!0;break}}v();break}const m=s.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:f});break}const g=m.reduce((v,w)=>{var _;return Math.max(v,(_=w.step)!=null?_:0)},0);for(let v=0;v<=g;v++){const w=m.filter(_=>{var x;return((x=_.step)!=null?x:0)===v});w.length!==0&&(i.push({role:"assistant",content:[...u&&f&&v===0?[{type:"text",text:f}]:[],...w.map(({toolCallId:_,toolName:x,args:S})=>({type:"tool-call",toolCallId:_,toolName:x,args:S}))]}),i.push({role:"tool",content:w.map(_=>{if(!("result"in _))throw new IS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:x,toolName:S,result:E}=_,A=a[S];return(A==null?void 0:A.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:A.experimental_toToolResultContent(E),experimental_content:A.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}f&&!u&&i.push({role:"assistant",content:f});break}case"data":break;default:{const m=c;throw new IS({originalMessage:s,message:`Unsupported role: ${m}`})}}}return i}function Iue(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Oue);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Oue(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var V2=F.lazy(()=>F.union([F.null(),F.string(),F.number(),F.boolean(),F.record(F.string(),V2),F.array(V2)])),Zr=F.record(F.string(),F.record(F.string(),V2)),jue=F.array(F.union([F.object({type:F.literal("text"),text:F.string()}),F.object({type:F.literal("image"),data:F.string(),mimeType:F.string().optional()})])),i5=F.object({type:F.literal("text"),text:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Due=F.object({type:F.literal("image"),image:F.union([XP,F.instanceof(URL)]),mimeType:F.string().optional(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),o5=F.object({type:F.literal("file"),data:F.union([XP,F.instanceof(URL)]),filename:F.string().optional(),mimeType:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Mue=F.object({type:F.literal("reasoning"),text:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Pue=F.object({type:F.literal("redacted-reasoning"),data:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Fue=F.object({type:F.literal("tool-call"),toolCallId:F.string(),toolName:F.string(),args:F.unknown(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Lue=F.object({type:F.literal("tool-result"),toolCallId:F.string(),toolName:F.string(),result:F.unknown(),content:jue.optional(),isError:F.boolean().optional(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),$ue=F.object({role:F.literal("system"),content:F.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Bue=F.object({role:F.literal("user"),content:F.union([F.string(),F.array(F.union([i5,Due,o5]))]),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),zue=F.object({role:F.literal("assistant"),content:F.union([F.string(),F.array(F.union([i5,o5,Mue,Pue,Fue]))]),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Uue=F.object({role:F.literal("tool"),content:F.array(Lue),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),que=F.union([$ue,Bue,zue,Uue]);function Hue({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new pl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new pl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new pl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new pl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=Iue(e.messages);if(n==="other")throw new pl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?Nue(e.messages,{tools:t}):e.messages;if(r.length===0)throw new pl({prompt:e,message:"messages must not be empty"});const a=fh({value:r,schema:F.array(que)});if(!a.success)throw new pl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Vue({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Gue(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Wue="JSON schema:",Kue="You MUST answer with a JSON object that matches the JSON schema above.",Zue="You MUST answer with JSON.";function Yue({prompt:e,schema:t,schemaPrefix:n=t!=null?Wue:void 0,schemaSuffix:r=t!=null?Kue:Zue}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function OS(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}od({prefix:"aiobj",size:24});var wi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function x4(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Xue(){let e=[],t=null,n=!1,r=x4();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=x4(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function Jue(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}od({prefix:"aiobj",size:24});var s5="AI_NoOutputSpecifiedError",l5=`vercel.ai.error.${s5}`,Que=Symbol.for(l5),u5,ece=class extends Sn{constructor({message:e="No output specified."}={}){super({name:s5,message:e}),this[u5]=!0}static isInstance(e){return Sn.hasMarker(e,l5)}};u5=Que;var c5="AI_ToolExecutionError",d5=`vercel.ai.error.${c5}`,tce=Symbol.for(d5),f5,nce=class extends Sn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${i0(r)}`}){super({name:c5,message:a,cause:r}),this[f5]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return Sn.hasMarker(e,d5)}};f5=tce;function rce(e){return e!=null&&Object.keys(e).length>0}function ace({tools:e,toolChoice:t,activeTools:n}){return rce(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:mw(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var ice=/^([\s\S]*?)(\s+)(\S*)$/;function oce(e){const t=e.match(ice);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var h5="AI_InvalidToolArgumentsError",p5=`vercel.ai.error.${h5}`,sce=Symbol.for(p5),m5,g5=class extends Sn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${i0(n)}`}){super({name:h5,message:r,cause:n}),this[m5]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Sn.hasMarker(e,p5)}};m5=sce;var y5="AI_NoSuchToolError",b5=`vercel.ai.error.${y5}`,lce=Symbol.for(b5),v5,G2=class extends Sn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:y5,message:n}),this[v5]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Sn.hasMarker(e,b5)}};v5=lce;var w5="AI_ToolCallRepairError",_5=`vercel.ai.error.${w5}`,uce=Symbol.for(_5),x5,cce=class extends Sn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${i0(e)}`}){super({name:w5,message:n,cause:e}),this[x5]=!0,this.originalError=t}static isInstance(e){return Sn.hasMarker(e,_5)}};x5=uce;async function dce({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new G2({toolName:e.toolName});try{return await S4({toolCall:e,tools:t})}catch(i){if(n==null||!(G2.isInstance(i)||g5.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>mw(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new cce({cause:s,originalError:i})}if(o==null)throw i;return await S4({toolCall:o,tools:t})}}async function S4({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new G2({toolName:e.toolName,availableTools:Object.keys(t)});const a=mw(r.parameters),i=e.args.trim()===""?fh({value:{},schema:a}):Zc({text:e.args,schema:a});if(i.success===!1)throw new g5({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function fce(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function E4({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const u=[];return u.push({role:"assistant",content:[...n.map(c=>c.type==="text"?{...c,type:"reasoning"}:{...c,type:"redacted-reasoning"}),...t.map(c=>({type:"file",data:c.base64,mimeType:c.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&u.push({role:"tool",id:s(),content:i.map(c=>{const f=r[c.toolName];return(f==null?void 0:f.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:f.experimental_toToolResultContent(c.result),experimental_content:f.experimental_toToolResultContent(c.result)}:{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result}})}),u}od({prefix:"aitxt",size:24});od({prefix:"msg",size:24});var hce={};Zk(hce,{object:()=>yce,text:()=>gce});var S5="AI_InvalidStreamPartError",E5=`vercel.ai.error.${S5}`,pce=Symbol.for(E5),k5,mce=class extends Sn{constructor({chunk:e,message:t}){super({name:S5,message:t}),this[k5]=!0,this.chunk=e}static isInstance(e){return Sn.hasMarker(e,E5)}};k5=pce;var gce=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),yce=({schema:e})=>{const t=mw(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Yue({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=tle(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=Zc({text:n});if(!a.success)throw new v4({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=fh({value:a.value,schema:t});if(!i.success)throw new v4({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function bce(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Yk(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function u(f){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}async function c(f){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}return new ReadableStream({async pull(f){try{if(o){await c(f);return}if(s){await u(f);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||f.enqueue(h.value),m===n?(a=void 0,h.done&&(await c(f),o=!0)):(i=void 0,h.done&&(s=!0,await u(f)))}catch(h){f.error(h)}},cancel(){n.cancel(),r.cancel()}})}function vce({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:u}){let c=null;const f=new ReadableStream({start(x){c=x}}),h={},m=new Set;let g=!1,v;function w(){g&&m.size===0&&(v!=null&&c.enqueue(v),c.close())}const _=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new hue({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const A=await dce({toolCall:x,tools:e,repairToolCall:u,system:i,messages:o});S.enqueue(A);const k=e[A.toolName];if(k.execute!=null){const D=vs();m.add(D),H2({name:"ai.toolCall",attributes:Rf({telemetry:a,attributes:{...q2({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":A.toolName,"ai.toolCall.id":A.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(A.args)}}}),tracer:r,fn:async O=>k.execute(A.args,{toolCallId:A.toolCallId,messages:o,abortSignal:s}).then(N=>{c.enqueue({...A,type:"tool-result",result:N}),m.delete(D),w();try{O.setAttributes(Rf({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(N)}}}))}catch{}},N=>{c.enqueue({type:"error",error:new nce({toolCallId:A.toolCallId,toolName:A.toolName,toolArgs:A.args,cause:N})}),m.delete(D),w()})})}}catch(A){c.enqueue({type:"error",error:A})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:Vue(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const A=E;throw new Error(`Unhandled chunk type: ${A}`)}}},flush(){g=!0,w()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),f.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var wce=od({prefix:"aitxt",size:24}),_ce=od({prefix:"msg",size:24});function xce({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:u,maxSteps:c=1,experimental_generateMessageId:f=_ce,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:w=v,experimental_toolCallStreaming:_=!1,toolCallStreaming:x=_,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:A,onChunk:k,onError:D,onFinish:O,onStepFinish:N,_internal:{now:z=Jue,generateId:H=wce,currentDate:ee=()=>new Date}={},...P}){return new Ece({model:e,telemetry:g,headers:u,settings:P,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:bce(A),activeTools:S,repairToolCall:E,maxSteps:c,output:h,continueSteps:m,providerOptions:w,onChunk:k,onError:D,onFinish:O,onStepFinish:N,now:z,currentDate:ee,generateId:H,generateMessageId:f})}function Sce(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const u=JSON.stringify(s.partial);u!==r&&(a({controller:o,partialOutput:s.partial}),r=u)}},flush(i){n.length>0&&a({controller:i})}})}var Ece=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:u,tools:c,toolChoice:f,toolCallStreaming:h,transforms:m,activeTools:g,repairToolCall:v,maxSteps:w,output:_,continueSteps:x,providerOptions:S,now:E,currentDate:A,generateId:k,generateMessageId:D,onChunk:O,onError:N,onFinish:z,onStepFinish:H}){this.warningsPromise=new wi,this.usagePromise=new wi,this.finishReasonPromise=new wi,this.providerMetadataPromise=new wi,this.textPromise=new wi,this.reasoningPromise=new wi,this.reasoningDetailsPromise=new wi,this.sourcesPromise=new wi,this.filesPromise=new wi,this.toolCallsPromise=new wi,this.toolResultsPromise=new wi,this.requestPromise=new wi,this.responsePromise=new wi,this.stepsPromise=new wi;var ee;if(w<1)throw new Io({parameter:"maxSteps",value:w,message:"maxSteps must be at least 1"});this.output=_;let P="",Z="",V="",fe=[],ue=[],Y,X=[];const ae=[],G={id:k(),timestamp:A(),modelId:e.modelId,messages:[]};let Q=[],ne=[],de,_e,ve="initial";const Pe=[];let Fe;const Ie=new TransformStream({async transform(se,ie){ie.enqueue(se);const{part:J}=se;if((J.type==="text-delta"||J.type==="reasoning"||J.type==="source"||J.type==="tool-call"||J.type==="tool-result"||J.type==="tool-call-streaming-start"||J.type==="tool-call-delta")&&await(O==null?void 0:O({chunk:J})),J.type==="error"&&await(N==null?void 0:N({error:J.error})),J.type==="text-delta"&&(P+=J.textDelta,Z+=J.textDelta,V+=J.textDelta),J.type==="reasoning"&&(Y==null?(Y={type:"text",text:J.textDelta},fe.push(Y)):Y.text+=J.textDelta),J.type==="reasoning-signature"){if(Y==null)throw new Sn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});Y.signature=J.signature,Y=void 0}if(J.type==="redacted-reasoning"&&fe.push({type:"redacted",data:J.data}),J.type==="file"&&ue.push(J),J.type==="source"&&(ae.push(J.source),X.push(J.source)),J.type==="tool-call"&&Q.push(J),J.type==="tool-result"&&ne.push(J),J.type==="step-finish"){const xe=E4({text:Z,files:ue,reasoning:fe,tools:c??{},toolCalls:Q,toolResults:ne,messageId:J.messageId,generateMessageId:D}),Me=Pe.length;let Se="done";Me+1<w&&(x&&J.finishReason==="length"&&Q.length===0?Se="continue":Q.length>0&&ne.length===Q.length&&(Se="tool-result"));const Ze={stepType:ve,text:P,reasoning:fce(fe),reasoningDetails:fe,files:ue,sources:X,toolCalls:Q,toolResults:ne,finishReason:J.finishReason,usage:J.usage,warnings:J.warnings,logprobs:J.logprobs,request:J.request,response:{...J.response,messages:[...G.messages,...xe]},providerMetadata:J.experimental_providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,isContinued:J.isContinued};await(H==null?void 0:H(Ze)),Pe.push(Ze),Q=[],ne=[],P="",X=[],fe=[],ue=[],Y=void 0,Se!=="done"&&(ve=Se),Se!=="continue"&&(G.messages.push(...xe),Z="")}J.type==="finish"&&(G.id=J.response.id,G.timestamp=J.response.timestamp,G.modelId=J.response.modelId,G.headers=J.response.headers,_e=J.usage,de=J.finishReason)},async flush(se){var ie;try{if(Pe.length===0)return;const J=Pe[Pe.length-1];Re.warningsPromise.resolve(J.warnings),Re.requestPromise.resolve(J.request),Re.responsePromise.resolve(J.response),Re.toolCallsPromise.resolve(J.toolCalls),Re.toolResultsPromise.resolve(J.toolResults),Re.providerMetadataPromise.resolve(J.experimental_providerMetadata),Re.reasoningPromise.resolve(J.reasoning),Re.reasoningDetailsPromise.resolve(J.reasoningDetails);const xe=de??"unknown",Me=_e??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Re.finishReasonPromise.resolve(xe),Re.usagePromise.resolve(Me),Re.textPromise.resolve(V),Re.sourcesPromise.resolve(ae),Re.filesPromise.resolve(J.files),Re.stepsPromise.resolve(Pe),await(z==null?void 0:z({finishReason:xe,logprobs:void 0,usage:Me,text:V,reasoning:J.reasoning,reasoningDetails:J.reasoningDetails,files:J.files,sources:J.sources,toolCalls:J.toolCalls,toolResults:J.toolResults,request:(ie=J.request)!=null?ie:{},response:J.response,warnings:J.warnings,providerMetadata:J.providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,steps:Pe})),Fe.setAttributes(Rf({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>V},"ai.response.toolCalls":{output:()=>{var Se;return(Se=J.toolCalls)!=null&&Se.length?JSON.stringify(J.toolCalls):void 0}},"ai.usage.promptTokens":Me.promptTokens,"ai.usage.completionTokens":Me.completionTokens}}))}catch(J){se.error(J)}finally{Fe.end()}}}),Te=Xue();this.addStream=Te.addStream,this.closeStream=Te.close;let Ue=Te.stream;for(const se of m)Ue=Ue.pipeThrough(se({tools:c,stopStream(){Te.terminate()}}));this.baseStream=Ue.pipeThrough(Sce(_)).pipeThrough(Ie);const{maxRetries:Ve,retry:Ee}=sue({maxRetries:a}),Ae=due(t),B=lue({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:Ve}}),Ce=Hue({prompt:{system:(ee=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?ee:o,prompt:s,messages:u},tools:c}),Re=this;H2({name:"ai.streamText",attributes:Rf({telemetry:t,attributes:{...q2({operationId:"ai.streamText",telemetry:t}),...B,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:u})},"ai.settings.maxSteps":w}}),tracer:Ae,endWhenDone:!1,fn:async se=>{Fe=se;async function ie({currentStep:J,responseMessages:xe,usage:Me,stepType:Se,previousStepText:Ze,hasLeadingWhitespace:Et,messageId:at}){var _t;const Nt=xe.length===0?Ce.type:"messages",Rt=[...Ce.messages,...xe],Kt=await Eue({prompt:{type:Nt,system:Ce.system,messages:Rt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(_t=e.supportsUrl)==null?void 0:_t.bind(e)}),pe={type:"regular",...ace({tools:c,toolChoice:f,activeTools:g})},{result:{stream:R,warnings:q,rawResponse:ce,request:Oe},doStreamSpan:ye,startTimestampMs:ke}=await Ee(()=>H2({name:"ai.streamText.doStream",attributes:Rf({telemetry:t,attributes:{...q2({operationId:"ai.streamText.doStream",telemetry:t}),...B,"ai.prompt.format":{input:()=>Nt},"ai.prompt.messages":{input:()=>JSON.stringify(Kt)},"ai.prompt.tools":{input:()=>{var Ct;return(Ct=pe.tools)==null?void 0:Ct.map(Ot=>JSON.stringify(Ot))}},"ai.prompt.toolChoice":{input:()=>pe.toolChoice!=null?JSON.stringify(pe.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ae,endWhenDone:!1,fn:async Ct=>({startTimestampMs:E(),doStreamSpan:Ct,result:await e.doStream({mode:pe,...Tue(r),inputFormat:Nt,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:Kt,providerMetadata:S,abortSignal:i,headers:n})})})),oe=vce({tools:c,generatorStream:R,toolCallStreaming:h,tracer:Ae,telemetry:t,system:o,messages:Rt,repairToolCall:v,abortSignal:i}),ft=Oe??{},vt=[],j=[],$e=[],st=[];let ge,De="unknown",Je={promptTokens:0,completionTokens:0,totalTokens:0},It,me=!0,U="",$=Se==="continue"?Ze:"",W,he={id:k(),timestamp:A(),modelId:e.modelId},Ne="",He=!1,gt=!0,Gt=!1;async function ht({controller:Ct,chunk:Ot}){Ct.enqueue(Ot),U+=Ot.textDelta,$+=Ot.textDelta,He=!0,Gt=Ot.textDelta.trimEnd()!==Ot.textDelta}Re.addStream(oe.pipeThrough(new TransformStream({async transform(Ct,Ot){var Zt,En,Bn;if(me){const hr=E()-ke;me=!1,ye.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":hr}),ye.setAttributes({"ai.response.msToFirstChunk":hr}),Ot.enqueue({type:"step-start",messageId:at,request:ft,warnings:q??[]})}if(Ct.type==="text-delta"&&Ct.textDelta.length===0)return;const fr=Ct.type;switch(fr){case"text-delta":{if(x){const hr=gt&&Et?Ct.textDelta.trimStart():Ct.textDelta;if(hr.length===0)break;gt=!1,Ne+=hr;const Dn=oce(Ne);Dn!=null&&(Ne=Dn.suffix,await ht({controller:Ot,chunk:{type:"text-delta",textDelta:Dn.prefix+Dn.whitespace}}))}else await ht({controller:Ot,chunk:Ct});break}case"reasoning":{Ot.enqueue(Ct),ge==null?(ge={type:"text",text:Ct.textDelta},$e.push(ge)):ge.text+=Ct.textDelta;break}case"reasoning-signature":{if(Ot.enqueue(Ct),ge==null)throw new mce({chunk:Ct,message:"reasoning-signature without reasoning"});ge.signature=Ct.signature,ge=void 0;break}case"redacted-reasoning":{Ot.enqueue(Ct),$e.push({type:"redacted",data:Ct.data});break}case"tool-call":{Ot.enqueue(Ct),vt.push(Ct);break}case"tool-result":{Ot.enqueue(Ct),j.push(Ct);break}case"response-metadata":{he={id:(Zt=Ct.id)!=null?Zt:he.id,timestamp:(En=Ct.timestamp)!=null?En:he.timestamp,modelId:(Bn=Ct.modelId)!=null?Bn:he.modelId};break}case"finish":{Je=Ct.usage,De=Ct.finishReason,It=Ct.experimental_providerMetadata,W=Ct.logprobs;const hr=E()-ke;ye.addEvent("ai.stream.finish"),ye.setAttributes({"ai.response.msToFinish":hr,"ai.response.avgCompletionTokensPerSecond":1e3*Je.completionTokens/hr});break}case"file":{st.push(Ct),Ot.enqueue(Ct);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Ot.enqueue(Ct);break}case"error":{Ot.enqueue(Ct),De="error";break}default:{const hr=fr;throw new Error(`Unknown chunk type: ${hr}`)}}},async flush(Ct){const Ot=vt.length>0?JSON.stringify(vt):void 0;let Zt="done";J+1<w&&(x&&De==="length"&&vt.length===0?Zt="continue":vt.length>0&&j.length===vt.length&&(Zt="tool-result")),x&&Ne.length>0&&(Zt!=="continue"||Se==="continue"&&!He)&&(await ht({controller:Ct,chunk:{type:"text-delta",textDelta:Ne}}),Ne="");try{ye.setAttributes(Rf({telemetry:t,attributes:{"ai.response.finishReason":De,"ai.response.text":{output:()=>U},"ai.response.toolCalls":{output:()=>Ot},"ai.response.id":he.id,"ai.response.model":he.modelId,"ai.response.timestamp":he.timestamp.toISOString(),"ai.usage.promptTokens":Je.promptTokens,"ai.usage.completionTokens":Je.completionTokens,"gen_ai.response.finish_reasons":[De],"gen_ai.response.id":he.id,"gen_ai.response.model":he.modelId,"gen_ai.usage.input_tokens":Je.promptTokens,"gen_ai.usage.output_tokens":Je.completionTokens}}))}catch{}finally{ye.end()}Ct.enqueue({type:"step-finish",finishReason:De,usage:Je,providerMetadata:It,experimental_providerMetadata:It,logprobs:W,request:ft,response:{...he,headers:ce==null?void 0:ce.headers},warnings:q,isContinued:Zt==="continue",messageId:at});const En=Gue(Me,Je);if(Zt==="done")Ct.enqueue({type:"finish",finishReason:De,usage:En,providerMetadata:It,experimental_providerMetadata:It,logprobs:W,response:{...he,headers:ce==null?void 0:ce.headers}}),Re.closeStream();else{if(Se==="continue"){const Bn=xe[xe.length-1];typeof Bn.content=="string"?Bn.content+=U:Bn.content.push({text:U,type:"text"})}else xe.push(...E4({text:U,files:st,reasoning:$e,tools:c??{},toolCalls:vt,toolResults:j,messageId:at,generateMessageId:D}));await ie({currentStep:J+1,responseMessages:xe,usage:En,stepType:Zt,previousStepText:$,hasLeadingWhitespace:Gt,messageId:Zt==="continue"?at:D()})}}})))}await ie({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:D()})}}).catch(se=>{Re.addStream(new ReadableStream({start(ie){ie.enqueue({type:"error",error:se}),ie.close()}})),Re.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return OS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return OS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new ece;return OS(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(Ha("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(Ha("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(Ha("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(Ha("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(Ha("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(Ha("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(Ha("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(Ha("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(Ha("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(Ha("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(Ha("error",e(i.error)));break}case"step-start":{o.enqueue(Ha("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(Ha("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(Ha("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const u=s;throw new Error(`Unknown chunk type: ${u}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c}={}){y4({response:e,status:t,statusText:n,headers:g4(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){y4({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:g4(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?Yk(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}),{status:t,statusText:n,headers:uv(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:uv(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},kce=F.object({name:F.string(),version:F.string()}).passthrough(),Xk=F.object({_meta:F.optional(F.object({}).passthrough())}).passthrough(),Qm=Xk,Cce=F.object({method:F.string(),params:F.optional(Xk)}),Ace=F.object({experimental:F.optional(F.object({}).passthrough()),logging:F.optional(F.object({}).passthrough()),prompts:F.optional(F.object({listChanged:F.optional(F.boolean())}).passthrough()),resources:F.optional(F.object({subscribe:F.optional(F.boolean()),listChanged:F.optional(F.boolean())}).passthrough()),tools:F.optional(F.object({listChanged:F.optional(F.boolean())}).passthrough())}).passthrough();Qm.extend({protocolVersion:F.string(),capabilities:Ace,serverInfo:kce,instructions:F.optional(F.string())});var Tce=Qm.extend({nextCursor:F.optional(F.string())}),Rce=F.object({name:F.string(),description:F.optional(F.string()),inputSchema:F.object({type:F.literal("object"),properties:F.optional(F.object({}).passthrough())}).passthrough()}).passthrough();Tce.extend({tools:F.array(Rce)});var Nce=F.object({type:F.literal("text"),text:F.string()}).passthrough(),Ice=F.object({type:F.literal("image"),data:F.string().base64(),mimeType:F.string()}).passthrough(),C5=F.object({uri:F.string(),mimeType:F.optional(F.string())}).passthrough(),Oce=C5.extend({text:F.string()}),jce=C5.extend({blob:F.string().base64()}),Dce=F.object({type:F.literal("resource"),resource:F.union([Oce,jce])}).passthrough();Qm.extend({content:F.array(F.union([Nce,Ice,Dce])),isError:F.boolean().default(!1).optional()}).or(Qm.extend({toolResult:F.unknown()}));var gw="2.0",Mce=F.object({jsonrpc:F.literal(gw),id:F.union([F.string(),F.number().int()])}).merge(Cce).strict(),Pce=F.object({jsonrpc:F.literal(gw),id:F.union([F.string(),F.number().int()]),result:Qm}).strict(),Fce=F.object({jsonrpc:F.literal(gw),id:F.union([F.string(),F.number().int()]),error:F.object({code:F.number().int(),message:F.string(),data:F.optional(F.unknown())})}).strict(),Lce=F.object({jsonrpc:F.literal(gw)}).merge(F.object({method:F.string(),params:F.optional(Xk)})).strict();F.union([Mce,Lce,Pce,Fce]);var $ce={};Zk($ce,{mergeIntoDataStream:()=>Uce,toDataStream:()=>Bce,toDataStreamResponse:()=>zce});function A5(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function Jk(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&k4((a=n.data)==null?void 0:a.chunk,r);return}k4(n,r)}})).pipeThrough(A5(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Ha("text",n))}}))}function Bce(e,t){return Jk(e,t).pipeThrough(new TextEncoderStream)}function zce(e,t){var n;const r=Jk(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?Yk(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:uv(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Uce(e,t){t.dataStream.merge(Jk(e,t.callbacks))}function k4(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var qce={};Zk(qce,{mergeIntoDataStream:()=>Gce,toDataStream:()=>Hce,toDataStreamResponse:()=>Vce});function Qk(e,t){const n=Wce();return iU(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(A5(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(Ha("text",r))}}))}function Hce(e,t){return Qk(e,t).pipeThrough(new TextEncoderStream)}function Vce(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=Qk(e,i).pipeThrough(new TextEncoderStream),s=a?Yk(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:uv(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Gce(e,t){t.dataStream.merge(Qk(e,t.callbacks))}function Wce(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class eb{static async startInteraction(t,n){var N,z,H,ee,P,Z,V,fe,ue;const r=Qn.getState(),a=r.currentConversationId;if(!a)return r.setError("No active conversation."),ct.error("Cannot start interaction: No active conversation."),null;const i=await y2("middleware:interaction:beforeStart",{prompt:t,conversationId:a});if(i===!1)return console.log("AIService: Interaction start cancelled by middleware."),null;const o=i&&typeof i=="object"?i.prompt:t,s=jo(),u=new AbortController;this.activeStreams.set(s,u);const f=r.interactions.filter(Y=>Y.conversationId===a),h=f.reduce((Y,X)=>Math.max(Y,X.index),-1)+1,m=f.length>0?f[f.length-1].id:null,g=[...o.messages];let v=-1;for(let Y=g.length-1;Y>=0;Y--)if(g[Y].role==="user"){v=Y;break}if(v!==-1&&((N=n.metadata)!=null&&N.attachedFiles)&&n.metadata.attachedFiles.length>0){const Y=g[v],X=n.metadata.attachedFiles.map(AW).filter(G=>G!==null);let ae=[];typeof Y.content=="string"?Y.content.trim()&&ae.push({type:"text",text:Y.content}):Array.isArray(Y.content)&&(ae=Y.content.filter(G=>G&&typeof G=="object"&&"type"in G&&(G.type==="text"||G.type==="image"))),g[v]={...Y,content:[...X,...ae]},console.log(`AIService: Added ${X.length} file(s) to user message content.`)}const w={id:s,conversationId:a,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...o.metadata,attachedFiles:(z=n.metadata.attachedFiles)==null?void 0:z.map(({contentBase64:Y,contentText:X,...ae})=>ae),toolCalls:[],toolResults:[]},index:h,parentId:m};r._addInteractionToState(w),r._addStreamingId(s),qt.saveInteraction({...w}).catch(Y=>{console.error(`AIService: Failed initial persistence for ${s}`,Y)}),Ei.emit("interaction:started",{interactionId:s,conversationId:a,type:w.type});let _,x="ERROR",S,E,A,k;const D=[],O=[];try{const Y=(H=fi.getState().getSelectedModel())==null?void 0:H.instance;if(!Y)throw new Error("Selected model instance not available.");const X=ta.getState().getRegisteredTools(),G=(((ee=o.metadata)==null?void 0:ee.enabledTools)??[]).reduce((de,_e)=>{const ve=X[_e];if(ve){const Pe={...ve.definition};ve.implementation&&(Pe.execute=async Fe=>{try{const Ie=EW(),Te=ve.definition.parameters.parse(Fe),Ue=ve.implementation;return await Ue(Te,Ie)}catch(Ie){console.error(`[AIService] Error executing tool ${_e} via SDK:`,Ie);const Te=Ie instanceof Error?Ie.message:String(Ie);return Ie instanceof F.ZodError?{_isError:!0,error:`Invalid arguments: ${Ie.errors.map(Ue=>`${Ue.path.join(".")} (${Ue.message})`).join(", ")}`}:{_isError:!0,error:Te}}}),de[_e]=Pe}return de},{}),Q=((P=o.parameters)==null?void 0:P.maxSteps)??qr.getState().toolMaxSteps,ne={model:Y,messages:g,abortSignal:u.signal,maxSteps:Q};Object.keys(G).length>0&&(ne.tools=G),ne.toolChoice=o.toolChoice??(Object.keys(G).length>0?"auto":"none"),o.system&&(ne.system=o.system),o.parameters&&(o.parameters.temperature!==void 0&&(ne.temperature=o.parameters.temperature),o.parameters.max_tokens!==void 0&&(ne.maxTokens=o.parameters.max_tokens),o.parameters.top_p!==void 0&&(ne.topP=o.parameters.top_p),o.parameters.top_k!==void 0&&(ne.topK=o.parameters.top_k),o.parameters.presence_penalty!==void 0&&(ne.presencePenalty=o.parameters.presence_penalty),o.parameters.frequency_penalty!==void 0&&(ne.frequencyPenalty=o.parameters.frequency_penalty)),console.log(`AIService: Calling streamText with options for ${s}:`,{modelId:(Z=o.metadata)==null?void 0:Z.modelId,system:!!ne.system,messageCount:(V=ne==null?void 0:ne.messages)==null?void 0:V.length,temperature:ne.temperature,maxTokens:ne.maxTokens,toolChoice:ne.toolChoice,tools:ne.tools?Object.keys(ne.tools):void 0,maxSteps:ne.maxSteps}),_=await xce(ne);for await(const de of _.fullStream){if(u.signal.aborted)throw console.log(`AIService: Stream ${s} aborted by signal.`),k="stop",new Error("Stream aborted by user.");switch(de.type){case"text-delta":{const _e={interactionId:s,chunk:de.textDelta},ve=await y2("middleware:interaction:processChunk",_e);if(ve!==!1){const Pe=ve&&typeof ve=="object"&&"chunk"in ve?ve.chunk:de.textDelta;Qn.getState().appendInteractionResponseChunk(s,Pe),Ei.emit("interaction:stream_chunk",{interactionId:s,chunk:Pe})}break}case"tool-call":{const _e=JSON.stringify(de);D.push(_e),Qn.getState()._updateInteractionInState(s,{metadata:{toolCalls:[...D]}}),console.log(`[AIService] Tool call observed: ${de.toolName}`,de.args);break}case"tool-result":{const _e=JSON.stringify(de);O.push(_e),Qn.getState()._updateInteractionInState(s,{metadata:{toolResults:[...O]}}),console.log(`[AIService] Tool result observed for ${de.toolName} (Call ID: ${de.toolCallId})`,de.result);break}case"finish":console.log("[AIService] Stream finish part received:",de),k=de.finishReason,E=de.usage,A=de.providerMetadata;break;case"error":throw console.error("[AIService] Stream error part:",de.error),k="error",new Error(`AI Stream Error: ${de.error instanceof Error?de.error.message:de.error}`);case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"file":case"tool-call-streaming-start":case"tool-call-delta":case"step-start":case"step-finish":break}}if(u.signal.aborted)throw k="stop",new Error("Stream aborted by user.");if(k===void 0){console.warn(`[AIService] Stream loop finished for ${s} without receiving a 'finish' part. Inferring reason.`);const de=Qn.getState().activeStreamBuffers[s]||"";D.length>0?k="tool-calls":de.trim()?k="stop":k="other"}}catch(Y){console.error(`AIService: Error during interaction ${s}:`,Y);const X=Y instanceof Error&&Y.message==="Stream aborted by user.";k=k??(X?"stop":"error"),S=X?void 0:Y instanceof Error?Y.message:String(Y),X?(console.log(`AIService: Interaction ${s} cancelled.`),ct.info("Interaction cancelled.")):ct.error(`AI Interaction Error: ${S}`)}finally{this.activeStreams.delete(s);const Y=Qn.getState().activeStreamBuffers[s]||"";switch(k){case"stop":case"length":case"tool-calls":x="COMPLETED";break;case"error":x="ERROR";break;case"other":default:Y.trim()||D.length>0?(x="COMPLETED",console.warn(`[AIService] Interaction ${s} finished with reason '${k||"unknown"}', but content/tools exist. Marking COMPLETED.`)):(x="WARNING",S=S??"Stream ended unexpectedly without output.",console.warn(`[AIService] Interaction ${s} finished with reason '${k||"unknown"}' and no content/tools. Marking WARNING.`));break}const X=((fe=Qn.getState().interactions.find(de=>de.id===s))==null?void 0:fe.metadata)||w.metadata,ae={status:x,endedAt:new Date,response:Y,metadata:{...X,...E&&{promptTokens:E.promptTokens,completionTokens:E.completionTokens,totalTokens:E.totalTokens},...A&&{providerMetadata:A},...(x==="ERROR"||x==="WARNING")&&{error:S},toolCalls:D,toolResults:O,attachedFiles:(ue=w.metadata.attachedFiles)==null?void 0:ue.map(({contentBase64:de,contentText:_e,...ve})=>ve)}};Qn.getState()._updateInteractionInState(s,ae),Qn.getState()._removeStreamingId(s);const G=Qn.getState().interactions.find(de=>de.id===s);G?Qn.getState().updateInteractionAndPersist({...G}).catch(de=>{console.error(`AIService: Failed final persistence for ${s}`,de)}):console.error(`AIService: CRITICAL - Could not find final state for interaction ${s} to persist after updates. State might be inconsistent.`);let Q=[],ne=[];try{Q=D.map(de=>JSON.parse(de)),ne=O.map(de=>JSON.parse(de))}catch(de){console.error("[AIService] Failed to parse tool strings for event emitter:",de)}Ei.emit("interaction:completed",{interactionId:s,status:x,error:S??void 0,toolCalls:Q,toolResults:ne}),console.log(`AIService: Finalized interaction ${s} with status ${x}.`)}return s}static stopInteraction(t){const n=this.activeStreams.get(t),r=Qn.getState();if(n&&!n.signal.aborted)console.log(`AIService: Aborting interaction ${t}...`),n.abort();else{console.log(`AIService: No active controller found or already aborted for interaction ${t}. Attempting store cleanup if needed.`);const a=r.interactions.find(i=>i.id===t);if(a&&a.status==="STREAMING"){console.warn(`AIService: Forcing CANCELLED status for interaction ${t} found in STREAMING state without active controller.`);const i=r.activeStreamBuffers[t]||"",o={status:"CANCELLED",endedAt:new Date,response:i,metadata:{...a.metadata||{},error:"Manually stopped (controller missing)"}};r._updateInteractionInState(t,o),r._removeStreamingId(t);const s=Qn.getState().interactions.find(u=>u.id===t);s&&r.updateInteractionAndPersist({...s}).catch(u=>{console.error(`AIService: Failed persistence for forced cancel of ${t}`,u)})}}}}Ua(eb,"activeStreams",new Map);const e0=Ds(Ms((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await qt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),ct.error(r)}},addDbMod:async n=>{const r=jo(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await qt.saveMod(a),ct.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(u=>u.id!==r),s.error=o}),ct.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(u=>u.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await qt.saveMod(o),ct.success(`Mod "${o.name}" updated.`)}catch(s){const u="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(c=>{const f=c.dbMods.findIndex(h=>h.id===n);f!==-1&&a&&(c.dbMods[f]=a,c.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),c.error=u}),ct.error(u),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await qt.deleteMod(n),ct.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder),s.error=o}),ct.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function C4(e){const t=e.id,n=e.name,r=ta.getState(),a=e0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>r.registerChatControl(o),registerTool:(o,s,u)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,u)),on:(o,s)=>(Ei.on(o,s),()=>Ei.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=Qn.getState(),s=Cr.getState(),u=qr.getState(),c=fi.getState(),{providerId:f}=l0(c.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:o.status==="streaming",selectedProviderId:f,selectedModelId:c.selectedModelId,activeSystemPrompt:u.globalSystemPrompt,temperature:u.temperature,maxTokens:u.maxTokens,theme:u.theme})},showToast:(o,s)=>{ct[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function Kce(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=C4(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);a=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(u){o=u instanceof Error?u:String(u),console.error(`[ModLoader] Error loading mod "${r.name}":`,u),ct.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=C4(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Ei.emit(s.error?"mod:error":"mod:loaded",{id:r.id,name:r.name,error:s.error}),s}));return Ei.emit("app:loaded",void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var Zce=(e,t,n,r,a,i,o,s)=>{let u=document.documentElement,c=["light","dark"];function f(g){(Array.isArray(e)?e:[e]).forEach(v=>{let w=v==="class",_=w&&i?a.map(x=>i[x]||x):a;w?(u.classList.remove(..._),u.classList.add(i&&i[g]?i[g]:g)):u.setAttribute(v,g)}),h(g)}function h(g){s&&c.includes(g)&&(u.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(t)||n,v=o&&g==="system"?m():g;f(v)}catch{}},Yce=L.createContext(void 0),Xce={setTheme:e=>{},themes:[]},Jce=()=>{var e;return(e=L.useContext(Yce))!=null?e:Xce};L.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:u,scriptProps:c})=>{let f=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return L.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Zce.toString()})(${f})`}})});const Qce=({...e})=>{const{theme:t="system"}=Jce();return y.jsx(_W,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function yw({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:Ht("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const T5=L.memo(L.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,...i},o)=>{const s=L.useRef(null),[u,c]=L.useState(e);L.useImperativeHandle(o,()=>({getValue:()=>u,focus:()=>{var v;return(v=s.current)==null?void 0:v.focus()}}));const{focusInputOnNextRender:f,setFocusInputFlag:h}=ui(Hn(v=>({focusInputOnNextRender:v.focusInputOnNextRender,setFocusInputFlag:v.setFocusInputFlag})));L.useEffect(()=>{f&&s.current&&(h(!1),requestAnimationFrame(()=>{var v;(v=s.current)==null||v.focus()}))},[f,h]);const m=v=>{if(v.key==="Enter"&&!v.shiftKey&&!n){v.preventDefault();const w=lb.getState().attachedFilesMetadata.length>0;(u.trim().length>0||w)&&(t(),c(""))}},g=v=>{c(v.target.value)};return L.useEffect(()=>{const v=s.current;if(v){v.style.height="auto";const w=v.scrollHeight,_=250;v.style.height=`${Math.min(w,_)}px`,v.style.overflowY=w>_?"auto":"hidden"}},[u]),L.useEffect(()=>{c(e)},[e]),y.jsx(yw,{ref:s,value:u,onChange:g,onKeyDown:m,disabled:n,placeholder:r,rows:1,className:Ht("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...i})}));T5.displayName="InputArea";function nr({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:Ht("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const R5=(e,t)=>{if(!t)return null;let n=tm,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Xn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Ff,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=fE,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=u6,r="text-green-500",a=`Synced with ${t}`;break;default:n=tm,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(n,{className:Ht("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(Nn,{side:"right",children:a})]})})},dv=L.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:w,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:A,handleCancelEdit:k,isSavingEdit:D,editInputRef:O})=>{const N=e.id===n,z=e.itemType==="project",H=e.id===v&&e.itemType===w,ee=z&&f.has(e.id),{projects:P,conversations:Z}=z?m(e.id,g):{projects:[],conversations:[]},V=P.length>0||Z.length>0,fe=!z&&e.syncRepoId?r[e.id]:void 0,ue=!z&&e.syncRepoId?a.get(e.syncRepoId):void 0,Y=!z&&ue?R5(fe,ue):null,X=ui(ve=>ve.openProjectSettingsModal),ae=()=>{H||(z&&V&&h(e.id),i(e.id,e.itemType))},G=ve=>{ve.stopPropagation(),z?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,ve):o(e.id,ve)},Q=ve=>{ve.stopPropagation(),E(e)},ne=ve=>{ve.stopPropagation(),z&&(console.log(`Opening project settings for: ${e.id}`),X(e.id))},de=ve=>{ve.key==="Enter"?(ve.preventDefault(),A()):ve.key==="Escape"&&k(z&&_==="New Project")};L.useEffect(()=>{var ve,Pe;H&&((ve=O.current)==null||ve.focus(),(Pe=O.current)==null||Pe.select())},[H,O]);const _e=z?e.name:e.title;return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:Ht("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!H&&"hover:bg-muted/50 hover:text-primary/80",N&&!H?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",H&&"bg-muted ring-1 ring-primary",!H&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ae,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[z&&V&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:ve=>{ve.stopPropagation(),h(e.id)},children:ee?y.jsx(lE,{className:"h-3 w-3 text-muted-foreground"}):y.jsx($B,{className:"h-3 w-3 text-muted-foreground"})}),z&&!V&&y.jsx("span",{className:"w-3 flex-shrink-0"}),z?y.jsx(a0,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(I7,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),H?y.jsx(nr,{ref:O,value:x,onChange:ve=>S(ve.target.value),onKeyDown:de,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:ve=>ve.stopPropagation(),disabled:D}):y.jsx("span",{className:"truncate pr-1",children:_e}),Y]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:H?y.jsxs(y.Fragment,{children:[y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-green-500 hover:text-green-600",onClick:ve=>{ve.stopPropagation(),A()},disabled:D||!x.trim()||x.trim()===_,"aria-label":"Save changes",children:D?y.jsx(Xn,{className:"h-3 w-3 animate-spin"}):y.jsx(id,{className:"h-3 w-3"})}),y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:ve=>{ve.stopPropagation(),k(z&&_==="New Project")},disabled:D,"aria-label":"Cancel edit",children:y.jsx(Zu,{className:"h-3 w-3"})})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[z&&y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:ne,"aria-label":`Settings for ${_e}`,children:y.jsx(ZB,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Project Settings"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:Q,"aria-label":`Edit ${_e}`,children:y.jsx(cE,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]})}),z?y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:ve=>c(e.id,ve),"aria-label":`Export project ${_e}`,children:y.jsx(e7,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Export Project (JSON)"})]})}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx("div",{className:"p-1 rounded hover:bg-muted cursor-pointer","aria-label":`Export ${_e}`,children:y.jsx(rb,{className:"h-3 w-3 text-muted-foreground group-hover/export:text-foreground"})})}),y.jsx(Nn,{side:"top",children:"Export Conversation"})]})}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:ve=>ve.stopPropagation(),children:[y.jsx(Lt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ve=>u(e.id,"json",ve),children:"JSON"}),y.jsx(Lt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ve=>u(e.id,"md",ve),children:"MD"})]})]}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-destructive hover:text-destructive/80",onClick:G,"aria-label":`Delete ${_e}`,children:y.jsx(Iu,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})})]},e.id),z&&ee&&y.jsxs(y.Fragment,{children:[P.sort((ve,Pe)=>Pe.updatedAt.getTime()-ve.updatedAt.getTime()).map(ve=>y.jsx(dv,{item:{...ve,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:w,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:A,handleCancelEdit:k,isSavingEdit:D,editInputRef:O},ve.id)),Z.sort((ve,Pe)=>Pe.updatedAt.getTime()-ve.updatedAt.getTime()).map(ve=>y.jsx(dv,{item:{...ve,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:w,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:A,handleCancelEdit:k,isSavingEdit:D,editInputRef:O},ve.id))]})]})});dv.displayName="ConversationItemRenderer";function ede({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=L.useState(null),[i,o]=L.useState(null),[s,u]=L.useState(""),[c,f]=L.useState(""),[h,m]=L.useState(!1),g=L.useRef(null),v=L.useCallback(x=>{a(x.id),o(x.itemType);const S=x.itemType==="project"?x.name:x.title;u(S),f(S),m(!1)},[]),w=L.useCallback((x=!1)=>{const S=r;a(null),o(null),u(""),f(""),m(!1),x&&S&&(console.log(`Cancelling edit for new project ${S}, deleting...`),n(S).catch(E=>{console.error("Failed to delete new project on cancel:",E),ct.error("Failed to clean up cancelled new project.")}))},[r,n]),_=L.useCallback(async()=>{if(!r||!i||h)return;const x=c.trim();if(!x||x===s){w(i==="project"&&s==="New Project");return}m(!0);try{i==="project"?await e(r,{name:x}):await t(r,{title:x}),ct.success("Item renamed successfully."),a(null),o(null),u(""),f("")}catch(S){console.error("Failed to save item name:",S)}finally{m(!1)}},[r,i,c,s,h,e,t,w]);return{editingItemId:r,editingItemType:i,editingName:s,localEditingName:c,setLocalEditingName:f,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:_,handleCancelEdit:w}}const W2=(e,t,n,r,a,i,o,s,u)=>{if(!n)return!0;const c=`${t}-${e}`;if(u[c]!==void 0)return u[c];let f=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))f=!0;else{const m=s.get(e)||[],g=o.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){f=!0;break}if(!f){for(const v of m)if(W2(v.id,"project",n,r,a,i,o,s,u)){f=!0;break}}}}return u[c]=f,f},tde=()=>{const{conversations:e,projects:t,selectItem:n,selectedItemId:r,selectedItemType:a,addConversation:i,updateConversation:o,deleteConversation:s,addProject:u,updateProject:c,deleteProject:f,exportConversation:h,exportProject:m,isLoading:g,syncRepos:v,conversationSyncStatus:w,getConversationById:_,getProjectById:x}=Cr(Hn(Ee=>({conversations:Ee.conversations,projects:Ee.projects,selectItem:Ee.selectItem,selectedItemId:Ee.selectedItemId,selectedItemType:Ee.selectedItemType,addConversation:Ee.addConversation,updateConversation:Ee.updateConversation,deleteConversation:Ee.deleteConversation,addProject:Ee.addProject,updateProject:Ee.updateProject,deleteProject:Ee.deleteProject,exportConversation:Ee.exportConversation,exportProject:Ee.exportProject,isLoading:Ee.isLoading,syncRepos:Ee.syncRepos,conversationSyncStatus:Ee.conversationSyncStatus,getConversationById:Ee.getConversationById,getProjectById:Ee.getProjectById}))),S=ui(Ee=>Ee.setFocusInputFlag),[E,A]=wt.useState(new Set),[k,D]=L.useState(""),{editingItemId:O,editingItemType:N,editingName:z,localEditingName:H,setLocalEditingName:ee,isSavingEdit:P,editInputRef:Z,handleStartEditing:V,handleSaveEdit:fe,handleCancelEdit:ue}=ede({updateProject:c,updateConversation:o,deleteProject:f,getProjectById:x,getConversationById:_}),Y=L.useCallback(Ee=>{A(Ae=>{const B=new Set(Ae);return B.has(Ee)?B.delete(Ee):B.add(Ee),B})},[]),X=L.useCallback(()=>{if(a==="project")return r;if(a==="conversation"&&r){const Ee=_(r);return(Ee==null?void 0:Ee.projectId)??null}return null},[r,a,_]),ae=L.useCallback(async()=>{if(!O)try{const Ee=X(),Ae=await i({title:"New Chat",projectId:Ee});n(Ae,"conversation"),setTimeout(()=>S(!0),0)}catch(Ee){console.error("Failed to create new chat:",Ee),ct.error("Failed to create new chat.")}},[O,X,i,n,S]),G=L.useCallback(async()=>{if(!O)try{const Ee=X(),Ae=await u({name:"New Project",parentId:Ee});n(Ae,"project"),Ee&&A(B=>new Set(B).add(Ee)),setTimeout(()=>{const B=x(Ae);B?V({...B,itemType:"project"}):(console.warn("New project data not found immediately, using fallback for edit start"),V({id:Ae,itemType:"project",name:"New Project",parentId:Ee,createdAt:new Date,updatedAt:new Date,path:"/New Project"}))},50)}catch(Ee){console.error("Failed to create new project:",Ee)}},[O,X,u,n,x,V]),Q=L.useCallback((Ee,Ae)=>{Ee!==O&&(O&&Ee!==O&&(H.trim()&&H.trim()!==z?fe():ue(N==="project"&&z==="New Project")),(Ee!==r||Ae!==a)&&(n(Ee,Ae),Ae==="conversation"&&setTimeout(()=>S(!0),0)))},[O,N,z,H,r,a,fe,ue,n,S]),ne=L.useCallback((Ee,Ae)=>{Ae.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&s(Ee).catch(B=>{console.error("Failed to delete conversation:",B),ct.error("Failed to delete conversation.")})},[s]),de=L.useCallback((Ee,Ae)=>{Ae.stopPropagation(),f(Ee).catch(B=>{console.error("Failed to delete project:",B),ct.error("Failed to delete project.")})},[f]),_e=L.useCallback(async(Ee,Ae,B)=>{B.stopPropagation();try{await h(Ee,Ae)}catch(Ce){console.error(`Failed to export conversation as ${Ae}:`,Ce)}},[h]),ve=L.useCallback(async(Ee,Ae)=>{Ae.stopPropagation();try{await m(Ee)}catch(B){console.error("Failed to export project:",B)}},[m]),Pe=L.useMemo(()=>new Map(v.map(Ee=>[Ee.id,Ee.name])),[v]),{projectsById:Fe,conversationsByProjectId:Ie,projectsByParentId:Te}=L.useMemo(()=>{const Ee=new Map(t.map(Ce=>[Ce.id,Ce])),Ae=new Map;e.forEach(Ce=>{const Re=Ce.projectId??null;Ae.has(Re)||Ae.set(Re,[]),Ae.get(Re).push(Ce)});const B=new Map;return t.forEach(Ce=>{const Re=Ce.parentId??null;B.has(Re)||B.set(Re,[]),B.get(Re).push(Ce)}),{projectsById:Ee,conversationsByProjectId:Ae,projectsByParentId:B}},[t,e]),Ue=L.useCallback((Ee,Ae)=>{const B=Ae.toLowerCase(),Ce={},Re=(Te.get(Ee)||[]).filter(ie=>W2(ie.id,"project",B,t,e,Fe,Ie,Te,Ce)),se=(Ie.get(Ee)||[]).filter(ie=>ie.title.toLowerCase().includes(B));return Re.sort((ie,J)=>J.updatedAt.getTime()-ie.updatedAt.getTime()),se.sort((ie,J)=>J.updatedAt.getTime()-ie.updatedAt.getTime()),{projects:Re,conversations:se}},[t,e,Fe,Ie,Te]),Ve=L.useMemo(()=>{const Ee=k.toLowerCase(),Ae={},B=(Te.get(null)||[]).filter(se=>W2(se.id,"project",Ee,t,e,Fe,Ie,Te,Ae)),Ce=(Ie.get(null)||[]).filter(se=>se.title.toLowerCase().includes(Ee)),Re=[...B.map(se=>({...se,itemType:"project"})),...Ce.map(se=>({...se,itemType:"conversation"}))];return Re.sort((se,ie)=>ie.updatedAt.getTime()-se.updatedAt.getTime()),Re},[t,e,k,Fe,Ie,Te]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{size:"sm",variant:"ghost",onClick:G,"aria-label":"New Project",disabled:g||!!O,className:"h-7 w-7 p-0",children:y.jsx(uE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:"New Project"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{size:"sm",variant:"ghost",onClick:ae,"aria-label":"New Chat",disabled:g||!!O,className:"h-7 w-7 p-0",children:y.jsx(gv,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(f6,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(nr,{type:"search",placeholder:"Filter...",value:k,onChange:Ee=>D(Ee.target.value),className:"h-8 text-xs pl-8",disabled:g})]}),y.jsx(K0,{className:"flex-grow",children:g?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"})]}):Ve.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:k.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:Ve.map(Ee=>y.jsx(dv,{item:Ee,level:0,selectedItemId:r,conversationSyncStatus:w,repoNameMap:Pe,onSelectItem:Q,onDeleteConversation:ne,onDeleteProject:de,onExportConversation:_e,onExportProject:ve,expandedProjects:E,toggleProjectExpansion:Y,getChildren:Ue,filterText:k,editingItemId:O,editingItemType:N,editingName:z,localEditingName:H,setLocalEditingName:ee,handleStartEditing:V,handleSaveEdit:fe,handleCancelEdit:ue,isSavingEdit:P,editInputRef:Z},Ee.id))})})]})},nde=()=>{const{addConversation:e,addProject:t,selectItem:n,selectedItemId:r,selectedItemType:a,getConversationById:i}=Cr(Hn(f=>({addConversation:f.addConversation,addProject:f.addProject,selectItem:f.selectItem,selectedItemId:f.selectedItemId,selectedItemType:f.selectedItemType,getConversationById:f.getConversationById}))),o=ui(f=>f.setFocusInputFlag),s=()=>{if(a==="project")return r;if(a==="conversation"&&r){const f=i(r);return(f==null?void 0:f.projectId)??null}return null},u=async()=>{try{const f=s(),h=await e({title:"New Chat",projectId:f});n(h,"conversation"),setTimeout(()=>o(!0),0)}catch(f){console.error("Failed to create new chat:",f)}},c=async()=>{try{const f=s(),h=await t({name:"New Project",parentId:f});n(h,"project")}catch(f){console.error("Failed to create new project:",f)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(uE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"right",children:"New Project"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(gv,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"right",children:"New Chat"})]})})]})};function rde(){const e=ta.getState().registerChatControl,t=Cr.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",order:10,status:()=>t?"loading":"ready",renderer:()=>wt.createElement(tde),iconRenderer:()=>wt.createElement(nde),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var jS="focusScope.autoFocusOnMount",DS="focusScope.autoFocusOnUnmount",A4={bubbles:!1,cancelable:!0},ade="FocusScope",Z0=L.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,u]=L.useState(null),c=Ea(a),f=Ea(i),h=L.useRef(null),m=xn(t,w=>u(w)),g=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(r){let w=function(E){if(g.paused||!s)return;const A=E.target;s.contains(A)?h.current=A:Su(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const A=E.relatedTarget;A!==null&&(s.contains(A)||Su(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&Su(s)};document.addEventListener("focusin",w),document.addEventListener("focusout",_);const S=new MutationObserver(x);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,g.paused]),L.useEffect(()=>{if(s){R4.add(g);const w=document.activeElement;if(!s.contains(w)){const x=new CustomEvent(jS,A4);s.addEventListener(jS,c),s.dispatchEvent(x),x.defaultPrevented||(ide(cde(N5(s)),{select:!0}),document.activeElement===w&&Su(s))}return()=>{s.removeEventListener(jS,c),setTimeout(()=>{const x=new CustomEvent(DS,A4);s.addEventListener(DS,f),s.dispatchEvent(x),x.defaultPrevented||Su(w??document.body,{select:!0}),s.removeEventListener(DS,f),R4.remove(g)},0)}}},[s,c,f,g]);const v=L.useCallback(w=>{if(!n&&!r||g.paused)return;const _=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,x=document.activeElement;if(_&&x){const S=w.currentTarget,[E,A]=ode(S);E&&A?!w.shiftKey&&x===A?(w.preventDefault(),n&&Su(E,{select:!0})):w.shiftKey&&x===E&&(w.preventDefault(),n&&Su(A,{select:!0})):x===S&&w.preventDefault()}},[n,r,g.paused]);return y.jsx(an.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});Z0.displayName=ade;function ide(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Su(r,{select:t}),document.activeElement!==n)return}function ode(e){const t=N5(e),n=T4(t,e),r=T4(t.reverse(),e);return[n,r]}function N5(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function T4(e,t){for(const n of e)if(!sde(n,{upTo:t}))return n}function sde(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function lde(e){return e instanceof HTMLInputElement&&"select"in e}function Su(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&lde(e)&&t&&e.select()}}var R4=ude();function ude(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=N4(e,t),e.unshift(t)},remove(t){var n;e=N4(e,t),(n=e[0])==null||n.resume()}}}function N4(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function cde(e){return e.filter(t=>t.tagName!=="A")}var MS=0;function bw(){L.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??I4()),document.body.insertAdjacentElement("beforeend",e[1]??I4()),MS++,()=>{MS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),MS--}},[])}function I4(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var _s=function(){return _s=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_s.apply(this,arguments)};function I5(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function dde(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var tb="right-scroll-bar-position",nb="width-before-scroll-bar",fde="with-scroll-bars-hidden",hde="--removed-body-scroll-bar-size";function PS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function pde(e,t){var n=L.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var mde=typeof window<"u"?L.useLayoutEffect:L.useEffect,O4=new WeakMap;function gde(e,t){var n=pde(null,function(r){return e.forEach(function(a){return PS(a,r)})});return mde(function(){var r=O4.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||PS(s,null)}),i.forEach(function(s){a.has(s)||PS(s,o)})}O4.set(n,e)},[e]),n}function yde(e){return e}function bde(e,t){t===void 0&&(t=yde);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var u=function(){var f=o;o=[],f.forEach(i)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(f){o.push(f),c()},filter:function(f){return o=o.filter(f),n}}}};return a}function vde(e){e===void 0&&(e={});var t=bde(null);return t.options=_s({async:!0,ssr:!1},e),t}var O5=function(e){var t=e.sideCar,n=I5(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return L.createElement(r,_s({},n))};O5.isSideCarExport=!0;function wde(e,t){return e.useMedium(t),O5}var j5=vde(),FS=function(){},vw=L.forwardRef(function(e,t){var n=L.useRef(null),r=L.useState({onScrollCapture:FS,onWheelCapture:FS,onTouchMoveCapture:FS}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,u=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,v=e.inert,w=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,S=e.gapMode,E=I5(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=m,k=gde([n,t]),D=_s(_s({},E),a);return L.createElement(L.Fragment,null,f&&L.createElement(A,{sideCar:j5,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:S}),o?L.cloneElement(L.Children.only(s),_s(_s({},D),{ref:k})):L.createElement(x,_s({},D,{className:u,ref:k}),s))});vw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vw.classNames={fullWidth:nb,zeroRight:tb};var _de=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xde(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=_de();return t&&e.setAttribute("nonce",t),e}function Sde(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ede(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var kde=function(){var e=0,t=null;return{add:function(n){e==0&&(t=xde())&&(Sde(t,n),Ede(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Cde=function(){var e=kde();return function(t,n){L.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},D5=function(){var e=Cde(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Ade={left:0,top:0,right:0,gap:0},LS=function(e){return parseInt(e||"",10)||0},Tde=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[LS(n),LS(r),LS(a)]},Rde=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ade;var t=Tde(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Nde=D5(),Pf="data-scroll-locked",Ide=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(fde,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Pf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tb,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(nb,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(tb," .").concat(tb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(nb," .").concat(nb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Pf,`] {
    `).concat(hde,": ").concat(s,`px;
  }
`)},j4=function(){var e=parseInt(document.body.getAttribute(Pf)||"0",10);return isFinite(e)?e:0},Ode=function(){L.useEffect(function(){return document.body.setAttribute(Pf,(j4()+1).toString()),function(){var e=j4()-1;e<=0?document.body.removeAttribute(Pf):document.body.setAttribute(Pf,e.toString())}},[])},jde=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Ode();var i=L.useMemo(function(){return Rde(a)},[a]);return L.createElement(Nde,{styles:Ide(i,!t,a,n?"":"!important")})},K2=!1;if(typeof window<"u")try{var By=Object.defineProperty({},"passive",{get:function(){return K2=!0,!0}});window.addEventListener("test",By,By),window.removeEventListener("test",By,By)}catch{K2=!1}var _f=K2?{passive:!1}:!1,Dde=function(e){return e.tagName==="TEXTAREA"},M5=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Dde(e)&&n[t]==="visible")},Mde=function(e){return M5(e,"overflowY")},Pde=function(e){return M5(e,"overflowX")},D4=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=P5(e,r);if(a){var i=F5(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Fde=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Lde=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},P5=function(e,t){return e==="v"?Mde(t):Pde(t)},F5=function(e,t){return e==="v"?Fde(t):Lde(t)},$de=function(e,t){return e==="h"&&t==="rtl"?-1:1},Bde=function(e,t,n,r,a){var i=$de(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,u=t.contains(s),c=!1,f=o>0,h=0,m=0;do{var g=F5(e,s),v=g[0],w=g[1],_=g[2],x=w-_-i*v;(v||x)&&P5(e,s)&&(h+=x,m+=v),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(f&&Math.abs(h)<1||!f&&Math.abs(m)<1)&&(c=!0),c},zy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},M4=function(e){return[e.deltaX,e.deltaY]},P4=function(e){return e&&"current"in e?e.current:e},zde=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ude=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},qde=0,xf=[];function Hde(e){var t=L.useRef([]),n=L.useRef([0,0]),r=L.useRef(),a=L.useState(qde++)[0],i=L.useState(D5)[0],o=L.useRef(e);L.useEffect(function(){o.current=e},[e]),L.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var w=dde([e.lockRef.current],(e.shards||[]).map(P4),!0).filter(Boolean);return w.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),w.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=L.useCallback(function(w,_){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var x=zy(w),S=n.current,E="deltaX"in w?w.deltaX:S[0]-x[0],A="deltaY"in w?w.deltaY:S[1]-x[1],k,D=w.target,O=Math.abs(E)>Math.abs(A)?"h":"v";if("touches"in w&&O==="h"&&D.type==="range")return!1;var N=D4(O,D);if(!N)return!0;if(N?k=O:(k=O==="v"?"h":"v",N=D4(O,D)),!N)return!1;if(!r.current&&"changedTouches"in w&&(E||A)&&(r.current=k),!k)return!0;var z=r.current||k;return Bde(z,_,w,z==="h"?E:A)},[]),u=L.useCallback(function(w){var _=w;if(!(!xf.length||xf[xf.length-1]!==i)){var x="deltaY"in _?M4(_):zy(_),S=t.current.filter(function(k){return k.name===_.type&&(k.target===_.target||_.target===k.shadowParent)&&zde(k.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(P4).filter(Boolean).filter(function(k){return k.contains(_.target)}),A=E.length>0?s(_,E[0]):!o.current.noIsolation;A&&_.cancelable&&_.preventDefault()}}},[]),c=L.useCallback(function(w,_,x,S){var E={name:w,delta:_,target:x,should:S,shadowParent:Vde(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(A){return A!==E})},1)},[]),f=L.useCallback(function(w){n.current=zy(w),r.current=void 0},[]),h=L.useCallback(function(w){c(w.type,M4(w),w.target,s(w,e.lockRef.current))},[]),m=L.useCallback(function(w){c(w.type,zy(w),w.target,s(w,e.lockRef.current))},[]);L.useEffect(function(){return xf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",u,_f),document.addEventListener("touchmove",u,_f),document.addEventListener("touchstart",f,_f),function(){xf=xf.filter(function(w){return w!==i}),document.removeEventListener("wheel",u,_f),document.removeEventListener("touchmove",u,_f),document.removeEventListener("touchstart",f,_f)}},[]);var g=e.removeScrollBar,v=e.inert;return L.createElement(L.Fragment,null,v?L.createElement(i,{styles:Ude(a)}):null,g?L.createElement(jde,{gapMode:e.gapMode}):null)}function Vde(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Gde=wde(j5,Hde);var Y0=L.forwardRef(function(e,t){return L.createElement(vw,_s({},e,{ref:t,sideCar:Gde}))});Y0.classNames=vw.classNames;var Wde=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Sf=new WeakMap,Uy=new WeakMap,qy={},$S=0,L5=function(e){return e&&(e.host||L5(e.parentNode))},Kde=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=L5(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Zde=function(e,t,n,r){var a=Kde(t,Array.isArray(e)?e:[e]);qy[n]||(qy[n]=new WeakMap);var i=qy[n],o=[],s=new Set,u=new Set(a),c=function(h){!h||s.has(h)||(s.add(h),c(h.parentNode))};a.forEach(c);var f=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(m){if(s.has(m))f(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",w=(Sf.get(m)||0)+1,_=(i.get(m)||0)+1;Sf.set(m,w),i.set(m,_),o.push(m),w===1&&v&&Uy.set(m,!0),_===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return f(t),s.clear(),$S++,function(){o.forEach(function(h){var m=Sf.get(h)-1,g=i.get(h)-1;Sf.set(h,m),i.set(h,g),m||(Uy.has(h)||h.removeAttribute(r),Uy.delete(h)),g||h.removeAttribute(n)}),$S--,$S||(Sf=new WeakMap,Sf=new WeakMap,Uy=new WeakMap,qy={})}},ww=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Wde(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Zde(r,a,n,"aria-hidden")):function(){return null}},_w="Dialog",[$5,Cge]=Ri(_w),[Yde,Yo]=$5(_w),B5=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=L.useRef(null),u=L.useRef(null),[c,f]=Os({prop:r,defaultProp:a??!1,onChange:i,caller:_w});return y.jsx(Yde,{scope:t,triggerRef:s,contentRef:u,contentId:Cs(),titleId:Cs(),descriptionId:Cs(),open:c,onOpenChange:f,onOpenToggle:L.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};B5.displayName=_w;var z5="DialogTrigger",Xde=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(z5,n),i=xn(t,a.triggerRef);return y.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":nC(a.open),...r,ref:i,onClick:zt(e.onClick,a.onOpenToggle)})});Xde.displayName=z5;var eC="DialogPortal",[Jde,U5]=$5(eC,{forceMount:void 0}),q5=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=Yo(eC,t);return y.jsx(Jde,{scope:t,forceMount:n,children:L.Children.map(r,o=>y.jsx(Na,{present:n||i.open,children:y.jsx(gh,{asChild:!0,container:a,children:o})}))})};q5.displayName=eC;var fv="DialogOverlay",H5=L.forwardRef((e,t)=>{const n=U5(fv,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Yo(fv,e.__scopeDialog);return i.modal?y.jsx(Na,{present:r||i.open,children:y.jsx(efe,{...a,ref:t})}):null});H5.displayName=fv;var Qde=Nu("DialogOverlay.RemoveScroll"),efe=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(fv,n);return y.jsx(Y0,{as:Qde,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(an.div,{"data-state":nC(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),nd="DialogContent",V5=L.forwardRef((e,t)=>{const n=U5(nd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Yo(nd,e.__scopeDialog);return y.jsx(Na,{present:r||i.open,children:i.modal?y.jsx(tfe,{...a,ref:t}):y.jsx(nfe,{...a,ref:t})})});V5.displayName=nd;var tfe=L.forwardRef((e,t)=>{const n=Yo(nd,e.__scopeDialog),r=L.useRef(null),a=xn(t,n.contentRef,r);return L.useEffect(()=>{const i=r.current;if(i)return ww(i)},[]),y.jsx(G5,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:zt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:zt(e.onFocusOutside,i=>i.preventDefault())})}),nfe=L.forwardRef((e,t)=>{const n=Yo(nd,e.__scopeDialog),r=L.useRef(!1),a=L.useRef(!1);return y.jsx(G5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),G5=L.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=Yo(nd,n),u=L.useRef(null),c=xn(t,u);return bw(),y.jsxs(y.Fragment,{children:[y.jsx(Z0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(hh,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":nC(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(rfe,{titleId:s.titleId}),y.jsx(ife,{contentRef:u,descriptionId:s.descriptionId})]})]})}),tC="DialogTitle",W5=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(tC,n);return y.jsx(an.h2,{id:a.titleId,...r,ref:t})});W5.displayName=tC;var K5="DialogDescription",Z5=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(K5,n);return y.jsx(an.p,{id:a.descriptionId,...r,ref:t})});Z5.displayName=K5;var Y5="DialogClose",X5=L.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Yo(Y5,n);return y.jsx(an.button,{type:"button",...r,ref:t,onClick:zt(e.onClick,()=>a.onOpenChange(!1))})});X5.displayName=Y5;function nC(e){return e?"open":"closed"}var J5="DialogTitleWarning",[Age,Q5]=IW(J5,{contentName:nd,titleName:tC,docsSlug:"dialog"}),rfe=({titleId:e})=>{const t=Q5(J5),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return L.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},afe="DialogDescriptionWarning",ife=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Q5(afe).contentName}}.`;return L.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},ofe=B5,sfe=q5,lfe=H5,ufe=V5,cfe=W5,dfe=Z5,ffe=X5;function xw({...e}){return y.jsx(ofe,{"data-slot":"dialog",...e})}function hfe({...e}){return y.jsx(sfe,{"data-slot":"dialog-portal",...e})}function pfe({className:e,...t}){return y.jsx(lfe,{"data-slot":"dialog-overlay",className:Ht("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Sw({className:e,children:t,...n}){return y.jsxs(hfe,{"data-slot":"dialog-portal",children:[y.jsx(pfe,{}),y.jsxs(ufe,{"data-slot":"dialog-content",className:Ht("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(ffe,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(Zu,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Ew({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:Ht("flex flex-col gap-2 text-center sm:text-left",e),...t})}function kw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:Ht("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Cw({className:e,...t}){return y.jsx(cfe,{"data-slot":"dialog-title",className:Ht("text-lg leading-none font-semibold",e),...t})}function Aw({className:e,...t}){return y.jsx(dfe,{"data-slot":"dialog-description",className:Ht("text-muted-foreground text-sm",e),...t})}function Tw(e){const t=e+"CollectionProvider",[n,r]=Ri(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:_,children:x}=w,S=wt.useRef(null),E=wt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:S,children:x})};o.displayName=t;const s=e+"CollectionSlot",u=Nu(s),c=wt.forwardRef((w,_)=>{const{scope:x,children:S}=w,E=i(s,x),A=xn(_,E.collectionRef);return y.jsx(u,{ref:A,children:S})});c.displayName=s;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=Nu(f),g=wt.forwardRef((w,_)=>{const{scope:x,children:S,...E}=w,A=wt.useRef(null),k=xn(_,A),D=i(f,x);return wt.useEffect(()=>(D.itemMap.set(A,{ref:A,...E}),()=>void D.itemMap.delete(A))),y.jsx(m,{[h]:"",ref:k,children:S})});g.displayName=f;function v(w){const _=i(e+"CollectionConsumer",w);return wt.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((D,O)=>E.indexOf(D.ref.current)-E.indexOf(O.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var BS="rovingFocusGroup.onEntryFocus",mfe={bubbles:!1,cancelable:!0},X0="RovingFocusGroup",[Z2,eF,gfe]=Tw(X0),[yfe,Rw]=Ri(X0,[gfe]),[bfe,vfe]=yfe(X0),tF=L.forwardRef((e,t)=>y.jsx(Z2.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(Z2.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(wfe,{...e,ref:t})})}));tF.displayName=X0;var wfe=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=e,m=L.useRef(null),g=xn(t,m),v=Ih(i),[w,_]=Os({prop:o,defaultProp:s??null,onChange:u,caller:X0}),[x,S]=L.useState(!1),E=Ea(c),A=eF(n),k=L.useRef(!1),[D,O]=L.useState(0);return L.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(BS,E),()=>N.removeEventListener(BS,E)},[E]),y.jsx(bfe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:w,onItemFocus:L.useCallback(N=>_(N),[_]),onItemShiftTab:L.useCallback(()=>S(!0),[]),onFocusableItemAdd:L.useCallback(()=>O(N=>N+1),[]),onFocusableItemRemove:L.useCallback(()=>O(N=>N-1),[]),children:y.jsx(an.div,{tabIndex:x||D===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:zt(e.onMouseDown,()=>{k.current=!0}),onFocus:zt(e.onFocus,N=>{const z=!k.current;if(N.target===N.currentTarget&&z&&!x){const H=new CustomEvent(BS,mfe);if(N.currentTarget.dispatchEvent(H),!H.defaultPrevented){const ee=A().filter(ue=>ue.focusable),P=ee.find(ue=>ue.active),Z=ee.find(ue=>ue.id===w),fe=[P,Z,...ee].filter(Boolean).map(ue=>ue.ref.current);aF(fe,f)}}k.current=!1}),onBlur:zt(e.onBlur,()=>S(!1))})})}),nF="RovingFocusGroupItem",rF=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,u=Cs(),c=i||u,f=vfe(nF,n),h=f.currentTabStopId===c,m=eF(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:w}=f;return L.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),y.jsx(Z2.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:y.jsx(an.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...s,ref:t,onMouseDown:zt(e.onMouseDown,_=>{r?f.onItemFocus(c):_.preventDefault()}),onFocus:zt(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:zt(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=Sfe(_,f.orientation,f.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=m().filter(A=>A.focusable).map(A=>A.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const A=E.indexOf(_.currentTarget);E=f.loop?Efe(E,A+1):E.slice(A+1)}setTimeout(()=>aF(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:w!=null}):o})})});rF.displayName=nF;var _fe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xfe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Sfe(e,t,n){const r=xfe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return _fe[r]}function aF(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Efe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var iF=tF,oF=rF,Nw="Tabs",[kfe,Tge]=Ri(Nw,[Rw]),sF=Rw(),[Cfe,rC]=kfe(Nw),lF=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:u="automatic",...c}=e,f=Ih(s),[h,m]=Os({prop:r,onChange:a,defaultProp:i??"",caller:Nw});return y.jsx(Cfe,{scope:n,baseId:Cs(),value:h,onValueChange:m,orientation:o,dir:f,activationMode:u,children:y.jsx(an.div,{dir:f,"data-orientation":o,...c,ref:t})})});lF.displayName=Nw;var uF="TabsList",cF=L.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=rC(uF,n),o=sF(n);return y.jsx(iF,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(an.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});cF.displayName=uF;var dF="TabsTrigger",fF=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=rC(dF,n),s=sF(n),u=mF(o.baseId,r),c=gF(o.baseId,r),f=r===o.value;return y.jsx(oF,{asChild:!0,...s,focusable:!a,active:f,children:y.jsx(an.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:zt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:zt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:zt(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!a&&h&&o.onValueChange(r)})})})});fF.displayName=dF;var hF="TabsContent",pF=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=rC(hF,n),u=mF(s.baseId,r),c=gF(s.baseId,r),f=r===s.value,h=L.useRef(f);return L.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),y.jsx(Na,{present:a||f,children:({present:m})=>y.jsx(an.div,{"data-state":f?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!m,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});pF.displayName=hF;function mF(e,t){return`${e}-trigger-${t}`}function gF(e,t){return`${e}-content-${t}`}var Afe=lF,Tfe=cF,Rfe=fF,Nfe=pF;function Iw({className:e,...t}){return y.jsx(Afe,{"data-slot":"tabs",className:Ht("flex flex-col gap-2",e),...t})}function Ow({className:e,...t}){return y.jsx(Tfe,{"data-slot":"tabs-list",className:Ht("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function si({className:e,...t}){return y.jsx(Rfe,{"data-slot":"tabs-trigger",className:Ht("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function li({className:e,...t}){return y.jsx(Nfe,{"data-slot":"tabs-content",className:Ht("flex-1 outline-none",e),...t})}var Ife="Label",yF=L.forwardRef((e,t)=>y.jsx(an.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));yF.displayName=Ife;var Ofe=yF;function dn({className:e,...t}){return y.jsx(Ofe,{"data-slot":"label",className:Ht("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function jw(e){const t=L.useRef({value:e,previous:e});return L.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Dw="Switch",[jfe,Rge]=Ri(Dw),[Dfe,Mfe]=jfe(Dw),bF=L.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=L.useState(null),v=xn(t,E=>g(E)),w=L.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Os({prop:a,defaultProp:i??!1,onChange:c,caller:Dw});return y.jsxs(Dfe,{scope:n,checked:x,disabled:s,children:[y.jsx(an.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":xF(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onClick:zt(e.onClick,E=>{S(A=>!A),_&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),_&&y.jsx(_F,{control:m,bubbles:!w.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"}})]})});bF.displayName=Dw;var vF="SwitchThumb",wF=L.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Mfe(vF,n);return y.jsx(an.span,{"data-state":xF(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});wF.displayName=vF;var Pfe="SwitchBubbleInput",_F=L.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=L.useRef(null),s=xn(o,i),u=jw(n),c=jv(t);return L.useEffect(()=>{const f=o.current;if(!f)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&g){const v=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(v)}},[u,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});_F.displayName=Pfe;function xF(e){return e?"checked":"unchecked"}var Ffe=bF,Lfe=wF;function jl({className:e,...t}){return y.jsx(Ffe,{"data-slot":"switch",className:Ht("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Lfe,{"data-slot":"switch-thumb",className:Ht("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var $fe=[" ","Enter","ArrowUp","ArrowDown"],Bfe=[" ","Enter"],rd="Select",[Mw,Pw,zfe]=Tw(rd),[Oh,Nge]=Ri(rd,[zfe,Yu]),Fw=Yu(),[Ufe,oc]=Oh(rd),[qfe,Hfe]=Oh(rd),SF=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:u,dir:c,name:f,autoComplete:h,disabled:m,required:g,form:v}=e,w=Fw(t),[_,x]=L.useState(null),[S,E]=L.useState(null),[A,k]=L.useState(!1),D=Ih(c),[O,N]=Os({prop:r,defaultProp:a??!1,onChange:i,caller:rd}),[z,H]=Os({prop:o,defaultProp:s,onChange:u,caller:rd}),ee=L.useRef(null),P=_?v||!!_.closest("form"):!0,[Z,V]=L.useState(new Set),fe=Array.from(Z).map(ue=>ue.props.value).join(";");return y.jsx(Dv,{...w,children:y.jsxs(Ufe,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:A,onValueNodeHasChildrenChange:k,contentId:Cs(),value:z,onValueChange:H,open:O,onOpenChange:N,dir:D,triggerPointerDownPosRef:ee,disabled:m,children:[y.jsx(Mw.Provider,{scope:t,children:y.jsx(qfe,{scope:e.__scopeSelect,onNativeOptionAdd:L.useCallback(ue=>{V(Y=>new Set(Y).add(ue))},[]),onNativeOptionRemove:L.useCallback(ue=>{V(Y=>{const X=new Set(Y);return X.delete(ue),X})},[]),children:n})}),P?y.jsxs(VF,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:z,onChange:ue=>H(ue.target.value),disabled:m,form:v,children:[z===void 0?y.jsx("option",{value:""}):null,Array.from(Z)]},fe):null]})})};SF.displayName=rd;var EF="SelectTrigger",kF=L.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Fw(n),o=oc(EF,n),s=o.disabled||r,u=xn(t,o.onTriggerChange),c=Pw(n),f=L.useRef("touch"),[h,m,g]=WF(w=>{const _=c().filter(E=>!E.disabled),x=_.find(E=>E.value===o.value),S=KF(_,w,x);S!==void 0&&o.onValueChange(S.value)}),v=w=>{s||(o.onOpenChange(!0),g()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return y.jsx(d0,{asChild:!0,...i,children:y.jsx(an.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":GF(o.value)?"":void 0,...a,ref:u,onClick:zt(a.onClick,w=>{w.currentTarget.focus(),f.current!=="mouse"&&v(w)}),onPointerDown:zt(a.onPointerDown,w=>{f.current=w.pointerType;const _=w.target;_.hasPointerCapture(w.pointerId)&&_.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(v(w),w.preventDefault())}),onKeyDown:zt(a.onKeyDown,w=>{const _=h.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(_&&w.key===" ")&&$fe.includes(w.key)&&(v(),w.preventDefault())})})})});kF.displayName=EF;var CF="SelectValue",AF=L.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,u=oc(CF,n),{onValueNodeHasChildrenChange:c}=u,f=i!==void 0,h=xn(t,u.onValueNodeChange);return Fa(()=>{c(f)},[c,f]),y.jsx(an.span,{...s,ref:h,style:{pointerEvents:"none"},children:GF(u.value)?y.jsx(y.Fragment,{children:o}):i})});AF.displayName=CF;var Vfe="SelectIcon",TF=L.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(an.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});TF.displayName=Vfe;var Gfe="SelectPortal",RF=e=>y.jsx(gh,{asChild:!0,...e});RF.displayName=Gfe;var ad="SelectContent",NF=L.forwardRef((e,t)=>{const n=oc(ad,e.__scopeSelect),[r,a]=L.useState();if(Fa(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?u0.createPortal(y.jsx(IF,{scope:e.__scopeSelect,children:y.jsx(Mw.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(OF,{...e,ref:t})});NF.displayName=ad;var No=10,[IF,sc]=Oh(ad),Wfe="SelectContentImpl",Kfe=Nu("SelectContent.RemoveScroll"),OF=L.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:w,avoidCollisions:_,...x}=e,S=oc(ad,n),[E,A]=L.useState(null),[k,D]=L.useState(null),O=xn(t,Fe=>A(Fe)),[N,z]=L.useState(null),[H,ee]=L.useState(null),P=Pw(n),[Z,V]=L.useState(!1),fe=L.useRef(!1);L.useEffect(()=>{if(E)return ww(E)},[E]),bw();const ue=L.useCallback(Fe=>{const[Ie,...Te]=P().map(Ee=>Ee.ref.current),[Ue]=Te.slice(-1),Ve=document.activeElement;for(const Ee of Fe)if(Ee===Ve||(Ee==null||Ee.scrollIntoView({block:"nearest"}),Ee===Ie&&k&&(k.scrollTop=0),Ee===Ue&&k&&(k.scrollTop=k.scrollHeight),Ee==null||Ee.focus(),document.activeElement!==Ve))return},[P,k]),Y=L.useCallback(()=>ue([N,E]),[ue,N,E]);L.useEffect(()=>{Z&&Y()},[Z,Y]);const{onOpenChange:X,triggerPointerDownPosRef:ae}=S;L.useEffect(()=>{if(E){let Fe={x:0,y:0};const Ie=Ue=>{var Ve,Ee;Fe={x:Math.abs(Math.round(Ue.pageX)-(((Ve=ae.current)==null?void 0:Ve.x)??0)),y:Math.abs(Math.round(Ue.pageY)-(((Ee=ae.current)==null?void 0:Ee.y)??0))}},Te=Ue=>{Fe.x<=10&&Fe.y<=10?Ue.preventDefault():E.contains(Ue.target)||X(!1),document.removeEventListener("pointermove",Ie),ae.current=null};return ae.current!==null&&(document.addEventListener("pointermove",Ie),document.addEventListener("pointerup",Te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ie),document.removeEventListener("pointerup",Te,{capture:!0})}}},[E,X,ae]),L.useEffect(()=>{const Fe=()=>X(!1);return window.addEventListener("blur",Fe),window.addEventListener("resize",Fe),()=>{window.removeEventListener("blur",Fe),window.removeEventListener("resize",Fe)}},[X]);const[G,Q]=WF(Fe=>{const Ie=P().filter(Ve=>!Ve.disabled),Te=Ie.find(Ve=>Ve.ref.current===document.activeElement),Ue=KF(Ie,Fe,Te);Ue&&setTimeout(()=>Ue.ref.current.focus())}),ne=L.useCallback((Fe,Ie,Te)=>{const Ue=!fe.current&&!Te;(S.value!==void 0&&S.value===Ie||Ue)&&(z(Fe),Ue&&(fe.current=!0))},[S.value]),de=L.useCallback(()=>E==null?void 0:E.focus(),[E]),_e=L.useCallback((Fe,Ie,Te)=>{const Ue=!fe.current&&!Te;(S.value!==void 0&&S.value===Ie||Ue)&&ee(Fe)},[S.value]),ve=r==="popper"?Y2:jF,Pe=ve===Y2?{side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:w,avoidCollisions:_}:{};return y.jsx(IF,{scope:n,content:E,viewport:k,onViewportChange:D,itemRefCallback:ne,selectedItem:N,onItemLeave:de,itemTextRefCallback:_e,focusSelectedItem:Y,selectedItemText:H,position:r,isPositioned:Z,searchRef:G,children:y.jsx(Y0,{as:Kfe,allowPinchZoom:!0,children:y.jsx(Z0,{asChild:!0,trapped:S.open,onMountAutoFocus:Fe=>{Fe.preventDefault()},onUnmountAutoFocus:zt(a,Fe=>{var Ie;(Ie=S.trigger)==null||Ie.focus({preventScroll:!0}),Fe.preventDefault()}),children:y.jsx(hh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Fe=>Fe.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(ve,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Fe=>Fe.preventDefault(),...x,...Pe,onPlaced:()=>V(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:zt(x.onKeyDown,Fe=>{const Ie=Fe.ctrlKey||Fe.altKey||Fe.metaKey;if(Fe.key==="Tab"&&Fe.preventDefault(),!Ie&&Fe.key.length===1&&Q(Fe.key),["ArrowUp","ArrowDown","Home","End"].includes(Fe.key)){let Ue=P().filter(Ve=>!Ve.disabled).map(Ve=>Ve.ref.current);if(["ArrowUp","End"].includes(Fe.key)&&(Ue=Ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(Fe.key)){const Ve=Fe.target,Ee=Ue.indexOf(Ve);Ue=Ue.slice(Ee+1)}setTimeout(()=>ue(Ue)),Fe.preventDefault()}})})})})})})});OF.displayName=Wfe;var Zfe="SelectItemAlignedPosition",jF=L.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=oc(ad,n),o=sc(ad,n),[s,u]=L.useState(null),[c,f]=L.useState(null),h=xn(t,O=>f(O)),m=Pw(n),g=L.useRef(!1),v=L.useRef(!0),{viewport:w,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,E=L.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&w&&_&&x){const O=i.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),z=i.valueNode.getBoundingClientRect(),H=x.getBoundingClientRect();if(i.dir!=="rtl"){const Ve=H.left-N.left,Ee=z.left-Ve,Ae=O.left-Ee,B=O.width+Ae,Ce=Math.max(B,N.width),Re=window.innerWidth-No,se=Hm(Ee,[No,Math.max(No,Re-Ce)]);s.style.minWidth=B+"px",s.style.left=se+"px"}else{const Ve=N.right-H.right,Ee=window.innerWidth-z.right-Ve,Ae=window.innerWidth-O.right-Ee,B=O.width+Ae,Ce=Math.max(B,N.width),Re=window.innerWidth-No,se=Hm(Ee,[No,Math.max(No,Re-Ce)]);s.style.minWidth=B+"px",s.style.right=se+"px"}const ee=m(),P=window.innerHeight-No*2,Z=w.scrollHeight,V=window.getComputedStyle(c),fe=parseInt(V.borderTopWidth,10),ue=parseInt(V.paddingTop,10),Y=parseInt(V.borderBottomWidth,10),X=parseInt(V.paddingBottom,10),ae=fe+ue+Z+X+Y,G=Math.min(_.offsetHeight*5,ae),Q=window.getComputedStyle(w),ne=parseInt(Q.paddingTop,10),de=parseInt(Q.paddingBottom,10),_e=O.top+O.height/2-No,ve=P-_e,Pe=_.offsetHeight/2,Fe=_.offsetTop+Pe,Ie=fe+ue+Fe,Te=ae-Ie;if(Ie<=_e){const Ve=ee.length>0&&_===ee[ee.length-1].ref.current;s.style.bottom="0px";const Ee=c.clientHeight-w.offsetTop-w.offsetHeight,Ae=Math.max(ve,Pe+(Ve?de:0)+Ee+Y),B=Ie+Ae;s.style.height=B+"px"}else{const Ve=ee.length>0&&_===ee[0].ref.current;s.style.top="0px";const Ae=Math.max(_e,fe+w.offsetTop+(Ve?ne:0)+Pe)+Te;s.style.height=Ae+"px",w.scrollTop=Ie-_e+w.offsetTop}s.style.margin=`${No}px 0`,s.style.minHeight=G+"px",s.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,s,c,w,_,x,i.dir,r]);Fa(()=>E(),[E]);const[A,k]=L.useState();Fa(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const D=L.useCallback(O=>{O&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return y.jsx(Xfe,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:D,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:y.jsx(an.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});jF.displayName=Zfe;var Yfe="SelectPopperPosition",Y2=L.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=No,...i}=e,o=Fw(n);return y.jsx(Mv,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Y2.displayName=Yfe;var[Xfe,aC]=Oh(ad,{}),X2="SelectViewport",DF=L.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=sc(X2,n),o=aC(X2,n),s=xn(t,i.onViewportChange),u=L.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(Mw.Slot,{scope:n,children:y.jsx(an.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:zt(a.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(u.current-f.scrollTop);if(g>0){const v=window.innerHeight-No*2,w=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(w,_);if(x<v){const S=x+g,E=Math.min(v,S),A=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(f.scrollTop=A>0?A:0,h.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});DF.displayName=X2;var MF="SelectGroup",[Jfe,Qfe]=Oh(MF),ehe=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Cs();return y.jsx(Jfe,{scope:n,id:a,children:y.jsx(an.div,{role:"group","aria-labelledby":a,...r,ref:t})})});ehe.displayName=MF;var PF="SelectLabel",the=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Qfe(PF,n);return y.jsx(an.div,{id:a.id,...r,ref:t})});the.displayName=PF;var hv="SelectItem",[nhe,FF]=Oh(hv),LF=L.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=oc(hv,n),u=sc(hv,n),c=s.value===r,[f,h]=L.useState(i??""),[m,g]=L.useState(!1),v=xn(t,S=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,S,r,a)}),w=Cs(),_=L.useRef("touch"),x=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(nhe,{scope:n,value:r,disabled:a,textId:w,isSelected:c,onItemTextChange:L.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(Mw.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:y.jsx(an.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:zt(o.onFocus,()=>g(!0)),onBlur:zt(o.onBlur,()=>g(!1)),onClick:zt(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:zt(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:zt(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:zt(o.onPointerMove,S=>{var E;_.current=S.pointerType,a?(E=u.onItemLeave)==null||E.call(u):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:zt(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:zt(o.onKeyDown,S=>{var A;((A=u.searchRef)==null?void 0:A.current)!==""&&S.key===" "||(Bfe.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});LF.displayName=hv;var Yp="SelectItemText",$F=L.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=oc(Yp,n),s=sc(Yp,n),u=FF(Yp,n),c=Hfe(Yp,n),[f,h]=L.useState(null),m=xn(t,x=>h(x),u.onItemTextChange,x=>{var S;return(S=s.itemTextRefCallback)==null?void 0:S.call(s,x,u.value,u.disabled)}),g=f==null?void 0:f.textContent,v=L.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:w,onNativeOptionRemove:_}=c;return Fa(()=>(w(v),()=>_(v)),[w,_,v]),y.jsxs(y.Fragment,{children:[y.jsx(an.span,{id:u.textId,...i,ref:m}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?u0.createPortal(i.children,o.valueNode):null]})});$F.displayName=Yp;var BF="SelectItemIndicator",zF=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return FF(BF,n).isSelected?y.jsx(an.span,{"aria-hidden":!0,...r,ref:t}):null});zF.displayName=BF;var J2="SelectScrollUpButton",UF=L.forwardRef((e,t)=>{const n=sc(J2,e.__scopeSelect),r=aC(J2,e.__scopeSelect),[a,i]=L.useState(!1),o=xn(t,r.onScrollButtonChange);return Fa(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollTop>0;i(c)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(HF,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});UF.displayName=J2;var Q2="SelectScrollDownButton",qF=L.forwardRef((e,t)=>{const n=sc(Q2,e.__scopeSelect),r=aC(Q2,e.__scopeSelect),[a,i]=L.useState(!1),o=xn(t,r.onScrollButtonChange);return Fa(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<c;i(f)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(HF,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});qF.displayName=Q2;var HF=L.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=sc("SelectScrollButton",n),o=L.useRef(null),s=Pw(n),u=L.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return L.useEffect(()=>()=>u(),[u]),Fa(()=>{var f;const c=s().find(h=>h.ref.current===document.activeElement);(f=c==null?void 0:c.ref.current)==null||f.scrollIntoView({block:"nearest"})},[s]),y.jsx(an.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:zt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:zt(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:zt(a.onPointerLeave,()=>{u()})})}),rhe="SelectSeparator",ahe=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(an.div,{"aria-hidden":!0,...r,ref:t})});ahe.displayName=rhe;var eE="SelectArrow",ihe=L.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Fw(n),i=oc(eE,n),o=sc(eE,n);return i.open&&o.position==="popper"?y.jsx(Pv,{...a,...r,ref:t}):null});ihe.displayName=eE;var ohe="SelectBubbleInput",VF=L.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=L.useRef(null),i=xn(r,a),o=jw(t);return L.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(an.select,{...n,style:{...cD,...n.style},ref:i,defaultValue:t})});VF.displayName=ohe;function GF(e){return e===""||e===void 0}function WF(e){const t=Ea(e),n=L.useRef(""),r=L.useRef(0),a=L.useCallback(o=>{const s=n.current+o;t(s),function u(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(s)},[t]),i=L.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return L.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function KF(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=she(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function she(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var lhe=SF,uhe=kF,che=AF,dhe=TF,fhe=RF,hhe=NF,phe=DF,mhe=LF,ghe=$F,yhe=zF,bhe=UF,vhe=qF;function vd({...e}){return y.jsx(lhe,{"data-slot":"select",...e})}function wd({...e}){return y.jsx(che,{"data-slot":"select-value",...e})}function _d({className:e,size:t="default",children:n,...r}){return y.jsxs(uhe,{"data-slot":"select-trigger","data-size":t,className:Ht("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(dhe,{asChild:!0,children:y.jsx(lE,{className:"size-4 opacity-50"})})]})}function xd({className:e,children:t,position:n="popper",...r}){return y.jsx(fhe,{children:y.jsxs(hhe,{"data-slot":"select-content",className:Ht("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(whe,{}),y.jsx(phe,{className:Ht("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(_he,{})]})})}function Gi({className:e,children:t,...n}){return y.jsxs(mhe,{"data-slot":"select-item",className:Ht("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx(yhe,{children:y.jsx(id,{className:"size-4"})})}),y.jsx(ghe,{children:t})]})}function whe({className:e,...t}){return y.jsx(bhe,{"data-slot":"select-scroll-up-button",className:Ht("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(zB,{className:"size-4"})})}function _he({className:e,...t}){return y.jsx(vhe,{"data-slot":"select-scroll-down-button",className:Ht("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(lE,{className:"size-4"})})}var ZF=["PageUp","PageDown"],YF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],XF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},jh="Slider",[tE,xhe,She]=Tw(jh),[JF,Ige]=Ri(jh,[She]),[Ehe,Lw]=JF(jh),QF=L.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:u=0,defaultValue:c=[r],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v,...w}=e,_=L.useRef(new Set),x=L.useRef(0),E=o==="horizontal"?khe:Che,[A=[],k]=Os({prop:f,defaultProp:c,onChange:ee=>{var Z;(Z=[..._.current][x.current])==null||Z.focus(),h(ee)}}),D=L.useRef(A);function O(ee){const P=Ihe(A,ee);H(ee,P)}function N(ee){H(ee,x.current)}function z(){const ee=D.current[x.current];A[x.current]!==ee&&m(A)}function H(ee,P,{commit:Z}={commit:!1}){const V=Mhe(i),fe=Phe(Math.round((ee-r)/i)*i+r,V),ue=Hm(fe,[r,a]);k((Y=[])=>{const X=Rhe(Y,ue,P);if(Dhe(X,u*i)){x.current=X.indexOf(ue);const ae=String(X)!==String(Y);return ae&&Z&&m(X),ae?X:Y}else return Y})}return y.jsx(Ehe,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:A,orientation:o,form:v,children:y.jsx(tE.Provider,{scope:e.__scopeSlider,children:y.jsx(tE.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...w,ref:t,onPointerDown:zt(w.onPointerDown,()=>{s||(D.current=A)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:O,onSlideMove:s?void 0:N,onSlideEnd:s?void 0:z,onHomeKeyDown:()=>!s&&H(r,0,{commit:!0}),onEndKeyDown:()=>!s&&H(a,A.length-1,{commit:!0}),onStepKeyDown:({event:ee,direction:P})=>{if(!s){const fe=ZF.includes(ee.key)||ee.shiftKey&&YF.includes(ee.key)?10:1,ue=x.current,Y=A[ue],X=i*fe*P;H(Y+X,ue,{commit:!0})}}})})})})});QF.displayName=jh;var[e9,t9]=JF(jh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),khe=L.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:u,onStepKeyDown:c,...f}=e,[h,m]=L.useState(null),g=xn(t,E=>m(E)),v=L.useRef(void 0),w=Ih(a),_=w==="ltr",x=_&&!i||!_&&i;function S(E){const A=v.current||h.getBoundingClientRect(),k=[0,A.width],O=iC(k,x?[n,r]:[r,n]);return v.current=A,O(E-A.left)}return y.jsx(e9,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(n9,{dir:w,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const A=S(E.clientX);o==null||o(A)},onSlideMove:E=>{const A=S(E.clientX);s==null||s(A)},onSlideEnd:()=>{v.current=void 0,u==null||u()},onStepKeyDown:E=>{const k=XF[x?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:k?-1:1})}})})}),Che=L.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:u,...c}=e,f=L.useRef(null),h=xn(t,f),m=L.useRef(void 0),g=!a;function v(w){const _=m.current||f.current.getBoundingClientRect(),x=[0,_.height],E=iC(x,g?[r,n]:[n,r]);return m.current=_,E(w-_.top)}return y.jsx(e9,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(n9,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const _=v(w.clientY);i==null||i(_)},onSlideMove:w=>{const _=v(w.clientY);o==null||o(_)},onSlideEnd:()=>{m.current=void 0,s==null||s()},onStepKeyDown:w=>{const x=XF[g?"from-bottom":"from-top"].includes(w.key);u==null||u({event:w,direction:x?-1:1})}})})}),n9=L.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:u,...c}=e,f=Lw(jh,n);return y.jsx(an.span,{...c,ref:t,onKeyDown:zt(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):ZF.concat(YF).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:zt(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():r(h)}),onPointerMove:zt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:zt(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),r9="SliderTrack",a9=L.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=Lw(r9,n);return y.jsx(an.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});a9.displayName=r9;var nE="SliderRange",i9=L.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=Lw(nE,n),i=t9(nE,n),o=L.useRef(null),s=xn(t,o),u=a.values.length,c=a.values.map(m=>l9(m,a.min,a.max)),f=u>1?Math.min(...c):0,h=100-Math.max(...c);return y.jsx(an.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:h+"%"}})});i9.displayName=nE;var rE="SliderThumb",o9=L.forwardRef((e,t)=>{const n=xhe(e.__scopeSlider),[r,a]=L.useState(null),i=xn(t,s=>a(s)),o=L.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(Ahe,{...e,ref:i,index:o})}),Ahe=L.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=Lw(rE,n),s=t9(rE,n),[u,c]=L.useState(null),f=xn(t,S=>c(S)),h=u?o.form||!!u.closest("form"):!0,m=jv(u),g=o.values[r],v=g===void 0?0:l9(g,o.min,o.max),w=Nhe(r,o.values.length),_=m==null?void 0:m[s.size],x=_?Ohe(_,v,s.direction):0;return L.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${v}% + ${x}px)`},children:[y.jsx(tE.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(an.span,{role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:zt(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx(s9,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});o9.displayName=rE;var The="RadioBubbleInput",s9=L.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=L.useRef(null),i=xn(a,r),o=jw(t);return L.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("input",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(an.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});s9.displayName=The;function Rhe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function l9(e,t,n){const i=100/(n-t)*(e-t);return Hm(i,[0,100])}function Nhe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ihe(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function Ohe(e,t,n){const r=e/2,i=iC([0,50],[0,r]);return(r-i(t)*n)*n}function jhe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Dhe(e,t){if(t>0){const n=jhe(e);return Math.min(...n)>=t}return!0}function iC(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Mhe(e){return(String(e).split(".")[1]||"").length}function Phe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Fhe=QF,Lhe=a9,$he=i9,Bhe=o9;function ks({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=L.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs(Fhe,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:Ht("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx(Lhe,{"data-slot":"slider-track",className:Ht("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx($he,{"data-slot":"slider-range",className:Ht("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,u)=>y.jsx(Bhe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}var zhe="Separator",F4="horizontal",Uhe=["horizontal","vertical"],u9=L.forwardRef((e,t)=>{const{decorative:n,orientation:r=F4,...a}=e,i=qhe(r)?r:F4,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(an.div,{"data-orientation":i,...s,...a,ref:t})});u9.displayName=zhe;function qhe(e){return Uhe.includes(e)}var Hhe=u9;function t0({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(Hhe,{"data-slot":"separator-root",decorative:n,orientation:t,className:Ht("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const Vhe=()=>{const{theme:e,setTheme:t,enableAdvancedSettings:n,setEnableAdvancedSettings:r,enableStreamingMarkdown:a,setEnableStreamingMarkdown:i,streamingRenderFPS:o,setStreamingRenderFPS:s,streamingCodeRenderFPS:u,setStreamingCodeRenderFPS:c,prismThemeUrl:f,setPrismThemeUrl:h,resetGeneralSettings:m}=qr(Hn(N=>({theme:N.theme,setTheme:N.setTheme,enableAdvancedSettings:N.enableAdvancedSettings,setEnableAdvancedSettings:N.setEnableAdvancedSettings,enableStreamingMarkdown:N.enableStreamingMarkdown,setEnableStreamingMarkdown:N.setEnableStreamingMarkdown,streamingRenderFPS:N.streamingRenderFPS,setStreamingRenderFPS:N.setStreamingRenderFPS,streamingCodeRenderFPS:N.streamingCodeRenderFPS,setStreamingCodeRenderFPS:N.setStreamingCodeRenderFPS,prismThemeUrl:N.prismThemeUrl,setPrismThemeUrl:N.setPrismThemeUrl,resetGeneralSettings:N.resetGeneralSettings}))),[g,v]=L.useState(o),[w,_]=L.useState(u),x=L.useCallback(N=>{v(N[0])},[]),S=L.useCallback(N=>{s(N[0])},[s]),E=L.useCallback(N=>{const z=N.target.value,H=z===""?30:parseInt(z.replace(/[^0-9]/g,""),10);if(!isNaN(H)){const ee=Math.max(1,Math.min(60,H));s(ee),v(ee)}},[s]),A=L.useCallback(N=>{_(N[0])},[]),k=L.useCallback(N=>{c(N[0])},[c]),D=L.useCallback(N=>{const z=N.target.value,H=z===""?10:parseInt(z.replace(/[^0-9]/g,""),10);if(!isNaN(H)){const ee=Math.max(1,Math.min(60,H));c(ee),_(ee)}},[c]);L.useEffect(()=>{v(o)},[o]),L.useEffect(()=>{_(u)},[u]);const O=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&m()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(dn,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(vd,{value:e??"system",onValueChange:N=>t(N),children:[y.jsx(_d,{id:"theme-select",className:"w-[180px]",children:y.jsx(wd,{placeholder:"Select theme"})}),y.jsxs(xd,{children:[y.jsx(Gi,{value:"light",children:"Light"}),y.jsx(Gi,{value:"dark",children:"Dark"}),y.jsx(Gi,{value:"system",children:"System"})]})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-1.5",children:[y.jsx(dn,{htmlFor:"prism-theme-url",className:"font-medium",children:"Code Block Theme URL (Optional)"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use the default themes."}),y.jsx(nr,{id:"prism-theme-url",type:"url",placeholder:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",value:f??"",onChange:N=>h(N.target.value)})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx(jl,{id:"streaming-markdown-switch",checked:a??!0,onCheckedChange:i})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(dn,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["General Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how smoothly streaming text appears. (Default: 30)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(ks,{id:"streaming-fps-slider",min:1,max:60,step:1,value:[g],onValueChange:x,onValueCommit:S,className:"flex-grow"}),y.jsx(nr,{type:"number",min:1,max:60,step:1,value:g,onChange:E,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(dn,{htmlFor:"streaming-code-fps-slider",className:"font-medium",children:["Code Block Streaming Update Rate (",w," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Specific update rate when code blocks are streaming (lower values reduce lag). (Default: 10)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(ks,{id:"streaming-code-fps-slider",min:1,max:60,step:1,value:[w],onValueChange:A,onValueCommit:k,className:"flex-grow"}),y.jsx(nr,{type:"number",min:1,max:60,step:1,value:w,onChange:D,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(t0,{}),y.jsxs("div",{className:"space-y-2 hidden",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Advanced Settings"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"advanced-settings-switch",className:"font-medium",children:"Enable Advanced Controls"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Show controls for AI parameters (temperature, etc.) and Assistant settings tab."})]}),y.jsx(jl,{id:"advanced-settings-switch",checked:n??!1,onCheckedChange:r})]})]}),y.jsx(t0,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(Lt,{variant:"outline",size:"sm",onClick:O,children:[y.jsx(H7,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},Ghe=wt.memo(Vhe),c9=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:o,setTopK:s,presencePenalty:u,setPresencePenalty:c,frequencyPenalty:f,setFrequencyPenalty:h,defaultTemperature:m=.7,defaultTopP:g=null,defaultMaxTokens:v=null,defaultTopK:w=null,defaultPresencePenalty:_=0,defaultFrequencyPenalty:x=0,className:S})=>{const[E,A]=L.useState(e??m),[k,D]=L.useState(n??g??1),[O,N]=L.useState(u??_??0),[z,H]=L.useState(f??x??0);L.useEffect(()=>{A(e??m)},[e,m]),L.useEffect(()=>{D(n??g??1)},[n,g]),L.useEffect(()=>{N(u??_??0)},[u,_]),L.useEffect(()=>{H(f??x??0)},[f,x]);const ee=L.useCallback((fe,ue)=>{const Y=ue.target.value,X=Y===""?null:parseInt(Y,10);(Y===""||!isNaN(X)&&X!==null)&&fe(X)},[]),P=L.useCallback((fe,ue)=>{fe(ue[0])},[]),Z=L.useCallback(fe=>{fe(null)},[]),V=m!==void 0||g!==void 0||v!==void 0||w!==void 0||_!==void 0||x!==void 0;return y.jsxs("div",{className:Ht("space-y-4 p-4",S),children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",E.toFixed(2),")"]}),y.jsx(ks,{id:"param-temperature",min:0,max:1,step:.01,value:[E],onValueChange:fe=>A(fe[0]),onValueCommit:fe=>P(t,fe)}),V&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(t),disabled:e===null,children:["Use Default (",(m==null?void 0:m.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(k??0).toFixed(2),") "]}),y.jsx(ks,{id:"param-top-p",min:0,max:1,step:.01,value:[k??1],onValueChange:fe=>D(fe[0]),onValueCommit:fe=>P(r,fe)}),V&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(r),disabled:n===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(nr,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:fe=>ee(i,fe),min:"1",className:"h-8 text-xs"}),V&&y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(i),disabled:a===null,children:"Use Default"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),y.jsx(nr,{id:"param-top-k",type:"number",placeholder:`Default: ${w??"None"}`,value:o??"",onChange:fe=>ee(s,fe),min:"1",className:"h-8 text-xs"}),V&&y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(s),disabled:o===null,children:"Use Default"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(O??0).toFixed(2),")"," "]}),y.jsx(ks,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[O??0],onValueChange:fe=>N(fe[0]),onValueCommit:fe=>P(c,fe)}),V&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(c),disabled:u===null,children:["Use Default (",(_==null?void 0:_.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(z??0).toFixed(2),")"," "]}),y.jsx(ks,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[z??0],onValueChange:fe=>H(fe[0]),onValueCommit:fe=>P(h,fe)}),V&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(h),disabled:f===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]})]})},Whe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:o,setTopP:s,maxTokens:u,setMaxTokens:c,topK:f,setTopK:h,presencePenalty:m,setPresencePenalty:g,frequencyPenalty:v,setFrequencyPenalty:w}=qr(Hn(k=>({globalSystemPrompt:k.globalSystemPrompt,setGlobalSystemPrompt:k.setGlobalSystemPrompt,toolMaxSteps:k.toolMaxSteps,setToolMaxSteps:k.setToolMaxSteps,temperature:k.temperature,setTemperature:k.setTemperature,topP:k.topP,setTopP:k.setTopP,maxTokens:k.maxTokens,setMaxTokens:k.setMaxTokens,topK:k.topK,setTopK:k.setTopK,presencePenalty:k.presencePenalty,setPresencePenalty:k.setPresencePenalty,frequencyPenalty:k.frequencyPenalty,setFrequencyPenalty:k.setFrequencyPenalty}))),_=k=>{const D=k.target.value,O=D===""?5:parseInt(D,10);isNaN(O)||r(O)},x=k=>{k!==null&&i(k)},S=k=>{k!==null&&s(k)},E=k=>{k!==null&&g(k)},A=k=>{k!==null&&w(k)};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),y.jsx(dn,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),y.jsx(yw,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:k=>t(k.target.value),rows:4})]}),y.jsx(t0,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),y.jsx(c9,{temperature:a,setTemperature:x,topP:o,setTopP:S,maxTokens:u,setMaxTokens:c,topK:f,setTopK:h,presencePenalty:m,setPresencePenalty:E,frequencyPenalty:v,setFrequencyPenalty:A,className:"p-0 w-full"})]}),y.jsx(t0,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),y.jsx(dn,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),y.jsx(nr,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:_,className:"w-24"})]})]})},Khe=wt.memo(Whe),Zhe=()=>{const{importConversation:e,exportAllConversations:t}=Cr(Hn(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=L.useRef(null),[r,a]=L.useState(!1),[i,o]=L.useState(!1),[s,u]=L.useState(!1),c=()=>{var g;(g=n.current)==null||g.click()},f=L.useCallback(async g=>{var w;const v=(w=g.target.files)==null?void 0:w[0];if(v){a(!0);try{await e(v)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=L.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),m=L.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await qt.clearAllData(),ct.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const v="Failed to clear all data";console.error(v,g),ct.error(`${v}: ${g instanceof Error?g.message:String(g)}`),u(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:f,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(Lt,{onClick:c,variant:"outline",disabled:r,children:[r?y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(iz,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(Lt,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(rb,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(Lt,{onClick:m,variant:"destructive",disabled:s,children:[s?y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Iu,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},Yhe=wt.memo(Zhe),Xhe=Y4("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function d9({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Ht(Xhe({variant:t}),e),...n})}function f9({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:Ht("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function h9({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:Ht("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function oC({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:Ht("w-full caption-bottom text-sm",e),...t})})}function sC({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:Ht("[&_tr]:border-b",e),...t})}function lC({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:Ht("[&_tr:last-child]:border-0",e),...t})}function Oo({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:Ht("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Ga({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:Ht("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Lr({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:Ht("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const Jhe=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=e0(Hn(D=>({loadedMods:D.loadedMods,addDbMod:D.addDbMod,updateDbMod:D.updateDbMod,deleteDbMod:D.deleteDbMod,dbMods:D.dbMods,isLoading:D.isLoading}))),[o,s]=L.useState(""),[u,c]=L.useState(""),[f,h]=L.useState(""),[m,g]=L.useState(!1),[v,w]=L.useState({}),[_,x]=L.useState({}),S=L.useCallback(async()=>{if(!o.trim()){ct.error("Mod name cannot be empty.");return}if(!u.trim()&&!f.trim()){ct.error("Either Mod URL or Script Content must be provided.");return}if(u.trim()&&f.trim()){ct.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const D={name:o.trim(),sourceUrl:u.trim()||null,scriptContent:f.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(D),s(""),c(""),h(""),ct.info("Mod added. Reload required for changes to take effect.")}catch(D){console.error("Failed to add mod (from component):",D)}finally{g(!1)}},[o,u,f,t,a==null?void 0:a.length]),E=L.useCallback(async D=>{w(O=>({...O,[D.id]:!0}));try{await n(D.id,{enabled:!D.enabled}),ct.info(`Mod "${D.name}" ${D.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(O){console.error("Failed to update mod (from component):",O)}finally{w(O=>({...O,[D.id]:!1}))}},[n]),A=L.useCallback(async D=>{if(window.confirm(`Are you sure you want to delete the mod "${D.name}"? This cannot be undone.`)){x(O=>({...O,[D.id]:!0}));try{await r(D.id),ct.info("Mod deleted. Reload required for changes to take effect.")}catch(O){console.error("Failed to delete mod (from component):",O)}finally{x(O=>({...O,[D.id]:!1}))}}},[r]),k=L.useCallback(D=>{const O=e.find(z=>z.id===D);if(O)if(O.error){const z=O.error instanceof Error?O.error.message:String(O.error);return{status:"Error",error:O.error,tooltip:z}}else return{status:"Loaded"};const N=(a||[]).find(z=>z.id===D);return N?N.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(d9,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(fE,{className:"h-4 w-4"}),y.jsx(f9,{children:"Security Warning"}),y.jsx(h9,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(dn,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(nr,{id:"mod-name",value:o,onChange:D=>s(D.target.value),placeholder:"My Awesome Mod",disabled:m})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(dn,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(nr,{id:"mod-url",type:"url",value:u,onChange:D=>c(D.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!f.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(dn,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(yw,{id:"mod-script",value:f,onChange:D=>h(D.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!u.trim()})]}),y.jsxs(Lt,{onClick:S,disabled:m,children:[m&&y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(jn,{delayDuration:100,children:y.jsxs(oC,{children:[y.jsx(sC,{children:y.jsxs(Oo,{children:[y.jsx(Ga,{children:"Name"}),y.jsx(Ga,{children:"Source"}),y.jsx(Ga,{children:"Status"}),y.jsx(Ga,{className:"text-center",children:"Enabled"}),y.jsx(Ga,{className:"text-right",children:"Actions"})]})}),y.jsx(lC,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Oo,{children:y.jsx(Lr,{colSpan:5,children:y.jsx(Aa,{className:"h-10 w-full"})})}),y.jsx(Oo,{children:y.jsx(Lr,{colSpan:5,children:y.jsx(Aa,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Oo,{children:y.jsx(Lr,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(D=>{const{status:O,error:N,tooltip:z}=k(D.id),H=D.sourceUrl?new URL(D.sourceUrl).hostname:"Direct Script",ee=v[D.id],P=_[D.id],Z=ee||P,V=O==="Error";return y.jsxs(Oo,{children:[y.jsx(Lr,{className:"font-medium",children:D.name}),y.jsx(Lr,{className:"text-muted-foreground",children:H}),y.jsxs(Lr,{children:[y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx("span",{className:V?"text-destructive font-semibold cursor-help":"",children:O})}),z&&y.jsx(Nn,{className:"max-w-xs break-words",children:y.jsx("p",{children:z})})]}),V&&N&&y.jsx("p",{className:"text-xs text-destructive truncate",children:N instanceof Error?N.message:String(N)})]}),y.jsxs(Lr,{className:"text-center",children:[y.jsx(jl,{checked:D.enabled??!1,onCheckedChange:()=>E(D),disabled:Z,"aria-label":`Enable ${D.name}`}),ee&&y.jsx(Xn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(Lr,{className:"text-right",children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>A(D),disabled:Z,"aria-label":`Delete ${D.name}`,className:"text-destructive hover:text-destructive/80",children:P?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Iu,{className:"h-4 w-4"})})})]},D.id)})})]})})})]})]})},Qhe=wt.memo(Jhe),p9=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48"})=>{const[s,u]=L.useState(""),c=L.useMemo(()=>{if(!s)return t;const f=s.toLowerCase();return t.filter(h=>h.name.toLowerCase().includes(f)||h.id.toLowerCase().includes(f))},[t,s]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(nr,{value:s,onChange:f=>u(f.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx(K0,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:c.map(f=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(dn,{htmlFor:`enable-model-${e}-${f.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:f.name||f.id,children:f.name||f.id}),y.jsx(jl,{id:`enable-model-${e}-${f.id}`,checked:n.has(f.id),onCheckedChange:h=>r(f.id,h),className:"flex-shrink-0",disabled:i,"aria-label":`Enable model ${f.name||f.id}`})]},f.id))})})]})},epe=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s})=>{var A;const u=kE(e.type),c=CE(e.type),f=Jp(e.type),h=o==="fetching"||s,m=s||o==="fetching",g=s||o==="fetching",w=fi(k=>k.getAllAvailableModelDefsForProvider)(e.id),_=L.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),x=e.apiKeyId?t.some(k=>k.id===e.apiKeyId):!1,S=u&&!x,E=L.useCallback(async(k,D)=>{const O=new Set(e.enabledModels??[]);D?O.add(k):O.delete(k);const N=Array.from(O);try{await i(e.id,{enabledModels:N})}catch(z){ct.error("Failed to update model status."),console.error("Failed to save model toggle:",z)}},[e.enabledModels,e.id,i]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{children:y.jsx("span",{className:Ht("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(Nn,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),S&&y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{children:y.jsx(Ff,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(Nn,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:n,disabled:m,"aria-label":"Edit provider",className:"h-8 w-8",children:y.jsx(cE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:r,disabled:g,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",children:s?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Iu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[u&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?x?y.jsx("span",{className:"text-green-400",children:((A=t.find(k=>k.id===e.apiKeyId))==null?void 0:A.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),c&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),f&&y.jsx("div",{className:"pt-1",children:y.jsxs(Lt,{variant:"outline",size:"sm",onClick:a,disabled:h,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Xn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(id,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(Ff,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(yv,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"font-medium text-card-foreground text-sm",children:"Model Enablement (Saves Immediately):"}),y.jsx(p9,{providerId:e.id,allAvailableModels:w,enabledModelIds:_,onToggleModel:E,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64"})]})]})},tpe=wt.memo(epe),m9=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var c;const o=f=>{r(f==="none"?null:f)},s=(c=a.find(f=>f.id===n))==null?void 0:c.name,u=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(vd,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(_d,{className:Ht("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(wd,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(T7,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):u]})]})})}),y.jsxs(xd,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx(Gi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(f=>y.jsx(Gi,{value:f.id,children:f.name||`Key ID: ${f.id.substring(0,6)}...`},f.id))]})]})},npe=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const u=kE(t.type??null),c=CE(t.type??null),f=Jp(t.type??null),h=t.isEnabled??!1,m=t.autoFetchModels??!1,g=L.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=L.useCallback((w,_)=>{const x=new Set(t.enabledModels??[]);_?x.add(w):x.delete(w);const S=Array.from(x);s("enabledModels",S)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(nr,{id:`edit-name-${e}`,value:t.name||"",onChange:w=>s("name",w.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(vd,{value:t.type??"",onValueChange:w=>s("type",w),disabled:a,children:[y.jsx(_d,{id:`edit-type-${e}`,children:y.jsx(wd,{placeholder:"Select Type"})}),y.jsx(xd,{children:Lj.map(w=>y.jsx(Gi,{value:w.value,children:w.label},w.value))})]})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{children:"API Key"}),y.jsx(m9,{selectedKeyId:t.apiKeyId??null,onKeySelected:w=>s("apiKeyId",w),apiKeys:n,disabled:a})]}),c&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(nr,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:w=>s("baseURL",w.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx(jl,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:w=>s("isEnabled",w),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(dn,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(jl,{id:`edit-autofetch-${e}`,checked:m,onCheckedChange:w=>s("autoFetchModels",w),disabled:!f||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(dn,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:f?"":"text-muted-foreground",children:["Auto-fetch models ",f?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(p9,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(t0,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(Zu,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(dE,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},rpe=wt.memo(npe),ape=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i})=>{const[o,s]=L.useState(!1),[u,c]=L.useState(!1),[f,h]=L.useState(!1),[m,g]=L.useState({}),v=fi(N=>N.getAllAvailableModelDefsForProvider),[w,_]=L.useState([]),x=L.useMemo(()=>[...w].sort((N,z)=>(N.name||N.id).localeCompare(z.name||z.id)),[w]);L.useEffect(()=>{if(o){const N=v(e.id);_(N),g({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else _([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,e.fetchedModels,v]);const S=()=>s(!0),E=()=>{s(!1),g({}),c(!1)},A=L.useCallback(async()=>{c(!0);try{const N=m.enabledModels&&m.enabledModels.length>0?m.enabledModels:null,z={name:m.name,type:m.type,isEnabled:m.isEnabled,apiKeyId:m.apiKeyId,baseURL:m.baseURL,autoFetchModels:m.autoFetchModels,enabledModels:N};Object.keys(z).forEach(H=>{z[H]===void 0&&delete z[H]}),await n(e.id,z),s(!1),g({}),ct.success(`Provider "${z.name||e.name}" updated.`)}catch(N){console.error("Failed to save provider update:",N),ct.error("Failed to save provider configuration.")}finally{c(!1)}},[m,n,e.id,e.name]),k=L.useCallback((N,z)=>{g(H=>({...H,[N]:z}))},[]),D=L.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(N){console.error("Failed to delete provider:",N),h(!1)}}},[r,e.id,e.name]),O=L.useCallback(async()=>{if(await a(e.id),o){const N=v(e.id);_(N)}},[a,e.id,o,v]);return y.jsx("div",{className:"border-b border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?y.jsx(rpe,{providerId:e.id,editData:m,apiKeys:t,allAvailableModels:x,isSaving:u,onCancel:E,onSave:A,onChange:k,onUpdate:n}):y.jsx(tpe,{provider:e,apiKeys:t,onEdit:S,onDelete:D,onFetchModels:O,onUpdate:n,fetchStatus:i,isDeleting:f})})},ipe=wt.memo(ape),ope=({apiKeys:e,onAddProvider:t,onCancel:n})=>{const[r,a]=L.useState(!1),[i,o]=L.useState({name:"",type:"openai",isEnabled:!0,apiKeyId:null,baseURL:null,enabledModels:null,autoFetchModels:!0,fetchedModels:null,modelsLastFetchedAt:null}),s=L.useCallback((m,g)=>{o(v=>{const w={...v,[m]:g};if(m==="type"){const _=g;w.apiKeyId=null,w.baseURL=null,w.autoFetchModels=Jp(_),w.enabledModels=null}return(m==="isEnabled"||m==="autoFetchModels")&&(w[m]=!!g),w})},[]),u=L.useCallback(async()=>{if(!i.name||!i.type){ct.error("Provider Name and Type are required.");return}a(!0);try{const m=i.type,g=i.autoFetchModels??Jp(m),v={name:i.name,type:m,isEnabled:i.isEnabled??!0,apiKeyId:i.apiKeyId??null,baseURL:i.baseURL??null,enabledModels:null,autoFetchModels:g,fetchedModels:null,modelsLastFetchedAt:null};await t(v),n()}catch(m){console.error("Failed to add provider (from form component):",m)}finally{a(!1)}},[i,t,n]),c=kE(i.type??null),f=CE(i.type??null),h=Jp(i.type??null);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(nr,{value:i.name||"",onChange:m=>s("name",m.target.value),placeholder:"Provider Name (e.g., My Ollama)",className:"flex-grow",disabled:r,"aria-label":"Provider Name"}),y.jsxs(vd,{value:i.type??"openai",onValueChange:m=>s("type",m),disabled:r,children:[y.jsx(_d,{className:"w-[200px]","aria-label":"Provider Type",children:y.jsx(wd,{placeholder:"Select Type"})}),y.jsx(xd,{children:Lj.map(m=>y.jsx(Gi,{value:m.value,children:m.label},m.value))})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(jl,{id:"new-enabled",checked:i.isEnabled??!0,onCheckedChange:m=>s("isEnabled",m),disabled:r,"aria-labelledby":"new-enabled-label"}),y.jsx(dn,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]})]}),(c||f)&&y.jsxs("div",{className:"flex items-center space-x-2",children:[c&&y.jsx(m9,{label:"API Key:",selectedKeyId:i.apiKeyId??null,onKeySelected:m=>s("apiKeyId",m),apiKeys:e||[],className:"flex-grow",disabled:r}),f&&y.jsx(nr,{value:i.baseURL||"",onChange:m=>s("baseURL",m.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",className:"flex-grow",disabled:r,"aria-label":"Base URL"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(jl,{id:"new-autofetch",checked:i.autoFetchModels??!1,onCheckedChange:m=>s("autoFetchModels",m),disabled:!h||r,"aria-labelledby":"new-autofetch-label"}),y.jsxs(dn,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:h?"":"text-muted-foreground",children:["Auto-fetch models ",h?"":"(Not Supported)"]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:n,disabled:r,type:"button",children:[y.jsx(Zu,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:u,disabled:r||!i.name||!i.type,type:"button",children:[r&&y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(dE,{className:"h-4 w-4 mr-1"})," ",r?"Adding...":"Add Provider"]})]})]})},spe=()=>{const{addDbProviderConfig:e,updateDbProviderConfig:t,deleteDbProviderConfig:n,fetchModels:r,providerFetchStatus:a,dbProviderConfigs:i,apiKeys:o,isLoading:s}=fi(Hn(v=>({addDbProviderConfig:v.addProviderConfig,updateDbProviderConfig:v.updateProviderConfig,deleteDbProviderConfig:v.deleteProviderConfig,fetchModels:v.fetchModels,providerFetchStatus:v.providerFetchStatus,dbProviderConfigs:v.dbProviderConfigs,apiKeys:v.dbApiKeys,isLoading:v.isLoading}))),[u,c]=L.useState(!1),f=()=>c(!0),h=L.useCallback(()=>c(!1),[]),m=L.useCallback(async v=>{await r(v)},[r]),g=L.useMemo(()=>i||[],[i]);return y.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(ope,{apiKeys:o||[],onAddProvider:e,onCancel:h}):y.jsxs(Lt,{onClick:f,variant:"outline",className:"w-full",disabled:s,children:[y.jsx(gv,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow overflow-hidden border-t border-border pt-4 mt-4",children:y.jsxs("div",{className:"space-y-2",children:[s&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Aa,{className:"h-24 w-full"}),y.jsx(Aa,{className:"h-24 w-full"}),y.jsx(Aa,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:g.map(v=>y.jsx(ipe,{provider:v,apiKeys:o||[],onUpdate:t,onDelete:n,onFetchModels:m,fetchStatus:a[v.id]||"idle"},v.id))}),!s&&g.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},lpe=wt.memo(spe),upe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=qr(Hn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Git User Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set your user name and email for Git commits made within the VFS. This is required for committing changes."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 rounded-lg border p-4 shadow-sm bg-card",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(nr,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(nr,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})]})})},cpe=wt.memo(upe),dpe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:o}=Cr(Hn(N=>({syncRepos:N.syncRepos,addSyncRepo:N.addSyncRepo,updateSyncRepo:N.updateSyncRepo,deleteSyncRepo:N.deleteSyncRepo,initializeOrSyncRepo:N.initializeOrSyncRepo,repoInitializationStatus:N.repoInitializationStatus,isLoading:N.isLoading}))),[s,u]=L.useState(!1),[c,f]=L.useState(null),[h,m]=L.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=L.useState(!1),[w,_]=L.useState({}),x=L.useCallback(()=>{m({name:"",remoteUrl:"",branch:"main",username:"",password:""}),u(!1),f(null),v(!1)},[]),S=L.useCallback((N,z)=>{m(H=>({...H,[N]:z}))},[]),E=L.useCallback(async()=>{var N,z,H,ee;if(!((N=h.name)!=null&&N.trim())||!((z=h.remoteUrl)!=null&&z.trim())){ct.error("Repository Name and Remote URL are required.");return}v(!0);try{const P={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((H=h.branch)==null?void 0:H.trim())||"main",username:((ee=h.username)==null?void 0:ee.trim())||null,password:h.password||null};c?await n(c,P):await t(P),x()}catch(P){console.error("Failed to save sync repo:",P)}finally{v(!1)}},[h,c,t,n,x]),A=N=>{f(N.id),m({name:N.name,remoteUrl:N.remoteUrl,branch:N.branch||"main",username:N.username??"",password:N.password??""}),u(!1)},k=L.useCallback(async(N,z)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${z}"? This will unlink it from any conversations and remove the local copy.`)){_(H=>({...H,[N]:!0}));try{await r(N),c===N&&x()}catch(H){console.error("Failed to delete sync repo:",H)}finally{_(H=>({...H,[N]:!1}))}}},[r,c,x]),D=L.useCallback(async N=>{await a(N)},[a]),O=()=>{var N,z;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:c?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-name",children:"Name"}),y.jsx(nr,{id:"repo-name",value:h.name||"",onChange:H=>S("name",H.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(nr,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:H=>S("remoteUrl",H.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(nr,{id:"repo-branch",value:h.branch||"",onChange:H=>S("branch",H.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),y.jsxs("div",{className:"pt-2",children:[y.jsx(dn,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),y.jsxs(d9,{variant:"destructive",className:"mt-2 mb-3",children:[y.jsx(fE,{className:"h-4 w-4"}),y.jsx(f9,{children:"Security Warning"}),y.jsx(h9,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-username",children:"Username"}),y.jsx(nr,{id:"repo-username",value:h.username||"",onChange:H=>S("username",H.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-password",children:"Password / Token"}),y.jsx(nr,{id:"repo-password",type:"password",value:h.password||"",onChange:H=>S("password",H.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:x,disabled:g,type:"button",children:[y.jsx(Zu,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((N=h.name)!=null&&N.trim())||!((z=h.remoteUrl)!=null&&z.trim()),type:"button",children:[g&&y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(dE,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!s&&!c&&y.jsxs(Lt,{onClick:()=>u(!0),variant:"outline",className:"w-full mb-4",disabled:o,children:[y.jsx(gv,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(s||c)&&O(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),o&&!s&&!c?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Aa,{className:"h-10 w-full"}),y.jsx(Aa,{className:"h-10 w-full"}),y.jsx(Aa,{className:"h-10 w-full"})]}):e.length===0&&!s&&!c?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(oC,{children:[y.jsx(sC,{children:y.jsxs(Oo,{children:[y.jsx(Ga,{children:"Name"}),y.jsx(Ga,{children:"Remote URL"}),y.jsx(Ga,{children:"Branch"}),y.jsx(Ga,{children:"Auth"}),y.jsx(Ga,{className:"text-right",children:"Actions"})]})}),y.jsx(lC,{children:e.map(N=>{const z=w[N.id],H=c===N.id,ee=!!N.username||!!N.password,P=i[N.id]||"idle",V=z||g||!!c||P==="syncing";let fe=null,ue="Initialize/Sync Repository";return P==="syncing"?(fe=y.jsx(Xn,{className:"h-4 w-4 animate-spin mr-1"}),ue="Initializing/Syncing..."):P==="idle"?(fe=y.jsx(u6,{className:"h-4 w-4 text-green-500 mr-1"}),ue="Sync Successful / Ready"):P==="error"?(fe=y.jsx(Ff,{className:"h-4 w-4 text-destructive mr-1"}),ue="Sync Failed"):fe=y.jsx(yv,{className:"h-4 w-4 mr-1"}),y.jsxs(Oo,{className:Ht(H?"bg-muted/50":"",V&&!H?"opacity-70":""),children:[y.jsx(Lr,{className:"font-medium",children:N.name}),y.jsx(Lr,{className:"text-xs truncate max-w-xs",children:N.remoteUrl}),y.jsx(Lr,{children:N.branch||"main"}),y.jsx(Lr,{className:"text-xs",children:ee?"Configured":"None"}),y.jsxs(Lr,{className:"text-right space-x-1",children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"outline",size:"icon",onClick:()=>D(N.id),className:"h-8 w-8","aria-label":`Initialize or Sync repo ${N.name}`,disabled:V,children:fe})}),y.jsx(Nn,{side:"top",children:ue})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>A(N),className:"h-8 w-8","aria-label":`Edit repo ${N.name}`,disabled:V,children:y.jsx(cE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>k(N.id,N.name),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete repo ${N.name}`,disabled:V,children:z?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Iu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})]},N.id)})})]})})]})]})},fpe=wt.memo(dpe),hpe=()=>{const e=Ht("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsxs(Iw,{defaultValue:"config",className:"flex flex-col h-full",children:[y.jsxs(Ow,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(si,{value:"config",className:e,children:"User Config"}),y.jsx(si,{value:"sync",className:e,children:"Sync Repositories"})]}),y.jsxs("div",{className:"flex-grow mt-4 overflow-y-auto",children:[y.jsx(li,{value:"config",children:y.jsx(cpe,{})}),y.jsx(li,{value:"sync",children:y.jsx(fpe,{})})]})]})},ppe=wt.memo(hpe),g9=L.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=qr(Hn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=e0(Hn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=ui(Hn(h=>({initialSettingsTab:h.initialSettingsTab,initialSettingsSubTab:h.initialSettingsSubTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[o,s]=L.useState(a||"general");L.useEffect(()=>{e&&s(a||"general")},[e,a]);const u=h=>{h||(t(),i())},c=h=>{s(h)},f=Ht("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(xw,{open:e,onOpenChange:u,children:y.jsxs(Sw,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(Ew,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(Cw,{children:"Settings"}),y.jsx(Aw,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsxs(Iw,{value:o,onValueChange:c,className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(Ow,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(si,{value:"general",className:f,children:"General"}),y.jsx(si,{value:"providers",className:f,children:"Providers & Models"}),n&&y.jsx(si,{value:"assistant",className:f,children:"Assistant"}),y.jsx(si,{value:"git",className:f,children:"Git"}),y.jsx(si,{value:"data",className:f,children:"Data"}),y.jsx(si,{value:"mods",className:f,children:"Mods"}),r.map(h=>y.jsx(si,{value:h.id,className:f,children:h.title},h.id))]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(li,{value:"general",children:y.jsx(Ghe,{})}),y.jsx(li,{value:"providers",className:"data-[state=inactive]:hidden",children:y.jsx(lpe,{})}),n&&y.jsx(li,{value:"assistant",children:y.jsx(Khe,{})}),y.jsx(li,{value:"git",className:"h-full",children:y.jsx(ppe,{})}),y.jsx(li,{value:"data",children:y.jsx(Yhe,{})}),y.jsx(li,{value:"mods",children:y.jsx(Qhe,{})}),r.map(h=>y.jsx(li,{value:h.id,children:wt.isValidElement(h.component)?h.component:typeof h.component=="function"?y.jsx(h.component,{}):null},h.id))]})]}),y.jsx(kw,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(Lt,{variant:"outline",onClick:()=>u(!1),children:"Close"})})]})})});g9.displayName="SettingsModalComponent";const mpe=g9;function gpe(){const e=ta.getState().registerChatControl,t=ui.getState().toggleChatControlPanel,n=ui.getState().setInitialSettingsTabs,r=()=>{const i=(o,s)=>{n(null,null),t("settingsModal",!0)};return y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(Y7,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:"Settings"})]})})},a=()=>{const i=ui.getState().isChatControlPanelOpen.settingsModal??!1,o=()=>t("settingsModal",!1);return y.jsx(mpe,{isOpen:i,onClose:o})};e({id:"core-settings-trigger",panel:"header",order:1e3,status:()=>"ready",renderer:()=>wt.createElement(r),settingsRenderer:()=>wt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function ype(){const e=ta.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=ui.getState();return y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?y.jsx(F7,{className:"h-4 w-4"}):y.jsx(M7,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"header",order:10,status:()=>"ready",renderer:()=>wt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}var $w="Popover",[y9,Oge]=Ri($w,[Yu]),J0=Yu(),[bpe,lc]=y9($w),b9=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=J0(t),u=L.useRef(null),[c,f]=L.useState(!1),[h,m]=Os({prop:r,defaultProp:a??!1,onChange:i,caller:$w});return y.jsx(Dv,{...s,children:y.jsx(bpe,{scope:t,contentId:Cs(),triggerRef:u,open:h,onOpenChange:m,onOpenToggle:L.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:L.useCallback(()=>f(!0),[]),onCustomAnchorRemove:L.useCallback(()=>f(!1),[]),modal:o,children:n})})};b9.displayName=$w;var v9="PopoverAnchor",vpe=L.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=lc(v9,n),i=J0(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return L.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(d0,{...i,...r,ref:t})});vpe.displayName=v9;var w9="PopoverTrigger",_9=L.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=lc(w9,n),i=J0(n),o=xn(t,a.triggerRef),s=y.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":C9(a.open),...r,ref:o,onClick:zt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(d0,{asChild:!0,...i,children:s})});_9.displayName=w9;var uC="PopoverPortal",[wpe,_pe]=y9(uC,{forceMount:void 0}),x9=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=lc(uC,t);return y.jsx(wpe,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(gh,{asChild:!0,container:a,children:r})})})};x9.displayName=uC;var uh="PopoverContent",S9=L.forwardRef((e,t)=>{const n=_pe(uh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=lc(uh,e.__scopePopover);return y.jsx(Na,{present:r||i.open,children:i.modal?y.jsx(Spe,{...a,ref:t}):y.jsx(Epe,{...a,ref:t})})});S9.displayName=uh;var xpe=Nu("PopoverContent.RemoveScroll"),Spe=L.forwardRef((e,t)=>{const n=lc(uh,e.__scopePopover),r=L.useRef(null),a=xn(t,r),i=L.useRef(!1);return L.useEffect(()=>{const o=r.current;if(o)return ww(o)},[]),y.jsx(Y0,{as:xpe,allowPinchZoom:!0,children:y.jsx(E9,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zt(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:zt(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,c=s.button===2||u;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:zt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Epe=L.forwardRef((e,t)=>{const n=lc(uh,e.__scopePopover),r=L.useRef(!1),a=L.useRef(!1);return y.jsx(E9,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),E9=L.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:f,...h}=e,m=lc(uh,n),g=J0(n);return bw(),y.jsx(Z0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(hh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:y.jsx(Mv,{"data-state":C9(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),k9="PopoverClose",kpe=L.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=lc(k9,n);return y.jsx(an.button,{type:"button",...r,ref:t,onClick:zt(e.onClick,()=>a.onOpenChange(!1))})});kpe.displayName=k9;var Cpe="PopoverArrow",Ape=L.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=J0(n);return y.jsx(Pv,{...a,...r,ref:t})});Ape.displayName=Cpe;function C9(e){return e?"open":"closed"}var Tpe=b9,Rpe=_9,Npe=x9,Ipe=S9;function cC({...e}){return y.jsx(Tpe,{"data-slot":"popover",...e})}function dC({...e}){return y.jsx(Rpe,{"data-slot":"popover-trigger",...e})}function fC({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(Npe,{children:y.jsx(Ipe,{"data-slot":"popover-content",align:t,sideOffset:n,className:Ht("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const Wc=Ds(Ms(e=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,setModelId:t=>e({modelId:t}),setTemperature:t=>e({temperature:t}),setMaxTokens:t=>e({maxTokens:t}),setTopP:t=>e({topP:t}),setTopK:t=>e({topK:t}),setPresencePenalty:t=>e({presencePenalty:t}),setFrequencyPenalty:t=>e({frequencyPenalty:t}),initializePromptState:t=>{console.log("[PromptStateStore] Initializing with:",t),e({modelId:t.modelId,temperature:t.temperature,maxTokens:t.maxTokens,topP:t.topP,topK:t.topK,presencePenalty:t.presencePenalty,frequencyPenalty:t.frequencyPenalty})},resetPromptState:()=>{console.log("[PromptStateStore] Resetting state."),e({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null})}})));function Ope(){const e=ta.getState().registerPromptControl,t=()=>{const{temperature:r,setTemperature:a,topP:i,setTopP:o,maxTokens:s,setMaxTokens:u,topK:c,setTopK:f,presencePenalty:h,setPresencePenalty:m,frequencyPenalty:g,setFrequencyPenalty:v}=Wc.getState(),w=qr.getState(),_={temperature:r,setTemperature:a,topP:i,setTopP:o,maxTokens:s,setMaxTokens:u,topK:c,setTopK:f,presencePenalty:h,setPresencePenalty:m,frequencyPenalty:g,setFrequencyPenalty:v,defaultTemperature:w.temperature,defaultTopP:w.topP,defaultMaxTokens:w.maxTokens,defaultTopK:w.topK,defaultPresencePenalty:w.presencePenalty,defaultFrequencyPenalty:w.frequencyPenalty};return y.jsx(c9,{..._})},n=()=>{const r=Qn.getState().status==="streaming",{temperature:a,topP:i,maxTokens:o,topK:s,presencePenalty:u,frequencyPenalty:c}=Wc.getState(),f=qr.getState(),h=a!==f.temperature||i!==f.topP||o!==f.maxTokens||s!==f.topK||u!==f.presencePenalty||c!==f.frequencyPenalty;return y.jsxs(cC,{children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(dC,{asChild:!0,children:y.jsx(Lt,{variant:h?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:r,"aria-label":"Adjust Parameters",children:y.jsx(J7,{className:"h-4 w-4"})})})}),y.jsx(Nn,{side:"top",children:"Parameters"})]})}),y.jsx(fC,{className:"w-auto p-0",align:"start",children:y.jsx(t,{})})]})};e({id:"core-parameters",order:30,status:()=>"ready",triggerRenderer:()=>wt.createElement(n),getParameters:()=>{const{temperature:r,topP:a,maxTokens:i,topK:o,presencePenalty:s,frequencyPenalty:u}=Wc.getState();return{...r!==null&&{temperature:r},...a!==null&&{top_p:a},...i!==null&&{max_tokens:i},...o!==null&&{top_k:o},...s!==null&&{presence_penalty:s},...u!==null&&{frequency_penalty:u}}},show:()=>qr.getState().enableAdvancedSettings}),console.log("[Function] Registered Core Parameter Control")}const A9=20,jpe=A9*1024*1024;function Dpe(){const e=ta.getState().registerPromptControl,t=()=>{const r=L.useRef(null),a=lb.getState().addAttachedFile,i=Qn.getState().status==="streaming",o=L.useCallback(async u=>{const c=u.target.files;if(c){for(const f of Array.from(c)){if(f.size>jpe){ct.error(`File "${f.name}" exceeds the ${A9}MB limit.`);continue}try{let h={};const m=f.type.startsWith("text/"),g=f.type.startsWith("image/");if(m)h.contentText=await f.text();else if(g){const v=new FileReader,w=new Promise((x,S)=>{v.onload=()=>x(v.result),v.onerror=E=>S(E)});v.readAsDataURL(f);const _=await w;h.contentBase64=_.split(",")[1]}else console.log(`File type ${f.type} not directly processed for content.`);a({source:"direct",name:f.name,type:f.type,size:f.size,...h})}catch(h){console.error(`Error processing file ${f.name}:`,h),ct.error(`Failed to process file "${f.name}": ${h instanceof Error?h.message:String(h)}`)}}u.target&&(u.target.value="")}},[a]),s=()=>{var u;(u=r.current)==null||u.click()};return y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:r,onChange:o,multiple:!0,className:"hidden",disabled:i}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{type:"button",variant:"ghost",size:"icon",onClick:s,disabled:i,className:"h-8 w-8","aria-label":"Attach Files",children:y.jsx($7,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Attach Files"})]})})]})},n=()=>{const{attachedFilesMetadata:r,removeAttachedFile:a}=lb.getState(),i=Qn.getState().status==="streaming";return r.length===0?null:y.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:r.map(o=>y.jsx(NM,{fileMeta:o,onRemove:a,isReadOnly:i},o.id))})};e({id:"core-file-attachment",order:20,triggerRenderer:()=>wt.createElement(t),renderer:()=>wt.createElement(n),clearOnSubmit:()=>{},show:()=>!0}),console.log("[Function] Registered Core File Attachment Control")}const Mpe=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Oo,{className:"bg-muted/30",children:[y.jsx(Lr,{className:"px-2 py-1"}),y.jsx(Lr,{className:"px-2 py-1",children:y.jsx(a0,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(Lr,{className:"py-1 px-2",colSpan:3,children:y.jsx(nr,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(Lr,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(id,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Create (Enter)"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(Zu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var Bw="Checkbox",[Ppe,jge]=Ri(Bw),[Fpe,Lpe]=Ppe(Bw),T9=L.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=L.useState(null),v=xn(t,A=>g(A)),w=L.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Os({prop:a,defaultProp:i??!1,onChange:c,caller:Bw}),E=L.useRef(x);return L.useEffect(()=>{const A=m==null?void 0:m.form;if(A){const k=()=>S(E.current);return A.addEventListener("reset",k),()=>A.removeEventListener("reset",k)}},[m,S]),y.jsxs(Fpe,{scope:n,state:x,disabled:s,children:[y.jsx(an.button,{type:"button",role:"checkbox","aria-checked":Ru(x)?"mixed":x,"aria-required":o,"data-state":O9(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onKeyDown:zt(e.onKeyDown,A=>{A.key==="Enter"&&A.preventDefault()}),onClick:zt(e.onClick,A=>{S(k=>Ru(k)?!0:!k),_&&(w.current=A.isPropagationStopped(),w.current||A.stopPropagation())})}),_&&y.jsx(I9,{control:m,bubbles:!w.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Ru(i)?!1:i})]})});T9.displayName=Bw;var R9="CheckboxIndicator",N9=L.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Lpe(R9,n);return y.jsx(Na,{present:r||Ru(i.state)||i.state===!0,children:y.jsx(an.span,{"data-state":O9(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});N9.displayName=R9;var $pe="CheckboxBubbleInput",I9=L.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=L.useRef(null),u=xn(s,o),c=jw(n),f=jv(t);L.useEffect(()=>{const m=s.current;if(!m)return;const g=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&w){const _=new Event("click",{bubbles:r});m.indeterminate=Ru(n),w.call(m,Ru(n)?!1:n),m.dispatchEvent(_)}},[c,n,r]);const h=L.useRef(Ru(n)?!1:n);return y.jsx(an.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});I9.displayName=$pe;function Ru(e){return e==="indeterminate"}function O9(e){return Ru(e)?"indeterminate":e?"checked":"unchecked"}var Bpe=T9,zpe=N9;function Upe({className:e,...t}){return y.jsx(Bpe,{"data-slot":"checkbox",className:Ht("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(zpe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(id,{className:"size-3.5"})})})}var aE=["Enter"," "],qpe=["ArrowDown","PageUp","Home"],j9=["ArrowUp","PageDown","End"],Hpe=[...qpe,...j9],Vpe={ltr:[...aE,"ArrowRight"],rtl:[...aE,"ArrowLeft"]},Gpe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Q0="Menu",[n0,Wpe,Kpe]=Tw(Q0),[Sd,D9]=Ri(Q0,[Kpe,Yu,Rw]),zw=Yu(),M9=Rw(),[Zpe,Ed]=Sd(Q0),[Ype,eg]=Sd(Q0),P9=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=zw(t),[u,c]=L.useState(null),f=L.useRef(!1),h=Ea(i),m=Ih(a);return L.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),y.jsx(Dv,{...s,children:y.jsx(Zpe,{scope:t,open:n,onOpenChange:h,content:u,onContentChange:c,children:y.jsx(Ype,{scope:t,onClose:L.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};P9.displayName=Q0;var Xpe="MenuAnchor",hC=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=zw(n);return y.jsx(d0,{...a,...r,ref:t})});hC.displayName=Xpe;var pC="MenuPortal",[Jpe,F9]=Sd(pC,{forceMount:void 0}),L9=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Ed(pC,t);return y.jsx(Jpe,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(gh,{asChild:!0,container:a,children:r})})})};L9.displayName=pC;var go="MenuContent",[Qpe,mC]=Sd(go),$9=L.forwardRef((e,t)=>{const n=F9(go,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Ed(go,e.__scopeMenu),o=eg(go,e.__scopeMenu);return y.jsx(n0.Provider,{scope:e.__scopeMenu,children:y.jsx(Na,{present:r||i.open,children:y.jsx(n0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(eme,{...a,ref:t}):y.jsx(tme,{...a,ref:t})})})})}),eme=L.forwardRef((e,t)=>{const n=Ed(go,e.__scopeMenu),r=L.useRef(null),a=xn(t,r);return L.useEffect(()=>{const i=r.current;if(i)return ww(i)},[]),y.jsx(gC,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:zt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),tme=L.forwardRef((e,t)=>{const n=Ed(go,e.__scopeMenu);return y.jsx(gC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),nme=Nu("MenuContent.ScrollLock"),gC=L.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:v,...w}=e,_=Ed(go,n),x=eg(go,n),S=zw(n),E=M9(n),A=Wpe(n),[k,D]=L.useState(null),O=L.useRef(null),N=xn(t,O,_.onContentChange),z=L.useRef(0),H=L.useRef(""),ee=L.useRef(0),P=L.useRef(null),Z=L.useRef("right"),V=L.useRef(0),fe=v?Y0:L.Fragment,ue=v?{as:nme,allowPinchZoom:!0}:void 0,Y=ae=>{var Fe,Ie;const G=H.current+ae,Q=A().filter(Te=>!Te.disabled),ne=document.activeElement,de=(Fe=Q.find(Te=>Te.ref.current===ne))==null?void 0:Fe.textValue,_e=Q.map(Te=>Te.textValue),ve=pme(_e,G,de),Pe=(Ie=Q.find(Te=>Te.textValue===ve))==null?void 0:Ie.ref.current;(function Te(Ue){H.current=Ue,window.clearTimeout(z.current),Ue!==""&&(z.current=window.setTimeout(()=>Te(""),1e3))})(G),Pe&&setTimeout(()=>Pe.focus())};L.useEffect(()=>()=>window.clearTimeout(z.current),[]),bw();const X=L.useCallback(ae=>{var Q,ne;return Z.current===((Q=P.current)==null?void 0:Q.side)&&gme(ae,(ne=P.current)==null?void 0:ne.area)},[]);return y.jsx(Qpe,{scope:n,searchRef:H,onItemEnter:L.useCallback(ae=>{X(ae)&&ae.preventDefault()},[X]),onItemLeave:L.useCallback(ae=>{var G;X(ae)||((G=O.current)==null||G.focus(),D(null))},[X]),onTriggerLeave:L.useCallback(ae=>{X(ae)&&ae.preventDefault()},[X]),pointerGraceTimerRef:ee,onPointerGraceIntentChange:L.useCallback(ae=>{P.current=ae},[]),children:y.jsx(fe,{...ue,children:y.jsx(Z0,{asChild:!0,trapped:a,onMountAutoFocus:zt(i,ae=>{var G;ae.preventDefault(),(G=O.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(hh,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:y.jsx(iF,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:D,onEntryFocus:zt(u,ae=>{x.isUsingKeyboardRef.current||ae.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(Mv,{role:"menu","aria-orientation":"vertical","data-state":tL(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...w,ref:N,style:{outline:"none",...w.style},onKeyDown:zt(w.onKeyDown,ae=>{const Q=ae.target.closest("[data-radix-menu-content]")===ae.currentTarget,ne=ae.ctrlKey||ae.altKey||ae.metaKey,de=ae.key.length===1;Q&&(ae.key==="Tab"&&ae.preventDefault(),!ne&&de&&Y(ae.key));const _e=O.current;if(ae.target!==_e||!Hpe.includes(ae.key))return;ae.preventDefault();const Pe=A().filter(Fe=>!Fe.disabled).map(Fe=>Fe.ref.current);j9.includes(ae.key)&&Pe.reverse(),fme(Pe)}),onBlur:zt(e.onBlur,ae=>{ae.currentTarget.contains(ae.target)||(window.clearTimeout(z.current),H.current="")}),onPointerMove:zt(e.onPointerMove,r0(ae=>{const G=ae.target,Q=V.current!==ae.clientX;if(ae.currentTarget.contains(G)&&Q){const ne=ae.clientX>V.current?"right":"left";Z.current=ne,V.current=ae.clientX}}))})})})})})})});$9.displayName=go;var rme="MenuGroup",yC=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(an.div,{role:"group",...r,ref:t})});yC.displayName=rme;var ame="MenuLabel",B9=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(an.div,{...r,ref:t})});B9.displayName=ame;var pv="MenuItem",L4="menu.itemSelect",Uw=L.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=L.useRef(null),o=eg(pv,e.__scopeMenu),s=mC(pv,e.__scopeMenu),u=xn(t,i),c=L.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(L4,{bubbles:!0,cancelable:!0});h.addEventListener(L4,g=>r==null?void 0:r(g),{once:!0}),zj(h,m),m.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx(z9,{...a,ref:u,disabled:n,onClick:zt(e.onClick,f),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),c.current=!0},onPointerUp:zt(e.onPointerUp,h=>{var m;c.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:zt(e.onKeyDown,h=>{const m=s.searchRef.current!=="";n||m&&h.key===" "||aE.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Uw.displayName=pv;var z9=L.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=mC(pv,n),s=M9(n),u=L.useRef(null),c=xn(t,u),[f,h]=L.useState(!1),[m,g]=L.useState("");return L.useEffect(()=>{const v=u.current;v&&g((v.textContent??"").trim())},[i.children]),y.jsx(n0.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:y.jsx(oF,{asChild:!0,...s,focusable:!r,children:y.jsx(an.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:zt(e.onPointerMove,r0(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:zt(e.onPointerLeave,r0(v=>o.onItemLeave(v))),onFocus:zt(e.onFocus,()=>h(!0)),onBlur:zt(e.onBlur,()=>h(!1))})})})}),ime="MenuCheckboxItem",U9=L.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(W9,{scope:e.__scopeMenu,checked:n,children:y.jsx(Uw,{role:"menuitemcheckbox","aria-checked":mv(n)?"mixed":n,...a,ref:t,"data-state":vC(n),onSelect:zt(a.onSelect,()=>r==null?void 0:r(mv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});U9.displayName=ime;var q9="MenuRadioGroup",[ome,sme]=Sd(q9,{value:void 0,onValueChange:()=>{}}),H9=L.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ea(r);return y.jsx(ome,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(yC,{...a,ref:t})})});H9.displayName=q9;var V9="MenuRadioItem",G9=L.forwardRef((e,t)=>{const{value:n,...r}=e,a=sme(V9,e.__scopeMenu),i=n===a.value;return y.jsx(W9,{scope:e.__scopeMenu,checked:i,children:y.jsx(Uw,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":vC(i),onSelect:zt(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});G9.displayName=V9;var bC="MenuItemIndicator",[W9,lme]=Sd(bC,{checked:!1}),K9=L.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=lme(bC,n);return y.jsx(Na,{present:r||mv(i.checked)||i.checked===!0,children:y.jsx(an.span,{...a,ref:t,"data-state":vC(i.checked)})})});K9.displayName=bC;var ume="MenuSeparator",Z9=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(an.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Z9.displayName=ume;var cme="MenuArrow",Y9=L.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=zw(n);return y.jsx(Pv,{...a,...r,ref:t})});Y9.displayName=cme;var dme="MenuSub",[Dge,X9]=Sd(dme),Xp="MenuSubTrigger",J9=L.forwardRef((e,t)=>{const n=Ed(Xp,e.__scopeMenu),r=eg(Xp,e.__scopeMenu),a=X9(Xp,e.__scopeMenu),i=mC(Xp,e.__scopeMenu),o=L.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:u}=i,c={__scopeMenu:e.__scopeMenu},f=L.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return L.useEffect(()=>f,[f]),L.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),u(null)}},[s,u]),y.jsx(hC,{asChild:!0,...c,children:y.jsx(z9,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":tL(n.open),...e,ref:oE(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:zt(e.onPointerMove,r0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:zt(e.onPointerLeave,r0(h=>{var g,v;f();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const w=(v=n.content)==null?void 0:v.dataset.side,_=w==="right",x=_?-5:5,S=m[_?"left":"right"],E=m[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:S,y:m.bottom}],side:w}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:zt(e.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||Vpe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});J9.displayName=Xp;var Q9="MenuSubContent",eL=L.forwardRef((e,t)=>{const n=F9(go,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Ed(go,e.__scopeMenu),o=eg(go,e.__scopeMenu),s=X9(Q9,e.__scopeMenu),u=L.useRef(null),c=xn(t,u);return y.jsx(n0.Provider,{scope:e.__scopeMenu,children:y.jsx(Na,{present:r||i.open,children:y.jsx(n0.Slot,{scope:e.__scopeMenu,children:y.jsx(gC,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=u.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:zt(e.onFocusOutside,f=>{f.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:zt(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:zt(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),m=Gpe[o.dir].includes(f.key);h&&m&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),f.preventDefault())})})})})})});eL.displayName=Q9;function tL(e){return e?"open":"closed"}function mv(e){return e==="indeterminate"}function vC(e){return mv(e)?"indeterminate":e?"checked":"unchecked"}function fme(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function hme(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function pme(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=hme(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function mme(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function gme(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return mme(n,t)}function r0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var yme=P9,bme=hC,vme=L9,wme=$9,_me=yC,xme=B9,Sme=Uw,Eme=U9,kme=H9,Cme=G9,Ame=K9,Tme=Z9,Rme=Y9,Nme=J9,Ime=eL,wC="ContextMenu",[Ome,Mge]=Ri(wC,[D9]),gi=D9(),[jme,nL]=Ome(wC),rL=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=L.useState(!1),u=gi(t),c=Ea(r),f=L.useCallback(h=>{s(h),c(h)},[c]);return y.jsx(jme,{scope:t,open:o,onOpenChange:f,modal:i,children:y.jsx(yme,{...u,dir:a,open:o,onOpenChange:f,modal:i,children:n})})};rL.displayName=wC;var aL="ContextMenuTrigger",iL=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=nL(aL,n),o=gi(n),s=L.useRef({x:0,y:0}),u=L.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),c=L.useRef(0),f=L.useCallback(()=>window.clearTimeout(c.current),[]),h=m=>{s.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return L.useEffect(()=>f,[f]),L.useEffect(()=>void(r&&f()),[r,f]),y.jsxs(y.Fragment,{children:[y.jsx(bme,{...o,virtualRef:u}),y.jsx(an.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:zt(e.onContextMenu,m=>{f(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:zt(e.onPointerDown,Hy(m=>{f(),c.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:zt(e.onPointerMove,Hy(f)),onPointerCancel:r?e.onPointerCancel:zt(e.onPointerCancel,Hy(f)),onPointerUp:r?e.onPointerUp:zt(e.onPointerUp,Hy(f))})]})});iL.displayName=aL;var Dme="ContextMenuPortal",oL=e=>{const{__scopeContextMenu:t,...n}=e,r=gi(t);return y.jsx(vme,{...r,...n})};oL.displayName=Dme;var sL="ContextMenuContent",lL=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=nL(sL,n),i=gi(n),o=L.useRef(!1);return y.jsx(wme,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var u;(u=e.onCloseAutoFocus)==null||u.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var u;(u=e.onInteractOutside)==null||u.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lL.displayName=sL;var Mme="ContextMenuGroup",Pme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(_me,{...a,...r,ref:t})});Pme.displayName=Mme;var Fme="ContextMenuLabel",Lme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(xme,{...a,...r,ref:t})});Lme.displayName=Fme;var $me="ContextMenuItem",uL=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Sme,{...a,...r,ref:t})});uL.displayName=$me;var Bme="ContextMenuCheckboxItem",zme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Eme,{...a,...r,ref:t})});zme.displayName=Bme;var Ume="ContextMenuRadioGroup",qme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(kme,{...a,...r,ref:t})});qme.displayName=Ume;var Hme="ContextMenuRadioItem",Vme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Cme,{...a,...r,ref:t})});Vme.displayName=Hme;var Gme="ContextMenuItemIndicator",Wme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Ame,{...a,...r,ref:t})});Wme.displayName=Gme;var Kme="ContextMenuSeparator",cL=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Tme,{...a,...r,ref:t})});cL.displayName=Kme;var Zme="ContextMenuArrow",Yme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Rme,{...a,...r,ref:t})});Yme.displayName=Zme;var Xme="ContextMenuSubTrigger",Jme=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Nme,{...a,...r,ref:t})});Jme.displayName=Xme;var Qme="ContextMenuSubContent",e0e=L.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Ime,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});e0e.displayName=Qme;function Hy(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var t0e=rL,n0e=iL,r0e=oL,a0e=lL,i0e=uL,o0e=cL;function s0e({...e}){return y.jsx(t0e,{"data-slot":"context-menu",...e})}function l0e({...e}){return y.jsx(n0e,{"data-slot":"context-menu-trigger",...e})}function u0e({className:e,...t}){return y.jsx(r0e,{children:y.jsx(a0e,{"data-slot":"context-menu-content",className:Ht("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function fl({className:e,inset:t,variant:n="default",...r}){return y.jsx(i0e,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:Ht("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function $4({className:e,...t}){return y.jsx(o0e,{"data-slot":"context-menu-separator",className:Ht("bg-border -mx-1 my-1 h-px",e),...t})}const c0e=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:m,handleDelete:g,setNewName:v,renameInputRef:w,handleGitInit:_,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:A})=>{const k=ee=>{ee.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||!t&&!i&&s(e)},D=ee=>{ee.key==="Enter"?h():ee.key==="Escape"&&f()},O=e.type==="folder",N=O?r?l7:a0:o7,z=O?r?"text-green-400":"text-yellow-400":"text-blue-400",H=y.jsxs(Oo,{className:Ht("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed"),onClick:k,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(Lr,{className:"px-2 py-1",children:y.jsx(Upe,{checked:n,onCheckedChange:ee=>u(!!ee,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||O})}),y.jsx(Lr,{className:"px-2 py-1",children:y.jsx(N,{className:Ht("h-5 w-5",z)})}),y.jsx(Lr,{className:"py-1 px-2",children:t?y.jsx(nr,{ref:w,value:a,onChange:ee=>v(ee.target.value),onBlur:h,onKeyDown:D,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:ee=>ee.stopPropagation(),disabled:i}):y.jsx("span",{className:Ht("truncate",O&&"cursor-pointer hover:underline"),title:e.name,onClick:ee=>{O&&(ee.stopPropagation(),s(e))},children:e.name})}),y.jsx(Lr,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?qb(e.size):""}),y.jsx(Lr,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(Lr,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:Ht("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:ee=>{ee.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),children:i?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(id,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Save (Enter)"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:ee=>{ee.stopPropagation(),f()},"aria-label":"Cancel edit",disabled:i,children:y.jsx(Zu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Cancel (Esc)"})]})})]}):y.jsxs(y.Fragment,{children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:ee=>{ee.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||o,children:y.jsx(GS,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Rename"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:ee=>{ee.stopPropagation(),m(e)},"aria-label":O?"Download folder as ZIP":"Download file",disabled:i,children:y.jsx(rb,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:O?"Download folder (.zip)":"Download file"})]})}),y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:ee=>{ee.stopPropagation(),g(e)},"aria-label":`Delete ${O?"folder":"file"}`,disabled:i,children:y.jsx(Iu,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})})})]},e.id);return O?y.jsxs(s0e,{children:[y.jsx(l0e,{disabled:t||i,asChild:!0,children:H}),y.jsxs(u0e,{children:[y.jsx(fl,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx($4,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(fl,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(y7,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(fl,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(m7,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(fl,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(d6,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(fl,{onSelect:()=>A(e.path),disabled:i,children:[y.jsx(C7,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(fl,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(tm,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx($4,{}),y.jsxs(fl,{onSelect:()=>c(e),disabled:i,children:[y.jsx(GS,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(fl,{onSelect:()=>m(e),disabled:i,children:[y.jsx(rb,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(fl,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(Iu,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):H},d0e=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:v,handleDelete:w,setNewName:_,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:A,handleGitInit:k,handleGitPull:D,handleGitCommit:O,handleGitPush:N,handleGitStatus:z})=>{const H=L.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx(K0,{className:"flex-grow h-0 border-t border-border",children:y.jsxs(oC,{className:"w-full text-sm",children:[y.jsx(sC,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Oo,{className:"hover:bg-card",children:[y.jsx(Ga,{className:"w-[40px] px-2"}),y.jsx(Ga,{className:"w-[40px] px-2"}),y.jsx(Ga,{children:"Name"}),y.jsx(Ga,{className:"w-[100px] text-right",children:"Size"}),y.jsx(Ga,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(Ga,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs(lC,{children:[r&&y.jsx(Mpe,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:o}),H.map(ee=>{const P=t===ee.path,Z=i.has(ee.id),V=A[ee.path]??!1;return y.jsx(c0e,{entry:ee,isEditingThis:P,isChecked:Z,isGitRepo:V,newName:P?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:v,handleDelete:w,setNewName:_,renameInputRef:S,handleGitInit:k,handleGitPull:D,handleGitCommit:O,handleGitPush:N,handleGitStatus:z},ee.id)}),e.length===0&&!r&&!o&&y.jsx(Oo,{children:y.jsx(Lr,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},f0e=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:u,startCreatingFolder:c,handleUploadClick:f,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:g,handleCloneClick:v,fileInputRef:w,folderInputRef:_,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:w,onChange:S,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Lt,{variant:"ghost",size:"icon",onClick:A=>{A.preventDefault(),A.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(x7,{className:"h-4 w-4"})}),y.jsx(Lt,{variant:"ghost",size:"icon",onClick:A=>{A.preventDefault(),A.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(d7,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(Lt,{variant:"ghost",size:"icon",onClick:A=>{A.preventDefault(),A.stopPropagation(),u()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(yv,{className:"h-4 w-4"})}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:A=>{A.preventDefault(),A.stopPropagation(),c()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(uE,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:A=>{A.preventDefault(),A.stopPropagation(),f()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(c6,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:A=>{A.preventDefault(),A.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(a0,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:A=>{A.preventDefault(),A.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(JB,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:A=>{A.preventDefault(),A.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(tm,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:A=>{A.preventDefault(),A.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(MB,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),h0e=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:u})=>y.jsx(xw,{open:e,onOpenChange:t,children:y.jsxs(Sw,{children:[y.jsxs(Ew,{children:[y.jsx(Cw,{children:"Clone Git Repository"}),y.jsxs(Aw,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:u}),"."]})]}),y.jsxs("div",{className:"grid gap-4 py-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(dn,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(nr,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(dn,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(nr,{id:"clone-branch",value:a,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]}),y.jsxs(kw,{children:[y.jsx(Lt,{variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),y.jsx(Lt,{onClick:s,disabled:o||!n.trim(),children:o?y.jsxs(y.Fragment,{children:[y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),"Cloning..."]}):"Clone"})]})]})}),p0e=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(xw,{open:e,onOpenChange:t,children:y.jsxs(Sw,{children:[y.jsxs(Ew,{children:[y.jsx(Cw,{children:"Commit Changes"}),y.jsxs(Aw,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]})]}),y.jsx("div",{className:"grid gap-4 py-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(dn,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(nr,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})}),y.jsxs(kw,{children:[y.jsx(Lt,{variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),y.jsx(Lt,{onClick:o,disabled:i||!r.trim(),children:i?y.jsxs(y.Fragment,{children:[y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),"Committing..."]}):"Commit"})]})]})}),_C=L.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:o,createDirectory:s,uploadFiles:u,deleteNodes:c,renameNode:f,setCurrentPath:h,rootId:m,selectFile:g,deselectFile:v,selectedFileIds:w,vfsKey:_,configuredVfsKey:x,initializingKey:S,_setError:E,_setOperationLoading:A,findNodeByPath:k,initializeVFS:D}=mo(Hn(ht=>({nodes:ht.nodes,childrenMap:ht.childrenMap,currentParentId:ht.currentParentId,selectedFileIds:ht.selectedFileIds,loading:ht.loading,operationLoading:ht.operationLoading,error:ht.error,fetchNodes:ht.fetchNodes,createDirectory:ht.createDirectory,uploadFiles:ht.uploadFiles,deleteNodes:ht.deleteNodes,renameNode:ht.renameNode,selectFile:ht.selectFile,deselectFile:ht.deselectFile,setCurrentPath:ht.setCurrentPath,rootId:ht.rootId,vfsKey:ht.vfsKey,configuredVfsKey:ht.configuredVfsKey,initializingKey:ht.initializingKey,_setError:ht._setError,_setOperationLoading:ht._setOperationLoading,findNodeByPath:ht.findNodeByPath,initializeVFS:ht.initializeVFS}))),[O,N]=L.useState(""),[z,H]=L.useState(null),[ee,P]=L.useState(!1),[Z,V]=L.useState(""),[fe,ue]=L.useState({}),[Y,X]=L.useState(!1),[ae,G]=L.useState(""),[Q,ne]=L.useState(""),[de,_e]=L.useState(!1),[ve,Pe]=L.useState(!1),[Fe,Ie]=L.useState(null),[Te,Ue]=L.useState(""),[Ve,Ee]=L.useState(!1),[Ae,B]=L.useState({}),Ce=L.useRef(null),Re=L.useRef(null),se=L.useRef(null),ie=L.useRef(null),J=L.useRef(null),xe=n?e[n]:null,Me=xe?xe.path:"/",Ze=(t[n||m||""]||[]).map(ht=>e[ht]).filter(ht=>!!ht).sort((ht,Ct)=>ht.type==="folder"&&Ct.type==="file"?-1:ht.type==="file"&&Ct.type==="folder"?1:ht.name.localeCompare(Ct.name)),Et=L.useMemo(()=>Ze.filter(ht=>ht.type==="folder").map(ht=>ht.path),[Ze]),at=r||S!==null||_!==x,_t=a||de||Ve||Object.values(Ae).some(Boolean);L.useEffect(()=>{n!==null&&!t[n]&&!at&&x===_?o(n):n===null&&m&&!t[m]&&!at&&x===_&&o(m)},[n,t,m,at,o,x,_]),L.useEffect(()=>{var ht,Ct;z&&((ht=ie.current)==null||ht.focus(),(Ct=ie.current)==null||Ct.select())},[z]),L.useEffect(()=>{var ht;ee&&((ht=J.current)==null||ht.focus())},[ee]),L.useEffect(()=>{(async()=>{if(at||Et.length===0)return;const Ct={};let Ot=!1;for(const Zt of Et)try{const En=await Mne(Zt);fe[Zt]!==En&&(Ct[Zt]=En,Ot=!0)}catch(En){console.error(`Error checking git status for ${Zt}:`,En),fe[Zt]!==!1&&(Ct[Zt]=!1,Ot=!0)}Ot&&ue(Zt=>({...Zt,...Ct}))})()},[Et,at,fe]);const Nt=L.useCallback(async(ht,Ct)=>{if(!(_t||at)){Ct!==!1&&A(!0),E(null);try{await ht()}catch(Ot){console.error("[FileManager Operation Error]:",Ot)}finally{Ct!==!1&&A(!1)}}},[_t,at,E,A]),Rt=L.useCallback(ht=>{_t||at||z||ht.type==="folder"&&Nt(()=>h(ht.path),!1)},[_t,at,z,h,Nt]),Kt=L.useCallback(()=>{if(_t||at||Me==="/")return;const ht=Qv(Me);Nt(()=>h(ht),!1)},[_t,at,Me,h,Nt]),pe=L.useCallback(()=>{_t||at||Me==="/"||Nt(()=>h("/"),!1)},[_t,at,Me,h,Nt]),R=L.useCallback(()=>{at||Nt(()=>o(n),!1)},[Nt,o,n,at]),q=L.useCallback((ht,Ct)=>{const Ot=e[Ct];Ot&&Ot.type==="file"?ht?g(Ct):v(Ct):Ot&&Ot.type==="folder"&&ct.info("Folders cannot be attached to the prompt.")},[g,v,e]),ce=L.useCallback(ht=>{_t||at||ee||(H(ht.path),N(ht.name),P(!1))},[_t,at,ee]),Oe=L.useCallback(()=>{H(null),N("")},[]),ye=L.useCallback(async()=>{if(!z||!O.trim()){Oe();return}const ht=k(z);ht&&ht.name!==O.trim()&&await Nt(()=>f(ht.id,O.trim())),Oe()},[z,O,f,Oe,k,Nt]),ke=L.useCallback(()=>{_t||at||z||(P(!0),V(""),H(null))},[_t,at,z]),oe=L.useCallback(()=>{P(!1),V("")},[]),ft=L.useCallback(async()=>{if(!Z.trim()){oe();return}await Nt(()=>s(n,Z.trim())),oe()},[Z,s,n,oe,Nt]),vt=()=>{var ht;return(ht=Ce.current)==null?void 0:ht.click()},j=()=>{var ht;return(ht=Re.current)==null?void 0:ht.click()},$e=()=>{var ht;return(ht=se.current)==null?void 0:ht.click()},st=L.useCallback(async ht=>{const Ct=ht.target.files;Ct&&Ct.length>0&&(await Nt(()=>u(n,Ct)),ht.target&&(ht.target.value=""))},[u,n,Nt]),ge=L.useCallback(async ht=>{var Ot;const Ct=(Ot=ht.target.files)==null?void 0:Ot[0];Ct&&(await Nt(async()=>{await Lne(Ct,Me),await o(n)}),ht.target&&(ht.target.value=""))},[Me,o,n,Nt]),De=L.useCallback(async ht=>{window.confirm(`Delete ${ht.type} "${ht.name}"?${ht.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Nt(()=>c([ht.id]))},[c,Nt]),Je=L.useCallback(async ht=>{await Nt(async()=>{ht.type==="file"?await Fne(ht.path):await PI(`${ht.name}.zip`,ht.path)})},[Nt]),It=L.useCallback(async()=>{Ze.length!==0&&await Nt(async()=>{const ht=ea(Me)||"root";await PI(`${ht}_export.zip`,Me)})},[Me,Ze.length,Nt]),me=L.useCallback(async(ht,Ct)=>{if(!(Ae[ht]||at||a)){B(Ot=>({...Ot,[ht]:!0})),E(null);try{await Ct()}catch(Ot){console.error(`[FileManager Git Op Error @ ${ht}]:`,Ot)}finally{B(Ot=>({...Ot,[ht]:!1}))}}},[E,Ae,at,a]),U=L.useCallback(ht=>{me(ht,async()=>{await kM(ht),ue(Ct=>({...Ct,[ht]:!0}))})},[me]),$=L.useCallback(ht=>{ct.info("Pulling default branch (auth not implemented yet)..."),me(ht,()=>iw(ht,"main"))},[me]),W=L.useCallback(ht=>{Ie(ht),Ue(""),Pe(!0)},[]),he=L.useCallback(ht=>{ct.info("Pushing default branch (auth not implemented yet)..."),me(ht,()=>Rk(ht,"main"))},[me]),Ne=L.useCallback(ht=>{me(ht,()=>CM(ht))},[me]),He=L.useCallback(()=>{G(""),ne(""),X(!0)},[]),gt=L.useCallback(async()=>{if(!ae.trim()){ct.error("Repository URL cannot be empty.");return}_e(!0),E(null);try{const ht=ea(ae.trim().replace(/\.git$/,""))||"cloned_repo",Ct=Nm(Me,ht);await EM(Ct,ae.trim(),Q.trim()||void 0),X(!1),await R()}catch{}finally{_e(!1)}},[ae,Q,Me,E,R]),Gt=L.useCallback(async()=>{if(!Fe||!Te.trim()){ct.error("Commit message cannot be empty.");return}Ee(!0),E(null);try{await Tk(Fe,Te.trim()),Pe(!1)}catch{}finally{Ee(!1)}},[Fe,Te,E]);return at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[y.jsx(Xn,{className:"h-8 w-8 animate-spin mb-2"}),y.jsx("p",{children:S?`Initializing filesystem: ${S}`:"Loading filesystem..."}),i&&y.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[y.jsxs("p",{children:["Error loading filesystem: ",i]}),y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>D(_||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):y.jsxs("div",{className:"flex h-full flex-col bg-card text-card-foreground rounded-lg border border-border shadow-sm overflow-hidden",children:[y.jsx(f0e,{currentPath:Me,isAnyLoading:_t||at,isOperationLoading:a,entries:Ze,editingPath:z,creatingFolder:ee,handleNavigateHome:pe,handleNavigateUp:Kt,handleRefresh:R,startCreatingFolder:ke,handleUploadClick:vt,handleFolderUploadClick:j,handleArchiveUploadClick:$e,handleDownloadAll:It,handleCloneClick:He,fileInputRef:Ce,folderInputRef:Re,archiveInputRef:se,handleFileChange:st,handleArchiveChange:ge}),y.jsx(d0e,{entries:Ze,editingPath:z,newName:O,creatingFolder:ee,newFolderName:Z,selectedFileIds:w,isOperationLoading:_t,handleNavigate:Rt,handleCheckboxChange:q,startEditing:ce,cancelEditing:Oe,handleRename:ye,cancelCreatingFolder:oe,handleCreateFolder:ft,handleDownload:Je,handleDelete:De,setNewName:N,setNewFolderName:V,renameInputRef:ie,newFolderInputRef:J,gitRepoStatus:fe,handleGitInit:U,handleGitPull:$,handleGitCommit:W,handleGitPush:he,handleGitStatus:Ne}),y.jsx(h0e,{isOpen:Y,onOpenChange:X,cloneRepoUrl:ae,setCloneRepoUrl:G,cloneBranch:Q,setCloneBranch:ne,isCloning:de,onSubmitClone:gt,currentPath:Me}),y.jsx(p0e,{isOpen:ve,onOpenChange:Pe,commitPath:Fe,commitMessage:Te,setCommitMessage:Ue,isCommitting:Ve,onSubmitCommit:Gt})]})});_C.displayName="FileManager";const m0e=({vfsKey:e,selectedItemType:t})=>e==="orphan"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(j3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Shared VFS:"})," All chats ",y.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(j3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(a0,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null;function g0e(){const e=ta.getState().registerPromptControl,t=ta.getState().registerChatControl,n=()=>{const{toggleChatControlPanel:a,isChatControlPanelOpen:i}=ui.getState(),o=mo.getState().enableVfs,s=i.vfs??!1;return o?y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"outline",size:"icon",className:Ht("h-8 w-8",s&&"bg-primary/10 text-primary"),onClick:()=>a("vfs"),"aria-label":"Toggle Virtual File System",children:y.jsx(w7,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Virtual Filesystem"})]})}):null},r=()=>{const{vfsKey:a}=mo.getState(),{selectedItemType:i}=Cr.getState();return y.jsxs("div",{className:"flex flex-col h-full w-[450px] border-l border-border bg-card",children:[y.jsx(m0e,{vfsKey:a,selectedItemType:i}),y.jsx(_C,{})]})};e({id:"core-vfs-prompt-trigger",order:20,show:()=>mo.getState().enableVfs,triggerRenderer:()=>wt.createElement(n),getParameters:void 0,getMetadata:void 0,clearOnSubmit:void 0}),t({id:"core-vfs-panel-trigger",panel:"drawer_right",order:10,show:()=>ui.getState().isChatControlPanelOpen.vfs??!1,renderer:()=>wt.createElement(r),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control")}function y0e(){const e=ta.getState().registerPromptControl,t=()=>{const{selectedItemId:n,selectedItemType:r,getConversationById:a,syncRepos:i,linkConversationToRepo:o,syncConversation:s,conversationSyncStatus:u}=Cr(Hn(O=>({selectedItemId:O.selectedItemId,selectedItemType:O.selectedItemType,getConversationById:O.getConversationById,syncRepos:O.syncRepos,linkConversationToRepo:O.linkConversationToRepo,syncConversation:O.syncConversation,conversationSyncStatus:O.conversationSyncStatus}))),c=Qn.getState().status==="streaming",[f,h]=L.useState(!1),[m,g]=L.useState(!1),v=r==="conversation"&&n?a(n):null,w=(v==null?void 0:v.syncRepoId)??null,_=v?u[v.id]:"idle",x=wt.useMemo(()=>new Map(i.map(O=>[O.id,O.name])),[i]),S=w?x.get(w):void 0,E=L.useCallback(async O=>{if(!v)return;h(!0);const N=O==="none"?null:O;await o(v.id,N),h(!1)},[v,o]),A=L.useCallback(async()=>{!v||!w||(g(!0),await s(v.id),g(!1))},[v,w,s]),k=R5(_,S),D=!w||m||f||c||_==="syncing";return r!=="conversation"?null:y.jsxs(cC,{children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(dC,{asChild:!0,children:y.jsx(Lt,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:c||f||m,"aria-label":"Configure Git Sync",children:_==="syncing"||m||f?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(tm,{className:"h-4 w-4"})})})}),y.jsx(Nn,{side:"top",children:w?`Sync Status: ${_}`:"Link to Sync Repo"})]})}),y.jsxs(fC,{className:"w-64 p-4 space-y-3",align:"start",children:[y.jsx(dn,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),y.jsxs(vd,{value:w??"none",onValueChange:E,disabled:f||m||c,children:[y.jsx(_d,{id:"sync-repo-select",className:"w-full h-9",children:y.jsx(wd,{placeholder:"Select repository..."})}),y.jsxs(xd,{children:[y.jsx(Gi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),i.map(O=>y.jsx(Gi,{value:O.id,children:O.name},O.id))]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",k||"Not Linked"]}),y.jsxs(Lt,{size:"sm",variant:"outline",onClick:A,disabled:D,className:"h-8",children:[m||_==="syncing"?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(d6,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};e({id:"core-git-sync",order:40,triggerRenderer:()=>wt.createElement(t),show:()=>Cr.getState().syncRepos.length>0}),console.log("[Function] Registered Core Git Sync Control")}const b0e=F.object({path:F.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),v0e=F.object({path:F.string().describe("The path of the file to read within the VFS."),encoding:F.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),w0e=F.object({path:F.string().describe("The path where the file should be written."),content:F.string().describe("The content to write to the file."),encoding:F.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),_0e=F.object({path:F.string().describe("The path of the file or directory to delete."),recursive:F.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),x0e=F.object({path:F.string().describe("The path of the directory to create (including parents).")}),S0e=F.object({oldPath:F.string().describe("The current path of the item to rename."),newName:F.string().describe("The new name for the item.")});function E0e(){const e=ta.getState().registerTool,t=()=>{const u=mo.getState().currentParentId,c=mo.getState().nodes,f=mo.getState().rootId,h=u?c[u]:c[f||""];return h?h.path:"/"};console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:b0e},async({path:u})=>{const c=Wn(u||t());try{const f=await Nk(c);return{success:!0,path:c,entries:f.map(h=>({name:h.name,type:h.isDirectory?"folder":"file",size:h.size,lastModified:h.lastModified.toISOString()}))}}catch(f){return{success:!1,path:c,error:f.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:v0e},async({path:u,encoding:c})=>{const f=Wn(u);try{const h=await q0(f);let m;return c==="base64"?m=btoa(String.fromCharCode(...h)):m=new TextDecoder().decode(h),{success:!0,path:f,content:m,encoding:c}}catch(h){return{success:!1,path:f,error:h.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:w0e},async({path:u,content:c,encoding:f})=>{const h=Wn(u);try{let m;if(f==="base64"){const g=atob(c),v=g.length,w=new Uint8Array(v);for(let _=0;_<v;_++)w[_]=g.charCodeAt(_);m=w}else m=c;return await ow(h,m),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:_0e},async({path:u,recursive:c})=>{const f=Wn(u);try{return await Ik(f,c),{success:!0,path:f}}catch(h){return{success:!1,path:f,error:h.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:x0e},async({path:u})=>{const c=Wn(u);try{return await AM(c),{success:!0,path:c}}catch(f){return{success:!1,path:c,error:f.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:S0e},async({oldPath:u,newName:c})=>{const f=Wn(u),h=Wn(f.substring(0,f.lastIndexOf("/"))||"/"),m=js(h,c);try{return await RM(f,m),{success:!0,oldPath:f,newPath:m}}catch(g){return{success:!1,oldPath:f,newName:c,error:g.message}}}),console.log("[Function] Core VFS Tools Registered.")}const k0e=F.object({path:F.string().describe("The directory path within the VFS to initialize as a Git repository.")}),C0e=F.object({path:F.string().describe("The directory path of the Git repository within the VFS to commit."),message:F.string().describe("The commit message.")}),A0e=F.object({path:F.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:F.string().optional().describe("The branch name to pull.")}),T0e=F.object({path:F.string().describe("The directory path of the Git repository within the VFS to push."),branch:F.string().optional().describe("The branch name to push.")}),R0e=F.object({path:F.string().describe("The directory path of the Git repository within the VFS to check status.")});function N0e(){const e=ta.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:k0e},async({path:o})=>{try{return await kM(o),{success:!0,message:`Repository initialized at ${o}`}}catch(s){return{success:!1,error:s.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:C0e},async({path:o,message:s})=>{const u=qr.getState();if(!u.gitUserName||!u.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await Tk(o,s),{success:!0,message:`Changes committed in ${o}`}}catch(c){return{success:!1,error:c.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:A0e},async({path:o,branch:s})=>{try{return await iw(o,s||"main"),{success:!0,message:`Pulled changes for ${o}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:T0e},async({path:o,branch:s})=>{try{return await Rk(o,s||"main"),{success:!0,message:`Pushed changes for ${o}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:R0e},async({path:o})=>{try{return await CM(o),{success:!0,message:`Status checked for ${o}`}}catch(s){return{success:!1,error:s.message}}}),console.log("[Function] Core Git Tools Registered.")}const I0e=({className:e,localMaxSteps:t,setLocalMaxSteps:n})=>{const{selectedItemId:r,selectedItemType:a,getConversationById:i,updateCurrentConversationToolSettings:o}=Cr(Hn(E=>({selectedItemId:E.selectedItemId,selectedItemType:E.selectedItemType,getConversationById:E.getConversationById,updateCurrentConversationToolSettings:E.updateCurrentConversationToolSettings}))),s=ta(E=>E.tools),[u,c]=L.useState(""),[f,h]=L.useState(new Set);L.useEffect(()=>{var E;if(a==="conversation"&&r){const A=i(r),k=new Set(((E=A==null?void 0:A.metadata)==null?void 0:E.enabledTools)??[]);h(k)}else h(new Set)},[r,a,i]);const m=L.useMemo(()=>Object.entries(s).map(([E,{definition:A,modId:k}])=>({name:E,description:A.description??"No description provided.",modId:k})).sort((E,A)=>E.name.localeCompare(A.name)),[s]),g=L.useMemo(()=>{const E=u.trim().toLowerCase();return E?m.filter(A=>A.name.toLowerCase().includes(E)||A.description.toLowerCase().includes(E)||A.modId.toLowerCase().includes(E)):m},[m,u]),v=L.useCallback((E,A)=>{h(D=>{const O=new Set(D);return A?O.add(E):O.delete(E),O});const k=new Set(f);A?k.add(E):k.delete(E),o({enabledTools:Array.from(k)})},[f,o]),w=L.useCallback(E=>{const A=E?new Set(m.map(k=>k.name)):new Set;h(A),o({enabledTools:Array.from(A)})},[m,o]),_=E=>{const A=E.target.value;if(A===""){n(null);return}const k=parseInt(A,10);isNaN(k)?n(null):n(k)},x=t===null?"":String(t),S=a!=="conversation"||!r;return y.jsxs("div",{className:Ht("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[y.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),y.jsxs("div",{className:"relative",children:[y.jsx(f6,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(nr,{type:"search",placeholder:"Filter tools...",value:u,onChange:E=>c(E.target.value),className:"pl-8 h-9",disabled:S})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs(dn,{className:"text-xs text-muted-foreground",children:[g.length," tools shown (",f.size," enabled)"]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>w(!0),disabled:S||m.length===0,children:"Enable All"}),y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>w(!1),disabled:S||m.length===0||f.size===0,children:"Disable All"})]})]}),y.jsx(K0,{className:"h-56 border rounded-md p-2 bg-background/50",children:S?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):m.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):g.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):y.jsx("div",{className:"space-y-1",children:g.map(E=>y.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[y.jsx(jl,{id:`tool-switch-${E.name}`,checked:f.has(E.name),onCheckedChange:A=>v(E.name,A),className:"flex-shrink-0",disabled:S}),y.jsxs(dn,{htmlFor:`tool-switch-${E.name}`,className:Ht("text-sm font-normal flex-grow pl-2 space-y-0.5",S?"cursor-not-allowed":"cursor-pointer"),title:`${E.name} (from ${E.modId})`,children:[y.jsx("span",{className:"block font-medium",children:E.name}),y.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:E.description})]})]},E.name))})}),y.jsxs("div",{className:"pt-2",children:[y.jsx(dn,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),y.jsx(nr,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:x,onChange:_,className:"w-20 h-8 text-xs mt-1",placeholder:String(qr.getState().toolMaxSteps??5),disabled:S}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20)."})]})]})};function O0e(){const e=ta.getState().registerPromptControl,t=()=>{var v,w,_;const{selectedItemId:n,selectedItemType:r,getConversationById:a}=Cr(Hn(x=>({selectedItemId:x.selectedItemId,selectedItemType:x.selectedItemType,getConversationById:x.getConversationById}))),i=Qn.getState().status==="streaming",o=Object.keys(ta.getState().tools).length,s=r==="conversation"&&n?a(n):null,u=((w=(v=s==null?void 0:s.metadata)==null?void 0:v.enabledTools)==null?void 0:w.length)??0,c=((_=s==null?void 0:s.metadata)==null?void 0:_.toolMaxStepsOverride)??null,[f,h]=L.useState(c);wt.useEffect(()=>{h(c)},[c]);const m=u>0||c!==null,g=i||o===0||r!=="conversation";return y.jsxs(cC,{onOpenChange:x=>{x||Cr.getState().updateCurrentConversationToolSettings({toolMaxStepsOverride:f})},children:[y.jsx(jn,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(dC,{asChild:!0,children:y.jsx(Lt,{variant:m?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:g,"aria-label":"Configure Tools",children:y.jsx(cz,{className:"h-4 w-4"})})})}),y.jsx(Nn,{side:"top",children:g?"Tools unavailable (select conversation)":`Tools (${u} enabled)`})]})}),y.jsx(fC,{className:"w-auto p-0",align:"start",children:y.jsx(I0e,{localMaxSteps:f,setLocalMaxSteps:h})})]})};e({id:"core-tool-selector",order:50,triggerRenderer:()=>wt.createElement(t),getMetadata:()=>{var o,s,u;const{selectedItemId:n,selectedItemType:r,getConversationById:a}=Cr.getState(),i=r==="conversation"&&n?a(n):null;return{enabledTools:((o=i==null?void 0:i.metadata)==null?void 0:o.enabledTools)??[],...((s=i==null?void 0:i.metadata)==null?void 0:s.toolMaxStepsOverride)!==null&&{maxSteps:(u=i==null?void 0:i.metadata)==null?void 0:u.toolMaxStepsOverride}}},show:()=>Object.keys(ta.getState().tools).length>0}),console.log("[Function] Registered Core Tool Selector Control")}const xC=wt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const{dbProviderConfigs:a,globalModelSortOrder:i,isLoading:o}=fi(Hn(c=>({dbProviderConfigs:c.dbProviderConfigs,globalModelSortOrder:c.globalModelSortOrder,isLoading:c.isLoading}))),s=L.useMemo(()=>{const c=new Map,f=new Set;a.forEach(g=>{if(!g.isEnabled||!g.enabledModels)return;const v=g.fetchedModels??(g.type?fi.getState().getAllAvailableModelDefsForProvider(g.id):[]),w=new Map(v.map(_=>[_.id,_]));g.enabledModels.forEach(_=>{const x=Cf(g.id,_),S=w.get(_);S&&(f.add(x),c.set(x,{name:S.name||_,providerName:g.name}))})});const h=[],m=new Set;return i.forEach(g=>{if(f.has(g)){const v=c.get(g);v&&!m.has(g)&&(h.push({id:g,...v}),m.add(g))}}),f.forEach(g=>{if(!m.has(g)){const v=c.get(g);v&&h.push({id:g,...v})}}),h},[a,i]),u=L.useMemo(()=>s.find(c=>c.id===e),[s,e]);return o?y.jsx(Aa,{className:Ht("h-9 w-[200px]",r)}):y.jsxs(vd,{value:e??"none",onValueChange:c=>t(c==="none"?null:c),disabled:n||s.length===0,children:[y.jsx(_d,{className:Ht("w-auto h-9 text-sm",r),"aria-label":"Select AI Model",children:y.jsx(wd,{placeholder:"Select Model...",children:u?y.jsxs("span",{className:"truncate",children:[u.name," (",u.providerName,")"]}):y.jsx("span",{className:"text-muted-foreground",children:"Select Model..."})})}),y.jsx(xd,{children:s.length===0?y.jsx(Gi,{value:"none",disabled:!0,children:"No models enabled"}):s.map(c=>y.jsxs(Gi,{value:c.id,children:[c.name," (",c.providerName,")"]},c.id))})]})});xC.displayName="GlobalModelSelector";const j0e=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:o})=>y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),y.jsx(yw,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:s=>t(s.target.value||null),rows:6,disabled:o,className:"mt-1"}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:o||e===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{children:[y.jsx(dn,{children:"Default Model (Overrides Parent/Global)"}),y.jsx(xC,{value:n??i,onChange:r,disabled:o}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:o||n===null,children:"Use Inherited/Default"})]})]}),D0e=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:o,setTopK:s,presencePenalty:u,setPresencePenalty:c,frequencyPenalty:f,setFrequencyPenalty:h,localTemp:m,setLocalTemp:g,localTopP:v,setLocalTopP:w,localPresence:_,setLocalPresence:x,localFrequency:S,setLocalFrequency:E,effectiveTemperature:A,effectiveMaxTokens:k,effectiveTopP:D,effectiveTopK:O,effectivePresencePenalty:N,effectiveFrequencyPenalty:z,isSaving:H})=>{const ee=L.useCallback((Z,V)=>{const fe=V.target.value,ue=fe===""?null:parseInt(fe,10);(fe===""||!isNaN(ue)&&ue!==null)&&Z(ue)},[]),P=L.useCallback((Z,V)=>{Z(V[0])},[]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",m.toFixed(2),")"]}),y.jsx(ks,{id:"project-temperature",min:0,max:1,step:.01,value:[m],onValueChange:Z=>g(Z[0]),onValueCommit:Z=>P(t,Z),disabled:H}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:H||e===null,children:["Use Inherited/Default (",(A==null?void 0:A.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),y.jsx(ks,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:Z=>w(Z[0]),onValueCommit:Z=>P(i,Z),disabled:H}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:H||a===null,children:["Use Inherited/Default (",(D==null?void 0:D.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(nr,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${k??"Default"}`,value:n??"",onChange:Z=>ee(r,Z),min:"1",className:"h-8 text-xs",disabled:H}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:H||n===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),y.jsx(nr,{id:"project-top-k",type:"number",placeholder:`Inherited: ${O??"Default"}`,value:o??"",onChange:Z=>ee(s,Z),min:"1",className:"h-8 text-xs",disabled:H}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>s(null),disabled:H||o===null,children:"Use Inherited/Default"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",_.toFixed(2),")"]}),y.jsx(ks,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:Z=>x(Z[0]),onValueCommit:Z=>P(c,Z),disabled:H}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>c(null),disabled:H||u===null,children:["Use Inherited/Default (",(N==null?void 0:N.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",S.toFixed(2),")"]}),y.jsx(ks,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:Z=>E(Z[0]),onValueCommit:Z=>P(h,Z),disabled:H}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:H||f===null,children:["Use Inherited/Default (",(z==null?void 0:z.toFixed(2))??"N/A",")"]})]})]})},M0e=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var o;const i=((o=r.find(s=>s.id===n))==null?void 0:o.name)??"None";return y.jsx("div",{className:"space-y-4",children:y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),y.jsxs(vd,{value:e??"none",onValueChange:s=>t(s==="none"?null:s),disabled:a||r.length===0,children:[y.jsx(_d,{id:"project-sync-repo",children:y.jsx(wd,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),y.jsxs(xd,{children:[y.jsx(Gi,{value:"none",children:y.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(s=>y.jsx(Gi,{value:s.id,children:s.name},s.id))]})]}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},P0e=({projectId:e,projectName:t,isSaving:n})=>{const r=()=>{ct.info(`VFS clearing for project "${t}" is not yet implemented.`)},a=Ht("px-2.5 py-1 text-xs font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary/50","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx("div",{className:"flex flex-col h-full",children:y.jsxs(Iw,{defaultValue:"manage",className:"flex-grow flex flex-col",children:[y.jsxs(Ow,{className:"flex-shrink-0 gap-1 p-1 mb-3 h-auto justify-start bg-muted/50 rounded-md",children:[y.jsx(si,{value:"manage",className:a,children:"Manage Files"}),y.jsx(si,{value:"settings",className:a,children:"Settings & Danger Zone"})]}),y.jsx(li,{value:"manage",className:"flex-grow flex flex-col overflow-hidden data-[state=inactive]:hidden",children:y.jsx("div",{className:"flex-grow border rounded-md overflow-hidden",children:e?y.jsx(_C,{}):y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})}),y.jsxs(li,{value:"settings",className:"space-y-4 data-[state=inactive]:hidden",children:[y.jsxs("div",{children:[y.jsx(dn,{children:"Project Filesystem Info"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),y.jsx("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2",children:y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",y.jsx("code",{className:"text-xs",children:e||"N/A"})]})})]}),y.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[y.jsx(dn,{className:"text-destructive",children:"Danger Zone"}),y.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."}),y.jsxs(Lt,{variant:"destructive",size:"sm",onClick:r,disabled:n||!e,children:[y.jsx(Ff,{className:"h-4 w-4 mr-1"}),"Clear Project VFS (Not Implemented)"]})]})]})]})})},F0e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a,getEffectiveProjectSettings:i,syncRepos:o}=Cr(Hn(Ue=>({getProjectById:Ue.getProjectById,updateProject:Ue.updateProject,getEffectiveProjectSettings:Ue.getEffectiveProjectSettings,syncRepos:Ue.syncRepos}))),s=qr(Hn(Ue=>({globalSystemPrompt:Ue.globalSystemPrompt,temperature:Ue.temperature,maxTokens:Ue.maxTokens,topP:Ue.topP,topK:Ue.topK,presencePenalty:Ue.presencePenalty,frequencyPenalty:Ue.frequencyPenalty}))),u=fi(Ue=>Ue.selectedModelId),c=mo(Ue=>Ue.setVfsKey),[f,h]=L.useState(null),[m,g]=L.useState(null),[v,w]=L.useState(null),[_,x]=L.useState(null),[S,E]=L.useState(null),[A,k]=L.useState(null),[D,O]=L.useState(null),[N,z]=L.useState(null),[H,ee]=L.useState(null),[P,Z]=L.useState(.7),[V,fe]=L.useState(1),[ue,Y]=L.useState(0),[X,ae]=L.useState(0),[G,Q]=L.useState(!1),[ne,de]=L.useState("prompt"),_e=n?r(n):null,ve=n?i(n):null,Pe=L.useCallback(Ue=>{var Ee;if(!Ue)return null;const Ve=r(Ue);return Ve?((Ee=Ve.metadata)==null?void 0:Ee.syncRepoId)!==void 0?Ve.metadata.syncRepoId:Pe(Ve.parentId):null},[r]),Fe=n?Pe(n):null;L.useEffect(()=>{var Ue;if(e&&n){console.log(`[ProjectSettingsModal] Opening for ${n}. Setting VFS key.`),c(n);const Ve=r(n),Ee=i(n);h((Ve==null?void 0:Ve.systemPrompt)??null),g((Ve==null?void 0:Ve.modelId)??null),w((Ve==null?void 0:Ve.temperature)??null),x((Ve==null?void 0:Ve.maxTokens)??null),E((Ve==null?void 0:Ve.topP)??null),k((Ve==null?void 0:Ve.topK)??null),O((Ve==null?void 0:Ve.presencePenalty)??null),z((Ve==null?void 0:Ve.frequencyPenalty)??null),ee(((Ue=Ve==null?void 0:Ve.metadata)==null?void 0:Ue.syncRepoId)??null),Z((Ee==null?void 0:Ee.temperature)??s.temperature),fe((Ee==null?void 0:Ee.topP)??s.topP??1),Y((Ee==null?void 0:Ee.presencePenalty)??s.presencePenalty??0),ae((Ee==null?void 0:Ee.frequencyPenalty)??s.frequencyPenalty??0)}else e||(console.log("[ProjectSettingsModal] Closing. Setting VFS key to null."),c(null),h(null),g(null),w(null),x(null),E(null),k(null),O(null),z(null),ee(null))},[e,n,r,i,Pe,s,c]),L.useEffect(()=>Z(v??(ve==null?void 0:ve.temperature)??s.temperature),[v,ve,s.temperature]),L.useEffect(()=>fe(S??(ve==null?void 0:ve.topP)??s.topP??1),[S,ve,s.topP]),L.useEffect(()=>Y(D??(ve==null?void 0:ve.presencePenalty)??s.presencePenalty??0),[D,ve,s.presencePenalty]),L.useEffect(()=>ae(N??(ve==null?void 0:ve.frequencyPenalty)??s.frequencyPenalty??0),[N,ve,s.frequencyPenalty]);const Ie=async()=>{if(n){Q(!0);try{const Ue=_e!=null&&_e.parentId?i(_e.parentId):{systemPrompt:s.globalSystemPrompt,modelId:u,temperature:s.temperature,maxTokens:s.maxTokens,topP:s.topP,topK:s.topK,presencePenalty:s.presencePenalty,frequencyPenalty:s.frequencyPenalty},Ve=_e!=null&&_e.parentId?Pe(_e.parentId):null,Ee={},Ae={...(_e==null?void 0:_e.metadata)??{}};Ee.systemPrompt=f!==Ue.systemPrompt?f:void 0,Ee.modelId=m!==Ue.modelId?m:void 0,Ee.temperature=v!==Ue.temperature?v:void 0,Ee.maxTokens=_!==Ue.maxTokens?_:void 0,Ee.topP=S!==Ue.topP?S:void 0,Ee.topK=A!==Ue.topK?A:void 0,Ee.presencePenalty=D!==Ue.presencePenalty?D:void 0,Ee.frequencyPenalty=N!==Ue.frequencyPenalty?N:void 0,H!==Ve?Ae.syncRepoId=H:delete Ae.syncRepoId,Ee.metadata=Ae,await a(n,Ee),ct.success(`Project "${_e==null?void 0:_e.name}" settings updated.`),t()}catch(Ue){ct.error("Failed to save project settings."),console.error("Failed to save project settings:",Ue)}finally{Q(!1)}}},Te=Ht("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(xw,{open:e,onOpenChange:t,children:y.jsxs(Sw,{className:"sm:max-w-[800px] w-[90vw] h-[70vh] min-h-[500px] max-h-[80vh] flex flex-col p-0",children:[y.jsxs(Ew,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsxs(Cw,{children:["Project Settings: ",_e==null?void 0:_e.name]}),y.jsx(Aw,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),y.jsxs(Iw,{value:ne,onValueChange:de,className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(Ow,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(si,{value:"prompt",className:Te,children:"Prompt & Model"}),y.jsx(si,{value:"params",className:Te,children:"Parameters"}),y.jsx(si,{value:"sync",className:Te,children:"Sync"}),y.jsx(si,{value:"vfs",className:Te,children:"Filesystem"})]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(li,{value:"prompt",children:y.jsx(j0e,{systemPrompt:f,setSystemPrompt:h,modelId:m,setModelId:g,effectiveSystemPrompt:(ve==null?void 0:ve.systemPrompt)??s.globalSystemPrompt,effectiveModelId:(ve==null?void 0:ve.modelId)??u,isSaving:G})}),y.jsx(li,{value:"params",children:y.jsx(D0e,{temperature:v,setTemperature:w,maxTokens:_,setMaxTokens:x,topP:S,setTopP:E,topK:A,setTopK:k,presencePenalty:D,setPresencePenalty:O,frequencyPenalty:N,setFrequencyPenalty:z,localTemp:P,setLocalTemp:Z,localTopP:V,setLocalTopP:fe,localPresence:ue,setLocalPresence:Y,localFrequency:X,setLocalFrequency:ae,effectiveTemperature:(ve==null?void 0:ve.temperature)??s.temperature,effectiveMaxTokens:(ve==null?void 0:ve.maxTokens)??s.maxTokens,effectiveTopP:(ve==null?void 0:ve.topP)??s.topP,effectiveTopK:(ve==null?void 0:ve.topK)??s.topK,effectivePresencePenalty:(ve==null?void 0:ve.presencePenalty)??s.presencePenalty,effectiveFrequencyPenalty:(ve==null?void 0:ve.frequencyPenalty)??s.frequencyPenalty,isSaving:G})}),y.jsx(li,{value:"sync",children:y.jsx(M0e,{syncRepoId:H,setSyncRepoId:ee,effectiveSyncRepoId:Fe,syncRepos:o,isSaving:G})}),y.jsxs(li,{value:"vfs",className:"h-full",children:[" ",y.jsx(P0e,{projectId:n,projectName:(_e==null?void 0:_e.name)??null,isSaving:G})]})]})]}),y.jsxs(kw,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:[y.jsx(Lt,{variant:"outline",onClick:t,disabled:G,children:"Cancel"}),y.jsxs(Lt,{onClick:Ie,disabled:G,children:[G&&y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function L0e(){const e=ta.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=ui.getState();return y.jsx(F0e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>wt.createElement(t),order:1e3,status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}function $0e(){const e=ta.getState().registerPromptControl,t=()=>{const{selectModel:n}=fi.getState(),r=Qn.getState().status==="streaming",{modelId:a}=Wc.getState();return y.jsx(xC,{value:a,onChange:n,disabled:r})};e({id:"core-global-model-selector",order:10,status:()=>fi.getState().isLoading?"loading":"ready",triggerRenderer:()=>wt.createElement(t),getParameters:void 0,getMetadata:void 0,show:()=>!0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const B0e=()=>{const[e,t]=L.useState(!0),{selectedItemId:n,selectedItemType:r,loadSidebarItems:a,addConversation:i,selectItem:o,getConversationById:s,getEffectiveProjectSettings:u}=Cr(Hn(Y=>({selectedItemId:Y.selectedItemId,selectedItemType:Y.selectedItemType,loadSidebarItems:Y.loadSidebarItems,addConversation:Y.addConversation,selectItem:Y.selectItem,getProjectById:Y.getProjectById,getConversationById:Y.getConversationById,getEffectiveProjectSettings:Y.getEffectiveProjectSettings,isLoading:Y.isLoading}))),{interactions:c,status:f}=Qn(Hn(Y=>({interactions:Y.interactions,status:Y.status}))),{globalError:h,isSidebarCollapsed:m,isChatControlPanelOpen:g,isProjectSettingsModalOpen:v}=ui(Hn(Y=>({globalError:Y.globalError,isSidebarCollapsed:Y.isSidebarCollapsed,isChatControlPanelOpen:Y.isChatControlPanelOpen,isProjectSettingsModalOpen:Y.isProjectSettingsModalOpen}))),w=g.vfs??!1,_=ta(Hn(Y=>Object.values(Y.chatControls))),{loadDbMods:x,setLoadedMods:S}=e0(Hn(Y=>({loadDbMods:Y.loadDbMods,setLoadedMods:Y.setLoadedMods,isLoading:Y.isLoading}))),{loadInitialData:E}=fi(Hn(Y=>({loadInitialData:Y.loadInitialData,isLoading:Y.isLoading}))),{loadSettings:A}=qr(Hn(Y=>({loadSettings:Y.loadSettings}))),{setVfsKey:k}=mo(Hn(Y=>({setVfsKey:Y.setVfsKey}))),{initializePromptState:D,resetPromptState:O}=Wc(Hn(Y=>({initializePromptState:Y.initializePromptState,resetPromptState:Y.resetPromptState})));L.useEffect(()=>{let Y=!0;return(async()=>{var de;if(console.log("LiteChat: Starting initialization..."),t(!0),!Y||(await A(),console.log("LiteChat: Settings loaded."),!Y)||(await E(),console.log("LiteChat: Provider data loaded."),!Y)||(await a(),console.log("LiteChat: Sidebar items loaded."),!Y)||(console.log("LiteChat: Registering core controls and tools..."),rde(),gpe(),ype(),$0e(),Ope(),Dpe(),y0e(),E0e(),N0e(),O0e(),g0e(),L0e(),console.log("LiteChat: Core controls and tools registered."),!Y)||(await x(),console.log("LiteChat: DB Mods loaded."),!Y))return;try{const _e=e0.getState().dbMods;if(console.log(`LiteChat: Loading ${_e.length} mods...`),!Y)return;const ve=await Kce(_e);Y&&(S(ve),console.log(`LiteChat: ${ve.length} mods processed.`))}catch(_e){console.error("LiteChat: Failed to load mods:",_e)}const ae=Cr.getState().selectedItemId,G=Cr.getState().selectedItemType,Q=G==="project"?ae:G==="conversation"?((de=Cr.getState().getConversationById(ae))==null?void 0:de.projectId)??null:null,ne=u(Q);D(ne),console.log("LiteChat: Initial prompt state initialized.",ne),Y&&(console.log("LiteChat: Initialization complete."),t(!1))})(),()=>{Y=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[]),L.useEffect(()=>{var ae;if(e)return;const Y=r==="project"?n:r==="conversation"?((ae=s(n))==null?void 0:ae.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${n}, Type: ${r}). Calculating effective settings for Project ID: ${Y}`);const X=u(Y);D(X),console.log("[LiteChat Effect] Prompt state updated based on context change.",X)},[n,r,s,u,D,e]),L.useEffect(()=>{let Y=null;if(w){if(r==="project")Y=n;else if(r==="conversation"){const X=s(n);Y=(X==null?void 0:X.projectId)??"orphan"}else Y="orphan";console.log(`[LiteChat Effect] VFS Panel Opened/Context Changed. Setting target key: ${Y}`)}else Y=null,console.log("[LiteChat Effect] VFS Panel Closed. Setting target key: null");mo.getState().vfsKey!==Y&&k(Y)},[w,n,r,s,k]);const N=L.useCallback(async Y=>{var Te,Ue,Ve;let X=Cr.getState().selectedItemType==="conversation"?Cr.getState().selectedItemId:null;const ae=Cr.getState().selectedItemType==="project"?Cr.getState().selectedItemId:Cr.getState().selectedItemType==="conversation"?((Te=Cr.getState().getConversationById(Cr.getState().selectedItemId))==null?void 0:Te.projectId)??null:null,G=ui.getState().setFocusInputFlag,Q=Wc.getState(),ne=Q.modelId,de=u(ae).systemPrompt??void 0;if(!ne){ct.error("Please select a model before sending a message.");return}if(!X){console.log("LiteChat: No conversation selected, creating new one...");try{const Ee=await i({title:"New Chat",projectId:ae});await o(Ee,"conversation"),X=Cr.getState().selectedItemId,X!==Ee&&(console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),X=Ee),console.log(`LiteChat: New conversation created (${X}), selected, and InteractionStore synced.`),setTimeout(()=>G(!0),0)}catch(Ee){console.error("LiteChat: Failed to create new conversation",Ee),ct.error("Failed to start new chat.");return}}const ve=Qn.getState().interactions.filter(Ee=>Ee.status==="COMPLETED"&&Ee.type==="message.user_assistant"),Pe=Sy(ve);if(Y.content)Pe.push({role:"user",content:Y.content});else if((Ve=(Ue=Y.metadata)==null?void 0:Ue.attachedFiles)!=null&&Ve.length)Pe.push({role:"user",content:""});else{console.error("LiteChat: Attempting to submit with no content."),ct.error("Cannot send an empty message.");return}const Fe={temperature:Q.temperature,max_tokens:Q.maxTokens,top_p:Q.topP,top_k:Q.topK,presence_penalty:Q.presencePenalty,frequency_penalty:Q.frequencyPenalty,...Y.parameters??{}};Object.keys(Fe).forEach(Ee=>{(Fe[Ee]===null||Fe[Ee]===void 0)&&delete Fe[Ee]});const Ie={system:de,messages:Pe,parameters:Fe,metadata:{...Y.metadata,modelId:ne}};Ei.emit("prompt:finalised",{prompt:Ie}),console.log("LiteChat: Submitting prompt to AIService:",Ie);try{await eb.startInteraction(Ie,Y),console.log("LiteChat: AIService interaction started."),O();const Ee=u(ae);D(Ee)}catch(Ee){console.error("LiteChat: Error starting AI interaction:",Ee),ct.error(`Failed to start AI interaction: ${Ee instanceof Error?Ee.message:String(Ee)}`)}},[i,o,Sy,u,O,D]),z=L.useCallback(async Y=>{var Ee,Ae,B,Ce,Re;console.log(`LiteChat: Regenerating interaction ${Y}`);const X=Qn.getState(),ae=X.interactions.find(se=>se.id===Y);if(!ae||!ae.prompt){console.error(`LiteChat: Cannot regenerate - interaction ${Y} or its prompt not found.`),ct.error("Cannot regenerate: Original interaction data missing.");return}if(ae.type!=="message.user_assistant"){console.error(`LiteChat: Cannot regenerate non-user_assistant interaction: ${Y}`),ct.error("Can only regenerate from a user message interaction.");return}const G=s(ae.conversationId),Q=(G==null?void 0:G.projectId)??null,ne=Wc.getState(),de=ne.modelId,_e=u(Q).systemPrompt??void 0;if(!de){ct.error("Please select a model before regenerating.");return}const ve=ae.index,Pe=X.interactions.filter(se=>se.conversationId===ae.conversationId&&se.index<ve&&se.status==="COMPLETED"&&se.type==="message.user_assistant").sort((se,ie)=>se.index-ie.index),Fe=Sy(Pe);if((Ee=ae.prompt)!=null&&Ee.content&&typeof ae.prompt.content=="string")Fe.push({role:"user",content:ae.prompt.content});else if((Ce=(B=(Ae=ae.prompt)==null?void 0:Ae.metadata)==null?void 0:B.attachedFiles)!=null&&Ce.length)Fe.push({role:"user",content:""});else{console.error(`LiteChat: Cannot regenerate - missing or invalid user prompt content in interaction ${Y}.`),ct.error("Cannot regenerate: Original user prompt missing.");return}const Ie={temperature:ne.temperature,max_tokens:ne.maxTokens,top_p:ne.topP,top_k:ne.topK,presence_penalty:ne.presencePenalty,frequency_penalty:ne.frequencyPenalty,...ae.prompt.parameters??{}};Object.keys(Ie).forEach(se=>{(Ie[se]===null||Ie[se]===void 0)&&delete Ie[se]});const Te=((Re=ae.prompt.metadata)==null?void 0:Re.enabledTools)??[],Ue={...ae.prompt.metadata,regeneratedFromId:Y,modelId:de,attachedFiles:void 0,enabledTools:Te},Ve={system:_e,messages:Fe,parameters:Ie,metadata:Ue};Ei.emit("prompt:finalised",{prompt:Ve}),console.log(`LiteChat: Submitting regeneration request for ${Y}:`,Ve);try{await eb.startInteraction(Ve,ae.prompt),console.log(`LiteChat: AIService regeneration interaction started for ${Y}.`)}catch(se){console.error(`LiteChat: Error starting regeneration for ${Y}:`,se),ct.error("Failed to start regeneration.")}},[Sy,s,u]),H=L.useCallback(Y=>{console.log(`LiteChat: Stopping interaction ${Y}`),eb.stopInteraction(Y)},[]),ee=L.useMemo(()=>_.filter(Y=>(Y.panel??"main")==="sidebar"&&(Y.show?Y.show():!0)).sort((Y,X)=>(Y.order??1/0)-(X.order??1/0)),[_]),P=L.useMemo(()=>_.filter(Y=>Y.panel==="sidebar-footer"&&(Y.show?Y.show():!0)).sort((Y,X)=>(Y.order??1/0)-(X.order??1/0)),[_]),Z=L.useMemo(()=>_.filter(Y=>Y.panel==="header"&&(Y.show?Y.show():!0)).sort((Y,X)=>(Y.order??1/0)-(X.order??1/0)),[_]),V=L.useMemo(()=>{var Y;return(Y=_.find(X=>X.id==="core-settings-trigger"))==null?void 0:Y.settingsRenderer},[_]),fe=L.useMemo(()=>{var Y;return(Y=_.find(X=>X.id==="core-project-settings-trigger"))==null?void 0:Y.settingsRenderer},[_]),ue=r==="conversation"?n:null;return e?y.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx(Xn,{className:"h-12 w-12 animate-spin text-primary"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Ht("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:Ht("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",m?"w-16":"w-64"),children:[y.jsxs("div",{className:Ht("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:Ht(m?"hidden":"block"),children:y.jsx(Gp,{controls:ee,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:Ht(m?"block":"hidden"),children:y.jsx(Gp,{controls:ee,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:Ht("flex-shrink-0 border-t border-[--border] p-2",m?"flex flex-col items-center gap-2":"flex items-center justify-between"),children:y.jsx(Gp,{controls:P,panelId:"sidebar-footer",renderMode:m?"icon":"full",className:Ht("flex",m?"flex-col gap-2":"items-center gap-1")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(Gp,{controls:Z,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(sse,{conversationId:ue,interactions:c,onRegenerateInteraction:z,onStopInteraction:H,status:f,className:"flex-grow overflow-y-hidden p-4 space-y-4"}),h&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",h]}),y.jsx(NW,{InputAreaRenderer:T5,onSubmit:N,className:"border-t border-[--border] bg-card flex-shrink-0"})]}),y.jsx(Gp,{controls:_,panelId:"drawer_right",renderMode:"full"})]}),g.settingsModal&&V&&V(),v&&fe&&fe(),y.jsx(Qce,{richColors:!0,position:"bottom-left",closeButton:!0})]})};function z0e(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(B0e,{})})})}kz();function U0e({children:e}){const t=qr(n=>n.theme);return L.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}U$.createRoot(document.getElementById("root")).render(y.jsx(wt.StrictMode,{children:y.jsx(U0e,{children:y.jsx(z0e,{})})}));
