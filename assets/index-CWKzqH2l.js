const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dagre-OKDRZEBW-C3bnvnEB.js","assets/graph-DdjfL4LD.js","assets/_baseUniq-ClQO6G1M.js","assets/layout-u4X1in8y.js","assets/_basePickBy-Xiz3GUMb.js","assets/clone-Bvc86tR4.js","assets/c4Diagram-VJAJSXHY-CkCah2oN.js","assets/chunk-D6G4REZN-N1d3Fa5W.js","assets/flowDiagram-4HSFHLVR-DtSr6jRp.js","assets/chunk-RZ5BOZE2-VknXRjoG.js","assets/channel-WcwYCLkB.js","assets/erDiagram-Q7BY3M3F-CngxepI_.js","assets/gitGraphDiagram-7IBYFJ6S-HNkyM_RT.js","assets/chunk-4BMEZGHF-YWMRTE04.js","assets/chunk-XZIHB7SX-DfDwm-eW.js","assets/radar-MK3ICKWK-BCUMYEFN.js","assets/ganttDiagram-APWFNJXF-DccAdQ3m.js","assets/linear-Dq-rrMnH.js","assets/init-Gi6I4Gst.js","assets/infoDiagram-PH2N3AL5-BWR4b331.js","assets/pieDiagram-IB7DONF6-CdFoDSkm.js","assets/arc-xUlON6BW.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-7GDLP6J5-CijVQ8kn.js","assets/xychartDiagram-VJFVF3MP-BYBR3sW-.js","assets/requirementDiagram-KVF5MWMF-BxSEBNmY.js","assets/sequenceDiagram-X6HHIX6F-CsIMqAl7.js","assets/classDiagram-GIVACNV2-DHK--G6m.js","assets/chunk-A2AXSNBT-B5CqFnY2.js","assets/classDiagram-v2-COTLJTTW-DHK--G6m.js","assets/stateDiagram-DGXRK772-Ck0t385H.js","assets/chunk-AEK57VVT-qay5ovah.js","assets/stateDiagram-v2-YXO3MK2T-B_VjQhqr.js","assets/journeyDiagram-U35MCT3I-pO7qWRTq.js","assets/timeline-definition-BDJGKUSR-CrMO7Kvn.js","assets/mindmap-definition-ALO5MXBD-ChLr6thK.js","assets/cytoscape.esm-CG_zgrp1.js","assets/sankeyDiagram-QLVOVGJD-BTMjoiFE.js","assets/diagram-VNBRO52H-qmzVNPUI.js","assets/diagram-SSKATNLV-DdmkVTyx.js","assets/blockDiagram-JOT3LUYC-CmFRgFEb.js","assets/architectureDiagram-IEHRJDOE-BzLiCrrK.js"])))=>i.map(i=>d[i]);
var Rhe=Object.defineProperty;var Nhe=(e,t,n)=>t in e?Rhe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ve=(e,t,n)=>Nhe(e,typeof t!="symbol"?t+"":t,n);function Mhe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nN={exports:{}},fv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tB;function Ihe(){if(tB)return fv;tB=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:a,ref:i!==void 0?i:null,props:s}}return fv.Fragment=t,fv.jsx=n,fv.jsxs=n,fv}var nB;function jhe(){return nB||(nB=1,nN.exports=Ihe()),nN.exports}var p=jhe(),rN={exports:{}};function Ohe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var UW={exports:{}},gs=UW.exports={},Qc,eu;function $3(){throw new Error("setTimeout has not been defined")}function z3(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Qc=setTimeout:Qc=$3}catch{Qc=$3}try{typeof clearTimeout=="function"?eu=clearTimeout:eu=z3}catch{eu=z3}})();function qW(e){if(Qc===setTimeout)return setTimeout(e,0);if((Qc===$3||!Qc)&&setTimeout)return Qc=setTimeout,setTimeout(e,0);try{return Qc(e,0)}catch{try{return Qc.call(null,e,0)}catch{return Qc.call(this,e,0)}}}function Phe(e){if(eu===clearTimeout)return clearTimeout(e);if((eu===z3||!eu)&&clearTimeout)return eu=clearTimeout,clearTimeout(e);try{return eu(e)}catch{try{return eu.call(null,e)}catch{return eu.call(this,e)}}}var xd=[],h0=!1,Mp,c2=-1;function Dhe(){!h0||!Mp||(h0=!1,Mp.length?xd=Mp.concat(xd):c2=-1,xd.length&&VW())}function VW(){if(!h0){var e=qW(Dhe);h0=!0;for(var t=xd.length;t;){for(Mp=xd,xd=[];++c2<t;)Mp&&Mp[c2].run();c2=-1,t=xd.length}Mp=null,h0=!1,Phe(e)}}gs.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];xd.push(new WW(e,t)),xd.length===1&&!h0&&qW(VW)};function WW(e,t){this.fun=e,this.array=t}WW.prototype.run=function(){this.fun.apply(null,this.array)};gs.title="browser";gs.browser=!0;gs.env={};gs.argv=[];gs.version="";gs.versions={};function Vd(){}gs.on=Vd;gs.addListener=Vd;gs.once=Vd;gs.off=Vd;gs.removeListener=Vd;gs.removeAllListeners=Vd;gs.emit=Vd;gs.prependListener=Vd;gs.prependOnceListener=Vd;gs.listeners=function(e){return[]};gs.binding=function(e){throw new Error("process.binding is not supported")};gs.cwd=function(){return"/"};gs.chdir=function(e){throw new Error("process.chdir is not supported")};gs.umask=function(){return 0};var Fhe=UW.exports;const us=Ohe(Fhe);var Sr={},rB;function Lhe(){if(rB)return Sr;rB=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(W){return W===null||typeof W!="object"?null:(W=d&&W[d]||W["@@iterator"],typeof W=="function"?W:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function v(W,te,ee){this.props=W,this.context=te,this.refs=b,this.updater=ee||m}v.prototype.isReactComponent={},v.prototype.setState=function(W,te){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,te,"setState")},v.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function x(){}x.prototype=v.prototype;function w(W,te,ee){this.props=W,this.context=te,this.refs=b,this.updater=ee||m}var S=w.prototype=new x;S.constructor=w,y(S,v.prototype),S.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},A=Object.prototype.hasOwnProperty;function R(W,te,ee,re,de,oe){return ee=oe.ref,{$$typeof:e,type:W,key:te,ref:ee!==void 0?ee:null,props:oe}}function N(W,te){return R(W.type,te,void 0,void 0,void 0,W.props)}function I(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function O(W){var te={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ee){return te[ee]})}var L=/\/+/g;function P(W,te){return typeof W=="object"&&W!==null&&W.key!=null?O(""+W.key):te.toString(36)}function V(){}function F(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(V,V):(W.status="pending",W.then(function(te){W.status==="pending"&&(W.status="fulfilled",W.value=te)},function(te){W.status==="pending"&&(W.status="rejected",W.reason=te)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function J(W,te,ee,re,de){var oe=typeof W;(oe==="undefined"||oe==="boolean")&&(W=null);var Ie=!1;if(W===null)Ie=!0;else switch(oe){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(W.$$typeof){case e:case t:Ie=!0;break;case u:return Ie=W._init,J(Ie(W._payload),te,ee,re,de)}}if(Ie)return de=de(W),Ie=re===""?"."+P(W,0):re,C(de)?(ee="",Ie!=null&&(ee=Ie.replace(L,"$&/")+"/"),J(de,te,ee,"",function(Se){return Se})):de!=null&&(I(de)&&(de=N(de,ee+(de.key==null||W&&W.key===de.key?"":(""+de.key).replace(L,"$&/")+"/")+Ie)),te.push(de)),1;Ie=0;var je=re===""?".":re+":";if(C(W))for(var Me=0;Me<W.length;Me++)re=W[Me],oe=je+P(re,Me),Ie+=J(re,te,ee,oe,de);else if(Me=h(W),typeof Me=="function")for(W=Me.call(W),Me=0;!(re=W.next()).done;)re=re.value,oe=je+P(re,Me++),Ie+=J(re,te,ee,oe,de);else if(oe==="object"){if(typeof W.then=="function")return J(F(W),te,ee,re,de);throw te=String(W),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function U(W,te,ee){if(W==null)return W;var re=[],de=0;return J(W,re,"","",function(oe){return te.call(ee,oe,de++)}),re}function G(W){if(W._status===-1){var te=W._result;te=te(),te.then(function(ee){(W._status===0||W._status===-1)&&(W._status=1,W._result=ee)},function(ee){(W._status===0||W._status===-1)&&(W._status=2,W._result=ee)}),W._status===-1&&(W._status=0,W._result=te)}if(W._status===1)return W._result.default;throw W._result}var $=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(te))return}else if(typeof us=="object"&&typeof us.emit=="function"){us.emit("uncaughtException",W);return}console.error(W)};function ne(){}return Sr.Children={map:U,forEach:function(W,te,ee){U(W,function(){te.apply(this,arguments)},ee)},count:function(W){var te=0;return U(W,function(){te++}),te},toArray:function(W){return U(W,function(te){return te})||[]},only:function(W){if(!I(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Sr.Component=v,Sr.Fragment=n,Sr.Profiler=i,Sr.PureComponent=w,Sr.StrictMode=r,Sr.Suspense=l,Sr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Sr.__COMPILER_RUNTIME={__proto__:null,c:function(W){return k.H.useMemoCache(W)}},Sr.cache=function(W){return function(){return W.apply(null,arguments)}},Sr.cloneElement=function(W,te,ee){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var re=y({},W.props),de=W.key,oe=void 0;if(te!=null)for(Ie in te.ref!==void 0&&(oe=void 0),te.key!==void 0&&(de=""+te.key),te)!A.call(te,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&te.ref===void 0||(re[Ie]=te[Ie]);var Ie=arguments.length-2;if(Ie===1)re.children=ee;else if(1<Ie){for(var je=Array(Ie),Me=0;Me<Ie;Me++)je[Me]=arguments[Me+2];re.children=je}return R(W.type,de,void 0,void 0,oe,re)},Sr.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:s,_context:W},W},Sr.createElement=function(W,te,ee){var re,de={},oe=null;if(te!=null)for(re in te.key!==void 0&&(oe=""+te.key),te)A.call(te,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(de[re]=te[re]);var Ie=arguments.length-2;if(Ie===1)de.children=ee;else if(1<Ie){for(var je=Array(Ie),Me=0;Me<Ie;Me++)je[Me]=arguments[Me+2];de.children=je}if(W&&W.defaultProps)for(re in Ie=W.defaultProps,Ie)de[re]===void 0&&(de[re]=Ie[re]);return R(W,oe,void 0,void 0,null,de)},Sr.createRef=function(){return{current:null}},Sr.forwardRef=function(W){return{$$typeof:o,render:W}},Sr.isValidElement=I,Sr.lazy=function(W){return{$$typeof:u,_payload:{_status:-1,_result:W},_init:G}},Sr.memo=function(W,te){return{$$typeof:c,type:W,compare:te===void 0?null:te}},Sr.startTransition=function(W){var te=k.T,ee={};k.T=ee;try{var re=W(),de=k.S;de!==null&&de(ee,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(ne,$)}catch(oe){$(oe)}finally{k.T=te}},Sr.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Sr.use=function(W){return k.H.use(W)},Sr.useActionState=function(W,te,ee){return k.H.useActionState(W,te,ee)},Sr.useCallback=function(W,te){return k.H.useCallback(W,te)},Sr.useContext=function(W){return k.H.useContext(W)},Sr.useDebugValue=function(){},Sr.useDeferredValue=function(W,te){return k.H.useDeferredValue(W,te)},Sr.useEffect=function(W,te,ee){var re=k.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(W,te)},Sr.useId=function(){return k.H.useId()},Sr.useImperativeHandle=function(W,te,ee){return k.H.useImperativeHandle(W,te,ee)},Sr.useInsertionEffect=function(W,te){return k.H.useInsertionEffect(W,te)},Sr.useLayoutEffect=function(W,te){return k.H.useLayoutEffect(W,te)},Sr.useMemo=function(W,te){return k.H.useMemo(W,te)},Sr.useOptimistic=function(W,te){return k.H.useOptimistic(W,te)},Sr.useReducer=function(W,te,ee){return k.H.useReducer(W,te,ee)},Sr.useRef=function(W){return k.H.useRef(W)},Sr.useState=function(W){return k.H.useState(W)},Sr.useSyncExternalStore=function(W,te,ee){return k.H.useSyncExternalStore(W,te,ee)},Sr.useTransition=function(){return k.H.useTransition()},Sr.version="19.1.0",Sr}var iB;function Hw(){return iB||(iB=1,rN.exports=Lhe()),rN.exports}var T=Hw();const Ve=xa(T),HW=Mhe({__proto__:null,default:Ve},[T]);var iN={exports:{}},hv={},sN={exports:{}},aN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sB;function Bhe(){return sB||(sB=1,function(e){function t(U,G){var $=U.length;U.push(G);e:for(;0<$;){var ne=$-1>>>1,W=U[ne];if(0<i(W,G))U[ne]=G,U[$]=W,$=ne;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var G=U[0],$=U.pop();if($!==G){U[0]=$;e:for(var ne=0,W=U.length,te=W>>>1;ne<te;){var ee=2*(ne+1)-1,re=U[ee],de=ee+1,oe=U[de];if(0>i(re,$))de<W&&0>i(oe,re)?(U[ne]=oe,U[de]=$,ne=de):(U[ne]=re,U[ee]=$,ne=ee);else if(de<W&&0>i(oe,$))U[ne]=oe,U[de]=$,ne=de;else break e}}return G}function i(U,G){var $=U.sortIndex-G.sortIndex;return $!==0?$:U.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,m=!1,y=!1,b=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function C(U){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=U)r(c),G.sortIndex=G.expirationTime,t(l,G);else break;G=n(c)}}function k(U){if(b=!1,C(U),!y)if(n(l)!==null)y=!0,A||(A=!0,P());else{var G=n(c);G!==null&&J(k,G.startTime-U)}}var A=!1,R=-1,N=5,I=-1;function O(){return v?!0:!(e.unstable_now()-I<N)}function L(){if(v=!1,A){var U=e.unstable_now();I=U;var G=!0;try{e:{y=!1,b&&(b=!1,w(R),R=-1),m=!0;var $=h;try{t:{for(C(U),d=n(l);d!==null&&!(d.expirationTime>U&&O());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,h=d.priorityLevel;var W=ne(d.expirationTime<=U);if(U=e.unstable_now(),typeof W=="function"){d.callback=W,C(U),G=!0;break t}d===n(l)&&r(l),C(U)}else r(l);d=n(l)}if(d!==null)G=!0;else{var te=n(c);te!==null&&J(k,te.startTime-U),G=!1}}break e}finally{d=null,h=$,m=!1}G=void 0}}finally{G?P():A=!1}}}var P;if(typeof S=="function")P=function(){S(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,F=V.port2;V.port1.onmessage=L,P=function(){F.postMessage(null)}}else P=function(){x(L,0)};function J(U,G){R=x(function(){U(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(U){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var $=h;h=G;try{return U()}finally{h=$}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var $=h;h=U;try{return G()}finally{h=$}},e.unstable_scheduleCallback=function(U,G,$){var ne=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ne+$:ne):$=ne,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=$+W,U={id:u++,callback:G,priorityLevel:U,startTime:$,expirationTime:W,sortIndex:-1},$>ne?(U.sortIndex=$,t(c,U),n(l)===null&&U===n(c)&&(b?(w(R),R=-1):b=!0,J(k,$-ne))):(U.sortIndex=W,t(l,U),y||m||(y=!0,A||(A=!0,P()))),U},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(U){var G=h;return function(){var $=h;h=G;try{return U.apply(this,arguments)}finally{h=$}}}}(aN)),aN}var aB;function $he(){return aB||(aB=1,sN.exports=Bhe()),sN.exports}var oN={exports:{}},ka={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oB;function zhe(){if(oB)return ka;oB=1;var e=Hw();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:u}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ka.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ka.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return s(l,c,null,u)},ka.flushSync=function(l){var c=a.T,u=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=u,r.d.f()}},ka.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},ka.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ka.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,d=o(u,c.crossOrigin),h=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:h,fetchPriority:m}):u==="script"&&r.d.X(l,{crossOrigin:d,integrity:h,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ka.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},ka.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,d=o(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ka.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},ka.requestFormReset=function(l){r.d.r(l)},ka.unstable_batchedUpdates=function(l,c){return l(c)},ka.useFormState=function(l,c,u){return a.H.useFormState(l,c,u)},ka.useFormStatus=function(){return a.H.useHostTransitionStatus()},ka.version="19.1.0",ka}var lB;function GW(){if(lB)return oN.exports;lB=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),oN.exports=zhe(),oN.exports}var cB;function Uhe(){if(cB)return hv;cB=1;var e=$he(),t=Hw(),n=GW();function r(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var g=f,_=f;if(f.alternate)for(;g.return;)g=g.return;else{f=g;do g=f,(g.flags&4098)!==0&&(_=g.return),f=g.return;while(f)}return g.tag===3?_:null}function a(f){if(f.tag===13){var g=f.memoizedState;if(g===null&&(f=f.alternate,f!==null&&(g=f.memoizedState)),g!==null)return g.dehydrated}return null}function o(f){if(s(f)!==f)throw Error(r(188))}function l(f){var g=f.alternate;if(!g){if(g=s(f),g===null)throw Error(r(188));return g!==f?null:f}for(var _=f,E=g;;){var j=_.return;if(j===null)break;var q=j.alternate;if(q===null){if(E=j.return,E!==null){_=E;continue}break}if(j.child===q.child){for(q=j.child;q;){if(q===_)return o(j),f;if(q===E)return o(j),g;q=q.sibling}throw Error(r(188))}if(_.return!==E.return)_=j,E=q;else{for(var ue=!1,Ae=j.child;Ae;){if(Ae===_){ue=!0,_=j,E=q;break}if(Ae===E){ue=!0,E=j,_=q;break}Ae=Ae.sibling}if(!ue){for(Ae=q.child;Ae;){if(Ae===_){ue=!0,_=q,E=j;break}if(Ae===E){ue=!0,E=q,_=j;break}Ae=Ae.sibling}if(!ue)throw Error(r(189))}}if(_.alternate!==E)throw Error(r(190))}if(_.tag!==3)throw Error(r(188));return _.stateNode.current===_?f:g}function c(f){var g=f.tag;if(g===5||g===26||g===27||g===6)return f;for(f=f.child;f!==null;){if(g=c(f),g!==null)return g;f=f.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function P(f){return f===null||typeof f!="object"?null:(f=L&&f[L]||f["@@iterator"],typeof f=="function"?f:null)}var V=Symbol.for("react.client.reference");function F(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===V?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case y:return"Fragment";case v:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case A:return"SuspenseList";case I:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case m:return"Portal";case S:return(f.displayName||"Context")+".Provider";case w:return(f._context.displayName||"Context")+".Consumer";case C:var g=f.render;return f=f.displayName,f||(f=g.displayName||g.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case R:return g=f.displayName||null,g!==null?g:F(f.type)||"Memo";case N:g=f._payload,f=f._init;try{return F(f(g))}catch{}}return null}var J=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},ne=[],W=-1;function te(f){return{current:f}}function ee(f){0>W||(f.current=ne[W],ne[W]=null,W--)}function re(f,g){W++,ne[W]=f.current,f.current=g}var de=te(null),oe=te(null),Ie=te(null),je=te(null);function Me(f,g){switch(re(Ie,g),re(oe,f),re(de,null),g.nodeType){case 9:case 11:f=(f=g.documentElement)&&(f=f.namespaceURI)?RL(f):0;break;default:if(f=g.tagName,g=g.namespaceURI)g=RL(g),f=NL(g,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}ee(de),re(de,f)}function Se(){ee(de),ee(oe),ee(Ie)}function qe(f){f.memoizedState!==null&&re(je,f);var g=de.current,_=NL(g,f.type);g!==_&&(re(oe,f),re(de,_))}function Qe(f){oe.current===f&&(ee(de),ee(oe)),je.current===f&&(ee(je),ov._currentValue=$)}var We=Object.prototype.hasOwnProperty,Re=e.unstable_scheduleCallback,K=e.unstable_cancelCallback,ge=e.unstable_shouldYield,Te=e.unstable_requestPaint,ce=e.unstable_now,le=e.unstable_getCurrentPriorityLevel,ie=e.unstable_ImmediatePriority,Ee=e.unstable_UserBlockingPriority,Be=e.unstable_NormalPriority,Ce=e.unstable_LowPriority,ct=e.unstable_IdlePriority,Tt=e.log,ft=e.unstable_setDisableYieldValue,Pt=null,Ut=null;function Bt(f){if(typeof Tt=="function"&&ft(f),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Pt,f)}catch{}}var tn=Math.clz32?Math.clz32:Z,xe=Math.log,D=Math.LN2;function Z(f){return f>>>=0,f===0?32:31-(xe(f)/D|0)|0}var me=256,De=4194304;function we(f){var g=f&42;if(g!==0)return g;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function Ne(f,g,_){var E=f.pendingLanes;if(E===0)return 0;var j=0,q=f.suspendedLanes,ue=f.pingedLanes;f=f.warmLanes;var Ae=E&134217727;return Ae!==0?(E=Ae&~q,E!==0?j=we(E):(ue&=Ae,ue!==0?j=we(ue):_||(_=Ae&~f,_!==0&&(j=we(_))))):(Ae=E&~q,Ae!==0?j=we(Ae):ue!==0?j=we(ue):_||(_=E&~f,_!==0&&(j=we(_)))),j===0?0:g!==0&&g!==j&&(g&q)===0&&(q=j&-j,_=g&-g,q>=_||q===32&&(_&4194048)!==0)?g:j}function fe(f,g){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&g)===0}function bt(f,g){switch(f){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ot(){var f=me;return me<<=1,(me&4194048)===0&&(me=256),f}function B(){var f=De;return De<<=1,(De&62914560)===0&&(De=4194304),f}function $e(f){for(var g=[],_=0;31>_;_++)g.push(f);return g}function it(f,g){f.pendingLanes|=g,g!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function ye(f,g,_,E,j,q){var ue=f.pendingLanes;f.pendingLanes=_,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=_,f.entangledLanes&=_,f.errorRecoveryDisabledLanes&=_,f.shellSuspendCounter=0;var Ae=f.entanglements,Ke=f.expirationTimes,xt=f.hiddenUpdates;for(_=ue&~_;0<_;){var Ot=31-tn(_),Ft=1<<Ot;Ae[Ot]=0,Ke[Ot]=-1;var Ct=xt[Ot];if(Ct!==null)for(xt[Ot]=null,Ot=0;Ot<Ct.length;Ot++){var Et=Ct[Ot];Et!==null&&(Et.lane&=-536870913)}_&=~Ft}E!==0&&_e(f,E,0),q!==0&&j===0&&f.tag!==0&&(f.suspendedLanes|=q&~(ue&~g))}function _e(f,g,_){f.pendingLanes|=g,f.suspendedLanes&=~g;var E=31-tn(g);f.entangledLanes|=g,f.entanglements[E]=f.entanglements[E]|1073741824|_&4194090}function ze(f,g){var _=f.entangledLanes|=g;for(f=f.entanglements;_;){var E=31-tn(_),j=1<<E;j&g|f[E]&g&&(f[E]|=g),_&=~j}}function kt(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function he(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function Y(){var f=G.p;return f!==0?f:(f=window.event,f===void 0?32:YL(f.type))}function H(f,g){var _=G.p;try{return G.p=f,g()}finally{G.p=_}}var X=Math.random().toString(36).slice(2),be="__reactFiber$"+X,Oe="__reactProps$"+X,Ge="__reactContainer$"+X,wt="__reactEvents$"+X,en="__reactListeners$"+X,$n="__reactHandles$"+X,Xt="__reactResources$"+X,nn="__reactMarker$"+X;function un(f){delete f[be],delete f[Oe],delete f[wt],delete f[en],delete f[$n]}function pr(f){var g=f[be];if(g)return g;for(var _=f.parentNode;_;){if(g=_[Ge]||_[be]){if(_=g.alternate,g.child!==null||_!==null&&_.child!==null)for(f=OL(f);f!==null;){if(_=f[be])return _;f=OL(f)}return g}f=_,_=f.parentNode}return null}function Er(f){if(f=f[be]||f[Ge]){var g=f.tag;if(g===5||g===6||g===13||g===26||g===27||g===3)return f}return null}function ti(f){var g=f.tag;if(g===5||g===26||g===27||g===6)return f.stateNode;throw Error(r(33))}function ni(f){var g=f[Xt];return g||(g=f[Xt]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function vr(f){f[nn]=!0}var hn=new Set,et={};function Vt(f,g){pn(f,g),pn(f+"Capture",g)}function pn(f,g){for(et[f]=g,f=0;f<g.length;f++)hn.add(g[f])}var tr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ci={},Jr={};function Ms(f){return We.call(Jr,f)?!0:We.call(Ci,f)?!1:tr.test(f)?Jr[f]=!0:(Ci[f]=!0,!1)}function is(f,g,_){if(Ms(g))if(_===null)f.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":f.removeAttribute(g);return;case"boolean":var E=g.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){f.removeAttribute(g);return}}f.setAttribute(g,""+_)}}function Ba(f,g,_){if(_===null)f.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(g);return}f.setAttribute(g,""+_)}}function oa(f,g,_,E){if(E===null)f.removeAttribute(_);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(_);return}f.setAttributeNS(g,_,""+E)}}var zi,Oo;function hl(f){if(zi===void 0)try{throw Error()}catch(_){var g=_.stack.trim().match(/\n( *(at )?)/);zi=g&&g[1]||"",Oo=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zi+f+Oo}var ef=!1;function Hm(f,g){if(!f||ef)return"";ef=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(g){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(Et){var Ct=Et}Reflect.construct(f,[],Ft)}else{try{Ft.call()}catch(Et){Ct=Et}f.call(Ft.prototype)}}else{try{throw Error()}catch(Et){Ct=Et}(Ft=f())&&typeof Ft.catch=="function"&&Ft.catch(function(){})}}catch(Et){if(Et&&Ct&&typeof Et.stack=="string")return[Et.stack,Ct.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=E.DetermineComponentFrameRoot(),ue=q[0],Ae=q[1];if(ue&&Ae){var Ke=ue.split(`
`),xt=Ae.split(`
`);for(j=E=0;E<Ke.length&&!Ke[E].includes("DetermineComponentFrameRoot");)E++;for(;j<xt.length&&!xt[j].includes("DetermineComponentFrameRoot");)j++;if(E===Ke.length||j===xt.length)for(E=Ke.length-1,j=xt.length-1;1<=E&&0<=j&&Ke[E]!==xt[j];)j--;for(;1<=E&&0<=j;E--,j--)if(Ke[E]!==xt[j]){if(E!==1||j!==1)do if(E--,j--,0>j||Ke[E]!==xt[j]){var Ot=`
`+Ke[E].replace(" at new "," at ");return f.displayName&&Ot.includes("<anonymous>")&&(Ot=Ot.replace("<anonymous>",f.displayName)),Ot}while(1<=E&&0<=j);break}}}finally{ef=!1,Error.prepareStackTrace=_}return(_=f?f.displayName||f.name:"")?hl(_):""}function jr(f){switch(f.tag){case 26:case 27:case 5:return hl(f.type);case 16:return hl("Lazy");case 13:return hl("Suspense");case 19:return hl("SuspenseList");case 0:case 15:return Hm(f.type,!1);case 11:return Hm(f.type.render,!1);case 1:return Hm(f.type,!0);case 31:return hl("Activity");default:return""}}function cb(f){try{var g="";do g+=jr(f),f=f.return;while(f);return g}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function $a(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function ub(f){var g=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ki(f){var g=ub(f)?"checked":"value",_=Object.getOwnPropertyDescriptor(f.constructor.prototype,g),E=""+f[g];if(!f.hasOwnProperty(g)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var j=_.get,q=_.set;return Object.defineProperty(f,g,{configurable:!0,get:function(){return j.call(this)},set:function(ue){E=""+ue,q.call(this,ue)}}),Object.defineProperty(f,g,{enumerable:_.enumerable}),{getValue:function(){return E},setValue:function(ue){E=""+ue},stopTracking:function(){f._valueTracker=null,delete f[g]}}}}function jc(f){f._valueTracker||(f._valueTracker=ki(f))}function tf(f){if(!f)return!1;var g=f._valueTracker;if(!g)return!0;var _=g.getValue(),E="";return f&&(E=ub(f)?f.checked?"true":"false":f.value),f=E,f!==_?(g.setValue(f),!0):!1}function Zl(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var db=/[\n"\\]/g;function wa(f){return f.replace(db,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function nf(f,g,_,E,j,q,ue,Ae){f.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?f.type=ue:f.removeAttribute("type"),g!=null?ue==="number"?(g===0&&f.value===""||f.value!=g)&&(f.value=""+$a(g)):f.value!==""+$a(g)&&(f.value=""+$a(g)):ue!=="submit"&&ue!=="reset"||f.removeAttribute("value"),g!=null?rf(f,ue,$a(g)):_!=null?rf(f,ue,$a(_)):E!=null&&f.removeAttribute("value"),j==null&&q!=null&&(f.defaultChecked=!!q),j!=null&&(f.checked=j&&typeof j!="function"&&typeof j!="symbol"),Ae!=null&&typeof Ae!="function"&&typeof Ae!="symbol"&&typeof Ae!="boolean"?f.name=""+$a(Ae):f.removeAttribute("name")}function fb(f,g,_,E,j,q,ue,Ae){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(f.type=q),g!=null||_!=null){if(!(q!=="submit"&&q!=="reset"||g!=null))return;_=_!=null?""+$a(_):"",g=g!=null?""+$a(g):_,Ae||g===f.value||(f.value=g),f.defaultValue=g}E=E??j,E=typeof E!="function"&&typeof E!="symbol"&&!!E,f.checked=Ae?f.checked:!!E,f.defaultChecked=!!E,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(f.name=ue)}function rf(f,g,_){g==="number"&&Zl(f.ownerDocument)===f||f.defaultValue===""+_||(f.defaultValue=""+_)}function Fu(f,g,_,E){if(f=f.options,g){g={};for(var j=0;j<_.length;j++)g["$"+_[j]]=!0;for(_=0;_<f.length;_++)j=g.hasOwnProperty("$"+f[_].value),f[_].selected!==j&&(f[_].selected=j),j&&E&&(f[_].defaultSelected=!0)}else{for(_=""+$a(_),g=null,j=0;j<f.length;j++){if(f[j].value===_){f[j].selected=!0,E&&(f[j].defaultSelected=!0);return}g!==null||f[j].disabled||(g=f[j])}g!==null&&(g.selected=!0)}}function sf(f,g,_){if(g!=null&&(g=""+$a(g),g!==f.value&&(f.value=g),_==null)){f.defaultValue!==g&&(f.defaultValue=g);return}f.defaultValue=_!=null?""+$a(_):""}function hb(f,g,_,E){if(g==null){if(E!=null){if(_!=null)throw Error(r(92));if(J(E)){if(1<E.length)throw Error(r(93));E=E[0]}_=E}_==null&&(_=""),g=_}_=$a(g),f.defaultValue=_,E=f.textContent,E===_&&E!==""&&E!==null&&(f.value=E)}function af(f,g){if(g){var _=f.firstChild;if(_&&_===f.lastChild&&_.nodeType===3){_.nodeValue=g;return}}f.textContent=g}var qr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gm(f,g,_){var E=g.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?E?f.setProperty(g,""):g==="float"?f.cssFloat="":f[g]="":E?f.setProperty(g,_):typeof _!="number"||_===0||qr.has(g)?g==="float"?f.cssFloat=_:f[g]=(""+_).trim():f[g]=_+"px"}function J1(f,g,_){if(g!=null&&typeof g!="object")throw Error(r(62));if(f=f.style,_!=null){for(var E in _)!_.hasOwnProperty(E)||g!=null&&g.hasOwnProperty(E)||(E.indexOf("--")===0?f.setProperty(E,""):E==="float"?f.cssFloat="":f[E]="");for(var j in g)E=g[j],g.hasOwnProperty(j)&&_[j]!==E&&Gm(f,j,E)}else for(var q in g)g.hasOwnProperty(q)&&Gm(f,q,g[q])}function pb(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var za=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),of=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lu(f){return of.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var pl=null;function Km(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Bu=null,Pi=null;function Po(f){var g=Er(f);if(g&&(f=g.stateNode)){var _=f[Oe]||null;e:switch(f=g.stateNode,g.type){case"input":if(nf(f,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),g=_.name,_.type==="radio"&&g!=null){for(_=f;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+wa(""+g)+'"][type="radio"]'),g=0;g<_.length;g++){var E=_[g];if(E!==f&&E.form===f.form){var j=E[Oe]||null;if(!j)throw Error(r(90));nf(E,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(g=0;g<_.length;g++)E=_[g],E.form===f.form&&tf(E)}break e;case"textarea":sf(f,_.value,_.defaultValue);break e;case"select":g=_.value,g!=null&&Fu(f,!!_.multiple,g,!1)}}}var $u=!1;function lf(f,g,_){if($u)return f(g,_);$u=!0;try{var E=f(g);return E}finally{if($u=!1,(Bu!==null||Pi!==null)&&($_(),Bu&&(g=Bu,f=Pi,Pi=Bu=null,Po(g),f)))for(g=0;g<f.length;g++)Po(f[g])}}function zu(f,g){var _=f.stateNode;if(_===null)return null;var E=_[Oe]||null;if(E===null)return null;_=E[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(_&&typeof _!="function")throw Error(r(231,g,typeof _));return _}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mb=!1;if(Ws)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){mb=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{mb=!1}var ml=null,Ym=null,cf=null;function uf(){if(cf)return cf;var f,g=Ym,_=g.length,E,j="value"in ml?ml.value:ml.textContent,q=j.length;for(f=0;f<_&&g[f]===j[f];f++);var ue=_-f;for(E=1;E<=ue&&g[_-E]===j[q-E];E++);return cf=j.slice(f,1<E?1-E:void 0)}function df(f){var g=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&g===13&&(f=13)):f=g,f===10&&(f=13),32<=f||f===13?f:0}function Hh(){return!0}function Q1(){return!1}function bs(f){function g(_,E,j,q,ue){this._reactName=_,this._targetInst=j,this.type=E,this.nativeEvent=q,this.target=ue,this.currentTarget=null;for(var Ae in f)f.hasOwnProperty(Ae)&&(_=f[Ae],this[Ae]=_?_(q):q[Ae]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Hh:Q1,this.isPropagationStopped=Q1,this}return u(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=Hh)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=Hh)},persist:function(){},isPersistent:Hh}),g}var Uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zm=bs(Uu),Oc=u({},Uu,{view:0,detail:0}),Xm=bs(Oc),Gh,gb,Kh,Jm=u({},Oc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qu,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Kh&&(Kh&&f.type==="mousemove"?(Gh=f.screenX-Kh.screenX,gb=f.screenY-Kh.screenY):gb=Gh=0,Kh=f),Gh)},movementY:function(f){return"movementY"in f?f.movementY:gb}}),Qm=bs(Jm),yb=u({},Jm,{dataTransfer:0}),e_=bs(yb),eg=u({},Oc,{relatedTarget:0}),ff=bs(eg),tg=u({},Uu,{animationName:0,elapsedTime:0,pseudoElement:0}),t_=bs(tg),gA=u({},Uu,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),ng=bs(gA),bb=u({},Uu,{data:0}),rg=bs(bb),vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yh(f){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(f):(f=Hs[f])?!!g[f]:!1}function qu(){return Yh}var n_=u({},Oc,{key:function(f){if(f.key){var g=vb[f.key]||f.key;if(g!=="Unidentified")return g}return f.type==="keypress"?(f=df(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?xb[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qu,charCode:function(f){return f.type==="keypress"?df(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?df(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),ig=bs(n_),r_=u({},Jm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wb=bs(r_),sg=u({},Oc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qu}),_b=bs(sg),Vu=u({},Uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sb=bs(Vu),Cb=u({},Jm,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),ag=bs(Cb),kb=u({},Uu,{newState:0,oldState:0}),i_=bs(kb),yA=[9,13,27,32],Zh=Ws&&"CompositionEvent"in window,Pc=null;Ws&&"documentMode"in document&&(Pc=document.documentMode);var bA=Ws&&"TextEvent"in window&&!Pc,og=Ws&&(!Zh||Pc&&8<Pc&&11>=Pc),lg=" ",s_=!1;function Eb(f,g){switch(f){case"keyup":return yA.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a_(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Wu=!1;function o_(f,g){switch(f){case"compositionend":return a_(g);case"keypress":return g.which!==32?null:(s_=!0,lg);case"textInput":return f=g.data,f===lg&&s_?null:f;default:return null}}function vA(f,g){if(Wu)return f==="compositionend"||!Zh&&Eb(f,g)?(f=uf(),cf=Ym=ml=null,Wu=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return og&&g.locale!=="ko"?null:g.data;default:return null}}var l_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cg(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g==="input"?!!l_[f.type]:g==="textarea"}function Tb(f,g,_,E){Bu?Pi?Pi.push(E):Pi=[E]:Bu=E,g=H_(g,"onChange"),0<g.length&&(_=new Zm("onChange","change",null,_,E),f.push({event:_,listeners:g}))}var hf=null,Xh=null;function xA(f){CL(f,0)}function ug(f){var g=ti(f);if(tf(g))return f}function Jh(f,g){if(f==="change")return g}var gl=!1;if(Ws){var Di;if(Ws){var pf="oninput"in document;if(!pf){var Ua=document.createElement("div");Ua.setAttribute("oninput","return;"),pf=typeof Ua.oninput=="function"}Di=pf}else Di=!1;gl=Di&&(!document.documentMode||9<document.documentMode)}function c_(){hf&&(hf.detachEvent("onpropertychange",dg),Xh=hf=null)}function dg(f){if(f.propertyName==="value"&&ug(Xh)){var g=[];Tb(g,Xh,f,Km(f)),lf(xA,g)}}function u_(f,g,_){f==="focusin"?(c_(),hf=g,Xh=_,hf.attachEvent("onpropertychange",dg)):f==="focusout"&&c_()}function Hu(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return ug(Xh)}function Ab(f,g){if(f==="click")return ug(g)}function mf(f,g){if(f==="input"||f==="change")return ug(g)}function Dc(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var Sa=typeof Object.is=="function"?Object.is:Dc;function M(f,g){if(Sa(f,g))return!0;if(typeof f!="object"||f===null||typeof g!="object"||g===null)return!1;var _=Object.keys(f),E=Object.keys(g);if(_.length!==E.length)return!1;for(E=0;E<_.length;E++){var j=_[E];if(!We.call(g,j)||!Sa(f[j],g[j]))return!1}return!0}function z(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Q(f,g){var _=z(f);f=0;for(var E;_;){if(_.nodeType===3){if(E=f+_.textContent.length,f<=g&&E>=g)return{node:_,offset:g-f};f=E}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=z(_)}}function ae(f,g){return f&&g?f===g?!0:f&&f.nodeType===3?!1:g&&g.nodeType===3?ae(f,g.parentNode):"contains"in f?f.contains(g):f.compareDocumentPosition?!!(f.compareDocumentPosition(g)&16):!1:!1}function pe(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var g=Zl(f.document);g instanceof f.HTMLIFrameElement;){try{var _=typeof g.contentWindow.location.href=="string"}catch{_=!1}if(_)f=g.contentWindow;else break;g=Zl(f.document)}return g}function ke(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g&&(g==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||g==="textarea"||f.contentEditable==="true")}var Le=Ws&&"documentMode"in document&&11>=document.documentMode,He=null,nt=null,st=null,dt=!1;function Xe(f,g,_){var E=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;dt||He==null||He!==Zl(E)||(E=He,"selectionStart"in E&&ke(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),st&&M(st,E)||(st=E,E=H_(nt,"onSelect"),0<E.length&&(g=new Zm("onSelect","select",null,g,_),f.push({event:g,listeners:E}),g.target=He)))}function pt(f,g){var _={};return _[f.toLowerCase()]=g.toLowerCase(),_["Webkit"+f]="webkit"+g,_["Moz"+f]="moz"+g,_}var tt={animationend:pt("Animation","AnimationEnd"),animationiteration:pt("Animation","AnimationIteration"),animationstart:pt("Animation","AnimationStart"),transitionrun:pt("Transition","TransitionRun"),transitionstart:pt("Transition","TransitionStart"),transitioncancel:pt("Transition","TransitionCancel"),transitionend:pt("Transition","TransitionEnd")},ut={},mt={};Ws&&(mt=document.createElement("div").style,"AnimationEvent"in window||(delete tt.animationend.animation,delete tt.animationiteration.animation,delete tt.animationstart.animation),"TransitionEvent"in window||delete tt.transitionend.transition);function at(f){if(ut[f])return ut[f];if(!tt[f])return f;var g=tt[f],_;for(_ in g)if(g.hasOwnProperty(_)&&_ in mt)return ut[f]=g[_];return f}var _t=at("animationend"),At=at("animationiteration"),Rt=at("animationstart"),jt=at("transitionrun"),Yt=at("transitionstart"),rn=at("transitioncancel"),Ht=at("transitionend"),Jt=new Map,an="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");an.push("scrollEnd");function Gt(f,g){Jt.set(f,g),Vt(g,[f])}var mn=new WeakMap;function Fn(f,g){if(typeof f=="object"&&f!==null){var _=mn.get(f);return _!==void 0?_:(g={value:f,source:g,stack:cb(g)},mn.set(f,g),g)}return{value:f,source:g,stack:cb(g)}}var qn=[],fr=0,la=0;function nr(){for(var f=fr,g=la=fr=0;g<f;){var _=qn[g];qn[g++]=null;var E=qn[g];qn[g++]=null;var j=qn[g];qn[g++]=null;var q=qn[g];if(qn[g++]=null,E!==null&&j!==null){var ue=E.pending;ue===null?j.next=j:(j.next=ue.next,ue.next=j),E.pending=j}q!==0&&Gs(_,j,q)}}function ss(f,g,_,E){qn[fr++]=f,qn[fr++]=g,qn[fr++]=_,qn[fr++]=E,la|=E,f.lanes|=E,f=f.alternate,f!==null&&(f.lanes|=E)}function vs(f,g,_,E){return ss(f,g,_,E),yl(f)}function Xl(f,g){return ss(f,null,null,g),yl(f)}function Gs(f,g,_){f.lanes|=_;var E=f.alternate;E!==null&&(E.lanes|=_);for(var j=!1,q=f.return;q!==null;)q.childLanes|=_,E=q.alternate,E!==null&&(E.childLanes|=_),q.tag===22&&(f=q.stateNode,f===null||f._visibility&1||(j=!0)),f=q,q=q.return;return f.tag===3?(q=f.stateNode,j&&g!==null&&(j=31-tn(_),f=q.hiddenUpdates,E=f[j],E===null?f[j]=[g]:E.push(g),g.lane=_|536870912),q):null}function yl(f){if(50<Qb)throw Qb=0,ER=null,Error(r(185));for(var g=f.return;g!==null;)f=g,g=f.return;return f.tag===3?f.stateNode:null}var Fc={};function pfe(f,g,_,E){this.tag=f,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Do(f,g,_,E){return new pfe(f,g,_,E)}function wA(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Gu(f,g){var _=f.alternate;return _===null?(_=Do(f.tag,g,f.key,f.mode),_.elementType=f.elementType,_.type=f.type,_.stateNode=f.stateNode,_.alternate=f,f.alternate=_):(_.pendingProps=g,_.type=f.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=f.flags&65011712,_.childLanes=f.childLanes,_.lanes=f.lanes,_.child=f.child,_.memoizedProps=f.memoizedProps,_.memoizedState=f.memoizedState,_.updateQueue=f.updateQueue,g=f.dependencies,_.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},_.sibling=f.sibling,_.index=f.index,_.ref=f.ref,_.refCleanup=f.refCleanup,_}function cF(f,g){f.flags&=65011714;var _=f.alternate;return _===null?(f.childLanes=0,f.lanes=g,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=_.childLanes,f.lanes=_.lanes,f.child=_.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=_.memoizedProps,f.memoizedState=_.memoizedState,f.updateQueue=_.updateQueue,f.type=_.type,g=_.dependencies,f.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),f}function d_(f,g,_,E,j,q){var ue=0;if(E=f,typeof f=="function")wA(f)&&(ue=1);else if(typeof f=="string")ue=ghe(f,_,de.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case I:return f=Do(31,_,g,j),f.elementType=I,f.lanes=q,f;case y:return Qh(_.children,j,q,g);case b:ue=8,j|=24;break;case v:return f=Do(12,_,g,j|2),f.elementType=v,f.lanes=q,f;case k:return f=Do(13,_,g,j),f.elementType=k,f.lanes=q,f;case A:return f=Do(19,_,g,j),f.elementType=A,f.lanes=q,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case x:case S:ue=10;break e;case w:ue=9;break e;case C:ue=11;break e;case R:ue=14;break e;case N:ue=16,E=null;break e}ue=29,_=Error(r(130,f===null?"null":typeof f,"")),E=null}return g=Do(ue,_,g,j),g.elementType=f,g.type=E,g.lanes=q,g}function Qh(f,g,_,E){return f=Do(7,f,E,g),f.lanes=_,f}function _A(f,g,_){return f=Do(6,f,null,g),f.lanes=_,f}function SA(f,g,_){return g=Do(4,f.children!==null?f.children:[],f.key,g),g.lanes=_,g.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},g}var fg=[],hg=0,f_=null,h_=0,bl=[],vl=0,ep=null,Ku=1,Yu="";function tp(f,g){fg[hg++]=h_,fg[hg++]=f_,f_=f,h_=g}function uF(f,g,_){bl[vl++]=Ku,bl[vl++]=Yu,bl[vl++]=ep,ep=f;var E=Ku;f=Yu;var j=32-tn(E)-1;E&=~(1<<j),_+=1;var q=32-tn(g)+j;if(30<q){var ue=j-j%5;q=(E&(1<<ue)-1).toString(32),E>>=ue,j-=ue,Ku=1<<32-tn(g)+j|_<<j|E,Yu=q+f}else Ku=1<<q|_<<j|E,Yu=f}function CA(f){f.return!==null&&(tp(f,1),uF(f,1,0))}function kA(f){for(;f===f_;)f_=fg[--hg],fg[hg]=null,h_=fg[--hg],fg[hg]=null;for(;f===ep;)ep=bl[--vl],bl[vl]=null,Yu=bl[--vl],bl[vl]=null,Ku=bl[--vl],bl[vl]=null}var qa=null,Qi=null,ri=!1,np=null,Lc=!1,EA=Error(r(519));function rp(f){var g=Error(r(418,""));throw Mb(Fn(g,f)),EA}function dF(f){var g=f.stateNode,_=f.type,E=f.memoizedProps;switch(g[be]=f,g[Oe]=E,_){case"dialog":Pr("cancel",g),Pr("close",g);break;case"iframe":case"object":case"embed":Pr("load",g);break;case"video":case"audio":for(_=0;_<tv.length;_++)Pr(tv[_],g);break;case"source":Pr("error",g);break;case"img":case"image":case"link":Pr("error",g),Pr("load",g);break;case"details":Pr("toggle",g);break;case"input":Pr("invalid",g),fb(g,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),jc(g);break;case"select":Pr("invalid",g);break;case"textarea":Pr("invalid",g),hb(g,E.value,E.defaultValue,E.children),jc(g)}_=E.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||g.textContent===""+_||E.suppressHydrationWarning===!0||AL(g.textContent,_)?(E.popover!=null&&(Pr("beforetoggle",g),Pr("toggle",g)),E.onScroll!=null&&Pr("scroll",g),E.onScrollEnd!=null&&Pr("scrollend",g),E.onClick!=null&&(g.onclick=G_),g=!0):g=!1,g||rp(f)}function fF(f){for(qa=f.return;qa;)switch(qa.tag){case 5:case 13:Lc=!1;return;case 27:case 3:Lc=!0;return;default:qa=qa.return}}function Rb(f){if(f!==qa)return!1;if(!ri)return fF(f),ri=!0,!1;var g=f.tag,_;if((_=g!==3&&g!==27)&&((_=g===5)&&(_=f.type,_=!(_!=="form"&&_!=="button")||UR(f.type,f.memoizedProps)),_=!_),_&&Qi&&rp(f),fF(f),g===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));e:{for(f=f.nextSibling,g=0;f;){if(f.nodeType===8)if(_=f.data,_==="/$"){if(g===0){Qi=Ql(f.nextSibling);break e}g--}else _!=="$"&&_!=="$!"&&_!=="$?"||g++;f=f.nextSibling}Qi=null}}else g===27?(g=Qi,Mf(f.type)?(f=HR,HR=null,Qi=f):Qi=g):Qi=qa?Ql(f.stateNode.nextSibling):null;return!0}function Nb(){Qi=qa=null,ri=!1}function hF(){var f=np;return f!==null&&(uo===null?uo=f:uo.push.apply(uo,f),np=null),f}function Mb(f){np===null?np=[f]:np.push(f)}var TA=te(null),ip=null,Zu=null;function gf(f,g,_){re(TA,g._currentValue),g._currentValue=_}function Xu(f){f._currentValue=TA.current,ee(TA)}function AA(f,g,_){for(;f!==null;){var E=f.alternate;if((f.childLanes&g)!==g?(f.childLanes|=g,E!==null&&(E.childLanes|=g)):E!==null&&(E.childLanes&g)!==g&&(E.childLanes|=g),f===_)break;f=f.return}}function RA(f,g,_,E){var j=f.child;for(j!==null&&(j.return=f);j!==null;){var q=j.dependencies;if(q!==null){var ue=j.child;q=q.firstContext;e:for(;q!==null;){var Ae=q;q=j;for(var Ke=0;Ke<g.length;Ke++)if(Ae.context===g[Ke]){q.lanes|=_,Ae=q.alternate,Ae!==null&&(Ae.lanes|=_),AA(q.return,_,f),E||(ue=null);break e}q=Ae.next}}else if(j.tag===18){if(ue=j.return,ue===null)throw Error(r(341));ue.lanes|=_,q=ue.alternate,q!==null&&(q.lanes|=_),AA(ue,_,f),ue=null}else ue=j.child;if(ue!==null)ue.return=j;else for(ue=j;ue!==null;){if(ue===f){ue=null;break}if(j=ue.sibling,j!==null){j.return=ue.return,ue=j;break}ue=ue.return}j=ue}}function Ib(f,g,_,E){f=null;for(var j=g,q=!1;j!==null;){if(!q){if((j.flags&524288)!==0)q=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var ue=j.alternate;if(ue===null)throw Error(r(387));if(ue=ue.memoizedProps,ue!==null){var Ae=j.type;Sa(j.pendingProps.value,ue.value)||(f!==null?f.push(Ae):f=[Ae])}}else if(j===je.current){if(ue=j.alternate,ue===null)throw Error(r(387));ue.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(f!==null?f.push(ov):f=[ov])}j=j.return}f!==null&&RA(g,f,_,E),g.flags|=262144}function p_(f){for(f=f.firstContext;f!==null;){if(!Sa(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function sp(f){ip=f,Zu=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Ca(f){return pF(ip,f)}function m_(f,g){return ip===null&&sp(f),pF(f,g)}function pF(f,g){var _=g._currentValue;if(g={context:g,memoizedValue:_,next:null},Zu===null){if(f===null)throw Error(r(308));Zu=g,f.dependencies={lanes:0,firstContext:g},f.flags|=524288}else Zu=Zu.next=g;return _}var mfe=typeof AbortController<"u"?AbortController:function(){var f=[],g=this.signal={aborted:!1,addEventListener:function(_,E){f.push(E)}};this.abort=function(){g.aborted=!0,f.forEach(function(_){return _()})}},gfe=e.unstable_scheduleCallback,yfe=e.unstable_NormalPriority,Is={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function NA(){return{controller:new mfe,data:new Map,refCount:0}}function jb(f){f.refCount--,f.refCount===0&&gfe(yfe,function(){f.controller.abort()})}var Ob=null,MA=0,pg=0,mg=null;function bfe(f,g){if(Ob===null){var _=Ob=[];MA=0,pg=jR(),mg={status:"pending",value:void 0,then:function(E){_.push(E)}}}return MA++,g.then(mF,mF),g}function mF(){if(--MA===0&&Ob!==null){mg!==null&&(mg.status="fulfilled");var f=Ob;Ob=null,pg=0,mg=null;for(var g=0;g<f.length;g++)(0,f[g])()}}function vfe(f,g){var _=[],E={status:"pending",value:null,reason:null,then:function(j){_.push(j)}};return f.then(function(){E.status="fulfilled",E.value=g;for(var j=0;j<_.length;j++)(0,_[j])(g)},function(j){for(E.status="rejected",E.reason=j,j=0;j<_.length;j++)(0,_[j])(void 0)}),E}var gF=U.S;U.S=function(f,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&bfe(f,g),gF!==null&&gF(f,g)};var ap=te(null);function IA(){var f=ap.current;return f!==null?f:Mi.pooledCache}function g_(f,g){g===null?re(ap,ap.current):re(ap,g.pool)}function yF(){var f=IA();return f===null?null:{parent:Is._currentValue,pool:f}}var Pb=Error(r(460)),bF=Error(r(474)),y_=Error(r(542)),jA={then:function(){}};function vF(f){return f=f.status,f==="fulfilled"||f==="rejected"}function b_(){}function xF(f,g,_){switch(_=f[_],_===void 0?f.push(g):_!==g&&(g.then(b_,b_),g=_),g.status){case"fulfilled":return g.value;case"rejected":throw f=g.reason,_F(f),f;default:if(typeof g.status=="string")g.then(b_,b_);else{if(f=Mi,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=g,f.status="pending",f.then(function(E){if(g.status==="pending"){var j=g;j.status="fulfilled",j.value=E}},function(E){if(g.status==="pending"){var j=g;j.status="rejected",j.reason=E}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw f=g.reason,_F(f),f}throw Db=g,Pb}}var Db=null;function wF(){if(Db===null)throw Error(r(459));var f=Db;return Db=null,f}function _F(f){if(f===Pb||f===y_)throw Error(r(483))}var yf=!1;function OA(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function PA(f,g){f=f.updateQueue,g.updateQueue===f&&(g.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function bf(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function vf(f,g,_){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(hi&2)!==0){var j=E.pending;return j===null?g.next=g:(g.next=j.next,j.next=g),E.pending=g,g=yl(f),Gs(f,null,_),g}return ss(f,E,g,_),yl(f)}function Fb(f,g,_){if(g=g.updateQueue,g!==null&&(g=g.shared,(_&4194048)!==0)){var E=g.lanes;E&=f.pendingLanes,_|=E,g.lanes=_,ze(f,_)}}function DA(f,g){var _=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,_===E)){var j=null,q=null;if(_=_.firstBaseUpdate,_!==null){do{var ue={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};q===null?j=q=ue:q=q.next=ue,_=_.next}while(_!==null);q===null?j=q=g:q=q.next=g}else j=q=g;_={baseState:E.baseState,firstBaseUpdate:j,lastBaseUpdate:q,shared:E.shared,callbacks:E.callbacks},f.updateQueue=_;return}f=_.lastBaseUpdate,f===null?_.firstBaseUpdate=g:f.next=g,_.lastBaseUpdate=g}var FA=!1;function Lb(){if(FA){var f=mg;if(f!==null)throw f}}function Bb(f,g,_,E){FA=!1;var j=f.updateQueue;yf=!1;var q=j.firstBaseUpdate,ue=j.lastBaseUpdate,Ae=j.shared.pending;if(Ae!==null){j.shared.pending=null;var Ke=Ae,xt=Ke.next;Ke.next=null,ue===null?q=xt:ue.next=xt,ue=Ke;var Ot=f.alternate;Ot!==null&&(Ot=Ot.updateQueue,Ae=Ot.lastBaseUpdate,Ae!==ue&&(Ae===null?Ot.firstBaseUpdate=xt:Ae.next=xt,Ot.lastBaseUpdate=Ke))}if(q!==null){var Ft=j.baseState;ue=0,Ot=xt=Ke=null,Ae=q;do{var Ct=Ae.lane&-536870913,Et=Ct!==Ae.lane;if(Et?(Vr&Ct)===Ct:(E&Ct)===Ct){Ct!==0&&Ct===pg&&(FA=!0),Ot!==null&&(Ot=Ot.next={lane:0,tag:Ae.tag,payload:Ae.payload,callback:null,next:null});e:{var rr=f,Vn=Ae;Ct=g;var xi=_;switch(Vn.tag){case 1:if(rr=Vn.payload,typeof rr=="function"){Ft=rr.call(xi,Ft,Ct);break e}Ft=rr;break e;case 3:rr.flags=rr.flags&-65537|128;case 0:if(rr=Vn.payload,Ct=typeof rr=="function"?rr.call(xi,Ft,Ct):rr,Ct==null)break e;Ft=u({},Ft,Ct);break e;case 2:yf=!0}}Ct=Ae.callback,Ct!==null&&(f.flags|=64,Et&&(f.flags|=8192),Et=j.callbacks,Et===null?j.callbacks=[Ct]:Et.push(Ct))}else Et={lane:Ct,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},Ot===null?(xt=Ot=Et,Ke=Ft):Ot=Ot.next=Et,ue|=Ct;if(Ae=Ae.next,Ae===null){if(Ae=j.shared.pending,Ae===null)break;Et=Ae,Ae=Et.next,Et.next=null,j.lastBaseUpdate=Et,j.shared.pending=null}}while(!0);Ot===null&&(Ke=Ft),j.baseState=Ke,j.firstBaseUpdate=xt,j.lastBaseUpdate=Ot,q===null&&(j.shared.lanes=0),Tf|=ue,f.lanes=ue,f.memoizedState=Ft}}function SF(f,g){if(typeof f!="function")throw Error(r(191,f));f.call(g)}function CF(f,g){var _=f.callbacks;if(_!==null)for(f.callbacks=null,f=0;f<_.length;f++)SF(_[f],g)}var gg=te(null),v_=te(0);function kF(f,g){f=id,re(v_,f),re(gg,g),id=f|g.baseLanes}function LA(){re(v_,id),re(gg,gg.current)}function BA(){id=v_.current,ee(gg),ee(v_)}var xf=0,Ar=null,bi=null,xs=null,x_=!1,yg=!1,op=!1,w_=0,$b=0,bg=null,xfe=0;function as(){throw Error(r(321))}function $A(f,g){if(g===null)return!1;for(var _=0;_<g.length&&_<f.length;_++)if(!Sa(f[_],g[_]))return!1;return!0}function zA(f,g,_,E,j,q){return xf=q,Ar=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,U.H=f===null||f.memoizedState===null?l8:c8,op=!1,q=_(E,j),op=!1,yg&&(q=TF(g,_,E,j)),EF(f),q}function EF(f){U.H=T_;var g=bi!==null&&bi.next!==null;if(xf=0,xs=bi=Ar=null,x_=!1,$b=0,bg=null,g)throw Error(r(300));f===null||Ks||(f=f.dependencies,f!==null&&p_(f)&&(Ks=!0))}function TF(f,g,_,E){Ar=f;var j=0;do{if(yg&&(bg=null),$b=0,yg=!1,25<=j)throw Error(r(301));if(j+=1,xs=bi=null,f.updateQueue!=null){var q=f.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}U.H=Tfe,q=g(_,E)}while(yg);return q}function wfe(){var f=U.H,g=f.useState()[0];return g=typeof g.then=="function"?zb(g):g,f=f.useState()[0],(bi!==null?bi.memoizedState:null)!==f&&(Ar.flags|=1024),g}function UA(){var f=w_!==0;return w_=0,f}function qA(f,g,_){g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~_}function VA(f){if(x_){for(f=f.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}x_=!1}xf=0,xs=bi=Ar=null,yg=!1,$b=w_=0,bg=null}function lo(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xs===null?Ar.memoizedState=xs=f:xs=xs.next=f,xs}function ws(){if(bi===null){var f=Ar.alternate;f=f!==null?f.memoizedState:null}else f=bi.next;var g=xs===null?Ar.memoizedState:xs.next;if(g!==null)xs=g,bi=f;else{if(f===null)throw Ar.alternate===null?Error(r(467)):Error(r(310));bi=f,f={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},xs===null?Ar.memoizedState=xs=f:xs=xs.next=f}return xs}function WA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zb(f){var g=$b;return $b+=1,bg===null&&(bg=[]),f=xF(bg,f,g),g=Ar,(xs===null?g.memoizedState:xs.next)===null&&(g=g.alternate,U.H=g===null||g.memoizedState===null?l8:c8),f}function __(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return zb(f);if(f.$$typeof===S)return Ca(f)}throw Error(r(438,String(f)))}function HA(f){var g=null,_=Ar.updateQueue;if(_!==null&&(g=_.memoCache),g==null){var E=Ar.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(g={data:E.data.map(function(j){return j.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),_===null&&(_=WA(),Ar.updateQueue=_),_.memoCache=g,_=g.data[g.index],_===void 0)for(_=g.data[g.index]=Array(f),E=0;E<f;E++)_[E]=O;return g.index++,_}function Ju(f,g){return typeof g=="function"?g(f):g}function S_(f){var g=ws();return GA(g,bi,f)}function GA(f,g,_){var E=f.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=_;var j=f.baseQueue,q=E.pending;if(q!==null){if(j!==null){var ue=j.next;j.next=q.next,q.next=ue}g.baseQueue=j=q,E.pending=null}if(q=f.baseState,j===null)f.memoizedState=q;else{g=j.next;var Ae=ue=null,Ke=null,xt=g,Ot=!1;do{var Ft=xt.lane&-536870913;if(Ft!==xt.lane?(Vr&Ft)===Ft:(xf&Ft)===Ft){var Ct=xt.revertLane;if(Ct===0)Ke!==null&&(Ke=Ke.next={lane:0,revertLane:0,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null}),Ft===pg&&(Ot=!0);else if((xf&Ct)===Ct){xt=xt.next,Ct===pg&&(Ot=!0);continue}else Ft={lane:0,revertLane:xt.revertLane,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null},Ke===null?(Ae=Ke=Ft,ue=q):Ke=Ke.next=Ft,Ar.lanes|=Ct,Tf|=Ct;Ft=xt.action,op&&_(q,Ft),q=xt.hasEagerState?xt.eagerState:_(q,Ft)}else Ct={lane:Ft,revertLane:xt.revertLane,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null},Ke===null?(Ae=Ke=Ct,ue=q):Ke=Ke.next=Ct,Ar.lanes|=Ft,Tf|=Ft;xt=xt.next}while(xt!==null&&xt!==g);if(Ke===null?ue=q:Ke.next=Ae,!Sa(q,f.memoizedState)&&(Ks=!0,Ot&&(_=mg,_!==null)))throw _;f.memoizedState=q,f.baseState=ue,f.baseQueue=Ke,E.lastRenderedState=q}return j===null&&(E.lanes=0),[f.memoizedState,E.dispatch]}function KA(f){var g=ws(),_=g.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=f;var E=_.dispatch,j=_.pending,q=g.memoizedState;if(j!==null){_.pending=null;var ue=j=j.next;do q=f(q,ue.action),ue=ue.next;while(ue!==j);Sa(q,g.memoizedState)||(Ks=!0),g.memoizedState=q,g.baseQueue===null&&(g.baseState=q),_.lastRenderedState=q}return[q,E]}function AF(f,g,_){var E=Ar,j=ws(),q=ri;if(q){if(_===void 0)throw Error(r(407));_=_()}else _=g();var ue=!Sa((bi||j).memoizedState,_);ue&&(j.memoizedState=_,Ks=!0),j=j.queue;var Ae=MF.bind(null,E,j,f);if(Ub(2048,8,Ae,[f]),j.getSnapshot!==g||ue||xs!==null&&xs.memoizedState.tag&1){if(E.flags|=2048,vg(9,C_(),NF.bind(null,E,j,_,g),null),Mi===null)throw Error(r(349));q||(xf&124)!==0||RF(E,g,_)}return _}function RF(f,g,_){f.flags|=16384,f={getSnapshot:g,value:_},g=Ar.updateQueue,g===null?(g=WA(),Ar.updateQueue=g,g.stores=[f]):(_=g.stores,_===null?g.stores=[f]:_.push(f))}function NF(f,g,_,E){g.value=_,g.getSnapshot=E,IF(g)&&jF(f)}function MF(f,g,_){return _(function(){IF(g)&&jF(f)})}function IF(f){var g=f.getSnapshot;f=f.value;try{var _=g();return!Sa(f,_)}catch{return!0}}function jF(f){var g=Xl(f,2);g!==null&&zo(g,f,2)}function YA(f){var g=lo();if(typeof f=="function"){var _=f;if(f=_(),op){Bt(!0);try{_()}finally{Bt(!1)}}}return g.memoizedState=g.baseState=f,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:f},g}function OF(f,g,_,E){return f.baseState=_,GA(f,bi,typeof E=="function"?E:Ju)}function _fe(f,g,_,E,j){if(E_(f))throw Error(r(485));if(f=g.action,f!==null){var q={payload:j,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){q.listeners.push(ue)}};U.T!==null?_(!0):q.isTransition=!1,E(q),_=g.pending,_===null?(q.next=g.pending=q,PF(g,q)):(q.next=_.next,g.pending=_.next=q)}}function PF(f,g){var _=g.action,E=g.payload,j=f.state;if(g.isTransition){var q=U.T,ue={};U.T=ue;try{var Ae=_(j,E),Ke=U.S;Ke!==null&&Ke(ue,Ae),DF(f,g,Ae)}catch(xt){ZA(f,g,xt)}finally{U.T=q}}else try{q=_(j,E),DF(f,g,q)}catch(xt){ZA(f,g,xt)}}function DF(f,g,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(E){FF(f,g,E)},function(E){return ZA(f,g,E)}):FF(f,g,_)}function FF(f,g,_){g.status="fulfilled",g.value=_,LF(g),f.state=_,g=f.pending,g!==null&&(_=g.next,_===g?f.pending=null:(_=_.next,g.next=_,PF(f,_)))}function ZA(f,g,_){var E=f.pending;if(f.pending=null,E!==null){E=E.next;do g.status="rejected",g.reason=_,LF(g),g=g.next;while(g!==E)}f.action=null}function LF(f){f=f.listeners;for(var g=0;g<f.length;g++)(0,f[g])()}function BF(f,g){return g}function $F(f,g){if(ri){var _=Mi.formState;if(_!==null){e:{var E=Ar;if(ri){if(Qi){t:{for(var j=Qi,q=Lc;j.nodeType!==8;){if(!q){j=null;break t}if(j=Ql(j.nextSibling),j===null){j=null;break t}}q=j.data,j=q==="F!"||q==="F"?j:null}if(j){Qi=Ql(j.nextSibling),E=j.data==="F!";break e}}rp(E)}E=!1}E&&(g=_[0])}}return _=lo(),_.memoizedState=_.baseState=g,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:BF,lastRenderedState:g},_.queue=E,_=s8.bind(null,Ar,E),E.dispatch=_,E=YA(!1),q=tR.bind(null,Ar,!1,E.queue),E=lo(),j={state:g,dispatch:null,action:f,pending:null},E.queue=j,_=_fe.bind(null,Ar,j,q,_),j.dispatch=_,E.memoizedState=f,[g,_,!1]}function zF(f){var g=ws();return UF(g,bi,f)}function UF(f,g,_){if(g=GA(f,g,BF)[0],f=S_(Ju)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var E=zb(g)}catch(ue){throw ue===Pb?y_:ue}else E=g;g=ws();var j=g.queue,q=j.dispatch;return _!==g.memoizedState&&(Ar.flags|=2048,vg(9,C_(),Sfe.bind(null,j,_),null)),[E,q,f]}function Sfe(f,g){f.action=g}function qF(f){var g=ws(),_=bi;if(_!==null)return UF(g,_,f);ws(),g=g.memoizedState,_=ws();var E=_.queue.dispatch;return _.memoizedState=f,[g,E,!1]}function vg(f,g,_,E){return f={tag:f,create:_,deps:E,inst:g,next:null},g=Ar.updateQueue,g===null&&(g=WA(),Ar.updateQueue=g),_=g.lastEffect,_===null?g.lastEffect=f.next=f:(E=_.next,_.next=f,f.next=E,g.lastEffect=f),f}function C_(){return{destroy:void 0,resource:void 0}}function VF(){return ws().memoizedState}function k_(f,g,_,E){var j=lo();E=E===void 0?null:E,Ar.flags|=f,j.memoizedState=vg(1|g,C_(),_,E)}function Ub(f,g,_,E){var j=ws();E=E===void 0?null:E;var q=j.memoizedState.inst;bi!==null&&E!==null&&$A(E,bi.memoizedState.deps)?j.memoizedState=vg(g,q,_,E):(Ar.flags|=f,j.memoizedState=vg(1|g,q,_,E))}function WF(f,g){k_(8390656,8,f,g)}function HF(f,g){Ub(2048,8,f,g)}function GF(f,g){return Ub(4,2,f,g)}function KF(f,g){return Ub(4,4,f,g)}function YF(f,g){if(typeof g=="function"){f=f();var _=g(f);return function(){typeof _=="function"?_():g(null)}}if(g!=null)return f=f(),g.current=f,function(){g.current=null}}function ZF(f,g,_){_=_!=null?_.concat([f]):null,Ub(4,4,YF.bind(null,g,f),_)}function XA(){}function XF(f,g){var _=ws();g=g===void 0?null:g;var E=_.memoizedState;return g!==null&&$A(g,E[1])?E[0]:(_.memoizedState=[f,g],f)}function JF(f,g){var _=ws();g=g===void 0?null:g;var E=_.memoizedState;if(g!==null&&$A(g,E[1]))return E[0];if(E=f(),op){Bt(!0);try{f()}finally{Bt(!1)}}return _.memoizedState=[E,g],E}function JA(f,g,_){return _===void 0||(xf&1073741824)!==0?f.memoizedState=g:(f.memoizedState=_,f=tL(),Ar.lanes|=f,Tf|=f,_)}function QF(f,g,_,E){return Sa(_,g)?_:gg.current!==null?(f=JA(f,_,E),Sa(f,g)||(Ks=!0),f):(xf&42)===0?(Ks=!0,f.memoizedState=_):(f=tL(),Ar.lanes|=f,Tf|=f,g)}function e8(f,g,_,E,j){var q=G.p;G.p=q!==0&&8>q?q:8;var ue=U.T,Ae={};U.T=Ae,tR(f,!1,g,_);try{var Ke=j(),xt=U.S;if(xt!==null&&xt(Ae,Ke),Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var Ot=vfe(Ke,E);qb(f,g,Ot,$o(f))}else qb(f,g,E,$o(f))}catch(Ft){qb(f,g,{then:function(){},status:"rejected",reason:Ft},$o())}finally{G.p=q,U.T=ue}}function Cfe(){}function QA(f,g,_,E){if(f.tag!==5)throw Error(r(476));var j=t8(f).queue;e8(f,j,g,$,_===null?Cfe:function(){return n8(f),_(E)})}function t8(f){var g=f.memoizedState;if(g!==null)return g;g={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:$},next:null};var _={};return g.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:_},next:null},f.memoizedState=g,f=f.alternate,f!==null&&(f.memoizedState=g),g}function n8(f){var g=t8(f).next.queue;qb(f,g,{},$o())}function eR(){return Ca(ov)}function r8(){return ws().memoizedState}function i8(){return ws().memoizedState}function kfe(f){for(var g=f.return;g!==null;){switch(g.tag){case 24:case 3:var _=$o();f=bf(_);var E=vf(g,f,_);E!==null&&(zo(E,g,_),Fb(E,g,_)),g={cache:NA()},f.payload=g;return}g=g.return}}function Efe(f,g,_){var E=$o();_={lane:E,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null},E_(f)?a8(g,_):(_=vs(f,g,_,E),_!==null&&(zo(_,f,E),o8(_,g,E)))}function s8(f,g,_){var E=$o();qb(f,g,_,E)}function qb(f,g,_,E){var j={lane:E,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null};if(E_(f))a8(g,j);else{var q=f.alternate;if(f.lanes===0&&(q===null||q.lanes===0)&&(q=g.lastRenderedReducer,q!==null))try{var ue=g.lastRenderedState,Ae=q(ue,_);if(j.hasEagerState=!0,j.eagerState=Ae,Sa(Ae,ue))return ss(f,g,j,0),Mi===null&&nr(),!1}catch{}finally{}if(_=vs(f,g,j,E),_!==null)return zo(_,f,E),o8(_,g,E),!0}return!1}function tR(f,g,_,E){if(E={lane:2,revertLane:jR(),action:E,hasEagerState:!1,eagerState:null,next:null},E_(f)){if(g)throw Error(r(479))}else g=vs(f,_,E,2),g!==null&&zo(g,f,2)}function E_(f){var g=f.alternate;return f===Ar||g!==null&&g===Ar}function a8(f,g){yg=x_=!0;var _=f.pending;_===null?g.next=g:(g.next=_.next,_.next=g),f.pending=g}function o8(f,g,_){if((_&4194048)!==0){var E=g.lanes;E&=f.pendingLanes,_|=E,g.lanes=_,ze(f,_)}}var T_={readContext:Ca,use:__,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useLayoutEffect:as,useInsertionEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useSyncExternalStore:as,useId:as,useHostTransitionStatus:as,useFormState:as,useActionState:as,useOptimistic:as,useMemoCache:as,useCacheRefresh:as},l8={readContext:Ca,use:__,useCallback:function(f,g){return lo().memoizedState=[f,g===void 0?null:g],f},useContext:Ca,useEffect:WF,useImperativeHandle:function(f,g,_){_=_!=null?_.concat([f]):null,k_(4194308,4,YF.bind(null,g,f),_)},useLayoutEffect:function(f,g){return k_(4194308,4,f,g)},useInsertionEffect:function(f,g){k_(4,2,f,g)},useMemo:function(f,g){var _=lo();g=g===void 0?null:g;var E=f();if(op){Bt(!0);try{f()}finally{Bt(!1)}}return _.memoizedState=[E,g],E},useReducer:function(f,g,_){var E=lo();if(_!==void 0){var j=_(g);if(op){Bt(!0);try{_(g)}finally{Bt(!1)}}}else j=g;return E.memoizedState=E.baseState=j,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:j},E.queue=f,f=f.dispatch=Efe.bind(null,Ar,f),[E.memoizedState,f]},useRef:function(f){var g=lo();return f={current:f},g.memoizedState=f},useState:function(f){f=YA(f);var g=f.queue,_=s8.bind(null,Ar,g);return g.dispatch=_,[f.memoizedState,_]},useDebugValue:XA,useDeferredValue:function(f,g){var _=lo();return JA(_,f,g)},useTransition:function(){var f=YA(!1);return f=e8.bind(null,Ar,f.queue,!0,!1),lo().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,g,_){var E=Ar,j=lo();if(ri){if(_===void 0)throw Error(r(407));_=_()}else{if(_=g(),Mi===null)throw Error(r(349));(Vr&124)!==0||RF(E,g,_)}j.memoizedState=_;var q={value:_,getSnapshot:g};return j.queue=q,WF(MF.bind(null,E,q,f),[f]),E.flags|=2048,vg(9,C_(),NF.bind(null,E,q,_,g),null),_},useId:function(){var f=lo(),g=Mi.identifierPrefix;if(ri){var _=Yu,E=Ku;_=(E&~(1<<32-tn(E)-1)).toString(32)+_,g=""+g+"R"+_,_=w_++,0<_&&(g+="H"+_.toString(32)),g+=""}else _=xfe++,g=""+g+"r"+_.toString(32)+"";return f.memoizedState=g},useHostTransitionStatus:eR,useFormState:$F,useActionState:$F,useOptimistic:function(f){var g=lo();g.memoizedState=g.baseState=f;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=_,g=tR.bind(null,Ar,!0,_),_.dispatch=g,[f,g]},useMemoCache:HA,useCacheRefresh:function(){return lo().memoizedState=kfe.bind(null,Ar)}},c8={readContext:Ca,use:__,useCallback:XF,useContext:Ca,useEffect:HF,useImperativeHandle:ZF,useInsertionEffect:GF,useLayoutEffect:KF,useMemo:JF,useReducer:S_,useRef:VF,useState:function(){return S_(Ju)},useDebugValue:XA,useDeferredValue:function(f,g){var _=ws();return QF(_,bi.memoizedState,f,g)},useTransition:function(){var f=S_(Ju)[0],g=ws().memoizedState;return[typeof f=="boolean"?f:zb(f),g]},useSyncExternalStore:AF,useId:r8,useHostTransitionStatus:eR,useFormState:zF,useActionState:zF,useOptimistic:function(f,g){var _=ws();return OF(_,bi,f,g)},useMemoCache:HA,useCacheRefresh:i8},Tfe={readContext:Ca,use:__,useCallback:XF,useContext:Ca,useEffect:HF,useImperativeHandle:ZF,useInsertionEffect:GF,useLayoutEffect:KF,useMemo:JF,useReducer:KA,useRef:VF,useState:function(){return KA(Ju)},useDebugValue:XA,useDeferredValue:function(f,g){var _=ws();return bi===null?JA(_,f,g):QF(_,bi.memoizedState,f,g)},useTransition:function(){var f=KA(Ju)[0],g=ws().memoizedState;return[typeof f=="boolean"?f:zb(f),g]},useSyncExternalStore:AF,useId:r8,useHostTransitionStatus:eR,useFormState:qF,useActionState:qF,useOptimistic:function(f,g){var _=ws();return bi!==null?OF(_,bi,f,g):(_.baseState=f,[f,_.queue.dispatch])},useMemoCache:HA,useCacheRefresh:i8},xg=null,Vb=0;function A_(f){var g=Vb;return Vb+=1,xg===null&&(xg=[]),xF(xg,f,g)}function Wb(f,g){g=g.props.ref,f.ref=g!==void 0?g:null}function R_(f,g){throw g.$$typeof===d?Error(r(525)):(f=Object.prototype.toString.call(g),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":f)))}function u8(f){var g=f._init;return g(f._payload)}function d8(f){function g(ht,rt){if(f){var vt=ht.deletions;vt===null?(ht.deletions=[rt],ht.flags|=16):vt.push(rt)}}function _(ht,rt){if(!f)return null;for(;rt!==null;)g(ht,rt),rt=rt.sibling;return null}function E(ht){for(var rt=new Map;ht!==null;)ht.key!==null?rt.set(ht.key,ht):rt.set(ht.index,ht),ht=ht.sibling;return rt}function j(ht,rt){return ht=Gu(ht,rt),ht.index=0,ht.sibling=null,ht}function q(ht,rt,vt){return ht.index=vt,f?(vt=ht.alternate,vt!==null?(vt=vt.index,vt<rt?(ht.flags|=67108866,rt):vt):(ht.flags|=67108866,rt)):(ht.flags|=1048576,rt)}function ue(ht){return f&&ht.alternate===null&&(ht.flags|=67108866),ht}function Ae(ht,rt,vt,Dt){return rt===null||rt.tag!==6?(rt=_A(vt,ht.mode,Dt),rt.return=ht,rt):(rt=j(rt,vt),rt.return=ht,rt)}function Ke(ht,rt,vt,Dt){var yn=vt.type;return yn===y?Ot(ht,rt,vt.props.children,Dt,vt.key):rt!==null&&(rt.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===N&&u8(yn)===rt.type)?(rt=j(rt,vt.props),Wb(rt,vt),rt.return=ht,rt):(rt=d_(vt.type,vt.key,vt.props,null,ht.mode,Dt),Wb(rt,vt),rt.return=ht,rt)}function xt(ht,rt,vt,Dt){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==vt.containerInfo||rt.stateNode.implementation!==vt.implementation?(rt=SA(vt,ht.mode,Dt),rt.return=ht,rt):(rt=j(rt,vt.children||[]),rt.return=ht,rt)}function Ot(ht,rt,vt,Dt,yn){return rt===null||rt.tag!==7?(rt=Qh(vt,ht.mode,Dt,yn),rt.return=ht,rt):(rt=j(rt,vt),rt.return=ht,rt)}function Ft(ht,rt,vt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return rt=_A(""+rt,ht.mode,vt),rt.return=ht,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:return vt=d_(rt.type,rt.key,rt.props,null,ht.mode,vt),Wb(vt,rt),vt.return=ht,vt;case m:return rt=SA(rt,ht.mode,vt),rt.return=ht,rt;case N:var Dt=rt._init;return rt=Dt(rt._payload),Ft(ht,rt,vt)}if(J(rt)||P(rt))return rt=Qh(rt,ht.mode,vt,null),rt.return=ht,rt;if(typeof rt.then=="function")return Ft(ht,A_(rt),vt);if(rt.$$typeof===S)return Ft(ht,m_(ht,rt),vt);R_(ht,rt)}return null}function Ct(ht,rt,vt,Dt){var yn=rt!==null?rt.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return yn!==null?null:Ae(ht,rt,""+vt,Dt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case h:return vt.key===yn?Ke(ht,rt,vt,Dt):null;case m:return vt.key===yn?xt(ht,rt,vt,Dt):null;case N:return yn=vt._init,vt=yn(vt._payload),Ct(ht,rt,vt,Dt)}if(J(vt)||P(vt))return yn!==null?null:Ot(ht,rt,vt,Dt,null);if(typeof vt.then=="function")return Ct(ht,rt,A_(vt),Dt);if(vt.$$typeof===S)return Ct(ht,rt,m_(ht,vt),Dt);R_(ht,vt)}return null}function Et(ht,rt,vt,Dt,yn){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return ht=ht.get(vt)||null,Ae(rt,ht,""+Dt,yn);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case h:return ht=ht.get(Dt.key===null?vt:Dt.key)||null,Ke(rt,ht,Dt,yn);case m:return ht=ht.get(Dt.key===null?vt:Dt.key)||null,xt(rt,ht,Dt,yn);case N:var Ir=Dt._init;return Dt=Ir(Dt._payload),Et(ht,rt,vt,Dt,yn)}if(J(Dt)||P(Dt))return ht=ht.get(vt)||null,Ot(rt,ht,Dt,yn,null);if(typeof Dt.then=="function")return Et(ht,rt,vt,A_(Dt),yn);if(Dt.$$typeof===S)return Et(ht,rt,vt,m_(rt,Dt),yn);R_(rt,Dt)}return null}function rr(ht,rt,vt,Dt){for(var yn=null,Ir=null,Nn=rt,Gn=rt=0,Zs=null;Nn!==null&&Gn<vt.length;Gn++){Nn.index>Gn?(Zs=Nn,Nn=null):Zs=Nn.sibling;var Qr=Ct(ht,Nn,vt[Gn],Dt);if(Qr===null){Nn===null&&(Nn=Zs);break}f&&Nn&&Qr.alternate===null&&g(ht,Nn),rt=q(Qr,rt,Gn),Ir===null?yn=Qr:Ir.sibling=Qr,Ir=Qr,Nn=Zs}if(Gn===vt.length)return _(ht,Nn),ri&&tp(ht,Gn),yn;if(Nn===null){for(;Gn<vt.length;Gn++)Nn=Ft(ht,vt[Gn],Dt),Nn!==null&&(rt=q(Nn,rt,Gn),Ir===null?yn=Nn:Ir.sibling=Nn,Ir=Nn);return ri&&tp(ht,Gn),yn}for(Nn=E(Nn);Gn<vt.length;Gn++)Zs=Et(Nn,ht,Gn,vt[Gn],Dt),Zs!==null&&(f&&Zs.alternate!==null&&Nn.delete(Zs.key===null?Gn:Zs.key),rt=q(Zs,rt,Gn),Ir===null?yn=Zs:Ir.sibling=Zs,Ir=Zs);return f&&Nn.forEach(function(Df){return g(ht,Df)}),ri&&tp(ht,Gn),yn}function Vn(ht,rt,vt,Dt){if(vt==null)throw Error(r(151));for(var yn=null,Ir=null,Nn=rt,Gn=rt=0,Zs=null,Qr=vt.next();Nn!==null&&!Qr.done;Gn++,Qr=vt.next()){Nn.index>Gn?(Zs=Nn,Nn=null):Zs=Nn.sibling;var Df=Ct(ht,Nn,Qr.value,Dt);if(Df===null){Nn===null&&(Nn=Zs);break}f&&Nn&&Df.alternate===null&&g(ht,Nn),rt=q(Df,rt,Gn),Ir===null?yn=Df:Ir.sibling=Df,Ir=Df,Nn=Zs}if(Qr.done)return _(ht,Nn),ri&&tp(ht,Gn),yn;if(Nn===null){for(;!Qr.done;Gn++,Qr=vt.next())Qr=Ft(ht,Qr.value,Dt),Qr!==null&&(rt=q(Qr,rt,Gn),Ir===null?yn=Qr:Ir.sibling=Qr,Ir=Qr);return ri&&tp(ht,Gn),yn}for(Nn=E(Nn);!Qr.done;Gn++,Qr=vt.next())Qr=Et(Nn,ht,Gn,Qr.value,Dt),Qr!==null&&(f&&Qr.alternate!==null&&Nn.delete(Qr.key===null?Gn:Qr.key),rt=q(Qr,rt,Gn),Ir===null?yn=Qr:Ir.sibling=Qr,Ir=Qr);return f&&Nn.forEach(function(Ahe){return g(ht,Ahe)}),ri&&tp(ht,Gn),yn}function xi(ht,rt,vt,Dt){if(typeof vt=="object"&&vt!==null&&vt.type===y&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case h:e:{for(var yn=vt.key;rt!==null;){if(rt.key===yn){if(yn=vt.type,yn===y){if(rt.tag===7){_(ht,rt.sibling),Dt=j(rt,vt.props.children),Dt.return=ht,ht=Dt;break e}}else if(rt.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===N&&u8(yn)===rt.type){_(ht,rt.sibling),Dt=j(rt,vt.props),Wb(Dt,vt),Dt.return=ht,ht=Dt;break e}_(ht,rt);break}else g(ht,rt);rt=rt.sibling}vt.type===y?(Dt=Qh(vt.props.children,ht.mode,Dt,vt.key),Dt.return=ht,ht=Dt):(Dt=d_(vt.type,vt.key,vt.props,null,ht.mode,Dt),Wb(Dt,vt),Dt.return=ht,ht=Dt)}return ue(ht);case m:e:{for(yn=vt.key;rt!==null;){if(rt.key===yn)if(rt.tag===4&&rt.stateNode.containerInfo===vt.containerInfo&&rt.stateNode.implementation===vt.implementation){_(ht,rt.sibling),Dt=j(rt,vt.children||[]),Dt.return=ht,ht=Dt;break e}else{_(ht,rt);break}else g(ht,rt);rt=rt.sibling}Dt=SA(vt,ht.mode,Dt),Dt.return=ht,ht=Dt}return ue(ht);case N:return yn=vt._init,vt=yn(vt._payload),xi(ht,rt,vt,Dt)}if(J(vt))return rr(ht,rt,vt,Dt);if(P(vt)){if(yn=P(vt),typeof yn!="function")throw Error(r(150));return vt=yn.call(vt),Vn(ht,rt,vt,Dt)}if(typeof vt.then=="function")return xi(ht,rt,A_(vt),Dt);if(vt.$$typeof===S)return xi(ht,rt,m_(ht,vt),Dt);R_(ht,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint"?(vt=""+vt,rt!==null&&rt.tag===6?(_(ht,rt.sibling),Dt=j(rt,vt),Dt.return=ht,ht=Dt):(_(ht,rt),Dt=_A(vt,ht.mode,Dt),Dt.return=ht,ht=Dt),ue(ht)):_(ht,rt)}return function(ht,rt,vt,Dt){try{Vb=0;var yn=xi(ht,rt,vt,Dt);return xg=null,yn}catch(Nn){if(Nn===Pb||Nn===y_)throw Nn;var Ir=Do(29,Nn,null,ht.mode);return Ir.lanes=Dt,Ir.return=ht,Ir}finally{}}}var wg=d8(!0),f8=d8(!1),xl=te(null),Bc=null;function wf(f){var g=f.alternate;re(js,js.current&1),re(xl,f),Bc===null&&(g===null||gg.current!==null||g.memoizedState!==null)&&(Bc=f)}function h8(f){if(f.tag===22){if(re(js,js.current),re(xl,f),Bc===null){var g=f.alternate;g!==null&&g.memoizedState!==null&&(Bc=f)}}else _f()}function _f(){re(js,js.current),re(xl,xl.current)}function Qu(f){ee(xl),Bc===f&&(Bc=null),ee(js)}var js=te(0);function N_(f){for(var g=f;g!==null;){if(g.tag===13){var _=g.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||WR(_)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function nR(f,g,_,E){g=f.memoizedState,_=_(E,g),_=_==null?g:u({},g,_),f.memoizedState=_,f.lanes===0&&(f.updateQueue.baseState=_)}var rR={enqueueSetState:function(f,g,_){f=f._reactInternals;var E=$o(),j=bf(E);j.payload=g,_!=null&&(j.callback=_),g=vf(f,j,E),g!==null&&(zo(g,f,E),Fb(g,f,E))},enqueueReplaceState:function(f,g,_){f=f._reactInternals;var E=$o(),j=bf(E);j.tag=1,j.payload=g,_!=null&&(j.callback=_),g=vf(f,j,E),g!==null&&(zo(g,f,E),Fb(g,f,E))},enqueueForceUpdate:function(f,g){f=f._reactInternals;var _=$o(),E=bf(_);E.tag=2,g!=null&&(E.callback=g),g=vf(f,E,_),g!==null&&(zo(g,f,_),Fb(g,f,_))}};function p8(f,g,_,E,j,q,ue){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,q,ue):g.prototype&&g.prototype.isPureReactComponent?!M(_,E)||!M(j,q):!0}function m8(f,g,_,E){f=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(_,E),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(_,E),g.state!==f&&rR.enqueueReplaceState(g,g.state,null)}function lp(f,g){var _=g;if("ref"in g){_={};for(var E in g)E!=="ref"&&(_[E]=g[E])}if(f=f.defaultProps){_===g&&(_=u({},_));for(var j in f)_[j]===void 0&&(_[j]=f[j])}return _}var M_=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(g))return}else if(typeof us=="object"&&typeof us.emit=="function"){us.emit("uncaughtException",f);return}console.error(f)};function g8(f){M_(f)}function y8(f){console.error(f)}function b8(f){M_(f)}function I_(f,g){try{var _=f.onUncaughtError;_(g.value,{componentStack:g.stack})}catch(E){setTimeout(function(){throw E})}}function v8(f,g,_){try{var E=f.onCaughtError;E(_.value,{componentStack:_.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function iR(f,g,_){return _=bf(_),_.tag=3,_.payload={element:null},_.callback=function(){I_(f,g)},_}function x8(f){return f=bf(f),f.tag=3,f}function w8(f,g,_,E){var j=_.type.getDerivedStateFromError;if(typeof j=="function"){var q=E.value;f.payload=function(){return j(q)},f.callback=function(){v8(g,_,E)}}var ue=_.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(f.callback=function(){v8(g,_,E),typeof j!="function"&&(Af===null?Af=new Set([this]):Af.add(this));var Ae=E.stack;this.componentDidCatch(E.value,{componentStack:Ae!==null?Ae:""})})}function Afe(f,g,_,E,j){if(_.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(g=_.alternate,g!==null&&Ib(g,_,j,!0),_=xl.current,_!==null){switch(_.tag){case 13:return Bc===null?AR():_.alternate===null&&es===0&&(es=3),_.flags&=-257,_.flags|=65536,_.lanes=j,E===jA?_.flags|=16384:(g=_.updateQueue,g===null?_.updateQueue=new Set([E]):g.add(E),NR(f,E,j)),!1;case 22:return _.flags|=65536,E===jA?_.flags|=16384:(g=_.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([E])},_.updateQueue=g):(_=g.retryQueue,_===null?g.retryQueue=new Set([E]):_.add(E)),NR(f,E,j)),!1}throw Error(r(435,_.tag))}return NR(f,E,j),AR(),!1}if(ri)return g=xl.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=j,E!==EA&&(f=Error(r(422),{cause:E}),Mb(Fn(f,_)))):(E!==EA&&(g=Error(r(423),{cause:E}),Mb(Fn(g,_))),f=f.current.alternate,f.flags|=65536,j&=-j,f.lanes|=j,E=Fn(E,_),j=iR(f.stateNode,E,j),DA(f,j),es!==4&&(es=2)),!1;var q=Error(r(520),{cause:E});if(q=Fn(q,_),Jb===null?Jb=[q]:Jb.push(q),es!==4&&(es=2),g===null)return!0;E=Fn(E,_),_=g;do{switch(_.tag){case 3:return _.flags|=65536,f=j&-j,_.lanes|=f,f=iR(_.stateNode,E,f),DA(_,f),!1;case 1:if(g=_.type,q=_.stateNode,(_.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Af===null||!Af.has(q))))return _.flags|=65536,j&=-j,_.lanes|=j,j=x8(j),w8(j,f,_,E),DA(_,j),!1}_=_.return}while(_!==null);return!1}var _8=Error(r(461)),Ks=!1;function ca(f,g,_,E){g.child=f===null?f8(g,null,_,E):wg(g,f.child,_,E)}function S8(f,g,_,E,j){_=_.render;var q=g.ref;if("ref"in E){var ue={};for(var Ae in E)Ae!=="ref"&&(ue[Ae]=E[Ae])}else ue=E;return sp(g),E=zA(f,g,_,ue,q,j),Ae=UA(),f!==null&&!Ks?(qA(f,g,j),ed(f,g,j)):(ri&&Ae&&CA(g),g.flags|=1,ca(f,g,E,j),g.child)}function C8(f,g,_,E,j){if(f===null){var q=_.type;return typeof q=="function"&&!wA(q)&&q.defaultProps===void 0&&_.compare===null?(g.tag=15,g.type=q,k8(f,g,q,E,j)):(f=d_(_.type,null,E,g,g.mode,j),f.ref=g.ref,f.return=g,g.child=f)}if(q=f.child,!fR(f,j)){var ue=q.memoizedProps;if(_=_.compare,_=_!==null?_:M,_(ue,E)&&f.ref===g.ref)return ed(f,g,j)}return g.flags|=1,f=Gu(q,E),f.ref=g.ref,f.return=g,g.child=f}function k8(f,g,_,E,j){if(f!==null){var q=f.memoizedProps;if(M(q,E)&&f.ref===g.ref)if(Ks=!1,g.pendingProps=E=q,fR(f,j))(f.flags&131072)!==0&&(Ks=!0);else return g.lanes=f.lanes,ed(f,g,j)}return sR(f,g,_,E,j)}function E8(f,g,_){var E=g.pendingProps,j=E.children,q=f!==null?f.memoizedState:null;if(E.mode==="hidden"){if((g.flags&128)!==0){if(E=q!==null?q.baseLanes|_:_,f!==null){for(j=g.child=f.child,q=0;j!==null;)q=q|j.lanes|j.childLanes,j=j.sibling;g.childLanes=q&~E}else g.childLanes=0,g.child=null;return T8(f,g,E,_)}if((_&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},f!==null&&g_(g,q!==null?q.cachePool:null),q!==null?kF(g,q):LA(),h8(g);else return g.lanes=g.childLanes=536870912,T8(f,g,q!==null?q.baseLanes|_:_,_)}else q!==null?(g_(g,q.cachePool),kF(g,q),_f(),g.memoizedState=null):(f!==null&&g_(g,null),LA(),_f());return ca(f,g,j,_),g.child}function T8(f,g,_,E){var j=IA();return j=j===null?null:{parent:Is._currentValue,pool:j},g.memoizedState={baseLanes:_,cachePool:j},f!==null&&g_(g,null),LA(),h8(g),f!==null&&Ib(f,g,E,!0),null}function j_(f,g){var _=g.ref;if(_===null)f!==null&&f.ref!==null&&(g.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(r(284));(f===null||f.ref!==_)&&(g.flags|=4194816)}}function sR(f,g,_,E,j){return sp(g),_=zA(f,g,_,E,void 0,j),E=UA(),f!==null&&!Ks?(qA(f,g,j),ed(f,g,j)):(ri&&E&&CA(g),g.flags|=1,ca(f,g,_,j),g.child)}function A8(f,g,_,E,j,q){return sp(g),g.updateQueue=null,_=TF(g,E,_,j),EF(f),E=UA(),f!==null&&!Ks?(qA(f,g,q),ed(f,g,q)):(ri&&E&&CA(g),g.flags|=1,ca(f,g,_,q),g.child)}function R8(f,g,_,E,j){if(sp(g),g.stateNode===null){var q=Fc,ue=_.contextType;typeof ue=="object"&&ue!==null&&(q=Ca(ue)),q=new _(E,q),g.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=rR,g.stateNode=q,q._reactInternals=g,q=g.stateNode,q.props=E,q.state=g.memoizedState,q.refs={},OA(g),ue=_.contextType,q.context=typeof ue=="object"&&ue!==null?Ca(ue):Fc,q.state=g.memoizedState,ue=_.getDerivedStateFromProps,typeof ue=="function"&&(nR(g,_,ue,E),q.state=g.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(ue=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),ue!==q.state&&rR.enqueueReplaceState(q,q.state,null),Bb(g,E,q,j),Lb(),q.state=g.memoizedState),typeof q.componentDidMount=="function"&&(g.flags|=4194308),E=!0}else if(f===null){q=g.stateNode;var Ae=g.memoizedProps,Ke=lp(_,Ae);q.props=Ke;var xt=q.context,Ot=_.contextType;ue=Fc,typeof Ot=="object"&&Ot!==null&&(ue=Ca(Ot));var Ft=_.getDerivedStateFromProps;Ot=typeof Ft=="function"||typeof q.getSnapshotBeforeUpdate=="function",Ae=g.pendingProps!==Ae,Ot||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(Ae||xt!==ue)&&m8(g,q,E,ue),yf=!1;var Ct=g.memoizedState;q.state=Ct,Bb(g,E,q,j),Lb(),xt=g.memoizedState,Ae||Ct!==xt||yf?(typeof Ft=="function"&&(nR(g,_,Ft,E),xt=g.memoizedState),(Ke=yf||p8(g,_,Ke,E,Ct,xt,ue))?(Ot||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(g.flags|=4194308)):(typeof q.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=E,g.memoizedState=xt),q.props=E,q.state=xt,q.context=ue,E=Ke):(typeof q.componentDidMount=="function"&&(g.flags|=4194308),E=!1)}else{q=g.stateNode,PA(f,g),ue=g.memoizedProps,Ot=lp(_,ue),q.props=Ot,Ft=g.pendingProps,Ct=q.context,xt=_.contextType,Ke=Fc,typeof xt=="object"&&xt!==null&&(Ke=Ca(xt)),Ae=_.getDerivedStateFromProps,(xt=typeof Ae=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ue!==Ft||Ct!==Ke)&&m8(g,q,E,Ke),yf=!1,Ct=g.memoizedState,q.state=Ct,Bb(g,E,q,j),Lb();var Et=g.memoizedState;ue!==Ft||Ct!==Et||yf||f!==null&&f.dependencies!==null&&p_(f.dependencies)?(typeof Ae=="function"&&(nR(g,_,Ae,E),Et=g.memoizedState),(Ot=yf||p8(g,_,Ot,E,Ct,Et,Ke)||f!==null&&f.dependencies!==null&&p_(f.dependencies))?(xt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(E,Et,Ke),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(E,Et,Ke)),typeof q.componentDidUpdate=="function"&&(g.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof q.componentDidUpdate!="function"||ue===f.memoizedProps&&Ct===f.memoizedState||(g.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===f.memoizedProps&&Ct===f.memoizedState||(g.flags|=1024),g.memoizedProps=E,g.memoizedState=Et),q.props=E,q.state=Et,q.context=Ke,E=Ot):(typeof q.componentDidUpdate!="function"||ue===f.memoizedProps&&Ct===f.memoizedState||(g.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===f.memoizedProps&&Ct===f.memoizedState||(g.flags|=1024),E=!1)}return q=E,j_(f,g),E=(g.flags&128)!==0,q||E?(q=g.stateNode,_=E&&typeof _.getDerivedStateFromError!="function"?null:q.render(),g.flags|=1,f!==null&&E?(g.child=wg(g,f.child,null,j),g.child=wg(g,null,_,j)):ca(f,g,_,j),g.memoizedState=q.state,f=g.child):f=ed(f,g,j),f}function N8(f,g,_,E){return Nb(),g.flags|=256,ca(f,g,_,E),g.child}var aR={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oR(f){return{baseLanes:f,cachePool:yF()}}function lR(f,g,_){return f=f!==null?f.childLanes&~_:0,g&&(f|=wl),f}function M8(f,g,_){var E=g.pendingProps,j=!1,q=(g.flags&128)!==0,ue;if((ue=q)||(ue=f!==null&&f.memoizedState===null?!1:(js.current&2)!==0),ue&&(j=!0,g.flags&=-129),ue=(g.flags&32)!==0,g.flags&=-33,f===null){if(ri){if(j?wf(g):_f(),ri){var Ae=Qi,Ke;if(Ke=Ae){e:{for(Ke=Ae,Ae=Lc;Ke.nodeType!==8;){if(!Ae){Ae=null;break e}if(Ke=Ql(Ke.nextSibling),Ke===null){Ae=null;break e}}Ae=Ke}Ae!==null?(g.memoizedState={dehydrated:Ae,treeContext:ep!==null?{id:Ku,overflow:Yu}:null,retryLane:536870912,hydrationErrors:null},Ke=Do(18,null,null,0),Ke.stateNode=Ae,Ke.return=g,g.child=Ke,qa=g,Qi=null,Ke=!0):Ke=!1}Ke||rp(g)}if(Ae=g.memoizedState,Ae!==null&&(Ae=Ae.dehydrated,Ae!==null))return WR(Ae)?g.lanes=32:g.lanes=536870912,null;Qu(g)}return Ae=E.children,E=E.fallback,j?(_f(),j=g.mode,Ae=O_({mode:"hidden",children:Ae},j),E=Qh(E,j,_,null),Ae.return=g,E.return=g,Ae.sibling=E,g.child=Ae,j=g.child,j.memoizedState=oR(_),j.childLanes=lR(f,ue,_),g.memoizedState=aR,E):(wf(g),cR(g,Ae))}if(Ke=f.memoizedState,Ke!==null&&(Ae=Ke.dehydrated,Ae!==null)){if(q)g.flags&256?(wf(g),g.flags&=-257,g=uR(f,g,_)):g.memoizedState!==null?(_f(),g.child=f.child,g.flags|=128,g=null):(_f(),j=E.fallback,Ae=g.mode,E=O_({mode:"visible",children:E.children},Ae),j=Qh(j,Ae,_,null),j.flags|=2,E.return=g,j.return=g,E.sibling=j,g.child=E,wg(g,f.child,null,_),E=g.child,E.memoizedState=oR(_),E.childLanes=lR(f,ue,_),g.memoizedState=aR,g=j);else if(wf(g),WR(Ae)){if(ue=Ae.nextSibling&&Ae.nextSibling.dataset,ue)var xt=ue.dgst;ue=xt,E=Error(r(419)),E.stack="",E.digest=ue,Mb({value:E,source:null,stack:null}),g=uR(f,g,_)}else if(Ks||Ib(f,g,_,!1),ue=(_&f.childLanes)!==0,Ks||ue){if(ue=Mi,ue!==null&&(E=_&-_,E=(E&42)!==0?1:kt(E),E=(E&(ue.suspendedLanes|_))!==0?0:E,E!==0&&E!==Ke.retryLane))throw Ke.retryLane=E,Xl(f,E),zo(ue,f,E),_8;Ae.data==="$?"||AR(),g=uR(f,g,_)}else Ae.data==="$?"?(g.flags|=192,g.child=f.child,g=null):(f=Ke.treeContext,Qi=Ql(Ae.nextSibling),qa=g,ri=!0,np=null,Lc=!1,f!==null&&(bl[vl++]=Ku,bl[vl++]=Yu,bl[vl++]=ep,Ku=f.id,Yu=f.overflow,ep=g),g=cR(g,E.children),g.flags|=4096);return g}return j?(_f(),j=E.fallback,Ae=g.mode,Ke=f.child,xt=Ke.sibling,E=Gu(Ke,{mode:"hidden",children:E.children}),E.subtreeFlags=Ke.subtreeFlags&65011712,xt!==null?j=Gu(xt,j):(j=Qh(j,Ae,_,null),j.flags|=2),j.return=g,E.return=g,E.sibling=j,g.child=E,E=j,j=g.child,Ae=f.child.memoizedState,Ae===null?Ae=oR(_):(Ke=Ae.cachePool,Ke!==null?(xt=Is._currentValue,Ke=Ke.parent!==xt?{parent:xt,pool:xt}:Ke):Ke=yF(),Ae={baseLanes:Ae.baseLanes|_,cachePool:Ke}),j.memoizedState=Ae,j.childLanes=lR(f,ue,_),g.memoizedState=aR,E):(wf(g),_=f.child,f=_.sibling,_=Gu(_,{mode:"visible",children:E.children}),_.return=g,_.sibling=null,f!==null&&(ue=g.deletions,ue===null?(g.deletions=[f],g.flags|=16):ue.push(f)),g.child=_,g.memoizedState=null,_)}function cR(f,g){return g=O_({mode:"visible",children:g},f.mode),g.return=f,f.child=g}function O_(f,g){return f=Do(22,f,null,g),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function uR(f,g,_){return wg(g,f.child,null,_),f=cR(g,g.pendingProps.children),f.flags|=2,g.memoizedState=null,f}function I8(f,g,_){f.lanes|=g;var E=f.alternate;E!==null&&(E.lanes|=g),AA(f.return,g,_)}function dR(f,g,_,E,j){var q=f.memoizedState;q===null?f.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:E,tail:_,tailMode:j}:(q.isBackwards=g,q.rendering=null,q.renderingStartTime=0,q.last=E,q.tail=_,q.tailMode=j)}function j8(f,g,_){var E=g.pendingProps,j=E.revealOrder,q=E.tail;if(ca(f,g,E.children,_),E=js.current,(E&2)!==0)E=E&1|2,g.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=g.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&I8(f,_,g);else if(f.tag===19)I8(f,_,g);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===g)break e;for(;f.sibling===null;){if(f.return===null||f.return===g)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}switch(re(js,E),j){case"forwards":for(_=g.child,j=null;_!==null;)f=_.alternate,f!==null&&N_(f)===null&&(j=_),_=_.sibling;_=j,_===null?(j=g.child,g.child=null):(j=_.sibling,_.sibling=null),dR(g,!1,j,_,q);break;case"backwards":for(_=null,j=g.child,g.child=null;j!==null;){if(f=j.alternate,f!==null&&N_(f)===null){g.child=j;break}f=j.sibling,j.sibling=_,_=j,j=f}dR(g,!0,_,null,q);break;case"together":dR(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function ed(f,g,_){if(f!==null&&(g.dependencies=f.dependencies),Tf|=g.lanes,(_&g.childLanes)===0)if(f!==null){if(Ib(f,g,_,!1),(_&g.childLanes)===0)return null}else return null;if(f!==null&&g.child!==f.child)throw Error(r(153));if(g.child!==null){for(f=g.child,_=Gu(f,f.pendingProps),g.child=_,_.return=g;f.sibling!==null;)f=f.sibling,_=_.sibling=Gu(f,f.pendingProps),_.return=g;_.sibling=null}return g.child}function fR(f,g){return(f.lanes&g)!==0?!0:(f=f.dependencies,!!(f!==null&&p_(f)))}function Rfe(f,g,_){switch(g.tag){case 3:Me(g,g.stateNode.containerInfo),gf(g,Is,f.memoizedState.cache),Nb();break;case 27:case 5:qe(g);break;case 4:Me(g,g.stateNode.containerInfo);break;case 10:gf(g,g.type,g.memoizedProps.value);break;case 13:var E=g.memoizedState;if(E!==null)return E.dehydrated!==null?(wf(g),g.flags|=128,null):(_&g.child.childLanes)!==0?M8(f,g,_):(wf(g),f=ed(f,g,_),f!==null?f.sibling:null);wf(g);break;case 19:var j=(f.flags&128)!==0;if(E=(_&g.childLanes)!==0,E||(Ib(f,g,_,!1),E=(_&g.childLanes)!==0),j){if(E)return j8(f,g,_);g.flags|=128}if(j=g.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),re(js,js.current),E)break;return null;case 22:case 23:return g.lanes=0,E8(f,g,_);case 24:gf(g,Is,f.memoizedState.cache)}return ed(f,g,_)}function O8(f,g,_){if(f!==null)if(f.memoizedProps!==g.pendingProps)Ks=!0;else{if(!fR(f,_)&&(g.flags&128)===0)return Ks=!1,Rfe(f,g,_);Ks=(f.flags&131072)!==0}else Ks=!1,ri&&(g.flags&1048576)!==0&&uF(g,h_,g.index);switch(g.lanes=0,g.tag){case 16:e:{f=g.pendingProps;var E=g.elementType,j=E._init;if(E=j(E._payload),g.type=E,typeof E=="function")wA(E)?(f=lp(E,f),g.tag=1,g=R8(null,g,E,f,_)):(g.tag=0,g=sR(null,g,E,f,_));else{if(E!=null){if(j=E.$$typeof,j===C){g.tag=11,g=S8(null,g,E,f,_);break e}else if(j===R){g.tag=14,g=C8(null,g,E,f,_);break e}}throw g=F(E)||E,Error(r(306,g,""))}}return g;case 0:return sR(f,g,g.type,g.pendingProps,_);case 1:return E=g.type,j=lp(E,g.pendingProps),R8(f,g,E,j,_);case 3:e:{if(Me(g,g.stateNode.containerInfo),f===null)throw Error(r(387));E=g.pendingProps;var q=g.memoizedState;j=q.element,PA(f,g),Bb(g,E,null,_);var ue=g.memoizedState;if(E=ue.cache,gf(g,Is,E),E!==q.cache&&RA(g,[Is],_,!0),Lb(),E=ue.element,q.isDehydrated)if(q={element:E,isDehydrated:!1,cache:ue.cache},g.updateQueue.baseState=q,g.memoizedState=q,g.flags&256){g=N8(f,g,E,_);break e}else if(E!==j){j=Fn(Error(r(424)),g),Mb(j),g=N8(f,g,E,_);break e}else{switch(f=g.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(Qi=Ql(f.firstChild),qa=g,ri=!0,np=null,Lc=!0,_=f8(g,null,E,_),g.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(Nb(),E===j){g=ed(f,g,_);break e}ca(f,g,E,_)}g=g.child}return g;case 26:return j_(f,g),f===null?(_=LL(g.type,null,g.pendingProps,null))?g.memoizedState=_:ri||(_=g.type,f=g.pendingProps,E=K_(Ie.current).createElement(_),E[be]=g,E[Oe]=f,da(E,_,f),vr(E),g.stateNode=E):g.memoizedState=LL(g.type,f.memoizedProps,g.pendingProps,f.memoizedState),null;case 27:return qe(g),f===null&&ri&&(E=g.stateNode=PL(g.type,g.pendingProps,Ie.current),qa=g,Lc=!0,j=Qi,Mf(g.type)?(HR=j,Qi=Ql(E.firstChild)):Qi=j),ca(f,g,g.pendingProps.children,_),j_(f,g),f===null&&(g.flags|=4194304),g.child;case 5:return f===null&&ri&&((j=E=Qi)&&(E=rhe(E,g.type,g.pendingProps,Lc),E!==null?(g.stateNode=E,qa=g,Qi=Ql(E.firstChild),Lc=!1,j=!0):j=!1),j||rp(g)),qe(g),j=g.type,q=g.pendingProps,ue=f!==null?f.memoizedProps:null,E=q.children,UR(j,q)?E=null:ue!==null&&UR(j,ue)&&(g.flags|=32),g.memoizedState!==null&&(j=zA(f,g,wfe,null,null,_),ov._currentValue=j),j_(f,g),ca(f,g,E,_),g.child;case 6:return f===null&&ri&&((f=_=Qi)&&(_=ihe(_,g.pendingProps,Lc),_!==null?(g.stateNode=_,qa=g,Qi=null,f=!0):f=!1),f||rp(g)),null;case 13:return M8(f,g,_);case 4:return Me(g,g.stateNode.containerInfo),E=g.pendingProps,f===null?g.child=wg(g,null,E,_):ca(f,g,E,_),g.child;case 11:return S8(f,g,g.type,g.pendingProps,_);case 7:return ca(f,g,g.pendingProps,_),g.child;case 8:return ca(f,g,g.pendingProps.children,_),g.child;case 12:return ca(f,g,g.pendingProps.children,_),g.child;case 10:return E=g.pendingProps,gf(g,g.type,E.value),ca(f,g,E.children,_),g.child;case 9:return j=g.type._context,E=g.pendingProps.children,sp(g),j=Ca(j),E=E(j),g.flags|=1,ca(f,g,E,_),g.child;case 14:return C8(f,g,g.type,g.pendingProps,_);case 15:return k8(f,g,g.type,g.pendingProps,_);case 19:return j8(f,g,_);case 31:return E=g.pendingProps,_=g.mode,E={mode:E.mode,children:E.children},f===null?(_=O_(E,_),_.ref=g.ref,g.child=_,_.return=g,g=_):(_=Gu(f.child,E),_.ref=g.ref,g.child=_,_.return=g,g=_),g;case 22:return E8(f,g,_);case 24:return sp(g),E=Ca(Is),f===null?(j=IA(),j===null&&(j=Mi,q=NA(),j.pooledCache=q,q.refCount++,q!==null&&(j.pooledCacheLanes|=_),j=q),g.memoizedState={parent:E,cache:j},OA(g),gf(g,Is,j)):((f.lanes&_)!==0&&(PA(f,g),Bb(g,null,null,_),Lb()),j=f.memoizedState,q=g.memoizedState,j.parent!==E?(j={parent:E,cache:E},g.memoizedState=j,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=j),gf(g,Is,E)):(E=q.cache,gf(g,Is,E),E!==j.cache&&RA(g,[Is],_,!0))),ca(f,g,g.pendingProps.children,_),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function td(f){f.flags|=4}function P8(f,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!qL(g)){if(g=xl.current,g!==null&&((Vr&4194048)===Vr?Bc!==null:(Vr&62914560)!==Vr&&(Vr&536870912)===0||g!==Bc))throw Db=jA,bF;f.flags|=8192}}function P_(f,g){g!==null&&(f.flags|=4),f.flags&16384&&(g=f.tag!==22?B():536870912,f.lanes|=g,kg|=g)}function Hb(f,g){if(!ri)switch(f.tailMode){case"hidden":g=f.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?f.tail=null:_.sibling=null;break;case"collapsed":_=f.tail;for(var E=null;_!==null;)_.alternate!==null&&(E=_),_=_.sibling;E===null?g||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function Hi(f){var g=f.alternate!==null&&f.alternate.child===f.child,_=0,E=0;if(g)for(var j=f.child;j!==null;)_|=j.lanes|j.childLanes,E|=j.subtreeFlags&65011712,E|=j.flags&65011712,j.return=f,j=j.sibling;else for(j=f.child;j!==null;)_|=j.lanes|j.childLanes,E|=j.subtreeFlags,E|=j.flags,j.return=f,j=j.sibling;return f.subtreeFlags|=E,f.childLanes=_,g}function Nfe(f,g,_){var E=g.pendingProps;switch(kA(g),g.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hi(g),null;case 1:return Hi(g),null;case 3:return _=g.stateNode,E=null,f!==null&&(E=f.memoizedState.cache),g.memoizedState.cache!==E&&(g.flags|=2048),Xu(Is),Se(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(f===null||f.child===null)&&(Rb(g)?td(g):f===null||f.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,hF())),Hi(g),null;case 26:return _=g.memoizedState,f===null?(td(g),_!==null?(Hi(g),P8(g,_)):(Hi(g),g.flags&=-16777217)):_?_!==f.memoizedState?(td(g),Hi(g),P8(g,_)):(Hi(g),g.flags&=-16777217):(f.memoizedProps!==E&&td(g),Hi(g),g.flags&=-16777217),null;case 27:Qe(g),_=Ie.current;var j=g.type;if(f!==null&&g.stateNode!=null)f.memoizedProps!==E&&td(g);else{if(!E){if(g.stateNode===null)throw Error(r(166));return Hi(g),null}f=de.current,Rb(g)?dF(g):(f=PL(j,E,_),g.stateNode=f,td(g))}return Hi(g),null;case 5:if(Qe(g),_=g.type,f!==null&&g.stateNode!=null)f.memoizedProps!==E&&td(g);else{if(!E){if(g.stateNode===null)throw Error(r(166));return Hi(g),null}if(f=de.current,Rb(g))dF(g);else{switch(j=K_(Ie.current),f){case 1:f=j.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:f=j.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":f=j.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":f=j.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":f=j.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof E.is=="string"?j.createElement("select",{is:E.is}):j.createElement("select"),E.multiple?f.multiple=!0:E.size&&(f.size=E.size);break;default:f=typeof E.is=="string"?j.createElement(_,{is:E.is}):j.createElement(_)}}f[be]=g,f[Oe]=E;e:for(j=g.child;j!==null;){if(j.tag===5||j.tag===6)f.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===g)break e;for(;j.sibling===null;){if(j.return===null||j.return===g)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}g.stateNode=f;e:switch(da(f,_,E),_){case"button":case"input":case"select":case"textarea":f=!!E.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&td(g)}}return Hi(g),g.flags&=-16777217,null;case 6:if(f&&g.stateNode!=null)f.memoizedProps!==E&&td(g);else{if(typeof E!="string"&&g.stateNode===null)throw Error(r(166));if(f=Ie.current,Rb(g)){if(f=g.stateNode,_=g.memoizedProps,E=null,j=qa,j!==null)switch(j.tag){case 27:case 5:E=j.memoizedProps}f[be]=g,f=!!(f.nodeValue===_||E!==null&&E.suppressHydrationWarning===!0||AL(f.nodeValue,_)),f||rp(g)}else f=K_(f).createTextNode(E),f[be]=g,g.stateNode=f}return Hi(g),null;case 13:if(E=g.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(j=Rb(g),E!==null&&E.dehydrated!==null){if(f===null){if(!j)throw Error(r(318));if(j=g.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(r(317));j[be]=g}else Nb(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Hi(g),j=!1}else j=hF(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=j),j=!0;if(!j)return g.flags&256?(Qu(g),g):(Qu(g),null)}if(Qu(g),(g.flags&128)!==0)return g.lanes=_,g;if(_=E!==null,f=f!==null&&f.memoizedState!==null,_){E=g.child,j=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(j=E.alternate.memoizedState.cachePool.pool);var q=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(q=E.memoizedState.cachePool.pool),q!==j&&(E.flags|=2048)}return _!==f&&_&&(g.child.flags|=8192),P_(g,g.updateQueue),Hi(g),null;case 4:return Se(),f===null&&FR(g.stateNode.containerInfo),Hi(g),null;case 10:return Xu(g.type),Hi(g),null;case 19:if(ee(js),j=g.memoizedState,j===null)return Hi(g),null;if(E=(g.flags&128)!==0,q=j.rendering,q===null)if(E)Hb(j,!1);else{if(es!==0||f!==null&&(f.flags&128)!==0)for(f=g.child;f!==null;){if(q=N_(f),q!==null){for(g.flags|=128,Hb(j,!1),f=q.updateQueue,g.updateQueue=f,P_(g,f),g.subtreeFlags=0,f=_,_=g.child;_!==null;)cF(_,f),_=_.sibling;return re(js,js.current&1|2),g.child}f=f.sibling}j.tail!==null&&ce()>L_&&(g.flags|=128,E=!0,Hb(j,!1),g.lanes=4194304)}else{if(!E)if(f=N_(q),f!==null){if(g.flags|=128,E=!0,f=f.updateQueue,g.updateQueue=f,P_(g,f),Hb(j,!0),j.tail===null&&j.tailMode==="hidden"&&!q.alternate&&!ri)return Hi(g),null}else 2*ce()-j.renderingStartTime>L_&&_!==536870912&&(g.flags|=128,E=!0,Hb(j,!1),g.lanes=4194304);j.isBackwards?(q.sibling=g.child,g.child=q):(f=j.last,f!==null?f.sibling=q:g.child=q,j.last=q)}return j.tail!==null?(g=j.tail,j.rendering=g,j.tail=g.sibling,j.renderingStartTime=ce(),g.sibling=null,f=js.current,re(js,E?f&1|2:f&1),g):(Hi(g),null);case 22:case 23:return Qu(g),BA(),E=g.memoizedState!==null,f!==null?f.memoizedState!==null!==E&&(g.flags|=8192):E&&(g.flags|=8192),E?(_&536870912)!==0&&(g.flags&128)===0&&(Hi(g),g.subtreeFlags&6&&(g.flags|=8192)):Hi(g),_=g.updateQueue,_!==null&&P_(g,_.retryQueue),_=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),E=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),E!==_&&(g.flags|=2048),f!==null&&ee(ap),null;case 24:return _=null,f!==null&&(_=f.memoizedState.cache),g.memoizedState.cache!==_&&(g.flags|=2048),Xu(Is),Hi(g),null;case 25:return null;case 30:return null}throw Error(r(156,g.tag))}function Mfe(f,g){switch(kA(g),g.tag){case 1:return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 3:return Xu(Is),Se(),f=g.flags,(f&65536)!==0&&(f&128)===0?(g.flags=f&-65537|128,g):null;case 26:case 27:case 5:return Qe(g),null;case 13:if(Qu(g),f=g.memoizedState,f!==null&&f.dehydrated!==null){if(g.alternate===null)throw Error(r(340));Nb()}return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 19:return ee(js),null;case 4:return Se(),null;case 10:return Xu(g.type),null;case 22:case 23:return Qu(g),BA(),f!==null&&ee(ap),f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 24:return Xu(Is),null;case 25:return null;default:return null}}function D8(f,g){switch(kA(g),g.tag){case 3:Xu(Is),Se();break;case 26:case 27:case 5:Qe(g);break;case 4:Se();break;case 13:Qu(g);break;case 19:ee(js);break;case 10:Xu(g.type);break;case 22:case 23:Qu(g),BA(),f!==null&&ee(ap);break;case 24:Xu(Is)}}function Gb(f,g){try{var _=g.updateQueue,E=_!==null?_.lastEffect:null;if(E!==null){var j=E.next;_=j;do{if((_.tag&f)===f){E=void 0;var q=_.create,ue=_.inst;E=q(),ue.destroy=E}_=_.next}while(_!==j)}}catch(Ae){Ei(g,g.return,Ae)}}function Sf(f,g,_){try{var E=g.updateQueue,j=E!==null?E.lastEffect:null;if(j!==null){var q=j.next;E=q;do{if((E.tag&f)===f){var ue=E.inst,Ae=ue.destroy;if(Ae!==void 0){ue.destroy=void 0,j=g;var Ke=_,xt=Ae;try{xt()}catch(Ot){Ei(j,Ke,Ot)}}}E=E.next}while(E!==q)}}catch(Ot){Ei(g,g.return,Ot)}}function F8(f){var g=f.updateQueue;if(g!==null){var _=f.stateNode;try{CF(g,_)}catch(E){Ei(f,f.return,E)}}}function L8(f,g,_){_.props=lp(f.type,f.memoizedProps),_.state=f.memoizedState;try{_.componentWillUnmount()}catch(E){Ei(f,g,E)}}function Kb(f,g){try{var _=f.ref;if(_!==null){switch(f.tag){case 26:case 27:case 5:var E=f.stateNode;break;case 30:E=f.stateNode;break;default:E=f.stateNode}typeof _=="function"?f.refCleanup=_(E):_.current=E}}catch(j){Ei(f,g,j)}}function $c(f,g){var _=f.ref,E=f.refCleanup;if(_!==null)if(typeof E=="function")try{E()}catch(j){Ei(f,g,j)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(j){Ei(f,g,j)}else _.current=null}function B8(f){var g=f.type,_=f.memoizedProps,E=f.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":_.autoFocus&&E.focus();break e;case"img":_.src?E.src=_.src:_.srcSet&&(E.srcset=_.srcSet)}}catch(j){Ei(f,f.return,j)}}function hR(f,g,_){try{var E=f.stateNode;Jfe(E,f.type,_,g),E[Oe]=g}catch(j){Ei(f,f.return,j)}}function $8(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&Mf(f.type)||f.tag===4}function pR(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||$8(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&Mf(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function mR(f,g,_){var E=f.tag;if(E===5||E===6)f=f.stateNode,g?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(f,g):(g=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,g.appendChild(f),_=_._reactRootContainer,_!=null||g.onclick!==null||(g.onclick=G_));else if(E!==4&&(E===27&&Mf(f.type)&&(_=f.stateNode,g=null),f=f.child,f!==null))for(mR(f,g,_),f=f.sibling;f!==null;)mR(f,g,_),f=f.sibling}function D_(f,g,_){var E=f.tag;if(E===5||E===6)f=f.stateNode,g?_.insertBefore(f,g):_.appendChild(f);else if(E!==4&&(E===27&&Mf(f.type)&&(_=f.stateNode),f=f.child,f!==null))for(D_(f,g,_),f=f.sibling;f!==null;)D_(f,g,_),f=f.sibling}function z8(f){var g=f.stateNode,_=f.memoizedProps;try{for(var E=f.type,j=g.attributes;j.length;)g.removeAttributeNode(j[0]);da(g,E,_),g[be]=f,g[Oe]=_}catch(q){Ei(f,f.return,q)}}var nd=!1,os=!1,gR=!1,U8=typeof WeakSet=="function"?WeakSet:Set,Ys=null;function Ife(f,g){if(f=f.containerInfo,$R=eS,f=pe(f),ke(f)){if("selectionStart"in f)var _={start:f.selectionStart,end:f.selectionEnd};else e:{_=(_=f.ownerDocument)&&_.defaultView||window;var E=_.getSelection&&_.getSelection();if(E&&E.rangeCount!==0){_=E.anchorNode;var j=E.anchorOffset,q=E.focusNode;E=E.focusOffset;try{_.nodeType,q.nodeType}catch{_=null;break e}var ue=0,Ae=-1,Ke=-1,xt=0,Ot=0,Ft=f,Ct=null;t:for(;;){for(var Et;Ft!==_||j!==0&&Ft.nodeType!==3||(Ae=ue+j),Ft!==q||E!==0&&Ft.nodeType!==3||(Ke=ue+E),Ft.nodeType===3&&(ue+=Ft.nodeValue.length),(Et=Ft.firstChild)!==null;)Ct=Ft,Ft=Et;for(;;){if(Ft===f)break t;if(Ct===_&&++xt===j&&(Ae=ue),Ct===q&&++Ot===E&&(Ke=ue),(Et=Ft.nextSibling)!==null)break;Ft=Ct,Ct=Ft.parentNode}Ft=Et}_=Ae===-1||Ke===-1?null:{start:Ae,end:Ke}}else _=null}_=_||{start:0,end:0}}else _=null;for(zR={focusedElem:f,selectionRange:_},eS=!1,Ys=g;Ys!==null;)if(g=Ys,f=g.child,(g.subtreeFlags&1024)!==0&&f!==null)f.return=g,Ys=f;else for(;Ys!==null;){switch(g=Ys,q=g.alternate,f=g.flags,g.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&q!==null){f=void 0,_=g,j=q.memoizedProps,q=q.memoizedState,E=_.stateNode;try{var rr=lp(_.type,j,_.elementType===_.type);f=E.getSnapshotBeforeUpdate(rr,q),E.__reactInternalSnapshotBeforeUpdate=f}catch(Vn){Ei(_,_.return,Vn)}}break;case 3:if((f&1024)!==0){if(f=g.stateNode.containerInfo,_=f.nodeType,_===9)VR(f);else if(_===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":VR(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=g.sibling,f!==null){f.return=g.return,Ys=f;break}Ys=g.return}}function q8(f,g,_){var E=_.flags;switch(_.tag){case 0:case 11:case 15:Cf(f,_),E&4&&Gb(5,_);break;case 1:if(Cf(f,_),E&4)if(f=_.stateNode,g===null)try{f.componentDidMount()}catch(ue){Ei(_,_.return,ue)}else{var j=lp(_.type,g.memoizedProps);g=g.memoizedState;try{f.componentDidUpdate(j,g,f.__reactInternalSnapshotBeforeUpdate)}catch(ue){Ei(_,_.return,ue)}}E&64&&F8(_),E&512&&Kb(_,_.return);break;case 3:if(Cf(f,_),E&64&&(f=_.updateQueue,f!==null)){if(g=null,_.child!==null)switch(_.child.tag){case 27:case 5:g=_.child.stateNode;break;case 1:g=_.child.stateNode}try{CF(f,g)}catch(ue){Ei(_,_.return,ue)}}break;case 27:g===null&&E&4&&z8(_);case 26:case 5:Cf(f,_),g===null&&E&4&&B8(_),E&512&&Kb(_,_.return);break;case 12:Cf(f,_);break;case 13:Cf(f,_),E&4&&H8(f,_),E&64&&(f=_.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(_=zfe.bind(null,_),she(f,_))));break;case 22:if(E=_.memoizedState!==null||nd,!E){g=g!==null&&g.memoizedState!==null||os,j=nd;var q=os;nd=E,(os=g)&&!q?kf(f,_,(_.subtreeFlags&8772)!==0):Cf(f,_),nd=j,os=q}break;case 30:break;default:Cf(f,_)}}function V8(f){var g=f.alternate;g!==null&&(f.alternate=null,V8(g)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(g=f.stateNode,g!==null&&un(g)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Ui=null,co=!1;function rd(f,g,_){for(_=_.child;_!==null;)W8(f,g,_),_=_.sibling}function W8(f,g,_){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Pt,_)}catch{}switch(_.tag){case 26:os||$c(_,g),rd(f,g,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:os||$c(_,g);var E=Ui,j=co;Mf(_.type)&&(Ui=_.stateNode,co=!1),rd(f,g,_),rv(_.stateNode),Ui=E,co=j;break;case 5:os||$c(_,g);case 6:if(E=Ui,j=co,Ui=null,rd(f,g,_),Ui=E,co=j,Ui!==null)if(co)try{(Ui.nodeType===9?Ui.body:Ui.nodeName==="HTML"?Ui.ownerDocument.body:Ui).removeChild(_.stateNode)}catch(q){Ei(_,g,q)}else try{Ui.removeChild(_.stateNode)}catch(q){Ei(_,g,q)}break;case 18:Ui!==null&&(co?(f=Ui,jL(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,_.stateNode),dv(f)):jL(Ui,_.stateNode));break;case 4:E=Ui,j=co,Ui=_.stateNode.containerInfo,co=!0,rd(f,g,_),Ui=E,co=j;break;case 0:case 11:case 14:case 15:os||Sf(2,_,g),os||Sf(4,_,g),rd(f,g,_);break;case 1:os||($c(_,g),E=_.stateNode,typeof E.componentWillUnmount=="function"&&L8(_,g,E)),rd(f,g,_);break;case 21:rd(f,g,_);break;case 22:os=(E=os)||_.memoizedState!==null,rd(f,g,_),os=E;break;default:rd(f,g,_)}}function H8(f,g){if(g.memoizedState===null&&(f=g.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{dv(f)}catch(_){Ei(g,g.return,_)}}function jfe(f){switch(f.tag){case 13:case 19:var g=f.stateNode;return g===null&&(g=f.stateNode=new U8),g;case 22:return f=f.stateNode,g=f._retryCache,g===null&&(g=f._retryCache=new U8),g;default:throw Error(r(435,f.tag))}}function yR(f,g){var _=jfe(f);g.forEach(function(E){var j=Ufe.bind(null,f,E);_.has(E)||(_.add(E),E.then(j,j))})}function Fo(f,g){var _=g.deletions;if(_!==null)for(var E=0;E<_.length;E++){var j=_[E],q=f,ue=g,Ae=ue;e:for(;Ae!==null;){switch(Ae.tag){case 27:if(Mf(Ae.type)){Ui=Ae.stateNode,co=!1;break e}break;case 5:Ui=Ae.stateNode,co=!1;break e;case 3:case 4:Ui=Ae.stateNode.containerInfo,co=!0;break e}Ae=Ae.return}if(Ui===null)throw Error(r(160));W8(q,ue,j),Ui=null,co=!1,q=j.alternate,q!==null&&(q.return=null),j.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)G8(g,f),g=g.sibling}var Jl=null;function G8(f,g){var _=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Fo(g,f),Lo(f),E&4&&(Sf(3,f,f.return),Gb(3,f),Sf(5,f,f.return));break;case 1:Fo(g,f),Lo(f),E&512&&(os||_===null||$c(_,_.return)),E&64&&nd&&(f=f.updateQueue,f!==null&&(E=f.callbacks,E!==null&&(_=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=_===null?E:_.concat(E))));break;case 26:var j=Jl;if(Fo(g,f),Lo(f),E&512&&(os||_===null||$c(_,_.return)),E&4){var q=_!==null?_.memoizedState:null;if(E=f.memoizedState,_===null)if(E===null)if(f.stateNode===null){e:{E=f.type,_=f.memoizedProps,j=j.ownerDocument||j;t:switch(E){case"title":q=j.getElementsByTagName("title")[0],(!q||q[nn]||q[be]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=j.createElement(E),j.head.insertBefore(q,j.querySelector("head > title"))),da(q,E,_),q[be]=f,vr(q),E=q;break e;case"link":var ue=zL("link","href",j).get(E+(_.href||""));if(ue){for(var Ae=0;Ae<ue.length;Ae++)if(q=ue[Ae],q.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&q.getAttribute("rel")===(_.rel==null?null:_.rel)&&q.getAttribute("title")===(_.title==null?null:_.title)&&q.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){ue.splice(Ae,1);break t}}q=j.createElement(E),da(q,E,_),j.head.appendChild(q);break;case"meta":if(ue=zL("meta","content",j).get(E+(_.content||""))){for(Ae=0;Ae<ue.length;Ae++)if(q=ue[Ae],q.getAttribute("content")===(_.content==null?null:""+_.content)&&q.getAttribute("name")===(_.name==null?null:_.name)&&q.getAttribute("property")===(_.property==null?null:_.property)&&q.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&q.getAttribute("charset")===(_.charSet==null?null:_.charSet)){ue.splice(Ae,1);break t}}q=j.createElement(E),da(q,E,_),j.head.appendChild(q);break;default:throw Error(r(468,E))}q[be]=f,vr(q),E=q}f.stateNode=E}else UL(j,f.type,f.stateNode);else f.stateNode=$L(j,E,f.memoizedProps);else q!==E?(q===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):q.count--,E===null?UL(j,f.type,f.stateNode):$L(j,E,f.memoizedProps)):E===null&&f.stateNode!==null&&hR(f,f.memoizedProps,_.memoizedProps)}break;case 27:Fo(g,f),Lo(f),E&512&&(os||_===null||$c(_,_.return)),_!==null&&E&4&&hR(f,f.memoizedProps,_.memoizedProps);break;case 5:if(Fo(g,f),Lo(f),E&512&&(os||_===null||$c(_,_.return)),f.flags&32){j=f.stateNode;try{af(j,"")}catch(Et){Ei(f,f.return,Et)}}E&4&&f.stateNode!=null&&(j=f.memoizedProps,hR(f,j,_!==null?_.memoizedProps:j)),E&1024&&(gR=!0);break;case 6:if(Fo(g,f),Lo(f),E&4){if(f.stateNode===null)throw Error(r(162));E=f.memoizedProps,_=f.stateNode;try{_.nodeValue=E}catch(Et){Ei(f,f.return,Et)}}break;case 3:if(X_=null,j=Jl,Jl=Y_(g.containerInfo),Fo(g,f),Jl=j,Lo(f),E&4&&_!==null&&_.memoizedState.isDehydrated)try{dv(g.containerInfo)}catch(Et){Ei(f,f.return,Et)}gR&&(gR=!1,K8(f));break;case 4:E=Jl,Jl=Y_(f.stateNode.containerInfo),Fo(g,f),Lo(f),Jl=E;break;case 12:Fo(g,f),Lo(f);break;case 13:Fo(g,f),Lo(f),f.child.flags&8192&&f.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(SR=ce()),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,yR(f,E)));break;case 22:j=f.memoizedState!==null;var Ke=_!==null&&_.memoizedState!==null,xt=nd,Ot=os;if(nd=xt||j,os=Ot||Ke,Fo(g,f),os=Ot,nd=xt,Lo(f),E&8192)e:for(g=f.stateNode,g._visibility=j?g._visibility&-2:g._visibility|1,j&&(_===null||Ke||nd||os||cp(f)),_=null,g=f;;){if(g.tag===5||g.tag===26){if(_===null){Ke=_=g;try{if(q=Ke.stateNode,j)ue=q.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{Ae=Ke.stateNode;var Ft=Ke.memoizedProps.style,Ct=Ft!=null&&Ft.hasOwnProperty("display")?Ft.display:null;Ae.style.display=Ct==null||typeof Ct=="boolean"?"":(""+Ct).trim()}}catch(Et){Ei(Ke,Ke.return,Et)}}}else if(g.tag===6){if(_===null){Ke=g;try{Ke.stateNode.nodeValue=j?"":Ke.memoizedProps}catch(Et){Ei(Ke,Ke.return,Et)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===f)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break e;for(;g.sibling===null;){if(g.return===null||g.return===f)break e;_===g&&(_=null),g=g.return}_===g&&(_=null),g.sibling.return=g.return,g=g.sibling}E&4&&(E=f.updateQueue,E!==null&&(_=E.retryQueue,_!==null&&(E.retryQueue=null,yR(f,_))));break;case 19:Fo(g,f),Lo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,yR(f,E)));break;case 30:break;case 21:break;default:Fo(g,f),Lo(f)}}function Lo(f){var g=f.flags;if(g&2){try{for(var _,E=f.return;E!==null;){if($8(E)){_=E;break}E=E.return}if(_==null)throw Error(r(160));switch(_.tag){case 27:var j=_.stateNode,q=pR(f);D_(f,q,j);break;case 5:var ue=_.stateNode;_.flags&32&&(af(ue,""),_.flags&=-33);var Ae=pR(f);D_(f,Ae,ue);break;case 3:case 4:var Ke=_.stateNode.containerInfo,xt=pR(f);mR(f,xt,Ke);break;default:throw Error(r(161))}}catch(Ot){Ei(f,f.return,Ot)}f.flags&=-3}g&4096&&(f.flags&=-4097)}function K8(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var g=f;K8(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),f=f.sibling}}function Cf(f,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)q8(f,g.alternate,g),g=g.sibling}function cp(f){for(f=f.child;f!==null;){var g=f;switch(g.tag){case 0:case 11:case 14:case 15:Sf(4,g,g.return),cp(g);break;case 1:$c(g,g.return);var _=g.stateNode;typeof _.componentWillUnmount=="function"&&L8(g,g.return,_),cp(g);break;case 27:rv(g.stateNode);case 26:case 5:$c(g,g.return),cp(g);break;case 22:g.memoizedState===null&&cp(g);break;case 30:cp(g);break;default:cp(g)}f=f.sibling}}function kf(f,g,_){for(_=_&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var E=g.alternate,j=f,q=g,ue=q.flags;switch(q.tag){case 0:case 11:case 15:kf(j,q,_),Gb(4,q);break;case 1:if(kf(j,q,_),E=q,j=E.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(xt){Ei(E,E.return,xt)}if(E=q,j=E.updateQueue,j!==null){var Ae=E.stateNode;try{var Ke=j.shared.hiddenCallbacks;if(Ke!==null)for(j.shared.hiddenCallbacks=null,j=0;j<Ke.length;j++)SF(Ke[j],Ae)}catch(xt){Ei(E,E.return,xt)}}_&&ue&64&&F8(q),Kb(q,q.return);break;case 27:z8(q);case 26:case 5:kf(j,q,_),_&&E===null&&ue&4&&B8(q),Kb(q,q.return);break;case 12:kf(j,q,_);break;case 13:kf(j,q,_),_&&ue&4&&H8(j,q);break;case 22:q.memoizedState===null&&kf(j,q,_),Kb(q,q.return);break;case 30:break;default:kf(j,q,_)}g=g.sibling}}function bR(f,g){var _=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),f=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(f=g.memoizedState.cachePool.pool),f!==_&&(f!=null&&f.refCount++,_!=null&&jb(_))}function vR(f,g){f=null,g.alternate!==null&&(f=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==f&&(g.refCount++,f!=null&&jb(f))}function zc(f,g,_,E){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Y8(f,g,_,E),g=g.sibling}function Y8(f,g,_,E){var j=g.flags;switch(g.tag){case 0:case 11:case 15:zc(f,g,_,E),j&2048&&Gb(9,g);break;case 1:zc(f,g,_,E);break;case 3:zc(f,g,_,E),j&2048&&(f=null,g.alternate!==null&&(f=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==f&&(g.refCount++,f!=null&&jb(f)));break;case 12:if(j&2048){zc(f,g,_,E),f=g.stateNode;try{var q=g.memoizedProps,ue=q.id,Ae=q.onPostCommit;typeof Ae=="function"&&Ae(ue,g.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Ke){Ei(g,g.return,Ke)}}else zc(f,g,_,E);break;case 13:zc(f,g,_,E);break;case 23:break;case 22:q=g.stateNode,ue=g.alternate,g.memoizedState!==null?q._visibility&2?zc(f,g,_,E):Yb(f,g):q._visibility&2?zc(f,g,_,E):(q._visibility|=2,_g(f,g,_,E,(g.subtreeFlags&10256)!==0)),j&2048&&bR(ue,g);break;case 24:zc(f,g,_,E),j&2048&&vR(g.alternate,g);break;default:zc(f,g,_,E)}}function _g(f,g,_,E,j){for(j=j&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var q=f,ue=g,Ae=_,Ke=E,xt=ue.flags;switch(ue.tag){case 0:case 11:case 15:_g(q,ue,Ae,Ke,j),Gb(8,ue);break;case 23:break;case 22:var Ot=ue.stateNode;ue.memoizedState!==null?Ot._visibility&2?_g(q,ue,Ae,Ke,j):Yb(q,ue):(Ot._visibility|=2,_g(q,ue,Ae,Ke,j)),j&&xt&2048&&bR(ue.alternate,ue);break;case 24:_g(q,ue,Ae,Ke,j),j&&xt&2048&&vR(ue.alternate,ue);break;default:_g(q,ue,Ae,Ke,j)}g=g.sibling}}function Yb(f,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var _=f,E=g,j=E.flags;switch(E.tag){case 22:Yb(_,E),j&2048&&bR(E.alternate,E);break;case 24:Yb(_,E),j&2048&&vR(E.alternate,E);break;default:Yb(_,E)}g=g.sibling}}var Zb=8192;function Sg(f){if(f.subtreeFlags&Zb)for(f=f.child;f!==null;)Z8(f),f=f.sibling}function Z8(f){switch(f.tag){case 26:Sg(f),f.flags&Zb&&f.memoizedState!==null&&bhe(Jl,f.memoizedState,f.memoizedProps);break;case 5:Sg(f);break;case 3:case 4:var g=Jl;Jl=Y_(f.stateNode.containerInfo),Sg(f),Jl=g;break;case 22:f.memoizedState===null&&(g=f.alternate,g!==null&&g.memoizedState!==null?(g=Zb,Zb=16777216,Sg(f),Zb=g):Sg(f));break;default:Sg(f)}}function X8(f){var g=f.alternate;if(g!==null&&(f=g.child,f!==null)){g.child=null;do g=f.sibling,f.sibling=null,f=g;while(f!==null)}}function Xb(f){var g=f.deletions;if((f.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var E=g[_];Ys=E,Q8(E,f)}X8(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)J8(f),f=f.sibling}function J8(f){switch(f.tag){case 0:case 11:case 15:Xb(f),f.flags&2048&&Sf(9,f,f.return);break;case 3:Xb(f);break;case 12:Xb(f);break;case 22:var g=f.stateNode;f.memoizedState!==null&&g._visibility&2&&(f.return===null||f.return.tag!==13)?(g._visibility&=-3,F_(f)):Xb(f);break;default:Xb(f)}}function F_(f){var g=f.deletions;if((f.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var E=g[_];Ys=E,Q8(E,f)}X8(f)}for(f=f.child;f!==null;){switch(g=f,g.tag){case 0:case 11:case 15:Sf(8,g,g.return),F_(g);break;case 22:_=g.stateNode,_._visibility&2&&(_._visibility&=-3,F_(g));break;default:F_(g)}f=f.sibling}}function Q8(f,g){for(;Ys!==null;){var _=Ys;switch(_.tag){case 0:case 11:case 15:Sf(8,_,g);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var E=_.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:jb(_.memoizedState.cache)}if(E=_.child,E!==null)E.return=_,Ys=E;else e:for(_=f;Ys!==null;){E=Ys;var j=E.sibling,q=E.return;if(V8(E),E===_){Ys=null;break e}if(j!==null){j.return=q,Ys=j;break e}Ys=q}}}var Ofe={getCacheForType:function(f){var g=Ca(Is),_=g.data.get(f);return _===void 0&&(_=f(),g.data.set(f,_)),_}},Pfe=typeof WeakMap=="function"?WeakMap:Map,hi=0,Mi=null,Or=null,Vr=0,pi=0,Bo=null,Ef=!1,Cg=!1,xR=!1,id=0,es=0,Tf=0,up=0,wR=0,wl=0,kg=0,Jb=null,uo=null,_R=!1,SR=0,L_=1/0,B_=null,Af=null,ua=0,Rf=null,Eg=null,Tg=0,CR=0,kR=null,eL=null,Qb=0,ER=null;function $o(){if((hi&2)!==0&&Vr!==0)return Vr&-Vr;if(U.T!==null){var f=pg;return f!==0?f:jR()}return Y()}function tL(){wl===0&&(wl=(Vr&536870912)===0||ri?ot():536870912);var f=xl.current;return f!==null&&(f.flags|=32),wl}function zo(f,g,_){(f===Mi&&(pi===2||pi===9)||f.cancelPendingCommit!==null)&&(Ag(f,0),Nf(f,Vr,wl,!1)),it(f,_),((hi&2)===0||f!==Mi)&&(f===Mi&&((hi&2)===0&&(up|=_),es===4&&Nf(f,Vr,wl,!1)),Uc(f))}function nL(f,g,_){if((hi&6)!==0)throw Error(r(327));var E=!_&&(g&124)===0&&(g&f.expiredLanes)===0||fe(f,g),j=E?Lfe(f,g):RR(f,g,!0),q=E;do{if(j===0){Cg&&!E&&Nf(f,g,0,!1);break}else{if(_=f.current.alternate,q&&!Dfe(_)){j=RR(f,g,!1),q=!1;continue}if(j===2){if(q=g,f.errorRecoveryDisabledLanes&q)var ue=0;else ue=f.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){g=ue;e:{var Ae=f;j=Jb;var Ke=Ae.current.memoizedState.isDehydrated;if(Ke&&(Ag(Ae,ue).flags|=256),ue=RR(Ae,ue,!1),ue!==2){if(xR&&!Ke){Ae.errorRecoveryDisabledLanes|=q,up|=q,j=4;break e}q=uo,uo=j,q!==null&&(uo===null?uo=q:uo.push.apply(uo,q))}j=ue}if(q=!1,j!==2)continue}}if(j===1){Ag(f,0),Nf(f,g,0,!0);break}e:{switch(E=f,q=j,q){case 0:case 1:throw Error(r(345));case 4:if((g&4194048)!==g)break;case 6:Nf(E,g,wl,!Ef);break e;case 2:uo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((g&62914560)===g&&(j=SR+300-ce(),10<j)){if(Nf(E,g,wl,!Ef),Ne(E,0,!0)!==0)break e;E.timeoutHandle=ML(rL.bind(null,E,_,uo,B_,_R,g,wl,up,kg,Ef,q,2,-0,0),j);break e}rL(E,_,uo,B_,_R,g,wl,up,kg,Ef,q,0,-0,0)}}break}while(!0);Uc(f)}function rL(f,g,_,E,j,q,ue,Ae,Ke,xt,Ot,Ft,Ct,Et){if(f.timeoutHandle=-1,Ft=g.subtreeFlags,(Ft&8192||(Ft&16785408)===16785408)&&(av={stylesheets:null,count:0,unsuspend:yhe},Z8(g),Ft=vhe(),Ft!==null)){f.cancelPendingCommit=Ft(uL.bind(null,f,g,q,_,E,j,ue,Ae,Ke,Ot,1,Ct,Et)),Nf(f,q,ue,!xt);return}uL(f,g,q,_,E,j,ue,Ae,Ke)}function Dfe(f){for(var g=f;;){var _=g.tag;if((_===0||_===11||_===15)&&g.flags&16384&&(_=g.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var E=0;E<_.length;E++){var j=_[E],q=j.getSnapshot;j=j.value;try{if(!Sa(q(),j))return!1}catch{return!1}}if(_=g.child,g.subtreeFlags&16384&&_!==null)_.return=g,g=_;else{if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Nf(f,g,_,E){g&=~wR,g&=~up,f.suspendedLanes|=g,f.pingedLanes&=~g,E&&(f.warmLanes|=g),E=f.expirationTimes;for(var j=g;0<j;){var q=31-tn(j),ue=1<<q;E[q]=-1,j&=~ue}_!==0&&_e(f,_,g)}function $_(){return(hi&6)===0?(ev(0),!1):!0}function TR(){if(Or!==null){if(pi===0)var f=Or.return;else f=Or,Zu=ip=null,VA(f),xg=null,Vb=0,f=Or;for(;f!==null;)D8(f.alternate,f),f=f.return;Or=null}}function Ag(f,g){var _=f.timeoutHandle;_!==-1&&(f.timeoutHandle=-1,ehe(_)),_=f.cancelPendingCommit,_!==null&&(f.cancelPendingCommit=null,_()),TR(),Mi=f,Or=_=Gu(f.current,null),Vr=g,pi=0,Bo=null,Ef=!1,Cg=fe(f,g),xR=!1,kg=wl=wR=up=Tf=es=0,uo=Jb=null,_R=!1,(g&8)!==0&&(g|=g&32);var E=f.entangledLanes;if(E!==0)for(f=f.entanglements,E&=g;0<E;){var j=31-tn(E),q=1<<j;g|=f[j],E&=~q}return id=g,nr(),_}function iL(f,g){Ar=null,U.H=T_,g===Pb||g===y_?(g=wF(),pi=3):g===bF?(g=wF(),pi=4):pi=g===_8?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Bo=g,Or===null&&(es=1,I_(f,Fn(g,f.current)))}function sL(){var f=U.H;return U.H=T_,f===null?T_:f}function aL(){var f=U.A;return U.A=Ofe,f}function AR(){es=4,Ef||(Vr&4194048)!==Vr&&xl.current!==null||(Cg=!0),(Tf&134217727)===0&&(up&134217727)===0||Mi===null||Nf(Mi,Vr,wl,!1)}function RR(f,g,_){var E=hi;hi|=2;var j=sL(),q=aL();(Mi!==f||Vr!==g)&&(B_=null,Ag(f,g)),g=!1;var ue=es;e:do try{if(pi!==0&&Or!==null){var Ae=Or,Ke=Bo;switch(pi){case 8:TR(),ue=6;break e;case 3:case 2:case 9:case 6:xl.current===null&&(g=!0);var xt=pi;if(pi=0,Bo=null,Rg(f,Ae,Ke,xt),_&&Cg){ue=0;break e}break;default:xt=pi,pi=0,Bo=null,Rg(f,Ae,Ke,xt)}}Ffe(),ue=es;break}catch(Ot){iL(f,Ot)}while(!0);return g&&f.shellSuspendCounter++,Zu=ip=null,hi=E,U.H=j,U.A=q,Or===null&&(Mi=null,Vr=0,nr()),ue}function Ffe(){for(;Or!==null;)oL(Or)}function Lfe(f,g){var _=hi;hi|=2;var E=sL(),j=aL();Mi!==f||Vr!==g?(B_=null,L_=ce()+500,Ag(f,g)):Cg=fe(f,g);e:do try{if(pi!==0&&Or!==null){g=Or;var q=Bo;t:switch(pi){case 1:pi=0,Bo=null,Rg(f,g,q,1);break;case 2:case 9:if(vF(q)){pi=0,Bo=null,lL(g);break}g=function(){pi!==2&&pi!==9||Mi!==f||(pi=7),Uc(f)},q.then(g,g);break e;case 3:pi=7;break e;case 4:pi=5;break e;case 7:vF(q)?(pi=0,Bo=null,lL(g)):(pi=0,Bo=null,Rg(f,g,q,7));break;case 5:var ue=null;switch(Or.tag){case 26:ue=Or.memoizedState;case 5:case 27:var Ae=Or;if(!ue||qL(ue)){pi=0,Bo=null;var Ke=Ae.sibling;if(Ke!==null)Or=Ke;else{var xt=Ae.return;xt!==null?(Or=xt,z_(xt)):Or=null}break t}}pi=0,Bo=null,Rg(f,g,q,5);break;case 6:pi=0,Bo=null,Rg(f,g,q,6);break;case 8:TR(),es=6;break e;default:throw Error(r(462))}}Bfe();break}catch(Ot){iL(f,Ot)}while(!0);return Zu=ip=null,U.H=E,U.A=j,hi=_,Or!==null?0:(Mi=null,Vr=0,nr(),es)}function Bfe(){for(;Or!==null&&!ge();)oL(Or)}function oL(f){var g=O8(f.alternate,f,id);f.memoizedProps=f.pendingProps,g===null?z_(f):Or=g}function lL(f){var g=f,_=g.alternate;switch(g.tag){case 15:case 0:g=A8(_,g,g.pendingProps,g.type,void 0,Vr);break;case 11:g=A8(_,g,g.pendingProps,g.type.render,g.ref,Vr);break;case 5:VA(g);default:D8(_,g),g=Or=cF(g,id),g=O8(_,g,id)}f.memoizedProps=f.pendingProps,g===null?z_(f):Or=g}function Rg(f,g,_,E){Zu=ip=null,VA(g),xg=null,Vb=0;var j=g.return;try{if(Afe(f,j,g,_,Vr)){es=1,I_(f,Fn(_,f.current)),Or=null;return}}catch(q){if(j!==null)throw Or=j,q;es=1,I_(f,Fn(_,f.current)),Or=null;return}g.flags&32768?(ri||E===1?f=!0:Cg||(Vr&536870912)!==0?f=!1:(Ef=f=!0,(E===2||E===9||E===3||E===6)&&(E=xl.current,E!==null&&E.tag===13&&(E.flags|=16384))),cL(g,f)):z_(g)}function z_(f){var g=f;do{if((g.flags&32768)!==0){cL(g,Ef);return}f=g.return;var _=Nfe(g.alternate,g,id);if(_!==null){Or=_;return}if(g=g.sibling,g!==null){Or=g;return}Or=g=f}while(g!==null);es===0&&(es=5)}function cL(f,g){do{var _=Mfe(f.alternate,f);if(_!==null){_.flags&=32767,Or=_;return}if(_=f.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!g&&(f=f.sibling,f!==null)){Or=f;return}Or=f=_}while(f!==null);es=6,Or=null}function uL(f,g,_,E,j,q,ue,Ae,Ke){f.cancelPendingCommit=null;do U_();while(ua!==0);if((hi&6)!==0)throw Error(r(327));if(g!==null){if(g===f.current)throw Error(r(177));if(q=g.lanes|g.childLanes,q|=la,ye(f,_,q,ue,Ae,Ke),f===Mi&&(Or=Mi=null,Vr=0),Eg=g,Rf=f,Tg=_,CR=q,kR=j,eL=E,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,qfe(Be,function(){return mL(),null})):(f.callbackNode=null,f.callbackPriority=0),E=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||E){E=U.T,U.T=null,j=G.p,G.p=2,ue=hi,hi|=4;try{Ife(f,g,_)}finally{hi=ue,G.p=j,U.T=E}}ua=1,dL(),fL(),hL()}}function dL(){if(ua===1){ua=0;var f=Rf,g=Eg,_=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||_){_=U.T,U.T=null;var E=G.p;G.p=2;var j=hi;hi|=4;try{G8(g,f);var q=zR,ue=pe(f.containerInfo),Ae=q.focusedElem,Ke=q.selectionRange;if(ue!==Ae&&Ae&&Ae.ownerDocument&&ae(Ae.ownerDocument.documentElement,Ae)){if(Ke!==null&&ke(Ae)){var xt=Ke.start,Ot=Ke.end;if(Ot===void 0&&(Ot=xt),"selectionStart"in Ae)Ae.selectionStart=xt,Ae.selectionEnd=Math.min(Ot,Ae.value.length);else{var Ft=Ae.ownerDocument||document,Ct=Ft&&Ft.defaultView||window;if(Ct.getSelection){var Et=Ct.getSelection(),rr=Ae.textContent.length,Vn=Math.min(Ke.start,rr),xi=Ke.end===void 0?Vn:Math.min(Ke.end,rr);!Et.extend&&Vn>xi&&(ue=xi,xi=Vn,Vn=ue);var ht=Q(Ae,Vn),rt=Q(Ae,xi);if(ht&&rt&&(Et.rangeCount!==1||Et.anchorNode!==ht.node||Et.anchorOffset!==ht.offset||Et.focusNode!==rt.node||Et.focusOffset!==rt.offset)){var vt=Ft.createRange();vt.setStart(ht.node,ht.offset),Et.removeAllRanges(),Vn>xi?(Et.addRange(vt),Et.extend(rt.node,rt.offset)):(vt.setEnd(rt.node,rt.offset),Et.addRange(vt))}}}}for(Ft=[],Et=Ae;Et=Et.parentNode;)Et.nodeType===1&&Ft.push({element:Et,left:Et.scrollLeft,top:Et.scrollTop});for(typeof Ae.focus=="function"&&Ae.focus(),Ae=0;Ae<Ft.length;Ae++){var Dt=Ft[Ae];Dt.element.scrollLeft=Dt.left,Dt.element.scrollTop=Dt.top}}eS=!!$R,zR=$R=null}finally{hi=j,G.p=E,U.T=_}}f.current=g,ua=2}}function fL(){if(ua===2){ua=0;var f=Rf,g=Eg,_=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||_){_=U.T,U.T=null;var E=G.p;G.p=2;var j=hi;hi|=4;try{q8(f,g.alternate,g)}finally{hi=j,G.p=E,U.T=_}}ua=3}}function hL(){if(ua===4||ua===3){ua=0,Te();var f=Rf,g=Eg,_=Tg,E=eL;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?ua=5:(ua=0,Eg=Rf=null,pL(f,f.pendingLanes));var j=f.pendingLanes;if(j===0&&(Af=null),he(_),g=g.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Pt,g,void 0,(g.current.flags&128)===128)}catch{}if(E!==null){g=U.T,j=G.p,G.p=2,U.T=null;try{for(var q=f.onRecoverableError,ue=0;ue<E.length;ue++){var Ae=E[ue];q(Ae.value,{componentStack:Ae.stack})}}finally{U.T=g,G.p=j}}(Tg&3)!==0&&U_(),Uc(f),j=f.pendingLanes,(_&4194090)!==0&&(j&42)!==0?f===ER?Qb++:(Qb=0,ER=f):Qb=0,ev(0)}}function pL(f,g){(f.pooledCacheLanes&=g)===0&&(g=f.pooledCache,g!=null&&(f.pooledCache=null,jb(g)))}function U_(f){return dL(),fL(),hL(),mL()}function mL(){if(ua!==5)return!1;var f=Rf,g=CR;CR=0;var _=he(Tg),E=U.T,j=G.p;try{G.p=32>_?32:_,U.T=null,_=kR,kR=null;var q=Rf,ue=Tg;if(ua=0,Eg=Rf=null,Tg=0,(hi&6)!==0)throw Error(r(331));var Ae=hi;if(hi|=4,J8(q.current),Y8(q,q.current,ue,_),hi=Ae,ev(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Pt,q)}catch{}return!0}finally{G.p=j,U.T=E,pL(f,g)}}function gL(f,g,_){g=Fn(_,g),g=iR(f.stateNode,g,2),f=vf(f,g,2),f!==null&&(it(f,2),Uc(f))}function Ei(f,g,_){if(f.tag===3)gL(f,f,_);else for(;g!==null;){if(g.tag===3){gL(g,f,_);break}else if(g.tag===1){var E=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Af===null||!Af.has(E))){f=Fn(_,f),_=x8(2),E=vf(g,_,2),E!==null&&(w8(_,E,g,f),it(E,2),Uc(E));break}}g=g.return}}function NR(f,g,_){var E=f.pingCache;if(E===null){E=f.pingCache=new Pfe;var j=new Set;E.set(g,j)}else j=E.get(g),j===void 0&&(j=new Set,E.set(g,j));j.has(_)||(xR=!0,j.add(_),f=$fe.bind(null,f,g,_),g.then(f,f))}function $fe(f,g,_){var E=f.pingCache;E!==null&&E.delete(g),f.pingedLanes|=f.suspendedLanes&_,f.warmLanes&=~_,Mi===f&&(Vr&_)===_&&(es===4||es===3&&(Vr&62914560)===Vr&&300>ce()-SR?(hi&2)===0&&Ag(f,0):wR|=_,kg===Vr&&(kg=0)),Uc(f)}function yL(f,g){g===0&&(g=B()),f=Xl(f,g),f!==null&&(it(f,g),Uc(f))}function zfe(f){var g=f.memoizedState,_=0;g!==null&&(_=g.retryLane),yL(f,_)}function Ufe(f,g){var _=0;switch(f.tag){case 13:var E=f.stateNode,j=f.memoizedState;j!==null&&(_=j.retryLane);break;case 19:E=f.stateNode;break;case 22:E=f.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(g),yL(f,_)}function qfe(f,g){return Re(f,g)}var q_=null,Ng=null,MR=!1,V_=!1,IR=!1,dp=0;function Uc(f){f!==Ng&&f.next===null&&(Ng===null?q_=Ng=f:Ng=Ng.next=f),V_=!0,MR||(MR=!0,Wfe())}function ev(f,g){if(!IR&&V_){IR=!0;do for(var _=!1,E=q_;E!==null;){if(f!==0){var j=E.pendingLanes;if(j===0)var q=0;else{var ue=E.suspendedLanes,Ae=E.pingedLanes;q=(1<<31-tn(42|f)+1)-1,q&=j&~(ue&~Ae),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(_=!0,wL(E,q))}else q=Vr,q=Ne(E,E===Mi?q:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(q&3)===0||fe(E,q)||(_=!0,wL(E,q));E=E.next}while(_);IR=!1}}function Vfe(){bL()}function bL(){V_=MR=!1;var f=0;dp!==0&&(Qfe()&&(f=dp),dp=0);for(var g=ce(),_=null,E=q_;E!==null;){var j=E.next,q=vL(E,g);q===0?(E.next=null,_===null?q_=j:_.next=j,j===null&&(Ng=_)):(_=E,(f!==0||(q&3)!==0)&&(V_=!0)),E=j}ev(f)}function vL(f,g){for(var _=f.suspendedLanes,E=f.pingedLanes,j=f.expirationTimes,q=f.pendingLanes&-62914561;0<q;){var ue=31-tn(q),Ae=1<<ue,Ke=j[ue];Ke===-1?((Ae&_)===0||(Ae&E)!==0)&&(j[ue]=bt(Ae,g)):Ke<=g&&(f.expiredLanes|=Ae),q&=~Ae}if(g=Mi,_=Vr,_=Ne(f,f===g?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E=f.callbackNode,_===0||f===g&&(pi===2||pi===9)||f.cancelPendingCommit!==null)return E!==null&&E!==null&&K(E),f.callbackNode=null,f.callbackPriority=0;if((_&3)===0||fe(f,_)){if(g=_&-_,g===f.callbackPriority)return g;switch(E!==null&&K(E),he(_)){case 2:case 8:_=Ee;break;case 32:_=Be;break;case 268435456:_=ct;break;default:_=Be}return E=xL.bind(null,f),_=Re(_,E),f.callbackPriority=g,f.callbackNode=_,g}return E!==null&&E!==null&&K(E),f.callbackPriority=2,f.callbackNode=null,2}function xL(f,g){if(ua!==0&&ua!==5)return f.callbackNode=null,f.callbackPriority=0,null;var _=f.callbackNode;if(U_()&&f.callbackNode!==_)return null;var E=Vr;return E=Ne(f,f===Mi?E:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E===0?null:(nL(f,E,g),vL(f,ce()),f.callbackNode!=null&&f.callbackNode===_?xL.bind(null,f):null)}function wL(f,g){if(U_())return null;nL(f,g,!0)}function Wfe(){the(function(){(hi&6)!==0?Re(ie,Vfe):bL()})}function jR(){return dp===0&&(dp=ot()),dp}function _L(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:Lu(""+f)}function SL(f,g){var _=g.ownerDocument.createElement("input");return _.name=g.name,_.value=g.value,f.id&&_.setAttribute("form",f.id),g.parentNode.insertBefore(_,g),f=new FormData(f),_.parentNode.removeChild(_),f}function Hfe(f,g,_,E,j){if(g==="submit"&&_&&_.stateNode===j){var q=_L((j[Oe]||null).action),ue=E.submitter;ue&&(g=(g=ue[Oe]||null)?_L(g.formAction):ue.getAttribute("formAction"),g!==null&&(q=g,ue=null));var Ae=new Zm("action","action",null,E,j);f.push({event:Ae,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(dp!==0){var Ke=ue?SL(j,ue):new FormData(j);QA(_,{pending:!0,data:Ke,method:j.method,action:q},null,Ke)}}else typeof q=="function"&&(Ae.preventDefault(),Ke=ue?SL(j,ue):new FormData(j),QA(_,{pending:!0,data:Ke,method:j.method,action:q},q,Ke))},currentTarget:j}]})}}for(var OR=0;OR<an.length;OR++){var PR=an[OR],Gfe=PR.toLowerCase(),Kfe=PR[0].toUpperCase()+PR.slice(1);Gt(Gfe,"on"+Kfe)}Gt(_t,"onAnimationEnd"),Gt(At,"onAnimationIteration"),Gt(Rt,"onAnimationStart"),Gt("dblclick","onDoubleClick"),Gt("focusin","onFocus"),Gt("focusout","onBlur"),Gt(jt,"onTransitionRun"),Gt(Yt,"onTransitionStart"),Gt(rn,"onTransitionCancel"),Gt(Ht,"onTransitionEnd"),pn("onMouseEnter",["mouseout","mouseover"]),pn("onMouseLeave",["mouseout","mouseover"]),pn("onPointerEnter",["pointerout","pointerover"]),pn("onPointerLeave",["pointerout","pointerover"]),Vt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yfe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tv));function CL(f,g){g=(g&4)!==0;for(var _=0;_<f.length;_++){var E=f[_],j=E.event;E=E.listeners;e:{var q=void 0;if(g)for(var ue=E.length-1;0<=ue;ue--){var Ae=E[ue],Ke=Ae.instance,xt=Ae.currentTarget;if(Ae=Ae.listener,Ke!==q&&j.isPropagationStopped())break e;q=Ae,j.currentTarget=xt;try{q(j)}catch(Ot){M_(Ot)}j.currentTarget=null,q=Ke}else for(ue=0;ue<E.length;ue++){if(Ae=E[ue],Ke=Ae.instance,xt=Ae.currentTarget,Ae=Ae.listener,Ke!==q&&j.isPropagationStopped())break e;q=Ae,j.currentTarget=xt;try{q(j)}catch(Ot){M_(Ot)}j.currentTarget=null,q=Ke}}}}function Pr(f,g){var _=g[wt];_===void 0&&(_=g[wt]=new Set);var E=f+"__bubble";_.has(E)||(kL(g,f,2,!1),_.add(E))}function DR(f,g,_){var E=0;g&&(E|=4),kL(_,f,E,g)}var W_="_reactListening"+Math.random().toString(36).slice(2);function FR(f){if(!f[W_]){f[W_]=!0,hn.forEach(function(_){_!=="selectionchange"&&(Yfe.has(_)||DR(_,!1,f),DR(_,!0,f))});var g=f.nodeType===9?f:f.ownerDocument;g===null||g[W_]||(g[W_]=!0,DR("selectionchange",!1,g))}}function kL(f,g,_,E){switch(YL(g)){case 2:var j=_he;break;case 8:j=She;break;default:j=XR}_=j.bind(null,g,_,f),j=void 0,!mb||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(j=!0),E?j!==void 0?f.addEventListener(g,_,{capture:!0,passive:j}):f.addEventListener(g,_,!0):j!==void 0?f.addEventListener(g,_,{passive:j}):f.addEventListener(g,_,!1)}function LR(f,g,_,E,j){var q=E;if((g&1)===0&&(g&2)===0&&E!==null)e:for(;;){if(E===null)return;var ue=E.tag;if(ue===3||ue===4){var Ae=E.stateNode.containerInfo;if(Ae===j)break;if(ue===4)for(ue=E.return;ue!==null;){var Ke=ue.tag;if((Ke===3||Ke===4)&&ue.stateNode.containerInfo===j)return;ue=ue.return}for(;Ae!==null;){if(ue=pr(Ae),ue===null)return;if(Ke=ue.tag,Ke===5||Ke===6||Ke===26||Ke===27){E=q=ue;continue e}Ae=Ae.parentNode}}E=E.return}lf(function(){var xt=q,Ot=Km(_),Ft=[];e:{var Ct=Jt.get(f);if(Ct!==void 0){var Et=Zm,rr=f;switch(f){case"keypress":if(df(_)===0)break e;case"keydown":case"keyup":Et=ig;break;case"focusin":rr="focus",Et=ff;break;case"focusout":rr="blur",Et=ff;break;case"beforeblur":case"afterblur":Et=ff;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=Qm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=e_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=_b;break;case _t:case At:case Rt:Et=t_;break;case Ht:Et=Sb;break;case"scroll":case"scrollend":Et=Xm;break;case"wheel":Et=ag;break;case"copy":case"cut":case"paste":Et=ng;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=wb;break;case"toggle":case"beforetoggle":Et=i_}var Vn=(g&4)!==0,xi=!Vn&&(f==="scroll"||f==="scrollend"),ht=Vn?Ct!==null?Ct+"Capture":null:Ct;Vn=[];for(var rt=xt,vt;rt!==null;){var Dt=rt;if(vt=Dt.stateNode,Dt=Dt.tag,Dt!==5&&Dt!==26&&Dt!==27||vt===null||ht===null||(Dt=zu(rt,ht),Dt!=null&&Vn.push(nv(rt,Dt,vt))),xi)break;rt=rt.return}0<Vn.length&&(Ct=new Et(Ct,rr,null,_,Ot),Ft.push({event:Ct,listeners:Vn}))}}if((g&7)===0){e:{if(Ct=f==="mouseover"||f==="pointerover",Et=f==="mouseout"||f==="pointerout",Ct&&_!==pl&&(rr=_.relatedTarget||_.fromElement)&&(pr(rr)||rr[Ge]))break e;if((Et||Ct)&&(Ct=Ot.window===Ot?Ot:(Ct=Ot.ownerDocument)?Ct.defaultView||Ct.parentWindow:window,Et?(rr=_.relatedTarget||_.toElement,Et=xt,rr=rr?pr(rr):null,rr!==null&&(xi=s(rr),Vn=rr.tag,rr!==xi||Vn!==5&&Vn!==27&&Vn!==6)&&(rr=null)):(Et=null,rr=xt),Et!==rr)){if(Vn=Qm,Dt="onMouseLeave",ht="onMouseEnter",rt="mouse",(f==="pointerout"||f==="pointerover")&&(Vn=wb,Dt="onPointerLeave",ht="onPointerEnter",rt="pointer"),xi=Et==null?Ct:ti(Et),vt=rr==null?Ct:ti(rr),Ct=new Vn(Dt,rt+"leave",Et,_,Ot),Ct.target=xi,Ct.relatedTarget=vt,Dt=null,pr(Ot)===xt&&(Vn=new Vn(ht,rt+"enter",rr,_,Ot),Vn.target=vt,Vn.relatedTarget=xi,Dt=Vn),xi=Dt,Et&&rr)t:{for(Vn=Et,ht=rr,rt=0,vt=Vn;vt;vt=Mg(vt))rt++;for(vt=0,Dt=ht;Dt;Dt=Mg(Dt))vt++;for(;0<rt-vt;)Vn=Mg(Vn),rt--;for(;0<vt-rt;)ht=Mg(ht),vt--;for(;rt--;){if(Vn===ht||ht!==null&&Vn===ht.alternate)break t;Vn=Mg(Vn),ht=Mg(ht)}Vn=null}else Vn=null;Et!==null&&EL(Ft,Ct,Et,Vn,!1),rr!==null&&xi!==null&&EL(Ft,xi,rr,Vn,!0)}}e:{if(Ct=xt?ti(xt):window,Et=Ct.nodeName&&Ct.nodeName.toLowerCase(),Et==="select"||Et==="input"&&Ct.type==="file")var yn=Jh;else if(cg(Ct))if(gl)yn=mf;else{yn=Hu;var Ir=u_}else Et=Ct.nodeName,!Et||Et.toLowerCase()!=="input"||Ct.type!=="checkbox"&&Ct.type!=="radio"?xt&&pb(xt.elementType)&&(yn=Jh):yn=Ab;if(yn&&(yn=yn(f,xt))){Tb(Ft,yn,_,Ot);break e}Ir&&Ir(f,Ct,xt),f==="focusout"&&xt&&Ct.type==="number"&&xt.memoizedProps.value!=null&&rf(Ct,"number",Ct.value)}switch(Ir=xt?ti(xt):window,f){case"focusin":(cg(Ir)||Ir.contentEditable==="true")&&(He=Ir,nt=xt,st=null);break;case"focusout":st=nt=He=null;break;case"mousedown":dt=!0;break;case"contextmenu":case"mouseup":case"dragend":dt=!1,Xe(Ft,_,Ot);break;case"selectionchange":if(Le)break;case"keydown":case"keyup":Xe(Ft,_,Ot)}var Nn;if(Zh)e:{switch(f){case"compositionstart":var Gn="onCompositionStart";break e;case"compositionend":Gn="onCompositionEnd";break e;case"compositionupdate":Gn="onCompositionUpdate";break e}Gn=void 0}else Wu?Eb(f,_)&&(Gn="onCompositionEnd"):f==="keydown"&&_.keyCode===229&&(Gn="onCompositionStart");Gn&&(og&&_.locale!=="ko"&&(Wu||Gn!=="onCompositionStart"?Gn==="onCompositionEnd"&&Wu&&(Nn=uf()):(ml=Ot,Ym="value"in ml?ml.value:ml.textContent,Wu=!0)),Ir=H_(xt,Gn),0<Ir.length&&(Gn=new rg(Gn,f,null,_,Ot),Ft.push({event:Gn,listeners:Ir}),Nn?Gn.data=Nn:(Nn=a_(_),Nn!==null&&(Gn.data=Nn)))),(Nn=bA?o_(f,_):vA(f,_))&&(Gn=H_(xt,"onBeforeInput"),0<Gn.length&&(Ir=new rg("onBeforeInput","beforeinput",null,_,Ot),Ft.push({event:Ir,listeners:Gn}),Ir.data=Nn)),Hfe(Ft,f,xt,_,Ot)}CL(Ft,g)})}function nv(f,g,_){return{instance:f,listener:g,currentTarget:_}}function H_(f,g){for(var _=g+"Capture",E=[];f!==null;){var j=f,q=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||q===null||(j=zu(f,_),j!=null&&E.unshift(nv(f,j,q)),j=zu(f,g),j!=null&&E.push(nv(f,j,q))),f.tag===3)return E;f=f.return}return[]}function Mg(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function EL(f,g,_,E,j){for(var q=g._reactName,ue=[];_!==null&&_!==E;){var Ae=_,Ke=Ae.alternate,xt=Ae.stateNode;if(Ae=Ae.tag,Ke!==null&&Ke===E)break;Ae!==5&&Ae!==26&&Ae!==27||xt===null||(Ke=xt,j?(xt=zu(_,q),xt!=null&&ue.unshift(nv(_,xt,Ke))):j||(xt=zu(_,q),xt!=null&&ue.push(nv(_,xt,Ke)))),_=_.return}ue.length!==0&&f.push({event:g,listeners:ue})}var Zfe=/\r\n?/g,Xfe=/\u0000|\uFFFD/g;function TL(f){return(typeof f=="string"?f:""+f).replace(Zfe,`
`).replace(Xfe,"")}function AL(f,g){return g=TL(g),TL(f)===g}function G_(){}function vi(f,g,_,E,j,q){switch(_){case"children":typeof E=="string"?g==="body"||g==="textarea"&&E===""||af(f,E):(typeof E=="number"||typeof E=="bigint")&&g!=="body"&&af(f,""+E);break;case"className":Ba(f,"class",E);break;case"tabIndex":Ba(f,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Ba(f,_,E);break;case"style":J1(f,E,q);break;case"data":if(g!=="object"){Ba(f,"data",E);break}case"src":case"href":if(E===""&&(g!=="a"||_!=="href")){f.removeAttribute(_);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(_);break}E=Lu(""+E),f.setAttribute(_,E);break;case"action":case"formAction":if(typeof E=="function"){f.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(_==="formAction"?(g!=="input"&&vi(f,g,"name",j.name,j,null),vi(f,g,"formEncType",j.formEncType,j,null),vi(f,g,"formMethod",j.formMethod,j,null),vi(f,g,"formTarget",j.formTarget,j,null)):(vi(f,g,"encType",j.encType,j,null),vi(f,g,"method",j.method,j,null),vi(f,g,"target",j.target,j,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(_);break}E=Lu(""+E),f.setAttribute(_,E);break;case"onClick":E!=null&&(f.onclick=G_);break;case"onScroll":E!=null&&Pr("scroll",f);break;case"onScrollEnd":E!=null&&Pr("scrollend",f);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(_=E.__html,_!=null){if(j.children!=null)throw Error(r(60));f.innerHTML=_}}break;case"multiple":f.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":f.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){f.removeAttribute("xlink:href");break}_=Lu(""+E),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(_,""+E):f.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(_,""):f.removeAttribute(_);break;case"capture":case"download":E===!0?f.setAttribute(_,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(_,E):f.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?f.setAttribute(_,E):f.removeAttribute(_);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?f.removeAttribute(_):f.setAttribute(_,E);break;case"popover":Pr("beforetoggle",f),Pr("toggle",f),is(f,"popover",E);break;case"xlinkActuate":oa(f,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":oa(f,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":oa(f,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":oa(f,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":oa(f,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":oa(f,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":oa(f,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":oa(f,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":oa(f,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":is(f,"is",E);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=za.get(_)||_,is(f,_,E))}}function BR(f,g,_,E,j,q){switch(_){case"style":J1(f,E,q);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(_=E.__html,_!=null){if(j.children!=null)throw Error(r(60));f.innerHTML=_}}break;case"children":typeof E=="string"?af(f,E):(typeof E=="number"||typeof E=="bigint")&&af(f,""+E);break;case"onScroll":E!=null&&Pr("scroll",f);break;case"onScrollEnd":E!=null&&Pr("scrollend",f);break;case"onClick":E!=null&&(f.onclick=G_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!et.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(j=_.endsWith("Capture"),g=_.slice(2,j?_.length-7:void 0),q=f[Oe]||null,q=q!=null?q[_]:null,typeof q=="function"&&f.removeEventListener(g,q,j),typeof E=="function")){typeof q!="function"&&q!==null&&(_ in f?f[_]=null:f.hasAttribute(_)&&f.removeAttribute(_)),f.addEventListener(g,E,j);break e}_ in f?f[_]=E:E===!0?f.setAttribute(_,""):is(f,_,E)}}}function da(f,g,_){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pr("error",f),Pr("load",f);var E=!1,j=!1,q;for(q in _)if(_.hasOwnProperty(q)){var ue=_[q];if(ue!=null)switch(q){case"src":E=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:vi(f,g,q,ue,_,null)}}j&&vi(f,g,"srcSet",_.srcSet,_,null),E&&vi(f,g,"src",_.src,_,null);return;case"input":Pr("invalid",f);var Ae=q=ue=j=null,Ke=null,xt=null;for(E in _)if(_.hasOwnProperty(E)){var Ot=_[E];if(Ot!=null)switch(E){case"name":j=Ot;break;case"type":ue=Ot;break;case"checked":Ke=Ot;break;case"defaultChecked":xt=Ot;break;case"value":q=Ot;break;case"defaultValue":Ae=Ot;break;case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(r(137,g));break;default:vi(f,g,E,Ot,_,null)}}fb(f,q,Ae,Ke,xt,ue,j,!1),jc(f);return;case"select":Pr("invalid",f),E=ue=q=null;for(j in _)if(_.hasOwnProperty(j)&&(Ae=_[j],Ae!=null))switch(j){case"value":q=Ae;break;case"defaultValue":ue=Ae;break;case"multiple":E=Ae;default:vi(f,g,j,Ae,_,null)}g=q,_=ue,f.multiple=!!E,g!=null?Fu(f,!!E,g,!1):_!=null&&Fu(f,!!E,_,!0);return;case"textarea":Pr("invalid",f),q=j=E=null;for(ue in _)if(_.hasOwnProperty(ue)&&(Ae=_[ue],Ae!=null))switch(ue){case"value":E=Ae;break;case"defaultValue":j=Ae;break;case"children":q=Ae;break;case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(r(91));break;default:vi(f,g,ue,Ae,_,null)}hb(f,E,j,q),jc(f);return;case"option":for(Ke in _)if(_.hasOwnProperty(Ke)&&(E=_[Ke],E!=null))switch(Ke){case"selected":f.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:vi(f,g,Ke,E,_,null)}return;case"dialog":Pr("beforetoggle",f),Pr("toggle",f),Pr("cancel",f),Pr("close",f);break;case"iframe":case"object":Pr("load",f);break;case"video":case"audio":for(E=0;E<tv.length;E++)Pr(tv[E],f);break;case"image":Pr("error",f),Pr("load",f);break;case"details":Pr("toggle",f);break;case"embed":case"source":case"link":Pr("error",f),Pr("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xt in _)if(_.hasOwnProperty(xt)&&(E=_[xt],E!=null))switch(xt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:vi(f,g,xt,E,_,null)}return;default:if(pb(g)){for(Ot in _)_.hasOwnProperty(Ot)&&(E=_[Ot],E!==void 0&&BR(f,g,Ot,E,_,void 0));return}}for(Ae in _)_.hasOwnProperty(Ae)&&(E=_[Ae],E!=null&&vi(f,g,Ae,E,_,null))}function Jfe(f,g,_,E){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,q=null,ue=null,Ae=null,Ke=null,xt=null,Ot=null;for(Et in _){var Ft=_[Et];if(_.hasOwnProperty(Et)&&Ft!=null)switch(Et){case"checked":break;case"value":break;case"defaultValue":Ke=Ft;default:E.hasOwnProperty(Et)||vi(f,g,Et,null,E,Ft)}}for(var Ct in E){var Et=E[Ct];if(Ft=_[Ct],E.hasOwnProperty(Ct)&&(Et!=null||Ft!=null))switch(Ct){case"type":q=Et;break;case"name":j=Et;break;case"checked":xt=Et;break;case"defaultChecked":Ot=Et;break;case"value":ue=Et;break;case"defaultValue":Ae=Et;break;case"children":case"dangerouslySetInnerHTML":if(Et!=null)throw Error(r(137,g));break;default:Et!==Ft&&vi(f,g,Ct,Et,E,Ft)}}nf(f,ue,Ae,Ke,xt,Ot,q,j);return;case"select":Et=ue=Ae=Ct=null;for(q in _)if(Ke=_[q],_.hasOwnProperty(q)&&Ke!=null)switch(q){case"value":break;case"multiple":Et=Ke;default:E.hasOwnProperty(q)||vi(f,g,q,null,E,Ke)}for(j in E)if(q=E[j],Ke=_[j],E.hasOwnProperty(j)&&(q!=null||Ke!=null))switch(j){case"value":Ct=q;break;case"defaultValue":Ae=q;break;case"multiple":ue=q;default:q!==Ke&&vi(f,g,j,q,E,Ke)}g=Ae,_=ue,E=Et,Ct!=null?Fu(f,!!_,Ct,!1):!!E!=!!_&&(g!=null?Fu(f,!!_,g,!0):Fu(f,!!_,_?[]:"",!1));return;case"textarea":Et=Ct=null;for(Ae in _)if(j=_[Ae],_.hasOwnProperty(Ae)&&j!=null&&!E.hasOwnProperty(Ae))switch(Ae){case"value":break;case"children":break;default:vi(f,g,Ae,null,E,j)}for(ue in E)if(j=E[ue],q=_[ue],E.hasOwnProperty(ue)&&(j!=null||q!=null))switch(ue){case"value":Ct=j;break;case"defaultValue":Et=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:j!==q&&vi(f,g,ue,j,E,q)}sf(f,Ct,Et);return;case"option":for(var rr in _)if(Ct=_[rr],_.hasOwnProperty(rr)&&Ct!=null&&!E.hasOwnProperty(rr))switch(rr){case"selected":f.selected=!1;break;default:vi(f,g,rr,null,E,Ct)}for(Ke in E)if(Ct=E[Ke],Et=_[Ke],E.hasOwnProperty(Ke)&&Ct!==Et&&(Ct!=null||Et!=null))switch(Ke){case"selected":f.selected=Ct&&typeof Ct!="function"&&typeof Ct!="symbol";break;default:vi(f,g,Ke,Ct,E,Et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vn in _)Ct=_[Vn],_.hasOwnProperty(Vn)&&Ct!=null&&!E.hasOwnProperty(Vn)&&vi(f,g,Vn,null,E,Ct);for(xt in E)if(Ct=E[xt],Et=_[xt],E.hasOwnProperty(xt)&&Ct!==Et&&(Ct!=null||Et!=null))switch(xt){case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(r(137,g));break;default:vi(f,g,xt,Ct,E,Et)}return;default:if(pb(g)){for(var xi in _)Ct=_[xi],_.hasOwnProperty(xi)&&Ct!==void 0&&!E.hasOwnProperty(xi)&&BR(f,g,xi,void 0,E,Ct);for(Ot in E)Ct=E[Ot],Et=_[Ot],!E.hasOwnProperty(Ot)||Ct===Et||Ct===void 0&&Et===void 0||BR(f,g,Ot,Ct,E,Et);return}}for(var ht in _)Ct=_[ht],_.hasOwnProperty(ht)&&Ct!=null&&!E.hasOwnProperty(ht)&&vi(f,g,ht,null,E,Ct);for(Ft in E)Ct=E[Ft],Et=_[Ft],!E.hasOwnProperty(Ft)||Ct===Et||Ct==null&&Et==null||vi(f,g,Ft,Ct,E,Et)}var $R=null,zR=null;function K_(f){return f.nodeType===9?f:f.ownerDocument}function RL(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function NL(f,g){if(f===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&g==="foreignObject"?0:f}function UR(f,g){return f==="textarea"||f==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var qR=null;function Qfe(){var f=window.event;return f&&f.type==="popstate"?f===qR?!1:(qR=f,!0):(qR=null,!1)}var ML=typeof setTimeout=="function"?setTimeout:void 0,ehe=typeof clearTimeout=="function"?clearTimeout:void 0,IL=typeof Promise=="function"?Promise:void 0,the=typeof queueMicrotask=="function"?queueMicrotask:typeof IL<"u"?function(f){return IL.resolve(null).then(f).catch(nhe)}:ML;function nhe(f){setTimeout(function(){throw f})}function Mf(f){return f==="head"}function jL(f,g){var _=g,E=0,j=0;do{var q=_.nextSibling;if(f.removeChild(_),q&&q.nodeType===8)if(_=q.data,_==="/$"){if(0<E&&8>E){_=E;var ue=f.ownerDocument;if(_&1&&rv(ue.documentElement),_&2&&rv(ue.body),_&4)for(_=ue.head,rv(_),ue=_.firstChild;ue;){var Ae=ue.nextSibling,Ke=ue.nodeName;ue[nn]||Ke==="SCRIPT"||Ke==="STYLE"||Ke==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||_.removeChild(ue),ue=Ae}}if(j===0){f.removeChild(q),dv(g);return}j--}else _==="$"||_==="$?"||_==="$!"?j++:E=_.charCodeAt(0)-48;else E=0;_=q}while(_);dv(g)}function VR(f){var g=f.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var _=g;switch(g=g.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":VR(_),un(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}f.removeChild(_)}}function rhe(f,g,_,E){for(;f.nodeType===1;){var j=_;if(f.nodeName.toLowerCase()!==g.toLowerCase()){if(!E&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(E){if(!f[nn])switch(g){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(q=f.getAttribute("rel"),q==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(q!==j.rel||f.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||f.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||f.getAttribute("title")!==(j.title==null?null:j.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(q=f.getAttribute("src"),(q!==(j.src==null?null:j.src)||f.getAttribute("type")!==(j.type==null?null:j.type)||f.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&q&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(g==="input"&&f.type==="hidden"){var q=j.name==null?null:""+j.name;if(j.type==="hidden"&&f.getAttribute("name")===q)return f}else return f;if(f=Ql(f.nextSibling),f===null)break}return null}function ihe(f,g,_){if(g==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!_||(f=Ql(f.nextSibling),f===null))return null;return f}function WR(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function she(f,g){var _=f.ownerDocument;if(f.data!=="$?"||_.readyState==="complete")g();else{var E=function(){g(),_.removeEventListener("DOMContentLoaded",E)};_.addEventListener("DOMContentLoaded",E),f._reactRetry=E}}function Ql(f){for(;f!=null;f=f.nextSibling){var g=f.nodeType;if(g===1||g===3)break;if(g===8){if(g=f.data,g==="$"||g==="$!"||g==="$?"||g==="F!"||g==="F")break;if(g==="/$")return null}}return f}var HR=null;function OL(f){f=f.previousSibling;for(var g=0;f;){if(f.nodeType===8){var _=f.data;if(_==="$"||_==="$!"||_==="$?"){if(g===0)return f;g--}else _==="/$"&&g++}f=f.previousSibling}return null}function PL(f,g,_){switch(g=K_(_),f){case"html":if(f=g.documentElement,!f)throw Error(r(452));return f;case"head":if(f=g.head,!f)throw Error(r(453));return f;case"body":if(f=g.body,!f)throw Error(r(454));return f;default:throw Error(r(451))}}function rv(f){for(var g=f.attributes;g.length;)f.removeAttributeNode(g[0]);un(f)}var _l=new Map,DL=new Set;function Y_(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var sd=G.d;G.d={f:ahe,r:ohe,D:lhe,C:che,L:uhe,m:dhe,X:hhe,S:fhe,M:phe};function ahe(){var f=sd.f(),g=$_();return f||g}function ohe(f){var g=Er(f);g!==null&&g.tag===5&&g.type==="form"?n8(g):sd.r(f)}var Ig=typeof document>"u"?null:document;function FL(f,g,_){var E=Ig;if(E&&typeof g=="string"&&g){var j=wa(g);j='link[rel="'+f+'"][href="'+j+'"]',typeof _=="string"&&(j+='[crossorigin="'+_+'"]'),DL.has(j)||(DL.add(j),f={rel:f,crossOrigin:_,href:g},E.querySelector(j)===null&&(g=E.createElement("link"),da(g,"link",f),vr(g),E.head.appendChild(g)))}}function lhe(f){sd.D(f),FL("dns-prefetch",f,null)}function che(f,g){sd.C(f,g),FL("preconnect",f,g)}function uhe(f,g,_){sd.L(f,g,_);var E=Ig;if(E&&f&&g){var j='link[rel="preload"][as="'+wa(g)+'"]';g==="image"&&_&&_.imageSrcSet?(j+='[imagesrcset="'+wa(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(j+='[imagesizes="'+wa(_.imageSizes)+'"]')):j+='[href="'+wa(f)+'"]';var q=j;switch(g){case"style":q=jg(f);break;case"script":q=Og(f)}_l.has(q)||(f=u({rel:"preload",href:g==="image"&&_&&_.imageSrcSet?void 0:f,as:g},_),_l.set(q,f),E.querySelector(j)!==null||g==="style"&&E.querySelector(iv(q))||g==="script"&&E.querySelector(sv(q))||(g=E.createElement("link"),da(g,"link",f),vr(g),E.head.appendChild(g)))}}function dhe(f,g){sd.m(f,g);var _=Ig;if(_&&f){var E=g&&typeof g.as=="string"?g.as:"script",j='link[rel="modulepreload"][as="'+wa(E)+'"][href="'+wa(f)+'"]',q=j;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=Og(f)}if(!_l.has(q)&&(f=u({rel:"modulepreload",href:f},g),_l.set(q,f),_.querySelector(j)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(sv(q)))return}E=_.createElement("link"),da(E,"link",f),vr(E),_.head.appendChild(E)}}}function fhe(f,g,_){sd.S(f,g,_);var E=Ig;if(E&&f){var j=ni(E).hoistableStyles,q=jg(f);g=g||"default";var ue=j.get(q);if(!ue){var Ae={loading:0,preload:null};if(ue=E.querySelector(iv(q)))Ae.loading=5;else{f=u({rel:"stylesheet",href:f,"data-precedence":g},_),(_=_l.get(q))&&GR(f,_);var Ke=ue=E.createElement("link");vr(Ke),da(Ke,"link",f),Ke._p=new Promise(function(xt,Ot){Ke.onload=xt,Ke.onerror=Ot}),Ke.addEventListener("load",function(){Ae.loading|=1}),Ke.addEventListener("error",function(){Ae.loading|=2}),Ae.loading|=4,Z_(ue,g,E)}ue={type:"stylesheet",instance:ue,count:1,state:Ae},j.set(q,ue)}}}function hhe(f,g){sd.X(f,g);var _=Ig;if(_&&f){var E=ni(_).hoistableScripts,j=Og(f),q=E.get(j);q||(q=_.querySelector(sv(j)),q||(f=u({src:f,async:!0},g),(g=_l.get(j))&&KR(f,g),q=_.createElement("script"),vr(q),da(q,"link",f),_.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},E.set(j,q))}}function phe(f,g){sd.M(f,g);var _=Ig;if(_&&f){var E=ni(_).hoistableScripts,j=Og(f),q=E.get(j);q||(q=_.querySelector(sv(j)),q||(f=u({src:f,async:!0,type:"module"},g),(g=_l.get(j))&&KR(f,g),q=_.createElement("script"),vr(q),da(q,"link",f),_.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},E.set(j,q))}}function LL(f,g,_,E){var j=(j=Ie.current)?Y_(j):null;if(!j)throw Error(r(446));switch(f){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(g=jg(_.href),_=ni(j).hoistableStyles,E=_.get(g),E||(E={type:"style",instance:null,count:0,state:null},_.set(g,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){f=jg(_.href);var q=ni(j).hoistableStyles,ue=q.get(f);if(ue||(j=j.ownerDocument||j,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(f,ue),(q=j.querySelector(iv(f)))&&!q._p&&(ue.instance=q,ue.state.loading=5),_l.has(f)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},_l.set(f,_),q||mhe(j,f,_,ue.state))),g&&E===null)throw Error(r(528,""));return ue}if(g&&E!==null)throw Error(r(529,""));return null;case"script":return g=_.async,_=_.src,typeof _=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Og(_),_=ni(j).hoistableScripts,E=_.get(g),E||(E={type:"script",instance:null,count:0,state:null},_.set(g,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,f))}}function jg(f){return'href="'+wa(f)+'"'}function iv(f){return'link[rel="stylesheet"]['+f+"]"}function BL(f){return u({},f,{"data-precedence":f.precedence,precedence:null})}function mhe(f,g,_,E){f.querySelector('link[rel="preload"][as="style"]['+g+"]")?E.loading=1:(g=f.createElement("link"),E.preload=g,g.addEventListener("load",function(){return E.loading|=1}),g.addEventListener("error",function(){return E.loading|=2}),da(g,"link",_),vr(g),f.head.appendChild(g))}function Og(f){return'[src="'+wa(f)+'"]'}function sv(f){return"script[async]"+f}function $L(f,g,_){if(g.count++,g.instance===null)switch(g.type){case"style":var E=f.querySelector('style[data-href~="'+wa(_.href)+'"]');if(E)return g.instance=E,vr(E),E;var j=u({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return E=(f.ownerDocument||f).createElement("style"),vr(E),da(E,"style",j),Z_(E,_.precedence,f),g.instance=E;case"stylesheet":j=jg(_.href);var q=f.querySelector(iv(j));if(q)return g.state.loading|=4,g.instance=q,vr(q),q;E=BL(_),(j=_l.get(j))&&GR(E,j),q=(f.ownerDocument||f).createElement("link"),vr(q);var ue=q;return ue._p=new Promise(function(Ae,Ke){ue.onload=Ae,ue.onerror=Ke}),da(q,"link",E),g.state.loading|=4,Z_(q,_.precedence,f),g.instance=q;case"script":return q=Og(_.src),(j=f.querySelector(sv(q)))?(g.instance=j,vr(j),j):(E=_,(j=_l.get(q))&&(E=u({},_),KR(E,j)),f=f.ownerDocument||f,j=f.createElement("script"),vr(j),da(j,"link",E),f.head.appendChild(j),g.instance=j);case"void":return null;default:throw Error(r(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(E=g.instance,g.state.loading|=4,Z_(E,_.precedence,f));return g.instance}function Z_(f,g,_){for(var E=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=E.length?E[E.length-1]:null,q=j,ue=0;ue<E.length;ue++){var Ae=E[ue];if(Ae.dataset.precedence===g)q=Ae;else if(q!==j)break}q?q.parentNode.insertBefore(f,q.nextSibling):(g=_.nodeType===9?_.head:_,g.insertBefore(f,g.firstChild))}function GR(f,g){f.crossOrigin==null&&(f.crossOrigin=g.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=g.referrerPolicy),f.title==null&&(f.title=g.title)}function KR(f,g){f.crossOrigin==null&&(f.crossOrigin=g.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=g.referrerPolicy),f.integrity==null&&(f.integrity=g.integrity)}var X_=null;function zL(f,g,_){if(X_===null){var E=new Map,j=X_=new Map;j.set(_,E)}else j=X_,E=j.get(_),E||(E=new Map,j.set(_,E));if(E.has(f))return E;for(E.set(f,null),_=_.getElementsByTagName(f),j=0;j<_.length;j++){var q=_[j];if(!(q[nn]||q[be]||f==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=q.getAttribute(g)||"";ue=f+ue;var Ae=E.get(ue);Ae?Ae.push(q):E.set(ue,[q])}}return E}function UL(f,g,_){f=f.ownerDocument||f,f.head.insertBefore(_,g==="title"?f.querySelector("head > title"):null)}function ghe(f,g,_){if(_===1||g.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return f=g.disabled,typeof g.precedence=="string"&&f==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function qL(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var av=null;function yhe(){}function bhe(f,g,_){if(av===null)throw Error(r(475));var E=av;if(g.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var j=jg(_.href),q=f.querySelector(iv(j));if(q){f=q._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(E.count++,E=J_.bind(E),f.then(E,E)),g.state.loading|=4,g.instance=q,vr(q);return}q=f.ownerDocument||f,_=BL(_),(j=_l.get(j))&&GR(_,j),q=q.createElement("link"),vr(q);var ue=q;ue._p=new Promise(function(Ae,Ke){ue.onload=Ae,ue.onerror=Ke}),da(q,"link",_),g.instance=q}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(g,f),(f=g.state.preload)&&(g.state.loading&3)===0&&(E.count++,g=J_.bind(E),f.addEventListener("load",g),f.addEventListener("error",g))}}function vhe(){if(av===null)throw Error(r(475));var f=av;return f.stylesheets&&f.count===0&&YR(f,f.stylesheets),0<f.count?function(g){var _=setTimeout(function(){if(f.stylesheets&&YR(f,f.stylesheets),f.unsuspend){var E=f.unsuspend;f.unsuspend=null,E()}},6e4);return f.unsuspend=g,function(){f.unsuspend=null,clearTimeout(_)}}:null}function J_(){if(this.count--,this.count===0){if(this.stylesheets)YR(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var Q_=null;function YR(f,g){f.stylesheets=null,f.unsuspend!==null&&(f.count++,Q_=new Map,g.forEach(xhe,f),Q_=null,J_.call(f))}function xhe(f,g){if(!(g.state.loading&4)){var _=Q_.get(f);if(_)var E=_.get(null);else{_=new Map,Q_.set(f,_);for(var j=f.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<j.length;q++){var ue=j[q];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(_.set(ue.dataset.precedence,ue),E=ue)}E&&_.set(null,E)}j=g.instance,ue=j.getAttribute("data-precedence"),q=_.get(ue)||E,q===E&&_.set(null,j),_.set(ue,j),this.count++,E=J_.bind(this),j.addEventListener("load",E),j.addEventListener("error",E),q?q.parentNode.insertBefore(j,q.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(j,f.firstChild)),g.state.loading|=4}}var ov={$$typeof:S,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function whe(f,g,_,E,j,q,ue,Ae){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=E,this.onUncaughtError=j,this.onCaughtError=q,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function VL(f,g,_,E,j,q,ue,Ae,Ke,xt,Ot,Ft){return f=new whe(f,g,_,ue,Ae,Ke,xt,Ft),g=1,q===!0&&(g|=24),q=Do(3,null,null,g),f.current=q,q.stateNode=f,g=NA(),g.refCount++,f.pooledCache=g,g.refCount++,q.memoizedState={element:E,isDehydrated:_,cache:g},OA(q),f}function WL(f){return f?(f=Fc,f):Fc}function HL(f,g,_,E,j,q){j=WL(j),E.context===null?E.context=j:E.pendingContext=j,E=bf(g),E.payload={element:_},q=q===void 0?null:q,q!==null&&(E.callback=q),_=vf(f,E,g),_!==null&&(zo(_,f,g),Fb(_,f,g))}function GL(f,g){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var _=f.retryLane;f.retryLane=_!==0&&_<g?_:g}}function ZR(f,g){GL(f,g),(f=f.alternate)&&GL(f,g)}function KL(f){if(f.tag===13){var g=Xl(f,67108864);g!==null&&zo(g,f,67108864),ZR(f,67108864)}}var eS=!0;function _he(f,g,_,E){var j=U.T;U.T=null;var q=G.p;try{G.p=2,XR(f,g,_,E)}finally{G.p=q,U.T=j}}function She(f,g,_,E){var j=U.T;U.T=null;var q=G.p;try{G.p=8,XR(f,g,_,E)}finally{G.p=q,U.T=j}}function XR(f,g,_,E){if(eS){var j=JR(E);if(j===null)LR(f,g,E,tS,_),ZL(f,E);else if(khe(j,f,g,_,E))E.stopPropagation();else if(ZL(f,E),g&4&&-1<Che.indexOf(f)){for(;j!==null;){var q=Er(j);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var ue=we(q.pendingLanes);if(ue!==0){var Ae=q;for(Ae.pendingLanes|=2,Ae.entangledLanes|=2;ue;){var Ke=1<<31-tn(ue);Ae.entanglements[1]|=Ke,ue&=~Ke}Uc(q),(hi&6)===0&&(L_=ce()+500,ev(0))}}break;case 13:Ae=Xl(q,2),Ae!==null&&zo(Ae,q,2),$_(),ZR(q,2)}if(q=JR(E),q===null&&LR(f,g,E,tS,_),q===j)break;j=q}j!==null&&E.stopPropagation()}else LR(f,g,E,null,_)}}function JR(f){return f=Km(f),QR(f)}var tS=null;function QR(f){if(tS=null,f=pr(f),f!==null){var g=s(f);if(g===null)f=null;else{var _=g.tag;if(_===13){if(f=a(g),f!==null)return f;f=null}else if(_===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;f=null}else g!==f&&(f=null)}}return tS=f,null}function YL(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case ie:return 2;case Ee:return 8;case Be:case Ce:return 32;case ct:return 268435456;default:return 32}default:return 32}}var eN=!1,If=null,jf=null,Of=null,lv=new Map,cv=new Map,Pf=[],Che="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ZL(f,g){switch(f){case"focusin":case"focusout":If=null;break;case"dragenter":case"dragleave":jf=null;break;case"mouseover":case"mouseout":Of=null;break;case"pointerover":case"pointerout":lv.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":cv.delete(g.pointerId)}}function uv(f,g,_,E,j,q){return f===null||f.nativeEvent!==q?(f={blockedOn:g,domEventName:_,eventSystemFlags:E,nativeEvent:q,targetContainers:[j]},g!==null&&(g=Er(g),g!==null&&KL(g)),f):(f.eventSystemFlags|=E,g=f.targetContainers,j!==null&&g.indexOf(j)===-1&&g.push(j),f)}function khe(f,g,_,E,j){switch(g){case"focusin":return If=uv(If,f,g,_,E,j),!0;case"dragenter":return jf=uv(jf,f,g,_,E,j),!0;case"mouseover":return Of=uv(Of,f,g,_,E,j),!0;case"pointerover":var q=j.pointerId;return lv.set(q,uv(lv.get(q)||null,f,g,_,E,j)),!0;case"gotpointercapture":return q=j.pointerId,cv.set(q,uv(cv.get(q)||null,f,g,_,E,j)),!0}return!1}function XL(f){var g=pr(f.target);if(g!==null){var _=s(g);if(_!==null){if(g=_.tag,g===13){if(g=a(_),g!==null){f.blockedOn=g,H(f.priority,function(){if(_.tag===13){var E=$o();E=kt(E);var j=Xl(_,E);j!==null&&zo(j,_,E),ZR(_,E)}});return}}else if(g===3&&_.stateNode.current.memoizedState.isDehydrated){f.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}f.blockedOn=null}function nS(f){if(f.blockedOn!==null)return!1;for(var g=f.targetContainers;0<g.length;){var _=JR(f.nativeEvent);if(_===null){_=f.nativeEvent;var E=new _.constructor(_.type,_);pl=E,_.target.dispatchEvent(E),pl=null}else return g=Er(_),g!==null&&KL(g),f.blockedOn=_,!1;g.shift()}return!0}function JL(f,g,_){nS(f)&&_.delete(g)}function Ehe(){eN=!1,If!==null&&nS(If)&&(If=null),jf!==null&&nS(jf)&&(jf=null),Of!==null&&nS(Of)&&(Of=null),lv.forEach(JL),cv.forEach(JL)}function rS(f,g){f.blockedOn===g&&(f.blockedOn=null,eN||(eN=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ehe)))}var iS=null;function QL(f){iS!==f&&(iS=f,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){iS===f&&(iS=null);for(var g=0;g<f.length;g+=3){var _=f[g],E=f[g+1],j=f[g+2];if(typeof E!="function"){if(QR(E||_)===null)continue;break}var q=Er(_);q!==null&&(f.splice(g,3),g-=3,QA(q,{pending:!0,data:j,method:_.method,action:E},E,j))}}))}function dv(f){function g(Ke){return rS(Ke,f)}If!==null&&rS(If,f),jf!==null&&rS(jf,f),Of!==null&&rS(Of,f),lv.forEach(g),cv.forEach(g);for(var _=0;_<Pf.length;_++){var E=Pf[_];E.blockedOn===f&&(E.blockedOn=null)}for(;0<Pf.length&&(_=Pf[0],_.blockedOn===null);)XL(_),_.blockedOn===null&&Pf.shift();if(_=(f.ownerDocument||f).$$reactFormReplay,_!=null)for(E=0;E<_.length;E+=3){var j=_[E],q=_[E+1],ue=j[Oe]||null;if(typeof q=="function")ue||QL(_);else if(ue){var Ae=null;if(q&&q.hasAttribute("formAction")){if(j=q,ue=q[Oe]||null)Ae=ue.formAction;else if(QR(j)!==null)continue}else Ae=ue.action;typeof Ae=="function"?_[E+1]=Ae:(_.splice(E,3),E-=3),QL(_)}}}function tN(f){this._internalRoot=f}sS.prototype.render=tN.prototype.render=function(f){var g=this._internalRoot;if(g===null)throw Error(r(409));var _=g.current,E=$o();HL(_,E,f,g,null,null)},sS.prototype.unmount=tN.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var g=f.containerInfo;HL(f.current,2,null,f,null,null),$_(),g[Ge]=null}};function sS(f){this._internalRoot=f}sS.prototype.unstable_scheduleHydration=function(f){if(f){var g=Y();f={blockedOn:null,target:f,priority:g};for(var _=0;_<Pf.length&&g!==0&&g<Pf[_].priority;_++);Pf.splice(_,0,f),_===0&&XL(f)}};var eB=t.version;if(eB!=="19.1.0")throw Error(r(527,eB,"19.1.0"));G.findDOMNode=function(f){var g=f._reactInternals;if(g===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=l(g),f=f!==null?c(f):null,f=f===null?null:f.stateNode,f};var The={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aS.isDisabled&&aS.supportsFiber)try{Pt=aS.inject(The),Ut=aS}catch{}}return hv.createRoot=function(f,g){if(!i(f))throw Error(r(299));var _=!1,E="",j=g8,q=y8,ue=b8,Ae=null;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(E=g.identifierPrefix),g.onUncaughtError!==void 0&&(j=g.onUncaughtError),g.onCaughtError!==void 0&&(q=g.onCaughtError),g.onRecoverableError!==void 0&&(ue=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Ae=g.unstable_transitionCallbacks)),g=VL(f,1,!1,null,null,_,E,j,q,ue,Ae,null),f[Ge]=g.current,FR(f),new tN(g)},hv.hydrateRoot=function(f,g,_){if(!i(f))throw Error(r(299));var E=!1,j="",q=g8,ue=y8,Ae=b8,Ke=null,xt=null;return _!=null&&(_.unstable_strictMode===!0&&(E=!0),_.identifierPrefix!==void 0&&(j=_.identifierPrefix),_.onUncaughtError!==void 0&&(q=_.onUncaughtError),_.onCaughtError!==void 0&&(ue=_.onCaughtError),_.onRecoverableError!==void 0&&(Ae=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(Ke=_.unstable_transitionCallbacks),_.formState!==void 0&&(xt=_.formState)),g=VL(f,1,!0,g,_??null,E,j,q,ue,Ae,Ke,xt),g.context=WL(null),_=g.current,E=$o(),E=kt(E),j=bf(E),j.callback=null,vf(_,j,E),_=E,g.current.lanes=_,it(g,_),Uc(g),f[Ge]=g.current,FR(f),new sS(g)},hv.version="19.1.0",hv}var uB;function qhe(){if(uB)return iN.exports;uB=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),iN.exports=Uhe(),iN.exports}var Vhe=qhe();const Whe=xa(Vhe);function dB(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function el(...e){return t=>{let n=!1;const r=e.map(i=>{const s=dB(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():dB(e[i],null)}}}}function Tn(...e){return T.useCallback(el(...e),e)}function xu(e){const t=Hhe(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(Khe);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}var KW=xu("Slot");function Hhe(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=Zhe(i),o=Yhe(s,i.props);return i.type!==T.Fragment&&(o.ref=r?el(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ghe=Symbol("radix.slottable");function Khe(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ghe}function Yhe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{const l=s(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function Zhe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function YW(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=YW(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ZW(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=YW(e))&&(r&&(r+=" "),r+=t);return r}const fB=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,hB=ZW,OO=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return hB(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const h=fB(u)||fB(d);return i[c][h]}),o=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...m}=u;return Object.entries(m).every(y=>{let[b,v]=y;return Array.isArray(v)?v.includes({...s,...o}[b]):{...s,...o}[b]===v})?[...c,d,h]:c},[]);return hB(e,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},PO="-",Xhe=e=>{const t=Qhe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const o=a.split(PO);return o[0]===""&&o.length!==1&&o.shift(),XW(o,t)||Jhe(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},XW=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?XW(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(PO);return(a=t.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},pB=/^\[(.+)\]$/,Jhe=e=>{if(pB.test(e)){const t=pB.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Qhe=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const i in n)U3(n[i],r,i,t);return r},U3=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:mB(t,i);s.classGroupId=n;return}if(typeof i=="function"){if(epe(i)){U3(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{U3(a,mB(t,s),n,r)})})},mB=(e,t)=>{let n=e;return t.split(PO).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},epe=e=>e.isThemeGetter,tpe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},q3="!",V3=":",npe=V3.length,rpe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const s=[];let a=0,o=0,l=0,c;for(let y=0;y<i.length;y++){let b=i[y];if(a===0&&o===0){if(b===V3){s.push(i.slice(l,y)),l=y+npe;continue}if(b==="/"){c=y;continue}}b==="["?a++:b==="]"?a--:b==="("?o++:b===")"&&o--}const u=s.length===0?i:i.substring(l),d=ipe(u),h=d!==u,m=c&&c>l?c-l:void 0;return{modifiers:s,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:m}};if(t){const i=t+V3,s=r;r=a=>a.startsWith(i)?s(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},ipe=e=>e.endsWith(q3)?e.substring(0,e.length-1):e.startsWith(q3)?e.substring(1):e,spe=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(a=>{a[0]==="["||t[a]?(i.push(...s.sort(),a),s=[]):s.push(a)}),i.push(...s.sort()),i}},ape=e=>({cache:tpe(e.cacheSize),parseClassName:rpe(e),sortModifiers:spe(e),...Xhe(e)}),ope=/\s+/,lpe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,a=[],o=e.trim().split(ope);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:d,modifiers:h,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:b}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let v=!!b,x=r(v?y.substring(0,b):y);if(!x){if(!v){l=u+(l.length>0?" "+l:l);continue}if(x=r(y),!x){l=u+(l.length>0?" "+l:l);continue}v=!1}const w=s(h).join(":"),S=m?w+q3:w,C=S+x;if(a.includes(C))continue;a.push(C);const k=i(x,v);for(let A=0;A<k.length;++A){const R=k[A];a.push(S+R)}l=u+(l.length>0?" "+l:l)}return l};function cpe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=JW(t))&&(r&&(r+=" "),r+=n);return r}const JW=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=JW(e[r]))&&(n&&(n+=" "),n+=t);return n};function upe(e,...t){let n,r,i,s=a;function a(l){const c=t.reduce((u,d)=>d(u),e());return n=ape(c),r=n.cache.get,i=n.cache.set,s=o,o(l)}function o(l){const c=r(l);if(c)return c;const u=lpe(l,n);return i(l,u),u}return function(){return s(cpe.apply(null,arguments))}}const Os=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},QW=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,eH=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dpe=/^\d+\/\d+$/,fpe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hpe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ppe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mpe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gpe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pg=e=>dpe.test(e),Rr=e=>!!e&&!Number.isNaN(Number(e)),Ff=e=>!!e&&Number.isInteger(Number(e)),lN=e=>e.endsWith("%")&&Rr(e.slice(0,-1)),ad=e=>fpe.test(e),ype=()=>!0,bpe=e=>hpe.test(e)&&!ppe.test(e),tH=()=>!1,vpe=e=>mpe.test(e),xpe=e=>gpe.test(e),wpe=e=>!bn(e)&&!vn(e),_pe=e=>vy(e,iH,tH),bn=e=>QW.test(e),fp=e=>vy(e,sH,bpe),cN=e=>vy(e,Tpe,Rr),gB=e=>vy(e,nH,tH),Spe=e=>vy(e,rH,xpe),oS=e=>vy(e,aH,vpe),vn=e=>eH.test(e),pv=e=>xy(e,sH),Cpe=e=>xy(e,Ape),yB=e=>xy(e,nH),kpe=e=>xy(e,iH),Epe=e=>xy(e,rH),lS=e=>xy(e,aH,!0),vy=(e,t,n)=>{const r=QW.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},xy=(e,t,n=!1)=>{const r=eH.exec(e);return r?r[1]?t(r[1]):n:!1},nH=e=>e==="position"||e==="percentage",rH=e=>e==="image"||e==="url",iH=e=>e==="length"||e==="size"||e==="bg-size",sH=e=>e==="length",Tpe=e=>e==="number",Ape=e=>e==="family-name",aH=e=>e==="shadow",Rpe=()=>{const e=Os("color"),t=Os("font"),n=Os("text"),r=Os("font-weight"),i=Os("tracking"),s=Os("leading"),a=Os("breakpoint"),o=Os("container"),l=Os("spacing"),c=Os("radius"),u=Os("shadow"),d=Os("inset-shadow"),h=Os("text-shadow"),m=Os("drop-shadow"),y=Os("blur"),b=Os("perspective"),v=Os("aspect"),x=Os("ease"),w=Os("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),vn,bn],A=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],N=()=>[vn,bn,l],I=()=>[Pg,"full","auto",...N()],O=()=>[Ff,"none","subgrid",vn,bn],L=()=>["auto",{span:["full",Ff,vn,bn]},Ff,vn,bn],P=()=>[Ff,"auto",vn,bn],V=()=>["auto","min","max","fr",vn,bn],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",...N()],G=()=>[Pg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],$=()=>[e,vn,bn],ne=()=>[...C(),yB,gB,{position:[vn,bn]}],W=()=>["no-repeat",{repeat:["","x","y","space","round"]}],te=()=>["auto","cover","contain",kpe,_pe,{size:[vn,bn]}],ee=()=>[lN,pv,fp],re=()=>["","none","full",c,vn,bn],de=()=>["",Rr,pv,fp],oe=()=>["solid","dashed","dotted","double"],Ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],je=()=>[Rr,lN,yB,gB],Me=()=>["","none",y,vn,bn],Se=()=>["none",Rr,vn,bn],qe=()=>["none",Rr,vn,bn],Qe=()=>[Rr,vn,bn],We=()=>[Pg,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ad],breakpoint:[ad],color:[ype],container:[ad],"drop-shadow":[ad],ease:["in","out","in-out"],font:[wpe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ad],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ad],shadow:[ad],spacing:["px",Rr],text:[ad],"text-shadow":[ad],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Pg,bn,vn,v]}],container:["container"],columns:[{columns:[Rr,bn,vn,o]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[Ff,"auto",vn,bn]}],basis:[{basis:[Pg,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Rr,Pg,"auto","initial","none",bn]}],grow:[{grow:["",Rr,vn,bn]}],shrink:[{shrink:["",Rr,vn,bn]}],order:[{order:[Ff,"first","last","none",vn,bn]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[o,"screen",...G()]}],"min-w":[{"min-w":[o,"screen","none",...G()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...G()]}],h:[{h:["screen",...G()]}],"min-h":[{"min-h":["screen","none",...G()]}],"max-h":[{"max-h":["screen",...G()]}],"font-size":[{text:["base",n,pv,fp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,vn,cN]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",lN,bn]}],"font-family":[{font:[Cpe,bn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,vn,bn]}],"line-clamp":[{"line-clamp":[Rr,"none",vn,cN]}],leading:[{leading:[s,...N()]}],"list-image":[{"list-image":["none",vn,bn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",vn,bn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Rr,"from-font","auto",vn,fp]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[Rr,"auto",vn,bn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vn,bn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vn,bn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ne()}],"bg-repeat":[{bg:W()}],"bg-size":[{bg:te()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ff,vn,bn],radial:["",vn,bn],conic:[Ff,vn,bn]},Epe,Spe]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Rr,vn,bn]}],"outline-w":[{outline:["",Rr,pv,fp]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",u,lS,oS]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",d,lS,oS]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[Rr,fp]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",h,lS,oS]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[Rr,vn,bn]}],"mix-blend":[{"mix-blend":[...Ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Rr]}],"mask-image-linear-from-pos":[{"mask-linear-from":je()}],"mask-image-linear-to-pos":[{"mask-linear-to":je()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":je()}],"mask-image-t-to-pos":[{"mask-t-to":je()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":je()}],"mask-image-r-to-pos":[{"mask-r-to":je()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":je()}],"mask-image-b-to-pos":[{"mask-b-to":je()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":je()}],"mask-image-l-to-pos":[{"mask-l-to":je()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":je()}],"mask-image-x-to-pos":[{"mask-x-to":je()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":je()}],"mask-image-y-to-pos":[{"mask-y-to":je()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[vn,bn]}],"mask-image-radial-from-pos":[{"mask-radial-from":je()}],"mask-image-radial-to-pos":[{"mask-radial-to":je()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Rr]}],"mask-image-conic-from-pos":[{"mask-conic-from":je()}],"mask-image-conic-to-pos":[{"mask-conic-to":je()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ne()}],"mask-repeat":[{mask:W()}],"mask-size":[{mask:te()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",vn,bn]}],filter:[{filter:["","none",vn,bn]}],blur:[{blur:Me()}],brightness:[{brightness:[Rr,vn,bn]}],contrast:[{contrast:[Rr,vn,bn]}],"drop-shadow":[{"drop-shadow":["","none",m,lS,oS]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",Rr,vn,bn]}],"hue-rotate":[{"hue-rotate":[Rr,vn,bn]}],invert:[{invert:["",Rr,vn,bn]}],saturate:[{saturate:[Rr,vn,bn]}],sepia:[{sepia:["",Rr,vn,bn]}],"backdrop-filter":[{"backdrop-filter":["","none",vn,bn]}],"backdrop-blur":[{"backdrop-blur":Me()}],"backdrop-brightness":[{"backdrop-brightness":[Rr,vn,bn]}],"backdrop-contrast":[{"backdrop-contrast":[Rr,vn,bn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Rr,vn,bn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Rr,vn,bn]}],"backdrop-invert":[{"backdrop-invert":["",Rr,vn,bn]}],"backdrop-opacity":[{"backdrop-opacity":[Rr,vn,bn]}],"backdrop-saturate":[{"backdrop-saturate":[Rr,vn,bn]}],"backdrop-sepia":[{"backdrop-sepia":["",Rr,vn,bn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",vn,bn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Rr,"initial",vn,bn]}],ease:[{ease:["linear","initial",x,vn,bn]}],delay:[{delay:[Rr,vn,bn]}],animate:[{animate:["none",w,vn,bn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,vn,bn]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Se()}],"rotate-x":[{"rotate-x":Se()}],"rotate-y":[{"rotate-y":Se()}],"rotate-z":[{"rotate-z":Se()}],scale:[{scale:qe()}],"scale-x":[{"scale-x":qe()}],"scale-y":[{"scale-y":qe()}],"scale-z":[{"scale-z":qe()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[vn,bn,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:We()}],"translate-x":[{"translate-x":We()}],"translate-y":[{"translate-y":We()}],"translate-z":[{"translate-z":We()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vn,bn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vn,bn]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[Rr,pv,fp,cN]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Npe=upe(Rpe);function Ye(...e){return Npe(ZW(e))}const W3=OO("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function St({className:e,variant:t,size:n,asChild:r=!1,...i}){const s=r?KW:"button";return p.jsx(s,{"data-slot":"button",className:Ye(W3({variant:t,size:n,className:e})),...i})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mpe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ipe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),bB=e=>{const t=Ipe(e);return t.charAt(0).toUpperCase()+t.slice(1)},oH=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ope=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>T.createElement("svg",{ref:l,...jpe,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:oH("lucide",i),...o},[...a.map(([c,u])=>T.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=(e,t)=>{const n=T.forwardRef(({className:r,...i},s)=>T.createElement(Ope,{ref:s,iconNode:t,className:oH(`lucide-${Mpe(bB(e))}`,`lucide-${e}`,r),...i}));return n.displayName=bB(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ppe=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],lH=qt("archive",Ppe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],cH=qt("arrow-down",Dpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fpe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Lpe=qt("arrow-right",Fpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bpe=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],$pe=qt("arrow-up",Bpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],Upe=qt("ban",zpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],Vpe=qt("book-open-text",qpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wpe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],uH=qt("bot",Wpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hpe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],kh=qt("brain-circuit",Hpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gpe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],vB=qt("brain",Gpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kpe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ype=qt("calendar",Kpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zpe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Qa=qt("check",Zpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xpe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Tc=qt("chevron-down",Xpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jpe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qpe=qt("chevron-left",Jpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eme=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],DO=qt("chevron-right",eme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tme=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Eh=qt("chevron-up",tme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nme=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],eE=qt("chevrons-up-down",nme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rme=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],ime=qt("chevrons-up",rme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vc=qt("circle-alert",sme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ame=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tE=qt("circle-check",ame);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ome=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],lme=qt("circle-stop",ome);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ume=qt("circle",cme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dme=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],nE=qt("clipboard",dme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],hme=qt("clock",fme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pme=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],FO=qt("cloud-upload",pme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mme=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],dH=qt("code",mme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gme=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],yme=qt("cog",gme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bme=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],vme=qt("coins",bme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xme=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],wme=qt("copy",xme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _me=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Sme=qt("dollar-sign",_me);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cme=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],fu=qt("download",Cme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kme=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Eme=qt("ellipsis-vertical",kme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tme=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],Ame=qt("file-archive",Tme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rme=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Nme=qt("file-down",Rme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mme=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Ime=qt("file-json",Mme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jme=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Ome=qt("file-question",jme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pme=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Dme=qt("file-text",Pme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fme=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],Lme=qt("file-up",Fme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bme=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],fH=qt("file",Bme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $me=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],hH=qt("folder-git",$me);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zme=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],pH=qt("folder-plus",zme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ume=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],xB=qt("folder-tree",Ume);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qme=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],Vme=qt("folder-up",qme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wme=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],nh=qt("folder",Wme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hme=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],LO=qt("funnel",Hme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gme=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],xc=qt("git-branch",Gme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kme=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],mH=qt("git-commit-horizontal",Kme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yme=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],gH=qt("git-merge",Yme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zme=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],BO=qt("git-pull-request",Zme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xme=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Jme=qt("github",Xme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],wB=qt("globe",Qme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ege=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],tge=qt("grip-vertical",ege);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nge=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],$O=qt("hard-drive",nge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rge=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ige=qt("history",rge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sge=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],age=qt("house",sge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Gp=qt("image",oge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],zO=qt("info",lge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cge=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],kx=qt("key",cge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uge=[["path",{d:"m12 8 6-3-6-3v10",key:"mvpnpy"}],["path",{d:"m8 11.99-5.5 3.14a1 1 0 0 0 0 1.74l8.5 4.86a2 2 0 0 0 2 0l8.5-4.86a1 1 0 0 0 0-1.74L16 12",key:"ek95tt"}],["path",{d:"m6.49 12.85 11.02 6.3",key:"1kt42w"}],["path",{d:"M17.51 12.85 6.5 19.15",key:"v55bdg"}]],yH=qt("land-plot",uge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dge=[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M7 12H3",key:"13ou7f"}],["path",{d:"M7 18H3",key:"1sijw9"}],["path",{d:"M12 18a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L11 14",key:"qth677"}],["path",{d:"M11 10v4h4",key:"172dkj"}]],fge=qt("list-restart",dge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hge=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qn=qt("loader-circle",hge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pge=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],mge=qt("menu",pge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],yge=qt("message-square-plus",gge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bge=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],_B=qt("message-square-text",bge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],H3=qt("message-square",vge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],wge=qt("music",xge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ge=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],bH=qt("notebook-pen",_ge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sge=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],z2=qt("palette",Sge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],kge=qt("panel-left-close",Cge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ege=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],Tge=qt("panel-right-close",Ege);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Age=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],rE=qt("paperclip",Age);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rge=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Nge=qt("pause",Rge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mge=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Gw=qt("pen",Mge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ige=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],jge=qt("play",Ige);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oge=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mm=qt("plus",Oge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pge=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],SB=qt("puzzle",Pge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dge=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Kp=qt("refresh-cw",Dge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fge=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Lge=qt("rocket",Fge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bge=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],UO=qt("rotate-ccw",Bge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ge=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Wd=qt("save",$ge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zge=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Oa=qt("search",zge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uge=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],qge=qt("send-horizontal",Uge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vge=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],U2=qt("server",Vge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wge=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],G3=qt("settings",Wge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hge=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],CB=qt("shield-alert",Hge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gge=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Kge=qt("sliders-horizontal",Gge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Zge=qt("smile",Yge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xge=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],vH=qt("sparkles",Xge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jge=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]],kB=qt("sparkle",Jge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qge=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],nx=qt("square-pen",Qge);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],t0e=qt("square",e0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],r0e=qt("star",n0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0e=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],K3=qt("tags",i0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0e=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],a0e=qt("text",s0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0e=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],So=qt("trash-2",o0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qO=qt("triangle-alert",l0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0e=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],xH=qt("upload",c0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],d0e=qt("user",u0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],EB=qt("users",f0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],p0e=qt("video",h0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Yp=qt("wrench",m0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],va=qt("x",g0e);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0e=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],b0e=qt("zap",y0e),TB=({controls:e,area:t,className:n})=>{const r=e.filter(i=>t==="trigger"?!!i.triggerRenderer:!!i.renderer);return r.length===0?null:p.jsx("div",{className:Ye(n),children:r.map(i=>{var a,o;const s=t==="trigger"?(a=i.triggerRenderer)==null?void 0:a.call(i):(o=i.renderer)==null?void 0:o.call(i);return s?p.jsx(Ve.Fragment,{children:s},i.id):null})})},AB=e=>{let t;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=u??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(m=>m(t,h))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,i,o);return o},v0e=e=>e?AB(e):AB,x0e=e=>e;function w0e(e,t=x0e){const n=Ve.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return Ve.useDebugValue(n),n}const RB=e=>{const t=v0e(e),n=r=>w0e(t,r);return Object.assign(n,t),n},al=e=>e?RB(e):RB;var wH=Symbol.for("immer-nothing"),NB=Symbol.for("immer-draftable"),oi=Symbol.for("immer-state");function Dl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var O0=Object.getPrototypeOf;function P0(e){return!!e&&!!e[oi]}function jd(e){var t;return e?_H(e)||Array.isArray(e)||!!e[NB]||!!((t=e.constructor)!=null&&t[NB])||sE(e)||aE(e):!1}var _0e=Object.prototype.constructor.toString();function _H(e){if(!e||typeof e!="object")return!1;const t=O0(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===_0e}function Ex(e,t){iE(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function iE(e){const t=e[oi];return t?t.type_:Array.isArray(e)?1:sE(e)?2:aE(e)?3:0}function Y3(e,t){return iE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function SH(e,t,n){const r=iE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function S0e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function sE(e){return e instanceof Map}function aE(e){return e instanceof Set}function Js(e){return e.copy_||e.base_}function Z3(e,t){if(sE(e))return new Map(e);if(aE(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=_H(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[oi];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(O0(e),r)}else{const r=O0(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function VO(e,t=!1){return oE(e)||P0(e)||!jd(e)||(iE(e)>1&&(e.set=e.add=e.clear=e.delete=C0e),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>VO(r,!0))),e}function C0e(){Dl(2)}function oE(e){return Object.isFrozen(e)}var X3={};function Zp(e){const t=X3[e];return t||Dl(0,e),t}function k0e(e,t){X3[e]||(X3[e]=t)}var Tx;function q2(){return Tx}function E0e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function MB(e,t){t&&(Zp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function J3(e){Q3(e),e.drafts_.forEach(T0e),e.drafts_=null}function Q3(e){e===Tx&&(Tx=e.parent_)}function IB(e){return Tx=E0e(Tx,e)}function T0e(e){const t=e[oi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function jB(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[oi].modified_&&(J3(t),Dl(4)),jd(e)&&(e=V2(t,e),t.parent_||W2(t,e)),t.patches_&&Zp("Patches").generateReplacementPatches_(n[oi].base_,e,t.patches_,t.inversePatches_)):e=V2(t,n,[]),J3(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==wH?e:void 0}function V2(e,t,n){if(oE(t))return t;const r=t[oi];if(!r)return Ex(t,(i,s)=>OB(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return W2(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,a=!1;r.type_===3&&(s=new Set(i),i.clear(),a=!0),Ex(s,(o,l)=>OB(e,r,i,o,l,n,a)),W2(e,i,!1),n&&e.patches_&&Zp("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function OB(e,t,n,r,i,s,a){if(P0(i)){const o=s&&t&&t.type_!==3&&!Y3(t.assigned_,r)?s.concat(r):void 0,l=V2(e,i,o);if(SH(n,r,l),P0(l))e.canAutoFreeze_=!1;else return}else a&&n.add(i);if(jd(i)&&!oE(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;V2(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&W2(e,i)}}function W2(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&VO(t,n)}function A0e(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:q2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=WO;n&&(i=[r],s=Ax);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var WO={get(e,t){if(t===oi)return e;const n=Js(e);if(!Y3(n,t))return R0e(e,n,t);const r=n[t];return e.finalized_||!jd(r)?r:r===uN(e.base_,t)?(dN(e),e.copy_[t]=Rx(r,e)):r},has(e,t){return t in Js(e)},ownKeys(e){return Reflect.ownKeys(Js(e))},set(e,t,n){const r=CH(Js(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=uN(Js(e),t),s=i==null?void 0:i[oi];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(S0e(n,i)&&(n!==void 0||Y3(e.base_,t)))return!0;dN(e),gd(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return uN(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,dN(e),gd(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Js(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Dl(11)},getPrototypeOf(e){return O0(e.base_)},setPrototypeOf(){Dl(12)}},Ax={};Ex(WO,(e,t)=>{Ax[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ax.deleteProperty=function(e,t){return Ax.set.call(this,e,t,void 0)};Ax.set=function(e,t,n){return WO.set.call(this,e[0],t,n,e[0])};function uN(e,t){const n=e[oi];return(n?Js(n):e)[t]}function R0e(e,t,n){var i;const r=CH(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function CH(e,t){if(!(t in e))return;let n=O0(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=O0(n)}}function gd(e){e.modified_||(e.modified_=!0,e.parent_&&gd(e.parent_))}function dN(e){e.copy_||(e.copy_=Z3(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var N0e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const a=this;return function(l=s,...c){return a.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Dl(6),r!==void 0&&typeof r!="function"&&Dl(7);let i;if(jd(t)){const s=IB(this),a=Rx(t,void 0);let o=!0;try{i=n(a),o=!1}finally{o?J3(s):Q3(s)}return MB(s,r),jB(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===wH&&(i=void 0),this.autoFreeze_&&VO(i,!0),r){const s=[],a=[];Zp("Patches").generateReplacementPatches_(t,i,s,a),r(s,a)}return i}else Dl(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...o)=>this.produceWithPatches(a,l=>t(l,...o));let r,i;return[this.produce(t,n,(a,o)=>{r=a,i=o}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){jd(e)||Dl(8),P0(e)&&(e=M0e(e));const t=IB(this),n=Rx(e,void 0);return n[oi].isManual_=!0,Q3(t),n}finishDraft(e,t){const n=e&&e[oi];(!n||!n.isManual_)&&Dl(9);const{scope_:r}=n;return MB(r,t),jB(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Zp("Patches").applyPatches_;return P0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Rx(e,t){const n=sE(e)?Zp("MapSet").proxyMap_(e,t):aE(e)?Zp("MapSet").proxySet_(e,t):A0e(e,t);return(t?t.scope_:q2()).drafts_.push(n),n}function M0e(e){return P0(e)||Dl(10,e),kH(e)}function kH(e){if(!jd(e)||oE(e))return e;const t=e[oi];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Z3(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Z3(e,!0);return Ex(n,(r,i)=>{SH(n,r,kH(i))}),t&&(t.finalized_=!1),n}function I0e(){class e extends Map{constructor(l,c){super(),this[oi]={type_:2,parent_:c,scope_:c?c.scope_:q2(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Js(this[oi]).size}has(l){return Js(this[oi]).has(l)}set(l,c){const u=this[oi];return a(u),(!Js(u).has(l)||Js(u).get(l)!==c)&&(n(u),gd(u),u.assigned_.set(l,!0),u.copy_.set(l,c),u.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const c=this[oi];return a(c),n(c),gd(c),c.base_.has(l)?c.assigned_.set(l,!1):c.assigned_.delete(l),c.copy_.delete(l),!0}clear(){const l=this[oi];a(l),Js(l).size&&(n(l),gd(l),l.assigned_=new Map,Ex(l.base_,c=>{l.assigned_.set(c,!1)}),l.copy_.clear())}forEach(l,c){const u=this[oi];Js(u).forEach((d,h,m)=>{l.call(c,this.get(h),h,this)})}get(l){const c=this[oi];a(c);const u=Js(c).get(l);if(c.finalized_||!jd(u)||u!==c.base_.get(l))return u;const d=Rx(u,c);return n(c),c.copy_.set(l,d),d}keys(){return Js(this[oi]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=l.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=l.next();if(c.done)return c;const u=this.get(c.value);return{done:!1,value:[c.value,u]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,c){super(),this[oi]={type_:3,parent_:c,scope_:c?c.scope_:q2(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Js(this[oi]).size}has(l){const c=this[oi];return a(c),c.copy_?!!(c.copy_.has(l)||c.drafts_.has(l)&&c.copy_.has(c.drafts_.get(l))):c.base_.has(l)}add(l){const c=this[oi];return a(c),this.has(l)||(s(c),gd(c),c.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const c=this[oi];return a(c),s(c),gd(c),c.copy_.delete(l)||(c.drafts_.has(l)?c.copy_.delete(c.drafts_.get(l)):!1)}clear(){const l=this[oi];a(l),Js(l).size&&(s(l),gd(l),l.copy_.clear())}values(){const l=this[oi];return a(l),s(l),l.copy_.values()}entries(){const l=this[oi];return a(l),s(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,c){const u=this.values();let d=u.next();for(;!d.done;)l.call(c,d.value,d.value,this),d=u.next()}}function i(o,l){return new r(o,l)}function s(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(jd(l)){const c=Rx(l,o);o.drafts_.set(l,c),o.copy_.add(c)}else o.copy_.add(l)}))}function a(o){o.revoked_&&Dl(3,JSON.stringify(Js(o)))}k0e("MapSet",{proxyMap_:t,proxySet_:i})}var tl=new N0e,j0e=tl.produce;tl.produceWithPatches.bind(tl);tl.setAutoFreeze.bind(tl);tl.setUseStrictShallowCopy.bind(tl);tl.applyPatches.bind(tl);tl.createDraft.bind(tl);tl.finishDraft.bind(tl);const O0e=e=>(t,n,r)=>(r.setState=(i,s,...a)=>{const o=typeof i=="function"?j0e(i):i;return t(o,s,...a)},e(r.setState,n,r)),ol=O0e;function P0e(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const Fe=P0e(),Fr={promptControlsChanged:"control.registry.prompt.controls.changed",chatControlsChanged:"control.registry.chat.controls.changed",canvasControlsChanged:"control.registry.canvas.controls.changed",middlewareChanged:"control.registry.middleware.changed",toolsChanged:"control.registry.tools.changed",modalProvidersChanged:"control.registry.modal.providers.changed",registerPromptControlRequest:"control.registry.register.prompt.control.request",unregisterPromptControlRequest:"control.registry.unregister.prompt.control.request",registerChatControlRequest:"control.registry.register.chat.control.request",unregisterChatControlRequest:"control.registry.unregister.chat.control.request",registerCanvasControlRequest:"control.registry.register.canvas.control.request",unregisterCanvasControlRequest:"control.registry.unregister.canvas.control.request",registerMiddlewareRequest:"control.registry.register.middleware.request",unregisterMiddlewareRequest:"control.registry.unregister.middleware.request",registerToolRequest:"control.registry.register.tool.request",unregisterToolRequest:"control.registry.unregister.tool.request",registerModalProviderRequest:"control.registry.register.modal.provider.request",unregisterModalProviderRequest:"control.registry.unregister.modal.provider.request"},ll=al(ol((e,t)=>({promptControls:{},chatControls:{},canvasControls:{},middlewareRegistry:{},tools:{},modalProviders:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),Fe.emit(Fr.promptControlsChanged,{controls:t().promptControls}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)}),Fe.emit(Fr.promptControlsChanged,{controls:t().promptControls})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),Fe.emit(Fr.chatControlsChanged,{controls:t().chatControls}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)}),Fe.emit(Fr.chatControlsChanged,{controls:t().chatControls})},registerCanvasControl:n=>(e(r=>{r.canvasControls[n.id]&&console.warn(`ControlRegistryStore: CanvasControl with ID "${n.id}" already registered. Overwriting.`),r.canvasControls[n.id]=n}),Fe.emit(Fr.canvasControlsChanged,{controls:t().canvasControls}),()=>t().unregisterCanvasControl(n.id)),unregisterCanvasControl:n=>{e(r=>{r.canvasControls[n]?delete r.canvasControls[n]:console.warn(`ControlRegistryStore: CanvasControl with ID "${n}" not found for unregistration.`)}),Fe.emit(Fr.canvasControlsChanged,{controls:t().canvasControls})},registerMiddleware:(n,r,i,s=0)=>{const a={modId:r,callback:i,order:s};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(a),o.middlewareRegistry[n].sort((l,c)=>(l.order??0)-(c.order??0))}),Fe.emit(Fr.middlewareChanged,{middleware:t().middlewareRegistry}),()=>t().unregisterMiddleware(n,r,i)},unregisterMiddleware:(n,r,i)=>{e(s=>{var a;s.middlewareRegistry[n]?(s.middlewareRegistry[n]=s.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===i)),((a=s.middlewareRegistry[n])==null?void 0:a.length)===0&&delete s.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)}),Fe.emit(Fr.middlewareChanged,{middleware:t().middlewareRegistry})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((i,s)=>(i.order??0)-(s.order??0)))},registerTool:(n,r,i,s)=>(e(a=>{a.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${a.tools[r].modId}". Overwriting with registration from mod "${n}".`),a.tools[r]={definition:i,implementation:s,modId:n}}),Fe.emit(Fr.toolsChanged,{tools:t().tools}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)}),Fe.emit(Fr.toolsChanged,{tools:t().tools})},getRegisteredTools:()=>Object.freeze({...t().tools}),registerModalProvider:(n,r)=>(e(i=>{i.modalProviders[n]&&console.warn(`ControlRegistryStore: ModalProvider with ID "${n}" already registered. Overwriting.`),i.modalProviders[n]=r}),Fe.emit(Fr.modalProvidersChanged,{providers:t().modalProviders}),()=>t().unregisterModalProvider(n)),unregisterModalProvider:n=>{e(r=>{r.modalProviders[n]?delete r.modalProviders[n]:console.warn(`ControlRegistryStore: ModalProvider with ID "${n}" not found for unregistration.`)}),Fe.emit(Fr.modalProvidersChanged,{providers:t().modalProviders})},getRegisteredActionHandlers:()=>{const n="controlRegistryStore",r=t();return[{eventName:Fr.registerPromptControlRequest,handler:i=>{r.registerPromptControl(i.control)},storeId:n},{eventName:Fr.unregisterPromptControlRequest,handler:i=>{r.unregisterPromptControl(i.id)},storeId:n},{eventName:Fr.registerChatControlRequest,handler:i=>{r.registerChatControl(i.control)},storeId:n},{eventName:Fr.unregisterChatControlRequest,handler:i=>{r.unregisterChatControl(i.id)},storeId:n},{eventName:Fr.registerCanvasControlRequest,handler:i=>{r.registerCanvasControl(i.control)},storeId:n},{eventName:Fr.unregisterCanvasControlRequest,handler:i=>{r.unregisterCanvasControl(i.id)},storeId:n},{eventName:Fr.registerMiddlewareRequest,handler:i=>{r.registerMiddleware(i.hookName,i.modId,i.callback,i.order)},storeId:n},{eventName:Fr.unregisterMiddlewareRequest,handler:i=>{r.unregisterMiddleware(i.hookName,i.modId,i.callback)},storeId:n},{eventName:Fr.registerToolRequest,handler:i=>{r.registerTool(i.modId,i.toolName,i.definition,i.implementation)},storeId:n},{eventName:Fr.unregisterToolRequest,handler:i=>{r.unregisterTool(i.toolName)},storeId:n},{eventName:Fr.registerModalProviderRequest,handler:i=>{r.registerModalProvider(i.modalId,i.provider)},storeId:n},{eventName:Fr.unregisterModalProviderRequest,handler:i=>{r.unregisterModalProvider(i.modalId)},storeId:n}]}})));var u2={exports:{}},D0e=u2.exports,PB;function F0e(){return PB||(PB=1,function(e,t){(function(n,r){e.exports=r()})(D0e,function(){var n=function(M,z){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ae){Q.__proto__=ae}||function(Q,ae){for(var pe in ae)Object.prototype.hasOwnProperty.call(ae,pe)&&(Q[pe]=ae[pe])})(M,z)},r=function(){return(r=Object.assign||function(M){for(var z,Q=1,ae=arguments.length;Q<ae;Q++)for(var pe in z=arguments[Q])Object.prototype.hasOwnProperty.call(z,pe)&&(M[pe]=z[pe]);return M}).apply(this,arguments)};function i(M,z,Q){for(var ae,pe=0,ke=z.length;pe<ke;pe++)!ae&&pe in z||((ae=ae||Array.prototype.slice.call(z,0,pe))[pe]=z[pe]);return M.concat(ae||Array.prototype.slice.call(z))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Np,a=Object.keys,o=Array.isArray;function l(M,z){return typeof z!="object"||a(z).forEach(function(Q){M[Q]=z[Q]}),M}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var c=Object.getPrototypeOf,u={}.hasOwnProperty;function d(M,z){return u.call(M,z)}function h(M,z){typeof z=="function"&&(z=z(c(M))),(typeof Reflect>"u"?a:Reflect.ownKeys)(z).forEach(function(Q){y(M,Q,z[Q])})}var m=Object.defineProperty;function y(M,z,Q,ae){m(M,z,l(Q&&d(Q,"get")&&typeof Q.get=="function"?{get:Q.get,set:Q.set,configurable:!0}:{value:Q,configurable:!0,writable:!0},ae))}function b(M){return{from:function(z){return M.prototype=Object.create(z.prototype),y(M.prototype,"constructor",M),{extend:h.bind(null,M.prototype)}}}}var v=Object.getOwnPropertyDescriptor,x=[].slice;function w(M,z,Q){return x.call(M,z,Q)}function S(M,z){return z(M)}function C(M){if(!M)throw new Error("Assertion Failed")}function k(M){s.setImmediate?setImmediate(M):setTimeout(M,0)}function A(M,z){if(typeof z=="string"&&d(M,z))return M[z];if(!z)return M;if(typeof z!="string"){for(var Q=[],ae=0,pe=z.length;ae<pe;++ae){var ke=A(M,z[ae]);Q.push(ke)}return Q}var Le=z.indexOf(".");if(Le!==-1){var He=M[z.substr(0,Le)];return He==null?void 0:A(He,z.substr(Le+1))}}function R(M,z,Q){if(M&&z!==void 0&&!("isFrozen"in Object&&Object.isFrozen(M)))if(typeof z!="string"&&"length"in z){C(typeof Q!="string"&&"length"in Q);for(var ae=0,pe=z.length;ae<pe;++ae)R(M,z[ae],Q[ae])}else{var ke,Le,He=z.indexOf(".");He!==-1?(ke=z.substr(0,He),(Le=z.substr(He+1))===""?Q===void 0?o(M)&&!isNaN(parseInt(ke))?M.splice(ke,1):delete M[ke]:M[ke]=Q:R(He=!(He=M[ke])||!d(M,ke)?M[ke]={}:He,Le,Q)):Q===void 0?o(M)&&!isNaN(parseInt(z))?M.splice(z,1):delete M[z]:M[z]=Q}}function N(M){var z,Q={};for(z in M)d(M,z)&&(Q[z]=M[z]);return Q}var I=[].concat;function O(M){return I.apply([],M)}var Pt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map(function(M){return["Int","Uint","Float"].map(function(z){return z+M+"Array"})}))).filter(function(M){return s[M]}),L=new Set(Pt.map(function(M){return s[M]})),P=null;function V(M){return P=new WeakMap,M=function z(Q){if(!Q||typeof Q!="object")return Q;var ae=P.get(Q);if(ae)return ae;if(o(Q)){ae=[],P.set(Q,ae);for(var pe=0,ke=Q.length;pe<ke;++pe)ae.push(z(Q[pe]))}else if(L.has(Q.constructor))ae=Q;else{var Le,He=c(Q);for(Le in ae=He===Object.prototype?{}:Object.create(He),P.set(Q,ae),Q)d(Q,Le)&&(ae[Le]=z(Q[Le]))}return ae}(M),P=null,M}var F={}.toString;function J(M){return F.call(M).slice(8,-1)}var U=typeof Symbol<"u"?Symbol.iterator:"@@iterator",G=typeof U=="symbol"?function(M){var z;return M!=null&&(z=M[U])&&z.apply(M)}:function(){return null};function $(M,z){return z=M.indexOf(z),0<=z&&M.splice(z,1),0<=z}var ne={};function W(M){var z,Q,ae,pe;if(arguments.length===1){if(o(M))return M.slice();if(this===ne&&typeof M=="string")return[M];if(pe=G(M)){for(Q=[];!(ae=pe.next()).done;)Q.push(ae.value);return Q}if(M==null)return[M];if(typeof(z=M.length)!="number")return[M];for(Q=new Array(z);z--;)Q[z]=M[z];return Q}for(z=arguments.length,Q=new Array(z);z--;)Q[z]=arguments[z];return Q}var te=typeof Symbol<"u"?function(M){return M[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ft=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ua=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ft),ee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function re(M,z){this.name=M,this.message=z}function de(M,z){return M+". Errors: "+Object.keys(z).map(function(Q){return z[Q].toString()}).filter(function(Q,ae,pe){return pe.indexOf(Q)===ae}).join(`
`)}function oe(M,z,Q,ae){this.failures=z,this.failedKeys=ae,this.successCount=Q,this.message=de(M,z)}function Ie(M,z){this.name="BulkError",this.failures=Object.keys(z).map(function(Q){return z[Q]}),this.failuresByPos=z,this.message=de(M,this.failures)}b(re).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(oe).from(re),b(Ie).from(re);var je=Ua.reduce(function(M,z){return M[z]=z+"Error",M},{}),Me=re,Se=Ua.reduce(function(M,z){var Q=z+"Error";function ae(pe,ke){this.name=Q,pe?typeof pe=="string"?(this.message="".concat(pe).concat(ke?`
 `+ke:""),this.inner=ke||null):typeof pe=="object"&&(this.message="".concat(pe.name," ").concat(pe.message),this.inner=pe):(this.message=ee[z]||Q,this.inner=null)}return b(ae).from(Me),M[z]=ae,M},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var qe=ft.reduce(function(M,z){return M[z+"Error"]=Se[z],M},{}),Qe=Ua.reduce(function(M,z){return["Syntax","Type","Range"].indexOf(z)===-1&&(M[z+"Error"]=Se[z]),M},{});function We(){}function Re(M){return M}function K(M,z){return M==null||M===Re?z:function(Q){return z(M(Q))}}function ge(M,z){return function(){M.apply(this,arguments),z.apply(this,arguments)}}function Te(M,z){return M===We?z:function(){var Q=M.apply(this,arguments);Q!==void 0&&(arguments[0]=Q);var ae=this.onsuccess,pe=this.onerror;this.onsuccess=null,this.onerror=null;var ke=z.apply(this,arguments);return ae&&(this.onsuccess=this.onsuccess?ge(ae,this.onsuccess):ae),pe&&(this.onerror=this.onerror?ge(pe,this.onerror):pe),ke!==void 0?ke:Q}}function ce(M,z){return M===We?z:function(){M.apply(this,arguments);var Q=this.onsuccess,ae=this.onerror;this.onsuccess=this.onerror=null,z.apply(this,arguments),Q&&(this.onsuccess=this.onsuccess?ge(Q,this.onsuccess):Q),ae&&(this.onerror=this.onerror?ge(ae,this.onerror):ae)}}function le(M,z){return M===We?z:function(Q){var ae=M.apply(this,arguments);l(Q,ae);var pe=this.onsuccess,ke=this.onerror;return this.onsuccess=null,this.onerror=null,Q=z.apply(this,arguments),pe&&(this.onsuccess=this.onsuccess?ge(pe,this.onsuccess):pe),ke&&(this.onerror=this.onerror?ge(ke,this.onerror):ke),ae===void 0?Q===void 0?void 0:Q:l(ae,Q)}}function ie(M,z){return M===We?z:function(){return z.apply(this,arguments)!==!1&&M.apply(this,arguments)}}function Ee(M,z){return M===We?z:function(){var Q=M.apply(this,arguments);if(Q&&typeof Q.then=="function"){for(var ae=this,pe=arguments.length,ke=new Array(pe);pe--;)ke[pe]=arguments[pe];return Q.then(function(){return z.apply(ae,ke)})}return z.apply(this,arguments)}}Qe.ModifyError=oe,Qe.DexieError=re,Qe.BulkError=Ie;var Be=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ce(M){Be=M}var ct={},Tt=100,Pt=typeof Promise>"u"?[]:function(){var M=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[M,c(M),M];var z=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[z,c(z),M]}(),ft=Pt[0],Ua=Pt[1],Pt=Pt[2],Ua=Ua&&Ua.then,Ut=ft&&ft.constructor,Bt=!!Pt,tn=function(M,z){fe.push([M,z]),D&&(queueMicrotask(he),D=!1)},xe=!0,D=!0,Z=[],me=[],De=Re,we={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:We,pgp:!1,env:{},finalize:We},Ne=we,fe=[],bt=0,ot=[];function B(M){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var z=this._PSD=Ne;if(typeof M!="function"){if(M!==ct)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ye(this,this._value))}this._state=null,this._value=null,++z.ref,function Q(ae,pe){try{pe(function(ke){if(ae._state===null){if(ke===ae)throw new TypeError("A promise cannot be resolved with itself.");var Le=ae._lib&&Y();ke&&typeof ke.then=="function"?Q(ae,function(He,nt){ke instanceof B?ke._then(He,nt):ke.then(He,nt)}):(ae._state=!0,ae._value=ke,_e(ae)),Le&&H()}},ye.bind(null,ae))}catch(ke){ye(ae,ke)}}(this,M)}var $e={get:function(){var M=Ne,z=Xt;function Q(ae,pe){var ke=this,Le=!M.global&&(M!==Ne||z!==Xt),He=Le&&!Er(),nt=new B(function(st,dt){ze(ke,new it(Vt(ae,M,Le,He),Vt(pe,M,Le,He),st,dt,M))});return this._consoleTask&&(nt._consoleTask=this._consoleTask),nt}return Q.prototype=ct,Q},set:function(M){y(this,"then",M&&M.prototype===ct?$e:{get:function(){return M},set:$e.set})}};function it(M,z,Q,ae,pe){this.onFulfilled=typeof M=="function"?M:null,this.onRejected=typeof z=="function"?z:null,this.resolve=Q,this.reject=ae,this.psd=pe}function ye(M,z){var Q,ae;me.push(z),M._state===null&&(Q=M._lib&&Y(),z=De(z),M._state=!1,M._value=z,ae=M,Z.some(function(pe){return pe._value===ae._value})||Z.push(ae),_e(M),Q&&H())}function _e(M){var z=M._listeners;M._listeners=[];for(var Q=0,ae=z.length;Q<ae;++Q)ze(M,z[Q]);var pe=M._PSD;--pe.ref||pe.finalize(),bt===0&&(++bt,tn(function(){--bt==0&&X()},[]))}function ze(M,z){if(M._state!==null){var Q=M._state?z.onFulfilled:z.onRejected;if(Q===null)return(M._state?z.resolve:z.reject)(M._value);++z.psd.ref,++bt,tn(kt,[Q,M,z])}else M._listeners.push(z)}function kt(M,z,Q){try{var ae,pe=z._value;!z._state&&me.length&&(me=[]),ae=Be&&z._consoleTask?z._consoleTask.run(function(){return M(pe)}):M(pe),z._state||me.indexOf(pe)!==-1||function(ke){for(var Le=Z.length;Le;)if(Z[--Le]._value===ke._value)return Z.splice(Le,1)}(z),Q.resolve(ae)}catch(ke){Q.reject(ke)}finally{--bt==0&&X(),--Q.psd.ref||Q.psd.finalize()}}function he(){et(we,function(){Y()&&H()})}function Y(){var M=xe;return D=xe=!1,M}function H(){var M,z,Q;do for(;0<fe.length;)for(M=fe,fe=[],Q=M.length,z=0;z<Q;++z){var ae=M[z];ae[0].apply(null,ae[1])}while(0<fe.length);D=xe=!0}function X(){var M=Z;Z=[],M.forEach(function(ae){ae._PSD.onunhandled.call(null,ae._value,ae)});for(var z=ot.slice(0),Q=z.length;Q;)z[--Q]()}function be(M){return new B(ct,!1,M)}function Oe(M,z){var Q=Ne;return function(){var ae=Y(),pe=Ne;try{return vr(Q,!0),M.apply(this,arguments)}catch(ke){z&&z(ke)}finally{vr(pe,!1),ae&&H()}}}h(B.prototype,{then:$e,_then:function(M,z){ze(this,new it(null,null,M,z,Ne))},catch:function(M){if(arguments.length===1)return this.then(null,M);var z=M,Q=arguments[1];return typeof z=="function"?this.then(null,function(ae){return(ae instanceof z?Q:be)(ae)}):this.then(null,function(ae){return(ae&&ae.name===z?Q:be)(ae)})},finally:function(M){return this.then(function(z){return B.resolve(M()).then(function(){return z})},function(z){return B.resolve(M()).then(function(){return be(z)})})},timeout:function(M,z){var Q=this;return M<1/0?new B(function(ae,pe){var ke=setTimeout(function(){return pe(new Se.Timeout(z))},M);Q.then(ae,pe).finally(clearTimeout.bind(null,ke))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(B.prototype,Symbol.toStringTag,"Dexie.Promise"),we.env=hn(),h(B,{all:function(){var M=W.apply(null,arguments).map(ti);return new B(function(z,Q){M.length===0&&z([]);var ae=M.length;M.forEach(function(pe,ke){return B.resolve(pe).then(function(Le){M[ke]=Le,--ae||z(M)},Q)})})},resolve:function(M){return M instanceof B?M:M&&typeof M.then=="function"?new B(function(z,Q){M.then(z,Q)}):new B(ct,!0,M)},reject:be,race:function(){var M=W.apply(null,arguments).map(ti);return new B(function(z,Q){M.map(function(ae){return B.resolve(ae).then(z,Q)})})},PSD:{get:function(){return Ne},set:function(M){return Ne=M}},totalEchoes:{get:function(){return Xt}},newPSD:un,usePSD:et,scheduler:{get:function(){return tn},set:function(M){tn=M}},rejectionMapper:{get:function(){return De},set:function(M){De=M}},follow:function(M,z){return new B(function(Q,ae){return un(function(pe,ke){var Le=Ne;Le.unhandleds=[],Le.onunhandled=ke,Le.finalize=ge(function(){var He,nt=this;He=function(){nt.unhandleds.length===0?pe():ke(nt.unhandleds[0])},ot.push(function st(){He(),ot.splice(ot.indexOf(st),1)}),++bt,tn(function(){--bt==0&&X()},[])},Le.finalize),M()},z,Q,ae)})}}),Ut&&(Ut.allSettled&&y(B,"allSettled",function(){var M=W.apply(null,arguments).map(ti);return new B(function(z){M.length===0&&z([]);var Q=M.length,ae=new Array(Q);M.forEach(function(pe,ke){return B.resolve(pe).then(function(Le){return ae[ke]={status:"fulfilled",value:Le}},function(Le){return ae[ke]={status:"rejected",reason:Le}}).then(function(){return--Q||z(ae)})})})}),Ut.any&&typeof AggregateError<"u"&&y(B,"any",function(){var M=W.apply(null,arguments).map(ti);return new B(function(z,Q){M.length===0&&Q(new AggregateError([]));var ae=M.length,pe=new Array(ae);M.forEach(function(ke,Le){return B.resolve(ke).then(function(He){return z(He)},function(He){pe[Le]=He,--ae||Q(new AggregateError(pe))})})})}),Ut.withResolvers&&(B.withResolvers=Ut.withResolvers));var Ge={awaits:0,echoes:0,id:0},wt=0,en=[],$n=0,Xt=0,nn=0;function un(M,z,Q,ae){var pe=Ne,ke=Object.create(pe);return ke.parent=pe,ke.ref=0,ke.global=!1,ke.id=++nn,we.env,ke.env=Bt?{Promise:B,PromiseProp:{value:B,configurable:!0,writable:!0},all:B.all,race:B.race,allSettled:B.allSettled,any:B.any,resolve:B.resolve,reject:B.reject}:{},z&&l(ke,z),++pe.ref,ke.finalize=function(){--this.parent.ref||this.parent.finalize()},ae=et(ke,M,Q,ae),ke.ref===0&&ke.finalize(),ae}function pr(){return Ge.id||(Ge.id=++wt),++Ge.awaits,Ge.echoes+=Tt,Ge.id}function Er(){return!!Ge.awaits&&(--Ge.awaits==0&&(Ge.id=0),Ge.echoes=Ge.awaits*Tt,!0)}function ti(M){return Ge.echoes&&M&&M.constructor===Ut?(pr(),M.then(function(z){return Er(),z},function(z){return Er(),tr(z)})):M}function ni(){var M=en[en.length-1];en.pop(),vr(M,!1)}function vr(M,z){var Q,ae=Ne;(z?!Ge.echoes||$n++&&M===Ne:!$n||--$n&&M===Ne)||queueMicrotask(z?(function(pe){++Xt,Ge.echoes&&--Ge.echoes!=0||(Ge.echoes=Ge.awaits=Ge.id=0),en.push(Ne),vr(pe,!0)}).bind(null,M):ni),M!==Ne&&(Ne=M,ae===we&&(we.env=hn()),Bt&&(Q=we.env.Promise,z=M.env,(ae.global||M.global)&&(Object.defineProperty(s,"Promise",z.PromiseProp),Q.all=z.all,Q.race=z.race,Q.resolve=z.resolve,Q.reject=z.reject,z.allSettled&&(Q.allSettled=z.allSettled),z.any&&(Q.any=z.any))))}function hn(){var M=s.Promise;return Bt?{Promise:M,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{}}function et(M,z,Q,ae,pe){var ke=Ne;try{return vr(M,!0),z(Q,ae,pe)}finally{vr(ke,!1)}}function Vt(M,z,Q,ae){return typeof M!="function"?M:function(){var pe=Ne;Q&&pr(),vr(z,!0);try{return M.apply(this,arguments)}finally{vr(pe,!1),ae&&queueMicrotask(Er)}}}function pn(M){Promise===Ut&&Ge.echoes===0?$n===0?M():enqueueNativeMicroTask(M):setTimeout(M,0)}(""+Ua).indexOf("[native code]")===-1&&(pr=Er=We);var tr=B.reject,Ci="",Jr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ms="String expected.",is=[],Ba="__dbnames",oa="readonly",zi="readwrite";function Oo(M,z){return M?z?function(){return M.apply(this,arguments)&&z.apply(this,arguments)}:M:z}var hl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ef(M){return typeof M!="string"||/\./.test(M)?function(z){return z}:function(z){return z[M]===void 0&&M in z&&delete(z=V(z))[M],z}}function Hm(){throw Se.Type()}function jr(M,z){try{var Q=cb(M),ae=cb(z);if(Q!==ae)return Q==="Array"?1:ae==="Array"?-1:Q==="binary"?1:ae==="binary"?-1:Q==="string"?1:ae==="string"?-1:Q==="Date"?1:ae!=="Date"?NaN:-1;switch(Q){case"number":case"Date":case"string":return z<M?1:M<z?-1:0;case"binary":return function(pe,ke){for(var Le=pe.length,He=ke.length,nt=Le<He?Le:He,st=0;st<nt;++st)if(pe[st]!==ke[st])return pe[st]<ke[st]?-1:1;return Le===He?0:Le<He?-1:1}($a(M),$a(z));case"Array":return function(pe,ke){for(var Le=pe.length,He=ke.length,nt=Le<He?Le:He,st=0;st<nt;++st){var dt=jr(pe[st],ke[st]);if(dt!==0)return dt}return Le===He?0:Le<He?-1:1}(M,z)}}catch{}return NaN}function cb(M){var z=typeof M;return z!="object"?z:ArrayBuffer.isView(M)?"binary":(M=J(M),M==="ArrayBuffer"?"binary":M)}function $a(M){return M instanceof Uint8Array?M:ArrayBuffer.isView(M)?new Uint8Array(M.buffer,M.byteOffset,M.byteLength):new Uint8Array(M)}var ub=(ki.prototype._trans=function(M,z,Q){var ae=this._tx||Ne.trans,pe=this.name,ke=Be&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(M==="readonly"?"read":"write"," ").concat(this.name));function Le(st,dt,Xe){if(!Xe.schema[pe])throw new Se.NotFound("Table "+pe+" not part of transaction");return z(Xe.idbtrans,Xe)}var He=Y();try{var nt=ae&&ae.db._novip===this.db._novip?ae===Ne.trans?ae._promise(M,Le,Q):un(function(){return ae._promise(M,Le,Q)},{trans:ae,transless:Ne.transless||Ne}):function st(dt,Xe,pt,tt){if(dt.idbdb&&(dt._state.openComplete||Ne.letThrough||dt._vip)){var ut=dt._createTransaction(Xe,pt,dt._dbSchema);try{ut.create(),dt._state.PR1398_maxLoop=3}catch(mt){return mt.name===je.InvalidState&&dt.isOpen()&&0<--dt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),dt.close({disableAutoOpen:!1}),dt.open().then(function(){return st(dt,Xe,pt,tt)})):tr(mt)}return ut._promise(Xe,function(mt,at){return un(function(){return Ne.trans=ut,tt(mt,at,ut)})}).then(function(mt){if(Xe==="readwrite")try{ut.idbtrans.commit()}catch{}return Xe==="readonly"?mt:ut._completion.then(function(){return mt})})}if(dt._state.openComplete)return tr(new Se.DatabaseClosed(dt._state.dbOpenError));if(!dt._state.isBeingOpened){if(!dt._state.autoOpen)return tr(new Se.DatabaseClosed);dt.open().catch(We)}return dt._state.dbReadyPromise.then(function(){return st(dt,Xe,pt,tt)})}(this.db,M,[this.name],Le);return ke&&(nt._consoleTask=ke,nt=nt.catch(function(st){return console.trace(st),tr(st)})),nt}finally{He&&H()}},ki.prototype.get=function(M,z){var Q=this;return M&&M.constructor===Object?this.where(M).first(z):M==null?tr(new Se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(ae){return Q.core.get({trans:ae,key:M}).then(function(pe){return Q.hook.reading.fire(pe)})}).then(z)},ki.prototype.where=function(M){if(typeof M=="string")return new this.db.WhereClause(this,M);if(o(M))return new this.db.WhereClause(this,"[".concat(M.join("+"),"]"));var z=a(M);if(z.length===1)return this.where(z[0]).equals(M[z[0]]);var Q=this.schema.indexes.concat(this.schema.primKey).filter(function(He){if(He.compound&&z.every(function(st){return 0<=He.keyPath.indexOf(st)})){for(var nt=0;nt<z.length;++nt)if(z.indexOf(He.keyPath[nt])===-1)return!1;return!0}return!1}).sort(function(He,nt){return He.keyPath.length-nt.keyPath.length})[0];if(Q&&this.db._maxKey!==Ci){var ke=Q.keyPath.slice(0,z.length);return this.where(ke).equals(ke.map(function(nt){return M[nt]}))}!Q&&Be&&console.warn("The query ".concat(JSON.stringify(M)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(z.join("+"),"]"));var ae=this.schema.idxByName;function pe(He,nt){return jr(He,nt)===0}var Le=z.reduce(function(Xe,nt){var st=Xe[0],dt=Xe[1],Xe=ae[nt],pt=M[nt];return[st||Xe,st||!Xe?Oo(dt,Xe&&Xe.multi?function(tt){return tt=A(tt,nt),o(tt)&&tt.some(function(ut){return pe(pt,ut)})}:function(tt){return pe(pt,A(tt,nt))}):dt]},[null,null]),ke=Le[0],Le=Le[1];return ke?this.where(ke.name).equals(M[ke.keyPath]).filter(Le):Q?this.filter(Le):this.where(z).equals("")},ki.prototype.filter=function(M){return this.toCollection().and(M)},ki.prototype.count=function(M){return this.toCollection().count(M)},ki.prototype.offset=function(M){return this.toCollection().offset(M)},ki.prototype.limit=function(M){return this.toCollection().limit(M)},ki.prototype.each=function(M){return this.toCollection().each(M)},ki.prototype.toArray=function(M){return this.toCollection().toArray(M)},ki.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ki.prototype.orderBy=function(M){return new this.db.Collection(new this.db.WhereClause(this,o(M)?"[".concat(M.join("+"),"]"):M))},ki.prototype.reverse=function(){return this.toCollection().reverse()},ki.prototype.mapToClass=function(M){var z,Q=this.db,ae=this.name;function pe(){return z!==null&&z.apply(this,arguments)||this}(this.schema.mappedClass=M).prototype instanceof Hm&&(function(nt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Class extends value "+String(st)+" is not a constructor or null");function dt(){this.constructor=nt}n(nt,st),nt.prototype=st===null?Object.create(st):(dt.prototype=st.prototype,new dt)}(pe,z=M),Object.defineProperty(pe.prototype,"db",{get:function(){return Q},enumerable:!1,configurable:!0}),pe.prototype.table=function(){return ae},M=pe);for(var ke=new Set,Le=M.prototype;Le;Le=c(Le))Object.getOwnPropertyNames(Le).forEach(function(nt){return ke.add(nt)});function He(nt){if(!nt)return nt;var st,dt=Object.create(M.prototype);for(st in nt)if(!ke.has(st))try{dt[st]=nt[st]}catch{}return dt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=He,this.hook("reading",He),M},ki.prototype.defineClass=function(){return this.mapToClass(function(M){l(this,M)})},ki.prototype.add=function(M,z){var Q=this,ae=this.schema.primKey,pe=ae.auto,ke=ae.keyPath,Le=M;return ke&&pe&&(Le=ef(ke)(M)),this._trans("readwrite",function(He){return Q.core.mutate({trans:He,type:"add",keys:z!=null?[z]:null,values:[Le]})}).then(function(He){return He.numFailures?B.reject(He.failures[0]):He.lastResult}).then(function(He){if(ke)try{R(M,ke,He)}catch{}return He})},ki.prototype.update=function(M,z){return typeof M!="object"||o(M)?this.where(":id").equals(M).modify(z):(M=A(M,this.schema.primKey.keyPath),M===void 0?tr(new Se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(M).modify(z))},ki.prototype.put=function(M,z){var Q=this,ae=this.schema.primKey,pe=ae.auto,ke=ae.keyPath,Le=M;return ke&&pe&&(Le=ef(ke)(M)),this._trans("readwrite",function(He){return Q.core.mutate({trans:He,type:"put",values:[Le],keys:z!=null?[z]:null})}).then(function(He){return He.numFailures?B.reject(He.failures[0]):He.lastResult}).then(function(He){if(ke)try{R(M,ke,He)}catch{}return He})},ki.prototype.delete=function(M){var z=this;return this._trans("readwrite",function(Q){return z.core.mutate({trans:Q,type:"delete",keys:[M]})}).then(function(Q){return Q.numFailures?B.reject(Q.failures[0]):void 0})},ki.prototype.clear=function(){var M=this;return this._trans("readwrite",function(z){return M.core.mutate({trans:z,type:"deleteRange",range:hl})}).then(function(z){return z.numFailures?B.reject(z.failures[0]):void 0})},ki.prototype.bulkGet=function(M){var z=this;return this._trans("readonly",function(Q){return z.core.getMany({keys:M,trans:Q}).then(function(ae){return ae.map(function(pe){return z.hook.reading.fire(pe)})})})},ki.prototype.bulkAdd=function(M,z,Q){var ae=this,pe=Array.isArray(z)?z:void 0,ke=(Q=Q||(pe?void 0:z))?Q.allKeys:void 0;return this._trans("readwrite",function(Le){var st=ae.schema.primKey,He=st.auto,st=st.keyPath;if(st&&pe)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(pe&&pe.length!==M.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var nt=M.length,st=st&&He?M.map(ef(st)):M;return ae.core.mutate({trans:Le,type:"add",keys:pe,values:st,wantResults:ke}).then(function(ut){var Xe=ut.numFailures,pt=ut.results,tt=ut.lastResult,ut=ut.failures;if(Xe===0)return ke?pt:tt;throw new Ie("".concat(ae.name,".bulkAdd(): ").concat(Xe," of ").concat(nt," operations failed"),ut)})})},ki.prototype.bulkPut=function(M,z,Q){var ae=this,pe=Array.isArray(z)?z:void 0,ke=(Q=Q||(pe?void 0:z))?Q.allKeys:void 0;return this._trans("readwrite",function(Le){var st=ae.schema.primKey,He=st.auto,st=st.keyPath;if(st&&pe)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(pe&&pe.length!==M.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var nt=M.length,st=st&&He?M.map(ef(st)):M;return ae.core.mutate({trans:Le,type:"put",keys:pe,values:st,wantResults:ke}).then(function(ut){var Xe=ut.numFailures,pt=ut.results,tt=ut.lastResult,ut=ut.failures;if(Xe===0)return ke?pt:tt;throw new Ie("".concat(ae.name,".bulkPut(): ").concat(Xe," of ").concat(nt," operations failed"),ut)})})},ki.prototype.bulkUpdate=function(M){var z=this,Q=this.core,ae=M.map(function(Le){return Le.key}),pe=M.map(function(Le){return Le.changes}),ke=[];return this._trans("readwrite",function(Le){return Q.getMany({trans:Le,keys:ae,cache:"clone"}).then(function(He){var nt=[],st=[];M.forEach(function(Xe,pt){var tt=Xe.key,ut=Xe.changes,mt=He[pt];if(mt){for(var at=0,_t=Object.keys(ut);at<_t.length;at++){var At=_t[at],Rt=ut[At];if(At===z.schema.primKey.keyPath){if(jr(Rt,tt)!==0)throw new Se.Constraint("Cannot update primary key in bulkUpdate()")}else R(mt,At,Rt)}ke.push(pt),nt.push(tt),st.push(mt)}});var dt=nt.length;return Q.mutate({trans:Le,type:"put",keys:nt,values:st,updates:{keys:ae,changeSpecs:pe}}).then(function(Xe){var pt=Xe.numFailures,tt=Xe.failures;if(pt===0)return dt;for(var ut=0,mt=Object.keys(tt);ut<mt.length;ut++){var at,_t=mt[ut],At=ke[Number(_t)];At!=null&&(at=tt[_t],delete tt[_t],tt[At]=at)}throw new Ie("".concat(z.name,".bulkUpdate(): ").concat(pt," of ").concat(dt," operations failed"),tt)})})})},ki.prototype.bulkDelete=function(M){var z=this,Q=M.length;return this._trans("readwrite",function(ae){return z.core.mutate({trans:ae,type:"delete",keys:M})}).then(function(Le){var pe=Le.numFailures,ke=Le.lastResult,Le=Le.failures;if(pe===0)return ke;throw new Ie("".concat(z.name,".bulkDelete(): ").concat(pe," of ").concat(Q," operations failed"),Le)})},ki);function ki(){}function jc(M){function z(Le,He){if(He){for(var nt=arguments.length,st=new Array(nt-1);--nt;)st[nt-1]=arguments[nt];return Q[Le].subscribe.apply(null,st),M}if(typeof Le=="string")return Q[Le]}var Q={};z.addEventType=ke;for(var ae=1,pe=arguments.length;ae<pe;++ae)ke(arguments[ae]);return z;function ke(Le,He,nt){if(typeof Le!="object"){var st;He=He||ie;var dt={subscribers:[],fire:nt=nt||We,subscribe:function(Xe){dt.subscribers.indexOf(Xe)===-1&&(dt.subscribers.push(Xe),dt.fire=He(dt.fire,Xe))},unsubscribe:function(Xe){dt.subscribers=dt.subscribers.filter(function(pt){return pt!==Xe}),dt.fire=dt.subscribers.reduce(He,nt)}};return Q[Le]=z[Le]=dt}a(st=Le).forEach(function(Xe){var pt=st[Xe];if(o(pt))ke(Xe,st[Xe][0],st[Xe][1]);else{if(pt!=="asap")throw new Se.InvalidArgument("Invalid event config");var tt=ke(Xe,Re,function(){for(var ut=arguments.length,mt=new Array(ut);ut--;)mt[ut]=arguments[ut];tt.subscribers.forEach(function(at){k(function(){at.apply(null,mt)})})})}})}}function tf(M,z){return b(z).from({prototype:M}),z}function Zl(M,z){return!(M.filter||M.algorithm||M.or)&&(z?M.justLimit:!M.replayFilter)}function db(M,z){M.filter=Oo(M.filter,z)}function wa(M,z,Q){var ae=M.replayFilter;M.replayFilter=ae?function(){return Oo(ae(),z())}:z,M.justLimit=Q&&!ae}function nf(M,z){if(M.isPrimKey)return z.primaryKey;var Q=z.getIndexByKeyPath(M.index);if(!Q)throw new Se.Schema("KeyPath "+M.index+" on object store "+z.name+" is not indexed");return Q}function fb(M,z,Q){var ae=nf(M,z.schema);return z.openCursor({trans:Q,values:!M.keysOnly,reverse:M.dir==="prev",unique:!!M.unique,query:{index:ae,range:M.range}})}function rf(M,z,Q,ae){var pe=M.replayFilter?Oo(M.filter,M.replayFilter()):M.filter;if(M.or){var ke={},Le=function(He,nt,st){var dt,Xe;pe&&!pe(nt,st,function(pt){return nt.stop(pt)},function(pt){return nt.fail(pt)})||((Xe=""+(dt=nt.primaryKey))=="[object ArrayBuffer]"&&(Xe=""+new Uint8Array(dt)),d(ke,Xe)||(ke[Xe]=!0,z(He,nt,st)))};return Promise.all([M.or._iterate(Le,Q),Fu(fb(M,ae,Q),M.algorithm,Le,!M.keysOnly&&M.valueMapper)])}return Fu(fb(M,ae,Q),Oo(M.algorithm,pe),z,!M.keysOnly&&M.valueMapper)}function Fu(M,z,Q,ae){var pe=Oe(ae?function(ke,Le,He){return Q(ae(ke),Le,He)}:Q);return M.then(function(ke){if(ke)return ke.start(function(){var Le=function(){return ke.continue()};z&&!z(ke,function(He){return Le=He},function(He){ke.stop(He),Le=We},function(He){ke.fail(He),Le=We})||pe(ke.value,ke,function(He){return Le=He}),Le()})})}var sf=(hb.prototype.execute=function(M){var z=this["@@propmod"];if(z.add!==void 0){var Q=z.add;if(o(Q))return i(i([],o(M)?M:[],!0),Q).sort();if(typeof Q=="number")return(Number(M)||0)+Q;if(typeof Q=="bigint")try{return BigInt(M)+Q}catch{return BigInt(0)+Q}throw new TypeError("Invalid term ".concat(Q))}if(z.remove!==void 0){var ae=z.remove;if(o(ae))return o(M)?M.filter(function(pe){return!ae.includes(pe)}).sort():[];if(typeof ae=="number")return Number(M)-ae;if(typeof ae=="bigint")try{return BigInt(M)-ae}catch{return BigInt(0)-ae}throw new TypeError("Invalid subtrahend ".concat(ae))}return Q=(Q=z.replacePrefix)===null||Q===void 0?void 0:Q[0],Q&&typeof M=="string"&&M.startsWith(Q)?z.replacePrefix[1]+M.substring(Q.length):M},hb);function hb(M){this["@@propmod"]=M}var af=(qr.prototype._read=function(M,z){var Q=this._ctx;return Q.error?Q.table._trans(null,tr.bind(null,Q.error)):Q.table._trans("readonly",M).then(z)},qr.prototype._write=function(M){var z=this._ctx;return z.error?z.table._trans(null,tr.bind(null,z.error)):z.table._trans("readwrite",M,"locked")},qr.prototype._addAlgorithm=function(M){var z=this._ctx;z.algorithm=Oo(z.algorithm,M)},qr.prototype._iterate=function(M,z){return rf(this._ctx,M,z,this._ctx.table.core)},qr.prototype.clone=function(M){var z=Object.create(this.constructor.prototype),Q=Object.create(this._ctx);return M&&l(Q,M),z._ctx=Q,z},qr.prototype.raw=function(){return this._ctx.valueMapper=null,this},qr.prototype.each=function(M){var z=this._ctx;return this._read(function(Q){return rf(z,M,Q,z.table.core)})},qr.prototype.count=function(M){var z=this;return this._read(function(Q){var ae=z._ctx,pe=ae.table.core;if(Zl(ae,!0))return pe.count({trans:Q,query:{index:nf(ae,pe.schema),range:ae.range}}).then(function(Le){return Math.min(Le,ae.limit)});var ke=0;return rf(ae,function(){return++ke,!1},Q,pe).then(function(){return ke})}).then(M)},qr.prototype.sortBy=function(M,z){var Q=M.split(".").reverse(),ae=Q[0],pe=Q.length-1;function ke(nt,st){return st?ke(nt[Q[st]],st-1):nt[ae]}var Le=this._ctx.dir==="next"?1:-1;function He(nt,st){return jr(ke(nt,pe),ke(st,pe))*Le}return this.toArray(function(nt){return nt.sort(He)}).then(z)},qr.prototype.toArray=function(M){var z=this;return this._read(function(Q){var ae=z._ctx;if(ae.dir==="next"&&Zl(ae,!0)&&0<ae.limit){var pe=ae.valueMapper,ke=nf(ae,ae.table.core.schema);return ae.table.core.query({trans:Q,limit:ae.limit,values:!0,query:{index:ke,range:ae.range}}).then(function(He){return He=He.result,pe?He.map(pe):He})}var Le=[];return rf(ae,function(He){return Le.push(He)},Q,ae.table.core).then(function(){return Le})},M)},qr.prototype.offset=function(M){var z=this._ctx;return M<=0||(z.offset+=M,Zl(z)?wa(z,function(){var Q=M;return function(ae,pe){return Q===0||(Q===1?--Q:pe(function(){ae.advance(Q),Q=0}),!1)}}):wa(z,function(){var Q=M;return function(){return--Q<0}})),this},qr.prototype.limit=function(M){return this._ctx.limit=Math.min(this._ctx.limit,M),wa(this._ctx,function(){var z=M;return function(Q,ae,pe){return--z<=0&&ae(pe),0<=z}},!0),this},qr.prototype.until=function(M,z){return db(this._ctx,function(Q,ae,pe){return!M(Q.value)||(ae(pe),z)}),this},qr.prototype.first=function(M){return this.limit(1).toArray(function(z){return z[0]}).then(M)},qr.prototype.last=function(M){return this.reverse().first(M)},qr.prototype.filter=function(M){var z;return db(this._ctx,function(Q){return M(Q.value)}),(z=this._ctx).isMatch=Oo(z.isMatch,M),this},qr.prototype.and=function(M){return this.filter(M)},qr.prototype.or=function(M){return new this.db.WhereClause(this._ctx.table,M,this)},qr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qr.prototype.desc=function(){return this.reverse()},qr.prototype.eachKey=function(M){var z=this._ctx;return z.keysOnly=!z.isMatch,this.each(function(Q,ae){M(ae.key,ae)})},qr.prototype.eachUniqueKey=function(M){return this._ctx.unique="unique",this.eachKey(M)},qr.prototype.eachPrimaryKey=function(M){var z=this._ctx;return z.keysOnly=!z.isMatch,this.each(function(Q,ae){M(ae.primaryKey,ae)})},qr.prototype.keys=function(M){var z=this._ctx;z.keysOnly=!z.isMatch;var Q=[];return this.each(function(ae,pe){Q.push(pe.key)}).then(function(){return Q}).then(M)},qr.prototype.primaryKeys=function(M){var z=this._ctx;if(z.dir==="next"&&Zl(z,!0)&&0<z.limit)return this._read(function(ae){var pe=nf(z,z.table.core.schema);return z.table.core.query({trans:ae,values:!1,limit:z.limit,query:{index:pe,range:z.range}})}).then(function(ae){return ae.result}).then(M);z.keysOnly=!z.isMatch;var Q=[];return this.each(function(ae,pe){Q.push(pe.primaryKey)}).then(function(){return Q}).then(M)},qr.prototype.uniqueKeys=function(M){return this._ctx.unique="unique",this.keys(M)},qr.prototype.firstKey=function(M){return this.limit(1).keys(function(z){return z[0]}).then(M)},qr.prototype.lastKey=function(M){return this.reverse().firstKey(M)},qr.prototype.distinct=function(){var M=this._ctx,M=M.index&&M.table.schema.idxByName[M.index];if(!M||!M.multi)return this;var z={};return db(this._ctx,function(pe){var ae=pe.primaryKey.toString(),pe=d(z,ae);return z[ae]=!0,!pe}),this},qr.prototype.modify=function(M){var z=this,Q=this._ctx;return this._write(function(ae){var pe,ke,Le;Le=typeof M=="function"?M:(pe=a(M),ke=pe.length,function(at){for(var _t=!1,At=0;At<ke;++At){var Rt=pe[At],jt=M[Rt],Yt=A(at,Rt);jt instanceof sf?(R(at,Rt,jt.execute(Yt)),_t=!0):Yt!==jt&&(R(at,Rt,jt),_t=!0)}return _t});var He=Q.table.core,Xe=He.schema.primaryKey,nt=Xe.outbound,st=Xe.extractKey,dt=200,Xe=z.db._options.modifyChunkSize;Xe&&(dt=typeof Xe=="object"?Xe[He.name]||Xe["*"]||200:Xe);function pt(at,Rt){var At=Rt.failures,Rt=Rt.numFailures;ut+=at-Rt;for(var jt=0,Yt=a(At);jt<Yt.length;jt++){var rn=Yt[jt];tt.push(At[rn])}}var tt=[],ut=0,mt=[];return z.clone().primaryKeys().then(function(at){function _t(Rt){var jt=Math.min(dt,at.length-Rt);return He.getMany({trans:ae,keys:at.slice(Rt,Rt+jt),cache:"immutable"}).then(function(Yt){for(var rn=[],Ht=[],Jt=nt?[]:null,an=[],Gt=0;Gt<jt;++Gt){var mn=Yt[Gt],Fn={value:V(mn),primKey:at[Rt+Gt]};Le.call(Fn,Fn.value,Fn)!==!1&&(Fn.value==null?an.push(at[Rt+Gt]):nt||jr(st(mn),st(Fn.value))===0?(Ht.push(Fn.value),nt&&Jt.push(at[Rt+Gt])):(an.push(at[Rt+Gt]),rn.push(Fn.value)))}return Promise.resolve(0<rn.length&&He.mutate({trans:ae,type:"add",values:rn}).then(function(qn){for(var fr in qn.failures)an.splice(parseInt(fr),1);pt(rn.length,qn)})).then(function(){return(0<Ht.length||At&&typeof M=="object")&&He.mutate({trans:ae,type:"put",keys:Jt,values:Ht,criteria:At,changeSpec:typeof M!="function"&&M,isAdditionalChunk:0<Rt}).then(function(qn){return pt(Ht.length,qn)})}).then(function(){return(0<an.length||At&&M===Gm)&&He.mutate({trans:ae,type:"delete",keys:an,criteria:At,isAdditionalChunk:0<Rt}).then(function(qn){return pt(an.length,qn)})}).then(function(){return at.length>Rt+jt&&_t(Rt+dt)})})}var At=Zl(Q)&&Q.limit===1/0&&(typeof M!="function"||M===Gm)&&{index:Q.index,range:Q.range};return _t(0).then(function(){if(0<tt.length)throw new oe("Error modifying one or more objects",tt,ut,mt);return at.length})})})},qr.prototype.delete=function(){var M=this._ctx,z=M.range;return Zl(M)&&(M.isPrimKey||z.type===3)?this._write(function(Q){var ae=M.table.core.schema.primaryKey,pe=z;return M.table.core.count({trans:Q,query:{index:ae,range:pe}}).then(function(ke){return M.table.core.mutate({trans:Q,type:"deleteRange",range:pe}).then(function(Le){var He=Le.failures;if(Le.lastResult,Le.results,Le=Le.numFailures,Le)throw new oe("Could not delete some values",Object.keys(He).map(function(nt){return He[nt]}),ke-Le);return ke-Le})})}):this.modify(Gm)},qr);function qr(){}var Gm=function(M,z){return z.value=null};function J1(M,z){return M<z?-1:M===z?0:1}function pb(M,z){return z<M?-1:M===z?0:1}function za(M,z,Q){return M=M instanceof Bu?new M.Collection(M):M,M._ctx.error=new(Q||TypeError)(z),M}function of(M){return new M.Collection(M,function(){return Km("")}).limit(0)}function Lu(M,z,Q,ae){var pe,ke,Le,He,nt,st,dt,Xe=Q.length;if(!Q.every(function(ut){return typeof ut=="string"}))return za(M,Ms);function pt(ut){pe=ut==="next"?function(at){return at.toUpperCase()}:function(at){return at.toLowerCase()},ke=ut==="next"?function(at){return at.toLowerCase()}:function(at){return at.toUpperCase()},Le=ut==="next"?J1:pb;var mt=Q.map(function(at){return{lower:ke(at),upper:pe(at)}}).sort(function(at,_t){return Le(at.lower,_t.lower)});He=mt.map(function(at){return at.upper}),nt=mt.map(function(at){return at.lower}),dt=(st=ut)==="next"?"":ae}pt("next"),M=new M.Collection(M,function(){return pl(He[0],nt[Xe-1]+ae)}),M._ondirectionchange=function(ut){pt(ut)};var tt=0;return M._addAlgorithm(function(ut,mt,at){var _t=ut.key;if(typeof _t!="string")return!1;var At=ke(_t);if(z(At,nt,tt))return!0;for(var Rt=null,jt=tt;jt<Xe;++jt){var Yt=function(rn,Ht,Jt,an,Gt,mn){for(var Fn=Math.min(rn.length,an.length),qn=-1,fr=0;fr<Fn;++fr){var la=Ht[fr];if(la!==an[fr])return Gt(rn[fr],Jt[fr])<0?rn.substr(0,fr)+Jt[fr]+Jt.substr(fr+1):Gt(rn[fr],an[fr])<0?rn.substr(0,fr)+an[fr]+Jt.substr(fr+1):0<=qn?rn.substr(0,qn)+Ht[qn]+Jt.substr(qn+1):null;Gt(rn[fr],la)<0&&(qn=fr)}return Fn<an.length&&mn==="next"?rn+Jt.substr(rn.length):Fn<rn.length&&mn==="prev"?rn.substr(0,Jt.length):qn<0?null:rn.substr(0,qn)+an[qn]+Jt.substr(qn+1)}(_t,At,He[jt],nt[jt],Le,st);Yt===null&&Rt===null?tt=jt+1:(Rt===null||0<Le(Rt,Yt))&&(Rt=Yt)}return mt(Rt!==null?function(){ut.continue(Rt+dt)}:at),!1}),M}function pl(M,z,Q,ae){return{type:2,lower:M,upper:z,lowerOpen:Q,upperOpen:ae}}function Km(M){return{type:1,lower:M,upper:M}}var Bu=(Object.defineProperty(Pi.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Pi.prototype.between=function(M,z,Q,ae){Q=Q!==!1,ae=ae===!0;try{return 0<this._cmp(M,z)||this._cmp(M,z)===0&&(Q||ae)&&(!Q||!ae)?of(this):new this.Collection(this,function(){return pl(M,z,!Q,!ae)})}catch{return za(this,Jr)}},Pi.prototype.equals=function(M){return M==null?za(this,Jr):new this.Collection(this,function(){return Km(M)})},Pi.prototype.above=function(M){return M==null?za(this,Jr):new this.Collection(this,function(){return pl(M,void 0,!0)})},Pi.prototype.aboveOrEqual=function(M){return M==null?za(this,Jr):new this.Collection(this,function(){return pl(M,void 0,!1)})},Pi.prototype.below=function(M){return M==null?za(this,Jr):new this.Collection(this,function(){return pl(void 0,M,!1,!0)})},Pi.prototype.belowOrEqual=function(M){return M==null?za(this,Jr):new this.Collection(this,function(){return pl(void 0,M)})},Pi.prototype.startsWith=function(M){return typeof M!="string"?za(this,Ms):this.between(M,M+Ci,!0,!0)},Pi.prototype.startsWithIgnoreCase=function(M){return M===""?this.startsWith(M):Lu(this,function(z,Q){return z.indexOf(Q[0])===0},[M],Ci)},Pi.prototype.equalsIgnoreCase=function(M){return Lu(this,function(z,Q){return z===Q[0]},[M],"")},Pi.prototype.anyOfIgnoreCase=function(){var M=W.apply(ne,arguments);return M.length===0?of(this):Lu(this,function(z,Q){return Q.indexOf(z)!==-1},M,"")},Pi.prototype.startsWithAnyOfIgnoreCase=function(){var M=W.apply(ne,arguments);return M.length===0?of(this):Lu(this,function(z,Q){return Q.some(function(ae){return z.indexOf(ae)===0})},M,Ci)},Pi.prototype.anyOf=function(){var M=this,z=W.apply(ne,arguments),Q=this._cmp;try{z.sort(Q)}catch{return za(this,Jr)}if(z.length===0)return of(this);var ae=new this.Collection(this,function(){return pl(z[0],z[z.length-1])});ae._ondirectionchange=function(ke){Q=ke==="next"?M._ascending:M._descending,z.sort(Q)};var pe=0;return ae._addAlgorithm(function(ke,Le,He){for(var nt=ke.key;0<Q(nt,z[pe]);)if(++pe===z.length)return Le(He),!1;return Q(nt,z[pe])===0||(Le(function(){ke.continue(z[pe])}),!1)}),ae},Pi.prototype.notEqual=function(M){return this.inAnyRange([[-1/0,M],[M,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Pi.prototype.noneOf=function(){var M=W.apply(ne,arguments);if(M.length===0)return new this.Collection(this);try{M.sort(this._ascending)}catch{return za(this,Jr)}var z=M.reduce(function(Q,ae){return Q?Q.concat([[Q[Q.length-1][1],ae]]):[[-1/0,ae]]},null);return z.push([M[M.length-1],this.db._maxKey]),this.inAnyRange(z,{includeLowers:!1,includeUppers:!1})},Pi.prototype.inAnyRange=function(_t,z){var Q=this,ae=this._cmp,pe=this._ascending,ke=this._descending,Le=this._min,He=this._max;if(_t.length===0)return of(this);if(!_t.every(function(At){return At[0]!==void 0&&At[1]!==void 0&&pe(At[0],At[1])<=0}))return za(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);var nt=!z||z.includeLowers!==!1,st=z&&z.includeUppers===!0,dt,Xe=pe;function pt(At,Rt){return Xe(At[0],Rt[0])}try{(dt=_t.reduce(function(At,Rt){for(var jt=0,Yt=At.length;jt<Yt;++jt){var rn=At[jt];if(ae(Rt[0],rn[1])<0&&0<ae(Rt[1],rn[0])){rn[0]=Le(rn[0],Rt[0]),rn[1]=He(rn[1],Rt[1]);break}}return jt===Yt&&At.push(Rt),At},[])).sort(pt)}catch{return za(this,Jr)}var tt=0,ut=st?function(At){return 0<pe(At,dt[tt][1])}:function(At){return 0<=pe(At,dt[tt][1])},mt=nt?function(At){return 0<ke(At,dt[tt][0])}:function(At){return 0<=ke(At,dt[tt][0])},at=ut,_t=new this.Collection(this,function(){return pl(dt[0][0],dt[dt.length-1][1],!nt,!st)});return _t._ondirectionchange=function(At){Xe=At==="next"?(at=ut,pe):(at=mt,ke),dt.sort(pt)},_t._addAlgorithm(function(At,Rt,jt){for(var Yt,rn=At.key;at(rn);)if(++tt===dt.length)return Rt(jt),!1;return!ut(Yt=rn)&&!mt(Yt)||(Q._cmp(rn,dt[tt][1])===0||Q._cmp(rn,dt[tt][0])===0||Rt(function(){Xe===pe?At.continue(dt[tt][0]):At.continue(dt[tt][1])}),!1)}),_t},Pi.prototype.startsWithAnyOf=function(){var M=W.apply(ne,arguments);return M.every(function(z){return typeof z=="string"})?M.length===0?of(this):this.inAnyRange(M.map(function(z){return[z,z+Ci]})):za(this,"startsWithAnyOf() only works with strings")},Pi);function Pi(){}function Po(M){return Oe(function(z){return $u(z),M(z.target.error),!1})}function $u(M){M.stopPropagation&&M.stopPropagation(),M.preventDefault&&M.preventDefault()}var lf="storagemutated",zu="x-storagemutated-1",Ws=jc(null,lf),mb=(_a.prototype._lock=function(){return C(!Ne.global),++this._reculock,this._reculock!==1||Ne.global||(Ne.lockOwnerFor=this),this},_a.prototype._unlock=function(){if(C(!Ne.global),--this._reculock==0)for(Ne.global||(Ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var M=this._blockedFuncs.shift();try{et(M[1],M[0])}catch{}}return this},_a.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},_a.prototype.create=function(M){var z=this;if(!this.mode)return this;var Q=this.db.idbdb,ae=this.db._state.dbOpenError;if(C(!this.idbtrans),!M&&!Q)switch(ae&&ae.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(ae);case"MissingAPIError":throw new Se.MissingAPI(ae.message,ae);default:throw new Se.OpenFailed(ae)}if(!this.active)throw new Se.TransactionInactive;return C(this._completion._state===null),(M=this.idbtrans=M||(this.db.core||Q).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Oe(function(pe){$u(pe),z._reject(M.error)}),M.onabort=Oe(function(pe){$u(pe),z.active&&z._reject(new Se.Abort(M.error)),z.active=!1,z.on("abort").fire(pe)}),M.oncomplete=Oe(function(){z.active=!1,z._resolve(),"mutatedParts"in M&&Ws.storagemutated.fire(M.mutatedParts)}),this},_a.prototype._promise=function(M,z,Q){var ae=this;if(M==="readwrite"&&this.mode!=="readwrite")return tr(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return tr(new Se.TransactionInactive);if(this._locked())return new B(function(ke,Le){ae._blockedFuncs.push([function(){ae._promise(M,z,Q).then(ke,Le)},Ne])});if(Q)return un(function(){var ke=new B(function(Le,He){ae._lock();var nt=z(Le,He,ae);nt&&nt.then&&nt.then(Le,He)});return ke.finally(function(){return ae._unlock()}),ke._lib=!0,ke});var pe=new B(function(ke,Le){var He=z(ke,Le,ae);He&&He.then&&He.then(ke,Le)});return pe._lib=!0,pe},_a.prototype._root=function(){return this.parent?this.parent._root():this},_a.prototype.waitFor=function(M){var z,Q=this._root(),ae=B.resolve(M);Q._waitingFor?Q._waitingFor=Q._waitingFor.then(function(){return ae}):(Q._waitingFor=ae,Q._waitingQueue=[],z=Q.idbtrans.objectStore(Q.storeNames[0]),function ke(){for(++Q._spinCount;Q._waitingQueue.length;)Q._waitingQueue.shift()();Q._waitingFor&&(z.get(-1/0).onsuccess=ke)}());var pe=Q._waitingFor;return new B(function(ke,Le){ae.then(function(He){return Q._waitingQueue.push(Oe(ke.bind(null,He)))},function(He){return Q._waitingQueue.push(Oe(Le.bind(null,He)))}).finally(function(){Q._waitingFor===pe&&(Q._waitingFor=null)})})},_a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))},_a.prototype.table=function(M){var z=this._memoizedTables||(this._memoizedTables={});if(d(z,M))return z[M];var Q=this.schema[M];if(!Q)throw new Se.NotFound("Table "+M+" not part of transaction");return Q=new this.db.Table(M,Q,this),Q.core=this.db.core.table(M),z[M]=Q},_a);function _a(){}function ml(M,z,Q,ae,pe,ke,Le){return{name:M,keyPath:z,unique:Q,multi:ae,auto:pe,compound:ke,src:(Q&&!Le?"&":"")+(ae?"*":"")+(pe?"++":"")+Ym(z)}}function Ym(M){return typeof M=="string"?M:M?"["+[].join.call(M,"+")+"]":""}function cf(M,z,Q){return{name:M,primKey:z,indexes:Q,mappedClass:null,idxByName:(ae=function(pe){return[pe.name,pe]},Q.reduce(function(pe,ke,Le){return Le=ae(ke,Le),Le&&(pe[Le[0]]=Le[1]),pe},{}))};var ae}var uf=function(M){try{return M.only([[]]),uf=function(){return[[]]},[[]]}catch{return uf=function(){return Ci},Ci}};function df(M){return M==null?function(){}:typeof M=="string"?(z=M).split(".").length===1?function(Q){return Q[z]}:function(Q){return A(Q,z)}:function(Q){return A(Q,M)};var z}function Hh(M){return[].slice.call(M)}var Q1=0;function bs(M){return M==null?":id":typeof M=="string"?M:"[".concat(M.join("+"),"]")}function Uu(M,z,nt){function ae(at){if(at.type===3)return null;if(at.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var tt=at.lower,ut=at.upper,mt=at.lowerOpen,at=at.upperOpen;return tt===void 0?ut===void 0?null:z.upperBound(ut,!!at):ut===void 0?z.lowerBound(tt,!!mt):z.bound(tt,ut,!!mt,!!at)}function pe(pt){var tt,ut=pt.name;return{name:ut,schema:pt,mutate:function(mt){var at=mt.trans,_t=mt.type,At=mt.keys,Rt=mt.values,jt=mt.range;return new Promise(function(Yt,rn){Yt=Oe(Yt);var Ht=at.objectStore(ut),Jt=Ht.keyPath==null,an=_t==="put"||_t==="add";if(!an&&_t!=="delete"&&_t!=="deleteRange")throw new Error("Invalid operation type: "+_t);var Gt,mn=(At||Rt||{length:1}).length;if(At&&Rt&&At.length!==Rt.length)throw new Error("Given keys array must have same length as given values array.");if(mn===0)return Yt({numFailures:0,failures:{},results:[],lastResult:void 0});function Fn(Gs){++la,$u(Gs)}var qn=[],fr=[],la=0;if(_t==="deleteRange"){if(jt.type===4)return Yt({numFailures:la,failures:fr,results:[],lastResult:void 0});jt.type===3?qn.push(Gt=Ht.clear()):qn.push(Gt=Ht.delete(ae(jt)))}else{var Jt=an?Jt?[Rt,At]:[Rt,null]:[At,null],nr=Jt[0],ss=Jt[1];if(an)for(var vs=0;vs<mn;++vs)qn.push(Gt=ss&&ss[vs]!==void 0?Ht[_t](nr[vs],ss[vs]):Ht[_t](nr[vs])),Gt.onerror=Fn;else for(vs=0;vs<mn;++vs)qn.push(Gt=Ht[_t](nr[vs])),Gt.onerror=Fn}function Xl(Gs){Gs=Gs.target.result,qn.forEach(function(yl,Fc){return yl.error!=null&&(fr[Fc]=yl.error)}),Yt({numFailures:la,failures:fr,results:_t==="delete"?At:qn.map(function(yl){return yl.result}),lastResult:Gs})}Gt.onerror=function(Gs){Fn(Gs),Xl(Gs)},Gt.onsuccess=Xl})},getMany:function(mt){var at=mt.trans,_t=mt.keys;return new Promise(function(At,Rt){At=Oe(At);for(var jt,Yt=at.objectStore(ut),rn=_t.length,Ht=new Array(rn),Jt=0,an=0,Gt=function(qn){qn=qn.target,Ht[qn._pos]=qn.result,++an===Jt&&At(Ht)},mn=Po(Rt),Fn=0;Fn<rn;++Fn)_t[Fn]!=null&&((jt=Yt.get(_t[Fn]))._pos=Fn,jt.onsuccess=Gt,jt.onerror=mn,++Jt);Jt===0&&At(Ht)})},get:function(mt){var at=mt.trans,_t=mt.key;return new Promise(function(At,Rt){At=Oe(At);var jt=at.objectStore(ut).get(_t);jt.onsuccess=function(Yt){return At(Yt.target.result)},jt.onerror=Po(Rt)})},query:(tt=st,function(mt){return new Promise(function(at,_t){at=Oe(at);var At,Rt,jt,Jt=mt.trans,Yt=mt.values,rn=mt.limit,Gt=mt.query,Ht=rn===1/0?void 0:rn,an=Gt.index,Gt=Gt.range,Jt=Jt.objectStore(ut),an=an.isPrimaryKey?Jt:Jt.index(an.name),Gt=ae(Gt);if(rn===0)return at({result:[]});tt?((Ht=Yt?an.getAll(Gt,Ht):an.getAllKeys(Gt,Ht)).onsuccess=function(mn){return at({result:mn.target.result})},Ht.onerror=Po(_t)):(At=0,Rt=!Yt&&"openKeyCursor"in an?an.openKeyCursor(Gt):an.openCursor(Gt),jt=[],Rt.onsuccess=function(mn){var Fn=Rt.result;return Fn?(jt.push(Yt?Fn.value:Fn.primaryKey),++At===rn?at({result:jt}):void Fn.continue()):at({result:jt})},Rt.onerror=Po(_t))})}),openCursor:function(mt){var at=mt.trans,_t=mt.values,At=mt.query,Rt=mt.reverse,jt=mt.unique;return new Promise(function(Yt,rn){Yt=Oe(Yt);var an=At.index,Ht=At.range,Jt=at.objectStore(ut),Jt=an.isPrimaryKey?Jt:Jt.index(an.name),an=Rt?jt?"prevunique":"prev":jt?"nextunique":"next",Gt=!_t&&"openKeyCursor"in Jt?Jt.openKeyCursor(ae(Ht),an):Jt.openCursor(ae(Ht),an);Gt.onerror=Po(rn),Gt.onsuccess=Oe(function(mn){var Fn,qn,fr,la,nr=Gt.result;nr?(nr.___id=++Q1,nr.done=!1,Fn=nr.continue.bind(nr),qn=(qn=nr.continuePrimaryKey)&&qn.bind(nr),fr=nr.advance.bind(nr),la=function(){throw new Error("Cursor not stopped")},nr.trans=at,nr.stop=nr.continue=nr.continuePrimaryKey=nr.advance=function(){throw new Error("Cursor not started")},nr.fail=Oe(rn),nr.next=function(){var ss=this,vs=1;return this.start(function(){return vs--?ss.continue():ss.stop()}).then(function(){return ss})},nr.start=function(ss){function vs(){if(Gt.result)try{ss()}catch(Gs){nr.fail(Gs)}else nr.done=!0,nr.start=function(){throw new Error("Cursor behind last entry")},nr.stop()}var Xl=new Promise(function(Gs,yl){Gs=Oe(Gs),Gt.onerror=Po(yl),nr.fail=yl,nr.stop=function(Fc){nr.stop=nr.continue=nr.continuePrimaryKey=nr.advance=la,Gs(Fc)}});return Gt.onsuccess=Oe(function(Gs){Gt.onsuccess=vs,vs()}),nr.continue=Fn,nr.continuePrimaryKey=qn,nr.advance=fr,vs(),Xl},Yt(nr)):Yt(null)},rn)})},count:function(mt){var at=mt.query,_t=mt.trans,At=at.index,Rt=at.range;return new Promise(function(jt,Yt){var rn=_t.objectStore(ut),Ht=At.isPrimaryKey?rn:rn.index(At.name),rn=ae(Rt),Ht=rn?Ht.count(rn):Ht.count();Ht.onsuccess=Oe(function(Jt){return jt(Jt.target.result)}),Ht.onerror=Po(Yt)})}}}var ke,Le,He,dt=(Le=nt,He=Hh((ke=M).objectStoreNames),{schema:{name:ke.name,tables:He.map(function(pt){return Le.objectStore(pt)}).map(function(pt){var tt=pt.keyPath,at=pt.autoIncrement,ut=o(tt),mt={},at={name:pt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:tt==null,compound:ut,keyPath:tt,autoIncrement:at,unique:!0,extractKey:df(tt)},indexes:Hh(pt.indexNames).map(function(_t){return pt.index(_t)}).map(function(jt){var At=jt.name,Rt=jt.unique,Yt=jt.multiEntry,jt=jt.keyPath,Yt={name:At,compound:o(jt),keyPath:jt,unique:Rt,multiEntry:Yt,extractKey:df(jt)};return mt[bs(jt)]=Yt}),getIndexByKeyPath:function(_t){return mt[bs(_t)]}};return mt[":id"]=at.primaryKey,tt!=null&&(mt[bs(tt)]=at.primaryKey),at})},hasGetAll:0<He.length&&"getAll"in Le.objectStore(He[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),nt=dt.schema,st=dt.hasGetAll,dt=nt.tables.map(pe),Xe={};return dt.forEach(function(pt){return Xe[pt.name]=pt}),{stack:"dbcore",transaction:M.transaction.bind(M),table:function(pt){if(!Xe[pt])throw new Error("Table '".concat(pt,"' not found"));return Xe[pt]},MIN_KEY:-1/0,MAX_KEY:uf(z),schema:nt}}function Zm(M,z,Q,ae){var pe=Q.IDBKeyRange;return Q.indexedDB,{dbcore:(ae=Uu(z,pe,ae),M.dbcore.reduce(function(ke,Le){return Le=Le.create,r(r({},ke),Le(ke))},ae))}}function Oc(M,ae){var Q=ae.db,ae=Zm(M._middlewares,Q,M._deps,ae);M.core=ae.dbcore,M.tables.forEach(function(pe){var ke=pe.name;M.core.schema.tables.some(function(Le){return Le.name===ke})&&(pe.core=M.core.table(ke),M[ke]instanceof M.Table&&(M[ke].core=pe.core))})}function Xm(M,z,Q,ae){Q.forEach(function(pe){var ke=ae[pe];z.forEach(function(Le){var He=function nt(st,dt){return v(st,dt)||(st=c(st))&&nt(st,dt)}(Le,pe);(!He||"value"in He&&He.value===void 0)&&(Le===M.Transaction.prototype||Le instanceof M.Transaction?y(Le,pe,{get:function(){return this.table(pe)},set:function(nt){m(this,pe,{value:nt,writable:!0,configurable:!0,enumerable:!0})}}):Le[pe]=new M.Table(pe,ke))})})}function Gh(M,z){z.forEach(function(Q){for(var ae in Q)Q[ae]instanceof M.Table&&delete Q[ae]})}function gb(M,z){return M._cfg.version-z._cfg.version}function Kh(M,z,Q,ae){var pe=M._dbSchema;Q.objectStoreNames.contains("$meta")&&!pe.$meta&&(pe.$meta=cf("$meta",t_("")[0],[]),M._storeNames.push("$meta"));var ke=M._createTransaction("readwrite",M._storeNames,pe);ke.create(Q),ke._completion.catch(ae);var Le=ke._reject.bind(ke),He=Ne.transless||Ne;un(function(){return Ne.trans=ke,Ne.transless=He,z!==0?(Oc(M,Q),st=z,((nt=ke).storeNames.includes("$meta")?nt.table("$meta").get("version").then(function(dt){return dt??st}):B.resolve(st)).then(function(dt){return pt=dt,tt=ke,ut=Q,mt=[],dt=(Xe=M)._versions,at=Xe._dbSchema=ff(0,Xe.idbdb,ut),(dt=dt.filter(function(_t){return _t._cfg.version>=pt})).length!==0?(dt.forEach(function(_t){mt.push(function(){var At=at,Rt=_t._cfg.dbschema;tg(Xe,At,ut),tg(Xe,Rt,ut),at=Xe._dbSchema=Rt;var jt=Qm(At,Rt);jt.add.forEach(function(an){yb(ut,an[0],an[1].primKey,an[1].indexes)}),jt.change.forEach(function(an){if(an.recreate)throw new Se.Upgrade("Not yet support for changing primary key");var Gt=ut.objectStore(an.name);an.add.forEach(function(mn){return eg(Gt,mn)}),an.change.forEach(function(mn){Gt.deleteIndex(mn.name),eg(Gt,mn)}),an.del.forEach(function(mn){return Gt.deleteIndex(mn)})});var Yt=_t._cfg.contentUpgrade;if(Yt&&_t._cfg.version>pt){Oc(Xe,ut),tt._memoizedTables={};var rn=N(Rt);jt.del.forEach(function(an){rn[an]=At[an]}),Gh(Xe,[Xe.Transaction.prototype]),Xm(Xe,[Xe.Transaction.prototype],a(rn),rn),tt.schema=rn;var Ht,Jt=te(Yt);return Jt&&pr(),jt=B.follow(function(){var an;(Ht=Yt(tt))&&Jt&&(an=Er.bind(null,null),Ht.then(an,an))}),Ht&&typeof Ht.then=="function"?B.resolve(Ht):jt.then(function(){return Ht})}}),mt.push(function(At){var Rt,jt,Yt=_t._cfg.dbschema;Rt=Yt,jt=At,[].slice.call(jt.db.objectStoreNames).forEach(function(rn){return Rt[rn]==null&&jt.db.deleteObjectStore(rn)}),Gh(Xe,[Xe.Transaction.prototype]),Xm(Xe,[Xe.Transaction.prototype],Xe._storeNames,Xe._dbSchema),tt.schema=Xe._dbSchema}),mt.push(function(At){Xe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Xe.idbdb.version/10)===_t._cfg.version?(Xe.idbdb.deleteObjectStore("$meta"),delete Xe._dbSchema.$meta,Xe._storeNames=Xe._storeNames.filter(function(Rt){return Rt!=="$meta"})):At.objectStore("$meta").put(_t._cfg.version,"version"))})}),function _t(){return mt.length?B.resolve(mt.shift()(tt.idbtrans)).then(_t):B.resolve()}().then(function(){e_(at,ut)})):B.resolve();var Xe,pt,tt,ut,mt,at}).catch(Le)):(a(pe).forEach(function(dt){yb(Q,dt,pe[dt].primKey,pe[dt].indexes)}),Oc(M,Q),void B.follow(function(){return M.on.populate.fire(ke)}).catch(Le));var nt,st})}function Jm(M,z){e_(M._dbSchema,z),z.db.version%10!=0||z.objectStoreNames.contains("$meta")||z.db.createObjectStore("$meta").add(Math.ceil(z.db.version/10-1),"version");var Q=ff(0,M.idbdb,z);tg(M,M._dbSchema,z);for(var ae=0,pe=Qm(Q,M._dbSchema).change;ae<pe.length;ae++){var ke=function(Le){if(Le.change.length||Le.recreate)return console.warn("Unable to patch indexes of table ".concat(Le.name," because it has changes on the type of index or primary key.")),{value:void 0};var He=z.objectStore(Le.name);Le.add.forEach(function(nt){Be&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Le.name,".").concat(nt.src)),eg(He,nt)})}(pe[ae]);if(typeof ke=="object")return ke.value}}function Qm(M,z){var Q,ae={del:[],add:[],change:[]};for(Q in M)z[Q]||ae.del.push(Q);for(Q in z){var pe=M[Q],ke=z[Q];if(pe){var Le={name:Q,def:ke,recreate:!1,del:[],add:[],change:[]};if(""+(pe.primKey.keyPath||"")!=""+(ke.primKey.keyPath||"")||pe.primKey.auto!==ke.primKey.auto)Le.recreate=!0,ae.change.push(Le);else{var He=pe.idxByName,nt=ke.idxByName,st=void 0;for(st in He)nt[st]||Le.del.push(st);for(st in nt){var dt=He[st],Xe=nt[st];dt?dt.src!==Xe.src&&Le.change.push(Xe):Le.add.push(Xe)}(0<Le.del.length||0<Le.add.length||0<Le.change.length)&&ae.change.push(Le)}}else ae.add.push([Q,ke])}return ae}function yb(M,z,Q,ae){var pe=M.db.createObjectStore(z,Q.keyPath?{keyPath:Q.keyPath,autoIncrement:Q.auto}:{autoIncrement:Q.auto});return ae.forEach(function(ke){return eg(pe,ke)}),pe}function e_(M,z){a(M).forEach(function(Q){z.db.objectStoreNames.contains(Q)||(Be&&console.debug("Dexie: Creating missing table",Q),yb(z,Q,M[Q].primKey,M[Q].indexes))})}function eg(M,z){M.createIndex(z.name,z.keyPath,{unique:z.unique,multiEntry:z.multi})}function ff(M,z,Q){var ae={};return w(z.objectStoreNames,0).forEach(function(pe){for(var ke=Q.objectStore(pe),Le=ml(Ym(st=ke.keyPath),st||"",!0,!1,!!ke.autoIncrement,st&&typeof st!="string",!0),He=[],nt=0;nt<ke.indexNames.length;++nt){var dt=ke.index(ke.indexNames[nt]),st=dt.keyPath,dt=ml(dt.name,st,!!dt.unique,!!dt.multiEntry,!1,st&&typeof st!="string",!1);He.push(dt)}ae[pe]=cf(pe,Le,He)}),ae}function tg(M,z,Q){for(var ae=Q.db.objectStoreNames,pe=0;pe<ae.length;++pe){var ke=ae[pe],Le=Q.objectStore(ke);M._hasGetAll="getAll"in Le;for(var He=0;He<Le.indexNames.length;++He){var nt=Le.indexNames[He],st=Le.index(nt).keyPath,dt=typeof st=="string"?st:"["+w(st).join("+")+"]";!z[ke]||(st=z[ke].idxByName[dt])&&(st.name=nt,delete z[ke].idxByName[dt],z[ke].idxByName[nt]=st)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(M._hasGetAll=!1)}function t_(M){return M.split(",").map(function(z,Q){var ae=(z=z.trim()).replace(/([&*]|\+\+)/g,""),pe=/^\[/.test(ae)?ae.match(/^\[(.*)\]$/)[1].split("+"):ae;return ml(ae,pe||null,/\&/.test(z),/\*/.test(z),/\+\+/.test(z),o(pe),Q===0)})}var gA=(ng.prototype._parseStoresSpec=function(M,z){a(M).forEach(function(Q){if(M[Q]!==null){var ae=t_(M[Q]),pe=ae.shift();if(pe.unique=!0,pe.multi)throw new Se.Schema("Primary key cannot be multi-valued");ae.forEach(function(ke){if(ke.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!ke.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),z[Q]=cf(Q,pe,ae)}})},ng.prototype.stores=function(Q){var z=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,Q):Q;var Q=z._versions,ae={},pe={};return Q.forEach(function(ke){l(ae,ke._cfg.storesSource),pe=ke._cfg.dbschema={},ke._parseStoresSpec(ae,pe)}),z._dbSchema=pe,Gh(z,[z._allTables,z,z.Transaction.prototype]),Xm(z,[z._allTables,z,z.Transaction.prototype,this._cfg.tables],a(pe),pe),z._storeNames=a(pe),this},ng.prototype.upgrade=function(M){return this._cfg.contentUpgrade=Ee(this._cfg.contentUpgrade||We,M),this},ng);function ng(){}function bb(M,z){var Q=M._dbNamesDB;return Q||(Q=M._dbNamesDB=new gl(Ba,{addons:[],indexedDB:M,IDBKeyRange:z})).version(1).stores({dbnames:"name"}),Q.table("dbnames")}function rg(M){return M&&typeof M.databases=="function"}function vb(M){return un(function(){return Ne.letThrough=!0,M()})}function xb(M){return!("from"in M)}var Hs=function(M,z){if(!this){var Q=new Hs;return M&&"d"in M&&l(Q,M),Q}l(this,arguments.length?{d:1,from:M,to:1<arguments.length?z:M}:{d:0})};function Yh(M,z,Q){var ae=jr(z,Q);if(!isNaN(ae)){if(0<ae)throw RangeError();if(xb(M))return l(M,{from:z,to:Q,d:1});var pe=M.l,ae=M.r;if(jr(Q,M.from)<0)return pe?Yh(pe,z,Q):M.l={from:z,to:Q,d:1,l:null,r:null},r_(M);if(0<jr(z,M.to))return ae?Yh(ae,z,Q):M.r={from:z,to:Q,d:1,l:null,r:null},r_(M);jr(z,M.from)<0&&(M.from=z,M.l=null,M.d=ae?ae.d+1:1),0<jr(Q,M.to)&&(M.to=Q,M.r=null,M.d=M.l?M.l.d+1:1),Q=!M.r,pe&&!M.l&&qu(M,pe),ae&&Q&&qu(M,ae)}}function qu(M,z){xb(z)||function Q(ae,nt){var ke=nt.from,Le=nt.to,He=nt.l,nt=nt.r;Yh(ae,ke,Le),He&&Q(ae,He),nt&&Q(ae,nt)}(M,z)}function n_(M,z){var Q=ig(z),ae=Q.next();if(ae.done)return!1;for(var pe=ae.value,ke=ig(M),Le=ke.next(pe.from),He=Le.value;!ae.done&&!Le.done;){if(jr(He.from,pe.to)<=0&&0<=jr(He.to,pe.from))return!0;jr(pe.from,He.from)<0?pe=(ae=Q.next(He.from)).value:He=(Le=ke.next(pe.from)).value}return!1}function ig(M){var z=xb(M)?null:{s:0,n:M};return{next:function(Q){for(var ae=0<arguments.length;z;)switch(z.s){case 0:if(z.s=1,ae)for(;z.n.l&&jr(Q,z.n.from)<0;)z={up:z,n:z.n.l,s:1};else for(;z.n.l;)z={up:z,n:z.n.l,s:1};case 1:if(z.s=2,!ae||jr(Q,z.n.to)<=0)return{value:z.n,done:!1};case 2:if(z.n.r){z.s=3,z={up:z,n:z.n.r,s:0};continue}case 3:z=z.up}return{done:!0}}}}function r_(M){var z,Q,ae=(((z=M.r)===null||z===void 0?void 0:z.d)||0)-(((Q=M.l)===null||Q===void 0?void 0:Q.d)||0),pe=1<ae?"r":ae<-1?"l":"";pe&&(z=pe=="r"?"l":"r",Q=r({},M),ae=M[pe],M.from=ae.from,M.to=ae.to,M[pe]=ae[pe],Q[pe]=ae[z],(M[z]=Q).d=wb(Q)),M.d=wb(M)}function wb(Q){var z=Q.r,Q=Q.l;return(z?Q?Math.max(z.d,Q.d):z.d:Q?Q.d:0)+1}function sg(M,z){return a(z).forEach(function(Q){M[Q]?qu(M[Q],z[Q]):M[Q]=function ae(pe){var ke,Le,He={};for(ke in pe)d(pe,ke)&&(Le=pe[ke],He[ke]=!Le||typeof Le!="object"||L.has(Le.constructor)?Le:ae(Le));return He}(z[Q])}),M}function _b(M,z){return M.all||z.all||Object.keys(M).some(function(Q){return z[Q]&&n_(z[Q],M[Q])})}h(Hs.prototype,((Ua={add:function(M){return qu(this,M),this},addKey:function(M){return Yh(this,M,M),this},addKeys:function(M){var z=this;return M.forEach(function(Q){return Yh(z,Q,Q)}),this},hasKey:function(M){var z=ig(this).next(M).value;return z&&jr(z.from,M)<=0&&0<=jr(z.to,M)}})[U]=function(){return ig(this)},Ua));var Vu={},Sb={},Cb=!1;function ag(M){sg(Sb,M),Cb||(Cb=!0,setTimeout(function(){Cb=!1,kb(Sb,!(Sb={}))},0))}function kb(M,z){z===void 0&&(z=!1);var Q=new Set;if(M.all)for(var ae=0,pe=Object.values(Vu);ae<pe.length;ae++)i_(Le=pe[ae],M,Q,z);else for(var ke in M){var Le,He=/^idb\:\/\/(.*)\/(.*)\//.exec(ke);He&&(ke=He[1],He=He[2],(Le=Vu["idb://".concat(ke,"/").concat(He)])&&i_(Le,M,Q,z))}Q.forEach(function(nt){return nt()})}function i_(M,z,Q,ae){for(var pe=[],ke=0,Le=Object.entries(M.queries.query);ke<Le.length;ke++){for(var He=Le[ke],nt=He[0],st=[],dt=0,Xe=He[1];dt<Xe.length;dt++){var pt=Xe[dt];_b(z,pt.obsSet)?pt.subscribers.forEach(function(at){return Q.add(at)}):ae&&st.push(pt)}ae&&pe.push([nt,st])}if(ae)for(var tt=0,ut=pe;tt<ut.length;tt++){var mt=ut[tt],nt=mt[0],st=mt[1];M.queries.query[nt]=st}}function yA(M){var z=M._state,Q=M._deps.indexedDB;if(z.isBeingOpened||M.idbdb)return z.dbReadyPromise.then(function(){return z.dbOpenError?tr(z.dbOpenError):M});z.isBeingOpened=!0,z.dbOpenError=null,z.openComplete=!1;var ae=z.openCanceller,pe=Math.round(10*M.verno),ke=!1;function Le(){if(z.openCanceller!==ae)throw new Se.DatabaseClosed("db.open() was cancelled")}function He(){return new B(function(pt,tt){if(Le(),!Q)throw new Se.MissingAPI;var ut=M.name,mt=z.autoSchema||!pe?Q.open(ut):Q.open(ut,pe);if(!mt)throw new Se.MissingAPI;mt.onerror=Po(tt),mt.onblocked=Oe(M._fireOnBlocked),mt.onupgradeneeded=Oe(function(at){var _t;dt=mt.transaction,z.autoSchema&&!M._options.allowEmptyDB?(mt.onerror=$u,dt.abort(),mt.result.close(),(_t=Q.deleteDatabase(ut)).onsuccess=_t.onerror=Oe(function(){tt(new Se.NoSuchDatabase("Database ".concat(ut," doesnt exist")))})):(dt.onerror=Po(tt),at=at.oldVersion>Math.pow(2,62)?0:at.oldVersion,Xe=at<1,M.idbdb=mt.result,ke&&Jm(M,dt),Kh(M,at/10,dt,tt))},tt),mt.onsuccess=Oe(function(){dt=null;var at,_t,At,Rt,jt,Yt=M.idbdb=mt.result,rn=w(Yt.objectStoreNames);if(0<rn.length)try{var Ht=Yt.transaction((Rt=rn).length===1?Rt[0]:Rt,"readonly");if(z.autoSchema)_t=Yt,At=Ht,(at=M).verno=_t.version/10,At=at._dbSchema=ff(0,_t,At),at._storeNames=w(_t.objectStoreNames,0),Xm(at,[at._allTables],a(At),At);else if(tg(M,M._dbSchema,Ht),((jt=Qm(ff(0,(jt=M).idbdb,Ht),jt._dbSchema)).add.length||jt.change.some(function(Jt){return Jt.add.length||Jt.change.length}))&&!ke)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Yt.close(),pe=Yt.version+1,ke=!0,pt(He());Oc(M,Ht)}catch{}is.push(M),Yt.onversionchange=Oe(function(Jt){z.vcFired=!0,M.on("versionchange").fire(Jt)}),Yt.onclose=Oe(function(Jt){M.on("close").fire(Jt)}),Xe&&(jt=M._deps,Ht=ut,Yt=jt.indexedDB,jt=jt.IDBKeyRange,rg(Yt)||Ht===Ba||bb(Yt,jt).put({name:Ht}).catch(We)),pt()},tt)}).catch(function(pt){switch(pt==null?void 0:pt.name){case"UnknownError":if(0<z.PR1398_maxLoop)return z.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),He();break;case"VersionError":if(0<pe)return pe=0,He()}return B.reject(pt)})}var nt,st=z.dbReadyResolve,dt=null,Xe=!1;return B.race([ae,(typeof navigator>"u"?B.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(pt){function tt(){return indexedDB.databases().finally(pt)}nt=setInterval(tt,100),tt()}).finally(function(){return clearInterval(nt)}):Promise.resolve()).then(He)]).then(function(){return Le(),z.onReadyBeingFired=[],B.resolve(vb(function(){return M.on.ready.fire(M.vip)})).then(function pt(){if(0<z.onReadyBeingFired.length){var tt=z.onReadyBeingFired.reduce(Ee,We);return z.onReadyBeingFired=[],B.resolve(vb(function(){return tt(M.vip)})).then(pt)}})}).finally(function(){z.openCanceller===ae&&(z.onReadyBeingFired=null,z.isBeingOpened=!1)}).catch(function(pt){z.dbOpenError=pt;try{dt&&dt.abort()}catch{}return ae===z.openCanceller&&M._close(),tr(pt)}).finally(function(){z.openComplete=!0,st()}).then(function(){var pt;return Xe&&(pt={},M.tables.forEach(function(tt){tt.schema.indexes.forEach(function(ut){ut.name&&(pt["idb://".concat(M.name,"/").concat(tt.name,"/").concat(ut.name)]=new Hs(-1/0,[[[]]]))}),pt["idb://".concat(M.name,"/").concat(tt.name,"/")]=pt["idb://".concat(M.name,"/").concat(tt.name,"/:dels")]=new Hs(-1/0,[[[]]])}),Ws(lf).fire(pt),kb(pt,!0)),M})}function Zh(M){function z(ke){return M.next(ke)}var Q=pe(z),ae=pe(function(ke){return M.throw(ke)});function pe(ke){return function(nt){var He=ke(nt),nt=He.value;return He.done?nt:nt&&typeof nt.then=="function"?nt.then(Q,ae):o(nt)?Promise.all(nt).then(Q,ae):Q(nt)}}return pe(z)()}function Pc(M,z,Q){for(var ae=o(M)?M.slice():[M],pe=0;pe<Q;++pe)ae.push(z);return ae}var bA={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(M){return r(r({},M),{table:function(z){var Q=M.table(z),ae=Q.schema,pe={},ke=[];function Le(Xe,pt,tt){var ut=bs(Xe),mt=pe[ut]=pe[ut]||[],at=Xe==null?0:typeof Xe=="string"?1:Xe.length,_t=0<pt,_t=r(r({},tt),{name:_t?"".concat(ut,"(virtual-from:").concat(tt.name,")"):tt.name,lowLevelIndex:tt,isVirtual:_t,keyTail:pt,keyLength:at,extractKey:df(Xe),unique:!_t&&tt.unique});return mt.push(_t),_t.isPrimaryKey||ke.push(_t),1<at&&Le(at===2?Xe[0]:Xe.slice(0,at-1),pt+1,tt),mt.sort(function(At,Rt){return At.keyTail-Rt.keyTail}),_t}z=Le(ae.primaryKey.keyPath,0,ae.primaryKey),pe[":id"]=[z];for(var He=0,nt=ae.indexes;He<nt.length;He++){var st=nt[He];Le(st.keyPath,0,st)}function dt(Xe){var pt,tt=Xe.query.index;return tt.isVirtual?r(r({},Xe),{query:{index:tt.lowLevelIndex,range:(pt=Xe.query.range,tt=tt.keyTail,{type:pt.type===1?2:pt.type,lower:Pc(pt.lower,pt.lowerOpen?M.MAX_KEY:M.MIN_KEY,tt),lowerOpen:!0,upper:Pc(pt.upper,pt.upperOpen?M.MIN_KEY:M.MAX_KEY,tt),upperOpen:!0})}}):Xe}return r(r({},Q),{schema:r(r({},ae),{primaryKey:z,indexes:ke,getIndexByKeyPath:function(Xe){return(Xe=pe[bs(Xe)])&&Xe[0]}}),count:function(Xe){return Q.count(dt(Xe))},query:function(Xe){return Q.query(dt(Xe))},openCursor:function(Xe){var pt=Xe.query.index,tt=pt.keyTail,ut=pt.isVirtual,mt=pt.keyLength;return ut?Q.openCursor(dt(Xe)).then(function(_t){return _t&&at(_t)}):Q.openCursor(Xe);function at(_t){return Object.create(_t,{continue:{value:function(At){At!=null?_t.continue(Pc(At,Xe.reverse?M.MAX_KEY:M.MIN_KEY,tt)):Xe.unique?_t.continue(_t.key.slice(0,mt).concat(Xe.reverse?M.MIN_KEY:M.MAX_KEY,tt)):_t.continue()}},continuePrimaryKey:{value:function(At,Rt){_t.continuePrimaryKey(Pc(At,M.MAX_KEY,tt),Rt)}},primaryKey:{get:function(){return _t.primaryKey}},key:{get:function(){var At=_t.key;return mt===1?At[0]:At.slice(0,mt)}},value:{get:function(){return _t.value}}})}}})}})}};function og(M,z,Q,ae){return Q=Q||{},ae=ae||"",a(M).forEach(function(pe){var ke,Le,He;d(z,pe)?(ke=M[pe],Le=z[pe],typeof ke=="object"&&typeof Le=="object"&&ke&&Le?(He=J(ke))!==J(Le)?Q[ae+pe]=z[pe]:He==="Object"?og(ke,Le,Q,ae+pe+"."):ke!==Le&&(Q[ae+pe]=z[pe]):ke!==Le&&(Q[ae+pe]=z[pe])):Q[ae+pe]=void 0}),a(z).forEach(function(pe){d(M,pe)||(Q[ae+pe]=z[pe])}),Q}function lg(M,z){return z.type==="delete"?z.keys:z.keys||z.values.map(M.extractKey)}var s_={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(M){return r(r({},M),{table:function(z){var Q=M.table(z),ae=Q.schema.primaryKey;return r(r({},Q),{mutate:function(pe){var ke=Ne.trans,Le=ke.table(z).hook,He=Le.deleting,nt=Le.creating,st=Le.updating;switch(pe.type){case"add":if(nt.fire===We)break;return ke._promise("readwrite",function(){return dt(pe)},!0);case"put":if(nt.fire===We&&st.fire===We)break;return ke._promise("readwrite",function(){return dt(pe)},!0);case"delete":if(He.fire===We)break;return ke._promise("readwrite",function(){return dt(pe)},!0);case"deleteRange":if(He.fire===We)break;return ke._promise("readwrite",function(){return function Xe(pt,tt,ut){return Q.query({trans:pt,values:!1,query:{index:ae,range:tt},limit:ut}).then(function(mt){var at=mt.result;return dt({type:"delete",keys:at,trans:pt}).then(function(_t){return 0<_t.numFailures?Promise.reject(_t.failures[0]):at.length<ut?{failures:[],numFailures:0,lastResult:void 0}:Xe(pt,r(r({},tt),{lower:at[at.length-1],lowerOpen:!0}),ut)})})}(pe.trans,pe.range,1e4)},!0)}return Q.mutate(pe);function dt(Xe){var pt,tt,ut,mt=Ne.trans,at=Xe.keys||lg(ae,Xe);if(!at)throw new Error("Keys missing");return(Xe=Xe.type==="add"||Xe.type==="put"?r(r({},Xe),{keys:at}):r({},Xe)).type!=="delete"&&(Xe.values=i([],Xe.values)),Xe.keys&&(Xe.keys=i([],Xe.keys)),pt=Q,ut=at,((tt=Xe).type==="add"?Promise.resolve([]):pt.getMany({trans:tt.trans,keys:ut,cache:"immutable"})).then(function(_t){var At=at.map(function(Rt,jt){var Yt,rn,Ht,Jt=_t[jt],an={onerror:null,onsuccess:null};return Xe.type==="delete"?He.fire.call(an,Rt,Jt,mt):Xe.type==="add"||Jt===void 0?(Yt=nt.fire.call(an,Rt,Xe.values[jt],mt),Rt==null&&Yt!=null&&(Xe.keys[jt]=Rt=Yt,ae.outbound||R(Xe.values[jt],ae.keyPath,Rt))):(Yt=og(Jt,Xe.values[jt]),(rn=st.fire.call(an,Yt,Rt,Jt,mt))&&(Ht=Xe.values[jt],Object.keys(rn).forEach(function(Gt){d(Ht,Gt)?Ht[Gt]=rn[Gt]:R(Ht,Gt,rn[Gt])}))),an});return Q.mutate(Xe).then(function(Rt){for(var jt=Rt.failures,Yt=Rt.results,rn=Rt.numFailures,Rt=Rt.lastResult,Ht=0;Ht<at.length;++Ht){var Jt=(Yt||at)[Ht],an=At[Ht];Jt==null?an.onerror&&an.onerror(jt[Ht]):an.onsuccess&&an.onsuccess(Xe.type==="put"&&_t[Ht]?Xe.values[Ht]:Jt)}return{failures:jt,results:Yt,numFailures:rn,lastResult:Rt}}).catch(function(Rt){return At.forEach(function(jt){return jt.onerror&&jt.onerror(Rt)}),Promise.reject(Rt)})})}}})}})}};function Eb(M,z,Q){try{if(!z||z.keys.length<M.length)return null;for(var ae=[],pe=0,ke=0;pe<z.keys.length&&ke<M.length;++pe)jr(z.keys[pe],M[ke])===0&&(ae.push(Q?V(z.values[pe]):z.values[pe]),++ke);return ae.length===M.length?ae:null}catch{return null}}var a_={stack:"dbcore",level:-1,create:function(M){return{table:function(z){var Q=M.table(z);return r(r({},Q),{getMany:function(ae){if(!ae.cache)return Q.getMany(ae);var pe=Eb(ae.keys,ae.trans._cache,ae.cache==="clone");return pe?B.resolve(pe):Q.getMany(ae).then(function(ke){return ae.trans._cache={keys:ae.keys,values:ae.cache==="clone"?V(ke):ke},ke})},mutate:function(ae){return ae.type!=="add"&&(ae.trans._cache=null),Q.mutate(ae)}})}}}};function Wu(M,z){return M.trans.mode==="readonly"&&!!M.subscr&&!M.trans.explicit&&M.trans.db._options.cache!=="disabled"&&!z.schema.primaryKey.outbound}function o_(M,z){switch(M){case"query":return z.values&&!z.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var vA={stack:"dbcore",level:0,name:"Observability",create:function(M){var z=M.schema.name,Q=new Hs(M.MIN_KEY,M.MAX_KEY);return r(r({},M),{transaction:function(ae,pe,ke){if(Ne.subscr&&pe!=="readonly")throw new Se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return M.transaction(ae,pe,ke)},table:function(ae){var pe=M.table(ae),ke=pe.schema,Le=ke.primaryKey,Xe=ke.indexes,He=Le.extractKey,nt=Le.outbound,st=Le.autoIncrement&&Xe.filter(function(tt){return tt.compound&&tt.keyPath.includes(Le.keyPath)}),dt=r(r({},pe),{mutate:function(tt){function ut(Gt){return Gt="idb://".concat(z,"/").concat(ae,"/").concat(Gt),Rt[Gt]||(Rt[Gt]=new Hs)}var mt,at,_t,At=tt.trans,Rt=tt.mutatedParts||(tt.mutatedParts={}),jt=ut(""),Yt=ut(":dels"),rn=tt.type,an=tt.type==="deleteRange"?[tt.range]:tt.type==="delete"?[tt.keys]:tt.values.length<50?[lg(Le,tt).filter(function(Gt){return Gt}),tt.values]:[],Ht=an[0],Jt=an[1],an=tt.trans._cache;return o(Ht)?(jt.addKeys(Ht),(an=rn==="delete"||Ht.length===Jt.length?Eb(Ht,an):null)||Yt.addKeys(Ht),(an||Jt)&&(mt=ut,at=an,_t=Jt,ke.indexes.forEach(function(Gt){var mn=mt(Gt.name||"");function Fn(fr){return fr!=null?Gt.extractKey(fr):null}function qn(fr){return Gt.multiEntry&&o(fr)?fr.forEach(function(la){return mn.addKey(la)}):mn.addKey(fr)}(at||_t).forEach(function(fr,ss){var nr=at&&Fn(at[ss]),ss=_t&&Fn(_t[ss]);jr(nr,ss)!==0&&(nr!=null&&qn(nr),ss!=null&&qn(ss))})}))):Ht?(Jt={from:(Jt=Ht.lower)!==null&&Jt!==void 0?Jt:M.MIN_KEY,to:(Jt=Ht.upper)!==null&&Jt!==void 0?Jt:M.MAX_KEY},Yt.add(Jt),jt.add(Jt)):(jt.add(Q),Yt.add(Q),ke.indexes.forEach(function(Gt){return ut(Gt.name).add(Q)})),pe.mutate(tt).then(function(Gt){return!Ht||tt.type!=="add"&&tt.type!=="put"||(jt.addKeys(Gt.results),st&&st.forEach(function(mn){for(var Fn=tt.values.map(function(nr){return mn.extractKey(nr)}),qn=mn.keyPath.findIndex(function(nr){return nr===Le.keyPath}),fr=0,la=Gt.results.length;fr<la;++fr)Fn[fr][qn]=Gt.results[fr];ut(mn.name).addKeys(Fn)})),At.mutatedParts=sg(At.mutatedParts||{},Rt),Gt})}}),Xe=function(ut){var mt=ut.query,ut=mt.index,mt=mt.range;return[ut,new Hs((ut=mt.lower)!==null&&ut!==void 0?ut:M.MIN_KEY,(mt=mt.upper)!==null&&mt!==void 0?mt:M.MAX_KEY)]},pt={get:function(tt){return[Le,new Hs(tt.key)]},getMany:function(tt){return[Le,new Hs().addKeys(tt.keys)]},count:Xe,query:Xe,openCursor:Xe};return a(pt).forEach(function(tt){dt[tt]=function(ut){var mt=Ne.subscr,at=!!mt,_t=Wu(Ne,pe)&&o_(tt,ut)?ut.obsSet={}:mt;if(at){var At=function(Jt){return Jt="idb://".concat(z,"/").concat(ae,"/").concat(Jt),_t[Jt]||(_t[Jt]=new Hs)},Rt=At(""),jt=At(":dels"),mt=pt[tt](ut),at=mt[0],mt=mt[1];if((tt==="query"&&at.isPrimaryKey&&!ut.values?jt:At(at.name||"")).add(mt),!at.isPrimaryKey){if(tt!=="count"){var Yt=tt==="query"&&nt&&ut.values&&pe.query(r(r({},ut),{values:!1}));return pe[tt].apply(this,arguments).then(function(Jt){if(tt==="query"){if(nt&&ut.values)return Yt.then(function(Fn){return Fn=Fn.result,Rt.addKeys(Fn),Jt});var an=ut.values?Jt.result.map(He):Jt.result;(ut.values?Rt:jt).addKeys(an)}else if(tt==="openCursor"){var Gt=Jt,mn=ut.values;return Gt&&Object.create(Gt,{key:{get:function(){return jt.addKey(Gt.primaryKey),Gt.key}},primaryKey:{get:function(){var Fn=Gt.primaryKey;return jt.addKey(Fn),Fn}},value:{get:function(){return mn&&Rt.addKey(Gt.primaryKey),Gt.value}}})}return Jt})}jt.add(Q)}}return pe[tt].apply(this,arguments)}}),dt}})}};function l_(M,z,Q){if(Q.numFailures===0)return z;if(z.type==="deleteRange")return null;var ae=z.keys?z.keys.length:"values"in z&&z.values?z.values.length:1;return Q.numFailures===ae?null:(z=r({},z),o(z.keys)&&(z.keys=z.keys.filter(function(pe,ke){return!(ke in Q.failures)})),"values"in z&&o(z.values)&&(z.values=z.values.filter(function(pe,ke){return!(ke in Q.failures)})),z)}function cg(M,z){return Q=M,((ae=z).lower===void 0||(ae.lowerOpen?0<jr(Q,ae.lower):0<=jr(Q,ae.lower)))&&(M=M,(z=z).upper===void 0||(z.upperOpen?jr(M,z.upper)<0:jr(M,z.upper)<=0));var Q,ae}function Tb(M,z,pt,ae,pe,ke){if(!pt||pt.length===0)return M;var Le=z.query.index,He=Le.multiEntry,nt=z.query.range,st=ae.schema.primaryKey.extractKey,dt=Le.extractKey,Xe=(Le.lowLevelIndex||Le).extractKey,pt=pt.reduce(function(tt,ut){var mt=tt,at=[];if(ut.type==="add"||ut.type==="put")for(var _t=new Hs,At=ut.values.length-1;0<=At;--At){var Rt,jt=ut.values[At],Yt=st(jt);_t.hasKey(Yt)||(Rt=dt(jt),(He&&o(Rt)?Rt.some(function(Gt){return cg(Gt,nt)}):cg(Rt,nt))&&(_t.addKey(Yt),at.push(jt)))}switch(ut.type){case"add":var rn=new Hs().addKeys(z.values?tt.map(function(mn){return st(mn)}):tt),mt=tt.concat(z.values?at.filter(function(mn){return mn=st(mn),!rn.hasKey(mn)&&(rn.addKey(mn),!0)}):at.map(function(mn){return st(mn)}).filter(function(mn){return!rn.hasKey(mn)&&(rn.addKey(mn),!0)}));break;case"put":var Ht=new Hs().addKeys(ut.values.map(function(mn){return st(mn)}));mt=tt.filter(function(mn){return!Ht.hasKey(z.values?st(mn):mn)}).concat(z.values?at:at.map(function(mn){return st(mn)}));break;case"delete":var Jt=new Hs().addKeys(ut.keys);mt=tt.filter(function(mn){return!Jt.hasKey(z.values?st(mn):mn)});break;case"deleteRange":var an=ut.range;mt=tt.filter(function(mn){return!cg(st(mn),an)})}return mt},M);return pt===M?M:(pt.sort(function(tt,ut){return jr(Xe(tt),Xe(ut))||jr(st(tt),st(ut))}),z.limit&&z.limit<1/0&&(pt.length>z.limit?pt.length=z.limit:M.length===z.limit&&pt.length<z.limit&&(pe.dirty=!0)),ke?Object.freeze(pt):pt)}function hf(M,z){return jr(M.lower,z.lower)===0&&jr(M.upper,z.upper)===0&&!!M.lowerOpen==!!z.lowerOpen&&!!M.upperOpen==!!z.upperOpen}function Xh(M,z){return function(Q,ae,pe,ke){if(Q===void 0)return ae!==void 0?-1:0;if(ae===void 0)return 1;if((ae=jr(Q,ae))===0){if(pe&&ke)return 0;if(pe)return 1;if(ke)return-1}return ae}(M.lower,z.lower,M.lowerOpen,z.lowerOpen)<=0&&0<=function(Q,ae,pe,ke){if(Q===void 0)return ae!==void 0?1:0;if(ae===void 0)return-1;if((ae=jr(Q,ae))===0){if(pe&&ke)return 0;if(pe)return-1;if(ke)return 1}return ae}(M.upper,z.upper,M.upperOpen,z.upperOpen)}function xA(M,z,Q,ae){M.subscribers.add(Q),ae.addEventListener("abort",function(){var pe,ke;M.subscribers.delete(Q),M.subscribers.size===0&&(pe=M,ke=z,setTimeout(function(){pe.subscribers.size===0&&$(ke,pe)},3e3))})}var ug={stack:"dbcore",level:0,name:"Cache",create:function(M){var z=M.schema.name;return r(r({},M),{transaction:function(Q,ae,pe){var ke,Le,He=M.transaction(Q,ae,pe);return ae==="readwrite"&&(Le=(ke=new AbortController).signal,pe=function(nt){return function(){if(ke.abort(),ae==="readwrite"){for(var st=new Set,dt=0,Xe=Q;dt<Xe.length;dt++){var pt=Xe[dt],tt=Vu["idb://".concat(z,"/").concat(pt)];if(tt){var ut=M.table(pt),mt=tt.optimisticOps.filter(function(mn){return mn.trans===He});if(He._explicit&&nt&&He.mutatedParts)for(var at=0,_t=Object.values(tt.queries.query);at<_t.length;at++)for(var At=0,Rt=(rn=_t[at]).slice();At<Rt.length;At++)_b((Ht=Rt[At]).obsSet,He.mutatedParts)&&($(rn,Ht),Ht.subscribers.forEach(function(mn){return st.add(mn)}));else if(0<mt.length){tt.optimisticOps=tt.optimisticOps.filter(function(mn){return mn.trans!==He});for(var jt=0,Yt=Object.values(tt.queries.query);jt<Yt.length;jt++)for(var rn,Ht,Jt,an=0,Gt=(rn=Yt[jt]).slice();an<Gt.length;an++)(Ht=Gt[an]).res!=null&&He.mutatedParts&&(nt&&!Ht.dirty?(Jt=Object.isFrozen(Ht.res),Jt=Tb(Ht.res,Ht.req,mt,ut,Ht,Jt),Ht.dirty?($(rn,Ht),Ht.subscribers.forEach(function(mn){return st.add(mn)})):Jt!==Ht.res&&(Ht.res=Jt,Ht.promise=B.resolve({result:Jt}))):(Ht.dirty&&$(rn,Ht),Ht.subscribers.forEach(function(mn){return st.add(mn)})))}}}st.forEach(function(mn){return mn()})}}},He.addEventListener("abort",pe(!1),{signal:Le}),He.addEventListener("error",pe(!1),{signal:Le}),He.addEventListener("complete",pe(!0),{signal:Le})),He},table:function(Q){var ae=M.table(Q),pe=ae.schema.primaryKey;return r(r({},ae),{mutate:function(ke){var Le=Ne.trans;if(pe.outbound||Le.db._options.cache==="disabled"||Le.explicit||Le.idbtrans.mode!=="readwrite")return ae.mutate(ke);var He=Vu["idb://".concat(z,"/").concat(Q)];return He?(Le=ae.mutate(ke),ke.type!=="add"&&ke.type!=="put"||!(50<=ke.values.length||lg(pe,ke).some(function(nt){return nt==null}))?(He.optimisticOps.push(ke),ke.mutatedParts&&ag(ke.mutatedParts),Le.then(function(nt){0<nt.numFailures&&($(He.optimisticOps,ke),(nt=l_(0,ke,nt))&&He.optimisticOps.push(nt),ke.mutatedParts&&ag(ke.mutatedParts))}),Le.catch(function(){$(He.optimisticOps,ke),ke.mutatedParts&&ag(ke.mutatedParts)})):Le.then(function(nt){var st=l_(0,r(r({},ke),{values:ke.values.map(function(dt,Xe){var pt;return nt.failures[Xe]?dt:(dt=(pt=pe.keyPath)!==null&&pt!==void 0&&pt.includes(".")?V(dt):r({},dt),R(dt,pe.keyPath,nt.results[Xe]),dt)})}),nt);He.optimisticOps.push(st),queueMicrotask(function(){return ke.mutatedParts&&ag(ke.mutatedParts)})}),Le):ae.mutate(ke)},query:function(ke){if(!Wu(Ne,ae)||!o_("query",ke))return ae.query(ke);var Le=((st=Ne.trans)===null||st===void 0?void 0:st.db._options.cache)==="immutable",Xe=Ne,He=Xe.requery,nt=Xe.signal,st=function(ut,mt,at,_t){var At=Vu["idb://".concat(ut,"/").concat(mt)];if(!At)return[];if(!(mt=At.queries[at]))return[null,!1,At,null];var Rt=mt[(_t.query?_t.query.index.name:null)||""];if(!Rt)return[null,!1,At,null];switch(at){case"query":var jt=Rt.find(function(Yt){return Yt.req.limit===_t.limit&&Yt.req.values===_t.values&&hf(Yt.req.query.range,_t.query.range)});return jt?[jt,!0,At,Rt]:[Rt.find(function(Yt){return("limit"in Yt.req?Yt.req.limit:1/0)>=_t.limit&&(!_t.values||Yt.req.values)&&Xh(Yt.req.query.range,_t.query.range)}),!1,At,Rt];case"count":return jt=Rt.find(function(Yt){return hf(Yt.req.query.range,_t.query.range)}),[jt,!!jt,At,Rt]}}(z,Q,"query",ke),dt=st[0],Xe=st[1],pt=st[2],tt=st[3];return dt&&Xe?dt.obsSet=ke.obsSet:(Xe=ae.query(ke).then(function(ut){var mt=ut.result;if(dt&&(dt.res=mt),Le){for(var at=0,_t=mt.length;at<_t;++at)Object.freeze(mt[at]);Object.freeze(mt)}else ut.result=V(mt);return ut}).catch(function(ut){return tt&&dt&&$(tt,dt),Promise.reject(ut)}),dt={obsSet:ke.obsSet,promise:Xe,subscribers:new Set,type:"query",req:ke,dirty:!1},tt?tt.push(dt):(tt=[dt],(pt=pt||(Vu["idb://".concat(z,"/").concat(Q)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ke.query.index.name||""]=tt)),xA(dt,tt,He,nt),dt.promise.then(function(ut){return{result:Tb(ut.result,ke,pt==null?void 0:pt.optimisticOps,ae,dt,Le)}})}})}})}};function Jh(M,z){return new Proxy(M,{get:function(Q,ae,pe){return ae==="db"?z:Reflect.get(Q,ae,pe)}})}var gl=(Di.prototype.version=function(M){if(isNaN(M)||M<.1)throw new Se.Type("Given version is not a positive number");if(M=Math.round(10*M)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,M);var z=this._versions,Q=z.filter(function(ae){return ae._cfg.version===M})[0];return Q||(Q=new this.Version(M),z.push(Q),z.sort(gb),Q.stores({}),this._state.autoSchema=!1,Q)},Di.prototype._whenReady=function(M){var z=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?M():new B(function(Q,ae){if(z._state.openComplete)return ae(new Se.DatabaseClosed(z._state.dbOpenError));if(!z._state.isBeingOpened){if(!z._state.autoOpen)return void ae(new Se.DatabaseClosed);z.open().catch(We)}z._state.dbReadyPromise.then(Q,ae)}).then(M)},Di.prototype.use=function(M){var z=M.stack,Q=M.create,ae=M.level,pe=M.name;return pe&&this.unuse({stack:z,name:pe}),M=this._middlewares[z]||(this._middlewares[z]=[]),M.push({stack:z,create:Q,level:ae??10,name:pe}),M.sort(function(ke,Le){return ke.level-Le.level}),this},Di.prototype.unuse=function(M){var z=M.stack,Q=M.name,ae=M.create;return z&&this._middlewares[z]&&(this._middlewares[z]=this._middlewares[z].filter(function(pe){return ae?pe.create!==ae:!!Q&&pe.name!==Q})),this},Di.prototype.open=function(){var M=this;return et(we,function(){return yA(M)})},Di.prototype._close=function(){var M=this._state,z=is.indexOf(this);if(0<=z&&is.splice(z,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}M.isBeingOpened||(M.dbReadyPromise=new B(function(Q){M.dbReadyResolve=Q}),M.openCanceller=new B(function(Q,ae){M.cancelOpen=ae}))},Di.prototype.close=function(Q){var z=(Q===void 0?{disableAutoOpen:!0}:Q).disableAutoOpen,Q=this._state;z?(Q.isBeingOpened&&Q.cancelOpen(new Se.DatabaseClosed),this._close(),Q.autoOpen=!1,Q.dbOpenError=new Se.DatabaseClosed):(this._close(),Q.autoOpen=this._options.autoOpen||Q.isBeingOpened,Q.openComplete=!1,Q.dbOpenError=null)},Di.prototype.delete=function(M){var z=this;M===void 0&&(M={disableAutoOpen:!0});var Q=0<arguments.length&&typeof arguments[0]!="object",ae=this._state;return new B(function(pe,ke){function Le(){z.close(M);var He=z._deps.indexedDB.deleteDatabase(z.name);He.onsuccess=Oe(function(){var nt,st,dt;nt=z._deps,st=z.name,dt=nt.indexedDB,nt=nt.IDBKeyRange,rg(dt)||st===Ba||bb(dt,nt).delete(st).catch(We),pe()}),He.onerror=Po(ke),He.onblocked=z._fireOnBlocked}if(Q)throw new Se.InvalidArgument("Invalid closeOptions argument to db.delete()");ae.isBeingOpened?ae.dbReadyPromise.then(Le):Le()})},Di.prototype.backendDB=function(){return this.idbdb},Di.prototype.isOpen=function(){return this.idbdb!==null},Di.prototype.hasBeenClosed=function(){var M=this._state.dbOpenError;return M&&M.name==="DatabaseClosed"},Di.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Di.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Di.prototype,"tables",{get:function(){var M=this;return a(this._allTables).map(function(z){return M._allTables[z]})},enumerable:!1,configurable:!0}),Di.prototype.transaction=function(){var M=(function(z,Q,ae){var pe=arguments.length;if(pe<2)throw new Se.InvalidArgument("Too few arguments");for(var ke=new Array(pe-1);--pe;)ke[pe-1]=arguments[pe];return ae=ke.pop(),[z,O(ke),ae]}).apply(this,arguments);return this._transaction.apply(this,M)},Di.prototype._transaction=function(M,z,Q){var ae=this,pe=Ne.trans;pe&&pe.db===this&&M.indexOf("!")===-1||(pe=null);var ke,Le,He=M.indexOf("?")!==-1;M=M.replace("!","").replace("?","");try{if(Le=z.map(function(st){if(st=st instanceof ae.Table?st.name:st,typeof st!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return st}),M=="r"||M===oa)ke=oa;else{if(M!="rw"&&M!=zi)throw new Se.InvalidArgument("Invalid transaction mode: "+M);ke=zi}if(pe){if(pe.mode===oa&&ke===zi){if(!He)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");pe=null}pe&&Le.forEach(function(st){if(pe&&pe.storeNames.indexOf(st)===-1){if(!He)throw new Se.SubTransaction("Table "+st+" not included in parent transaction.");pe=null}}),He&&pe&&!pe.active&&(pe=null)}}catch(st){return pe?pe._promise(null,function(dt,Xe){Xe(st)}):tr(st)}var nt=(function st(dt,Xe,pt,tt,ut){return B.resolve().then(function(){var mt=Ne.transless||Ne,at=dt._createTransaction(Xe,pt,dt._dbSchema,tt);if(at.explicit=!0,mt={trans:at,transless:mt},tt)at.idbtrans=tt.idbtrans;else try{at.create(),at.idbtrans._explicit=!0,dt._state.PR1398_maxLoop=3}catch(Rt){return Rt.name===je.InvalidState&&dt.isOpen()&&0<--dt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),dt.close({disableAutoOpen:!1}),dt.open().then(function(){return st(dt,Xe,pt,null,ut)})):tr(Rt)}var _t,At=te(ut);return At&&pr(),mt=B.follow(function(){var Rt;(_t=ut.call(at,at))&&(At?(Rt=Er.bind(null,null),_t.then(Rt,Rt)):typeof _t.next=="function"&&typeof _t.throw=="function"&&(_t=Zh(_t)))},mt),(_t&&typeof _t.then=="function"?B.resolve(_t).then(function(Rt){return at.active?Rt:tr(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):mt.then(function(){return _t})).then(function(Rt){return tt&&at._resolve(),at._completion.then(function(){return Rt})}).catch(function(Rt){return at._reject(Rt),tr(Rt)})})}).bind(null,this,ke,Le,pe,Q);return pe?pe._promise(ke,nt,"lock"):Ne.trans?et(Ne.transless,function(){return ae._whenReady(nt)}):this._whenReady(nt)},Di.prototype.table=function(M){if(!d(this._allTables,M))throw new Se.InvalidTable("Table ".concat(M," does not exist"));return this._allTables[M]},Di);function Di(M,z){var Q=this;this._middlewares={},this.verno=0;var ae=Di.dependencies;this._options=z=r({addons:Di.addons,autoOpen:!0,indexedDB:ae.indexedDB,IDBKeyRange:ae.IDBKeyRange,cache:"cloned"},z),this._deps={indexedDB:z.indexedDB,IDBKeyRange:z.IDBKeyRange},ae=z.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var pe,ke,Le,He,nt,st={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:We,dbReadyPromise:null,cancelOpen:We,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:z.autoOpen};st.dbReadyPromise=new B(function(Xe){st.dbReadyResolve=Xe}),st.openCanceller=new B(function(Xe,pt){st.cancelOpen=pt}),this._state=st,this.name=M,this.on=jc(this,"populate","blocked","versionchange","close",{ready:[Ee,We]}),this.on.ready.subscribe=S(this.on.ready.subscribe,function(Xe){return function(pt,tt){Di.vip(function(){var ut,mt=Q._state;mt.openComplete?(mt.dbOpenError||B.resolve().then(pt),tt&&Xe(pt)):mt.onReadyBeingFired?(mt.onReadyBeingFired.push(pt),tt&&Xe(pt)):(Xe(pt),ut=Q,tt||Xe(function at(){ut.on.ready.unsubscribe(pt),ut.on.ready.unsubscribe(at)}))})}}),this.Collection=(pe=this,tf(af.prototype,function(_t,at){this.db=pe;var tt=hl,ut=null;if(at)try{tt=at()}catch(At){ut=At}var mt=_t._ctx,at=mt.table,_t=at.hook.reading.fire;this._ctx={table:at,index:mt.index,isPrimKey:!mt.index||at.schema.primKey.keyPath&&mt.index===at.schema.primKey.name,range:tt,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ut,or:mt.or,valueMapper:_t!==Re?_t:null}})),this.Table=(ke=this,tf(ub.prototype,function(Xe,pt,tt){this.db=ke,this._tx=tt,this.name=Xe,this.schema=pt,this.hook=ke._allTables[Xe]?ke._allTables[Xe].hook:jc(null,{creating:[Te,We],reading:[K,Re],updating:[le,We],deleting:[ce,We]})})),this.Transaction=(Le=this,tf(mb.prototype,function(Xe,pt,tt,ut,mt){var at=this;this.db=Le,this.mode=Xe,this.storeNames=pt,this.schema=tt,this.chromeTransactionDurability=ut,this.idbtrans=null,this.on=jc(this,"complete","error","abort"),this.parent=mt||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new B(function(_t,At){at._resolve=_t,at._reject=At}),this._completion.then(function(){at.active=!1,at.on.complete.fire()},function(_t){var At=at.active;return at.active=!1,at.on.error.fire(_t),at.parent?at.parent._reject(_t):At&&at.idbtrans&&at.idbtrans.abort(),tr(_t)})})),this.Version=(He=this,tf(gA.prototype,function(Xe){this.db=He,this._cfg={version:Xe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(nt=this,tf(Bu.prototype,function(Xe,pt,tt){if(this.db=nt,this._ctx={table:Xe,index:pt===":id"?null:pt,or:tt},this._cmp=this._ascending=jr,this._descending=function(ut,mt){return jr(mt,ut)},this._max=function(ut,mt){return 0<jr(ut,mt)?ut:mt},this._min=function(ut,mt){return jr(ut,mt)<0?ut:mt},this._IDBKeyRange=nt._deps.IDBKeyRange,!this._IDBKeyRange)throw new Se.MissingAPI})),this.on("versionchange",function(Xe){0<Xe.newVersion?console.warn("Another connection wants to upgrade database '".concat(Q.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Q.name,"'. Closing db now to resume the delete request.")),Q.close({disableAutoOpen:!1})}),this.on("blocked",function(Xe){!Xe.newVersion||Xe.newVersion<Xe.oldVersion?console.warn("Dexie.delete('".concat(Q.name,"') was blocked")):console.warn("Upgrade '".concat(Q.name,"' blocked by other connection holding version ").concat(Xe.oldVersion/10))}),this._maxKey=uf(z.IDBKeyRange),this._createTransaction=function(Xe,pt,tt,ut){return new Q.Transaction(Xe,pt,tt,Q._options.chromeTransactionDurability,ut)},this._fireOnBlocked=function(Xe){Q.on("blocked").fire(Xe),is.filter(function(pt){return pt.name===Q.name&&pt!==Q&&!pt._state.vcFired}).map(function(pt){return pt.on("versionchange").fire(Xe)})},this.use(a_),this.use(ug),this.use(vA),this.use(bA),this.use(s_);var dt=new Proxy(this,{get:function(Xe,pt,tt){if(pt==="_vip")return!0;if(pt==="table")return function(mt){return Jh(Q.table(mt),dt)};var ut=Reflect.get(Xe,pt,tt);return ut instanceof ub?Jh(ut,dt):pt==="tables"?ut.map(function(mt){return Jh(mt,dt)}):pt==="_createTransaction"?function(){return Jh(ut.apply(this,arguments),dt)}:ut}});this.vip=dt,ae.forEach(function(Xe){return Xe(Q)})}var pf,Ua=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",c_=(dg.prototype.subscribe=function(M,z,Q){return this._subscribe(M&&typeof M!="function"?M:{next:M,error:z,complete:Q})},dg.prototype[Ua]=function(){return this},dg);function dg(M){this._subscribe=M}try{pf={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{pf={indexedDB:null,IDBKeyRange:null}}function u_(M){var z,Q=!1,ae=new c_(function(pe){var ke=te(M),Le,He=!1,nt={},st={},dt={get closed(){return He},unsubscribe:function(){He||(He=!0,Le&&Le.abort(),Xe&&Ws.storagemutated.unsubscribe(tt))}};pe.start&&pe.start(dt);var Xe=!1,pt=function(){return pn(ut)},tt=function(mt){sg(nt,mt),_b(st,nt)&&pt()},ut=function(){var mt,at,_t;!He&&pf.indexedDB&&(nt={},mt={},Le&&Le.abort(),Le=new AbortController,_t=function(At){var Rt=Y();try{ke&&pr();var jt=un(M,At);return jt=ke?jt.finally(Er):jt}finally{Rt&&H()}}(at={subscr:mt,signal:Le.signal,requery:pt,querier:M,trans:null}),Promise.resolve(_t).then(function(At){Q=!0,z=At,He||at.signal.aborted||(nt={},function(Rt){for(var jt in Rt)if(d(Rt,jt))return;return 1}(st=mt)||Xe||(Ws(lf,tt),Xe=!0),pn(function(){return!He&&pe.next&&pe.next(At)}))},function(At){Q=!1,["DatabaseClosedError","AbortError"].includes(At==null?void 0:At.name)||He||pn(function(){He||pe.error&&pe.error(At)})}))};return setTimeout(pt,0),dt});return ae.hasValue=function(){return Q},ae.getValue=function(){return z},ae}var Hu=gl;function Ab(M){var z=Dc;try{Dc=!0,Ws.storagemutated.fire(M),kb(M,!0)}finally{Dc=z}}h(Hu,r(r({},Qe),{delete:function(M){return new Hu(M,{addons:[]}).delete()},exists:function(M){return new Hu(M,{addons:[]}).open().then(function(z){return z.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(M){try{return z=Hu.dependencies,Q=z.indexedDB,z=z.IDBKeyRange,(rg(Q)?Promise.resolve(Q.databases()).then(function(ae){return ae.map(function(pe){return pe.name}).filter(function(pe){return pe!==Ba})}):bb(Q,z).toCollection().primaryKeys()).then(M)}catch{return tr(new Se.MissingAPI)}var z,Q},defineClass:function(){return function(M){l(this,M)}},ignoreTransaction:function(M){return Ne.trans?et(Ne.transless,M):M()},vip:vb,async:function(M){return function(){try{var z=Zh(M.apply(this,arguments));return z&&typeof z.then=="function"?z:B.resolve(z)}catch(Q){return tr(Q)}}},spawn:function(M,z,Q){try{var ae=Zh(M.apply(Q,z||[]));return ae&&typeof ae.then=="function"?ae:B.resolve(ae)}catch(pe){return tr(pe)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(M,z){return z=B.resolve(typeof M=="function"?Hu.ignoreTransaction(M):M).timeout(z||6e4),Ne.trans?Ne.trans.waitFor(z):z},Promise:B,debug:{get:function(){return Be},set:function(M){Ce(M)}},derive:b,extend:l,props:h,override:S,Events:jc,on:Ws,liveQuery:u_,extendObservabilitySet:sg,getByKeyPath:A,setByKeyPath:R,delByKeyPath:function(M,z){typeof z=="string"?R(M,z,void 0):"length"in z&&[].map.call(z,function(Q){R(M,Q,void 0)})},shallowClone:N,deepClone:V,getObjectDiff:og,cmp:jr,asap:k,minKey:-1/0,addons:[],connections:is,errnames:je,dependencies:pf,cache:Vu,semVer:"4.0.11",version:"4.0.11".split(".").map(function(M){return parseInt(M)}).reduce(function(M,z,Q){return M+z/Math.pow(10,2*Q)})})),Hu.maxKey=uf(Hu.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ws(lf,function(M){Dc||(M=new CustomEvent(zu,{detail:M}),Dc=!0,dispatchEvent(M),Dc=!1)}),addEventListener(zu,function(M){M=M.detail,Dc||Ab(M)}));var mf,Dc=!1,Sa=function(){};return typeof BroadcastChannel<"u"&&((Sa=function(){(mf=new BroadcastChannel(zu)).onmessage=function(M){return M.data&&Ab(M.data)}})(),typeof mf.unref=="function"&&mf.unref(),Ws(lf,function(M){Dc||mf.postMessage(M)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(M){if(!gl.disableBfCache&&M.persisted){Be&&console.debug("Dexie: handling persisted pagehide"),mf!=null&&mf.close();for(var z=0,Q=is;z<Q.length;z++)Q[z].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(M){!gl.disableBfCache&&M.persisted&&(Be&&console.debug("Dexie: handling persisted pageshow"),Sa(),Ab({all:new Hs(-1/0,[[]])}))})),B.rejectionMapper=function(M,z){return!M||M instanceof re||M instanceof TypeError||M instanceof SyntaxError||!M.name||!qe[M.name]?M:(z=new qe[M.name](z||M.message,M),"stack"in M&&y(z,"stack",{get:function(){return this.inner.stack}}),z)},Ce(Be),r(gl,Object.freeze({__proto__:null,Dexie:gl,liveQuery:u_,Entity:Hm,cmp:jr,PropModification:sf,replacePrefix:function(M,z){return new sf({replacePrefix:[M,z]})},add:function(M){return new sf({add:M})},remove:function(M){return new sf({remove:M})},default:gl,RangeSet:Hs,mergeRanges:qu,rangesOverlap:n_}),{default:gl}),gl})}(u2)),u2.exports}var L0e=F0e();const ej=xa(L0e),DB=Symbol.for("Dexie"),H2=globalThis[DB]||(globalThis[DB]=ej);if(ej.semVer!==H2.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ej.semVer} and ${H2.semVer}`);const{liveQuery:tdt,mergeRanges:ndt,rangesOverlap:rdt,RangeSet:idt,cmp:sdt,Entity:adt,PropModification:odt,replacePrefix:ldt,add:cdt,remove:udt}=H2;class B0e extends H2{constructor(){super("LiteChatDatabase_Rewrite_v1");ve(this,"conversations");ve(this,"interactions");ve(this,"mods");ve(this,"appState");ve(this,"providerConfigs");ve(this,"apiKeys");ve(this,"syncRepos");ve(this,"projects");ve(this,"rules");ve(this,"tags");ve(this,"tagRuleLinks");ve(this,"promptTemplates");this.version(9).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId, rating",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]",promptTemplates:"++id, &name, createdAt, updatedAt, isPublic"}),this.version(8).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId, rating",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const It=new B0e,Ps=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class Mt{static async loadConversations(){try{return(await It.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Ps(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await It.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await It.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await It.interactions.where({conversationId:t}).sortBy("index")).map(r=>Ps(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await It.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await It.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await It.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await It.mods.orderBy("loadOrder").toArray()).map(n=>Ps(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await It.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await It.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await It.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await It.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=It.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Ps(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await It.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await It.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=It.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Ps(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await It.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await It.transaction("rw",[It.apiKeys,It.providerConfigs],async()=>{const n=await It.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(i=>It.providerConfigs.update(i.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await It.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await It.syncRepos.toArray()).map(n=>Ps(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await It.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await It.transaction("rw",[It.syncRepos,It.conversations],async()=>{const n=await It.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(i=>It.conversations.update(i.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await It.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await It.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Ps(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,defaultTagIds:t.defaultTagIds??null,defaultRuleIds:t.defaultRuleIds??null,metadata:t.metadata?{...t.metadata}:{}};return await It.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const i=await It.projects.where("parentId").equals(r).toArray();for(const s of i)await n(s.id);await It.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await It.transaction("rw",[It.projects],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await It.rules.orderBy("name").toArray()).map(n=>Ps(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await It.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await It.transaction("rw",[It.rules,It.tagRuleLinks],async()=>{await It.tagRuleLinks.where("ruleId").equals(t).delete(),await It.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await It.tags.orderBy("name").toArray()).map(n=>Ps(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await It.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await It.transaction("rw",[It.tags,It.tagRuleLinks],async()=>{await It.tagRuleLinks.where("tagId").equals(t).delete(),await It.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await It.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await It.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await It.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await It.appState.toArray();n.settings={},r.forEach(i=>{i.key.startsWith("settings:")&&(n.settings[i.key.substring(9)]=i.value)})}return t.importApiKeys&&(n.apiKeys=await It.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await It.providerConfigs.toArray()),t.importProjects&&(n.projects=await It.projects.toArray()),t.importConversations&&(n.conversations=await It.conversations.toArray(),n.interactions=await It.interactions.toArray()),t.importRulesAndTags&&(n.rules=await It.rules.toArray(),n.tags=await It.tags.toArray(),n.tagRuleLinks=await It.tagRuleLinks.toArray()),t.importMods&&(n.mods=await It.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await It.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await It.transaction("rw",[It.appState,It.apiKeys,It.providerConfigs,It.projects,It.conversations,It.interactions,It.rules,It.tags,It.tagRuleLinks,It.mods,It.syncRepos],async()=>{if(n.importSettings&&await It.appState.clear(),n.importApiKeys&&await It.apiKeys.clear(),n.importProviderConfigs&&await It.providerConfigs.clear(),n.importProjects&&await It.projects.clear(),n.importConversations&&(await It.conversations.clear(),await It.interactions.clear()),n.importRulesAndTags&&(await It.rules.clear(),await It.tags.clear(),await It.tagRuleLinks.clear()),n.importMods&&await It.mods.clear(),n.importSyncRepos&&await It.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([i,s])=>({key:`settings:${i}`,value:s}));await It.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await It.apiKeys.bulkPut(t.apiKeys.map(r=>Ps(r))),n.importProviderConfigs&&t.providerConfigs&&await It.providerConfigs.bulkPut(t.providerConfigs.map(r=>Ps(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await It.projects.bulkPut(t.projects.map(r=>Ps(r))),n.importConversations&&t.conversations&&(await It.conversations.bulkPut(t.conversations.map(r=>Ps(r,["lastSyncedAt"]))),t.interactions&&await It.interactions.bulkPut(t.interactions.map(r=>Ps(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await It.rules.bulkPut(t.rules.map(r=>Ps(r))),t.tags&&await It.tags.bulkPut(t.tags.map(r=>Ps(r))),t.tagRuleLinks&&await It.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await It.mods.bulkPut(t.mods.map(r=>Ps(r))),n.importSyncRepos&&t.syncRepos&&await It.syncRepos.bulkPut(t.syncRepos.map(r=>Ps(r,["lastPulledAt","lastPushedAt"])))})}static async loadPromptTemplates(){try{return(await It.promptTemplates.orderBy("name").toArray()).map(n=>Ps(n,["createdAt","updatedAt"]))}catch(t){throw console.error("PersistenceService: Error loading prompt templates:",t),t}}static async savePromptTemplate(t){try{return await It.promptTemplates.put(t)}catch(n){throw console.error("PersistenceService: Error saving prompt template:",n),n}}static async deletePromptTemplate(t){try{await It.promptTemplates.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting prompt template:",n),n}}static async clearAllData(){try{await It.transaction("rw",[It.conversations,It.interactions,It.mods,It.appState,It.providerConfigs,It.apiKeys,It.syncRepos,It.projects,It.rules,It.tags,It.tagRuleLinks,It.promptTemplates],async()=>{await It.interactions.clear(),await It.conversations.clear(),await It.projects.clear(),await It.mods.clear(),await It.appState.clear(),await It.providerConfigs.clear(),await It.apiKeys.clear(),await It.syncRepos.clear(),await It.rules.clear(),await It.tags.clear(),await It.tagRuleLinks.clear(),await It.promptTemplates.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const Zn={loaded:"interaction.loaded",currentConversationIdChanged:"interaction.current.conversation.id.changed",added:"interaction.added",updated:"interaction.updated",streamingIdsChanged:"interaction.streaming.ids.changed",activeStreamBuffersChanged:"interaction.active.stream.buffers.changed",activeReasoningBuffersChanged:"interaction.active.reasoning.buffers.changed",statusChanged:"interaction.status.changed",errorChanged:"interaction.error.changed",interactionRated:"interaction.rated",started:"interaction.sdk.started",streamChunk:"interaction.sdk.streamChunk",completed:"interaction.sdk.completed",loadInteractionsRequest:"interaction.load.interactions.request",rateInteractionRequest:"interaction.rate.interaction.request",setCurrentConversationIdRequest:"interaction.set.current.conversation.id.request",clearInteractionsRequest:"interaction.clear.interactions.request",setErrorRequest:"interaction.set.error.request",setStatusRequest:"interaction.set.status.request"};var Zo=GW();const lE=xa(Zo);function $0e(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const z0e=e=>{switch(e){case"success":return V0e;case"info":return H0e;case"warning":return W0e;case"error":return G0e;default:return null}},U0e=Array(12).fill(0),q0e=({visible:e,className:t})=>Ve.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ve.createElement("div",{className:"sonner-spinner"},U0e.map((n,r)=>Ve.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),V0e=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),W0e=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),H0e=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),G0e=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),K0e=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ve.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ve.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Y0e=()=>{const[e,t]=Ve.useState(document.hidden);return Ve.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let tj=1;class Z0e{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...i}=t,s=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:tj++,a=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:r}),{...l,...t,id:s,dismissible:o,title:r}):l):this.addToast({title:r,...i,dismissible:o,id:s}),s},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(t instanceof Function?t():t);let s=r!==void 0,a;const o=i.then(async c=>{if(a=["resolve",c],Ve.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(J0e(c)&&!c.ok){s=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,y=typeof d=="object"&&!Ve.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...y})}else if(c instanceof Error){s=!1;const d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,y=typeof d=="object"&&!Ve.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...y})}else if(n.success!==void 0){s=!1;const d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description,y=typeof d=="object"&&!Ve.isValidElement(d)?d:{message:d};this.create({id:r,type:"success",description:h,...y})}}).catch(async c=>{if(a=["reject",c],n.error!==void 0){s=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,m=typeof u=="object"&&!Ve.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:d,...m})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||tj++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const po=new Z0e,X0e=(e,t)=>{const n=(t==null?void 0:t.id)||tj++;return po.addToast({title:e,...t,id:n}),n},J0e=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Q0e=X0e,eye=()=>po.toasts,tye=()=>po.getActiveToasts(),Pe=Object.assign(Q0e,{success:po.success,info:po.info,warning:po.warning,error:po.error,custom:po.custom,message:po.message,promise:po.promise,dismiss:po.dismiss,loading:po.loading},{getHistory:eye,getToasts:tye});$0e("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function cS(e){return e.label!==void 0}const nye=3,rye="24px",iye="16px",FB=4e3,sye=356,aye=14,oye=45,lye=200;function qc(...e){return e.filter(Boolean).join(" ")}function cye(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const uye=e=>{var t,n,r,i,s,a,o,l,c;const{invert:u,toast:d,unstyled:h,interacting:m,setHeights:y,visibleToasts:b,heights:v,index:x,toasts:w,expanded:S,removeToast:C,defaultRichColors:k,closeButton:A,style:R,cancelButtonStyle:N,actionButtonStyle:I,className:O="",descriptionClassName:L="",duration:P,position:V,gap:F,expandByDefault:J,classNames:U,icons:G,closeButtonAriaLabel:$="Close toast"}=e,[ne,W]=Ve.useState(null),[te,ee]=Ve.useState(null),[re,de]=Ve.useState(!1),[oe,Ie]=Ve.useState(!1),[je,Me]=Ve.useState(!1),[Se,qe]=Ve.useState(!1),[Qe,We]=Ve.useState(!1),[Re,K]=Ve.useState(0),[ge,Te]=Ve.useState(0),ce=Ve.useRef(d.duration||P||FB),le=Ve.useRef(null),ie=Ve.useRef(null),Ee=x===0,Be=x+1<=b,Ce=d.type,ct=d.dismissible!==!1,Tt=d.className||"",ft=d.descriptionClassName||"",Pt=Ve.useMemo(()=>v.findIndex(_e=>_e.toastId===d.id)||0,[v,d.id]),Ut=Ve.useMemo(()=>{var _e;return(_e=d.closeButton)!=null?_e:A},[d.closeButton,A]),Bt=Ve.useMemo(()=>d.duration||P||FB,[d.duration,P]),tn=Ve.useRef(0),xe=Ve.useRef(0),D=Ve.useRef(0),Z=Ve.useRef(null),[me,De]=V.split("-"),we=Ve.useMemo(()=>v.reduce((_e,ze,kt)=>kt>=Pt?_e:_e+ze.height,0),[v,Pt]),Ne=Y0e(),fe=d.invert||u,bt=Ce==="loading";xe.current=Ve.useMemo(()=>Pt*F+we,[Pt,we]),Ve.useEffect(()=>{ce.current=Bt},[Bt]),Ve.useEffect(()=>{de(!0)},[]),Ve.useEffect(()=>{const _e=ie.current;if(_e){const ze=_e.getBoundingClientRect().height;return Te(ze),y(kt=>[{toastId:d.id,height:ze,position:d.position},...kt]),()=>y(kt=>kt.filter(he=>he.toastId!==d.id))}},[y,d.id]),Ve.useLayoutEffect(()=>{if(!re)return;const _e=ie.current,ze=_e.style.height;_e.style.height="auto";const kt=_e.getBoundingClientRect().height;_e.style.height=ze,Te(kt),y(he=>he.find(H=>H.toastId===d.id)?he.map(H=>H.toastId===d.id?{...H,height:kt}:H):[{toastId:d.id,height:kt,position:d.position},...he])},[re,d.title,d.description,y,d.id]);const ot=Ve.useCallback(()=>{Ie(!0),K(xe.current),y(_e=>_e.filter(ze=>ze.toastId!==d.id)),setTimeout(()=>{C(d)},lye)},[d,C,y,xe]);Ve.useEffect(()=>{if(d.promise&&Ce==="loading"||d.duration===1/0||d.type==="loading")return;let _e;return S||m||Ne?(()=>{if(D.current<tn.current){const he=new Date().getTime()-tn.current;ce.current=ce.current-he}D.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(tn.current=new Date().getTime(),_e=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),ot()},ce.current))})(),()=>clearTimeout(_e)},[S,m,d,Ce,Ne,ot]),Ve.useEffect(()=>{d.delete&&ot()},[ot,d.delete]);function B(){var _e;if(G!=null&&G.loading){var ze;return Ve.createElement("div",{className:qc(U==null?void 0:U.loader,d==null||(ze=d.classNames)==null?void 0:ze.loader,"sonner-loader"),"data-visible":Ce==="loading"},G.loading)}return Ve.createElement(q0e,{className:qc(U==null?void 0:U.loader,d==null||(_e=d.classNames)==null?void 0:_e.loader),visible:Ce==="loading"})}const $e=d.icon||(G==null?void 0:G[Ce])||z0e(Ce);var it,ye;return Ve.createElement("li",{tabIndex:0,ref:ie,className:qc(O,Tt,U==null?void 0:U.toast,d==null||(t=d.classNames)==null?void 0:t.toast,U==null?void 0:U.default,U==null?void 0:U[Ce],d==null||(n=d.classNames)==null?void 0:n[Ce]),"data-sonner-toast":"","data-rich-colors":(it=d.richColors)!=null?it:k,"data-styled":!(d.jsx||d.unstyled||h),"data-mounted":re,"data-promise":!!d.promise,"data-swiped":Qe,"data-removed":oe,"data-visible":Be,"data-y-position":me,"data-x-position":De,"data-index":x,"data-front":Ee,"data-swiping":je,"data-dismissible":ct,"data-type":Ce,"data-invert":fe,"data-swipe-out":Se,"data-swipe-direction":te,"data-expanded":!!(S||J&&re),style:{"--index":x,"--toasts-before":x,"--z-index":w.length-x,"--offset":`${oe?Re:xe.current}px`,"--initial-height":J?"auto":`${ge}px`,...R,...d.style},onDragEnd:()=>{Me(!1),W(null),Z.current=null},onPointerDown:_e=>{bt||!ct||(le.current=new Date,K(xe.current),_e.target.setPointerCapture(_e.pointerId),_e.target.tagName!=="BUTTON"&&(Me(!0),Z.current={x:_e.clientX,y:_e.clientY}))},onPointerUp:()=>{var _e,ze,kt;if(Se||!ct)return;Z.current=null;const he=Number(((_e=ie.current)==null?void 0:_e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Y=Number(((ze=ie.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),H=new Date().getTime()-((kt=le.current)==null?void 0:kt.getTime()),X=ne==="x"?he:Y,be=Math.abs(X)/H;if(Math.abs(X)>=oye||be>.11){K(xe.current),d.onDismiss==null||d.onDismiss.call(d,d),ee(ne==="x"?he>0?"right":"left":Y>0?"down":"up"),ot(),qe(!0);return}else{var Oe,Ge;(Oe=ie.current)==null||Oe.style.setProperty("--swipe-amount-x","0px"),(Ge=ie.current)==null||Ge.style.setProperty("--swipe-amount-y","0px")}We(!1),Me(!1),W(null)},onPointerMove:_e=>{var ze,kt,he;if(!Z.current||!ct||((ze=window.getSelection())==null?void 0:ze.toString().length)>0)return;const H=_e.clientY-Z.current.y,X=_e.clientX-Z.current.x;var be;const Oe=(be=e.swipeDirections)!=null?be:cye(V);!ne&&(Math.abs(X)>1||Math.abs(H)>1)&&W(Math.abs(X)>Math.abs(H)?"x":"y");let Ge={x:0,y:0};const wt=en=>1/(1.5+Math.abs(en)/20);if(ne==="y"){if(Oe.includes("top")||Oe.includes("bottom"))if(Oe.includes("top")&&H<0||Oe.includes("bottom")&&H>0)Ge.y=H;else{const en=H*wt(H);Ge.y=Math.abs(en)<Math.abs(H)?en:H}}else if(ne==="x"&&(Oe.includes("left")||Oe.includes("right")))if(Oe.includes("left")&&X<0||Oe.includes("right")&&X>0)Ge.x=X;else{const en=X*wt(X);Ge.x=Math.abs(en)<Math.abs(X)?en:X}(Math.abs(Ge.x)>0||Math.abs(Ge.y)>0)&&We(!0),(kt=ie.current)==null||kt.style.setProperty("--swipe-amount-x",`${Ge.x}px`),(he=ie.current)==null||he.style.setProperty("--swipe-amount-y",`${Ge.y}px`)}},Ut&&!d.jsx&&Ce!=="loading"?Ve.createElement("button",{"aria-label":$,"data-disabled":bt,"data-close-button":!0,onClick:bt||!ct?()=>{}:()=>{ot(),d.onDismiss==null||d.onDismiss.call(d,d)},className:qc(U==null?void 0:U.closeButton,d==null||(r=d.classNames)==null?void 0:r.closeButton)},(ye=G==null?void 0:G.close)!=null?ye:K0e):null,(Ce||d.icon||d.promise)&&d.icon!==null&&((G==null?void 0:G[Ce])!==null||d.icon)?Ve.createElement("div",{"data-icon":"",className:qc(U==null?void 0:U.icon,d==null||(i=d.classNames)==null?void 0:i.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||B():null,d.type!=="loading"?$e:null):null,Ve.createElement("div",{"data-content":"",className:qc(U==null?void 0:U.content,d==null||(s=d.classNames)==null?void 0:s.content)},Ve.createElement("div",{"data-title":"",className:qc(U==null?void 0:U.title,d==null||(a=d.classNames)==null?void 0:a.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?Ve.createElement("div",{"data-description":"",className:qc(L,ft,U==null?void 0:U.description,d==null||(o=d.classNames)==null?void 0:o.description)},typeof d.description=="function"?d.description():d.description):null),Ve.isValidElement(d.cancel)?d.cancel:d.cancel&&cS(d.cancel)?Ve.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||N,onClick:_e=>{cS(d.cancel)&&ct&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,_e),ot())},className:qc(U==null?void 0:U.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,Ve.isValidElement(d.action)?d.action:d.action&&cS(d.action)?Ve.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||I,onClick:_e=>{cS(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,_e),!_e.defaultPrevented&&ot())},className:qc(U==null?void 0:U.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function LB(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function dye(e,t){const n={};return[e,t].forEach((r,i)=>{const s=i===1,a=s?"--mobile-offset":"--offset",o=s?iye:rye;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${a}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${a}-${c}`]=o:n[`${a}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(o)}),n}const fye=Ve.forwardRef(function(t,n){const{invert:r,position:i="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:y,visibleToasts:b=nye,toastOptions:v,dir:x=LB(),gap:w=aye,icons:S,containerAriaLabel:C="Notifications"}=t,[k,A]=Ve.useState([]),R=Ve.useMemo(()=>Array.from(new Set([i].concat(k.filter(te=>te.position).map(te=>te.position)))),[k,i]),[N,I]=Ve.useState([]),[O,L]=Ve.useState(!1),[P,V]=Ve.useState(!1),[F,J]=Ve.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=Ve.useRef(null),G=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=Ve.useRef(null),ne=Ve.useRef(!1),W=Ve.useCallback(te=>{A(ee=>{var re;return(re=ee.find(de=>de.id===te.id))!=null&&re.delete||po.dismiss(te.id),ee.filter(({id:de})=>de!==te.id)})},[]);return Ve.useEffect(()=>po.subscribe(te=>{if(te.dismiss){requestAnimationFrame(()=>{A(ee=>ee.map(re=>re.id===te.id?{...re,delete:!0}:re))});return}setTimeout(()=>{lE.flushSync(()=>{A(ee=>{const re=ee.findIndex(de=>de.id===te.id);return re!==-1?[...ee.slice(0,re),{...ee[re],...te},...ee.slice(re+1)]:[te,...ee]})})})}),[k]),Ve.useEffect(()=>{if(d!=="system"){J(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window>"u")return;const te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:ee})=>{J(ee?"dark":"light")})}catch{te.addListener(({matches:re})=>{try{J(re?"dark":"light")}catch(de){console.error(de)}})}},[d]),Ve.useEffect(()=>{k.length<=1&&L(!1)},[k]),Ve.useEffect(()=>{const te=ee=>{var re;if(s.every(Ie=>ee[Ie]||ee.code===Ie)){var oe;L(!0),(oe=U.current)==null||oe.focus()}ee.code==="Escape"&&(document.activeElement===U.current||(re=U.current)!=null&&re.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[s]),Ve.useEffect(()=>{if(U.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,ne.current=!1)}},[U.current]),Ve.createElement("section",{ref:n,"aria-label":`${C} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((te,ee)=>{var re;const[de,oe]=te.split("-");return k.length?Ve.createElement("ol",{key:te,dir:x==="auto"?LB():x,tabIndex:-1,ref:U,className:l,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":de,"data-lifted":O&&k.length>1&&!a,"data-x-position":oe,style:{"--front-toast-height":`${((re=N[0])==null?void 0:re.height)||0}px`,"--width":`${sye}px`,"--gap":`${w}px`,...y,...dye(c,u)},onBlur:Ie=>{ne.current&&!Ie.currentTarget.contains(Ie.relatedTarget)&&(ne.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,$.current=Ie.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{P||L(!1)},onDragEnd:()=>L(!1),onPointerDown:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},k.filter(Ie=>!Ie.position&&ee===0||Ie.position===te).map((Ie,je)=>{var Me,Se;return Ve.createElement(uye,{key:Ie.id,icons:S,index:je,toast:Ie,defaultRichColors:h,duration:(Me=v==null?void 0:v.duration)!=null?Me:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Se=v==null?void 0:v.closeButton)!=null?Se:o,interacting:P,position:te,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,closeButtonAriaLabel:v==null?void 0:v.closeButtonAriaLabel,removeToast:W,toasts:k.filter(qe=>qe.position==Ie.position),heights:N.filter(qe=>qe.position==Ie.position),setHeights:I,expandByDefault:a,gap:w,expanded:O,swipeDirections:t.swipeDirections})})):null}))}),Ln=al(ol((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(t().currentConversationId!==n){console.warn(`InteractionStore: loadInteractions called for ${n}, but current is ${t().currentConversationId}. Aborting load.`);return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{}}),r!=="loading"&&Fe.emit(Zn.statusChanged,{status:"loading"});try{const i=await Mt.loadInteractionsForConversation(n);i.sort((l,c)=>l.index-c.index);const s=t().interactions.filter(l=>l.conversationId===n),a=new Set(i.map(l=>l.id)),o=[...i,...s.filter(l=>!a.has(l.id))];o.sort((l,c)=>l.index-c.index),t().currentConversationId===n?(e({interactions:o,status:"idle"}),Fe.emit(Zn.loaded,{conversationId:n,interactions:o}),Fe.emit(Zn.statusChanged,{status:"idle"})):console.warn(`InteractionStore: loadInteractions for ${n} completed, but currentConversationId changed during fetch to ${t().currentConversationId}. Discarding.`)}catch(i){console.error(`InteractionStore: Error loading interactions for ${n}`,i),t().currentConversationId===n&&(e({error:"Failed load interactions",status:"error"}),Fe.emit(Zn.statusChanged,{status:"error"}),Fe.emit(Zn.errorChanged,{error:"Failed load interactions"}))}},_addInteractionToState:n=>{e(r=>{if(r.currentConversationId!==n.conversationId){console.warn(`InteractionStore: Attempted to add interaction for ${n.conversationId} but current is ${r.currentConversationId}. Skipping.`);return}if(!r.interactions.some(i=>i.id===n.id))r.interactions.push(n),r.interactions.sort((i,s)=>i.index-s.index);else{const i=r.interactions.findIndex(s=>s.id===n.id);i!==-1&&(r.interactions[i]={...r.interactions[i],...n})}}),Fe.emit(Zn.added,{interaction:n})},_updateInteractionInState:(n,r)=>{e(i=>{const s=i.interactions.findIndex(a=>a.id===n);if(s!==-1){if(i.currentConversationId!==i.interactions[s].conversationId){console.warn(`InteractionStore: Attempted to update interaction ${n} which is not in the current conversation ${i.currentConversationId}. Skipping.`);return}const a=i.interactions[s];let o={...a.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]),r.metadata.reasoning!==void 0&&(o.reasoning=r.metadata.reasoning));const l={...a,...r,metadata:o};"response"in r&&(l.response=r.response),"rating"in r&&(l.rating=r.rating),i.interactions[s]=l}}),Fe.emit(Zn.updated,{interactionId:n,updates:r})},appendInteractionResponseChunk:(n,r)=>{e(i=>{var s;i.streamingInteractionIds.includes(n)&&i.currentConversationId===((s=i.interactions.find(a=>a.id===n))==null?void 0:s.conversationId)&&(i.activeStreamBuffers[n]=(i.activeStreamBuffers[n]||"")+r)}),Fe.emit(Zn.activeStreamBuffersChanged,{buffers:t().activeStreamBuffers})},appendReasoningChunk:(n,r)=>{e(i=>{var s;i.streamingInteractionIds.includes(n)&&i.currentConversationId===((s=i.interactions.find(a=>a.id===n))==null?void 0:s.conversationId)&&(i.activeReasoningBuffers[n]=(i.activeReasoningBuffers[n]||"")+r)}),Fe.emit(Zn.activeReasoningBuffersChanged,{buffers:t().activeReasoningBuffers})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(i=>i.id!==n)})},rateInteraction:async(n,r)=>{const i=t().interactions.find(s=>s.id===n);if(i&&t().currentConversationId===i.conversationId){t()._updateInteractionInState(n,{rating:r});try{await Mt.saveInteraction({...i,rating:r}),Fe.emit(Zn.interactionRated,{interactionId:n,rating:r})}catch{t()._updateInteractionInState(n,{rating:i.rating}),Pe.error("Failed to save rating.")}}},setCurrentConversationId:async n=>{const r=t().currentConversationId;if(r===n){n&&t().interactions.length===0&&t().status!=="loading"?(console.warn(`InteractionStore: Current ID ${n} matches, but no interactions. Forcing reload.`),await t().loadInteractions(n)):console.log(`InteractionStore: setCurrentConversationId called with the same ID (${n}). No change needed or already handled.`);return}console.log(`InteractionStore: Setting current conversation ID from ${r} to ${n}`),e({currentConversationId:n}),Fe.emit(Zn.currentConversationIdChanged,{conversationId:n}),n?await t().loadInteractions(n):t().clearInteractions()},clearInteractions:()=>{const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&Fe.emit(Zn.statusChanged,{status:"idle"}),Fe.emit(Zn.currentConversationIdChanged,{conversationId:null})},setError:n=>{const r=t().status;let i="idle";e(s=>{s.error=n,n?(i="error",s.status="error"):s.status==="error"?(i=s.streamingInteractionIds.length>0?"streaming":"idle",s.status=i):i=s.status}),r!==i&&Fe.emit(Zn.statusChanged,{status:i}),Fe.emit(Zn.errorChanged,{error:n})},setStatus:n=>{t().status!==n&&(e({status:n}),Fe.emit(Zn.statusChanged,{status:n}))},_addStreamingId:n=>{let r=!1;e(i=>{i.streamingInteractionIds.includes(n)||(i.streamingInteractionIds.push(n),i.activeStreamBuffers[n]="",i.activeReasoningBuffers[n]="",i.streamingInteractionIds.length===1&&(i.status="streaming",r=!0),i.error=null)}),r&&Fe.emit(Zn.statusChanged,{status:"streaming"}),Fe.emit(Zn.streamingIdsChanged,{streamingIds:t().streamingInteractionIds})},_removeStreamingId:n=>{let r=!1;e(i=>{const s=i.streamingInteractionIds.indexOf(n);s!==-1&&(i.streamingInteractionIds.splice(s,1),delete i.activeStreamBuffers[n],delete i.activeReasoningBuffers[n],i.streamingInteractionIds.length===0&&i.status==="streaming"&&(i.status=i.error?"error":"idle",r=!0))}),r&&Fe.emit(Zn.statusChanged,{status:t().status}),Fe.emit(Zn.streamingIdsChanged,{streamingIds:t().streamingInteractionIds})},getRegisteredActionHandlers:()=>{const n="interactionStore",r=t();return[{eventName:Zn.loadInteractionsRequest,handler:i=>r.loadInteractions(i.conversationId),storeId:n},{eventName:Zn.rateInteractionRequest,handler:i=>r.rateInteraction(i.interactionId,i.rating),storeId:n},{eventName:Zn.setCurrentConversationIdRequest,handler:i=>r.setCurrentConversationId(i.id),storeId:n},{eventName:Zn.clearInteractionsRequest,handler:()=>r.clearInteractions(),storeId:n},{eventName:Zn.setErrorRequest,handler:i=>r.setError(i.error),storeId:n},{eventName:Zn.setStatusRequest,handler:i=>r.setStatus(i.status),storeId:n}]}}))),hye="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Us=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=hye[n[e]&63];return t};const Ol={attachedFilesChanged:"input.attached.files.changed",addAttachedFileRequest:"input.add.attached.file.request",removeAttachedFileRequest:"input.remove.attached.file.request",clearAttachedFilesRequest:"input.clear.attached.files.request"},rh=al(ol((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(i=>{if(i.attachedFilesMetadata.some(a=>a.source==="direct"&&n.source==="direct"?a.name===n.name&&a.size===n.size:a.source==="vfs"&&n.source==="vfs"?a.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const a={id:Us(),...n};i.attachedFilesMetadata.push(a),r=!0}}),r&&Fe.emit(Ol.attachedFilesChanged,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(i=>{const s=i.attachedFilesMetadata.length;i.attachedFilesMetadata=i.attachedFilesMetadata.filter(a=>a.id!==n),r=i.attachedFilesMetadata.length<s}),r&&Fe.emit(Ol.attachedFilesChanged,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&Fe.emit(Ol.attachedFilesChanged,{files:[]})},getRegisteredActionHandlers:()=>{const n="inputStore",r=t();return[{eventName:Ol.addAttachedFileRequest,handler:i=>r.addAttachedFile(i),storeId:n},{eventName:Ol.removeAttachedFileRequest,handler:i=>r.removeAttachedFile(i.attachmentId),storeId:n},{eventName:Ol.clearAttachedFilesRequest,handler:()=>r.clearAttachedFiles(),storeId:n}]}}))),EH=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(EH);const Nx=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml"||n.split(".").length<2)return!0;const i="."+n.split(".").pop();return EH.has(i)};var TH="vercel.ai.error",pye=Symbol.for(TH),AH,mye=class RH extends Error{constructor({name:t,message:n,cause:r}){super(n),this[AH]=!0,this.name=t,this.cause=r}static isInstance(t){return RH.hasMarker(t,TH)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};AH=pye;var cr=mye,NH="AI_APICallError",MH=`vercel.ai.error.${NH}`,gye=Symbol.for(MH),IH,Fl=class extends cr{constructor({message:t,url:n,requestBodyValues:r,statusCode:i,responseHeaders:s,responseBody:a,cause:o,isRetryable:l=i!=null&&(i===408||i===409||i===429||i>=500),data:c}){super({name:NH,message:t,cause:o}),this[IH]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=i,this.responseHeaders=s,this.responseBody=a,this.isRetryable=l,this.data=c}static isInstance(t){return cr.hasMarker(t,MH)}};IH=gye;var jH="AI_EmptyResponseBodyError",OH=`vercel.ai.error.${jH}`,yye=Symbol.for(OH),PH,DH=class extends cr{constructor({message:t="Empty response body"}={}){super({name:jH,message:t}),this[PH]=!0}static isInstance(t){return cr.hasMarker(t,OH)}};PH=yye;function Kw(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var FH="AI_InvalidArgumentError",LH=`vercel.ai.error.${FH}`,bye=Symbol.for(LH),BH,$H=class extends cr{constructor({message:t,cause:n,argument:r}){super({name:FH,message:t,cause:n}),this[BH]=!0,this.argument=r}static isInstance(t){return cr.hasMarker(t,LH)}};BH=bye;var zH="AI_InvalidPromptError",UH=`vercel.ai.error.${zH}`,vye=Symbol.for(UH),qH,nu=class extends cr{constructor({prompt:t,message:n,cause:r}){super({name:zH,message:`Invalid prompt: ${n}`,cause:r}),this[qH]=!0,this.prompt=t}static isInstance(t){return cr.hasMarker(t,UH)}};qH=vye;var VH="AI_InvalidResponseDataError",WH=`vercel.ai.error.${VH}`,xye=Symbol.for(WH),HH,p0=class extends cr{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:VH,message:n}),this[HH]=!0,this.data=t}static isInstance(t){return cr.hasMarker(t,WH)}};HH=xye;var GH="AI_JSONParseError",KH=`vercel.ai.error.${GH}`,wye=Symbol.for(KH),YH,G2=class extends cr{constructor({text:t,cause:n}){super({name:GH,message:`JSON parsing failed: Text: ${t}.
Error message: ${Kw(n)}`,cause:n}),this[YH]=!0,this.text=t}static isInstance(t){return cr.hasMarker(t,KH)}};YH=wye;var ZH="AI_LoadAPIKeyError",XH=`vercel.ai.error.${ZH}`,_ye=Symbol.for(XH),JH,uS=class extends cr{constructor({message:t}){super({name:ZH,message:t}),this[JH]=!0}static isInstance(t){return cr.hasMarker(t,XH)}};JH=_ye;var QH="AI_TooManyEmbeddingValuesForCallError",eG=`vercel.ai.error.${QH}`,Sye=Symbol.for(eG),tG,cE=class extends cr{constructor(e){super({name:QH,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[tG]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return cr.hasMarker(e,eG)}};tG=Sye;var nG="AI_TypeValidationError",rG=`vercel.ai.error.${nG}`,Cye=Symbol.for(rG),iG,kye=class nj extends cr{constructor({value:t,cause:n}){super({name:nG,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Kw(n)}`,cause:n}),this[iG]=!0,this.value=t}static isInstance(t){return cr.hasMarker(t,rG)}static wrap({value:t,cause:n}){return nj.isInstance(n)&&n.value===t?n:new nj({value:t,cause:n})}};iG=Cye;var K2=kye,sG="AI_UnsupportedFunctionalityError",aG=`vercel.ai.error.${sG}`,Eye=Symbol.for(aG),oG,ei=class extends cr{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:sG,message:n}),this[oG]=!0,this.functionality=t}static isInstance(t){return cr.hasMarker(t,aG)}};oG=Eye;let Tye=(e,t=21)=>(n=t)=>{let r="",i=n|0;for(;i--;)r+=e[Math.random()*e.length|0];return r};var HO={},uE={};uE.byteLength=Nye;uE.toByteArray=Iye;uE.fromByteArray=Pye;var iu=[],Ml=[],Aye=typeof Uint8Array<"u"?Uint8Array:Array,fN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dg=0,Rye=fN.length;Dg<Rye;++Dg)iu[Dg]=fN[Dg],Ml[fN.charCodeAt(Dg)]=Dg;Ml[45]=62;Ml[95]=63;function lG(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function Nye(e){var t=lG(e),n=t[0],r=t[1];return(n+r)*3/4-r}function Mye(e,t,n){return(t+n)*3/4-n}function Iye(e){var t,n=lG(e),r=n[0],i=n[1],s=new Aye(Mye(e,r,i)),a=0,o=i>0?r-4:r,l;for(l=0;l<o;l+=4)t=Ml[e.charCodeAt(l)]<<18|Ml[e.charCodeAt(l+1)]<<12|Ml[e.charCodeAt(l+2)]<<6|Ml[e.charCodeAt(l+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return i===2&&(t=Ml[e.charCodeAt(l)]<<2|Ml[e.charCodeAt(l+1)]>>4,s[a++]=t&255),i===1&&(t=Ml[e.charCodeAt(l)]<<10|Ml[e.charCodeAt(l+1)]<<4|Ml[e.charCodeAt(l+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}function jye(e){return iu[e>>18&63]+iu[e>>12&63]+iu[e>>6&63]+iu[e&63]}function Oye(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(jye(r));return i.join("")}function Pye(e){for(var t,n=e.length,r=n%3,i=[],s=16383,a=0,o=n-r;a<o;a+=s)i.push(Oye(e,a,a+s>o?o:a+s));return r===1?(t=e[n-1],i.push(iu[t>>2]+iu[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(iu[t>>10]+iu[t>>4&63]+iu[t<<2&63]+"=")),i.join("")}var GO={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */GO.read=function(e,t,n,r,i){var s,a,o=i*8-r-1,l=(1<<o)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,m=e[t+d];for(d+=h,s=m&(1<<-u)-1,m>>=-u,u+=o;u>0;s=s*256+e[t+d],d+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=r;u>0;a=a*256+e[t+d],d+=h,u-=8);if(s===0)s=1-c;else{if(s===l)return a?NaN:(m?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-c}return(m?-1:1)*a*Math.pow(2,s-r)};GO.write=function(e,t,n,r,i,s){var a,o,l,c=s*8-i-1,u=(1<<c)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:s-1,y=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=u?(o=0,a=u):a+d>=1?(o=(t*l-1)*Math.pow(2,i),a=a+d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+m]=o&255,m+=y,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;e[n+m]=a&255,m+=y,a/=256,c-=8);e[n+m-y]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=uE,n=GO,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:a,SharedArrayBuffer:o}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const xe=new s(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,s.prototype),Object.setPrototypeOf(xe,D),xe.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(xe){if(xe>i)throw new RangeError('The value "'+xe+'" is invalid for option "size"');const D=new s(xe);return Object.setPrototypeOf(D,u.prototype),D}function u(xe,D,Z){if(typeof xe=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(xe)}return d(xe,D,Z)}u.poolSize=8192;function d(xe,D,Z){if(typeof xe=="string")return b(xe,D);if(a.isView(xe))return x(xe);if(xe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xe);if(ft(xe,a)||xe&&ft(xe.buffer,a)||typeof o<"u"&&(ft(xe,o)||xe&&ft(xe.buffer,o)))return w(xe,D,Z);if(typeof xe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const me=xe.valueOf&&xe.valueOf();if(me!=null&&me!==xe)return u.from(me,D,Z);const De=S(xe);if(De)return De;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof xe[Symbol.toPrimitive]=="function")return u.from(xe[Symbol.toPrimitive]("string"),D,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xe)}u.from=function(xe,D,Z){return d(xe,D,Z)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function h(xe){if(typeof xe!="number")throw new TypeError('"size" argument must be of type number');if(xe<0)throw new RangeError('The value "'+xe+'" is invalid for option "size"')}function m(xe,D,Z){return h(xe),xe<=0?c(xe):D!==void 0?typeof Z=="string"?c(xe).fill(D,Z):c(xe).fill(D):c(xe)}u.alloc=function(xe,D,Z){return m(xe,D,Z)};function y(xe){return h(xe),c(xe<0?0:C(xe)|0)}u.allocUnsafe=function(xe){return y(xe)},u.allocUnsafeSlow=function(xe){return y(xe)};function b(xe,D){if((typeof D!="string"||D==="")&&(D="utf8"),!u.isEncoding(D))throw new TypeError("Unknown encoding: "+D);const Z=A(xe,D)|0;let me=c(Z);const De=me.write(xe,D);return De!==Z&&(me=me.slice(0,De)),me}function v(xe){const D=xe.length<0?0:C(xe.length)|0,Z=c(D);for(let me=0;me<D;me+=1)Z[me]=xe[me]&255;return Z}function x(xe){if(ft(xe,s)){const D=new s(xe);return w(D.buffer,D.byteOffset,D.byteLength)}return v(xe)}function w(xe,D,Z){if(D<0||xe.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(xe.byteLength<D+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let me;return D===void 0&&Z===void 0?me=new s(xe):Z===void 0?me=new s(xe,D):me=new s(xe,D,Z),Object.setPrototypeOf(me,u.prototype),me}function S(xe){if(u.isBuffer(xe)){const D=C(xe.length)|0,Z=c(D);return Z.length===0||xe.copy(Z,0,0,D),Z}if(xe.length!==void 0)return typeof xe.length!="number"||Pt(xe.length)?c(0):v(xe);if(xe.type==="Buffer"&&Array.isArray(xe.data))return v(xe.data)}function C(xe){if(xe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return xe|0}function k(xe){return+xe!=xe&&(xe=0),u.alloc(+xe)}u.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==u.prototype},u.compare=function(D,Z){if(ft(D,s)&&(D=u.from(D,D.offset,D.byteLength)),ft(Z,s)&&(Z=u.from(Z,Z.offset,Z.byteLength)),!u.isBuffer(D)||!u.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===Z)return 0;let me=D.length,De=Z.length;for(let we=0,Ne=Math.min(me,De);we<Ne;++we)if(D[we]!==Z[we]){me=D[we],De=Z[we];break}return me<De?-1:De<me?1:0},u.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(D,Z){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return u.alloc(0);let me;if(Z===void 0)for(Z=0,me=0;me<D.length;++me)Z+=D[me].length;const De=u.allocUnsafe(Z);let we=0;for(me=0;me<D.length;++me){let Ne=D[me];if(ft(Ne,s))we+Ne.length>De.length?(u.isBuffer(Ne)||(Ne=u.from(Ne)),Ne.copy(De,we)):s.prototype.set.call(De,Ne,we);else if(u.isBuffer(Ne))Ne.copy(De,we);else throw new TypeError('"list" argument must be an Array of Buffers');we+=Ne.length}return De};function A(xe,D){if(u.isBuffer(xe))return xe.length;if(a.isView(xe)||ft(xe,a))return xe.byteLength;if(typeof xe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof xe);const Z=xe.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&Z===0)return 0;let De=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return Ee(xe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return ct(xe).length;default:if(De)return me?-1:Ee(xe).length;D=(""+D).toLowerCase(),De=!0}}u.byteLength=A;function R(xe,D,Z){let me=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,D>>>=0,Z<=D))return"";for(xe||(xe="utf8");;)switch(xe){case"hex":return ee(this,D,Z);case"utf8":case"utf-8":return G(this,D,Z);case"ascii":return W(this,D,Z);case"latin1":case"binary":return te(this,D,Z);case"base64":return U(this,D,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,D,Z);default:if(me)throw new TypeError("Unknown encoding: "+xe);xe=(xe+"").toLowerCase(),me=!0}}u.prototype._isBuffer=!0;function N(xe,D,Z){const me=xe[D];xe[D]=xe[Z],xe[Z]=me}u.prototype.swap16=function(){const D=this.length;if(D%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<D;Z+=2)N(this,Z,Z+1);return this},u.prototype.swap32=function(){const D=this.length;if(D%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<D;Z+=4)N(this,Z,Z+3),N(this,Z+1,Z+2);return this},u.prototype.swap64=function(){const D=this.length;if(D%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<D;Z+=8)N(this,Z,Z+7),N(this,Z+1,Z+6),N(this,Z+2,Z+5),N(this,Z+3,Z+4);return this},u.prototype.toString=function(){const D=this.length;return D===0?"":arguments.length===0?G(this,0,D):R.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(D){if(!u.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D?!0:u.compare(this,D)===0},u.prototype.inspect=function(){let D="";const Z=e.INSPECT_MAX_BYTES;return D=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(D+=" ... "),"<Buffer "+D+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(D,Z,me,De,we){if(ft(D,s)&&(D=u.from(D,D.offset,D.byteLength)),!u.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(Z===void 0&&(Z=0),me===void 0&&(me=D?D.length:0),De===void 0&&(De=0),we===void 0&&(we=this.length),Z<0||me>D.length||De<0||we>this.length)throw new RangeError("out of range index");if(De>=we&&Z>=me)return 0;if(De>=we)return-1;if(Z>=me)return 1;if(Z>>>=0,me>>>=0,De>>>=0,we>>>=0,this===D)return 0;let Ne=we-De,fe=me-Z;const bt=Math.min(Ne,fe),ot=this.slice(De,we),B=D.slice(Z,me);for(let $e=0;$e<bt;++$e)if(ot[$e]!==B[$e]){Ne=ot[$e],fe=B[$e];break}return Ne<fe?-1:fe<Ne?1:0};function I(xe,D,Z,me,De){if(xe.length===0)return-1;if(typeof Z=="string"?(me=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Pt(Z)&&(Z=De?0:xe.length-1),Z<0&&(Z=xe.length+Z),Z>=xe.length){if(De)return-1;Z=xe.length-1}else if(Z<0)if(De)Z=0;else return-1;if(typeof D=="string"&&(D=u.from(D,me)),u.isBuffer(D))return D.length===0?-1:O(xe,D,Z,me,De);if(typeof D=="number")return D=D&255,typeof s.prototype.indexOf=="function"?De?s.prototype.indexOf.call(xe,D,Z):s.prototype.lastIndexOf.call(xe,D,Z):O(xe,[D],Z,me,De);throw new TypeError("val must be string, number or Buffer")}function O(xe,D,Z,me,De){let we=1,Ne=xe.length,fe=D.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(xe.length<2||D.length<2)return-1;we=2,Ne/=2,fe/=2,Z/=2}function bt(B,$e){return we===1?B[$e]:B.readUInt16BE($e*we)}let ot;if(De){let B=-1;for(ot=Z;ot<Ne;ot++)if(bt(xe,ot)===bt(D,B===-1?0:ot-B)){if(B===-1&&(B=ot),ot-B+1===fe)return B*we}else B!==-1&&(ot-=ot-B),B=-1}else for(Z+fe>Ne&&(Z=Ne-fe),ot=Z;ot>=0;ot--){let B=!0;for(let $e=0;$e<fe;$e++)if(bt(xe,ot+$e)!==bt(D,$e)){B=!1;break}if(B)return ot}return-1}u.prototype.includes=function(D,Z,me){return this.indexOf(D,Z,me)!==-1},u.prototype.indexOf=function(D,Z,me){return I(this,D,Z,me,!0)},u.prototype.lastIndexOf=function(D,Z,me){return I(this,D,Z,me,!1)};function L(xe,D,Z,me){Z=Number(Z)||0;const De=xe.length-Z;me?(me=Number(me),me>De&&(me=De)):me=De;const we=D.length;me>we/2&&(me=we/2);let Ne;for(Ne=0;Ne<me;++Ne){const fe=parseInt(D.substr(Ne*2,2),16);if(Pt(fe))return Ne;xe[Z+Ne]=fe}return Ne}function P(xe,D,Z,me){return Tt(Ee(D,xe.length-Z),xe,Z,me)}function V(xe,D,Z,me){return Tt(Be(D),xe,Z,me)}function F(xe,D,Z,me){return Tt(ct(D),xe,Z,me)}function J(xe,D,Z,me){return Tt(Ce(D,xe.length-Z),xe,Z,me)}u.prototype.write=function(D,Z,me,De){if(Z===void 0)De="utf8",me=this.length,Z=0;else if(me===void 0&&typeof Z=="string")De=Z,me=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(me)?(me=me>>>0,De===void 0&&(De="utf8")):(De=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const we=this.length-Z;if((me===void 0||me>we)&&(me=we),D.length>0&&(me<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");let Ne=!1;for(;;)switch(De){case"hex":return L(this,D,Z,me);case"utf8":case"utf-8":return P(this,D,Z,me);case"ascii":case"latin1":case"binary":return V(this,D,Z,me);case"base64":return F(this,D,Z,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,D,Z,me);default:if(Ne)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Ne=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(xe,D,Z){return D===0&&Z===xe.length?t.fromByteArray(xe):t.fromByteArray(xe.slice(D,Z))}function G(xe,D,Z){Z=Math.min(xe.length,Z);const me=[];let De=D;for(;De<Z;){const we=xe[De];let Ne=null,fe=we>239?4:we>223?3:we>191?2:1;if(De+fe<=Z){let bt,ot,B,$e;switch(fe){case 1:we<128&&(Ne=we);break;case 2:bt=xe[De+1],(bt&192)===128&&($e=(we&31)<<6|bt&63,$e>127&&(Ne=$e));break;case 3:bt=xe[De+1],ot=xe[De+2],(bt&192)===128&&(ot&192)===128&&($e=(we&15)<<12|(bt&63)<<6|ot&63,$e>2047&&($e<55296||$e>57343)&&(Ne=$e));break;case 4:bt=xe[De+1],ot=xe[De+2],B=xe[De+3],(bt&192)===128&&(ot&192)===128&&(B&192)===128&&($e=(we&15)<<18|(bt&63)<<12|(ot&63)<<6|B&63,$e>65535&&$e<1114112&&(Ne=$e))}}Ne===null?(Ne=65533,fe=1):Ne>65535&&(Ne-=65536,me.push(Ne>>>10&1023|55296),Ne=56320|Ne&1023),me.push(Ne),De+=fe}return ne(me)}const $=4096;function ne(xe){const D=xe.length;if(D<=$)return String.fromCharCode.apply(String,xe);let Z="",me=0;for(;me<D;)Z+=String.fromCharCode.apply(String,xe.slice(me,me+=$));return Z}function W(xe,D,Z){let me="";Z=Math.min(xe.length,Z);for(let De=D;De<Z;++De)me+=String.fromCharCode(xe[De]&127);return me}function te(xe,D,Z){let me="";Z=Math.min(xe.length,Z);for(let De=D;De<Z;++De)me+=String.fromCharCode(xe[De]);return me}function ee(xe,D,Z){const me=xe.length;(!D||D<0)&&(D=0),(!Z||Z<0||Z>me)&&(Z=me);let De="";for(let we=D;we<Z;++we)De+=Ut[xe[we]];return De}function re(xe,D,Z){const me=xe.slice(D,Z);let De="";for(let we=0;we<me.length-1;we+=2)De+=String.fromCharCode(me[we]+me[we+1]*256);return De}u.prototype.slice=function(D,Z){const me=this.length;D=~~D,Z=Z===void 0?me:~~Z,D<0?(D+=me,D<0&&(D=0)):D>me&&(D=me),Z<0?(Z+=me,Z<0&&(Z=0)):Z>me&&(Z=me),Z<D&&(Z=D);const De=this.subarray(D,Z);return Object.setPrototypeOf(De,u.prototype),De};function de(xe,D,Z){if(xe%1!==0||xe<0)throw new RangeError("offset is not uint");if(xe+D>Z)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(D,Z,me){D=D>>>0,Z=Z>>>0,me||de(D,Z,this.length);let De=this[D],we=1,Ne=0;for(;++Ne<Z&&(we*=256);)De+=this[D+Ne]*we;return De},u.prototype.readUintBE=u.prototype.readUIntBE=function(D,Z,me){D=D>>>0,Z=Z>>>0,me||de(D,Z,this.length);let De=this[D+--Z],we=1;for(;Z>0&&(we*=256);)De+=this[D+--Z]*we;return De},u.prototype.readUint8=u.prototype.readUInt8=function(D,Z){return D=D>>>0,Z||de(D,1,this.length),this[D]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(D,Z){return D=D>>>0,Z||de(D,2,this.length),this[D]|this[D+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(D,Z){return D=D>>>0,Z||de(D,2,this.length),this[D]<<8|this[D+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(D,Z){return D=D>>>0,Z||de(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+this[D+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(D,Z){return D=D>>>0,Z||de(D,4,this.length),this[D]*16777216+(this[D+1]<<16|this[D+2]<<8|this[D+3])},u.prototype.readBigUInt64LE=Bt(function(D){D=D>>>0,Te(D,"offset");const Z=this[D],me=this[D+7];(Z===void 0||me===void 0)&&ce(D,this.length-8);const De=Z+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24,we=this[++D]+this[++D]*2**8+this[++D]*2**16+me*2**24;return BigInt(De)+(BigInt(we)<<BigInt(32))}),u.prototype.readBigUInt64BE=Bt(function(D){D=D>>>0,Te(D,"offset");const Z=this[D],me=this[D+7];(Z===void 0||me===void 0)&&ce(D,this.length-8);const De=Z*2**24+this[++D]*2**16+this[++D]*2**8+this[++D],we=this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+me;return(BigInt(De)<<BigInt(32))+BigInt(we)}),u.prototype.readIntLE=function(D,Z,me){D=D>>>0,Z=Z>>>0,me||de(D,Z,this.length);let De=this[D],we=1,Ne=0;for(;++Ne<Z&&(we*=256);)De+=this[D+Ne]*we;return we*=128,De>=we&&(De-=Math.pow(2,8*Z)),De},u.prototype.readIntBE=function(D,Z,me){D=D>>>0,Z=Z>>>0,me||de(D,Z,this.length);let De=Z,we=1,Ne=this[D+--De];for(;De>0&&(we*=256);)Ne+=this[D+--De]*we;return we*=128,Ne>=we&&(Ne-=Math.pow(2,8*Z)),Ne},u.prototype.readInt8=function(D,Z){return D=D>>>0,Z||de(D,1,this.length),this[D]&128?(255-this[D]+1)*-1:this[D]},u.prototype.readInt16LE=function(D,Z){D=D>>>0,Z||de(D,2,this.length);const me=this[D]|this[D+1]<<8;return me&32768?me|4294901760:me},u.prototype.readInt16BE=function(D,Z){D=D>>>0,Z||de(D,2,this.length);const me=this[D+1]|this[D]<<8;return me&32768?me|4294901760:me},u.prototype.readInt32LE=function(D,Z){return D=D>>>0,Z||de(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},u.prototype.readInt32BE=function(D,Z){return D=D>>>0,Z||de(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},u.prototype.readBigInt64LE=Bt(function(D){D=D>>>0,Te(D,"offset");const Z=this[D],me=this[D+7];(Z===void 0||me===void 0)&&ce(D,this.length-8);const De=this[D+4]+this[D+5]*2**8+this[D+6]*2**16+(me<<24);return(BigInt(De)<<BigInt(32))+BigInt(Z+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24)}),u.prototype.readBigInt64BE=Bt(function(D){D=D>>>0,Te(D,"offset");const Z=this[D],me=this[D+7];(Z===void 0||me===void 0)&&ce(D,this.length-8);const De=(Z<<24)+this[++D]*2**16+this[++D]*2**8+this[++D];return(BigInt(De)<<BigInt(32))+BigInt(this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+me)}),u.prototype.readFloatLE=function(D,Z){return D=D>>>0,Z||de(D,4,this.length),n.read(this,D,!0,23,4)},u.prototype.readFloatBE=function(D,Z){return D=D>>>0,Z||de(D,4,this.length),n.read(this,D,!1,23,4)},u.prototype.readDoubleLE=function(D,Z){return D=D>>>0,Z||de(D,8,this.length),n.read(this,D,!0,52,8)},u.prototype.readDoubleBE=function(D,Z){return D=D>>>0,Z||de(D,8,this.length),n.read(this,D,!1,52,8)};function oe(xe,D,Z,me,De,we){if(!u.isBuffer(xe))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>De||D<we)throw new RangeError('"value" argument is out of bounds');if(Z+me>xe.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(D,Z,me,De){if(D=+D,Z=Z>>>0,me=me>>>0,!De){const fe=Math.pow(2,8*me)-1;oe(this,D,Z,me,fe,0)}let we=1,Ne=0;for(this[Z]=D&255;++Ne<me&&(we*=256);)this[Z+Ne]=D/we&255;return Z+me},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(D,Z,me,De){if(D=+D,Z=Z>>>0,me=me>>>0,!De){const fe=Math.pow(2,8*me)-1;oe(this,D,Z,me,fe,0)}let we=me-1,Ne=1;for(this[Z+we]=D&255;--we>=0&&(Ne*=256);)this[Z+we]=D/Ne&255;return Z+me},u.prototype.writeUint8=u.prototype.writeUInt8=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,1,255,0),this[Z]=D&255,Z+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,2,65535,0),this[Z]=D&255,this[Z+1]=D>>>8,Z+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,2,65535,0),this[Z]=D>>>8,this[Z+1]=D&255,Z+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,4,4294967295,0),this[Z+3]=D>>>24,this[Z+2]=D>>>16,this[Z+1]=D>>>8,this[Z]=D&255,Z+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,4,4294967295,0),this[Z]=D>>>24,this[Z+1]=D>>>16,this[Z+2]=D>>>8,this[Z+3]=D&255,Z+4};function Ie(xe,D,Z,me,De){ge(D,me,De,xe,Z,7);let we=Number(D&BigInt(4294967295));xe[Z++]=we,we=we>>8,xe[Z++]=we,we=we>>8,xe[Z++]=we,we=we>>8,xe[Z++]=we;let Ne=Number(D>>BigInt(32)&BigInt(4294967295));return xe[Z++]=Ne,Ne=Ne>>8,xe[Z++]=Ne,Ne=Ne>>8,xe[Z++]=Ne,Ne=Ne>>8,xe[Z++]=Ne,Z}function je(xe,D,Z,me,De){ge(D,me,De,xe,Z,7);let we=Number(D&BigInt(4294967295));xe[Z+7]=we,we=we>>8,xe[Z+6]=we,we=we>>8,xe[Z+5]=we,we=we>>8,xe[Z+4]=we;let Ne=Number(D>>BigInt(32)&BigInt(4294967295));return xe[Z+3]=Ne,Ne=Ne>>8,xe[Z+2]=Ne,Ne=Ne>>8,xe[Z+1]=Ne,Ne=Ne>>8,xe[Z]=Ne,Z+8}u.prototype.writeBigUInt64LE=Bt(function(D,Z=0){return Ie(this,D,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Bt(function(D,Z=0){return je(this,D,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(D,Z,me,De){if(D=+D,Z=Z>>>0,!De){const bt=Math.pow(2,8*me-1);oe(this,D,Z,me,bt-1,-bt)}let we=0,Ne=1,fe=0;for(this[Z]=D&255;++we<me&&(Ne*=256);)D<0&&fe===0&&this[Z+we-1]!==0&&(fe=1),this[Z+we]=(D/Ne>>0)-fe&255;return Z+me},u.prototype.writeIntBE=function(D,Z,me,De){if(D=+D,Z=Z>>>0,!De){const bt=Math.pow(2,8*me-1);oe(this,D,Z,me,bt-1,-bt)}let we=me-1,Ne=1,fe=0;for(this[Z+we]=D&255;--we>=0&&(Ne*=256);)D<0&&fe===0&&this[Z+we+1]!==0&&(fe=1),this[Z+we]=(D/Ne>>0)-fe&255;return Z+me},u.prototype.writeInt8=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,1,127,-128),D<0&&(D=255+D+1),this[Z]=D&255,Z+1},u.prototype.writeInt16LE=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,2,32767,-32768),this[Z]=D&255,this[Z+1]=D>>>8,Z+2},u.prototype.writeInt16BE=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,2,32767,-32768),this[Z]=D>>>8,this[Z+1]=D&255,Z+2},u.prototype.writeInt32LE=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,4,2147483647,-2147483648),this[Z]=D&255,this[Z+1]=D>>>8,this[Z+2]=D>>>16,this[Z+3]=D>>>24,Z+4},u.prototype.writeInt32BE=function(D,Z,me){return D=+D,Z=Z>>>0,me||oe(this,D,Z,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[Z]=D>>>24,this[Z+1]=D>>>16,this[Z+2]=D>>>8,this[Z+3]=D&255,Z+4},u.prototype.writeBigInt64LE=Bt(function(D,Z=0){return Ie(this,D,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Bt(function(D,Z=0){return je(this,D,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Me(xe,D,Z,me,De,we){if(Z+me>xe.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function Se(xe,D,Z,me,De){return D=+D,Z=Z>>>0,De||Me(xe,D,Z,4),n.write(xe,D,Z,me,23,4),Z+4}u.prototype.writeFloatLE=function(D,Z,me){return Se(this,D,Z,!0,me)},u.prototype.writeFloatBE=function(D,Z,me){return Se(this,D,Z,!1,me)};function qe(xe,D,Z,me,De){return D=+D,Z=Z>>>0,De||Me(xe,D,Z,8),n.write(xe,D,Z,me,52,8),Z+8}u.prototype.writeDoubleLE=function(D,Z,me){return qe(this,D,Z,!0,me)},u.prototype.writeDoubleBE=function(D,Z,me){return qe(this,D,Z,!1,me)},u.prototype.copy=function(D,Z,me,De){if(!u.isBuffer(D))throw new TypeError("argument should be a Buffer");if(me||(me=0),!De&&De!==0&&(De=this.length),Z>=D.length&&(Z=D.length),Z||(Z=0),De>0&&De<me&&(De=me),De===me||D.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),D.length-Z<De-me&&(De=D.length-Z+me);const we=De-me;return this===D&&typeof s.prototype.copyWithin=="function"?this.copyWithin(Z,me,De):s.prototype.set.call(D,this.subarray(me,De),Z),we},u.prototype.fill=function(D,Z,me,De){if(typeof D=="string"){if(typeof Z=="string"?(De=Z,Z=0,me=this.length):typeof me=="string"&&(De=me,me=this.length),De!==void 0&&typeof De!="string")throw new TypeError("encoding must be a string");if(typeof De=="string"&&!u.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(D.length===1){const Ne=D.charCodeAt(0);(De==="utf8"&&Ne<128||De==="latin1")&&(D=Ne)}}else typeof D=="number"?D=D&255:typeof D=="boolean"&&(D=Number(D));if(Z<0||this.length<Z||this.length<me)throw new RangeError("Out of range index");if(me<=Z)return this;Z=Z>>>0,me=me===void 0?this.length:me>>>0,D||(D=0);let we;if(typeof D=="number")for(we=Z;we<me;++we)this[we]=D;else{const Ne=u.isBuffer(D)?D:u.from(D,De),fe=Ne.length;if(fe===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(we=0;we<me-Z;++we)this[we+Z]=Ne[we%fe]}return this};const Qe={};function We(xe,D,Z){Qe[xe]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${xe}]`,this.stack,delete this.name}get code(){return xe}set code(De){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:De,writable:!0})}toString(){return`${this.name} [${xe}]: ${this.message}`}}}We("ERR_BUFFER_OUT_OF_BOUNDS",function(xe){return xe?`${xe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),We("ERR_INVALID_ARG_TYPE",function(xe,D){return`The "${xe}" argument must be of type number. Received type ${typeof D}`},TypeError),We("ERR_OUT_OF_RANGE",function(xe,D,Z){let me=`The value of "${xe}" is out of range.`,De=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?De=Re(String(Z)):typeof Z=="bigint"&&(De=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(De=Re(De)),De+="n"),me+=` It must be ${D}. Received ${De}`,me},RangeError);function Re(xe){let D="",Z=xe.length;const me=xe[0]==="-"?1:0;for(;Z>=me+4;Z-=3)D=`_${xe.slice(Z-3,Z)}${D}`;return`${xe.slice(0,Z)}${D}`}function K(xe,D,Z){Te(D,"offset"),(xe[D]===void 0||xe[D+Z]===void 0)&&ce(D,xe.length-(Z+1))}function ge(xe,D,Z,me,De,we){if(xe>Z||xe<D){const Ne=typeof D=="bigint"?"n":"";let fe;throw D===0||D===BigInt(0)?fe=`>= 0${Ne} and < 2${Ne} ** ${(we+1)*8}${Ne}`:fe=`>= -(2${Ne} ** ${(we+1)*8-1}${Ne}) and < 2 ** ${(we+1)*8-1}${Ne}`,new Qe.ERR_OUT_OF_RANGE("value",fe,xe)}K(me,De,we)}function Te(xe,D){if(typeof xe!="number")throw new Qe.ERR_INVALID_ARG_TYPE(D,"number",xe)}function ce(xe,D,Z){throw Math.floor(xe)!==xe?(Te(xe,Z),new Qe.ERR_OUT_OF_RANGE("offset","an integer",xe)):D<0?new Qe.ERR_BUFFER_OUT_OF_BOUNDS:new Qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${D}`,xe)}const le=/[^+/0-9A-Za-z-_]/g;function ie(xe){if(xe=xe.split("=")[0],xe=xe.trim().replace(le,""),xe.length<2)return"";for(;xe.length%4!==0;)xe=xe+"=";return xe}function Ee(xe,D){D=D||1/0;let Z;const me=xe.length;let De=null;const we=[];for(let Ne=0;Ne<me;++Ne){if(Z=xe.charCodeAt(Ne),Z>55295&&Z<57344){if(!De){if(Z>56319){(D-=3)>-1&&we.push(239,191,189);continue}else if(Ne+1===me){(D-=3)>-1&&we.push(239,191,189);continue}De=Z;continue}if(Z<56320){(D-=3)>-1&&we.push(239,191,189),De=Z;continue}Z=(De-55296<<10|Z-56320)+65536}else De&&(D-=3)>-1&&we.push(239,191,189);if(De=null,Z<128){if((D-=1)<0)break;we.push(Z)}else if(Z<2048){if((D-=2)<0)break;we.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((D-=3)<0)break;we.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((D-=4)<0)break;we.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return we}function Be(xe){const D=[];for(let Z=0;Z<xe.length;++Z)D.push(xe.charCodeAt(Z)&255);return D}function Ce(xe,D){let Z,me,De;const we=[];for(let Ne=0;Ne<xe.length&&!((D-=2)<0);++Ne)Z=xe.charCodeAt(Ne),me=Z>>8,De=Z%256,we.push(De),we.push(me);return we}function ct(xe){return t.toByteArray(ie(xe))}function Tt(xe,D,Z,me){let De;for(De=0;De<me&&!(De+Z>=D.length||De>=xe.length);++De)D[De+Z]=xe[De];return De}function ft(xe,D){return xe instanceof D||xe!=null&&xe.constructor!=null&&xe.constructor.name!=null&&xe.constructor.name===D.name}function Pt(xe){return xe!==xe}const Ut=function(){const xe="0123456789abcdef",D=new Array(256);for(let Z=0;Z<16;++Z){const me=Z*16;for(let De=0;De<16;++De)D[me+De]=xe[Z]+xe[De]}return D}();function Bt(xe){return typeof BigInt>"u"?tn:xe}function tn(){throw new Error("BigInt not supported")}})(HO);const on=HO.Buffer,ji=HO.Buffer;var hp={exports:{}},BB;function Dye(){if(BB)return hp.exports;BB=1;const e=typeof on<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,c){c==null&&l!==null&&typeof l=="object"&&(c=l,l=void 0),e&&on.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const u=JSON.parse(o,l);if(u===null||typeof u!="object")return u;const d=c&&c.protoAction||"error",h=c&&c.constructorAction||"error";if(d==="ignore"&&h==="ignore")return u;if(d!=="ignore"&&h!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return u}else if(d!=="ignore"&&h==="ignore"){if(t.test(o)===!1)return u}else if(n.test(o)===!1)return u;return i(u,{protoAction:d,constructorAction:h,safe:c&&c.safe})}function i(o,{protoAction:l="error",constructorAction:c="error",safe:u}={}){let d=[o];for(;d.length;){const h=d;d=[];for(const m of h){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"__proto__")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"constructor")&&Object.prototype.hasOwnProperty.call(m.constructor,"prototype")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.constructor}for(const y in m){const b=m[y];b&&typeof b=="object"&&d.push(b)}}}return o}function s(o,l,c){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,c)}finally{Error.stackTraceLimit=u}}function a(o,l){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return hp.exports=s,hp.exports.default=s,hp.exports.parse=s,hp.exports.safeParse=a,hp.exports.scan=i,hp.exports}var Fye=Dye();const wy=xa(Fye);var Lye={};function hs(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Bye(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function $ye(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function zye(){let e="",t,n=[],r,i;function s(l,c){if(l===""){a(c);return}if(l.startsWith(":"))return;const u=l.indexOf(":");if(u===-1){o(l,"");return}const d=l.slice(0,u),h=u+1,m=h<l.length&&l[h]===" "?l.slice(h+1):l.slice(h);o(d,m)}function a(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:i}),n=[],t=void 0,i=void 0)}function o(l,c){switch(l){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const u=parseInt(c,10);isNaN(u)||(i=u);break}}return new TransformStream({transform(l,c){const{lines:u,incompleteLine:d}=Uye(e,l);e=d;for(let h=0;h<u.length;h++)s(u[h],c)},flush(l){s(e,l),a(l)}})}function Uye(e,t){const n=[];let r=e;for(let i=0;i<t.length;){const s=t[i++];s===`
`?(n.push(r),r=""):s==="\r"?(n.push(r),r="",t[i]===`
`&&i++):r+=s}return{lines:n,incompleteLine:r}}function _y(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var gm=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const i=Tye(n,t);if(e==null)return i;if(n.includes(r))throw new $H({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return s=>`${e}${r}${i(s)}`},go=gm();function qye(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function Vye(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function d2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function cG({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new uS({message:`${r} API key must be a string.`});if(typeof us>"u")throw new uS({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Lye[t],e==null)throw new uS({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new uS({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Y2=Symbol.for("vercel.ai.validator");function Wye(e){return{[Y2]:!0,validate:e}}function Hye(e){return typeof e=="object"&&e!==null&&Y2 in e&&e[Y2]===!0&&"validate"in e}function Gye(e){return Hye(e)?e:Kye(e)}function Kye(e){return Wye(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Yye({value:e,schema:t}){const n=Sy({value:e,schema:t});if(!n.success)throw K2.wrap({value:e,cause:n.error});return n.value}function Sy({value:e,schema:t}){const n=Gye(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:K2.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:K2.wrap({value:e,cause:r})}}}function Zye({text:e,schema:t}){try{const n=wy.parse(e);return t==null?n:Yye({value:n,schema:t})}catch(n){throw G2.isInstance(n)||K2.isInstance(n)?n:new G2({text:e,cause:n})}}function Xp({text:e,schema:t}){try{const n=wy.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Sy({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:G2.isInstance(n)?n:new G2({text:e,cause:n})}}}function Z2(e){try{return wy.parse(e),!0}catch{return!1}}function dE({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Sy({value:t[e],schema:n});if(!r.success)throw new $H({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var Xye=()=>globalThis.fetch,ps=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a})=>uG({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a}),Jye=async({url:e,headers:t,formData:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a})=>uG({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a}),uG=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:s,fetch:a=Xye()})=>{try{const o=await a(e,{method:"POST",headers:Vye(t),body:n.content,signal:s}),l=_y(o);if(!o.ok){let c;try{c=await i({response:o,url:e,requestBodyValues:n.values})}catch(u){throw d2(u)||Fl.isInstance(u)?u:new Fl({message:"Failed to process error response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(d2(c)||Fl.isInstance(c))?c:new Fl({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(d2(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new Fl({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function rj(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var ym=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:s})=>{const a=await r.text(),o=_y(r);if(a.trim()==="")return{responseHeaders:o,value:new Fl({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})};try{const l=Zye({text:a,schema:e});return{responseHeaders:o,value:new Fl({message:t(l),url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new Fl({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})}}},Cy=e=>async({response:t})=>{const n=_y(t);if(t.body==null)throw new DH({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(zye()).pipeThrough(new TransformStream({transform({data:r},i){r!=="[DONE]"&&i.enqueue(Xp({text:r,schema:e}))}}))}},Mo=e=>async({response:t,url:n,requestBodyValues:r})=>{const i=await t.text(),s=Xp({text:i,schema:e}),a=_y(t);if(!s.success)throw new Fl({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:a,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:a,value:s.value,rawValue:s.rawValue}},Qye=()=>async({response:e,url:t,requestBodyValues:n})=>{const r=_y(e);if(!e.body)throw new Fl({message:"Response body is empty",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0});try{const i=await e.arrayBuffer();return{responseHeaders:r,value:new Uint8Array(i)}}catch(i){throw new Fl({message:"Failed to read response as array buffer",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0,cause:i})}},{btoa:ebe,atob:tbe}=globalThis;function fE(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=tbe(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function ih(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return ebe(t)}function hE(e){return e==null?void 0:e.replace(/\/$/,"")}var Xr;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return e.objectValues(a)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},e.find=(i,s)=>{for(const a of i)if(s(a))return a},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}e.joinValues=r,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Xr||(Xr={}));var $B;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})($B||($B={}));const gn=Xr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wf=e=>{switch(typeof e){case"undefined":return gn.undefined;case"string":return gn.string;case"number":return Number.isNaN(e)?gn.nan:gn.number;case"boolean":return gn.boolean;case"function":return gn.function;case"bigint":return gn.bigint;case"symbol":return gn.symbol;case"object":return Array.isArray(e)?gn.array:e===null?gn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?gn.promise:typeof Map<"u"&&e instanceof Map?gn.map:typeof Set<"u"&&e instanceof Set?gn.set:typeof Date<"u"&&e instanceof Date?gn.date:gn.object;default:return gn.unknown}},Zt=Xr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class wu extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),r}static assert(t){if(!(t instanceof wu))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}wu.create=e=>new wu(e);const ij=(e,t)=>{let n;switch(e.code){case Zt.invalid_type:e.received===gn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Zt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Xr.jsonStringifyReplacer)}`;break;case Zt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Xr.joinValues(e.keys,", ")}`;break;case Zt.invalid_union:n="Invalid input";break;case Zt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Xr.joinValues(e.options)}`;break;case Zt.invalid_enum_value:n=`Invalid enum value. Expected ${Xr.joinValues(e.options)}, received '${e.received}'`;break;case Zt.invalid_arguments:n="Invalid function arguments";break;case Zt.invalid_return_type:n="Invalid function return type";break;case Zt.invalid_date:n="Invalid date";break;case Zt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Xr.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Zt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Zt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Zt.custom:n="Invalid input";break;case Zt.invalid_intersection_types:n="Intersection results could not be merged";break;case Zt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Zt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Xr.assertNever(e)}return{message:n}};let nbe=ij;function rbe(){return nbe}const ibe=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}};function fn(e,t){const n=rbe(),r=ibe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===ij?void 0:ij].filter(i=>!!i)});e.common.issues.push(r)}class eo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return lr;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const s=await i.key,a=await i.value;r.push({key:s,value:a})}return eo.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return lr;s.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:t.value,value:r}}}const lr=Object.freeze({status:"aborted"}),Bv=e=>({status:"dirty",value:e}),Wl=e=>({status:"valid",value:e}),zB=e=>e.status==="aborted",UB=e=>e.status==="dirty",D0=e=>e.status==="valid",X2=e=>typeof Promise<"u"&&e instanceof Promise;var kn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(kn||(kn={}));class _u{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const qB=(e,t)=>{if(D0(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new wu(e.common.issues);return this._error=n,this._error}}};function kr(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(a,o)=>{const{message:l}=e;return a.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:i}}class Br{get description(){return this._def.description}_getType(t){return Wf(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Wf(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new eo,ctx:{common:t.parent.common,data:t.data,parsedType:Wf(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(X2(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wf(t)},i=this._parseSync({data:t,path:r.path,parent:r});return qB(r,i)}"~validate"(t){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wf(t)};if(!this["~standard"].async)try{const s=this._parseSync({data:t,path:[],parent:n});return D0(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(s=>D0(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wf(t)},i=this._parse({data:t,path:r.path,parent:r}),s=await(X2(i)?i:Promise.resolve(i));return qB(r,s)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const a=t(i),o=()=>s.addIssue({code:Zt.custom,...r(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new em({schema:this,typeName:Qt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return pu.create(this,this._def)}nullable(){return tm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return hu.create(this)}promise(){return sC.create(this,this._def)}or(t){return eC.create([this,t],this._def)}and(t){return tC.create(this,t,this._def)}transform(t){return new em({...kr(this._def),schema:this,typeName:Qt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new aC({...kr(this._def),innerType:this,defaultValue:n,typeName:Qt.ZodDefault})}brand(){return new pG({typeName:Qt.ZodBranded,type:this,...kr(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new oC({...kr(this._def),innerType:this,catchValue:n,typeName:Qt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return YO.create(this,t)}readonly(){return lC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const sbe=/^c[^\s-]{8,}$/i,abe=/^[0-9a-z]+$/,obe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,lbe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cbe=/^[a-z0-9_-]{21}$/i,ube=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,dbe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fbe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hbe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hN;const pbe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mbe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,gbe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ybe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bbe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,vbe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dG="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",xbe=new RegExp(`^${dG}$`);function fG(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function wbe(e){return new RegExp(`^${fG(e)}$`)}function _be(e){let t=`${dG}T${fG(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Sbe(e,t){return!!((t==="v4"||!t)&&pbe.test(e)||(t==="v6"||!t)&&gbe.test(e))}function Cbe(e,t){if(!ube.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function kbe(e,t){return!!((t==="v4"||!t)&&mbe.test(e)||(t==="v6"||!t)&&ybe.test(e))}class wd extends Br{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==gn.string){const s=this._getOrReturnCtx(t);return fn(s,{code:Zt.invalid_type,expected:gn.string,received:s.parsedType}),lr}const r=new eo;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=t.data.length>s.value,o=t.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(t,i),a?fn(i,{code:Zt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&fn(i,{code:Zt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")fbe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"email",code:Zt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")hN||(hN=new RegExp(hbe,"u")),hN.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"emoji",code:Zt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")lbe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"uuid",code:Zt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")cbe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"nanoid",code:Zt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")sbe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"cuid",code:Zt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")abe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"cuid2",code:Zt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")obe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"ulid",code:Zt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),fn(i,{validation:"url",code:Zt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"regex",code:Zt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?_be(s).test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?xbe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?wbe(s).test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?dbe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"duration",code:Zt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?Sbe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"ip",code:Zt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?Cbe(t.data,s.alg)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"jwt",code:Zt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?kbe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"cidr",code:Zt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?bbe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"base64",code:Zt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?vbe.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"base64url",code:Zt.invalid_string,message:s.message}),r.dirty()):Xr.assertNever(s);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:Zt.invalid_string,...kn.errToObj(r)})}_addCheck(t){return new wd({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...kn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...kn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...kn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...kn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...kn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...kn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...kn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...kn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...kn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...kn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...kn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...kn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...kn.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...kn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...kn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...kn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...kn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...kn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...kn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...kn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...kn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...kn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...kn.errToObj(n)})}nonempty(t){return this.min(1,kn.errToObj(t))}trim(){return new wd({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wd({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wd({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}wd.create=e=>new wd({checks:[],typeName:Qt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...kr(e)});function Ebe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return s%a/10**i}class F0 extends Br{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==gn.number){const s=this._getOrReturnCtx(t);return fn(s,{code:Zt.invalid_type,expected:gn.number,received:s.parsedType}),lr}let r;const i=new eo;for(const s of this._def.checks)s.kind==="int"?Xr.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),fn(r,{code:Zt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Zt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Zt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Ebe(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Zt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),fn(r,{code:Zt.not_finite,message:s.message}),i.dirty()):Xr.assertNever(s);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,kn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,kn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,kn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,kn.toString(n))}setLimit(t,n,r,i){return new F0({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:kn.toString(i)}]})}_addCheck(t){return new F0({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:kn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:kn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:kn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:kn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:kn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:kn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:kn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:kn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:kn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Xr.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}F0.create=e=>new F0({checks:[],typeName:Qt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...kr(e)});class Mx extends Br{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==gn.bigint)return this._getInvalidInput(t);let r;const i=new eo;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Zt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Zt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Zt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Xr.assertNever(s);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return fn(n,{code:Zt.invalid_type,expected:gn.bigint,received:n.parsedType}),lr}gte(t,n){return this.setLimit("min",t,!0,kn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,kn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,kn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,kn.toString(n))}setLimit(t,n,r,i){return new Mx({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:kn.toString(i)}]})}_addCheck(t){return new Mx({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:kn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:kn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:kn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:kn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:kn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Mx.create=e=>new Mx({checks:[],typeName:Qt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...kr(e)});class sj extends Br{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==gn.boolean){const r=this._getOrReturnCtx(t);return fn(r,{code:Zt.invalid_type,expected:gn.boolean,received:r.parsedType}),lr}return Wl(t.data)}}sj.create=e=>new sj({typeName:Qt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...kr(e)});class J2 extends Br{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==gn.date){const s=this._getOrReturnCtx(t);return fn(s,{code:Zt.invalid_type,expected:gn.date,received:s.parsedType}),lr}if(Number.isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return fn(s,{code:Zt.invalid_date}),lr}const r=new eo;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),fn(i,{code:Zt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Xr.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new J2({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:kn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:kn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}J2.create=e=>new J2({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Qt.ZodDate,...kr(e)});class VB extends Br{_parse(t){if(this._getType(t)!==gn.symbol){const r=this._getOrReturnCtx(t);return fn(r,{code:Zt.invalid_type,expected:gn.symbol,received:r.parsedType}),lr}return Wl(t.data)}}VB.create=e=>new VB({typeName:Qt.ZodSymbol,...kr(e)});class aj extends Br{_parse(t){if(this._getType(t)!==gn.undefined){const r=this._getOrReturnCtx(t);return fn(r,{code:Zt.invalid_type,expected:gn.undefined,received:r.parsedType}),lr}return Wl(t.data)}}aj.create=e=>new aj({typeName:Qt.ZodUndefined,...kr(e)});class Q2 extends Br{_parse(t){if(this._getType(t)!==gn.null){const r=this._getOrReturnCtx(t);return fn(r,{code:Zt.invalid_type,expected:gn.null,received:r.parsedType}),lr}return Wl(t.data)}}Q2.create=e=>new Q2({typeName:Qt.ZodNull,...kr(e)});class Ix extends Br{constructor(){super(...arguments),this._any=!0}_parse(t){return Wl(t.data)}}Ix.create=e=>new Ix({typeName:Qt.ZodAny,...kr(e)});class oj extends Br{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Wl(t.data)}}oj.create=e=>new oj({typeName:Qt.ZodUnknown,...kr(e)});class sh extends Br{_parse(t){const n=this._getOrReturnCtx(t);return fn(n,{code:Zt.invalid_type,expected:gn.never,received:n.parsedType}),lr}}sh.create=e=>new sh({typeName:Qt.ZodNever,...kr(e)});class WB extends Br{_parse(t){if(this._getType(t)!==gn.undefined){const r=this._getOrReturnCtx(t);return fn(r,{code:Zt.invalid_type,expected:gn.void,received:r.parsedType}),lr}return Wl(t.data)}}WB.create=e=>new WB({typeName:Qt.ZodVoid,...kr(e)});class hu extends Br{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==gn.array)return fn(n,{code:Zt.invalid_type,expected:gn.array,received:n.parsedType}),lr;if(i.exactLength!==null){const a=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(a||o)&&(fn(n,{code:a?Zt.too_big:Zt.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(fn(n,{code:Zt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(fn(n,{code:Zt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>i.type._parseAsync(new _u(n,a,n.path,o)))).then(a=>eo.mergeArray(r,a));const s=[...n.data].map((a,o)=>i.type._parseSync(new _u(n,a,n.path,o)));return eo.mergeArray(r,s)}get element(){return this._def.type}min(t,n){return new hu({...this._def,minLength:{value:t,message:kn.toString(n)}})}max(t,n){return new hu({...this._def,maxLength:{value:t,message:kn.toString(n)}})}length(t,n){return new hu({...this._def,exactLength:{value:t,message:kn.toString(n)}})}nonempty(t){return this.min(1,t)}}hu.create=(e,t)=>new hu({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Qt.ZodArray,...kr(t)});function Yg(e){if(e instanceof Cs){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=pu.create(Yg(r))}return new Cs({...e._def,shape:()=>t})}else return e instanceof hu?new hu({...e._def,type:Yg(e.element)}):e instanceof pu?pu.create(Yg(e.unwrap())):e instanceof tm?tm.create(Yg(e.unwrap())):e instanceof Jp?Jp.create(e.items.map(t=>Yg(t))):e}class Cs extends Br{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Xr.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==gn.object){const c=this._getOrReturnCtx(t);return fn(c,{code:Zt.invalid_type,expected:gn.object,received:c.parsedType}),lr}const{status:r,ctx:i}=this._processInputParams(t),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof sh&&this._def.unknownKeys==="strip"))for(const c in i.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const u=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new _u(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof sh){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")o.length>0&&(fn(i,{code:Zt.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new _u(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>eo.mergeObjectSync(r,c)):eo.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return kn.errToObj,new Cs({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var s,a;const i=((a=(s=this._def).errorMap)==null?void 0:a.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:kn.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new Cs({...this._def,unknownKeys:"strip"})}passthrough(){return new Cs({...this._def,unknownKeys:"passthrough"})}extend(t){return new Cs({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Cs({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Qt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Cs({...this._def,catchall:t})}pick(t){const n={};for(const r of Xr.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Cs({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Xr.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new Cs({...this._def,shape:()=>n})}deepPartial(){return Yg(this)}partial(t){const n={};for(const r of Xr.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}return new Cs({...this._def,shape:()=>n})}required(t){const n={};for(const r of Xr.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof pu;)s=s._def.innerType;n[r]=s}return new Cs({...this._def,shape:()=>n})}keyof(){return hG(Xr.objectKeys(this.shape))}}Cs.create=(e,t)=>new Cs({shape:()=>e,unknownKeys:"strip",catchall:sh.create(),typeName:Qt.ZodObject,...kr(t)});Cs.strictCreate=(e,t)=>new Cs({shape:()=>e,unknownKeys:"strict",catchall:sh.create(),typeName:Qt.ZodObject,...kr(t)});Cs.lazycreate=(e,t)=>new Cs({shape:e,unknownKeys:"strip",catchall:sh.create(),typeName:Qt.ZodObject,...kr(t)});class eC extends Br{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new wu(o.ctx.common.issues));return fn(n,{code:Zt.invalid_union,unionErrors:a}),lr}if(n.common.async)return Promise.all(r.map(async s=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(l=>new wu(l));return fn(n,{code:Zt.invalid_union,unionErrors:o}),lr}}get options(){return this._def.options}}eC.create=(e,t)=>new eC({options:e,typeName:Qt.ZodUnion,...kr(t)});const fd=e=>e instanceof rC?fd(e.schema):e instanceof em?fd(e.innerType()):e instanceof iC?[e.value]:e instanceof Qp?e.options:e instanceof cj?Xr.objectValues(e.enum):e instanceof aC?fd(e._def.innerType):e instanceof aj?[void 0]:e instanceof Q2?[null]:e instanceof pu?[void 0,...fd(e.unwrap())]:e instanceof tm?[null,...fd(e.unwrap())]:e instanceof pG||e instanceof lC?fd(e.unwrap()):e instanceof oC?fd(e._def.innerType):[];class KO extends Br{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==gn.object)return fn(n,{code:Zt.invalid_type,expected:gn.object,received:n.parsedType}),lr;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(fn(n,{code:Zt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),lr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const s of n){const a=fd(s.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);i.set(o,s)}}return new KO({typeName:Qt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...kr(r)})}}function lj(e,t){const n=Wf(e),r=Wf(t);if(e===t)return{valid:!0,data:e};if(n===gn.object&&r===gn.object){const i=Xr.objectKeys(t),s=Xr.objectKeys(e).filter(o=>i.indexOf(o)!==-1),a={...e,...t};for(const o of s){const l=lj(e[o],t[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===gn.array&&r===gn.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const a=e[s],o=t[s],l=lj(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===gn.date&&r===gn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class tC extends Br{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(s,a)=>{if(zB(s)||zB(a))return lr;const o=lj(s.value,a.value);return o.valid?((UB(s)||UB(a))&&n.dirty(),{status:n.value,value:o.data}):(fn(r,{code:Zt.invalid_intersection_types}),lr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}tC.create=(e,t,n)=>new tC({left:e,right:t,typeName:Qt.ZodIntersection,...kr(n)});class Jp extends Br{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==gn.array)return fn(r,{code:Zt.invalid_type,expected:gn.array,received:r.parsedType}),lr;if(r.data.length<this._def.items.length)return fn(r,{code:Zt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),lr;!this._def.rest&&r.data.length>this._def.items.length&&(fn(r,{code:Zt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new _u(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>eo.mergeArray(n,a)):eo.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new Jp({...this._def,rest:t})}}Jp.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jp({items:e,typeName:Qt.ZodTuple,rest:null,...kr(t)})};class nC extends Br{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==gn.object)return fn(r,{code:Zt.invalid_type,expected:gn.object,received:r.parsedType}),lr;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in r.data)i.push({key:s._parse(new _u(r,o,r.path,o)),value:a._parse(new _u(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?eo.mergeObjectAsync(n,i):eo.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Br?new nC({keyType:t,valueType:n,typeName:Qt.ZodRecord,...kr(r)}):new nC({keyType:wd.create(),valueType:t,typeName:Qt.ZodRecord,...kr(n)})}}class HB extends Br{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==gn.map)return fn(r,{code:Zt.invalid_type,expected:gn.map,received:r.parsedType}),lr;const i=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([o,l],c)=>({key:i._parse(new _u(r,o,r.path,[c,"key"])),value:s._parse(new _u(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return lr;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return lr;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}}}}HB.create=(e,t,n)=>new HB({valueType:t,keyType:e,typeName:Qt.ZodMap,...kr(n)});class jx extends Br{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==gn.set)return fn(r,{code:Zt.invalid_type,expected:gn.set,received:r.parsedType}),lr;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(fn(r,{code:Zt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(fn(r,{code:Zt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function a(l){const c=new Set;for(const u of l){if(u.status==="aborted")return lr;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>s._parse(new _u(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(t,n){return new jx({...this._def,minSize:{value:t,message:kn.toString(n)}})}max(t,n){return new jx({...this._def,maxSize:{value:t,message:kn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}jx.create=(e,t)=>new jx({valueType:e,minSize:null,maxSize:null,typeName:Qt.ZodSet,...kr(t)});class rC extends Br{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}rC.create=(e,t)=>new rC({getter:e,typeName:Qt.ZodLazy,...kr(t)});class iC extends Br{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return fn(n,{received:n.data,code:Zt.invalid_literal,expected:this._def.value}),lr}return{status:"valid",value:t.data}}get value(){return this._def.value}}iC.create=(e,t)=>new iC({value:e,typeName:Qt.ZodLiteral,...kr(t)});function hG(e,t){return new Qp({values:e,typeName:Qt.ZodEnum,...kr(t)})}class Qp extends Br{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return fn(n,{expected:Xr.joinValues(r),received:n.parsedType,code:Zt.invalid_type}),lr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return fn(n,{received:n.data,code:Zt.invalid_enum_value,options:r}),lr}return Wl(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Qp.create(t,{...this._def,...n})}exclude(t,n=this._def){return Qp.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Qp.create=hG;class cj extends Br{_parse(t){const n=Xr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==gn.string&&r.parsedType!==gn.number){const i=Xr.objectValues(n);return fn(r,{expected:Xr.joinValues(i),received:r.parsedType,code:Zt.invalid_type}),lr}if(this._cache||(this._cache=new Set(Xr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Xr.objectValues(n);return fn(r,{received:r.data,code:Zt.invalid_enum_value,options:i}),lr}return Wl(t.data)}get enum(){return this._def.values}}cj.create=(e,t)=>new cj({values:e,typeName:Qt.ZodNativeEnum,...kr(t)});class sC extends Br{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==gn.promise&&n.common.async===!1)return fn(n,{code:Zt.invalid_type,expected:gn.promise,received:n.parsedType}),lr;const r=n.parsedType===gn.promise?n.data:Promise.resolve(n.data);return Wl(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}sC.create=(e,t)=>new sC({type:e,typeName:Qt.ZodPromise,...kr(t)});class em extends Br{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Qt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:a=>{fn(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return lr;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?lr:l.status==="dirty"||n.value==="dirty"?Bv(l.value):l});{if(n.value==="aborted")return lr;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?lr:o.status==="dirty"||n.value==="dirty"?Bv(o.value):o}}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?lr:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?lr:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!D0(a))return lr;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>D0(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:n.value,value:o})):lr);Xr.assertNever(i)}}em.create=(e,t,n)=>new em({schema:e,typeName:Qt.ZodEffects,effect:t,...kr(n)});em.createWithPreprocess=(e,t,n)=>new em({schema:t,effect:{type:"preprocess",transform:e},typeName:Qt.ZodEffects,...kr(n)});class pu extends Br{_parse(t){return this._getType(t)===gn.undefined?Wl(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}pu.create=(e,t)=>new pu({innerType:e,typeName:Qt.ZodOptional,...kr(t)});class tm extends Br{_parse(t){return this._getType(t)===gn.null?Wl(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}tm.create=(e,t)=>new tm({innerType:e,typeName:Qt.ZodNullable,...kr(t)});class aC extends Br{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===gn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}aC.create=(e,t)=>new aC({innerType:e,typeName:Qt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...kr(t)});class oC extends Br{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return X2(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new wu(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new wu(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}oC.create=(e,t)=>new oC({innerType:e,typeName:Qt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...kr(t)});class GB extends Br{_parse(t){if(this._getType(t)!==gn.nan){const r=this._getOrReturnCtx(t);return fn(r,{code:Zt.invalid_type,expected:gn.nan,received:r.parsedType}),lr}return{status:"valid",value:t.data}}}GB.create=e=>new GB({typeName:Qt.ZodNaN,...kr(e)});class pG extends Br{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class YO extends Br{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?lr:s.status==="dirty"?(n.dirty(),Bv(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?lr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new YO({in:t,out:n,typeName:Qt.ZodPipeline})}}class lC extends Br{_parse(t){const n=this._def.innerType._parse(t),r=i=>(D0(i)&&(i.value=Object.freeze(i.value)),i);return X2(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}lC.create=(e,t)=>new lC({innerType:e,typeName:Qt.ZodReadonly,...kr(t)});function KB(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function mG(e,t={},n){return e?Ix.create().superRefine((r,i)=>{const s=e(r);if(s instanceof Promise)return s.then(a=>{if(!a){const o=KB(t,r),l=o.fatal??n??!0;i.addIssue({code:"custom",...o,fatal:l})}});if(!s){const a=KB(t,r),o=a.fatal??n??!0;i.addIssue({code:"custom",...a,fatal:o})}}):Ix.create()}var Qt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Qt||(Qt={}));const cC=(e,t={message:`Input not instance of ${e.name}`})=>mG(n=>n instanceof e,t),Ue=wd.create,Nt=F0.create,Cr=sj.create,Tbe=Q2.create,ky=Ix.create,Yw=oj.create;sh.create;const cn=hu.create,Je=Cs.create,Ni=eC.create,pE=KO.create;tC.create;Jp.create;const ah=nC.create,Abe=rC.create,Dn=iC.create,cl=Qp.create;sC.create;const Qs=pu.create;tm.create;function Rbe({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],i=[];for(const{role:s,content:a}of e)switch(s){case"system":{switch(n){case"system":{r.push({role:"system",content:a});break}case"developer":{r.push({role:"developer",content:a});break}case"remove":{i.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(a.length===1&&a[0].type==="text"){r.push({role:"user",content:a[0].text});break}r.push({role:"user",content:a.map((o,l)=>{var c,u,d,h;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(c=o.mimeType)!=null?c:"image/jpeg"};base64,${ih(o.image)}`,detail:(d=(u=o.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail}};case"file":{if(o.data instanceof URL)throw new ei({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(h=o.filename)!=null?h:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new ei({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const c of a)switch(c.type){case"text":{o+=c.text;break}case"tool-call":{l.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(l.length>1)throw new ei({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of a)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:i}}function YB(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:i,top_logprobs:s})=>({token:r,logprob:i,topLogprobs:s?s.map(({token:a,logprob:o})=>({token:a,logprob:o})):[]})))!=null?n:void 0}function uC(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var ZO=Je({error:Je({message:Ue(),type:Ue().nullish(),param:ky().nullish(),code:Ni([Ue(),Nt()]).nullish()})}),Su=ym({errorSchema:ZO,errorToMessage:e=>e.error.message});function dC({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Nbe({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const i=(r=e.tools)!=null&&r.length?e.tools:void 0,s=[];if(i==null)return{tools:void 0,tool_choice:void 0,toolWarnings:s};const a=e.toolChoice;if(t){const c=[];for(const d of i)d.type==="provider-defined"?s.push({type:"unsupported-tool",tool:d}):c.push({name:d.name,description:d.description,parameters:d.parameters});if(a==null)return{functions:c,function_call:void 0,toolWarnings:s};switch(a.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:s};case"required":throw new ei({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:a.toolName},toolWarnings:s}}}const o=[];for(const c of i)c.type==="provider-defined"?s.push({type:"unsupported-tool",tool:c}):o.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(a==null)return{tools:o,tool_choice:void 0,toolWarnings:s};const l=a.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:s};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:a.toolName}},toolWarnings:s};default:{const c=l;throw new ei({functionality:`Unsupported tool choice type: ${c}`})}}}var Mbe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:uj(this.modelId)}get defaultObjectGenerationMode(){return Obe(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:s,frequencyPenalty:a,presencePenalty:o,stopSequences:l,responseFormat:c,seed:u,providerMetadata:d}){var h,m,y,b,v,x,w,S;const C=e.type,k=[];s!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const A=this.settings.useLegacyFunctionCalling;if(A&&this.settings.parallelToolCalls===!0)throw new ei({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(A&&this.supportsStructuredOutputs)throw new ei({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:R,warnings:N}=Rbe({prompt:t,useLegacyFunctionCalling:A,systemMessageMode:Pbe(this.modelId)});k.push(...N);const I={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:i,frequency_penalty:a,presence_penalty:o,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(h=c.name)!=null?h:"response",description:c.description}}:{type:"json_object"}:void 0,stop:l,seed:u,max_completion_tokens:(m=d==null?void 0:d.openai)==null?void 0:m.maxCompletionTokens,store:(y=d==null?void 0:d.openai)==null?void 0:y.store,metadata:(b=d==null?void 0:d.openai)==null?void 0:b.metadata,prediction:(v=d==null?void 0:d.openai)==null?void 0:v.prediction,reasoning_effort:(w=(x=d==null?void 0:d.openai)==null?void 0:x.reasoningEffort)!=null?w:this.settings.reasoningEffort,messages:R};switch(uj(this.modelId)?(I.temperature!=null&&(I.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),I.top_p!=null&&(I.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),I.frequency_penalty!=null&&(I.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),I.presence_penalty!=null&&(I.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),I.logit_bias!=null&&(I.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),I.logprobs!=null&&(I.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),I.top_logprobs!=null&&(I.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),I.max_tokens!=null&&(I.max_completion_tokens==null&&(I.max_completion_tokens=I.max_tokens),I.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&I.temperature!=null&&(I.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),C){case"regular":{const{tools:O,tool_choice:L,functions:P,function_call:V,toolWarnings:F}=Nbe({mode:e,useLegacyFunctionCalling:A,structuredOutputs:this.supportsStructuredOutputs});return{args:{...I,tools:O,tool_choice:L,functions:P,function_call:V},warnings:[...k,...F]}}case"object-json":return{args:{...I,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(S=e.name)!=null?S:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:A?{...I,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...I,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const O=C;throw new Error(`Unsupported type: ${O}`)}}}async doGenerate(e){var t,n,r,i,s,a,o,l;const{args:c,warnings:u}=this.getArgs(e),{responseHeaders:d,value:h,rawValue:m}=await ps({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:c,failedResponseHandler:Su,successfulResponseHandler:Mo(Ibe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:y,...b}=c,v=h.choices[0],x=(t=h.usage)==null?void 0:t.completion_tokens_details,w=(n=h.usage)==null?void 0:n.prompt_tokens_details,S={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(S.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(S.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(S.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(w==null?void 0:w.cached_tokens)!=null&&(S.openai.cachedPromptTokens=w==null?void 0:w.cached_tokens),{text:(r=v.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&v.message.function_call?[{toolCallType:"function",toolCallId:go(),toolName:v.message.function_call.name,args:v.message.function_call.arguments}]:(i=v.message.tool_calls)==null?void 0:i.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:go(),toolName:C.function.name,args:C.function.arguments}}),finishReason:uC(v.finish_reason),usage:{promptTokens:(a=(s=h.usage)==null?void 0:s.prompt_tokens)!=null?a:NaN,completionTokens:(l=(o=h.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:y,rawSettings:b},rawResponse:{headers:d,body:m},request:{body:JSON.stringify(c)},response:dC(h),warnings:u,logprobs:YB(v.logprobs),providerMetadata:S}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const w of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:w.toolCallId,toolName:w.toolName,argsTextDelta:w.args}),x.enqueue({type:"tool-call",...w});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:s}=await ps({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:r,failedResponseHandler:Su,successfulResponseHandler:Cy(jbe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:a,...o}=t,l=[];let c="unknown",u={promptTokens:void 0,completionTokens:void 0},d,h=!0;const{useLegacyFunctionCalling:m}=this.settings,y={openai:{}};return{stream:s.pipeThrough(new TransformStream({transform(b,v){var x,w,S,C,k,A,R,N,I,O,L,P;if(!b.success){c="error",v.enqueue({type:"error",error:b.error});return}const V=b.value;if("error"in V){c="error",v.enqueue({type:"error",error:V.error});return}if(h&&(h=!1,v.enqueue({type:"response-metadata",...dC(V)})),V.usage!=null){const{prompt_tokens:$,completion_tokens:ne,prompt_tokens_details:W,completion_tokens_details:te}=V.usage;u={promptTokens:$??void 0,completionTokens:ne??void 0},(te==null?void 0:te.reasoning_tokens)!=null&&(y.openai.reasoningTokens=te==null?void 0:te.reasoning_tokens),(te==null?void 0:te.accepted_prediction_tokens)!=null&&(y.openai.acceptedPredictionTokens=te==null?void 0:te.accepted_prediction_tokens),(te==null?void 0:te.rejected_prediction_tokens)!=null&&(y.openai.rejectedPredictionTokens=te==null?void 0:te.rejected_prediction_tokens),(W==null?void 0:W.cached_tokens)!=null&&(y.openai.cachedPromptTokens=W==null?void 0:W.cached_tokens)}const F=V.choices[0];if((F==null?void 0:F.finish_reason)!=null&&(c=uC(F.finish_reason)),(F==null?void 0:F.delta)==null)return;const J=F.delta;J.content!=null&&v.enqueue({type:"text-delta",textDelta:J.content});const U=YB(F==null?void 0:F.logprobs);U!=null&&U.length&&(d===void 0&&(d=[]),d.push(...U));const G=m&&J.function_call!=null?[{type:"function",id:go(),function:J.function_call,index:0}]:J.tool_calls;if(G!=null)for(const $ of G){const ne=$.index;if(l[ne]==null){if($.type!=="function")throw new p0({data:$,message:"Expected 'function' type."});if($.id==null)throw new p0({data:$,message:"Expected 'id' to be a string."});if(((x=$.function)==null?void 0:x.name)==null)throw new p0({data:$,message:"Expected 'function.name' to be a string."});l[ne]={id:$.id,type:"function",function:{name:$.function.name,arguments:(w=$.function.arguments)!=null?w:""},hasFinished:!1};const te=l[ne];((S=te.function)==null?void 0:S.name)!=null&&((C=te.function)==null?void 0:C.arguments)!=null&&(te.function.arguments.length>0&&v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:te.id,toolName:te.function.name,argsTextDelta:te.function.arguments}),Z2(te.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=te.id)!=null?k:go(),toolName:te.function.name,args:te.function.arguments}),te.hasFinished=!0));continue}const W=l[ne];W.hasFinished||(((A=$.function)==null?void 0:A.arguments)!=null&&(W.function.arguments+=(N=(R=$.function)==null?void 0:R.arguments)!=null?N:""),v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:W.id,toolName:W.function.name,argsTextDelta:(I=$.function.arguments)!=null?I:""}),((O=W.function)==null?void 0:O.name)!=null&&((L=W.function)==null?void 0:L.arguments)!=null&&Z2(W.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(P=W.id)!=null?P:go(),toolName:W.function.name,args:W.function.arguments}),W.hasFinished=!0))}},flush(b){var v,x;b.enqueue({type:"finish",finishReason:c,logprobs:d,usage:{promptTokens:(v=u.promptTokens)!=null?v:NaN,completionTokens:(x=u.completionTokens)!=null?x:NaN},...y!=null?{providerMetadata:y}:{}})}})),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:i},request:{body:JSON.stringify(r)},warnings:n}}},gG=Je({prompt_tokens:Nt().nullish(),completion_tokens:Nt().nullish(),prompt_tokens_details:Je({cached_tokens:Nt().nullish()}).nullish(),completion_tokens_details:Je({reasoning_tokens:Nt().nullish(),accepted_prediction_tokens:Nt().nullish(),rejected_prediction_tokens:Nt().nullish()}).nullish()}).nullish(),Ibe=Je({id:Ue().nullish(),created:Nt().nullish(),model:Ue().nullish(),choices:cn(Je({message:Je({role:Dn("assistant").nullish(),content:Ue().nullish(),function_call:Je({arguments:Ue(),name:Ue()}).nullish(),tool_calls:cn(Je({id:Ue().nullish(),type:Dn("function"),function:Je({name:Ue(),arguments:Ue()})})).nullish()}),index:Nt(),logprobs:Je({content:cn(Je({token:Ue(),logprob:Nt(),top_logprobs:cn(Je({token:Ue(),logprob:Nt()}))})).nullable()}).nullish(),finish_reason:Ue().nullish()})),usage:gG}),jbe=Ni([Je({id:Ue().nullish(),created:Nt().nullish(),model:Ue().nullish(),choices:cn(Je({delta:Je({role:cl(["assistant"]).nullish(),content:Ue().nullish(),function_call:Je({name:Ue().optional(),arguments:Ue().optional()}).nullish(),tool_calls:cn(Je({index:Nt(),id:Ue().nullish(),type:Dn("function").nullish(),function:Je({name:Ue().nullish(),arguments:Ue().nullish()})})).nullish()}).nullish(),logprobs:Je({content:cn(Je({token:Ue(),logprob:Nt(),top_logprobs:cn(Je({token:Ue(),logprob:Nt()}))})).nullable()}).nullish(),finish_reason:Ue().nullish(),index:Nt()})),usage:gG}),ZO]);function uj(e){return e.startsWith("o")}function Obe(e){return e.startsWith("gpt-4o-audio-preview")}function Pbe(e){var t,n;return uj(e)?(n=(t=Dbe[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var Dbe={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function Fbe({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let i="";e[0].role==="system"&&(i+=`${e[0].content}

`,e=e.slice(1));for(const{role:s,content:a}of e)switch(s){case"system":throw new nu({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new ei({functionality:"images"})}}).join("");i+=`${n}:
${o}

`;break}case"assistant":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new ei({functionality:"tool-call messages"})}}).join("");i+=`${r}:
${o}

`;break}case"tool":throw new ei({functionality:"tool messages"});default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return i+=`${r}:
`,{prompt:i,stopSequences:[`
${n}:`]}}function ZB(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,i])=>({token:r,logprob:i})):[]}))}var Lbe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:i,topP:s,topK:a,frequencyPenalty:o,presencePenalty:l,stopSequences:c,responseFormat:u,seed:d}){var h;const m=e.type,y=[];a!=null&&y.push({type:"unsupported-setting",setting:"topK"}),u!=null&&u.type!=="text"&&y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:v}=Fbe({prompt:n,inputFormat:t}),x=[...v??[],...c??[]],w={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:i,top_p:s,frequency_penalty:o,presence_penalty:l,seed:d,prompt:b,stop:x.length>0?x:void 0};switch(m){case"regular":{if((h=e.tools)!=null&&h.length)throw new ei({functionality:"tools"});if(e.toolChoice)throw new ei({functionality:"toolChoice"});return{args:w,warnings:y}}case"object-json":throw new ei({functionality:"object-json mode"});case"object-tool":throw new ei({functionality:"object-tool mode"});default:{const S=m;throw new Error(`Unsupported type: ${S}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:i,rawValue:s}=await ps({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:t,failedResponseHandler:Su,successfulResponseHandler:Mo(Bbe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...o}=t,l=i.choices[0];return{text:l.text,usage:{promptTokens:i.usage.prompt_tokens,completionTokens:i.usage.completion_tokens},finishReason:uC(l.finish_reason),logprobs:ZB(l.logprobs),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:r,body:s},response:dC(i),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:s}=await ps({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:r,failedResponseHandler:Su,successfulResponseHandler:Cy($be),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...o}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u,d=!0;return{stream:s.pipeThrough(new TransformStream({transform(h,m){if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const y=h.value;if("error"in y){l="error",m.enqueue({type:"error",error:y.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...dC(y)})),y.usage!=null&&(c={promptTokens:y.usage.prompt_tokens,completionTokens:y.usage.completion_tokens});const b=y.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=uC(b.finish_reason)),(b==null?void 0:b.text)!=null&&m.enqueue({type:"text-delta",textDelta:b.text});const v=ZB(b==null?void 0:b.logprobs);v!=null&&v.length&&(u===void 0&&(u=[]),u.push(...v))},flush(h){h.enqueue({type:"finish",finishReason:l,logprobs:u,usage:c})}})),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:i},warnings:n,request:{body:JSON.stringify(r)}}}},Bbe=Je({id:Ue().nullish(),created:Nt().nullish(),model:Ue().nullish(),choices:cn(Je({text:Ue(),finish_reason:Ue(),logprobs:Je({tokens:cn(Ue()),token_logprobs:cn(Nt()),top_logprobs:cn(ah(Ue(),Nt())).nullable()}).nullish()})),usage:Je({prompt_tokens:Nt(),completion_tokens:Nt()})}),$be=Ni([Je({id:Ue().nullish(),created:Nt().nullish(),model:Ue().nullish(),choices:cn(Je({text:Ue(),finish_reason:Ue().nullish(),index:Nt(),logprobs:Je({tokens:cn(Ue()),token_logprobs:cn(Nt()),top_logprobs:cn(ah(Ue(),Nt())).nullable()}).nullish()})),usage:Je({prompt_tokens:Nt(),completion_tokens:Nt()}).nullish()}),ZO]),zbe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new cE({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:i}=await ps({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:hs(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Su,successfulResponseHandler:Mo(Ube),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(s=>s.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Ube=Je({data:cn(Je({embedding:cn(Nt())})),usage:Je({prompt_tokens:Nt()}).nullish()}),qbe={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},Vbe=new Set(["gpt-image-1"]),Wbe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:qbe[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:i,providerOptions:s,headers:a,abortSignal:o}){var l,c,u,d;const h=[];r!=null&&h.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),i!=null&&h.push({type:"unsupported-setting",setting:"seed"});const m=(u=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?u:new Date,{value:y,responseHeaders:b}=await ps({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:hs(this.config.headers(),a),body:{model:this.modelId,prompt:e,n:t,size:n,...(d=s.openai)!=null?d:{},...Vbe.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:Su,successfulResponseHandler:Mo(Hbe),abortSignal:o,fetch:this.config.fetch});return{images:y.data.map(v=>v.b64_json),warnings:h,response:{timestamp:m,modelId:this.modelId,headers:b}}}},Hbe=Je({data:cn(Je({b64_json:Ue()}))}),Gbe=Je({include:cn(Ue()).nullish(),language:Ue().nullish(),prompt:Ue().nullish(),temperature:Nt().min(0).max(1).nullish().default(0),timestampGranularities:cn(cl(["word","segment"])).nullish().default(["segment"])}),XB={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},Kbe=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({audio:e,mediaType:t,providerOptions:n}){var r,i,s,a,o;const l=[],c=dE({provider:"openai",providerOptions:n,schema:Gbe}),u=new FormData,d=e instanceof Uint8Array?new Blob([e]):new Blob([fE(e)]);if(u.append("model",this.modelId),u.append("file",new File([d],"audio",{type:t})),c){const h={include:(r=c.include)!=null?r:void 0,language:(i=c.language)!=null?i:void 0,prompt:(s=c.prompt)!=null?s:void 0,temperature:(a=c.temperature)!=null?a:void 0,timestamp_granularities:(o=c.timestampGranularities)!=null?o:void 0};for(const m in h){const y=h[m];y!==void 0&&u.append(m,String(y))}}return{formData:u,warnings:l}}async doGenerate(e){var t,n,r,i,s,a;const o=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{formData:l,warnings:c}=this.getArgs(e),{value:u,responseHeaders:d,rawValue:h}=await Jye({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),formData:l,failedResponseHandler:Su,successfulResponseHandler:Mo(Ybe),abortSignal:e.abortSignal,fetch:this.config.fetch}),m=u.language!=null&&u.language in XB?XB[u.language]:void 0;return{text:u.text,segments:(s=(i=u.words)==null?void 0:i.map(y=>({text:y.word,startSecond:y.start,endSecond:y.end})))!=null?s:[],language:m,durationInSeconds:(a=u.duration)!=null?a:void 0,warnings:c,response:{timestamp:o,modelId:this.modelId,headers:d,body:h}}}},Ybe=Je({text:Ue(),language:Ue().nullish(),duration:Nt().nullish(),words:cn(Je({word:Ue(),start:Nt(),end:Nt()})).nullish()});function Zbe({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:i,content:s}of e)switch(i){case"system":{switch(t){case"system":{n.push({role:"system",content:s});break}case"developer":{n.push({role:"developer",content:s});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const a=t;throw new Error(`Unsupported system message mode: ${a}`)}}break}case"user":{n.push({role:"user",content:s.map((a,o)=>{var l,c,u,d;switch(a.type){case"text":return{type:"input_text",text:a.text};case"image":return{type:"input_image",image_url:a.image instanceof URL?a.image.toString():`data:${(l=a.mimeType)!=null?l:"image/jpeg"};base64,${ih(a.image)}`,detail:(u=(c=a.providerMetadata)==null?void 0:c.openai)==null?void 0:u.imageDetail};case"file":{if(a.data instanceof URL)throw new ei({functionality:"File URLs in user messages"});switch(a.mimeType){case"application/pdf":return{type:"input_file",filename:(d=a.filename)!=null?d:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${a.data}`};default:throw new ei({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const a of s)switch(a.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:a.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:a.toolCallId,name:a.toolName,arguments:JSON.stringify(a.args)});break}}break}case"tool":{for(const a of s)n.push({type:"function_call_output",call_id:a.toolCallId,output:JSON.stringify(a.result)});break}default:{const a=i;throw new Error(`Unsupported role: ${a}`)}}return{messages:n,warnings:r}}function JB({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function Xbe({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,i=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice,a=[];for(const l of r)switch(l.type){case"function":a.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":a.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:i.push({type:"unsupported-tool",tool:l});break}break;default:i.push({type:"unsupported-tool",tool:l});break}if(s==null)return{tools:a,tool_choice:void 0,toolWarnings:i};const o=s.type;switch(o){case"auto":case"none":case"required":return{tools:a,tool_choice:o,toolWarnings:i};case"tool":return s.toolName==="web_search_preview"?{tools:a,tool_choice:{type:"web_search_preview"},toolWarnings:i}:{tools:a,tool_choice:{type:"function",name:s.toolName},toolWarnings:i};default:{const l=o;throw new ei({functionality:`Unsupported tool choice type: ${l}`})}}}var Jbe=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsStructuredOutputs=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:i,topK:s,presencePenalty:a,frequencyPenalty:o,seed:l,prompt:c,providerMetadata:u,responseFormat:d}){var h,m,y;const b=[],v=gve(this.modelId),x=e.type;s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),a!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:w,warnings:S}=Zbe({prompt:c,systemMessageMode:v.systemMessageMode});b.push(...S);const C=dE({provider:"openai",providerOptions:u,schema:yve}),k=(h=C==null?void 0:C.strictSchemas)!=null?h:!0,A={model:this.modelId,input:w,temperature:n,top_p:i,max_output_tokens:t,...(d==null?void 0:d.type)==="json"&&{text:{format:d.schema!=null?{type:"json_schema",strict:k,name:(m=d.name)!=null?m:"response",description:d.description,schema:d.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,...v.isReasoningModel&&((C==null?void 0:C.reasoningEffort)!=null||(C==null?void 0:C.reasoningSummary)!=null)&&{reasoning:{...(C==null?void 0:C.reasoningEffort)!=null&&{effort:C.reasoningEffort},...(C==null?void 0:C.reasoningSummary)!=null&&{summary:C.reasoningSummary}}},...v.requiredAutoTruncation&&{truncation:"auto"}};switch(v.isReasoningModel&&(A.temperature!=null&&(A.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),A.top_p!=null&&(A.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:R,tool_choice:N,toolWarnings:I}=Xbe({mode:e,strict:k});return{args:{...A,tools:R,tool_choice:N},warnings:[...b,...I]}}case"object-json":return{args:{...A,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(y=e.name)!=null?y:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...A,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const R=x;throw new Error(`Unsupported type: ${R}`)}}}async doGenerate(e){var t,n,r,i,s,a,o;const{args:l,warnings:c}=this.getArgs(e),{responseHeaders:u,value:d,rawValue:h}=await ps({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:l,failedResponseHandler:Su,successfulResponseHandler:Mo(Je({id:Ue(),created_at:Nt(),model:Ue(),output:cn(pE("type",[Je({type:Dn("message"),role:Dn("assistant"),content:cn(Je({type:Dn("output_text"),text:Ue(),annotations:cn(Je({type:Dn("url_citation"),start_index:Nt(),end_index:Nt(),url:Ue(),title:Ue()}))}))}),Je({type:Dn("function_call"),call_id:Ue(),name:Ue(),arguments:Ue()}),Je({type:Dn("web_search_call")}),Je({type:Dn("computer_call")}),Je({type:Dn("reasoning"),summary:cn(Je({type:Dn("summary_text"),text:Ue()}))})])),incomplete_details:Je({reason:Ue()}).nullable(),usage:yG})),abortSignal:e.abortSignal,fetch:this.config.fetch}),m=d.output.filter(v=>v.type==="message").flatMap(v=>v.content).filter(v=>v.type==="output_text"),y=d.output.filter(v=>v.type==="function_call").map(v=>({toolCallType:"function",toolCallId:v.call_id,toolName:v.name,args:v.arguments})),b=(n=(t=d.output.find(v=>v.type==="reasoning"))==null?void 0:t.summary)!=null?n:null;return{text:m.map(v=>v.text).join(`
`),sources:m.flatMap(v=>v.annotations.map(x=>{var w,S,C;return{sourceType:"url",id:(C=(S=(w=this.config).generateId)==null?void 0:S.call(w))!=null?C:go(),url:x.url,title:x.title}})),finishReason:JB({finishReason:(r=d.incomplete_details)==null?void 0:r.reason,hasToolCalls:y.length>0}),toolCalls:y.length>0?y:void 0,reasoning:b?b.map(v=>({type:"text",text:v.text})):void 0,usage:{promptTokens:d.usage.input_tokens,completionTokens:d.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:h},request:{body:JSON.stringify(l)},response:{id:d.id,timestamp:new Date(d.created_at*1e3),modelId:d.model},providerMetadata:{openai:{responseId:d.id,cachedPromptTokens:(s=(i=d.usage.input_tokens_details)==null?void 0:i.cached_tokens)!=null?s:null,reasoningTokens:(o=(a=d.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?o:null}},warnings:c}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:i}=await ps({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:Su,successfulResponseHandler:Cy(ove),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=this;let a="unknown",o=NaN,l=NaN,c=null,u=null,d=null;const h={};let m=!1;return{stream:i.pipeThrough(new TransformStream({transform(y,b){var v,x,w,S,C,k,A,R;if(!y.success){a="error",b.enqueue({type:"error",error:y.error});return}const N=y.value;if(hve(N))N.item.type==="function_call"&&(h[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,argsTextDelta:N.item.arguments}));else if(fve(N)){const I=h[N.output_index];I!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:I.toolCallId,toolName:I.toolName,argsTextDelta:N.delta})}else dve(N)?(d=N.response.id,b.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(N.response.created_at*1e3),modelId:N.response.model})):lve(N)?b.enqueue({type:"text-delta",textDelta:N.delta}):mve(N)?b.enqueue({type:"reasoning",textDelta:N.delta}):cve(N)&&N.item.type==="function_call"?(h[N.output_index]=void 0,m=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,args:N.item.arguments})):uve(N)?(a=JB({finishReason:(v=N.response.incomplete_details)==null?void 0:v.reason,hasToolCalls:m}),o=N.response.usage.input_tokens,l=N.response.usage.output_tokens,c=(w=(x=N.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?w:c,u=(C=(S=N.response.usage.output_tokens_details)==null?void 0:S.reasoning_tokens)!=null?C:u):pve(N)&&b.enqueue({type:"source",source:{sourceType:"url",id:(R=(A=(k=s.config).generateId)==null?void 0:A.call(k))!=null?R:go(),url:N.annotation.url,title:N.annotation.title}})},flush(y){y.enqueue({type:"finish",finishReason:a,usage:{promptTokens:o,completionTokens:l},...(c!=null||u!=null)&&{providerMetadata:{openai:{responseId:d,cachedPromptTokens:c,reasoningTokens:u}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},yG=Je({input_tokens:Nt(),input_tokens_details:Je({cached_tokens:Nt().nullish()}).nullish(),output_tokens:Nt(),output_tokens_details:Je({reasoning_tokens:Nt().nullish()}).nullish()}),Qbe=Je({type:Dn("response.output_text.delta"),delta:Ue()}),eve=Je({type:cl(["response.completed","response.incomplete"]),response:Je({incomplete_details:Je({reason:Ue()}).nullish(),usage:yG})}),tve=Je({type:Dn("response.created"),response:Je({id:Ue(),created_at:Nt(),model:Ue()})}),nve=Je({type:Dn("response.output_item.done"),output_index:Nt(),item:pE("type",[Je({type:Dn("message")}),Je({type:Dn("function_call"),id:Ue(),call_id:Ue(),name:Ue(),arguments:Ue(),status:Dn("completed")})])}),rve=Je({type:Dn("response.function_call_arguments.delta"),item_id:Ue(),output_index:Nt(),delta:Ue()}),ive=Je({type:Dn("response.output_item.added"),output_index:Nt(),item:pE("type",[Je({type:Dn("message")}),Je({type:Dn("function_call"),id:Ue(),call_id:Ue(),name:Ue(),arguments:Ue()})])}),sve=Je({type:Dn("response.output_text.annotation.added"),annotation:Je({type:Dn("url_citation"),url:Ue(),title:Ue()})}),ave=Je({type:Dn("response.reasoning_summary_text.delta"),item_id:Ue(),output_index:Nt(),summary_index:Nt(),delta:Ue()}),ove=Ni([Qbe,eve,tve,nve,rve,ive,sve,ave,Je({type:Ue()}).passthrough()]);function lve(e){return e.type==="response.output_text.delta"}function cve(e){return e.type==="response.output_item.done"}function uve(e){return e.type==="response.completed"||e.type==="response.incomplete"}function dve(e){return e.type==="response.created"}function fve(e){return e.type==="response.function_call_arguments.delta"}function hve(e){return e.type==="response.output_item.added"}function pve(e){return e.type==="response.output_text.annotation.added"}function mve(e){return e.type==="response.reasoning_summary_text.delta"}function gve(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var yve=Je({metadata:ky().nullish(),parallelToolCalls:Cr().nullish(),previousResponseId:Ue().nullish(),store:Cr().nullish(),user:Ue().nullish(),reasoningEffort:Ue().nullish(),strictSchemas:Cr().nullish(),instructions:Ue().nullish(),reasoningSummary:Ue().nullish()}),bve=Je({});function vve({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:bve}}var xve={webSearchPreview:vve},wve=Je({instructions:Ue().nullish(),speed:Nt().min(.25).max(4).default(1).nullish()}),_ve=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({text:e,voice:t="alloy",outputFormat:n="mp3",speed:r,instructions:i,providerOptions:s}){const a=[],o=dE({provider:"openai",providerOptions:s,schema:wve}),l={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:r,instructions:i};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?l.response_format=n:a.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),o){const c={};for(const u in c){const d=c[u];d!==void 0&&(l[u]=d)}}return{requestBody:l,warnings:a}}async doGenerate(e){var t,n,r;const i=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{requestBody:s,warnings:a}=this.getArgs(e),{value:o,responseHeaders:l,rawValue:c}=await ps({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:s,failedResponseHandler:Su,successfulResponseHandler:Qye(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:o,warnings:a,request:{body:JSON.stringify(s)},response:{timestamp:i,modelId:this.modelId,headers:l,body:c}}}};function bG(e={}){var t,n,r;const i=(t=hE(e.baseURL))!=null?t:"https://api.openai.com/v1",s=(n=e.compatibility)!=null?n:"compatible",a=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${cG({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(x,w={})=>new Mbe(x,w,{provider:`${a}.chat`,url:({path:S})=>`${i}${S}`,headers:o,compatibility:s,fetch:e.fetch}),c=(x,w={})=>new Lbe(x,w,{provider:`${a}.completion`,url:({path:S})=>`${i}${S}`,headers:o,compatibility:s,fetch:e.fetch}),u=(x,w={})=>new zbe(x,w,{provider:`${a}.embedding`,url:({path:S})=>`${i}${S}`,headers:o,fetch:e.fetch}),d=(x,w={})=>new Wbe(x,w,{provider:`${a}.image`,url:({path:S})=>`${i}${S}`,headers:o,fetch:e.fetch}),h=x=>new Kbe(x,{provider:`${a}.transcription`,url:({path:w})=>`${i}${w}`,headers:o,fetch:e.fetch}),m=x=>new _ve(x,{provider:`${a}.speech`,url:({path:w})=>`${i}${w}`,headers:o,fetch:e.fetch}),y=(x,w)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return x==="gpt-3.5-turbo-instruct"?c(x,w):l(x,w)},b=x=>new Jbe(x,{provider:`${a}.responses`,url:({path:w})=>`${i}${w}`,headers:o,fetch:e.fetch}),v=function(x,w){return y(x,w)};return v.languageModel=y,v.chat=l,v.completion=c,v.responses=b,v.embedding=u,v.textEmbedding=u,v.textEmbeddingModel=u,v.image=d,v.imageModel=d,v.transcription=h,v.transcriptionModel=h,v.speech=m,v.speechModel=m,v.tools=xve,v}bG({compatibility:"strict"});function Il(e){if(Sve(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:i,items:s,allOf:a,anyOf:o,oneOf:l,format:c,const:u,minLength:d,enum:h}=e,m={};if(n&&(m.description=n),r&&(m.required=r),c&&(m.format=c),u!==void 0&&(m.enum=[u]),t&&(Array.isArray(t)?t.includes("null")?(m.type=t.filter(y=>y!=="null")[0],m.nullable=!0):m.type=t:t==="null"?m.type="null":m.type=t),h!==void 0&&(m.enum=h),i!=null&&(m.properties=Object.entries(i).reduce((y,[b,v])=>(y[b]=Il(v),y),{})),s&&(m.items=Array.isArray(s)?s.map(Il):Il(s)),a&&(m.allOf=a.map(Il)),o)if(o.some(y=>typeof y=="object"&&(y==null?void 0:y.type)==="null")){const y=o.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(y.length===1){const b=Il(y[0]);typeof b=="object"&&(m.nullable=!0,Object.assign(m,b))}else m.anyOf=y.map(Il),m.nullable=!0}else m.anyOf=o.map(Il);return l&&(m.oneOf=l.map(Il)),d!==void 0&&(m.minLength=d),m}function Sve(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function Cve(e){var t,n;const r=[],i=[];let s=!0;for(const{role:a,content:o}of e)switch(a){case"system":{if(!s)throw new ei({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{s=!1;const l=[];for(const c of o)switch(c.type){case"text":{l.push({text:c.text});break}case"image":{l.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:ih(c.image)}});break}case"file":{l.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}i.push({role:"user",parts:l});break}case"assistant":{s=!1,i.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new ei({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new ei({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{s=!1,i.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:i}}function QB(e){return e.includes("/")?e:`models/${e}`}var kve=Je({error:Je({code:Nt().nullable(),message:Ue(),status:Ue()})}),dj=ym({errorSchema:kve,errorToMessage:e=>e.error.message});function Eve(e,t,n,r){var i,s;const a=(i=e.tools)!=null&&i.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(a==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const u=[];for(const m of a)m.type==="provider-defined"?o.push({type:"unsupported-tool",tool:m}):u.push({name:m.name,description:(s=m.description)!=null?s:"",parameters:Il(m.parameters)});const d=e.toolChoice;if(d==null)return{tools:{functionDeclarations:u},toolConfig:void 0,toolWarnings:o};const h=d.type;switch(h){case"auto":return{tools:{functionDeclarations:u},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:u},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:u},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:u},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[d.toolName]}},toolWarnings:o};default:{const m=h;throw new ei({functionality:`Unsupported tool choice type: ${m}`})}}}function e$({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var Tve=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:s,frequencyPenalty:a,presencePenalty:o,stopSequences:l,responseFormat:c,seed:u,providerMetadata:d}){var h,m,y;const b=e.type,v=[],x=dE({provider:"google",providerOptions:d,schema:Mve});((h=x==null?void 0:x.thinkingConfig)==null?void 0:h.includeThoughts)===!0&&!this.config.provider.startsWith("google.vertex.")&&v.push({type:"other",message:`The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const w={maxOutputTokens:n,temperature:r,topK:s,topP:i,frequencyPenalty:a,presencePenalty:o,stopSequences:l,seed:u,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?Il(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:x==null?void 0:x.responseModalities,thinkingConfig:x==null?void 0:x.thinkingConfig},{contents:S,systemInstruction:C}=Cve(t);switch(b){case"regular":{const{tools:k,toolConfig:A,toolWarnings:R}=Eve(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:w,contents:S,systemInstruction:C,safetySettings:this.settings.safetySettings,tools:k,toolConfig:A,cachedContent:this.settings.cachedContent},warnings:[...v,...R]}}case"object-json":return{args:{generationConfig:{...w,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?Il(e.schema):void 0},contents:S,systemInstruction:C,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};case"object-tool":return{args:{generationConfig:w,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(y=e.tool.description)!=null?y:"",parameters:Il(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};default:{const k=b;throw new Error(`Unsupported type: ${k}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,i,s;const{args:a,warnings:o}=await this.getArgs(e),l=JSON.stringify(a),c=hs(await rj(this.config.headers),e.headers),{responseHeaders:u,value:d,rawValue:h}=await ps({url:`${this.config.baseURL}/${QB(this.modelId)}:generateContent`,headers:c,body:a,failedResponseHandler:dj,successfulResponseHandler:Mo(Rve),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:m,...y}=a,b=d.candidates[0],v=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=t$({parts:v,generateId:this.config.generateId}),w=d.usageMetadata;return{text:n$(v),reasoning:r$(v),files:(t=i$(v))==null?void 0:t.map(S=>({data:S.inlineData.data,mimeType:S.inlineData.mimeType})),toolCalls:x,finishReason:e$({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=w==null?void 0:w.promptTokenCount)!=null?n:NaN,completionTokens:(r=w==null?void 0:w.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:m,rawSettings:y},rawResponse:{headers:u,body:h},warnings:o,providerMetadata:{google:{groundingMetadata:(i=b.groundingMetadata)!=null?i:null,safetyRatings:(s=b.safetyRatings)!=null?s:null}},sources:s$({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),i=hs(await rj(this.config.headers),e.headers),{responseHeaders:s,value:a}=await ps({url:`${this.config.baseURL}/${QB(this.modelId)}:streamGenerateContent?alt=sse`,headers:i,body:t,failedResponseHandler:dj,successfulResponseHandler:Cy(Nve),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let c="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;const h=this.config.generateId;let m=!1;return{stream:a.pipeThrough(new TransformStream({transform(y,b){var v,x,w,S,C,k;if(!y.success){b.enqueue({type:"error",error:y.error});return}const A=y.value,R=A.usageMetadata;R!=null&&(u={promptTokens:(v=R.promptTokenCount)!=null?v:NaN,completionTokens:(x=R.candidatesTokenCount)!=null?x:NaN});const N=(w=A.candidates)==null?void 0:w[0];if(N==null)return;const I=N.content;if(I!=null){const O=n$(I.parts);O!=null&&b.enqueue({type:"text-delta",textDelta:O});const L=r$(I.parts);if(L!=null)for(const F of L)b.enqueue({type:"reasoning",textDelta:F.text});const P=i$(I.parts);if(P!=null)for(const F of P)b.enqueue({type:"file",mimeType:F.inlineData.mimeType,data:F.inlineData.data});const V=t$({parts:I.parts,generateId:h});if(V!=null)for(const F of V)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:F.toolCallId,toolName:F.toolName,argsTextDelta:F.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:F.toolCallId,toolName:F.toolName,args:F.args}),m=!0}if(N.finishReason!=null){c=e$({finishReason:N.finishReason,hasToolCalls:m});const O=(S=s$({groundingMetadata:N.groundingMetadata,generateId:h}))!=null?S:[];for(const L of O)b.enqueue({type:"source",source:L});d={google:{groundingMetadata:(C=N.groundingMetadata)!=null?C:null,safetyRatings:(k=N.safetyRatings)!=null?k:null}}}},flush(y){y.enqueue({type:"finish",finishReason:c,usage:u,providerMetadata:d})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:s},warnings:n,request:{body:r}}}};function t$({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function n$(e){const t=e==null?void 0:e.filter(n=>"text"in n&&n.thought!==!0);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function r$(e){const t=e==null?void 0:e.filter(n=>"text"in n&&n.thought===!0&&n.text!=null);return t==null||t.length===0?void 0:t.map(n=>({type:"text",text:n.text}))}function i$(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function s$({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var vG=Je({parts:cn(Ni([Je({functionCall:Je({name:Ue(),args:Yw()})}),Je({inlineData:Je({mimeType:Ue(),data:Ue()})}),Je({text:Ue().nullish(),thought:Cr().nullish()})])).nullish()}),Ave=Je({web:Je({uri:Ue(),title:Ue()}).nullish(),retrievedContext:Je({uri:Ue(),title:Ue()}).nullish()}),xG=Je({webSearchQueries:cn(Ue()).nullish(),retrievalQueries:cn(Ue()).nullish(),searchEntryPoint:Je({renderedContent:Ue()}).nullish(),groundingChunks:cn(Ave).nullish(),groundingSupports:cn(Je({segment:Je({startIndex:Nt().nullish(),endIndex:Nt().nullish(),text:Ue().nullish()}),segment_text:Ue().nullish(),groundingChunkIndices:cn(Nt()).nullish(),supportChunkIndices:cn(Nt()).nullish(),confidenceScores:cn(Nt()).nullish(),confidenceScore:cn(Nt()).nullish()})).nullish(),retrievalMetadata:Ni([Je({webDynamicRetrievalScore:Nt()}),Je({})]).nullish()}),wG=Je({category:Ue().nullish(),probability:Ue().nullish(),probabilityScore:Nt().nullish(),severity:Ue().nullish(),severityScore:Nt().nullish(),blocked:Cr().nullish()}),Rve=Je({candidates:cn(Je({content:vG.nullish().or(Je({}).strict()),finishReason:Ue().nullish(),safetyRatings:cn(wG).nullish(),groundingMetadata:xG.nullish()})),usageMetadata:Je({promptTokenCount:Nt().nullish(),candidatesTokenCount:Nt().nullish(),totalTokenCount:Nt().nullish()}).nullish()}),Nve=Je({candidates:cn(Je({content:vG.nullish(),finishReason:Ue().nullish(),safetyRatings:cn(wG).nullish(),groundingMetadata:xG.nullish()})).nullish(),usageMetadata:Je({promptTokenCount:Nt().nullish(),candidatesTokenCount:Nt().nullish(),totalTokenCount:Nt().nullish()}).nullish()}),Mve=Je({responseModalities:cn(cl(["TEXT","IMAGE"])).nullish(),thinkingConfig:Je({thinkingBudget:Nt().nullish(),includeThoughts:Cr().nullish()}).nullish()}),Ive=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new cE({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=hs(await rj(this.config.headers),t),{responseHeaders:i,value:s}=await ps({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(a=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:a}]},outputDimensionality:this.settings.outputDimensionality,taskType:this.settings.taskType}))},failedResponseHandler:dj,successfulResponseHandler:Mo(jve),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.embeddings.map(a=>a.values),usage:void 0,rawResponse:{headers:i}}}},jve=Je({embeddings:cn(Je({values:cn(Nt())}))});function Ove(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function _G(e={}){var t;const n=(t=hE(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":cG({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),i=(o,l={})=>{var c;return new Tve(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:go,isSupportedUrl:Ove,fetch:e.fetch})},s=(o,l={})=>new Ive(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),a=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(o,l)};return a.languageModel=i,a.chat=i,a.generativeAI=i,a.embedding=s,a.textEmbedding=s,a.textEmbeddingModel=s,a}_G();var SG="vercel.ai.error",Pve=Symbol.for(SG),CG,Dve=class kG extends Error{constructor({name:t,message:n,cause:r}){super(n),this[CG]=!0,this.name=t,this.cause=r}static isInstance(t){return kG.hasMarker(t,SG)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};CG=Pve;var ia=Dve,EG="AI_APICallError",TG=`vercel.ai.error.${EG}`,Fve=Symbol.for(TG),AG,vd=class extends ia{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:s,cause:a,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:EG,message:e,cause:a}),this[AG]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=s,this.isRetryable=o,this.data=l}static isInstance(e){return ia.hasMarker(e,TG)}};AG=Fve;var RG="AI_EmptyResponseBodyError",NG=`vercel.ai.error.${RG}`,Lve=Symbol.for(NG),MG,Bve=class extends ia{constructor({message:e="Empty response body"}={}){super({name:RG,message:e}),this[MG]=!0}static isInstance(e){return ia.hasMarker(e,NG)}};MG=Lve;function IG(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var jG="AI_InvalidArgumentError",OG=`vercel.ai.error.${jG}`,$ve=Symbol.for(OG),PG,zve=class extends ia{constructor({message:t,cause:n,argument:r}){super({name:jG,message:t,cause:n}),this[PG]=!0,this.argument=r}static isInstance(t){return ia.hasMarker(t,OG)}};PG=$ve;var DG="AI_InvalidPromptError",FG=`vercel.ai.error.${DG}`,Uve=Symbol.for(FG),LG,qve=class extends ia{constructor({prompt:e,message:t,cause:n}){super({name:DG,message:`Invalid prompt: ${t}`,cause:n}),this[LG]=!0,this.prompt=e}static isInstance(e){return ia.hasMarker(e,FG)}};LG=Uve;var BG="AI_InvalidResponseDataError",$G=`vercel.ai.error.${BG}`,Vve=Symbol.for($G),zG,pN=class extends ia{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:BG,message:t}),this[zG]=!0,this.data=e}static isInstance(e){return ia.hasMarker(e,$G)}};zG=Vve;var UG="AI_JSONParseError",qG=`vercel.ai.error.${UG}`,Wve=Symbol.for(qG),VG,fC=class extends ia{constructor({text:e,cause:t}){super({name:UG,message:`JSON parsing failed: Text: ${e}.
Error message: ${IG(t)}`,cause:t}),this[VG]=!0,this.text=e}static isInstance(e){return ia.hasMarker(e,qG)}};VG=Wve;var WG="AI_LoadAPIKeyError",HG=`vercel.ai.error.${WG}`,Hve=Symbol.for(HG),GG,dS=class extends ia{constructor({message:e}){super({name:WG,message:e}),this[GG]=!0}static isInstance(e){return ia.hasMarker(e,HG)}};GG=Hve;var KG="AI_TypeValidationError",YG=`vercel.ai.error.${KG}`,Gve=Symbol.for(YG),ZG,Kve=class fj extends ia{constructor({value:t,cause:n}){super({name:KG,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${IG(n)}`,cause:n}),this[ZG]=!0,this.value=t}static isInstance(t){return ia.hasMarker(t,YG)}static wrap({value:t,cause:n}){return fj.isInstance(n)&&n.value===t?n:new fj({value:t,cause:n})}};ZG=Gve;var hC=Kve,XG="AI_UnsupportedFunctionalityError",JG=`vercel.ai.error.${XG}`,Yve=Symbol.for(JG),QG,Pl=class extends ia{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:XG,message:t}),this[QG]=!0,this.functionality=e}static isInstance(e){return ia.hasMarker(e,JG)}};QG=Yve;let Zve=(e,t=21)=>(n=t)=>{let r="",i=n|0;for(;i--;)r+=e[Math.random()*e.length|0];return r},a$=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function mN(e){}function Xve(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=mN,onError:n=mN,onRetry:r=mN,onComment:i}=e;let s="",a=!0,o,l="",c="";function u(b){const v=a?b.replace(/^\xEF\xBB\xBF/,""):b,[x,w]=Jve(`${s}${v}`);for(const S of x)d(S);s=w,a=!1}function d(b){if(b===""){m();return}if(b.startsWith(":")){i&&i(b.slice(b.startsWith(": ")?2:1));return}const v=b.indexOf(":");if(v!==-1){const x=b.slice(0,v),w=b[v+1]===" "?2:1,S=b.slice(v+w);h(x,S,b);return}h(b,"",b)}function h(b,v,x){switch(b){case"event":c=v;break;case"data":l=`${l}${v}
`;break;case"id":o=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?r(parseInt(v,10)):n(new a$(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:x}));break;default:n(new a$(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:v,line:x}));break}}function m(){l.length>0&&t({id:o,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",c=""}function y(b={}){s&&b.consume&&d(s),a=!0,o=void 0,l="",c="",s=""}return{feed:u,reset:y}}function Jve(e){const t=[];let n="",r=0;for(;r<e.length;){const i=e.indexOf("\r",r),s=e.indexOf(`
`,r);let a=-1;if(i!==-1&&s!==-1?a=Math.min(i,s):i!==-1?a=i:s!==-1&&(a=s),a===-1){n=e.slice(r);break}else{const o=e.slice(r,a);t.push(o),r=a+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class Qve extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let i;super({start(s){i=Xve({onEvent:a=>{s.enqueue(a)},onError(a){t==="terminate"?s.error(a):typeof t=="function"&&t(a)},onRetry:n,onComment:r})},transform(s){i.feed(s)}})}}var exe={};function pC(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function mE(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var txe=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const i=Zve(n,t);if(e==null)return i;if(n.includes(r))throw new zve({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return s=>`${e}${r}${i(s)}`},fS=txe();function nxe(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function gN(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function rxe({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new dS({message:`${r} API key must be a string.`});if(typeof us>"u")throw new dS({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=exe[t],e==null)throw new dS({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new dS({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var hj=Symbol.for("vercel.ai.validator");function ixe(e){return{[hj]:!0,validate:e}}function sxe(e){return typeof e=="object"&&e!==null&&hj in e&&e[hj]===!0&&"validate"in e}function axe(e){return sxe(e)?e:oxe(e)}function oxe(e){return ixe(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function lxe({value:e,schema:t}){const n=eK({value:e,schema:t});if(!n.success)throw hC.wrap({value:e,cause:n.error});return n.value}function eK({value:e,schema:t}){const n=axe(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:hC.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:hC.wrap({value:e,cause:r})}}}function cxe({text:e,schema:t}){try{const n=wy.parse(e);return t==null?n:lxe({value:n,schema:t})}catch(n){throw fC.isInstance(n)||hC.isInstance(n)?n:new fC({text:e,cause:n})}}function tK({text:e,schema:t}){try{const n=wy.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=eK({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:fC.isInstance(n)?n:new fC({text:e,cause:n})}}}function yN(e){try{return wy.parse(e),!0}catch{return!1}}var uxe=()=>globalThis.fetch,mC=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a})=>dxe({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a}),dxe=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:s,fetch:a=uxe()})=>{try{const o=await a(e,{method:"POST",headers:nxe(t),body:n.content,signal:s}),l=mE(o);if(!o.ok){let c;try{c=await i({response:o,url:e,requestBodyValues:n.values})}catch(u){throw gN(u)||vd.isInstance(u)?u:new vd({message:"Failed to process error response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(gN(c)||vd.isInstance(c))?c:new vd({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(gN(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new vd({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},fxe=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:s})=>{const a=await r.text(),o=mE(r);if(a.trim()==="")return{responseHeaders:o,value:new vd({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})};try{const l=cxe({text:a,schema:e});return{responseHeaders:o,value:new vd({message:t(l),url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new vd({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})}}},nK=e=>async({response:t})=>{const n=mE(t);if(t.body==null)throw new Bve({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Qve).pipeThrough(new TransformStream({transform({data:r},i){r!=="[DONE]"&&i.enqueue(tK({text:r,schema:e}))}}))}},rK=e=>async({response:t,url:n,requestBodyValues:r})=>{const i=await t.text(),s=tK({text:i,schema:e}),a=mE(t);if(!s.success)throw new vd({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:a,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:a,value:s.value,rawValue:s.rawValue}},{btoa:hxe}=globalThis;function o$(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return hxe(t)}function pxe(e){return e==null?void 0:e.replace(/\/$/,"")}var mxe=Object.defineProperty,gxe=Object.defineProperties,yxe=Object.getOwnPropertyDescriptors,gC=Object.getOwnPropertySymbols,iK=Object.prototype.hasOwnProperty,sK=Object.prototype.propertyIsEnumerable,l$=(e,t,n)=>t in e?mxe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Go=(e,t)=>{for(var n in t||(t={}))iK.call(t,n)&&l$(e,n,t[n]);if(gC)for(var n of gC(t))sK.call(t,n)&&l$(e,n,t[n]);return e},f2=(e,t)=>gxe(e,yxe(t)),yC=(e,t)=>{var n={};for(var r in e)iK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gC)for(var r of gC(e))t.indexOf(r)<0&&sK.call(e,r)&&(n[r]=e[r]);return n};function Vc(e){var t,n,r;const i=e==null?void 0:e.anthropic,s=e==null?void 0:e.openrouter;return(r=(n=(t=s==null?void 0:s.cacheControl)!=null?t:s==null?void 0:s.cache_control)!=null?n:i==null?void 0:i.cacheControl)!=null?r:i==null?void 0:i.cache_control}function bxe(e){var t,n,r;const i=[];for(const{role:s,content:a,providerMetadata:o}of e)switch(s){case"system":{i.push({role:"system",content:a,cache_control:Vc(o)});break}case"user":{if(a.length===1&&((t=a[0])==null?void 0:t.type)==="text"){i.push({role:"user",content:a[0].text,cache_control:(n=Vc(o))!=null?n:Vc(a[0].providerMetadata)});break}const l=Vc(o),c=a.map(u=>{var d,h,m,y,b,v;switch(u.type){case"text":return{type:"text",text:u.text,cache_control:(d=Vc(u.providerMetadata))!=null?d:l};case"image":return{type:"image_url",image_url:{url:u.image instanceof URL?u.image.toString():`data:${(h=u.mimeType)!=null?h:"image/jpeg"};base64,${o$(u.image)}`},cache_control:(m=Vc(u.providerMetadata))!=null?m:l};case"file":return{type:"file",file:{filename:String((b=(y=u.providerMetadata)==null?void 0:y.openrouter)==null?void 0:b.filename),file_data:u.data instanceof Uint8Array?`data:${u.mimeType};base64,${o$(u.data)}`:`data:${u.mimeType};base64,${u.data}`},cache_control:(v=Vc(u.providerMetadata))!=null?v:l};default:{const x=u;throw new Error(`Unsupported content part type: ${x}`)}}});i.push({role:"user",content:c});break}case"assistant":{let l="";const c=[];for(const u of a)switch(u.type){case"text":{l+=u.text;break}case"tool-call":{c.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const d=u;throw new Error(`Unsupported part: ${d}`)}}i.push({role:"assistant",content:l,tool_calls:c.length>0?c:void 0,cache_control:Vc(o)});break}case"tool":{for(const l of a)i.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=Vc(o))!=null?r:Vc(l.providerMetadata)});break}default:{const l=s;throw new Error(`Unsupported role: ${l}`)}}return i}function c$(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:i,top_logprobs:s})=>({token:r,logprob:i,topLogprobs:s?s.map(({token:a,logprob:o})=>({token:a,logprob:o})):[]})))!=null?n:void 0}function bC(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var XO=Je({error:Je({message:Ue(),type:Ue(),param:ky().nullable(),code:Ue().nullable()})}),vC=fxe({errorSchema:XO,errorToMessage:e=>e.error.message});function vxe(e){return"parameters"in e}var xxe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,frequencyPenalty:s,presencePenalty:a,seed:o,stopSequences:l,responseFormat:c,topK:u,providerMetadata:d}){var h;const m=e.type,y=(h=d==null?void 0:d.openrouter)!=null?h:{},b=Go(Go(Go({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:i,frequency_penalty:s,presence_penalty:a,seed:o,stop:l,response_format:c,top_k:u,messages:bxe(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),y);switch(m){case"regular":return Go(Go({},b),Sxe(e));case"object-json":return f2(Go({},b),{response_format:{type:"json_object"}});case"object-tool":return f2(Go({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const v=m;throw new Pl({functionality:`${v} mode`})}}}async doGenerate(e){var t,n,r,i,s,a,o;const l=this.getArgs(e),{responseHeaders:c,value:u}=await mC({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:pC(this.config.headers(),e.headers),body:l,failedResponseHandler:vC,successfulResponseHandler:rK(wxe),abortSignal:e.abortSignal,fetch:this.config.fetch}),d=l,{messages:h}=d,m=yC(d,["messages"]),y=u.choices[0];if(!y)throw new Error("No choice in response");return{response:{id:u.id,modelId:u.model},text:(t=y.message.content)!=null?t:void 0,reasoning:(n=y.message.reasoning)!=null?n:void 0,toolCalls:(r=y.message.tool_calls)==null?void 0:r.map(b=>{var v;return{toolCallType:"function",toolCallId:(v=b.id)!=null?v:fS(),toolName:b.function.name,args:b.function.arguments}}),finishReason:bC(y.finish_reason),usage:{promptTokens:(s=(i=u.usage)==null?void 0:i.prompt_tokens)!=null?s:0,completionTokens:(o=(a=u.usage)==null?void 0:a.completion_tokens)!=null?o:0},rawCall:{rawPrompt:h,rawSettings:m},rawResponse:{headers:c},warnings:[],logprobs:c$(y.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await mC({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:pC(this.config.headers(),e.headers),body:f2(Go({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:vC,successfulResponseHandler:nK(_xe),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=t,{messages:s}=i,a=yC(i,["messages"]),o=[];let l="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){var m,y,b,v,x,w,S,C,k,A,R,N;if(!d.success){l="error",h.enqueue({type:"error",error:d.error});return}const I=d.value;if("error"in I){l="error",h.enqueue({type:"error",error:I.error});return}I.id&&h.enqueue({type:"response-metadata",id:I.id}),I.model&&h.enqueue({type:"response-metadata",modelId:I.model}),I.usage!=null&&(c={promptTokens:I.usage.prompt_tokens,completionTokens:I.usage.completion_tokens});const O=I.choices[0];if((O==null?void 0:O.finish_reason)!=null&&(l=bC(O.finish_reason)),(O==null?void 0:O.delta)==null)return;const L=O.delta;L.content!=null&&h.enqueue({type:"text-delta",textDelta:L.content}),L.reasoning!=null&&h.enqueue({type:"reasoning",textDelta:L.reasoning});const P=c$(O==null?void 0:O.logprobs);if(P!=null&&P.length&&(u===void 0&&(u=[]),u.push(...P)),L.tool_calls!=null)for(const V of L.tool_calls){const F=V.index;if(o[F]==null){if(V.type!=="function")throw new pN({data:V,message:"Expected 'function' type."});if(V.id==null)throw new pN({data:V,message:"Expected 'id' to be a string."});if(((m=V.function)==null?void 0:m.name)==null)throw new pN({data:V,message:"Expected 'function.name' to be a string."});o[F]={id:V.id,type:"function",function:{name:V.function.name,arguments:(y=V.function.arguments)!=null?y:""},sent:!1};const U=o[F];if(U==null)throw new Error("Tool call is missing");((b=U.function)==null?void 0:b.name)!=null&&((v=U.function)==null?void 0:v.arguments)!=null&&yN(U.function.arguments)&&(h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.id,toolName:U.function.name,argsTextDelta:U.function.arguments}),h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=U.id)!=null?x:fS(),toolName:U.function.name,args:U.function.arguments}),U.sent=!0);continue}const J=o[F];if(J==null)throw new Error("Tool call is missing");((w=V.function)==null?void 0:w.arguments)!=null&&(J.function.arguments+=(C=(S=V.function)==null?void 0:S.arguments)!=null?C:""),h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:(k=V.function.arguments)!=null?k:""}),((A=J.function)==null?void 0:A.name)!=null&&((R=J.function)==null?void 0:R.arguments)!=null&&yN(J.function.arguments)&&(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(N=J.id)!=null?N:fS(),toolName:J.function.name,args:J.function.arguments}),J.sent=!0)}},flush(d){var h;if(l==="tool-calls")for(const m of o)m.sent||(d.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(h=m.id)!=null?h:fS(),toolName:m.function.name,args:yN(m.function.arguments)?m.function.arguments:"{}"}),m.sent=!0);d.enqueue({type:"finish",finishReason:l,logprobs:u,usage:c})}})),rawCall:{rawPrompt:s,rawSettings:a},rawResponse:{headers:n},warnings:[]}}},aK=Je({id:Ue().optional(),model:Ue().optional(),usage:Je({prompt_tokens:Nt(),completion_tokens:Nt(),total_tokens:Nt()}).nullish()}),wxe=aK.extend({choices:cn(Je({message:Je({role:Dn("assistant"),content:Ue().nullable().optional(),reasoning:Ue().nullable().optional(),tool_calls:cn(Je({id:Ue().optional().nullable(),type:Dn("function"),function:Je({name:Ue(),arguments:Ue()})})).optional()}),index:Nt(),logprobs:Je({content:cn(Je({token:Ue(),logprob:Nt(),top_logprobs:cn(Je({token:Ue(),logprob:Nt()}))})).nullable()}).nullable().optional(),finish_reason:Ue().optional().nullable()}))}),_xe=Ni([aK.extend({choices:cn(Je({delta:Je({role:cl(["assistant"]).optional(),content:Ue().nullish(),reasoning:Ue().nullish().optional(),tool_calls:cn(Je({index:Nt(),id:Ue().nullish(),type:Dn("function").optional(),function:Je({name:Ue().nullish(),arguments:Ue().nullish()})})).nullish()}).nullish(),logprobs:Je({content:cn(Je({token:Ue(),logprob:Nt(),top_logprobs:cn(Je({token:Ue(),logprob:Nt()}))})).nullable()}).nullish(),finish_reason:Ue().nullable().optional(),index:Nt()}))}),XO]);function Sxe(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(a=>vxe(a)?{type:"function",function:{name:a.name,description:a.description,parameters:a.parameters}}:{type:"function",function:{name:a.name}}),i=e.toolChoice;if(i==null)return{tools:r,tool_choice:void 0};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:r,tool_choice:s};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:i.toolName}}};default:{const a=s;throw new Error(`Unsupported tool choice type: ${a}`)}}}function Cxe({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let i="";e[0]&&e[0].role==="system"&&(i+=`${e[0].content}

`,e=e.slice(1));for(const{role:s,content:a}of e)switch(s){case"system":throw new qve({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Pl({functionality:"images"});case"file":throw new Pl({functionality:"file attachments"});default:{const c=l;throw new Error(`Unsupported content type: ${c}`)}}}).join("");i+=`${n}:
${o}

`;break}case"assistant":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Pl({functionality:"tool-call messages"});case"reasoning":throw new Pl({functionality:"reasoning messages"});case"redacted-reasoning":throw new Pl({functionality:"redacted reasoning messages"});default:{const c=l;throw new Error(`Unsupported content type: ${c}`)}}}).join("");i+=`${r}:
${o}

`;break}case"tool":throw new Pl({functionality:"tool messages"});default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return i+=`${r}:
`,{prompt:i}}function u$(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,i;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((i=e.top_logprobs[n])!=null?i:{}).map(([s,a])=>({token:s,logprob:a})):[]}})}var kxe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:i,topP:s,frequencyPenalty:a,presencePenalty:o,seed:l,responseFormat:c,topK:u,stopSequences:d,providerMetadata:h}){var m,y;const b=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},{prompt:x}=Cxe({prompt:n,inputFormat:t}),w=Go(Go(Go({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:i,top_p:s,frequency_penalty:a,presence_penalty:o,seed:l,stop:d,response_format:c,top_k:u,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(b){case"regular":{if((y=e.tools)!=null&&y.length)throw new Pl({functionality:"tools"});if(e.toolChoice)throw new Pl({functionality:"toolChoice"});return w}case"object-json":throw new Pl({functionality:"object-json mode"});case"object-tool":throw new Pl({functionality:"object-tool mode"});default:{const S=b;throw new Pl({functionality:`${S} mode`})}}}async doGenerate(e){var t,n,r,i,s;const a=this.getArgs(e),{responseHeaders:o,value:l}=await mC({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:pC(this.config.headers(),e.headers),body:a,failedResponseHandler:vC,successfulResponseHandler:rK(d$),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=a,{prompt:u}=c,d=yC(c,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const h=l.choices[0];if(!h)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=h.text)!=null?t:"",reasoning:h.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(s=(i=l.usage)==null?void 0:i.completion_tokens)!=null?s:0},finishReason:bC(h.finish_reason),logprobs:u$(h.logprobs),rawCall:{rawPrompt:u,rawSettings:d},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await mC({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:pC(this.config.headers(),e.headers),body:f2(Go({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:vC,successfulResponseHandler:nK(d$),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=t,{prompt:s}=i,a=yC(i,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(u,d){if(!u.success){o="error",d.enqueue({type:"error",error:u.error});return}const h=u.value;if("error"in h){o="error",d.enqueue({type:"error",error:h.error});return}h.usage!=null&&(l={promptTokens:h.usage.prompt_tokens,completionTokens:h.usage.completion_tokens});const m=h.choices[0];(m==null?void 0:m.finish_reason)!=null&&(o=bC(m.finish_reason)),(m==null?void 0:m.text)!=null&&d.enqueue({type:"text-delta",textDelta:m.text});const y=u$(m==null?void 0:m.logprobs);y!=null&&y.length&&(c===void 0&&(c=[]),c.push(...y))},flush(u){u.enqueue({type:"finish",finishReason:o,logprobs:c,usage:l})}})),rawCall:{rawPrompt:s,rawSettings:a},rawResponse:{headers:n},warnings:[]}}},d$=Ni([Je({id:Ue().optional(),model:Ue().optional(),choices:cn(Je({text:Ue(),reasoning:Ue().nullish().optional(),finish_reason:Ue().nullish(),index:Nt(),logprobs:Je({tokens:cn(Ue()),token_logprobs:cn(Nt()),top_logprobs:cn(ah(Ue(),Nt())).nullable()}).nullable().optional()})),usage:Je({prompt_tokens:Nt(),completion_tokens:Nt()}).optional().nullable()}),XO]);function oK(e={}){var t,n,r;const i=(n=pxe((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",s=(r=e.compatibility)!=null?r:"compatible",a=()=>Go({Authorization:`Bearer ${rxe({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(d,h={})=>new xxe(d,h,{provider:"openrouter.chat",url:({path:m})=>`${i}${m}`,headers:a,compatibility:s,fetch:e.fetch,extraBody:e.extraBody}),l=(d,h={})=>new kxe(d,h,{provider:"openrouter.completion",url:({path:m})=>`${i}${m}`,headers:a,compatibility:s,fetch:e.fetch,extraBody:e.extraBody}),c=(d,h)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return d==="openai/gpt-3.5-turbo-instruct"?l(d,h):o(d,h)},u=function(d,h){return c(d,h)};return u.languageModel=c,u.chat=o,u.completion=l,u}oK({compatibility:"strict"});var pp={},bN={},f$;function h$(){return f$||(f$=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(bN)),bN}var p$;function Exe(){return p$||(p$=1,function(e){var t=pp&&pp.__createBinding||(Object.create?function(c,u,d,h){h===void 0&&(h=d);var m=Object.getOwnPropertyDescriptor(u,d);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(c,h,m)}:function(c,u,d,h){h===void 0&&(h=d),c[h]=u[d]}),n=pp&&pp.__exportStar||function(c,u){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&t(u,c,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=h$();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(h$(),e);class i extends Error{}e.PartialJSON=i;class s extends Error{}e.MalformedJSON=s;function a(c,u=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return o(c.trim(),u)}e.parseJSON=a;const o=(c,u)=>{const d=c.length;let h=0;const m=k=>{throw new i(`${k} at position ${h}`)},y=k=>{throw new s(`${k} at position ${h}`)},b=()=>(C(),h>=d&&m("Unexpected end of input"),c[h]==='"'?v():c[h]==="{"?x():c[h]==="["?w():c.substring(h,h+4)==="null"||r.Allow.NULL&u&&d-h<4&&"null".startsWith(c.substring(h))?(h+=4,null):c.substring(h,h+4)==="true"||r.Allow.BOOL&u&&d-h<4&&"true".startsWith(c.substring(h))?(h+=4,!0):c.substring(h,h+5)==="false"||r.Allow.BOOL&u&&d-h<5&&"false".startsWith(c.substring(h))?(h+=5,!1):c.substring(h,h+8)==="Infinity"||r.Allow.INFINITY&u&&d-h<8&&"Infinity".startsWith(c.substring(h))?(h+=8,1/0):c.substring(h,h+9)==="-Infinity"||r.Allow._INFINITY&u&&1<d-h&&d-h<9&&"-Infinity".startsWith(c.substring(h))?(h+=9,-1/0):c.substring(h,h+3)==="NaN"||r.Allow.NAN&u&&d-h<3&&"NaN".startsWith(c.substring(h))?(h+=3,NaN):S()),v=()=>{const k=h;let A=!1;for(h++;h<d&&(c[h]!=='"'||A&&c[h-1]==="\\");)A=c[h]==="\\"?!A:!1,h++;if(c.charAt(h)=='"')try{return JSON.parse(c.substring(k,++h-Number(A)))}catch(R){y(String(R))}else if(r.Allow.STR&u)try{return JSON.parse(c.substring(k,h-Number(A))+'"')}catch{return JSON.parse(c.substring(k,c.lastIndexOf("\\"))+'"')}m("Unterminated string literal")},x=()=>{h++,C();const k={};try{for(;c[h]!=="}";){if(C(),h>=d&&r.Allow.OBJ&u)return k;const A=v();C(),h++;try{const R=b();k[A]=R}catch(R){if(r.Allow.OBJ&u)return k;throw R}C(),c[h]===","&&h++}}catch{if(r.Allow.OBJ&u)return k;m("Expected '}' at end of object")}return h++,k},w=()=>{h++;const k=[];try{for(;c[h]!=="]";)k.push(b()),C(),c[h]===","&&h++}catch{if(r.Allow.ARR&u)return k;m("Expected ']' at end of array")}return h++,k},S=()=>{if(h===0){c==="-"&&y("Not sure what '-' is");try{return JSON.parse(c)}catch(A){if(r.Allow.NUM&u)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}y(String(A))}}const k=h;for(c[h]==="-"&&h++;c[h]&&",]}".indexOf(c[h])===-1;)h++;h==d&&!(r.Allow.NUM&u)&&m("Unterminated number literal");try{return JSON.parse(c.substring(k,h))}catch{c.substring(k,h)==="-"&&m("Not sure what '-' is");try{return JSON.parse(c.substring(k,c.lastIndexOf("e")))}catch(R){y(String(R))}}},C=()=>{for(;h<d&&` 
\r	`.includes(c[h]);)h++};return b()},l=a;e.parse=l}(pp)),pp}var Txe=Exe();function vN(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((i,s)=>{if(s.type==="text")i.content+=s.text;else{if(s.type==="image"&&s.image instanceof URL)throw new ei({functionality:"Image URLs in user messages"});s.type==="image"&&s.image instanceof Uint8Array&&(i.images=i.images||[],i.images.push(ih(s.image)))}return i},{content:""}),role:"user"});break}case"assistant":{const i=[],s=[];for(const a of n)switch(a.type){case"text":{i.push(a.text);break}case"tool-call":{s.push({function:{arguments:a.args,name:a.toolName},id:a.toolCallId,type:"function"});break}default:{const o=a;throw new Error(`Unsupported part: ${o}`)}}t.push({content:i.join(","),role:"assistant",tool_calls:s.length>0?s:void 0});break}case"tool":{t.push(...n.map(i=>({content:typeof i.result=="object"?JSON.stringify(i.result):`${i.result}`,role:"tool",tool_call_id:i.toolCallId})));break}default:{const i=r;throw new Error(`Unsupported role: ${i}`)}}return t}var Axe=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=Txe.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[i,s]of r.entries()){const a=(n=JSON.stringify(s==null?void 0:s.parameters))!=null?n:"";if(a==="")continue;this._toolCalls[i]||(this._toolCalls[i]={function:{arguments:"",name:s.name},id:go(),type:"function"});const o=this._toolCalls[i];o.function.arguments=a,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function Rxe({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var Nxe=Je({error:Je({code:Ue().nullable(),message:Ue(),param:ky().nullable(),type:Ue()})}),pj=ym({errorSchema:Nxe,errorToMessage:e=>e.error.message});function Mxe({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],i=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const s=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):s.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(i===void 0)return{tools:s,toolWarnings:r};const a=i.type;switch(a){case"auto":return{tools:s,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=a;throw new ei({functionality:`Unsupported tool choice type: ${o}`})}}}function Ixe(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var jxe=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},Oxe=e=>async({response:t})=>{const n=_y(t);if(t.body===null)throw new DH({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new jxe).pipeThrough(new TransformStream({transform(r,i){i.enqueue(Xp({schema:e,text:r}))}}))}},Pxe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:i,responseFormat:s,seed:a,stopSequences:o,temperature:l,topK:c,topP:u}){const d=n.type,h=[];s!==void 0&&s.type==="json"&&s.schema!==void 0&&!this.supportsStructuredOutputs&&h.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const m={format:s==null?void 0:s.type,model:this.modelId,options:Ixe({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:a,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:c,top_p:u,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(d){case"regular":{const{tools:y,toolWarnings:b}=Mxe({mode:n});return{args:{...m,messages:vN(i),tools:y},type:d,warnings:[...h,...b]}}case"object-json":return{args:{...m,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:vN(i)},type:d,warnings:h};case"object-tool":return{args:{...m,messages:vN(i),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:d,warnings:h};default:{const y=d;throw new Error(`Unsupported type: ${y}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:i}=this.getArguments(e),s={...r,stream:!1},{responseHeaders:a,value:o}=await ps({abortSignal:e.abortSignal,body:s,failedResponseHandler:pj,fetch:this.config.fetch,headers:hs(this.config.headers(),e.headers),successfulResponseHandler:Mo(Dxe),url:`${this.config.baseURL}/chat`}),{messages:l,...c}=s,u=(t=o.message.tool_calls)==null?void 0:t.map(d=>{var h;return{args:JSON.stringify(d.function.arguments),toolCallId:(h=d.id)!=null?h:go(),toolCallType:"function",toolName:d.function.name}});return{finishReason:Rxe({finishReason:o.done_reason,hasToolCalls:u!==void 0&&u.length>0}),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:a},request:{body:JSON.stringify(s)},text:(n=o.message.content)!=null?n:void 0,toolCalls:u,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:i}}async doStream(e){if(this.settings.simulateStreaming){const m=await this.doGenerate(e),y=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...m.response}),m.text&&b.enqueue({textDelta:m.text,type:"text-delta"}),m.toolCalls)for(const v of m.toolCalls)b.enqueue({argsTextDelta:v.args,toolCallId:v.toolCallId,toolCallType:"function",toolName:v.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",...v});b.enqueue({finishReason:m.finishReason,logprobs:m.logprobs,providerMetadata:m.providerMetadata,type:"finish",usage:m.usage}),b.close()}});return{rawCall:m.rawCall,rawResponse:m.rawResponse,stream:y,warnings:m.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:i,value:s}=await ps({abortSignal:e.abortSignal,body:t,failedResponseHandler:pj,fetch:this.config.fetch,headers:hs(this.config.headers(),e.headers),successfulResponseHandler:Oxe(Fxe),url:`${this.config.baseURL}/chat`}),{messages:a,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new Axe({tools:l,type:n});let u="other",d={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:h=!0}=this.settings;return{rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:i},request:{body:JSON.stringify(t)},stream:s.pipeThrough(new TransformStream({async flush(m){m.enqueue({finishReason:u,type:"finish",usage:d})},async transform(m,y){if(!m.success){y.enqueue({error:m.error,type:"error"});return}const b=m.value;if(b.done){u=c.finish({controller:y}),d={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}h&&c.parse({controller:y,delta:b.message.content})||b.message.content!==null&&y.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},Dxe=Je({created_at:Ue(),done:Dn(!0),done_reason:Ue().optional().nullable(),eval_count:Nt(),eval_duration:Nt(),load_duration:Nt().optional(),message:Je({content:Ue(),role:Ue(),tool_calls:cn(Je({function:Je({arguments:ah(ky()),name:Ue()}),id:Ue().optional()})).optional().nullable()}),model:Ue(),prompt_eval_count:Nt().optional(),prompt_eval_duration:Nt().optional(),total_duration:Nt()}),Fxe=pE("done",[Je({created_at:Ue(),done:Dn(!1),message:Je({content:Ue(),role:Ue()}),model:Ue()}),Je({created_at:Ue(),done:Dn(!0),eval_count:Nt(),eval_duration:Nt(),load_duration:Nt().optional(),model:Ue(),prompt_eval_count:Nt().optional(),prompt_eval_duration:Nt().optional(),total_duration:Nt()})]),Lxe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new cE({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await ps({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:pj,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Mo(Bxe),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},Bxe=Je({embeddings:cn(cn(Nt())),prompt_eval_count:Nt().nullable()});function lK(e={}){var t;const n=(t=hE(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),i=(o,l={})=>new Pxe(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),s=(o,l={})=>new Lxe(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),a=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return i(o,l)};return a.chat=i,a.embedding=s,a.languageModel=i,a.textEmbedding=s,a.textEmbeddingModel=s,a}lK();function mv(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function $xe(e){const t=[];for(const{role:n,content:r,...i}of e){const s=mv({...i});switch(n){case"system":{t.push({role:"system",content:r,...s});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...mv(r[0])});break}t.push({role:"user",content:r.map(a=>{var o;const l=mv(a);switch(a.type){case"text":return{type:"text",text:a.text,...l};case"image":return{type:"image_url",image_url:{url:a.image instanceof URL?a.image.toString():`data:${(o=a.mimeType)!=null?o:"image/jpeg"};base64,${ih(a.image)}`},...l};case"file":throw new ei({functionality:"File content parts in user messages"})}}),...s});break}case"assistant":{let a="";const o=[];for(const l of r){const c=mv(l);switch(l.type){case"text":{a+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...c});break}}}t.push({role:"assistant",content:a,tool_calls:o.length>0?o:void 0,...s});break}case"tool":{for(const a of r){const o=mv(a);t.push({role:"tool",tool_call_id:a.toolCallId,content:JSON.stringify(a.result),...o})}break}default:{const a=n;throw new Error(`Unsupported role: ${a}`)}}}return t}function xC({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function wC(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var zxe=Je({error:Je({message:Ue(),type:Ue().nullish(),param:ky().nullish(),code:Ni([Ue(),Nt()]).nullish()})}),gE={errorSchema:zxe,errorToMessage:e=>e.error.message};function Uxe({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,i=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice,a=[];for(const l of r)l.type==="provider-defined"?i.push({type:"unsupported-tool",tool:l}):a.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(s==null)return{tools:a,tool_choice:void 0,toolWarnings:i};const o=s.type;switch(o){case"auto":case"none":case"required":return{tools:a,tool_choice:o,toolWarnings:i};case"tool":return{tools:a,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const l=o;throw new ei({functionality:`Unsupported tool choice type: ${l}`})}}}var qxe=class{constructor(e,t,n){this.specificationVersion="v1";var r,i;this.modelId=e,this.settings=t,this.config=n;const s=(r=n.errorStructure)!=null?r:gE;this.chunkSchema=Wxe(s.errorSchema),this.failedResponseHandler=ym(s),this.supportsStructuredOutputs=(i=n.supportsStructuredOutputs)!=null?i:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:s,frequencyPenalty:a,presencePenalty:o,providerMetadata:l,stopSequences:c,responseFormat:u,seed:d}){var h,m,y,b,v;const x=e.type,w=[];s!=null&&w.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const S={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:i,frequency_penalty:a,presence_penalty:o,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs===!0&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,name:(h=u.name)!=null?h:"response",description:u.description}}:{type:"json_object"}:void 0,stop:c,seed:d,...l==null?void 0:l[this.providerOptionsName],reasoning_effort:(b=(m=l==null?void 0:l[this.providerOptionsName])==null?void 0:m.reasoningEffort)!=null?b:(y=l==null?void 0:l["openai-compatible"])==null?void 0:y.reasoningEffort,messages:$xe(t)};switch(x){case"regular":{const{tools:C,tool_choice:k,toolWarnings:A}=Uxe({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...S,tools:C,tool_choice:k},warnings:[...w,...A]}}case"object-json":return{args:{...S,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(v=e.name)!=null?v:"response",description:e.description}}:{type:"json_object"}},warnings:w};case"object-tool":return{args:{...S,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:w};default:{const C=x;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,i,s,a,o,l,c,u,d;const{args:h,warnings:m}=this.getArgs({...e}),y=JSON.stringify(h),{responseHeaders:b,value:v,rawValue:x}=await ps({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:h,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Mo(Vxe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:w,...S}=h,C=v.choices[0],k={[this.providerOptionsName]:{},...(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:x})},A=(r=v.usage)==null?void 0:r.completion_tokens_details,R=(i=v.usage)==null?void 0:i.prompt_tokens_details;return(A==null?void 0:A.reasoning_tokens)!=null&&(k[this.providerOptionsName].reasoningTokens=A==null?void 0:A.reasoning_tokens),(A==null?void 0:A.accepted_prediction_tokens)!=null&&(k[this.providerOptionsName].acceptedPredictionTokens=A==null?void 0:A.accepted_prediction_tokens),(A==null?void 0:A.rejected_prediction_tokens)!=null&&(k[this.providerOptionsName].rejectedPredictionTokens=A==null?void 0:A.rejected_prediction_tokens),(R==null?void 0:R.cached_tokens)!=null&&(k[this.providerOptionsName].cachedPromptTokens=R==null?void 0:R.cached_tokens),{text:(s=C.message.content)!=null?s:void 0,reasoning:(a=C.message.reasoning_content)!=null?a:void 0,toolCalls:(o=C.message.tool_calls)==null?void 0:o.map(N=>{var I;return{toolCallType:"function",toolCallId:(I=N.id)!=null?I:go(),toolName:N.function.name,args:N.function.arguments}}),finishReason:wC(C.finish_reason),usage:{promptTokens:(c=(l=v.usage)==null?void 0:l.prompt_tokens)!=null?c:NaN,completionTokens:(d=(u=v.usage)==null?void 0:u.completion_tokens)!=null?d:NaN},providerMetadata:k,rawCall:{rawPrompt:w,rawSettings:S},rawResponse:{headers:b,body:x},response:xC(v),warnings:m,request:{body:y}}}async doStream(e){var t;if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.reasoning)if(Array.isArray(b.reasoning))for(const w of b.reasoning)w.type==="text"&&x.enqueue({type:"reasoning",textDelta:w.text});else x.enqueue({type:"reasoning",textDelta:b.reasoning});if(b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const w of b.toolCalls)x.enqueue({type:"tool-call",...w});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),i={...n,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},s=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:a,value:o}=await ps({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Cy(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...c}=n,u=[];let d="unknown",h={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0}},m=!0,y=this.providerOptionsName;return{stream:o.pipeThrough(new TransformStream({transform(b,v){var x,w,S,C,k,A,R,N,I,O,L,P;if(!b.success){d="error",v.enqueue({type:"error",error:b.error});return}const V=b.value;if(s==null||s.processChunk(b.rawValue),"error"in V){d="error",v.enqueue({type:"error",error:V.error.message});return}if(m&&(m=!1,v.enqueue({type:"response-metadata",...xC(V)})),V.usage!=null){const{prompt_tokens:U,completion_tokens:G,prompt_tokens_details:$,completion_tokens_details:ne}=V.usage;h.promptTokens=U??void 0,h.completionTokens=G??void 0,(ne==null?void 0:ne.reasoning_tokens)!=null&&(h.completionTokensDetails.reasoningTokens=ne==null?void 0:ne.reasoning_tokens),(ne==null?void 0:ne.accepted_prediction_tokens)!=null&&(h.completionTokensDetails.acceptedPredictionTokens=ne==null?void 0:ne.accepted_prediction_tokens),(ne==null?void 0:ne.rejected_prediction_tokens)!=null&&(h.completionTokensDetails.rejectedPredictionTokens=ne==null?void 0:ne.rejected_prediction_tokens),($==null?void 0:$.cached_tokens)!=null&&(h.promptTokensDetails.cachedTokens=$==null?void 0:$.cached_tokens)}const F=V.choices[0];if((F==null?void 0:F.finish_reason)!=null&&(d=wC(F.finish_reason)),(F==null?void 0:F.delta)==null)return;const J=F.delta;if(J.reasoning_content!=null&&v.enqueue({type:"reasoning",textDelta:J.reasoning_content}),J.content!=null&&v.enqueue({type:"text-delta",textDelta:J.content}),J.tool_calls!=null)for(const U of J.tool_calls){const G=U.index;if(u[G]==null){if(U.type!=="function")throw new p0({data:U,message:"Expected 'function' type."});if(U.id==null)throw new p0({data:U,message:"Expected 'id' to be a string."});if(((x=U.function)==null?void 0:x.name)==null)throw new p0({data:U,message:"Expected 'function.name' to be a string."});u[G]={id:U.id,type:"function",function:{name:U.function.name,arguments:(w=U.function.arguments)!=null?w:""},hasFinished:!1};const ne=u[G];((S=ne.function)==null?void 0:S.name)!=null&&((C=ne.function)==null?void 0:C.arguments)!=null&&(ne.function.arguments.length>0&&v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ne.id,toolName:ne.function.name,argsTextDelta:ne.function.arguments}),Z2(ne.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=ne.id)!=null?k:go(),toolName:ne.function.name,args:ne.function.arguments}),ne.hasFinished=!0));continue}const $=u[G];$.hasFinished||(((A=U.function)==null?void 0:A.arguments)!=null&&($.function.arguments+=(N=(R=U.function)==null?void 0:R.arguments)!=null?N:""),v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:$.id,toolName:$.function.name,argsTextDelta:(I=U.function.arguments)!=null?I:""}),((O=$.function)==null?void 0:O.name)!=null&&((L=$.function)==null?void 0:L.arguments)!=null&&Z2($.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(P=$.id)!=null?P:go(),toolName:$.function.name,args:$.function.arguments}),$.hasFinished=!0))}},flush(b){var v,x;const w={[y]:{},...s==null?void 0:s.buildMetadata()};h.completionTokensDetails.reasoningTokens!=null&&(w[y].reasoningTokens=h.completionTokensDetails.reasoningTokens),h.completionTokensDetails.acceptedPredictionTokens!=null&&(w[y].acceptedPredictionTokens=h.completionTokensDetails.acceptedPredictionTokens),h.completionTokensDetails.rejectedPredictionTokens!=null&&(w[y].rejectedPredictionTokens=h.completionTokensDetails.rejectedPredictionTokens),h.promptTokensDetails.cachedTokens!=null&&(w[y].cachedPromptTokens=h.promptTokensDetails.cachedTokens),b.enqueue({type:"finish",finishReason:d,usage:{promptTokens:(v=h.promptTokens)!=null?v:NaN,completionTokens:(x=h.completionTokens)!=null?x:NaN},providerMetadata:w})}})),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:a},warnings:r,request:{body:JSON.stringify(i)}}}},cK=Je({prompt_tokens:Nt().nullish(),completion_tokens:Nt().nullish(),prompt_tokens_details:Je({cached_tokens:Nt().nullish()}).nullish(),completion_tokens_details:Je({reasoning_tokens:Nt().nullish(),accepted_prediction_tokens:Nt().nullish(),rejected_prediction_tokens:Nt().nullish()}).nullish()}).nullish(),Vxe=Je({id:Ue().nullish(),created:Nt().nullish(),model:Ue().nullish(),choices:cn(Je({message:Je({role:Dn("assistant").nullish(),content:Ue().nullish(),reasoning_content:Ue().nullish(),tool_calls:cn(Je({id:Ue().nullish(),type:Dn("function"),function:Je({name:Ue(),arguments:Ue()})})).nullish()}),finish_reason:Ue().nullish()})),usage:cK}),Wxe=e=>Ni([Je({id:Ue().nullish(),created:Nt().nullish(),model:Ue().nullish(),choices:cn(Je({delta:Je({role:cl(["assistant"]).nullish(),content:Ue().nullish(),reasoning_content:Ue().nullish(),tool_calls:cn(Je({index:Nt(),id:Ue().nullish(),type:Dn("function").nullish(),function:Je({name:Ue().nullish(),arguments:Ue().nullish()})})).nullish()}).nullish(),finish_reason:Ue().nullish()})),usage:cK}),e]);function Hxe({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let i="";e[0].role==="system"&&(i+=`${e[0].content}

`,e=e.slice(1));for(const{role:s,content:a}of e)switch(s){case"system":throw new nu({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new ei({functionality:"images"})}}).join("");i+=`${n}:
${o}

`;break}case"assistant":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new ei({functionality:"tool-call messages"})}}).join("");i+=`${r}:
${o}

`;break}case"tool":throw new ei({functionality:"tool messages"});default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return i+=`${r}:
`,{prompt:i,stopSequences:[`
${n}:`]}}var Gxe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:gE;this.chunkSchema=Yxe(i.errorSchema),this.failedResponseHandler=ym(i)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:i,topP:s,topK:a,frequencyPenalty:o,presencePenalty:l,stopSequences:c,responseFormat:u,seed:d,providerMetadata:h}){var m;const y=e.type,b=[];a!=null&&b.push({type:"unsupported-setting",setting:"topK"}),u!=null&&u.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:v,stopSequences:x}=Hxe({prompt:n,inputFormat:t}),w=[...x??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:i,top_p:s,frequency_penalty:o,presence_penalty:l,seed:d,...h==null?void 0:h[this.providerOptionsName],prompt:v,stop:w.length>0?w:void 0};switch(y){case"regular":{if((m=e.tools)!=null&&m.length)throw new ei({functionality:"tools"});if(e.toolChoice)throw new ei({functionality:"toolChoice"});return{args:S,warnings:b}}case"object-json":throw new ei({functionality:"object-json mode"});case"object-tool":throw new ei({functionality:"object-tool mode"});default:{const C=y;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,i;const{args:s,warnings:a}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:c}=await ps({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:s,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Mo(Kxe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:u,...d}=s,h=l.choices[0];return{text:h.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(i=(r=l.usage)==null?void 0:r.completion_tokens)!=null?i:NaN},finishReason:wC(h.finish_reason),rawCall:{rawPrompt:u,rawSettings:d},rawResponse:{headers:o,body:c},response:xC(l),warnings:a,request:{body:JSON.stringify(s)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:i,value:s}=await ps({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hs(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Cy(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...o}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u=!0;return{stream:s.pipeThrough(new TransformStream({transform(d,h){if(!d.success){l="error",h.enqueue({type:"error",error:d.error});return}const m=d.value;if("error"in m){l="error",h.enqueue({type:"error",error:m.error});return}u&&(u=!1,h.enqueue({type:"response-metadata",...xC(m)})),m.usage!=null&&(c={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const y=m.choices[0];(y==null?void 0:y.finish_reason)!=null&&(l=wC(y.finish_reason)),(y==null?void 0:y.text)!=null&&h.enqueue({type:"text-delta",textDelta:y.text})},flush(d){d.enqueue({type:"finish",finishReason:l,usage:c})}})),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:i},warnings:n,request:{body:JSON.stringify(r)}}}},Kxe=Je({id:Ue().nullish(),created:Nt().nullish(),model:Ue().nullish(),choices:cn(Je({text:Ue(),finish_reason:Ue()})),usage:Je({prompt_tokens:Nt(),completion_tokens:Nt()}).nullish()}),Yxe=e=>Ni([Je({id:Ue().nullish(),created:Nt().nullish(),model:Ue().nullish(),choices:cn(Je({text:Ue(),finish_reason:Ue().nullish(),index:Nt()})),usage:Je({prompt_tokens:Nt(),completion_tokens:Nt()}).nullish()}),e]),Zxe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new cE({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:i,value:s}=await ps({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:hs(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:ym((r=this.config.errorStructure)!=null?r:gE),successfulResponseHandler:Mo(Xxe),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.data.map(a=>a.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:i}}}},Xxe=Je({data:cn(Je({embedding:cn(Nt())})),usage:Je({prompt_tokens:Nt()}).nullish()}),Jxe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:i,providerOptions:s,headers:a,abortSignal:o}){var l,c,u,d,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),i!=null&&m.push({type:"unsupported-setting",setting:"seed"});const y=(u=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?u:new Date,{value:b,responseHeaders:v}=await ps({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:hs(this.config.headers(),a),body:{model:this.modelId,prompt:e,n:t,size:n,...(d=s.openai)!=null?d:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:ym((h=this.config.errorStructure)!=null?h:gE),successfulResponseHandler:Mo(Qxe),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:m,response:{timestamp:y,modelId:this.modelId,headers:v}}}},Qxe=Je({data:cn(Je({b64_json:Ue()}))});function ewe(e){const t=hE(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),i=d=>({provider:`${n}.${d}`,url:({path:h})=>{const m=new URL(`${t}${h}`);return e.queryParams&&(m.search=new URLSearchParams(e.queryParams).toString()),m.toString()},headers:r,fetch:e.fetch}),s=(d,h={})=>a(d,h),a=(d,h={})=>new qxe(d,h,{...i("chat"),defaultObjectGenerationMode:"tool"}),o=(d,h={})=>new Gxe(d,h,i("completion")),l=(d,h={})=>new Zxe(d,h,i("embedding")),c=(d,h={})=>new Jxe(d,h,i("image")),u=(d,h)=>s(d,h);return u.languageModel=s,u.chatModel=a,u.completionModel=o,u.textEmbeddingModel=l,u.imageModel=c,u}const rx=(e,t)=>`${e}:${t}`,hc=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},L0=e=>e==="openai"||e==="openrouter"||e==="google",_C=e=>e==="ollama"||e==="openai-compatible",zp=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",yo=[{value:"openrouter",label:"OpenRouter"},{value:"openai",label:"OpenAI"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"},{value:"google",label:"Google Gemini"}],twe={openai:[{id:"gpt-4o",name:"GPT-4o"},{id:"dall-e-3",name:"DALL-E 3"},{id:"dall-e-2",name:"DALL-E 2"},{id:"o3-mini",name:"o3-mini"},{id:"o4-mini",name:"o4-mini"},{id:"o4-mini-high",name:"o4-mini-high"},{id:"o3-mini-high",name:"o3-mini-high"},{id:"o3",name:"o3"},{id:"4.1",name:"4.1"},{id:"4.1-mini",name:"4.1-mini"},{id:"4.1-nano",name:"4.1-nano"},{id:"o3-pro",name:"o3-pro"},{id:"codex-mini",name:"codex-mini"}],google:[{id:"gemini-2.5-pro-preview",name:"Gemini 2.5 Pro Preview"},{id:"gemini-2.5-flash-preview-05-20:thinking",name:"Gemini 2.5 Flash Preview (Thinking)"},{id:"gemini-2.5-flash-preview",name:"Gemini 2.5 Flash Preview"},{id:"gemini-2.0-flash-001",name:"Gemini 2.0 Flash"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},uK=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function JO(e,t,n){try{switch(e.type){case"openai":return bG({apiKey:n})(t);case"google":return _G({apiKey:n})(t);case"openrouter":return oK({apiKey:n,extraBody:{include_reasoning:!0}})(t);case"ollama":return lK({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return ewe({baseURL:uK(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function dK(e,t,n){const i=Mr.getState().getAllAvailableModelDefsForProvider(e.id).find(a=>a.id===t);if(!i){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const s=JO(e,t,n);if(!s){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:rx(e.id,t),name:i.name,providerId:e.id,providerName:e.name,instance:s,metadata:i}}const fK={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]},gv=new Map,nwe=5*60*1e3,rwe=(e,t)=>{var s,a,o,l,c,u,d,h,m,y,b,v,x,w;const n=e.id||e.name,r=e.name||n,i={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((s=e.architecture)==null?void 0:s.modality)??"text->text",input_modalities:((a=e.architecture)==null?void 0:a.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((c=e.architecture)==null?void 0:c.instruct_type)??null},pricing:{prompt:((u=e.pricing)==null?void 0:u.prompt)??"0",completion:((d=e.pricing)==null?void 0:d.completion)??"0",request:((h=e.pricing)==null?void 0:h.request)??"0",image:((m=e.pricing)==null?void 0:m.image)??"0",web_search:((y=e.pricing)==null?void 0:y.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((v=e.top_provider)==null?void 0:v.context_length)??e.context_length??null,max_completion_tokens:((x=e.top_provider)==null?void 0:x.max_completion_tokens)??null,is_moderated:((w=e.top_provider)==null?void 0:w.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??fK[t]??[]};return t==="ollama"?(i.context_length=i.context_length??4096,i.top_provider&&(i.top_provider.context_length=i.context_length),i.architecture&&(i.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(i.context_length=8192),n.includes("gpt-4-32k")&&(i.context_length=32768),n.includes("gpt-4-turbo")&&(i.context_length=128e3),n.includes("gpt-4o")&&(i.context_length=128e3),n.includes("gpt-3.5-turbo")&&(i.context_length=16385),i.top_provider&&(i.top_provider.context_length=i.context_length),i.architecture&&(i.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?i.context_length=1048576:n.includes("gemini")&&(i.context_length=32768),i.top_provider&&(i.top_provider.context_length=i.context_length),i.architecture&&(i.architecture.tokenizer="Google")):t==="openai-compatible"&&(i.context_length=i.context_length??4096,i.top_provider&&(i.top_provider.context_length=i.context_length),i.architecture&&(i.architecture.tokenizer="Compatible")),i};async function iwe(e,t){const n=`${e.id}-${e.baseURL||""}`,r=gv.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const i=(async()=>{var o,l,c;let s;const a={Accept:"application/json"};t&&(a.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");s="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");s="https://openrouter.ai/api/v1/models",a["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",a["X-Title"]="LiteChat";break;case"ollama":const u=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";s=new URL("/api/tags",u).toString(),delete a.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const d=uK(e.baseURL);s=new URL("models",d.endsWith("/")?d:d+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(u){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,u),Pe.error(`Invalid Base URL for ${e.name}: ${u instanceof Error?u.message:String(u)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${s}`);try{const u=await fetch(s,{headers:a});if(!u.ok){let y=`(${u.status} ${u.statusText})`;try{const b=await u.text();y=b||y;try{const v=JSON.parse(b);y=((c=v==null?void 0:v.error)==null?void 0:c.message)||(v==null?void 0:v.message)||y}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${y}`)}const d=await u.json();let h=[];if(e.type==="ollama"?h=d.models||[]:h=d.data||d||[],!Array.isArray(h))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,d),[];const m=h.map(y=>rwe(y,e.type));return m.sort((y,b)=>(y.name||y.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${m.length} models for ${e.name}`),m}catch(u){const d=u instanceof Error?u.message:String(u);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,d),Pe.error(`Failed to fetch models for ${e.name}: ${d}`),gv.delete(n),[]}})();return gv.set(n,i),setTimeout(()=>{gv.get(n)===i&&(gv.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},nwe),i}const dr={initialDataLoaded:"provider.initial.data.loaded",configsChanged:"provider.configs.changed",apiKeysChanged:"provider.api.keys.changed",selectedModelChanged:"provider.selected.model.changed",globalModelSortOrderChanged:"provider.global.model.sort.order.changed",fetchStatusChanged:"provider.fetch.status.changed",globallyEnabledModelsUpdated:"provider.globally.enabled.models.updated",selectedModelForDetailsChanged:"provider.selected.model.for.details.changed",enableApiKeyManagementChanged:"provider.enable.api.key.management.changed",loadInitialDataRequest:"provider.load.initial.data.request",selectModelRequest:"provider.select.model.request",addApiKeyRequest:"provider.add.api.key.request",deleteApiKeyRequest:"provider.delete.api.key.request",addProviderConfigRequest:"provider.add.config.request",updateProviderConfigRequest:"provider.update.config.request",deleteProviderConfigRequest:"provider.delete.config.request",fetchModelsRequest:"provider.fetch.models.request",setGlobalModelSortOrderRequest:"provider.set.global.model.sort.order.request",setEnableApiKeyManagementRequest:"provider.set.enable.api.key.management.request",setSelectedModelForDetailsRequest:"provider.set.selected.model.for.details.request"},xN="provider:lastModelSelection",m$="provider:globalModelSortOrder",Mr=al(ol((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,globallyEnabledModelDefinitions:[],_updateGloballyEnabledModelDefinitions:()=>{const{dbProviderConfigs:n,globalModelSortOrder:r}=t(),i=t().getAvailableModelListItems(),s=new Map(i.map(u=>[u.id,u])),a=new Set;n.forEach(u=>{u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{a.add(rx(u.id,d))})});const o=[],l=new Set;r.forEach(u=>{if(a.has(u)){const d=s.get(u);d&&!l.has(u)&&(o.push(d),l.add(u))}});const c=i.filter(u=>a.has(u.id)&&!l.has(u.id)).sort((u,d)=>u.name.localeCompare(d.name));o.push(...c),e({globallyEnabledModelDefinitions:o}),Fe.emit(dr.globallyEnabledModelsUpdated,{models:o})},getGloballyEnabledModelDefinitions:()=>t().globallyEnabledModelDefinitions,createAiModelConfig:(n,r,i)=>{const a=t().getAllAvailableModelDefsForProvider(n.id).find(l=>l.id===r);if(!a){console.warn(`Model definition not found for ${r} in provider ${n.name}`);return}const o=JO(n,r,i);if(!o){console.warn(`Failed to instantiate AI SDK instance for ${r} from provider ${n.name}`);return}return{id:rx(n.id,r),name:a.name,providerId:n.id,providerName:n.name,instance:o,metadata:a}},setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Mt.saveSetting("enableApiKeyManagement",n),Fe.emit(dr.enableApiKeyManagementChanged,{enabled:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Mt.loadSetting("enableApiKeyManagement",!0),[r,i,s,a]=await Promise.all([Mt.loadProviderConfigs(),Mt.loadApiKeys(),Mt.loadSetting(m$,[]),Mt.loadSetting(xN,null)]);e({dbProviderConfigs:r,dbApiKeys:i,enableApiKeyManagement:n,globalModelSortOrder:s}),t()._updateGloballyEnabledModelDefinitions();const o=t().globallyEnabledModelDefinitions.map(d=>d.id),l=new Set(o);let c=a;c&&l.has(c)||(c=o[0]??null),e({selectedModelId:c,isLoading:!1}),await Mt.saveSetting(xN,c),Fe.emit(dr.initialDataLoaded,{configs:r,apiKeys:i,selectedModelId:c,globalSortOrder:t().globalModelSortOrder}),t().selectedModelId!==c?t().selectModel(c):Fe.emit(dr.selectedModelChanged,{modelId:c})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),Pe.error("Failed to load provider data")}},selectModel:n=>{t().selectedModelId!==n&&(e({selectedModelId:n}),Mt.saveSetting(xN,n),Fe.emit(dr.selectedModelChanged,{modelId:n}))},addApiKey:async(n,r,i)=>{const s=Us(),a=new Date,o={id:s,name:n,value:i,providerId:r,createdAt:a,updatedAt:a};try{return await Mt.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),Pe.success(`API Key "${n}" added.`),Fe.emit(dr.apiKeysChanged,{apiKeys:t().dbApiKeys}),s}catch(l){throw console.error("ProviderStore: Error adding API key",l),Pe.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var i;const r=((i=t().dbApiKeys.find(s=>s.id===n))==null?void 0:i.name)??"Unknown Key";try{await Mt.deleteApiKey(n),e(s=>{s.dbApiKeys=s.dbApiKeys.filter(a=>a.id!==n),s.dbProviderConfigs=s.dbProviderConfigs.map(a=>a.apiKeyId===n?{...a,apiKeyId:null}:a)}),Pe.success(`API Key "${r}" deleted.`),Fe.emit(dr.apiKeysChanged,{apiKeys:t().dbApiKeys}),Fe.emit(dr.configsChanged,{providerConfigs:t().dbProviderConfigs})}catch(s){throw console.error("ProviderStore: Error deleting API key",s),Pe.error(`Failed to delete API Key: ${s instanceof Error?s.message:String(s)}`),s}},addProviderConfig:async n=>{const r=Us(),i=new Date,s={id:r,createdAt:i,updatedAt:i,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Mt.saveProviderConfig(s),e(a=>{a.dbProviderConfigs.push(s)}),t()._updateGloballyEnabledModelDefinitions(),Pe.success(`Provider "${n.name}" added.`),Fe.emit(dr.configsChanged,{providerConfigs:t().dbProviderConfigs}),t().fetchModels(r).catch(a=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,a)}),r}catch(a){throw console.error("ProviderStore: Error adding provider config",a),Pe.error(`Failed to add Provider: ${a instanceof Error?a.message:String(a)}`),a}},updateProviderConfig:async(n,r)=>{const i=t().dbProviderConfigs.find(a=>a.id===n);if(!i)return;const s={...i,...r,fetchedModels:r.fetchedModels!==void 0?r.fetchedModels:i.fetchedModels,modelsLastFetchedAt:r.modelsLastFetchedAt!==void 0?r.modelsLastFetchedAt:i.modelsLastFetchedAt,updatedAt:new Date};try{await Mt.saveProviderConfig(s),e(a=>{const o=a.dbProviderConfigs.findIndex(l=>l.id===n);o!==-1&&(a.dbProviderConfigs[o]=s)}),t()._updateGloballyEnabledModelDefinitions(),Fe.emit(dr.configsChanged,{providerConfigs:t().dbProviderConfigs})}catch(a){throw console.error("ProviderStore: Error updating provider config",a),Pe.error(`Failed to update Provider: ${a instanceof Error?a.message:String(a)}`),a}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r)return;const i=r.name;try{await Mt.deleteProviderConfig(n),e(s=>{s.dbProviderConfigs=s.dbProviderConfigs.filter(a=>a.id!==n),delete s.providerFetchStatus[n]}),t()._updateGloballyEnabledModelDefinitions(),Fe.emit(dr.configsChanged,{providerConfigs:t().dbProviderConfigs}),Pe.success(`Provider "${i}" deleted.`)}catch(s){throw console.error("ProviderStore: Error deleting provider config",s),Pe.error(`Failed to delete Provider: ${s instanceof Error?s.message:String(s)}`),s}},fetchModels:async n=>{var i;const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r){Pe.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]!=="fetching"){t()._setProviderFetchStatus(n,"fetching");try{const s=r.apiKeyId,a=(i=t().dbApiKeys.find(l=>l.id===s))==null?void 0:i.value,o=await iwe(r,a);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),Pe.success(`Models fetched successfully for ${r.name}`)}catch(s){console.error(`Error fetching models for ${r.name}:`,s),t()._setProviderFetchStatus(n,"error")}}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Mt.saveSetting(m$,r),t()._updateGloballyEnabledModelDefinitions(),Fe.emit(dr.globalModelSortOrderChanged,{ids:r});const i=t().selectedModelId,s=t().globallyEnabledModelDefinitions.map(o=>o.id),a=new Set(s);if(!i||!a.has(i)){const o=s[0]??null;o!==i&&t().selectModel(o)}},_setProviderFetchStatus:(n,r)=>{e(i=>{i.providerFetchStatus[n]=r}),Fe.emit(dr.fetchStatusChanged,{providerId:n,status:r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n}),Fe.emit(dr.selectedModelForDetailsChanged,{modelId:n})},getSelectedModel:()=>{const{selectedModelId:n}=t();if(!n)return;const{providerId:r,modelId:i}=hc(n);if(!r||!i)return;const s=t().dbProviderConfigs.find(o=>o.id===r);if(!s)return;const a=t().dbApiKeys.find(o=>o.id===s.apiKeyId);return t().createAiModelConfig(s,i,a==null?void 0:a.value)},getApiKeyForProvider:n=>{var i;const r=t().dbProviderConfigs.find(s=>s.id===n);return(i=t().dbApiKeys.find(s=>s.id===(r==null?void 0:r.apiKeyId)))==null?void 0:i.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(a=>a.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const i=r.type;return(twe[i]||[]).map(a=>{let o="text->text",l=["text"],c=["text"];return(a.id.includes("dall-e")||a.id.includes("imagen")||a.id.includes("flux")||a.id.includes("stable-diffusion"))&&(o="text->image",l=["text"],c=["image"]),{id:a.id,name:a.name,context_length:4096,architecture:{modality:o,input_modalities:l,output_modalities:c},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:fK[r.type]??[]}})},getAvailableModelListItems:()=>{const{dbProviderConfigs:n}=t(),r=[];return n.forEach(i=>{t().getAllAvailableModelDefsForProvider(i.id).forEach(a=>{var o,l,c;r.push({id:rx(i.id,a.id),name:a.name,providerId:i.id,providerName:i.name,metadataSummary:{context_length:((o=a.top_provider)==null?void 0:o.context_length)??a.context_length,supported_parameters:a.supported_parameters,input_modalities:(l=a.architecture)==null?void 0:l.input_modalities,output_modalities:(c=a.architecture)==null?void 0:c.output_modalities,pricing:a.pricing,description:a.description}})})}),r},getRegisteredActionHandlers:()=>{const n="providerStore",r=t();return[{eventName:dr.loadInitialDataRequest,handler:r.loadInitialData,storeId:n},{eventName:dr.selectModelRequest,handler:i=>r.selectModel(i.modelId),storeId:n},{eventName:dr.addApiKeyRequest,handler:i=>r.addApiKey(i.name,i.providerId,i.value).then(()=>{}),storeId:n},{eventName:dr.deleteApiKeyRequest,handler:i=>r.deleteApiKey(i.id),storeId:n},{eventName:dr.addProviderConfigRequest,handler:i=>r.addProviderConfig(i).then(()=>{}),storeId:n},{eventName:dr.updateProviderConfigRequest,handler:i=>r.updateProviderConfig(i.id,i.changes),storeId:n},{eventName:dr.deleteProviderConfigRequest,handler:i=>r.deleteProviderConfig(i.id),storeId:n},{eventName:dr.fetchModelsRequest,handler:i=>r.fetchModels(i.providerConfigId),storeId:n},{eventName:dr.setGlobalModelSortOrderRequest,handler:i=>r.setGlobalModelSortOrder(i.ids),storeId:n},{eventName:dr.setEnableApiKeyManagementRequest,handler:i=>r.setEnableApiKeyManagement(i.enabled),storeId:n},{eventName:dr.setSelectedModelForDetailsRequest,handler:i=>r.setSelectedModelForDetails(i.modelId),storeId:n}]}}))),sn={loaded:"settings.loaded",themeChanged:"settings.theme.changed",globalSystemPromptChanged:"settings.global.system.prompt.changed",temperatureChanged:"settings.temperature.changed",maxTokensChanged:"settings.max.tokens.changed",topPChanged:"settings.top.p.changed",topKChanged:"settings.top.k.changed",presencePenaltyChanged:"settings.presence.penalty.changed",frequencyPenaltyChanged:"settings.frequency.penalty.changed",enableAdvancedSettingsChanged:"settings.enable.advanced.settings.changed",enableStreamingMarkdownChanged:"settings.enable.streaming.markdown.changed",enableStreamingCodeBlockParsingChanged:"settings.enable.streaming.code.block.parsing.changed",foldStreamingCodeBlocksChanged:"settings.fold.streaming.code.blocks.changed",foldUserMessagesOnCompletionChanged:"settings.fold.user.messages.on.completion.changed",streamingRenderFpsChanged:"settings.streaming.render.fps.changed",gitUserNameChanged:"settings.git.user.name.changed",gitUserEmailChanged:"settings.git.user.email.changed",toolMaxStepsChanged:"settings.tool.max.steps.changed",prismThemeUrlChanged:"settings.prism.theme.url.changed",autoTitleEnabledChanged:"settings.auto.title.enabled.changed",autoTitleModelIdChanged:"settings.auto.title.model.id.changed",autoTitlePromptMaxLengthChanged:"settings.auto.title.prompt.max.length.changed",autoTitleIncludeFilesChanged:"settings.auto.title.include.files.changed",autoTitleIncludeRulesChanged:"settings.auto.title.include.rules.changed",customFontFamilyChanged:"settings.custom.font.family.changed",customFontSizeChanged:"settings.custom.font.size.changed",chatMaxWidthChanged:"settings.chat.max.width.changed",customThemeColorsChanged:"settings.custom.theme.colors.changed",autoScrollIntervalChanged:"settings.auto.scroll.interval.changed",enableAutoScrollOnStreamChanged:"settings.enable.auto.scroll.on.stream.changed",autoSyncOnStreamCompleteChanged:"settings.auto.sync.on.stream.complete.changed",autoInitializeReposOnStartupChanged:"settings.auto.initialize.repos.on.startup.changed",setThemeRequest:"settings.set.theme.request",setGlobalSystemPromptRequest:"settings.set.global.system.prompt.request",setTemperatureRequest:"settings.set.temperature.request",setMaxTokensRequest:"settings.set.max.tokens.request",setTopPRequest:"settings.set.top.p.request",setTopKRequest:"settings.set.top.k.request",setPresencePenaltyRequest:"settings.set.presence.penalty.request",setFrequencyPenaltyRequest:"settings.set.frequency.penalty.request",setEnableAdvancedSettingsRequest:"settings.set.enable.advanced.settings.request",setEnableStreamingMarkdownRequest:"settings.set.enable.streaming.markdown.request",setEnableStreamingCodeBlockParsingRequest:"settings.set.enable.streaming.code.block.parsing.request",setFoldStreamingCodeBlocksRequest:"settings.set.fold.streaming.code.blocks.request",setFoldUserMessagesOnCompletionRequest:"settings.set.fold.user.messages.on.completion.request",setStreamingRenderFpsRequest:"settings.set.streaming.render.fps.request",setGitUserNameRequest:"settings.set.git.user.name.request",setGitUserEmailRequest:"settings.set.git.user.email.request",setToolMaxStepsRequest:"settings.set.tool.max.steps.request",setPrismThemeUrlRequest:"settings.set.prism.theme.url.request",setAutoTitleEnabledRequest:"settings.set.auto.title.enabled.request",setAutoTitleModelIdRequest:"settings.set.auto.title.model.id.request",setAutoTitlePromptMaxLengthRequest:"settings.set.auto.title.prompt.max.length.request",setAutoTitleIncludeFilesRequest:"settings.set.auto.title.include.files.request",setAutoTitleIncludeRulesRequest:"settings.set.auto.title.include.rules.request",setCustomFontFamilyRequest:"settings.set.custom.font.family.request",setCustomFontSizeRequest:"settings.set.custom.font.size.request",setChatMaxWidthRequest:"settings.set.chat.max.width.request",setCustomThemeColorsRequest:"settings.set.custom.theme.colors.request",setCustomThemeColorRequest:"settings.set.custom.theme.color.request",setAutoScrollIntervalRequest:"settings.set.auto.scroll.interval.request",setEnableAutoScrollOnStreamRequest:"settings.set.enable.auto.scroll.on.stream.request",setAutoSyncOnStreamCompleteRequest:"settings.set.auto.sync.on.stream.complete.request",setAutoInitializeReposOnStartupRequest:"settings.set.auto.initialize.repos.on.startup.request",loadSettingsRequest:"settings.load.settings.request",resetGeneralSettingsRequest:"settings.reset.general.settings.request",resetAssistantSettingsRequest:"settings.reset.assistant.settings.request",resetThemeSettingsRequest:"settings.reset.theme.settings.request"},swe=`You are a helpful AI assistant.

You are knowledgeable, friendly, and always strive to provide accurate and useful information. When you don't know something, you admit it honestly. You communicate clearly and concisely, adapting your tone to be appropriate for the context.

Key principles:
- Be helpful and respectful
- Provide accurate information
- Ask clarifying questions when needed
- Explain complex concepts clearly
- Acknowledge limitations honestly 

When creating gated blocks, if you can infer a filepath for it, you should create it as follow : 
\`\`\`language:relative/path/to/file.ext
The file content would be completely normal
\`\`\`

examples : 
\`\`\`jsx:src/components/button.jsx
export const Button = ({ children, onClick }) => {
  return <button onClick={onClick}>{children}</button>;
};
\`\`\`

\`\`\`markdown:readme.md
---
title: My Project
description: This is a project description
---

# My Project

This is a project description
\`\`\``,wN="system",_N=swe,SN=.7,CN=null,kN=null,EN=null,TN=0,AN=0,g$=!0,RN=!0,NN=!0,MN=!1,IN=!1,jN=15,y$=null,b$=null,ON=5,PN=null,DN=!0,FN=null,LN=768,BN=!1,$N=!1,zN=null,UN=16,qN="max-w-7xl",VN=null,WN=1e3,HN=!0,v$=!1,x$=!1,gr=al(ol((e,t)=>({theme:wN,globalSystemPrompt:_N,temperature:SN,maxTokens:CN,topP:kN,topK:EN,presencePenalty:TN,frequencyPenalty:AN,enableAdvancedSettings:g$,enableStreamingMarkdown:RN,enableStreamingCodeBlockParsing:NN,foldStreamingCodeBlocks:MN,foldUserMessagesOnCompletion:IN,streamingRenderFPS:jN,gitUserName:y$,gitUserEmail:b$,toolMaxSteps:ON,prismThemeUrl:PN,autoTitleEnabled:DN,autoTitleModelId:FN,autoTitlePromptMaxLength:LN,autoTitleIncludeFiles:BN,autoTitleIncludeRules:$N,customFontFamily:zN,customFontSize:UN,chatMaxWidth:qN,customThemeColors:VN,autoScrollInterval:WN,enableAutoScrollOnStream:HN,autoSyncOnStreamComplete:v$,autoInitializeReposOnStartup:x$,setTheme:n=>{e({theme:n}),Mt.saveSetting("theme",n),Fe.emit(sn.themeChanged,{theme:n})},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),Mt.saveSetting("globalSystemPrompt",n),Fe.emit(sn.globalSystemPromptChanged,{prompt:n})},setTemperature:n=>{e({temperature:n}),Mt.saveSetting("temperature",n),Fe.emit(sn.temperatureChanged,{value:n})},setMaxTokens:n=>{e({maxTokens:n}),Mt.saveSetting("maxTokens",n),Fe.emit(sn.maxTokensChanged,{value:n})},setTopP:n=>{e({topP:n}),Mt.saveSetting("topP",n),Fe.emit(sn.topPChanged,{value:n})},setTopK:n=>{e({topK:n}),Mt.saveSetting("topK",n),Fe.emit(sn.topKChanged,{value:n})},setPresencePenalty:n=>{e({presencePenalty:n}),Mt.saveSetting("presencePenalty",n),Fe.emit(sn.presencePenaltyChanged,{value:n})},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),Mt.saveSetting("frequencyPenalty",n),Fe.emit(sn.frequencyPenaltyChanged,{value:n})},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),Mt.saveSetting("enableAdvancedSettings",n),Fe.emit(sn.enableAdvancedSettingsChanged,{enabled:n})},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),Mt.saveSetting("enableStreamingMarkdown",n),Fe.emit(sn.enableStreamingMarkdownChanged,{enabled:n})},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),Mt.saveSetting("enableStreamingCodeBlockParsing",n),Fe.emit(sn.enableStreamingCodeBlockParsingChanged,{enabled:n})},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),Mt.saveSetting("foldStreamingCodeBlocks",n),Fe.emit(sn.foldStreamingCodeBlocksChanged,{fold:n})},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),Mt.saveSetting("foldUserMessagesOnCompletion",n),Fe.emit(sn.foldUserMessagesOnCompletionChanged,{fold:n})},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),Mt.saveSetting("streamingRenderFPS",r),Fe.emit(sn.streamingRenderFpsChanged,{fps:r})},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),Mt.saveSetting("gitUserName",r),Fe.emit(sn.gitUserNameChanged,{name:r})},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),Mt.saveSetting("gitUserEmail",r),Fe.emit(sn.gitUserEmailChanged,{email:r})},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),Mt.saveSetting("toolMaxSteps",r),Fe.emit(sn.toolMaxStepsChanged,{steps:r})},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),Mt.saveSetting("prismThemeUrl",r),Fe.emit(sn.prismThemeUrlChanged,{url:r})},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),Mt.saveSetting("autoTitleEnabled",n),Fe.emit(sn.autoTitleEnabledChanged,{enabled:n})},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),Mt.saveSetting("autoTitleModelId",n),Fe.emit(sn.autoTitleModelIdChanged,{modelId:n})},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),Mt.saveSetting("autoTitlePromptMaxLength",r),Fe.emit(sn.autoTitlePromptMaxLengthChanged,{length:r})},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),Mt.saveSetting("autoTitleIncludeFiles",n),Fe.emit(sn.autoTitleIncludeFilesChanged,{include:n})},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),Mt.saveSetting("autoTitleIncludeRules",n),Fe.emit(sn.autoTitleIncludeRulesChanged,{include:n})},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),Mt.saveSetting("customFontFamily",r),Fe.emit(sn.customFontFamilyChanged,{fontFamily:r})},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),Mt.saveSetting("customFontSize",r),Fe.emit(sn.customFontSizeChanged,{fontSize:r})},setChatMaxWidth:n=>{e({chatMaxWidth:n}),Mt.saveSetting("chatMaxWidth",n),Fe.emit(sn.chatMaxWidthChanged,{maxWidth:n})},setCustomThemeColors:n=>{e({customThemeColors:n}),Mt.saveSetting("customThemeColors",n),Fe.emit(sn.customThemeColorsChanged,{colors:n})},setCustomThemeColor:(n,r)=>{e(s=>{const o={...s.customThemeColors??{}};r===null||r.trim()===""?delete o[n]:o[n]=r.trim(),s.customThemeColors=Object.keys(o).length>0?o:null});const i=t().customThemeColors;Mt.saveSetting("customThemeColors",i),Fe.emit(sn.customThemeColorsChanged,{colors:i})},setAutoScrollInterval:n=>{const r=Math.max(50,n);e({autoScrollInterval:r}),Mt.saveSetting("autoScrollInterval",r),Fe.emit(sn.autoScrollIntervalChanged,{interval:r})},setEnableAutoScrollOnStream:n=>{e({enableAutoScrollOnStream:n}),Mt.saveSetting("enableAutoScrollOnStream",n),Fe.emit(sn.enableAutoScrollOnStreamChanged,{enabled:n})},setAutoSyncOnStreamComplete:n=>{e({autoSyncOnStreamComplete:n}),Mt.saveSetting("autoSyncOnStreamComplete",n),Fe.emit(sn.autoSyncOnStreamCompleteChanged,{enabled:n})},setAutoInitializeReposOnStartup:n=>{e({autoInitializeReposOnStartup:n}),Mt.saveSetting("autoInitializeReposOnStartup",n),Fe.emit(sn.autoInitializeReposOnStartupChanged,{enabled:n})},loadSettings:async()=>{try{const[n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,w,S,C,k,A,R,N,I,O,L,P,V,F,J,U]=await Promise.all([Mt.loadSetting("theme",wN),Mt.loadSetting("temperature",SN),Mt.loadSetting("maxTokens",CN),Mt.loadSetting("topP",kN),Mt.loadSetting("topK",EN),Mt.loadSetting("presencePenalty",TN),Mt.loadSetting("frequencyPenalty",AN),Mt.loadSetting("globalSystemPrompt",_N),Mt.loadSetting("enableAdvancedSettings",g$),Mt.loadSetting("enableStreamingMarkdown",RN),Mt.loadSetting("enableStreamingCodeBlockParsing",NN),Mt.loadSetting("foldStreamingCodeBlocks",MN),Mt.loadSetting("foldUserMessagesOnCompletion",IN),Mt.loadSetting("streamingRenderFPS",jN),Mt.loadSetting("gitUserName",y$),Mt.loadSetting("gitUserEmail",b$),Mt.loadSetting("toolMaxSteps",ON),Mt.loadSetting("prismThemeUrl",PN),Mt.loadSetting("autoTitleEnabled",DN),Mt.loadSetting("autoTitleModelId",FN),Mt.loadSetting("autoTitlePromptMaxLength",LN),Mt.loadSetting("autoTitleIncludeFiles",BN),Mt.loadSetting("autoTitleIncludeRules",$N),Mt.loadSetting("customFontFamily",zN),Mt.loadSetting("customFontSize",UN),Mt.loadSetting("chatMaxWidth",qN),Mt.loadSetting("customThemeColors",VN),Mt.loadSetting("autoScrollInterval",WN),Mt.loadSetting("enableAutoScrollOnStream",HN),Mt.loadSetting("autoSyncOnStreamComplete",v$),Mt.loadSetting("autoInitializeReposOnStartup",x$)]),G={theme:n,temperature:r,maxTokens:i,topP:s,topK:a,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:c,enableAdvancedSettings:u,enableStreamingMarkdown:d,enableStreamingCodeBlockParsing:h,foldStreamingCodeBlocks:m,foldUserMessagesOnCompletion:y,streamingRenderFPS:b,gitUserName:v,gitUserEmail:x,toolMaxSteps:w,prismThemeUrl:S,autoTitleEnabled:C,autoTitleModelId:k,autoTitlePromptMaxLength:A,autoTitleIncludeFiles:R,autoTitleIncludeRules:N,customFontFamily:I,customFontSize:O,chatMaxWidth:L,customThemeColors:P,autoScrollInterval:V,enableAutoScrollOnStream:F,autoSyncOnStreamComplete:J,autoInitializeReposOnStartup:U};e(G),Fe.emit(sn.loaded,{settings:G})}catch(n){console.error("SettingsStore: Error loading settings",n),Fe.emit(sn.loaded,{settings:t()})}},resetGeneralSettings:async()=>{try{t().setEnableStreamingMarkdown(RN),t().setEnableStreamingCodeBlockParsing(NN),t().setFoldStreamingCodeBlocks(MN),t().setFoldUserMessagesOnCompletion(IN),t().setStreamingRenderFPS(jN),t().setAutoScrollInterval(WN),t().setEnableAutoScrollOnStream(HN),Pe.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),Pe.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{t().setGlobalSystemPrompt(_N),t().setTemperature(SN),t().setMaxTokens(CN),t().setTopP(kN),t().setTopK(EN),t().setPresencePenalty(TN),t().setFrequencyPenalty(AN),t().setToolMaxSteps(ON),t().setAutoTitleEnabled(DN),t().setAutoTitleModelId(FN),t().setAutoTitlePromptMaxLength(LN),t().setAutoTitleIncludeFiles(BN),t().setAutoTitleIncludeRules($N),Pe.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),Pe.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{t().setTheme(wN),t().setPrismThemeUrl(PN),t().setCustomFontFamily(zN),t().setCustomFontSize(UN),t().setChatMaxWidth(qN),t().setCustomThemeColors(VN),Pe.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),Pe.error("Failed to reset theme settings.")}},getRegisteredActionHandlers:()=>{const n="settingsStore",r=t();return[{eventName:sn.setThemeRequest,handler:i=>r.setTheme(i.theme),storeId:n},{eventName:sn.setGlobalSystemPromptRequest,handler:i=>r.setGlobalSystemPrompt(i.prompt),storeId:n},{eventName:sn.setTemperatureRequest,handler:i=>r.setTemperature(i.value),storeId:n},{eventName:sn.setMaxTokensRequest,handler:i=>r.setMaxTokens(i.value),storeId:n},{eventName:sn.setTopPRequest,handler:i=>r.setTopP(i.value),storeId:n},{eventName:sn.setTopKRequest,handler:i=>r.setTopK(i.value),storeId:n},{eventName:sn.setPresencePenaltyRequest,handler:i=>r.setPresencePenalty(i.value),storeId:n},{eventName:sn.setFrequencyPenaltyRequest,handler:i=>r.setFrequencyPenalty(i.value),storeId:n},{eventName:sn.setEnableAdvancedSettingsRequest,handler:i=>r.setEnableAdvancedSettings(i.enabled),storeId:n},{eventName:sn.setEnableStreamingMarkdownRequest,handler:i=>r.setEnableStreamingMarkdown(i.enabled),storeId:n},{eventName:sn.setEnableStreamingCodeBlockParsingRequest,handler:i=>r.setEnableStreamingCodeBlockParsing(i.enabled),storeId:n},{eventName:sn.setFoldStreamingCodeBlocksRequest,handler:i=>r.setFoldStreamingCodeBlocks(i.fold),storeId:n},{eventName:sn.setFoldUserMessagesOnCompletionRequest,handler:i=>r.setFoldUserMessagesOnCompletion(i.fold),storeId:n},{eventName:sn.setStreamingRenderFpsRequest,handler:i=>r.setStreamingRenderFPS(i.fps),storeId:n},{eventName:sn.setGitUserNameRequest,handler:i=>r.setGitUserName(i.name),storeId:n},{eventName:sn.setGitUserEmailRequest,handler:i=>r.setGitUserEmail(i.email),storeId:n},{eventName:sn.setToolMaxStepsRequest,handler:i=>r.setToolMaxSteps(i.steps),storeId:n},{eventName:sn.setPrismThemeUrlRequest,handler:i=>r.setPrismThemeUrl(i.url),storeId:n},{eventName:sn.setAutoTitleEnabledRequest,handler:i=>r.setAutoTitleEnabled(i.enabled),storeId:n},{eventName:sn.setAutoTitleModelIdRequest,handler:i=>r.setAutoTitleModelId(i.modelId),storeId:n},{eventName:sn.setAutoTitlePromptMaxLengthRequest,handler:i=>r.setAutoTitlePromptMaxLength(i.length),storeId:n},{eventName:sn.setAutoTitleIncludeFilesRequest,handler:i=>r.setAutoTitleIncludeFiles(i.include),storeId:n},{eventName:sn.setAutoTitleIncludeRulesRequest,handler:i=>r.setAutoTitleIncludeRules(i.include),storeId:n},{eventName:sn.setCustomFontFamilyRequest,handler:i=>r.setCustomFontFamily(i.fontFamily),storeId:n},{eventName:sn.setCustomFontSizeRequest,handler:i=>r.setCustomFontSize(i.fontSize),storeId:n},{eventName:sn.setChatMaxWidthRequest,handler:i=>r.setChatMaxWidth(i.maxWidth),storeId:n},{eventName:sn.setCustomThemeColorsRequest,handler:i=>r.setCustomThemeColors(i.colors),storeId:n},{eventName:sn.setCustomThemeColorRequest,handler:i=>r.setCustomThemeColor(i.colorKey,i.value),storeId:n},{eventName:sn.setAutoScrollIntervalRequest,handler:i=>r.setAutoScrollInterval(i.interval),storeId:n},{eventName:sn.setEnableAutoScrollOnStreamRequest,handler:i=>r.setEnableAutoScrollOnStream(i.enabled),storeId:n},{eventName:sn.setAutoSyncOnStreamCompleteRequest,handler:i=>r.setAutoSyncOnStreamComplete(i.enabled),storeId:n},{eventName:sn.setAutoInitializeReposOnStartupRequest,handler:i=>r.setAutoInitializeReposOnStartup(i.enabled),storeId:n},{eventName:sn.loadSettingsRequest,handler:()=>r.loadSettings(),storeId:n},{eventName:sn.resetGeneralSettingsRequest,handler:()=>r.resetGeneralSettings(),storeId:n},{eventName:sn.resetAssistantSettingsRequest,handler:()=>r.resetAssistantSettings(),storeId:n},{eventName:sn.resetThemeSettingsRequest,handler:()=>r.resetThemeSettings(),storeId:n}]}})));async function SC(e,t){const n=ll.getState().getMiddlewareForHook,r=n(e);let i=t;for(const s of r)try{const a=await s.callback(i);if(a===!1)return console.log(`Middleware ${s.modId} cancelled action for hook ${e}`),!1;a&&typeof a=="object"&&(i=a)}catch(a){return console.error(`Middleware error in mod ${s.modId} for hook ${e}:`,a),!1}return i}function awe(){const e=Ln.getState(),t=Mr.getState(),n=gr.getState(),{providerId:r}=hc(t.selectedModelId),i={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme,gitUserName:n.gitUserName,gitUserEmail:n.gitUserEmail};return Object.freeze(i)}function owe(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function w$(e){try{const t=e.type||"application/octet-stream",n=Nx(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:owe(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),Pe.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function mj(e){return e.flatMap(t=>{var i,s,a;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(i=r.metadata)!=null&&i.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(s=t.metadata)!=null&&s.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const c=JSON.parse(l);c&&c.type==="tool-call"&&c.toolCallId&&c.toolName&&c.args!==void 0?o.push(c):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(c){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,c)}}),o.length>0&&n.push({role:"assistant",content:o})}if((a=t.metadata)!=null&&a.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const c=JSON.parse(l);c&&c.type==="tool-result"&&c.toolCallId&&c.toolName&&c.result!==void 0?o.push(c):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(c){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,c)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const _$=e=>Symbol.iterator in e,S$=e=>"entries"in e,C$=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[i,s]of n)if(!Object.is(s,r.get(i)))return!1;return!0},lwe=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let i=n.next(),s=r.next();for(;!i.done&&!s.done;){if(!Object.is(i.value,s.value))return!1;i=n.next(),s=r.next()}return!!i.done&&!!s.done};function cwe(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!_$(e)||!_$(t)?C$({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):S$(e)&&S$(t)?C$(e,t):lwe(e,t)}function Sn(e){const t=Ve.useRef(void 0);return n=>{const r=e(n);return cwe(t.current,r)?t.current:t.current=r}}var B0=(e=>(e.PROMPT_TURN_FINALIZE="middleware.prompt.turnFinalize",e.INTERACTION_BEFORE_START="middleware.interaction.beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware.interaction.processChunk",e))(B0||{});const Pn={initialized:"prompt.state.initialized",parameterChanged:"prompt.state.parameter.changed",transientParametersReset:"prompt.state.transient.parameters.reset",inputTextStateChanged:"prompt.state.input.text.changed",submitted:"prompt.state.submitted",setModelIdRequest:"prompt.state.set.model.id.request",setTemperatureRequest:"prompt.state.set.temperature.request",setMaxTokensRequest:"prompt.state.set.max.tokens.request",setTopPRequest:"prompt.state.set.top.p.request",setTopKRequest:"prompt.state.set.top.k.request",setPresencePenaltyRequest:"prompt.state.set.presence.penalty.request",setFrequencyPenaltyRequest:"prompt.state.set.frequency.penalty.request",setReasoningEnabledRequest:"prompt.state.set.reasoning.enabled.request",setWebSearchEnabledRequest:"prompt.state.set.web.search.enabled.request",setImageGenerationEnabledRequest:"prompt.state.set.image.generation.enabled.request",setStructuredOutputJsonRequest:"prompt.state.set.structured.output.json.request",initializePromptStateRequest:"prompt.state.initialize.prompt.state.request",resetTransientParametersRequest:"prompt.state.reset.transient.parameters.request",setInputTextRequest:"prompt.input.set.text.request",inputChanged:"prompt.inputChanged"},ec=(e,t)=>{Fe.emit(Pn.parameterChanged,{params:{[e]:t}})},To=al(ol((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,imageGenerationEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),ec("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),ec("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),ec("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),ec("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),ec("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),ec("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),ec("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),ec("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),ec("webSearchEnabled",n))},setImageGenerationEnabled:n=>{t().imageGenerationEnabled!==n&&(e({imageGenerationEnabled:n}),ec("imageGenerationEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),ec("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),i={};let s=!1;r.modelId!==n.modelId&&(i.modelId=n.modelId,s=!0),r.temperature!==n.temperature&&(i.temperature=n.temperature,s=!0),r.maxTokens!==n.maxTokens&&(i.maxTokens=n.maxTokens,s=!0),r.topP!==n.topP&&(i.topP=n.topP,s=!0),r.topK!==n.topK&&(i.topK=n.topK,s=!0),r.presencePenalty!==n.presencePenalty&&(i.presencePenalty=n.presencePenalty,s=!0),r.frequencyPenalty!==n.frequencyPenalty&&(i.frequencyPenalty=n.frequencyPenalty,s=!0),s&&(e(i),Fe.emit(Pn.parameterChanged,{params:i})),Fe.emit(Pn.initialized,{state:{...t()}})},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let i=!1;n.temperature!==null&&(r.temperature=null,i=!0),n.maxTokens!==null&&(r.maxTokens=null,i=!0),n.topP!==null&&(r.topP=null,i=!0),n.topK!==null&&(r.topK=null,i=!0),n.presencePenalty!==null&&(r.presencePenalty=null,i=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,i=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,i=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,i=!0),n.imageGenerationEnabled!==null&&(r.imageGenerationEnabled=null,i=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,i=!0),i&&(e(r),Fe.emit(Pn.parameterChanged,{params:r})),Fe.emit(Pn.transientParametersReset,void 0)},getRegisteredActionHandlers:()=>{const n="promptStateStore",r=t();return[{eventName:Pn.setModelIdRequest,handler:i=>r.setModelId(i.id),storeId:n},{eventName:Pn.setTemperatureRequest,handler:i=>r.setTemperature(i.value),storeId:n},{eventName:Pn.setMaxTokensRequest,handler:i=>r.setMaxTokens(i.value),storeId:n},{eventName:Pn.setTopPRequest,handler:i=>r.setTopP(i.value),storeId:n},{eventName:Pn.setTopKRequest,handler:i=>r.setTopK(i.value),storeId:n},{eventName:Pn.setPresencePenaltyRequest,handler:i=>r.setPresencePenalty(i.value),storeId:n},{eventName:Pn.setFrequencyPenaltyRequest,handler:i=>r.setFrequencyPenalty(i.value),storeId:n},{eventName:Pn.setReasoningEnabledRequest,handler:i=>r.setReasoningEnabled(i.enabled),storeId:n},{eventName:Pn.setWebSearchEnabledRequest,handler:i=>r.setWebSearchEnabled(i.enabled),storeId:n},{eventName:Pn.setImageGenerationEnabledRequest,handler:i=>r.setImageGenerationEnabled(i.enabled),storeId:n},{eventName:Pn.setStructuredOutputJsonRequest,handler:i=>r.setStructuredOutputJson(i.json),storeId:n},{eventName:Pn.initializePromptStateRequest,handler:i=>r.initializePromptState(i.effectiveSettings),storeId:n},{eventName:Pn.resetTransientParametersRequest,handler:()=>r.resetTransientParameters(),storeId:n}]}}))),uwe=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:i,selectedItemId:s,selectedItemType:a})=>{const[o,l]=T.useState(!1),[c,u]=T.useState(!1),d=ll(Sn(k=>k.promptControls)),h=Ln(Sn(k=>k.status==="streaming")),{attachedFilesMetadata:m,clearAttachedFiles:y}=rh(Sn(k=>({attachedFilesMetadata:k.attachedFilesMetadata,clearAttachedFiles:k.clearAttachedFiles}))),b=To(k=>k.modelId);T.useEffect(()=>{a==="conversation"&&s&&requestAnimationFrame(()=>{var k;(k=i.current)==null||k.focus()})},[s,a,i]);const v=T.useMemo(()=>Object.values(d),[d]),x=T.useMemo(()=>v.filter(k=>k.renderer),[v]),w=T.useMemo(()=>v.filter(k=>k.triggerRenderer),[v]),S=T.useCallback(async()=>{var N,I;const A=(((N=i==null?void 0:i.current)==null?void 0:N.getValue())??"").trim(),R=rh.getState().attachedFilesMetadata;if(!(!A&&R.length===0)&&!(h||o)){l(!0);try{let O={},L={};for(const U of v){if(U.getParameters){const G=await U.getParameters();G&&(O={...O,...G})}if(U.getMetadata){const G=await U.getMetadata();G&&(L={...L,...G})}}R.length>0&&(L.attachedFiles=[...R]),!L.modelId&&b&&(L.modelId=b);const P=v.find(U=>U.id==="core-rules-tags");if(P&&L.activeRuleIds&&L.activeTagIds){const U=[],G=new Set(L.activeRuleIds);L.activeTagIds.forEach($=>{P.getRulesForTag($).forEach(ne=>G.add(ne.id))}),G.forEach($=>{const ne=P.getRuleById($);ne&&U.push({type:ne.type,content:ne.content,sourceRuleId:ne.id})}),L.effectiveRulesContent=U}let V={id:Us(),content:A,parameters:O,metadata:L};Fe.emit(Pn.submitted,{turnData:V});const F=await SC(B0.PROMPT_TURN_FINALIZE,{turnData:V});if(F===!1){console.log("Prompt submission cancelled by middleware."),l(!1);return}const J=F&&typeof F=="object"?F.turnData:V;await t(J),y(),v.forEach(U=>{U.clearOnSubmit&&U.clearOnSubmit()}),(I=i.current)==null||I.clearValue(),u(!1)}catch(O){console.error("Error during prompt submission:",O),Pe.error(`Failed to send message: ${O instanceof Error?O.message:String(O)}`)}finally{l(!1)}}},[i,h,o,v,t,y,b]),C=T.useCallback(k=>{u(k.trim().length>0)},[]);return p.jsxs("div",{className:Ye("p-2 md:p-4 space-y-2 md:space-y-3",n),children:[x.length>0&&p.jsx(TB,{controls:x,area:"panel",className:"flex flex-wrap gap-1 md:gap-2 items-start mb-1 md:mb-2"}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsx(e,{ref:i,onSubmit:S,disabled:h||o,placeholder:r,onValueChange:C,className:"flex-grow"}),p.jsx(St,{type:"button",size:"icon",onClick:S,disabled:h||o||!c&&m.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:o?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(qge,{className:"h-4 w-4"})})]})," ",p.jsx(TB,{controls:w,area:"trigger",className:"flex items-center gap-1 flex-wrap flex-shrink-0 mt-1 md:mt-2"})]})};function Wt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function dwe(e,t){const n=T.createContext(t),r=s=>{const{children:a,...o}=s,l=T.useMemo(()=>o,Object.values(o));return p.jsx(n.Provider,{value:l,children:a})};r.displayName=e+"Provider";function i(s){const a=T.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,i]}function Vs(e,t=[]){let n=[];function r(s,a){const o=T.createContext(a),l=n.length;n=[...n,a];const c=d=>{var x;const{scope:h,children:m,...y}=d,b=((x=h==null?void 0:h[e])==null?void 0:x[l])||o,v=T.useMemo(()=>y,Object.values(y));return p.jsx(b.Provider,{value:v,children:m})};c.displayName=s+"Provider";function u(d,h){var b;const m=((b=h==null?void 0:h[e])==null?void 0:b[l])||o,y=T.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(a=>T.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[r,fwe(i,...t)]}function fwe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function hwe(e){const t=pwe(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(gwe);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function pwe(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=bwe(i),o=ywe(s,i.props);return i.type!==T.Fragment&&(o.ref=r?el(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var mwe=Symbol("radix.slottable");function gwe(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===mwe}function ywe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function bwe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var vwe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],sr=vwe.reduce((e,t)=>{const n=hwe(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function hK(e,t){e&&Zo.flushSync(()=>e.dispatchEvent(t))}function _i(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function QO(e,t=globalThis==null?void 0:globalThis.document){const n=_i(e);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var xwe="DismissableLayer",gj="dismissableLayer.update",wwe="dismissableLayer.pointerDownOutside",_we="dismissableLayer.focusOutside",k$,pK=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yE=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=T.useContext(pK),[u,d]=T.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=T.useState({}),y=Tn(t,R=>d(R)),b=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(v),w=u?b.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,C=w>=x,k=kwe(R=>{const N=R.target,I=[...c.branches].some(O=>O.contains(N));!C||I||(i==null||i(R),a==null||a(R),R.defaultPrevented||o==null||o())},h),A=Ewe(R=>{const N=R.target;[...c.branches].some(O=>O.contains(N))||(s==null||s(R),a==null||a(R),R.defaultPrevented||o==null||o())},h);return QO(R=>{w===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},h),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(k$=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),E$(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=k$)}},[u,h,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),E$())},[u,c]),T.useEffect(()=>{const R=()=>m({});return document.addEventListener(gj,R),()=>document.removeEventListener(gj,R)},[]),p.jsx(sr.div,{...l,ref:y,style:{pointerEvents:S?C?"auto":"none":void 0,...e.style},onFocusCapture:Wt(e.onFocusCapture,A.onFocusCapture),onBlurCapture:Wt(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Wt(e.onPointerDownCapture,k.onPointerDownCapture)})});yE.displayName=xwe;var Swe="DismissableLayerBranch",Cwe=T.forwardRef((e,t)=>{const n=T.useContext(pK),r=T.useRef(null),i=Tn(t,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(sr.div,{...e,ref:i})});Cwe.displayName=Swe;function kwe(e,t=globalThis==null?void 0:globalThis.document){const n=_i(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let l=function(){mK(wwe,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Ewe(e,t=globalThis==null?void 0:globalThis.document){const n=_i(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&mK(_we,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function E$(){const e=new CustomEvent(gj);document.dispatchEvent(e)}function mK(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?hK(i,s):i.dispatchEvent(s)}var Ji=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},Twe=HW[" useId ".trim().toString()]||(()=>{}),Awe=0;function na(e){const[t,n]=T.useState(Twe());return Ji(()=>{n(r=>r??String(Awe++))},[e]),t?`radix-${t}`:""}const Rwe=["top","right","bottom","left"],oh=Math.min,Yo=Math.max,CC=Math.round,hS=Math.floor,mu=e=>({x:e,y:e}),Nwe={left:"right",right:"left",bottom:"top",top:"bottom"},Mwe={start:"end",end:"start"};function yj(e,t,n){return Yo(e,oh(t,n))}function Od(e,t){return typeof e=="function"?e(t):e}function Pd(e){return e.split("-")[0]}function Ey(e){return e.split("-")[1]}function eP(e){return e==="x"?"y":"x"}function tP(e){return e==="y"?"height":"width"}function lh(e){return["top","bottom"].includes(Pd(e))?"y":"x"}function nP(e){return eP(lh(e))}function Iwe(e,t,n){n===void 0&&(n=!1);const r=Ey(e),i=nP(e),s=tP(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=kC(a)),[a,kC(a)]}function jwe(e){const t=kC(e);return[bj(e),t,bj(t)]}function bj(e){return e.replace(/start|end/g,t=>Mwe[t])}function Owe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:a;default:return[]}}function Pwe(e,t,n,r){const i=Ey(e);let s=Owe(Pd(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(bj)))),s}function kC(e){return e.replace(/left|right|bottom|top/g,t=>Nwe[t])}function Dwe(e){return{top:0,right:0,bottom:0,left:0,...e}}function gK(e){return typeof e!="number"?Dwe(e):{top:e,right:e,bottom:e,left:e}}function EC(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function T$(e,t,n){let{reference:r,floating:i}=e;const s=lh(t),a=nP(t),o=tP(a),l=Pd(t),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(Ey(t)){case"start":m[a]-=h*(n&&c?-1:1);break;case"end":m[a]+=h*(n&&c?-1:1);break}return m}const Fwe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=T$(c,r,l),h=r,m={},y=0;for(let b=0;b<o.length;b++){const{name:v,fn:x}=o[b],{x:w,y:S,data:C,reset:k}=await x({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:m,rects:c,platform:a,elements:{reference:e,floating:t}});u=w??u,d=S??d,m={...m,[v]:{...m[v],...C}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(c=k.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):k.rects),{x:u,y:d}=T$(c,h,l)),b=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:m}};async function Ox(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=Od(t,e),y=gK(m),v=o[h?d==="floating"?"reference":"floating":d],x=EC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),C=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},k=EC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:w,offsetParent:S,strategy:l}):w);return{top:(x.top-k.top+y.top)/C.y,bottom:(k.bottom-x.bottom+y.bottom)/C.y,left:(x.left-k.left+y.left)/C.x,right:(k.right-x.right+y.right)/C.x}}const Lwe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=Od(e,t)||{};if(c==null)return{};const d=gK(u),h={x:n,y:r},m=nP(i),y=tP(m),b=await a.getDimensions(c),v=m==="y",x=v?"top":"left",w=v?"bottom":"right",S=v?"clientHeight":"clientWidth",C=s.reference[y]+s.reference[m]-h[m]-s.floating[y],k=h[m]-s.reference[m],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let R=A?A[S]:0;(!R||!await(a.isElement==null?void 0:a.isElement(A)))&&(R=o.floating[S]||s.floating[y]);const N=C/2-k/2,I=R/2-b[y]/2-1,O=oh(d[x],I),L=oh(d[w],I),P=O,V=R-b[y]-L,F=R/2-b[y]/2+N,J=yj(P,F,V),U=!l.arrow&&Ey(i)!=null&&F!==J&&s.reference[y]/2-(F<P?O:L)-b[y]/2<0,G=U?F<P?F-P:F-V:0;return{[m]:h[m]+G,data:{[m]:J,centerOffset:F-J-G,...U&&{alignmentOffset:G}},reset:U}}}),Bwe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...v}=Od(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=Pd(i),w=lh(o),S=Pd(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=h||(S||!b?[kC(o)]:jwe(o)),A=y!=="none";!h&&A&&k.push(...Pwe(o,b,y,C));const R=[o,...k],N=await Ox(t,v),I=[];let O=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&I.push(N[x]),d){const F=Iwe(i,a,C);I.push(N[F[0]],N[F[1]])}if(O=[...O,{placement:i,overflows:I}],!I.every(F=>F<=0)){var L,P;const F=(((L=s.flip)==null?void 0:L.index)||0)+1,J=R[F];if(J)return{data:{index:F,overflows:O},reset:{placement:J}};let U=(P=O.filter(G=>G.overflows[0]<=0).sort((G,$)=>G.overflows[1]-$.overflows[1])[0])==null?void 0:P.placement;if(!U)switch(m){case"bestFit":{var V;const G=(V=O.filter($=>{if(A){const ne=lh($.placement);return ne===w||ne==="y"}return!0}).map($=>[$.placement,$.overflows.filter(ne=>ne>0).reduce((ne,W)=>ne+W,0)]).sort(($,ne)=>$[1]-ne[1])[0])==null?void 0:V[0];G&&(U=G);break}case"initialPlacement":U=o;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function A$(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function R$(e){return Rwe.some(t=>e[t]>=0)}const $we=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Od(e,t);switch(r){case"referenceHidden":{const s=await Ox(t,{...i,elementContext:"reference"}),a=A$(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:R$(a)}}}case"escaped":{const s=await Ox(t,{...i,altBoundary:!0}),a=A$(s,n.floating);return{data:{escapedOffsets:a,escaped:R$(a)}}}default:return{}}}}};async function zwe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Pd(n),o=Ey(n),l=lh(n)==="y",c=["left","top"].includes(a)?-1:1,u=s&&l?-1:1,d=Od(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),l?{x:m*u,y:h*c}:{x:h*c,y:m*u}}const Uwe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=t,l=await zwe(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},qwe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x,y:w}=v;return{x,y:w}}},...l}=Od(e,t),c={x:n,y:r},u=await Ox(t,l),d=lh(Pd(i)),h=eP(d);let m=c[h],y=c[d];if(s){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=m+u[v],S=m-u[x];m=yj(w,m,S)}if(a){const v=d==="y"?"top":"left",x=d==="y"?"bottom":"right",w=y+u[v],S=y-u[x];y=yj(w,y,S)}const b=o.fn({...t,[h]:m,[d]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[h]:s,[d]:a}}}}}},Vwe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Od(e,t),u={x:n,y:r},d=lh(i),h=eP(d);let m=u[h],y=u[d];const b=Od(o,t),v=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const S=h==="y"?"height":"width",C=s.reference[h]-s.floating[S]+v.mainAxis,k=s.reference[h]+s.reference[S]-v.mainAxis;m<C?m=C:m>k&&(m=k)}if(c){var x,w;const S=h==="y"?"width":"height",C=["top","left"].includes(Pd(i)),k=s.reference[d]-s.floating[S]+(C&&((x=a.offset)==null?void 0:x[d])||0)+(C?0:v.crossAxis),A=s.reference[d]+s.reference[S]+(C?0:((w=a.offset)==null?void 0:w[d])||0)-(C?v.crossAxis:0);y<k?y=k:y>A&&(y=A)}return{[h]:m,[d]:y}}}},Wwe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:l=()=>{},...c}=Od(e,t),u=await Ox(t,c),d=Pd(i),h=Ey(i),m=lh(i)==="y",{width:y,height:b}=s.floating;let v,x;d==="top"||d==="bottom"?(v=d,x=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(x=d,v=h==="end"?"top":"bottom");const w=b-u.top-u.bottom,S=y-u.left-u.right,C=oh(b-u[v],w),k=oh(y-u[x],S),A=!t.middlewareData.shift;let R=C,N=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=w),A&&!h){const O=Yo(u.left,0),L=Yo(u.right,0),P=Yo(u.top,0),V=Yo(u.bottom,0);m?N=y-2*(O!==0||L!==0?O+L:Yo(u.left,u.right)):R=b-2*(P!==0||V!==0?P+V:Yo(u.top,u.bottom))}await l({...t,availableWidth:N,availableHeight:R});const I=await a.getDimensions(o.floating);return y!==I.width||b!==I.height?{reset:{rects:!0}}:{}}}};function bE(){return typeof window<"u"}function Ty(e){return yK(e)?(e.nodeName||"").toLowerCase():"#document"}function Jo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ru(e){var t;return(t=(yK(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yK(e){return bE()?e instanceof Node||e instanceof Jo(e).Node:!1}function wc(e){return bE()?e instanceof Element||e instanceof Jo(e).Element:!1}function Cu(e){return bE()?e instanceof HTMLElement||e instanceof Jo(e).HTMLElement:!1}function N$(e){return!bE()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jo(e).ShadowRoot}function Zw(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=_c(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Hwe(e){return["table","td","th"].includes(Ty(e))}function vE(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function rP(e){const t=iP(),n=wc(e)?_c(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Gwe(e){let t=ch(e);for(;Cu(t)&&!$0(t);){if(rP(t))return t;if(vE(t))return null;t=ch(t)}return null}function iP(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $0(e){return["html","body","#document"].includes(Ty(e))}function _c(e){return Jo(e).getComputedStyle(e)}function xE(e){return wc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ch(e){if(Ty(e)==="html")return e;const t=e.assignedSlot||e.parentNode||N$(e)&&e.host||Ru(e);return N$(t)?t.host:t}function bK(e){const t=ch(e);return $0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Cu(t)&&Zw(t)?t:bK(t)}function Px(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=bK(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=Jo(i);if(s){const o=vj(a);return t.concat(a,a.visualViewport||[],Zw(i)?i:[],o&&n?Px(o):[])}return t.concat(i,Px(i,[],n))}function vj(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function vK(e){const t=_c(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Cu(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=CC(n)!==s||CC(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function sP(e){return wc(e)?e:e.contextElement}function m0(e){const t=sP(e);if(!Cu(t))return mu(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=vK(t);let a=(s?CC(n.width):n.width)/r,o=(s?CC(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Kwe=mu(0);function xK(e){const t=Jo(e);return!iP()||!t.visualViewport?Kwe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ywe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jo(e)?!1:t}function nm(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=sP(e);let a=mu(1);t&&(r?wc(r)&&(a=m0(r)):a=m0(e));const o=Ywe(s,n,r)?xK(s):mu(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(s){const h=Jo(s),m=r&&wc(r)?Jo(r):r;let y=h,b=vj(y);for(;b&&r&&m!==y;){const v=m0(b),x=b.getBoundingClientRect(),w=_c(b),S=x.left+(b.clientLeft+parseFloat(w.paddingLeft))*v.x,C=x.top+(b.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=S,c+=C,y=Jo(b),b=vj(y)}}return EC({width:u,height:d,x:l,y:c})}function aP(e,t){const n=xE(e).scrollLeft;return t?t.left+n:nm(Ru(e)).left+n}function wK(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:aP(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function Zwe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=Ru(r),o=t?vE(t.floating):!1;if(r===a||o&&s)return n;let l={scrollLeft:0,scrollTop:0},c=mu(1);const u=mu(0),d=Cu(r);if((d||!d&&!s)&&((Ty(r)!=="body"||Zw(a))&&(l=xE(r)),Cu(r))){const m=nm(r);c=m0(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const h=a&&!d&&!s?wK(a,l,!0):mu(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function Xwe(e){return Array.from(e.getClientRects())}function Jwe(e){const t=Ru(e),n=xE(e),r=e.ownerDocument.body,i=Yo(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Yo(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+aP(e);const o=-n.scrollTop;return _c(r).direction==="rtl"&&(a+=Yo(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function Qwe(e,t){const n=Jo(e),r=Ru(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=iP();(!c||c&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}function e1e(e,t){const n=nm(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Cu(e)?m0(e):mu(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:a,height:o,x:l,y:c}}function M$(e,t,n){let r;if(t==="viewport")r=Qwe(e,n);else if(t==="document")r=Jwe(Ru(e));else if(wc(t))r=e1e(t,n);else{const i=xK(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return EC(r)}function _K(e,t){const n=ch(e);return n===t||!wc(n)||$0(n)?!1:_c(n).position==="fixed"||_K(n,t)}function t1e(e,t){const n=t.get(e);if(n)return n;let r=Px(e,[],!1).filter(o=>wc(o)&&Ty(o)!=="body"),i=null;const s=_c(e).position==="fixed";let a=s?ch(e):e;for(;wc(a)&&!$0(a);){const o=_c(a),l=rP(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Zw(a)&&!l&&_K(e,a))?r=r.filter(u=>u!==a):i=o,a=ch(a)}return t.set(e,r),r}function n1e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?vE(t)?[]:t1e(t,this._c):[].concat(n),r],o=a[0],l=a.reduce((c,u)=>{const d=M$(t,u,i);return c.top=Yo(d.top,c.top),c.right=oh(d.right,c.right),c.bottom=oh(d.bottom,c.bottom),c.left=Yo(d.left,c.left),c},M$(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function r1e(e){const{width:t,height:n}=vK(e);return{width:t,height:n}}function i1e(e,t,n){const r=Cu(t),i=Ru(t),s=n==="fixed",a=nm(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=mu(0);if(r||!r&&!s)if((Ty(t)!=="body"||Zw(i))&&(o=xE(t)),r){const h=nm(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&(l.x=aP(i));const c=i&&!r&&!s?wK(i,o):mu(0),u=a.left+o.scrollLeft-l.x-c.x,d=a.top+o.scrollTop-l.y-c.y;return{x:u,y:d,width:a.width,height:a.height}}function GN(e){return _c(e).position==="static"}function I$(e,t){if(!Cu(e)||_c(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ru(e)===n&&(n=n.ownerDocument.body),n}function SK(e,t){const n=Jo(e);if(vE(e))return n;if(!Cu(e)){let i=ch(e);for(;i&&!$0(i);){if(wc(i)&&!GN(i))return i;i=ch(i)}return n}let r=I$(e,t);for(;r&&Hwe(r)&&GN(r);)r=I$(r,t);return r&&$0(r)&&GN(r)&&!rP(r)?n:r||Gwe(e)||n}const s1e=async function(e){const t=this.getOffsetParent||SK,n=this.getDimensions,r=await n(e.floating);return{reference:i1e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function a1e(e){return _c(e).direction==="rtl"}const o1e={convertOffsetParentRelativeRectToViewportRelativeRect:Zwe,getDocumentElement:Ru,getClippingRect:n1e,getOffsetParent:SK,getElementRects:s1e,getClientRects:Xwe,getDimensions:r1e,getScale:m0,isElement:wc,isRTL:a1e};function CK(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function l1e(e,t){let n=null,r;const i=Ru(e);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:m}=c;if(o||t(),!h||!m)return;const y=hS(d),b=hS(i.clientWidth-(u+h)),v=hS(i.clientHeight-(d+m)),x=hS(u),S={rootMargin:-y+"px "+-b+"px "+-v+"px "+-x+"px",threshold:Yo(0,oh(1,l))||1};let C=!0;function k(A){const R=A[0].intersectionRatio;if(R!==l){if(!C)return a();R?a(!1,R):r=setTimeout(()=>{a(!1,1e-7)},1e3)}R===1&&!CK(c,e.getBoundingClientRect())&&a(),C=!1}try{n=new IntersectionObserver(k,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,S)}n.observe(e)}return a(!0),s}function oP(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=sP(e),u=i||s?[...c?Px(c):[],...Px(t)]:[];u.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const d=c&&o?l1e(c,n):null;let h=-1,m=null;a&&(m=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let y,b=l?nm(e):null;l&&v();function v(){const x=nm(e);b&&!CK(b,x)&&n(),b=x,y=requestAnimationFrame(v)}return n(),()=>{var x;u.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(x=m)==null||x.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const c1e=Uwe,u1e=qwe,d1e=Bwe,f1e=Wwe,h1e=$we,j$=Lwe,p1e=Vwe,m1e=(e,t,n)=>{const r=new Map,i={platform:o1e,...n},s={...i.platform,_c:r};return Fwe(e,t,{...i,platform:s})};var h2=typeof document<"u"?T.useLayoutEffect:T.useEffect;function TC(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!TC(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!TC(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function kK(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function O$(e,t){const n=kK(e);return Math.round(t*n)/n}function KN(e){const t=T.useRef(e);return h2(()=>{t.current=e}),t}function lP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,d]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=T.useState(r);TC(h,r)||m(r);const[y,b]=T.useState(null),[v,x]=T.useState(null),w=T.useCallback($=>{$!==A.current&&(A.current=$,b($))},[]),S=T.useCallback($=>{$!==R.current&&(R.current=$,x($))},[]),C=s||y,k=a||v,A=T.useRef(null),R=T.useRef(null),N=T.useRef(u),I=l!=null,O=KN(l),L=KN(i),P=KN(c),V=T.useCallback(()=>{if(!A.current||!R.current)return;const $={placement:t,strategy:n,middleware:h};L.current&&($.platform=L.current),m1e(A.current,R.current,$).then(ne=>{const W={...ne,isPositioned:P.current!==!1};F.current&&!TC(N.current,W)&&(N.current=W,Zo.flushSync(()=>{d(W)}))})},[h,t,n,L,P]);h2(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d($=>({...$,isPositioned:!1})))},[c]);const F=T.useRef(!1);h2(()=>(F.current=!0,()=>{F.current=!1}),[]),h2(()=>{if(C&&(A.current=C),k&&(R.current=k),C&&k){if(O.current)return O.current(C,k,V);V()}},[C,k,V,O,I]);const J=T.useMemo(()=>({reference:A,floating:R,setReference:w,setFloating:S}),[w,S]),U=T.useMemo(()=>({reference:C,floating:k}),[C,k]),G=T.useMemo(()=>{const $={position:n,left:0,top:0};if(!U.floating)return $;const ne=O$(U.floating,u.x),W=O$(U.floating,u.y);return o?{...$,transform:"translate("+ne+"px, "+W+"px)",...kK(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:W}},[n,o,U.floating,u.x,u.y]);return T.useMemo(()=>({...u,update:V,refs:J,elements:U,floatingStyles:G}),[u,V,J,U,G])}const g1e=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?j$({element:r.current,padding:i}).fn(n):{}:r?j$({element:r,padding:i}).fn(n):{}}}},cP=(e,t)=>({...c1e(e),options:[e,t]}),uP=(e,t)=>({...u1e(e),options:[e,t]}),dP=(e,t)=>({...p1e(e),options:[e,t]}),fP=(e,t)=>({...d1e(e),options:[e,t]}),hP=(e,t)=>({...f1e(e),options:[e,t]}),pP=(e,t)=>({...h1e(e),options:[e,t]}),mP=(e,t)=>({...g1e(e),options:[e,t]});var y1e="Arrow",EK=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return p.jsx(sr.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});EK.displayName=y1e;var b1e=EK;function Ay(e){const[t,n]=T.useState(void 0);return Ji(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=e.offsetWidth,o=e.offsetHeight;n({width:a,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var gP="Popper",[TK,wE]=Vs(gP),[v1e,AK]=TK(gP),RK=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return p.jsx(v1e,{scope:t,anchor:r,onAnchorChange:i,children:n})};RK.displayName=gP;var NK="PopperAnchor",MK=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=AK(NK,n),a=T.useRef(null),o=Tn(t,a);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:p.jsx(sr.div,{...i,ref:o})});MK.displayName=NK;var yP="PopperContent",[x1e,w1e]=TK(yP),IK=T.forwardRef((e,t)=>{var je,Me,Se,qe,Qe,We;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...b}=e,v=AK(yP,n),[x,w]=T.useState(null),S=Tn(t,Re=>w(Re)),[C,k]=T.useState(null),A=Ay(C),R=(A==null?void 0:A.width)??0,N=(A==null?void 0:A.height)??0,I=r+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],P=L.length>0,V={padding:O,boundary:L.filter(S1e),altBoundary:P},{refs:F,floatingStyles:J,placement:U,isPositioned:G,middlewareData:$}=lP({strategy:"fixed",placement:I,whileElementsMounted:(...Re)=>oP(...Re,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[cP({mainAxis:i+N,alignmentAxis:a}),l&&uP({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?dP():void 0,...V}),l&&fP({...V}),hP({...V,apply:({elements:Re,rects:K,availableWidth:ge,availableHeight:Te})=>{const{width:ce,height:le}=K.reference,ie=Re.floating.style;ie.setProperty("--radix-popper-available-width",`${ge}px`),ie.setProperty("--radix-popper-available-height",`${Te}px`),ie.setProperty("--radix-popper-anchor-width",`${ce}px`),ie.setProperty("--radix-popper-anchor-height",`${le}px`)}}),C&&mP({element:C,padding:o}),C1e({arrowWidth:R,arrowHeight:N}),h&&pP({strategy:"referenceHidden",...V})]}),[ne,W]=PK(U),te=_i(y);Ji(()=>{G&&(te==null||te())},[G,te]);const ee=(je=$.arrow)==null?void 0:je.x,re=(Me=$.arrow)==null?void 0:Me.y,de=((Se=$.arrow)==null?void 0:Se.centerOffset)!==0,[oe,Ie]=T.useState();return Ji(()=>{x&&Ie(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:G?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(qe=$.transformOrigin)==null?void 0:qe.x,(Qe=$.transformOrigin)==null?void 0:Qe.y].join(" "),...((We=$.hide)==null?void 0:We.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(x1e,{scope:n,placedSide:ne,onArrowChange:k,arrowX:ee,arrowY:re,shouldHideArrow:de,children:p.jsx(sr.div,{"data-side":ne,"data-align":W,...b,ref:S,style:{...b.style,animation:G?void 0:"none"}})})})});IK.displayName=yP;var jK="PopperArrow",_1e={top:"bottom",right:"left",bottom:"top",left:"right"},OK=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=w1e(jK,r),a=_1e[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(b1e,{...i,ref:n,style:{...i.style,display:"block"}})})});OK.displayName=jK;function S1e(e){return e!==null}var C1e=e=>({name:"transformOrigin",options:e,fn(t){var v,x,w;const{placement:n,rects:r,middlewareData:i}=t,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,u]=PK(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let y="",b="";return c==="bottom"?(y=a?d:`${h}px`,b=`${-l}px`):c==="top"?(y=a?d:`${h}px`,b=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,b=a?d:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,b=a?d:`${m}px`),{data:{x:y,y:b}}}});function PK(e){const[t,n="center"]=e.split("-");return[t,n]}var DK=RK,FK=MK,LK=IK,BK=OK,k1e="Portal",_E=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=T.useState(!1);Ji(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?lE.createPortal(p.jsx(sr.div,{...r,ref:t}),a):null});_E.displayName=k1e;function E1e(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var sa=e=>{const{present:t,children:n}=e,r=T1e(t),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=Tn(r.ref,A1e(i));return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};sa.displayName="Presence";function T1e(e){const[t,n]=T.useState(),r=T.useRef(null),i=T.useRef(e),s=T.useRef("none"),a=e?"mounted":"unmounted",[o,l]=E1e(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=pS(r.current);s.current=o==="mounted"?c:"none"},[o]),Ji(()=>{const c=r.current,u=i.current;if(u!==e){const h=s.current,m=pS(c);e?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Ji(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=m=>{const b=pS(r.current).includes(m.animationName);if(m.target===t&&b&&(l("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=m=>{m.target===t&&(s.current=pS(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:T.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function pS(e){return(e==null?void 0:e.animationName)||"none"}function A1e(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var R1e=Symbol("radix.slottable");function N1e(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=R1e,t}var M1e=HW[" useInsertionEffect ".trim().toString()]||Ji;function Sc({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,a]=I1e({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:i;{const u=T.useRef(e!==void 0);T.useEffect(()=>{const d=u.current;d!==o&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const c=T.useCallback(u=>{var d;if(o){const h=j1e(u)?u(e):u;h!==e&&((d=a.current)==null||d.call(a,h))}else s(u)},[o,e,s,a]);return[l,c]}function I1e({defaultProp:e,onChange:t}){const[n,r]=T.useState(e),i=T.useRef(n),s=T.useRef(t);return M1e(()=>{s.current=t},[t]),T.useEffect(()=>{var a;i.current!==n&&((a=s.current)==null||a.call(s,n),i.current=n)},[n,i]),[n,r,s]}function j1e(e){return typeof e=="function"}var O1e=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),P1e="VisuallyHidden",$K=T.forwardRef((e,t)=>p.jsx(sr.span,{...e,ref:t,style:{...O1e,...e.style}}));$K.displayName=P1e;var D1e=$K,[SE,_dt]=Vs("Tooltip",[wE]),CE=wE(),zK="TooltipProvider",F1e=700,xj="tooltip.open",[L1e,bP]=SE(zK),UK=e=>{const{__scopeTooltip:t,delayDuration:n=F1e,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=e,a=T.useRef(!0),o=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),p.jsx(L1e,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:T.useCallback(c=>{o.current=c},[]),disableHoverableContent:i,children:s})};UK.displayName=zK;var Dx="Tooltip",[B1e,Xw]=SE(Dx),qK=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=e,l=bP(Dx,e.__scopeTooltip),c=CE(t),[u,d]=T.useState(null),h=na(),m=T.useRef(0),y=a??l.disableHoverableContent,b=o??l.delayDuration,v=T.useRef(!1),[x,w]=Sc({prop:r,defaultProp:i??!1,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(xj))):l.onClose(),s==null||s(R)},caller:Dx}),S=T.useMemo(()=>x?v.current?"delayed-open":"instant-open":"closed",[x]),C=T.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v.current=!1,w(!0)},[w]),k=T.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w(!1)},[w]),A=T.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v.current=!0,w(!0),m.current=0},b)},[b,w]);return T.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),p.jsx(DK,{...c,children:p.jsx(B1e,{scope:t,contentId:h,open:x,stateAttribute:S,trigger:u,onTriggerChange:d,onTriggerEnter:T.useCallback(()=>{l.isOpenDelayedRef.current?A():C()},[l.isOpenDelayedRef,A,C]),onTriggerLeave:T.useCallback(()=>{y?k():(window.clearTimeout(m.current),m.current=0)},[k,y]),onOpen:C,onClose:k,disableHoverableContent:y,children:n})})};qK.displayName=Dx;var wj="TooltipTrigger",VK=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Xw(wj,n),s=bP(wj,n),a=CE(n),o=T.useRef(null),l=Tn(t,o,i.onTriggerChange),c=T.useRef(!1),u=T.useRef(!1),d=T.useCallback(()=>c.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(FK,{asChild:!0,...a,children:p.jsx(sr.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Wt(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Wt(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Wt(e.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Wt(e.onFocus,()=>{c.current||i.onOpen()}),onBlur:Wt(e.onBlur,i.onClose),onClick:Wt(e.onClick,i.onClose)})})});VK.displayName=wj;var vP="TooltipPortal",[$1e,z1e]=SE(vP,{forceMount:void 0}),WK=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:i}=e,s=Xw(vP,t);return p.jsx($1e,{scope:t,forceMount:n,children:p.jsx(sa,{present:n||s.open,children:p.jsx(_E,{asChild:!0,container:i,children:r})})})};WK.displayName=vP;var z0="TooltipContent",HK=T.forwardRef((e,t)=>{const n=z1e(z0,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=e,a=Xw(z0,e.__scopeTooltip);return p.jsx(sa,{present:r||a.open,children:a.disableHoverableContent?p.jsx(GK,{side:i,...s,ref:t}):p.jsx(U1e,{side:i,...s,ref:t})})}),U1e=T.forwardRef((e,t)=>{const n=Xw(z0,e.__scopeTooltip),r=bP(z0,e.__scopeTooltip),i=T.useRef(null),s=Tn(t,i),[a,o]=T.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=r,h=T.useCallback(()=>{o(null),d(!1)},[d]),m=T.useCallback((y,b)=>{const v=y.currentTarget,x={x:y.clientX,y:y.clientY},w=H1e(x,v.getBoundingClientRect()),S=G1e(x,w),C=K1e(b.getBoundingClientRect()),k=Z1e([...S,...C]);o(k),d(!0)},[d]);return T.useEffect(()=>()=>h(),[h]),T.useEffect(()=>{if(l&&u){const y=v=>m(v,u),b=v=>m(v,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",b)}}},[l,u,m,h]),T.useEffect(()=>{if(a){const y=b=>{const v=b.target,x={x:b.clientX,y:b.clientY},w=(l==null?void 0:l.contains(v))||(u==null?void 0:u.contains(v)),S=!Y1e(x,a);w?h():S&&(h(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,a,c,h]),p.jsx(GK,{...e,ref:s})}),[q1e,V1e]=SE(Dx,{isInside:!1}),W1e=N1e("TooltipContent"),GK=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=e,l=Xw(z0,n),c=CE(n),{onClose:u}=l;return T.useEffect(()=>(document.addEventListener(xj,u),()=>document.removeEventListener(xj,u)),[u]),T.useEffect(()=>{if(l.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),p.jsx(yE,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(LK,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(W1e,{children:r}),p.jsx(q1e,{scope:n,isInside:!0,children:p.jsx(D1e,{id:l.contentId,role:"tooltip",children:i||r})})]})})});HK.displayName=z0;var KK="TooltipArrow",YK=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=CE(n);return V1e(KK,n).isInside?null:p.jsx(BK,{...i,...r,ref:t})});YK.displayName=KK;function H1e(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function G1e(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function K1e(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function Y1e(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s],l=t[a],c=o.x,u=o.y,d=l.x,h=l.y;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=!i)}return i}function Z1e(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),X1e(t)}function X1e(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const s=n[n.length-1],a=n[n.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var J1e=UK,Q1e=qK,e_e=VK,t_e=WK,n_e=HK,r_e=YK;function br({delayDuration:e=0,...t}){return p.jsx(J1e,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function xr({...e}){return p.jsx(br,{children:p.jsx(Q1e,{"data-slot":"tooltip",...e})})}function wr({...e}){return p.jsx(e_e,{"data-slot":"tooltip-trigger",...e})}function _r({className:e,sideOffset:t=0,children:n,...r}){return p.jsx(t_e,{children:p.jsxs(n_e,{"data-slot":"tooltip-content",sideOffset:t,className:Ye("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,p.jsx(r_e,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var YN={exports:{}},P$;function i_e(){return P$||(P$=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function w(S){return S instanceof l?new l(S.type,w(S.content),S.alias):Array.isArray(S)?S.map(w):S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(w){return Object.prototype.toString.call(w).slice(8,-1)},objId:function(w){return w.__id||Object.defineProperty(w,"__id",{value:++s}),w.__id},clone:function w(S,C){C=C||{};var k,A;switch(o.util.type(S)){case"Object":if(A=o.util.objId(S),C[A])return C[A];k={},C[A]=k;for(var R in S)S.hasOwnProperty(R)&&(k[R]=w(S[R],C));return k;case"Array":return A=o.util.objId(S),C[A]?C[A]:(k=[],C[A]=k,S.forEach(function(N,I){k[I]=w(N,C)}),k);default:return S}},getLanguage:function(w){for(;w;){var S=i.exec(w.className);if(S)return S[1].toLowerCase();w=w.parentElement}return"none"},setLanguage:function(w,S){w.className=w.className.replace(RegExp(i,"gi"),""),w.classList.add("language-"+S)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var w=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(w){var S=document.getElementsByTagName("script");for(var C in S)if(S[C].src==w)return S[C]}return null}},isActive:function(w,S,C){for(var k="no-"+S;w;){var A=w.classList;if(A.contains(S))return!0;if(A.contains(k))return!1;w=w.parentElement}return!!C}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(w,S){var C=o.util.clone(o.languages[w]);for(var k in S)C[k]=S[k];return C},insertBefore:function(w,S,C,k){k=k||o.languages;var A=k[w],R={};for(var N in A)if(A.hasOwnProperty(N)){if(N==S)for(var I in C)C.hasOwnProperty(I)&&(R[I]=C[I]);C.hasOwnProperty(N)||(R[N]=A[N])}var O=k[w];return k[w]=R,o.languages.DFS(o.languages,function(L,P){P===O&&L!=w&&(this[L]=R)}),R},DFS:function w(S,C,k,A){A=A||{};var R=o.util.objId;for(var N in S)if(S.hasOwnProperty(N)){C.call(S,N,S[N],k||N);var I=S[N],O=o.util.type(I);O==="Object"&&!A[R(I)]?(A[R(I)]=!0,w(I,C,null,A)):O==="Array"&&!A[R(I)]&&(A[R(I)]=!0,w(I,C,N,A))}}},plugins:{},highlightAll:function(w,S){o.highlightAllUnder(document,w,S)},highlightAllUnder:function(w,S,C){var k={callback:C,container:w,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),o.hooks.run("before-all-elements-highlight",k);for(var A=0,R;R=k.elements[A++];)o.highlightElement(R,S===!0,k.callback)},highlightElement:function(w,S,C){var k=o.util.getLanguage(w),A=o.languages[k];o.util.setLanguage(w,k);var R=w.parentElement;R&&R.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(R,k);var N=w.textContent,I={element:w,language:k,grammar:A,code:N};function O(P){I.highlightedCode=P,o.hooks.run("before-insert",I),I.element.innerHTML=I.highlightedCode,o.hooks.run("after-highlight",I),o.hooks.run("complete",I),C&&C.call(I.element)}if(o.hooks.run("before-sanity-check",I),R=I.element.parentElement,R&&R.nodeName.toLowerCase()==="pre"&&!R.hasAttribute("tabindex")&&R.setAttribute("tabindex","0"),!I.code){o.hooks.run("complete",I),C&&C.call(I.element);return}if(o.hooks.run("before-highlight",I),!I.grammar){O(o.util.encode(I.code));return}if(S&&r.Worker){var L=new Worker(o.filename);L.onmessage=function(P){O(P.data)},L.postMessage(JSON.stringify({language:I.language,code:I.code,immediateClose:!0}))}else O(o.highlight(I.code,I.grammar,I.language))},highlight:function(w,S,C){var k={code:w,grammar:S,language:C};if(o.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=o.tokenize(k.code,k.grammar),o.hooks.run("after-tokenize",k),l.stringify(o.util.encode(k.tokens),k.language)},tokenize:function(w,S){var C=S.rest;if(C){for(var k in C)S[k]=C[k];delete S.rest}var A=new d;return h(A,A.head,w),u(w,A,S,A.head,0),y(A)},hooks:{all:{},add:function(w,S){var C=o.hooks.all;C[w]=C[w]||[],C[w].push(S)},run:function(w,S){var C=o.hooks.all[w];if(!(!C||!C.length))for(var k=0,A;A=C[k++];)A(S)}},Token:l};r.Prism=o;function l(w,S,C,k){this.type=w,this.content=S,this.alias=C,this.length=(k||"").length|0}l.stringify=function w(S,C){if(typeof S=="string")return S;if(Array.isArray(S)){var k="";return S.forEach(function(O){k+=w(O,C)}),k}var A={type:S.type,content:w(S.content,C),tag:"span",classes:["token",S.type],attributes:{},language:C},R=S.alias;R&&(Array.isArray(R)?Array.prototype.push.apply(A.classes,R):A.classes.push(R)),o.hooks.run("wrap",A);var N="";for(var I in A.attributes)N+=" "+I+'="'+(A.attributes[I]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+N+">"+A.content+"</"+A.tag+">"};function c(w,S,C,k){w.lastIndex=S;var A=w.exec(C);if(A&&k&&A[1]){var R=A[1].length;A.index+=R,A[0]=A[0].slice(R)}return A}function u(w,S,C,k,A,R){for(var N in C)if(!(!C.hasOwnProperty(N)||!C[N])){var I=C[N];I=Array.isArray(I)?I:[I];for(var O=0;O<I.length;++O){if(R&&R.cause==N+","+O)return;var L=I[O],P=L.inside,V=!!L.lookbehind,F=!!L.greedy,J=L.alias;if(F&&!L.pattern.global){var U=L.pattern.toString().match(/[imsuy]*$/)[0];L.pattern=RegExp(L.pattern.source,U+"g")}for(var G=L.pattern||L,$=k.next,ne=A;$!==S.tail&&!(R&&ne>=R.reach);ne+=$.value.length,$=$.next){var W=$.value;if(S.length>w.length)return;if(!(W instanceof l)){var te=1,ee;if(F){if(ee=c(G,ne,w,V),!ee||ee.index>=w.length)break;var Ie=ee.index,re=ee.index+ee[0].length,de=ne;for(de+=$.value.length;Ie>=de;)$=$.next,de+=$.value.length;if(de-=$.value.length,ne=de,$.value instanceof l)continue;for(var oe=$;oe!==S.tail&&(de<re||typeof oe.value=="string");oe=oe.next)te++,de+=oe.value.length;te--,W=w.slice(ne,de),ee.index-=ne}else if(ee=c(G,0,W,V),!ee)continue;var Ie=ee.index,je=ee[0],Me=W.slice(0,Ie),Se=W.slice(Ie+je.length),qe=ne+W.length;R&&qe>R.reach&&(R.reach=qe);var Qe=$.prev;Me&&(Qe=h(S,Qe,Me),ne+=Me.length),m(S,Qe,te);var We=new l(N,P?o.tokenize(je,P):je,J,je);if($=h(S,Qe,We),Se&&h(S,$,Se),te>1){var Re={cause:N+","+O,reach:qe};u(w,S,C,$.prev,ne,Re),R&&Re.reach>R.reach&&(R.reach=Re.reach)}}}}}}function d(){var w={value:null,prev:null,next:null},S={value:null,prev:w,next:null};w.next=S,this.head=w,this.tail=S,this.length=0}function h(w,S,C){var k=S.next,A={value:C,prev:S,next:k};return S.next=A,k.prev=A,w.length++,A}function m(w,S,C){for(var k=S.next,A=0;A<C&&k!==w.tail;A++)k=k.next;S.next=k,k.prev=S,w.length-=A}function y(w){for(var S=[],C=w.head.next;C!==w.tail;)S.push(C.value),C=C.next;return S}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(w){var S=JSON.parse(w.data),C=S.language,k=S.code,A=S.immediateClose;r.postMessage(o.highlight(k,o.languages[C],C)),A&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o}(t);e.exports&&(e.exports=n),typeof Np<"u"&&(Np.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,s){var a={};a["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[s]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+s]={pattern:/[\s\S]+/,inside:n.languages[s]};var l={};l[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var s=r.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",i=function(b,v){return" Error "+b+" while fetching file: "+v},s=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",c="loaded",u="failed",d="pre[data-src]:not(["+o+'="'+c+'"]):not(['+o+'="'+l+'"])';function h(b,v,x){var w=new XMLHttpRequest;w.open("GET",b,!0),w.onreadystatechange=function(){w.readyState==4&&(w.status<400&&w.responseText?v(w.responseText):w.status>=400?x(i(w.status,w.statusText)):x(s))},w.send(null)}function m(b){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(v){var x=Number(v[1]),w=v[2],S=v[3];return w?S?[x,Number(S)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+d}),n.hooks.add("before-sanity-check",function(b){var v=b.element;if(v.matches(d)){b.code="",v.setAttribute(o,l);var x=v.appendChild(document.createElement("CODE"));x.textContent=r;var w=v.getAttribute("data-src"),S=b.language;if(S==="none"){var C=(/\.(\w+)$/.exec(w)||[,"none"])[1];S=a[C]||C}n.util.setLanguage(x,S),n.util.setLanguage(v,S);var k=n.plugins.autoloader;k&&k.loadLanguages(S),h(w,function(A){v.setAttribute(o,c);var R=m(v.getAttribute("data-range"));if(R){var N=A.split(/\r\n?|\n/g),I=R[0],O=R[1]==null?N.length:R[1];I<0&&(I+=N.length),I=Math.max(0,Math.min(I-1,N.length)),O<0&&(O+=N.length),O=Math.max(0,Math.min(O,N.length)),A=N.slice(I,O).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(I+1))}x.textContent=A,n.highlightElement(x)},function(A){v.setAttribute(o,u),x.textContent=A})}}),n.plugins.fileHighlight={highlight:function(v){for(var x=(v||document).querySelectorAll(d),w=0,S;S=x[w++];)n.highlightElement(S)}};var y=!1;n.fileHighlight=function(){y||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),y=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(YN)),YN.exports}var s_e=i_e();const a_e=xa(s_e);var D$={},F$;function o_e(){return F$||(F$=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),D$}o_e();var L$={},B$;function l_e(){return B$||(B$=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),L$}l_e();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var i=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],s=r.variable[1].inside,a=0;a<i.length;a++)s[i[a]]=e.languages.bash[i[a]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(u){return u=u.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+u+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),s=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+s+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+s+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+s+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(u){["url","bold","italic","strike","code-snippet"].forEach(function(d){u!==d&&(e.languages.markdown[u].inside.content.inside[d]=e.languages.markdown[d])})}),e.hooks.add("after-tokenize",function(u){if(u.language!=="markdown"&&u.language!=="md")return;function d(h){if(!(!h||typeof h=="string"))for(var m=0,y=h.length;m<y;m++){var b=h[m];if(b.type!=="code"){d(b.content);continue}var v=b.content[1],x=b.content[3];if(v&&x&&v.type==="code-language"&&x.type==="code-block"&&typeof v.content=="string"){var w=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");w=(/[a-z][\w-]*/i.exec(w)||[""])[0].toLowerCase();var S="language-"+w;x.alias?typeof x.alias=="string"?x.alias=[x.alias,S]:x.alias.push(S):x.alias=[S]}}}d(u.tokens)}),e.hooks.add("wrap",function(u){if(u.type==="code-block"){for(var d="",h=0,m=u.classes.length;h<m;h++){var y=u.classes[h],b=/language-(.+)/.exec(y);if(b){d=b[1];break}}var v=e.languages[d];if(v)u.content=e.highlight(c(u.content),v,d);else if(d&&d!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);u.attributes.id=x,e.plugins.autoloader.loadLanguages(d,function(){var w=document.getElementById(x);w&&(w.innerHTML=e.highlight(w.textContent,e.languages[d],d))})}}});var a=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function c(u){var d=u.replace(a,"");return d=d.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,m){if(m=m.toLowerCase(),m[0]==="#"){var y;return m[1]==="x"?y=parseInt(m.slice(2),16):y=Number(m.slice(1)),l(y)}else{var b=o[m];return b||h}}),d}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],i=[];/^\w+$/.test(n)||i.push(/\w+/.exec(n)[0]),n==="diff"&&i.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:i,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",i=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),s=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function a(o,l){l=(l||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(c,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+i+"|"+s+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:a(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:a(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:a(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:a(s),lookbehind:!0,greedy:!0},number:{pattern:a(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var $$={},z$;function c_e(){return z$||(z$=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),$$}c_e();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const u_e=({lang:e,code:t,filepath:n,isStreaming:r=!1})=>{const{foldStreamingCodeBlocks:i}=gr(Sn(b=>({foldStreamingCodeBlocks:b.foldStreamingCodeBlocks}))),[s,a]=T.useState(r?i:!1),o=T.useRef(null),l=ll(Sn(b=>Object.values(b.canvasControls))),c=T.useCallback((b,v,x,w,S,C)=>l.filter(k=>k.type==="codeblock"&&k.targetSlot===b&&k.renderer).map(k=>{if(k.renderer){const A={codeBlockContent:v,codeBlockLang:x,codeBlockFilepath:w,isFolded:S,toggleFold:C,canvasContextType:"codeblock"};return p.jsx(Ve.Fragment,{children:k.renderer(A)},k.id)}return null}).filter(Boolean),[l]),u=T.useCallback(()=>{if(o.current&&t)try{o.current.style.whiteSpace!=="pre-wrap"&&(o.current.style.whiteSpace="pre-wrap"),o.current.textContent=t,a_e.highlightElement(o.current)}catch(b){console.error("Prism highlight error:",b),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);T.useEffect(()=>{s||u()},[t,e,s,u]);const d=()=>{const b=s;a(v=>!v),b&&setTimeout(u,0)},h=e?`language-${e}`:"language-plaintext",m=T.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]),y=c("codeblock-header-actions",t,e,n,s,d);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),n&&p.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:n}),p.jsx("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:y})]}),p.jsx("div",{})]}),!s&&p.jsx("div",{className:"overflow-hidden w-full",children:p.jsx("pre",{className:"overflow-x-auto w-full relative overflow-wrap-anywhere",children:p.jsx("code",{ref:o,className:h+" block"})})}),s&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:d,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:m})})]})},Ry=T.memo(u_e);var gt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(gt||(gt={}));const U$={[gt.EPERM]:"Operation not permitted",[gt.ENOENT]:"No such file or directory",[gt.EINTR]:"Interrupted system call",[gt.EIO]:"Input/output error",[gt.ENXIO]:"No such device or address",[gt.EBADF]:"Bad file descriptor",[gt.EAGAIN]:"Resource temporarily unavailable",[gt.ENOMEM]:"Cannot allocate memory",[gt.EACCES]:"Permission denied",[gt.EFAULT]:"Bad address",[gt.ENOTBLK]:"Block device required",[gt.EBUSY]:"Resource busy or locked",[gt.EEXIST]:"File exists",[gt.EXDEV]:"Invalid cross-device link",[gt.ENODEV]:"No such device",[gt.ENOTDIR]:"File is not a directory",[gt.EISDIR]:"File is a directory",[gt.EINVAL]:"Invalid argument",[gt.ENFILE]:"Too many open files in system",[gt.EMFILE]:"Too many open files",[gt.ETXTBSY]:"Text file busy",[gt.EFBIG]:"File is too big",[gt.ENOSPC]:"No space left on disk",[gt.ESPIPE]:"Illegal seek",[gt.EROFS]:"Cannot modify a read-only file system",[gt.EMLINK]:"Too many links",[gt.EPIPE]:"Broken pipe",[gt.EDOM]:"Numerical argument out of domain",[gt.ERANGE]:"Numerical result out of range",[gt.EDEADLK]:"Resource deadlock would occur",[gt.ENAMETOOLONG]:"File name too long",[gt.ENOLCK]:"No locks available",[gt.ENOSYS]:"Function not implemented",[gt.ENOTEMPTY]:"Directory is not empty",[gt.ELOOP]:"Too many levels of symbolic links",[gt.ENOMSG]:"No message of desired type",[gt.EBADE]:"Invalid exchange",[gt.EBADR]:"Invalid request descriptor",[gt.EXFULL]:"Exchange full",[gt.ENOANO]:"No anode",[gt.EBADRQC]:"Invalid request code",[gt.ENOSTR]:"Device not a stream",[gt.ENODATA]:"No data available",[gt.ETIME]:"Timer expired",[gt.ENOSR]:"Out of streams resources",[gt.ENONET]:"Machine is not on the network",[gt.EREMOTE]:"Object is remote",[gt.ENOLINK]:"Link has been severed",[gt.ECOMM]:"Communication error on send",[gt.EPROTO]:"Protocol error",[gt.EBADMSG]:"Bad message",[gt.EOVERFLOW]:"Value too large for defined data type",[gt.EBADFD]:"File descriptor in bad state",[gt.ESTRPIPE]:"Streams pipe error",[gt.ENOTSOCK]:"Socket operation on non-socket",[gt.EDESTADDRREQ]:"Destination address required",[gt.EMSGSIZE]:"Message too long",[gt.EPROTOTYPE]:"Protocol wrong type for socket",[gt.ENOPROTOOPT]:"Protocol not available",[gt.EPROTONOSUPPORT]:"Protocol not supported",[gt.ESOCKTNOSUPPORT]:"Socket type not supported",[gt.ENOTSUP]:"Operation is not supported",[gt.ENETDOWN]:"Network is down",[gt.ENETUNREACH]:"Network is unreachable",[gt.ENETRESET]:"Network dropped connection on reset",[gt.ETIMEDOUT]:"Connection timed out",[gt.ECONNREFUSED]:"Connection refused",[gt.EHOSTDOWN]:"Host is down",[gt.EHOSTUNREACH]:"No route to host",[gt.EALREADY]:"Operation already in progress",[gt.EINPROGRESS]:"Operation now in progress",[gt.ESTALE]:"Stale file handle",[gt.EREMOTEIO]:"Remote I/O error",[gt.EDQUOT]:"Disk quota exceeded"};class Ze extends Error{static fromJSON(t){const n=new Ze(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ze(gt[t],U$[gt[t]],n,r)}constructor(t,n=U$[t],r,i=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=i,this.code=gt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var ZN={exports:{}},q$;function d_e(){return q$||(q$=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,d||l,h),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],m]:l._events[y].push(m):(l._events[y]=m,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)t.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,y=new Array(m);h<m;h++)y[h]=d[h].fn;return y},o.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,m,y){var b=n?n+c:c;if(!this._events[b])return!1;var v=this._events[b],x=arguments.length,w,S;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,d),!0;case 4:return v.fn.call(v.context,u,d,h),!0;case 5:return v.fn.call(v.context,u,d,h,m),!0;case 6:return v.fn.call(v.context,u,d,h,m,y),!0}for(S=1,w=new Array(x-1);S<x;S++)w[S-1]=arguments[S];v.fn.apply(v.context,w)}else{var C=v.length,k;for(S=0;S<C;S++)switch(v[S].once&&this.removeListener(c,v[S].fn,void 0,!0),x){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,u);break;case 3:v[S].fn.call(v[S].context,u,d);break;case 4:v[S].fn.call(v[S].context,u,d,h);break;default:if(!w)for(k=1,w=new Array(x-1);k<x;k++)w[k-1]=arguments[k];v[S].fn.apply(v[S].context,w)}}return!0},o.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var m=n?n+c:c;if(!this._events[m])return this;if(!u)return a(this,m),this;var y=this._events[m];if(y.fn)y.fn===u&&(!h||y.once)&&(!d||y.context===d)&&a(this,m);else{for(var b=0,v=[],x=y.length;b<x;b++)(y[b].fn!==u||h&&!y[b].once||d&&y[b].context!==d)&&v.push(y[b]);v.length?this._events[m]=v.length===1?v[0]:v:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(ZN)),ZN.exports}var f_e=d_e();const xP=xa(f_e);var zW;let h_e=class extends xP{constructor(n){super();ve(this,zW,"List");ve(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,i=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const s=Array.from(this.data);s.splice(n,+i,r),this.data=new Set(s),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...i){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const s=Array.from(this.data),a=s.splice(n,r,...i);return this.data=new Set(s),this.emit("update"),a}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(zW=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function V$(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function mi(e){throw e}const W$=Intl.NumberFormat("en",{notation:"compact"});W$.format.bind(W$);function bm(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function p_e(e){try{return JSON.parse(e),!0}catch{return!1}}function _j(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function wP(e){return e.at(0).toUpperCase()+e.slice(1)}const m_e=new TextEncoder;function Tp(e){return m_e.encode(e)}const H$=new TextDecoder;function _P(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return H$.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),H$.decode(t)}function Fx(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Fx(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function g_e(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var y_e={};let b_e="process"in globalThis&&"env"in globalThis.process&&y_e.U_DEBUG=="true";function Lx(...e){b_e&&console.debug("[U]",...e)}const G$=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],v_e=[...G$,...G$.map(e=>wP(e)),"char"],SP=/^(u?int|float)(8|16|32|64|128)$/i;function ZK(e){return e=="char"?"uint8":e.toLowerCase()}function CP(e){return SP.test(e.toString())}function Sj(e){return e=="char"||SP.test(e.toString().toLowerCase())}function x_e(e){if(!Sj(e))throw new TypeError("Not a valid primitive type: "+e)}const K$=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function XK(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function w_e(e){return e!=null&&typeof e=="object"&&"struct"in e}function kE(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function pc(e){return typeof e=="function"&&Symbol.metadata in e&&w_e(e[Symbol.metadata])}function Jw(e){return e!=null&&typeof e=="object"&&pc(e.constructor)}function JK(e){if(!Jw(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function kP(e){return Jw(e)||pc(e)}function QK(e){if(!kP(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function EP(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function $i(e){if(e==null)return 0;if(Array.isArray(e)){let i=0;for(let s=0;s<e.length;s++)i+=$i(e[s]);return i}if(typeof e=="string")return x_e(e),+ZK(e).match(SP)[2]/8;if(EP(e))return e[Symbol.size];QK(e);const t=pc(e)?e:e.constructor;kE(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(pc(e))return r;for(const i of n.members.values()){const s=e[i.name];if(Jw(s)&&s.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,$i(s)):r+=$i(s);continue}if(typeof i.length!="string")continue;let a=0;for(let o=0;o<e[i.length];o++)a+=$i(kP(s[o])?s[o]:i.type);n.isUnion?r=Math.max(r,a):r+=a}return r}function __e(e,t){var s;QK(e);const n=pc(e)?e:e.constructor;kE(n);const{struct:r}=n[Symbol.metadata];if(pc(e)||!r.isDynamic)return((s=r.members.get(t))==null?void 0:s.staticOffset)??mi(new Error("Struct does not have member: "+t));let i=0;for(const a of r.members.values()){if(a.name==t)return i;const o=e[a.name];i+=$i(kP(o)?o:a.type)}throw new Error("Struct does not have member: "+t)}function S_e(e,t){return Math.ceil(e/t)*t}function vm(e={}){return function(n,r){const i=new Map;let s=0,a=!1;for(const{name:o,type:l,length:c}of XK(r)){if(!Sj(l)&&!pc(l))throw new TypeError("Not a valid type: "+l);if(typeof c=="string"){const h=i.get(c);if(!h)throw new Error(`"${c}" is undefined or declared after "${o}"`);if(!CP(h.type))throw new Error(`"${c}" is not a number and cannot be used to count "${o}"`)}let u=`${typeof l=="string"?l:l.name} ${o}`;c!==void 0&&(u+=`[${c}]`),i.set(o,{name:o,staticOffset:e.isUnion?0:s,type:Sj(l)?ZK(l):l,length:c,decl:u});const d=typeof c=="string"||pc(l)&&l[Symbol.metadata].struct.isDynamic?0:$i(l)*(c||1);a||(a=pc(l)?l[Symbol.metadata].struct.isDynamic:typeof c=="string"),s=e.isUnion?Math.max(s,d):s+d,s=S_e(s,e.align||1),Lx("define",n.name+"."+o)}return r.metadata.struct={options:e,members:i,staticSize:s,isDynamic:a,isUnion:e.isUnion??!1},n}}function Bx(e,t){return function(n,r){let i=r.name;if(typeof i=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+i.toString()),i=i.toString()),!i)throw new ReferenceError("Invalid name for struct member");return XK(r).push({name:i,type:e,length:t}),n}}function eY(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:mi(new Error("Array lengths must be natural numbers"))}function ha(e){if(EP(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();JK(e),kE(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=$i(e),i=new Uint8Array(r),s=new DataView(i.buffer);Lx("serialize",e.constructor.name);let a=0,o=0;for(const l of n.values()){const c=eY(e,l);Lx("	",l.decl);for(let u=0;u<Math.abs(c);u++){let d=c!=-1?e[l.name][u]:e[l.name];if(typeof d=="string"&&(d=d.charCodeAt(0)),a=o,o+=Jw(d)?$i(d):$i(l.type),!CP(l.type)){i.set(d?ha(d):new Uint8Array($i(l.type)),a);continue}const h=`set${wP(l.type)}`;if(h=="setInt64"){s.setBigInt64(a,BigInt(d),!t.bigEndian);continue}if(h=="setUint64"){s.setBigUint64(a,BigInt(d),!t.bigEndian);continue}if(h=="setInt128"){s.setBigUint64(a+(t.bigEndian?8:0),d&K$,!t.bigEndian),s.setBigInt64(a+(t.bigEndian?0:8),d>>BigInt(64),!t.bigEndian);continue}if(h=="setUint128"){s.setBigUint64(a+(t.bigEndian?8:0),d&K$,!t.bigEndian),s.setBigUint64(a+(t.bigEndian?0:8),d>>BigInt(64),!t.bigEndian);continue}if(h=="setFloat128"){s.setFloat64(a+(t.bigEndian?8:0),Number(d),!t.bigEndian),s.setBigUint64(a+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}s[h](a,Number(d),!t.bigEndian)}}return i}function EE(e,t){const n=g_e(t);if(EP(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);JK(e),kE(e.constructor);const{options:r,members:i}=e.constructor[Symbol.metadata].struct,s=new DataView(n.buffer,n.byteOffset,n.byteLength);Lx("deserialize",e.constructor.name);let a=0,o=0;for(const l of i.values()){const c=eY(e,l);Lx("	",l.decl);for(let u=0;u<Math.abs(c);u++){let d=c!=-1?e[l.name]:e;const h=c!=-1?u:l.name,m=d[h]===null||d[h]===void 0,y=m&&pc(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(a=o,!Jw(d[h])&&!y&&(o+=$i(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,u)+String.fromCharCode(s.getUint8(a))+e[l.name].slice(u+1);continue}if(!CP(l.type)){if(y&&pc(l.type))d[h]??(d[h]=new l.type);else if(m)continue;EE(d[h],new Uint8Array(n.subarray(a))),o+=$i(d[h]);continue}c&&c!=-1&&(d||(d=[]));const b=`get${wP(l.type)}`;if(b=="getInt64"){d[h]=s.getBigInt64(a,!r.bigEndian);continue}if(b=="getUint64"){d[h]=s.getBigUint64(a,!r.bigEndian);continue}if(b=="getInt128"){d[h]=s.getBigInt64(a+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|s.getBigUint64(a+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){d[h]=s.getBigUint64(a+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|s.getBigUint64(a+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){d[h]=s.getFloat64(a+(r.bigEndian?8:0),!r.bigEndian);continue}d[h]=s[b](a,!r.bigEndian)}}}function C_e(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Bx(e,n):Bx(e)(n,r)}return t}const Xn=Object.fromEntries(v_e.map(e=>[e,C_e(e)]));function k_e(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const Ac={root:"/",pwd:"/",credentials:k_e({uid:0,gid:0}),descriptors:new Map};function tY(e,t){let n="",r=0,i=-1,s=0,a="\0";for(let o=0;o<=e.length;++o){if(o<e.length)a=e[o];else{if(a=="/")break;a="/"}if(a=="/"){if(!(i===o-1||s===1))if(s===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}else if(n.length!==0){n="",r=0,i=o,s=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a==="."&&s!==-1?++s:s=-1}return n}function Dd(...e){var t;let n="";for(const i of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:Ac.pwd])if(i!=null&&i.length&&(n=`${i}/${n}`,i.startsWith("/")))break;const r=n.startsWith("/");return n=tY(n,!r),r?`/${n}`:n.length?n:"/"}function E_e(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=tY(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function ii(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?E_e(t):"."}function nY(e,t){if(e===t||(e=Dd.call(this,e),t=Dd.call(this,t),e===t))return"";const n=1,r=e.length,i=r-n,s=1,a=t.length-s,o=i<a?i:a;let l=-1,c=0;for(;c<o;c++){const d=e[n+c];if(d!==t[s+c])break;d==="/"&&(l=c)}if(c===o)if(a>o){if(t[s+c]==="/")return t.slice(s+c+1);if(c===0)return t.slice(s+c)}else i>o&&(e[n+c]==="/"?l=c:c===0&&(l=0));let u="";for(c=n+l+1;c<=r;++c)(c===r||e[c]==="/")&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(s+l)}`}function Gr(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let i=e.length-1;i>=1;--i)if(e[i]==="/"){if(!r){n=i;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function U0(e,t){let n=0,r=-1,i=!0;for(let s=e.length-1;s>=0;--s)if(e[s]==="/"){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":e.slice(n,r)}function Xc(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let i=-1,s=0,a=-1,o=!0,l=e.length-1,c=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){s=l+1;break}continue}a===-1&&(o=!1,a=l+1),e[l]==="."?i===-1?i=l:c!==1&&(c=1):i!==-1&&(c=-1)}if(a!==-1){const u=s===0&&t?1:s;i===-1||c===0||c===1&&i===a-1&&i===s+1?n.base=n.name=e.slice(u,a):(n.name=e.slice(u,i),n.base=e.slice(u,a),n.ext=e.slice(i,a))}return s>0?n.dir=e.slice(0,s-1):t&&(n.dir="/"),n}var Hn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(Hn||(Hn={}));Hn.EMERG+"",Hn.ALERT+"",Hn.CRIT+"",Hn.ERR+"",Hn.WARN+"",Hn.NOTICE+"",Hn.INFO+"",Hn.DEBUG+"";const T_e=new h_e;function A_e(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};T_e.add(n),D_e(n)}function R_e(e,t){var n,r;if(!(e instanceof Ze))return e.toString();const i=e.code+": "+e.message;if(!e.path)return i;const s=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return i+": "+ii(s,e.path)}function Th(e){return function(t,n={}){return A_e(e,R_e(t,n)),t}}Th(Hn.EMERG);const N_e=Th(Hn.ALERT),TE=Th(Hn.CRIT),bo=Th(Hn.ERR),Ma=Th(Hn.WARN),TP=Th(Hn.NOTICE),rY=Th(Hn.INFO),ix=Th(Hn.DEBUG);function M_e(e,t){return`\x1B[${t}m${e}\x1B[0m`}function I_e(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[M_e(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}Hn.EMERG+"",Hn.ALERT+"",Hn.CRIT+"",Hn.ERR+"",Hn.WARN+"",Hn.NOTICE+"",Hn.INFO+"",Hn.DEBUG+"",Hn.EMERG+"",Hn.ALERT+"",Hn.CRIT+"",Hn.ERR+"",Hn.WARN+"",Hn.NOTICE+"",Hn.INFO+"",Hn.DEBUG+"";Hn.EMERG+"",Hn.ALERT+"",Hn.CRIT+"",Hn.ERR+"",Hn.WARN+"",Hn.NOTICE+"",Hn.INFO+"",Hn.DEBUG+"",Hn.EMERG+"",Hn.ALERT+"",Hn.CRIT+"",Hn.ERR+"",Hn.WARN+"",Hn.NOTICE+"",Hn.INFO+"",Hn.DEBUG+"";let j_e=e=>[...I_e(e),e.message];function O_e(e){const t=j_e(e);return typeof t=="string"?[t]:Array.from(t)}let P_e=console.error;function D_e(e){e.level>F_e||P_e(...O_e(e))}let F_e=Hn.ALERT;function AP(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function L_e(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function B_e(e,t){if(typeof t!="object"||t===null)throw bo(new Ze(gt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const i=t==null?void 0:t[n];if(i==null){if(!r.required){ix("Using default for option: "+n);continue}throw bo(new Ze(gt.EINVAL,"Missing required option: "+n))}const s=(c,u=i)=>{var d;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?i instanceof c:c(i):typeof i===c||((d=i==null?void 0:i.constructor)===null||d===void 0?void 0:d.name)===c};if(Array.isArray(r.type)?r.type.some(c=>s(c)):s(r.type))continue;const a=typeof i=="object"&&"constructor"in i?i.constructor.name:typeof i,o=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw bo(new Ze(gt.EINVAL,`Incorrect type for "${n}": ${a} (expected ${l})`))}}function iY(e){return e!=null&&typeof e=="object"&&"backend"in e&&AP(e.backend)}const RP=0,$s=4,ns=2,p2=1,NP=1,$_e=2,z_e=4,sY=0,Na=1,Ed=2,AE=64,RE=128,U_e=256,NE=512,rm=1024,q_e=65536,V_e=262144,W_e=131072,ME=1052672,H_e=4096,G_e=32768,K_e=16384,Y_e=2048,wi=61440,xm=49152,Hd=40960,mc=32768,wm=24576,ks=16384,_m=8192,Sm=4096,Qw=2048,e1=1024,Z_e=512,X_e=448,aY=256,oY=128,lY=64,J_e=56,cY=32,uY=16,dY=8,Q_e=7,fY=4,hY=2,pY=1,eSe=0,to=4294967295,mY=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:NP,COPYFILE_FICLONE:$_e,COPYFILE_FICLONE_FORCE:z_e,F_OK:RP,O_APPEND:rm,O_CREAT:AE,O_DIRECT:K_e,O_DIRECTORY:q_e,O_DSYNC:H_e,O_EXCL:RE,O_NOATIME:V_e,O_NOCTTY:U_e,O_NOFOLLOW:W_e,O_NONBLOCK:Y_e,O_RDONLY:sY,O_RDWR:Ed,O_SYMLINK:G_e,O_SYNC:ME,O_TRUNC:NE,O_WRONLY:Na,R_OK:$s,S_IFBLK:wm,S_IFCHR:_m,S_IFDIR:ks,S_IFIFO:Sm,S_IFLNK:Hd,S_IFMT:wi,S_IFREG:mc,S_IFSOCK:xm,S_IRGRP:cY,S_IROTH:fY,S_IRUSR:aY,S_IRWXG:J_e,S_IRWXO:Q_e,S_IRWXU:X_e,S_ISGID:e1,S_ISUID:Qw,S_ISVTX:Z_e,S_IWGRP:uY,S_IWOTH:hY,S_IWUSR:oY,S_IXGRP:dY,S_IXOTH:pY,S_IXUSR:lY,UV_FS_O_FILEMAP:eSe,W_OK:ns,X_OK:p2,size_max:to},Symbol.toStringTag,{value:"Module"})),mS=BigInt(1e3);class gY{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:i,uid:s,gid:a,size:o,mode:l,ino:c,...u}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const d=Date.now();this.atimeMs=this._convert(t??d),this.mtimeMs=this._convert(n??d),this.ctimeMs=this._convert(r??d),this.birthtimeMs=this._convert(i??d),this.uid=this._convert(s??0),this.gid=this._convert(a??0),this.size=this._convert(o??0),this.ino=this._convert(c??0),this.mode=this._convert(l??420&mc),(this.mode&wi)==0&&(this.mode=this.mode|this._convert(mc)),Object.assign(this,u)}isFile(){return(this.mode&wi)===mc}isDirectory(){return(this.mode&wi)===ks}isSymbolicLink(){return(this.mode&wi)===Hd}isSocket(){return(this.mode&wi)===xm}isBlockDevice(){return(this.mode&wi)===wm}isCharacterDevice(){return(this.mode&wi)===_m}isFIFO(){return(this.mode&wi)===Sm}toJSON(){return bm(this,Cj)}hasAccess(t,n){return ui(n,this._isBigint?new Gd(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*mS}get mtimeNs(){return BigInt(this.mtimeMs)*mS}get ctimeNs(){return BigInt(this.ctimeMs)*mS}get birthtimeNs(){return BigInt(this.birthtimeMs)*mS}}function yY(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<to?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<to?e.gid=n:r=!1,r}class Gd extends gY{constructor(){super(...arguments),this._isBigint=!1}}class Cm extends gY{constructor(){super(...arguments),this._isBigint=!0}}function tSe(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class nSe{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=to,this.ffree=to}}class rSe{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(to),this.ffree=BigInt(to)}}var Ri=function(e,t,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,m=n.length-1;m>=0;m--){var y={};for(var b in r)y[b]=b==="access"?{}:r[b];for(var b in r.access)y.access[b]=r.access[b];y.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var v=(0,n[m])(o==="accessor"?{get:u.get,set:u.set}:u[l],y);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=a(v.get))&&(u.get=d),(d=a(v.set))&&(u.set=d),(d=a(v.init))&&i.unshift(d)}else(d=a(v))&&(o==="field"?i.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0},Wn=function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},MP=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Uo=0,iSe=1024;let Y$=(()=>{var e,t;let n=[vm()],r,i=[],s,a,o=[],l=[],c,u=[],d=[],h,m=[],y=[],b,v=[],x=[];return s=class{get key(){return this._key}set key(w){this._key=w,this.keySize=w.length}get value(){return this._value.subarray(0,this.valueSize)}set value(w){this._value=w,this.valueSize=w.length}constructor(w,S){this.keySize=Wn(this,o,0),this.valueSize=(Wn(this,l),Wn(this,u,0)),this._key=(Wn(this,d),Wn(this,m,"")),this._value=(Wn(this,y),Wn(this,v,new Uint8Array(iSe))),Wn(this,x),w&&(this.key=w),S&&(this.value=S)}},MP(s,"Attribute"),(()=>{const w=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;a=[(e=Xn).uint32.bind(e)],c=[(t=Xn).uint32.bind(t)],h=[Xn.char("keySize")],b=[Xn.uint8("valueSize")],Ri(null,null,a,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:S=>"keySize"in S,get:S=>S.keySize,set:(S,C)=>{S.keySize=C}},metadata:w},o,l),Ri(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:S=>"valueSize"in S,get:S=>S.valueSize,set:(S,C)=>{S.valueSize=C}},metadata:w},u,d),Ri(null,null,h,{kind:"field",name:"_key",static:!1,private:!1,access:{has:S=>"_key"in S,get:S=>S._key,set:(S,C)=>{S._key=C}},metadata:w},m,y),Ri(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:S=>"_value"in S,get:S=>S._value,set:(S,C)=>{S._value=C}},metadata:w},v,x),Ri(null,r={value:s},n,{kind:"class",name:s.name,metadata:w},null,i),s=r.value,w&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:w}),Wn(s,i)})(),s})(),uh=(()=>{var e;let t=[vm()],n,r=[],i,s,a=[],o=[],l,c=[],u=[];return i=class{has(d){return this.data.some(h=>h.key==d)}get(d){return this.data.find(h=>h.key==d)}set(d,h){const m=this.get(d);if(m){m.value=h;return}this.data.push(new Y$(d,h)),this.size++}remove(d){const h=this.data.findIndex(m=>m.key==d);return h===-1?!1:(this.data.splice(h,1),this.size--,!0)}keys(){return this.data.map(d=>d.key)}values(){return this.data.map(d=>d.value)}entries(){return this.data.map(d=>[d.key,d.value])}constructor(){this.size=Wn(this,a,0),this.data=(Wn(this,o),Wn(this,c,[])),Wn(this,u)}},MP(i,"Attributes"),(()=>{const d=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[(e=Xn).uint32.bind(e)],l=[Bx(Y$,"size")],Ri(null,null,s,{kind:"field",name:"size",static:!1,private:!1,access:{has:h=>"size"in h,get:h=>h.size,set:(h,m)=>{h.size=m}},metadata:d},a,o),Ri(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:h=>"data"in h,get:h=>h.data,set:(h,m)=>{h.data=m}},metadata:d},c,u),Ri(null,n={value:i},t,{kind:"class",name:i.name,metadata:d},null,r),i=n.value,d&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),Wn(i,r)})(),i})();const Cj=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],sSe=4;var vo;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(vo||(vo={}));let _s=(()=>{var e,t,n,r,i,s,a,o,l,c,u,d,h,m,y,b;let v=[vm()],x,w=[],S,C,k=[],A=[],R,N=[],I=[],O,L=[],P=[],V,F=[],J=[],U,G=[],$=[],ne,W=[],te=[],ee,re=[],de=[],oe,Ie=[],je=[],Me,Se=[],qe=[],Qe,We=[],Re=[],K,ge=[],Te=[],ce,le=[],ie=[],Ee,Be=[],Ce=[],ct,Tt=[],ft=[],Pt,Ut=[],Bt=[],tn,xe=[],D=[],Z,me=[],De=[],we,Ne=[],fe=[];var bt=S=class{constructor(ot){if(this.data=Wn(this,k,_j(0,to)),this.__data_old=(Wn(this,A),Wn(this,N,0)),this.size=(Wn(this,I),Wn(this,L,0)),this.mode=(Wn(this,P),Wn(this,F,0)),this.nlink=(Wn(this,J),Wn(this,G,1)),this.uid=(Wn(this,$),Wn(this,W,0)),this.gid=(Wn(this,te),Wn(this,re,0)),this.atimeMs=(Wn(this,de),Wn(this,Ie,Date.now())),this.birthtimeMs=(Wn(this,je),Wn(this,Se,Date.now())),this.mtimeMs=(Wn(this,qe),Wn(this,We,Date.now())),this.ctimeMs=(Wn(this,Re),Wn(this,ge,Date.now())),this.ino=(Wn(this,Te),Wn(this,le,_j(0,to))),this.__ino_old=(Wn(this,ie),Wn(this,Be,0)),this.flags=(Wn(this,Ce),Wn(this,Tt,0)),this.__after_flags=(Wn(this,ft),Wn(this,Ut,0)),this.version=(Wn(this,Bt),Wn(this,xe,0)),this.__padding=(Wn(this,D),Wn(this,me,[])),this.attributes=(Wn(this,De),Wn(this,Ne,new uh)),Wn(this,fe),!!ot){if(!("byteLength"in ot)){Object.assign(this,ot);return}if(ot.byteLength<$i(bt))throw TE(new Ze(gt.EIO,"Buffer is too small to create an inode"));EE(this,ot)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...bm(this,Cj),attributes:this.attributes}}toStats(){return new Gd(this)}update(ot){if(!ot)return!1;let B=!1;for(const $e of Cj)ot[$e]!==void 0&&($e=="ino"||$e=="data"||this[$e]!==ot[$e]&&($e=="atimeMs"&&this.flags&vo.NoAtime||(this[$e]=ot[$e],B=!0)));return ot.attributes&&(this.attributes=ot.attributes,B=!0),B&&(this.ctimeMs=Date.now()),B}};return MP(S,"Inode"),(()=>{const ot=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=Xn).uint32.bind(e)],R=[(t=Xn).uint32.bind(t)],O=[(n=Xn).uint32.bind(n)],V=[(r=Xn).uint16.bind(r)],U=[(i=Xn).uint32.bind(i)],ne=[(s=Xn).uint32.bind(s)],ee=[(a=Xn).uint32.bind(a)],oe=[(o=Xn).float64.bind(o)],Me=[(l=Xn).float64.bind(l)],Qe=[(c=Xn).float64.bind(c)],K=[(u=Xn).float64.bind(u)],ce=[(d=Xn).uint32.bind(d)],Ee=[(h=Xn).uint32.bind(h)],ct=[(m=Xn).uint32.bind(m)],Pt=[(y=Xn).uint16.bind(y)],tn=[(b=Xn).uint32.bind(b)],Z=[Xn.uint8(48)],we=[Bx(uh)],Ri(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:B=>"data"in B,get:B=>B.data,set:(B,$e)=>{B.data=$e}},metadata:ot},k,A),Ri(null,null,R,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:B=>"__data_old"in B,get:B=>B.__data_old,set:(B,$e)=>{B.__data_old=$e}},metadata:ot},N,I),Ri(null,null,O,{kind:"field",name:"size",static:!1,private:!1,access:{has:B=>"size"in B,get:B=>B.size,set:(B,$e)=>{B.size=$e}},metadata:ot},L,P),Ri(null,null,V,{kind:"field",name:"mode",static:!1,private:!1,access:{has:B=>"mode"in B,get:B=>B.mode,set:(B,$e)=>{B.mode=$e}},metadata:ot},F,J),Ri(null,null,U,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:B=>"nlink"in B,get:B=>B.nlink,set:(B,$e)=>{B.nlink=$e}},metadata:ot},G,$),Ri(null,null,ne,{kind:"field",name:"uid",static:!1,private:!1,access:{has:B=>"uid"in B,get:B=>B.uid,set:(B,$e)=>{B.uid=$e}},metadata:ot},W,te),Ri(null,null,ee,{kind:"field",name:"gid",static:!1,private:!1,access:{has:B=>"gid"in B,get:B=>B.gid,set:(B,$e)=>{B.gid=$e}},metadata:ot},re,de),Ri(null,null,oe,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:B=>"atimeMs"in B,get:B=>B.atimeMs,set:(B,$e)=>{B.atimeMs=$e}},metadata:ot},Ie,je),Ri(null,null,Me,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:B=>"birthtimeMs"in B,get:B=>B.birthtimeMs,set:(B,$e)=>{B.birthtimeMs=$e}},metadata:ot},Se,qe),Ri(null,null,Qe,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:B=>"mtimeMs"in B,get:B=>B.mtimeMs,set:(B,$e)=>{B.mtimeMs=$e}},metadata:ot},We,Re),Ri(null,null,K,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:B=>"ctimeMs"in B,get:B=>B.ctimeMs,set:(B,$e)=>{B.ctimeMs=$e}},metadata:ot},ge,Te),Ri(null,null,ce,{kind:"field",name:"ino",static:!1,private:!1,access:{has:B=>"ino"in B,get:B=>B.ino,set:(B,$e)=>{B.ino=$e}},metadata:ot},le,ie),Ri(null,null,Ee,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:B=>"__ino_old"in B,get:B=>B.__ino_old,set:(B,$e)=>{B.__ino_old=$e}},metadata:ot},Be,Ce),Ri(null,null,ct,{kind:"field",name:"flags",static:!1,private:!1,access:{has:B=>"flags"in B,get:B=>B.flags,set:(B,$e)=>{B.flags=$e}},metadata:ot},Tt,ft),Ri(null,null,Pt,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:B=>"__after_flags"in B,get:B=>B.__after_flags,set:(B,$e)=>{B.__after_flags=$e}},metadata:ot},Ut,Bt),Ri(null,null,tn,{kind:"field",name:"version",static:!1,private:!1,access:{has:B=>"version"in B,get:B=>B.version,set:(B,$e)=>{B.version=$e}},metadata:ot},xe,D),Ri(null,null,Z,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:B=>"__padding"in B,get:B=>B.__padding,set:(B,$e)=>{B.__padding=$e}},metadata:ot},me,De),Ri(null,null,we,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:B=>"attributes"in B,get:B=>B.attributes,set:(B,$e)=>{B.attributes=$e}},metadata:ot},Ne,fe),Ri(null,x={value:S},v,{kind:"class",name:S.name,metadata:ot},null,w),bt=S=x.value,ot&&Object.defineProperty(S,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ot}),Wn(S,w)})(),bt=S})();function aSe(e){return(e.mode&wi)===mc}function Cc(e){return(e.mode&wi)===ks}function q0(e){return(e.mode&wi)===Hd}function oSe(e){return(e.mode&wi)===xm}function $x(e){return(e.mode&wi)===wm}function zx(e){return(e.mode&wi)===_m}function lSe(e){return(e.mode&wi)===Sm}function ui(e,t,n){const r=(e==null?void 0:e.credentials)||Ac.credentials;if(q0(t)||r.euid===0||r.egid===0)return!0;let i=0;return r.uid===t.uid&&(t.mode&aY&&(i|=$s),t.mode&oY&&(i|=ns),t.mode&lY&&(i|=p2)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&cY&&(i|=$s),t.mode&uY&&(i|=ns),t.mode&dY&&(i|=p2)),t.mode&fY&&(i|=$s),t.mode&hY&&(i|=ns),t.mode&pY&&(i|=p2),(i&n)===n}const Z$=1;class AC extends Map{constructor(){super(...arguments),this.maxSize=to}toJSON(){return{version:Z$,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*$i(_s);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ze.With("ENOENT",t);if((n.mode&wi)!=ks)throw Ze.With("ENOTDIR",t);const r={};for(const i of this.keys())Gr(i)==t&&i!=t&&(r[U0(i)]=this.get(i).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&wi)!=ks)continue;const i={};for(const s of this.keys())Gr(s)==n&&s!=n&&(i[U0(s)]=this.get(s).ino);t.set(n,i)}return t}fromJSON(t){var n;if(t.version!=Z$)throw new Ze(gt.EINVAL,"Index version mismatch");this.clear();for(const[r,i]of Object.entries(t.entries))(n=i.data)!==null&&n!==void 0||(i.data=_j(1,to)),r=="/"&&(i.ino=0),this.set(r,new _s(i));return this}static parse(t){if(!p_e(t))throw new Ze(gt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new AC;return r.fromJSON(n),r}}const XN=4096;let IP=class kj{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===kj.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===kj.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:i}=await this.stat(t),{start:s=0,end:a=i}=n;for(let o=s;o<a;o+=XN){const l=o+XN>a?a-o:XN,c=new Uint8Array(l);await this.read(t,c,o,o+l).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let i=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(s,a)=>{let o=!1;const l=u=>{o=!0,a.error(u)},{size:c}=await this.stat(t);await this.write(t,s,i).catch(l),!o&&(i+=s.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,i)}).catch(l))}})}};function Va(e){return JSON.parse(_P(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function Sl(e){return Tp(JSON.stringify(e))}function Ah(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ze(gt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function RC(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ze(gt.EINVAL,"Invalid time.")}}function jn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ze(gt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ze(gt.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ze(gt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Dd(e)}function Td(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:Ah("mode"in e?e==null?void 0:e.mode:null,r)}}class cSe{constructor(t,n,r,i){ve(this,"id");ve(this,"_size");ve(this,"options");ve(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),i==null||i.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const i=t-r.offset;r.data.byteLength>i&&(r.data=r.data.subarray(0,i)),r.ranges=r.ranges.filter(s=>s.start<t).map(s=>s.end>t?{start:s.start,end:t}:s)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],i=this.regions[n+1];if(i.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...i.ranges),r.ranges.sort((s,a)=>s.start-a.start),r.ranges=r.ranges.reduce((s,a)=>(!s.length||s.at(-1).end<a.start?s.push(a):s.at(-1).end=Math.max(s.at(-1).end,a.end),s),[]),r.data=Fx(r.data,i.offset+i.data.byteLength),r.data.set(i.data,i.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const s of i.ranges)if(!(s.end<=t)&&(s.start>=n||(s.start>t&&r.push({start:t,end:Math.min(s.start,n)}),s.end>t&&(t=Math.max(t,s.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const s of this.regions){if(s.offset>=n)break;for(const a of s.ranges)if(!(a.end<=t)){if(a.start>=n)break;r.push({start:Math.max(t,a.start),end:Math.min(n,a.end)})}}r.sort((s,a)=>s.start-a.start);const i=[];for(const s of r){const a=i.at(-1);a&&s.start<=a.end?a.end=Math.max(a.end,s.end):i.push(s)}return i}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,i=this.regionAt(n);if(i)return i.data=Fx(i.data,r),i.data.set(t,n),i.ranges.push({start:n,end:r}),i.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const s={data:t,offset:n,ranges:[{start:n,end:r}]},a=this.regions.findIndex(o=>o.offset>n);return a==-1?this.regions.push(s):this.regions.splice(a,0,s),this.collect(),this}}var JN,QN,eM;(JN=Promise.withResolvers)!==null&&JN!==void 0||(Promise.withResolvers=(Ma("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}));(QN=Symbol.dispose)!==null&&QN!==void 0||(Symbol.dispose=(Ma("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(eM=Symbol.asyncDispose)!==null&&eM!==void 0||(Symbol.asyncDispose=(Ma("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class bY{constructor(t){this.store=t}}class uSe extends bY{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class Ej extends bY{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,i;(r=(i=this.store).cache)!==null&&r!==void 0||(i.cache=new Map);const s=this.store.cache.get(t);return s?(n&&(s.size=n.size),s):n?new cSe(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var i;const s=this._cached(t);if(!s)return;r??(r=s.size);const a=s.missing(n,r);for(const{start:l,end:c}of a)this.async(this.get(t,l,c));if(a.length)throw bo(Ze.With("EAGAIN",(i=this.store._fs)===null||i===void 0?void 0:i._path(t)));const o=s.regionAt(n);if(!o){Ma("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class dSe{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const i=await this.raw.get(t,n,r);return this.stash(t),i}getSync(t,n=0,r){const i=this.raw.getSync(t,n,r);return this.stash(t),i}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const i=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,i),n)}catch(s){if(!(this.raw instanceof Ej))throw s;const o=this.raw._cached(t);if(!o)throw s;for(const l of o.cached(n,i??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const i=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,i),n)}catch(s){if(!(this.raw instanceof Ej))throw s;const o=this.raw._cached(t);if(!o)throw s;for(const l of o.cached(n,i??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Ti=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Ai=function(e){return function(t){function n(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,i=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&i===1)return i=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(a).then(s,function(o){return n(o),s()})}else i|=1}catch(o){n(o)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class vY extends IP{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[i,s]of this._ids){const a=nY(t,i);if(a.startsWith(".."))continue;let o=ii(n,a);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:i,newKey:o,ino:s})}for(const{oldKey:i,newKey:s,ino:a}of r){this._ids.delete(i),this._ids.set(s,a);const o=this._paths.get(a);if(!o){Ma("Missing paths in table for ino "+a);continue}o.delete(i),o.add(s)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,i;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,ix(this.name+": supports features: "+((i=this.store.flags)===null||i===void 0?void 0:i.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Ti(n,this.transaction(),!0),i=t.directories();for(const[s,a]of t)this._add(a.ino,s),await r.set(a.ino,ha(a)),i.has(s)&&await r.set(a.data,Sl(i.get(s)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Ai(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Ti(n,this.transaction(),!1),i=t.directories();for(const[s,a]of t)this._add(a.ino,s),r.setSync(a.ino,ha(a)),i.has(s)&&r.setSync(a.data,Sl(i.get(s)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Ai(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new AC,i=Ti(n,this.transaction(),!0),s=[["/",0]],a=V$(Ze.With("EDEADLK"));for(;s.length;){const[o,l]=s.shift(),c=new _s(await i.get(l));if(r.set(o,c),c.mode&ks){const u=Va((t=await i.get(c.data))!==null&&t!==void 0?t:mi(Ze.With("ENODATA",o)));for(const[d,h]of Object.entries(u))s.push([ii(o,d),h])}}return a(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Ai(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new AC,i=Ti(n,this.transaction(),!1),s=[["/",0]],a=V$(Ze.With("EDEADLK"));for(;s.length;){const[o,l]=s.shift(),c=new _s(i.getSync(l));if(r.set(o,c),c.mode&ks){const u=Va((t=i.getSync(c.data))!==null&&t!==void 0?t:mi(Ze.With("ENODATA",o)));for(const[d,h]of Object.entries(u))s.push([ii(o,d),h])}}return a(),r}catch(r){n.error=r,n.hasError=!0}finally{Ai(n)}}async rename(t,n){var r,i,s;const a={stack:[],error:void 0,hasError:!1};try{const o=Ti(a,this.transaction(),!0),l=Xc(t),c=Xc(n),u=await this.findInode(o,l.dir,"rename"),d=Va((r=await o.get(u.data))!==null&&r!==void 0?r:mi(Ze.With("ENODATA",l.dir,"rename")));if(!d[l.base])throw Ze.With("ENOENT",t,"rename");const h=d[l.base];if(h!=this._ids.get(t)&&bo(`Ino mismatch while renaming ${t} to ${n}`),delete d[l.base],(c.dir+"/").startsWith(t+"/"))throw new Ze(gt.EBUSY,l.dir);const m=c.dir==l.dir,y=m?u:await this.findInode(o,c.dir,"rename"),b=m?d:Va((i=await o.get(y.data))!==null&&i!==void 0?i:mi(Ze.With("ENODATA",c.dir,"rename")));if(b[c.base]){const v=new _s((s=await o.get(b[c.base]))!==null&&s!==void 0?s:mi(Ze.With("ENOENT",n,"rename")));if(!v.toStats().isFile())throw Ze.With("EPERM",n,"rename");await o.remove(v.data),await o.remove(b[c.base])}b[c.base]=h,await o.set(u.data,Sl(d)),await o.set(y.data,Sl(b)),await o.commit(),this._move(t,n)}catch(o){a.error=o,a.hasError=!0}finally{const o=Ai(a);o&&await o}}renameSync(t,n){var r,i,s;const a={stack:[],error:void 0,hasError:!1};try{const o=Ti(a,this.transaction(),!1),l=Xc(t),c=Xc(n),u=this.findInodeSync(o,l.dir,"rename"),d=Va((r=o.getSync(u.data))!==null&&r!==void 0?r:mi(Ze.With("ENODATA",l.dir,"rename")));if(!d[l.base])throw Ze.With("ENOENT",t,"rename");const h=d[l.base];if(h!=this._ids.get(t)&&bo(`Ino mismatch while renaming ${t} to ${n}`),delete d[l.base],(c.dir+"/").startsWith(t+"/"))throw new Ze(gt.EBUSY,l.dir);const m=c.dir===l.dir,y=m?u:this.findInodeSync(o,c.dir,"rename"),b=m?d:Va((i=o.getSync(y.data))!==null&&i!==void 0?i:mi(Ze.With("ENODATA",c.dir,"rename")));if(b[c.base]){const v=new _s((s=o.getSync(b[c.base]))!==null&&s!==void 0?s:mi(Ze.With("ENOENT",n,"rename")));if(!v.toStats().isFile())throw Ze.With("EPERM",n,"rename");o.removeSync(v.data),o.removeSync(b[c.base])}b[c.base]=h,o.setSync(u.data,Sl(d)),o.setSync(y.data,Sl(b)),o.commitSync(),this._move(t,n)}catch(o){a.error=o,a.hasError=!0}finally{Ai(a)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Ti(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Ai(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Ti(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Ai(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=Ti(r,this.transaction(),!0),s=await this.findInode(i,t,"touch");s.update(n)&&(this._add(s.ino,t),i.setSync(s.ino,ha(s))),await i.commit()}catch(i){r.error=i,r.hasError=!0}finally{const i=Ai(r);i&&await i}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=Ti(r,this.transaction(),!1),s=this.findInodeSync(i,t,"touch");s.update(n)&&(this._add(s.ino,t),i.setSync(s.ino,ha(s))),i.commitSync()}catch(i){r.error=i,r.hasError=!0}finally{Ai(r)}}async createFile(t,n){return n.mode|=mc,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=mc,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ze.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ze.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=ks,await this.commitNew(t,n,Tp("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=ks,this.commitNewSync(t,n,Tp("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const i=Ti(r,this.transaction(),!0),s=await this.findInode(i,t,"readdir");return Object.keys(Va((n=await i.get(s.data))!==null&&n!==void 0?n:mi(Ze.With("ENOENT",t,"readdir"))))}catch(i){r.error=i,r.hasError=!0}finally{const i=Ai(r);i&&await i}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const i=Ti(r,this.transaction(),!1),s=this.findInodeSync(i,t,"readdir");return Object.keys(Va((n=i.getSync(s.data))!==null&&n!==void 0?n:mi(Ze.With("ENOENT",t,"readdir"))))}catch(i){r.error=i,r.hasError=!0}finally{Ai(r)}}async sync(t,n,r){const i={stack:[],error:void 0,hasError:!1};try{const s=Ti(i,this.transaction(),!0),a=await this.findInode(s,t,"sync");n&&await s.set(a.data,n),a.update(r)&&(this._add(a.ino,t),await s.set(a.ino,ha(a))),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Ai(i);s&&await s}}syncSync(t,n,r){const i={stack:[],error:void 0,hasError:!1};try{const s=Ti(i,this.transaction(),!1),a=this.findInodeSync(s,t,"sync");n&&s.setSync(a.data,n),a.update(r)&&(this._add(a.ino,t),s.setSync(a.ino,ha(a))),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Ai(i)}}async link(t,n){var r;const i={stack:[],error:void 0,hasError:!1};try{const s=Ti(i,this.transaction(),!0),a=Gr(n),o=await this.findInode(s,a,"link"),l=Va((r=await s.get(o.data))!==null&&r!==void 0?r:mi(Ze.With("ENOENT",a,"link"))),c=await this.findInode(s,t,"link");c.nlink++,l[U0(n)]=c.ino,this._add(c.ino,n),await s.set(c.ino,ha(c)),await s.set(o.data,Sl(l)),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Ai(i);s&&await s}}linkSync(t,n){var r;const i={stack:[],error:void 0,hasError:!1};try{const s=Ti(i,this.transaction(),!1),a=Gr(n),o=this.findInodeSync(s,a,"link"),l=Va((r=s.getSync(o.data))!==null&&r!==void 0?r:mi(Ze.With("ENOENT",a,"link"))),c=this.findInodeSync(s,t,"link");c.nlink++,l[U0(n)]=c.ino,this._add(c.ino,n),s.setSync(c.ino,ha(c)),s.setSync(o.data,Sl(l)),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Ai(i)}}async read(t,n,r,i){var s;const a={stack:[],error:void 0,hasError:!1};try{const o=Ti(a,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const c=(s=await o.get(l.data,r,i))!==null&&s!==void 0?s:mi(Ze.With("ENODATA",t,"read")),u=o.flag("partial")?c:c.subarray(r,i);u.byteLength>n.byteLength&&bo(`Trying to place ${u.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(u)}catch(o){a.error=o,a.hasError=!0}finally{const o=Ai(a);o&&await o}}readSync(t,n,r,i){var s;const a={stack:[],error:void 0,hasError:!1};try{const o=Ti(a,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const c=(s=o.getSync(l.data,r,i))!==null&&s!==void 0?s:mi(Ze.With("ENODATA",t,"read")),u=o.flag("partial")?c:c.subarray(r,i);u.byteLength>n.byteLength&&bo(`Trying to place ${u.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(u)}catch(o){a.error=o,a.hasError=!0}finally{Ai(a)}}async write(t,n,r){var i;const s={stack:[],error:void 0,hasError:!1};try{const a=Ti(s,this.transaction(),!0),o=await this.findInode(a,t,"write");let l=n;a.flag("partial")||(l=Fx((i=await a.get(o.data))!==null&&i!==void 0?i:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await a.set(o.data,l,r),this._add(o.ino,t),await a.commit()}catch(a){s.error=a,s.hasError=!0}finally{const a=Ai(s);a&&await a}}writeSync(t,n,r){var i;const s={stack:[],error:void 0,hasError:!1};try{const a=Ti(s,this.transaction(),!1),o=this.findInodeSync(a,t,"write");let l=n;a.flag("partial")||(l=Fx((i=a.getSync(o.data))!==null&&i!==void 0?i:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),a.setSync(o.data,l,r),this._add(o.ino,t),a.commitSync()}catch(a){s.error=a,s.hasError=!0}finally{Ai(s)}}transaction(){return new dSe(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Ti(t,this.transaction(),!0);if(await n.get(Uo))return;const r=new _s({ino:Uo,data:1,mode:511|ks});await n.set(r.data,Tp("{}")),this._add(Uo,"/"),await n.set(Uo,ha(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Ai(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Ti(t,this.transaction(),!1);if(n.getSync(Uo))return;const r=new _s({ino:Uo,data:1,mode:511|ks});n.setSync(r.data,Tp("{}")),this._add(Uo,"/"),n.setSync(Uo,ha(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Ai(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Ma("Attempted to populate tables after initialization");return}ix("Populating tables with existing store metadata");const n=Ti(t,this.transaction(),!0),r=await n.get(Uo);if(!r){TP("Store does not have a root inode");const o=new _s({ino:Uo,data:1,mode:511|ks});await n.set(o.data,Tp("{}")),this._add(Uo,"/"),await n.set(Uo,ha(o)),await n.commit();return}if(r.length<$i(_s)){TE("Store contains an invalid root inode. Refusing to populate tables");return}const i=new Set;let s=0;const a=[["/",Uo]];for(;a.length>0;){s++;const[o,l]=a.shift();this._add(l,o);const c=await n.get(l);if(!c){Ma("Store is missing data for inode: "+l);continue}if(c.length<$i(_s)){Ma(`Invalid inode size for ino ${l}: ${c.length}`);continue}const u=new _s(c);if((u.mode&ks)!=ks||i.has(l))continue;i.add(l);const d=await n.get(u.data);if(!d){Ma("Store is missing directory data: "+u.data);continue}const h=Va(d);for(const[m,y]of Object.entries(h))a.push([ii(o,m),y])}ix(`Added ${s} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Ai(t);n&&await n}}async findInode(t,n,r){var i;const s=this._ids.get(n);if(s===void 0)throw Ze.With("ENOENT",n,r);return new _s((i=await t.get(s))!==null&&i!==void 0?i:mi(Ze.With("ENOENT",n,r)))}findInodeSync(t,n,r){var i;const s=this._ids.get(n);if(s===void 0)throw Ze.With("ENOENT",n,r);return new _s((i=t.getSync(s))!==null&&i!==void 0?i:mi(Ze.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const i=this._lastID;if(i>to)throw bo(new Ze(gt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(i,t),i}async commitNew(t,n,r,i){var s;const a={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ze.With("EEXIST",t,i);const o=Ti(a,this.transaction(),!0),{dir:l,base:c}=Xc(t),u=await this.findInode(o,l,i),d=Va((s=await o.get(u.data))!==null&&s!==void 0?s:mi(Ze.With("ENOENT",l,i)));if(d[c])throw Ze.With("EEXIST",t,i);const h=this.allocNew(t,i),m=new _s({...n,ino:h,data:h+1,size:r.byteLength});return await o.set(m.ino,ha(m)),await o.set(m.data,r),d[c]=m.ino,await o.set(u.data,Sl(d)),await o.commit(),m}catch(o){a.error=o,a.hasError=!0}finally{const o=Ai(a);o&&await o}}commitNewSync(t,n,r,i){var s;const a={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ze.With("EEXIST",t,i);const o=Ti(a,this.transaction(),!1),{dir:l,base:c}=Xc(t),u=this.findInodeSync(o,l,i),d=Va((s=o.getSync(u.data))!==null&&s!==void 0?s:mi(Ze.With("ENOENT",l,i)));if(d[c])throw Ze.With("EEXIST",t,i);const h=this.allocNew(t,i),m=new _s({...n,ino:h,data:h+1,size:r.byteLength});return o.setSync(m.ino,ha(m)),o.setSync(m.data,r),d[c]=m.ino,o.setSync(u.data,Sl(d)),o.commitSync(),m}catch(o){a.error=o,a.hasError=!0}finally{Ai(a)}}async remove(t,n){var r,i;const s={stack:[],error:void 0,hasError:!1};try{const a=n?"rmdir":"unlink",o=Ti(s,this.transaction(),!0),{dir:l,base:c}=Xc(t),u=await this.findInode(o,l,a),d=Va((r=await o.get(u.data))!==null&&r!==void 0?r:mi(Ze.With("ENOENT",l,a)));if(!d[c])throw Ze.With("ENOENT",t,a);const h=d[c],m=new _s((i=await o.get(h))!==null&&i!==void 0?i:mi(Ze.With("ENOENT",t,a)));if(delete d[c],!n&&Cc(m))throw Ze.With("EISDIR",t,a);await o.set(u.data,Sl(d)),m.nlink>1?(m.update({nlink:m.nlink-1}),await o.set(m.ino,ha(m))):(await o.remove(m.data),await o.remove(h),this._remove(h)),await o.commit()}catch(a){s.error=a,s.hasError=!0}finally{const a=Ai(s);a&&await a}}removeSync(t,n){var r,i;const s={stack:[],error:void 0,hasError:!1};try{const a=n?"rmdir":"unlink",o=Ti(s,this.transaction(),!1),{dir:l,base:c}=Xc(t),u=this.findInodeSync(o,l,a),d=Va((r=o.getSync(u.data))!==null&&r!==void 0?r:mi(Ze.With("ENOENT",l,a))),h=d[c];if(!h)throw Ze.With("ENOENT",t,a);const m=new _s((i=o.getSync(h))!==null&&i!==void 0?i:mi(Ze.With("ENOENT",t,a)));if(delete d[c],!n&&Cc(m))throw Ze.With("EISDIR",t,a);o.setSync(u.data,Sl(d)),m.nlink>1?(m.update({nlink:m.nlink-1}),o.setSync(m.ino,ha(m))):(o.removeSync(m.data),o.removeSync(h),this._remove(h)),o.commitSync()}catch(a){s.error=a,s.hasError=!0}finally{Ai(s)}}}class fSe extends uSe{async keys(){return this.store.keys()}async get(t){var n,r,i;return await((i=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&i!==void 0?i:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class hSe extends Map{constructor(t=to,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new fSe(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const pSe={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new vY(new hSe(e,t));return n.checkRootSync(),n}},mSe=pSe;let zs=!0;class X$ extends xP{get cursor(){return this._cursor}constructor(t,n,r,i=!1){super(),this.input=t,this.output=n,this.terminal=i,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=s=>{if(!(this._paused||this._closed)){this._buffer+=typeof s=="string"?s:s.toString("utf8");for(let a=this._buffer.indexOf(`
`);a>=0;a=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,a);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(a+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;Cl(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;Cl(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);gS(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);gS(this.output,0),Cl(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const i=this.line.slice(0,r+1)+this.line.slice(this._cursor),s=r+1;this._renderLine(i),this._cursor=s,this._cursor=s,Cl(this.output,-i.length,0),Cl(this.output,s,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const i=Math.max(0,Math.min(this.line.length,this._cursor+r));if(i==this._cursor)return;Cl(this.output,r,0),this._cursor=i,this._cursor=i;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(Cl(this.output,-this._cursor,0),Cl(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);gS(this.output,0),Cl(this.output,0,0),this.output.write(this._prompt+r),this.line=r,Cl(this.output,-r.length,0),Cl(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(gS(this.output,0),Cl(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const i=typeof n=="function"?n:r;if(this._closed||!this.output){i("");return}this.output.write(t),this.once("line",i)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Ma("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Ma("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",i=>n({value:i,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function gSe(e,t,n,r){return"input"in e?new X$(e.input,e.output,e.completer,e.terminal):new X$(e,t,n,r)}function gS(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function Cl(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class NC{get position(){return this.flag&rm?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,i,s,a){this.context=t,this.path=n,this.fs=r,this.internalPath=i,this.flag=s,this.inode=a,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&ME||this.inode.flags&vo.Sync)}sync(){if(this.closed)throw Ze.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ze.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ze.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ze.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ze.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ze.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Na||this.flag&Ed))throw new Ze(gt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,i=this.position){if(this.closed)throw Ze.With("EBADF",this.path,"write");if(!(this.flag&Na||this.flag&Ed))throw new Ze(gt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&vo.Immutable)throw new Ze(gt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const s=i+r,a=t.subarray(n,n+r);return!zx(this.inode)&&!$x(this.inode)&&s>this.inode.size&&(this.inode.size=s),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=i+a.byteLength,this.fs.writeSync(this.internalPath,a,i),this._isSync&&this.sync(),a.byteLength}read(t,n=0,r=t.byteLength-n,i=this.position){if(this.closed)throw Ze.With("EBADF",this.path,"read");if(this.flag&Na)throw new Ze(gt.EPERM,"File not opened with a readable mode");this.inode.flags&vo.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let s=i+r;!zx(this.inode)&&!$x(this.inode)&&s>this.inode.size&&(s=i+Math.max(this.inode.size-i,0)),this._position=s;const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,a.subarray(n,n+r),i,s),this._isSync&&this.sync(),s-i}chmod(t){if(this.closed)throw Ze.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>wi?-61441:wi)|t,(this._isSync||t>wi)&&this.sync()}chown(t,n){if(this.closed)throw Ze.With("EBADF",this.path,"chown");this.dirty=!0,yY(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ze.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ze.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ze.With("EBADF",this.path,"streamWrite");if(this.inode.flags&vo.Immutable)throw new Ze(gt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function MC(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:Ac.descriptors,i=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(i,e),i}function Fa(e,t){var n;const i=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Ac.descriptors).get(t);if(!i)throw new Ze(gt.EBADF);return i}function xY(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Ac.descriptors).delete(t)}const ySe=/[rwasx]{1,2}\+?/;function Ad(e){if(typeof e=="number")return e;if(!ySe.test(e))throw new Ze(gt.EINVAL,"Invalid flag string: "+e);return bSe(e)}function bSe(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ze(gt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?sY:AE;return e.includes("w")&&(t|=NE),e.includes("a")&&(t|=rm),e.includes("+")?t|=Ed:e.includes("r")||(t|=Na),e.includes("s")&&(t|=ME),e.includes("x")&&(t|=RE),t}function wY(e){let t=0;return e&Na||(t|=$s),(e&Na||e&Ed)&&(t|=ns),t}const Ux=new Map;jP("/",mSe.create({label:"root"}));function jP(e,t){if(e[0]!="/"&&(e="/"+e),e=Dd.call(this,e),Ux.has(e))throw bo(new Ze(gt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Ux.set(e,t),rY(`Mounted ${t.name} on ${e}`),ix(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function _Y(e){if(e[0]!="/"&&(e="/"+e),e=Dd.call(this,e),!Ux.has(e)){Ma(e+" is already unmounted");return}Ux.delete(e),TP("Unmounted "+e)}function Tr(e,t){const n=(t==null?void 0:t.root)||Ac.root;e=jn(ii(n,e));const r=[...Ux].sort((i,s)=>i[0].length>s[0].length?-1:1);for(const[i,s]of r)if(xSe(i,e))return e=e.slice(i.length>1?i.length:0),e===""&&(e=n),{fs:s,path:e,mountPoint:i,root:n};throw N_e(new Ze(gt.EIO,"No file system",e))}function tM(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function di(e,t){typeof e.stack=="string"&&(e.stack=tM(e.stack,t));try{e.message=tM(e.message,t)}catch{}return e.path&&(e.path=tM(e.path,t)),e}function SY(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||to),files:(t?BigInt:Number)(n.totalNodes||to),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function vSe(e){var t,n,r,i,s,a,o;const l=this!==null&&this!==void 0?this:Ac;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((i=l.credentials)===null||i===void 0?void 0:i.egid)!==0)throw new Ze(gt.EPERM,"Can not chroot() as non-root user");(s=l.root)!==null&&s!==void 0||(l.root="/");const c=ii(l.root,e);for(const u of(o=(a=l.descriptors)===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[]){if(!u.path.startsWith(l.root))throw Ze.With("EBUSY",u.path,"chroot");u.path=u.path.slice(l.root.length)}if(c.length>l.root.length)throw new Ze(gt.EPERM,"Can not chroot() outside of current root");l.root=c}function xSe(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class CY extends xP{off(t,n,r,i){return super.off(t,n,r,i)}removeListener(t,n,r,i){return super.removeListener(t,n,r,i)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ze.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ze.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ze.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ze.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ze.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class kY extends CY{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?ii(t.root,n):n,_Se(this.realpath,this)}close(){super.emit("close"),SSe(this.realpath,this)}[Symbol.dispose](){this.close()}}class wSe extends CY{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=dh(this.path);tSe(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=dh(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Zf=new Map;function _Se(e,t){const n=jn(e);Zf.has(n)||Zf.set(n,new Set),Zf.get(n).add(t)}function SSe(e,t){const n=jn(e);Zf.has(n)&&(Zf.get(n).delete(t),Zf.get(n).size===0&&Zf.delete(n))}function ba(e,t,n){var r;e&&(n=ii((r=e.root)!==null&&r!==void 0?r:"/",n)),n=jn(n);for(let i=n;i!="/";i=Gr(i)){const s=Zf.get(i);if(s)for(const a of s)a.emit("change",t,nY.call(a._context,i,n)||U0(n))}}var t1=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},n1=function(e){return function(t){function n(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,i=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&i===1)return i=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(a).then(s,function(o){return n(o),s()})}else i|=1}catch(o){n(o)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function CSe(e,t){e=jn(e),t=jn(t);const n=Tr(e,this),r=Tr(t,this);if(!dh.call(this,Gr(e)).hasAccess(ns,this))throw Ze.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),ba(this,"rename",e.toString()),ba(this,"change",t.toString());return}LP.call(this,t,FP(e)),DP.call(this,e),ba(this,"rename",e.toString())}catch(i){throw di(i,{[n.path]:e,[r.path]:t})}}function OP(e){e=jn(e);try{const{fs:t,path:n}=Tr(Rh.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==gt.ENOENT)return!1;throw t}}function dh(e,t){e=jn(e);const{fs:n,path:r}=Tr(Rh.call(this,e),this);try{const i=n.statSync(r);if(zs&&!ui(this,i,$s))throw Ze.With("EACCES",r,"stat");return t!=null&&t.bigint?new Cm(i):new Gd(i)}catch(i){throw di(i,{[r]:e})}}function PP(e,t){e=jn(e);const{fs:n,path:r}=Tr(e,this);try{const i=n.statSync(r);if(zs&&!ui(this,i,$s))throw Ze.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Cm(i):new Gd(i)}catch(i){throw di(i,{[r]:e})}}function kSe(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=t1(n,km.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ze(gt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{n1(n)}}function DP(e){e=jn(e);const{fs:t,path:n}=Tr(e,this);try{if(zs&&!ui(this,t.statSync(n),ns))throw Ze.With("EACCES",n,"unlink");t.unlinkSync(n),ba(this,"rename",e.toString())}catch(r){throw di(r,{[n]:e})}}function km(e,t){var n;e=jn(e);const r=Ah(t.mode,420),i=Ad(t.flag);e=t.preserveSymlinks?e:Rh.call(this,e);const{fs:s,path:a}=Tr(e,this);let o;try{o=s.statSync(a)}catch{}if(!o){if(!(i&AE))throw Ze.With("ENOENT",e,"_open");const c=s.statSync(Gr(a));if(!ui(this,c,ns))throw Ze.With("EACCES",Gr(e),"_open");if(!Cc(c))throw Ze.With("ENOTDIR",Gr(e),"_open");if(!t.allowDirectory&&r&ks)throw Ze.With("EISDIR",e,"_open");if(!ui(this,c,ns))throw Ze.With("EACCES",Gr(a),"_open");const{euid:u,egid:d}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Ac.credentials,h=s.createFileSync(a,{mode:r,uid:c.mode&Qw?c.uid:u,gid:c.mode&e1?c.gid:d});return new NC(this,e,s,a,i,h)}if(!ui(this,o,r)||!ui(this,o,wY(i)))throw Ze.With("EACCES",e,"_open");if(i&RE)throw Ze.With("EEXIST",e,"_open");const l=new NC(this,e,s,a,i,o);if(i&NE&&l.truncate(0),!t.allowDirectory&&o.mode&ks)throw Ze.With("EISDIR",e,"_open");return l}function IE(e,t,n=RP){return MC(km.call(this,e,{flag:t,mode:n}))}function jE(e,t,n){return MC(km.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function EY(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=t1(r,typeof e=="number"?Fa(this,e):km.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:s}=i.stat(),a=new Uint8Array(s);return i.read(a,0,s,0),a}catch(i){r.error=i,r.hasError=!0}finally{n1(r)}}function FP(e,t={}){const n=Td(t,null,"r",420);if(Ad(n.flag)&Na)throw new Ze(gt.EINVAL,"Flag passed to readFile must allow for reading");const i=ji.from(EY.call(this,e,n.flag,!1));return n.encoding?i.toString(n.encoding):i}function LP(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const i=Td(n,"utf8","w+",420),s=Ad(i.flag);if(!(s&Na||s&Ed))throw new Ze(gt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!i.encoding)throw new Ze(gt.EINVAL,"Encoding not specified");const a=typeof t=="string"?ji.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!a)throw new Ze(gt.EINVAL,"Data not specified");t1(r,typeof e=="number"?Fa(this,e):km.call(this,e.toString(),{flag:s,mode:i.mode,preserveSymlinks:!0}),!1).write(a,0,a.byteLength,0),ba(this,"change",e.toString())}catch(i){r.error=i,r.hasError=!0}finally{n1(r)}}function ESe(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const i=Td(n,"utf8","a+",420),s=Ad(i.flag);if(!(s&rm))throw new Ze(gt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!i.encoding)throw new Ze(gt.EINVAL,"Encoding not specified");const a=typeof t=="string"?ji.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);t1(r,km.call(this,typeof e=="number"?Fa(this,e).path:e.toString(),{flag:s,mode:i.mode,preserveSymlinks:!0}),!1).write(a,0,a.byteLength)}catch(i){r.error=i,r.hasError=!0}finally{n1(r)}}function TSe(e,t){const n=Fa(this,e).stat();return t!=null&&t.bigint?new Cm(n):new Gd(n)}function Em(e){Fa(this,e).close(),xY(this,e)}function ASe(e,t=0){if(t||(t=0),t<0)throw new Ze(gt.EINVAL);Fa(this,e).truncate(t)}function RSe(e){Fa(this,e).sync()}function NSe(e){Fa(this,e).datasync()}function MSe(e,t,n,r,i){let s,a,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const d=typeof r=="string"?r:"utf8";a=0,s=ji.from(t,d),o=s.byteLength}else s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=n,o=r,l=typeof i=="number"?i:null;const c=Fa(this,e);l??(l=c.position);const u=c.write(s,a,o,l);return ba(this,"change",c.path),u}function ISe(e,t,n,r,i){const s=Fa(this,e),a=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,i=n.position),i=Number(i),isNaN(i)&&(i=s.position),s.read(t,a,r,i)}function BP(e,t,n){Fa(this,e).chown(t,n)}function $P(e,t){const n=Ah(t,-1);if(n<0)throw new Ze(gt.EINVAL,"Invalid mode.");Fa(this,e).chmod(n)}function zP(e,t,n){Fa(this,e).utimes(RC(t),RC(n))}function TY(e){e=jn(e);const{fs:t,path:n}=Tr(Rh.call(this,e),this);try{const r=t.statSync(n);if(!Cc(r))throw Ze.With("ENOTDIR",n,"rmdir");if(zs&&!ui(this,r,ns))throw Ze.With("EACCES",n,"rmdir");t.rmdirSync(n),ba(this,"rename",e.toString())}catch(r){throw di(r,{[n]:e})}}function UP(e,t){var n,r;const{euid:i,egid:s}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Ac.credentials;t=typeof t=="object"?t:{mode:t};const a=Ah(t==null?void 0:t.mode,511);e=Rh.call(this,e);const{fs:o,path:l,root:c}=Tr(e,this),u={[l]:e},d=(h,m)=>{if(!ui(this,m,ns))throw Ze.With("EACCES",Gr(h),"mkdir");const y=o.mkdirSync(h,{mode:a,uid:m.mode&Qw?m.uid:i,gid:m.mode&e1?m.gid:s});return ba(this,"rename",h),y};try{if(!(t!=null&&t.recursive)){d(l,o.statSync(Gr(l)));return}const h=[];for(let y=l,b=e;!o.existsSync(y);y=Gr(y),b=Gr(b))h.unshift(y),u[y]=b;if(!h.length)return;const m=[o.statSync(Gr(h[0]))];for(const[y,b]of h.entries())m.push(d(b,m[y]));return c.length==1?h[0]:(r=h[0])===null||r===void 0?void 0:r.slice(c.length)}catch(h){throw di(h,u)}}function Ny(e,t){t=typeof t=="object"?t:{encoding:t},e=jn(e);const{fs:n,path:r}=Tr(Rh.call(this,e),this);let i;try{const a=n.statSync(r);if(zs&&!ui(this,a,$s))throw Ze.With("EACCES",r,"readdir");if(!Cc(a))throw Ze.With("ENOTDIR",r,"readdir");i=n.readdirSync(r)}catch(a){throw di(a,{[r]:e})}const s=[];for(const a of i){let o;try{o=n.statSync(ii(r,a))}catch{continue}if(t!=null&&t.withFileTypes?s.push(new qx(a,o)):(t==null?void 0:t.encoding)=="buffer"?s.push(ji.from(a)):s.push(a),!(!Cc(o)||!(t!=null&&t.recursive)))for(const l of Ny.call(this,ii(e,a),t))l instanceof qx?(l.path=ii(a,l.path),s.push(l)):ji.isBuffer(l)?s.push(ji.from(ii(a,_P(l)))):s.push(ii(a,l))}return s}function jSe(e,t){if(e=jn(e),!dh(Gr(e)).hasAccess($s,this))throw Ze.With("EACCES",Gr(e),"link");if(t=jn(t),!dh(Gr(t)).hasAccess(ns,this))throw Ze.With("EACCES",Gr(t),"link");const{fs:n,path:r}=Tr(e,this),i=Tr(t,this);if(n!=i.fs)throw Ze.With("EXDEV",t,"link");try{if(zs&&!ui(this,n.statSync(r),$s))throw Ze.With("EACCES",r,"link");return n.linkSync(r,i.path)}catch(s){throw di(s,{[r]:e,[i.path]:t})}}function OSe(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ze(gt.EINVAL,"Invalid type: "+n);t=jn(t);const i=t1(r,km.call(this,t,{flag:"wx",mode:420}),!1);i.write(Tp(jn(e,!0))),i.chmod(Hd)}catch(i){r.error=i,r.hasError=!0}finally{n1(r)}}function Tj(e,t){const n=ji.from(EY.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function PSe(e,t,n){const r=IE.call(this,e,"r+");BP.call(this,r,t,n),Em.call(this,r)}function DSe(e,t,n){const r=jE.call(this,e,"r+");BP.call(this,r,t,n),Em.call(this,r)}function FSe(e,t){const n=IE.call(this,e,"r+");$P.call(this,n,t),Em.call(this,n)}function LSe(e,t){const n=jE.call(this,e,"r+");$P.call(this,n,t),Em.call(this,n)}function AY(e,t,n){const r=IE.call(this,e,"r+");zP.call(this,r,t,n),Em.call(this,r)}function BSe(e,t,n){const r=jE.call(this,e,"r+");zP.call(this,r,t,n),Em.call(this,r)}function Aj(e,t,n){try{const l=Tr(t,e),c=l.fs.statSync(l.path);if(!q0(c))return{...l,fullPath:t,stats:c};const u=Dd.call(e,Gr(t),Tj.call(e,t).toString());return Aj(e,u)}catch{}const{base:r,dir:i}=Xc(t),s=i=="/"?"/":Rh.call(e,i),a=ii(s,r),o=Tr(a,e);try{const l=o.fs.statSync(o.path);if(!q0(l))return{...o,fullPath:a,stats:l};const c=Dd.call(e,s,Tj.call(e,a).toString());return Aj(e,c)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw di(l,{[o.path]:a})}}function Rh(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=jn(e);const{fullPath:i}=Aj(this,e);if(r=="utf8"||r=="utf-8")return i;const s=ji.from(i,"utf-8");return r=="buffer"?s:s.toString(r)}function $Se(e,t=384){if(!ui(this,dh.call(this,e),t))throw new Ze(gt.EACCES)}function RY(e,t){e=jn(e);let n;try{n=PP.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&wi){case ks:if(t!=null&&t.recursive)for(const r of Ny.call(this,e))RY.call(this,ii(e,r),t);TY.call(this,e);break;case mc:case Hd:case wm:case _m:DP.call(this,e);break;case Sm:case xm:default:throw new Ze(gt.EPERM,"File type not supported",e,"rm")}}function zSe(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",i="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return UP.call(this,i),n=="buffer"?ji.from(i):i}function NY(e,t,n){if(e=jn(e),t=jn(t),n&&n&NP&&OP(t))throw new Ze(gt.EEXIST,"Destination file already exists",t,"copyFile");LP.call(this,t,FP(e)),ba(this,"rename",t.toString())}function USe(e,t,n){const r=Fa(this,e);let i=0;for(const s of t)i+=r.read(s,0,s.byteLength,n+i);return i}function qSe(e,t,n){const r=Fa(this,e);let i=0;for(const s of t)i+=r.write(new Uint8Array(s.buffer),0,s.byteLength,n+i);return i}function VSe(e,t){return e=jn(e),new qP(e,this)}function MY(e,t,n){e=jn(e),t=jn(t);const r=PP.call(this,e);if(n!=null&&n.errorOnExist&&OP.call(this,t))throw new Ze(gt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&wi){case ks:if(!(n!=null&&n.recursive))throw new Ze(gt.EISDIR,e+" is a directory (not copied)",e,"cp");UP.call(this,t,{recursive:!0});for(const i of Ny.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(ii(e,i.name),ii(t,i.name))||MY.call(this,ii(e,i.name),ii(t,i.name),n);break;case mc:case Hd:NY.call(this,e,t);break;case wm:case _m:case Sm:case xm:default:throw new Ze(gt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&AY.call(this,t,r.atime,r.mtime)}function WSe(e,t){e=jn(e);const{fs:n}=Tr(e,this);return SY(n,t==null?void 0:t.bigint)}function HSe(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:i=()=>!1}=t,s=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),a=[];function o(l){const c=Ny(l,{withFileTypes:r,encoding:"utf8"});for(const u of c){const d=r?u.path:l+"/"+u;i(r?u:d)||(dh(d).isDirectory()&&s.some(h=>h.source.includes(".*"))&&o(d),s.some(h=>h.test(d.replace(/^\/+/g,"")))&&a.push(r?u.path:d.replace(/^\/+/g,"")))}}return o(n),a}class qx{get name(){return U0(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return aSe(this.stats)}isDirectory(){return Cc(this.stats)}isBlockDevice(){return $x(this.stats)}isCharacterDevice(){return zx(this.stats)}isSymbolicLink(){return q0(this.stats)}isFIFO(){return lSe(this.stats)}isSocket(){return oSe(this.stats)}}class qP{checkClosed(){if(this.closed)throw new Ze(gt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await Am.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Ny.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var nM={exports:{}},rM={exports:{}},iM={},J$;function Nh(){return J$||(J$=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=u,n.toByteArray=h,n.fromByteArray=b;for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)r[o]=a[o],i[a.charCodeAt(o)]=o;i[45]=62,i[95]=63;function c(w){var S=w.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=w.indexOf("=");C===-1&&(C=S);var k=C===S?0:4-C%4;return[C,k]}function u(w){var S=c(w),C=S[0],k=S[1];return(C+k)*3/4-k}function d(w,S,C){return(S+C)*3/4-C}function h(w){var S,C=c(w),k=C[0],A=C[1],R=new s(d(w,k,A)),N=0,I=A>0?k-4:k,O;for(O=0;O<I;O+=4)S=i[w.charCodeAt(O)]<<18|i[w.charCodeAt(O+1)]<<12|i[w.charCodeAt(O+2)]<<6|i[w.charCodeAt(O+3)],R[N++]=S>>16&255,R[N++]=S>>8&255,R[N++]=S&255;return A===2&&(S=i[w.charCodeAt(O)]<<2|i[w.charCodeAt(O+1)]>>4,R[N++]=S&255),A===1&&(S=i[w.charCodeAt(O)]<<10|i[w.charCodeAt(O+1)]<<4|i[w.charCodeAt(O+2)]>>2,R[N++]=S>>8&255,R[N++]=S&255),R}function m(w){return r[w>>18&63]+r[w>>12&63]+r[w>>6&63]+r[w&63]}function y(w,S,C){for(var k,A=[],R=S;R<C;R+=3)k=(w[R]<<16&16711680)+(w[R+1]<<8&65280)+(w[R+2]&255),A.push(m(k));return A.join("")}function b(w){for(var S,C=w.length,k=C%3,A=[],R=16383,N=0,I=C-k;N<I;N+=R)A.push(y(w,N,N+R>I?I:N+R));return k===1?(S=w[C-1],A.push(r[S>>2]+r[S<<4&63]+"==")):k===2&&(S=(w[C-2]<<8)+w[C-1],A.push(r[S>>10]+r[S>>4&63]+r[S<<2&63]+"=")),A.join("")}var v={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */v.read=function(w,S,C,k,A){var R,N,I=A*8-k-1,O=(1<<I)-1,L=O>>1,P=-7,V=C?A-1:0,F=C?-1:1,J=w[S+V];for(V+=F,R=J&(1<<-P)-1,J>>=-P,P+=I;P>0;R=R*256+w[S+V],V+=F,P-=8);for(N=R&(1<<-P)-1,R>>=-P,P+=k;P>0;N=N*256+w[S+V],V+=F,P-=8);if(R===0)R=1-L;else{if(R===O)return N?NaN:(J?-1:1)*(1/0);N=N+Math.pow(2,k),R=R-L}return(J?-1:1)*N*Math.pow(2,R-k)},v.write=function(w,S,C,k,A,R){var N,I,O,L=R*8-A-1,P=(1<<L)-1,V=P>>1,F=A===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=k?0:R-1,U=k?1:-1,G=S<0||S===0&&1/S<0?1:0;for(S=Math.abs(S),isNaN(S)||S===1/0?(I=isNaN(S)?1:0,N=P):(N=Math.floor(Math.log(S)/Math.LN2),S*(O=Math.pow(2,-N))<1&&(N--,O*=2),N+V>=1?S+=F/O:S+=F*Math.pow(2,1-V),S*O>=2&&(N++,O/=2),N+V>=P?(I=0,N=P):N+V>=1?(I=(S*O-1)*Math.pow(2,A),N=N+V):(I=S*Math.pow(2,V-1)*Math.pow(2,A),N=0));A>=8;w[C+J]=I&255,J+=U,I/=256,A-=8);for(N=N<<A|I,L+=A;L>0;w[C+J]=N&255,J+=U,N/=256,L-=8);w[C+J-U]|=G*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(w){const S=n,C=v,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;w.Buffer=P,w.SlowBuffer=re,w.INSPECT_MAX_BYTES=50;const A=2147483647;w.kMaxLength=A;const{Uint8Array:R,ArrayBuffer:N,SharedArrayBuffer:I}=globalThis;P.TYPED_ARRAY_SUPPORT=O(),!P.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function O(){try{const Y=new R(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,R.prototype),Object.setPrototypeOf(Y,H),Y.foo()===42}catch{return!1}}Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}}),Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}});function L(Y){if(Y>A)throw new RangeError('The value "'+Y+'" is invalid for option "size"');const H=new R(Y);return Object.setPrototypeOf(H,P.prototype),H}function P(Y,H,X){if(typeof Y=="number"){if(typeof H=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return U(Y)}return V(Y,H,X)}P.poolSize=8192;function V(Y,H,X){if(typeof Y=="string")return G(Y,H);if(N.isView(Y))return ne(Y);if(Y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if(ye(Y,N)||Y&&ye(Y.buffer,N)||typeof I<"u"&&(ye(Y,I)||Y&&ye(Y.buffer,I)))return W(Y,H,X);if(typeof Y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const be=Y.valueOf&&Y.valueOf();if(be!=null&&be!==Y)return P.from(be,H,X);const Oe=te(Y);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Y[Symbol.toPrimitive]=="function")return P.from(Y[Symbol.toPrimitive]("string"),H,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}P.from=function(Y,H,X){return V(Y,H,X)},Object.setPrototypeOf(P.prototype,R.prototype),Object.setPrototypeOf(P,R);function F(Y){if(typeof Y!="number")throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function J(Y,H,X){return F(Y),Y<=0?L(Y):H!==void 0?typeof X=="string"?L(Y).fill(H,X):L(Y).fill(H):L(Y)}P.alloc=function(Y,H,X){return J(Y,H,X)};function U(Y){return F(Y),L(Y<0?0:ee(Y)|0)}P.allocUnsafe=function(Y){return U(Y)},P.allocUnsafeSlow=function(Y){return U(Y)};function G(Y,H){if((typeof H!="string"||H==="")&&(H="utf8"),!P.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const X=de(Y,H)|0;let be=L(X);const Oe=be.write(Y,H);return Oe!==X&&(be=be.slice(0,Oe)),be}function $(Y){const H=Y.length<0?0:ee(Y.length)|0,X=L(H);for(let be=0;be<H;be+=1)X[be]=Y[be]&255;return X}function ne(Y){if(ye(Y,R)){const H=new R(Y);return W(H.buffer,H.byteOffset,H.byteLength)}return $(Y)}function W(Y,H,X){if(H<0||Y.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<H+(X||0))throw new RangeError('"length" is outside of buffer bounds');let be;return H===void 0&&X===void 0?be=new R(Y):X===void 0?be=new R(Y,H):be=new R(Y,H,X),Object.setPrototypeOf(be,P.prototype),be}function te(Y){if(P.isBuffer(Y)){const H=ee(Y.length)|0,X=L(H);return X.length===0||Y.copy(X,0,0,H),X}if(Y.length!==void 0)return typeof Y.length!="number"||_e(Y.length)?L(0):$(Y);if(Y.type==="Buffer"&&Array.isArray(Y.data))return $(Y.data)}function ee(Y){if(Y>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return Y|0}function re(Y){return+Y!=Y&&(Y=0),P.alloc(+Y)}P.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==P.prototype},P.compare=function(H,X){if(ye(H,R)&&(H=P.from(H,H.offset,H.byteLength)),ye(X,R)&&(X=P.from(X,X.offset,X.byteLength)),!P.isBuffer(H)||!P.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===X)return 0;let be=H.length,Oe=X.length;for(let Ge=0,wt=Math.min(be,Oe);Ge<wt;++Ge)if(H[Ge]!==X[Ge]){be=H[Ge],Oe=X[Ge];break}return be<Oe?-1:Oe<be?1:0},P.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},P.concat=function(H,X){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return P.alloc(0);let be;if(X===void 0)for(X=0,be=0;be<H.length;++be)X+=H[be].length;const Oe=P.allocUnsafe(X);let Ge=0;for(be=0;be<H.length;++be){let wt=H[be];if(ye(wt,R))Ge+wt.length>Oe.length?(P.isBuffer(wt)||(wt=P.from(wt)),wt.copy(Oe,Ge)):R.prototype.set.call(Oe,wt,Ge);else if(P.isBuffer(wt))wt.copy(Oe,Ge);else throw new TypeError('"list" argument must be an Array of Buffers');Ge+=wt.length}return Oe};function de(Y,H){if(P.isBuffer(Y))return Y.length;if(N.isView(Y)||ye(Y,N))return Y.byteLength;if(typeof Y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);const X=Y.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&X===0)return 0;let Oe=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return bt(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return $e(Y).length;default:if(Oe)return be?-1:bt(Y).length;H=(""+H).toLowerCase(),Oe=!0}}P.byteLength=de;function oe(Y,H,X){let be=!1;if((H===void 0||H<0)&&(H=0),H>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0,H>>>=0,X<=H))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return Ee(this,H,X);case"utf8":case"utf-8":return ge(this,H,X);case"ascii":return le(this,H,X);case"latin1":case"binary":return ie(this,H,X);case"base64":return K(this,H,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,H,X);default:if(be)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),be=!0}}P.prototype._isBuffer=!0;function Ie(Y,H,X){const be=Y[H];Y[H]=Y[X],Y[X]=be}P.prototype.swap16=function(){const H=this.length;if(H%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<H;X+=2)Ie(this,X,X+1);return this},P.prototype.swap32=function(){const H=this.length;if(H%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<H;X+=4)Ie(this,X,X+3),Ie(this,X+1,X+2);return this},P.prototype.swap64=function(){const H=this.length;if(H%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<H;X+=8)Ie(this,X,X+7),Ie(this,X+1,X+6),Ie(this,X+2,X+5),Ie(this,X+3,X+4);return this},P.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?ge(this,0,H):oe.apply(this,arguments)},P.prototype.toLocaleString=P.prototype.toString,P.prototype.equals=function(H){if(!P.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H?!0:P.compare(this,H)===0},P.prototype.inspect=function(){let H="";const X=w.INSPECT_MAX_BYTES;return H=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(H+=" ... "),"<Buffer "+H+">"},k&&(P.prototype[k]=P.prototype.inspect),P.prototype.compare=function(H,X,be,Oe,Ge){if(ye(H,R)&&(H=P.from(H,H.offset,H.byteLength)),!P.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(X===void 0&&(X=0),be===void 0&&(be=H?H.length:0),Oe===void 0&&(Oe=0),Ge===void 0&&(Ge=this.length),X<0||be>H.length||Oe<0||Ge>this.length)throw new RangeError("out of range index");if(Oe>=Ge&&X>=be)return 0;if(Oe>=Ge)return-1;if(X>=be)return 1;if(X>>>=0,be>>>=0,Oe>>>=0,Ge>>>=0,this===H)return 0;let wt=Ge-Oe,en=be-X;const $n=Math.min(wt,en),Xt=this.slice(Oe,Ge),nn=H.slice(X,be);for(let un=0;un<$n;++un)if(Xt[un]!==nn[un]){wt=Xt[un],en=nn[un];break}return wt<en?-1:en<wt?1:0};function je(Y,H,X,be,Oe){if(Y.length===0)return-1;if(typeof X=="string"?(be=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),X=+X,_e(X)&&(X=Oe?0:Y.length-1),X<0&&(X=Y.length+X),X>=Y.length){if(Oe)return-1;X=Y.length-1}else if(X<0)if(Oe)X=0;else return-1;if(typeof H=="string"&&(H=P.from(H,be)),P.isBuffer(H))return H.length===0?-1:Me(Y,H,X,be,Oe);if(typeof H=="number")return H=H&255,typeof R.prototype.indexOf=="function"?Oe?R.prototype.indexOf.call(Y,H,X):R.prototype.lastIndexOf.call(Y,H,X):Me(Y,[H],X,be,Oe);throw new TypeError("val must be string, number or Buffer")}function Me(Y,H,X,be,Oe){let Ge=1,wt=Y.length,en=H.length;if(be!==void 0&&(be=String(be).toLowerCase(),be==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if(Y.length<2||H.length<2)return-1;Ge=2,wt/=2,en/=2,X/=2}function $n(nn,un){return Ge===1?nn[un]:nn.readUInt16BE(un*Ge)}let Xt;if(Oe){let nn=-1;for(Xt=X;Xt<wt;Xt++)if($n(Y,Xt)===$n(H,nn===-1?0:Xt-nn)){if(nn===-1&&(nn=Xt),Xt-nn+1===en)return nn*Ge}else nn!==-1&&(Xt-=Xt-nn),nn=-1}else for(X+en>wt&&(X=wt-en),Xt=X;Xt>=0;Xt--){let nn=!0;for(let un=0;un<en;un++)if($n(Y,Xt+un)!==$n(H,un)){nn=!1;break}if(nn)return Xt}return-1}P.prototype.includes=function(H,X,be){return this.indexOf(H,X,be)!==-1},P.prototype.indexOf=function(H,X,be){return je(this,H,X,be,!0)},P.prototype.lastIndexOf=function(H,X,be){return je(this,H,X,be,!1)};function Se(Y,H,X,be){X=Number(X)||0;const Oe=Y.length-X;be?(be=Number(be),be>Oe&&(be=Oe)):be=Oe;const Ge=H.length;be>Ge/2&&(be=Ge/2);let wt;for(wt=0;wt<be;++wt){const en=parseInt(H.substr(wt*2,2),16);if(_e(en))return wt;Y[X+wt]=en}return wt}function qe(Y,H,X,be){return it(bt(H,Y.length-X),Y,X,be)}function Qe(Y,H,X,be){return it(ot(H),Y,X,be)}function We(Y,H,X,be){return it($e(H),Y,X,be)}function Re(Y,H,X,be){return it(B(H,Y.length-X),Y,X,be)}P.prototype.write=function(H,X,be,Oe){if(X===void 0)Oe="utf8",be=this.length,X=0;else if(be===void 0&&typeof X=="string")Oe=X,be=this.length,X=0;else if(isFinite(X))X=X>>>0,isFinite(be)?(be=be>>>0,Oe===void 0&&(Oe="utf8")):(Oe=be,be=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ge=this.length-X;if((be===void 0||be>Ge)&&(be=Ge),H.length>0&&(be<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let wt=!1;for(;;)switch(Oe){case"hex":return Se(this,H,X,be);case"utf8":case"utf-8":return qe(this,H,X,be);case"ascii":case"latin1":case"binary":return Qe(this,H,X,be);case"base64":return We(this,H,X,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,H,X,be);default:if(wt)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),wt=!0}},P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(Y,H,X){return H===0&&X===Y.length?S.fromByteArray(Y):S.fromByteArray(Y.slice(H,X))}function ge(Y,H,X){X=Math.min(Y.length,X);const be=[];let Oe=H;for(;Oe<X;){const Ge=Y[Oe];let wt=null,en=Ge>239?4:Ge>223?3:Ge>191?2:1;if(Oe+en<=X){let $n,Xt,nn,un;switch(en){case 1:Ge<128&&(wt=Ge);break;case 2:$n=Y[Oe+1],($n&192)===128&&(un=(Ge&31)<<6|$n&63,un>127&&(wt=un));break;case 3:$n=Y[Oe+1],Xt=Y[Oe+2],($n&192)===128&&(Xt&192)===128&&(un=(Ge&15)<<12|($n&63)<<6|Xt&63,un>2047&&(un<55296||un>57343)&&(wt=un));break;case 4:$n=Y[Oe+1],Xt=Y[Oe+2],nn=Y[Oe+3],($n&192)===128&&(Xt&192)===128&&(nn&192)===128&&(un=(Ge&15)<<18|($n&63)<<12|(Xt&63)<<6|nn&63,un>65535&&un<1114112&&(wt=un))}}wt===null?(wt=65533,en=1):wt>65535&&(wt-=65536,be.push(wt>>>10&1023|55296),wt=56320|wt&1023),be.push(wt),Oe+=en}return ce(be)}const Te=4096;function ce(Y){const H=Y.length;if(H<=Te)return String.fromCharCode.apply(String,Y);let X="",be=0;for(;be<H;)X+=String.fromCharCode.apply(String,Y.slice(be,be+=Te));return X}function le(Y,H,X){let be="";X=Math.min(Y.length,X);for(let Oe=H;Oe<X;++Oe)be+=String.fromCharCode(Y[Oe]&127);return be}function ie(Y,H,X){let be="";X=Math.min(Y.length,X);for(let Oe=H;Oe<X;++Oe)be+=String.fromCharCode(Y[Oe]);return be}function Ee(Y,H,X){const be=Y.length;(!H||H<0)&&(H=0),(!X||X<0||X>be)&&(X=be);let Oe="";for(let Ge=H;Ge<X;++Ge)Oe+=ze[Y[Ge]];return Oe}function Be(Y,H,X){const be=Y.slice(H,X);let Oe="";for(let Ge=0;Ge<be.length-1;Ge+=2)Oe+=String.fromCharCode(be[Ge]+be[Ge+1]*256);return Oe}P.prototype.slice=function(H,X){const be=this.length;H=~~H,X=X===void 0?be:~~X,H<0?(H+=be,H<0&&(H=0)):H>be&&(H=be),X<0?(X+=be,X<0&&(X=0)):X>be&&(X=be),X<H&&(X=H);const Oe=this.subarray(H,X);return Object.setPrototypeOf(Oe,P.prototype),Oe};function Ce(Y,H,X){if(Y%1!==0||Y<0)throw new RangeError("offset is not uint");if(Y+H>X)throw new RangeError("Trying to access beyond buffer length")}P.prototype.readUintLE=P.prototype.readUIntLE=function(H,X,be){H=H>>>0,X=X>>>0,be||Ce(H,X,this.length);let Oe=this[H],Ge=1,wt=0;for(;++wt<X&&(Ge*=256);)Oe+=this[H+wt]*Ge;return Oe},P.prototype.readUintBE=P.prototype.readUIntBE=function(H,X,be){H=H>>>0,X=X>>>0,be||Ce(H,X,this.length);let Oe=this[H+--X],Ge=1;for(;X>0&&(Ge*=256);)Oe+=this[H+--X]*Ge;return Oe},P.prototype.readUint8=P.prototype.readUInt8=function(H,X){return H=H>>>0,X||Ce(H,1,this.length),this[H]},P.prototype.readUint16LE=P.prototype.readUInt16LE=function(H,X){return H=H>>>0,X||Ce(H,2,this.length),this[H]|this[H+1]<<8},P.prototype.readUint16BE=P.prototype.readUInt16BE=function(H,X){return H=H>>>0,X||Ce(H,2,this.length),this[H]<<8|this[H+1]},P.prototype.readUint32LE=P.prototype.readUInt32LE=function(H,X){return H=H>>>0,X||Ce(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+this[H+3]*16777216},P.prototype.readUint32BE=P.prototype.readUInt32BE=function(H,X){return H=H>>>0,X||Ce(H,4,this.length),this[H]*16777216+(this[H+1]<<16|this[H+2]<<8|this[H+3])},P.prototype.readBigUInt64LE=kt(function(H){H=H>>>0,De(H,"offset");const X=this[H],be=this[H+7];(X===void 0||be===void 0)&&we(H,this.length-8);const Oe=X+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24,Ge=this[++H]+this[++H]*2**8+this[++H]*2**16+be*2**24;return BigInt(Oe)+(BigInt(Ge)<<BigInt(32))}),P.prototype.readBigUInt64BE=kt(function(H){H=H>>>0,De(H,"offset");const X=this[H],be=this[H+7];(X===void 0||be===void 0)&&we(H,this.length-8);const Oe=X*2**24+this[++H]*2**16+this[++H]*2**8+this[++H],Ge=this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+be;return(BigInt(Oe)<<BigInt(32))+BigInt(Ge)}),P.prototype.readIntLE=function(H,X,be){H=H>>>0,X=X>>>0,be||Ce(H,X,this.length);let Oe=this[H],Ge=1,wt=0;for(;++wt<X&&(Ge*=256);)Oe+=this[H+wt]*Ge;return Ge*=128,Oe>=Ge&&(Oe-=Math.pow(2,8*X)),Oe},P.prototype.readIntBE=function(H,X,be){H=H>>>0,X=X>>>0,be||Ce(H,X,this.length);let Oe=X,Ge=1,wt=this[H+--Oe];for(;Oe>0&&(Ge*=256);)wt+=this[H+--Oe]*Ge;return Ge*=128,wt>=Ge&&(wt-=Math.pow(2,8*X)),wt},P.prototype.readInt8=function(H,X){return H=H>>>0,X||Ce(H,1,this.length),this[H]&128?(255-this[H]+1)*-1:this[H]},P.prototype.readInt16LE=function(H,X){H=H>>>0,X||Ce(H,2,this.length);const be=this[H]|this[H+1]<<8;return be&32768?be|4294901760:be},P.prototype.readInt16BE=function(H,X){H=H>>>0,X||Ce(H,2,this.length);const be=this[H+1]|this[H]<<8;return be&32768?be|4294901760:be},P.prototype.readInt32LE=function(H,X){return H=H>>>0,X||Ce(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},P.prototype.readInt32BE=function(H,X){return H=H>>>0,X||Ce(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},P.prototype.readBigInt64LE=kt(function(H){H=H>>>0,De(H,"offset");const X=this[H],be=this[H+7];(X===void 0||be===void 0)&&we(H,this.length-8);const Oe=this[H+4]+this[H+5]*2**8+this[H+6]*2**16+(be<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(X+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24)}),P.prototype.readBigInt64BE=kt(function(H){H=H>>>0,De(H,"offset");const X=this[H],be=this[H+7];(X===void 0||be===void 0)&&we(H,this.length-8);const Oe=(X<<24)+this[++H]*2**16+this[++H]*2**8+this[++H];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+be)}),P.prototype.readFloatLE=function(H,X){return H=H>>>0,X||Ce(H,4,this.length),C.read(this,H,!0,23,4)},P.prototype.readFloatBE=function(H,X){return H=H>>>0,X||Ce(H,4,this.length),C.read(this,H,!1,23,4)},P.prototype.readDoubleLE=function(H,X){return H=H>>>0,X||Ce(H,8,this.length),C.read(this,H,!0,52,8)},P.prototype.readDoubleBE=function(H,X){return H=H>>>0,X||Ce(H,8,this.length),C.read(this,H,!1,52,8)};function ct(Y,H,X,be,Oe,Ge){if(!P.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Oe||H<Ge)throw new RangeError('"value" argument is out of bounds');if(X+be>Y.length)throw new RangeError("Index out of range")}P.prototype.writeUintLE=P.prototype.writeUIntLE=function(H,X,be,Oe){if(H=+H,X=X>>>0,be=be>>>0,!Oe){const en=Math.pow(2,8*be)-1;ct(this,H,X,be,en,0)}let Ge=1,wt=0;for(this[X]=H&255;++wt<be&&(Ge*=256);)this[X+wt]=H/Ge&255;return X+be},P.prototype.writeUintBE=P.prototype.writeUIntBE=function(H,X,be,Oe){if(H=+H,X=X>>>0,be=be>>>0,!Oe){const en=Math.pow(2,8*be)-1;ct(this,H,X,be,en,0)}let Ge=be-1,wt=1;for(this[X+Ge]=H&255;--Ge>=0&&(wt*=256);)this[X+Ge]=H/wt&255;return X+be},P.prototype.writeUint8=P.prototype.writeUInt8=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,1,255,0),this[X]=H&255,X+1},P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,2,65535,0),this[X]=H&255,this[X+1]=H>>>8,X+2},P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,2,65535,0),this[X]=H>>>8,this[X+1]=H&255,X+2},P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,4,4294967295,0),this[X+3]=H>>>24,this[X+2]=H>>>16,this[X+1]=H>>>8,this[X]=H&255,X+4},P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,4,4294967295,0),this[X]=H>>>24,this[X+1]=H>>>16,this[X+2]=H>>>8,this[X+3]=H&255,X+4};function Tt(Y,H,X,be,Oe){me(H,be,Oe,Y,X,7);let Ge=Number(H&BigInt(4294967295));Y[X++]=Ge,Ge=Ge>>8,Y[X++]=Ge,Ge=Ge>>8,Y[X++]=Ge,Ge=Ge>>8,Y[X++]=Ge;let wt=Number(H>>BigInt(32)&BigInt(4294967295));return Y[X++]=wt,wt=wt>>8,Y[X++]=wt,wt=wt>>8,Y[X++]=wt,wt=wt>>8,Y[X++]=wt,X}function ft(Y,H,X,be,Oe){me(H,be,Oe,Y,X,7);let Ge=Number(H&BigInt(4294967295));Y[X+7]=Ge,Ge=Ge>>8,Y[X+6]=Ge,Ge=Ge>>8,Y[X+5]=Ge,Ge=Ge>>8,Y[X+4]=Ge;let wt=Number(H>>BigInt(32)&BigInt(4294967295));return Y[X+3]=wt,wt=wt>>8,Y[X+2]=wt,wt=wt>>8,Y[X+1]=wt,wt=wt>>8,Y[X]=wt,X+8}P.prototype.writeBigUInt64LE=kt(function(H,X=0){return Tt(this,H,X,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeBigUInt64BE=kt(function(H,X=0){return ft(this,H,X,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeIntLE=function(H,X,be,Oe){if(H=+H,X=X>>>0,!Oe){const $n=Math.pow(2,8*be-1);ct(this,H,X,be,$n-1,-$n)}let Ge=0,wt=1,en=0;for(this[X]=H&255;++Ge<be&&(wt*=256);)H<0&&en===0&&this[X+Ge-1]!==0&&(en=1),this[X+Ge]=(H/wt>>0)-en&255;return X+be},P.prototype.writeIntBE=function(H,X,be,Oe){if(H=+H,X=X>>>0,!Oe){const $n=Math.pow(2,8*be-1);ct(this,H,X,be,$n-1,-$n)}let Ge=be-1,wt=1,en=0;for(this[X+Ge]=H&255;--Ge>=0&&(wt*=256);)H<0&&en===0&&this[X+Ge+1]!==0&&(en=1),this[X+Ge]=(H/wt>>0)-en&255;return X+be},P.prototype.writeInt8=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,1,127,-128),H<0&&(H=255+H+1),this[X]=H&255,X+1},P.prototype.writeInt16LE=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,2,32767,-32768),this[X]=H&255,this[X+1]=H>>>8,X+2},P.prototype.writeInt16BE=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,2,32767,-32768),this[X]=H>>>8,this[X+1]=H&255,X+2},P.prototype.writeInt32LE=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,4,2147483647,-2147483648),this[X]=H&255,this[X+1]=H>>>8,this[X+2]=H>>>16,this[X+3]=H>>>24,X+4},P.prototype.writeInt32BE=function(H,X,be){return H=+H,X=X>>>0,be||ct(this,H,X,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[X]=H>>>24,this[X+1]=H>>>16,this[X+2]=H>>>8,this[X+3]=H&255,X+4},P.prototype.writeBigInt64LE=kt(function(H,X=0){return Tt(this,H,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),P.prototype.writeBigInt64BE=kt(function(H,X=0){return ft(this,H,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pt(Y,H,X,be,Oe,Ge){if(X+be>Y.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function Ut(Y,H,X,be,Oe){return H=+H,X=X>>>0,Oe||Pt(Y,H,X,4),C.write(Y,H,X,be,23,4),X+4}P.prototype.writeFloatLE=function(H,X,be){return Ut(this,H,X,!0,be)},P.prototype.writeFloatBE=function(H,X,be){return Ut(this,H,X,!1,be)};function Bt(Y,H,X,be,Oe){return H=+H,X=X>>>0,Oe||Pt(Y,H,X,8),C.write(Y,H,X,be,52,8),X+8}P.prototype.writeDoubleLE=function(H,X,be){return Bt(this,H,X,!0,be)},P.prototype.writeDoubleBE=function(H,X,be){return Bt(this,H,X,!1,be)},P.prototype.copy=function(H,X,be,Oe){if(!P.isBuffer(H))throw new TypeError("argument should be a Buffer");if(be||(be=0),!Oe&&Oe!==0&&(Oe=this.length),X>=H.length&&(X=H.length),X||(X=0),Oe>0&&Oe<be&&(Oe=be),Oe===be||H.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),H.length-X<Oe-be&&(Oe=H.length-X+be);const Ge=Oe-be;return this===H&&typeof R.prototype.copyWithin=="function"?this.copyWithin(X,be,Oe):R.prototype.set.call(H,this.subarray(be,Oe),X),Ge},P.prototype.fill=function(H,X,be,Oe){if(typeof H=="string"){if(typeof X=="string"?(Oe=X,X=0,be=this.length):typeof be=="string"&&(Oe=be,be=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!P.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(H.length===1){const wt=H.charCodeAt(0);(Oe==="utf8"&&wt<128||Oe==="latin1")&&(H=wt)}}else typeof H=="number"?H=H&255:typeof H=="boolean"&&(H=Number(H));if(X<0||this.length<X||this.length<be)throw new RangeError("Out of range index");if(be<=X)return this;X=X>>>0,be=be===void 0?this.length:be>>>0,H||(H=0);let Ge;if(typeof H=="number")for(Ge=X;Ge<be;++Ge)this[Ge]=H;else{const wt=P.isBuffer(H)?H:P.from(H,Oe),en=wt.length;if(en===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Ge=0;Ge<be-X;++Ge)this[Ge+X]=wt[Ge%en]}return this};const tn={};function xe(Y,H,X){tn[Y]=class extends X{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Y}]`,this.stack,delete this.name}get code(){return Y}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${Y}]: ${this.message}`}}}xe("ERR_BUFFER_OUT_OF_BOUNDS",function(Y){return Y?`${Y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xe("ERR_INVALID_ARG_TYPE",function(Y,H){return`The "${Y}" argument must be of type number. Received type ${typeof H}`},TypeError),xe("ERR_OUT_OF_RANGE",function(Y,H,X){let be=`The value of "${Y}" is out of range.`,Oe=X;return Number.isInteger(X)&&Math.abs(X)>2**32?Oe=D(String(X)):typeof X=="bigint"&&(Oe=String(X),(X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))&&(Oe=D(Oe)),Oe+="n"),be+=` It must be ${H}. Received ${Oe}`,be},RangeError);function D(Y){let H="",X=Y.length;const be=Y[0]==="-"?1:0;for(;X>=be+4;X-=3)H=`_${Y.slice(X-3,X)}${H}`;return`${Y.slice(0,X)}${H}`}function Z(Y,H,X){De(H,"offset"),(Y[H]===void 0||Y[H+X]===void 0)&&we(H,Y.length-(X+1))}function me(Y,H,X,be,Oe,Ge){if(Y>X||Y<H){const wt=typeof H=="bigint"?"n":"";let en;throw H===0||H===BigInt(0)?en=`>= 0${wt} and < 2${wt} ** ${(Ge+1)*8}${wt}`:en=`>= -(2${wt} ** ${(Ge+1)*8-1}${wt}) and < 2 ** ${(Ge+1)*8-1}${wt}`,new tn.ERR_OUT_OF_RANGE("value",en,Y)}Z(be,Oe,Ge)}function De(Y,H){if(typeof Y!="number")throw new tn.ERR_INVALID_ARG_TYPE(H,"number",Y)}function we(Y,H,X){throw Math.floor(Y)!==Y?(De(Y,X),new tn.ERR_OUT_OF_RANGE("offset","an integer",Y)):H<0?new tn.ERR_BUFFER_OUT_OF_BOUNDS:new tn.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${H}`,Y)}const Ne=/[^+/0-9A-Za-z-_]/g;function fe(Y){if(Y=Y.split("=")[0],Y=Y.trim().replace(Ne,""),Y.length<2)return"";for(;Y.length%4!==0;)Y=Y+"=";return Y}function bt(Y,H){H=H||1/0;let X;const be=Y.length;let Oe=null;const Ge=[];for(let wt=0;wt<be;++wt){if(X=Y.charCodeAt(wt),X>55295&&X<57344){if(!Oe){if(X>56319){(H-=3)>-1&&Ge.push(239,191,189);continue}else if(wt+1===be){(H-=3)>-1&&Ge.push(239,191,189);continue}Oe=X;continue}if(X<56320){(H-=3)>-1&&Ge.push(239,191,189),Oe=X;continue}X=(Oe-55296<<10|X-56320)+65536}else Oe&&(H-=3)>-1&&Ge.push(239,191,189);if(Oe=null,X<128){if((H-=1)<0)break;Ge.push(X)}else if(X<2048){if((H-=2)<0)break;Ge.push(X>>6|192,X&63|128)}else if(X<65536){if((H-=3)<0)break;Ge.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((H-=4)<0)break;Ge.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return Ge}function ot(Y){const H=[];for(let X=0;X<Y.length;++X)H.push(Y.charCodeAt(X)&255);return H}function B(Y,H){let X,be,Oe;const Ge=[];for(let wt=0;wt<Y.length&&!((H-=2)<0);++wt)X=Y.charCodeAt(wt),be=X>>8,Oe=X%256,Ge.push(Oe),Ge.push(be);return Ge}function $e(Y){return S.toByteArray(fe(Y))}function it(Y,H,X,be){let Oe;for(Oe=0;Oe<be&&!(Oe+X>=H.length||Oe>=Y.length);++Oe)H[Oe+X]=Y[Oe];return Oe}function ye(Y,H){return Y instanceof H||Y!=null&&Y.constructor!=null&&Y.constructor.name!=null&&Y.constructor.name===H.name}function _e(Y){return Y!==Y}const ze=function(){const Y="0123456789abcdef",H=new Array(256);for(let X=0;X<16;++X){const be=X*16;for(let Oe=0;Oe<16;++Oe)H[be+Oe]=Y[X]+Y[Oe]}return H}();function kt(Y){return typeof BigInt>"u"?he:Y}function he(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(iM)),iM}var sM,Q$;function Zi(){if(Q$)return sM;Q$=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let i=0;i<n.length;i++)r+=`    ${n[i].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return sM={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},sM}var aM={exports:{}},oM,e9;function IY(){return e9||(e9=1,oM={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),oM}var lM,t9;function io(){if(t9)return lM;t9=1;const{format:e,inspect:t}=IY(),{AggregateError:n}=Zi(),r=globalThis.AggregateError||n,i=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function c(v,x){if(!v)throw new l.ERR_INTERNAL_ASSERTION(x)}function u(v){let x="",w=v.length;const S=v[0]==="-"?1:0;for(;w>=S+4;w-=3)x=`_${v.slice(w-3,w)}${x}`;return`${v.slice(0,w)}${x}`}function d(v,x,w){if(typeof x=="function")return c(x.length<=w.length,`Code: ${v}; The provided arguments length (${w.length}) does not match the required ones (${x.length}).`),x(...w);const S=(x.match(/%[dfijoOs]/g)||[]).length;return c(S===w.length,`Code: ${v}; The provided arguments length (${w.length}) does not match the required ones (${S}).`),w.length===0?x:e(x,...w)}function h(v,x,w){w||(w=Error);class S extends w{constructor(...k){super(d(v,x,k))}toString(){return`${this.name} [${v}]: ${this.message}`}}Object.defineProperties(S.prototype,{name:{value:w.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${v}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),S.prototype.code=v,S.prototype[i]=!0,l[v]=S}function m(v){const x=o+v.name;return Object.defineProperty(v,"name",{value:x}),v}function y(v,x){if(v&&x&&v!==x){if(Array.isArray(x.errors))return x.errors.push(v),x;const w=new r([x,v],x.message);return w.code=x.code,w}return v||x}class b extends Error{constructor(x="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",w);super(x,w),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(v,x,w)=>{c(typeof v=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let S="The ";v.endsWith(" argument")?S+=`${v} `:S+=`"${v}" ${v.includes(".")?"property":"argument"} `,S+="must be ";const C=[],k=[],A=[];for(const N of x)c(typeof N=="string","All expected entries have to be of type string"),s.includes(N)?C.push(N.toLowerCase()):a.test(N)?k.push(N):(c(N!=="object",'The value "object" should be written as "Object"'),A.push(N));if(k.length>0){const N=C.indexOf("object");N!==-1&&(C.splice(C,N,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:S+=`of type ${C[0]}`;break;case 2:S+=`one of type ${C[0]} or ${C[1]}`;break;default:{const N=C.pop();S+=`one of type ${C.join(", ")}, or ${N}`}}(k.length>0||A.length>0)&&(S+=" or ")}if(k.length>0){switch(k.length){case 1:S+=`an instance of ${k[0]}`;break;case 2:S+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const N=k.pop();S+=`an instance of ${k.join(", ")}, or ${N}`}}A.length>0&&(S+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(S+="an "),S+=`${A[0]}`;break;case 2:S+=`one of ${A[0]} or ${A[1]}`;break;default:{const N=A.pop();S+=`one of ${A.join(", ")}, or ${N}`}}if(w==null)S+=`. Received ${w}`;else if(typeof w=="function"&&w.name)S+=`. Received function ${w.name}`;else if(typeof w=="object"){var R;if((R=w.constructor)!==null&&R!==void 0&&R.name)S+=`. Received an instance of ${w.constructor.name}`;else{const N=t(w,{depth:-1});S+=`. Received ${N}`}}else{let N=t(w,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),S+=`. Received type ${typeof w} (${N})`}return S},TypeError),h("ERR_INVALID_ARG_VALUE",(v,x,w="is invalid")=>{let S=t(x);return S.length>128&&(S=S.slice(0,128)+"..."),`The ${v.includes(".")?"property":"argument"} '${v}' ${w}. Received ${S}`},TypeError),h("ERR_INVALID_RETURN_VALUE",(v,x,w)=>{var S;const C=w!=null&&(S=w.constructor)!==null&&S!==void 0&&S.name?`instance of ${w.constructor.name}`:`type ${typeof w}`;return`Expected ${v} to be returned from the "${x}" function but got ${C}.`},TypeError),h("ERR_MISSING_ARGS",(...v)=>{c(v.length>0,"At least one arg needs to be specified");let x;const w=v.length;switch(v=(Array.isArray(v)?v:[v]).map(S=>`"${S}"`).join(" or "),w){case 1:x+=`The ${v[0]} argument`;break;case 2:x+=`The ${v[0]} and ${v[1]} arguments`;break;default:{const S=v.pop();x+=`The ${v.join(", ")}, and ${S} arguments`}break}return`${x} must be specified`},TypeError),h("ERR_OUT_OF_RANGE",(v,x,w)=>{c(x,'Missing "range" argument');let S;if(Number.isInteger(w)&&Math.abs(w)>2**32)S=u(String(w));else if(typeof w=="bigint"){S=String(w);const C=BigInt(2)**BigInt(32);(w>C||w<-C)&&(S=u(S)),S+="n"}else S=t(w);return`The value of "${v}" is out of range. It must be ${x}. Received ${S}`},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),lM={AbortError:b,aggregateTwoErrors:m(y),hideStackFrames:m,codes:l},lM}var yv={exports:{}},n9;function Vx(){if(n9)return yv.exports;n9=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return yv.exports=e,yv.exports.AbortSignal=t,yv.exports.default=e,yv.exports}var yS={exports:{}},r9;function OE(){if(r9)return yS.exports;r9=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,A,R){return Function.prototype.apply.call(k,A,R)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var i=Number.isNaN||function(k){return k!==k};function s(){s.init.call(this)}yS.exports=s,yS.exports.once=x,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(C){if(typeof C!="number"||C<0||i(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");a=C}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||i(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(C){return C._maxListeners===void 0?s.defaultMaxListeners:C._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(k){for(var A=[],R=1;R<arguments.length;R++)A.push(arguments[R]);var N=k==="error",I=this._events;if(I!==void 0)N=N&&I.error===void 0;else if(!N)return!1;if(N){var O;if(A.length>0&&(O=A[0]),O instanceof Error)throw O;var L=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw L.context=O,L}var P=I[k];if(P===void 0)return!1;if(typeof P=="function")t(P,this,A);else for(var V=P.length,F=y(P,V),R=0;R<V;++R)t(F[R],this,A);return!0};function c(C,k,A,R){var N,I,O;if(o(A),I=C._events,I===void 0?(I=C._events=Object.create(null),C._eventsCount=0):(I.newListener!==void 0&&(C.emit("newListener",k,A.listener?A.listener:A),I=C._events),O=I[k]),O===void 0)O=I[k]=A,++C._eventsCount;else if(typeof O=="function"?O=I[k]=R?[A,O]:[O,A]:R?O.unshift(A):O.push(A),N=l(C),N>0&&O.length>N&&!O.warned){O.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=C,L.type=k,L.count=O.length,r(L)}return C}s.prototype.addListener=function(k,A){return c(this,k,A,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(k,A){return c(this,k,A,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(C,k,A){var R={fired:!1,wrapFn:void 0,target:C,type:k,listener:A},N=u.bind(R);return N.listener=A,R.wrapFn=N,N}s.prototype.once=function(k,A){return o(A),this.on(k,d(this,k,A)),this},s.prototype.prependOnceListener=function(k,A){return o(A),this.prependListener(k,d(this,k,A)),this},s.prototype.removeListener=function(k,A){var R,N,I,O,L;if(o(A),N=this._events,N===void 0)return this;if(R=N[k],R===void 0)return this;if(R===A||R.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete N[k],N.removeListener&&this.emit("removeListener",k,R.listener||A));else if(typeof R!="function"){for(I=-1,O=R.length-1;O>=0;O--)if(R[O]===A||R[O].listener===A){L=R[O].listener,I=O;break}if(I<0)return this;I===0?R.shift():b(R,I),R.length===1&&(N[k]=R[0]),N.removeListener!==void 0&&this.emit("removeListener",k,L||A)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(k){var A,R,N;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[k]),this;if(arguments.length===0){var I=Object.keys(R),O;for(N=0;N<I.length;++N)O=I[N],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=R[k],typeof A=="function")this.removeListener(k,A);else if(A!==void 0)for(N=A.length-1;N>=0;N--)this.removeListener(k,A[N]);return this};function h(C,k,A){var R=C._events;if(R===void 0)return[];var N=R[k];return N===void 0?[]:typeof N=="function"?A?[N.listener||N]:[N]:A?v(N):y(N,N.length)}s.prototype.listeners=function(k){return h(this,k,!0)},s.prototype.rawListeners=function(k){return h(this,k,!1)},s.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):m.call(C,k)},s.prototype.listenerCount=m;function m(C){var k=this._events;if(k!==void 0){var A=k[C];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function y(C,k){for(var A=new Array(k),R=0;R<k;++R)A[R]=C[R];return A}function b(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function v(C){for(var k=new Array(C.length),A=0;A<k.length;++A)k[A]=C[A].listener||C[A];return k}function x(C,k){return new Promise(function(A,R){function N(O){C.removeListener(k,I),R(O)}function I(){typeof C.removeListener=="function"&&C.removeListener("error",N),A([].slice.call(arguments))}S(C,k,I,{once:!0}),k!=="error"&&w(C,N,{once:!0})})}function w(C,k,A){typeof C.on=="function"&&S(C,"error",k,A)}function S(C,k,A,R){if(typeof C.on=="function")R.once?C.once(k,A):C.on(k,A);else if(typeof C.addEventListener=="function")C.addEventListener(k,function N(I){R.once&&C.removeEventListener(k,N),A(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return yS.exports}var i9;function Co(){return i9||(i9=1,function(e){const t=Nh(),{format:n,inspect:r}=IY(),{codes:{ERR_INVALID_ARG_TYPE:i}}=io(),{kResistStopPropagation:s,AggregateError:a,SymbolDispose:o}=Zi(),l=globalThis.AbortSignal||Vx().AbortSignal,c=globalThis.AbortController||Vx().AbortController,u=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||t.Blob,h=typeof d<"u"?function(v){return v instanceof d}:function(v){return!1},m=(b,v)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new i(v,"AbortSignal",b)},y=(b,v)=>{if(typeof b!="function")throw new i(v,"Function",b)};e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(b){let v=!1;return function(...x){v||(v=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,v;return{promise:new Promise((w,S)=>{b=w,v=S}),resolve:b,reject:v}},promisify(b){return new Promise((v,x)=>{b((w,...S)=>w?x(w):v(...S))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof u},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:h,deprecate(b,v){return b},addAbortListener:OE().addAbortListener||function(v,x){if(v===void 0)throw new i("signal","AbortSignal",v);m(v,"signal"),y(x,"listener");let w;return v.aborted?queueMicrotask(()=>x()):(v.addEventListener("abort",x,{__proto__:null,once:!0,[s]:!0}),w=()=>{v.removeEventListener("abort",x)}),{__proto__:null,[o](){var S;(S=w)===null||S===void 0||S()}}},AbortSignalAny:l.any||function(v){if(v.length===1)return v[0];const x=new c,w=()=>x.abort();return v.forEach(S=>{m(S,"signals"),S.addEventListener("abort",w,{once:!0})}),x.signal.addEventListener("abort",()=>{v.forEach(S=>S.removeEventListener("abort",w))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(aM)),aM.exports}var bS={},cM,s9;function r1(){if(s9)return cM;s9=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:i,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:u,String:d,StringPrototypeToUpperCase:h,StringPrototypeTrim:m}=Zi(),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:S}}=io(),{normalizeEncoding:C}=Co(),{isAsyncFunction:k,isArrayBufferView:A}=Co().types,R={};function N(ie){return ie===(ie|0)}function I(ie){return ie===ie>>>0}const O=/^[0-7]+$/,L="must be a 32-bit unsigned integer or an octal string";function P(ie,Ee,Be){if(typeof ie>"u"&&(ie=Be),typeof ie=="string"){if(u(O,ie)===null)throw new x(Ee,ie,L);ie=l(ie,8)}return J(ie,Ee),ie}const V=y((ie,Ee,Be=o,Ce=a)=>{if(typeof ie!="number")throw new v(Ee,"number",ie);if(!i(ie))throw new w(Ee,"an integer",ie);if(ie<Be||ie>Ce)throw new w(Ee,`>= ${Be} && <= ${Ce}`,ie)}),F=y((ie,Ee,Be=-2147483648,Ce=2147483647)=>{if(typeof ie!="number")throw new v(Ee,"number",ie);if(!i(ie))throw new w(Ee,"an integer",ie);if(ie<Be||ie>Ce)throw new w(Ee,`>= ${Be} && <= ${Ce}`,ie)}),J=y((ie,Ee,Be=!1)=>{if(typeof ie!="number")throw new v(Ee,"number",ie);if(!i(ie))throw new w(Ee,"an integer",ie);const Ce=Be?1:0,ct=4294967295;if(ie<Ce||ie>ct)throw new w(Ee,`>= ${Ce} && <= ${ct}`,ie)});function U(ie,Ee){if(typeof ie!="string")throw new v(Ee,"string",ie)}function G(ie,Ee,Be=void 0,Ce){if(typeof ie!="number")throw new v(Ee,"number",ie);if(Be!=null&&ie<Be||Ce!=null&&ie>Ce||(Be!=null||Ce!=null)&&s(ie))throw new w(Ee,`${Be!=null?`>= ${Be}`:""}${Be!=null&&Ce!=null?" && ":""}${Ce!=null?`<= ${Ce}`:""}`,ie)}const $=y((ie,Ee,Be)=>{if(!t(Be,ie)){const ct="must be one of: "+n(r(Be,Tt=>typeof Tt=="string"?`'${Tt}'`:d(Tt)),", ");throw new x(Ee,ie,ct)}});function ne(ie,Ee){if(typeof ie!="boolean")throw new v(Ee,"boolean",ie)}function W(ie,Ee,Be){return ie==null||!c(ie,Ee)?Be:ie[Ee]}const te=y((ie,Ee,Be=null)=>{const Ce=W(Be,"allowArray",!1),ct=W(Be,"allowFunction",!1);if(!W(Be,"nullable",!1)&&ie===null||!Ce&&e(ie)||typeof ie!="object"&&(!ct||typeof ie!="function"))throw new v(Ee,"Object",ie)}),ee=y((ie,Ee)=>{if(ie!=null&&typeof ie!="object"&&typeof ie!="function")throw new v(Ee,"a dictionary",ie)}),re=y((ie,Ee,Be=0)=>{if(!e(ie))throw new v(Ee,"Array",ie);if(ie.length<Be){const Ce=`must be longer than ${Be}`;throw new x(Ee,ie,Ce)}});function de(ie,Ee){re(ie,Ee);for(let Be=0;Be<ie.length;Be++)U(ie[Be],`${Ee}[${Be}]`)}function oe(ie,Ee){re(ie,Ee);for(let Be=0;Be<ie.length;Be++)ne(ie[Be],`${Ee}[${Be}]`)}function Ie(ie,Ee){re(ie,Ee);for(let Be=0;Be<ie.length;Be++){const Ce=ie[Be],ct=`${Ee}[${Be}]`;if(Ce==null)throw new v(ct,"AbortSignal",Ce);Qe(Ce,ct)}}function je(ie,Ee="signal"){if(U(ie,Ee),R[ie]===void 0)throw R[h(ie)]!==void 0?new S(ie+" (signals must use all capital letters)"):new S(ie)}const Me=y((ie,Ee="buffer")=>{if(!A(ie))throw new v(Ee,["Buffer","TypedArray","DataView"],ie)});function Se(ie,Ee){const Be=C(Ee),Ce=ie.length;if(Be==="hex"&&Ce%2!==0)throw new x("encoding",Ee,`is invalid for data of length ${Ce}`)}function qe(ie,Ee="Port",Be=!0){if(typeof ie!="number"&&typeof ie!="string"||typeof ie=="string"&&m(ie).length===0||+ie!==+ie>>>0||ie>65535||ie===0&&!Be)throw new b(Ee,ie,Be);return ie|0}const Qe=y((ie,Ee)=>{if(ie!==void 0&&(ie===null||typeof ie!="object"||!("aborted"in ie)))throw new v(Ee,"AbortSignal",ie)}),We=y((ie,Ee)=>{if(typeof ie!="function")throw new v(Ee,"Function",ie)}),Re=y((ie,Ee)=>{if(typeof ie!="function"||k(ie))throw new v(Ee,"Function",ie)}),K=y((ie,Ee)=>{if(ie!==void 0)throw new v(Ee,"undefined",ie)});function ge(ie,Ee,Be){if(!t(Be,ie))throw new v(Ee,`('${n(Be,"|")}')`,ie)}const Te=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ce(ie,Ee){if(typeof ie>"u"||!u(Te,ie))throw new x(Ee,ie,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function le(ie){if(typeof ie=="string")return ce(ie,"hints"),ie;if(e(ie)){const Ee=ie.length;let Be="";if(Ee===0)return Be;for(let Ce=0;Ce<Ee;Ce++){const ct=ie[Ce];ce(ct,"hints"),Be+=ct,Ce!==Ee-1&&(Be+=", ")}return Be}throw new x("hints",ie,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return cM={isInt32:N,isUint32:I,parseFileMode:P,validateArray:re,validateStringArray:de,validateBooleanArray:oe,validateAbortSignalArray:Ie,validateBoolean:ne,validateBuffer:Me,validateDictionary:ee,validateEncoding:Se,validateFunction:We,validateInt32:F,validateInteger:V,validateNumber:G,validateObject:te,validateOneOf:$,validatePlainFunction:Re,validatePort:qe,validateSignalName:je,validateString:U,validateUint32:J,validateUndefined:K,validateUnion:ge,validateAbortSignal:Qe,validateLinkHeaderValue:le},cM}var vS={exports:{}},uM={},a9;function Tm(){return a9||(a9=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},i,s;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=a}catch{i=a}try{typeof clearTimeout=="function"?s=clearTimeout:s=o}catch{s=o}})();function l(C){if(i===setTimeout)return setTimeout(C,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(C,0);try{return i(C,0)}catch{try{return i.call(null,C,0)}catch{return i.call(this,C,0)}}}function c(C){if(s===clearTimeout)return clearTimeout(C);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(C);try{return s(C)}catch{try{return s.call(null,C)}catch{return s.call(this,C)}}}var u=[],d=!1,h,m=-1;function y(){!d||!h||(d=!1,h.length?u=h.concat(u):m=-1,u.length&&b())}function b(){if(!d){var C=l(y);d=!0;for(var k=u.length;k;){for(h=u,u=[];++m<k;)h&&h[m].run();m=-1,k=u.length}h=null,d=!1,c(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)k[A-1]=arguments[A];u.push(new v(C,k)),u.length===1&&!d&&l(b)};function v(C,k){this.fun=C,this.array=k}v.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var w=n.exports;const S=t(w);e.default=S,e.process=S}(uM)),uM}var dM,o9;function Kd(){if(o9)return dM;o9=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Zi(),r=n("nodejs.stream.destroyed"),i=n("nodejs.stream.errored"),s=n("nodejs.stream.readable"),a=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function u(W,te=!1){var ee;return!!(W&&typeof W.pipe=="function"&&typeof W.on=="function"&&(!te||typeof W.pause=="function"&&typeof W.resume=="function")&&(!W._writableState||((ee=W._readableState)===null||ee===void 0?void 0:ee.readable)!==!1)&&(!W._writableState||W._readableState))}function d(W){var te;return!!(W&&typeof W.write=="function"&&typeof W.on=="function"&&(!W._readableState||((te=W._writableState)===null||te===void 0?void 0:te.writable)!==!1))}function h(W){return!!(W&&typeof W.pipe=="function"&&W._readableState&&typeof W.on=="function"&&typeof W.write=="function")}function m(W){return W&&(W._readableState||W._writableState||typeof W.write=="function"&&typeof W.on=="function"||typeof W.pipe=="function"&&typeof W.on=="function")}function y(W){return!!(W&&!m(W)&&typeof W.pipeThrough=="function"&&typeof W.getReader=="function"&&typeof W.cancel=="function")}function b(W){return!!(W&&!m(W)&&typeof W.getWriter=="function"&&typeof W.abort=="function")}function v(W){return!!(W&&!m(W)&&typeof W.readable=="object"&&typeof W.writable=="object")}function x(W){return y(W)||b(W)||v(W)}function w(W,te){return W==null?!1:te===!0?typeof W[e]=="function":te===!1?typeof W[t]=="function":typeof W[e]=="function"||typeof W[t]=="function"}function S(W){if(!m(W))return null;const te=W._writableState,ee=W._readableState,re=te||ee;return!!(W.destroyed||W[r]||re!=null&&re.destroyed)}function C(W){if(!d(W))return null;if(W.writableEnded===!0)return!0;const te=W._writableState;return te!=null&&te.errored?!1:typeof(te==null?void 0:te.ended)!="boolean"?null:te.ended}function k(W,te){if(!d(W))return null;if(W.writableFinished===!0)return!0;const ee=W._writableState;return ee!=null&&ee.errored?!1:typeof(ee==null?void 0:ee.finished)!="boolean"?null:!!(ee.finished||te===!1&&ee.ended===!0&&ee.length===0)}function A(W){if(!u(W))return null;if(W.readableEnded===!0)return!0;const te=W._readableState;return!te||te.errored?!1:typeof(te==null?void 0:te.ended)!="boolean"?null:te.ended}function R(W,te){if(!u(W))return null;const ee=W._readableState;return ee!=null&&ee.errored?!1:typeof(ee==null?void 0:ee.endEmitted)!="boolean"?null:!!(ee.endEmitted||te===!1&&ee.ended===!0&&ee.length===0)}function N(W){return W&&W[s]!=null?W[s]:typeof(W==null?void 0:W.readable)!="boolean"?null:S(W)?!1:u(W)&&W.readable&&!R(W)}function I(W){return W&&W[a]!=null?W[a]:typeof(W==null?void 0:W.writable)!="boolean"?null:S(W)?!1:d(W)&&W.writable&&!C(W)}function O(W,te){return m(W)?S(W)?!0:!((te==null?void 0:te.readable)!==!1&&N(W)||(te==null?void 0:te.writable)!==!1&&I(W)):null}function L(W){var te,ee;return m(W)?W.writableErrored?W.writableErrored:(te=(ee=W._writableState)===null||ee===void 0?void 0:ee.errored)!==null&&te!==void 0?te:null:null}function P(W){var te,ee;return m(W)?W.readableErrored?W.readableErrored:(te=(ee=W._readableState)===null||ee===void 0?void 0:ee.errored)!==null&&te!==void 0?te:null:null}function V(W){if(!m(W))return null;if(typeof W.closed=="boolean")return W.closed;const te=W._writableState,ee=W._readableState;return typeof(te==null?void 0:te.closed)=="boolean"||typeof(ee==null?void 0:ee.closed)=="boolean"?(te==null?void 0:te.closed)||(ee==null?void 0:ee.closed):typeof W._closed=="boolean"&&F(W)?W._closed:null}function F(W){return typeof W._closed=="boolean"&&typeof W._defaultKeepAlive=="boolean"&&typeof W._removedConnection=="boolean"&&typeof W._removedContLen=="boolean"}function J(W){return typeof W._sent100=="boolean"&&F(W)}function U(W){var te;return typeof W._consuming=="boolean"&&typeof W._dumped=="boolean"&&((te=W.req)===null||te===void 0?void 0:te.upgradeOrConnect)===void 0}function G(W){if(!m(W))return null;const te=W._writableState,ee=W._readableState,re=te||ee;return!re&&J(W)||!!(re&&re.autoDestroy&&re.emitClose&&re.closed===!1)}function $(W){var te;return!!(W&&((te=W[o])!==null&&te!==void 0?te:W.readableDidRead||W.readableAborted))}function ne(W){var te,ee,re,de,oe,Ie,je,Me,Se,qe;return!!(W&&((te=(ee=(re=(de=(oe=(Ie=W[i])!==null&&Ie!==void 0?Ie:W.readableErrored)!==null&&oe!==void 0?oe:W.writableErrored)!==null&&de!==void 0?de:(je=W._readableState)===null||je===void 0?void 0:je.errorEmitted)!==null&&re!==void 0?re:(Me=W._writableState)===null||Me===void 0?void 0:Me.errorEmitted)!==null&&ee!==void 0?ee:(Se=W._readableState)===null||Se===void 0?void 0:Se.errored)!==null&&te!==void 0?te:!((qe=W._writableState)===null||qe===void 0)&&qe.errored))}return dM={isDestroyed:S,kIsDestroyed:r,isDisturbed:$,kIsDisturbed:o,isErrored:ne,kIsErrored:i,isReadable:N,kIsReadable:s,kIsClosedPromise:l,kControllerErrorFunction:c,kIsWritable:a,isClosed:V,isDuplexNodeStream:h,isFinished:O,isIterable:w,isReadableNodeStream:u,isReadableStream:y,isReadableEnded:A,isReadableFinished:R,isReadableErrored:P,isNodeStream:m,isWebStream:x,isWritable:I,isWritableNodeStream:d,isWritableStream:b,isWritableEnded:C,isWritableFinished:k,isWritableErrored:L,isServerRequest:U,isServerResponse:J,willEmitClose:G,isTransformStream:v},dM}var l9;function Mh(){if(l9)return vS.exports;l9=1;const e=Tm(),{AbortError:t,codes:n}=io(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:i}=n,{kEmptyObject:s,once:a}=Co(),{validateAbortSignal:o,validateFunction:l,validateObject:c,validateBoolean:u}=r1(),{Promise:d,PromisePrototypeThen:h,SymbolDispose:m}=Zi(),{isClosed:y,isReadable:b,isReadableNodeStream:v,isReadableStream:x,isReadableFinished:w,isReadableErrored:S,isWritable:C,isWritableNodeStream:k,isWritableStream:A,isWritableFinished:R,isWritableErrored:N,isNodeStream:I,willEmitClose:O,kIsClosedPromise:L}=Kd();let P;function V($){return $.setHeader&&typeof $.abort=="function"}const F=()=>{};function J($,ne,W){var te,ee;if(arguments.length===2?(W=ne,ne=s):ne==null?ne=s:c(ne,"options"),l(W,"callback"),o(ne.signal,"options.signal"),W=a(W),x($)||A($))return U($,ne,W);if(!I($))throw new r("stream",["ReadableStream","WritableStream","Stream"],$);const re=(te=ne.readable)!==null&&te!==void 0?te:v($),de=(ee=ne.writable)!==null&&ee!==void 0?ee:k($),oe=$._writableState,Ie=$._readableState,je=()=>{$.writable||qe()};let Me=O($)&&v($)===re&&k($)===de,Se=R($,!1);const qe=()=>{Se=!0,$.destroyed&&(Me=!1),!(Me&&(!$.readable||re))&&(!re||Qe)&&W.call($)};let Qe=w($,!1);const We=()=>{Qe=!0,$.destroyed&&(Me=!1),!(Me&&(!$.writable||de))&&(!de||Se)&&W.call($)},Re=ie=>{W.call($,ie)};let K=y($);const ge=()=>{K=!0;const ie=N($)||S($);if(ie&&typeof ie!="boolean")return W.call($,ie);if(re&&!Qe&&v($,!0)&&!w($,!1))return W.call($,new i);if(de&&!Se&&!R($,!1))return W.call($,new i);W.call($)},Te=()=>{K=!0;const ie=N($)||S($);if(ie&&typeof ie!="boolean")return W.call($,ie);W.call($)},ce=()=>{$.req.on("finish",qe)};V($)?($.on("complete",qe),Me||$.on("abort",ge),$.req?ce():$.on("request",ce)):de&&!oe&&($.on("end",je),$.on("close",je)),!Me&&typeof $.aborted=="boolean"&&$.on("aborted",ge),$.on("end",We),$.on("finish",qe),ne.error!==!1&&$.on("error",Re),$.on("close",ge),K?e.nextTick(ge):oe!=null&&oe.errorEmitted||Ie!=null&&Ie.errorEmitted?Me||e.nextTick(Te):(!re&&(!Me||b($))&&(Se||C($)===!1)||!de&&(!Me||C($))&&(Qe||b($)===!1)||Ie&&$.req&&$.aborted)&&e.nextTick(Te);const le=()=>{W=F,$.removeListener("aborted",ge),$.removeListener("complete",qe),$.removeListener("abort",ge),$.removeListener("request",ce),$.req&&$.req.removeListener("finish",qe),$.removeListener("end",je),$.removeListener("close",je),$.removeListener("finish",qe),$.removeListener("end",We),$.removeListener("error",Re),$.removeListener("close",ge)};if(ne.signal&&!K){const ie=()=>{const Ee=W;le(),Ee.call($,new t(void 0,{cause:ne.signal.reason}))};if(ne.signal.aborted)e.nextTick(ie);else{P=P||Co().addAbortListener;const Ee=P(ne.signal,ie),Be=W;W=a((...Ce)=>{Ee[m](),Be.apply($,Ce)})}}return le}function U($,ne,W){let te=!1,ee=F;if(ne.signal)if(ee=()=>{te=!0,W.call($,new t(void 0,{cause:ne.signal.reason}))},ne.signal.aborted)e.nextTick(ee);else{P=P||Co().addAbortListener;const de=P(ne.signal,ee),oe=W;W=a((...Ie)=>{de[m](),oe.apply($,Ie)})}const re=(...de)=>{te||e.nextTick(()=>W.apply($,de))};return h($[L].promise,re,re),F}function G($,ne){var W;let te=!1;return ne===null&&(ne=s),(W=ne)!==null&&W!==void 0&&W.cleanup&&(u(ne.cleanup,"cleanup"),te=ne.cleanup),new d((ee,re)=>{const de=J($,ne,oe=>{te&&de(),oe?re(oe):ee()})})}return vS.exports=J,vS.exports.finished=G,vS.exports}var fM,c9;function My(){if(c9)return fM;c9=1;const e=Tm(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=io(),{Symbol:i}=Zi(),{kIsDestroyed:s,isDestroyed:a,isFinished:o,isServerRequest:l}=Kd(),c=i("kDestroy"),u=i("kConstruct");function d(O,L,P){O&&(O.stack,L&&!L.errored&&(L.errored=O),P&&!P.errored&&(P.errored=O))}function h(O,L){const P=this._readableState,V=this._writableState,F=V||P;return V!=null&&V.destroyed||P!=null&&P.destroyed?(typeof L=="function"&&L(),this):(d(O,V,P),V&&(V.destroyed=!0),P&&(P.destroyed=!0),F.constructed?m(this,O,L):this.once(c,function(J){m(this,t(J,O),L)}),this)}function m(O,L,P){let V=!1;function F(J){if(V)return;V=!0;const U=O._readableState,G=O._writableState;d(J,G,U),G&&(G.closed=!0),U&&(U.closed=!0),typeof P=="function"&&P(J),J?e.nextTick(y,O,J):e.nextTick(b,O)}try{O._destroy(L||null,F)}catch(J){F(J)}}function y(O,L){v(O,L),b(O)}function b(O){const L=O._readableState,P=O._writableState;P&&(P.closeEmitted=!0),L&&(L.closeEmitted=!0),(P!=null&&P.emitClose||L!=null&&L.emitClose)&&O.emit("close")}function v(O,L){const P=O._readableState,V=O._writableState;V!=null&&V.errorEmitted||P!=null&&P.errorEmitted||(V&&(V.errorEmitted=!0),P&&(P.errorEmitted=!0),O.emit("error",L))}function x(){const O=this._readableState,L=this._writableState;O&&(O.constructed=!0,O.closed=!1,O.closeEmitted=!1,O.destroyed=!1,O.errored=null,O.errorEmitted=!1,O.reading=!1,O.ended=O.readable===!1,O.endEmitted=O.readable===!1),L&&(L.constructed=!0,L.destroyed=!1,L.closed=!1,L.closeEmitted=!1,L.errored=null,L.errorEmitted=!1,L.finalCalled=!1,L.prefinished=!1,L.ended=L.writable===!1,L.ending=L.writable===!1,L.finished=L.writable===!1)}function w(O,L,P){const V=O._readableState,F=O._writableState;if(F!=null&&F.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||F!=null&&F.autoDestroy?O.destroy(L):L&&(L.stack,F&&!F.errored&&(F.errored=L),V&&!V.errored&&(V.errored=L),P?e.nextTick(v,O,L):v(O,L))}function S(O,L){if(typeof O._construct!="function")return;const P=O._readableState,V=O._writableState;P&&(P.constructed=!1),V&&(V.constructed=!1),O.once(u,L),!(O.listenerCount(u)>1)&&e.nextTick(C,O)}function C(O){let L=!1;function P(V){if(L){w(O,V??new n);return}L=!0;const F=O._readableState,J=O._writableState,U=J||F;F&&(F.constructed=!0),J&&(J.constructed=!0),U.destroyed?O.emit(c,V):V?w(O,V,!0):e.nextTick(k,O)}try{O._construct(V=>{e.nextTick(P,V)})}catch(V){e.nextTick(P,V)}}function k(O){O.emit(u)}function A(O){return(O==null?void 0:O.setHeader)&&typeof O.abort=="function"}function R(O){O.emit("close")}function N(O,L){O.emit("error",L),e.nextTick(R,O)}function I(O,L){!O||a(O)||(!L&&!o(O)&&(L=new r),l(O)?(O.socket=null,O.destroy(L)):A(O)?O.abort():A(O.req)?O.req.abort():typeof O.destroy=="function"?O.destroy(L):typeof O.close=="function"?O.close():L?e.nextTick(N,O,L):e.nextTick(R,O),O.destroyed||(O[s]=!0))}return fM={construct:S,destroyer:I,destroy:h,undestroy:x,errorOrDestroy:w},fM}var hM,u9;function VP(){if(u9)return hM;u9=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Zi(),{EventEmitter:n}=OE();function r(s){n.call(this,s)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(s,a){const o=this;function l(b){s.writable&&s.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function c(){o.readable&&o.resume&&o.resume()}s.on("drain",c),!s._isStdio&&(!a||a.end!==!1)&&(o.on("end",d),o.on("close",h));let u=!1;function d(){u||(u=!0,s.end())}function h(){u||(u=!0,typeof s.destroy=="function"&&s.destroy())}function m(b){y(),n.listenerCount(this,"error")===0&&this.emit("error",b)}i(o,"error",m),i(s,"error",m);function y(){o.removeListener("data",l),s.removeListener("drain",c),o.removeListener("end",d),o.removeListener("close",h),o.removeListener("error",m),s.removeListener("error",m),o.removeListener("end",y),o.removeListener("close",y),s.removeListener("close",y)}return o.on("end",y),o.on("close",y),s.on("close",y),s.emit("pipe",o),s};function i(s,a,o){if(typeof s.prependListener=="function")return s.prependListener(a,o);!s._events||!s._events[a]?s.on(a,o):e(s._events[a])?s._events[a].unshift(o):s._events[a]=[o,s._events[a]]}return hM={Stream:r,prependListener:i},hM}var pM={exports:{}},d9;function PE(){return d9||(d9=1,function(e){const{SymbolDispose:t}=Zi(),{AbortError:n,codes:r}=io(),{isNodeStream:i,isWebStream:s,kControllerErrorFunction:a}=Kd(),o=Mh(),{ERR_INVALID_ARG_TYPE:l}=r;let c;const u=(d,h)=>{if(typeof d!="object"||!("aborted"in d))throw new l(h,"AbortSignal",d)};e.exports.addAbortSignal=function(h,m){if(u(h,"signal"),!i(m)&&!s(m))throw new l("stream",["ReadableStream","WritableStream","Stream"],m);return e.exports.addAbortSignalNoValidate(h,m)},e.exports.addAbortSignalNoValidate=function(d,h){if(typeof d!="object"||!("aborted"in d))return h;const m=i(h)?()=>{h.destroy(new n(void 0,{cause:d.reason}))}:()=>{h[a](new n(void 0,{cause:d.reason}))};if(d.aborted)m();else{c=c||Co().addAbortListener;const y=c(d,m);o(h,y[t])}return h}}(pM)),pM.exports}var mM,f9;function GSe(){if(f9)return mM;f9=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Zi(),{Buffer:i}=Nh(),{inspect:s}=Co();return mM=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,c=""+l.data;for(;(l=l.next)!==null;)c+=o+l.data;return c}concat(o){if(this.length===0)return i.alloc(0);const l=i.allocUnsafe(o>>>0);let c=this.head,u=0;for(;c;)n(l,c.data,u),u+=c.data.length,c=c.next;return l}consume(o,l){const c=this.head.data;if(o<c.length){const u=c.slice(0,o);return this.head.data=c.slice(o),u}return o===c.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",c=this.head,u=0;do{const d=c.data;if(o>d.length)l+=d,o-=d.length;else{o===d.length?(l+=d,++u,c.next?this.head=c.next:this.head=this.tail=null):(l+=e(d,0,o),this.head=c,c.data=e(d,o));break}++u}while((c=c.next)!==null);return this.length-=u,l}_getBuffer(o){const l=i.allocUnsafe(o),c=o;let u=this.head,d=0;do{const h=u.data;if(o>h.length)n(l,h,c-o),o-=h.length;else{o===h.length?(n(l,h,c-o),++d,u.next?this.head=u.next:this.head=this.tail=null):(n(l,new r(h.buffer,h.byteOffset,o),c-o),this.head=u,u.data=h.slice(o));break}++d}while((u=u.next)!==null);return this.length-=d,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return s(this,{...l,depth:0,customInspect:!1})}},mM}var gM,h9;function DE(){if(h9)return gM;h9=1;const{MathFloor:e,NumberIsInteger:t}=Zi(),{validateInteger:n}=r1(),{ERR_INVALID_ARG_VALUE:r}=io().codes;let i=16*1024,s=16;function a(u,d,h){return u.highWaterMark!=null?u.highWaterMark:d?u[h]:null}function o(u){return u?s:i}function l(u,d){n(d,"value",0),u?s=d:i=d}function c(u,d,h,m){const y=a(d,m,h);if(y!=null){if(!t(y)||y<0){const b=m?`options.${h}`:"options.highWaterMark";throw new r(b,y)}return e(y)}return o(u.objectMode)}return gM={getHighWaterMark:c,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},gM}var yM={},xS={exports:{}},p9;function WP(){return p9||(p9=1,function(e,t){var n=Nh(),r=n.Buffer;function i(a,o){for(var l in a)o[l]=a[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s);function s(a,o,l){return r(a,o,l)}i(r,s),s.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,o,l)},s.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=r(a);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}}(xS,xS.exports)),xS.exports}var m9;function KSe(){if(m9)return yM;m9=1;var e=WP().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var w;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(w)return;x=(""+x).toLowerCase(),w=!0}}function r(x){var w=n(x);if(typeof w!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return w||x}yM.StringDecoder=i;function i(x){this.encoding=r(x);var w;switch(this.encoding){case"utf16le":this.text=d,this.end=h,w=4;break;case"utf8":this.fillLast=l,w=4;break;case"base64":this.text=m,this.end=y,w=3;break;default:this.write=b,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(w)}i.prototype.write=function(x){if(x.length===0)return"";var w,S;if(this.lastNeed){if(w=this.fillLast(x),w===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<x.length?w?w+this.text(x,S):this.text(x,S):w||""},i.prototype.end=u,i.prototype.text=c,i.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function s(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function a(x,w,S){var C=w.length-1;if(C<S)return 0;var k=s(w[C]);return k>=0?(k>0&&(x.lastNeed=k-1),k):--C<S||k===-2?0:(k=s(w[C]),k>=0?(k>0&&(x.lastNeed=k-2),k):--C<S||k===-2?0:(k=s(w[C]),k>=0?(k>0&&(k===2?k=0:x.lastNeed=k-3),k):0))}function o(x,w,S){if((w[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return x.lastNeed=2,""}}function l(x){var w=this.lastTotal-this.lastNeed,S=o(this,x);if(S!==void 0)return S;if(this.lastNeed<=x.length)return x.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,w,0,x.length),this.lastNeed-=x.length}function c(x,w){var S=a(this,x,w);if(!this.lastNeed)return x.toString("utf8",w);this.lastTotal=S;var C=x.length-(S-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",w,C)}function u(x){var w=x&&x.length?this.write(x):"";return this.lastNeed?w+"":w}function d(x,w){if((x.length-w)%2===0){var S=x.toString("utf16le",w);if(S){var C=S.charCodeAt(S.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",w,x.length-1)}function h(x){var w=x&&x.length?this.write(x):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,S)}return w}function m(x,w){var S=(x.length-w)%3;return S===0?x.toString("base64",w):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",w,x.length-S))}function y(x){var w=x&&x.length?this.write(x):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function b(x){return x.toString(this.encoding)}function v(x){return x&&x.length?this.write(x):""}return yM}var bM,g9;function jY(){if(g9)return bM;g9=1;const e=Tm(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Zi(),{Buffer:i}=Nh(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:a}=io().codes;function o(l,c,u){let d;if(typeof c=="string"||c instanceof i)return new l({objectMode:!0,...u,read(){this.push(c),this.push(null)}});let h;if(c&&c[n])h=!0,d=c[n]();else if(c&&c[r])h=!1,d=c[r]();else throw new s("iterable",["Iterable"],c);const m=new l({objectMode:!0,highWaterMark:1,...u});let y=!1;m._read=function(){y||(y=!0,v())},m._destroy=function(x,w){t(b(x),()=>e.nextTick(w,x),S=>e.nextTick(w,S||x))};async function b(x){const w=x!=null,S=typeof d.throw=="function";if(w&&S){const{value:C,done:k}=await d.throw(x);if(await C,k)return}if(typeof d.return=="function"){const{value:C}=await d.return();await C}}async function v(){for(;;){try{const{value:x,done:w}=h?await d.next():d.next();if(w)m.push(null);else{const S=x&&typeof x.then=="function"?await x:x;if(S===null)throw y=!1,new a;if(m.push(S))continue;y=!1}}catch(x){m.destroy(x)}break}}return m}return bM=o,bM}var vM,y9;function FE(){if(y9)return vM;y9=1;const e=Tm(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:a,ObjectSetPrototypeOf:o,Promise:l,SafeSet:c,SymbolAsyncDispose:u,SymbolAsyncIterator:d,Symbol:h}=Zi();vM=Ce,Ce.ReadableState=Be;const{EventEmitter:m}=OE(),{Stream:y,prependListener:b}=VP(),{Buffer:v}=Nh(),{addAbortSignal:x}=PE(),w=Mh();let S=Co().debuglog("stream",he=>{S=he});const C=GSe(),k=My(),{getHighWaterMark:A,getDefaultHighWaterMark:R}=DE(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:I,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:L,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:V},AbortError:F}=io(),{validateObject:J}=r1(),U=h("kPaused"),{StringDecoder:G}=KSe(),$=jY();o(Ce.prototype,y.prototype),o(Ce,y);const ne=()=>{},{errorOrDestroy:W}=k,te=1,ee=2,re=4,de=8,oe=16,Ie=32,je=64,Me=128,Se=256,qe=512,Qe=1024,We=2048,Re=4096,K=8192,ge=16384,Te=32768,ce=65536,le=1<<17,ie=1<<18;function Ee(he){return{enumerable:!1,get(){return(this.state&he)!==0},set(Y){Y?this.state|=he:this.state&=~he}}}s(Be.prototype,{objectMode:Ee(te),ended:Ee(ee),endEmitted:Ee(re),reading:Ee(de),constructed:Ee(oe),sync:Ee(Ie),needReadable:Ee(je),emittedReadable:Ee(Me),readableListening:Ee(Se),resumeScheduled:Ee(qe),errorEmitted:Ee(Qe),emitClose:Ee(We),autoDestroy:Ee(Re),destroyed:Ee(K),closed:Ee(ge),closeEmitted:Ee(Te),multiAwaitDrain:Ee(ce),readingMore:Ee(le),dataEmitted:Ee(ie)});function Be(he,Y,H){typeof H!="boolean"&&(H=Y instanceof Fd()),this.state=We|Re|oe|Ie,he&&he.objectMode&&(this.state|=te),H&&he&&he.readableObjectMode&&(this.state|=te),this.highWaterMark=he?A(this,he,"readableHighWaterMark",H):R(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[U]=null,he&&he.emitClose===!1&&(this.state&=-2049),he&&he.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=he&&he.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,he&&he.encoding&&(this.decoder=new G(he.encoding),this.encoding=he.encoding)}function Ce(he){if(!(this instanceof Ce))return new Ce(he);const Y=this instanceof Fd();this._readableState=new Be(he,this,Y),he&&(typeof he.read=="function"&&(this._read=he.read),typeof he.destroy=="function"&&(this._destroy=he.destroy),typeof he.construct=="function"&&(this._construct=he.construct),he.signal&&!Y&&x(he.signal,this)),y.call(this,he),k.construct(this,()=>{this._readableState.needReadable&&D(this,this._readableState)})}Ce.prototype.destroy=k.destroy,Ce.prototype._undestroy=k.undestroy,Ce.prototype._destroy=function(he,Y){Y(he)},Ce.prototype[m.captureRejectionSymbol]=function(he){this.destroy(he)},Ce.prototype[u]=function(){let he;return this.destroyed||(he=this.readableEnded?null:new F,this.destroy(he)),new l((Y,H)=>w(this,X=>X&&X!==he?H(X):Y(null)))},Ce.prototype.push=function(he,Y){return ct(this,he,Y,!1)},Ce.prototype.unshift=function(he,Y){return ct(this,he,Y,!0)};function ct(he,Y,H,X){S("readableAddChunk",Y);const be=he._readableState;let Oe;if((be.state&te)===0&&(typeof Y=="string"?(H=H||be.defaultEncoding,be.encoding!==H&&(X&&be.encoding?Y=v.from(Y,H).toString(be.encoding):(Y=v.from(Y,H),H=""))):Y instanceof v?H="":y._isUint8Array(Y)?(Y=y._uint8ArrayToBuffer(Y),H=""):Y!=null&&(Oe=new I("chunk",["string","Buffer","Uint8Array"],Y))),Oe)W(he,Oe);else if(Y===null)be.state&=-9,Bt(he,be);else if((be.state&te)!==0||Y&&Y.length>0)if(X)if((be.state&re)!==0)W(he,new V);else{if(be.destroyed||be.errored)return!1;Tt(he,be,Y,!0)}else if(be.ended)W(he,new P);else{if(be.destroyed||be.errored)return!1;be.state&=-9,be.decoder&&!H?(Y=be.decoder.write(Y),be.objectMode||Y.length!==0?Tt(he,be,Y,!1):D(he,be)):Tt(he,be,Y,!1)}else X||(be.state&=-9,D(he,be));return!be.ended&&(be.length<be.highWaterMark||be.length===0)}function Tt(he,Y,H,X){Y.flowing&&Y.length===0&&!Y.sync&&he.listenerCount("data")>0?((Y.state&ce)!==0?Y.awaitDrainWriters.clear():Y.awaitDrainWriters=null,Y.dataEmitted=!0,he.emit("data",H)):(Y.length+=Y.objectMode?1:H.length,X?Y.buffer.unshift(H):Y.buffer.push(H),(Y.state&je)!==0&&tn(he)),D(he,Y)}Ce.prototype.isPaused=function(){const he=this._readableState;return he[U]===!0||he.flowing===!1},Ce.prototype.setEncoding=function(he){const Y=new G(he);this._readableState.decoder=Y,this._readableState.encoding=this._readableState.decoder.encoding;const H=this._readableState.buffer;let X="";for(const be of H)X+=Y.write(be);return H.clear(),X!==""&&H.push(X),this._readableState.length=X.length,this};const ft=1073741824;function Pt(he){if(he>ft)throw new L("size","<= 1GiB",he);return he--,he|=he>>>1,he|=he>>>2,he|=he>>>4,he|=he>>>8,he|=he>>>16,he++,he}function Ut(he,Y){return he<=0||Y.length===0&&Y.ended?0:(Y.state&te)!==0?1:r(he)?Y.flowing&&Y.length?Y.buffer.first().length:Y.length:he<=Y.length?he:Y.ended?Y.length:0}Ce.prototype.read=function(he){S("read",he),he===void 0?he=NaN:n(he)||(he=i(he,10));const Y=this._readableState,H=he;if(he>Y.highWaterMark&&(Y.highWaterMark=Pt(he)),he!==0&&(Y.state&=-129),he===0&&Y.needReadable&&((Y.highWaterMark!==0?Y.length>=Y.highWaterMark:Y.length>0)||Y.ended))return S("read: emitReadable",Y.length,Y.ended),Y.length===0&&Y.ended?it(this):tn(this),null;if(he=Ut(he,Y),he===0&&Y.ended)return Y.length===0&&it(this),null;let X=(Y.state&je)!==0;if(S("need readable",X),(Y.length===0||Y.length-he<Y.highWaterMark)&&(X=!0,S("length less than watermark",X)),Y.ended||Y.reading||Y.destroyed||Y.errored||!Y.constructed)X=!1,S("reading, ended or constructing",X);else if(X){S("do read"),Y.state|=de|Ie,Y.length===0&&(Y.state|=je);try{this._read(Y.highWaterMark)}catch(Oe){W(this,Oe)}Y.state&=-33,Y.reading||(he=Ut(H,Y))}let be;return he>0?be=$e(he,Y):be=null,be===null?(Y.needReadable=Y.length<=Y.highWaterMark,he=0):(Y.length-=he,Y.multiAwaitDrain?Y.awaitDrainWriters.clear():Y.awaitDrainWriters=null),Y.length===0&&(Y.ended||(Y.needReadable=!0),H!==he&&Y.ended&&it(this)),be!==null&&!Y.errorEmitted&&!Y.closeEmitted&&(Y.dataEmitted=!0,this.emit("data",be)),be};function Bt(he,Y){if(S("onEofChunk"),!Y.ended){if(Y.decoder){const H=Y.decoder.end();H&&H.length&&(Y.buffer.push(H),Y.length+=Y.objectMode?1:H.length)}Y.ended=!0,Y.sync?tn(he):(Y.needReadable=!1,Y.emittedReadable=!0,xe(he))}}function tn(he){const Y=he._readableState;S("emitReadable",Y.needReadable,Y.emittedReadable),Y.needReadable=!1,Y.emittedReadable||(S("emitReadable",Y.flowing),Y.emittedReadable=!0,e.nextTick(xe,he))}function xe(he){const Y=he._readableState;S("emitReadable_",Y.destroyed,Y.length,Y.ended),!Y.destroyed&&!Y.errored&&(Y.length||Y.ended)&&(he.emit("readable"),Y.emittedReadable=!1),Y.needReadable=!Y.flowing&&!Y.ended&&Y.length<=Y.highWaterMark,bt(he)}function D(he,Y){!Y.readingMore&&Y.constructed&&(Y.readingMore=!0,e.nextTick(Z,he,Y))}function Z(he,Y){for(;!Y.reading&&!Y.ended&&(Y.length<Y.highWaterMark||Y.flowing&&Y.length===0);){const H=Y.length;if(S("maybeReadMore read 0"),he.read(0),H===Y.length)break}Y.readingMore=!1}Ce.prototype._read=function(he){throw new O("_read()")},Ce.prototype.pipe=function(he,Y){const H=this,X=this._readableState;X.pipes.length===1&&(X.multiAwaitDrain||(X.multiAwaitDrain=!0,X.awaitDrainWriters=new c(X.awaitDrainWriters?[X.awaitDrainWriters]:[]))),X.pipes.push(he),S("pipe count=%d opts=%j",X.pipes.length,Y);const Oe=(!Y||Y.end!==!1)&&he!==e.stdout&&he!==e.stderr?wt:ni;X.endEmitted?e.nextTick(Oe):H.once("end",Oe),he.on("unpipe",Ge);function Ge(vr,hn){S("onunpipe"),vr===H&&hn&&hn.hasUnpiped===!1&&(hn.hasUnpiped=!0,Xt())}function wt(){S("onend"),he.end()}let en,$n=!1;function Xt(){S("cleanup"),he.removeListener("close",Er),he.removeListener("finish",ti),en&&he.removeListener("drain",en),he.removeListener("error",pr),he.removeListener("unpipe",Ge),H.removeListener("end",wt),H.removeListener("end",ni),H.removeListener("data",un),$n=!0,en&&X.awaitDrainWriters&&(!he._writableState||he._writableState.needDrain)&&en()}function nn(){$n||(X.pipes.length===1&&X.pipes[0]===he?(S("false write response, pause",0),X.awaitDrainWriters=he,X.multiAwaitDrain=!1):X.pipes.length>1&&X.pipes.includes(he)&&(S("false write response, pause",X.awaitDrainWriters.size),X.awaitDrainWriters.add(he)),H.pause()),en||(en=me(H,he),he.on("drain",en))}H.on("data",un);function un(vr){S("ondata");const hn=he.write(vr);S("dest.write",hn),hn===!1&&nn()}function pr(vr){if(S("onerror",vr),ni(),he.removeListener("error",pr),he.listenerCount("error")===0){const hn=he._writableState||he._readableState;hn&&!hn.errorEmitted?W(he,vr):he.emit("error",vr)}}b(he,"error",pr);function Er(){he.removeListener("finish",ti),ni()}he.once("close",Er);function ti(){S("onfinish"),he.removeListener("close",Er),ni()}he.once("finish",ti);function ni(){S("unpipe"),H.unpipe(he)}return he.emit("pipe",H),he.writableNeedDrain===!0?nn():X.flowing||(S("pipe resume"),H.resume()),he};function me(he,Y){return function(){const X=he._readableState;X.awaitDrainWriters===Y?(S("pipeOnDrain",1),X.awaitDrainWriters=null):X.multiAwaitDrain&&(S("pipeOnDrain",X.awaitDrainWriters.size),X.awaitDrainWriters.delete(Y)),(!X.awaitDrainWriters||X.awaitDrainWriters.size===0)&&he.listenerCount("data")&&he.resume()}}Ce.prototype.unpipe=function(he){const Y=this._readableState,H={hasUnpiped:!1};if(Y.pipes.length===0)return this;if(!he){const be=Y.pipes;Y.pipes=[],this.pause();for(let Oe=0;Oe<be.length;Oe++)be[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}const X=t(Y.pipes,he);return X===-1?this:(Y.pipes.splice(X,1),Y.pipes.length===0&&this.pause(),he.emit("unpipe",this,H),this)},Ce.prototype.on=function(he,Y){const H=y.prototype.on.call(this,he,Y),X=this._readableState;return he==="data"?(X.readableListening=this.listenerCount("readable")>0,X.flowing!==!1&&this.resume()):he==="readable"&&!X.endEmitted&&!X.readableListening&&(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,S("on readable",X.length,X.reading),X.length?tn(this):X.reading||e.nextTick(we,this)),H},Ce.prototype.addListener=Ce.prototype.on,Ce.prototype.removeListener=function(he,Y){const H=y.prototype.removeListener.call(this,he,Y);return he==="readable"&&e.nextTick(De,this),H},Ce.prototype.off=Ce.prototype.removeListener,Ce.prototype.removeAllListeners=function(he){const Y=y.prototype.removeAllListeners.apply(this,arguments);return(he==="readable"||he===void 0)&&e.nextTick(De,this),Y};function De(he){const Y=he._readableState;Y.readableListening=he.listenerCount("readable")>0,Y.resumeScheduled&&Y[U]===!1?Y.flowing=!0:he.listenerCount("data")>0?he.resume():Y.readableListening||(Y.flowing=null)}function we(he){S("readable nexttick read 0"),he.read(0)}Ce.prototype.resume=function(){const he=this._readableState;return he.flowing||(S("resume"),he.flowing=!he.readableListening,Ne(this,he)),he[U]=!1,this};function Ne(he,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,e.nextTick(fe,he,Y))}function fe(he,Y){S("resume",Y.reading),Y.reading||he.read(0),Y.resumeScheduled=!1,he.emit("resume"),bt(he),Y.flowing&&!Y.reading&&he.read(0)}Ce.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[U]=!0,this};function bt(he){const Y=he._readableState;for(S("flow",Y.flowing);Y.flowing&&he.read()!==null;);}Ce.prototype.wrap=function(he){let Y=!1;he.on("data",X=>{!this.push(X)&&he.pause&&(Y=!0,he.pause())}),he.on("end",()=>{this.push(null)}),he.on("error",X=>{W(this,X)}),he.on("close",()=>{this.destroy()}),he.on("destroy",()=>{this.destroy()}),this._read=()=>{Y&&he.resume&&(Y=!1,he.resume())};const H=a(he);for(let X=1;X<H.length;X++){const be=H[X];this[be]===void 0&&typeof he[be]=="function"&&(this[be]=he[be].bind(he))}return this},Ce.prototype[d]=function(){return ot(this)},Ce.prototype.iterator=function(he){return he!==void 0&&J(he,"options"),ot(this,he)};function ot(he,Y){typeof he.read!="function"&&(he=Ce.wrap(he,{objectMode:!0}));const H=B(he,Y);return H.stream=he,H}async function*B(he,Y){let H=ne;function X(Ge){this===he?(H(),H=ne):H=Ge}he.on("readable",X);let be;const Oe=w(he,{writable:!1},Ge=>{be=Ge?N(be,Ge):null,H(),H=ne});try{for(;;){const Ge=he.destroyed?null:he.read();if(Ge!==null)yield Ge;else{if(be)throw be;if(be===null)return;await new l(X)}}}catch(Ge){throw be=N(be,Ge),be}finally{(be||(Y==null?void 0:Y.destroyOnReturn)!==!1)&&(be===void 0||he._readableState.autoDestroy)?k.destroyer(he,null):(he.off("readable",X),Oe())}}s(Ce.prototype,{readable:{__proto__:null,get(){const he=this._readableState;return!!he&&he.readable!==!1&&!he.destroyed&&!he.errorEmitted&&!he.endEmitted},set(he){this._readableState&&(this._readableState.readable=!!he)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(he){this._readableState&&(this._readableState.flowing=he)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(he){this._readableState&&(this._readableState.destroyed=he)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(Be.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[U]!==!1},set(he){this[U]=!!he}}}),Ce._fromList=$e;function $e(he,Y){if(Y.length===0)return null;let H;return Y.objectMode?H=Y.buffer.shift():!he||he>=Y.length?(Y.decoder?H=Y.buffer.join(""):Y.buffer.length===1?H=Y.buffer.first():H=Y.buffer.concat(Y.length),Y.buffer.clear()):H=Y.buffer.consume(he,Y.decoder),H}function it(he){const Y=he._readableState;S("endReadable",Y.endEmitted),Y.endEmitted||(Y.ended=!0,e.nextTick(ye,Y,he))}function ye(he,Y){if(S("endReadableNT",he.endEmitted,he.length),!he.errored&&!he.closeEmitted&&!he.endEmitted&&he.length===0){if(he.endEmitted=!0,Y.emit("end"),Y.writable&&Y.allowHalfOpen===!1)e.nextTick(_e,Y);else if(he.autoDestroy){const H=Y._writableState;(!H||H.autoDestroy&&(H.finished||H.writable===!1))&&Y.destroy()}}}function _e(he){he.writable&&!he.writableEnded&&!he.destroyed&&he.end()}Ce.from=function(he,Y){return $(Ce,he,Y)};let ze;function kt(){return ze===void 0&&(ze={}),ze}return Ce.fromWeb=function(he,Y){return kt().newStreamReadableFromReadableStream(he,Y)},Ce.toWeb=function(he,Y){return kt().newReadableStreamFromStreamReadable(he,Y)},Ce.wrap=function(he,Y){var H,X;return new Ce({objectMode:(H=(X=he.readableObjectMode)!==null&&X!==void 0?X:he.objectMode)!==null&&H!==void 0?H:!0,...Y,destroy(be,Oe){k.destroyer(he,be),Oe(be)}}).wrap(he)},vM}var xM,b9;function HP(){if(b9)return xM;b9=1;const e=Tm(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:c}=Zi();xM=J,J.WritableState=V;const{EventEmitter:u}=OE(),d=VP().Stream,{Buffer:h}=Nh(),m=My(),{addAbortSignal:y}=PE(),{getHighWaterMark:b,getDefaultHighWaterMark:v}=DE(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:I}=io().codes,{errorOrDestroy:O}=m;a(J.prototype,d.prototype),a(J,d);function L(){}const P=l("kOnFinished");function V(Re,K,ge){typeof ge!="boolean"&&(ge=K instanceof Fd()),this.objectMode=!!(Re&&Re.objectMode),ge&&(this.objectMode=this.objectMode||!!(Re&&Re.writableObjectMode)),this.highWaterMark=Re?b(this,Re,"writableHighWaterMark",ge):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Te=!!(Re&&Re.decodeStrings===!1);this.decodeStrings=!Te,this.defaultEncoding=Re&&Re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=W.bind(void 0,K),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,F(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Re||Re.emitClose!==!1,this.autoDestroy=!Re||Re.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function F(Re){Re.buffered=[],Re.bufferedIndex=0,Re.allBuffers=!0,Re.allNoop=!0}V.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function J(Re){const K=this instanceof Fd();if(!K&&!r(J,this))return new J(Re);this._writableState=new V(Re,this,K),Re&&(typeof Re.write=="function"&&(this._write=Re.write),typeof Re.writev=="function"&&(this._writev=Re.writev),typeof Re.destroy=="function"&&(this._destroy=Re.destroy),typeof Re.final=="function"&&(this._final=Re.final),typeof Re.construct=="function"&&(this._construct=Re.construct),Re.signal&&y(Re.signal,this)),d.call(this,Re),m.construct(this,()=>{const ge=this._writableState;ge.writing||de(this,ge),Me(this,ge)})}i(J,c,{__proto__:null,value:function(Re){return r(this,Re)?!0:this!==J?!1:Re&&Re._writableState instanceof V}}),J.prototype.pipe=function(){O(this,new C)};function U(Re,K,ge,Te){const ce=Re._writableState;if(typeof ge=="function")Te=ge,ge=ce.defaultEncoding;else{if(!ge)ge=ce.defaultEncoding;else if(ge!=="buffer"&&!h.isEncoding(ge))throw new I(ge);typeof Te!="function"&&(Te=L)}if(K===null)throw new R;if(!ce.objectMode)if(typeof K=="string")ce.decodeStrings!==!1&&(K=h.from(K,ge),ge="buffer");else if(K instanceof h)ge="buffer";else if(d._isUint8Array(K))K=d._uint8ArrayToBuffer(K),ge="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],K);let le;return ce.ending?le=new N:ce.destroyed&&(le=new k("write")),le?(e.nextTick(Te,le),O(Re,le,!0),le):(ce.pendingcb++,G(Re,ce,K,ge,Te))}J.prototype.write=function(Re,K,ge){return U(this,Re,K,ge)===!0},J.prototype.cork=function(){this._writableState.corked++},J.prototype.uncork=function(){const Re=this._writableState;Re.corked&&(Re.corked--,Re.writing||de(this,Re))},J.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=o(K)),!h.isEncoding(K))throw new I(K);return this._writableState.defaultEncoding=K,this};function G(Re,K,ge,Te,ce){const le=K.objectMode?1:ge.length;K.length+=le;const ie=K.length<K.highWaterMark;return ie||(K.needDrain=!0),K.writing||K.corked||K.errored||!K.constructed?(K.buffered.push({chunk:ge,encoding:Te,callback:ce}),K.allBuffers&&Te!=="buffer"&&(K.allBuffers=!1),K.allNoop&&ce!==L&&(K.allNoop=!1)):(K.writelen=le,K.writecb=ce,K.writing=!0,K.sync=!0,Re._write(ge,Te,K.onwrite),K.sync=!1),ie&&!K.errored&&!K.destroyed}function $(Re,K,ge,Te,ce,le,ie){K.writelen=Te,K.writecb=ie,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new k("write")):ge?Re._writev(ce,K.onwrite):Re._write(ce,le,K.onwrite),K.sync=!1}function ne(Re,K,ge,Te){--K.pendingcb,Te(ge),re(K),O(Re,ge)}function W(Re,K){const ge=Re._writableState,Te=ge.sync,ce=ge.writecb;if(typeof ce!="function"){O(Re,new S);return}ge.writing=!1,ge.writecb=null,ge.length-=ge.writelen,ge.writelen=0,K?(K.stack,ge.errored||(ge.errored=K),Re._readableState&&!Re._readableState.errored&&(Re._readableState.errored=K),Te?e.nextTick(ne,Re,ge,K,ce):ne(Re,ge,K,ce)):(ge.buffered.length>ge.bufferedIndex&&de(Re,ge),Te?ge.afterWriteTickInfo!==null&&ge.afterWriteTickInfo.cb===ce?ge.afterWriteTickInfo.count++:(ge.afterWriteTickInfo={count:1,cb:ce,stream:Re,state:ge},e.nextTick(te,ge.afterWriteTickInfo)):ee(Re,ge,1,ce))}function te({stream:Re,state:K,count:ge,cb:Te}){return K.afterWriteTickInfo=null,ee(Re,K,ge,Te)}function ee(Re,K,ge,Te){for(!K.ending&&!Re.destroyed&&K.length===0&&K.needDrain&&(K.needDrain=!1,Re.emit("drain"));ge-- >0;)K.pendingcb--,Te();K.destroyed&&re(K),Me(Re,K)}function re(Re){if(Re.writing)return;for(let ce=Re.bufferedIndex;ce<Re.buffered.length;++ce){var K;const{chunk:le,callback:ie}=Re.buffered[ce],Ee=Re.objectMode?1:le.length;Re.length-=Ee,ie((K=Re.errored)!==null&&K!==void 0?K:new k("write"))}const ge=Re[P].splice(0);for(let ce=0;ce<ge.length;ce++){var Te;ge[ce]((Te=Re.errored)!==null&&Te!==void 0?Te:new k("end"))}F(Re)}function de(Re,K){if(K.corked||K.bufferProcessing||K.destroyed||!K.constructed)return;const{buffered:ge,bufferedIndex:Te,objectMode:ce}=K,le=ge.length-Te;if(!le)return;let ie=Te;if(K.bufferProcessing=!0,le>1&&Re._writev){K.pendingcb-=le-1;const Ee=K.allNoop?L:Ce=>{for(let ct=ie;ct<ge.length;++ct)ge[ct].callback(Ce)},Be=K.allNoop&&ie===0?ge:t(ge,ie);Be.allBuffers=K.allBuffers,$(Re,K,!0,K.length,Be,"",Ee),F(K)}else{do{const{chunk:Ee,encoding:Be,callback:Ce}=ge[ie];ge[ie++]=null;const ct=ce?1:Ee.length;$(Re,K,!1,ct,Ee,Be,Ce)}while(ie<ge.length&&!K.writing);ie===ge.length?F(K):ie>256?(ge.splice(0,ie),K.bufferedIndex=0):K.bufferedIndex=ie}K.bufferProcessing=!1}J.prototype._write=function(Re,K,ge){if(this._writev)this._writev([{chunk:Re,encoding:K}],ge);else throw new w("_write()")},J.prototype._writev=null,J.prototype.end=function(Re,K,ge){const Te=this._writableState;typeof Re=="function"?(ge=Re,Re=null,K=null):typeof K=="function"&&(ge=K,K=null);let ce;if(Re!=null){const le=U(this,Re,K);le instanceof n&&(ce=le)}return Te.corked&&(Te.corked=1,this.uncork()),ce||(!Te.errored&&!Te.ending?(Te.ending=!0,Me(this,Te,!0),Te.ended=!0):Te.finished?ce=new A("end"):Te.destroyed&&(ce=new k("end"))),typeof ge=="function"&&(ce||Te.finished?e.nextTick(ge,ce):Te[P].push(ge)),this};function oe(Re){return Re.ending&&!Re.destroyed&&Re.constructed&&Re.length===0&&!Re.errored&&Re.buffered.length===0&&!Re.finished&&!Re.writing&&!Re.errorEmitted&&!Re.closeEmitted}function Ie(Re,K){let ge=!1;function Te(ce){if(ge){O(Re,ce??S());return}if(ge=!0,K.pendingcb--,ce){const le=K[P].splice(0);for(let ie=0;ie<le.length;ie++)le[ie](ce);O(Re,ce,K.sync)}else oe(K)&&(K.prefinished=!0,Re.emit("prefinish"),K.pendingcb++,e.nextTick(Se,Re,K))}K.sync=!0,K.pendingcb++;try{Re._final(Te)}catch(ce){Te(ce)}K.sync=!1}function je(Re,K){!K.prefinished&&!K.finalCalled&&(typeof Re._final=="function"&&!K.destroyed?(K.finalCalled=!0,Ie(Re,K)):(K.prefinished=!0,Re.emit("prefinish")))}function Me(Re,K,ge){oe(K)&&(je(Re,K),K.pendingcb===0&&(ge?(K.pendingcb++,e.nextTick((Te,ce)=>{oe(ce)?Se(Te,ce):ce.pendingcb--},Re,K)):oe(K)&&(K.pendingcb++,Se(Re,K))))}function Se(Re,K){K.pendingcb--,K.finished=!0;const ge=K[P].splice(0);for(let Te=0;Te<ge.length;Te++)ge[Te]();if(Re.emit("finish"),K.autoDestroy){const Te=Re._readableState;(!Te||Te.autoDestroy&&(Te.endEmitted||Te.readable===!1))&&Re.destroy()}}s(J.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Re){this._writableState&&(this._writableState.destroyed=Re)}},writable:{__proto__:null,get(){const Re=this._writableState;return!!Re&&Re.writable!==!1&&!Re.destroyed&&!Re.errored&&!Re.ending&&!Re.ended},set(Re){this._writableState&&(this._writableState.writable=!!Re)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Re=this._writableState;return Re?!Re.destroyed&&!Re.ending&&Re.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const qe=m.destroy;J.prototype.destroy=function(Re,K){const ge=this._writableState;return!ge.destroyed&&(ge.bufferedIndex<ge.buffered.length||ge[P].length)&&e.nextTick(re,ge),qe.call(this,Re,K),this},J.prototype._undestroy=m.undestroy,J.prototype._destroy=function(Re,K){K(Re)},J.prototype[u.captureRejectionSymbol]=function(Re){this.destroy(Re)};let Qe;function We(){return Qe===void 0&&(Qe={}),Qe}return J.fromWeb=function(Re,K){return We().newStreamWritableFromWritableStream(Re,K)},J.toWeb=function(Re){return We().newWritableStreamFromStreamWritable(Re)},xM}var wM,v9;function YSe(){if(v9)return wM;v9=1;const e=Tm(),t=Nh(),{isReadable:n,isWritable:r,isIterable:i,isNodeStream:s,isReadableNodeStream:a,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:c,isWritableStream:u}=Kd(),d=Mh(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:y}}=io(),{destroyer:b}=My(),v=Fd(),x=FE(),w=HP(),{createDeferredPromise:S}=Co(),C=jY(),k=globalThis.Blob||t.Blob,A=typeof k<"u"?function(V){return V instanceof k}:function(V){return!1},R=globalThis.AbortController||Vx().AbortController,{FunctionPrototypeCall:N}=Zi();class I extends v{constructor(V){super(V),(V==null?void 0:V.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(V==null?void 0:V.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}wM=function P(V,F){if(l(V))return V;if(a(V))return L({readable:V});if(o(V))return L({writable:V});if(s(V))return L({writable:!1,readable:!1});if(c(V))return L({readable:x.fromWeb(V)});if(u(V))return L({writable:w.fromWeb(V)});if(typeof V=="function"){const{value:U,write:G,final:$,destroy:ne}=O(V);if(i(U))return C(I,U,{objectMode:!0,write:G,final:$,destroy:ne});const W=U==null?void 0:U.then;if(typeof W=="function"){let te;const ee=N(W,U,re=>{if(re!=null)throw new y("nully","body",re)},re=>{b(te,re)});return te=new I({objectMode:!0,readable:!1,write:G,final(re){$(async()=>{try{await ee,e.nextTick(re,null)}catch(de){e.nextTick(re,de)}})},destroy:ne})}throw new y("Iterable, AsyncIterable or AsyncFunction",F,U)}if(A(V))return P(V.arrayBuffer());if(i(V))return C(I,V,{objectMode:!0,writable:!1});if(c(V==null?void 0:V.readable)&&u(V==null?void 0:V.writable))return I.fromWeb(V);if(typeof(V==null?void 0:V.writable)=="object"||typeof(V==null?void 0:V.readable)=="object"){const U=V!=null&&V.readable?a(V==null?void 0:V.readable)?V==null?void 0:V.readable:P(V.readable):void 0,G=V!=null&&V.writable?o(V==null?void 0:V.writable)?V==null?void 0:V.writable:P(V.writable):void 0;return L({readable:U,writable:G})}const J=V==null?void 0:V.then;if(typeof J=="function"){let U;return N(J,V,G=>{G!=null&&U.push(G),U.push(null)},G=>{b(U,G)}),U=new I({objectMode:!0,writable:!1,read(){}})}throw new m(F,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],V)};function O(P){let{promise:V,resolve:F}=S();const J=new R,U=J.signal;return{value:P(async function*(){for(;;){const $=V;V=null;const{chunk:ne,done:W,cb:te}=await $;if(e.nextTick(te),W)return;if(U.aborted)throw new h(void 0,{cause:U.reason});({promise:V,resolve:F}=S()),yield ne}}(),{signal:U}),write($,ne,W){const te=F;F=null,te({chunk:$,done:!1,cb:W})},final($){const ne=F;F=null,ne({done:!0,cb:$})},destroy($,ne){J.abort(),ne($)}}}function L(P){const V=P.readable&&typeof P.readable.read!="function"?x.wrap(P.readable):P.readable,F=P.writable;let J=!!n(V),U=!!r(F),G,$,ne,W,te;function ee(re){const de=W;W=null,de?de(re):re&&te.destroy(re)}return te=new I({readableObjectMode:!!(V!=null&&V.readableObjectMode),writableObjectMode:!!(F!=null&&F.writableObjectMode),readable:J,writable:U}),U&&(d(F,re=>{U=!1,re&&b(V,re),ee(re)}),te._write=function(re,de,oe){F.write(re,de)?oe():G=oe},te._final=function(re){F.end(),$=re},F.on("drain",function(){if(G){const re=G;G=null,re()}}),F.on("finish",function(){if($){const re=$;$=null,re()}})),J&&(d(V,re=>{J=!1,re&&b(V,re),ee(re)}),V.on("readable",function(){if(ne){const re=ne;ne=null,re()}}),V.on("end",function(){te.push(null)}),te._read=function(){for(;;){const re=V.read();if(re===null){ne=te._read;return}if(!te.push(re))return}}),te._destroy=function(re,de){!re&&W!==null&&(re=new h),ne=null,G=null,$=null,W===null?de(re):(W=de,b(F,re),b(V,re))},te}return wM}var _M,x9;function Fd(){if(x9)return _M;x9=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Zi();_M=a;const i=FE(),s=HP();r(a.prototype,i.prototype),r(a,i);{const u=n(s.prototype);for(let d=0;d<u.length;d++){const h=u[d];a.prototype[h]||(a.prototype[h]=s.prototype[h])}}function a(u){if(!(this instanceof a))return new a(u);i.call(this,u),s.call(this,u),u?(this.allowHalfOpen=u.allowHalfOpen!==!1,u.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),u.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(a.prototype,{writable:{__proto__:null,...t(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(s.prototype,"writableLength")},writableFinished:{__proto__:null,...t(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(u){this._readableState&&this._writableState&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}}});let o;function l(){return o===void 0&&(o={}),o}a.fromWeb=function(u,d){return l().newStreamDuplexFromReadableWritablePair(u,d)},a.toWeb=function(u){return l().newReadableWritablePairFromDuplex(u)};let c;return a.from=function(u){return c||(c=YSe()),c(u,"body")},_M}var SM,w9;function OY(){if(w9)return SM;w9=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Zi();SM=a;const{ERR_METHOD_NOT_IMPLEMENTED:n}=io().codes,r=Fd(),{getHighWaterMark:i}=DE();e(a.prototype,r.prototype),e(a,r);const s=t("kCallback");function a(c){if(!(this instanceof a))return new a(c);const u=c?i(this,c,"readableHighWaterMark",!0):null;u===0&&(c={...c,highWaterMark:null,readableHighWaterMark:u,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[s]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function o(c){typeof this._flush=="function"&&!this.destroyed?this._flush((u,d)=>{if(u){c?c(u):this.destroy(u);return}d!=null&&this.push(d),this.push(null),c&&c()}):(this.push(null),c&&c())}function l(){this._final!==o&&o.call(this)}return a.prototype._final=o,a.prototype._transform=function(c,u,d){throw new n("_transform()")},a.prototype._write=function(c,u,d){const h=this._readableState,m=this._writableState,y=h.length;this._transform(c,u,(b,v)=>{if(b){d(b);return}v!=null&&this.push(v),m.ended||y===h.length||h.length<h.highWaterMark?d():this[s]=d})},a.prototype._read=function(){if(this[s]){const c=this[s];this[s]=null,c()}},SM}var CM,_9;function PY(){if(_9)return CM;_9=1;const{ObjectSetPrototypeOf:e}=Zi();CM=n;const t=OY();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,i,s){s(null,r)},CM}var kM,S9;function GP(){if(S9)return kM;S9=1;const e=Tm(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:i}=Zi(),s=Mh(),{once:a}=Co(),o=My(),l=Fd(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:b}=io(),{validateFunction:v,validateAbortSignal:x}=r1(),{isIterable:w,isReadable:S,isReadableNodeStream:C,isNodeStream:k,isTransformStream:A,isWebStream:R,isReadableStream:N,isReadableFinished:I}=Kd(),O=globalThis.AbortController||Vx().AbortController;let L,P,V;function F(re,de,oe){let Ie=!1;re.on("close",()=>{Ie=!0});const je=s(re,{readable:de,writable:oe},Me=>{Ie=!Me});return{destroy:Me=>{Ie||(Ie=!0,o.destroyer(re,Me||new m("pipe")))},cleanup:je}}function J(re){return v(re[re.length-1],"streams[stream.length - 1]"),re.pop()}function U(re){if(w(re))return re;if(C(re))return G(re);throw new u("val",["Readable","Iterable","AsyncIterable"],re)}async function*G(re){P||(P=FE()),yield*P.prototype[r].call(re)}async function $(re,de,oe,{end:Ie}){let je,Me=null;const Se=We=>{if(We&&(je=We),Me){const Re=Me;Me=null,Re()}},qe=()=>new n((We,Re)=>{je?Re(je):Me=()=>{je?Re(je):We()}});de.on("drain",Se);const Qe=s(de,{readable:!1},Se);try{de.writableNeedDrain&&await qe();for await(const We of re)de.write(We)||await qe();Ie&&(de.end(),await qe()),oe()}catch(We){oe(je!==We?c(je,We):We)}finally{Qe(),de.off("drain",Se)}}async function ne(re,de,oe,{end:Ie}){A(de)&&(de=de.writable);const je=de.getWriter();try{for await(const Me of re)await je.ready,je.write(Me).catch(()=>{});await je.ready,Ie&&await je.close(),oe()}catch(Me){try{await je.abort(Me),oe(Me)}catch(Se){oe(Se)}}}function W(...re){return te(re,a(J(re)))}function te(re,de,oe){if(re.length===1&&t(re[0])&&(re=re[0]),re.length<2)throw new h("streams");const Ie=new O,je=Ie.signal,Me=oe==null?void 0:oe.signal,Se=[];x(Me,"options.signal");function qe(){ce(new b)}V=V||Co().addAbortListener;let Qe;Me&&(Qe=V(Me,qe));let We,Re;const K=[];let ge=0;function Te(Be){ce(Be,--ge===0)}function ce(Be,Ce){var ct;if(Be&&(!We||We.code==="ERR_STREAM_PREMATURE_CLOSE")&&(We=Be),!(!We&&!Ce)){for(;K.length;)K.shift()(We);(ct=Qe)===null||ct===void 0||ct[i](),Ie.abort(),Ce&&(We||Se.forEach(Tt=>Tt()),e.nextTick(de,We,Re))}}let le;for(let Be=0;Be<re.length;Be++){const Ce=re[Be],ct=Be<re.length-1,Tt=Be>0,ft=ct||(oe==null?void 0:oe.end)!==!1,Pt=Be===re.length-1;if(k(Ce)){let Ut=function(Bt){Bt&&Bt.name!=="AbortError"&&Bt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Te(Bt)};if(ft){const{destroy:Bt,cleanup:tn}=F(Ce,ct,Tt);K.push(Bt),S(Ce)&&Pt&&Se.push(tn)}Ce.on("error",Ut),S(Ce)&&Pt&&Se.push(()=>{Ce.removeListener("error",Ut)})}if(Be===0)if(typeof Ce=="function"){if(le=Ce({signal:je}),!w(le))throw new d("Iterable, AsyncIterable or Stream","source",le)}else w(Ce)||C(Ce)||A(Ce)?le=Ce:le=l.from(Ce);else if(typeof Ce=="function"){if(A(le)){var ie;le=U((ie=le)===null||ie===void 0?void 0:ie.readable)}else le=U(le);if(le=Ce(le,{signal:je}),ct){if(!w(le,!0))throw new d("AsyncIterable",`transform[${Be-1}]`,le)}else{var Ee;L||(L=PY());const Ut=new L({objectMode:!0}),Bt=(Ee=le)===null||Ee===void 0?void 0:Ee.then;if(typeof Bt=="function")ge++,Bt.call(le,D=>{Re=D,D!=null&&Ut.write(D),ft&&Ut.end(),e.nextTick(Te)},D=>{Ut.destroy(D),e.nextTick(Te,D)});else if(w(le,!0))ge++,$(le,Ut,Te,{end:ft});else if(N(le)||A(le)){const D=le.readable||le;ge++,$(D,Ut,Te,{end:ft})}else throw new d("AsyncIterable or Promise","destination",le);le=Ut;const{destroy:tn,cleanup:xe}=F(le,!1,!0);K.push(tn),Pt&&Se.push(xe)}}else if(k(Ce)){if(C(le)){ge+=2;const Ut=ee(le,Ce,Te,{end:ft});S(Ce)&&Pt&&Se.push(Ut)}else if(A(le)||N(le)){const Ut=le.readable||le;ge++,$(Ut,Ce,Te,{end:ft})}else if(w(le))ge++,$(le,Ce,Te,{end:ft});else throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],le);le=Ce}else if(R(Ce)){if(C(le))ge++,ne(U(le),Ce,Te,{end:ft});else if(N(le)||w(le))ge++,ne(le,Ce,Te,{end:ft});else if(A(le))ge++,ne(le.readable,Ce,Te,{end:ft});else throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],le);le=Ce}else le=l.from(Ce)}return(je!=null&&je.aborted||Me!=null&&Me.aborted)&&e.nextTick(qe),le}function ee(re,de,oe,{end:Ie}){let je=!1;if(de.on("close",()=>{je||oe(new y)}),re.pipe(de,{end:!1}),Ie){let Me=function(){je=!0,de.end()};I(re)?e.nextTick(Me):re.once("end",Me)}else oe();return s(re,{readable:!0,writable:!1},Me=>{const Se=re._readableState;Me&&Me.code==="ERR_STREAM_PREMATURE_CLOSE"&&Se&&Se.ended&&!Se.errored&&!Se.errorEmitted?re.once("end",oe).once("error",oe):oe(Me)}),s(de,{readable:!1,writable:!0},oe)}return kM={pipelineImpl:te,pipeline:W},kM}var EM,C9;function DY(){if(C9)return EM;C9=1;const{pipeline:e}=GP(),t=Fd(),{destroyer:n}=My(),{isNodeStream:r,isReadable:i,isWritable:s,isWebStream:a,isTransformStream:o,isWritableStream:l,isReadableStream:c}=Kd(),{AbortError:u,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:h}}=io(),m=Mh();return EM=function(...b){if(b.length===0)throw new h("streams");if(b.length===1)return t.from(b[0]);const v=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const L=b.length-1;b[L]=t.from(b[L])}for(let L=0;L<b.length;++L)if(!(!r(b[L])&&!a(b[L]))){if(L<b.length-1&&!(i(b[L])||c(b[L])||o(b[L])))throw new d(`streams[${L}]`,v[L],"must be readable");if(L>0&&!(s(b[L])||l(b[L])||o(b[L])))throw new d(`streams[${L}]`,v[L],"must be writable")}let x,w,S,C,k;function A(L){const P=C;C=null,P?P(L):L?k.destroy(L):!O&&!I&&k.destroy()}const R=b[0],N=e(b,A),I=!!(s(R)||l(R)||o(R)),O=!!(i(N)||c(N)||o(N));if(k=new t({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:I,readable:O}),I){if(r(R))k._write=function(P,V,F){R.write(P,V)?F():x=F},k._final=function(P){R.end(),w=P},R.on("drain",function(){if(x){const P=x;x=null,P()}});else if(a(R)){const V=(o(R)?R.writable:R).getWriter();k._write=async function(F,J,U){try{await V.ready,V.write(F).catch(()=>{}),U()}catch(G){U(G)}},k._final=async function(F){try{await V.ready,V.close().catch(()=>{}),w=F}catch(J){F(J)}}}const L=o(N)?N.readable:N;m(L,()=>{if(w){const P=w;w=null,P()}})}if(O){if(r(N))N.on("readable",function(){if(S){const L=S;S=null,L()}}),N.on("end",function(){k.push(null)}),k._read=function(){for(;;){const L=N.read();if(L===null){S=k._read;return}if(!k.push(L))return}};else if(a(N)){const P=(o(N)?N.readable:N).getReader();k._read=async function(){for(;;)try{const{value:V,done:F}=await P.read();if(!k.push(V))return;if(F){k.push(null);return}}catch{return}}}}return k._destroy=function(L,P){!L&&C!==null&&(L=new u),S=null,x=null,w=null,C===null?P(L):(C=P,r(N)&&n(N,L))},k},EM}var k9;function ZSe(){if(k9)return bS;k9=1;const e=globalThis.AbortController||Vx().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:i},AbortError:s}=io(),{validateAbortSignal:a,validateInteger:o,validateObject:l}=r1(),c=Zi().Symbol("kWeak"),u=Zi().Symbol("kResistStopPropagation"),{finished:d}=Mh(),h=DY(),{addAbortSignalNoValidate:m}=PE(),{isWritable:y,isNodeStream:b}=Kd(),{deprecate:v}=Co(),{ArrayPrototypePush:x,Boolean:w,MathFloor:S,Number:C,NumberIsNaN:k,Promise:A,PromiseReject:R,PromiseResolve:N,PromisePrototypeThen:I,Symbol:O}=Zi(),L=O("kEmpty"),P=O("kEof");function V(Me,Se){if(Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&a(Se.signal,"options.signal"),b(Me)&&!y(Me))throw new t("stream",Me,"must be writable");const qe=h(this,Me);return Se!=null&&Se.signal&&m(Se.signal,qe),qe}function F(Me,Se){if(typeof Me!="function")throw new n("fn",["Function","AsyncFunction"],Me);Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&a(Se.signal,"options.signal");let qe=1;(Se==null?void 0:Se.concurrency)!=null&&(qe=S(Se.concurrency));let Qe=qe-1;return(Se==null?void 0:Se.highWaterMark)!=null&&(Qe=S(Se.highWaterMark)),o(qe,"options.concurrency",1),o(Qe,"options.highWaterMark",0),Qe+=qe,(async function*(){const Re=Co().AbortSignalAny([Se==null?void 0:Se.signal].filter(w)),K=this,ge=[],Te={signal:Re};let ce,le,ie=!1,Ee=0;function Be(){ie=!0,Ce()}function Ce(){Ee-=1,ct()}function ct(){le&&!ie&&Ee<qe&&ge.length<Qe&&(le(),le=null)}async function Tt(){try{for await(let ft of K){if(ie)return;if(Re.aborted)throw new s;try{if(ft=Me(ft,Te),ft===L)continue;ft=N(ft)}catch(Pt){ft=R(Pt)}Ee+=1,I(ft,Ce,Be),ge.push(ft),ce&&(ce(),ce=null),!ie&&(ge.length>=Qe||Ee>=qe)&&await new A(Pt=>{le=Pt})}ge.push(P)}catch(ft){const Pt=R(ft);I(Pt,Ce,Be),ge.push(Pt)}finally{ie=!0,ce&&(ce(),ce=null)}}Tt();try{for(;;){for(;ge.length>0;){const ft=await ge[0];if(ft===P)return;if(Re.aborted)throw new s;ft!==L&&(yield ft),ge.shift(),ct()}await new A(ft=>{ce=ft})}}finally{ie=!0,le&&(le(),le=null)}}).call(this)}function J(Me=void 0){return Me!=null&&l(Me,"options"),(Me==null?void 0:Me.signal)!=null&&a(Me.signal,"options.signal"),(async function*(){let qe=0;for await(const We of this){var Qe;if(Me!=null&&(Qe=Me.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new s({cause:Me.signal.reason});yield[qe++,We]}}).call(this)}async function U(Me,Se=void 0){for await(const qe of W.call(this,Me,Se))return!0;return!1}async function G(Me,Se=void 0){if(typeof Me!="function")throw new n("fn",["Function","AsyncFunction"],Me);return!await U.call(this,async(...qe)=>!await Me(...qe),Se)}async function $(Me,Se){for await(const qe of W.call(this,Me,Se))return qe}async function ne(Me,Se){if(typeof Me!="function")throw new n("fn",["Function","AsyncFunction"],Me);async function qe(Qe,We){return await Me(Qe,We),L}for await(const Qe of F.call(this,qe,Se));}function W(Me,Se){if(typeof Me!="function")throw new n("fn",["Function","AsyncFunction"],Me);async function qe(Qe,We){return await Me(Qe,We)?Qe:L}return F.call(this,qe,Se)}class te extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ee(Me,Se,qe){var Qe;if(typeof Me!="function")throw new n("reducer",["Function","AsyncFunction"],Me);qe!=null&&l(qe,"options"),(qe==null?void 0:qe.signal)!=null&&a(qe.signal,"options.signal");let We=arguments.length>1;if(qe!=null&&(Qe=qe.signal)!==null&&Qe!==void 0&&Qe.aborted){const ce=new s(void 0,{cause:qe.signal.reason});throw this.once("error",()=>{}),await d(this.destroy(ce)),ce}const Re=new e,K=Re.signal;if(qe!=null&&qe.signal){const ce={once:!0,[c]:this,[u]:!0};qe.signal.addEventListener("abort",()=>Re.abort(),ce)}let ge=!1;try{for await(const ce of this){var Te;if(ge=!0,qe!=null&&(Te=qe.signal)!==null&&Te!==void 0&&Te.aborted)throw new s;We?Se=await Me(Se,ce,{signal:K}):(Se=ce,We=!0)}if(!ge&&!We)throw new te}finally{Re.abort()}return Se}async function re(Me){Me!=null&&l(Me,"options"),(Me==null?void 0:Me.signal)!=null&&a(Me.signal,"options.signal");const Se=[];for await(const Qe of this){var qe;if(Me!=null&&(qe=Me.signal)!==null&&qe!==void 0&&qe.aborted)throw new s(void 0,{cause:Me.signal.reason});x(Se,Qe)}return Se}function de(Me,Se){const qe=F.call(this,Me,Se);return(async function*(){for await(const We of qe)yield*We}).call(this)}function oe(Me){if(Me=C(Me),k(Me))return 0;if(Me<0)throw new i("number",">= 0",Me);return Me}function Ie(Me,Se=void 0){return Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&a(Se.signal,"options.signal"),Me=oe(Me),(async function*(){var Qe;if(Se!=null&&(Qe=Se.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new s;for await(const Re of this){var We;if(Se!=null&&(We=Se.signal)!==null&&We!==void 0&&We.aborted)throw new s;Me--<=0&&(yield Re)}}).call(this)}function je(Me,Se=void 0){return Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&a(Se.signal,"options.signal"),Me=oe(Me),(async function*(){var Qe;if(Se!=null&&(Qe=Se.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new s;for await(const Re of this){var We;if(Se!=null&&(We=Se.signal)!==null&&We!==void 0&&We.aborted)throw new s;if(Me-- >0&&(yield Re),Me<=0)return}}).call(this)}return bS.streamReturningOperators={asIndexedPairs:v(J,"readable.asIndexedPairs will be removed in a future version."),drop:Ie,filter:W,flatMap:de,map:F,take:je,compose:V},bS.promiseReturningOperators={every:G,forEach:ne,reduce:ee,toArray:re,some:U,find:$},bS}var TM,E9;function FY(){if(E9)return TM;E9=1;const{ArrayPrototypePop:e,Promise:t}=Zi(),{isIterable:n,isNodeStream:r,isWebStream:i}=Kd(),{pipelineImpl:s}=GP(),{finished:a}=Mh();LY();function o(...l){return new t((c,u)=>{let d,h;const m=l[l.length-1];if(m&&typeof m=="object"&&!r(m)&&!n(m)&&!i(m)){const y=e(l);d=y.signal,h=y.end}s(l,(y,b)=>{y?u(y):c(b)},{signal:d,end:h})})}return TM={finished:a,pipeline:o},TM}var T9;function LY(){if(T9)return rM.exports;T9=1;const{Buffer:e}=Nh(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Zi(),{promisify:{custom:i}}=Co(),{streamReturningOperators:s,promiseReturningOperators:a}=ZSe(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=io(),l=DY(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:u}=DE(),{pipeline:d}=GP(),{destroyer:h}=My(),m=Mh(),y=FY(),b=Kd(),v=rM.exports=VP().Stream;v.isDestroyed=b.isDestroyed,v.isDisturbed=b.isDisturbed,v.isErrored=b.isErrored,v.isReadable=b.isReadable,v.isWritable=b.isWritable,v.Readable=FE();for(const w of n(s)){let C=function(...k){if(new.target)throw o();return v.Readable.from(r(S,this,k))};const S=s[w];t(C,"name",{__proto__:null,value:S.name}),t(C,"length",{__proto__:null,value:S.length}),t(v.Readable.prototype,w,{__proto__:null,value:C,enumerable:!1,configurable:!0,writable:!0})}for(const w of n(a)){let C=function(...k){if(new.target)throw o();return r(S,this,k)};const S=a[w];t(C,"name",{__proto__:null,value:S.name}),t(C,"length",{__proto__:null,value:S.length}),t(v.Readable.prototype,w,{__proto__:null,value:C,enumerable:!1,configurable:!0,writable:!0})}v.Writable=HP(),v.Duplex=Fd(),v.Transform=OY(),v.PassThrough=PY(),v.pipeline=d;const{addAbortSignal:x}=PE();return v.addAbortSignal=x,v.finished=m,v.destroy=h,v.compose=l,v.setDefaultHighWaterMark=c,v.getDefaultHighWaterMark=u,t(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return y}}),t(d,i,{__proto__:null,enumerable:!0,get(){return y.pipeline}}),t(m,i,{__proto__:null,enumerable:!0,get(){return y.finished}}),v.Stream=v,v._isUint8Array=function(S){return S instanceof Uint8Array},v._uint8ArrayToBuffer=function(S){return e.from(S.buffer,S.byteOffset,S.byteLength)},rM.exports}var A9;function XSe(){return A9||(A9=1,function(e){const t=LY(),n=FY(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(nM)),nM.exports}var BY=XSe();class KP extends BY.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(i=>{this._path=i.path;const s=i.readableWebStream({start:t.start,end:t.end});this.reader=s.getReader(),this.pending=!1}).catch(i=>{this.destroy(i)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ze(gt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ze(gt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class YP extends BY.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const i=r.writableWebStream({start:t.start});this.writer=i.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Ma(new Ze(gt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Ma(new Ze(gt.ENOTSUP,"Unsupported encoding for stream",this._path)));const i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(i),this._bytesWritten+=t.byteLength,r()}catch(s){r(new Ze(gt.EIO,s.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ze(gt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ze(gt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Hl=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Gl=function(e){return function(t){function n(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,i=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&i===1)return i=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(a).then(s,function(o){return n(o),s()})}else i|=1}catch(o){n(o)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Pa{get position(){return this.flag&rm?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=Fa(t,n);Object.assign(this,bm(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&ME||this.inode.flags&vo.Sync)}_emitChange(){ba(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ze.With("EBADF",this.path,"chown");this.dirty=!0,yY(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=Ah(t,-1);if(n<0)throw new Ze(gt.EINVAL,"Invalid mode");if(this.closed)throw Ze.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>wi?-61441:wi)|n,(this._isSync||n>wi)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ze.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ze.With("EBADF",this.path,"truncate");if(t<0)throw new Ze(gt.EINVAL);if(this.dirty=!0,!(this.flag&Na||this.flag&Ed))throw new Ze(gt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ze.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=RC(t),this.inode.mtimeMs=RC(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Td(n,"utf8","a",420);if(!(Ad(r.flag)&rm))throw new Ze(gt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ze(gt.EINVAL,"Encoding not specified");const s=typeof t=="string"?ji.from(t,r.encoding):t;await this._write(s,0,s.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,i=this.position){if(this.closed)throw Ze.With("EBADF",this.path,"read");if(this.flag&Na)throw new Ze(gt.EPERM,"File not opened with a readable mode");this.inode.flags&vo.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let s=i+r;!zx(this.inode)&&!$x(this.inode)&&s>this.inode.size&&(s=i+Math.max(this.inode.size-i,0)),this._position=s;const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,a.subarray(n,n+r),i,s),this._isSync&&await this.sync(),{bytesRead:s-i,buffer:t}}async read(t,n,r,i){typeof n=="object"&&n!=null&&(i=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(i=t.position,r=t.length,n=t.offset,t=t.buffer);const s=Number.isSafeInteger(i)?i:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,s)}async readFile(t){const n=Td(t,null,"r",292);if(Ad(n.flag)&Na)throw new Ze(gt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:i}=await this.stat(),{buffer:s}=await this._read(new Uint8Array(i),0,i,0),a=ji.from(s);return n.encoding?a.toString(n.encoding):a}readableWebStream(t={}){if(this.closed)throw Ze.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ze.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&vo.Immutable)throw new Ze(gt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Na)throw Ze.With("EBADF",this.path,"readLines");return gSe({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ze.With("EBADF",this.path,"stat");if(!ui(this.context,this.inode,$s))throw Ze.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Cm(this.inode):new Gd(this.inode)}async _write(t,n=0,r=t.byteLength-n,i=this.position){if(this.closed)throw Ze.With("EBADF",this.path,"write");if(this.inode.flags&vo.Immutable)throw new Ze(gt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Na||this.flag&Ed))throw new Ze(gt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const s=i+r,a=t.subarray(n,n+r);return!zx(this.inode)&&!$x(this.inode)&&s>this.inode.size&&(this.inode.size=s),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=i+a.byteLength,await this.fs.write(this.internalPath,a,i),this._isSync&&await this.sync(),a.byteLength}async write(t,n,r,i){let s,a,o;typeof n=="object"&&n!=null&&(r=n.length,i=n.position,n=n.offset),typeof t=="string"?(i=typeof n=="number"?n:null,a=0,s=ji.from(t,typeof r=="string"?r:"utf8"),o=s.length):(s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=n??0,o=typeof r=="number"?r:s.byteLength,i=typeof i=="number"?i:null),i??(i=this.position);const l=await this._write(s,a,o,i);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=Td(n,"utf8","w",420),i=Ad(r.flag);if(!(i&Na||i&Ed))throw new Ze(gt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ze(gt.EINVAL,"Encoding not specified");const s=typeof t=="string"?ji.from(t,r.encoding):t;await this._write(s,0,s.length,0),this._emitChange()}async close(){if(this.closed)throw Ze.With("EBADF",this.path,"close");await this.sync(),this.dispose(),xY(this.context,this.fd)}dispose(t){if(this.closed)throw Ze.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ze.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const i of t)r+=(await this.write(i)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const i of t)r+=(await this.read(i)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Na)throw Ze.With("EBADF",this.path,"createReadStream");return new KP(t,this)}createWriteStream(t={}){if(this.closed)throw Ze.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&vo.Immutable)throw new Ze(gt.EPERM,"File is immutable",this.path,"createWriteStream");return new YP(t,this)}}async function $Y(e,t){e=jn(e),t=jn(t);const n=Tr(e,this),r=Tr(t,this);if(!(await Iy.call(this,Gr(e))).hasAccess(ns,this))throw Ze.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),ba(this,"rename",e.toString()),ba(this,"change",t.toString());return}await zE.call(this,t,await $E(e)),await BE.call(this,e),ba(this,"rename",e.toString())}catch(i){throw di(i,{[n.path]:e,[r.path]:t})}}async function i1(e){try{const{fs:t,path:n}=Tr(await Ih.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ze&&t.code=="ENOENT")return!1;throw t}}async function Iy(e,t){e=jn(e);const{fs:n,path:r}=Tr(await Ih.call(this,e),this);try{const i=await n.stat(r);if(zs&&!ui(this,i,$s))throw Ze.With("EACCES",r,"stat");return t!=null&&t.bigint?new Cm(i):new Gd(i)}catch(i){throw di(i,{[r]:e})}}async function LE(e,t){e=jn(e);const{fs:n,path:r}=Tr(e,this);try{const i=await n.stat(r);if(zs&&!ui(this,i,$s))throw Ze.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Cm(i):new Gd(i)}catch(i){throw di(i,{[r]:e})}}async function zY(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Hl(n,await Kl.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Gl(n);r&&await r}}async function BE(e){e=jn(e);const{fs:t,path:n}=Tr(e,this);try{if(zs&&!ui(this,await t.stat(n),ns))throw Ze.With("EACCES",n,"unlink");await t.unlink(n),ba(this,"rename",e.toString())}catch(r){throw di(r,{[n]:e})}}async function jy(e,t,n){var r;t=jn(t);const i=Ah(n.mode,420),s=Ad(n.flag),{fullPath:a,fs:o,path:l,stats:c}=await jC(e,t.toString(),n.preserveSymlinks);if(!c){if(!(s&AE))throw Ze.With("ENOENT",a,"_open");const d=await o.stat(Gr(l));if(!ui(e,d,ns))throw Ze.With("EACCES",Gr(a),"_open");if(!Cc(d))throw Ze.With("ENOTDIR",Gr(a),"_open");const{euid:h,egid:m}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:Ac.credentials,y=await o.createFile(l,{mode:i,uid:d.mode&Qw?d.uid:h,gid:d.mode&e1?d.gid:m});return new Pa(e,MC(new NC(e,t,o,l,s,y)))}if(!ui(e,c,wY(s)))throw Ze.With("EACCES",a,"_open");if(s&RE)throw Ze.With("EEXIST",a,"_open");const u=new Pa(e,MC(new NC(e,t,o,l,s,c)));return s&NE&&await u.truncate(0),u}async function Kl(e,t="r",n=420){return await jy(this,e,{flag:t,mode:n})}async function $E(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Td(t,null,"r",292);return await Hl(n,typeof e=="object"&&"fd"in e?e:await Kl.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Gl(n);r&&await r}}async function zE(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=Td(n,"utf8","w+",420),s=Hl(r,e instanceof Pa?e:await Kl.call(this,e.toString(),i.flag,i.mode),!0),a=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof a!="string"&&!(a instanceof Uint8Array))throw new Ze(gt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,s.path,"writeFile");await s.writeFile(a,i)}catch(i){r.error=i,r.hasError=!0}finally{const i=Gl(r);i&&await i}}async function UY(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=Td(n,"utf8","a",420);if(!(Ad(i.flag)&rm))throw new Ze(gt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!i.encoding)throw new Ze(gt.EINVAL,"Encoding not specified");const a=typeof t=="string"?ji.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Hl(r,typeof e=="object"&&"fd"in e?e:await Kl.call(this,e,i.flag,i.mode),!0).appendFile(a,i)}catch(i){r.error=i,r.hasError=!0}finally{const i=Gl(r);i&&await i}}async function ZP(e){e=await Ih.call(this,e);const{fs:t,path:n}=Tr(e,this);try{const r=await t.stat(n);if(!r)throw Ze.With("ENOENT",e,"rmdir");if(!Cc(r))throw Ze.With("ENOTDIR",n,"rmdir");if(zs&&!ui(this,r,ns))throw Ze.With("EACCES",n,"rmdir");await t.rmdir(n),ba(this,"rename",e.toString())}catch(r){throw di(r,{[n]:e})}}async function UE(e,t){var n,r;const{euid:i,egid:s}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Ac.credentials;t=typeof t=="object"?t:{mode:t};const a=Ah(t==null?void 0:t.mode,511);e=await Ih.call(this,e);const{fs:o,path:l,root:c}=Tr(e,this),u={[l]:e},d=async(h,m)=>{if(!ui(this,m,ns))throw Ze.With("EACCES",Gr(h),"mkdir");const y=await o.mkdir(h,{mode:a,uid:m.mode&Qw?m.uid:i,gid:m.mode&e1?m.gid:s});return ba(this,"rename",h),y};try{if(!(t!=null&&t.recursive)){await d(l,await o.stat(Gr(l)));return}const h=[];for(let y=l,b=e;!await o.exists(y);y=Gr(y),b=Gr(b))h.unshift(y),u[y]=b;if(!h.length)return;const m=[await o.stat(Gr(h[0]))];for(const[y,b]of h.entries())m.push(await d(b,m[y]));return c.length==1?h[0]:(r=h[0])===null||r===void 0?void 0:r.slice(c.length)}catch(h){throw di(h,u)}}async function Am(e,t){t=typeof t=="object"?t:{encoding:t},e=await Ih.call(this,e);const{fs:n,path:r}=Tr(e,this),i=await n.stat(r).catch(l=>mi(di(l,{[r]:e})));if(!i)throw Ze.With("ENOENT",e,"readdir");if(!ui(this,i,$s))throw Ze.With("EACCES",e,"readdir");if(!Cc(i))throw Ze.With("ENOTDIR",e,"readdir");const s=await n.readdir(r).catch(l=>mi(di(l,{[r]:e}))),a=[],o=async l=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(ii(r,l)).catch(u=>{if(u.code!="ENOENT")throw di(u,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?a.push(new qx(l,c)):(t==null?void 0:t.encoding)=="buffer"?a.push(ji.from(l)):a.push(l),!(!(t!=null&&t.recursive)||!Cc(c))))for(const u of await Am.call(this,ii(e,l),t))u instanceof qx?(u.path=ii(l,u.path),a.push(u)):ji.isBuffer(u)?a.push(ji.from(ii(l,_P(u)))):a.push(ii(l,u))};return await Promise.all(s.map(o)),a}async function qY(e,t){e=jn(e),t=jn(t);const{fs:n,path:r}=Tr(e,this),i=Tr(t,this);if(n!=i.fs)throw Ze.With("EXDEV",t,"link");try{if(zs&&!ui(this,await n.stat(Gr(r)),$s))throw Ze.With("EACCES",Gr(r),"link");if(zs&&!(await Iy.call(this,Gr(t))).hasAccess(ns,this))throw Ze.With("EACCES",Gr(t),"link");if(zs&&!ui(this,await n.stat(r),$s))throw Ze.With("EACCES",r,"link");return await n.link(r,i.path)}catch(s){throw di(s,{[i.path]:t,[r]:e})}}async function VY(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ze(gt.EINVAL,"Invalid symlink type: "+n);if(t=jn(t),await i1.call(this,t))throw Ze.With("EEXIST",t,"symlink");const i=Hl(r,await jy(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await i.writeFile(jn(e,!0)),await i.chmod(Hd)}catch(i){r.error=i,r.hasError=!0}finally{const i=Gl(r);i&&await i}}async function IC(e,t){const n={stack:[],error:void 0,hasError:!1};try{const i=await Hl(n,await jy(this,jn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),s=typeof t=="object"?t==null?void 0:t.encoding:t;return s=="buffer"?i:i.toString(s??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Gl(n);r&&await r}}async function WY(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Hl(r,await Kl.call(this,e,"r+"),!0).chown(t,n)}catch(i){r.error=i,r.hasError=!0}finally{const i=Gl(r);i&&await i}}async function HY(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Hl(r,await jy(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(i){r.error=i,r.hasError=!0}finally{const i=Gl(r);i&&await i}}async function GY(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Hl(n,await Kl.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Gl(n);r&&await r}}async function KY(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Hl(n,await jy(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Gl(n);r&&await r}}async function XP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Hl(r,await Kl.call(this,e,"r+"),!0).utimes(t,n)}catch(i){r.error=i,r.hasError=!0}finally{const i=Gl(r);i&&await i}}async function YY(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Hl(r,await jy(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(i){r.error=i,r.hasError=!0}finally{const i=Gl(r);i&&await i}}async function jC(e,t,n){if(n){const l=Tr(t,e),c=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:c}}try{const l=Tr(t,e),c=await l.fs.stat(l.path);if(!q0(c))return{...l,fullPath:t,stats:c};const u=Dd.call(e,Gr(t),(await IC.call(e,t)).toString());return await jC(e,u)}catch{}const{base:r,dir:i}=Xc(t),s=i=="/"?"/":await Ih.call(e,i),a=ii(s,r),o=Tr(a,e);try{const l=await o.fs.stat(o.path);if(!q0(l))return{...o,fullPath:a,stats:l};const c=Dd.call(e,s,(await IC.call(e,a)).toString());return await jC(e,c)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw di(l,{[o.path]:a})}}async function Ih(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=jn(e);const{fullPath:i}=await jC(this,e);if(r=="utf8"||r=="utf-8")return i;const s=ji.from(i,"utf-8");return r=="buffer"?s:s.toString(r)}function JSe(e,t={}){const n=new kY(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let i=!1;n.on("change",(a,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:a,filename:o},done:!1})});function s(){i=!0,n.close();for(const a of r)a({value:null,done:i});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(i)return Promise.resolve({value:null,done:i});const{promise:a,resolve:o}=Promise.withResolvers();return r.push(o),a},return:s,throw:s,async[Symbol.asyncDispose](){await s()},[Symbol.asyncIterator](){return this}}}async function ZY(e,t=RP){if(!(await Iy.call(this,e)).hasAccess(t,this))throw new Ze(gt.EACCES)}async function JP(e,t){e=jn(e);const n=await LE.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&wi){case ks:if(t!=null&&t.recursive)for(const r of await Am.call(this,e))await JP.call(this,ii(e,r),t);await ZP.call(this,e);break;case mc:case Hd:case wm:case _m:await BE.call(this,e);break;case Sm:case xm:default:throw new Ze(gt.EPERM,"File type not supported",e,"rm")}}async function XY(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",i="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await UE.call(this,i),n=="buffer"?ji.from(i):i}async function QP(e,t,n){if(e=jn(e),t=jn(t),n&&n&NP&&await i1.call(this,t))throw new Ze(gt.EEXIST,"Destination file already exists",t,"copyFile");await zE.call(this,t,await $E.call(this,e)),ba(this,"rename",t.toString())}function JY(e,t){return e=jn(e),Promise.resolve(new qP(e,this))}async function eD(e,t,n){e=jn(e),t=jn(t);const r=await LE.call(this,e);if(n!=null&&n.errorOnExist&&await i1.call(this,t))throw new Ze(gt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&wi){case ks:{if(!(n!=null&&n.recursive))throw new Ze(gt.EISDIR,e+" is a directory (not copied)",e,"cp");const[i]=await Promise.all([Am.call(this,e,{withFileTypes:!0}),UE.call(this,t,{recursive:!0})]),s=async a=>{n.filter&&!n.filter(ii(e,a.name),ii(t,a.name))||await eD.call(this,ii(e,a.name),ii(t,a.name),n)};await Promise.all(i.map(s));break}case mc:case Hd:await QP.call(this,e,t);break;case wm:case _m:case Sm:case xm:default:throw new Ze(gt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await XP.call(this,t,r.atime,r.mtime)}async function QY(e,t){e=jn(e);const{fs:n}=Tr(e,this);return Promise.resolve(SY(n,t==null?void 0:t.bigint))}function eZ(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:i=()=>!1}=t||{},s=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*a(o){const l=await Am(o,{withFileTypes:r,encoding:"utf8"});for(const c of l){const u=r?c.path:o+"/"+c;i(r?c:u)||((await Iy(u)).isDirectory()&&s.some(d=>d.source.includes(".*"))&&(yield*a(u)),s.some(d=>d.test(u.replace(/^\/+/g,"")))&&(yield r?c:u.replace(/^\/+/g,"")))}}return a(n)}const QSe=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Pa,access:ZY,appendFile:UY,chmod:GY,chown:WY,constants:mY,copyFile:QP,cp:eD,exists:i1,glob:eZ,lchmod:KY,lchown:HY,link:qY,lstat:LE,lutimes:YY,mkdir:UE,mkdtemp:XY,open:Kl,opendir:JY,readFile:$E,readdir:Am,readlink:IC,realpath:Ih,rename:$Y,rm:JP,rmdir:ZP,stat:Iy,statfs:QY,symlink:VY,truncate:zY,unlink:BE,utimes:XP,watch:JSe,writeFile:zE},Symbol.toStringTag,{value:"Module"})),hr=()=>{};async function e2e(e){const t=[];for await(const n of e)t.push(n);return t}function t2e(e,t,n=hr){$Y.call(this,e,t).then(()=>n()).catch(n)}function n2e(e,t=hr){i1.call(this,e).then(t).catch(()=>t(!1))}function r2e(e,t,n=hr){n=typeof t=="function"?t:n,Iy.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function i2e(e,t,n=hr){n=typeof t=="function"?t:n,LE.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function s2e(e,t=0,n=hr){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;zY.call(this,e,r).then(()=>n()).catch(n)}function a2e(e,t=hr){BE.call(this,e).then(()=>t()).catch(t)}function o2e(e,t,n,r=hr){const i=Ah(n,420);r=typeof n=="function"?n:r,Kl.call(this,e,t,i).then(s=>r(void 0,s.fd)).catch(r)}function l2e(e,t,n=hr){n=typeof t=="function"?t:n,$E.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function c2e(e,t,n,r=hr){r=typeof n=="function"?n:r,zE.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function u2e(e,t,n,r=hr){const i=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,UY.call(this,e,t,i).then(()=>r()).catch(r)}function d2e(e,t,n=hr){n=typeof t=="function"?t:n,new Pa(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Cm(r):r)).catch(n)}function f2e(e,t=hr){new Pa(this,e).close().then(()=>t()).catch(t)}function h2e(e,t,n=hr){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const i=new Pa(this,e);if(r<0)throw new Ze(gt.EINVAL);i.truncate(r).then(()=>n()).catch(n)}function p2e(e,t=hr){new Pa(this,e).sync().then(()=>t()).catch(t)}function m2e(e,t=hr){new Pa(this,e).datasync().then(()=>t()).catch(t)}function g2e(e,t,n,r,i,s=hr){let a,o,l,c,u;const d=new Pa(this,e);if(typeof t=="string"){switch(u="utf8",typeof n){case"function":s=n;break;case"number":c=n,u=typeof r=="string"?r:"utf8",s=typeof i=="function"?i:s;break;default:s=typeof r=="function"?r:typeof i=="function"?i:s,s(new Ze(gt.EINVAL,"Invalid arguments"));return}a=ji.from(t),o=0,l=a.length;const h=s;d.write(a,o,l,c).then(({bytesWritten:m})=>h(void 0,m,a.toString(u))).catch(h)}else{a=ji.from(t.buffer),o=n,l=r,c=typeof i=="number"?i:null;const h=typeof i=="function"?i:s;d.write(a,o,l,c).then(({bytesWritten:m})=>h(void 0,m,a)).catch(h)}}function y2e(e,t,n,r,i,s=hr){new Pa(this,e).read(t,n,r,i).then(({bytesRead:a,buffer:o})=>s(void 0,a,o)).catch(s)}function b2e(e,t,n,r=hr){new Pa(this,e).chown(t,n).then(()=>r()).catch(r)}function v2e(e,t,n){new Pa(this,e).chmod(t).then(()=>n()).catch(n)}function x2e(e,t,n,r=hr){new Pa(this,e).utimes(t,n).then(()=>r()).catch(r)}function w2e(e,t=hr){ZP.call(this,e).then(()=>t()).catch(t)}function _2e(e,t,n=hr){UE.call(this,e,t).then(()=>n()).catch(n)}function S2e(e,t,n=hr){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};Am.call(this,e,r).then(i=>n(void 0,i)).catch(n)}function C2e(e,t,n=hr){qY.call(this,e,t).then(()=>n()).catch(n)}function k2e(e,t,n,r=hr){const i=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,VY.call(this,e,t,i).then(()=>r()).catch(r)}function E2e(e,t,n=hr){n=typeof t=="function"?t:n,IC.call(this,e).then(r=>n(void 0,r)).catch(n)}function T2e(e,t,n,r=hr){WY.call(this,e,t,n).then(()=>r()).catch(r)}function A2e(e,t,n,r=hr){HY.call(this,e,t,n).then(()=>r()).catch(r)}function R2e(e,t,n=hr){GY.call(this,e,t).then(()=>n()).catch(n)}function N2e(e,t,n=hr){KY.call(this,e,t).then(()=>n()).catch(n)}function M2e(e,t,n,r=hr){XP.call(this,e,t,n).then(()=>r()).catch(r)}function I2e(e,t,n,r=hr){YY.call(this,e,t,n).then(()=>r()).catch(r)}function j2e(e,t,n=hr){n=typeof t=="function"?t:n,Ih.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function O2e(e,t,n=hr){const r=typeof t=="number"?t:$s;n=typeof t=="function"?t:n,ZY.call(this,e,r).then(()=>n()).catch(n)}const t0=new Map;function P2e(e,t,n){const r=jn(e),i=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ze(gt.EINVAL,"No listener specified",e.toString(),"watchFile");if(t0.has(r)){const a=t0.get(r);a&&a.listeners.add(n);return}const s=new wSe(this,r,i);s.on("change",(a,o)=>{const l=t0.get(r);if(l)for(const c of l.listeners)c(a,o)}),t0.set(r,{watcher:s,listeners:new Set})}function D2e(e,t=hr){const n=jn(e),r=t0.get(n);r&&(t&&t!==hr?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),t0.delete(n)))}function F2e(e,t,n){const r=new kY(this,jn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||hr),r}function L2e(e,t){t=typeof t=="object"?t:{encoding:t};const n=Kl.call(this,e,"r",t==null?void 0:t.mode);return new KP({...t,autoClose:!0},n)}function B2e(e,t){t=typeof t=="object"?t:{encoding:t};const n=Kl.call(this,e,"w",t==null?void 0:t.mode);return new YP(t,n)}function $2e(e,t,n=hr){n=typeof t=="function"?t:n,JP.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function z2e(e,t,n=hr){n=typeof t=="function"?t:n,XY.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function U2e(e,t,n,r=hr){r=typeof n=="function"?n:r,QP.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function q2e(e,t,n,r=hr){r=typeof n=="function"?n:r,new Pa(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:i,bytesRead:s})=>r(void 0,s,i)).catch(r)}function V2e(e,t,n,r=hr){r=typeof n=="function"?n:r,new Pa(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:i,bytesWritten:s})=>r(void 0,s,i)).catch(r)}function W2e(e,t,n=hr){n=typeof t=="function"?t:n,JY.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function H2e(e,t,n,r=hr){r=typeof n=="function"?n:r,eD.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function G2e(e,t,n=hr){n=typeof t=="function"?t:n,QY.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function K2e(e,t){const n=await Kl.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function Y2e(e,t,n=hr){n=typeof t=="function"?t:n;const r=eZ.call(this,e,typeof t=="function"?void 0:t);e2e(r).then(i=>{var s;return n(null,(s=i)!==null&&s!==void 0?s:[])}).catch(i=>n(i))}var mp=function(e,t,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,m=n.length-1;m>=0;m--){var y={};for(var b in r)y[b]=b==="access"?{}:r[b];for(var b in r.access)y.access[b]=r.access[b];y.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var v=(0,n[m])(o==="accessor"?{get:u.get,set:u.set}:u[l],y);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=a(v.get))&&(u.get=d),(d=a(v.set))&&(u.set=d),(d=a(v.init))&&i.unshift(d)}else(d=a(v))&&(o==="field"?i.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0},qo=function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},Z2e=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},OC;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(OC||(OC={}));let tZ=(()=>{var e,t,n,r,i;let s=[vm()],a,o=[],l,c,u=[],d=[],h,m=[],y=[],b,v=[],x=[],w,S=[],C=[],k,A=[],R=[],N,I=[],O=[];return l=class{constructor(L=mi(new Ze(gt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=qo(this,u,0),this.extsize=(qo(this,d),qo(this,m,0)),this.nextents=(qo(this,y),qo(this,v,0)),this.projid=(qo(this,x),qo(this,S,0)),this.cowextsize=(qo(this,C),qo(this,A,0)),this.pad=(qo(this,R),qo(this,I,[])),qo(this,O),this.extsize=L.size,this.nextents=1,this.projid=L.uid,this.cowextsize=L.size;for(const P of Object.keys(vo))L.flags&vo[P]&&P in OC&&(this.xflags|=OC[P])}},Z2e(l,"fsxattr"),(()=>{const L=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=Xn).uint32.bind(e)],h=[(t=Xn).uint32.bind(t)],b=[(n=Xn).uint32.bind(n)],w=[(r=Xn).uint32.bind(r)],k=[(i=Xn).uint32.bind(i)],N=[Xn.char(8)],mp(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:P=>"xflags"in P,get:P=>P.xflags,set:(P,V)=>{P.xflags=V}},metadata:L},u,d),mp(null,null,h,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:P=>"extsize"in P,get:P=>P.extsize,set:(P,V)=>{P.extsize=V}},metadata:L},m,y),mp(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:P=>"nextents"in P,get:P=>P.nextents,set:(P,V)=>{P.nextents=V}},metadata:L},v,x),mp(null,null,w,{kind:"field",name:"projid",static:!1,private:!1,access:{has:P=>"projid"in P,get:P=>P.projid,set:(P,V)=>{P.projid=V}},metadata:L},S,C),mp(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:P=>"cowextsize"in P,get:P=>P.cowextsize,set:(P,V)=>{P.cowextsize=V}},metadata:L},A,R),mp(null,null,N,{kind:"field",name:"pad",static:!1,private:!1,access:{has:P=>"pad"in P,get:P=>P.pad,set:(P,V)=>{P.pad=V}},metadata:L},I,O),mp(null,a={value:l},s,{kind:"class",name:l.name,metadata:L},null,o),l=a.value,L&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:L}),qo(l,o)})(),l})();var Bi;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Bi||(Bi={}));var uc;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(uc||(uc={}));async function X2e(e,t,...n){e=jn(e);const{fs:r,path:i}=Tr(e,this);try{const s=new _s(await r.stat(i));switch(t){case Bi.GetFlags:case uc.GetFlags:return s.flags;case Bi.SetFlags:case uc.SetFlags:s.flags=n[0],await r.touch(i,s);return;case Bi.GetVersion:case uc.GetVersion:return s.version;case Bi.SetVersion:case uc.SetVersion:s.version=n[0],await r.touch(i,s);return;case Bi.Fiemap:break;case Bi.GetXattr:return new tZ(s);case Bi.SetXattr:break;case Bi.GetLabel:return r.label;case Bi.SetLabel:r.label=n[0];return;case Bi.GetUUID:return r.uuid;case Bi.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(s){throw di(s,{[i]:e})}throw new Ze(gt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function J2e(e,t,...n){e=jn(e);const{fs:r,path:i}=Tr(e,this);try{const s=new _s(r.statSync(i));switch(t){case Bi.GetFlags:case uc.GetFlags:return s.flags;case Bi.SetFlags:case uc.SetFlags:s.flags=n[0],r.touchSync(i,s);return;case Bi.GetVersion:case uc.GetVersion:return s.version;case Bi.SetVersion:case uc.SetVersion:s.version=n[0],r.touchSync(i,s);return;case Bi.Fiemap:break;case Bi.GetXattr:return new tZ(s);case Bi.SetXattr:break;case Bi.GetLabel:return r.label;case Bi.SetLabel:r.label=n[0];return;case Bi.GetUUID:return r.uuid;case Bi.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(s){throw di(s,{[i]:e})}throw new Ze(gt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const Q2e=[];function Oy(e,t,n,r){if(!t.startsWith("user.")&&!Q2e.includes(t))throw new Ze(gt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function eCe(e,t,n={}){var r;e=jn(e);const{fs:i,path:s}=Tr(e,this);Oy(this,t,e,"xattr.get");try{const a=await i.stat(s);if(zs&&!ui(this,a,$s))throw Ze.With("EACCES",s,"xattr.get");(r=a.attributes)!==null&&r!==void 0||(a.attributes=new uh);const o=a.attributes.get(t);if(!o)throw Ze.With("ENODATA",s,"xattr.get");const l=ji.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(a){throw di(a,{[s]:e})}}function tCe(e,t,n={}){var r;e=jn(e),Oy(this,t,e,"xattr.get");const{fs:i,path:s}=Tr(e,this);try{const a=i.statSync(s);if(zs&&!ui(this,a,$s))throw Ze.With("EACCES",s,"xattr.get");(r=a.attributes)!==null&&r!==void 0||(a.attributes=new uh);const o=a.attributes.get(t);if(!o)throw Ze.With("ENODATA",s,"xattr.get");const l=ji.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(a){throw di(a,{[s]:e})}}async function nCe(e,t,n,r={}){var i;e=jn(e);const{fs:s,path:a}=Tr(e,this);Oy(this,t,e,"xattr.set");try{const o=await s.stat(a);if(zs&&!ui(this,o,ns))throw Ze.With("EACCES",a,"xattr.set");(i=o.attributes)!==null&&i!==void 0||(o.attributes=new uh);const l=o.attributes.get(t);if(r.create&&l)throw Ze.With("EEXIST",a,"xattr.set");if(r.replace&&!l)throw Ze.With("ENODATA",a,"xattr.set");o.attributes.set(t,ji.from(n)),await s.touch(a,bm(o,"attributes"))}catch(o){throw di(o,{[a]:e})}}function rCe(e,t,n,r={}){var i;e=jn(e);const{fs:s,path:a}=Tr(e,this);Oy(this,t,e,"xattr.set");try{const o=s.statSync(a);if(zs&&!ui(this,o,ns))throw Ze.With("EACCES",a,"xattr.set");(i=o.attributes)!==null&&i!==void 0||(o.attributes=new uh);const l=o.attributes.get(t);if(r.create&&l)throw Ze.With("EEXIST",a,"xattr.set");if(r.replace&&!l)throw Ze.With("ENODATA",a,"xattr.set");o.attributes.set(t,ji.from(n)),s.touchSync(a,bm(o,"attributes"))}catch(o){throw di(o,{[a]:e})}}async function iCe(e,t){var n;e=jn(e);const{fs:r,path:i}=Tr(e,this);Oy(this,t,e,"xattr.remove");try{const s=await r.stat(i);if(zs&&!ui(this,s,ns))throw Ze.With("EACCES",i,"xattr.remove");if((n=s.attributes)!==null&&n!==void 0||(s.attributes=new uh),!s.attributes.get(t))throw Ze.With("ENODATA",i,"xattr.remove");s.attributes.remove(t),await r.touch(i,bm(s,"attributes"))}catch(s){throw di(s,{[i]:e})}}function sCe(e,t){var n;e=jn(e);const{fs:r,path:i}=Tr(e,this);Oy(this,t,e,"xattr.remove");try{const s=r.statSync(i);if(zs&&!ui(this,s,ns))throw Ze.With("EACCES",i,"xattr.remove");if((n=s.attributes)!==null&&n!==void 0||(s.attributes=new uh),!s.attributes.get(t))throw Ze.With("ENODATA",i,"xattr.remove");s.attributes.remove(t),r.touchSync(i,bm(s,"attributes"))}catch(s){throw di(s,{[i]:e})}}async function aCe(e){e=jn(e);const{fs:t,path:n}=Tr(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw di(r,{[n]:e})}}function oCe(e){e=jn(e);const{fs:t,path:n}=Tr(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw di(r,{[n]:e})}}const lCe=Object.freeze(Object.defineProperty({__proto__:null,get:eCe,getSync:tCe,list:aCe,listSync:oCe,remove:iCe,removeSync:sCe,set:nCe,setSync:rCe},Symbol.toStringTag,{value:"Module"})),aa=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:rSe,Dir:qP,Dirent:qx,get IOC(){return Bi},get IOC32(){return uc},ReadStream:KP,Stats:Gd,StatsFs:nSe,WriteStream:YP,access:O2e,accessSync:$Se,appendFile:u2e,appendFileSync:ESe,chmod:R2e,chmodSync:FSe,chown:T2e,chownSync:PSe,chroot:vSe,close:f2e,closeSync:Em,constants:mY,copyFile:U2e,copyFileSync:NY,cp:H2e,cpSync:MY,createReadStream:L2e,createWriteStream:B2e,exists:n2e,existsSync:OP,fchmod:v2e,fchmodSync:$P,fchown:b2e,fchownSync:BP,fdatasync:m2e,fdatasyncSync:NSe,fstat:d2e,fstatSync:TSe,fsync:p2e,fsyncSync:RSe,ftruncate:h2e,ftruncateSync:ASe,futimes:x2e,futimesSync:zP,glob:Y2e,globSync:HSe,ioctl:X2e,ioctlSync:J2e,lchmod:N2e,lchmodSync:LSe,lchown:A2e,lchownSync:DSe,link:C2e,linkSync:jSe,lopenSync:jE,lstat:i2e,lstatSync:PP,lutimes:I2e,lutimesSync:BSe,mkdir:_2e,mkdirSync:UP,mkdtemp:z2e,mkdtempSync:zSe,mount:jP,open:o2e,openAsBlob:K2e,openSync:IE,opendir:W2e,opendirSync:VSe,promises:QSe,read:y2e,readFile:l2e,readFileSync:FP,readSync:ISe,readdir:S2e,readdirSync:Ny,readlink:E2e,readlinkSync:Tj,readv:q2e,readvSync:USe,realpath:j2e,realpathSync:Rh,rename:t2e,renameSync:CSe,rm:$2e,rmSync:RY,rmdir:w2e,rmdirSync:TY,stat:r2e,statSync:dh,statfs:G2e,statfsSync:WSe,symlink:k2e,symlinkSync:OSe,truncate:s2e,truncateSync:kSe,umount:_Y,unlink:a2e,unlinkSync:DP,unwatchFile:D2e,utimes:M2e,utimesSync:AY,watch:F2e,watchFile:P2e,write:g2e,writeFile:c2e,writeFileSync:LP,writeSync:MSe,writev:V2e,writevSync:qSe,xattr:lCe},Symbol.toStringTag,{value:"Module"}));function R9(e){return iY(e)||AP(e)||e instanceof IP}async function nZ(e,t=0){if(typeof e!="object"||e==null)throw bo(new Ze(gt.EINVAL,"Invalid options on mount configuration"));if(!R9(e))throw bo(new Ze(gt.EINVAL,"Invalid mount configuration"));if(e instanceof IP)return await e.ready(),e;AP(e)&&(e={backend:e});for(const[i,s]of Object.entries(e))if(i!="backend"&&R9(s)){if(rY("Resolving nested mount configuration: "+i),t>10)throw bo(new Ze(gt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[i]=await nZ(s,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw bo(new Ze(gt.EPERM,"Backend not available: "+n.name));B_e(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function cCe(e){if(!iY(e))throw new TypeError("Invalid single mount point configuration");const t=await nZ(e);_Y("/"),jP("/",t)}const uCe=["delete"];Math.max(...uCe.map(e=>e.length));L_e("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const rZ=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;rZ[e]=t}function dCe(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^rZ[(t^e[n])&255];return(t^4294967295)>>>0}var Li=function(e,t,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,m=n.length-1;m>=0;m--){var y={};for(var b in r)y[b]=b==="access"?{}:r[b];for(var b in r.access)y.access[b]=r.access[b];y.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var v=(0,n[m])(o==="accessor"?{get:u.get,set:u.set}:u[l],y);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=a(v.get))&&(u.get=d),(d=a(v.set))&&(u.set=d),(d=a(v.init))&&i.unshift(d)}else(d=a(v))&&(o==="field"?i.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0},ar=function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},tD=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let N9=(()=>{var e,t,n,r;let i=[vm()],s,a=[],o,l,c=[],u=[],d,h=[],m=[],y,b=[],v=[],x,w=[],S=[];return o=class{constructor(){this.id=ar(this,c,0),this.offset_=(ar(this,u),ar(this,h,0)),this.offset=(ar(this,m),ar(this,b,0)),this.size=(ar(this,v),ar(this,w,0)),ar(this,S)}},tD(o,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=Xn).uint32.bind(e)],d=[(t=Xn).uint32.bind(t)],y=[(n=Xn).uint32.bind(n)],x=[(r=Xn).uint32.bind(r)],Li(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,A)=>{k.id=A}},metadata:C},c,u),Li(null,null,d,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,A)=>{k.offset_=A}},metadata:C},h,m),Li(null,null,y,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,A)=>{k.offset=A}},metadata:C},b,v),Li(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,A)=>{k.size=A}},metadata:C},w,S),Li(null,s={value:o},i,{kind:"class",name:o.name,metadata:C},null,a),o=s.value,C&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),ar(o,a)})(),o})();const M9=255;let gp=(()=>{var e,t,n,r;let i=[vm()],s,a=[],o,l,c=[],u=[],d,h=[],m=[],y,b=[],v=[],x,w=[],S=[],C,k=[],A=[];var R=o=class{constructor(N=mi(new Ze(gt.EINVAL,"Metadata block must be initialized with a superblock")),I=0){if(this.superblock=N,this.offset=I,this.checksum=ar(this,c,0),this.timestamp=(ar(this,u),ar(this,h,Date.now())),this.previous_offset_=(ar(this,m),ar(this,b,0)),this.previous_offset=(ar(this,v),ar(this,w,0)),this._previous=ar(this,S),this.entries=ar(this,k,Array.from({length:M9},()=>new N9)),ar(this,A),this.superblock=N,this.offset=I,!!I&&(EE(this,N.store._buffer.subarray(I,I+$i(R))),!iZ(this)))throw TE(new Ze(gt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+I.toString(16)))}get previous(){var N;if(this.previous_offset)return(N=this._previous)!==null&&N!==void 0||(this._previous=new R(this.superblock,this.previous_offset)),this._previous}};return tD(o,"MetadataBlock"),(()=>{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=Xn).uint32.bind(e)],d=[(t=Xn).uint32.bind(t)],y=[(n=Xn).uint32.bind(n)],x=[(r=Xn).uint32.bind(r)],C=[Bx(N9,M9)],Li(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:I=>"checksum"in I,get:I=>I.checksum,set:(I,O)=>{I.checksum=O}},metadata:N},c,u),Li(null,null,d,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:I=>"timestamp"in I,get:I=>I.timestamp,set:(I,O)=>{I.timestamp=O}},metadata:N},h,m),Li(null,null,y,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:I=>"previous_offset_"in I,get:I=>I.previous_offset_,set:(I,O)=>{I.previous_offset_=O}},metadata:N},b,v),Li(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:I=>"previous_offset"in I,get:I=>I.previous_offset,set:(I,O)=>{I.previous_offset=O}},metadata:N},w,S),Li(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:I=>"entries"in I,get:I=>I.entries,set:(I,O)=>{I.entries=O}},metadata:N},k,A),Li(null,s={value:o},i,{kind:"class",name:o.name,metadata:N},null,a),R=o=s.value,N&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),ar(o,a)})(),R=o})();const I9=2049864546;(()=>{var e,t,n,r,i,s,a,o,l,c,u;let d=[vm()],h,m=[],y,b,v=[],x=[],w,S=[],C=[],k,A=[],R=[],N,I=[],O=[],L,P=[],V=[],F,J=[],U=[],G,$=[],ne=[],W,te=[],ee=[],re,de=[],oe=[],Ie,je=[],Me=[],Se,qe=[],Qe=[],We,Re=[],K=[],ge,Te=[],ce=[];var le=y=class{constructor(ie=mi(new Ze(gt.EINVAL,"Super block must be initialized with a store"))){if(this.store=ie,this.checksum=ar(this,v,0),this.magic=(ar(this,x),ar(this,S,I9)),this.version=(ar(this,C),ar(this,A,1)),this.inode_format=(ar(this,R),ar(this,I,sSe)),this.flags=(ar(this,O),ar(this,P,0)),this.used_bytes=(ar(this,V),ar(this,J,BigInt(0))),this.total_bytes=(ar(this,U),ar(this,$,BigInt(0))),this.uuid=(ar(this,ne),ar(this,te,BigInt(0))),this.metadata_block_size=(ar(this,ee),ar(this,de,$i(gp))),this.metadata_offset_=(ar(this,oe),ar(this,je,0)),this.metadata_offset=(ar(this,Me),ar(this,qe,0)),this.metadata=ar(this,Qe),this.label=ar(this,Re,""),this._padding=(ar(this,K),ar(this,Te,new Array(132).fill(0))),ar(this,ce),this.store=ie,ie._view.getUint32(__e(le,"magic"),!0)!=I9){Ma("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new gp(this),this.metadata.offset=$i(le),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt($i(le)+$i(gp)),this.total_bytes=BigInt(ie._buffer.byteLength),ie._write(this),ie._write(this.metadata);return}if(EE(this,ie._buffer.subarray(0,$i(le))),!iZ(this))throw TE(new Ze(gt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new gp(this,this.metadata_offset)}rotateMetadata(){const ie=new gp(this);return ie.offset=Number(this.used_bytes),ie.previous_offset=this.metadata_offset,this.metadata=ie,this.metadata_offset=ie.offset,this.store._write(ie),this.used_bytes+=BigInt($i(gp)),this.store._write(this),ie}isUnused(ie,Ee){if(!Ee)return!0;if(ie+Ee>this.total_bytes||ie<$i(le))return!1;for(let Be=this.metadata;Be;Be=Be.previous){if(ie<Be.offset+$i(gp)&&ie+Ee>Be.offset)return!1;for(const Ce of Be.entries)if(Ce.offset&&(ie>=Ce.offset&&ie<Ce.offset+Ce.size||ie+Ee>Ce.offset&&ie+Ee<=Ce.offset+Ce.size||ie<=Ce.offset&&ie+Ee>=Ce.offset+Ce.size))return!1}return!0}};return tD(y,"SuperBlock"),(()=>{const ie=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=Xn).uint32.bind(e)],w=[(t=Xn).uint32.bind(t)],k=[(n=Xn).uint16.bind(n)],N=[(r=Xn).uint16.bind(r)],L=[(i=Xn).uint32.bind(i)],F=[(s=Xn).uint64.bind(s)],G=[(a=Xn).uint64.bind(a)],W=[(o=Xn).uint128.bind(o)],re=[(l=Xn).uint32.bind(l)],Ie=[(c=Xn).uint32.bind(c)],Se=[(u=Xn).uint32.bind(u)],We=[Xn.char(64)],ge=[Xn.char(132)],Li(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:Ee=>"checksum"in Ee,get:Ee=>Ee.checksum,set:(Ee,Be)=>{Ee.checksum=Be}},metadata:ie},v,x),Li(null,null,w,{kind:"field",name:"magic",static:!1,private:!1,access:{has:Ee=>"magic"in Ee,get:Ee=>Ee.magic,set:(Ee,Be)=>{Ee.magic=Be}},metadata:ie},S,C),Li(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:Ee=>"version"in Ee,get:Ee=>Ee.version,set:(Ee,Be)=>{Ee.version=Be}},metadata:ie},A,R),Li(null,null,N,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:Ee=>"inode_format"in Ee,get:Ee=>Ee.inode_format,set:(Ee,Be)=>{Ee.inode_format=Be}},metadata:ie},I,O),Li(null,null,L,{kind:"field",name:"flags",static:!1,private:!1,access:{has:Ee=>"flags"in Ee,get:Ee=>Ee.flags,set:(Ee,Be)=>{Ee.flags=Be}},metadata:ie},P,V),Li(null,null,F,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:Ee=>"used_bytes"in Ee,get:Ee=>Ee.used_bytes,set:(Ee,Be)=>{Ee.used_bytes=Be}},metadata:ie},J,U),Li(null,null,G,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:Ee=>"total_bytes"in Ee,get:Ee=>Ee.total_bytes,set:(Ee,Be)=>{Ee.total_bytes=Be}},metadata:ie},$,ne),Li(null,null,W,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:Ee=>"uuid"in Ee,get:Ee=>Ee.uuid,set:(Ee,Be)=>{Ee.uuid=Be}},metadata:ie},te,ee),Li(null,null,re,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:Ee=>"metadata_block_size"in Ee,get:Ee=>Ee.metadata_block_size,set:(Ee,Be)=>{Ee.metadata_block_size=Be}},metadata:ie},de,oe),Li(null,null,Ie,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:Ee=>"metadata_offset_"in Ee,get:Ee=>Ee.metadata_offset_,set:(Ee,Be)=>{Ee.metadata_offset_=Be}},metadata:ie},je,Me),Li(null,null,Se,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:Ee=>"metadata_offset"in Ee,get:Ee=>Ee.metadata_offset,set:(Ee,Be)=>{Ee.metadata_offset=Be}},metadata:ie},qe,Qe),Li(null,null,We,{kind:"field",name:"label",static:!1,private:!1,access:{has:Ee=>"label"in Ee,get:Ee=>Ee.label,set:(Ee,Be)=>{Ee.label=Be}},metadata:ie},Re,K),Li(null,null,ge,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:Ee=>"_padding"in Ee,get:Ee=>Ee._padding,set:(Ee,Be)=>{Ee._padding=Be}},metadata:ie},Te,ce),Li(null,h={value:y},d,{kind:"class",name:y.name,metadata:ie},null,m),le=y=h.value,ie&&Object.defineProperty(y,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ie}),ar(y,m)})(),le=y})();function iZ(e){const t=ha(e),n=dCe(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=aa;function fCe(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function Rj(e,t,n){if(e instanceof Ze)return e;const r=e instanceof DOMException?gt[fCe(e)]:gt.EIO,i=new Ze(r,e.message,t,n);return i.stack=e.stack,i.cause=e.cause,i}function n0(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(Rj(e.error))}})}class hCe extends Ej{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await n0(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await n0(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await n0(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),n0(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(Rj(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(Rj(this.tx.error)),this.tx.abort(),t}}async function pCe(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Ma("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await n0(n)}class mCe{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new hCe(t,this)}}const gCe={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await n0(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await pCe(e.storeName||"zenfs",e.idbFactory),n=new mCe(t),r=new vY(n);if(e!=null&&e.disableAsyncCache)return TP("Async preloading disabled for IndexedDB"),r;const i=n.transaction();for(const s of await i.keys())await i.get(s);return r}},yCe=gCe,dn={vfsKeyChanged:"vfs.key.changed",nodesUpdated:"vfs.nodes.updated",selectionChanged:"vfs.selection.changed",loadingStateChanged:"vfs.loading.state.changed",fsInstanceChanged:"vfs.instance.changed",vfsEnabledChanged:"vfs.enabled.changed",fileWritten:"vfs.sdk.fileWritten",fileRead:"vfs.sdk.fileRead",fileDeleted:"vfs.sdk.fileDeleted",setVfsKeyRequest:"vfs.set.vfs.key.request",initializeVFSRequest:"vfs.initialize.vfs.request",fetchNodesRequest:"vfs.fetch.nodes.request",setCurrentPathRequest:"vfs.set.current.path.request",createDirectoryRequest:"vfs.create.directory.request",uploadFilesRequest:"vfs.upload.files.request",deleteNodesRequest:"vfs.delete.nodes.request",renameNodeRequest:"vfs.rename.node.request",downloadFileRequest:"vfs.download.file.request",selectFileRequest:"vfs.select.file.request",deselectFileRequest:"vfs.deselect.file.request",clearSelectionRequest:"vfs.clear.selection.request",setEnableVfsRequest:"vfs.set.enable.vfs.request"};function wS(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var AM={exports:{}},j9;function bCe(){return j9||(j9=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function a(c,u){if(!i[c]){if(!r[c]){var d=typeof wS=="function"&&wS;if(!u&&d)return d(c,!0);if(o)return o(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var m=i[c]={exports:{}};r[c][0].call(m.exports,function(y){var b=r[c][1][y];return a(b||y)},m,m.exports,n,r,i,s)}return i[c].exports}for(var o=typeof wS=="function"&&wS,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(n,r,i){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,d,h,m,y,b,v=[],x=0,w=l.length,S=w,C=s.getTypeOf(l)!=="string";x<l.length;)S=w-x,d=C?(c=l[x++],u=x<w?l[x++]:0,x<w?l[x++]:0):(c=l.charCodeAt(x++),u=x<w?l.charCodeAt(x++):0,x<w?l.charCodeAt(x++):0),h=c>>2,m=(3&c)<<4|u>>4,y=1<S?(15&u)<<2|d>>6:64,b=2<S?63&d:64,v.push(o.charAt(h)+o.charAt(m)+o.charAt(y)+o.charAt(b));return v.join("")},i.decode=function(l){var c,u,d,h,m,y,b=0,v=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var w,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&S--,l.charAt(l.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=a.uint8array?new Uint8Array(0|S):new Array(0|S);b<l.length;)c=o.indexOf(l.charAt(b++))<<2|(h=o.indexOf(l.charAt(b++)))>>4,u=(15&h)<<4|(m=o.indexOf(l.charAt(b++)))>>2,d=(3&m)<<6|(y=o.indexOf(l.charAt(b++))),w[v++]=c,m!==64&&(w[v++]=u),y!==64&&(w[v++]=d);return w}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,d,h,m,y){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=m,this.compressedContent=y}c.prototype={getContentWorker:function(){var u=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,h){return u.pipe(new o).pipe(new l("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(c,u,d,h){var m=a,y=h+d;c^=-1;for(var b=h;b<y;b++)c=c>>>8^m[255&(c^u[b])];return-1^c}(0|l,o,o.length,0):function(c,u,d,h){var m=a,y=h+d;c^=-1;for(var b=h;b<y;b++)c=c>>>8^m[255&(c^u.charCodeAt(b))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),c=s?"uint8array":"array";function u(d,h){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}i.magic="\b\0",o.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},i.compressWorker=function(d){return new u("Deflate",d)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(m,y){var b,v="";for(b=0;b<y;b++)v+=String.fromCharCode(255&m),m>>>=8;return v}function a(m,y,b,v,x,w){var S,C,k=m.file,A=m.compression,R=w!==c.utf8encode,N=o.transformTo("string",w(k.name)),I=o.transformTo("string",c.utf8encode(k.name)),O=k.comment,L=o.transformTo("string",w(O)),P=o.transformTo("string",c.utf8encode(O)),V=I.length!==k.name.length,F=P.length!==O.length,J="",U="",G="",$=k.dir,ne=k.date,W={crc32:0,compressedSize:0,uncompressedSize:0};y&&!b||(W.crc32=m.crc32,W.compressedSize=m.compressedSize,W.uncompressedSize=m.uncompressedSize);var te=0;y&&(te|=8),R||!V&&!F||(te|=2048);var ee=0,re=0;$&&(ee|=16),x==="UNIX"?(re=798,ee|=function(oe,Ie){var je=oe;return oe||(je=Ie?16893:33204),(65535&je)<<16}(k.unixPermissions,$)):(re=20,ee|=function(oe){return 63&(oe||0)}(k.dosPermissions)),S=ne.getUTCHours(),S<<=6,S|=ne.getUTCMinutes(),S<<=5,S|=ne.getUTCSeconds()/2,C=ne.getUTCFullYear()-1980,C<<=4,C|=ne.getUTCMonth()+1,C<<=5,C|=ne.getUTCDate(),V&&(U=s(1,1)+s(u(N),4)+I,J+="up"+s(U.length,2)+U),F&&(G=s(1,1)+s(u(L),4)+P,J+="uc"+s(G.length,2)+G);var de="";return de+=`
\0`,de+=s(te,2),de+=A.magic,de+=s(S,2),de+=s(C,2),de+=s(W.crc32,4),de+=s(W.compressedSize,4),de+=s(W.uncompressedSize,4),de+=s(N.length,2),de+=s(J.length,2),{fileRecord:d.LOCAL_FILE_HEADER+de+N+J,dirRecord:d.CENTRAL_FILE_HEADER+s(re,2)+de+s(L.length,2)+"\0\0\0\0"+s(ee,4)+s(v,4)+N+J+L}}var o=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),d=n("../signature");function h(m,y,b,v){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=b,this.encodeFileName=v,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,l),h.prototype.push=function(m){var y=m.meta.percent||0,b=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:b?(y+100*(b-v-1))/b:100}}))},h.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var y=this.streamFiles&&!m.file.dir;if(y){var b=a(m,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(m){this.accumulate=!1;var y=this.streamFiles&&!m.file.dir,b=a(m,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),y)this.push({data:function(v){return d.DATA_DESCRIPTOR+s(v.crc32,4)+s(v.compressedSize,4)+s(v.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var m=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var b=this.bytesWritten-m,v=function(x,w,S,C,k){var A=o.transformTo("string",k(C));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(x,2)+s(x,2)+s(w,4)+s(S,4)+s(A.length,2)+A}(this.dirRecords.length,b,m,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(m){this._sources.push(m);var y=this;return m.on("data",function(b){y.processChunk(b)}),m.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),m.on("error",function(b){y.error(b)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(m){var y=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var b=0;b<y.length;b++)try{y[b].error(m)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,y=0;y<m.length;y++)m[y].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),a=n("./ZipFileWorker");i.generateWorker=function(o,l,c){var u=new a(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{o.forEach(function(h,m){d++;var y=function(w,S){var C=w||S,k=s[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(m.options.compression,l.compression),b=m.options.compressionOptions||l.compressionOptions||{},v=m.dir,x=m.date;m._compressWorker(y,b).withStreamInfo("file",{name:h,dir:v,date:x,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),a=n("./external"),o=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function d(h){return new a.Promise(function(m,y){var b=h.decompressed.getContentWorker().pipe(new c);b.on("error",function(v){y(v)}).on("end",function(){b.streamInfo.crc32!==h.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(h,m){var y=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,m.optimizedBinaryString,m.base64).then(function(b){var v=new l(m);return v.load(b),v}).then(function(b){var v=[a.Promise.resolve(b)],x=b.files;if(m.checkCRC32)for(var w=0;w<x.length;w++)v.push(d(x[w]));return a.Promise.all(v)}).then(function(b){for(var v=b.shift(),x=v.files,w=0;w<x.length;w++){var S=x[w],C=S.fileNameStr,k=s.resolve(S.fileNameStr);y.file(k,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:m.createFolders}),S.dir||(y.file(k).unsafeOriginalName=C)}return v.zipComment.length&&(y.comment=v.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(o,a),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function a(o,l,c){s.call(this,l),this._helper=o;var u=this;o.on("data",function(d,h){u.push(d)||u._helper.pause(),c&&c(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}n("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof on<"u",newBufferFrom:function(s,a){if(on.from&&on.from!==Uint8Array.from)return on.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new on(s,a)},allocBuffer:function(s){if(on.alloc)return on.alloc(s);var a=new on(s);return a.fill(0),a},isBuffer:function(s){return on.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(k,A,R){var N,I=o.getTypeOf(A),O=o.extend(R||{},u);O.date=O.date||new Date,O.compression!==null&&(O.compression=O.compression.toUpperCase()),typeof O.unixPermissions=="string"&&(O.unixPermissions=parseInt(O.unixPermissions,8)),O.unixPermissions&&16384&O.unixPermissions&&(O.dir=!0),O.dosPermissions&&16&O.dosPermissions&&(O.dir=!0),O.dir&&(k=x(k)),O.createFolders&&(N=v(k))&&w.call(this,N,!0);var L=I==="string"&&O.binary===!1&&O.base64===!1;R&&R.binary!==void 0||(O.binary=!L),(A instanceof d&&A.uncompressedSize===0||O.dir||!A||A.length===0)&&(O.base64=!1,O.binary=!0,A="",O.compression="STORE",I="string");var P=null;P=A instanceof d||A instanceof l?A:y.isNode&&y.isStream(A)?new b(k,A):o.prepareContent(k,A,O.binary,O.optimizedBinaryString,O.base64);var V=new h(k,P,O);this.files[k]=V}var a=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),d=n("./compressedObject"),h=n("./zipObject"),m=n("./generate"),y=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),v=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var A=k.lastIndexOf("/");return 0<A?k.substring(0,A):""},x=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},w=function(k,A){return A=A!==void 0?A:u.createFolders,k=x(k),this.files[k]||s.call(this,k,null,{dir:!0,createFolders:A}),this.files[k]};function S(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var A,R,N;for(A in this.files)N=this.files[A],(R=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&k(R,N)},filter:function(k){var A=[];return this.forEach(function(R,N){k(R,N)&&A.push(N)}),A},file:function(k,A,R){if(arguments.length!==1)return k=this.root+k,s.call(this,k,A,R),this;if(S(k)){var N=k;return this.filter(function(O,L){return!L.dir&&N.test(O)})}var I=this.files[this.root+k];return I&&!I.dir?I:null},folder:function(k){if(!k)return this;if(S(k))return this.filter(function(I,O){return O.dir&&k.test(I)});var A=this.root+k,R=w.call(this,A),N=this.clone();return N.root=R.name,N},remove:function(k){k=this.root+k;var A=this.files[k];if(A||(k.slice(-1)!=="/"&&(k+="/"),A=this.files[k]),A&&!A.dir)delete this.files[k];else for(var R=this.filter(function(I,O){return O.name.slice(0,k.length)===k}),N=0;N<R.length;N++)delete this.files[R[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var A,R={};try{if((R=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");o.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var N=R.comment||this.comment||"";A=m.generateWorker(this,R,N)}catch(I){(A=new l("error")).error(I)}return new c(A,R.type||"string",R.mimeType)},generateAsync:function(k,A){return this.generateInternalStream(k).accumulate(A)},generateNodeStream:function(k,A){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(A)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&u===h[2]&&d===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(d){var h=s.getTypeOf(d);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new c(d):a.uint8array?new u(s.transformTo("uint8array",d)):new o(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),a=n("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),a=n("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),d=null;if(c.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(y,b){return new u.Promise(function(v,x){var w=[],S=y._internalType,C=y._outputType,k=y._mimeType;y.on("data",function(A,R){w.push(A),b&&b(R)}).on("error",function(A){w=[],x(A)}).on("end",function(){try{var A=function(R,N,I){switch(R){case"blob":return s.newBlob(s.transformTo("arraybuffer",N),I);case"base64":return l.encode(N);default:return s.transformTo(R,N)}}(C,function(R,N){var I,O=0,L=null,P=0;for(I=0;I<N.length;I++)P+=N[I].length;switch(R){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(L=new Uint8Array(P),I=0;I<N.length;I++)L.set(N[I],O),O+=N[I].length;return L;case"nodebuffer":return on.concat(N);default:throw new Error("concat : unsupported type '"+R+"'")}}(S,w),k);v(A)}catch(R){x(R)}w=[]}).resume()})}function m(y,b,v){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=v,s.checkSupport(x),this._worker=y.pipe(new a(x)),y.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}m.prototype={accumulate:function(y){return h(this,y)},on:function(y,b){var v=this;return y==="data"?this._worker.on(y,function(x){b.call(v,x.data,x.meta)}):this._worker.on(y,function(){s.delay(b,arguments,v)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},y)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof on<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(m){return a.nodebuffer?o.newBufferFrom(m,"utf-8"):function(y){var b,v,x,w,S,C=y.length,k=0;for(w=0;w<C;w++)(64512&(v=y.charCodeAt(w)))==55296&&w+1<C&&(64512&(x=y.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(x-56320),w++),k+=v<128?1:v<2048?2:v<65536?3:4;for(b=a.uint8array?new Uint8Array(k):new Array(k),w=S=0;S<k;w++)(64512&(v=y.charCodeAt(w)))==55296&&w+1<C&&(64512&(x=y.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(x-56320),w++),v<128?b[S++]=v:(v<2048?b[S++]=192|v>>>6:(v<65536?b[S++]=224|v>>>12:(b[S++]=240|v>>>18,b[S++]=128|v>>>12&63),b[S++]=128|v>>>6&63),b[S++]=128|63&v);return b}(m)},i.utf8decode=function(m){return a.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(y){var b,v,x,w,S=y.length,C=new Array(2*S);for(b=v=0;b<S;)if((x=y[b++])<128)C[v++]=x;else if(4<(w=c[x]))C[v++]=65533,b+=w-1;else{for(x&=w===2?31:w===3?15:7;1<w&&b<S;)x=x<<6|63&y[b++],w--;1<w?C[v++]=65533:x<65536?C[v++]=x:(x-=65536,C[v++]=55296|x>>10&1023,C[v++]=56320|1023&x)}return C.length!==v&&(C.subarray?C=C.subarray(0,v):C.length=v),s.applyFromCharCode(C)}(m=s.transformTo(a.uint8array?"uint8array":"array",m))},s.inherits(d,l),d.prototype.processChunk=function(m){var y=s.transformTo(a.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var b=y;(y=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),y.set(b,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var v=function(w,S){var C;for((S=S||w.length)>w.length&&(S=w.length),C=S-1;0<=C&&(192&w[C])==128;)C--;return C<0||C===0?S:C+c[w[C]]>S?C:S}(y),x=y;v!==y.length&&(a.uint8array?(x=y.subarray(0,v),this.leftOver=y.subarray(v,y.length)):(x=y.slice(0,v),this.leftOver=y.slice(v,y.length))),this.push({data:i.utf8decode(x),meta:m.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(h,l),h.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function c(b){return b}function u(b,v){for(var x=0;x<b.length;++x)v[x]=255&b.charCodeAt(x);return v}n("setimmediate"),i.newBlob=function(b,v){i.checkSupport("blob");try{return new Blob([b],{type:v})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(b,v,x){var w=[],S=0,C=b.length;if(C<=x)return String.fromCharCode.apply(null,b);for(;S<C;)v==="array"||v==="nodebuffer"?w.push(String.fromCharCode.apply(null,b.slice(S,Math.min(S+x,C)))):w.push(String.fromCharCode.apply(null,b.subarray(S,Math.min(S+x,C)))),S+=x;return w.join("")},stringifyByChar:function(b){for(var v="",x=0;x<b.length;x++)v+=String.fromCharCode(b[x]);return v},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function h(b){var v=65536,x=i.getTypeOf(b),w=!0;if(x==="uint8array"?w=d.applyCanBeUsed.uint8array:x==="nodebuffer"&&(w=d.applyCanBeUsed.nodebuffer),w)for(;1<v;)try{return d.stringifyByChunk(b,x,v)}catch{v=Math.floor(v/2)}return d.stringifyByChar(b)}function m(b,v){for(var x=0;x<b.length;x++)v[x]=b[x];return v}i.applyFromCharCode=h;var y={};y.string={string:c,array:function(b){return u(b,new Array(b.length))},arraybuffer:function(b){return y.string.uint8array(b).buffer},uint8array:function(b){return u(b,new Uint8Array(b.length))},nodebuffer:function(b){return u(b,o.allocBuffer(b.length))}},y.array={string:h,array:c,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},y.arraybuffer={string:function(b){return h(new Uint8Array(b))},array:function(b){return m(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:c,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},y.uint8array={string:h,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:c,nodebuffer:function(b){return o.newBufferFrom(b)}},y.nodebuffer={string:h,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return y.nodebuffer.uint8array(b).buffer},uint8array:function(b){return m(b,new Uint8Array(b.length))},nodebuffer:c},i.transformTo=function(b,v){if(v=v||"",!b)return v;i.checkSupport(b);var x=i.getTypeOf(v);return y[x][b](v)},i.resolve=function(b){for(var v=b.split("/"),x=[],w=0;w<v.length;w++){var S=v[w];S==="."||S===""&&w!==0&&w!==v.length-1||(S===".."?x.pop():x.push(S))}return x.join("/")},i.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(b)?"nodebuffer":s.uint8array&&b instanceof Uint8Array?"uint8array":s.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(b){if(!s[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(b){var v,x,w="";for(x=0;x<(b||"").length;x++)w+="\\x"+((v=b.charCodeAt(x))<16?"0":"")+v.toString(16).toUpperCase();return w},i.delay=function(b,v,x){setImmediate(function(){b.apply(x||null,v||[])})},i.inherits=function(b,v){function x(){}x.prototype=v.prototype,b.prototype=new x},i.extend=function(){var b,v,x={};for(b=0;b<arguments.length;b++)for(v in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],v)&&x[v]===void 0&&(x[v]=arguments[b][v]);return x},i.prepareContent=function(b,v,x,w,S){return l.Promise.resolve(v).then(function(C){return s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,A){var R=new FileReader;R.onload=function(N){k(N.target.result)},R.onerror=function(N){A(N.target.error)},R.readAsArrayBuffer(C)}):C}).then(function(C){var k=i.getTypeOf(C);return k?(k==="arraybuffer"?C=i.transformTo("uint8array",C):k==="string"&&(S?C=a.decode(C):x&&w!==!0&&(C=function(A){return u(A,s.uint8array?new Uint8Array(A.length):new Array(A.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(d)+")")}},isSignature:function(d,h){var m=this.reader.index;this.reader.setIndex(d);var y=this.reader.readString(4)===h;return this.reader.setIndex(m),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",m=a.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,m,y=this.zip64EndOfCentralSize-44;0<y;)d=this.reader.readInt(2),h=this.reader.readInt(4),m=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var y=h-m;if(0<y)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),d=n("./support");function h(m,y){this.options=m,this.loadOptions=y}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var y,b;if(m.skip(22),this.fileNameLength=m.readInt(2),b=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(v){for(var x in u)if(Object.prototype.hasOwnProperty.call(u,x)&&u[x].magic===v)return u[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var y=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(y),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var y,b,v,x=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<x;)y=m.readInt(2),b=m.readInt(2),v=m.readData(b),this.extraFields[y]={id:y,length:b,value:v};m.setIndex(x)},handleUTF8:function(){var m=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var b=a.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var x=a.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var y=s(m.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:c.utf8decode(y.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var y=s(m.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:c.utf8decode(y.readData(m.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(y,b,v){this.name=y,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=b,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");s.prototype={internalStream:function(y){var b=null,v="string";try{if(!y)throw new Error("No output type specified.");var x=(v=y.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),b=this._decompressWorker();var w=!this._dataBinary;w&&!x&&(b=b.pipe(new l.Utf8EncodeWorker)),!w&&x&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(S){(b=new u("error")).error(S)}return new a(b,v,"")},async:function(y,b){return this.internalStream(y).accumulate(b)},nodeStream:function(y,b){return this.internalStream(y||"nodebuffer").toNodejsStream(b)},_compressWorker:function(y,b){if(this._data instanceof c&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(v,y,b)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<d.length;m++)s.prototype[d[m]]=h;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(y),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var b=s.document.createElement("script");b.onreadystatechange=function(){y(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},s.document.documentElement.appendChild(b)}:function(){setTimeout(y,0)};else{var h=new s.MessageChannel;h.port1.onmessage=y,a=function(){h.port2.postMessage(0)}}var m=[];function y(){var b,v;o=!0;for(var x=m.length;x;){for(v=m,m=[],b=-1;++b<x;)v[b]();x=m.length}o=!1}r.exports=function(b){m.push(b)!==1||o||a()}}).call(this,typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,x!==a&&b(this,x)}function h(x,w,S){this.promise=x,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function m(x,w,S){s(function(){var C;try{C=w(S)}catch(k){return o.reject(x,k)}C===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,C)})}function y(x){var w=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof w=="function")return function(){w.apply(x,arguments)}}function b(x,w){var S=!1;function C(R){S||(S=!0,o.reject(x,R))}function k(R){S||(S=!0,o.resolve(x,R))}var A=v(function(){w(k,C)});A.status==="error"&&C(A.value)}function v(x,w){var S={};try{S.value=x(w),S.status="success"}catch(C){S.status="error",S.value=C}return S}(r.exports=d).prototype.finally=function(x){if(typeof x!="function")return this;var w=this.constructor;return this.then(function(S){return w.resolve(x()).then(function(){return S})},function(S){return w.resolve(x()).then(function(){throw S})})},d.prototype.catch=function(x){return this.then(null,x)},d.prototype.then=function(x,w){if(typeof x!="function"&&this.state===c||typeof w!="function"&&this.state===l)return this;var S=new this.constructor(a);return this.state!==u?m(S,this.state===c?x:w,this.outcome):this.queue.push(new h(S,x,w)),S},h.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},h.prototype.otherCallFulfilled=function(x){m(this.promise,this.onFulfilled,x)},h.prototype.callRejected=function(x){o.reject(this.promise,x)},h.prototype.otherCallRejected=function(x){m(this.promise,this.onRejected,x)},o.resolve=function(x,w){var S=v(y,w);if(S.status==="error")return o.reject(x,S.value);var C=S.value;if(C)b(x,C);else{x.state=c,x.outcome=w;for(var k=-1,A=x.queue.length;++k<A;)x.queue[k].callFulfilled(w)}return x},o.reject=function(x,w){x.state=l,x.outcome=w;for(var S=-1,C=x.queue.length;++S<C;)x.queue[S].callRejected(w);return x},d.resolve=function(x){return x instanceof this?x:o.resolve(new this(a),x)},d.reject=function(x){var w=new this(a);return o.reject(w,x)},d.all=function(x){var w=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,C=!1;if(!S)return this.resolve([]);for(var k=new Array(S),A=0,R=-1,N=new this(a);++R<S;)I(x[R],R);return N;function I(O,L){w.resolve(O).then(function(P){k[L]=P,++A!==S||C||(C=!0,o.resolve(N,k))},function(P){C||(C=!0,o.reject(N,P))})}},d.race=function(x){var w=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,C=!1;if(!S)return this.resolve([]);for(var k=-1,A=new this(a);++k<S;)R=x[k],w.resolve(R).then(function(N){C||(C=!0,o.resolve(A,N))},function(N){C||(C=!0,o.reject(A,N))});var R;return A}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,m=0,y=8;function b(x){if(!(this instanceof b))return new b(x);this.options=a.assign({level:h,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},x||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var S=s.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(S!==d)throw new Error(l[S]);if(w.header&&s.deflateSetHeader(this.strm,w.header),w.dictionary){var C;if(C=typeof w.dictionary=="string"?o.string2buf(w.dictionary):u.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(S=s.deflateSetDictionary(this.strm,C))!==d)throw new Error(l[S]);this._dict_set=!0}}function v(x,w){var S=new b(w);if(S.push(x,!0),S.err)throw S.msg||l[S.err];return S.result}b.prototype.push=function(x,w){var S,C,k=this.strm,A=this.options.chunkSize;if(this.ended)return!1;C=w===~~w?w:w===!0?4:0,typeof x=="string"?k.input=o.string2buf(x):u.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(A),k.next_out=0,k.avail_out=A),(S=s.deflate(k,C))!==1&&S!==d)return this.onEnd(S),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(k.output,k.next_out))):this.onData(a.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&S!==1);return C===4?(S=s.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===d):C!==2||(this.onEnd(d),!(k.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=b,i.deflate=v,i.deflateRaw=function(x,w){return(w=w||{}).raw=!0,v(x,w)},i.gzip=function(x,w){return(w=w||{}).gzip=!0,v(x,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=n("./zlib/gzheader"),h=Object.prototype.toString;function m(b){if(!(this instanceof m))return new m(b);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},b||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||b&&b.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&(15&v.windowBits)==0&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var x=s.inflateInit2(this.strm,v.windowBits);if(x!==l.Z_OK)throw new Error(c[x]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function y(b,v){var x=new m(v);if(x.push(b,!0),x.err)throw x.msg||c[x.err];return x.result}m.prototype.push=function(b,v){var x,w,S,C,k,A,R=this.strm,N=this.options.chunkSize,I=this.options.dictionary,O=!1;if(this.ended)return!1;w=v===~~v?v:v===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?R.input=o.binstring2buf(b):h.call(b)==="[object ArrayBuffer]"?R.input=new Uint8Array(b):R.input=b,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new a.Buf8(N),R.next_out=0,R.avail_out=N),(x=s.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&I&&(A=typeof I=="string"?o.string2buf(I):h.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,x=s.inflateSetDictionary(this.strm,A)),x===l.Z_BUF_ERROR&&O===!0&&(x=l.Z_OK,O=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&x!==l.Z_STREAM_END&&(R.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(R.output,R.next_out),C=R.next_out-S,k=o.buf2string(R.output,S),R.next_out=C,R.avail_out=N-C,C&&a.arraySet(R.output,R.output,S,C,0),this.onData(k)):this.onData(a.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(O=!0)}while((0<R.avail_in||R.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(x=s.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(b){this.chunks.push(b)},m.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Inflate=m,i.inflate=y,i.inflateRaw=function(b,v){return(v=v||{}).raw=!0,y(b,v)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,u,d,h){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),h);else for(var m=0;m<d;m++)l[h+m]=c[u+m]},flattenChunks:function(l){var c,u,d,h,m,y;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(y=new Uint8Array(d),c=h=0,u=l.length;c<u;c++)m=l[c],y.set(m,h),h+=m.length;return y}},o={arraySet:function(l,c,u,d,h){for(var m=0;m<d;m++)l[h+m]=c[u+m]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,h){if(h<65537&&(d.subarray&&o||!d.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(d,h));for(var m="",y=0;y<h;y++)m+=String.fromCharCode(d[y]);return m}l[254]=l[254]=1,i.string2buf=function(d){var h,m,y,b,v,x=d.length,w=0;for(b=0;b<x;b++)(64512&(m=d.charCodeAt(b)))==55296&&b+1<x&&(64512&(y=d.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),b++),w+=m<128?1:m<2048?2:m<65536?3:4;for(h=new s.Buf8(w),b=v=0;v<w;b++)(64512&(m=d.charCodeAt(b)))==55296&&b+1<x&&(64512&(y=d.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),b++),m<128?h[v++]=m:(m<2048?h[v++]=192|m>>>6:(m<65536?h[v++]=224|m>>>12:(h[v++]=240|m>>>18,h[v++]=128|m>>>12&63),h[v++]=128|m>>>6&63),h[v++]=128|63&m);return h},i.buf2binstring=function(d){return u(d,d.length)},i.binstring2buf=function(d){for(var h=new s.Buf8(d.length),m=0,y=h.length;m<y;m++)h[m]=d.charCodeAt(m);return h},i.buf2string=function(d,h){var m,y,b,v,x=h||d.length,w=new Array(2*x);for(m=y=0;m<x;)if((b=d[m++])<128)w[y++]=b;else if(4<(v=l[b]))w[y++]=65533,m+=v-1;else{for(b&=v===2?31:v===3?15:7;1<v&&m<x;)b=b<<6|63&d[m++],v--;1<v?w[y++]=65533:b<65536?w[y++]=b:(b-=65536,w[y++]=55296|b>>10&1023,w[y++]=56320|1023&b)}return u(w,y)},i.utf8border=function(d,h){var m;for((h=h||d.length)>d.length&&(h=d.length),m=h-1;0<=m&&(192&d[m])==128;)m--;return m<0||m===0?h:m+l[d[m]]>h?m:h}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,a,o,l){for(var c=65535&s|0,u=s>>>16&65535|0,d=0;o!==0;){for(o-=d=2e3<o?2e3:o;u=u+(c=c+a[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();r.exports=function(a,o,l,c){var u=s,d=c+l;a^=-1;for(var h=c;h<d;h++)a=a>>>8^u[255&(a^o[h])];return-1^a}},{}],46:[function(n,r,i){var s,a=n("../utils/common"),o=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),d=0,h=4,m=0,y=-2,b=-1,v=4,x=2,w=8,S=9,C=286,k=30,A=19,R=2*C+1,N=15,I=3,O=258,L=O+I+1,P=42,V=113,F=1,J=2,U=3,G=4;function $(K,ge){return K.msg=u[ge],ge}function ne(K){return(K<<1)-(4<K?9:0)}function W(K){for(var ge=K.length;0<=--ge;)K[ge]=0}function te(K){var ge=K.state,Te=ge.pending;Te>K.avail_out&&(Te=K.avail_out),Te!==0&&(a.arraySet(K.output,ge.pending_buf,ge.pending_out,Te,K.next_out),K.next_out+=Te,ge.pending_out+=Te,K.total_out+=Te,K.avail_out-=Te,ge.pending-=Te,ge.pending===0&&(ge.pending_out=0))}function ee(K,ge){o._tr_flush_block(K,0<=K.block_start?K.block_start:-1,K.strstart-K.block_start,ge),K.block_start=K.strstart,te(K.strm)}function re(K,ge){K.pending_buf[K.pending++]=ge}function de(K,ge){K.pending_buf[K.pending++]=ge>>>8&255,K.pending_buf[K.pending++]=255&ge}function oe(K,ge){var Te,ce,le=K.max_chain_length,ie=K.strstart,Ee=K.prev_length,Be=K.nice_match,Ce=K.strstart>K.w_size-L?K.strstart-(K.w_size-L):0,ct=K.window,Tt=K.w_mask,ft=K.prev,Pt=K.strstart+O,Ut=ct[ie+Ee-1],Bt=ct[ie+Ee];K.prev_length>=K.good_match&&(le>>=2),Be>K.lookahead&&(Be=K.lookahead);do if(ct[(Te=ge)+Ee]===Bt&&ct[Te+Ee-1]===Ut&&ct[Te]===ct[ie]&&ct[++Te]===ct[ie+1]){ie+=2,Te++;do;while(ct[++ie]===ct[++Te]&&ct[++ie]===ct[++Te]&&ct[++ie]===ct[++Te]&&ct[++ie]===ct[++Te]&&ct[++ie]===ct[++Te]&&ct[++ie]===ct[++Te]&&ct[++ie]===ct[++Te]&&ct[++ie]===ct[++Te]&&ie<Pt);if(ce=O-(Pt-ie),ie=Pt-O,Ee<ce){if(K.match_start=ge,Be<=(Ee=ce))break;Ut=ct[ie+Ee-1],Bt=ct[ie+Ee]}}while((ge=ft[ge&Tt])>Ce&&--le!=0);return Ee<=K.lookahead?Ee:K.lookahead}function Ie(K){var ge,Te,ce,le,ie,Ee,Be,Ce,ct,Tt,ft=K.w_size;do{if(le=K.window_size-K.lookahead-K.strstart,K.strstart>=ft+(ft-L)){for(a.arraySet(K.window,K.window,ft,ft,0),K.match_start-=ft,K.strstart-=ft,K.block_start-=ft,ge=Te=K.hash_size;ce=K.head[--ge],K.head[ge]=ft<=ce?ce-ft:0,--Te;);for(ge=Te=ft;ce=K.prev[--ge],K.prev[ge]=ft<=ce?ce-ft:0,--Te;);le+=ft}if(K.strm.avail_in===0)break;if(Ee=K.strm,Be=K.window,Ce=K.strstart+K.lookahead,ct=le,Tt=void 0,Tt=Ee.avail_in,ct<Tt&&(Tt=ct),Te=Tt===0?0:(Ee.avail_in-=Tt,a.arraySet(Be,Ee.input,Ee.next_in,Tt,Ce),Ee.state.wrap===1?Ee.adler=l(Ee.adler,Be,Tt,Ce):Ee.state.wrap===2&&(Ee.adler=c(Ee.adler,Be,Tt,Ce)),Ee.next_in+=Tt,Ee.total_in+=Tt,Tt),K.lookahead+=Te,K.lookahead+K.insert>=I)for(ie=K.strstart-K.insert,K.ins_h=K.window[ie],K.ins_h=(K.ins_h<<K.hash_shift^K.window[ie+1])&K.hash_mask;K.insert&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[ie+I-1])&K.hash_mask,K.prev[ie&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=ie,ie++,K.insert--,!(K.lookahead+K.insert<I)););}while(K.lookahead<L&&K.strm.avail_in!==0)}function je(K,ge){for(var Te,ce;;){if(K.lookahead<L){if(Ie(K),K.lookahead<L&&ge===d)return F;if(K.lookahead===0)break}if(Te=0,K.lookahead>=I&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,Te=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),Te!==0&&K.strstart-Te<=K.w_size-L&&(K.match_length=oe(K,Te)),K.match_length>=I)if(ce=o._tr_tally(K,K.strstart-K.match_start,K.match_length-I),K.lookahead-=K.match_length,K.match_length<=K.max_lazy_match&&K.lookahead>=I){for(K.match_length--;K.strstart++,K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,Te=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart,--K.match_length!=0;);K.strstart++}else K.strstart+=K.match_length,K.match_length=0,K.ins_h=K.window[K.strstart],K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+1])&K.hash_mask;else ce=o._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++;if(ce&&(ee(K,!1),K.strm.avail_out===0))return F}return K.insert=K.strstart<I-1?K.strstart:I-1,ge===h?(ee(K,!0),K.strm.avail_out===0?U:G):K.last_lit&&(ee(K,!1),K.strm.avail_out===0)?F:J}function Me(K,ge){for(var Te,ce,le;;){if(K.lookahead<L){if(Ie(K),K.lookahead<L&&ge===d)return F;if(K.lookahead===0)break}if(Te=0,K.lookahead>=I&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,Te=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),K.prev_length=K.match_length,K.prev_match=K.match_start,K.match_length=I-1,Te!==0&&K.prev_length<K.max_lazy_match&&K.strstart-Te<=K.w_size-L&&(K.match_length=oe(K,Te),K.match_length<=5&&(K.strategy===1||K.match_length===I&&4096<K.strstart-K.match_start)&&(K.match_length=I-1)),K.prev_length>=I&&K.match_length<=K.prev_length){for(le=K.strstart+K.lookahead-I,ce=o._tr_tally(K,K.strstart-1-K.prev_match,K.prev_length-I),K.lookahead-=K.prev_length-1,K.prev_length-=2;++K.strstart<=le&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,Te=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),--K.prev_length!=0;);if(K.match_available=0,K.match_length=I-1,K.strstart++,ce&&(ee(K,!1),K.strm.avail_out===0))return F}else if(K.match_available){if((ce=o._tr_tally(K,0,K.window[K.strstart-1]))&&ee(K,!1),K.strstart++,K.lookahead--,K.strm.avail_out===0)return F}else K.match_available=1,K.strstart++,K.lookahead--}return K.match_available&&(ce=o._tr_tally(K,0,K.window[K.strstart-1]),K.match_available=0),K.insert=K.strstart<I-1?K.strstart:I-1,ge===h?(ee(K,!0),K.strm.avail_out===0?U:G):K.last_lit&&(ee(K,!1),K.strm.avail_out===0)?F:J}function Se(K,ge,Te,ce,le){this.good_length=K,this.max_lazy=ge,this.nice_length=Te,this.max_chain=ce,this.func=le}function qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*R),this.dyn_dtree=new a.Buf16(2*(2*k+1)),this.bl_tree=new a.Buf16(2*(2*A+1)),W(this.dyn_ltree),W(this.dyn_dtree),W(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(N+1),this.heap=new a.Buf16(2*C+1),W(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),W(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(K){var ge;return K&&K.state?(K.total_in=K.total_out=0,K.data_type=x,(ge=K.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?P:V,K.adler=ge.wrap===2?0:1,ge.last_flush=d,o._tr_init(ge),m):$(K,y)}function We(K){var ge=Qe(K);return ge===m&&function(Te){Te.window_size=2*Te.w_size,W(Te.head),Te.max_lazy_match=s[Te.level].max_lazy,Te.good_match=s[Te.level].good_length,Te.nice_match=s[Te.level].nice_length,Te.max_chain_length=s[Te.level].max_chain,Te.strstart=0,Te.block_start=0,Te.lookahead=0,Te.insert=0,Te.match_length=Te.prev_length=I-1,Te.match_available=0,Te.ins_h=0}(K.state),ge}function Re(K,ge,Te,ce,le,ie){if(!K)return y;var Ee=1;if(ge===b&&(ge=6),ce<0?(Ee=0,ce=-ce):15<ce&&(Ee=2,ce-=16),le<1||S<le||Te!==w||ce<8||15<ce||ge<0||9<ge||ie<0||v<ie)return $(K,y);ce===8&&(ce=9);var Be=new qe;return(K.state=Be).strm=K,Be.wrap=Ee,Be.gzhead=null,Be.w_bits=ce,Be.w_size=1<<Be.w_bits,Be.w_mask=Be.w_size-1,Be.hash_bits=le+7,Be.hash_size=1<<Be.hash_bits,Be.hash_mask=Be.hash_size-1,Be.hash_shift=~~((Be.hash_bits+I-1)/I),Be.window=new a.Buf8(2*Be.w_size),Be.head=new a.Buf16(Be.hash_size),Be.prev=new a.Buf16(Be.w_size),Be.lit_bufsize=1<<le+6,Be.pending_buf_size=4*Be.lit_bufsize,Be.pending_buf=new a.Buf8(Be.pending_buf_size),Be.d_buf=1*Be.lit_bufsize,Be.l_buf=3*Be.lit_bufsize,Be.level=ge,Be.strategy=ie,Be.method=Te,We(K)}s=[new Se(0,0,0,0,function(K,ge){var Te=65535;for(Te>K.pending_buf_size-5&&(Te=K.pending_buf_size-5);;){if(K.lookahead<=1){if(Ie(K),K.lookahead===0&&ge===d)return F;if(K.lookahead===0)break}K.strstart+=K.lookahead,K.lookahead=0;var ce=K.block_start+Te;if((K.strstart===0||K.strstart>=ce)&&(K.lookahead=K.strstart-ce,K.strstart=ce,ee(K,!1),K.strm.avail_out===0)||K.strstart-K.block_start>=K.w_size-L&&(ee(K,!1),K.strm.avail_out===0))return F}return K.insert=0,ge===h?(ee(K,!0),K.strm.avail_out===0?U:G):(K.strstart>K.block_start&&(ee(K,!1),K.strm.avail_out),F)}),new Se(4,4,8,4,je),new Se(4,5,16,8,je),new Se(4,6,32,32,je),new Se(4,4,16,16,Me),new Se(8,16,32,32,Me),new Se(8,16,128,128,Me),new Se(8,32,128,256,Me),new Se(32,128,258,1024,Me),new Se(32,258,258,4096,Me)],i.deflateInit=function(K,ge){return Re(K,ge,w,15,8,0)},i.deflateInit2=Re,i.deflateReset=We,i.deflateResetKeep=Qe,i.deflateSetHeader=function(K,ge){return K&&K.state?K.state.wrap!==2?y:(K.state.gzhead=ge,m):y},i.deflate=function(K,ge){var Te,ce,le,ie;if(!K||!K.state||5<ge||ge<0)return K?$(K,y):y;if(ce=K.state,!K.output||!K.input&&K.avail_in!==0||ce.status===666&&ge!==h)return $(K,K.avail_out===0?-5:y);if(ce.strm=K,Te=ce.last_flush,ce.last_flush=ge,ce.status===P)if(ce.wrap===2)K.adler=0,re(ce,31),re(ce,139),re(ce,8),ce.gzhead?(re(ce,(ce.gzhead.text?1:0)+(ce.gzhead.hcrc?2:0)+(ce.gzhead.extra?4:0)+(ce.gzhead.name?8:0)+(ce.gzhead.comment?16:0)),re(ce,255&ce.gzhead.time),re(ce,ce.gzhead.time>>8&255),re(ce,ce.gzhead.time>>16&255),re(ce,ce.gzhead.time>>24&255),re(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),re(ce,255&ce.gzhead.os),ce.gzhead.extra&&ce.gzhead.extra.length&&(re(ce,255&ce.gzhead.extra.length),re(ce,ce.gzhead.extra.length>>8&255)),ce.gzhead.hcrc&&(K.adler=c(K.adler,ce.pending_buf,ce.pending,0)),ce.gzindex=0,ce.status=69):(re(ce,0),re(ce,0),re(ce,0),re(ce,0),re(ce,0),re(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),re(ce,3),ce.status=V);else{var Ee=w+(ce.w_bits-8<<4)<<8;Ee|=(2<=ce.strategy||ce.level<2?0:ce.level<6?1:ce.level===6?2:3)<<6,ce.strstart!==0&&(Ee|=32),Ee+=31-Ee%31,ce.status=V,de(ce,Ee),ce.strstart!==0&&(de(ce,K.adler>>>16),de(ce,65535&K.adler)),K.adler=1}if(ce.status===69)if(ce.gzhead.extra){for(le=ce.pending;ce.gzindex<(65535&ce.gzhead.extra.length)&&(ce.pending!==ce.pending_buf_size||(ce.gzhead.hcrc&&ce.pending>le&&(K.adler=c(K.adler,ce.pending_buf,ce.pending-le,le)),te(K),le=ce.pending,ce.pending!==ce.pending_buf_size));)re(ce,255&ce.gzhead.extra[ce.gzindex]),ce.gzindex++;ce.gzhead.hcrc&&ce.pending>le&&(K.adler=c(K.adler,ce.pending_buf,ce.pending-le,le)),ce.gzindex===ce.gzhead.extra.length&&(ce.gzindex=0,ce.status=73)}else ce.status=73;if(ce.status===73)if(ce.gzhead.name){le=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>le&&(K.adler=c(K.adler,ce.pending_buf,ce.pending-le,le)),te(K),le=ce.pending,ce.pending===ce.pending_buf_size)){ie=1;break}ie=ce.gzindex<ce.gzhead.name.length?255&ce.gzhead.name.charCodeAt(ce.gzindex++):0,re(ce,ie)}while(ie!==0);ce.gzhead.hcrc&&ce.pending>le&&(K.adler=c(K.adler,ce.pending_buf,ce.pending-le,le)),ie===0&&(ce.gzindex=0,ce.status=91)}else ce.status=91;if(ce.status===91)if(ce.gzhead.comment){le=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>le&&(K.adler=c(K.adler,ce.pending_buf,ce.pending-le,le)),te(K),le=ce.pending,ce.pending===ce.pending_buf_size)){ie=1;break}ie=ce.gzindex<ce.gzhead.comment.length?255&ce.gzhead.comment.charCodeAt(ce.gzindex++):0,re(ce,ie)}while(ie!==0);ce.gzhead.hcrc&&ce.pending>le&&(K.adler=c(K.adler,ce.pending_buf,ce.pending-le,le)),ie===0&&(ce.status=103)}else ce.status=103;if(ce.status===103&&(ce.gzhead.hcrc?(ce.pending+2>ce.pending_buf_size&&te(K),ce.pending+2<=ce.pending_buf_size&&(re(ce,255&K.adler),re(ce,K.adler>>8&255),K.adler=0,ce.status=V)):ce.status=V),ce.pending!==0){if(te(K),K.avail_out===0)return ce.last_flush=-1,m}else if(K.avail_in===0&&ne(ge)<=ne(Te)&&ge!==h)return $(K,-5);if(ce.status===666&&K.avail_in!==0)return $(K,-5);if(K.avail_in!==0||ce.lookahead!==0||ge!==d&&ce.status!==666){var Be=ce.strategy===2?function(Ce,ct){for(var Tt;;){if(Ce.lookahead===0&&(Ie(Ce),Ce.lookahead===0)){if(ct===d)return F;break}if(Ce.match_length=0,Tt=o._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++,Tt&&(ee(Ce,!1),Ce.strm.avail_out===0))return F}return Ce.insert=0,ct===h?(ee(Ce,!0),Ce.strm.avail_out===0?U:G):Ce.last_lit&&(ee(Ce,!1),Ce.strm.avail_out===0)?F:J}(ce,ge):ce.strategy===3?function(Ce,ct){for(var Tt,ft,Pt,Ut,Bt=Ce.window;;){if(Ce.lookahead<=O){if(Ie(Ce),Ce.lookahead<=O&&ct===d)return F;if(Ce.lookahead===0)break}if(Ce.match_length=0,Ce.lookahead>=I&&0<Ce.strstart&&(ft=Bt[Pt=Ce.strstart-1])===Bt[++Pt]&&ft===Bt[++Pt]&&ft===Bt[++Pt]){Ut=Ce.strstart+O;do;while(ft===Bt[++Pt]&&ft===Bt[++Pt]&&ft===Bt[++Pt]&&ft===Bt[++Pt]&&ft===Bt[++Pt]&&ft===Bt[++Pt]&&ft===Bt[++Pt]&&ft===Bt[++Pt]&&Pt<Ut);Ce.match_length=O-(Ut-Pt),Ce.match_length>Ce.lookahead&&(Ce.match_length=Ce.lookahead)}if(Ce.match_length>=I?(Tt=o._tr_tally(Ce,1,Ce.match_length-I),Ce.lookahead-=Ce.match_length,Ce.strstart+=Ce.match_length,Ce.match_length=0):(Tt=o._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++),Tt&&(ee(Ce,!1),Ce.strm.avail_out===0))return F}return Ce.insert=0,ct===h?(ee(Ce,!0),Ce.strm.avail_out===0?U:G):Ce.last_lit&&(ee(Ce,!1),Ce.strm.avail_out===0)?F:J}(ce,ge):s[ce.level].func(ce,ge);if(Be!==U&&Be!==G||(ce.status=666),Be===F||Be===U)return K.avail_out===0&&(ce.last_flush=-1),m;if(Be===J&&(ge===1?o._tr_align(ce):ge!==5&&(o._tr_stored_block(ce,0,0,!1),ge===3&&(W(ce.head),ce.lookahead===0&&(ce.strstart=0,ce.block_start=0,ce.insert=0))),te(K),K.avail_out===0))return ce.last_flush=-1,m}return ge!==h?m:ce.wrap<=0?1:(ce.wrap===2?(re(ce,255&K.adler),re(ce,K.adler>>8&255),re(ce,K.adler>>16&255),re(ce,K.adler>>24&255),re(ce,255&K.total_in),re(ce,K.total_in>>8&255),re(ce,K.total_in>>16&255),re(ce,K.total_in>>24&255)):(de(ce,K.adler>>>16),de(ce,65535&K.adler)),te(K),0<ce.wrap&&(ce.wrap=-ce.wrap),ce.pending!==0?m:1)},i.deflateEnd=function(K){var ge;return K&&K.state?(ge=K.state.status)!==P&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==V&&ge!==666?$(K,y):(K.state=null,ge===V?$(K,-3):m):y},i.deflateSetDictionary=function(K,ge){var Te,ce,le,ie,Ee,Be,Ce,ct,Tt=ge.length;if(!K||!K.state||(ie=(Te=K.state).wrap)===2||ie===1&&Te.status!==P||Te.lookahead)return y;for(ie===1&&(K.adler=l(K.adler,ge,Tt,0)),Te.wrap=0,Tt>=Te.w_size&&(ie===0&&(W(Te.head),Te.strstart=0,Te.block_start=0,Te.insert=0),ct=new a.Buf8(Te.w_size),a.arraySet(ct,ge,Tt-Te.w_size,Te.w_size,0),ge=ct,Tt=Te.w_size),Ee=K.avail_in,Be=K.next_in,Ce=K.input,K.avail_in=Tt,K.next_in=0,K.input=ge,Ie(Te);Te.lookahead>=I;){for(ce=Te.strstart,le=Te.lookahead-(I-1);Te.ins_h=(Te.ins_h<<Te.hash_shift^Te.window[ce+I-1])&Te.hash_mask,Te.prev[ce&Te.w_mask]=Te.head[Te.ins_h],Te.head[Te.ins_h]=ce,ce++,--le;);Te.strstart=ce,Te.lookahead=I-1,Ie(Te)}return Te.strstart+=Te.lookahead,Te.block_start=Te.strstart,Te.insert=Te.lookahead,Te.lookahead=0,Te.match_length=Te.prev_length=I-1,Te.match_available=0,K.next_in=Be,K.input=Ce,K.avail_in=Ee,Te.wrap=ie,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,a){var o,l,c,u,d,h,m,y,b,v,x,w,S,C,k,A,R,N,I,O,L,P,V,F,J;o=s.state,l=s.next_in,F=s.input,c=l+(s.avail_in-5),u=s.next_out,J=s.output,d=u-(a-s.avail_out),h=u+(s.avail_out-257),m=o.dmax,y=o.wsize,b=o.whave,v=o.wnext,x=o.window,w=o.hold,S=o.bits,C=o.lencode,k=o.distcode,A=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;e:do{S<15&&(w+=F[l++]<<S,S+=8,w+=F[l++]<<S,S+=8),N=C[w&A];t:for(;;){if(w>>>=I=N>>>24,S-=I,(I=N>>>16&255)===0)J[u++]=65535&N;else{if(!(16&I)){if((64&I)==0){N=C[(65535&N)+(w&(1<<I)-1)];continue t}if(32&I){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}O=65535&N,(I&=15)&&(S<I&&(w+=F[l++]<<S,S+=8),O+=w&(1<<I)-1,w>>>=I,S-=I),S<15&&(w+=F[l++]<<S,S+=8,w+=F[l++]<<S,S+=8),N=k[w&R];n:for(;;){if(w>>>=I=N>>>24,S-=I,!(16&(I=N>>>16&255))){if((64&I)==0){N=k[(65535&N)+(w&(1<<I)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(L=65535&N,S<(I&=15)&&(w+=F[l++]<<S,(S+=8)<I&&(w+=F[l++]<<S,S+=8)),m<(L+=w&(1<<I)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=I,S-=I,(I=u-d)<L){if(b<(I=L-I)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(V=x,(P=0)===v){if(P+=y-I,I<O){for(O-=I;J[u++]=x[P++],--I;);P=u-L,V=J}}else if(v<I){if(P+=y+v-I,(I-=v)<O){for(O-=I;J[u++]=x[P++],--I;);if(P=0,v<O){for(O-=I=v;J[u++]=x[P++],--I;);P=u-L,V=J}}}else if(P+=v-I,I<O){for(O-=I;J[u++]=x[P++],--I;);P=u-L,V=J}for(;2<O;)J[u++]=V[P++],J[u++]=V[P++],J[u++]=V[P++],O-=3;O&&(J[u++]=V[P++],1<O&&(J[u++]=V[P++]))}else{for(P=u-L;J[u++]=J[P++],J[u++]=J[P++],J[u++]=J[P++],2<(O-=3););O&&(J[u++]=J[P++],1<O&&(J[u++]=J[P++]))}break}}break}}while(l<c&&u<h);l-=O=S>>3,w&=(1<<(S-=O<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<h?h-u+257:257-(u-h),o.hold=w,o.bits=S}},{}],49:[function(n,r,i){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,d=2,h=0,m=-2,y=1,b=852,v=592;function x(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(P){var V;return P&&P.state?(V=P.state,P.total_in=P.total_out=V.total=0,P.msg="",V.wrap&&(P.adler=1&V.wrap),V.mode=y,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new s.Buf32(b),V.distcode=V.distdyn=new s.Buf32(v),V.sane=1,V.back=-1,h):m}function C(P){var V;return P&&P.state?((V=P.state).wsize=0,V.whave=0,V.wnext=0,S(P)):m}function k(P,V){var F,J;return P&&P.state?(J=P.state,V<0?(F=0,V=-V):(F=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?m:(J.window!==null&&J.wbits!==V&&(J.window=null),J.wrap=F,J.wbits=V,C(P))):m}function A(P,V){var F,J;return P?(J=new w,(P.state=J).window=null,(F=k(P,V))!==h&&(P.state=null),F):m}var R,N,I=!0;function O(P){if(I){var V;for(R=new s.Buf32(512),N=new s.Buf32(32),V=0;V<144;)P.lens[V++]=8;for(;V<256;)P.lens[V++]=9;for(;V<280;)P.lens[V++]=7;for(;V<288;)P.lens[V++]=8;for(c(u,P.lens,0,288,R,0,P.work,{bits:9}),V=0;V<32;)P.lens[V++]=5;c(d,P.lens,0,32,N,0,P.work,{bits:5}),I=!1}P.lencode=R,P.lenbits=9,P.distcode=N,P.distbits=5}function L(P,V,F,J){var U,G=P.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new s.Buf8(G.wsize)),J>=G.wsize?(s.arraySet(G.window,V,F-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(J<(U=G.wsize-G.wnext)&&(U=J),s.arraySet(G.window,V,F-J,U,G.wnext),(J-=U)?(s.arraySet(G.window,V,F-J,J,0),G.wnext=J,G.whave=G.wsize):(G.wnext+=U,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=U))),0}i.inflateReset=C,i.inflateReset2=k,i.inflateResetKeep=S,i.inflateInit=function(P){return A(P,15)},i.inflateInit2=A,i.inflate=function(P,V){var F,J,U,G,$,ne,W,te,ee,re,de,oe,Ie,je,Me,Se,qe,Qe,We,Re,K,ge,Te,ce,le=0,ie=new s.Buf8(4),Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return m;(F=P.state).mode===12&&(F.mode=13),$=P.next_out,U=P.output,W=P.avail_out,G=P.next_in,J=P.input,ne=P.avail_in,te=F.hold,ee=F.bits,re=ne,de=W,ge=h;e:for(;;)switch(F.mode){case y:if(F.wrap===0){F.mode=13;break}for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(2&F.wrap&&te===35615){ie[F.check=0]=255&te,ie[1]=te>>>8&255,F.check=o(F.check,ie,2,0),ee=te=0,F.mode=2;break}if(F.flags=0,F.head&&(F.head.done=!1),!(1&F.wrap)||(((255&te)<<8)+(te>>8))%31){P.msg="incorrect header check",F.mode=30;break}if((15&te)!=8){P.msg="unknown compression method",F.mode=30;break}if(ee-=4,K=8+(15&(te>>>=4)),F.wbits===0)F.wbits=K;else if(K>F.wbits){P.msg="invalid window size",F.mode=30;break}F.dmax=1<<K,P.adler=F.check=1,F.mode=512&te?10:12,ee=te=0;break;case 2:for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(F.flags=te,(255&F.flags)!=8){P.msg="unknown compression method",F.mode=30;break}if(57344&F.flags){P.msg="unknown header flags set",F.mode=30;break}F.head&&(F.head.text=te>>8&1),512&F.flags&&(ie[0]=255&te,ie[1]=te>>>8&255,F.check=o(F.check,ie,2,0)),ee=te=0,F.mode=3;case 3:for(;ee<32;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.head&&(F.head.time=te),512&F.flags&&(ie[0]=255&te,ie[1]=te>>>8&255,ie[2]=te>>>16&255,ie[3]=te>>>24&255,F.check=o(F.check,ie,4,0)),ee=te=0,F.mode=4;case 4:for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.head&&(F.head.xflags=255&te,F.head.os=te>>8),512&F.flags&&(ie[0]=255&te,ie[1]=te>>>8&255,F.check=o(F.check,ie,2,0)),ee=te=0,F.mode=5;case 5:if(1024&F.flags){for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.length=te,F.head&&(F.head.extra_len=te),512&F.flags&&(ie[0]=255&te,ie[1]=te>>>8&255,F.check=o(F.check,ie,2,0)),ee=te=0}else F.head&&(F.head.extra=null);F.mode=6;case 6:if(1024&F.flags&&(ne<(oe=F.length)&&(oe=ne),oe&&(F.head&&(K=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),s.arraySet(F.head.extra,J,G,oe,K)),512&F.flags&&(F.check=o(F.check,J,oe,G)),ne-=oe,G+=oe,F.length-=oe),F.length))break e;F.length=0,F.mode=7;case 7:if(2048&F.flags){if(ne===0)break e;for(oe=0;K=J[G+oe++],F.head&&K&&F.length<65536&&(F.head.name+=String.fromCharCode(K)),K&&oe<ne;);if(512&F.flags&&(F.check=o(F.check,J,oe,G)),ne-=oe,G+=oe,K)break e}else F.head&&(F.head.name=null);F.length=0,F.mode=8;case 8:if(4096&F.flags){if(ne===0)break e;for(oe=0;K=J[G+oe++],F.head&&K&&F.length<65536&&(F.head.comment+=String.fromCharCode(K)),K&&oe<ne;);if(512&F.flags&&(F.check=o(F.check,J,oe,G)),ne-=oe,G+=oe,K)break e}else F.head&&(F.head.comment=null);F.mode=9;case 9:if(512&F.flags){for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(te!==(65535&F.check)){P.msg="header crc mismatch",F.mode=30;break}ee=te=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),P.adler=F.check=0,F.mode=12;break;case 10:for(;ee<32;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}P.adler=F.check=x(te),ee=te=0,F.mode=11;case 11:if(F.havedict===0)return P.next_out=$,P.avail_out=W,P.next_in=G,P.avail_in=ne,F.hold=te,F.bits=ee,2;P.adler=F.check=1,F.mode=12;case 12:if(V===5||V===6)break e;case 13:if(F.last){te>>>=7&ee,ee-=7&ee,F.mode=27;break}for(;ee<3;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}switch(F.last=1&te,ee-=1,3&(te>>>=1)){case 0:F.mode=14;break;case 1:if(O(F),F.mode=20,V!==6)break;te>>>=2,ee-=2;break e;case 2:F.mode=17;break;case 3:P.msg="invalid block type",F.mode=30}te>>>=2,ee-=2;break;case 14:for(te>>>=7&ee,ee-=7&ee;ee<32;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if((65535&te)!=(te>>>16^65535)){P.msg="invalid stored block lengths",F.mode=30;break}if(F.length=65535&te,ee=te=0,F.mode=15,V===6)break e;case 15:F.mode=16;case 16:if(oe=F.length){if(ne<oe&&(oe=ne),W<oe&&(oe=W),oe===0)break e;s.arraySet(U,J,G,oe,$),ne-=oe,G+=oe,W-=oe,$+=oe,F.length-=oe;break}F.mode=12;break;case 17:for(;ee<14;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(F.nlen=257+(31&te),te>>>=5,ee-=5,F.ndist=1+(31&te),te>>>=5,ee-=5,F.ncode=4+(15&te),te>>>=4,ee-=4,286<F.nlen||30<F.ndist){P.msg="too many length or distance symbols",F.mode=30;break}F.have=0,F.mode=18;case 18:for(;F.have<F.ncode;){for(;ee<3;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.lens[Ee[F.have++]]=7&te,te>>>=3,ee-=3}for(;F.have<19;)F.lens[Ee[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,Te={bits:F.lenbits},ge=c(0,F.lens,0,19,F.lencode,0,F.work,Te),F.lenbits=Te.bits,ge){P.msg="invalid code lengths set",F.mode=30;break}F.have=0,F.mode=19;case 19:for(;F.have<F.nlen+F.ndist;){for(;Se=(le=F.lencode[te&(1<<F.lenbits)-1])>>>16&255,qe=65535&le,!((Me=le>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(qe<16)te>>>=Me,ee-=Me,F.lens[F.have++]=qe;else{if(qe===16){for(ce=Me+2;ee<ce;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(te>>>=Me,ee-=Me,F.have===0){P.msg="invalid bit length repeat",F.mode=30;break}K=F.lens[F.have-1],oe=3+(3&te),te>>>=2,ee-=2}else if(qe===17){for(ce=Me+3;ee<ce;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}ee-=Me,K=0,oe=3+(7&(te>>>=Me)),te>>>=3,ee-=3}else{for(ce=Me+7;ee<ce;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}ee-=Me,K=0,oe=11+(127&(te>>>=Me)),te>>>=7,ee-=7}if(F.have+oe>F.nlen+F.ndist){P.msg="invalid bit length repeat",F.mode=30;break}for(;oe--;)F.lens[F.have++]=K}}if(F.mode===30)break;if(F.lens[256]===0){P.msg="invalid code -- missing end-of-block",F.mode=30;break}if(F.lenbits=9,Te={bits:F.lenbits},ge=c(u,F.lens,0,F.nlen,F.lencode,0,F.work,Te),F.lenbits=Te.bits,ge){P.msg="invalid literal/lengths set",F.mode=30;break}if(F.distbits=6,F.distcode=F.distdyn,Te={bits:F.distbits},ge=c(d,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,Te),F.distbits=Te.bits,ge){P.msg="invalid distances set",F.mode=30;break}if(F.mode=20,V===6)break e;case 20:F.mode=21;case 21:if(6<=ne&&258<=W){P.next_out=$,P.avail_out=W,P.next_in=G,P.avail_in=ne,F.hold=te,F.bits=ee,l(P,de),$=P.next_out,U=P.output,W=P.avail_out,G=P.next_in,J=P.input,ne=P.avail_in,te=F.hold,ee=F.bits,F.mode===12&&(F.back=-1);break}for(F.back=0;Se=(le=F.lencode[te&(1<<F.lenbits)-1])>>>16&255,qe=65535&le,!((Me=le>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(Se&&(240&Se)==0){for(Qe=Me,We=Se,Re=qe;Se=(le=F.lencode[Re+((te&(1<<Qe+We)-1)>>Qe)])>>>16&255,qe=65535&le,!(Qe+(Me=le>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}te>>>=Qe,ee-=Qe,F.back+=Qe}if(te>>>=Me,ee-=Me,F.back+=Me,F.length=qe,Se===0){F.mode=26;break}if(32&Se){F.back=-1,F.mode=12;break}if(64&Se){P.msg="invalid literal/length code",F.mode=30;break}F.extra=15&Se,F.mode=22;case 22:if(F.extra){for(ce=F.extra;ee<ce;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.length+=te&(1<<F.extra)-1,te>>>=F.extra,ee-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=23;case 23:for(;Se=(le=F.distcode[te&(1<<F.distbits)-1])>>>16&255,qe=65535&le,!((Me=le>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if((240&Se)==0){for(Qe=Me,We=Se,Re=qe;Se=(le=F.distcode[Re+((te&(1<<Qe+We)-1)>>Qe)])>>>16&255,qe=65535&le,!(Qe+(Me=le>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}te>>>=Qe,ee-=Qe,F.back+=Qe}if(te>>>=Me,ee-=Me,F.back+=Me,64&Se){P.msg="invalid distance code",F.mode=30;break}F.offset=qe,F.extra=15&Se,F.mode=24;case 24:if(F.extra){for(ce=F.extra;ee<ce;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.offset+=te&(1<<F.extra)-1,te>>>=F.extra,ee-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){P.msg="invalid distance too far back",F.mode=30;break}F.mode=25;case 25:if(W===0)break e;if(oe=de-W,F.offset>oe){if((oe=F.offset-oe)>F.whave&&F.sane){P.msg="invalid distance too far back",F.mode=30;break}Ie=oe>F.wnext?(oe-=F.wnext,F.wsize-oe):F.wnext-oe,oe>F.length&&(oe=F.length),je=F.window}else je=U,Ie=$-F.offset,oe=F.length;for(W<oe&&(oe=W),W-=oe,F.length-=oe;U[$++]=je[Ie++],--oe;);F.length===0&&(F.mode=21);break;case 26:if(W===0)break e;U[$++]=F.length,W--,F.mode=21;break;case 27:if(F.wrap){for(;ee<32;){if(ne===0)break e;ne--,te|=J[G++]<<ee,ee+=8}if(de-=W,P.total_out+=de,F.total+=de,de&&(P.adler=F.check=F.flags?o(F.check,U,de,$-de):a(F.check,U,de,$-de)),de=W,(F.flags?te:x(te))!==F.check){P.msg="incorrect data check",F.mode=30;break}ee=te=0}F.mode=28;case 28:if(F.wrap&&F.flags){for(;ee<32;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(te!==(4294967295&F.total)){P.msg="incorrect length check",F.mode=30;break}ee=te=0}F.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return m}return P.next_out=$,P.avail_out=W,P.next_in=G,P.avail_in=ne,F.hold=te,F.bits=ee,(F.wsize||de!==P.avail_out&&F.mode<30&&(F.mode<27||V!==4))&&L(P,P.output,P.next_out,de-P.avail_out)?(F.mode=31,-4):(re-=P.avail_in,de-=P.avail_out,P.total_in+=re,P.total_out+=de,F.total+=de,F.wrap&&de&&(P.adler=F.check=F.flags?o(F.check,U,de,P.next_out-de):a(F.check,U,de,P.next_out-de)),P.data_type=F.bits+(F.last?64:0)+(F.mode===12?128:0)+(F.mode===20||F.mode===15?256:0),(re==0&&de===0||V===4)&&ge===h&&(ge=-5),ge)},i.inflateEnd=function(P){if(!P||!P.state)return m;var V=P.state;return V.window&&(V.window=null),P.state=null,h},i.inflateGetHeader=function(P,V){var F;return P&&P.state?(2&(F=P.state).wrap)==0?m:((F.head=V).done=!1,h):m},i.inflateSetDictionary=function(P,V){var F,J=V.length;return P&&P.state?(F=P.state).wrap!==0&&F.mode!==11?m:F.mode===11&&a(1,V,J,0)!==F.check?-3:L(P,V,J,J)?(F.mode=31,-4):(F.havedict=1,h):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,d,h,m,y,b,v,x){var w,S,C,k,A,R,N,I,O,L=x.bits,P=0,V=0,F=0,J=0,U=0,G=0,$=0,ne=0,W=0,te=0,ee=null,re=0,de=new s.Buf16(16),oe=new s.Buf16(16),Ie=null,je=0;for(P=0;P<=15;P++)de[P]=0;for(V=0;V<m;V++)de[d[h+V]]++;for(U=L,J=15;1<=J&&de[J]===0;J--);if(J<U&&(U=J),J===0)return y[b++]=20971520,y[b++]=20971520,x.bits=1,0;for(F=1;F<J&&de[F]===0;F++);for(U<F&&(U=F),P=ne=1;P<=15;P++)if(ne<<=1,(ne-=de[P])<0)return-1;if(0<ne&&(u===0||J!==1))return-1;for(oe[1]=0,P=1;P<15;P++)oe[P+1]=oe[P]+de[P];for(V=0;V<m;V++)d[h+V]!==0&&(v[oe[d[h+V]]++]=V);if(R=u===0?(ee=Ie=v,19):u===1?(ee=a,re-=257,Ie=o,je-=257,256):(ee=l,Ie=c,-1),P=F,A=b,$=V=te=0,C=-1,k=(W=1<<(G=U))-1,u===1&&852<W||u===2&&592<W)return 1;for(;;){for(N=P-$,O=v[V]<R?(I=0,v[V]):v[V]>R?(I=Ie[je+v[V]],ee[re+v[V]]):(I=96,0),w=1<<P-$,F=S=1<<G;y[A+(te>>$)+(S-=w)]=N<<24|I<<16|O|0,S!==0;);for(w=1<<P-1;te&w;)w>>=1;if(w!==0?(te&=w-1,te+=w):te=0,V++,--de[P]==0){if(P===J)break;P=d[h+v[V]]}if(U<P&&(te&k)!==C){for($===0&&($=U),A+=F,ne=1<<(G=P-$);G+$<J&&!((ne-=de[G+$])<=0);)G++,ne<<=1;if(W+=1<<G,u===1&&852<W||u===2&&592<W)return 1;y[C=te&k]=U<<24|G<<16|A-b|0}}return te!==0&&(y[A+te]=P-$<<24|64<<16|0),x.bits=U,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),a=0,o=1;function l(le){for(var ie=le.length;0<=--ie;)le[ie]=0}var c=0,u=29,d=256,h=d+1+u,m=30,y=19,b=2*h+1,v=15,x=16,w=7,S=256,C=16,k=17,A=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(2*(h+2));l(L);var P=new Array(2*m);l(P);var V=new Array(512);l(V);var F=new Array(256);l(F);var J=new Array(u);l(J);var U,G,$,ne=new Array(m);function W(le,ie,Ee,Be,Ce){this.static_tree=le,this.extra_bits=ie,this.extra_base=Ee,this.elems=Be,this.max_length=Ce,this.has_stree=le&&le.length}function te(le,ie){this.dyn_tree=le,this.max_code=0,this.stat_desc=ie}function ee(le){return le<256?V[le]:V[256+(le>>>7)]}function re(le,ie){le.pending_buf[le.pending++]=255&ie,le.pending_buf[le.pending++]=ie>>>8&255}function de(le,ie,Ee){le.bi_valid>x-Ee?(le.bi_buf|=ie<<le.bi_valid&65535,re(le,le.bi_buf),le.bi_buf=ie>>x-le.bi_valid,le.bi_valid+=Ee-x):(le.bi_buf|=ie<<le.bi_valid&65535,le.bi_valid+=Ee)}function oe(le,ie,Ee){de(le,Ee[2*ie],Ee[2*ie+1])}function Ie(le,ie){for(var Ee=0;Ee|=1&le,le>>>=1,Ee<<=1,0<--ie;);return Ee>>>1}function je(le,ie,Ee){var Be,Ce,ct=new Array(v+1),Tt=0;for(Be=1;Be<=v;Be++)ct[Be]=Tt=Tt+Ee[Be-1]<<1;for(Ce=0;Ce<=ie;Ce++){var ft=le[2*Ce+1];ft!==0&&(le[2*Ce]=Ie(ct[ft]++,ft))}}function Me(le){var ie;for(ie=0;ie<h;ie++)le.dyn_ltree[2*ie]=0;for(ie=0;ie<m;ie++)le.dyn_dtree[2*ie]=0;for(ie=0;ie<y;ie++)le.bl_tree[2*ie]=0;le.dyn_ltree[2*S]=1,le.opt_len=le.static_len=0,le.last_lit=le.matches=0}function Se(le){8<le.bi_valid?re(le,le.bi_buf):0<le.bi_valid&&(le.pending_buf[le.pending++]=le.bi_buf),le.bi_buf=0,le.bi_valid=0}function qe(le,ie,Ee,Be){var Ce=2*ie,ct=2*Ee;return le[Ce]<le[ct]||le[Ce]===le[ct]&&Be[ie]<=Be[Ee]}function Qe(le,ie,Ee){for(var Be=le.heap[Ee],Ce=Ee<<1;Ce<=le.heap_len&&(Ce<le.heap_len&&qe(ie,le.heap[Ce+1],le.heap[Ce],le.depth)&&Ce++,!qe(ie,Be,le.heap[Ce],le.depth));)le.heap[Ee]=le.heap[Ce],Ee=Ce,Ce<<=1;le.heap[Ee]=Be}function We(le,ie,Ee){var Be,Ce,ct,Tt,ft=0;if(le.last_lit!==0)for(;Be=le.pending_buf[le.d_buf+2*ft]<<8|le.pending_buf[le.d_buf+2*ft+1],Ce=le.pending_buf[le.l_buf+ft],ft++,Be===0?oe(le,Ce,ie):(oe(le,(ct=F[Ce])+d+1,ie),(Tt=R[ct])!==0&&de(le,Ce-=J[ct],Tt),oe(le,ct=ee(--Be),Ee),(Tt=N[ct])!==0&&de(le,Be-=ne[ct],Tt)),ft<le.last_lit;);oe(le,S,ie)}function Re(le,ie){var Ee,Be,Ce,ct=ie.dyn_tree,Tt=ie.stat_desc.static_tree,ft=ie.stat_desc.has_stree,Pt=ie.stat_desc.elems,Ut=-1;for(le.heap_len=0,le.heap_max=b,Ee=0;Ee<Pt;Ee++)ct[2*Ee]!==0?(le.heap[++le.heap_len]=Ut=Ee,le.depth[Ee]=0):ct[2*Ee+1]=0;for(;le.heap_len<2;)ct[2*(Ce=le.heap[++le.heap_len]=Ut<2?++Ut:0)]=1,le.depth[Ce]=0,le.opt_len--,ft&&(le.static_len-=Tt[2*Ce+1]);for(ie.max_code=Ut,Ee=le.heap_len>>1;1<=Ee;Ee--)Qe(le,ct,Ee);for(Ce=Pt;Ee=le.heap[1],le.heap[1]=le.heap[le.heap_len--],Qe(le,ct,1),Be=le.heap[1],le.heap[--le.heap_max]=Ee,le.heap[--le.heap_max]=Be,ct[2*Ce]=ct[2*Ee]+ct[2*Be],le.depth[Ce]=(le.depth[Ee]>=le.depth[Be]?le.depth[Ee]:le.depth[Be])+1,ct[2*Ee+1]=ct[2*Be+1]=Ce,le.heap[1]=Ce++,Qe(le,ct,1),2<=le.heap_len;);le.heap[--le.heap_max]=le.heap[1],function(Bt,tn){var xe,D,Z,me,De,we,Ne=tn.dyn_tree,fe=tn.max_code,bt=tn.stat_desc.static_tree,ot=tn.stat_desc.has_stree,B=tn.stat_desc.extra_bits,$e=tn.stat_desc.extra_base,it=tn.stat_desc.max_length,ye=0;for(me=0;me<=v;me++)Bt.bl_count[me]=0;for(Ne[2*Bt.heap[Bt.heap_max]+1]=0,xe=Bt.heap_max+1;xe<b;xe++)it<(me=Ne[2*Ne[2*(D=Bt.heap[xe])+1]+1]+1)&&(me=it,ye++),Ne[2*D+1]=me,fe<D||(Bt.bl_count[me]++,De=0,$e<=D&&(De=B[D-$e]),we=Ne[2*D],Bt.opt_len+=we*(me+De),ot&&(Bt.static_len+=we*(bt[2*D+1]+De)));if(ye!==0){do{for(me=it-1;Bt.bl_count[me]===0;)me--;Bt.bl_count[me]--,Bt.bl_count[me+1]+=2,Bt.bl_count[it]--,ye-=2}while(0<ye);for(me=it;me!==0;me--)for(D=Bt.bl_count[me];D!==0;)fe<(Z=Bt.heap[--xe])||(Ne[2*Z+1]!==me&&(Bt.opt_len+=(me-Ne[2*Z+1])*Ne[2*Z],Ne[2*Z+1]=me),D--)}}(le,ie),je(ct,Ut,le.bl_count)}function K(le,ie,Ee){var Be,Ce,ct=-1,Tt=ie[1],ft=0,Pt=7,Ut=4;for(Tt===0&&(Pt=138,Ut=3),ie[2*(Ee+1)+1]=65535,Be=0;Be<=Ee;Be++)Ce=Tt,Tt=ie[2*(Be+1)+1],++ft<Pt&&Ce===Tt||(ft<Ut?le.bl_tree[2*Ce]+=ft:Ce!==0?(Ce!==ct&&le.bl_tree[2*Ce]++,le.bl_tree[2*C]++):ft<=10?le.bl_tree[2*k]++:le.bl_tree[2*A]++,ct=Ce,Ut=(ft=0)===Tt?(Pt=138,3):Ce===Tt?(Pt=6,3):(Pt=7,4))}function ge(le,ie,Ee){var Be,Ce,ct=-1,Tt=ie[1],ft=0,Pt=7,Ut=4;for(Tt===0&&(Pt=138,Ut=3),Be=0;Be<=Ee;Be++)if(Ce=Tt,Tt=ie[2*(Be+1)+1],!(++ft<Pt&&Ce===Tt)){if(ft<Ut)for(;oe(le,Ce,le.bl_tree),--ft!=0;);else Ce!==0?(Ce!==ct&&(oe(le,Ce,le.bl_tree),ft--),oe(le,C,le.bl_tree),de(le,ft-3,2)):ft<=10?(oe(le,k,le.bl_tree),de(le,ft-3,3)):(oe(le,A,le.bl_tree),de(le,ft-11,7));ct=Ce,Ut=(ft=0)===Tt?(Pt=138,3):Ce===Tt?(Pt=6,3):(Pt=7,4)}}l(ne);var Te=!1;function ce(le,ie,Ee,Be){de(le,(c<<1)+(Be?1:0),3),function(Ce,ct,Tt,ft){Se(Ce),re(Ce,Tt),re(Ce,~Tt),s.arraySet(Ce.pending_buf,Ce.window,ct,Tt,Ce.pending),Ce.pending+=Tt}(le,ie,Ee)}i._tr_init=function(le){Te||(function(){var ie,Ee,Be,Ce,ct,Tt=new Array(v+1);for(Ce=Be=0;Ce<u-1;Ce++)for(J[Ce]=Be,ie=0;ie<1<<R[Ce];ie++)F[Be++]=Ce;for(F[Be-1]=Ce,Ce=ct=0;Ce<16;Ce++)for(ne[Ce]=ct,ie=0;ie<1<<N[Ce];ie++)V[ct++]=Ce;for(ct>>=7;Ce<m;Ce++)for(ne[Ce]=ct<<7,ie=0;ie<1<<N[Ce]-7;ie++)V[256+ct++]=Ce;for(Ee=0;Ee<=v;Ee++)Tt[Ee]=0;for(ie=0;ie<=143;)L[2*ie+1]=8,ie++,Tt[8]++;for(;ie<=255;)L[2*ie+1]=9,ie++,Tt[9]++;for(;ie<=279;)L[2*ie+1]=7,ie++,Tt[7]++;for(;ie<=287;)L[2*ie+1]=8,ie++,Tt[8]++;for(je(L,h+1,Tt),ie=0;ie<m;ie++)P[2*ie+1]=5,P[2*ie]=Ie(ie,5);U=new W(L,R,d+1,h,v),G=new W(P,N,0,m,v),$=new W(new Array(0),I,0,y,w)}(),Te=!0),le.l_desc=new te(le.dyn_ltree,U),le.d_desc=new te(le.dyn_dtree,G),le.bl_desc=new te(le.bl_tree,$),le.bi_buf=0,le.bi_valid=0,Me(le)},i._tr_stored_block=ce,i._tr_flush_block=function(le,ie,Ee,Be){var Ce,ct,Tt=0;0<le.level?(le.strm.data_type===2&&(le.strm.data_type=function(ft){var Pt,Ut=4093624447;for(Pt=0;Pt<=31;Pt++,Ut>>>=1)if(1&Ut&&ft.dyn_ltree[2*Pt]!==0)return a;if(ft.dyn_ltree[18]!==0||ft.dyn_ltree[20]!==0||ft.dyn_ltree[26]!==0)return o;for(Pt=32;Pt<d;Pt++)if(ft.dyn_ltree[2*Pt]!==0)return o;return a}(le)),Re(le,le.l_desc),Re(le,le.d_desc),Tt=function(ft){var Pt;for(K(ft,ft.dyn_ltree,ft.l_desc.max_code),K(ft,ft.dyn_dtree,ft.d_desc.max_code),Re(ft,ft.bl_desc),Pt=y-1;3<=Pt&&ft.bl_tree[2*O[Pt]+1]===0;Pt--);return ft.opt_len+=3*(Pt+1)+5+5+4,Pt}(le),Ce=le.opt_len+3+7>>>3,(ct=le.static_len+3+7>>>3)<=Ce&&(Ce=ct)):Ce=ct=Ee+5,Ee+4<=Ce&&ie!==-1?ce(le,ie,Ee,Be):le.strategy===4||ct===Ce?(de(le,2+(Be?1:0),3),We(le,L,P)):(de(le,4+(Be?1:0),3),function(ft,Pt,Ut,Bt){var tn;for(de(ft,Pt-257,5),de(ft,Ut-1,5),de(ft,Bt-4,4),tn=0;tn<Bt;tn++)de(ft,ft.bl_tree[2*O[tn]+1],3);ge(ft,ft.dyn_ltree,Pt-1),ge(ft,ft.dyn_dtree,Ut-1)}(le,le.l_desc.max_code+1,le.d_desc.max_code+1,Tt+1),We(le,le.dyn_ltree,le.dyn_dtree)),Me(le),Be&&Se(le)},i._tr_tally=function(le,ie,Ee){return le.pending_buf[le.d_buf+2*le.last_lit]=ie>>>8&255,le.pending_buf[le.d_buf+2*le.last_lit+1]=255&ie,le.pending_buf[le.l_buf+le.last_lit]=255&Ee,le.last_lit++,ie===0?le.dyn_ltree[2*Ee]++:(le.matches++,ie--,le.dyn_ltree[2*(F[Ee]+d+1)]++,le.dyn_dtree[2*ee(ie)]++),le.last_lit===le.lit_bufsize-1},i._tr_align=function(le){de(le,2,3),oe(le,S,L),function(ie){ie.bi_valid===16?(re(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):8<=ie.bi_valid&&(ie.pending_buf[ie.pending++]=255&ie.bi_buf,ie.bi_buf>>=8,ie.bi_valid-=8)}(le)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(a,o){if(!a.setImmediate){var l,c,u,d,h=1,m={},y=!1,b=a.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(a);v=v&&v.setTimeout?v:a,l={}.toString.call(a.process)==="[object process]"?function(C){us.nextTick(function(){w(C)})}:function(){if(a.postMessage&&!a.importScripts){var C=!0,k=a.onmessage;return a.onmessage=function(){C=!1},a.postMessage("","*"),a.onmessage=k,C}}()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",S,!1):a.attachEvent("onmessage",S),function(C){a.postMessage(d+C,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(C){w(C.data)},function(C){u.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(c=b.documentElement,function(C){var k=b.createElement("script");k.onreadystatechange=function(){w(C),k.onreadystatechange=null,c.removeChild(k),k=null},c.appendChild(k)}):function(C){setTimeout(w,0,C)},v.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),A=0;A<k.length;A++)k[A]=arguments[A+1];var R={callback:C,args:k};return m[h]=R,l(h),h++},v.clearImmediate=x}function x(C){delete m[C]}function w(C){if(y)setTimeout(w,0,C);else{var k=m[C];if(k){y=!0;try{(function(A){var R=A.callback,N=A.args;switch(N.length){case 0:R();break;case 1:R(N[0]);break;case 2:R(N[0],N[1]);break;case 3:R(N[0],N[1],N[2]);break;default:R.apply(o,N)}})(k)}finally{x(C),y=!1}}}}function S(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(d)===0&&w(+C.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(AM)),AM.exports}var vCe=bCe();const nD=xa(vCe),Wx=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,s)).toFixed(r))+" "+i[s]},Lr=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},ku=(...e)=>Lr(e.map(t=>t.trim()).filter(Boolean).join("/")),qE=e=>{const t=Lr(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},fs=e=>{const t=Lr(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Nj=(e,t)=>Lr(e==="/"?`/${t}`:`${e}/${t}`);var RM,O9;function xCe(){if(O9)return RM;O9=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof us>"u"||typeof us.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,i){if(Array.isArray(t))return this._acquireBatch(t,n,r,i);if(typeof n!="function")throw new Error("You must pass a function to execute");var s=null,a=null,o=null;typeof r!="function"&&(i=r,r=null,o=new this.Promise(function(S,C){s=S,a=C})),i=i||{};var l=!1,c=null,u=null,d=null,h=this,m=function(S,C,k){u&&(clearTimeout(u),u=null),d&&(clearTimeout(d),d=null),S&&(h.queues[t]&&h.queues[t].length===0&&delete h.queues[t],h.domainReentrant&&delete h.domains[t]),l||(o?C?a(C):s(k):typeof r=="function"&&r(C,k),l=!0),S&&h.queues[t]&&h.queues[t].length>0&&h.queues[t].shift()()},y=function(S){if(l)return m(S);c&&(clearTimeout(c),c=null),h.domainReentrant&&S&&(h.domains[t]=us.domain);var C=i.maxExecutionTime||h.maxExecutionTime;if(C&&(d=setTimeout(function(){h.queues[t]&&m(S,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(A,R){k||(k=!0,m(S,A,R))})}catch(A){k||(k=!0,m(S,A))}}else h._promiseTry(function(){return n()}).then(function(A){m(S,void 0,A)},function(A){m(S,A)})};h.domainReentrant&&us.domain&&(y=us.domain.bind(y));var b=i.maxPending||h.maxPending;if(!h.queues[t])h.queues[t]=[],y(!0);else if(h.domainReentrant&&us.domain&&us.domain===h.domains[t])y(!1);else if(h.queues[t].length>=b)m(!1,new Error("Too many pending tasks in queue "+t));else{var v=function(){y(!0)};i.skipQueue?h.queues[t].unshift(v):h.queues[t].push(v);var x=i.timeout||h.timeout;x&&(c=setTimeout(function(){c=null,m(!1,new Error("async-lock timed out in queue "+t))},x))}var w=i.maxOccupationTime||h.maxOccupationTime;if(w&&(u=setTimeout(function(){h.queues[t]&&m(!1,new Error("Maximum occupation time is exceeded in queue "+t))},w)),o)return o},e.prototype._acquireBatch=function(t,n,r,i){typeof r!="function"&&(i=r,r=null);var s=this,a=function(l,c){return function(u){s.acquire(l,c,u,i)}},o=t.reduceRight(function(l,c){return a(c,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,c){o.length===1?o(function(u,d){u?c(u):l(d)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},RM=e,RM}var NM,P9;function wCe(){return P9||(P9=1,NM=xCe()),NM}var _Ce=wCe();const Hx=xa(_Ce);var _S={exports:{}},D9;function SCe(){return D9||(D9=1,typeof Object.create=="function"?_S.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:_S.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),_S.exports}var MM,F9;function CCe(){if(F9)return MM;F9=1;var e=WP().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var i=this._block,s=this._blockSize,a=n.length,o=this._len,l=0;l<a;){for(var c=o%s,u=Math.min(a-l,s-c),d=0;d<u;d++)i[c+d]=n[l+d];o+=u,l+=u,o%s===0&&this._update(i)}return this._len+=a,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=this._len*8;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var s=(i&4294967295)>>>0,a=(i-s)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},MM=t,MM}var IM,L9;function kCe(){if(L9)return IM;L9=1;var e=SCe(),t=CCe(),n=WP().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,t.call(this,64,56)}e(s,t),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function a(u){return u<<1|u>>>31}function o(u){return u<<5|u>>>27}function l(u){return u<<30|u>>>2}function c(u,d,h,m){return u===0?d&h|~d&m:u===2?d&h|d&m|h&m:d^h^m}return s.prototype._update=function(u){for(var d=this._w,h=this._a|0,m=this._b|0,y=this._c|0,b=this._d|0,v=this._e|0,x=0;x<16;++x)d[x]=u.readInt32BE(x*4);for(;x<80;++x)d[x]=a(d[x-3]^d[x-8]^d[x-14]^d[x-16]);for(var w=0;w<80;++w){var S=~~(w/20),C=o(h)+c(S,m,y,b)+v+d[w]+r[S]|0;v=b,b=y,y=l(m),m=h,h=C}this._a=h+this._a|0,this._b=m+this._b|0,this._c=y+this._c|0,this._d=b+this._d|0,this._e=v+this._e|0},s.prototype._hash=function(){var u=n.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},IM=s,IM}var ECe=kCe();const sZ=xa(ECe);var jM,B9;function TCe(){if(B9)return jM;B9=1;function e(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function t(i,s){for(var a="",o=0,l=-1,c=0,u,d=0;d<=i.length;++d){if(d<i.length)u=i.charCodeAt(d);else{if(u===47)break;u=47}if(u===47){if(!(l===d-1||c===1))if(l!==d-1&&c===2){if(a.length<2||o!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var h=a.lastIndexOf("/");if(h!==a.length-1){h===-1?(a="",o=0):(a=a.slice(0,h),o=a.length-1-a.lastIndexOf("/")),l=d,c=0;continue}}else if(a.length===2||a.length===1){a="",o=0,l=d,c=0;continue}}s&&(a.length>0?a+="/..":a="..",o=2)}else a.length>0?a+="/"+i.slice(l+1,d):a=i.slice(l+1,d),o=d-l-1;l=d,c=0}else u===46&&c!==-1?++c:c=-1}return a}function n(i,s){var a=s.dir||s.root,o=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+o:a+i+o:o}var r={resolve:function(){for(var s="",a=!1,o,l=arguments.length-1;l>=-1&&!a;l--){var c;l>=0?c=arguments[l]:(o===void 0&&(o=us.cwd()),c=o),e(c),c.length!==0&&(s=c+"/"+s,a=c.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,o=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&o&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var o=arguments[a];e(o),o.length>0&&(s===void 0?s=o:s+="/"+o)}return s===void 0?".":r.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=r.resolve(s),a=r.resolve(a),s===a))return"";for(var o=1;o<s.length&&s.charCodeAt(o)===47;++o);for(var l=s.length,c=l-o,u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var d=a.length,h=d-u,m=c<h?c:h,y=-1,b=0;b<=m;++b){if(b===m){if(h>m){if(a.charCodeAt(u+b)===47)return a.slice(u+b+1);if(b===0)return a.slice(u+b)}else c>m&&(s.charCodeAt(o+b)===47?y=b:b===0&&(y=0));break}var v=s.charCodeAt(o+b),x=a.charCodeAt(u+b);if(v!==x)break;v===47&&(y=b)}var w="";for(b=o+y+1;b<=l;++b)(b===l||s.charCodeAt(b)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+a.slice(u+y):(u+=y,a.charCodeAt(u)===47&&++u,a.slice(u))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),o=a===47,l=-1,c=!0,u=s.length-1;u>=1;--u)if(a=s.charCodeAt(u),a===47){if(!c){l=u;break}}else c=!1;return l===-1?o?"/":".":o&&l===1?"//":s.slice(0,l)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var o=0,l=-1,c=!0,u;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,h=-1;for(u=s.length-1;u>=0;--u){var m=s.charCodeAt(u);if(m===47){if(!c){o=u+1;break}}else h===-1&&(c=!1,h=u+1),d>=0&&(m===a.charCodeAt(d)?--d===-1&&(l=u):(d=-1,l=h))}return o===l?l=h:l===-1&&(l=s.length),s.slice(o,l)}else{for(u=s.length-1;u>=0;--u)if(s.charCodeAt(u)===47){if(!c){o=u+1;break}}else l===-1&&(c=!1,l=u+1);return l===-1?"":s.slice(o,l)}},extname:function(s){e(s);for(var a=-1,o=0,l=-1,c=!0,u=0,d=s.length-1;d>=0;--d){var h=s.charCodeAt(d);if(h===47){if(!c){o=d+1;break}continue}l===-1&&(c=!1,l=d+1),h===46?a===-1?a=d:u!==1&&(u=1):a!==-1&&(u=-1)}return a===-1||l===-1||u===0||u===1&&a===l-1&&a===o+1?"":s.slice(a,l)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var o=s.charCodeAt(0),l=o===47,c;l?(a.root="/",c=1):c=0;for(var u=-1,d=0,h=-1,m=!0,y=s.length-1,b=0;y>=c;--y){if(o=s.charCodeAt(y),o===47){if(!m){d=y+1;break}continue}h===-1&&(m=!1,h=y+1),o===46?u===-1?u=y:b!==1&&(b=1):u!==-1&&(b=-1)}return u===-1||h===-1||b===0||b===1&&u===h-1&&u===d+1?h!==-1&&(d===0&&l?a.base=a.name=s.slice(1,h):a.base=a.name=s.slice(d,h)):(d===0&&l?(a.name=s.slice(1,u),a.base=s.slice(1,h)):(a.name=s.slice(d,u),a.base=s.slice(d,h)),a.ext=s.slice(u,h)),d>0?a.dir=s.slice(0,d-1):l&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,jM=r,jM}var Lt=TCe(),OM={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var $9;function ACe(){return $9||($9=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var N=0,I=new Array(256),O=0;O!=256;++O)N=O,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,I[O]=N;return typeof Int32Array<"u"?new Int32Array(I):I}var r=n();function i(N){var I=0,O=0,L=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)P[L]=N[L];for(L=0;L!=256;++L)for(O=N[L],I=256+L;I<4096;I+=256)O=P[I]=O>>>8^N[O&255];var V=[];for(L=1;L!=16;++L)V[L-1]=typeof Int32Array<"u"?P.subarray(L*256,L*256+256):P.slice(L*256,L*256+256);return V}var s=i(r),a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],d=s[5],h=s[6],m=s[7],y=s[8],b=s[9],v=s[10],x=s[11],w=s[12],S=s[13],C=s[14];function k(N,I){for(var O=I^-1,L=0,P=N.length;L<P;)O=O>>>8^r[(O^N.charCodeAt(L++))&255];return~O}function A(N,I){for(var O=I^-1,L=N.length-15,P=0;P<L;)O=C[N[P++]^O&255]^S[N[P++]^O>>8&255]^w[N[P++]^O>>16&255]^x[N[P++]^O>>>24]^v[N[P++]]^b[N[P++]]^y[N[P++]]^m[N[P++]]^h[N[P++]]^d[N[P++]]^u[N[P++]]^c[N[P++]]^l[N[P++]]^o[N[P++]]^a[N[P++]]^r[N[P++]];for(L+=15;P<L;)O=O>>>8^r[(O^N[P++])&255];return~O}function R(N,I){for(var O=I^-1,L=0,P=N.length,V=0,F=0;L<P;)V=N.charCodeAt(L++),V<128?O=O>>>8^r[(O^V)&255]:V<2048?(O=O>>>8^r[(O^(192|V>>6&31))&255],O=O>>>8^r[(O^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,F=N.charCodeAt(L++)&1023,O=O>>>8^r[(O^(240|V>>8&7))&255],O=O>>>8^r[(O^(128|V>>2&63))&255],O=O>>>8^r[(O^(128|F>>6&15|(V&3)<<4))&255],O=O>>>8^r[(O^(128|F&63))&255]):(O=O>>>8^r[(O^(224|V>>12&15))&255],O=O>>>8^r[(O^(128|V>>6&63))&255],O=O>>>8^r[(O^(128|V&63))&255]);return~O}t.table=r,t.bstr=k,t.buf=A,t.str=R})}(OM)),OM}var RCe=ACe();const NCe=xa(RCe);var PM={},z9;function jh(){return z9||(z9=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(s,a){return Object.prototype.hasOwnProperty.call(s,a)}e.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var o=a.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(s[l]=o[l])}}return s},e.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var r={arraySet:function(s,a,o,l,c){if(a.subarray&&s.subarray){s.set(a.subarray(o,o+l),c);return}for(var u=0;u<l;u++)s[c+u]=a[o+u]},flattenChunks:function(s){var a,o,l,c,u,d;for(l=0,a=0,o=s.length;a<o;a++)l+=s[a].length;for(d=new Uint8Array(l),c=0,a=0,o=s.length;a<o;a++)u=s[a],d.set(u,c),c+=u.length;return d}},i={arraySet:function(s,a,o,l,c){for(var u=0;u<l;u++)s[c+u]=a[o+u]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)}(PM)),PM}var Fg={},tc={},yp={},U9;function MCe(){if(U9)return yp;U9=1;var e=jh(),t=4,n=0,r=1,i=2;function s(D){for(var Z=D.length;--Z>=0;)D[Z]=0}var a=0,o=1,l=2,c=3,u=258,d=29,h=256,m=h+1+d,y=30,b=19,v=2*m+1,x=15,w=16,S=7,C=256,k=16,A=17,R=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=512,V=new Array((m+2)*2);s(V);var F=new Array(y*2);s(F);var J=new Array(P);s(J);var U=new Array(u-c+1);s(U);var G=new Array(d);s(G);var $=new Array(y);s($);function ne(D,Z,me,De,we){this.static_tree=D,this.extra_bits=Z,this.extra_base=me,this.elems=De,this.max_length=we,this.has_stree=D&&D.length}var W,te,ee;function re(D,Z){this.dyn_tree=D,this.max_code=0,this.stat_desc=Z}function de(D){return D<256?J[D]:J[256+(D>>>7)]}function oe(D,Z){D.pending_buf[D.pending++]=Z&255,D.pending_buf[D.pending++]=Z>>>8&255}function Ie(D,Z,me){D.bi_valid>w-me?(D.bi_buf|=Z<<D.bi_valid&65535,oe(D,D.bi_buf),D.bi_buf=Z>>w-D.bi_valid,D.bi_valid+=me-w):(D.bi_buf|=Z<<D.bi_valid&65535,D.bi_valid+=me)}function je(D,Z,me){Ie(D,me[Z*2],me[Z*2+1])}function Me(D,Z){var me=0;do me|=D&1,D>>>=1,me<<=1;while(--Z>0);return me>>>1}function Se(D){D.bi_valid===16?(oe(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function qe(D,Z){var me=Z.dyn_tree,De=Z.max_code,we=Z.stat_desc.static_tree,Ne=Z.stat_desc.has_stree,fe=Z.stat_desc.extra_bits,bt=Z.stat_desc.extra_base,ot=Z.stat_desc.max_length,B,$e,it,ye,_e,ze,kt=0;for(ye=0;ye<=x;ye++)D.bl_count[ye]=0;for(me[D.heap[D.heap_max]*2+1]=0,B=D.heap_max+1;B<v;B++)$e=D.heap[B],ye=me[me[$e*2+1]*2+1]+1,ye>ot&&(ye=ot,kt++),me[$e*2+1]=ye,!($e>De)&&(D.bl_count[ye]++,_e=0,$e>=bt&&(_e=fe[$e-bt]),ze=me[$e*2],D.opt_len+=ze*(ye+_e),Ne&&(D.static_len+=ze*(we[$e*2+1]+_e)));if(kt!==0){do{for(ye=ot-1;D.bl_count[ye]===0;)ye--;D.bl_count[ye]--,D.bl_count[ye+1]+=2,D.bl_count[ot]--,kt-=2}while(kt>0);for(ye=ot;ye!==0;ye--)for($e=D.bl_count[ye];$e!==0;)it=D.heap[--B],!(it>De)&&(me[it*2+1]!==ye&&(D.opt_len+=(ye-me[it*2+1])*me[it*2],me[it*2+1]=ye),$e--)}}function Qe(D,Z,me){var De=new Array(x+1),we=0,Ne,fe;for(Ne=1;Ne<=x;Ne++)De[Ne]=we=we+me[Ne-1]<<1;for(fe=0;fe<=Z;fe++){var bt=D[fe*2+1];bt!==0&&(D[fe*2]=Me(De[bt]++,bt))}}function We(){var D,Z,me,De,we,Ne=new Array(x+1);for(me=0,De=0;De<d-1;De++)for(G[De]=me,D=0;D<1<<N[De];D++)U[me++]=De;for(U[me-1]=De,we=0,De=0;De<16;De++)for($[De]=we,D=0;D<1<<I[De];D++)J[we++]=De;for(we>>=7;De<y;De++)for($[De]=we<<7,D=0;D<1<<I[De]-7;D++)J[256+we++]=De;for(Z=0;Z<=x;Z++)Ne[Z]=0;for(D=0;D<=143;)V[D*2+1]=8,D++,Ne[8]++;for(;D<=255;)V[D*2+1]=9,D++,Ne[9]++;for(;D<=279;)V[D*2+1]=7,D++,Ne[7]++;for(;D<=287;)V[D*2+1]=8,D++,Ne[8]++;for(Qe(V,m+1,Ne),D=0;D<y;D++)F[D*2+1]=5,F[D*2]=Me(D,5);W=new ne(V,N,h+1,m,x),te=new ne(F,I,0,y,x),ee=new ne(new Array(0),O,0,b,S)}function Re(D){var Z;for(Z=0;Z<m;Z++)D.dyn_ltree[Z*2]=0;for(Z=0;Z<y;Z++)D.dyn_dtree[Z*2]=0;for(Z=0;Z<b;Z++)D.bl_tree[Z*2]=0;D.dyn_ltree[C*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function K(D){D.bi_valid>8?oe(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function ge(D,Z,me,De){K(D),oe(D,me),oe(D,~me),e.arraySet(D.pending_buf,D.window,Z,me,D.pending),D.pending+=me}function Te(D,Z,me,De){var we=Z*2,Ne=me*2;return D[we]<D[Ne]||D[we]===D[Ne]&&De[Z]<=De[me]}function ce(D,Z,me){for(var De=D.heap[me],we=me<<1;we<=D.heap_len&&(we<D.heap_len&&Te(Z,D.heap[we+1],D.heap[we],D.depth)&&we++,!Te(Z,De,D.heap[we],D.depth));)D.heap[me]=D.heap[we],me=we,we<<=1;D.heap[me]=De}function le(D,Z,me){var De,we,Ne=0,fe,bt;if(D.last_lit!==0)do De=D.pending_buf[D.d_buf+Ne*2]<<8|D.pending_buf[D.d_buf+Ne*2+1],we=D.pending_buf[D.l_buf+Ne],Ne++,De===0?je(D,we,Z):(fe=U[we],je(D,fe+h+1,Z),bt=N[fe],bt!==0&&(we-=G[fe],Ie(D,we,bt)),De--,fe=de(De),je(D,fe,me),bt=I[fe],bt!==0&&(De-=$[fe],Ie(D,De,bt)));while(Ne<D.last_lit);je(D,C,Z)}function ie(D,Z){var me=Z.dyn_tree,De=Z.stat_desc.static_tree,we=Z.stat_desc.has_stree,Ne=Z.stat_desc.elems,fe,bt,ot=-1,B;for(D.heap_len=0,D.heap_max=v,fe=0;fe<Ne;fe++)me[fe*2]!==0?(D.heap[++D.heap_len]=ot=fe,D.depth[fe]=0):me[fe*2+1]=0;for(;D.heap_len<2;)B=D.heap[++D.heap_len]=ot<2?++ot:0,me[B*2]=1,D.depth[B]=0,D.opt_len--,we&&(D.static_len-=De[B*2+1]);for(Z.max_code=ot,fe=D.heap_len>>1;fe>=1;fe--)ce(D,me,fe);B=Ne;do fe=D.heap[1],D.heap[1]=D.heap[D.heap_len--],ce(D,me,1),bt=D.heap[1],D.heap[--D.heap_max]=fe,D.heap[--D.heap_max]=bt,me[B*2]=me[fe*2]+me[bt*2],D.depth[B]=(D.depth[fe]>=D.depth[bt]?D.depth[fe]:D.depth[bt])+1,me[fe*2+1]=me[bt*2+1]=B,D.heap[1]=B++,ce(D,me,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],qe(D,Z),Qe(me,ot,D.bl_count)}function Ee(D,Z,me){var De,we=-1,Ne,fe=Z[0*2+1],bt=0,ot=7,B=4;for(fe===0&&(ot=138,B=3),Z[(me+1)*2+1]=65535,De=0;De<=me;De++)Ne=fe,fe=Z[(De+1)*2+1],!(++bt<ot&&Ne===fe)&&(bt<B?D.bl_tree[Ne*2]+=bt:Ne!==0?(Ne!==we&&D.bl_tree[Ne*2]++,D.bl_tree[k*2]++):bt<=10?D.bl_tree[A*2]++:D.bl_tree[R*2]++,bt=0,we=Ne,fe===0?(ot=138,B=3):Ne===fe?(ot=6,B=3):(ot=7,B=4))}function Be(D,Z,me){var De,we=-1,Ne,fe=Z[0*2+1],bt=0,ot=7,B=4;for(fe===0&&(ot=138,B=3),De=0;De<=me;De++)if(Ne=fe,fe=Z[(De+1)*2+1],!(++bt<ot&&Ne===fe)){if(bt<B)do je(D,Ne,D.bl_tree);while(--bt!==0);else Ne!==0?(Ne!==we&&(je(D,Ne,D.bl_tree),bt--),je(D,k,D.bl_tree),Ie(D,bt-3,2)):bt<=10?(je(D,A,D.bl_tree),Ie(D,bt-3,3)):(je(D,R,D.bl_tree),Ie(D,bt-11,7));bt=0,we=Ne,fe===0?(ot=138,B=3):Ne===fe?(ot=6,B=3):(ot=7,B=4)}}function Ce(D){var Z;for(Ee(D,D.dyn_ltree,D.l_desc.max_code),Ee(D,D.dyn_dtree,D.d_desc.max_code),ie(D,D.bl_desc),Z=b-1;Z>=3&&D.bl_tree[L[Z]*2+1]===0;Z--);return D.opt_len+=3*(Z+1)+5+5+4,Z}function ct(D,Z,me,De){var we;for(Ie(D,Z-257,5),Ie(D,me-1,5),Ie(D,De-4,4),we=0;we<De;we++)Ie(D,D.bl_tree[L[we]*2+1],3);Be(D,D.dyn_ltree,Z-1),Be(D,D.dyn_dtree,me-1)}function Tt(D){var Z=4093624447,me;for(me=0;me<=31;me++,Z>>>=1)if(Z&1&&D.dyn_ltree[me*2]!==0)return n;if(D.dyn_ltree[9*2]!==0||D.dyn_ltree[10*2]!==0||D.dyn_ltree[13*2]!==0)return r;for(me=32;me<h;me++)if(D.dyn_ltree[me*2]!==0)return r;return n}var ft=!1;function Pt(D){ft||(We(),ft=!0),D.l_desc=new re(D.dyn_ltree,W),D.d_desc=new re(D.dyn_dtree,te),D.bl_desc=new re(D.bl_tree,ee),D.bi_buf=0,D.bi_valid=0,Re(D)}function Ut(D,Z,me,De){Ie(D,(a<<1)+(De?1:0),3),ge(D,Z,me)}function Bt(D){Ie(D,o<<1,3),je(D,C,V),Se(D)}function tn(D,Z,me,De){var we,Ne,fe=0;D.level>0?(D.strm.data_type===i&&(D.strm.data_type=Tt(D)),ie(D,D.l_desc),ie(D,D.d_desc),fe=Ce(D),we=D.opt_len+3+7>>>3,Ne=D.static_len+3+7>>>3,Ne<=we&&(we=Ne)):we=Ne=me+5,me+4<=we&&Z!==-1?Ut(D,Z,me,De):D.strategy===t||Ne===we?(Ie(D,(o<<1)+(De?1:0),3),le(D,V,F)):(Ie(D,(l<<1)+(De?1:0),3),ct(D,D.l_desc.max_code+1,D.d_desc.max_code+1,fe+1),le(D,D.dyn_ltree,D.dyn_dtree)),Re(D),De&&K(D)}function xe(D,Z,me){return D.pending_buf[D.d_buf+D.last_lit*2]=Z>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=Z&255,D.pending_buf[D.l_buf+D.last_lit]=me&255,D.last_lit++,Z===0?D.dyn_ltree[me*2]++:(D.matches++,Z--,D.dyn_ltree[(U[me]+h+1)*2]++,D.dyn_dtree[de(Z)*2]++),D.last_lit===D.lit_bufsize-1}return yp._tr_init=Pt,yp._tr_stored_block=Ut,yp._tr_flush_block=tn,yp._tr_tally=xe,yp._tr_align=Bt,yp}var DM,q9;function aZ(){if(q9)return DM;q9=1;function e(t,n,r,i){for(var s=t&65535|0,a=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+n[i++]|0,a=a+s|0;while(--o);s%=65521,a%=65521}return s|a<<16|0}return DM=e,DM}var FM,V9;function oZ(){if(V9)return FM;V9=1;function e(){for(var r,i=[],s=0;s<256;s++){r=s;for(var a=0;a<8;a++)r=r&1?3988292384^r>>>1:r>>>1;i[s]=r}return i}var t=e();function n(r,i,s,a){var o=t,l=a+s;r^=-1;for(var c=a;c<l;c++)r=r>>>8^o[(r^i[c])&255];return r^-1}return FM=n,FM}var LM,W9;function rD(){return W9||(W9=1,LM={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),LM}var H9;function ICe(){if(H9)return tc;H9=1;var e=jh(),t=MCe(),n=aZ(),r=oZ(),i=rD(),s=0,a=1,o=3,l=4,c=5,u=0,d=1,h=-2,m=-3,y=-5,b=-1,v=1,x=2,w=3,S=4,C=0,k=2,A=8,R=9,N=15,I=8,O=29,L=256,P=L+1+O,V=30,F=19,J=2*P+1,U=15,G=3,$=258,ne=$+G+1,W=32,te=42,ee=69,re=73,de=91,oe=103,Ie=113,je=666,Me=1,Se=2,qe=3,Qe=4,We=3;function Re(B,$e){return B.msg=i[$e],$e}function K(B){return(B<<1)-(B>4?9:0)}function ge(B){for(var $e=B.length;--$e>=0;)B[$e]=0}function Te(B){var $e=B.state,it=$e.pending;it>B.avail_out&&(it=B.avail_out),it!==0&&(e.arraySet(B.output,$e.pending_buf,$e.pending_out,it,B.next_out),B.next_out+=it,$e.pending_out+=it,B.total_out+=it,B.avail_out-=it,$e.pending-=it,$e.pending===0&&($e.pending_out=0))}function ce(B,$e){t._tr_flush_block(B,B.block_start>=0?B.block_start:-1,B.strstart-B.block_start,$e),B.block_start=B.strstart,Te(B.strm)}function le(B,$e){B.pending_buf[B.pending++]=$e}function ie(B,$e){B.pending_buf[B.pending++]=$e>>>8&255,B.pending_buf[B.pending++]=$e&255}function Ee(B,$e,it,ye){var _e=B.avail_in;return _e>ye&&(_e=ye),_e===0?0:(B.avail_in-=_e,e.arraySet($e,B.input,B.next_in,_e,it),B.state.wrap===1?B.adler=n(B.adler,$e,_e,it):B.state.wrap===2&&(B.adler=r(B.adler,$e,_e,it)),B.next_in+=_e,B.total_in+=_e,_e)}function Be(B,$e){var it=B.max_chain_length,ye=B.strstart,_e,ze,kt=B.prev_length,he=B.nice_match,Y=B.strstart>B.w_size-ne?B.strstart-(B.w_size-ne):0,H=B.window,X=B.w_mask,be=B.prev,Oe=B.strstart+$,Ge=H[ye+kt-1],wt=H[ye+kt];B.prev_length>=B.good_match&&(it>>=2),he>B.lookahead&&(he=B.lookahead);do if(_e=$e,!(H[_e+kt]!==wt||H[_e+kt-1]!==Ge||H[_e]!==H[ye]||H[++_e]!==H[ye+1])){ye+=2,_e++;do;while(H[++ye]===H[++_e]&&H[++ye]===H[++_e]&&H[++ye]===H[++_e]&&H[++ye]===H[++_e]&&H[++ye]===H[++_e]&&H[++ye]===H[++_e]&&H[++ye]===H[++_e]&&H[++ye]===H[++_e]&&ye<Oe);if(ze=$-(Oe-ye),ye=Oe-$,ze>kt){if(B.match_start=$e,kt=ze,ze>=he)break;Ge=H[ye+kt-1],wt=H[ye+kt]}}while(($e=be[$e&X])>Y&&--it!==0);return kt<=B.lookahead?kt:B.lookahead}function Ce(B){var $e=B.w_size,it,ye,_e,ze,kt;do{if(ze=B.window_size-B.lookahead-B.strstart,B.strstart>=$e+($e-ne)){e.arraySet(B.window,B.window,$e,$e,0),B.match_start-=$e,B.strstart-=$e,B.block_start-=$e,ye=B.hash_size,it=ye;do _e=B.head[--it],B.head[it]=_e>=$e?_e-$e:0;while(--ye);ye=$e,it=ye;do _e=B.prev[--it],B.prev[it]=_e>=$e?_e-$e:0;while(--ye);ze+=$e}if(B.strm.avail_in===0)break;if(ye=Ee(B.strm,B.window,B.strstart+B.lookahead,ze),B.lookahead+=ye,B.lookahead+B.insert>=G)for(kt=B.strstart-B.insert,B.ins_h=B.window[kt],B.ins_h=(B.ins_h<<B.hash_shift^B.window[kt+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[kt+G-1])&B.hash_mask,B.prev[kt&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=kt,kt++,B.insert--,!(B.lookahead+B.insert<G)););}while(B.lookahead<ne&&B.strm.avail_in!==0)}function ct(B,$e){var it=65535;for(it>B.pending_buf_size-5&&(it=B.pending_buf_size-5);;){if(B.lookahead<=1){if(Ce(B),B.lookahead===0&&$e===s)return Me;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var ye=B.block_start+it;if((B.strstart===0||B.strstart>=ye)&&(B.lookahead=B.strstart-ye,B.strstart=ye,ce(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-ne&&(ce(B,!1),B.strm.avail_out===0))return Me}return B.insert=0,$e===l?(ce(B,!0),B.strm.avail_out===0?qe:Qe):(B.strstart>B.block_start&&(ce(B,!1),B.strm.avail_out===0),Me)}function Tt(B,$e){for(var it,ye;;){if(B.lookahead<ne){if(Ce(B),B.lookahead<ne&&$e===s)return Me;if(B.lookahead===0)break}if(it=0,B.lookahead>=G&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+G-1])&B.hash_mask,it=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),it!==0&&B.strstart-it<=B.w_size-ne&&(B.match_length=Be(B,it)),B.match_length>=G)if(ye=t._tr_tally(B,B.strstart-B.match_start,B.match_length-G),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=G){B.match_length--;do B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+G-1])&B.hash_mask,it=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart;while(--B.match_length!==0);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else ye=t._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(ye&&(ce(B,!1),B.strm.avail_out===0))return Me}return B.insert=B.strstart<G-1?B.strstart:G-1,$e===l?(ce(B,!0),B.strm.avail_out===0?qe:Qe):B.last_lit&&(ce(B,!1),B.strm.avail_out===0)?Me:Se}function ft(B,$e){for(var it,ye,_e;;){if(B.lookahead<ne){if(Ce(B),B.lookahead<ne&&$e===s)return Me;if(B.lookahead===0)break}if(it=0,B.lookahead>=G&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+G-1])&B.hash_mask,it=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=G-1,it!==0&&B.prev_length<B.max_lazy_match&&B.strstart-it<=B.w_size-ne&&(B.match_length=Be(B,it),B.match_length<=5&&(B.strategy===v||B.match_length===G&&B.strstart-B.match_start>4096)&&(B.match_length=G-1)),B.prev_length>=G&&B.match_length<=B.prev_length){_e=B.strstart+B.lookahead-G,ye=t._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-G),B.lookahead-=B.prev_length-1,B.prev_length-=2;do++B.strstart<=_e&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+G-1])&B.hash_mask,it=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart);while(--B.prev_length!==0);if(B.match_available=0,B.match_length=G-1,B.strstart++,ye&&(ce(B,!1),B.strm.avail_out===0))return Me}else if(B.match_available){if(ye=t._tr_tally(B,0,B.window[B.strstart-1]),ye&&ce(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return Me}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(ye=t._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<G-1?B.strstart:G-1,$e===l?(ce(B,!0),B.strm.avail_out===0?qe:Qe):B.last_lit&&(ce(B,!1),B.strm.avail_out===0)?Me:Se}function Pt(B,$e){for(var it,ye,_e,ze,kt=B.window;;){if(B.lookahead<=$){if(Ce(B),B.lookahead<=$&&$e===s)return Me;if(B.lookahead===0)break}if(B.match_length=0,B.lookahead>=G&&B.strstart>0&&(_e=B.strstart-1,ye=kt[_e],ye===kt[++_e]&&ye===kt[++_e]&&ye===kt[++_e])){ze=B.strstart+$;do;while(ye===kt[++_e]&&ye===kt[++_e]&&ye===kt[++_e]&&ye===kt[++_e]&&ye===kt[++_e]&&ye===kt[++_e]&&ye===kt[++_e]&&ye===kt[++_e]&&_e<ze);B.match_length=$-(ze-_e),B.match_length>B.lookahead&&(B.match_length=B.lookahead)}if(B.match_length>=G?(it=t._tr_tally(B,1,B.match_length-G),B.lookahead-=B.match_length,B.strstart+=B.match_length,B.match_length=0):(it=t._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++),it&&(ce(B,!1),B.strm.avail_out===0))return Me}return B.insert=0,$e===l?(ce(B,!0),B.strm.avail_out===0?qe:Qe):B.last_lit&&(ce(B,!1),B.strm.avail_out===0)?Me:Se}function Ut(B,$e){for(var it;;){if(B.lookahead===0&&(Ce(B),B.lookahead===0)){if($e===s)return Me;break}if(B.match_length=0,it=t._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++,it&&(ce(B,!1),B.strm.avail_out===0))return Me}return B.insert=0,$e===l?(ce(B,!0),B.strm.avail_out===0?qe:Qe):B.last_lit&&(ce(B,!1),B.strm.avail_out===0)?Me:Se}function Bt(B,$e,it,ye,_e){this.good_length=B,this.max_lazy=$e,this.nice_length=it,this.max_chain=ye,this.func=_e}var tn;tn=[new Bt(0,0,0,0,ct),new Bt(4,4,8,4,Tt),new Bt(4,5,16,8,Tt),new Bt(4,6,32,32,Tt),new Bt(4,4,16,16,ft),new Bt(8,16,32,32,ft),new Bt(8,16,128,128,ft),new Bt(8,32,128,256,ft),new Bt(32,128,258,1024,ft),new Bt(32,258,258,4096,ft)];function xe(B){B.window_size=2*B.w_size,ge(B.head),B.max_lazy_match=tn[B.level].max_lazy,B.good_match=tn[B.level].good_length,B.nice_match=tn[B.level].nice_length,B.max_chain_length=tn[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=G-1,B.match_available=0,B.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(J*2),this.dyn_dtree=new e.Buf16((2*V+1)*2),this.bl_tree=new e.Buf16((2*F+1)*2),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(U+1),this.heap=new e.Buf16(2*P+1),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*P+1),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Z(B){var $e;return!B||!B.state?Re(B,h):(B.total_in=B.total_out=0,B.data_type=k,$e=B.state,$e.pending=0,$e.pending_out=0,$e.wrap<0&&($e.wrap=-$e.wrap),$e.status=$e.wrap?te:Ie,B.adler=$e.wrap===2?0:1,$e.last_flush=s,t._tr_init($e),u)}function me(B){var $e=Z(B);return $e===u&&xe(B.state),$e}function De(B,$e){return!B||!B.state||B.state.wrap!==2?h:(B.state.gzhead=$e,u)}function we(B,$e,it,ye,_e,ze){if(!B)return h;var kt=1;if($e===b&&($e=6),ye<0?(kt=0,ye=-ye):ye>15&&(kt=2,ye-=16),_e<1||_e>R||it!==A||ye<8||ye>15||$e<0||$e>9||ze<0||ze>S)return Re(B,h);ye===8&&(ye=9);var he=new D;return B.state=he,he.strm=B,he.wrap=kt,he.gzhead=null,he.w_bits=ye,he.w_size=1<<he.w_bits,he.w_mask=he.w_size-1,he.hash_bits=_e+7,he.hash_size=1<<he.hash_bits,he.hash_mask=he.hash_size-1,he.hash_shift=~~((he.hash_bits+G-1)/G),he.window=new e.Buf8(he.w_size*2),he.head=new e.Buf16(he.hash_size),he.prev=new e.Buf16(he.w_size),he.lit_bufsize=1<<_e+6,he.pending_buf_size=he.lit_bufsize*4,he.pending_buf=new e.Buf8(he.pending_buf_size),he.d_buf=1*he.lit_bufsize,he.l_buf=3*he.lit_bufsize,he.level=$e,he.strategy=ze,he.method=it,me(B)}function Ne(B,$e){return we(B,$e,A,N,I,C)}function fe(B,$e){var it,ye,_e,ze;if(!B||!B.state||$e>c||$e<0)return B?Re(B,h):h;if(ye=B.state,!B.output||!B.input&&B.avail_in!==0||ye.status===je&&$e!==l)return Re(B,B.avail_out===0?y:h);if(ye.strm=B,it=ye.last_flush,ye.last_flush=$e,ye.status===te)if(ye.wrap===2)B.adler=0,le(ye,31),le(ye,139),le(ye,8),ye.gzhead?(le(ye,(ye.gzhead.text?1:0)+(ye.gzhead.hcrc?2:0)+(ye.gzhead.extra?4:0)+(ye.gzhead.name?8:0)+(ye.gzhead.comment?16:0)),le(ye,ye.gzhead.time&255),le(ye,ye.gzhead.time>>8&255),le(ye,ye.gzhead.time>>16&255),le(ye,ye.gzhead.time>>24&255),le(ye,ye.level===9?2:ye.strategy>=x||ye.level<2?4:0),le(ye,ye.gzhead.os&255),ye.gzhead.extra&&ye.gzhead.extra.length&&(le(ye,ye.gzhead.extra.length&255),le(ye,ye.gzhead.extra.length>>8&255)),ye.gzhead.hcrc&&(B.adler=r(B.adler,ye.pending_buf,ye.pending,0)),ye.gzindex=0,ye.status=ee):(le(ye,0),le(ye,0),le(ye,0),le(ye,0),le(ye,0),le(ye,ye.level===9?2:ye.strategy>=x||ye.level<2?4:0),le(ye,We),ye.status=Ie);else{var kt=A+(ye.w_bits-8<<4)<<8,he=-1;ye.strategy>=x||ye.level<2?he=0:ye.level<6?he=1:ye.level===6?he=2:he=3,kt|=he<<6,ye.strstart!==0&&(kt|=W),kt+=31-kt%31,ye.status=Ie,ie(ye,kt),ye.strstart!==0&&(ie(ye,B.adler>>>16),ie(ye,B.adler&65535)),B.adler=1}if(ye.status===ee)if(ye.gzhead.extra){for(_e=ye.pending;ye.gzindex<(ye.gzhead.extra.length&65535)&&!(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>_e&&(B.adler=r(B.adler,ye.pending_buf,ye.pending-_e,_e)),Te(B),_e=ye.pending,ye.pending===ye.pending_buf_size));)le(ye,ye.gzhead.extra[ye.gzindex]&255),ye.gzindex++;ye.gzhead.hcrc&&ye.pending>_e&&(B.adler=r(B.adler,ye.pending_buf,ye.pending-_e,_e)),ye.gzindex===ye.gzhead.extra.length&&(ye.gzindex=0,ye.status=re)}else ye.status=re;if(ye.status===re)if(ye.gzhead.name){_e=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>_e&&(B.adler=r(B.adler,ye.pending_buf,ye.pending-_e,_e)),Te(B),_e=ye.pending,ye.pending===ye.pending_buf_size)){ze=1;break}ye.gzindex<ye.gzhead.name.length?ze=ye.gzhead.name.charCodeAt(ye.gzindex++)&255:ze=0,le(ye,ze)}while(ze!==0);ye.gzhead.hcrc&&ye.pending>_e&&(B.adler=r(B.adler,ye.pending_buf,ye.pending-_e,_e)),ze===0&&(ye.gzindex=0,ye.status=de)}else ye.status=de;if(ye.status===de)if(ye.gzhead.comment){_e=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>_e&&(B.adler=r(B.adler,ye.pending_buf,ye.pending-_e,_e)),Te(B),_e=ye.pending,ye.pending===ye.pending_buf_size)){ze=1;break}ye.gzindex<ye.gzhead.comment.length?ze=ye.gzhead.comment.charCodeAt(ye.gzindex++)&255:ze=0,le(ye,ze)}while(ze!==0);ye.gzhead.hcrc&&ye.pending>_e&&(B.adler=r(B.adler,ye.pending_buf,ye.pending-_e,_e)),ze===0&&(ye.status=oe)}else ye.status=oe;if(ye.status===oe&&(ye.gzhead.hcrc?(ye.pending+2>ye.pending_buf_size&&Te(B),ye.pending+2<=ye.pending_buf_size&&(le(ye,B.adler&255),le(ye,B.adler>>8&255),B.adler=0,ye.status=Ie)):ye.status=Ie),ye.pending!==0){if(Te(B),B.avail_out===0)return ye.last_flush=-1,u}else if(B.avail_in===0&&K($e)<=K(it)&&$e!==l)return Re(B,y);if(ye.status===je&&B.avail_in!==0)return Re(B,y);if(B.avail_in!==0||ye.lookahead!==0||$e!==s&&ye.status!==je){var Y=ye.strategy===x?Ut(ye,$e):ye.strategy===w?Pt(ye,$e):tn[ye.level].func(ye,$e);if((Y===qe||Y===Qe)&&(ye.status=je),Y===Me||Y===qe)return B.avail_out===0&&(ye.last_flush=-1),u;if(Y===Se&&($e===a?t._tr_align(ye):$e!==c&&(t._tr_stored_block(ye,0,0,!1),$e===o&&(ge(ye.head),ye.lookahead===0&&(ye.strstart=0,ye.block_start=0,ye.insert=0))),Te(B),B.avail_out===0))return ye.last_flush=-1,u}return $e!==l?u:ye.wrap<=0?d:(ye.wrap===2?(le(ye,B.adler&255),le(ye,B.adler>>8&255),le(ye,B.adler>>16&255),le(ye,B.adler>>24&255),le(ye,B.total_in&255),le(ye,B.total_in>>8&255),le(ye,B.total_in>>16&255),le(ye,B.total_in>>24&255)):(ie(ye,B.adler>>>16),ie(ye,B.adler&65535)),Te(B),ye.wrap>0&&(ye.wrap=-ye.wrap),ye.pending!==0?u:d)}function bt(B){var $e;return!B||!B.state?h:($e=B.state.status,$e!==te&&$e!==ee&&$e!==re&&$e!==de&&$e!==oe&&$e!==Ie&&$e!==je?Re(B,h):(B.state=null,$e===Ie?Re(B,m):u))}function ot(B,$e){var it=$e.length,ye,_e,ze,kt,he,Y,H,X;if(!B||!B.state||(ye=B.state,kt=ye.wrap,kt===2||kt===1&&ye.status!==te||ye.lookahead))return h;for(kt===1&&(B.adler=n(B.adler,$e,it,0)),ye.wrap=0,it>=ye.w_size&&(kt===0&&(ge(ye.head),ye.strstart=0,ye.block_start=0,ye.insert=0),X=new e.Buf8(ye.w_size),e.arraySet(X,$e,it-ye.w_size,ye.w_size,0),$e=X,it=ye.w_size),he=B.avail_in,Y=B.next_in,H=B.input,B.avail_in=it,B.next_in=0,B.input=$e,Ce(ye);ye.lookahead>=G;){_e=ye.strstart,ze=ye.lookahead-(G-1);do ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[_e+G-1])&ye.hash_mask,ye.prev[_e&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=_e,_e++;while(--ze);ye.strstart=_e,ye.lookahead=G-1,Ce(ye)}return ye.strstart+=ye.lookahead,ye.block_start=ye.strstart,ye.insert=ye.lookahead,ye.lookahead=0,ye.match_length=ye.prev_length=G-1,ye.match_available=0,B.next_in=Y,B.input=H,B.avail_in=he,ye.wrap=kt,u}return tc.deflateInit=Ne,tc.deflateInit2=we,tc.deflateReset=me,tc.deflateResetKeep=Z,tc.deflateSetHeader=De,tc.deflate=fe,tc.deflateEnd=bt,tc.deflateSetDictionary=ot,tc.deflateInfo="pako deflate (from Nodeca project)",tc}var bp={},G9;function lZ(){if(G9)return bp;G9=1;var e=jh(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),i=0;i<256;i++)r[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;r[254]=r[254]=1,bp.string2buf=function(a){var o,l,c,u,d,h=a.length,m=0;for(u=0;u<h;u++)l=a.charCodeAt(u),(l&64512)===55296&&u+1<h&&(c=a.charCodeAt(u+1),(c&64512)===56320&&(l=65536+(l-55296<<10)+(c-56320),u++)),m+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(m),d=0,u=0;d<m;u++)l=a.charCodeAt(u),(l&64512)===55296&&u+1<h&&(c=a.charCodeAt(u+1),(c&64512)===56320&&(l=65536+(l-55296<<10)+(c-56320),u++)),l<128?o[d++]=l:l<2048?(o[d++]=192|l>>>6,o[d++]=128|l&63):l<65536?(o[d++]=224|l>>>12,o[d++]=128|l>>>6&63,o[d++]=128|l&63):(o[d++]=240|l>>>18,o[d++]=128|l>>>12&63,o[d++]=128|l>>>6&63,o[d++]=128|l&63);return o};function s(a,o){if(o<65534&&(a.subarray&&n||!a.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(a,o));for(var l="",c=0;c<o;c++)l+=String.fromCharCode(a[c]);return l}return bp.buf2binstring=function(a){return s(a,a.length)},bp.binstring2buf=function(a){for(var o=new e.Buf8(a.length),l=0,c=o.length;l<c;l++)o[l]=a.charCodeAt(l);return o},bp.buf2string=function(a,o){var l,c,u,d,h=o||a.length,m=new Array(h*2);for(c=0,l=0;l<h;){if(u=a[l++],u<128){m[c++]=u;continue}if(d=r[u],d>4){m[c++]=65533,l+=d-1;continue}for(u&=d===2?31:d===3?15:7;d>1&&l<h;)u=u<<6|a[l++]&63,d--;if(d>1){m[c++]=65533;continue}u<65536?m[c++]=u:(u-=65536,m[c++]=55296|u>>10&1023,m[c++]=56320|u&1023)}return s(m,c)},bp.utf8border=function(a,o){var l;for(o=o||a.length,o>a.length&&(o=a.length),l=o-1;l>=0&&(a[l]&192)===128;)l--;return l<0||l===0?o:l+r[a[l]]>o?l:o},bp}var BM,K9;function cZ(){if(K9)return BM;K9=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return BM=e,BM}var Y9;function jCe(){if(Y9)return Fg;Y9=1;var e=ICe(),t=jh(),n=lZ(),r=rD(),i=cZ(),s=Object.prototype.toString,a=0,o=4,l=0,c=1,u=2,d=-1,h=0,m=8;function y(w){if(!(this instanceof y))return new y(w);this.options=t.assign({level:d,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},w||{});var S=this.options;S.raw&&S.windowBits>0?S.windowBits=-S.windowBits:S.gzip&&S.windowBits>0&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(C!==l)throw new Error(r[C]);if(S.header&&e.deflateSetHeader(this.strm,S.header),S.dictionary){var k;if(typeof S.dictionary=="string"?k=n.string2buf(S.dictionary):s.call(S.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(S.dictionary):k=S.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==l)throw new Error(r[C]);this._dict_set=!0}}y.prototype.push=function(w,S){var C=this.strm,k=this.options.chunkSize,A,R;if(this.ended)return!1;R=S===~~S?S:S===!0?o:a,typeof w=="string"?C.input=n.string2buf(w):s.call(w)==="[object ArrayBuffer]"?C.input=new Uint8Array(w):C.input=w,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),A=e.deflate(C,R),A!==c&&A!==l)return this.onEnd(A),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(R===o||R===u))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&A!==c);return R===o?(A=e.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===l):(R===u&&(this.onEnd(l),C.avail_out=0),!0)},y.prototype.onData=function(w){this.chunks.push(w)},y.prototype.onEnd=function(w){w===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg};function b(w,S){var C=new y(S);if(C.push(w,!0),C.err)throw C.msg||r[C.err];return C.result}function v(w,S){return S=S||{},S.raw=!0,b(w,S)}function x(w,S){return S=S||{},S.gzip=!0,b(w,S)}return Fg.Deflate=y,Fg.deflate=b,Fg.deflateRaw=v,Fg.gzip=x,Fg}var Lg={},kl={},$M,Z9;function OCe(){if(Z9)return $M;Z9=1;var e=30,t=12;return $M=function(r,i){var s,a,o,l,c,u,d,h,m,y,b,v,x,w,S,C,k,A,R,N,I,O,L,P,V;s=r.state,a=r.next_in,P=r.input,o=a+(r.avail_in-5),l=r.next_out,V=r.output,c=l-(i-r.avail_out),u=l+(r.avail_out-257),d=s.dmax,h=s.wsize,m=s.whave,y=s.wnext,b=s.window,v=s.hold,x=s.bits,w=s.lencode,S=s.distcode,C=(1<<s.lenbits)-1,k=(1<<s.distbits)-1;e:do{x<15&&(v+=P[a++]<<x,x+=8,v+=P[a++]<<x,x+=8),A=w[v&C];t:for(;;){if(R=A>>>24,v>>>=R,x-=R,R=A>>>16&255,R===0)V[l++]=A&65535;else if(R&16){N=A&65535,R&=15,R&&(x<R&&(v+=P[a++]<<x,x+=8),N+=v&(1<<R)-1,v>>>=R,x-=R),x<15&&(v+=P[a++]<<x,x+=8,v+=P[a++]<<x,x+=8),A=S[v&k];n:for(;;){if(R=A>>>24,v>>>=R,x-=R,R=A>>>16&255,R&16){if(I=A&65535,R&=15,x<R&&(v+=P[a++]<<x,x+=8,x<R&&(v+=P[a++]<<x,x+=8)),I+=v&(1<<R)-1,I>d){r.msg="invalid distance too far back",s.mode=e;break e}if(v>>>=R,x-=R,R=l-c,I>R){if(R=I-R,R>m&&s.sane){r.msg="invalid distance too far back",s.mode=e;break e}if(O=0,L=b,y===0){if(O+=h-R,R<N){N-=R;do V[l++]=b[O++];while(--R);O=l-I,L=V}}else if(y<R){if(O+=h+y-R,R-=y,R<N){N-=R;do V[l++]=b[O++];while(--R);if(O=0,y<N){R=y,N-=R;do V[l++]=b[O++];while(--R);O=l-I,L=V}}}else if(O+=y-R,R<N){N-=R;do V[l++]=b[O++];while(--R);O=l-I,L=V}for(;N>2;)V[l++]=L[O++],V[l++]=L[O++],V[l++]=L[O++],N-=3;N&&(V[l++]=L[O++],N>1&&(V[l++]=L[O++]))}else{O=l-I;do V[l++]=V[O++],V[l++]=V[O++],V[l++]=V[O++],N-=3;while(N>2);N&&(V[l++]=V[O++],N>1&&(V[l++]=V[O++]))}}else if((R&64)===0){A=S[(A&65535)+(v&(1<<R)-1)];continue n}else{r.msg="invalid distance code",s.mode=e;break e}break}}else if((R&64)===0){A=w[(A&65535)+(v&(1<<R)-1)];continue t}else if(R&32){s.mode=t;break e}else{r.msg="invalid literal/length code",s.mode=e;break e}break}}while(a<o&&l<u);N=x>>3,a-=N,x-=N<<3,v&=(1<<x)-1,r.next_in=a,r.next_out=l,r.avail_in=a<o?5+(o-a):5-(a-o),r.avail_out=l<u?257+(u-l):257-(l-u),s.hold=v,s.bits=x},$M}var zM,X9;function PCe(){if(X9)return zM;X9=1;var e=jh(),t=15,n=852,r=592,i=0,s=1,a=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return zM=function(h,m,y,b,v,x,w,S){var C=S.bits,k=0,A=0,R=0,N=0,I=0,O=0,L=0,P=0,V=0,F=0,J,U,G,$,ne,W=null,te=0,ee,re=new e.Buf16(t+1),de=new e.Buf16(t+1),oe=null,Ie=0,je,Me,Se;for(k=0;k<=t;k++)re[k]=0;for(A=0;A<b;A++)re[m[y+A]]++;for(I=C,N=t;N>=1&&re[N]===0;N--);if(I>N&&(I=N),N===0)return v[x++]=1<<24|64<<16|0,v[x++]=1<<24|64<<16|0,S.bits=1,0;for(R=1;R<N&&re[R]===0;R++);for(I<R&&(I=R),P=1,k=1;k<=t;k++)if(P<<=1,P-=re[k],P<0)return-1;if(P>0&&(h===i||N!==1))return-1;for(de[1]=0,k=1;k<t;k++)de[k+1]=de[k]+re[k];for(A=0;A<b;A++)m[y+A]!==0&&(w[de[m[y+A]]++]=A);if(h===i?(W=oe=w,ee=19):h===s?(W=o,te-=257,oe=l,Ie-=257,ee=256):(W=c,oe=u,ee=-1),F=0,A=0,k=R,ne=x,O=I,L=0,G=-1,V=1<<I,$=V-1,h===s&&V>n||h===a&&V>r)return 1;for(;;){je=k-L,w[A]<ee?(Me=0,Se=w[A]):w[A]>ee?(Me=oe[Ie+w[A]],Se=W[te+w[A]]):(Me=96,Se=0),J=1<<k-L,U=1<<O,R=U;do U-=J,v[ne+(F>>L)+U]=je<<24|Me<<16|Se|0;while(U!==0);for(J=1<<k-1;F&J;)J>>=1;if(J!==0?(F&=J-1,F+=J):F=0,A++,--re[k]===0){if(k===N)break;k=m[y+w[A]]}if(k>I&&(F&$)!==G){for(L===0&&(L=I),ne+=R,O=k-L,P=1<<O;O+L<N&&(P-=re[O+L],!(P<=0));)O++,P<<=1;if(V+=1<<O,h===s&&V>n||h===a&&V>r)return 1;G=F&$,v[G]=I<<24|O<<16|ne-x|0}}return F!==0&&(v[ne+F]=k-L<<24|64<<16|0),S.bits=I,0},zM}var J9;function DCe(){if(J9)return kl;J9=1;var e=jh(),t=aZ(),n=oZ(),r=OCe(),i=PCe(),s=0,a=1,o=2,l=4,c=5,u=6,d=0,h=1,m=2,y=-2,b=-3,v=-4,x=-5,w=8,S=1,C=2,k=3,A=4,R=5,N=6,I=7,O=8,L=9,P=10,V=11,F=12,J=13,U=14,G=15,$=16,ne=17,W=18,te=19,ee=20,re=21,de=22,oe=23,Ie=24,je=25,Me=26,Se=27,qe=28,Qe=29,We=30,Re=31,K=32,ge=852,Te=592,ce=15,le=ce;function ie(we){return(we>>>24&255)+(we>>>8&65280)+((we&65280)<<8)+((we&255)<<24)}function Ee(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Be(we){var Ne;return!we||!we.state?y:(Ne=we.state,we.total_in=we.total_out=Ne.total=0,we.msg="",Ne.wrap&&(we.adler=Ne.wrap&1),Ne.mode=S,Ne.last=0,Ne.havedict=0,Ne.dmax=32768,Ne.head=null,Ne.hold=0,Ne.bits=0,Ne.lencode=Ne.lendyn=new e.Buf32(ge),Ne.distcode=Ne.distdyn=new e.Buf32(Te),Ne.sane=1,Ne.back=-1,d)}function Ce(we){var Ne;return!we||!we.state?y:(Ne=we.state,Ne.wsize=0,Ne.whave=0,Ne.wnext=0,Be(we))}function ct(we,Ne){var fe,bt;return!we||!we.state||(bt=we.state,Ne<0?(fe=0,Ne=-Ne):(fe=(Ne>>4)+1,Ne<48&&(Ne&=15)),Ne&&(Ne<8||Ne>15))?y:(bt.window!==null&&bt.wbits!==Ne&&(bt.window=null),bt.wrap=fe,bt.wbits=Ne,Ce(we))}function Tt(we,Ne){var fe,bt;return we?(bt=new Ee,we.state=bt,bt.window=null,fe=ct(we,Ne),fe!==d&&(we.state=null),fe):y}function ft(we){return Tt(we,le)}var Pt=!0,Ut,Bt;function tn(we){if(Pt){var Ne;for(Ut=new e.Buf32(512),Bt=new e.Buf32(32),Ne=0;Ne<144;)we.lens[Ne++]=8;for(;Ne<256;)we.lens[Ne++]=9;for(;Ne<280;)we.lens[Ne++]=7;for(;Ne<288;)we.lens[Ne++]=8;for(i(a,we.lens,0,288,Ut,0,we.work,{bits:9}),Ne=0;Ne<32;)we.lens[Ne++]=5;i(o,we.lens,0,32,Bt,0,we.work,{bits:5}),Pt=!1}we.lencode=Ut,we.lenbits=9,we.distcode=Bt,we.distbits=5}function xe(we,Ne,fe,bt){var ot,B=we.state;return B.window===null&&(B.wsize=1<<B.wbits,B.wnext=0,B.whave=0,B.window=new e.Buf8(B.wsize)),bt>=B.wsize?(e.arraySet(B.window,Ne,fe-B.wsize,B.wsize,0),B.wnext=0,B.whave=B.wsize):(ot=B.wsize-B.wnext,ot>bt&&(ot=bt),e.arraySet(B.window,Ne,fe-bt,ot,B.wnext),bt-=ot,bt?(e.arraySet(B.window,Ne,fe-bt,bt,0),B.wnext=bt,B.whave=B.wsize):(B.wnext+=ot,B.wnext===B.wsize&&(B.wnext=0),B.whave<B.wsize&&(B.whave+=ot))),0}function D(we,Ne){var fe,bt,ot,B,$e,it,ye,_e,ze,kt,he,Y,H,X,be=0,Oe,Ge,wt,en,$n,Xt,nn,un,pr=new e.Buf8(4),Er,ti,ni=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!we||!we.state||!we.output||!we.input&&we.avail_in!==0)return y;fe=we.state,fe.mode===F&&(fe.mode=J),$e=we.next_out,ot=we.output,ye=we.avail_out,B=we.next_in,bt=we.input,it=we.avail_in,_e=fe.hold,ze=fe.bits,kt=it,he=ye,un=d;e:for(;;)switch(fe.mode){case S:if(fe.wrap===0){fe.mode=J;break}for(;ze<16;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if(fe.wrap&2&&_e===35615){fe.check=0,pr[0]=_e&255,pr[1]=_e>>>8&255,fe.check=n(fe.check,pr,2,0),_e=0,ze=0,fe.mode=C;break}if(fe.flags=0,fe.head&&(fe.head.done=!1),!(fe.wrap&1)||(((_e&255)<<8)+(_e>>8))%31){we.msg="incorrect header check",fe.mode=We;break}if((_e&15)!==w){we.msg="unknown compression method",fe.mode=We;break}if(_e>>>=4,ze-=4,nn=(_e&15)+8,fe.wbits===0)fe.wbits=nn;else if(nn>fe.wbits){we.msg="invalid window size",fe.mode=We;break}fe.dmax=1<<nn,we.adler=fe.check=1,fe.mode=_e&512?P:F,_e=0,ze=0;break;case C:for(;ze<16;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if(fe.flags=_e,(fe.flags&255)!==w){we.msg="unknown compression method",fe.mode=We;break}if(fe.flags&57344){we.msg="unknown header flags set",fe.mode=We;break}fe.head&&(fe.head.text=_e>>8&1),fe.flags&512&&(pr[0]=_e&255,pr[1]=_e>>>8&255,fe.check=n(fe.check,pr,2,0)),_e=0,ze=0,fe.mode=k;case k:for(;ze<32;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}fe.head&&(fe.head.time=_e),fe.flags&512&&(pr[0]=_e&255,pr[1]=_e>>>8&255,pr[2]=_e>>>16&255,pr[3]=_e>>>24&255,fe.check=n(fe.check,pr,4,0)),_e=0,ze=0,fe.mode=A;case A:for(;ze<16;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}fe.head&&(fe.head.xflags=_e&255,fe.head.os=_e>>8),fe.flags&512&&(pr[0]=_e&255,pr[1]=_e>>>8&255,fe.check=n(fe.check,pr,2,0)),_e=0,ze=0,fe.mode=R;case R:if(fe.flags&1024){for(;ze<16;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}fe.length=_e,fe.head&&(fe.head.extra_len=_e),fe.flags&512&&(pr[0]=_e&255,pr[1]=_e>>>8&255,fe.check=n(fe.check,pr,2,0)),_e=0,ze=0}else fe.head&&(fe.head.extra=null);fe.mode=N;case N:if(fe.flags&1024&&(Y=fe.length,Y>it&&(Y=it),Y&&(fe.head&&(nn=fe.head.extra_len-fe.length,fe.head.extra||(fe.head.extra=new Array(fe.head.extra_len)),e.arraySet(fe.head.extra,bt,B,Y,nn)),fe.flags&512&&(fe.check=n(fe.check,bt,Y,B)),it-=Y,B+=Y,fe.length-=Y),fe.length))break e;fe.length=0,fe.mode=I;case I:if(fe.flags&2048){if(it===0)break e;Y=0;do nn=bt[B+Y++],fe.head&&nn&&fe.length<65536&&(fe.head.name+=String.fromCharCode(nn));while(nn&&Y<it);if(fe.flags&512&&(fe.check=n(fe.check,bt,Y,B)),it-=Y,B+=Y,nn)break e}else fe.head&&(fe.head.name=null);fe.length=0,fe.mode=O;case O:if(fe.flags&4096){if(it===0)break e;Y=0;do nn=bt[B+Y++],fe.head&&nn&&fe.length<65536&&(fe.head.comment+=String.fromCharCode(nn));while(nn&&Y<it);if(fe.flags&512&&(fe.check=n(fe.check,bt,Y,B)),it-=Y,B+=Y,nn)break e}else fe.head&&(fe.head.comment=null);fe.mode=L;case L:if(fe.flags&512){for(;ze<16;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if(_e!==(fe.check&65535)){we.msg="header crc mismatch",fe.mode=We;break}_e=0,ze=0}fe.head&&(fe.head.hcrc=fe.flags>>9&1,fe.head.done=!0),we.adler=fe.check=0,fe.mode=F;break;case P:for(;ze<32;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}we.adler=fe.check=ie(_e),_e=0,ze=0,fe.mode=V;case V:if(fe.havedict===0)return we.next_out=$e,we.avail_out=ye,we.next_in=B,we.avail_in=it,fe.hold=_e,fe.bits=ze,m;we.adler=fe.check=1,fe.mode=F;case F:if(Ne===c||Ne===u)break e;case J:if(fe.last){_e>>>=ze&7,ze-=ze&7,fe.mode=Se;break}for(;ze<3;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}switch(fe.last=_e&1,_e>>>=1,ze-=1,_e&3){case 0:fe.mode=U;break;case 1:if(tn(fe),fe.mode=ee,Ne===u){_e>>>=2,ze-=2;break e}break;case 2:fe.mode=ne;break;case 3:we.msg="invalid block type",fe.mode=We}_e>>>=2,ze-=2;break;case U:for(_e>>>=ze&7,ze-=ze&7;ze<32;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if((_e&65535)!==(_e>>>16^65535)){we.msg="invalid stored block lengths",fe.mode=We;break}if(fe.length=_e&65535,_e=0,ze=0,fe.mode=G,Ne===u)break e;case G:fe.mode=$;case $:if(Y=fe.length,Y){if(Y>it&&(Y=it),Y>ye&&(Y=ye),Y===0)break e;e.arraySet(ot,bt,B,Y,$e),it-=Y,B+=Y,ye-=Y,$e+=Y,fe.length-=Y;break}fe.mode=F;break;case ne:for(;ze<14;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if(fe.nlen=(_e&31)+257,_e>>>=5,ze-=5,fe.ndist=(_e&31)+1,_e>>>=5,ze-=5,fe.ncode=(_e&15)+4,_e>>>=4,ze-=4,fe.nlen>286||fe.ndist>30){we.msg="too many length or distance symbols",fe.mode=We;break}fe.have=0,fe.mode=W;case W:for(;fe.have<fe.ncode;){for(;ze<3;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}fe.lens[ni[fe.have++]]=_e&7,_e>>>=3,ze-=3}for(;fe.have<19;)fe.lens[ni[fe.have++]]=0;if(fe.lencode=fe.lendyn,fe.lenbits=7,Er={bits:fe.lenbits},un=i(s,fe.lens,0,19,fe.lencode,0,fe.work,Er),fe.lenbits=Er.bits,un){we.msg="invalid code lengths set",fe.mode=We;break}fe.have=0,fe.mode=te;case te:for(;fe.have<fe.nlen+fe.ndist;){for(;be=fe.lencode[_e&(1<<fe.lenbits)-1],Oe=be>>>24,Ge=be>>>16&255,wt=be&65535,!(Oe<=ze);){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if(wt<16)_e>>>=Oe,ze-=Oe,fe.lens[fe.have++]=wt;else{if(wt===16){for(ti=Oe+2;ze<ti;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if(_e>>>=Oe,ze-=Oe,fe.have===0){we.msg="invalid bit length repeat",fe.mode=We;break}nn=fe.lens[fe.have-1],Y=3+(_e&3),_e>>>=2,ze-=2}else if(wt===17){for(ti=Oe+3;ze<ti;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}_e>>>=Oe,ze-=Oe,nn=0,Y=3+(_e&7),_e>>>=3,ze-=3}else{for(ti=Oe+7;ze<ti;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}_e>>>=Oe,ze-=Oe,nn=0,Y=11+(_e&127),_e>>>=7,ze-=7}if(fe.have+Y>fe.nlen+fe.ndist){we.msg="invalid bit length repeat",fe.mode=We;break}for(;Y--;)fe.lens[fe.have++]=nn}}if(fe.mode===We)break;if(fe.lens[256]===0){we.msg="invalid code -- missing end-of-block",fe.mode=We;break}if(fe.lenbits=9,Er={bits:fe.lenbits},un=i(a,fe.lens,0,fe.nlen,fe.lencode,0,fe.work,Er),fe.lenbits=Er.bits,un){we.msg="invalid literal/lengths set",fe.mode=We;break}if(fe.distbits=6,fe.distcode=fe.distdyn,Er={bits:fe.distbits},un=i(o,fe.lens,fe.nlen,fe.ndist,fe.distcode,0,fe.work,Er),fe.distbits=Er.bits,un){we.msg="invalid distances set",fe.mode=We;break}if(fe.mode=ee,Ne===u)break e;case ee:fe.mode=re;case re:if(it>=6&&ye>=258){we.next_out=$e,we.avail_out=ye,we.next_in=B,we.avail_in=it,fe.hold=_e,fe.bits=ze,r(we,he),$e=we.next_out,ot=we.output,ye=we.avail_out,B=we.next_in,bt=we.input,it=we.avail_in,_e=fe.hold,ze=fe.bits,fe.mode===F&&(fe.back=-1);break}for(fe.back=0;be=fe.lencode[_e&(1<<fe.lenbits)-1],Oe=be>>>24,Ge=be>>>16&255,wt=be&65535,!(Oe<=ze);){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if(Ge&&(Ge&240)===0){for(en=Oe,$n=Ge,Xt=wt;be=fe.lencode[Xt+((_e&(1<<en+$n)-1)>>en)],Oe=be>>>24,Ge=be>>>16&255,wt=be&65535,!(en+Oe<=ze);){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}_e>>>=en,ze-=en,fe.back+=en}if(_e>>>=Oe,ze-=Oe,fe.back+=Oe,fe.length=wt,Ge===0){fe.mode=Me;break}if(Ge&32){fe.back=-1,fe.mode=F;break}if(Ge&64){we.msg="invalid literal/length code",fe.mode=We;break}fe.extra=Ge&15,fe.mode=de;case de:if(fe.extra){for(ti=fe.extra;ze<ti;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}fe.length+=_e&(1<<fe.extra)-1,_e>>>=fe.extra,ze-=fe.extra,fe.back+=fe.extra}fe.was=fe.length,fe.mode=oe;case oe:for(;be=fe.distcode[_e&(1<<fe.distbits)-1],Oe=be>>>24,Ge=be>>>16&255,wt=be&65535,!(Oe<=ze);){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if((Ge&240)===0){for(en=Oe,$n=Ge,Xt=wt;be=fe.distcode[Xt+((_e&(1<<en+$n)-1)>>en)],Oe=be>>>24,Ge=be>>>16&255,wt=be&65535,!(en+Oe<=ze);){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}_e>>>=en,ze-=en,fe.back+=en}if(_e>>>=Oe,ze-=Oe,fe.back+=Oe,Ge&64){we.msg="invalid distance code",fe.mode=We;break}fe.offset=wt,fe.extra=Ge&15,fe.mode=Ie;case Ie:if(fe.extra){for(ti=fe.extra;ze<ti;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}fe.offset+=_e&(1<<fe.extra)-1,_e>>>=fe.extra,ze-=fe.extra,fe.back+=fe.extra}if(fe.offset>fe.dmax){we.msg="invalid distance too far back",fe.mode=We;break}fe.mode=je;case je:if(ye===0)break e;if(Y=he-ye,fe.offset>Y){if(Y=fe.offset-Y,Y>fe.whave&&fe.sane){we.msg="invalid distance too far back",fe.mode=We;break}Y>fe.wnext?(Y-=fe.wnext,H=fe.wsize-Y):H=fe.wnext-Y,Y>fe.length&&(Y=fe.length),X=fe.window}else X=ot,H=$e-fe.offset,Y=fe.length;Y>ye&&(Y=ye),ye-=Y,fe.length-=Y;do ot[$e++]=X[H++];while(--Y);fe.length===0&&(fe.mode=re);break;case Me:if(ye===0)break e;ot[$e++]=fe.length,ye--,fe.mode=re;break;case Se:if(fe.wrap){for(;ze<32;){if(it===0)break e;it--,_e|=bt[B++]<<ze,ze+=8}if(he-=ye,we.total_out+=he,fe.total+=he,he&&(we.adler=fe.check=fe.flags?n(fe.check,ot,he,$e-he):t(fe.check,ot,he,$e-he)),he=ye,(fe.flags?_e:ie(_e))!==fe.check){we.msg="incorrect data check",fe.mode=We;break}_e=0,ze=0}fe.mode=qe;case qe:if(fe.wrap&&fe.flags){for(;ze<32;){if(it===0)break e;it--,_e+=bt[B++]<<ze,ze+=8}if(_e!==(fe.total&4294967295)){we.msg="incorrect length check",fe.mode=We;break}_e=0,ze=0}fe.mode=Qe;case Qe:un=h;break e;case We:un=b;break e;case Re:return v;case K:default:return y}return we.next_out=$e,we.avail_out=ye,we.next_in=B,we.avail_in=it,fe.hold=_e,fe.bits=ze,(fe.wsize||he!==we.avail_out&&fe.mode<We&&(fe.mode<Se||Ne!==l))&&xe(we,we.output,we.next_out,he-we.avail_out),kt-=we.avail_in,he-=we.avail_out,we.total_in+=kt,we.total_out+=he,fe.total+=he,fe.wrap&&he&&(we.adler=fe.check=fe.flags?n(fe.check,ot,he,we.next_out-he):t(fe.check,ot,he,we.next_out-he)),we.data_type=fe.bits+(fe.last?64:0)+(fe.mode===F?128:0)+(fe.mode===ee||fe.mode===G?256:0),(kt===0&&he===0||Ne===l)&&un===d&&(un=x),un}function Z(we){if(!we||!we.state)return y;var Ne=we.state;return Ne.window&&(Ne.window=null),we.state=null,d}function me(we,Ne){var fe;return!we||!we.state||(fe=we.state,(fe.wrap&2)===0)?y:(fe.head=Ne,Ne.done=!1,d)}function De(we,Ne){var fe=Ne.length,bt,ot,B;return!we||!we.state||(bt=we.state,bt.wrap!==0&&bt.mode!==V)?y:bt.mode===V&&(ot=1,ot=t(ot,Ne,fe,0),ot!==bt.check)?b:(B=xe(we,Ne,fe,fe),B?(bt.mode=Re,v):(bt.havedict=1,d))}return kl.inflateReset=Ce,kl.inflateReset2=ct,kl.inflateResetKeep=Be,kl.inflateInit=ft,kl.inflateInit2=Tt,kl.inflate=D,kl.inflateEnd=Z,kl.inflateGetHeader=me,kl.inflateSetDictionary=De,kl.inflateInfo="pako inflate (from Nodeca project)",kl}var UM,Q9;function uZ(){return Q9||(Q9=1,UM={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),UM}var qM,ez;function FCe(){if(ez)return qM;ez=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return qM=e,qM}var tz;function LCe(){if(tz)return Lg;tz=1;var e=DCe(),t=jh(),n=lZ(),r=uZ(),i=rD(),s=cZ(),a=FCe(),o=Object.prototype.toString;function l(d){if(!(this instanceof l))return new l(d);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},d||{});var h=this.options;h.raw&&h.windowBits>=0&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),h.windowBits>=0&&h.windowBits<16&&!(d&&d.windowBits)&&(h.windowBits+=32),h.windowBits>15&&h.windowBits<48&&(h.windowBits&15)===0&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var m=e.inflateInit2(this.strm,h.windowBits);if(m!==r.Z_OK)throw new Error(i[m]);if(this.header=new a,e.inflateGetHeader(this.strm,this.header),h.dictionary&&(typeof h.dictionary=="string"?h.dictionary=n.string2buf(h.dictionary):o.call(h.dictionary)==="[object ArrayBuffer]"&&(h.dictionary=new Uint8Array(h.dictionary)),h.raw&&(m=e.inflateSetDictionary(this.strm,h.dictionary),m!==r.Z_OK)))throw new Error(i[m])}l.prototype.push=function(d,h){var m=this.strm,y=this.options.chunkSize,b=this.options.dictionary,v,x,w,S,C,k=!1;if(this.ended)return!1;x=h===~~h?h:h===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof d=="string"?m.input=n.binstring2buf(d):o.call(d)==="[object ArrayBuffer]"?m.input=new Uint8Array(d):m.input=d,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new t.Buf8(y),m.next_out=0,m.avail_out=y),v=e.inflate(m,r.Z_NO_FLUSH),v===r.Z_NEED_DICT&&b&&(v=e.inflateSetDictionary(this.strm,b)),v===r.Z_BUF_ERROR&&k===!0&&(v=r.Z_OK,k=!1),v!==r.Z_STREAM_END&&v!==r.Z_OK)return this.onEnd(v),this.ended=!0,!1;m.next_out&&(m.avail_out===0||v===r.Z_STREAM_END||m.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(w=n.utf8border(m.output,m.next_out),S=m.next_out-w,C=n.buf2string(m.output,w),m.next_out=S,m.avail_out=y-S,S&&t.arraySet(m.output,m.output,w,S,0),this.onData(C)):this.onData(t.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&(k=!0)}while((m.avail_in>0||m.avail_out===0)&&v!==r.Z_STREAM_END);return v===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(v=e.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),m.avail_out=0),!0)},l.prototype.onData=function(d){this.chunks.push(d)},l.prototype.onEnd=function(d){d===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg};function c(d,h){var m=new l(h);if(m.push(d,!0),m.err)throw m.msg||i[m.err];return m.result}function u(d,h){return h=h||{},h.raw=!0,c(d,h)}return Lg.Inflate=l,Lg.inflate=c,Lg.inflateRaw=u,Lg.ungzip=c,Lg}var VM,nz;function BCe(){if(nz)return VM;nz=1;var e=jh().assign,t=jCe(),n=LCe(),r=uZ(),i={};return e(i,t,n,r),VM=i,VM}var $Ce=BCe();const iD=xa($Ce);var WM,rz;function zCe(){if(rz)return WM;rz=1;const e=(t,n)=>function(...r){const i=n.promiseModule;return new i((s,a)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?a(o):(o.shift(),s(o)):s(o)}):n.errorFirst?r.push((o,l)=>{o?a(o):s(l)}):r.push(s),t.apply(this,r)})};return WM=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const i=a=>{const o=l=>typeof l=="string"?a===l:l.test(a);return n.include?n.include.some(o):!n.exclude.some(o)};let s;r==="function"?s=function(...a){return n.excludeMain?t(...a):e(t,n).apply(this,a)}:s=Object.create(Object.getPrototypeOf(t));for(const a in t){const o=t[a];s[a]=typeof o=="function"&&i(a)?e(o,n):o}return s},WM}var UCe=zCe();const HM=xa(UCe);var GM,iz;function qCe(){if(iz)return GM;iz=1;var e={};function t(G){return Array.isArray(G)?G:[G]}const n="",r=" ",i="\\",s=/^\s+$/,a=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,c=/\r?\n/g,u=/^\.*\/|^\.+$/,d="/";let h="node-ignore";typeof Symbol<"u"&&(h=Symbol.for("node-ignore"));const m=h,y=(G,$,ne)=>Object.defineProperty(G,$,{value:ne}),b=/([0-z])-([0-z])/g,v=()=>!1,x=G=>G.replace(b,($,ne,W)=>ne.charCodeAt(0)<=W.charCodeAt(0)?$:n),w=G=>{const{length:$}=G;return G.slice(0,$-$%2)},S=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(G,$,ne)=>$+(ne.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(G,$)=>{const{length:ne}=$;return $.slice(0,ne-ne%2)+r}],[/[\\$.|*+(){^]/g,G=>`\\${G}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(G,$,ne)=>$+6<ne.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(G,$,ne)=>{const W=ne.replace(/\\\*/g,"[^\\/]*");return $+W}],[/\\\\\\(?=[$.|*+(){^])/g,()=>i],[/\\\\/g,()=>i],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(G,$,ne,W,te)=>$===i?`\\[${ne}${w(W)}${te}`:te==="]"&&W.length%2===0?`[${x(ne)}${W}]`:"[]"],[/(?:[^*])$/,G=>/\/$/.test(G)?`${G}$`:`${G}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(G,$)=>`${$?`${$}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(G,$)=>{let ne=C[G];return ne||(ne=S.reduce((W,[te,ee])=>W.replace(te,ee.bind(G)),G),C[G]=ne),$?new RegExp(ne,"i"):new RegExp(ne)},A=G=>typeof G=="string",R=G=>G&&A(G)&&!s.test(G)&&!a.test(G)&&G.indexOf("#")!==0,N=G=>G.split(c);class I{constructor($,ne,W,te){this.origin=$,this.pattern=ne,this.negative=W,this.regex=te}}const O=(G,$)=>{const ne=G;let W=!1;G.indexOf("!")===0&&(W=!0,G=G.substr(1)),G=G.replace(o,"!").replace(l,"#");const te=k(G,$);return new I(ne,G,W,te)},L=(G,$)=>{throw new $(G)},P=(G,$,ne)=>A(G)?G?P.isNotRelative(G)?ne(`path should be a \`path.relative()\`d string, but got "${$}"`,RangeError):!0:ne("path must not be empty",TypeError):ne(`path must be a string, but got \`${$}\``,TypeError),V=G=>u.test(G);P.isNotRelative=V,P.convert=G=>G;class F{constructor({ignorecase:$=!0,ignoreCase:ne=$,allowRelativePaths:W=!1}={}){y(this,m,!0),this._rules=[],this._ignoreCase=ne,this._allowRelativePaths=W,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern($){if($&&$[m]){this._rules=this._rules.concat($._rules),this._added=!0;return}if(R($)){const ne=O($,this._ignoreCase);this._added=!0,this._rules.push(ne)}}add($){return this._added=!1,t(A($)?N($):$).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern($){return this.add($)}_testOne($,ne){let W=!1,te=!1;return this._rules.forEach(ee=>{const{negative:re}=ee;if(te===re&&W!==te||re&&!W&&!te&&!ne)return;ee.regex.test($)&&(W=!re,te=re)}),{ignored:W,unignored:te}}_test($,ne,W,te){const ee=$&&P.convert($);return P(ee,$,this._allowRelativePaths?v:L),this._t(ee,ne,W,te)}_t($,ne,W,te){if($ in ne)return ne[$];if(te||(te=$.split(d)),te.pop(),!te.length)return ne[$]=this._testOne($,W);const ee=this._t(te.join(d)+d,ne,W,te);return ne[$]=ee.ignored?ee:this._testOne($,W)}ignores($){return this._test($,this._ignoreCache,!1).ignored}createFilter(){return $=>!this.ignores($)}filter($){return t($).filter(this.createFilter())}test($){return this._test($,this._testCache,!0)}}const J=G=>new F(G),U=G=>P(G&&P.convert(G),G,v);if(J.isPathValid=U,J.default=J,GM=J,typeof us<"u"&&(e&&e.IGNORE_TEST_WIN32||us.platform==="win32")){const G=ne=>/^\\\\\?\\/.test(ne)||/["<>|\u0000-\u001F]+/u.test(ne)?ne:ne.replace(/\\/g,"/");P.convert=G;const $=/^[a-z]:\//i;P.isNotRelative=ne=>$.test(ne)||V(ne)}return GM}var VCe=qCe();const WCe=xa(VCe);var KM,sz;function HCe(){if(sz)return KM;sz=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,i,s){return i=i instanceof RegExp?i:new RegExp(e(i),"g"),r.replace(i,s)}var n={clean:function(i){if(typeof i!="string")throw new Error("Expected a string, received: "+i);return i=t(i,"./","/"),i=t(i,"..","."),i=t(i," ","-"),i=t(i,/^[~^:?*\\\-]/g,""),i=t(i,/[~^:?*\\]/g,"-"),i=t(i,/[~^:?*\\\-]$/g,""),i=t(i,"@{","-"),i=t(i,/\.$/g,""),i=t(i,/\/$/g,""),i=t(i,/\.lock$/g,""),i}};return KM=n,KM}var GCe=HCe();const lu=xa(GCe);var YM,az;function KCe(){return az||(az=1,YM=function(e,t){var n=e,r=t,i=n.length,s=r.length,a=!1,o=null,l=i+1,c=[],u=[],d=[],h="",m=-1,y=0,b=1,v,x,w=function(){i>=s&&(v=n,x=i,n=r,r=v,i=s,s=x,a=!0,l=i+1)},S=function(R,N,I){return{x:R,y:N,k:I}},C=function(R,N){return{elem:R,t:N}},k=function(R,N,I){var O,L,P;for(N>I?O=c[R-1+l]:O=c[R+1+l],P=Math.max(N,I),L=P-R;L<i&&P<s&&n[L]===r[P];)++L,++P;return c[R+l]=u.length,u[u.length]=new S(L,P,O),P},A=function(R){var N,I,O;for(N=I=0,O=R.length-1;O>=0;--O)for(;N<R[O].x||I<R[O].y;)R[O].y-R[O].x>I-N?(a?d[d.length]=new C(r[I],m):d[d.length]=new C(r[I],b),++I):R[O].y-R[O].x<I-N?(a?d[d.length]=new C(n[N],b):d[d.length]=new C(n[N],m),++N):(d[d.length]=new C(n[N],y),h+=n[N],++N,++I)};return w(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return h},getses:function(){return d},compose:function(){var R,N,I,O,L,P,V,F;for(R=s-i,N=i+s+3,I={},V=0;V<N;++V)I[V]=-1,c[V]=-1;O=-1;do{for(++O,F=-O;F<=R-1;++F)I[F+l]=k(F,I[F-1+l]+1,I[F+1+l]);for(F=R+O;F>=R+1;--F)I[F+l]=k(F,I[F-1+l]+1,I[F+1+l]);I[R+l]=k(R,I[R-1+l]+1,I[R+1+l])}while(I[R+l]!==s);for(o=R+2*O,L=c[R+l],P=[];L!==-1;)P[P.length]=new S(u[L].x,u[L].y,null),L=u[L].k;A(P)}}}),YM}var ZM,oz;function YCe(){if(oz)return ZM;oz=1;var e=KCe();function t(s,a){var o=new e(s,a);o.compose();for(var l=o.getses(),c,u,d=s.length-1,h=a.length-1,m=l.length-1;m>=0;--m)l[m].t===o.SES_COMMON?(u?(u.chain={file1index:d,file2index:h,chain:null},u=u.chain):(c={file1index:d,file2index:h,chain:null},u=c),d--,h--):l[m].t===o.SES_DELETE?d--:l[m].t===o.SES_ADD&&h--;var y={file1index:-1,file2index:-1,chain:null};return u?(u.chain=y,c):y}function n(s,a){for(var o=[],l=s.length,c=a.length,u=t(s,a);u!==null;u=u.chain){var d=l-u.file1index-1,h=c-u.file2index-1;l=u.file1index,c=u.file2index,(d||h)&&o.push({file1:[l+1,d],file2:[c+1,h]})}return o.reverse(),o}function r(s,a,o){var l,c=n(a,s),u=n(a,o),d=[];function h($,ne){d.push([$.file1[0],ne,$.file1[1],$.file2[0],$.file2[1]])}for(l=0;l<c.length;l++)h(c[l],0);for(l=0;l<u.length;l++)h(u[l],2);d.sort(function($,ne){return $[0]-ne[0]});var m=[],y=0;function b($){$>y&&(m.push([1,y,$-y]),y=$)}for(var v=0;v<d.length;v++){for(var x=v,w=d[v],S=w[0],C=S+w[2];v<d.length-1;){var k=d[v+1],A=k[0];if(A>C)break;C=Math.max(C,A+k[2]),v++}if(b(S),x==v)w[4]>0&&m.push([w[1],w[3],w[4]]);else{var R={0:[s.length,-1,a.length,-1],2:[o.length,-1,a.length,-1]};for(l=x;l<=v;l++){w=d[l];var N=w[1],I=R[N],O=w[0],L=O+w[2],P=w[3],V=P+w[4];I[0]=Math.min(P,I[0]),I[1]=Math.max(V,I[1]),I[2]=Math.min(O,I[2]),I[3]=Math.max(L,I[3])}var F=R[0][0]+(S-R[0][2]),J=R[0][1]+(C-R[0][3]),U=R[2][0]+(S-R[2][2]),G=R[2][1]+(C-R[2][3]);m.push([-1,F,J-F,S,C-S,U,G-U])}y=C}return b(a.length),m}function i(s,a,o){var l=[],c=[s,a,o],u=r(s,a,o),d=[];function h(){d.length&&l.push({ok:d}),d=[]}function m(w){for(var S=0;S<w.length;S++)d.push(w[S])}function y(w){if(w[2]!=w[6])return!0;for(var S=w[1],C=w[5],k=0;k<w[2];k++)if(s[k+S]!=o[k+C])return!0;return!1}for(var b=0;b<u.length;b++){var v=u[b],x=v[0];x==-1?y(v)?(h(),l.push({conflict:{a:s.slice(v[1],v[1]+v[2]),aIndex:v[1],o:a.slice(v[3],v[3]+v[4]),oIndex:v[3],b:o.slice(v[5],v[5]+v[6]),bIndex:v[5]}})):m(c[0].slice(v[1],v[1]+v[2])):m(c[x].slice(v[1],v[1]+v[2]))}return h(),l}return ZM=i,ZM}var ZCe=YCe();const XCe=xa(ZCe);class Zr extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Zr(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class s1 extends Zr{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=s1.code,this.data={filepaths:t}}}s1.code="UnmergedPathsError";class yr extends Zr{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=yr.code,this.data={message:t}}}yr.code="InternalError";class Py extends Zr{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Py.code,this.data={filepath:t}}}Py.code="UnsafeFilepathError";class su{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const i=this.buffer.write(t,this._start,n,r);return this._start+=n,i}copy(t,n,r){const i=t.copy(this.buffer,this._start,n,r);return this._start+=i,i}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function VE(e,t){return-(e<t)||+(e>t)}function dZ(e,t){return VE(e.path,t.path)}function fZ(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const Wc=2**32;function lz(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const i=Math.floor(n/1e3),s=(n-i*1e3)*1e6;return[i,s]}function V0(e){const[t,n]=lz(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,i]=lz(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%Wc,ctimeNanoseconds:n%Wc,mtimeSeconds:r%Wc,mtimeNanoseconds:i%Wc,dev:e.dev%Wc,ino:e.ino%Wc,mode:fZ(e.mode%Wc),uid:e.uid%Wc,gid:e.gid%Wc,size:e.size>-1?e.size%Wc:0}}function JCe(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let XM=null;async function Ld(e){return XM===null&&(XM=await eke()),XM?hZ(e):QCe(e)}function QCe(e){return new sZ().update(e).digest("hex")}async function hZ(e){const t=await crypto.subtle.digest("SHA-1",e);return JCe(t)}async function eke(){try{if(await hZ(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function tke(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function nke(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(on.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Ap{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(on.isBuffer(t))return Ap.fromBuffer(t);if(t===null)return new Ap(null);throw new yr("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new yr("Index file is empty (.git/index)");const n=new Ap,r=new su(t),i=r.toString("utf8",4);if(i!=="DIRC")throw new yr(`Invalid dircache magic file number: ${i}`);const s=await Ld(t.slice(0,-20)),a=t.slice(-20).toString("hex");if(a!==s)throw new yr(`Invalid checksum in GitIndex buffer: expected ${a} but saw ${s}`);const o=r.readUInt32BE();if(o!==2)throw new yr(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let c=0;for(;!r.eof()&&c<l;){const u={};u.ctimeSeconds=r.readUInt32BE(),u.ctimeNanoseconds=r.readUInt32BE(),u.mtimeSeconds=r.readUInt32BE(),u.mtimeNanoseconds=r.readUInt32BE(),u.dev=r.readUInt32BE(),u.ino=r.readUInt32BE(),u.mode=r.readUInt32BE(),u.uid=r.readUInt32BE(),u.gid=r.readUInt32BE(),u.size=r.readUInt32BE(),u.oid=r.slice(20).toString("hex");const d=r.readUInt16BE();u.flags=tke(d);const h=t.indexOf(0,r.tell()+1)-r.tell();if(h<1)throw new yr(`Got a path length of: ${h}`);if(u.path=r.toString("utf8",h),u.path.includes("..\\")||u.path.includes("../"))throw new Py(u.path);let m=8-(r.tell()-12)%8;for(m===0&&(m=8);m--;){const y=r.readUInt8();if(y!==0)throw new yr(`Expected 1-8 null characters but got '${y}' after ${u.path}`);if(r.eof())throw new yr("Unexpected end of file")}u.stages=[],n._addEntry(u),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(dZ)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:i=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=V0(n);const s=on.from(t),a={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:i,nameLength:s.length<4095?s.length:4095},stages:[]};this._addEntry(a),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=on.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,i=on.alloc(r),s=new su(i),a=V0(t);return s.writeUInt32BE(a.ctimeSeconds),s.writeUInt32BE(a.ctimeNanoseconds),s.writeUInt32BE(a.mtimeSeconds),s.writeUInt32BE(a.mtimeNanoseconds),s.writeUInt32BE(a.dev),s.writeUInt32BE(a.ino),s.writeUInt32BE(a.mode),s.writeUInt32BE(a.uid),s.writeUInt32BE(a.gid),s.writeUInt32BE(a.size),s.write(t.oid,20,"hex"),s.writeUInt16BE(nke(t)),s.write(t.path,n.length,"utf8"),i}async toObject(){const t=on.alloc(12),n=new su(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(Ap._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(Ap._entryToBuffer(l));r=await Promise.all(r);const i=on.concat(r),s=on.concat([t,i]),a=await Ld(s);return on.concat([s,on.from(a,"hex")])}}function PC(e,t,n=!0,r=!0){const i=V0(e),s=V0(t);return n&&i.mode!==s.mode||i.mtimeSeconds!==s.mtimeSeconds||i.ctimeSeconds!==s.ctimeSeconds||i.uid!==s.uid||i.gid!==s.gid||r&&i.ino!==s.ino||i.size!==s.size}let JM=null;const QM=Symbol("IndexCache");function rke(){return{map:new Map,stats:new Map}}async function ike(e,t,n){const[r,i]=await Promise.all([e.lstat(t),e.read(t)]),s=await Ap.from(i);n.map.set(t,s),n.stats.set(t,r)}async function ske(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const i=await e.lstat(t);return i===null?!1:PC(r,i)}class ra{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:i=!0},s){r[QM]||(r[QM]=rke());const a=`${n}/index`;JM===null&&(JM=new Hx({maxPending:1/0}));let o,l=[];return await JM.acquire(a,async()=>{const c=r[QM];await ske(t,a,c)&&await ike(t,a,c);const u=c.map.get(a);if(l=u.unmergedPaths,l.length&&!i)throw new s1(l);if(o=await s(u),u._dirty){const d=await u.toObject();await t.write(a,d),c.stats.set(a,await t.lstat(a)),u._dirty=!1}}),o}}function DC(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function W0(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function pZ(e){const t=new Map,n=function(i){if(!t.has(i)){const s={type:"tree",fullpath:i,basename:DC(i),metadata:{},children:[]};t.set(i,s),s.parent=n(W0(i)),s.parent&&s.parent!==s&&s.parent.children.push(s)}return t.get(i)},r=function(i,s){if(!t.has(i)){const a={type:"blob",fullpath:i,basename:DC(i),metadata:s,parent:n(W0(i)),children:[]};a.parent&&a.parent.children.push(a),t.set(i,a)}return t.get(i)};n(".");for(const i of e)r(i.path,i);return t}function ake(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new yr(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class oke{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=ra.acquire({fs:t,gitdir:n,cache:r},async function(s){return pZ(s.entries)});const i=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,i=(await this.treePromise).get(n);if(!i||i.type==="blob")return null;if(i.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const s=i.children.map(a=>a.fullpath);return s.sort(VE),s}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const i=r.type==="tree"?{}:V0(r.metadata);t._type=r.type==="tree"?"tree":ake(i.mode),t._mode=i.mode,r.type==="tree"?t._stat=void 0:t._stat=i}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const WE=Symbol("GitWalkSymbol");function Dy(){const e=Object.create(null);return Object.defineProperty(e,WE,{value:function({fs:t,gitdir:n,cache:r}){return new oke({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class Si extends Zr{constructor(t){super(`Could not find ${t}.`),this.code=this.name=Si.code,this.data={what:t}}}Si.code="NotFoundError";class so extends Zr{constructor(t,n,r,i){super(`Object ${t} ${i?`at ${i}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=so.code,this.data={oid:t,actual:n,expected:r,filepath:i}}}so.code="ObjectTypeError";class fh extends Zr{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=fh.code,this.data={value:t}}}fh.code="InvalidOidError";class a1 extends Zr{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=a1.code,this.data={remote:t}}}a1.code="NoRefspecError";class FC{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const i=r.indexOf(" ");if(r.startsWith("^")){const s=r.slice(1);return this.refs.set(n+"^{}",s),{line:r,ref:n,peeled:s}}else{const s=r.slice(0,i);return n=r.slice(i+1),this.refs.set(n,s),{line:r,ref:n,oid:s}}})}return this}static from(t){return new FC(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class LC{constructor({remotePath:t,localPath:n,force:r,matchPrefix:i}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:i})}static from(t){const[n,r,i,s,a]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=i==="*";if(l!==(a==="*"))throw new yr("Invalid refspec");return new LC({remotePath:r,localPath:s,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class sD{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(LC.from(r));return new sD(n)}add(t){const n=LC.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const i of t){const s=r.translate(i);s&&n.push([i,s])}return n}translateOne(t){let n=null;for(const r of this.rules){const i=r.translate(t);i&&(n=i)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function lke(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),i=-(n<r)||+(n>r);return i===0?e.endsWith("^{}")?1:-1:i}const cke=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},bv=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},cz={core:{filemode:bv,bare:bv,logallrefupdates:bv,symlinks:bv,ignorecase:bv,bigFileThreshold:cke}},uke=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,dke=/^[A-Za-z0-9-.]+$/,fke=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,hke=/^[A-Za-z][A-Za-z-]*$/,pke=/^(.*?)( *[#;].*)$/,mke=e=>{const t=uke.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},gke=e=>{const t=fke.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),i=yke(r),s=bke(i);return[n,s]}return null},yke=e=>{const t=pke.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return uz(n)&&uz(r)?`${n}${r}`:n},uz=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,bke=e=>e.split("").reduce((t,n,r,i)=>{const s=n==='"'&&i[r-1]!=="\\",a=n==="\\"&&i[r+1]==='"';return s||a?t:t+n},""),dz=e=>e!=null?e.toLowerCase():null,Mj=(e,t,n)=>[dz(e),t,dz(n)].filter(r=>r!=null).join("."),fz=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),i=t.length?t.join("."):void 0;return{section:n,subsection:i,name:r,path:Mj(n,i,r),sectionPath:Mj(n,i,null),isSection:!!n}},vke=(e,t)=>e.reduce((n,r,i)=>t(r)?i:n,-1);class aD{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(i=>{let s=null,a=null;const o=i.trim(),l=mke(o),c=l!=null;if(c)[n,r]=l;else{const d=gke(o);d!=null&&([s,a]=d)}const u=Mj(n,r,s);return{line:i,isSection:c,section:n,subsection:r,name:s,value:a,path:u}}):[]}static from(t){return new aD(t)}async get(t,n=!1){const r=fz(t).path,i=this.parsedConfig.filter(s=>s.path===r).map(({section:s,name:a,value:o})=>{const l=cz[s]&&cz[s][a];return l?l(o):o});return n?i:i.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:i,subsection:s,name:a,path:o,sectionPath:l,isSection:c}=fz(t),u=vke(this.parsedConfig,d=>d.path===o);if(n==null)u!==-1&&this.parsedConfig.splice(u,1);else if(u!==-1){const d=this.parsedConfig[u],h=Object.assign({},d,{name:a,value:n,modified:!0});r?this.parsedConfig.splice(u+1,0,h):this.parsedConfig[u]=h}else{const d=this.parsedConfig.findIndex(m=>m.path===l),h={section:i,subsection:s,name:a,value:n,modified:!0,path:o};if(dke.test(i)&&hke.test(a))if(d>=0)this.parsedConfig.splice(d+1,0,h);else{const m={isSection:c,section:i,subsection:s,modified:!0,path:l};this.parsedConfig.push(m,h)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:i,value:s,modified:a=!1})=>a?i!=null&&s!=null?typeof s=="string"&&/[#;]/.test(s)?`	${i} = "${s}"`:`	${i} = ${s}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class Rs{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return aD.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const SS=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],xke=["config","description","index","shallow","commondir"];let eI;async function Lf(e,t){return eI===void 0&&(eI=new Hx),eI.acquire(e,t)}class Kt{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:i,symrefs:s,tags:a,refspecs:o=void 0,prune:l=!1,pruneTags:c=!1}){for(const v of i.values())if(!v.match(/[0-9a-f]{40}/))throw new fh(v);const u=await Rs.get({fs:t,gitdir:n});if(!o){if(o=await u.getall(`remote.${r}.fetch`),o.length===0)throw new a1(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const d=sD.from(o),h=new Map;if(c){const v=await Kt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Kt.deleteRefs({fs:t,gitdir:n,refs:v.map(x=>`refs/tags/${x}`)})}if(a){for(const v of i.keys())if(v.startsWith("refs/tags")&&!v.endsWith("^{}")&&!await Kt.exists({fs:t,gitdir:n,ref:v})){const x=i.get(v);h.set(v,x)}}const m=d.translate([...i.keys()]);for(const[v,x]of m){const w=i.get(v);h.set(x,w)}const y=d.translate([...s.keys()]);for(const[v,x]of y){const w=s.get(v),S=d.translateOne(w);S&&h.set(x,`ref: ${S}`)}const b=[];if(l){for(const v of d.localNamespaces()){const x=(await Kt.listRefs({fs:t,gitdir:n,filepath:v})).map(w=>`${v}/${w}`);for(const w of x)h.has(w)||b.push(w)}b.length>0&&await Kt.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[v,x]of h)await Lf(v,async()=>t.write(Lt.join(n,v),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:i}){if(!i.match(/[0-9a-f]{40}/))throw new fh(i);await Lf(r,async()=>t.write(Lt.join(n,r),`${i.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:i}){await Lf(r,async()=>t.write(Lt.join(n,r),`ref: ${i.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Kt.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Lt.join(n,o))));let i=await Lf("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const s=FC.from(i),a=s.refs.size;for(const o of r)s.refs.has(o)&&s.delete(o);s.refs.size<a&&(i=s.toString(),await Lf("packed-refs",async()=>t.write(`${n}/packed-refs`,i,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:i=void 0}){if(i!==void 0&&(i--,i===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Kt.resolve({fs:t,gitdir:n,ref:r,depth:i});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const s=await Kt.packedRefs({fs:t,gitdir:n}),a=SS(r).filter(o=>!xke.includes(o));for(const o of a){const l=await Lf(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||s.get(o));if(l)return Kt.resolve({fs:t,gitdir:n,ref:l.trim(),depth:i})}throw new Si(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Kt.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Kt.packedRefs({fs:t,gitdir:n}),s=SS(r);for(const a of s)if(await Lf(a,async()=>t.exists(`${n}/${a}`))||i.has(a))return a;throw new Si(r)}static async expandAgainstMap({ref:t,map:n}){const r=SS(t);for(const i of r)if(await n.has(i))return i;throw new Si(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:i}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Kt.resolveAgainstMap({ref:t,fullref:n,depth:r,map:i});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const s=SS(t);for(const a of s){const o=i.get(a);if(o)return Kt.resolveAgainstMap({ref:o.trim(),fullref:a,depth:r,map:i})}throw new Si(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Lf("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return FC.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const i=Kt.packedRefs({fs:t,gitdir:n});let s=null;try{s=await t.readdirDeep(`${n}/${r}`),s=s.map(a=>a.replace(`${n}/${r}/`,""))}catch{s=[]}for(let a of(await i).keys())a.startsWith(r)&&(a=a.replace(r+"/",""),s.includes(a)||s.push(a));return s.sort(lke),s}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Kt.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Kt.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Kt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(i=>!i.endsWith("^{}"))}}function wke(e,t){return VE(hz(e),hz(t))}function hz(e){return e.mode==="040000"?e.path+"/":e.path}function mZ(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new yr(`Unexpected GitTree entry mode: ${e}`)}function _ke(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new yr(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const i=e.indexOf(0,n);if(i===-1)throw new yr(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let s=e.slice(n,r).toString("utf8");s==="40000"&&(s="040000");const a=mZ(s),o=e.slice(r+1,i).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new Py(o);const l=e.slice(i+1,i+21).toString("hex");n=i+21,t.push({mode:s,path:o,oid:l,type:a})}return t}function Ske(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new yr(`Could not understand file mode: ${e}`)}function Cke(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Ske(e.mode),e.type||(e.type=mZ(e.mode)),e}class Ao{constructor(t){if(on.isBuffer(t))this._entries=_ke(t);else if(Array.isArray(t))this._entries=t.map(Cke);else throw new yr("invalid type passed to GitTree constructor");this._entries.sort(dZ)}static from(t){return new Ao(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(wke),on.concat(t.map(n=>{const r=on.from(n.mode.replace(/^0/,"")),i=on.from(" "),s=on.from(n.path,"utf8"),a=on.from([0]),o=on.from(n.oid,"hex");return on.concat([r,i,s,a,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Fy{static wrap({type:t,object:n}){return on.concat([on.from(`${t} ${n.byteLength.toString()}\0`),on.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),i=t.slice(0,n).toString("utf8"),s=t.slice(n+1,r).toString("utf8"),a=t.length-(r+1);if(parseInt(s)!==a)throw new yr(`Length mismatch: expected ${s} bytes but got ${a} instead.`);return{type:i,object:on.from(t.slice(r+1))}}}async function gZ({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,i=await e.read(`${t}/${r}`);return i?{object:i,format:"deflated",source:r}:null}function kke(e,t){const n=new su(e),r=pz(n);if(r!==t.byteLength)throw new yr(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const i=pz(n);let s;const a=gz(n,t);if(a.byteLength===i)s=a;else{s=on.alloc(i);const o=new su(s);for(o.copy(a);!n.eof();)o.copy(gz(n,t));const l=o.tell();if(i!==l)throw new yr(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${l} bytes`)}return s}function pz(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function mz(e,t,n){let r=0,i=0;for(;n--;)t&1&&(r|=e.readUInt8()<<i),t>>=1,i+=8;return r}function gz(e,t){const n=e.readUInt8(),r=128,i=15,s=112;if(n&r){const a=mz(e,n&i,4);let o=mz(e,(n&s)>>4,3);return o===0&&(o=65536),t.slice(a,a+o)}else return e.slice(n)}function Eke(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function yZ(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Eke(e)}class bZ{constructor(t){if(typeof on>"u")throw new Error("Missing Buffer dependency");this.stream=yZ(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?on.alloc(0):(n&&(n=on.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>Tke(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=on.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function Tke(e){return e.reduce((t,n)=>t+n.length,0)}async function Ake(e,t){const n=new bZ(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new yr(`Invalid PACK header '${r}'`);let i=await n.read(4);if(i=i.readUInt32BE(0),i!==2)throw new yr(`Invalid packfile version: ${i}`);let s=await n.read(4);if(s=s.readUInt32BE(0),!(s<1))for(;!n.eof()&&s--;){const a=n.tell(),{type:o,length:l,ofs:c,reference:u}=await Rke(n),d=new iD.Inflate;for(;!d.result;){const h=await n.chunk();if(!h)break;if(d.push(h,!1),d.err)throw new yr(`Pako error: ${d.msg}`);if(d.result){if(d.result.length!==l)throw new yr("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(h.length-d.strm.avail_in);const m=n.tell();await t({data:d.result,type:o,num:s,offset:a,end:m,reference:u,ofs:c})}}}}async function Rke(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let a=4;do t=await e.byte(),r|=(t&127)<<a,a+=7;while(t&128)}let i,s;if(n===6){let a=0;i=0;const o=[];do t=await e.byte(),i|=(t&127)<<a,a+=7,o.push(t);while(t&128);s=on.from(o)}return n===7&&(s=await e.read(20)),{type:n,length:r,ofs:i,reference:s}}async function vZ(e){return iD.inflate(e)}function Nke(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const i=n&127;t.push(i),r=n&128}while(r);return t.reduce((i,s)=>i+1<<7|s,-1)}function Mke(e,t){let n=t,r=4,i=null;do i=e.readUInt8(),n|=(i&127)<<r,r+=7;while(i&128);return n}class H0{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new su(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const s=r.readUInt32BE();if(s!==2)throw new yr(`Unable to read version ${s} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new yr("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const a=r.readUInt32BE(),o=[];for(let u=0;u<a;u++){const d=r.slice(20).toString("hex");o[u]=d}r.seek(r.tell()+4*a);const l=new Map;for(let u=0;u<a;u++)l.set(o[u],r.readUInt32BE());const c=r.slice(20).toString("hex");return new H0({hashes:o,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const i={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},s={},a=t.slice(-20).toString("hex"),o=[],l={},c=new Map;let u=null,d=null;await Ake([t],async({data:v,type:x,reference:w,offset:S,num:C})=>{u===null&&(u=C);const k=Math.floor((u-C)*100/u);k!==d&&r&&await r({phase:"Receiving objects",loaded:u-C,total:u}),d=k,x=i[x],["commit","tree","blob","tag"].includes(x)?s[S]={type:x,offset:S}:x==="ofs-delta"?s[S]={type:x,offset:S}:x==="ref-delta"&&(s[S]={type:x,offset:S})});const h=Object.keys(s).map(Number);for(const[v,x]of h.entries()){const w=v+1===h.length?t.byteLength-20:h[v+1],S=s[x],C=NCe.buf(t.slice(x,w))>>>0;S.end=w,S.crc=C}const m=new H0({pack:Promise.resolve(t),packfileSha:a,crcs:l,hashes:o,offsets:c,getExternalRefDelta:n});d=null;let y=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let v in s){v=Number(v);const x=Math.floor(y*100/u);x!==d&&r&&await r({phase:"Resolving deltas",loaded:y,total:u}),y++,d=x;const w=s[v];if(!w.oid)try{m.readDepth=0,m.externalReadDepth=0;const{type:S,object:C}=await m.readSlice({start:v});b[m.readDepth]+=1;const k=await Ld(Fy.wrap({type:S,object:C}));w.oid=k,o.push(k),c.set(k,v),l[k]=w.crc}catch{continue}}return o.sort(),m}async toBuffer(){const t=[],n=(c,u)=>{t.push(on.from(c,u))};n("ff744f63","hex"),n("00000002","hex");const r=new su(on.alloc(256*4));for(let c=0;c<256;c++){let u=0;for(const d of this.hashes)parseInt(d.slice(0,2),16)<=c&&u++;r.writeUInt32BE(u)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const i=new su(on.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.crcs[c]);t.push(i.buffer);const s=new su(on.alloc(this.hashes.length*4));for(const c of this.hashes)s.writeUInt32BE(this.offsets.get(c));t.push(s.buffer),n(this.packfileSha,"hex");const a=on.concat(t),o=await Ld(a),l=on.alloc(20);return l.write(o,"hex"),on.concat([a,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new yr(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new yr("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),i=new su(r),s=i.readUInt8(),a=s&112;let o=n[a];if(o===void 0)throw new yr("Unrecognized type: 0b"+a.toString(2));const l=s&15;let c=l;s&128&&(c=Mke(i,l));let d=null,h=null;if(o==="ofs_delta"){const y=Nke(i),b=t-y;({object:d,type:o}=await this.readSlice({start:b}))}if(o==="ref_delta"){const y=i.slice(20).toString("hex");({object:d,type:o}=await this.read({oid:y}))}const m=r.slice(i.tell());if(h=on.from(await vZ(m)),h.byteLength!==c)throw new yr(`Packfile told us object would have length ${c} but it had length ${h.byteLength}`);return d&&(h=on.from(kke(h,d))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:h}),{type:o,format:"content",object:h}}}const CS=Symbol("PackfileCache");async function Ike({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:i}){const s=await e.read(t);return H0.fromIdx({idx:s,getExternalRefDelta:n})}function oD({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:i,emitterPrefix:s}){t[CS]||(t[CS]=new Map);let a=t[CS].get(n);return a||(a=Ike({fs:e,filename:n,getExternalRefDelta:r,emitter:i,emitterPrefix:s}),t[CS].set(n,a)),a}async function jke({fs:e,cache:t,gitdir:n,oid:r,format:i="content",getExternalRefDelta:s}){let a=await e.readdir(Lt.join(n,"objects/pack"));a=a.filter(o=>o.endsWith(".idx"));for(const o of a){const l=`${n}/objects/pack/${o}`,c=await oD({fs:e,cache:t,filename:l,getExternalRefDelta:s});if(c.error)throw new yr(c.error);if(c.offsets.has(r)){if(!c.pack){const d=l.replace(/idx$/,"pack");c.pack=e.read(d)}const u=await c.read({oid:r,getExternalRefDelta:s});return u.format="content",u.source=`objects/pack/${o.replace(/idx$/,"pack")}`,u}}return null}async function Wi({fs:e,cache:t,gitdir:n,oid:r,format:i="content"}){const s=u=>Wi({fs:e,cache:t,gitdir:n,oid:u});let a;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(a={format:"wrapped",object:on.from("tree 0\0")}),a||(a=await gZ({fs:e,gitdir:n,oid:r})),!a){if(a=await jke({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:s}),!a)throw new Si(r);return a}if(i==="deflated"||(a.format==="deflated"&&(a.object=on.from(await vZ(a.object)),a.format="wrapped"),i==="wrapped"))return a;const o=await Ld(a.object);if(o!==r)throw new yr(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:c}=Fy.unwrap(a.object);if(a.type=c,a.object=l,a.format="content",i==="content")return a;throw new yr(`invalid requested format "${i}"`)}class Rc extends Zr{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=Rc.code,this.data={noun:t,where:n,canForce:r}}}Rc.code="AlreadyExistsError";class o1 extends Zr{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=o1.code,this.data={nouns:t,short:n,matches:r}}}o1.code="AmbiguousError";class l1 extends Zr{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=l1.code,this.data={filepaths:t}}}l1.code="CheckoutConflictError";class c1 extends Zr{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=c1.code,this.data={ref:t,oid:n}}}c1.code="CommitNotFetchedError";class u1 extends Zr{constructor(){super("Empty response from git server."),this.code=this.name=u1.code,this.data={}}}u1.code="EmptyServerResponseError";class d1 extends Zr{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=d1.code,this.data={}}}d1.code="FastForwardError";class f1 extends Zr{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=f1.code,this.data={prettyDetails:t,result:n}}}f1.code="GitPushError";class G0 extends Zr{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=G0.code,this.data={statusCode:t,statusMessage:n,response:r}}}G0.code="HttpError";class hh extends Zr{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=hh.code,this.data={reason:t}}}hh.code="InvalidFilepathError";class kc extends Zr{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=kc.code,this.data={ref:t,suggestion:n}}}kc.code="InvalidRefNameError";class h1 extends Zr{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=h1.code,this.data={depth:t}}}h1.code="MaxDepthError";class Ly extends Zr{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Ly.code,this.data={}}}Ly.code="MergeNotSupportedError";class By extends Zr{constructor(t,n,r,i){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=By.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:i}}}By.code="MergeConflictError";class Da extends Zr{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Da.code,this.data={role:t}}}Da.code="MissingNameError";class ko extends Zr{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=ko.code,this.data={parameter:t}}}ko.code="MissingParameterError";class p1 extends Zr{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=p1.code,this.data={errors:t},this.errors=t}}p1.code="MultipleGitError";class Rm extends Zr{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=Rm.code,this.data={expected:t,actual:n}}}Rm.code="ParseError";class K0 extends Zr{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=K0.code,this.data={reason:t}}}K0.code="PushRejectedError";class Xf extends Zr{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Xf.code,this.data={capability:t,parameter:n}}}Xf.code="RemoteCapabilityError";class m1 extends Zr{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=m1.code,this.data={preview:t,response:n}}}m1.code="SmartHttpError";class g1 extends Zr{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=g1.code,this.data={url:t,transport:n,suggestion:r}}}g1.code="UnknownTransportError";class y1 extends Zr{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=y1.code,this.data={url:t}}}y1.code="UrlParseError";class $y extends Zr{constructor(){super("The operation was canceled."),this.code=this.name=$y.code,this.data={}}}$y.code="UserCanceledError";class b1 extends Zr{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=b1.code,this.data={filepath:t}}}b1.code="IndexResetError";class v1 extends Zr{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=v1.code,this.data={ref:t}}}v1.code="NoCommitError";var Oke=Object.freeze({__proto__:null,AlreadyExistsError:Rc,AmbiguousError:o1,CheckoutConflictError:l1,CommitNotFetchedError:c1,EmptyServerResponseError:u1,FastForwardError:d1,GitPushError:f1,HttpError:G0,InternalError:yr,InvalidFilepathError:hh,InvalidOidError:fh,InvalidRefNameError:kc,MaxDepthError:h1,MergeNotSupportedError:Ly,MergeConflictError:By,MissingNameError:Da,MissingParameterError:ko,MultipleGitError:p1,NoRefspecError:a1,NotFoundError:Si,ObjectTypeError:so,ParseError:Rm,PushRejectedError:K0,RemoteCapabilityError:Xf,SmartHttpError:m1,UnknownTransportError:g1,UnsafeFilepathError:Py,UrlParseError:y1,UserCanceledError:$y,UnmergedPathsError:s1,IndexResetError:b1,NoCommitError:v1});function Ij({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=Pke(r),`${e} <${t}> ${n} ${r}`}function Pke(e){const t=Dke(Fke(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),i=String(e);return r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),(t===-1?"-":"+")+r+i}function Dke(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function Fke(e){return e===0?e:-e}function yd(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function BC(e){const[,t,n,r,i]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:Lke(i)}}function Lke(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),Bke(r)}function Bke(e){return e===0?e:-e}class Xa{constructor(t){if(typeof t=="string")this._tag=t;else if(on.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=Xa.render(t);else throw new yr("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new Xa(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${Ij(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const i of t)i[0]===" "?n[n.length-1]+=`
`+i.slice(1):n.push(i);const r={};for(const i of n){const s=i.slice(0,i.indexOf(" ")),a=i.slice(i.indexOf(" ")+1);Array.isArray(r[s])?r[s].push(a):r[s]=a}return r.tagger&&(r.tagger=BC(r.tagger)),r.committer&&(r.committer=BC(r.committer)),r}withoutSignature(){const t=yd(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return yd(t)}payload(){return this.withoutSignature()+`
`}toObject(){return on.from(this._tag,"utf8")}static async sign(t,n,r){const i=t.payload();let{signature:s}=await n({payload:i,secretKey:r});s=yd(s);const a=i+s;return Xa.from(a)}}function tI(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function $ke(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Vi{constructor(t){if(typeof t=="string")this._commit=t;else if(on.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Vi.render(t);else throw new yr("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Vi.justHeaders(t),i=Vi.justMessage(t),s=yd(r+`
gpgsig`+tI(n)+`
`+i);return new Vi(s)}static from(t){return new Vi(t)}toObject(){return on.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Vi.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return yd(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Vi.justHeaders(this._commit).split(`
`),n=[];for(const i of t)i[0]===" "?n[n.length-1]+=`
`+i.slice(1):n.push(i);const r={parent:[]};for(const i of n){const s=i.slice(0,i.indexOf(" ")),a=i.slice(i.indexOf(" ")+1);Array.isArray(r[s])?r[s].push(a):r[s]=a}return r.author&&(r.author=BC(r.author)),r.committer&&(r.committer=BC(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new yr("commit 'parent' property should be an array");for(const s of t.parent)n+=`parent ${s}
`}const r=t.author;n+=`author ${Ij(r)}
`;const i=t.committer||t.author;return n+=`committer ${Ij(i)}
`,t.gpgsig&&(n+="gpgsig"+tI(t.gpgsig)),n}static render(t){return Vi.renderHeaders(t)+`
`+yd(t.message)}render(){return this._commit}withoutSignature(){const t=yd(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return yd(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return $ke(t)}static async sign(t,n,r){const i=t.withoutSignature(),s=Vi.justMessage(t._commit);let{signature:a}=await n({payload:i,secretKey:r});a=yd(a);const l=Vi.justHeaders(t._commit)+`
gpgsig`+tI(a)+`
`+s;return Vi.from(l)}}async function Y0({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ao.from([]),oid:r};const{type:i,object:s}=await Wi({fs:e,cache:t,gitdir:n,oid:r});if(i==="tag")return r=Xa.from(s).parse().object,Y0({fs:e,cache:t,gitdir:n,oid:r});if(i==="commit")return r=Vi.from(s).parse().tree,Y0({fs:e,cache:t,gitdir:n,oid:r});if(i!=="tree")throw new so(r,i,"tree");return{tree:Ao.from(s),oid:r}}class zke{constructor({fs:t,gitdir:n,ref:r,cache:i}){this.fs=t,this.cache=i,this.gitdir=n,this.mapPromise=(async()=>{const a=new Map;let o;try{o=await Kt.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof Si&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Y0({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",a.set(".",l),a})();const s=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:i,gitdir:s}=this,a=await this.mapPromise,o=a.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:c,object:u}=await Wi({fs:r,cache:i,gitdir:s,oid:l});if(c!==o.type)throw new so(l,c,o.type);const d=Ao.from(u);for(const h of d)a.set(Lt.join(n,h.path),h);return d.entries().map(h=>Lt.join(n,h.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=fZ(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:i,gitdir:s}=this,o=n.get(t._fullpath).oid,{type:l,object:c}=await Wi({fs:r,cache:i,gitdir:s,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function Ll({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,WE,{value:function({fs:n,gitdir:r,cache:i}){return new zke({fs:n,gitdir:r,ref:e,cache:i})}}),Object.freeze(t),t}class Uke{constructor({fs:t,dir:n,gitdir:r,cache:i}){this.fs=t,this.cache=i,this.dir=n,this.gitdir=r,this.config=null;const s=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:i}=this,s=await r.readdir(Lt.join(i,n));return s===null?null:s.map(a=>Lt.join(n,a))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let i=await n.lstat(`${r}/${t._fullpath}`);if(!i)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let s=i.isDirectory()?"tree":"blob";s==="blob"&&!i.isFile()&&!i.isSymbolicLink()&&(s="special"),t._type=s,i=V0(i),t._mode=i.mode,i.size===-1&&t._actualSize&&(i.size=t._actualSize),t._stat=i}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:i}=this;if(await t.type()==="tree")t._content=void 0;else{const a=await(await this._getGitConfig(n,i)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:a});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:i,cache:s}=this;let a;await ra.acquire({fs:r,gitdir:i,cache:s},async function(o){const l=o.entriesMap.get(t._fullpath),c=await t.stat(),d=await(await n._getGitConfig(r,i)).get("core.filemode"),h=typeof us<"u"?us.platform!=="win32":!0;if(!l||PC(c,l,d,h)){const m=await t.content();m===void 0?a=void 0:(a=await Ld(Fy.wrap({type:"blob",object:m})),l&&a===l.oid&&(!d||c.mode===l.mode)&&PC(c,l,d,h)&&o.insert({filepath:t._fullpath,stats:c,oid:a}))}else a=l.oid}),t._oid=a}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await Rs.get({fs:t,gitdir:n}),this.config)}}function x1(){const e=Object.create(null);return Object.defineProperty(e,WE,{value:function({fs:t,dir:n,gitdir:r,cache:i}){return new Uke({fs:t,dir:n,gitdir:r,cache:i})}}),Object.freeze(e),e}function qke(e,t){const n=t-e;return Array.from({length:n},(r,i)=>e+i)}const xZ=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class Vke{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*Wke(e){const t=new Vke;let n;const r=[],i=e.length;for(let s=0;s<i;s++)r[s]=e[s].next().value,r[s]!==void 0&&t.consider(r[s]);if(t.value!==null)for(;;){const s=[];n=t.value,t.reset();for(let a=0;a<i;a++)r[a]!==void 0&&r[a]===n?(s[a]=r[a],r[a]=e[a].next().value):s[a]=null,r[a]!==void 0&&t.consider(r[a]);if(yield s,t.value===null)return}}async function ph({fs:e,cache:t,dir:n,gitdir:r,trees:i,map:s=async(l,c)=>c,reduce:a=async(l,c)=>{const u=xZ(c);return l!==void 0&&u.unshift(l),u},iterate:o=(l,c)=>Promise.all([...c].map(l))}){const l=i.map(m=>m[WE]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(l.length).fill("."),u=qke(0,l.length),d=async m=>{u.map(v=>{const x=m[v];m[v]=x&&new l[v].ConstructEntry(x)});const b=(await Promise.all(u.map(v=>{const x=m[v];return x?l[v].readdir(x):[]}))).map(v=>(v===null?[]:v)[Symbol.iterator]());return{entries:m,children:Wke(b)}},h=async m=>{const{entries:y,children:b}=await d(m),v=y.find(w=>w&&w._fullpath)._fullpath,x=await s(v,y);if(x!==null){let w=await o(h,b);return w=w.filter(S=>S!==void 0),a(x,w)}};return h(c)}async function jj(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const i=Lt.join(t,r);return e.lstat(i).then(s=>{if(s)return s.isDirectory()?jj(e,i):e.rm(i)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function Hke(e){return Gke(e)&&yz(e.then)&&yz(e.catch)}function Gke(e){return e&&typeof e=="object"}function yz(e){return typeof e=="function"}function bz(e){return Hke((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const vz=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function xz(e,t){if(bz(t))for(const n of vz)e[`_${n}`]=t[n].bind(t);else for(const n of vz)e[`_${n}`]=HM(t[n].bind(t));bz(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=jj.bind(null,e):t.rm?e._rm=HM(t.rm.bind(t)):t.rmdir.length>2?e._rm=HM(t.rmdir.bind(t)):e._rm=jj.bind(null,e)}class _n{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?xz(this,t.promises):xz(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=on.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(W0(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const i=W0(t);if(i==="."||i==="/"||i===t)throw r;await this.mkdir(i),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(VE),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async i=>{const s=t+"/"+i;return(await this._stat(s)).isDirectory()?this.readdirDeep(s):s}))).reduce((i,s)=>i.concat(s),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return on.isBuffer(r)?r:on.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function lt(e,t){if(t===void 0)throw new ko(e)}async function $C(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function Kke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),commit:r="HEAD",cache:i={}}){try{lt("fs",e),lt("dir",t),lt("gitdir",n);const s=new _n(e),a=[Ll({ref:r}),x1(),Dy()];let o=[];await ra.acquire({fs:s,gitdir:n,cache:i},async function(c){o=c.unmergedPaths});const l=await ph({fs:s,cache:i,dir:t,gitdir:n,trees:a,map:async function(c,[u,d,h]){const m=!await $C(d,h),y=o.includes(c),b=!await $C(h,u);if(m||y)return u?{path:c,mode:await u.mode(),oid:await u.oid(),type:await u.type(),content:await u.content()}:void 0;if(b)return!1;throw new b1(c)}});await ra.acquire({fs:s,gitdir:n,cache:i},async function(c){for(const u of l)if(u!==!1){if(!u){await s.rmdir(`${t}/${u.path}`,{recursive:!0}),c.delete({filepath:u.path});continue}if(u.type==="blob"){const d=new TextDecoder().decode(u.content);await s.write(`${t}/${u.path}`,d,{mode:u.mode}),c.insert({filepath:u.path,oid:u.oid,stage:0})}}})}catch(s){throw s.caller="git.abortMerge",s}}class zy{static async isIgnored({fs:t,dir:n,gitdir:r=Lt.join(n,".git"),filepath:i}){if(DC(i)===".git")return!0;if(i===".")return!1;let s="";const a=Lt.join(r,"info","exclude");await t.exists(a)&&(s=await t.read(a,"utf8"));const o=[{gitignore:Lt.join(n,".gitignore"),filepath:i}],l=i.split("/").filter(Boolean);for(let u=1;u<l.length;u++){const d=l.slice(0,u).join("/"),h=l.slice(u).join("/");o.push({gitignore:Lt.join(n,d,".gitignore"),filepath:h})}let c=!1;for(const u of o){let d;try{d=await t.read(u.gitignore,"utf8")}catch(y){if(y.code==="NOENT")continue}const h=WCe().add(s);h.add(d);const m=W0(u.filepath);if(m!=="."&&h.ignores(m))return!0;c?c=!h.test(u.filepath).unignored:c=h.test(u.filepath).ignored}return c}}async function Yke({fs:e,gitdir:t,object:n,format:r,oid:i}){const s=`objects/${i.slice(0,2)}/${i.slice(2)}`,a=`${t}/${s}`;await e.exists(a)||await e.write(a,n)}let nI=null;async function wZ(e){return nI===null&&(nI=Xke()),nI?Zke(e):iD.deflate(e)}async function Zke(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function Xke(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Io({fs:e,gitdir:t,type:n,object:r,format:i="content",oid:s=void 0,dryRun:a=!1}){return i!=="deflated"&&(i!=="wrapped"&&(r=Fy.wrap({type:n,object:r})),s=await Ld(r),r=on.from(await wZ(r))),a||await Yke({fs:e,gitdir:t,object:r,format:"deflated",oid:s}),s}function _Z(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function Jke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,cache:i={},force:s=!1,parallel:a=!0}){try{lt("fs",e),lt("dir",t),lt("gitdir",n),lt("filepath",r);const o=new _n(e);await ra.acquire({fs:o,gitdir:n,cache:i},async l=>{const u=await(await Rs.get({fs:o,gitdir:n})).get("core.autocrlf");return Oj({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:s,parallel:a,autocrlf:u})})}catch(o){throw o.caller="git.add",o}}async function Oj({dir:e,gitdir:t,fs:n,filepath:r,index:i,force:s,parallel:a,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async h=>{if(!s&&await zy.isIgnored({fs:n,dir:e,gitdir:t,filepath:h}))return;const m=await n.lstat(Lt.join(e,h));if(!m)throw new Si(h);if(m.isDirectory()){const y=await n.readdir(Lt.join(e,h));if(a){const b=y.map(v=>Oj({dir:e,gitdir:t,fs:n,filepath:[Lt.join(h,v)],index:i,force:s,parallel:a,autocrlf:o}));await Promise.all(b)}else for(const b of y)await Oj({dir:e,gitdir:t,fs:n,filepath:[Lt.join(h,b)],index:i,force:s,parallel:a,autocrlf:o})}else{const y=m.isSymbolicLink()?await n.readlink(Lt.join(e,h)).then(_Z):await n.read(Lt.join(e,h),{autocrlf:o});if(y===null)throw new Si(h);const b=await Io({fs:n,gitdir:t,type:"blob",object:y});i.insert({filepath:h,stats:m,oid:b})}}),c=await Promise.allSettled(l),u=c.filter(h=>h.status==="rejected").map(h=>h.reason);if(u.length>1)throw new p1(u);if(u.length===1)throw u[0];return c.filter(h=>h.status==="fulfilled"&&h.value).map(h=>h.value)}async function Gx({fs:e,gitdir:t,path:n}){return(await Rs.get({fs:e,gitdir:t})).get(n)}function SZ(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const i=n[r];i!==void 0&&(e[r]=i)}return e}async function mh({fs:e,gitdir:t,author:n,commit:r}){const i=Math.floor(Date.now()/1e3),s={name:await Gx({fs:e,gitdir:t,path:"user.name"}),email:await Gx({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},a=SZ({},s,r?r.author:void 0,n);if(a.name!==void 0)return a}async function Z0({fs:e,gitdir:t,author:n,committer:r,commit:i}){const s=Math.floor(Date.now()/1e3),a={name:await Gx({fs:e,gitdir:t,path:"user.name"}),email:await Gx({fs:e,gitdir:t,path:"user.email"})||"",timestamp:s,timezoneOffset:new Date(s*1e3).getTimezoneOffset()},o=SZ({},a,i?i.committer:void 0,n,r);if(o.name!==void 0)return o}async function CZ({fs:e,cache:t,gitdir:n,oid:r}){const{type:i,object:s}=await Wi({fs:e,cache:t,gitdir:n,oid:r});if(i==="tag")return r=Xa.from(s).parse().object,CZ({fs:e,cache:t,gitdir:n,oid:r});if(i!=="commit")throw new so(r,i,"commit");return{commit:Vi.from(s),oid:r}}async function X0({fs:e,cache:t,gitdir:n,oid:r}){const{commit:i,oid:s}=await CZ({fs:e,cache:t,gitdir:n,oid:r});return{oid:s,commit:i.parse(),payload:i.withoutSignature()}}async function HE({fs:e,cache:t,onSign:n,gitdir:r,message:i,author:s,committer:a,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:d,parent:h,tree:m}){let y=!1;d||(d=await Kt.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,v;try{b=await Kt.resolve({fs:e,gitdir:r,ref:d}),v=await X0({fs:e,gitdir:r,oid:b,cache:{}})}catch{y=!0}if(l&&y)throw new v1(d);const x=l?await mh({fs:e,gitdir:r,author:s,commit:v.commit}):await mh({fs:e,gitdir:r,author:s});if(!x)throw new Da("author");const w=l?await Z0({fs:e,gitdir:r,author:x,committer:a,commit:v.commit}):await Z0({fs:e,gitdir:r,author:x,committer:a});if(!w)throw new Da("committer");return ra.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(S){const k=pZ(S.entries).get(".");if(m||(m=await kZ({fs:e,gitdir:r,inode:k,dryRun:c})),h?h=await Promise.all(h.map(N=>Kt.resolve({fs:e,gitdir:r,ref:N}))):l?h=v.commit.parent:h=b?[b]:[],!i)if(l)i=v.commit.message;else throw new ko("message");let A=Vi.from({tree:m,parent:h,author:x,committer:w,message:i});o&&(A=await Vi.sign(A,n,o));const R=await Io({fs:e,gitdir:r,type:"commit",object:A.toObject(),dryRun:c});return!u&&!c&&await Kt.writeRef({fs:e,gitdir:r,ref:d,value:R}),R})}async function kZ({fs:e,gitdir:t,inode:n,dryRun:r}){const i=n.children;for(const l of i)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await kZ({fs:e,gitdir:t,inode:l,dryRun:r}));const s=i.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),a=Ao.from(s);return await Io({fs:e,gitdir:t,type:"tree",object:a.toObject(),dryRun:r})}async function w1({fs:e,cache:t,gitdir:n,oid:r,filepath:i}){if(i.startsWith("/"))throw new hh("leading-slash");if(i.endsWith("/"))throw new hh("trailing-slash");const s=r,a=await Y0({fs:e,cache:t,gitdir:n,oid:r}),o=a.tree;if(i==="")r=a.oid;else{const l=i.split("/");r=await EZ({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:s,filepath:i})}return r}async function EZ({fs:e,cache:t,gitdir:n,tree:r,pathArray:i,oid:s,filepath:a}){const o=i.shift();for(const l of r)if(l.path===o){if(i.length===0)return l.oid;{const{type:c,object:u}=await Wi({fs:e,cache:t,gitdir:n,oid:l.oid});if(c!=="tree")throw new so(s,c,"tree",a);return r=Ao.from(u),EZ({fs:e,cache:t,gitdir:n,tree:r,pathArray:i,oid:s,filepath:a})}}throw new Si(`file or directory found at "${s}:${a}"`)}async function Uy({fs:e,cache:t,gitdir:n,oid:r,filepath:i=void 0}){i!==void 0&&(r=await w1({fs:e,cache:t,gitdir:n,oid:r,filepath:i}));const{tree:s,oid:a}=await Y0({fs:e,cache:t,gitdir:n,oid:r});return{oid:a,tree:s.entries()}}async function _1({fs:e,gitdir:t,tree:n}){const r=Ao.from(n).toObject();return await Io({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function Qke({fs:e,cache:t,onSign:n,gitdir:r,ref:i,oid:s,note:a,force:o,author:l,committer:c,signingKey:u}){let d;try{d=await Kt.resolve({gitdir:r,fs:e,ref:i})}catch(x){if(!(x instanceof Si))throw x}let m=(await Uy({fs:e,cache:t,gitdir:r,oid:d||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)m=m.filter(x=>x.path!==s);else for(const x of m)if(x.path===s)throw new Rc("note",s);typeof a=="string"&&(a=on.from(a,"utf8"));const y=await Io({fs:e,gitdir:r,type:"blob",object:a,format:"content"});m.push({mode:"100644",path:s,oid:y,type:"blob"});const b=await _1({fs:e,gitdir:r,tree:m});return await HE({fs:e,cache:t,onSign:n,gitdir:r,ref:i,tree:b,parent:d&&[d],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:u})}async function eEe({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),ref:i="refs/notes/commits",oid:s,note:a,force:o,author:l,committer:c,signingKey:u,cache:d={}}){try{lt("fs",e),lt("gitdir",r),lt("oid",s),lt("note",a),u&&lt("onSign",t);const h=new _n(e),m=await mh({fs:h,gitdir:r,author:l});if(!m)throw new Da("author");const y=await Z0({fs:h,gitdir:r,author:m,committer:c});if(!y)throw new Da("committer");return await Qke({fs:new _n(h),cache:d,onSign:t,gitdir:r,ref:i,oid:s,note:a,force:o,author:m,committer:y,signingKey:u})}catch(h){throw h.caller="git.addNote",h}}async function TZ({fs:e,gitdir:t,remote:n,url:r,force:i}){if(n!==lu.clean(n))throw new kc(n,lu.clean(n));const s=await Rs.get({fs:e,gitdir:t});if(!i&&(await s.getSubsections("remote")).includes(n)&&r!==await s.get(`remote.${n}.url`))throw new Rc("remote",n);await s.set(`remote.${n}.url`,r),await s.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await Rs.save({fs:e,gitdir:t,config:s})}async function tEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),remote:r,url:i,force:s=!1}){try{return lt("fs",e),lt("gitdir",n),lt("remote",r),lt("url",i),await TZ({fs:new _n(e),gitdir:n,remote:r,url:i,force:s})}catch(a){throw a.caller="git.addRemote",a}}async function nEe({fs:e,cache:t,onSign:n,gitdir:r,ref:i,tagger:s,message:a=i,gpgsig:o,object:l,signingKey:c,force:u=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!u&&await Kt.exists({fs:e,gitdir:r,ref:i}))throw new Rc("tag",i);const d=await Kt.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:h}=await Wi({fs:e,cache:t,gitdir:r,oid:d});let m=Xa.from({object:d,type:h,tag:i.replace("refs/tags/",""),tagger:s,message:a,gpgsig:o});c&&(m=await Xa.sign(m,n,c));const y=await Io({fs:e,gitdir:r,type:"tag",object:m.toObject()});await Kt.writeRef({fs:e,gitdir:r,ref:i,value:y})}async function rEe({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),ref:i,tagger:s,message:a=i,gpgsig:o,object:l,signingKey:c,force:u=!1,cache:d={}}){try{lt("fs",e),lt("gitdir",r),lt("ref",i),c&&lt("onSign",t);const h=new _n(e),m=await mh({fs:h,gitdir:r,author:s});if(!m)throw new Da("tagger");return await nEe({fs:h,cache:d,onSign:t,gitdir:r,ref:i,tagger:m,message:a,gpgsig:o,object:l,signingKey:c,force:u})}catch(h){throw h.caller="git.annotatedTag",h}}async function iEe({fs:e,gitdir:t,ref:n,object:r,checkout:i=!1,force:s=!1}){if(n!==lu.clean(n))throw new kc(n,lu.clean(n));const a=`refs/heads/${n}`;if(!s&&await Kt.exists({fs:e,gitdir:t,ref:a}))throw new Rc("branch",n,!1);let o;try{o=await Kt.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await Kt.writeRef({fs:e,gitdir:t,ref:a,value:o}),i&&await Kt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:a})}async function sEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,object:i,checkout:s=!1,force:a=!1}){try{return lt("fs",e),lt("gitdir",n),lt("ref",r),await iEe({fs:new _n(e),gitdir:n,ref:r,object:i,checkout:s,force:a})}catch(o){throw o.caller="git.branch",o}}const AZ=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function lD({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:i,gitdir:s,remote:a,ref:o,filepaths:l,noCheckout:c,noUpdateHead:u,dryRun:d,force:h,track:m=!0}){let y;if(r)try{y=await Kt.resolve({fs:e,gitdir:s,ref:"HEAD"})}catch{y="0000000000000000000000000000000000000000"}let b;try{b=await Kt.resolve({fs:e,gitdir:s,ref:o})}catch(v){if(o==="HEAD")throw v;const x=`${a}/${o}`;if(b=await Kt.resolve({fs:e,gitdir:s,ref:x}),m){const w=await Rs.get({fs:e,gitdir:s});await w.set(`branch.${o}.remote`,a),await w.set(`branch.${o}.merge`,`refs/heads/${o}`),await Rs.save({fs:e,gitdir:s,config:w})}await Kt.writeRef({fs:e,gitdir:s,ref:`refs/heads/${o}`,value:b})}if(!c){let v;try{v=await aEe({fs:e,cache:t,onProgress:n,dir:i,gitdir:s,ref:o,force:h,filepaths:l})}catch(k){throw k instanceof Si&&k.data.what===b?new c1(o,b):k}const x=v.filter(([k])=>k==="conflict").map(([k,A])=>A);if(x.length>0)throw new l1(x);const w=v.filter(([k])=>k==="error").map(([k,A])=>A);if(w.length>0)throw new yr(w.join(", "));if(d){r&&await r({previousHead:y,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let S=0;const C=v.length;await ra.acquire({fs:e,gitdir:s,cache:t},async function(k){await Promise.all(v.filter(([A])=>A==="delete"||A==="delete-index").map(async function([A,R]){const N=`${i}/${R}`;A==="delete"&&await e.rm(N),k.delete({filepath:R}),n&&await n({phase:"Updating workdir",loaded:++S,total:C})}))}),await ra.acquire({fs:e,gitdir:s,cache:t},async function(k){for(const[A,R]of v)if(A==="rmdir"||A==="rmdir-index"){const N=`${i}/${R}`;try{A==="rmdir-index"&&k.delete({filepath:R}),await e.rmdir(N),n&&await n({phase:"Updating workdir",loaded:++S,total:C})}catch(I){if(I.code==="ENOTEMPTY")console.log(`Did not delete ${R} because directory is not empty`);else throw I}}}),await Promise.all(v.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,A]){const R=`${i}/${A}`;await e.mkdir(R),n&&await n({phase:"Updating workdir",loaded:++S,total:C})})),await ra.acquire({fs:e,gitdir:s,cache:t},async function(k){await Promise.all(v.filter(([A])=>A==="create"||A==="create-index"||A==="update"||A==="mkdir-index").map(async function([A,R,N,I,O]){const L=`${i}/${R}`;try{if(A!=="create-index"&&A!=="mkdir-index"){const{object:V}=await Wi({fs:e,cache:t,gitdir:s,oid:N});if(O&&await e.rm(L),I===33188)await e.write(L,V);else if(I===33261)await e.write(L,V,{mode:511});else if(I===40960)await e.writelink(L,V);else throw new yr(`Invalid mode 0o${I.toString(8)} detected in blob ${N}`)}const P=await e.lstat(L);I===33261&&(P.mode=493),A==="mkdir-index"&&(P.mode=57344),k.insert({filepath:R,stats:P,oid:N}),n&&await n({phase:"Updating workdir",loaded:++S,total:C})}catch(P){console.log(P)}}))}),r&&await r({previousHead:y,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!u){const v=await Kt.expand({fs:e,gitdir:s,ref:o});v.startsWith("refs/heads")?await Kt.writeSymbolicRef({fs:e,gitdir:s,ref:"HEAD",value:v}):await Kt.writeRef({fs:e,gitdir:s,ref:"HEAD",value:b})}}async function aEe({fs:e,cache:t,onProgress:n,dir:r,gitdir:i,ref:s,force:a,filepaths:o}){let l=0;return ph({fs:e,cache:t,dir:r,gitdir:i,trees:[Ll({ref:s}),x1(),Dy()],map:async function(c,[u,d,h]){if(c===".")return;if(o&&!o.some(y=>AZ(c,y)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!h,!!u,!!d].map(Number).join("")){case"000":return;case"001":return a&&o&&o.includes(c)?["delete",c]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await u.oid(),await u.mode()];case"commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await d.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await u.oid()!==await d.oid()?a?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]:await u.mode()!==await d.mode()?a?["update",c,await u.oid(),await u.mode(),!0]:["conflict",c]:["create-index",c,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",c];case"101":switch(await h.type()){case"tree":return["rmdir",c];case"blob":return await h.oid()!==await d.oid()?a?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await h.type()}`]}case"110":case"111":switch(`${await h.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await h.oid()===await u.oid()&&await h.mode()===await u.mode()&&!a)return;if(d){if(await d.oid()!==await h.oid()&&await d.oid()!==await u.oid())return a?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]}else if(a)return["update",c,await u.oid(),await u.mode(),await u.mode()!==await h.mode()];return await u.mode()!==await h.mode()?["update",c,await u.oid(),await u.mode(),!0]:await u.oid()!==await h.oid()?["update",c,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await u.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await h.type()}-${await u.type()}`]}}},reduce:async function(c,u){return u=xZ(u),c?c&&c[0]==="rmdir"?(u.push(c),u):(u.unshift(c),u):u}})}async function RZ({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:i=Lt.join(r,".git"),remote:s="origin",ref:a,filepaths:o,noCheckout:l=!1,noUpdateHead:c=a===void 0,dryRun:u=!1,force:d=!1,track:h=!0,cache:m={}}){try{lt("fs",e),lt("dir",r),lt("gitdir",i);const y=a||"HEAD";return await lD({fs:new _n(e),cache:m,onProgress:t,onPostCheckout:n,dir:r,gitdir:i,remote:s,ref:y,filepaths:o,noCheckout:l,noUpdateHead:c,dryRun:u,force:d,track:h})}catch(y){throw y.caller="git.checkout",y}}const oEe=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Ip(e){const t=oEe.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function Oh({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const i=await Kt.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Kt.resolve({fs:e,gitdir:t,ref:i})}catch{return}if(i.startsWith("refs/"))return n?i:Ip(i)}function lEe(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function NZ({username:e="",password:t=""}){return`Basic ${on.from(`${e}:${t}`).toString("base64")}`}async function S1(e,t){const n=yZ(e);for(;;){const{value:r,done:i}=await n.next();if(r&&await t(r),i)break}n.return&&n.return()}async function zC(e){let t=0;const n=[];await S1(e,s=>{n.push(s),t+=s.byteLength});const r=new Uint8Array(t);let i=0;for(const s of n)r.set(s,i),i+=s.byteLength;return r}function wz(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function Pj(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class cs{static flush(){return on.from("0000","utf8")}static delim(){return on.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=on.from(t));const n=t.length+4,r=Pj(4,n);return on.concat([on.from(r,"utf8"),t])}static streamReader(t){const n=new bZ(t);return async function(){try{let i=await n.read(4);if(i==null)return!0;if(i=parseInt(i.toString("utf8"),16),i===0||i===1)return null;const s=await n.read(i-4);return s??!0}catch(i){return t.error=i,!0}}}}async function _z(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const i=n.slice(0,r),s=n.slice(r+1);t[i]=s}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function Sz(e,{service:t}){const n=new Set,r=new Map,i=new Map,s=cs.streamReader(e);let a=await s();for(;a===null;)a=await s();if(a===!0)throw new u1;if(a.includes("version 2"))return _z(s);if(a.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new Rm(`# service=${t}\\n`,a.toString("utf8"));let o=await s();for(;o===null;)o=await s();if(o===!0)return{capabilities:n,refs:r,symrefs:i};if(o=o.toString("utf8"),o.includes("version 2"))return _z(s);const[l,c]=rI(o,"\0","\\x00");if(c.split(" ").map(u=>n.add(u)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[u,d]=rI(l," "," ");for(r.set(d,u);;){const h=await s();if(h===!0)break;if(h!==null){const[m,y]=rI(h.toString("utf8")," "," ");r.set(y,m)}}}for(const u of n)if(u.startsWith("symref=")){const d=u.match(/symref=([^:]+):(.*)/);d.length===3&&i.set(d[1],d[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:i}}function rI(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new Rm(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const Cz=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,kz=(e,t)=>{(t.username||t.password)&&(e.Authorization=NZ(t)),t.headers&&Object.assign(e,t.headers)},iI=async e=>{try{const t=on.from(await zC(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class UC{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:i,onAuthFailure:s,corsProxy:a,service:o,url:l,headers:c,protocolVersion:u}){let{url:d,auth:h}=wz(l);const m=a?Cz(a,d):d;(h.username||h.password)&&(c.Authorization=NZ(h)),u===2&&(c["Git-Protocol"]="version=2");let y,b,v=!1;do if(y=await t.request({onProgress:n,method:"GET",url:`${m}/info/refs?service=${o}`,headers:c}),b=!1,y.statusCode===401||y.statusCode===203){const x=v?s:r;if(x){if(h=await x(d,{...h,headers:{...c}}),h&&h.cancel)throw new $y;h&&(kz(c,h),v=!0,b=!0)}}else y.statusCode===200&&v&&i&&await i(d,h);while(b);if(y.statusCode!==200){const{response:x}=await iI(y);throw new G0(y.statusCode,y.statusMessage,x)}if(y.headers["content-type"]===`application/x-${o}-advertisement`){const x=await Sz(y.body,{service:o});return x.auth=h,x}else{const{preview:x,response:w,data:S}=await iI(y);try{const C=await Sz([S],{service:o});return C.auth=h,C}catch{throw new m1(x,w)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:i,url:s,auth:a,body:o,headers:l}){const c=wz(s);c&&(s=c.url),r&&(s=Cz(r,s)),l["content-type"]=`application/x-${i}-request`,l.accept=`application/x-${i}-result`,kz(l,a);const u=await t.request({onProgress:n,method:"POST",url:`${s}/${i}`,body:o,headers:l});if(u.statusCode!==200){const{response:d}=iI(u);throw new G0(u.statusCode,u.statusMessage,d)}return u}}function cEe({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class GE{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",UC),n.set("https",UC);const r=cEe({url:t});if(!r)throw new y1(t);if(n.has(r.transport))return n.get(r.transport);throw new g1(t,r.transport,r.transport==="ssh"?lEe(t):void 0)}}let vp=null;class Kx{static async read({fs:t,gitdir:n}){vp===null&&(vp=new Hx);const r=Lt.join(n,"shallow"),i=new Set;return await vp.acquire(r,async function(){const s=await t.read(r,{encoding:"utf8"});if(s===null||s.trim()==="")return i;s.trim().split(`
`).map(a=>i.add(a))}),i}static async write({fs:t,gitdir:n,oids:r}){vp===null&&(vp=new Hx);const i=Lt.join(n,"shallow");if(r.size>0){const s=[...r].join(`
`)+`
`;await vp.acquire(i,async function(){await t.write(i,s,{encoding:"utf8"})})}else await vp.acquire(i,async function(){await t.rm(i)})}}async function uEe({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function dEe({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}){let s=await e.readdir(Lt.join(n,"objects/pack"));s=s.filter(a=>a.endsWith(".idx"));for(const a of s){const o=`${n}/objects/pack/${a}`,l=await oD({fs:e,cache:t,filename:o,getExternalRefDelta:i});if(l.error)throw new yr(l.error);if(l.offsets.has(r))return!0}return!1}async function Ez({fs:e,cache:t,gitdir:n,oid:r,format:i="content"}){const s=o=>Wi({fs:e,cache:t,gitdir:n,oid:o});let a=await uEe({fs:e,gitdir:n,oid:r});return a||(a=await dEe({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:s})),a}function fEe(e){const i="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===i}function MZ(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const i=r.split("=",1)[0];return n.includes(i)})}const KE={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class m2{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function hEe(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function IZ(e){const t=new m2;let n="";return(async()=>(await S1(e,r=>{for(r=r.toString("utf8"),n+=r;;){const i=hEe(n);if(i===-1)break;t.write(n.slice(0,i)),n=n.slice(i)}}),n.length>0&&t.write(n),t.end()))(),t}class jZ{static demux(t){const n=cs.streamReader(t),r=new m2,i=new m2,s=new m2,a=async function(){const o=await n();if(o===null)return a();if(o===!0){r.end(),s.end(),t.error?i.destroy(t.error):i.end();return}switch(o[0]){case 1:{i.write(o.slice(1));break}case 2:{s.write(o.slice(1));break}case 3:{const l=o.slice(1);s.write(l),r.end(),s.end(),i.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}a()};return a(),{packetlines:r,packfile:i,progress:s}}}async function pEe(e){const{packetlines:t,packfile:n,progress:r}=jZ.demux(e),i=[],s=[],a=[];let o=!1,l=!1;return new Promise((c,u)=>{S1(t,d=>{const h=d.toString("utf8").trim();if(h.startsWith("shallow")){const m=h.slice(-41).trim();m.length!==40&&u(new fh(m)),i.push(m)}else if(h.startsWith("unshallow")){const m=h.slice(-41).trim();m.length!==40&&u(new fh(m)),s.push(m)}else if(h.startsWith("ACK")){const[,m,y]=h.split(" ");a.push({oid:m,status:y}),y||(l=!0)}else h.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?u(e.error):c({shallows:i,unshallows:s,acks:a,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?u(e.error):c({shallows:i,unshallows:s,acks:a,nak:o,packfile:n,progress:r}))})})}function mEe({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:i=null,since:s=null,exclude:a=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const c of t)o.push(cs.encode(`want ${c}${l}
`)),l="";for(const c of r)o.push(cs.encode(`shallow ${c}
`));i!==null&&o.push(cs.encode(`deepen ${i}
`)),s!==null&&o.push(cs.encode(`deepen-since ${Math.floor(s.valueOf()/1e3)}
`));for(const c of a)o.push(cs.encode(`deepen-not ${c}
`));o.push(cs.flush());for(const c of n)o.push(cs.encode(`have ${c}
`));return o.push(cs.encode(`done
`)),o}async function cD({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:l,ref:c,remoteRef:u,remote:d,url:h,corsProxy:m,depth:y=null,since:b=null,exclude:v=[],relative:x=!1,tags:w=!1,singleBranch:S=!1,headers:C={},prune:k=!1,pruneTags:A=!1}){const R=c||await Oh({fs:e,gitdir:l,test:!0}),N=await Rs.get({fs:e,gitdir:l}),I=d||R&&await N.get(`branch.${R}.remote`)||"origin",O=h||await N.get(`remote.${I}.url`);if(typeof O>"u")throw new ko("remote OR url");const L=u||R&&await N.get(`branch.${R}.merge`)||c||"HEAD";m===void 0&&(m=await N.get("http.corsProxy"));const P=GE.getRemoteHelperFor({url:O}),V=await P.discover({http:n,onAuth:s,onAuthSuccess:a,onAuthFailure:o,corsProxy:m,service:"git-upload-pack",url:O,headers:C,protocolVersion:1}),F=V.auth,J=V.refs;if(J.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(y!==null&&!V.capabilities.has("shallow"))throw new Xf("shallow","depth");if(b!==null&&!V.capabilities.has("deepen-since"))throw new Xf("deepen-since","since");if(v.length>0&&!V.capabilities.has("deepen-not"))throw new Xf("deepen-not","exclude");if(x===!0&&!V.capabilities.has("deepen-relative"))throw new Xf("deepen-relative","relative");const{oid:U,fullref:G}=Kt.resolveAgainstMap({ref:L,map:J});for(const We of J.keys())We===G||We==="HEAD"||We.startsWith("refs/heads/")||w&&We.startsWith("refs/tags/")||J.delete(We);const $=MZ([...V.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${KE.agent}`]);x&&$.push("deepen-relative");const ne=S?[U]:J.values(),W=S?[R]:await Kt.listRefs({fs:e,gitdir:l,filepath:"refs"});let te=[];for(let We of W)try{We=await Kt.expand({fs:e,gitdir:l,ref:We});const Re=await Kt.resolve({fs:e,gitdir:l,ref:We});await Ez({fs:e,cache:t,gitdir:l,oid:Re})&&te.push(Re)}catch{}te=[...new Set(te)];const ee=await Kx.read({fs:e,gitdir:l}),re=V.capabilities.has("shallow")?[...ee]:[],de=mEe({capabilities:$,wants:ne,haves:te,shallows:re,depth:y,since:b,exclude:v}),oe=on.from(await zC(de)),Ie=await P.connect({http:n,onProgress:r,corsProxy:m,service:"git-upload-pack",url:O,auth:F,body:[oe],headers:C}),je=await pEe(Ie.body);Ie.headers&&(je.headers=Ie.headers);for(const We of je.shallows)if(!ee.has(We))try{const{object:Re}=await Wi({fs:e,cache:t,gitdir:l,oid:We}),K=new Vi(Re),ge=await Promise.all(K.headers().parent.map(ce=>Ez({fs:e,cache:t,gitdir:l,oid:ce})));ge.length===0||ge.every(ce=>ce)||ee.add(We)}catch{ee.add(We)}for(const We of je.unshallows)ee.delete(We);if(await Kx.write({fs:e,gitdir:l,oids:ee}),S){const We=new Map([[G,U]]),Re=new Map;let K=10,ge=G;for(;K--;){const le=V.symrefs.get(ge);if(le===void 0)break;Re.set(ge,le),ge=le}const Te=J.get(ge);Te&&We.set(ge,Te);const{pruned:ce}=await Kt.updateRemoteRefs({fs:e,gitdir:l,remote:I,refs:We,symrefs:Re,tags:w,prune:k});k&&(je.pruned=ce)}else{const{pruned:We}=await Kt.updateRemoteRefs({fs:e,gitdir:l,remote:I,refs:J,symrefs:V.symrefs,tags:w,prune:k,pruneTags:A});k&&(je.pruned=We)}if(je.HEAD=V.symrefs.get("HEAD"),je.HEAD===void 0){const{oid:We}=Kt.resolveAgainstMap({ref:"HEAD",map:J});for(const[Re,K]of J.entries())if(Re!=="HEAD"&&K===We){je.HEAD=Re;break}}const Me=G.startsWith("refs/tags")?"tag":"branch";if(je.FETCH_HEAD={oid:U,description:`${Me} '${Ip(G)}' of ${O}`},r||i){const We=IZ(je.progress);S1(We,async Re=>{if(i&&await i(Re),r){const K=Re.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);K&&await r({phase:K[1].trim(),loaded:parseInt(K[2],10),total:parseInt(K[3],10)})}})}const Se=on.from(await zC(je.packfile));if(Ie.body.error)throw Ie.body.error;const qe=Se.slice(-20).toString("hex"),Qe={defaultBranch:je.HEAD,fetchHead:je.FETCH_HEAD.oid,fetchHeadDescription:je.FETCH_HEAD.description};if(je.headers&&(Qe.headers=je.headers),k&&(Qe.pruned=je.pruned),qe!==""&&!fEe(Se)){Qe.packfile=`objects/pack/pack-${qe}.pack`;const We=Lt.join(l,Qe.packfile);await e.write(We,Se);const Re=ge=>Wi({fs:e,cache:t,gitdir:l,oid:ge}),K=await H0.fromPack({pack:Se,getExternalRefDelta:Re,onProgress:r});await e.write(We.replace(/\.pack$/,".idx"),await K.toBuffer())}return Qe}async function OZ({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Lt.join(n,".git"),defaultBranch:i="master"}){if(await e.exists(r+"/config"))return;let s=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];s=s.map(a=>r+"/"+a);for(const a of s)await e.mkdir(a);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${i}
`)}async function gEe({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,onPostCheckout:l,dir:c,gitdir:u,url:d,corsProxy:h,ref:m,remote:y,depth:b,since:v,exclude:x,relative:w,singleBranch:S,noCheckout:C,noTags:k,headers:A}){try{if(await OZ({fs:e,gitdir:u}),await TZ({fs:e,gitdir:u,remote:y,url:d,force:!1}),h){const I=await Rs.get({fs:e,gitdir:u});await I.set("http.corsProxy",h),await Rs.save({fs:e,gitdir:u,config:I})}const{defaultBranch:R,fetchHead:N}=await cD({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:u,ref:m,remote:y,corsProxy:h,depth:b,since:v,exclude:x,relative:w,singleBranch:S,headers:A,tags:!k});if(N===null)return;m=m||R,m=m.replace("refs/heads/",""),await lD({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:c,gitdir:u,ref:m,remote:y,noCheckout:C})}catch(R){throw await e.rmdir(u,{recursive:!0,maxRetries:10}).catch(()=>{}),R}}async function yEe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,onPostCheckout:o,dir:l,gitdir:c=Lt.join(l,".git"),url:u,corsProxy:d=void 0,ref:h=void 0,remote:m="origin",depth:y=void 0,since:b=void 0,exclude:v=[],relative:x=!1,singleBranch:w=!1,noCheckout:S=!1,noTags:C=!1,headers:k={},cache:A={}}){try{return lt("fs",e),lt("http",t),lt("gitdir",c),S||lt("dir",l),lt("url",u),await gEe({fs:new _n(e),cache:A,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,onPostCheckout:o,dir:l,gitdir:c,url:u,corsProxy:d,ref:h,remote:m,depth:y,since:b,exclude:v,relative:x,singleBranch:w,noCheckout:S,noTags:C,headers:k})}catch(R){throw R.caller="git.clone",R}}async function bEe({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),message:i,author:s,committer:a,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:d,parent:h,tree:m,cache:y={}}){try{lt("fs",e),l||lt("message",i),o&&lt("onSign",t);const b=new _n(e);return await HE({fs:b,cache:y,onSign:t,gitdir:r,message:i,author:s,committer:a,signingKey:o,amend:l,dryRun:c,noUpdateBranch:u,ref:d,parent:h,tree:m})}catch(b){throw b.caller="git.commit",b}}async function vEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),fullname:r=!1,test:i=!1}){try{return lt("fs",e),lt("gitdir",n),await Oh({fs:new _n(e),gitdir:n,fullname:r,test:i})}catch(s){throw s.caller="git.currentBranch",s}}async function xEe({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Kt.exists({fs:e,gitdir:t,ref:n}))throw new Si(n);const i=await Kt.expand({fs:e,gitdir:t,ref:n}),s=await Oh({fs:e,gitdir:t,fullname:!0});if(i===s){const l=await Kt.resolve({fs:e,gitdir:t,ref:i});await Kt.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await Kt.deleteRef({fs:e,gitdir:t,ref:i});const a=Ip(n),o=await Rs.get({fs:e,gitdir:t});await o.deleteSection("branch",a),await Rs.save({fs:e,gitdir:t,config:o})}async function wEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r}){try{return lt("fs",e),lt("ref",r),await xEe({fs:new _n(e),gitdir:n,ref:r})}catch(i){throw i.caller="git.deleteBranch",i}}async function _Ee({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r}){try{lt("fs",e),lt("ref",r),await Kt.deleteRef({fs:new _n(e),gitdir:n,ref:r})}catch(i){throw i.caller="git.deleteRef",i}}async function SEe({fs:e,gitdir:t,remote:n}){const r=await Rs.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await Rs.save({fs:e,gitdir:t,config:r})}async function CEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),remote:r}){try{return lt("fs",e),lt("remote",r),await SEe({fs:new _n(e),gitdir:n,remote:r})}catch(i){throw i.caller="git.deleteRemote",i}}async function kEe({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Kt.deleteRef({fs:e,gitdir:t,ref:n})}async function EEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r}){try{return lt("fs",e),lt("ref",r),await kEe({fs:new _n(e),gitdir:n,ref:r})}catch(i){throw i.caller="git.deleteTag",i}}async function TEe({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(s=>`${r}${s}`).filter(s=>s.startsWith(n))}async function AEe({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}){const s=[];let a=await e.readdir(Lt.join(n,"objects/pack"));a=a.filter(o=>o.endsWith(".idx"));for(const o of a){const l=`${n}/objects/pack/${o}`,c=await oD({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(c.error)throw new yr(c.error);for(const u of c.offsets.keys())u.startsWith(r)&&s.push(u)}return s}async function REe({fs:e,cache:t,gitdir:n,oid:r}){const i=o=>Wi({fs:e,cache:t,gitdir:n,oid:o}),s=await TEe({fs:e,gitdir:n,oid:r}),a=await AEe({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i});for(const o of a)s.indexOf(o)===-1&&s.push(o);if(s.length===1)return s[0];throw s.length>1?new o1("oids",r,s):new Si(`an object matching "${r}"`)}async function NEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,cache:i={}}){try{return lt("fs",e),lt("gitdir",n),lt("oid",r),await REe({fs:new _n(e),cache:i,gitdir:n,oid:r})}catch(s){throw s.caller="git.expandOid",s}}async function MEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r}){try{return lt("fs",e),lt("gitdir",n),lt("ref",r),await Kt.expand({fs:new _n(e),gitdir:n,ref:r})}catch(i){throw i.caller="git.expandRef",i}}async function uD({fs:e,cache:t,gitdir:n,oids:r}){const i={},s=r.length;let a=r.map((o,l)=>({index:l,oid:o}));for(;a.length;){const o=new Set;for(const{oid:c,index:u}of a)i[c]||(i[c]=new Set),i[c].add(u),i[c].size===s&&o.add(c);if(o.size>0)return[...o];const l=new Map;for(const{oid:c,index:u}of a)try{const{object:d}=await Wi({fs:e,cache:t,gitdir:n,oid:c}),h=Vi.from(d),{parent:m}=h.parseHeaders();for(const y of m)(!i[y]||!i[y].has(u))&&l.set(y+":"+u,{oid:y,index:u})}catch{}a=Array.from(l.values())}return[]}const sI=/^.*(\r?\n|$)/gm;function IEe({branches:e,contents:t}){const n=e[1],r=e[2],i=t[0],s=t[1],a=t[2],o=s.match(sI),l=i.match(sI),c=a.match(sI),u=XCe(o,l,c),d=7;let h="",m=!0;for(const y of u)y.ok&&(h+=y.ok.join("")),y.conflict&&(m=!1,h+=`${"<".repeat(d)} ${n}
`,h+=y.conflict.a.join(""),h+=`${"=".repeat(d)}
`,h+=y.conflict.b.join(""),h+=`${">".repeat(d)} ${r}
`);return{cleanMerge:m,mergedText:h}}async function jEe({fs:e,cache:t,dir:n,gitdir:r=Lt.join(n,".git"),index:i,ourOid:s,baseOid:a,theirOid:o,ourName:l="ours",baseName:c="base",theirName:u="theirs",dryRun:d=!1,abortOnConflict:h=!0,mergeDriver:m}){const y=Ll({ref:s}),b=Ll({ref:a}),v=Ll({ref:o}),x=[],w=[],S=[],C=[],k=await ph({fs:e,cache:t,dir:n,gitdir:r,trees:[y,b,v],map:async function(A,[R,N,I]){const O=DC(A),L=await $C(R,N),P=await $C(I,N);switch(`${L}-${P}`){case"false-false":return{mode:await N.mode(),path:O,oid:await N.oid(),type:await N.type()};case"false-true":return I?{mode:await I.mode(),path:O,oid:await I.oid(),type:await I.type()}:void 0;case"true-false":return R?{mode:await R.mode(),path:O,oid:await R.oid(),type:await R.type()}:void 0;case"true-true":{if(R&&N&&I&&await R.type()==="blob"&&await N.type()==="blob"&&await I.type()==="blob")return OEe({fs:e,gitdir:r,path:O,ours:R,base:N,theirs:I,ourName:l,baseName:c,theirName:u,mergeDriver:m}).then(async V=>{if(V.cleanMerge)h||i.insert({filepath:A,oid:V.mergeResult.oid,stage:0});else if(x.push(A),w.push(A),!h){const F=await N.oid(),J=await R.oid(),U=await I.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:F,stage:1}),i.insert({filepath:A,oid:J,stage:2}),i.insert({filepath:A,oid:U,stage:3})}return V.mergeResult});if(N&&!R&&I&&await N.type()==="blob"&&await I.type()==="blob"){if(x.push(A),S.push(A),!h){const V=await N.oid(),F=await I.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:V,stage:1}),i.insert({filepath:A,oid:F,stage:3})}return{mode:await I.mode(),oid:await I.oid(),type:"blob",path:O}}if(N&&R&&!I&&await N.type()==="blob"&&await R.type()==="blob"){if(x.push(A),C.push(A),!h){const V=await N.oid(),F=await R.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:V,stage:1}),i.insert({filepath:A,oid:F,stage:2})}return{mode:await R.mode(),oid:await R.oid(),type:"blob",path:O}}if(N&&!R&&!I&&await N.type()==="blob")return;throw new Ly}}},reduce:x.length!==0&&(!n||h)?void 0:async(A,R)=>{const N=R.filter(Boolean);if(A&&!(A&&A.type==="tree"&&N.length===0)){if(N.length>0){const O=new Ao(N).toObject(),L=await Io({fs:e,gitdir:r,type:"tree",object:O,dryRun:d});A.oid=L}return A}}});return x.length!==0?(n&&!h&&await ph({fs:e,cache:t,dir:n,gitdir:r,trees:[Ll({ref:k.oid})],map:async function(A,[R]){const N=`${n}/${A}`;if(await R.type()==="blob"){const I=await R.mode(),O=new TextDecoder().decode(await R.content());await e.write(N,O,{mode:I})}return!0}}),new By(x,w,S,C)):k.oid}async function OEe({fs:e,gitdir:t,path:n,ours:r,base:i,theirs:s,ourName:a,theirName:o,baseName:l,dryRun:c,mergeDriver:u=IEe}){const d="blob",h=await i.mode()===await r.mode()?await s.mode():await r.mode();if(await r.oid()===await s.oid())return{cleanMerge:!0,mergeResult:{mode:h,path:n,oid:await r.oid(),type:d}};if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:h,path:n,oid:await s.oid(),type:d}};if(await s.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:h,path:n,oid:await r.oid(),type:d}};const m=on.from(await r.content()).toString("utf8"),y=on.from(await i.content()).toString("utf8"),b=on.from(await s.content()).toString("utf8"),{mergedText:v,cleanMerge:x}=await u({branches:[l,a,o],contents:[y,m,b],path:n}),w=await Io({fs:e,gitdir:t,type:"blob",object:on.from(v,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:h,path:n,oid:w,type:d}}}async function PZ({fs:e,cache:t,dir:n,gitdir:r,ours:i,theirs:s,fastForward:a=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:d,author:h,committer:m,signingKey:y,onSign:b,mergeDriver:v}){i===void 0&&(i=await Oh({fs:e,gitdir:r,fullname:!0})),i=await Kt.expand({fs:e,gitdir:r,ref:i}),s=await Kt.expand({fs:e,gitdir:r,ref:s});const x=await Kt.resolve({fs:e,gitdir:r,ref:i}),w=await Kt.resolve({fs:e,gitdir:r,ref:s}),S=await uD({fs:e,cache:t,gitdir:r,oids:[x,w]});if(S.length!==1)throw new Ly;const C=S[0];if(C===w)return{oid:x,alreadyMerged:!0};if(a&&C===x)return!l&&!c&&await Kt.writeRef({fs:e,gitdir:r,ref:i,value:w}),{oid:w,fastForward:!0};{if(o)throw new d1;const k=await ra.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async R=>jEe({fs:e,cache:t,dir:n,gitdir:r,index:R,ourOid:x,theirOid:w,baseOid:C,ourName:Ip(i),baseName:"base",theirName:Ip(s),dryRun:l,abortOnConflict:u,mergeDriver:v}));if(k instanceof By)throw k;return d||(d=`Merge branch '${Ip(s)}' into ${Ip(i)}`),{oid:await HE({fs:e,cache:t,gitdir:r,message:d,ref:i,tree:k,parent:[x,w],author:h,committer:m,signingKey:y,onSign:b,dryRun:l,noUpdateBranch:c}),tree:k,mergeCommit:!0}}}async function DZ({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,dir:l,gitdir:c,ref:u,url:d,remote:h,remoteRef:m,prune:y,pruneTags:b,fastForward:v,fastForwardOnly:x,corsProxy:w,singleBranch:S,headers:C,author:k,committer:A,signingKey:R}){try{if(!u){const O=await Oh({fs:e,gitdir:c});if(!O)throw new ko("ref");u=O}const{fetchHead:N,fetchHeadDescription:I}=await cD({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:c,corsProxy:w,ref:u,url:d,remote:h,remoteRef:m,singleBranch:S,headers:C,prune:y,pruneTags:b});await PZ({fs:e,cache:t,gitdir:c,ours:u,theirs:N,fastForward:v,fastForwardOnly:x,message:`Merge ${I}`,author:k,committer:A,signingKey:R,dryRun:!1,noUpdateBranch:!1}),await lD({fs:e,cache:t,onProgress:r,dir:l,gitdir:c,ref:u,remote:h,noCheckout:!1})}catch(N){throw N.caller="git.pull",N}}async function PEe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l=Lt.join(o,".git"),ref:c,url:u,remote:d,remoteRef:h,corsProxy:m,singleBranch:y,headers:b={},cache:v={}}){try{lt("fs",e),lt("http",t),lt("gitdir",l);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await DZ({fs:new _n(e),cache:v,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l,ref:c,url:u,remote:d,remoteRef:h,fastForwardOnly:!0,corsProxy:m,singleBranch:y,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function DEe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l=Lt.join(o,".git"),ref:c,remote:u,remoteRef:d,url:h,corsProxy:m,depth:y=null,since:b=null,exclude:v=[],relative:x=!1,tags:w=!1,singleBranch:S=!1,headers:C={},prune:k=!1,pruneTags:A=!1,cache:R={}}){try{return lt("fs",e),lt("http",t),lt("gitdir",l),await cD({fs:new _n(e),cache:R,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,gitdir:l,ref:c,remote:u,remoteRef:d,url:h,corsProxy:m,depth:y,since:b,exclude:v,relative:x,tags:w,singleBranch:S,headers:C,prune:k,pruneTags:A})}catch(N){throw N.caller="git.fetch",N}}async function FEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oids:r,cache:i={}}){try{return lt("fs",e),lt("gitdir",n),lt("oids",r),await uD({fs:new _n(e),cache:i,gitdir:n,oids:r})}catch(s){throw s.caller="git.findMergeBase",s}}async function FZ({fs:e,filepath:t}){if(await e.exists(Lt.join(t,".git")))return t;{const n=W0(t);if(n===t)throw new Si(`git root for ${t}`);return FZ({fs:e,filepath:n})}}async function LEe({fs:e,filepath:t}){try{return lt("fs",e),lt("filepath",t),await FZ({fs:new _n(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function BEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),path:r}){try{return lt("fs",e),lt("gitdir",n),lt("path",r),await Gx({fs:new _n(e),gitdir:n,path:r})}catch(i){throw i.caller="git.getConfig",i}}async function $Ee({fs:e,gitdir:t,path:n}){return(await Rs.get({fs:e,gitdir:t})).getall(n)}async function zEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),path:r}){try{return lt("fs",e),lt("gitdir",n),lt("path",r),await $Ee({fs:new _n(e),gitdir:n,path:r})}catch(i){throw i.caller="git.getConfigAll",i}}async function UEe({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:s,headers:a={},forPush:o=!1}){try{lt("http",e),lt("url",s);const c=await GE.getRemoteHelperFor({url:s}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,headers:a,protocolVersion:1}),u={capabilities:[...c.capabilities]};for(const[d,h]of c.refs){const m=d.split("/"),y=m.pop();let b=u;for(const v of m)b[v]=b[v]||{},b=b[v];b[y]=h}for(const[d,h]of c.symrefs){const m=d.split("/"),y=m.pop();let b=u;for(const v of m)b[v]=b[v]||{},b=b[v];b[y]=h}return u}catch(l){throw l.caller="git.getRemoteInfo",l}}function LZ(e,t,n,r){const i=[];for(const[s,a]of e.refs){if(t&&!s.startsWith(t))continue;if(s.endsWith("^{}")){if(r){const l=s.replace("^{}",""),c=i[i.length-1],u=c.ref===l?c:i.find(d=>d.ref===l);if(u===void 0)throw new Error("I did not expect this to happen");u.peeled=a}continue}const o={ref:s,oid:a};n&&e.symrefs.has(s)&&(o.target=e.symrefs.get(s)),i.push(o)}return i}async function qEe({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:s,headers:a={},forPush:o=!1,protocolVersion:l=2}){try{lt("http",e),lt("url",s);const u=await GE.getRemoteHelperFor({url:s}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,headers:a,protocolVersion:l});if(u.protocolVersion===2)return{protocolVersion:u.protocolVersion,capabilities:u.capabilities2};const d={};for(const h of u.capabilities){const[m,y]=h.split("=");y?d[m]=y:d[m]=!0}return{protocolVersion:1,capabilities:d,refs:LZ(u,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function VEe({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Fy.wrap({type:e,object:t})),r=await Ld(t)),{oid:r,object:t}}async function WEe({object:e}){try{lt("object",e),typeof e=="string"?e=on.from(e,"utf8"):e=on.from(e);const t="blob",{oid:n,object:r}=await VEe({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function HEe({fs:e,cache:t,onProgress:n,dir:r,gitdir:i,filepath:s}){try{s=Lt.join(r,s);const a=await e.read(s),o=c=>Wi({fs:e,cache:t,gitdir:i,oid:c}),l=await H0.fromPack({pack:a,getExternalRefDelta:o,onProgress:n});return await e.write(s.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(a){throw a.caller="git.indexPack",a}}async function GEe({fs:e,onProgress:t,dir:n,gitdir:r=Lt.join(n,".git"),filepath:i,cache:s={}}){try{return lt("fs",e),lt("dir",n),lt("gitdir",n),lt("filepath",i),await HEe({fs:new _n(e),cache:s,onProgress:t,dir:n,gitdir:r,filepath:i})}catch(a){throw a.caller="git.indexPack",a}}async function KEe({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Lt.join(n,".git"),defaultBranch:i="master"}){try{return lt("fs",e),lt("gitdir",r),t||lt("dir",n),await OZ({fs:new _n(e),bare:t,dir:n,gitdir:r,defaultBranch:i})}catch(s){throw s.caller="git.init",s}}async function BZ({fs:e,cache:t,gitdir:n,oid:r,ancestor:i,depth:s}){const a=await Kx.read({fs:e,gitdir:n});if(!r)throw new ko("oid");if(!i)throw new ko("ancestor");if(r===i)return!1;const o=[r],l=new Set;let c=0;for(;o.length;){if(c++===s)throw new h1(s);const u=o.shift(),{type:d,object:h}=await Wi({fs:e,cache:t,gitdir:n,oid:u});if(d!=="commit")throw new so(u,d,"commit");const m=Vi.from(h).parse();for(const y of m.parent)if(y===i)return!0;if(!a.has(u))for(const y of m.parent)l.has(y)||(o.push(y),l.add(y))}return!1}async function YEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,ancestor:i,depth:s=-1,cache:a={}}){try{return lt("fs",e),lt("gitdir",n),lt("oid",r),lt("ancestor",i),await BZ({fs:new _n(e),cache:a,gitdir:n,oid:r,ancestor:i,depth:s})}catch(o){throw o.caller="git.isDescendent",o}}async function ZEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r}){try{return lt("fs",e),lt("dir",t),lt("gitdir",n),lt("filepath",r),zy.isIgnored({fs:new _n(e),dir:t,gitdir:n,filepath:r})}catch(i){throw i.caller="git.isIgnored",i}}async function XEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),remote:r}){try{return lt("fs",e),lt("gitdir",n),Kt.listBranches({fs:new _n(e),gitdir:n,remote:r})}catch(i){throw i.caller="git.listBranches",i}}async function JEe({fs:e,gitdir:t,ref:n,cache:r}){if(n){const i=await Kt.resolve({gitdir:t,fs:e,ref:n}),s=[];return await $Z({fs:e,cache:r,gitdir:t,oid:i,filenames:s,prefix:""}),s}else return ra.acquire({fs:e,gitdir:t,cache:r},async function(i){return i.entries.map(s=>s.path)})}async function $Z({fs:e,cache:t,gitdir:n,oid:r,filenames:i,prefix:s}){const{tree:a}=await Uy({fs:e,cache:t,gitdir:n,oid:r});for(const o of a)o.type==="tree"?await $Z({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:i,prefix:Lt.join(s,o.path)}):i.push(Lt.join(s,o.path))}async function QEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,cache:i={}}){try{return lt("fs",e),lt("gitdir",n),await JEe({fs:new _n(e),cache:i,gitdir:n,ref:r})}catch(s){throw s.caller="git.listFiles",s}}async function eTe({fs:e,cache:t,gitdir:n,ref:r}){let i;try{i=await Kt.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof Si)return[]}return(await Uy({fs:e,cache:t,gitdir:n,oid:i})).tree.map(o=>({target:o.path,note:o.oid}))}async function tTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r="refs/notes/commits",cache:i={}}){try{return lt("fs",e),lt("gitdir",n),lt("ref",r),await eTe({fs:new _n(e),cache:i,gitdir:n,ref:r})}catch(s){throw s.caller="git.listNotes",s}}async function nTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r}){try{return lt("fs",e),lt("gitdir",n),Kt.listRefs({fs:new _n(e),gitdir:n,filepath:r})}catch(i){throw i.caller="git.listRefs",i}}async function rTe({fs:e,gitdir:t}){const n=await Rs.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async s=>{const a=await n.get(`remote.${s}.url`);return{remote:s,url:a}}))}async function iTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git")}){try{return lt("fs",e),lt("gitdir",n),await rTe({fs:new _n(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function sTe(e){const t=cs.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[i,s,...a]=r.split(" "),o={ref:s,oid:i};for(const l of a){const[c,u]=l.split(":");c==="symref-target"?o.target=u:c==="peeled"&&(o.peeled=u)}n.push(o)}return n}async function aTe({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(cs.encode(`command=ls-refs
`)),r.push(cs.encode(`agent=${KE.agent}
`)),(n||t||e)&&r.push(cs.delim()),n&&r.push(cs.encode("peel")),t&&r.push(cs.encode("symrefs")),e&&r.push(cs.encode(`ref-prefix ${e}`)),r.push(cs.flush()),r}async function oTe({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:s,headers:a={},forPush:o=!1,protocolVersion:l=2,prefix:c,symrefs:u,peelTags:d}){try{lt("http",e),lt("url",s);const h=await UC.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,headers:a,protocolVersion:l});if(h.protocolVersion===1)return LZ(h,c,u,d);const m=await aTe({prefix:c,symrefs:u,peelTags:d}),y=await UC.connect({http:e,auth:h.auth,headers:a,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,body:m});return sTe(y.body)}catch(h){throw h.caller="git.listServerRefs",h}}async function lTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git")}){try{return lt("fs",e),lt("gitdir",n),Kt.listTags({fs:new _n(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function cTe(e,t){return e.committer.timestamp-t.committer.timestamp}const uTe="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function Tz({fs:e,cache:t,gitdir:n,oid:r,fileId:i}){if(i===uTe)return;const s=r;let a;const o=await Y0({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return i===o.oid?a=o.path:(a=await zZ({fs:e,cache:t,gitdir:n,tree:l,fileId:i,oid:s}),Array.isArray(a)&&(a.length===0?a=void 0:a.length===1&&(a=a[0]))),a}async function zZ({fs:e,cache:t,gitdir:n,tree:r,fileId:i,oid:s,filepaths:a=[],parentPath:o=""}){const l=r.entries().map(function(c){let u;return c.oid===i?(u=Lt.join(o,c.path),a.push(u)):c.type==="tree"&&(u=Wi({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:d}){return zZ({fs:e,cache:t,gitdir:n,tree:Ao.from(d),fileId:i,oid:s,filepaths:a,parentPath:Lt.join(o,c.path)})})),u});return await Promise.all(l),a}async function dTe({fs:e,cache:t,gitdir:n,filepath:r,ref:i,depth:s,since:a,force:o,follow:l}){const c=typeof a>"u"?void 0:Math.floor(a.valueOf()/1e3),u=[],d=await Kx.read({fs:e,gitdir:n}),h=await Kt.resolve({fs:e,gitdir:n,ref:i}),m=[await X0({fs:e,cache:t,gitdir:n,oid:h})];let y,b,v;function x(w){v&&r&&u.push(w)}for(;m.length>0;){const w=m.pop();if(c!==void 0&&w.commit.committer.timestamp<=c)break;if(r){let S;try{S=await w1({fs:e,cache:t,gitdir:n,oid:w.commit.tree,filepath:r}),b&&y!==S&&u.push(b),y=S,b=w,v=!0}catch(C){if(C instanceof Si){let k=l&&y;if(k&&(k=await Tz({fs:e,cache:t,gitdir:n,oid:w.commit.tree,fileId:y}),k))if(Array.isArray(k)){if(b){const A=await Tz({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:y});if(Array.isArray(A))if(k=k.filter(R=>A.indexOf(R)===-1),k.length===1)k=k[0],r=k,b&&u.push(b);else{k=!1,b&&u.push(b);break}}}else r=k,b&&u.push(b);if(!k){if(v&&y&&(u.push(b),!o))break;if(!o&&!l)throw C}b=w,v=!1}else throw C}}else u.push(w);if(s!==void 0&&u.length===s){x(w);break}if(!d.has(w.oid))for(const S of w.commit.parent){const C=await X0({fs:e,cache:t,gitdir:n,oid:S});m.map(k=>k.oid).includes(C.oid)||m.push(C)}m.length===0&&x(w),m.sort((S,C)=>cTe(S.commit,C.commit))}return u}async function fTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,ref:i="HEAD",depth:s,since:a,force:o,follow:l,cache:c={}}){try{return lt("fs",e),lt("gitdir",n),lt("ref",i),await dTe({fs:new _n(e),cache:c,gitdir:n,filepath:r,ref:i,depth:s,since:a,force:o,follow:l})}catch(u){throw u.caller="git.log",u}}async function hTe({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),ours:i,theirs:s,fastForward:a=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:d,author:h,committer:m,signingKey:y,cache:b={},mergeDriver:v}){try{lt("fs",e),y&&lt("onSign",t);const x=new _n(e),w=await mh({fs:x,gitdir:r,author:h});if(!w&&(!o||!a))throw new Da("author");const S=await Z0({fs:x,gitdir:r,author:w,committer:m});if(!S&&(!o||!a))throw new Da("committer");return await PZ({fs:x,cache:b,dir:n,gitdir:r,ours:i,theirs:s,fastForward:a,fastForwardOnly:o,dryRun:l,noUpdateBranch:c,abortOnConflict:u,message:d,author:w,committer:S,signingKey:y,onSign:t,mergeDriver:v})}catch(x){throw x.caller="git.merge",x}}const pTe={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function UZ({fs:e,cache:t,dir:n,gitdir:r=Lt.join(n,".git"),oids:i}){const s=new sZ,a=[];function o(u,d){const h=on.from(u,d);a.push(h),s.update(h)}async function l({stype:u,object:d}){const h=pTe[u];let m=d.length,y=m>15?128:0;const b=m&15;m=m>>>4;let v=(y|h|b).toString(16);for(o(v,"hex");y;)y=m>127?128:0,v=y|m&127,o(Pj(2,v),"hex"),m=m>>>7;o(on.from(await wZ(d)))}o("PACK"),o("00000002","hex"),o(Pj(8,i.length),"hex");for(const u of i){const{type:d,object:h}=await Wi({fs:e,cache:t,gitdir:r,oid:u});await l({object:h,stype:d})}const c=s.digest();return a.push(c),a}async function mTe({fs:e,cache:t,gitdir:n,oids:r,write:i}){const s=await UZ({fs:e,cache:t,gitdir:n,oids:r}),a=on.from(await zC(s)),l=`pack-${a.slice(-20).toString("hex")}.pack`;return i?(await e.write(Lt.join(n,`objects/pack/${l}`),a),{filename:l}):{filename:l,packfile:new Uint8Array(a)}}async function gTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oids:r,write:i=!1,cache:s={}}){try{return lt("fs",e),lt("gitdir",n),lt("oids",r),await mTe({fs:new _n(e),cache:s,gitdir:n,oids:r,write:i})}catch(a){throw a.caller="git.packObjects",a}}async function yTe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l=Lt.join(o,".git"),ref:c,url:u,remote:d,remoteRef:h,prune:m=!1,pruneTags:y=!1,fastForward:b=!0,fastForwardOnly:v=!1,corsProxy:x,singleBranch:w,headers:S={},author:C,committer:k,signingKey:A,cache:R={}}){try{lt("fs",e),lt("gitdir",l);const N=new _n(e),I=await mh({fs:N,gitdir:l,author:C});if(!I)throw new Da("author");const O=await Z0({fs:N,gitdir:l,author:I,committer:k});if(!O)throw new Da("committer");return await DZ({fs:N,cache:R,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l,ref:c,url:u,remote:d,remoteRef:h,fastForward:b,fastForwardOnly:v,corsProxy:x,singleBranch:w,headers:S,author:I,committer:O,signingKey:A,prune:m,pruneTags:y})}catch(N){throw N.caller="git.pull",N}}async function bTe({fs:e,cache:t,dir:n,gitdir:r=Lt.join(n,".git"),start:i,finish:s}){const a=await Kx.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const d of i)o.add(await Kt.resolve({fs:e,gitdir:r,ref:d}));for(const d of s)try{const h=await Kt.resolve({fs:e,gitdir:r,ref:d});l.add(h)}catch{}const c=new Set;async function u(d){c.add(d);const{type:h,object:m}=await Wi({fs:e,cache:t,gitdir:r,oid:d});if(h==="tag"){const b=Xa.from(m).headers().object;return u(b)}if(h!=="commit")throw new so(d,h,"commit");if(!a.has(d)){const b=Vi.from(m).headers().parent;for(d of b)!l.has(d)&&!c.has(d)&&await u(d)}}for(const d of o)await u(d);return c}async function aI({fs:e,cache:t,dir:n,gitdir:r=Lt.join(n,".git"),oids:i}){const s=new Set;async function a(o){if(s.has(o))return;s.add(o);const{type:l,object:c}=await Wi({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const d=Xa.from(c).headers().object;await a(d)}else if(l==="commit"){const d=Vi.from(c).headers().tree;await a(d)}else if(l==="tree"){const u=Ao.from(c);for(const d of u)d.type==="blob"&&s.add(d.oid),d.type==="tree"&&await a(d.oid)}}for(const o of i)await a(o);return s}async function vTe(e){const t={};let n="";const r=cs.streamReader(e);let i=await r();for(;i!==!0;)i!==null&&(n+=i.toString("utf8")+`
`),i=await r();const s=n.toString("utf8").split(`
`);if(i=s.shift(),!i.startsWith("unpack "))throw new Rm('unpack ok" or "unpack [error message]',i);t.ok=i==="unpack ok",t.ok||(t.error=i.slice(7)),t.refs={};for(const a of s){if(a.trim()==="")continue;const o=a.slice(0,2),l=a.slice(3);let c=l.indexOf(" ");c===-1&&(c=l.length);const u=l.slice(0,c),d=l.slice(c+1);t.refs[u]={ok:o==="ok",error:d}}return t}async function xTe({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const i of t)n.push(cs.encode(`${i.oldoid} ${i.oid} ${i.fullRef}${r}
`)),r="";return n.push(cs.flush()),n}async function wTe({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,onPrePush:l,gitdir:c,ref:u,remoteRef:d,remote:h,url:m,force:y=!1,delete:b=!1,corsProxy:v,headers:x={}}){const w=u||await Oh({fs:e,gitdir:c});if(typeof w>"u")throw new ko("ref");const S=await Rs.get({fs:e,gitdir:c});h=h||await S.get(`branch.${w}.pushRemote`)||await S.get("remote.pushDefault")||await S.get(`branch.${w}.remote`)||"origin";const C=m||await S.get(`remote.${h}.pushurl`)||await S.get(`remote.${h}.url`);if(typeof C>"u")throw new ko("remote OR url");const k=d||await S.get(`branch.${w}.merge`);if(typeof C>"u")throw new ko("remoteRef");v===void 0&&(v=await S.get("http.corsProxy"));const A=await Kt.expand({fs:e,gitdir:c,ref:w}),R=b?"0000000000000000000000000000000000000000":await Kt.resolve({fs:e,gitdir:c,ref:A}),N=GE.getRemoteHelperFor({url:C}),I=await N.discover({http:n,onAuth:s,onAuthSuccess:a,onAuthFailure:o,corsProxy:v,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),O=I.auth;let L;if(!k)L=A;else try{L=await Kt.expandAgainstMap({ref:k,map:I.refs})}catch(ee){if(ee instanceof Si)L=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw ee}const P=I.refs.get(L)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:h,url:C,localRef:{ref:b?"(delete)":A,oid:R},remoteRef:{ref:L,oid:P}}))throw new $y;const V=!I.capabilities.has("no-thin");let F=new Set;if(!b){const ee=[...I.refs.values()];let re=new Set;if(P!=="0000000000000000000000000000000000000000"){const de=await uD({fs:e,cache:t,gitdir:c,oids:[R,P]});for(const oe of de)ee.push(oe);V&&(re=await aI({fs:e,cache:t,gitdir:c,oids:de}))}if(!ee.includes(R)){const de=await bTe({fs:e,cache:t,gitdir:c,start:[R],finish:ee});F=await aI({fs:e,cache:t,gitdir:c,oids:de})}if(V){try{const de=await Kt.resolve({fs:e,gitdir:c,ref:`refs/remotes/${h}/HEAD`,depth:2}),{oid:oe}=await Kt.resolveAgainstMap({ref:de.replace(`refs/remotes/${h}/`,""),fullref:de,map:I.refs}),Ie=[oe];for(const je of await aI({fs:e,cache:t,gitdir:c,oids:Ie}))re.add(je)}catch{}for(const de of re)F.delete(de)}if(R===P&&(y=!0),!y){if(A.startsWith("refs/tags")&&P!=="0000000000000000000000000000000000000000")throw new K0("tag-exists");if(R!=="0000000000000000000000000000000000000000"&&P!=="0000000000000000000000000000000000000000"&&!await BZ({fs:e,cache:t,gitdir:c,oid:R,ancestor:P,depth:-1}))throw new K0("not-fast-forward")}}const J=MZ([...I.capabilities],["report-status","side-band-64k",`agent=${KE.agent}`]),U=await xTe({capabilities:J,triplets:[{oldoid:P,oid:R,fullRef:L}]}),G=b?[]:await UZ({fs:e,cache:t,gitdir:c,oids:[...F]}),$=await N.connect({http:n,onProgress:r,corsProxy:v,service:"git-receive-pack",url:C,auth:O,headers:x,body:[...U,...G]}),{packfile:ne,progress:W}=await jZ.demux($.body);if(i){const ee=IZ(W);S1(ee,async re=>{await i(re)})}const te=await vTe(ne);if($.headers&&(te.headers=$.headers),h&&te.ok&&te.refs[L].ok&&!A.startsWith("refs/tags")){const ee=`refs/remotes/${h}/${L.replace("refs/heads","")}`;b?await Kt.deleteRef({fs:e,gitdir:c,ref:ee}):await Kt.writeRef({fs:e,gitdir:c,ref:ee,value:R})}if(te.ok&&Object.values(te.refs).every(ee=>ee.ok))return te;{const ee=Object.entries(te.refs).filter(([re,de])=>!de.ok).map(([re,de])=>`
  - ${re}: ${de.error}`).join("");throw new f1(ee,te)}}async function _Te({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,onPrePush:o,dir:l,gitdir:c=Lt.join(l,".git"),ref:u,remoteRef:d,remote:h="origin",url:m,force:y=!1,delete:b=!1,corsProxy:v,headers:x={},cache:w={}}){try{return lt("fs",e),lt("http",t),lt("gitdir",c),await wTe({fs:new _n(e),cache:w,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,onPrePush:o,gitdir:c,ref:u,remoteRef:d,remote:h,url:m,force:y,delete:b,corsProxy:v,headers:x})}catch(S){throw S.caller="git.push",S}}async function qZ({fs:e,cache:t,gitdir:n,oid:r}){const{type:i,object:s}=await Wi({fs:e,cache:t,gitdir:n,oid:r});if(i==="tag")return r=Xa.from(s).parse().object,qZ({fs:e,cache:t,gitdir:n,oid:r});if(i!=="blob")throw new so(r,i,"blob");return{oid:r,blob:new Uint8Array(s)}}async function VZ({fs:e,cache:t,gitdir:n,oid:r,filepath:i=void 0}){return i!==void 0&&(r=await w1({fs:e,cache:t,gitdir:n,oid:r,filepath:i})),await qZ({fs:e,cache:t,gitdir:n,oid:r})}async function STe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,filepath:i,cache:s={}}){try{return lt("fs",e),lt("gitdir",n),lt("oid",r),await VZ({fs:new _n(e),cache:s,gitdir:n,oid:r,filepath:i})}catch(a){throw a.caller="git.readBlob",a}}async function WZ({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,cache:i={}}){try{return lt("fs",e),lt("gitdir",n),lt("oid",r),await X0({fs:new _n(e),cache:i,gitdir:n,oid:r})}catch(s){throw s.caller="git.readCommit",s}}async function CTe({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:i}){const s=await Kt.resolve({gitdir:n,fs:e,ref:r}),{blob:a}=await VZ({fs:e,cache:t,gitdir:n,oid:s,filepath:i});return a}async function kTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r="refs/notes/commits",oid:i,cache:s={}}){try{return lt("fs",e),lt("gitdir",n),lt("ref",r),lt("oid",i),await CTe({fs:new _n(e),cache:s,gitdir:n,ref:r,oid:i})}catch(a){throw a.caller="git.readNote",a}}async function ETe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,format:i="parsed",filepath:s=void 0,encoding:a=void 0,cache:o={}}){try{lt("fs",e),lt("gitdir",n),lt("oid",r);const l=new _n(e);s!==void 0&&(r=await w1({fs:l,cache:o,gitdir:n,oid:r,filepath:s}));const u=await Wi({fs:l,cache:o,gitdir:n,oid:r,format:i==="parsed"?"content":i});if(u.oid=r,i==="parsed")switch(u.format="parsed",u.type){case"commit":u.object=Vi.from(u.object).parse();break;case"tree":u.object=Ao.from(u.object).entries();break;case"blob":a?u.object=u.object.toString(a):(u.object=new Uint8Array(u.object),u.format="content");break;case"tag":u.object=Xa.from(u.object).parse();break;default:throw new so(u.oid,u.type,"blob|commit|tag|tree")}else(u.format==="deflated"||u.format==="wrapped")&&(u.type=u.format);return u}catch(l){throw l.caller="git.readObject",l}}async function TTe({fs:e,cache:t,gitdir:n,oid:r}){const{type:i,object:s}=await Wi({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(i!=="tag")throw new so(r,i,"tag");const a=Xa.from(s);return{oid:r,tag:a.parse(),payload:a.payload()}}async function ATe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,cache:i={}}){try{return lt("fs",e),lt("gitdir",n),lt("oid",r),await TTe({fs:new _n(e),cache:i,gitdir:n,oid:r})}catch(s){throw s.caller="git.readTag",s}}async function RTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,filepath:i=void 0,cache:s={}}){try{return lt("fs",e),lt("gitdir",n),lt("oid",r),await Uy({fs:new _n(e),cache:s,gitdir:n,oid:r,filepath:i})}catch(a){throw a.caller="git.readTree",a}}async function NTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,cache:i={}}){try{lt("fs",e),lt("gitdir",n),lt("filepath",r),await ra.acquire({fs:new _n(e),gitdir:n,cache:i},async function(s){s.delete({filepath:r})})}catch(s){throw s.caller="git.remove",s}}async function MTe({fs:e,cache:t,onSign:n,gitdir:r,ref:i="refs/notes/commits",oid:s,author:a,committer:o,signingKey:l}){let c;try{c=await Kt.resolve({gitdir:r,fs:e,ref:i})}catch(y){if(!(y instanceof Si))throw y}let d=(await Uy({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;d=d.filter(y=>y.path!==s);const h=await _1({fs:e,gitdir:r,tree:d});return await HE({fs:e,cache:t,onSign:n,gitdir:r,ref:i,tree:h,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:a,committer:o,signingKey:l})}async function ITe({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),ref:i="refs/notes/commits",oid:s,author:a,committer:o,signingKey:l,cache:c={}}){try{lt("fs",e),lt("gitdir",r),lt("oid",s);const u=new _n(e),d=await mh({fs:u,gitdir:r,author:a});if(!d)throw new Da("author");const h=await Z0({fs:u,gitdir:r,author:d,committer:o});if(!h)throw new Da("committer");return await MTe({fs:u,cache:c,onSign:t,gitdir:r,ref:i,oid:s,author:d,committer:h,signingKey:l})}catch(u){throw u.caller="git.removeNote",u}}async function jTe({fs:e,gitdir:t,oldref:n,ref:r,checkout:i=!1}){if(r!==lu.clean(r))throw new kc(r,lu.clean(r));if(n!==lu.clean(n))throw new kc(n,lu.clean(n));const s=`refs/heads/${n}`,a=`refs/heads/${r}`;if(await Kt.exists({fs:e,gitdir:t,ref:a}))throw new Rc("branch",r,!1);const l=await Kt.resolve({fs:e,gitdir:t,ref:s,depth:1});await Kt.writeRef({fs:e,gitdir:t,ref:a,value:l}),await Kt.deleteRef({fs:e,gitdir:t,ref:s});const u=await Oh({fs:e,gitdir:t,fullname:!0})===s;(i||u)&&await Kt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:a})}async function OTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,oldref:i,checkout:s=!1}){try{return lt("fs",e),lt("gitdir",n),lt("ref",r),lt("oldref",i),await jTe({fs:new _n(e),gitdir:n,ref:r,oldref:i,checkout:s})}catch(a){throw a.caller="git.renameBranch",a}}async function HZ({gitdir:e,type:t,object:n}){return Ld(Fy.wrap({type:t,object:n}))}async function PTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,ref:i,cache:s={}}){try{lt("fs",e),lt("gitdir",n),lt("filepath",r);const a=new _n(e);let o,l;try{o=await Kt.resolve({fs:a,gitdir:n,ref:i||"HEAD"})}catch(d){if(i)throw d}if(o)try{o=await w1({fs:a,cache:s,gitdir:n,oid:o,filepath:r})}catch{o=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const u=t&&await a.read(Lt.join(t,r));u&&(l=await HZ({gitdir:n,type:"blob",object:u}),o===l&&(c=await a.lstat(Lt.join(t,r)))),await ra.acquire({fs:a,gitdir:n,cache:s},async function(d){d.delete({filepath:r}),o&&d.insert({filepath:r,stats:c,oid:o})})}catch(a){throw a.caller="git.reset",a}}async function DTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,depth:i}){try{return lt("fs",e),lt("gitdir",n),lt("ref",r),await Kt.resolve({fs:new _n(e),gitdir:n,ref:r,depth:i})}catch(s){throw s.caller="git.resolveRef",s}}async function FTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),path:r,value:i,append:s=!1}){try{lt("fs",e),lt("gitdir",n),lt("path",r);const a=new _n(e),o=await Rs.get({fs:a,gitdir:n});s?await o.append(r,i):await o.set(r,i),await Rs.save({fs:a,gitdir:n,config:o})}catch(a){throw a.caller="git.setConfig",a}}async function GZ({fs:e,gitdir:t,commit:n}){const r=Vi.from(n).toObject();return await Io({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class qC{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const i=t.name.replace(/\s/g,""),s="0000000000000000000000000000000000000000",a=Math.floor(Date.now()/1e3),o=qC.timezoneOffsetForRefLogEntry;return`${s} ${n} ${i} ${t.email} ${a} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(s=>s).reverse().map((s,a)=>n?`stash@{${a}}: ${s.split("	")[1]}`:s)}}const LTe={stage:Dy,workdir:x1};let oI;async function J0(e,t){return oI===void 0&&(oI=new Hx),oI.acquire(e,t)}async function BTe(e,t,n,r,i=null){const s=Lt.join(n,r),a=await e.lstat(s);if(!a)throw new Si(s);if(a.isDirectory())throw new yr(`${s}: file expected, but found directory`);const o=i?await gZ({fs:e,gitdir:t,oid:i}):void 0;let l=o?i:void 0;return o||await J0({fs:e,gitdir:t,currentFilepath:s},async()=>{const c=a.isSymbolicLink()?await e.readlink(s).then(_Z):await e.read(s);if(c===null)throw new Si(s);l=await Io({fs:e,gitdir:t,type:"blob",object:c})}),l}async function $Te({fs:e,dir:t,gitdir:n,entries:r}){async function i(s){if(s.type==="tree"){if(!s.oid){const a=await Promise.all(s.children.map(i));s.oid=await _1({fs:e,gitdir:n,tree:a}),s.mode=16384}}else s.type==="blob"&&(s.oid=await BTe(e,n,t,s.path,s.oid),s.mode=33188);return s.path=s.path.split("/").pop(),s}return Promise.all(r.map(i))}async function Az({fs:e,dir:t,gitdir:n,treePair:r}){const i=r[1]==="stage",s=r.map(m=>typeof m=="string"?LTe[m]():m),a=[],u=await ph({fs:e,cache:{},dir:t,gitdir:n,trees:s,map:async(m,[y,b])=>{if(!(m==="."||await zy.isIgnored({fs:e,dir:t,gitdir:n,filepath:m}))&&b)return(!y||await y.oid()!==await b.oid()&&await b.oid()!==void 0)&&a.push([y,b]),{mode:await b.mode(),path:m,oid:await b.oid(),type:await b.type()}},reduce:async(m,y)=>(y=y.filter(Boolean),m?(m.children=y,m):y.length>0?y:void 0),iterate:async(m,y)=>{const b=[];for(const v of y){const[x,w]=v;i?w&&(await e.exists(`${t}/${w.toString()}`)?b.push(v):a.push([null,w])):x&&(w?b.push(v):a.push([x,null]))}return b.length?Promise.all(b.map(m)):[]}});if(a.length===0||u.length===0)return null;const h=(await $Te({fs:e,dir:t,gitdir:n,entries:u})).filter(Boolean).map(m=>({mode:m.mode,path:m.path,oid:m.oid,type:m.type}));return _1({fs:e,gitdir:n,tree:h})}async function zTe({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:i,wasStaged:s}){const a=[],o=[],l=await ph({fs:e,cache:{},dir:t,gitdir:n,trees:[Ll({ref:i}),Ll({ref:r})],map:async(c,[u,d])=>{if(c==="."||await zy.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const h=d?await d.type():await u.type();if(h!=="tree"&&h!=="blob")return;if(!d&&u){const y=h==="tree"?"rmdir":"rm";return h==="tree"&&a.push(c),h==="blob"&&s&&o.push({filepath:c,oid:await u.oid()}),{method:y,filepath:c}}const m=await d.oid();if(!u||await u.oid()!==m)return h==="tree"?{method:"mkdir",filepath:c}:(s&&o.push({filepath:c,oid:m,stats:await e.lstat(Lt.join(t,c))}),{method:"write",filepath:c,oid:m})}});await J0({fs:e,gitdir:n,dirRemoved:a,ops:l},async()=>{for(const c of l){const u=Lt.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(u);break;case"mkdir":await e.mkdir(u);break;case"rm":await e.rm(u);break;case"write":if(!a.some(d=>u.startsWith(d))){const{object:d}=await Wi({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(u)&&await e.rm(u),await e.write(u,d)}break}}}),await ra.acquire({fs:e,gitdir:n,cache:{}},async c=>{o.forEach(({filepath:u,stats:d,oid:h})=>{c.insert({filepath:u,stats:d,oid:h})})})}class Rd{constructor({fs:t,dir:n,gitdir:r=Lt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Lt.join(this.gitdir,Rd.refStash)}get refLogsStashPath(){return Lt.join(this.gitdir,Rd.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await mh({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Da("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return GZ({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new kc(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?X0({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Kt.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Rd.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),i=qC.createStashReflogEntry(r,t,n),s=this.refLogsStashPath;await J0({filepath:s,entry:i},async()=>{const a=await this.fs.exists(s)?await this.fs.read(s,"utf8"):"";await this.fs.write(s,a+i,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return qC.getStashReflogEntry(r,t)}}async function UTe({fs:e,dir:t,gitdir:n,message:r=""}){const i=new Rd({fs:e,dir:t,gitdir:n});await i.getAuthor();const s=await Oh({fs:e,gitdir:n,fullname:!1}),a=await Kt.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await WZ({fs:e,dir:t,gitdir:n,oid:a})).commit.message,c=[a];let u=null,d=Ll({ref:"HEAD"});const h=await Az({fs:e,dir:t,gitdir:n,treePair:[Ll({ref:"HEAD"}),"stage"]});if(h){const v=await i.writeStashCommit({message:`stash-Index: WIP on ${s} - ${new Date().toISOString()}`,tree:h,parent:c});c.push(v),u=h,d=Dy()}const m=await Az({fs:e,dir:t,gitdir:n,treePair:[d,"workdir"]});if(m){const v=await i.writeStashCommit({message:`stash-WorkDir: WIP on ${s} - ${new Date().toISOString()}`,tree:m,parent:[c[c.length-1]]});c.push(v),u=m}if(!u||!h&&!m)throw new Si("changes, nothing to stash");const y=(r.trim()||`WIP on ${s}`)+`: ${a.substring(0,7)} ${l}`,b=await i.writeStashCommit({message:y,tree:u,parent:c});return await i.writeStashRef(b),await i.writeStashReflogEntry({stashCommit:b,message:y}),await RZ({fs:e,dir:t,gitdir:n,ref:s,track:!1,force:!0}),b}async function KZ({fs:e,dir:t,gitdir:n,refIdx:r=0}){const s=await new Rd({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:a=null}=s.commit?s.commit:{};if(!(!a||!Array.isArray(a)))for(let o=0;o<a.length-1;o++){const c=(await X0({fs:e,cache:{},gitdir:n,oid:a[o+1]})).commit.message.startsWith("stash-Index");await zTe({fs:e,dir:t,gitdir:n,stashCommit:a[o+1],parentCommit:a[o],wasStaged:c})}}async function YZ({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=new Rd({fs:e,dir:t,gitdir:n});if(!(await i.readStashCommit(r)).commit)return;const a=i.refStashPath;await J0(a,async()=>{await e.exists(a)&&await e.rm(a)});const o=await i.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=i.refLogsStashPath;await J0({reflogEntries:o,stashReflogPath:l,stashMgr:i},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const c=o[o.length-1].split(" ")[1];await i.writeStashRef(c)}else await e.rm(l)})}async function qTe({fs:e,dir:t,gitdir:n}){return new Rd({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function VTe({fs:e,dir:t,gitdir:n}){const r=new Rd({fs:e,dir:t,gitdir:n}),i=[r.refStashPath,r.refLogsStashPath];await J0(i,async()=>{await Promise.all(i.map(async s=>{if(await e.exists(s))return e.rm(s)}))})}async function WTe({fs:e,dir:t,gitdir:n,refIdx:r=0}){await KZ({fs:e,dir:t,gitdir:n,refIdx:r}),await YZ({fs:e,dir:t,gitdir:n,refIdx:r})}async function HTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),op:r="push",message:i="",refIdx:s=0}){lt("fs",e),lt("dir",t),lt("gitdir",n),lt("op",r);const a={push:UTe,apply:KZ,drop:YZ,list:qTe,clear:VTe,pop:WTe},o=["apply","drop","pop"];try{const l=new _n(e);["refs","logs","logs/refs"].map(d=>Lt.join(n,d)).forEach(async d=>{await l.exists(d)||await l.mkdir(d)});const u=a[r];if(u){if(o.includes(r)&&s<0)throw new kc(`stash@${s}`,"number that is in range of [0, num of stash pushed]");return await u({fs:l,dir:t,gitdir:n,message:i,refIdx:s})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function GTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,cache:i={}}){try{lt("fs",e),lt("gitdir",n),lt("filepath",r);const s=new _n(e);if(await zy.isIgnored({fs:s,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await KTe({fs:s,cache:i,gitdir:n}),l=await ZZ({fs:s,cache:i,gitdir:n,tree:o,path:r}),c=await ra.acquire({fs:s,gitdir:n,cache:i},async function(b){for(const v of b)if(v.path===r)return v;return null}),u=await s.lstat(Lt.join(t,r)),d=l!==null,h=c!==null,m=u!==null,y=async()=>{if(h&&!PC(c,u))return c.oid;{const b=await s.read(Lt.join(t,r)),v=await HZ({gitdir:n,type:"blob",object:b});return h&&c.oid===v&&u.size!==-1&&ra.acquire({fs:s,gitdir:n,cache:i},async function(x){x.insert({filepath:r,stats:u,oid:v})}),v}};if(!d&&!m&&!h)return"absent";if(!d&&!m&&h)return"*absent";if(!d&&m&&!h)return"*added";if(!d&&m&&h)return await y()===c.oid?"added":"*added";if(d&&!m&&!h)return"deleted";if(d&&!m&&h)return l===c.oid,"*deleted";if(d&&m&&!h)return await y()===l?"*undeleted":"*undeletemodified";if(d&&m&&h){const b=await y();return b===l?b===c.oid?"unmodified":"*unmodified":b===c.oid?"modified":"*modified"}}catch(s){throw s.caller="git.status",s}}async function ZZ({fs:e,cache:t,gitdir:n,tree:r,path:i}){typeof i=="string"&&(i=i.split("/"));const s=i.shift();for(const a of r)if(a.path===s){if(i.length===0)return a.oid;const{type:o,object:l}=await Wi({fs:e,cache:t,gitdir:n,oid:a.oid});if(o==="tree"){const c=Ao.from(l);return ZZ({fs:e,cache:t,gitdir:n,tree:c,path:i})}if(o==="blob")throw new so(a.oid,o,"blob",i.join("/"))}return null}async function KTe({fs:e,cache:t,gitdir:n}){let r;try{r=await Kt.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(s){if(s instanceof Si)return[]}const{tree:i}=await Uy({fs:e,cache:t,gitdir:n,oid:r});return i}async function YTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r="HEAD",filepaths:i=["."],filter:s,cache:a={},ignored:o=!1}){try{lt("fs",e),lt("gitdir",n),lt("ref",r);const l=new _n(e);return await ph({fs:l,cache:a,dir:t,gitdir:n,trees:[Ll({ref:r}),x1(),Dy()],map:async function(c,[u,d,h]){if(!u&&!h&&d&&!o&&await zy.isIgnored({fs:l,dir:t,filepath:c})||!i.some(A=>AZ(c,A)))return null;if(s&&!s(c))return;const[m,y,b]=await Promise.all([u&&u.type(),d&&d.type(),h&&h.type()]),v=[m,y,b].includes("blob");if((m==="tree"||m==="special")&&!v)return;if(m==="commit")return null;if((y==="tree"||y==="special")&&!v)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!v)return;const x=m==="blob"?await u.oid():void 0,w=b==="blob"?await h.oid():void 0;let S;m!=="blob"&&y==="blob"&&b!=="blob"?S="42":y==="blob"&&(S=await d.oid());const C=[void 0,x,S,w],k=C.map(A=>C.indexOf(A));return k.shift(),[c,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function ZTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,object:i,force:s=!1}){try{lt("fs",e),lt("gitdir",n),lt("ref",r);const a=new _n(e);if(r===void 0)throw new ko("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await Kt.resolve({fs:a,gitdir:n,ref:i||"HEAD"});if(!s&&await Kt.exists({fs:a,gitdir:n,ref:r}))throw new Rc("tag",r);await Kt.writeRef({fs:a,gitdir:n,ref:r,value:o})}catch(a){throw a.caller="git.tag",a}}async function XTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),cache:r={},filepath:i,oid:s,mode:a,add:o,remove:l,force:c}){try{lt("fs",e),lt("gitdir",n),lt("filepath",i);const u=new _n(e);if(l)return await ra.acquire({fs:u,gitdir:n,cache:r},async function(h){if(!c){const m=await u.lstat(Lt.join(t,i));if(m){if(m.isDirectory())throw new hh("directory");return}}h.has({filepath:i})&&h.delete({filepath:i})});let d;if(!s){if(d=await u.lstat(Lt.join(t,i)),!d)throw new Si(`file at "${i}" on disk and "remove" not set`);if(d.isDirectory())throw new hh("directory")}return await ra.acquire({fs:u,gitdir:n,cache:r},async function(h){if(!o&&!h.has({filepath:i}))throw new Si(`file at "${i}" in index and "add" not set`);let m;if(s)m={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:a,uid:0,gid:0,size:0};else{m=d;const y=m.isSymbolicLink()?await u.readlink(Lt.join(t,i)):await u.read(Lt.join(t,i));s=await Io({fs:u,gitdir:n,type:"blob",format:"content",object:y})}return h.insert({filepath:i,oid:s,stats:m}),s})}catch(u){throw u.caller="git.updateIndex",u}}function JTe(){try{return KE.version}catch(e){throw e.caller="git.version",e}}async function QTe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),trees:r,map:i,reduce:s,iterate:a,cache:o={}}){try{return lt("fs",e),lt("gitdir",n),lt("trees",r),await ph({fs:new _n(e),cache:o,dir:t,gitdir:n,trees:r,map:i,reduce:s,iterate:a})}catch(l){throw l.caller="git.walk",l}}async function eAe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),blob:r}){try{return lt("fs",e),lt("gitdir",n),lt("blob",r),await Io({fs:new _n(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(i){throw i.caller="git.writeBlob",i}}async function tAe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),commit:r}){try{return lt("fs",e),lt("gitdir",n),lt("commit",r),await GZ({fs:new _n(e),gitdir:n,commit:r})}catch(i){throw i.caller="git.writeCommit",i}}async function nAe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),type:r,object:i,format:s="parsed",oid:a,encoding:o=void 0}){try{const l=new _n(e);if(s==="parsed"){switch(r){case"commit":i=Vi.from(i).toObject();break;case"tree":i=Ao.from(i).toObject();break;case"blob":i=on.from(i,o);break;case"tag":i=Xa.from(i).toObject();break;default:throw new so(a||"",r,"blob|commit|tag|tree")}s="content"}return a=await Io({fs:l,gitdir:n,type:r,object:i,oid:a,format:s}),a}catch(l){throw l.caller="git.writeObject",l}}async function rAe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,value:i,force:s=!1,symbolic:a=!1}){try{lt("fs",e),lt("gitdir",n),lt("ref",r),lt("value",i);const o=new _n(e);if(r!==lu.clean(r))throw new kc(r,lu.clean(r));if(!s&&await Kt.exists({fs:o,gitdir:n,ref:r}))throw new Rc("ref",r);a?await Kt.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:i}):(i=await Kt.resolve({fs:o,gitdir:n,ref:i}),await Kt.writeRef({fs:o,gitdir:n,ref:r,value:i}))}catch(o){throw o.caller="git.writeRef",o}}async function iAe({fs:e,gitdir:t,tag:n}){const r=Xa.from(n).toObject();return await Io({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function sAe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),tag:r}){try{return lt("fs",e),lt("gitdir",n),lt("tag",r),await iAe({fs:new _n(e),gitdir:n,tag:r})}catch(i){throw i.caller="git.writeTag",i}}async function aAe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),tree:r}){try{return lt("fs",e),lt("gitdir",n),lt("tree",r),await _1({fs:new _n(e),gitdir:n,tree:r})}catch(i){throw i.caller="git.writeTree",i}}var Ls={Errors:Oke,STAGE:Dy,TREE:Ll,WORKDIR:x1,add:Jke,abortMerge:Kke,addNote:eEe,addRemote:tEe,annotatedTag:rEe,branch:sEe,checkout:RZ,clone:yEe,commit:bEe,getConfig:BEe,getConfigAll:zEe,setConfig:FTe,currentBranch:vEe,deleteBranch:wEe,deleteRef:_Ee,deleteRemote:CEe,deleteTag:EEe,expandOid:NEe,expandRef:MEe,fastForward:PEe,fetch:DEe,findMergeBase:FEe,findRoot:LEe,getRemoteInfo:UEe,getRemoteInfo2:qEe,hashBlob:WEe,indexPack:GEe,init:KEe,isDescendent:YEe,isIgnored:ZEe,listBranches:XEe,listFiles:QEe,listNotes:tTe,listRefs:nTe,listRemotes:iTe,listServerRefs:oTe,listTags:lTe,log:fTe,merge:hTe,packObjects:gTe,pull:yTe,push:_Te,readBlob:STe,readCommit:WZ,readNote:kTe,readObject:ETe,readTag:ATe,readTree:RTe,remove:NTe,removeNote:ITe,renameBranch:OTe,resetIndex:PTe,updateIndex:XTe,resolveRef:DTe,status:GTe,statusMatrix:YTe,tag:ZTe,version:JTe,walk:QTe,writeBlob:eAe,writeCommit:tAe,writeObject:nAe,writeRef:rAe,writeTag:sAe,writeTree:aAe,stash:HTe};function oAe(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function lAe(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:oAe(e)}async function cAe(e,t){const n=lAe(e);for(;;){const{value:r,done:i}=await n.next();if(r&&await t(r),i)break}n.return&&n.return()}async function uAe(e){let t=0;const n=[];await cAe(e,s=>{n.push(s),t+=s.byteLength});const r=new Uint8Array(t);let i=0;for(const s of n)r.set(s,i),i+=s.byteLength;return r}function dAe(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function fAe({onProgress:e,url:t,method:n="GET",headers:r={},body:i}){i&&(i=await uAe(i));const s=await fetch(t,{method:n,headers:r,body:i}),a=s.body&&s.body.getReader?dAe(s.body):[new Uint8Array(await s.arrayBuffer())];r={};for(const[o,l]of s.headers.entries())r[o]=l;return{url:s.url,method:s.method,statusCode:s.status,statusMessage:s.statusText,body:a,headers:r}}var Yx={request:fAe};const Zx="https://cors.isomorphic-git.org",Q0=new Map,XZ=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=gr.getState();if(!n||!r)return Pe.error("Git user name and email must be configured in Settings before committing."),!1;try{const i=await Ls.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),s=await Ls.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return i!==n&&await Ls.setConfig({fs:t,dir:e,path:"user.name",value:n}),s!==r&&await Ls.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(i){return console.error("[VFS Git Op] Error checking/setting Git config:",i),Pe.error(`Failed to configure Git user: ${i instanceof Error?i.message:String(i)}`),!1}},Xx=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=Q0.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const i=window.prompt(`Enter username for ${e}`);if(!i)return Pe.error("Authentication cancelled: Username not provided."),null;const s=window.prompt(`Enter password or token for ${i}@${e}`);return s?(Q0.set(n,{username:i,password:s}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:i,password:s,authScheme:"Basic"}):(Pe.error("Authentication cancelled: Password/token not provided."),null)},Jx=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),Q0.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),Q0.delete(n)),null},Qx=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!Q0.has(n)&&t.username&&t.password&&(Q0.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},g0=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let i="";if(r)try{const s=JSON.parse(r);i=s.message||s.error||JSON.stringify(s)}catch{i=r}return`HTTP ${t} ${n}${i?`: ${i}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},hAe=async(e,t)=>{const n=aa,r=Lr(e),i=ku(r,".git");try{return(await n.promises.stat(i)).isDirectory()}catch(s){return s instanceof Error&&s.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,s),!1}},JZ=async(e,t,n,r,i)=>{var o;const s=(i==null?void 0:i.fsInstance)??aa,a=Lr(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${a}`);try{let l=!1;try{await s.promises.stat(ku(a,".git")),l=!0}catch(h){if(h.code!=="ENOENT")throw h}if(l)throw console.warn(`[VFS Git Op] Clone target ${a} already contains a .git directory.`),new Error(`Repository already cloned at ${a}.`);const c=qE(a);if(c!=="/")try{await s.promises.mkdir(c,{recursive:!0})}catch(h){if(h.code!=="EEXIST")throw h}let u=n;if(!u)try{if(u=(o=(await Ls.getRemoteInfo({http:Yx,url:t,corsProxy:Zx,onAuth:m=>Xx(m,r),onAuthFailure:Jx,onAuthSuccess:Qx})).HEAD)==null?void 0:o.replace("refs/heads/",""),!u)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${u}`)}catch(h){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",h),new Error(`Failed to determine default branch: ${g0(h)}`)}await Ls.clone({fs:s,http:Yx,dir:a,corsProxy:Zx,url:t,ref:u,singleBranch:!0,depth:10,onAuth:h=>Xx(h,r),onAuthFailure:Jx,onAuthSuccess:Qx,onProgress:h=>{h.phase==="counting objects"&&h.total?console.log(`Clone progress: ${h.phase} ${h.loaded}/${h.total}`):h.phase==="receiving objects"&&h.total?console.log(`Clone progress: ${h.phase} ${h.loaded}/${h.total}`):console.log(`Clone progress: ${h.phase}`)}}),await s.promises.stat(ku(a,".git"));const d=await Ls.currentBranch({fs:s,dir:a,fullname:!1}).catch(()=>null);d!==u&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${d}, expected ${u}. Checking out...`),await Ls.checkout({fs:s,dir:a,ref:u})),Pe.success(`Repository cloned successfully into ${a} (branch: ${u}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const c=g0(l);if(l instanceof Error&&l.message.includes("already cloned")||Pe.error(`Git clone failed: ${c}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${a}`),await s.promises.rm(a,{recursive:!0,force:!0})}catch(u){console.warn("[VFS Git Op] Failed cleanup after clone error:",u)}throw l}},QZ=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??aa,r=Lr(e);try{await Ls.init({fs:n,dir:r}),Pe.success(`Initialized empty Git repository in "${fs(r)}"`)}catch(i){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,i),Pe.error(`Git init failed: ${i instanceof Error?i.message:String(i)}`),i}},dD=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??aa,i=Lr(e);try{if(!await XZ(i,r))throw new Error("Git user configuration is missing or invalid.");if(await Ls.add({fs:r,dir:i,filepath:"."}),!(await Ls.statusMatrix({fs:r,dir:i})).some(([,,c])=>c!==0)){Pe.info("No changes detected to commit.");return}const l=await Ls.commit({fs:r,dir:i,message:t,author:{name:gr.getState().gitUserName,email:gr.getState().gitUserEmail}});Pe.success(`Changes committed: ${l.substring(0,7)}`)}catch(s){throw console.error(`[VFS Git Op] Git commit failed for ${i}:`,s),Pe.error(`Git commit failed: ${s instanceof Error?s.message:String(s)}`),s}},YE=async(e,t,n,r)=>{const i=(r==null?void 0:r.fsInstance)??aa,s=Lr(e);try{if(!await XZ(s,i))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${s}`);const o=await Ls.currentBranch({fs:i,dir:s,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Ls.checkout({fs:i,dir:s,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Ls.fetch({fs:i,http:Yx,dir:s,corsProxy:Zx,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:c=>Xx(c,n),onAuthFailure:Jx,onAuthSuccess:Qx}),await Ls.branch({fs:i,dir:s,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(c){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,c),new Error(`Failed to switch to or create local branch "${t}": ${g0(c)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${g0(l)}`)}}await Ls.pull({fs:i,http:Yx,dir:s,ref:t,singleBranch:!0,author:{name:gr.getState().gitUserName,email:gr.getState().gitUserEmail},corsProxy:Zx,onAuth:l=>Xx(l,n),onAuthFailure:Jx,onAuthSuccess:Qx}),Pe.success(`Pulled changes successfully for "${fs(s)}"`),console.log(`[VFS Git Op] Pull successful for ${s}`)}catch(a){if(console.error(`[VFS Git Op] Git pull failed for ${s}:`,a),a instanceof Error&&a.message.toLowerCase().includes("already up-to-date")?Pe.info(`Branch "${t}" is already up-to-date.`):Pe.error(`Git pull failed: ${g0(a)}`),!(a instanceof Error&&a.message.toLowerCase().includes("already up-to-date")))throw a}},fD=async(e,t,n,r)=>{var a,o;const i=(r==null?void 0:r.fsInstance)??aa,s=Lr(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${s}`);const l=await Ls.push({fs:i,http:Yx,dir:s,corsProxy:Zx,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:c=>Xx(c,n),onAuthFailure:Jx,onAuthSuccess:Qx});if(l!=null&&l.ok)Pe.success(`Pushed changes successfully for "${fs(s)}"`);else if((a=l==null?void 0:l.error)!=null&&a.includes("up-to-date"))Pe.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(Pe.error(`Push rejected for "${fs(s)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${s}:`,l),l instanceof Error&&l.message.includes("rejected")||Pe.error(`Git push failed: ${g0(l)}`),l}},eX=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??aa,r=Lr(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const i=await Ls.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",i);const s=i.map(([a,o,l,c])=>{let u="";return c===2&&(u+="INDEX_Modified "),c===3&&(u+="INDEX_Added "),o===0&&l===2?u+="WT_New":o===1&&l===2?u+="WT_Modified":o===1&&l===0?u+="WT_Deleted":o===1&&l===1&&c===0&&(u="Unmodified"),(!u||u==="INDEX_Unmodified ")&&(u=`h:${o} w:${l} s:${c}`),`${a}: ${u.trim()}`}).filter(a=>!a.endsWith("Unmodified")).join(`
`);Pe.info(`Git Status for "${fs(r)}":
${s||"No changes"}`,{duration:15e3})}catch(i){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,i),Pe.error(`Git status failed: ${i instanceof Error?i.message:String(i)}`),i}},im=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??aa,r=Lr(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(i){if(i instanceof Error&&i.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,i),Pe.error(`Error creating directory "${fs(r)}": ${i instanceof Error?i.message:String(i)}`),i}},pAe=async e=>{try{const t={backend:yCe,name:`litechat_vfs_${e}`};return await cCe(t),aa}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),Pe.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},hD=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??aa,r=Lr(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await im(r,{fsInstance:n}),[];throw l}const s=(await n.promises.readdir(r)).map(async l=>{const c=ku(r,l);try{const u=await n.promises.stat(c);return{name:l,path:c,isDirectory:u.isDirectory(),size:u.size,lastModified:u.mtime}}catch(u){return console.error(`[VFS Op] Failed to stat ${c}:`,u),null}});return(await Promise.all(s)).filter(l=>l!==null)}catch(i){throw console.error(`[VFS Op] Failed to list directory ${r}:`,i),Pe.error(`Error listing files: ${i instanceof Error?i.message:String(i)}`),i}},Ph=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??aa,r=Lr(e);try{const i=await n.promises.readFile(r);return Fe.emit(dn.fileRead,{path:r}),i}catch(i){throw console.error(`[VFS Op] Failed to read file ${r}:`,i),Pe.error(`Error reading file "${fs(r)}": ${i instanceof Error?i.message:String(i)}`),i}},ZE=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??aa,i=Lr(e),s=qE(i);try{s!=="/"&&await im(s,{fsInstance:r}),await r.promises.writeFile(i,t),Fe.emit(dn.fileWritten,{path:i})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${i}:`,a),Pe.error(`Error writing file "${fs(i)}": ${a instanceof Error?a.message:String(a)}`)),a}},pD=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??aa,i=Lr(e);if(i==="/")throw Pe.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(i)).isDirectory()?(await r.promises.rm(i,{recursive:t}),Fe.emit(dn.fileDeleted,{path:i})):(await r.promises.unlink(i),Fe.emit(dn.fileDeleted,{path:i})),Pe.success(`"${fs(i)}" deleted.`)}catch(s){if(s instanceof Error&&s.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${i}`);return}throw console.error(`[VFS Op] Failed to delete ${i}:`,s),Pe.error(`Error deleting "${fs(i)}": ${s instanceof Error?s.message:String(s)}`),s}},tX=async(e,t)=>{await im(e,t)},mAe=async(e,t,n)=>{try{const r=await Ph(e,n),i=new Blob([r]),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s;const o=Lr(e);a.download=t||fs(o),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||Pe.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},nX=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??aa,i=Lr(t);let s=0,a=0;const o=Array.from(e);try{await im(i,{fsInstance:r});for(const l of o){const c=ku(i,l.name);try{const u=await l.arrayBuffer();await ZE(c,new Uint8Array(u),{fsInstance:r}),s++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${l.name}:`,u)}}}catch(l){a=o.length,console.error(`[VFS Op] Failed to prepare target directory ${i} for upload:`,l)}finally{a>0&&s>0?Pe.warning(`Upload complete with issues. ${s} succeeded, ${a} failed.`):a===0&&s>0&&Pe.success(`Successfully uploaded ${s} file(s) to ${i==="/"?"root":fs(i)}.`)}},gAe=async(e,t,n)=>{const r=aa;if(!e.name.toLowerCase().endsWith(".zip")){Pe.error("Please select a valid ZIP file.");return}const i=Lr(t);let s;try{await im(i,{fsInstance:r}),s=await nD.loadAsync(e);const a=Object.values(s.files),o=await Promise.allSettled(a.map(async d=>{const h=ku(i,d.name);if(d.dir)await im(h,{fsInstance:r});else{const m=await d.async("uint8array");await ZE(h,m,{fsInstance:r})}return{name:d.name,isDir:d.dir}}));let l=0,c=0,u=0;o.forEach(d=>{d.status==="fulfilled"&&d.value?d.value.isDir?c++:l++:d.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",d.reason))}),u>0?Pe.warning(`Finished extracting "${e.name}". ${l+c} items succeeded, ${u} failed.`):Pe.success(`Successfully extracted ${l} files and ${c} folders from "${e.name}" to ${i==="/"?"root":fs(i)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),Pe.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},Rz=async(e,t="/",n)=>{const r=aa,i=new nD,s=Lr(t),a=fs(s)||"root";try{try{if(!(await r.promises.stat(s)).isDirectory()){Pe.error(`Cannot export: "${a}" is not a directory.`);return}}catch(h){h instanceof Error&&h.code==="ENOENT"?Pe.error(`Cannot export: Path "${a}" not found.`):Pe.error(`Cannot export: Error accessing path "${a}". ${h instanceof Error?h.message:String(h)}`);return}const o=async(h,m)=>{const y=await hD(h,{fsInstance:r});for(const b of y)if(b.isDirectory){if(b.name===".git")continue;const v=m.folder(b.name);if(v)await o(b.path,v);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const v=await Ph(b.path,{fsInstance:r});m.file(b.name,v)}};await o(s,i);const l=await i.generateAsync({type:"blob"}),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c;const d=`vfs_${a}_export.zip`;u.download=e||d,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c),Pe.success(`"${a}" exported as ${u.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||Pe.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},rX=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??aa,i=Lr(e),s=Lr(t);if(i==="/"||s==="/")throw Pe.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(i!==s)try{const a=qE(s);a!=="/"&&await im(a,{fsInstance:r}),await r.promises.rename(i,s),Pe.success(`Renamed "${fs(i)}" to "${fs(s)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||Pe.error(`Rename failed: Original item "${fs(i)}" not found.`):a instanceof Error&&a.code==="EEXIST"?Pe.error(`Rename failed: An item named "${fs(s)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||Pe.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${i} to ${s}:`,a),a}},yAe=1024*5,bAe=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);const i=new Uint8Array(r),s=new Blob([i],{type:t});return URL.createObjectURL(s)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},Nz=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const i=new Uint8Array(r);t=new Blob([i],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},iX=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,i]=T.useState(null),[s,a]=T.useState(null),[o,l]=T.useState(!1),[c,u]=T.useState(!1),[d,h]=T.useState(!0),m=e.type||"application/octet-stream",y=Nx(e.name,m),b=m.startsWith("image/"),v=m.startsWith("audio/"),x=m.startsWith("video/"),w=e.source==="vfs";T.useEffect(()=>{let I=null;return a(null),e.source==="direct"&&!y&&e.contentBase64?(I=bAe(e.contentBase64,m),I||a("Failed to decode file content for preview."),i(I)):i(null),e.source==="direct"&&y&&e.contentText&&e.contentText.length>yAe?a(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&y&&e.contentText===void 0&&a("Text content missing from metadata."),()=>{I&&(URL.revokeObjectURL(I),i(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,m,y]);const S=async()=>{if(e.source==="vfs"){Pe.info("File is already in VFS.");return}const I=Nz(e);if(!I){Pe.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await nX([I],"/"),Pe.success(`"${e.name}" added to VFS root.`)}catch(O){console.error("Failed to add file to VFS:",O),Pe.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{u(!0);try{let I;if(e.source==="vfs"&&e.path){const P=await Ph(e.path);I=new Blob([P],{type:m})}else{const P=Nz(e);if(!P)throw new Error("Could not reconstruct file data.");I=P}const O=URL.createObjectURL(I),L=document.createElement("a");L.href=O,L.download=e.name,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(O)}catch(I){console.error("Failed to download file:",I),Pe.error(`Download failed: ${I instanceof Error?I.message:String(I)}`)}finally{u(!1)}},k=()=>h(I=>!I),A=()=>w?p.jsx($O,{className:"h-5 w-5 text-cyan-500"}):y?p.jsx(Dme,{className:"h-5 w-5 text-blue-500"}):b?p.jsx(Gp,{className:"h-5 w-5 text-purple-500"}):v?p.jsx(wge,{className:"h-5 w-5 text-green-500"}):x?p.jsx(p0e,{className:"h-5 w-5 text-orange-500"}):p.jsx(Ome,{className:"h-5 w-5 text-muted-foreground"}),R=()=>w?p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):s?p.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[p.jsx(vc,{className:"h-4 w-4"}),p.jsx("span",{children:s})]}):y&&e.contentText!==void 0?p.jsx(Ry,{lang:m==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?p.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):v&&r?p.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):x&&r?p.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),N=T.useMemo(()=>{let I="File";return w?I="VFS File":y?I="Text":b?I="Image":v?I="Audio":x&&(I="Video"),`${I} (${Wx(e.size)})`},[w,y,b,v,x,e.size]);return p.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[A(),p.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),p.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",Wx(e.size),")"]}),w&&e.path&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),p.jsx(_r,{children:p.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:c,"aria-label":"Download file",children:c?p.jsx(Qn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(fu,{className:"h-3.5 w-3.5"})})}),p.jsx(_r,{children:"Download File"})]})}),p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":d?"Unfold preview":"Fold preview",children:p.jsx(eE,{className:"h-3.5 w-3.5"})})}),p.jsx(_r,{side:"top",children:d?"Unfold":"Fold"})]})}),!n&&t&&p.jsxs(p.Fragment,{children:[e.source==="direct"&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:S,disabled:o,"aria-label":"Add to VFS",children:o?p.jsx(Qn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(FO,{className:"h-3.5 w-3.5"})})}),p.jsx(_r,{children:"Add to VFS"})]})}),p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:p.jsx(va,{className:"h-3.5 w-3.5"})})}),p.jsx(_r,{children:"Remove from Prompt"})]})})]})]})]}),d?p.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:k,children:N}):p.jsx("div",{className:Ye("p-2 max-h-80 overflow-y-auto"),children:R()})]})},sX=6048e5,vAe=864e5,aX=6e4,oX=36e5,kS=43200,Mz=1440,Iz=Symbol.for("constructDateFrom");function ms(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Iz in e?e[Iz](t):e instanceof Date?new e.constructor(t):new Date(t)}function $r(e,t){return ms(t||e,e)}function lX(e,t,n){const r=$r(e,n==null?void 0:n.in);return isNaN(t)?ms(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function cX(e,t,n){const r=$r(e,n==null?void 0:n.in);if(isNaN(t))return ms(e,NaN);if(!t)return r;const i=r.getDate(),s=ms(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}let xAe={};function qy(){return xAe}function ey(e,t){var o,l,c,u;const n=qy(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=$r(e,t==null?void 0:t.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function ew(e,t){return ey(e,{...t,weekStartsOn:1})}function uX(e,t){const n=$r(e,t==null?void 0:t.in),r=n.getFullYear(),i=ms(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=ew(i),a=ms(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=ew(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function VC(e){const t=$r(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Dh(e,...t){const n=ms.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function tw(e,t){const n=$r(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function dX(e,t,n){const[r,i]=Dh(n==null?void 0:n.in,e,t),s=tw(r),a=tw(i),o=+s-VC(s),l=+a-VC(a);return Math.round((o-l)/vAe)}function wAe(e,t){const n=uX(e,t),r=ms(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),ew(r)}function _Ae(e,t,n){return lX(e,t*7,n)}function SAe(e,t,n){return cX(e,t*12,n)}function CAe(e,t){let n,r=t==null?void 0:t.in;return e.forEach(i=>{!r&&typeof i=="object"&&(r=ms.bind(null,i));const s=$r(i,r);(!n||n<s||isNaN(+s))&&(n=s)}),ms(r,n||NaN)}function kAe(e,t){let n,r=t==null?void 0:t.in;return e.forEach(i=>{!r&&typeof i=="object"&&(r=ms.bind(null,i));const s=$r(i,r);(!n||n>s||isNaN(+s))&&(n=s)}),ms(r,n||NaN)}function g2(e,t){const n=+$r(e)-+$r(t);return n<0?-1:n>0?1:n}function EAe(e){return ms(e,Date.now())}function TAe(e,t,n){const[r,i]=Dh(n==null?void 0:n.in,e,t);return+tw(r)==+tw(i)}function fX(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function AAe(e){return!(!fX(e)&&typeof e!="number"||isNaN(+$r(e)))}function hX(e,t,n){const[r,i]=Dh(n==null?void 0:n.in,e,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function RAe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function NAe(e,t){return+$r(e)-+$r(t)}function MAe(e,t){const n=$r(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function pX(e,t){const n=$r(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function IAe(e,t){const n=$r(e,t==null?void 0:t.in);return+MAe(n,t)==+pX(n,t)}function jAe(e,t,n){const[r,i,s]=Dh(n==null?void 0:n.in,e,e,t),a=g2(i,s),o=Math.abs(hX(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=g2(i,s)===-a;IAe(r)&&o===1&&g2(r,s)===1&&(l=!1);const c=a*(o-+l);return c===0?0:c}function OAe(e,t,n){const r=NAe(e,t)/1e3;return RAe(n==null?void 0:n.roundingMethod)(r)}function PAe(e,t){const[n,r]=Dh(e,t.start,t.end);return{start:n,end:r}}function DAe(e,t){const{start:n,end:r}=PAe(t==null?void 0:t.in,e);let i=+n>+r;const s=i?+n:+r,a=i?r:n;a.setHours(0,0,0,0),a.setDate(1);let o=1;const l=[];for(;+a<=s;)l.push(ms(n,a)),a.setMonth(a.getMonth()+o);return i?l.reverse():l}function FAe(e,t){const n=$r(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function LAe(e,t){const n=$r(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function mX(e,t){const n=$r(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function gX(e,t){var o,l,c,u;const n=qy(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=$r(e,t==null?void 0:t.in),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function BAe(e,t){return gX(e,{...t,weekStartsOn:1})}const $Ae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zAe=(e,t,n)=>{let r;const i=$Ae[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function lI(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const UAe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qAe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VAe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},WAe={date:lI({formats:UAe,defaultWidth:"full"}),time:lI({formats:qAe,defaultWidth:"full"}),dateTime:lI({formats:VAe,defaultWidth:"full"})},HAe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GAe=(e,t,n,r)=>HAe[e];function vv(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=e.formattingValues[o]||e.formattingValues[a]}else{const a=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[o]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const KAe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YAe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZAe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XAe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},QAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eRe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},tRe={ordinalNumber:eRe,era:vv({values:KAe,defaultWidth:"wide"}),quarter:vv({values:YAe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:vv({values:ZAe,defaultWidth:"wide"}),day:vv({values:XAe,defaultWidth:"wide"}),dayPeriod:vv({values:JAe,defaultWidth:"wide",formattingValues:QAe,defaultFormattingWidth:"wide"})};function xv(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?rRe(o,d=>d.test(a)):nRe(o,d=>d.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(a.length);return{value:c,rest:u}}}function nRe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function rRe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function iRe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const sRe=/^(\d+)(th|st|nd|rd)?/i,aRe=/\d+/i,oRe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lRe={any:[/^b/i,/^(a|c)/i]},cRe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uRe={any:[/1/i,/2/i,/3/i,/4/i]},dRe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fRe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hRe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pRe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mRe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gRe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yRe={ordinalNumber:iRe({matchPattern:sRe,parsePattern:aRe,valueCallback:e=>parseInt(e,10)}),era:xv({matchPatterns:oRe,defaultMatchWidth:"wide",parsePatterns:lRe,defaultParseWidth:"any"}),quarter:xv({matchPatterns:cRe,defaultMatchWidth:"wide",parsePatterns:uRe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xv({matchPatterns:dRe,defaultMatchWidth:"wide",parsePatterns:fRe,defaultParseWidth:"any"}),day:xv({matchPatterns:hRe,defaultMatchWidth:"wide",parsePatterns:pRe,defaultParseWidth:"any"}),dayPeriod:xv({matchPatterns:mRe,defaultMatchWidth:"any",parsePatterns:gRe,defaultParseWidth:"any"})},XE={code:"en-US",formatDistance:zAe,formatLong:WAe,formatRelative:GAe,localize:tRe,match:yRe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bRe(e,t){const n=$r(e,t==null?void 0:t.in);return dX(n,mX(n))+1}function yX(e,t){const n=$r(e,t==null?void 0:t.in),r=+ew(n)-+wAe(n);return Math.round(r/sX)+1}function bX(e,t){var u,d,h,m;const n=$r(e,t==null?void 0:t.in),r=n.getFullYear(),i=qy(),s=(t==null?void 0:t.firstWeekContainsDate)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(h=i.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,a=ms((t==null?void 0:t.in)||e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=ey(a,t),l=ms((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=ey(l,t);return+n>=+o?r+1:+n>=+c?r:r-1}function vRe(e,t){var o,l,c,u;const n=qy(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=bX(e,t),s=ms((t==null?void 0:t.in)||e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),ey(s,t)}function vX(e,t){const n=$r(e,t==null?void 0:t.in),r=+ey(n,t)-+vRe(n,t);return Math.round(r/sX)+1}function gi(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Bf={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return gi(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):gi(n+1,2)},d(e,t){return gi(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return gi(e.getHours()%12||12,t.length)},H(e,t){return gi(e.getHours(),t.length)},m(e,t){return gi(e.getMinutes(),t.length)},s(e,t){return gi(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return gi(i,t.length)}},Bg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jz={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Bf.y(e,t)},Y:function(e,t,n,r){const i=bX(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return gi(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):gi(s,t.length)},R:function(e,t){const n=uX(e);return gi(n,t.length)},u:function(e,t){const n=e.getFullYear();return gi(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return gi(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return gi(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Bf.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return gi(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=vX(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):gi(i,t.length)},I:function(e,t,n){const r=yX(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):gi(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Bf.d(e,t)},D:function(e,t,n){const r=bRe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):gi(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return gi(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return gi(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return gi(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Bg.noon:r===0?i=Bg.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Bg.evening:r>=12?i=Bg.afternoon:r>=4?i=Bg.morning:i=Bg.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Bf.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Bf.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):gi(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):gi(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Bf.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Bf.s(e,t)},S:function(e,t){return Bf.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Pz(r);case"XXXX":case"XX":return _p(r);case"XXXXX":case"XXX":default:return _p(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Pz(r);case"xxxx":case"xx":return _p(r);case"xxxxx":case"xxx":default:return _p(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Oz(r,":");case"OOOO":default:return"GMT"+_p(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Oz(r,":");case"zzzz":default:return"GMT"+_p(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return gi(r,t.length)},T:function(e,t,n){return gi(+e,t.length)}};function Oz(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+gi(s,2)}function Pz(e,t){return e%60===0?(e>0?"-":"+")+gi(Math.abs(e)/60,2):_p(e,t)}function _p(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=gi(Math.trunc(r/60),2),s=gi(r%60,2);return n+i+t+s}const Dz=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},xX=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},xRe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Dz(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Dz(r,t)).replace("{{time}}",xX(i,t))},wRe={p:xX,P:xRe},_Re=/^D+$/,SRe=/^Y+$/,CRe=["D","DD","YY","YYYY"];function kRe(e){return _Re.test(e)}function ERe(e){return SRe.test(e)}function TRe(e,t,n){const r=ARe(e,t,n);if(console.warn(r),CRe.includes(e))throw new RangeError(r)}function ARe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RRe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NRe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MRe=/^'([^]*?)'?$/,IRe=/''/g,jRe=/[a-zA-Z]/;function nw(e,t,n){var u,d,h,m,y,b,v,x;const r=qy(),i=(n==null?void 0:n.locale)??r.locale??XE,s=(n==null?void 0:n.firstWeekContainsDate)??((d=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((b=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((x=(v=r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,o=$r(e,n==null?void 0:n.in);if(!AAe(o))throw new RangeError("Invalid time value");let l=t.match(NRe).map(w=>{const S=w[0];if(S==="p"||S==="P"){const C=wRe[S];return C(w,i.formatLong)}return w}).join("").match(RRe).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const S=w[0];if(S==="'")return{isToken:!1,value:ORe(w)};if(jz[S])return{isToken:!0,value:w};if(S.match(jRe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(w=>{if(!w.isToken)return w.value;const S=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&ERe(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&kRe(S))&&TRe(S,t,String(e));const C=jz[S[0]];return C(o,S,i.localize,c)}).join("")}function ORe(e){const t=e.match(MRe);return t?t[1].replace(IRe,"'"):e}function PRe(e,t,n){const r=qy(),i=(n==null?void 0:n.locale)??r.locale??XE,s=2520,a=g2(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a}),[l,c]=Dh(n==null?void 0:n.in,...a>0?[t,e]:[e,t]),u=OAe(c,l),d=(VC(c)-VC(l))/1e3,h=Math.round((u-d)/60);let m;if(h<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,o):u<10?i.formatDistance("lessThanXSeconds",10,o):u<20?i.formatDistance("lessThanXSeconds",20,o):u<40?i.formatDistance("halfAMinute",0,o):u<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):h===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",h,o);if(h<45)return i.formatDistance("xMinutes",h,o);if(h<90)return i.formatDistance("aboutXHours",1,o);if(h<Mz){const y=Math.round(h/60);return i.formatDistance("aboutXHours",y,o)}else{if(h<s)return i.formatDistance("xDays",1,o);if(h<kS){const y=Math.round(h/Mz);return i.formatDistance("xDays",y,o)}else if(h<kS*2)return m=Math.round(h/kS),i.formatDistance("aboutXMonths",m,o)}if(m=jAe(c,l),m<12){const y=Math.round(h/kS);return i.formatDistance("xMonths",y,o)}else{const y=m%12,b=Math.trunc(m/12);return y<3?i.formatDistance("aboutXYears",b,o):y<9?i.formatDistance("overXYears",b,o):i.formatDistance("almostXYears",b+1,o)}}function wX(e,t){return PRe(e,EAe(e),t)}function DRe(e,t){const n=$r(e,t==null?void 0:t.in),r=n.getFullYear(),i=n.getMonth(),s=ms(n,0);return s.setFullYear(r,i+1,0),s.setHours(0,0,0,0),s.getDate()}function FRe(e,t){return $r(e,t==null?void 0:t.in).getMonth()}function LRe(e,t){return $r(e,t==null?void 0:t.in).getFullYear()}function BRe(e,t){return+$r(e)>+$r(t)}function $Re(e,t){return+$r(e)<+$r(t)}function zRe(e,t,n){const[r,i]=Dh(n==null?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function URe(e,t,n){const[r,i]=Dh(n==null?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()}function qRe(e,t){const n=()=>ms(t==null?void 0:t.in,NaN),i=GRe(e);let s;if(i.date){const c=KRe(i.date,2);s=YRe(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const a=+s;let o=0,l;if(i.time&&(o=ZRe(i.time),isNaN(o)))return n();if(i.timezone){if(l=XRe(i.timezone),isNaN(l))return n()}else{const c=new Date(a+o),u=$r(0,t==null?void 0:t.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return $r(a+o+l,t==null?void 0:t.in)}const ES={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},VRe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,WRe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,HRe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function GRe(e){const t={},n=e.split(ES.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],ES.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ES.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=ES.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function KRe(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function YRe(e,t){if(t===null)return new Date(NaN);const n=e.match(VRe);if(!n)return new Date(NaN);const r=!!n[4],i=wv(n[1]),s=wv(n[2])-1,a=wv(n[3]),o=wv(n[4]),l=wv(n[5])-1;if(r)return nNe(t,o,l)?JRe(t,o,l):new Date(NaN);{const c=new Date(0);return!eNe(t,s,a)||!tNe(t,i)?new Date(NaN):(c.setUTCFullYear(t,s,Math.max(i,a)),c)}}function wv(e){return e?parseInt(e):1}function ZRe(e){const t=e.match(WRe);if(!t)return NaN;const n=cI(t[1]),r=cI(t[2]),i=cI(t[3]);return rNe(n,r,i)?n*oX+r*aX+i*1e3:NaN}function cI(e){return e&&parseFloat(e.replace(",","."))||0}function XRe(e){if(e==="Z")return 0;const t=e.match(HRe);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return iNe(r,i)?n*(r*oX+i*aX):NaN}function JRe(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const QRe=[31,null,31,30,31,30,31,31,30,31,30,31];function _X(e){return e%400===0||e%4===0&&e%100!==0}function eNe(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(QRe[t]||(_X(e)?29:28))}function tNe(e,t){return t>=1&&t<=(_X(e)?366:365)}function nNe(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function rNe(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function iNe(e,t){return t>=0&&t<=59}function sNe(e,t,n){const r=$r(e,n==null?void 0:n.in),i=r.getFullYear(),s=r.getDate(),a=ms(e,0);a.setFullYear(i,t,15),a.setHours(0,0,0,0);const o=DRe(a);return r.setMonth(t,Math.min(s,o)),r}function aNe(e,t,n){const r=$r(e,n==null?void 0:n.in);return isNaN(+r)?ms(e,NaN):(r.setFullYear(t),r)}const In=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:i,disabled:s,variant:a="ghost",size:o="icon",className:l,"aria-label":c,...u})=>{const d=typeof t=="function";return p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:a,size:o,onClick:i,disabled:s,className:Ye("h-6 w-6",l),"aria-label":c??e,...u,children:d?p.jsx(t,{className:Ye("h-3.5 w-3.5",n)}):t})}),p.jsx(_r,{side:r,children:p.jsx("p",{children:e})})]})})},Fz={};function oNe(e){let t=Fz[e];if(t)return t;t=Fz[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function ty(e,t){typeof t!="string"&&(t=ty.defaultChars);const n=oNe(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,a=r.length;s<a;s+=3){const o=parseInt(r.slice(s+1,s+3),16);if(o<128){i+=n[o];continue}if((o&224)===192&&s+3<a){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const c=o<<6&1984|l&63;c<128?i+="":i+=String.fromCharCode(c),s+=3;continue}}if((o&240)===224&&s+6<a){const l=parseInt(r.slice(s+4,s+6),16),c=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(c&192)===128){const u=o<<12&61440|l<<6&4032|c&63;u<2048||u>=55296&&u<=57343?i+="":i+=String.fromCharCode(u),s+=6;continue}}if((o&248)===240&&s+9<a){const l=parseInt(r.slice(s+4,s+6),16),c=parseInt(r.slice(s+7,s+9),16),u=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(c&192)===128&&(u&192)===128){let d=o<<18&1835008|l<<12&258048|c<<6&4032|u&63;d<65536||d>1114111?i+="":(d-=65536,i+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),s+=9;continue}}i+=""}return i})}ty.defaultChars=";/?:@&=+$,#";ty.componentChars="";const Lz={};function lNe(e){let t=Lz[e];if(t)return t;t=Lz[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function C1(e,t,n){typeof t!="string"&&(n=t,t=C1.defaultChars),typeof n>"u"&&(n=!0);const r=lNe(t);let i="";for(let s=0,a=e.length;s<a;s++){const o=e.charCodeAt(s);if(n&&o===37&&s+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(s+1,s+3))){i+=e.slice(s,s+3),s+=2;continue}if(o<128){i+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&s+1<a){const l=e.charCodeAt(s+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(e[s]+e[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[s])}return i}C1.defaultChars=";/?:@&=+$,-_.!~*'()#";C1.componentChars="-_.!~*'()";function mD(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function WC(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const cNe=/^([a-z0-9.+-]+:)/i,uNe=/:[0-9]*$/,dNe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fNe=["<",">",'"',"`"," ","\r",`
`,"	"],hNe=["{","}","|","\\","^","`"].concat(fNe),pNe=["'"].concat(hNe),Bz=["%","/","?",";","#"].concat(pNe),$z=["/","?","#"],mNe=255,zz=/^[+a-z0-9A-Z_-]{0,63}$/,gNe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Uz={javascript:!0,"javascript:":!0},qz={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function gD(e,t){if(e&&e instanceof WC)return e;const n=new WC;return n.parse(e,t),n}WC.prototype.parse=function(e,t){let n,r,i,s=e;if(s=s.trim(),!t&&e.split("#").length===1){const c=dNe.exec(s);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let a=cNe.exec(s);if(a&&(a=a[0],n=a.toLowerCase(),this.protocol=a,s=s.substr(a.length)),(t||a||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(a&&Uz[a])&&(s=s.substr(2),this.slashes=!0)),!Uz[a]&&(i||a&&!qz[a])){let c=-1;for(let y=0;y<$z.length;y++)r=s.indexOf($z[y]),r!==-1&&(c===-1||r<c)&&(c=r);let u,d;c===-1?d=s.lastIndexOf("@"):d=s.lastIndexOf("@",c),d!==-1&&(u=s.slice(0,d),s=s.slice(d+1),this.auth=u),c=-1;for(let y=0;y<Bz.length;y++)r=s.indexOf(Bz[y]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=s.length),s[c-1]===":"&&c--;const h=s.slice(0,c);s=s.slice(c),this.parseHost(h),this.hostname=this.hostname||"";const m=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!m){const y=this.hostname.split(/\./);for(let b=0,v=y.length;b<v;b++){const x=y[b];if(x&&!x.match(zz)){let w="";for(let S=0,C=x.length;S<C;S++)x.charCodeAt(S)>127?w+="x":w+=x[S];if(!w.match(zz)){const S=y.slice(0,b),C=y.slice(b+1),k=x.match(gNe);k&&(S.push(k[1]),C.unshift(k[2])),C.length&&(s=C.join(".")+s),this.hostname=S.join(".");break}}}}this.hostname.length>mNe&&(this.hostname=""),m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=s.indexOf("#");o!==-1&&(this.hash=s.substr(o),s=s.slice(0,o));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),qz[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};WC.prototype.parseHost=function(e){let t=uNe.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const yNe=Object.freeze(Object.defineProperty({__proto__:null,decode:ty,encode:C1,format:mD,parse:gD},Symbol.toStringTag,{value:"Module"})),SX=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,CX=/[\0-\x1F\x7F-\x9F]/,bNe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,yD=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,kX=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,EX=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,vNe=Object.freeze(Object.defineProperty({__proto__:null,Any:SX,Cc:CX,Cf:bNe,P:yD,S:kX,Z:EX},Symbol.toStringTag,{value:"Module"})),xNe=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),wNe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var uI;const _Ne=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),SNe=(uI=String.fromCodePoint)!==null&&uI!==void 0?uI:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function CNe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=_Ne.get(e))!==null&&t!==void 0?t:e}var ta;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ta||(ta={}));const kNe=32;var Jf;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Jf||(Jf={}));function Dj(e){return e>=ta.ZERO&&e<=ta.NINE}function ENe(e){return e>=ta.UPPER_A&&e<=ta.UPPER_F||e>=ta.LOWER_A&&e<=ta.LOWER_F}function TNe(e){return e>=ta.UPPER_A&&e<=ta.UPPER_Z||e>=ta.LOWER_A&&e<=ta.LOWER_Z||Dj(e)}function ANe(e){return e===ta.EQUALS||TNe(e)}var Xs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Xs||(Xs={}));var Yf;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Yf||(Yf={}));class RNe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Xs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Yf.Strict}startEntity(t){this.decodeMode=t,this.state=Xs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Xs.EntityStart:return t.charCodeAt(n)===ta.NUM?(this.state=Xs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Xs.NamedEntity,this.stateNamedEntity(t,n));case Xs.NumericStart:return this.stateNumericStart(t,n);case Xs.NumericDecimal:return this.stateNumericDecimal(t,n);case Xs.NumericHex:return this.stateNumericHex(t,n);case Xs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|kNe)===ta.LOWER_X?(this.state=Xs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Xs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Dj(i)||ENe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Dj(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ta.SEMI)this.consumed+=1;else if(this.decodeMode===Yf.Strict)return 0;return this.emitCodePoint(CNe(this.result),this.consumed),this.errors&&(t!==ta.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Jf.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=NNe(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===Yf.Attribute&&(s===0||ANe(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Jf.VALUE_LENGTH)>>14,s!==0){if(a===ta.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Yf.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Jf.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Jf.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Xs.NamedEntity:return this.result!==0&&(this.decodeMode!==Yf.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Xs.NumericDecimal:return this.emitNumericEntity(0,2);case Xs.NumericHex:return this.emitNumericEntity(0,3);case Xs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Xs.EntityStart:return 0}}}function TX(e){let t="";const n=new RNe(e,r=>t+=SNe(r));return function(i,s){let a=0,o=0;for(;(o=i.indexOf("&",o))>=0;){t+=i.slice(a,o),n.startEntity(s);const c=n.write(i,o+1);if(c<0){a=o+n.end();break}a=o+c,o=c===0?a+1:a}const l=t+i.slice(a);return t="",l}}function NNe(e,t,n,r){const i=(t&Jf.BRANCH_LENGTH)>>7,s=t&Jf.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let a=n,o=a+i-1;for(;a<=o;){const l=a+o>>>1,c=e[l];if(c<r)a=l+1;else if(c>r)o=l-1;else return e[l+i]}return-1}const MNe=TX(xNe);TX(wNe);function AX(e,t=Yf.Legacy){return MNe(e,t)}function INe(e){return Object.prototype.toString.call(e)}function bD(e){return INe(e)==="[object String]"}const jNe=Object.prototype.hasOwnProperty;function ONe(e,t){return jNe.call(e,t)}function JE(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function RX(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function vD(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function HC(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const NX=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,PNe=/&([a-z#][a-z0-9]{1,31});/gi,DNe=new RegExp(NX.source+"|"+PNe.source,"gi"),FNe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function LNe(e,t){if(t.charCodeAt(0)===35&&FNe.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return vD(r)?HC(r):e}const n=AX(e);return n!==e?n:e}function BNe(e){return e.indexOf("\\")<0?e:e.replace(NX,"$1")}function ny(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(DNe,function(t,n,r){return n||LNe(t,r)})}const $Ne=/[&<>"]/,zNe=/[&<>"]/g,UNe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function qNe(e){return UNe[e]}function gh(e){return $Ne.test(e)?e.replace(zNe,qNe):e}const VNe=/[.?*+^$[\]\\(){}|-]/g;function WNe(e){return e.replace(VNe,"\\$&")}function Oi(e){switch(e){case 9:case 32:return!0}return!1}function rw(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function iw(e){return yD.test(e)||kX.test(e)}function sw(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function QE(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const HNe={mdurl:yNe,ucmicro:vNe},GNe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:RX,assign:JE,escapeHtml:gh,escapeRE:WNe,fromCodePoint:HC,has:ONe,isMdAsciiPunct:sw,isPunctChar:iw,isSpace:Oi,isString:bD,isValidEntityCode:vD,isWhiteSpace:rw,lib:HNe,normalizeReference:QE,unescapeAll:ny,unescapeMd:BNe},Symbol.toStringTag,{value:"Module"}));function KNe(e,t,n){let r,i,s,a;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(s=e.src.charCodeAt(e.pos),s===93&&(r--,r===0)){i=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)r++;else if(n)return e.pos=l,-1}}let c=-1;return i&&(c=e.pos),e.pos=l,c}function YNe(e,t,n){let r,i=t;const s={ok:!1,pos:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<n;){if(r=e.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=ny(e.slice(t+1,i)),s.ok=!0,s;if(r===92&&i+1<n){i+=2;continue}i++}return s}let a=0;for(;i<n&&(r=e.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(a++,a>32))return s;if(r===41){if(a===0)break;a--}i++}return t===i||a!==0||(s.str=ny(e.slice(t,i)),s.pos=i,s.ok=!0),s}function ZNe(e,t,n,r){let i,s=t;const a={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)a.str=r.str,a.marker=r.marker;else{if(s>=n)return a;let o=e.charCodeAt(s);if(o!==34&&o!==39&&o!==40)return a;t++,s++,o===40&&(o=41),a.marker=o}for(;s<n;){if(i=e.charCodeAt(s),i===a.marker)return a.pos=s+1,a.str+=ny(e.slice(t,s)),a.ok=!0,a;if(i===40&&a.marker===41)return a;i===92&&s+1<n&&s++,s++}return a.can_continue=!0,a.str+=ny(e.slice(t,s)),a}const XNe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:YNe,parseLinkLabel:KNe,parseLinkTitle:ZNe},Symbol.toStringTag,{value:"Module"})),Nu={};Nu.code_inline=function(e,t,n,r,i){const s=e[t];return"<code"+i.renderAttrs(s)+">"+gh(s.content)+"</code>"};Nu.code_block=function(e,t,n,r,i){const s=e[t];return"<pre"+i.renderAttrs(s)+"><code>"+gh(e[t].content)+`</code></pre>
`};Nu.fence=function(e,t,n,r,i){const s=e[t],a=s.info?ny(s.info).trim():"";let o="",l="";if(a){const u=a.split(/(\s+)/g);o=u[0],l=u.slice(2).join("")}let c;if(n.highlight?c=n.highlight(s.content,o,l)||gh(s.content):c=gh(s.content),c.indexOf("<pre")===0)return c+`
`;if(a){const u=s.attrIndex("class"),d=s.attrs?s.attrs.slice():[];u<0?d.push(["class",n.langPrefix+o]):(d[u]=d[u].slice(),d[u][1]+=" "+n.langPrefix+o);const h={attrs:d};return`<pre><code${i.renderAttrs(h)}>${c}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${c}</code></pre>
`};Nu.image=function(e,t,n,r,i){const s=e[t];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,n,r),i.renderToken(e,t,n)};Nu.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Nu.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Nu.text=function(e,t){return gh(e[t].content)};Nu.html_block=function(e,t){return e[t].content};Nu.html_inline=function(e,t){return e[t].content};function Vy(){this.rules=JE({},Nu)}Vy.prototype.renderAttrs=function(t){let n,r,i;if(!t.attrs)return"";for(i="",n=0,r=t.attrs.length;n<r;n++)i+=" "+gh(t.attrs[n][0])+'="'+gh(t.attrs[n][1])+'"';return i};Vy.prototype.renderToken=function(t,n,r){const i=t[n];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&t[n-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let a=!1;if(i.block&&(a=!0,i.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===i.tag)&&(a=!1)}return s+=a?`>
`:">",s};Vy.prototype.renderInline=function(e,t,n){let r="";const i=this.rules;for(let s=0,a=e.length;s<a;s++){const o=e[s].type;typeof i[o]<"u"?r+=i[o](e,s,t,n,this):r+=this.renderToken(e,s,t)}return r};Vy.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,s=e.length;i<s;i++)switch(e[i].type){case"text":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"html_inline":case"html_block":r+=e[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Vy.prototype.render=function(e,t,n){let r="";const i=this.rules;for(let s=0,a=e.length;s<a;s++){const o=e[s].type;o==="inline"?r+=this.renderInline(e[s].children,t,n):typeof i[o]<"u"?r+=i[o](e,s,t,n,this):r+=this.renderToken(e,s,t,n)}return r};function Ro(){this.__rules__=[],this.__cache__=null}Ro.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ro.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ro.prototype.at=function(e,t,n){const r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Ro.prototype.before=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Ro.prototype.after=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Ro.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ro.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ro.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ro.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ro.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Nc(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Nc.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===t)return r;return-1};Nc.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Nc.prototype.attrSet=function(t,n){const r=this.attrIndex(t),i=[t,n];r<0?this.attrPush(i):this.attrs[r]=i};Nc.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Nc.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function MX(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}MX.prototype.Token=Nc;const JNe=/\r\n?|\n/g,QNe=/\0/g;function eMe(e){let t;t=e.src.replace(JNe,`
`),t=t.replace(QNe,""),e.src=t}function tMe(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function nMe(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const i=t[n];i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)}}function rMe(e){return/^<a[>\s]/i.test(e)}function iMe(e){return/^<\/a\s*>/i.test(e)}function sMe(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let i=t[n].children,s=0;for(let a=i.length-1;a>=0;a--){const o=i[a];if(o.type==="link_close"){for(a--;i[a].level!==o.level&&i[a].type!=="link_open";)a--;continue}if(o.type==="html_inline"&&(rMe(o.content)&&s>0&&s--,iMe(o.content)&&s++),!(s>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let c=e.md.linkify.match(l);const u=[];let d=o.level,h=0;c.length>0&&c[0].index===0&&a>0&&i[a-1].type==="text_special"&&(c=c.slice(1));for(let m=0;m<c.length;m++){const y=c[m].url,b=e.md.normalizeLink(y);if(!e.md.validateLink(b))continue;let v=c[m].text;c[m].schema?c[m].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const x=c[m].index;if(x>h){const k=new e.Token("text","",0);k.content=l.slice(h,x),k.level=d,u.push(k)}const w=new e.Token("link_open","a",1);w.attrs=[["href",b]],w.level=d++,w.markup="linkify",w.info="auto",u.push(w);const S=new e.Token("text","",0);S.content=v,S.level=d,u.push(S);const C=new e.Token("link_close","a",-1);C.level=--d,C.markup="linkify",C.info="auto",u.push(C),h=c[m].lastIndex}if(h<l.length){const m=new e.Token("text","",0);m.content=l.slice(h),m.level=d,u.push(m)}t[n].children=i=RX(i,a,u)}}}}const IX=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,aMe=/\((c|tm|r)\)/i,oMe=/\((c|tm|r)\)/ig,lMe={c:"",r:"",tm:""};function cMe(e,t){return lMe[t.toLowerCase()]}function uMe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(oMe,cMe)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function dMe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&IX.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function fMe(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(aMe.test(e.tokens[t].content)&&uMe(e.tokens[t].children),IX.test(e.tokens[t].content)&&dMe(e.tokens[t].children))}const hMe=/['"]/,Vz=/['"]/g,Wz="";function TS(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function pMe(e,t){let n;const r=[];for(let i=0;i<e.length;i++){const s=e[i],a=e[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=a);n--);if(r.length=n+1,s.type!=="text")continue;let o=s.content,l=0,c=o.length;e:for(;l<c;){Vz.lastIndex=l;const u=Vz.exec(o);if(!u)break;let d=!0,h=!0;l=u.index+1;const m=u[0]==="'";let y=32;if(u.index-1>=0)y=o.charCodeAt(u.index-1);else for(n=i-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){y=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<c)b=o.charCodeAt(l);else for(n=i+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const v=sw(y)||iw(String.fromCharCode(y)),x=sw(b)||iw(String.fromCharCode(b)),w=rw(y),S=rw(b);if(S?d=!1:x&&(w||v||(d=!1)),w?h=!1:v&&(S||x||(h=!1)),b===34&&u[0]==='"'&&y>=48&&y<=57&&(h=d=!1),d&&h&&(d=v,h=x),!d&&!h){m&&(s.content=TS(s.content,u.index,Wz));continue}if(h)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<a)break;if(C.single===m&&r[n].level===a){C=r[n];let k,A;m?(k=t.md.options.quotes[2],A=t.md.options.quotes[3]):(k=t.md.options.quotes[0],A=t.md.options.quotes[1]),s.content=TS(s.content,u.index,A),e[C.token].content=TS(e[C.token].content,C.pos,k),l+=A.length-1,C.token===i&&(l+=k.length-1),o=s.content,c=o.length,r.length=n;continue e}}d?r.push({token:i,pos:u.index,single:m,level:a}):h&&m&&(s.content=TS(s.content,u.index,Wz))}}}function mMe(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!hMe.test(e.tokens[t].content)||pMe(e.tokens[t].children,e)}function gMe(e){let t,n;const r=e.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const a=r[s].children,o=a.length;for(t=0;t<o;t++)a[t].type==="text_special"&&(a[t].type="text");for(t=n=0;t<o;t++)a[t].type==="text"&&t+1<o&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}}const dI=[["normalize",eMe],["block",tMe],["inline",nMe],["linkify",sMe],["replacements",fMe],["smartquotes",mMe],["text_join",gMe]];function xD(){this.ruler=new Ro;for(let e=0;e<dI.length;e++)this.ruler.push(dI[e][0],dI[e][1])}xD.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};xD.prototype.State=MX;function Mu(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,a=0,o=0,l=0,c=i.length,u=!1;a<c;a++){const d=i.charCodeAt(a);if(!u)if(Oi(d)){o++,d===9?l+=4-l%4:l++;continue}else u=!0;(d===10||a===c-1)&&(d!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),u=!1,o=0,l=0,s=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Mu.prototype.push=function(e,t,n){const r=new Nc(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Mu.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Mu.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Mu.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Oi(r))break}return t};Mu.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Oi(this.src.charCodeAt(--t)))return t+1;return t};Mu.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Mu.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Mu.prototype.getLines=function(t,n,r,i){if(t>=n)return"";const s=new Array(n-t);for(let a=0,o=t;o<n;o++,a++){let l=0;const c=this.bMarks[o];let u=c,d;for(o+1<n||i?d=this.eMarks[o]+1:d=this.eMarks[o];u<d&&l<r;){const h=this.src.charCodeAt(u);if(Oi(h))h===9?l+=4-(l+this.bsCount[o])%4:l++;else if(u-c<this.tShift[o])l++;else break;u++}l>r?s[a]=new Array(l-r+1).join(" ")+this.src.slice(u,d):s[a]=this.src.slice(u,d)}return s.join("")};Mu.prototype.Token=Nc;const yMe=65536;function fI(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function Hz(e){const t=[],n=e.length;let r=0,i=e.charCodeAt(r),s=!1,a=0,o="";for(;r<n;)i===124&&(s?(o+=e.substring(a,r-1),a=r):(t.push(o+e.substring(a,r)),o="",a=r+1)),s=i===92,r++,i=e.charCodeAt(r);return t.push(o+e.substring(a)),t}function bMe(e,t,n,r){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let s=e.bMarks[i]+e.tShift[i];if(s>=e.eMarks[i])return!1;const a=e.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58||s>=e.eMarks[i])return!1;const o=e.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58&&!Oi(o)||a===45&&Oi(o))return!1;for(;s<e.eMarks[i];){const C=e.src.charCodeAt(s);if(C!==124&&C!==45&&C!==58&&!Oi(C))return!1;s++}let l=fI(e,t+1),c=l.split("|");const u=[];for(let C=0;C<c.length;C++){const k=c[C].trim();if(!k){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?u.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?u.push("left"):u.push("")}if(l=fI(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=Hz(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const d=c.length;if(d===0||d!==u.length)return!1;if(r)return!0;const h=e.parentType;e.parentType="table";const m=e.md.block.ruler.getRules("blockquote"),y=e.push("table_open","table",1),b=[t,0];y.map=b;const v=e.push("thead_open","thead",1);v.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<c.length;C++){const k=e.push("th_open","th",1);u[C]&&(k.attrs=[["style","text-align:"+u[C]]]);const A=e.push("inline","",0);A.content=c[C].trim(),A.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let w,S=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let C=!1;for(let A=0,R=m.length;A<R;A++)if(m[A](e,i,n,!0)){C=!0;break}if(C||(l=fI(e,i).trim(),!l)||e.sCount[i]-e.blkIndent>=4||(c=Hz(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),S+=d-c.length,S>yMe))break;if(i===t+2){const A=e.push("tbody_open","tbody",1);A.map=w=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[i,i+1];for(let A=0;A<d;A++){const R=e.push("td_open","td",1);u[A]&&(R.attrs=[["style","text-align:"+u[A]]]);const N=e.push("inline","",0);N.content=c[A]?c[A].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return w&&(e.push("tbody_close","tbody",-1),w[1]=i),e.push("table_close","table",-1),b[1]=i,e.parentType=h,e.line=i,!0}function vMe(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,i=r;continue}break}e.line=i;const s=e.push("code_block","code",0);return s.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,s.map=[t,e.line],!0}function xMe(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>s)return!1;const a=e.src.charCodeAt(i);if(a!==126&&a!==96)return!1;let o=i;i=e.skipChars(i,a);let l=i-o;if(l<3)return!1;const c=e.src.slice(o,i),u=e.src.slice(i,s);if(a===96&&u.indexOf(String.fromCharCode(a))>=0)return!1;if(r)return!0;let d=t,h=!1;for(;d++,!(d>=n||(i=o=e.bMarks[d]+e.tShift[d],s=e.eMarks[d],i<s&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(i)===a&&!(e.sCount[d]-e.blkIndent>=4)&&(i=e.skipChars(i,a),!(i-o<l)&&(i=e.skipSpaces(i),!(i<s)))){h=!0;break}l=e.sCount[t],e.line=d+(h?1:0);const m=e.push("fence","code",0);return m.info=u,m.content=e.getLines(t+1,d,l,!0),m.markup=c,m.map=[t,e.line],!0}function wMe(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];const a=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==62)return!1;if(r)return!0;const o=[],l=[],c=[],u=[],d=e.md.block.ruler.getRules("blockquote"),h=e.parentType;e.parentType="blockquote";let m=!1,y;for(y=t;y<n;y++){const S=e.sCount[y]<e.blkIndent;if(i=e.bMarks[y]+e.tShift[y],s=e.eMarks[y],i>=s)break;if(e.src.charCodeAt(i++)===62&&!S){let k=e.sCount[y]+1,A,R;e.src.charCodeAt(i)===32?(i++,k++,R=!1,A=!0):e.src.charCodeAt(i)===9?(A=!0,(e.bsCount[y]+k)%4===3?(i++,k++,R=!1):R=!0):A=!1;let N=k;for(o.push(e.bMarks[y]),e.bMarks[y]=i;i<s;){const I=e.src.charCodeAt(i);if(Oi(I))I===9?N+=4-(N+e.bsCount[y]+(R?1:0))%4:N++;else break;i++}m=i>=s,l.push(e.bsCount[y]),e.bsCount[y]=e.sCount[y]+1+(A?1:0),c.push(e.sCount[y]),e.sCount[y]=N-k,u.push(e.tShift[y]),e.tShift[y]=i-e.bMarks[y];continue}if(m)break;let C=!1;for(let k=0,A=d.length;k<A;k++)if(d[k](e,y,n,!0)){C=!0;break}if(C){e.lineMax=y,e.blkIndent!==0&&(o.push(e.bMarks[y]),l.push(e.bsCount[y]),u.push(e.tShift[y]),c.push(e.sCount[y]),e.sCount[y]-=e.blkIndent);break}o.push(e.bMarks[y]),l.push(e.bsCount[y]),u.push(e.tShift[y]),c.push(e.sCount[y]),e.sCount[y]=-1}const b=e.blkIndent;e.blkIndent=0;const v=e.push("blockquote_open","blockquote",1);v.markup=">";const x=[t,0];v.map=x,e.md.block.tokenize(e,t,y);const w=e.push("blockquote_close","blockquote",-1);w.markup=">",e.lineMax=a,e.parentType=h,x[1]=e.line;for(let S=0;S<u.length;S++)e.bMarks[S+t]=o[S],e.tShift[S+t]=u[S],e.sCount[S+t]=c[S],e.bsCount[S+t]=l[S];return e.blkIndent=b,!0}function _Me(e,t,n,r){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(s++);if(a!==42&&a!==45&&a!==95)return!1;let o=1;for(;s<i;){const c=e.src.charCodeAt(s++);if(c!==a&&!Oi(c))return!1;c===a&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(a)),!0}function Gz(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const s=e.src.charCodeAt(r);if(!Oi(s))return-1}return r}function Kz(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let i=n;if(i+1>=r)return-1;let s=e.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=e.src.charCodeAt(i++),s>=48&&s<=57){if(i-n>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=e.src.charCodeAt(i),!Oi(s))?-1:i}function SMe(e,t){const n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function CMe(e,t,n,r){let i,s,a,o,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let u=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(u=!0);let d,h,m;if((m=Kz(e,l))>=0){if(d=!0,a=e.bMarks[l]+e.tShift[l],h=Number(e.src.slice(a,m-1)),u&&h!==1)return!1}else if((m=Gz(e,l))>=0)d=!1;else return!1;if(u&&e.skipSpaces(m)>=e.eMarks[l])return!1;if(r)return!0;const y=e.src.charCodeAt(m-1),b=e.tokens.length;d?(o=e.push("ordered_list_open","ol",1),h!==1&&(o.attrs=[["start",h]])):o=e.push("bullet_list_open","ul",1);const v=[l,0];o.map=v,o.markup=String.fromCharCode(y);let x=!1;const w=e.md.block.ruler.getRules("list"),S=e.parentType;for(e.parentType="list";l<n;){s=m,i=e.eMarks[l];const C=e.sCount[l]+m-(e.bMarks[l]+e.tShift[l]);let k=C;for(;s<i;){const J=e.src.charCodeAt(s);if(J===9)k+=4-(k+e.bsCount[l])%4;else if(J===32)k++;else break;s++}const A=s;let R;A>=i?R=1:R=k-C,R>4&&(R=1);const N=C+R;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(y);const I=[l,0];o.map=I,d&&(o.info=e.src.slice(a,m-1));const O=e.tight,L=e.tShift[l],P=e.sCount[l],V=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[l]=A-e.bMarks[l],e.sCount[l]=k,A>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||x)&&(c=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=V,e.tShift[l]=L,e.sCount[l]=P,e.tight=O,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(y),l=e.line,I[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let F=!1;for(let J=0,U=w.length;J<U;J++)if(w[J](e,l,n,!0)){F=!0;break}if(F)break;if(d){if(m=Kz(e,l),m<0)break;a=e.bMarks[l]+e.tShift[l]}else if(m=Gz(e,l),m<0)break;if(y!==e.src.charCodeAt(m-1))break}return d?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(y),v[1]=l,e.line=l,e.parentType=S,c&&SMe(e,b),!0}function kMe(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t],a=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==91)return!1;function o(w){const S=e.lineMax;if(w>=S||e.isEmpty(w))return null;let C=!1;if(e.sCount[w]-e.blkIndent>3&&(C=!0),e.sCount[w]<0&&(C=!0),!C){const R=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let I=!1;for(let O=0,L=R.length;O<L;O++)if(R[O](e,w,S,!0)){I=!0;break}if(e.parentType=N,I)return null}const k=e.bMarks[w]+e.tShift[w],A=e.eMarks[w];return e.src.slice(k,A+1)}let l=e.src.slice(i,s+1);s=l.length;let c=-1;for(i=1;i<s;i++){const w=l.charCodeAt(i);if(w===91)return!1;if(w===93){c=i;break}else if(w===10){const S=o(a);S!==null&&(l+=S,s=l.length,a++)}else if(w===92&&(i++,i<s&&l.charCodeAt(i)===10)){const S=o(a);S!==null&&(l+=S,s=l.length,a++)}}if(c<0||l.charCodeAt(c+1)!==58)return!1;for(i=c+2;i<s;i++){const w=l.charCodeAt(i);if(w===10){const S=o(a);S!==null&&(l+=S,s=l.length,a++)}else if(!Oi(w))break}const u=e.md.helpers.parseLinkDestination(l,i,s);if(!u.ok)return!1;const d=e.md.normalizeLink(u.str);if(!e.md.validateLink(d))return!1;i=u.pos;const h=i,m=a,y=i;for(;i<s;i++){const w=l.charCodeAt(i);if(w===10){const S=o(a);S!==null&&(l+=S,s=l.length,a++)}else if(!Oi(w))break}let b=e.md.helpers.parseLinkTitle(l,i,s);for(;b.can_continue;){const w=o(a);if(w===null)break;l+=w,i=s,s=l.length,a++,b=e.md.helpers.parseLinkTitle(l,i,s,b)}let v;for(i<s&&y!==i&&b.ok?(v=b.str,i=b.pos):(v="",i=h,a=m);i<s;){const w=l.charCodeAt(i);if(!Oi(w))break;i++}if(i<s&&l.charCodeAt(i)!==10&&v)for(v="",i=h,a=m;i<s;){const w=l.charCodeAt(i);if(!Oi(w))break;i++}if(i<s&&l.charCodeAt(i)!==10)return!1;const x=QE(l.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:v,href:d}),e.line=a),!0):!1}const EMe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],TMe="[a-zA-Z_:][a-zA-Z0-9:._-]*",AMe="[^\"'=<>`\\x00-\\x20]+",RMe="'[^']*'",NMe='"[^"]*"',MMe="(?:"+AMe+"|"+RMe+"|"+NMe+")",IMe="(?:\\s+"+TMe+"(?:\\s*=\\s*"+MMe+")?)",jX="<[A-Za-z][A-Za-z0-9\\-]*"+IMe+"*\\s*\\/?>",OX="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",jMe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",OMe="<[?][\\s\\S]*?[?]>",PMe="<![A-Za-z][^>]*>",DMe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",FMe=new RegExp("^(?:"+jX+"|"+OX+"|"+jMe+"|"+OMe+"|"+PMe+"|"+DMe+")"),LMe=new RegExp("^(?:"+jX+"|"+OX+")"),$g=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+EMe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(LMe.source+"\\s*$"),/^$/,!1]];function BMe(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(i)!==60)return!1;let a=e.src.slice(i,s),o=0;for(;o<$g.length&&!$g[o][0].test(a);o++);if(o===$g.length)return!1;if(r)return $g[o][2];let l=t+1;if(!$g[o][1].test(a)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],s=e.eMarks[l],a=e.src.slice(i,s),$g[o][1].test(a)){a.length!==0&&l++;break}}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0}function $Me(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.src.charCodeAt(i);if(a!==35||i>=s)return!1;let o=1;for(a=e.src.charCodeAt(++i);a===35&&i<s&&o<=6;)o++,a=e.src.charCodeAt(++i);if(o>6||i<s&&!Oi(a))return!1;if(r)return!0;s=e.skipSpacesBack(s,i);const l=e.skipCharsBack(s,35,i);l>i&&Oi(e.src.charCodeAt(l-1))&&(s=l),e.line=t+1;const c=e.push("heading_open","h"+String(o),1);c.markup="########".slice(0,o),c.map=[t,e.line];const u=e.push("inline","",0);u.content=e.src.slice(i,s).trim(),u.map=[t,e.line],u.children=[];const d=e.push("heading_close","h"+String(o),-1);return d.markup="########".slice(0,o),!0}function zMe(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let s=0,a,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let m=e.bMarks[o]+e.tShift[o];const y=e.eMarks[o];if(m<y&&(a=e.src.charCodeAt(m),(a===45||a===61)&&(m=e.skipChars(m,a),m=e.skipSpaces(m),m>=y))){s=a===61?1:2;break}}if(e.sCount[o]<0)continue;let h=!1;for(let m=0,y=r.length;m<y;m++)if(r[m](e,o,n,!0)){h=!0;break}if(h)break}if(!s)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const c=e.push("heading_open","h"+String(s),1);c.markup=String.fromCharCode(a),c.map=[t,e.line];const u=e.push("inline","",0);u.content=l,u.map=[t,e.line-1],u.children=[];const d=e.push("heading_close","h"+String(s),-1);return d.markup=String.fromCharCode(a),e.parentType=i,!0}function UMe(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let s=t+1;for(e.parentType="paragraph";s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3||e.sCount[s]<0)continue;let c=!1;for(let u=0,d=r.length;u<d;u++)if(r[u](e,s,n,!0)){c=!0;break}if(c)break}const a=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=a,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const AS=[["table",bMe,["paragraph","reference"]],["code",vMe],["fence",xMe,["paragraph","reference","blockquote","list"]],["blockquote",wMe,["paragraph","reference","blockquote","list"]],["hr",_Me,["paragraph","reference","blockquote","list"]],["list",CMe,["paragraph","reference","blockquote"]],["reference",kMe],["html_block",BMe,["paragraph","reference","blockquote"]],["heading",$Me,["paragraph","reference","blockquote"]],["lheading",zMe],["paragraph",UMe]];function eT(){this.ruler=new Ro;for(let e=0;e<AS.length;e++)this.ruler.push(AS[e][0],AS[e][1],{alt:(AS[e][2]||[]).slice()})}eT.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),i=r.length,s=e.md.options.maxNesting;let a=t,o=!1;for(;a<n&&(e.line=a=e.skipEmptyLines(a),!(a>=n||e.sCount[a]<e.blkIndent));){if(e.level>=s){e.line=n;break}const l=e.line;let c=!1;for(let u=0;u<i;u++)if(c=r[u](e,a,n,!1),c){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),a=e.line,a<n&&e.isEmpty(a)&&(o=!0,a++,e.line=a)}};eT.prototype.parse=function(e,t,n,r){if(!e)return;const i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)};eT.prototype.State=Mu;function k1(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}k1.prototype.pushPending=function(){const e=new Nc("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};k1.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Nc(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};k1.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let s=e;for(;s<n&&this.src.charCodeAt(s)===r;)s++;const a=s-e,o=s<n?this.src.charCodeAt(s):32,l=sw(i)||iw(String.fromCharCode(i)),c=sw(o)||iw(String.fromCharCode(o)),u=rw(i),d=rw(o),h=!d&&(!c||u||l),m=!u&&(!l||d||c);return{can_open:h&&(t||!m||l),can_close:m&&(t||!h||c),length:a}};k1.prototype.Token=Nc;function qMe(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function VMe(e,t){let n=e.pos;for(;n<e.posMax&&!qMe(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const WMe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function HMe(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const i=e.pending.match(WMe);if(!i)return!1;const s=i[1],a=e.md.linkify.matchAtStart(e.src.slice(n-s.length));if(!a)return!1;let o=a.url;if(o.length<=s.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-s.length);const c=e.push("link_open","a",1);c.attrs=[["href",l]],c.markup="linkify",c.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(o);const d=e.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return e.pos+=o.length-s.length,!0}function GMe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,i=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&e.pending.charCodeAt(s-1)===32;)s--;e.pending=e.pending.slice(0,s),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&Oi(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const wD=[];for(let e=0;e<256;e++)wD.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){wD[e.charCodeAt(0)]=1});function KMe(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=e.src.charCodeAt(n);if(i===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(i=e.src.charCodeAt(n),!!Oi(i));)n++;return e.pos=n,!0}let s=e.src[n];if(i>=55296&&i<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(s+=e.src[n+1],n++)}const a="\\"+s;if(!t){const o=e.push("text_special","",0);i<256&&wD[i]!==0?o.content=s:o.content=a,o.markup=a,o.info="escape"}return e.pos=n+1,!0}function YMe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const i=n;n++;const s=e.posMax;for(;n<s&&e.src.charCodeAt(n)===96;)n++;const a=e.src.slice(i,n),o=a.length;if(e.backticksScanned&&(e.backticks[o]||0)<=i)return t||(e.pending+=a),e.pos+=o,!0;let l=n,c;for(;(c=e.src.indexOf("`",l))!==-1;){for(l=c+1;l<s&&e.src.charCodeAt(l)===96;)l++;const u=l-c;if(u===o){if(!t){const d=e.push("code_inline","code",0);d.markup=a,d.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[u]=c}return e.backticksScanned=!0,t||(e.pending+=a),e.pos+=o,!0}function ZMe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const i=e.scanDelims(e.pos,!0);let s=i.length;const a=String.fromCharCode(r);if(s<2)return!1;let o;s%2&&(o=e.push("text","",0),o.content=a,s--);for(let l=0;l<s;l+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function Yz(e,t){let n;const r=[],i=t.length;for(let s=0;s<i;s++){const a=t[s];if(a.marker!==126||a.end===-1)continue;const o=t[a.end];n=e.tokens[a.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const s=r.pop();let a=s+1;for(;a<e.tokens.length&&e.tokens[a].type==="s_close";)a++;a--,s!==a&&(n=e.tokens[a],e.tokens[a]=e.tokens[s],e.tokens[s]=n)}}function XMe(e){const t=e.tokens_meta,n=e.tokens_meta.length;Yz(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Yz(e,t[r].delimiters)}const PX={tokenize:ZMe,postProcess:XMe};function JMe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const i=e.scanDelims(e.pos,r===42);for(let s=0;s<i.length;s++){const a=e.push("text","",0);a.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0}function Zz(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const i=t[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=t[i.end],a=r>0&&t[r-1].end===i.end+1&&t[r-1].marker===i.marker&&t[r-1].token===i.token-1&&t[i.end+1].token===s.token+1,o=String.fromCharCode(i.marker),l=e.tokens[i.token];l.type=a?"strong_open":"em_open",l.tag=a?"strong":"em",l.nesting=1,l.markup=a?o+o:o,l.content="";const c=e.tokens[s.token];c.type=a?"strong_close":"em_close",c.tag=a?"strong":"em",c.nesting=-1,c.markup=a?o+o:o,c.content="",a&&(e.tokens[t[r-1].token].content="",e.tokens[t[i.end+1].token].content="",r--)}}function QMe(e){const t=e.tokens_meta,n=e.tokens_meta.length;Zz(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Zz(e,t[r].delimiters)}const DX={tokenize:JMe,postProcess:QMe};function eIe(e,t){let n,r,i,s,a="",o="",l=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const u=e.pos,d=e.posMax,h=e.pos+1,m=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(m<0)return!1;let y=m+1;if(y<d&&e.src.charCodeAt(y)===40){for(c=!1,y++;y<d&&(n=e.src.charCodeAt(y),!(!Oi(n)&&n!==10));y++);if(y>=d)return!1;if(l=y,i=e.md.helpers.parseLinkDestination(e.src,y,e.posMax),i.ok){for(a=e.md.normalizeLink(i.str),e.md.validateLink(a)?y=i.pos:a="",l=y;y<d&&(n=e.src.charCodeAt(y),!(!Oi(n)&&n!==10));y++);if(i=e.md.helpers.parseLinkTitle(e.src,y,e.posMax),y<d&&l!==y&&i.ok)for(o=i.str,y=i.pos;y<d&&(n=e.src.charCodeAt(y),!(!Oi(n)&&n!==10));y++);}(y>=d||e.src.charCodeAt(y)!==41)&&(c=!0),y++}if(c){if(typeof e.env.references>"u")return!1;if(y<d&&e.src.charCodeAt(y)===91?(l=y+1,y=e.md.helpers.parseLinkLabel(e,y),y>=0?r=e.src.slice(l,y++):y=m+1):y=m+1,r||(r=e.src.slice(h,m)),s=e.env.references[QE(r)],!s)return e.pos=u,!1;a=s.href,o=s.title}if(!t){e.pos=h,e.posMax=m;const b=e.push("link_open","a",1),v=[["href",a]];b.attrs=v,o&&v.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=y,e.posMax=d,!0}function tIe(e,t){let n,r,i,s,a,o,l,c,u="";const d=e.pos,h=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const m=e.pos+2,y=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(y<0)return!1;if(s=y+1,s<h&&e.src.charCodeAt(s)===40){for(s++;s<h&&(n=e.src.charCodeAt(s),!(!Oi(n)&&n!==10));s++);if(s>=h)return!1;for(c=s,o=e.md.helpers.parseLinkDestination(e.src,s,e.posMax),o.ok&&(u=e.md.normalizeLink(o.str),e.md.validateLink(u)?s=o.pos:u=""),c=s;s<h&&(n=e.src.charCodeAt(s),!(!Oi(n)&&n!==10));s++);if(o=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<h&&c!==s&&o.ok)for(l=o.str,s=o.pos;s<h&&(n=e.src.charCodeAt(s),!(!Oi(n)&&n!==10));s++);else l="";if(s>=h||e.src.charCodeAt(s)!==41)return e.pos=d,!1;s++}else{if(typeof e.env.references>"u")return!1;if(s<h&&e.src.charCodeAt(s)===91?(c=s+1,s=e.md.helpers.parseLinkLabel(e,s),s>=0?i=e.src.slice(c,s++):s=y+1):s=y+1,i||(i=e.src.slice(m,y)),a=e.env.references[QE(i)],!a)return e.pos=d,!1;u=a.href,l=a.title}if(!t){r=e.src.slice(m,y);const b=[];e.md.inline.parse(r,e.md,e.env,b);const v=e.push("image","img",0),x=[["src",u],["alt",""]];v.attrs=x,v.children=b,v.content=r,l&&x.push(["title",l])}return e.pos=s,e.posMax=h,!0}const nIe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,rIe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function iIe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const a=e.src.charCodeAt(n);if(a===60)return!1;if(a===62)break}const s=e.src.slice(r+1,n);if(rIe.test(s)){const a=e.md.normalizeLink(s);if(!e.md.validateLink(a))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=s.length+2,!0}if(nIe.test(s)){const a=e.md.normalizeLink("mailto:"+s);if(!e.md.validateLink(a))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=s.length+2,!0}return!1}function sIe(e){return/^<a[>\s]/i.test(e)}function aIe(e){return/^<\/a\s*>/i.test(e)}function oIe(e){const t=e|32;return t>=97&&t<=122}function lIe(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=e.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!oIe(i))return!1;const s=e.src.slice(r).match(FMe);if(!s)return!1;if(!t){const a=e.push("html_inline","",0);a.content=s[0],sIe(a.content)&&e.linkLevel++,aIe(a.content)&&e.linkLevel--}return e.pos+=s[0].length,!0}const cIe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,uIe=/^&([a-z][a-z0-9]{1,31});/i;function dIe(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const s=e.src.slice(n).match(cIe);if(s){if(!t){const a=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),o=e.push("text_special","",0);o.content=vD(a)?HC(a):HC(65533),o.markup=s[0],o.info="entity"}return e.pos+=s[0].length,!0}}else{const s=e.src.slice(n).match(uIe);if(s){const a=AX(s[0]);if(a!==s[0]){if(!t){const o=e.push("text_special","",0);o.content=a,o.markup=s[0],o.info="entity"}return e.pos+=s[0].length,!0}}}return!1}function Xz(e){const t={},n=e.length;if(!n)return;let r=0,i=-2;const s=[];for(let a=0;a<n;a++){const o=e[a];if(s.push(0),(e[r].marker!==o.marker||i!==o.token-1)&&(r=a),i=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let c=r-s[r]-1,u=c;for(;c>l;c-=s[c]+1){const d=e[c];if(d.marker===o.marker&&d.open&&d.end<0){let h=!1;if((d.close||o.open)&&(d.length+o.length)%3===0&&(d.length%3!==0||o.length%3!==0)&&(h=!0),!h){const m=c>0&&!e[c-1].open?s[c-1]+1:0;s[a]=a-c+m,s[c]=m,o.open=!1,d.end=a,d.close=!1,u=-1,i=-2;break}}}u!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=u)}}function fIe(e){const t=e.tokens_meta,n=e.tokens_meta.length;Xz(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Xz(t[r].delimiters)}function hIe(e){let t,n,r=0;const i=e.tokens,s=e.tokens.length;for(t=n=0;t<s;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,i[t].type==="text"&&t+1<s&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}const hI=[["text",VMe],["linkify",HMe],["newline",GMe],["escape",KMe],["backticks",YMe],["strikethrough",PX.tokenize],["emphasis",DX.tokenize],["link",eIe],["image",tIe],["autolink",iIe],["html_inline",lIe],["entity",dIe]],pI=[["balance_pairs",fIe],["strikethrough",PX.postProcess],["emphasis",DX.postProcess],["fragments_join",hIe]];function E1(){this.ruler=new Ro;for(let e=0;e<hI.length;e++)this.ruler.push(hI[e][0],hI[e][1]);this.ruler2=new Ro;for(let e=0;e<pI.length;e++)this.ruler2.push(pI[e][0],pI[e][1])}E1.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,s=e.cache;if(typeof s[t]<"u"){e.pos=s[t];return}let a=!1;if(e.level<i){for(let o=0;o<r;o++)if(e.level++,a=n[o](e,!0),e.level--,a){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;a||e.pos++,s[t]=e.pos};E1.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){const s=e.pos;let a=!1;if(e.level<i){for(let o=0;o<n;o++)if(a=t[o](e,!1),a){if(s>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(a){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};E1.prototype.parse=function(e,t,n,r){const i=new this.State(e,t,n,r);this.tokenize(i);const s=this.ruler2.getRules(""),a=s.length;for(let o=0;o<a;o++)s[o](i)};E1.prototype.State=k1;function pIe(e){const t={};e=e||{},t.src_Any=SX.source,t.src_Cc=CX.source,t.src_Z=EX.source,t.src_P=yD.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Fj(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function tT(e){return Object.prototype.toString.call(e)}function mIe(e){return tT(e)==="[object String]"}function gIe(e){return tT(e)==="[object Object]"}function yIe(e){return tT(e)==="[object RegExp]"}function Jz(e){return tT(e)==="[object Function]"}function bIe(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const FX={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function vIe(e){return Object.keys(e||{}).reduce(function(t,n){return t||FX.hasOwnProperty(n)},!1)}const xIe={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},wIe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",_Ie="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function SIe(e){e.__index__=-1,e.__text_cache__=""}function CIe(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function Qz(){return function(e,t){t.normalize(e)}}function GC(e){const t=e.re=pIe(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(wIe),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function s(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const c={validate:null,link:null};if(e.__compiled__[o]=c,gIe(l)){yIe(l.validate)?c.validate=CIe(l.validate):Jz(l.validate)?c.validate=l.validate:s(o,l),Jz(l.normalize)?c.normalize=l.normalize:l.normalize?s(o,l):c.normalize=Qz();return}if(mIe(l)){i.push(o);return}s(o,l)}),i.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:Qz()};const a=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(bIe).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+a+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+a+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),SIe(e)}function kIe(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function Lj(e,t){const n=new kIe(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function nl(e,t){if(!(this instanceof nl))return new nl(e,t);t||vIe(e)&&(t=e,e={}),this.__opts__=Fj({},FX,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Fj({},xIe,e),this.__compiled__={},this.__tlds__=_Ie,this.__tlds_replaced__=!1,this.re={},GC(this)}nl.prototype.add=function(t,n){return this.__schemas__[t]=n,GC(this),this};nl.prototype.set=function(t){return this.__opts__=Fj(this.__opts__,t),this};nl.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,i,s,a,o,l,c,u;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(s=this.testSchemaAt(t,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(a=r.index+r[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=t.indexOf("@"),u>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(a=i.index+i[1].length,o=i.index+i[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=o))),this.__index__>=0};nl.prototype.pretest=function(t){return this.re.pretest.test(t)};nl.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};nl.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Lj(this,r)),r=this.__last_index__);let i=r?t.slice(r):t;for(;this.test(i);)n.push(Lj(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};nl.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Lj(this,0)):null};nl.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),GC(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,GC(this),this)};nl.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};nl.prototype.onCompile=function(){};const y0=2147483647,cu=36,_D=1,aw=26,EIe=38,TIe=700,LX=72,BX=128,$X="-",AIe=/^xn--/,RIe=/[^\0-\x7F]/,NIe=/[\x2E\u3002\uFF0E\uFF61]/g,MIe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},mI=cu-_D,uu=Math.floor,gI=String.fromCharCode;function Hf(e){throw new RangeError(MIe[e])}function IIe(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function zX(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(NIe,".");const i=e.split("."),s=IIe(i,t).join(".");return r+s}function UX(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=e.charCodeAt(n++);(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}const jIe=e=>String.fromCodePoint(...e),OIe=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:cu},e7=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},qX=function(e,t,n){let r=0;for(e=n?uu(e/TIe):e>>1,e+=uu(e/t);e>mI*aw>>1;r+=cu)e=uu(e/mI);return uu(r+(mI+1)*e/(e+EIe))},VX=function(e){const t=[],n=e.length;let r=0,i=BX,s=LX,a=e.lastIndexOf($X);a<0&&(a=0);for(let o=0;o<a;++o)e.charCodeAt(o)>=128&&Hf("not-basic"),t.push(e.charCodeAt(o));for(let o=a>0?a+1:0;o<n;){const l=r;for(let u=1,d=cu;;d+=cu){o>=n&&Hf("invalid-input");const h=OIe(e.charCodeAt(o++));h>=cu&&Hf("invalid-input"),h>uu((y0-r)/u)&&Hf("overflow"),r+=h*u;const m=d<=s?_D:d>=s+aw?aw:d-s;if(h<m)break;const y=cu-m;u>uu(y0/y)&&Hf("overflow"),u*=y}const c=t.length+1;s=qX(r-l,c,l==0),uu(r/c)>y0-i&&Hf("overflow"),i+=uu(r/c),r%=c,t.splice(r++,0,i)}return String.fromCodePoint(...t)},WX=function(e){const t=[];e=UX(e);const n=e.length;let r=BX,i=0,s=LX;for(const l of e)l<128&&t.push(gI(l));const a=t.length;let o=a;for(a&&t.push($X);o<n;){let l=y0;for(const u of e)u>=r&&u<l&&(l=u);const c=o+1;l-r>uu((y0-i)/c)&&Hf("overflow"),i+=(l-r)*c,r=l;for(const u of e)if(u<r&&++i>y0&&Hf("overflow"),u===r){let d=i;for(let h=cu;;h+=cu){const m=h<=s?_D:h>=s+aw?aw:h-s;if(d<m)break;const y=d-m,b=cu-m;t.push(gI(e7(m+y%b,0))),d=uu(y/b)}t.push(gI(e7(d,0))),s=qX(i,c,o===a),i=0,++o}++i,++r}return t.join("")},PIe=function(e){return zX(e,function(t){return AIe.test(t)?VX(t.slice(4).toLowerCase()):t})},DIe=function(e){return zX(e,function(t){return RIe.test(t)?"xn--"+WX(t):t})},HX={version:"2.3.1",ucs2:{decode:UX,encode:jIe},decode:VX,encode:WX,toASCII:DIe,toUnicode:PIe},FIe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},LIe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},BIe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},$Ie={default:FIe,zero:LIe,commonmark:BIe},zIe=/^(vbscript|javascript|file|data):/,UIe=/^data:image\/(gif|png|jpeg|webp);/;function qIe(e){const t=e.trim().toLowerCase();return zIe.test(t)?UIe.test(t):!0}const GX=["http:","https:","mailto:"];function VIe(e){const t=gD(e,!0);if(t.hostname&&(!t.protocol||GX.indexOf(t.protocol)>=0))try{t.hostname=HX.toASCII(t.hostname)}catch{}return C1(mD(t))}function WIe(e){const t=gD(e,!0);if(t.hostname&&(!t.protocol||GX.indexOf(t.protocol)>=0))try{t.hostname=HX.toUnicode(t.hostname)}catch{}return ty(mD(t),ty.defaultChars+"%")}function rl(e,t){if(!(this instanceof rl))return new rl(e,t);t||bD(e)||(t=e||{},e="default"),this.inline=new E1,this.block=new eT,this.core=new xD,this.renderer=new Vy,this.linkify=new nl,this.validateLink=qIe,this.normalizeLink=VIe,this.normalizeLinkText=WIe,this.utils=GNe,this.helpers=JE({},XNe),this.options={},this.configure(e),t&&this.set(t)}rl.prototype.set=function(e){return JE(this.options,e),this};rl.prototype.configure=function(e){const t=this;if(bD(e)){const n=e;if(e=$Ie[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};rl.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};rl.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};rl.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};rl.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};rl.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};rl.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};rl.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const yI=new rl({html:!1,linkify:!0,breaks:!0});function nT(e){return T.useMemo(()=>{var n;if(!e)return[];try{const r=yI.parse(e,{}),i=[];let s="",a=0;for(;a<r.length;){const o=r[a];if(o.type==="fence"){s&&(i.push(s),s="");const l=((n=o.info)==null?void 0:n.trim())||"";let c,u;if(l.includes(":")){const[d,...h]=l.split(":");c=d||void 0,u=h.join(":")||void 0}else c=l.split(" ")[0]||void 0;c==="mermaid"?i.push({type:"mermaid",code:o.content}):i.push({type:"code",lang:c,code:o.content,filepath:u}),a++}else{const l=[];for(;a<r.length&&r[a].type!=="fence";)l.push(r[a]),a++;l.length>0&&(s+=yI.renderer.render(l,yI.options,{}))}}return s&&i.push(s),i}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const HIe="modulepreload",GIe=function(e){return"/"+e},t7={},Kr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=a(n.map(c=>{if(c=GIe(c),c in t7)return;t7[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":HIe,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};var y2={exports:{}},KIe=y2.exports,n7;function YIe(){return n7||(n7=1,function(e,t){(function(n,r){e.exports=r()})(KIe,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",a="second",o="minute",l="hour",c="day",u="week",d="month",h="quarter",m="year",y="date",b="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var J=["th","st","nd","rd"],U=F%100;return"["+F+(J[(U-20)%10]||J[U]||J[0])+"]"}},S=function(F,J,U){var G=String(F);return!G||G.length>=J?F:""+Array(J+1-G.length).join(U)+F},C={s:S,z:function(F){var J=-F.utcOffset(),U=Math.abs(J),G=Math.floor(U/60),$=U%60;return(J<=0?"+":"-")+S(G,2,"0")+":"+S($,2,"0")},m:function F(J,U){if(J.date()<U.date())return-F(U,J);var G=12*(U.year()-J.year())+(U.month()-J.month()),$=J.clone().add(G,d),ne=U-$<0,W=J.clone().add(G+(ne?-1:1),d);return+(-(G+(U-$)/(ne?$-W:W-$))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:d,y:m,w:u,d:c,D:y,h:l,m:o,s:a,ms:s,Q:h}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},k="en",A={};A[k]=w;var R="$isDayjsObject",N=function(F){return F instanceof P||!(!F||!F[R])},I=function F(J,U,G){var $;if(!J)return k;if(typeof J=="string"){var ne=J.toLowerCase();A[ne]&&($=ne),U&&(A[ne]=U,$=ne);var W=J.split("-");if(!$&&W.length>1)return F(W[0])}else{var te=J.name;A[te]=J,$=te}return!G&&$&&(k=$),$||!G&&k},O=function(F,J){if(N(F))return F.clone();var U=typeof J=="object"?J:{};return U.date=F,U.args=arguments,new P(U)},L=C;L.l=I,L.i=N,L.w=function(F,J){return O(F,{locale:J.$L,utc:J.$u,x:J.$x,$offset:J.$offset})};var P=function(){function F(U){this.$L=I(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[R]=!0}var J=F.prototype;return J.parse=function(U){this.$d=function(G){var $=G.date,ne=G.utc;if($===null)return new Date(NaN);if(L.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var W=$.match(v);if(W){var te=W[2]-1||0,ee=(W[7]||"0").substring(0,3);return ne?new Date(Date.UTC(W[1],te,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ee)):new Date(W[1],te,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ee)}}return new Date($)}(U),this.init()},J.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},J.$utils=function(){return L},J.isValid=function(){return this.$d.toString()!==b},J.isSame=function(U,G){var $=O(U);return this.startOf(G)<=$&&$<=this.endOf(G)},J.isAfter=function(U,G){return O(U)<this.startOf(G)},J.isBefore=function(U,G){return this.endOf(G)<O(U)},J.$g=function(U,G,$){return L.u(U)?this[G]:this.set($,U)},J.unix=function(){return Math.floor(this.valueOf()/1e3)},J.valueOf=function(){return this.$d.getTime()},J.startOf=function(U,G){var $=this,ne=!!L.u(G)||G,W=L.p(U),te=function(Se,qe){var Qe=L.w($.$u?Date.UTC($.$y,qe,Se):new Date($.$y,qe,Se),$);return ne?Qe:Qe.endOf(c)},ee=function(Se,qe){return L.w($.toDate()[Se].apply($.toDate("s"),(ne?[0,0,0,0]:[23,59,59,999]).slice(qe)),$)},re=this.$W,de=this.$M,oe=this.$D,Ie="set"+(this.$u?"UTC":"");switch(W){case m:return ne?te(1,0):te(31,11);case d:return ne?te(1,de):te(0,de+1);case u:var je=this.$locale().weekStart||0,Me=(re<je?re+7:re)-je;return te(ne?oe-Me:oe+(6-Me),de);case c:case y:return ee(Ie+"Hours",0);case l:return ee(Ie+"Minutes",1);case o:return ee(Ie+"Seconds",2);case a:return ee(Ie+"Milliseconds",3);default:return this.clone()}},J.endOf=function(U){return this.startOf(U,!1)},J.$set=function(U,G){var $,ne=L.p(U),W="set"+(this.$u?"UTC":""),te=($={},$[c]=W+"Date",$[y]=W+"Date",$[d]=W+"Month",$[m]=W+"FullYear",$[l]=W+"Hours",$[o]=W+"Minutes",$[a]=W+"Seconds",$[s]=W+"Milliseconds",$)[ne],ee=ne===c?this.$D+(G-this.$W):G;if(ne===d||ne===m){var re=this.clone().set(y,1);re.$d[te](ee),re.init(),this.$d=re.set(y,Math.min(this.$D,re.daysInMonth())).$d}else te&&this.$d[te](ee);return this.init(),this},J.set=function(U,G){return this.clone().$set(U,G)},J.get=function(U){return this[L.p(U)]()},J.add=function(U,G){var $,ne=this;U=Number(U);var W=L.p(G),te=function(de){var oe=O(ne);return L.w(oe.date(oe.date()+Math.round(de*U)),ne)};if(W===d)return this.set(d,this.$M+U);if(W===m)return this.set(m,this.$y+U);if(W===c)return te(1);if(W===u)return te(7);var ee=($={},$[o]=r,$[l]=i,$[a]=n,$)[W]||1,re=this.$d.getTime()+U*ee;return L.w(re,this)},J.subtract=function(U,G){return this.add(-1*U,G)},J.format=function(U){var G=this,$=this.$locale();if(!this.isValid())return $.invalidDate||b;var ne=U||"YYYY-MM-DDTHH:mm:ssZ",W=L.z(this),te=this.$H,ee=this.$m,re=this.$M,de=$.weekdays,oe=$.months,Ie=$.meridiem,je=function(qe,Qe,We,Re){return qe&&(qe[Qe]||qe(G,ne))||We[Qe].slice(0,Re)},Me=function(qe){return L.s(te%12||12,qe,"0")},Se=Ie||function(qe,Qe,We){var Re=qe<12?"AM":"PM";return We?Re.toLowerCase():Re};return ne.replace(x,function(qe,Qe){return Qe||function(We){switch(We){case"YY":return String(G.$y).slice(-2);case"YYYY":return L.s(G.$y,4,"0");case"M":return re+1;case"MM":return L.s(re+1,2,"0");case"MMM":return je($.monthsShort,re,oe,3);case"MMMM":return je(oe,re);case"D":return G.$D;case"DD":return L.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return je($.weekdaysMin,G.$W,de,2);case"ddd":return je($.weekdaysShort,G.$W,de,3);case"dddd":return de[G.$W];case"H":return String(te);case"HH":return L.s(te,2,"0");case"h":return Me(1);case"hh":return Me(2);case"a":return Se(te,ee,!0);case"A":return Se(te,ee,!1);case"m":return String(ee);case"mm":return L.s(ee,2,"0");case"s":return String(G.$s);case"ss":return L.s(G.$s,2,"0");case"SSS":return L.s(G.$ms,3,"0");case"Z":return W}return null}(qe)||W.replace(":","")})},J.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},J.diff=function(U,G,$){var ne,W=this,te=L.p(G),ee=O(U),re=(ee.utcOffset()-this.utcOffset())*r,de=this-ee,oe=function(){return L.m(W,ee)};switch(te){case m:ne=oe()/12;break;case d:ne=oe();break;case h:ne=oe()/3;break;case u:ne=(de-re)/6048e5;break;case c:ne=(de-re)/864e5;break;case l:ne=de/i;break;case o:ne=de/r;break;case a:ne=de/n;break;default:ne=de}return $?ne:L.a(ne)},J.daysInMonth=function(){return this.endOf(d).$D},J.$locale=function(){return A[this.$L]},J.locale=function(U,G){if(!U)return this.$L;var $=this.clone(),ne=I(U,G,!0);return ne&&($.$L=ne),$},J.clone=function(){return L.w(this.$d,this)},J.toDate=function(){return new Date(this.valueOf())},J.toJSON=function(){return this.isValid()?this.toISOString():null},J.toISOString=function(){return this.$d.toISOString()},J.toString=function(){return this.$d.toUTCString()},F}(),V=P.prototype;return O.prototype=V,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",c],["$M",d],["$y",m],["$D",y]].forEach(function(F){V[F[1]]=function(J){return this.$g(J,F[0],F[1])}}),O.extend=function(F,J){return F.$i||(F(J,P,O),F.$i=!0),O},O.locale=I,O.isDayjs=N,O.unix=function(F){return O(1e3*F)},O.en=A[k],O.Ls=A,O.p={},O})}(y2)),y2.exports}var ZIe=YIe();const XIe=xa(ZIe),b2={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e),hsl2rgb:({h:e,s:t,l:n},r)=>{if(!t)return n*2.55;e/=360,t/=100,n/=100;const i=n<.5?n*(1+t):n+t-n*t,s=2*n-i;switch(r){case"r":return b2.hue2rgb(s,i,e+1/3)*255;case"g":return b2.hue2rgb(s,i,e)*255;case"b":return b2.hue2rgb(s,i,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:n},r)=>{e/=255,t/=255,n/=255;const i=Math.max(e,t,n),s=Math.min(e,t,n),a=(i+s)/2;if(r==="l")return a*100;if(i===s)return 0;const o=i-s,l=a>.5?o/(2-i-s):o/(i+s);if(r==="s")return l*100;switch(i){case e:return((t-n)/o+(t<n?6:0))*60;case t:return((n-e)/o+2)*60;case n:return((e-t)/o+4)*60;default:return-1}}},JIe={clamp:(e,t,n)=>t>n?Math.min(t,Math.max(n,e)):Math.min(n,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},QIe={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},or={channel:b2,lang:JIe,unit:QIe},$f={};for(let e=0;e<=255;e++)$f[e]=or.unit.dec2hex(e);const Ta={ALL:0,RGB:1,HSL:2};class e3e{constructor(){this.type=Ta.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Ta.ALL}is(t){return this.type===t}}class t3e{constructor(t,n){this.color=n,this.changed=!1,this.data=t,this.type=new e3e}set(t,n){return this.color=n,this.changed=!1,this.data=t,this.type.type=Ta.ALL,this}_ensureHSL(){const t=this.data,{h:n,s:r,l:i}=t;n===void 0&&(t.h=or.channel.rgb2hsl(t,"h")),r===void 0&&(t.s=or.channel.rgb2hsl(t,"s")),i===void 0&&(t.l=or.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r:n,g:r,b:i}=t;n===void 0&&(t.r=or.channel.hsl2rgb(t,"r")),r===void 0&&(t.g=or.channel.hsl2rgb(t,"g")),i===void 0&&(t.b=or.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,n=t.r;return!this.type.is(Ta.HSL)&&n!==void 0?n:(this._ensureHSL(),or.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,n=t.g;return!this.type.is(Ta.HSL)&&n!==void 0?n:(this._ensureHSL(),or.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,n=t.b;return!this.type.is(Ta.HSL)&&n!==void 0?n:(this._ensureHSL(),or.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,n=t.h;return!this.type.is(Ta.RGB)&&n!==void 0?n:(this._ensureRGB(),or.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,n=t.s;return!this.type.is(Ta.RGB)&&n!==void 0?n:(this._ensureRGB(),or.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,n=t.l;return!this.type.is(Ta.RGB)&&n!==void 0?n:(this._ensureRGB(),or.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(Ta.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(Ta.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(Ta.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(Ta.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(Ta.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(Ta.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const rT=new t3e({r:0,g:0,b:0,a:0},"transparent"),b0={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(b0.re);if(!t)return;const n=t[1],r=parseInt(n,16),i=n.length,s=i%4===0,a=i>4,o=a?1:17,l=a?8:4,c=s?0:-1,u=a?255:15;return rT.set({r:(r>>l*(c+3)&u)*o,g:(r>>l*(c+2)&u)*o,b:(r>>l*(c+1)&u)*o,a:s?(r&u)*o/255:1},e)},stringify:e=>{const{r:t,g:n,b:r,a:i}=e;return i<1?`#${$f[Math.round(t)]}${$f[Math.round(n)]}${$f[Math.round(r)]}${$f[Math.round(i*255)]}`:`#${$f[Math.round(t)]}${$f[Math.round(n)]}${$f[Math.round(r)]}`}},jp={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(jp.hueRe);if(t){const[,n,r]=t;switch(r){case"grad":return or.channel.clamp.h(parseFloat(n)*.9);case"rad":return or.channel.clamp.h(parseFloat(n)*180/Math.PI);case"turn":return or.channel.clamp.h(parseFloat(n)*360)}}return or.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const n=e.match(jp.re);if(!n)return;const[,r,i,s,a,o]=n;return rT.set({h:jp._hue2deg(r),s:or.channel.clamp.s(parseFloat(i)),l:or.channel.clamp.l(parseFloat(s)),a:a?or.channel.clamp.a(o?parseFloat(a)/100:parseFloat(a)):1},e)},stringify:e=>{const{h:t,s:n,l:r,a:i}=e;return i<1?`hsla(${or.lang.round(t)}, ${or.lang.round(n)}%, ${or.lang.round(r)}%, ${i})`:`hsl(${or.lang.round(t)}, ${or.lang.round(n)}%, ${or.lang.round(r)}%)`}},sx={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=sx.colors[e];if(t)return b0.parse(t)},stringify:e=>{const t=b0.stringify(e);for(const n in sx.colors)if(sx.colors[n]===t)return n}},$v={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const n=e.match($v.re);if(!n)return;const[,r,i,s,a,o,l,c,u]=n;return rT.set({r:or.channel.clamp.r(i?parseFloat(r)*2.55:parseFloat(r)),g:or.channel.clamp.g(a?parseFloat(s)*2.55:parseFloat(s)),b:or.channel.clamp.b(l?parseFloat(o)*2.55:parseFloat(o)),a:c?or.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},e)},stringify:e=>{const{r:t,g:n,b:r,a:i}=e;return i<1?`rgba(${or.lang.round(t)}, ${or.lang.round(n)}, ${or.lang.round(r)}, ${or.lang.round(i)})`:`rgb(${or.lang.round(t)}, ${or.lang.round(n)}, ${or.lang.round(r)})`}},Eu={format:{keyword:sx,hex:b0,rgb:$v,rgba:$v,hsl:jp,hsla:jp},parse:e=>{if(typeof e!="string")return e;const t=b0.parse(e)||$v.parse(e)||jp.parse(e)||sx.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Ta.HSL)||e.data.r===void 0?jp.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?$v.stringify(e):b0.stringify(e)},KX=(e,t)=>{const n=Eu.parse(e);for(const r in t)n[r]=or.channel.clamp[r](t[r]);return Eu.stringify(n)},ax=(e,t,n=0,r=1)=>{if(typeof e!="number")return KX(e,{a:t});const i=rT.set({r:or.channel.clamp.r(e),g:or.channel.clamp.g(t),b:or.channel.clamp.b(n),a:or.channel.clamp.a(r)});return Eu.stringify(i)},n3e=e=>{const{r:t,g:n,b:r}=Eu.parse(e),i=.2126*or.channel.toLinear(t)+.7152*or.channel.toLinear(n)+.0722*or.channel.toLinear(r);return or.lang.round(i)},r3e=e=>n3e(e)>=.5,T1=e=>!r3e(e),YX=(e,t,n)=>{const r=Eu.parse(e),i=r[t],s=or.channel.clamp[t](i+n);return i!==s&&(r[t]=s),Eu.stringify(r)},xn=(e,t)=>YX(e,"l",t),Bn=(e,t)=>YX(e,"l",-t),yt=(e,t)=>{const n=Eu.parse(e),r={};for(const i in t)t[i]&&(r[i]=n[i]+t[i]);return KX(e,r)},i3e=(e,t,n=50)=>{const{r,g:i,b:s,a}=Eu.parse(e),{r:o,g:l,b:c,a:u}=Eu.parse(t),d=n/100,h=d*2-1,m=a-u,b=((h*m===-1?h:(h+m)/(1+h*m))+1)/2,v=1-b,x=r*b+o*v,w=i*b+l*v,S=s*b+c*v,C=a*d+u*(1-d);return ax(x,w,S,C)},ln=(e,t=100)=>{const n=Eu.parse(e);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,i3e(n,e,t)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:ZX,setPrototypeOf:r7,isFrozen:s3e,getPrototypeOf:a3e,getOwnPropertyDescriptor:o3e}=Object;let{freeze:no,seal:zl,create:XX}=Object,{apply:Bj,construct:$j}=typeof Reflect<"u"&&Reflect;no||(no=function(t){return t});zl||(zl=function(t){return t});Bj||(Bj=function(t,n,r){return t.apply(n,r)});$j||($j=function(t,n){return new t(...n)});const RS=ro(Array.prototype.forEach),l3e=ro(Array.prototype.lastIndexOf),i7=ro(Array.prototype.pop),_v=ro(Array.prototype.push),c3e=ro(Array.prototype.splice),v2=ro(String.prototype.toLowerCase),bI=ro(String.prototype.toString),s7=ro(String.prototype.match),Sv=ro(String.prototype.replace),u3e=ro(String.prototype.indexOf),d3e=ro(String.prototype.trim),ic=ro(Object.prototype.hasOwnProperty),Wa=ro(RegExp.prototype.test),Cv=f3e(TypeError);function ro(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Bj(e,t,r)}}function f3e(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $j(e,n)}}function Dr(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v2;r7&&r7(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i=="string"){const s=n(i);s!==i&&(s3e(t)||(t[r]=s),i=s)}e[i]=!0}return e}function h3e(e){for(let t=0;t<e.length;t++)ic(e,t)||(e[t]=null);return e}function hd(e){const t=XX(null);for(const[n,r]of ZX(e))ic(e,n)&&(Array.isArray(r)?t[n]=h3e(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=hd(r):t[n]=r);return t}function kv(e,t){for(;e!==null;){const r=o3e(e,t);if(r){if(r.get)return ro(r.get);if(typeof r.value=="function")return ro(r.value)}e=a3e(e)}function n(){return null}return n}const a7=no(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vI=no(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),xI=no(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),p3e=no(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wI=no(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),m3e=no(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),o7=no(["#text"]),l7=no(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),_I=no(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),c7=no(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),NS=no(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),g3e=zl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),y3e=zl(/<%[\w\W]*|[\w\W]*%>/gm),b3e=zl(/\$\{[\w\W]*/gm),v3e=zl(/^data-[\-\w.\u00B7-\uFFFF]+$/),x3e=zl(/^aria-[\-\w]+$/),JX=zl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),w3e=zl(/^(?:\w+script|data):/i),_3e=zl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QX=zl(/^html$/i),S3e=zl(/^[a-z][.\w]*(-[.\w]+)+$/i);var u7=Object.freeze({__proto__:null,ARIA_ATTR:x3e,ATTR_WHITESPACE:_3e,CUSTOM_ELEMENT:S3e,DATA_ATTR:v3e,DOCTYPE_NAME:QX,ERB_EXPR:y3e,IS_ALLOWED_URI:JX,IS_SCRIPT_OR_DATA:w3e,MUSTACHE_EXPR:g3e,TMPLIT_EXPR:b3e});const Ev={element:1,text:3,progressingInstruction:7,comment:8,document:9},C3e=function(){return typeof window>"u"?null:window},k3e=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return t.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},d7=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function eJ(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C3e();const t=hn=>eJ(hn);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==Ev.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:m}=e,y=l.prototype,b=kv(y,"cloneNode"),v=kv(y,"remove"),x=kv(y,"nextSibling"),w=kv(y,"childNodes"),S=kv(y,"parentNode");if(typeof a=="function"){const hn=n.createElement("template");hn.content&&hn.content.ownerDocument&&(n=hn.content.ownerDocument)}let C,k="";const{implementation:A,createNodeIterator:R,createDocumentFragment:N,getElementsByTagName:I}=n,{importNode:O}=r;let L=d7();t.isSupported=typeof ZX=="function"&&typeof S=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:V,TMPLIT_EXPR:F,DATA_ATTR:J,ARIA_ATTR:U,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:ne}=u7;let{IS_ALLOWED_URI:W}=u7,te=null;const ee=Dr({},[...a7,...vI,...xI,...wI,...o7]);let re=null;const de=Dr({},[...l7,..._I,...c7,...NS]);let oe=Object.seal(XX(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ie=null,je=null,Me=!0,Se=!0,qe=!1,Qe=!0,We=!1,Re=!0,K=!1,ge=!1,Te=!1,ce=!1,le=!1,ie=!1,Ee=!0,Be=!1;const Ce="user-content-";let ct=!0,Tt=!1,ft={},Pt=null;const Ut=Dr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Bt=null;const tn=Dr({},["audio","video","img","source","image","track"]);let xe=null;const D=Dr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Z="http://www.w3.org/1998/Math/MathML",me="http://www.w3.org/2000/svg",De="http://www.w3.org/1999/xhtml";let we=De,Ne=!1,fe=null;const bt=Dr({},[Z,me,De],bI);let ot=Dr({},["mi","mo","mn","ms","mtext"]),B=Dr({},["annotation-xml"]);const $e=Dr({},["title","style","font","a","script"]);let it=null;const ye=["application/xhtml+xml","text/html"],_e="text/html";let ze=null,kt=null;const he=n.createElement("form"),Y=function(et){return et instanceof RegExp||et instanceof Function},H=function(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(kt&&kt===et)){if((!et||typeof et!="object")&&(et={}),et=hd(et),it=ye.indexOf(et.PARSER_MEDIA_TYPE)===-1?_e:et.PARSER_MEDIA_TYPE,ze=it==="application/xhtml+xml"?bI:v2,te=ic(et,"ALLOWED_TAGS")?Dr({},et.ALLOWED_TAGS,ze):ee,re=ic(et,"ALLOWED_ATTR")?Dr({},et.ALLOWED_ATTR,ze):de,fe=ic(et,"ALLOWED_NAMESPACES")?Dr({},et.ALLOWED_NAMESPACES,bI):bt,xe=ic(et,"ADD_URI_SAFE_ATTR")?Dr(hd(D),et.ADD_URI_SAFE_ATTR,ze):D,Bt=ic(et,"ADD_DATA_URI_TAGS")?Dr(hd(tn),et.ADD_DATA_URI_TAGS,ze):tn,Pt=ic(et,"FORBID_CONTENTS")?Dr({},et.FORBID_CONTENTS,ze):Ut,Ie=ic(et,"FORBID_TAGS")?Dr({},et.FORBID_TAGS,ze):hd({}),je=ic(et,"FORBID_ATTR")?Dr({},et.FORBID_ATTR,ze):hd({}),ft=ic(et,"USE_PROFILES")?et.USE_PROFILES:!1,Me=et.ALLOW_ARIA_ATTR!==!1,Se=et.ALLOW_DATA_ATTR!==!1,qe=et.ALLOW_UNKNOWN_PROTOCOLS||!1,Qe=et.ALLOW_SELF_CLOSE_IN_ATTR!==!1,We=et.SAFE_FOR_TEMPLATES||!1,Re=et.SAFE_FOR_XML!==!1,K=et.WHOLE_DOCUMENT||!1,ce=et.RETURN_DOM||!1,le=et.RETURN_DOM_FRAGMENT||!1,ie=et.RETURN_TRUSTED_TYPE||!1,Te=et.FORCE_BODY||!1,Ee=et.SANITIZE_DOM!==!1,Be=et.SANITIZE_NAMED_PROPS||!1,ct=et.KEEP_CONTENT!==!1,Tt=et.IN_PLACE||!1,W=et.ALLOWED_URI_REGEXP||JX,we=et.NAMESPACE||De,ot=et.MATHML_TEXT_INTEGRATION_POINTS||ot,B=et.HTML_INTEGRATION_POINTS||B,oe=et.CUSTOM_ELEMENT_HANDLING||{},et.CUSTOM_ELEMENT_HANDLING&&Y(et.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(oe.tagNameCheck=et.CUSTOM_ELEMENT_HANDLING.tagNameCheck),et.CUSTOM_ELEMENT_HANDLING&&Y(et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(oe.attributeNameCheck=et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),et.CUSTOM_ELEMENT_HANDLING&&typeof et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(oe.allowCustomizedBuiltInElements=et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),We&&(Se=!1),le&&(ce=!0),ft&&(te=Dr({},o7),re=[],ft.html===!0&&(Dr(te,a7),Dr(re,l7)),ft.svg===!0&&(Dr(te,vI),Dr(re,_I),Dr(re,NS)),ft.svgFilters===!0&&(Dr(te,xI),Dr(re,_I),Dr(re,NS)),ft.mathMl===!0&&(Dr(te,wI),Dr(re,c7),Dr(re,NS))),et.ADD_TAGS&&(te===ee&&(te=hd(te)),Dr(te,et.ADD_TAGS,ze)),et.ADD_ATTR&&(re===de&&(re=hd(re)),Dr(re,et.ADD_ATTR,ze)),et.ADD_URI_SAFE_ATTR&&Dr(xe,et.ADD_URI_SAFE_ATTR,ze),et.FORBID_CONTENTS&&(Pt===Ut&&(Pt=hd(Pt)),Dr(Pt,et.FORBID_CONTENTS,ze)),ct&&(te["#text"]=!0),K&&Dr(te,["html","head","body"]),te.table&&(Dr(te,["tbody"]),delete Ie.tbody),et.TRUSTED_TYPES_POLICY){if(typeof et.TRUSTED_TYPES_POLICY.createHTML!="function")throw Cv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof et.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Cv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=et.TRUSTED_TYPES_POLICY,k=C.createHTML("")}else C===void 0&&(C=k3e(m,i)),C!==null&&typeof k=="string"&&(k=C.createHTML(""));no&&no(et),kt=et}},X=Dr({},[...vI,...xI,...p3e]),be=Dr({},[...wI,...m3e]),Oe=function(et){let Vt=S(et);(!Vt||!Vt.tagName)&&(Vt={namespaceURI:we,tagName:"template"});const pn=v2(et.tagName),tr=v2(Vt.tagName);return fe[et.namespaceURI]?et.namespaceURI===me?Vt.namespaceURI===De?pn==="svg":Vt.namespaceURI===Z?pn==="svg"&&(tr==="annotation-xml"||ot[tr]):!!X[pn]:et.namespaceURI===Z?Vt.namespaceURI===De?pn==="math":Vt.namespaceURI===me?pn==="math"&&B[tr]:!!be[pn]:et.namespaceURI===De?Vt.namespaceURI===me&&!B[tr]||Vt.namespaceURI===Z&&!ot[tr]?!1:!be[pn]&&($e[pn]||!X[pn]):!!(it==="application/xhtml+xml"&&fe[et.namespaceURI]):!1},Ge=function(et){_v(t.removed,{element:et});try{S(et).removeChild(et)}catch{v(et)}},wt=function(et,Vt){try{_v(t.removed,{attribute:Vt.getAttributeNode(et),from:Vt})}catch{_v(t.removed,{attribute:null,from:Vt})}if(Vt.removeAttribute(et),et==="is")if(ce||le)try{Ge(Vt)}catch{}else try{Vt.setAttribute(et,"")}catch{}},en=function(et){let Vt=null,pn=null;if(Te)et="<remove></remove>"+et;else{const Jr=s7(et,/^[\r\n\t ]+/);pn=Jr&&Jr[0]}it==="application/xhtml+xml"&&we===De&&(et='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+et+"</body></html>");const tr=C?C.createHTML(et):et;if(we===De)try{Vt=new h().parseFromString(tr,it)}catch{}if(!Vt||!Vt.documentElement){Vt=A.createDocument(we,"template",null);try{Vt.documentElement.innerHTML=Ne?k:tr}catch{}}const Ci=Vt.body||Vt.documentElement;return et&&pn&&Ci.insertBefore(n.createTextNode(pn),Ci.childNodes[0]||null),we===De?I.call(Vt,K?"html":"body")[0]:K?Vt.documentElement:Ci},$n=function(et){return R.call(et.ownerDocument||et,et,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Xt=function(et){return et instanceof d&&(typeof et.nodeName!="string"||typeof et.textContent!="string"||typeof et.removeChild!="function"||!(et.attributes instanceof u)||typeof et.removeAttribute!="function"||typeof et.setAttribute!="function"||typeof et.namespaceURI!="string"||typeof et.insertBefore!="function"||typeof et.hasChildNodes!="function")},nn=function(et){return typeof o=="function"&&et instanceof o};function un(hn,et,Vt){RS(hn,pn=>{pn.call(t,et,Vt,kt)})}const pr=function(et){let Vt=null;if(un(L.beforeSanitizeElements,et,null),Xt(et))return Ge(et),!0;const pn=ze(et.nodeName);if(un(L.uponSanitizeElement,et,{tagName:pn,allowedTags:te}),Re&&et.hasChildNodes()&&!nn(et.firstElementChild)&&Wa(/<[/\w!]/g,et.innerHTML)&&Wa(/<[/\w!]/g,et.textContent)||et.nodeType===Ev.progressingInstruction||Re&&et.nodeType===Ev.comment&&Wa(/<[/\w]/g,et.data))return Ge(et),!0;if(!te[pn]||Ie[pn]){if(!Ie[pn]&&ti(pn)&&(oe.tagNameCheck instanceof RegExp&&Wa(oe.tagNameCheck,pn)||oe.tagNameCheck instanceof Function&&oe.tagNameCheck(pn)))return!1;if(ct&&!Pt[pn]){const tr=S(et)||et.parentNode,Ci=w(et)||et.childNodes;if(Ci&&tr){const Jr=Ci.length;for(let Ms=Jr-1;Ms>=0;--Ms){const is=b(Ci[Ms],!0);is.__removalCount=(et.__removalCount||0)+1,tr.insertBefore(is,x(et))}}}return Ge(et),!0}return et instanceof l&&!Oe(et)||(pn==="noscript"||pn==="noembed"||pn==="noframes")&&Wa(/<\/no(script|embed|frames)/i,et.innerHTML)?(Ge(et),!0):(We&&et.nodeType===Ev.text&&(Vt=et.textContent,RS([P,V,F],tr=>{Vt=Sv(Vt,tr," ")}),et.textContent!==Vt&&(_v(t.removed,{element:et.cloneNode()}),et.textContent=Vt)),un(L.afterSanitizeElements,et,null),!1)},Er=function(et,Vt,pn){if(Ee&&(Vt==="id"||Vt==="name")&&(pn in n||pn in he))return!1;if(!(Se&&!je[Vt]&&Wa(J,Vt))){if(!(Me&&Wa(U,Vt))){if(!re[Vt]||je[Vt]){if(!(ti(et)&&(oe.tagNameCheck instanceof RegExp&&Wa(oe.tagNameCheck,et)||oe.tagNameCheck instanceof Function&&oe.tagNameCheck(et))&&(oe.attributeNameCheck instanceof RegExp&&Wa(oe.attributeNameCheck,Vt)||oe.attributeNameCheck instanceof Function&&oe.attributeNameCheck(Vt))||Vt==="is"&&oe.allowCustomizedBuiltInElements&&(oe.tagNameCheck instanceof RegExp&&Wa(oe.tagNameCheck,pn)||oe.tagNameCheck instanceof Function&&oe.tagNameCheck(pn))))return!1}else if(!xe[Vt]){if(!Wa(W,Sv(pn,$,""))){if(!((Vt==="src"||Vt==="xlink:href"||Vt==="href")&&et!=="script"&&u3e(pn,"data:")===0&&Bt[et])){if(!(qe&&!Wa(G,Sv(pn,$,"")))){if(pn)return!1}}}}}}return!0},ti=function(et){return et!=="annotation-xml"&&s7(et,ne)},ni=function(et){un(L.beforeSanitizeAttributes,et,null);const{attributes:Vt}=et;if(!Vt||Xt(et))return;const pn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:re,forceKeepAttr:void 0};let tr=Vt.length;for(;tr--;){const Ci=Vt[tr],{name:Jr,namespaceURI:Ms,value:is}=Ci,Ba=ze(Jr),oa=is;let zi=Jr==="value"?oa:d3e(oa);if(pn.attrName=Ba,pn.attrValue=zi,pn.keepAttr=!0,pn.forceKeepAttr=void 0,un(L.uponSanitizeAttribute,et,pn),zi=pn.attrValue,Be&&(Ba==="id"||Ba==="name")&&(wt(Jr,et),zi=Ce+zi),Re&&Wa(/((--!?|])>)|<\/(style|title)/i,zi)){wt(Jr,et);continue}if(pn.forceKeepAttr)continue;if(!pn.keepAttr){wt(Jr,et);continue}if(!Qe&&Wa(/\/>/i,zi)){wt(Jr,et);continue}We&&RS([P,V,F],hl=>{zi=Sv(zi,hl," ")});const Oo=ze(et.nodeName);if(!Er(Oo,Ba,zi)){wt(Jr,et);continue}if(C&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Ms)switch(m.getAttributeType(Oo,Ba)){case"TrustedHTML":{zi=C.createHTML(zi);break}case"TrustedScriptURL":{zi=C.createScriptURL(zi);break}}if(zi!==oa)try{Ms?et.setAttributeNS(Ms,Jr,zi):et.setAttribute(Jr,zi),Xt(et)?Ge(et):i7(t.removed)}catch{wt(Jr,et)}}un(L.afterSanitizeAttributes,et,null)},vr=function hn(et){let Vt=null;const pn=$n(et);for(un(L.beforeSanitizeShadowDOM,et,null);Vt=pn.nextNode();)un(L.uponSanitizeShadowNode,Vt,null),pr(Vt),ni(Vt),Vt.content instanceof s&&hn(Vt.content);un(L.afterSanitizeShadowDOM,et,null)};return t.sanitize=function(hn){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Vt=null,pn=null,tr=null,Ci=null;if(Ne=!hn,Ne&&(hn="<!-->"),typeof hn!="string"&&!nn(hn))if(typeof hn.toString=="function"){if(hn=hn.toString(),typeof hn!="string")throw Cv("dirty is not a string, aborting")}else throw Cv("toString is not a function");if(!t.isSupported)return hn;if(ge||H(et),t.removed=[],typeof hn=="string"&&(Tt=!1),Tt){if(hn.nodeName){const is=ze(hn.nodeName);if(!te[is]||Ie[is])throw Cv("root node is forbidden and cannot be sanitized in-place")}}else if(hn instanceof o)Vt=en("<!---->"),pn=Vt.ownerDocument.importNode(hn,!0),pn.nodeType===Ev.element&&pn.nodeName==="BODY"||pn.nodeName==="HTML"?Vt=pn:Vt.appendChild(pn);else{if(!ce&&!We&&!K&&hn.indexOf("<")===-1)return C&&ie?C.createHTML(hn):hn;if(Vt=en(hn),!Vt)return ce?null:ie?k:""}Vt&&Te&&Ge(Vt.firstChild);const Jr=$n(Tt?hn:Vt);for(;tr=Jr.nextNode();)pr(tr),ni(tr),tr.content instanceof s&&vr(tr.content);if(Tt)return hn;if(ce){if(le)for(Ci=N.call(Vt.ownerDocument);Vt.firstChild;)Ci.appendChild(Vt.firstChild);else Ci=Vt;return(re.shadowroot||re.shadowrootmode)&&(Ci=O.call(r,Ci,!0)),Ci}let Ms=K?Vt.outerHTML:Vt.innerHTML;return K&&te["!doctype"]&&Vt.ownerDocument&&Vt.ownerDocument.doctype&&Vt.ownerDocument.doctype.name&&Wa(QX,Vt.ownerDocument.doctype.name)&&(Ms="<!DOCTYPE "+Vt.ownerDocument.doctype.name+`>
`+Ms),We&&RS([P,V,F],is=>{Ms=Sv(Ms,is," ")}),C&&ie?C.createHTML(Ms):Ms},t.setConfig=function(){let hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};H(hn),ge=!0},t.clearConfig=function(){kt=null,ge=!1},t.isValidAttribute=function(hn,et,Vt){kt||H({});const pn=ze(hn),tr=ze(et);return Er(pn,tr,Vt)},t.addHook=function(hn,et){typeof et=="function"&&_v(L[hn],et)},t.removeHook=function(hn,et){if(et!==void 0){const Vt=l3e(L[hn],et);return Vt===-1?void 0:c3e(L[hn],Vt,1)[0]}return i7(L[hn])},t.removeHooks=function(hn){L[hn]=[]},t.removeAllHooks=function(){L=d7()},t}var ry=eJ(),tJ=Object.defineProperty,se=(e,t)=>tJ(e,"name",{value:t,configurable:!0}),E3e=(e,t)=>{for(var n in t)tJ(e,n,{get:t[n],enumerable:!0})},od={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},$t={trace:se((...e)=>{},"trace"),debug:se((...e)=>{},"debug"),info:se((...e)=>{},"info"),warn:se((...e)=>{},"warn"),error:se((...e)=>{},"error"),fatal:se((...e)=>{},"fatal")},SD=se(function(e="fatal"){let t=od.fatal;typeof e=="string"?e.toLowerCase()in od&&(t=od[e]):typeof e=="number"&&(t=e),$t.trace=()=>{},$t.debug=()=>{},$t.info=()=>{},$t.warn=()=>{},$t.error=()=>{},$t.fatal=()=>{},t<=od.fatal&&($t.fatal=console.error?console.error.bind(console,El("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",El("FATAL"))),t<=od.error&&($t.error=console.error?console.error.bind(console,El("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",El("ERROR"))),t<=od.warn&&($t.warn=console.warn?console.warn.bind(console,El("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",El("WARN"))),t<=od.info&&($t.info=console.info?console.info.bind(console,El("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",El("INFO"))),t<=od.debug&&($t.debug=console.debug?console.debug.bind(console,El("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",El("DEBUG"))),t<=od.trace&&($t.trace=console.debug?console.debug.bind(console,El("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",El("TRACE")))},"setLogLevel"),El=se(e=>`%c${XIe().format("ss.SSS")} : ${e} : `,"format"),nJ=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,ox=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,T3e=/\s*%%.*\n/gm,E0,rJ=(E0=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},se(E0,"UnknownDiagramError"),E0),iy={},CD=se(function(e,t){e=e.replace(nJ,"").replace(ox,"").replace(T3e,`
`);for(const[n,{detector:r}]of Object.entries(iy))if(r(e,t))return n;throw new rJ(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),iJ=se((...e)=>{for(const{id:t,detector:n,loader:r}of e)sJ(t,n,r)},"registerLazyLoadedDiagrams"),sJ=se((e,t,n)=>{iy[e]&&$t.warn(`Detector with key ${e} already exists. Overwriting.`),iy[e]={detector:t,loader:n},$t.debug(`Detector with key ${e} added${n?" with loader":""}`)},"addDetector"),A3e=se(e=>iy[e].loader,"getDiagramLoader"),zj=se((e,t,{depth:n=2,clobber:r=!1}={})=>{const i={depth:n,clobber:r};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(s=>zj(e,s,i)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(s=>{e.includes(s)||e.push(s)}),e):e===void 0||n<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(s=>{typeof t[s]=="object"&&(e[s]===void 0||typeof e[s]=="object")?(e[s]===void 0&&(e[s]=Array.isArray(t[s])?[]:{}),e[s]=zj(e[s],t[s],{depth:n-1,clobber:r})):(r||typeof e[s]!="object"&&typeof t[s]!="object")&&(e[s]=t[s])}),e)},"assignWithDepth"),ya=zj,iT="#ffffff",sT="#f2f2f2",Ga=se((e,t)=>t?yt(e,{s:-40,l:10}):yt(e,{s:-40,l:-10}),"mkBorder"),T0,R3e=(T0=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,w,S,C,k,A;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||yt(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||yt(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Ga(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Ga(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Ga(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Ga(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ln(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ln(this.tertiaryColor),this.lineColor=this.lineColor||ln(this.background),this.arrowheadColor=this.arrowheadColor||ln(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Bn(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Bn(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ln(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||xn(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Bn(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Bn(this.mainBkg,10)):(this.rowOdd=this.rowOdd||xn(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||xn(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||yt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||yt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||yt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||yt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||yt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||yt(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||yt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||yt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||yt(this.primaryColor,{h:330}),this.darkMode)for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this["cScale"+R]=Bn(this["cScale"+R],75);else for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this["cScale"+R]=Bn(this["cScale"+R],25);for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this["cScaleInv"+R]=this["cScaleInv"+R]||ln(this["cScale"+R]);for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this.darkMode?this["cScalePeer"+R]=this["cScalePeer"+R]||xn(this["cScale"+R],10):this["cScalePeer"+R]=this["cScalePeer"+R]||Bn(this["cScale"+R],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this["cScaleLabel"+R]=this["cScaleLabel"+R]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let R=0;R<5;R++)this["surface"+R]=this["surface"+R]||yt(this.mainBkg,{h:180,s:-15,l:t*(5+R*3)}),this["surfacePeer"+R]=this["surfacePeer"+R]||yt(this.mainBkg,{h:180,s:-15,l:t*(8+R*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||yt(this.primaryColor,{h:64}),this.fillType3=this.fillType3||yt(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||yt(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||yt(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||yt(this.primaryColor,{h:128}),this.fillType7=this.fillType7||yt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||yt(this.primaryColor,{l:-10}),this.pie5=this.pie5||yt(this.secondaryColor,{l:-10}),this.pie6=this.pie6||yt(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||yt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||yt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||yt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||yt(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||yt(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||yt(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((n=this.radar)==null?void 0:n.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((s=this.radar)==null?void 0:s.curveOpacity)||.5,curveStrokeWidth:((a=this.radar)==null?void 0:a.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((d=this.radar)==null?void 0:d.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||yt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||yt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||yt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||yt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||yt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||yt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||T1(this.quadrant1Fill)?xn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((h=this.xyChart)==null?void 0:h.backgroundColor)||this.background,titleColor:((m=this.xyChart)==null?void 0:m.titleColor)||this.primaryTextColor,xAxisTitleColor:((y=this.xyChart)==null?void 0:y.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((b=this.xyChart)==null?void 0:b.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((v=this.xyChart)==null?void 0:v.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((x=this.xyChart)==null?void 0:x.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((w=this.xyChart)==null?void 0:w.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((S=this.xyChart)==null?void 0:S.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((C=this.xyChart)==null?void 0:C.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((k=this.xyChart)==null?void 0:k.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((A=this.xyChart)==null?void 0:A.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Bn(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||yt(this.primaryColor,{h:-30}),this.git4=this.git4||yt(this.primaryColor,{h:-60}),this.git5=this.git5||yt(this.primaryColor,{h:-90}),this.git6=this.git6||yt(this.primaryColor,{h:60}),this.git7=this.git7||yt(this.primaryColor,{h:120}),this.darkMode?(this.git0=xn(this.git0,25),this.git1=xn(this.git1,25),this.git2=xn(this.git2,25),this.git3=xn(this.git3,25),this.git4=xn(this.git4,25),this.git5=xn(this.git5,25),this.git6=xn(this.git6,25),this.git7=xn(this.git7,25)):(this.git0=Bn(this.git0,25),this.git1=Bn(this.git1,25),this.git2=Bn(this.git2,25),this.git3=Bn(this.git3,25),this.git4=Bn(this.git4,25),this.git5=Bn(this.git5,25),this.git6=Bn(this.git6,25),this.git7=Bn(this.git7,25)),this.gitInv0=this.gitInv0||ln(this.git0),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||iT,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||sT}calculate(t){if(typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},se(T0,"Theme"),T0),N3e=se(e=>{const t=new R3e;return t.calculate(e),t},"getThemeVariables"),A0,M3e=(A0=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=xn(this.primaryColor,16),this.tertiaryColor=yt(this.primaryColor,{h:-160}),this.primaryBorderColor=ln(this.background),this.secondaryBorderColor=Ga(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ga(this.tertiaryColor,this.darkMode),this.primaryTextColor=ln(this.primaryColor),this.secondaryTextColor=ln(this.secondaryColor),this.tertiaryTextColor=ln(this.tertiaryColor),this.lineColor=ln(this.background),this.textColor=ln(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=xn(ln("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=ax(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Bn("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Bn(this.sectionBkgColor,10),this.taskBorderColor=ax(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=ax(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||xn(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Bn(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,w,S,C,k;this.secondBkg=xn(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=xn(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=xn(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=yt(this.primaryColor,{h:64}),this.fillType3=yt(this.secondaryColor,{h:64}),this.fillType4=yt(this.primaryColor,{h:-64}),this.fillType5=yt(this.secondaryColor,{h:-64}),this.fillType6=yt(this.primaryColor,{h:128}),this.fillType7=yt(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||yt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||yt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||yt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||yt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||yt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||yt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||yt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||yt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||yt(this.primaryColor,{h:330});for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||ln(this["cScale"+A]);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScalePeer"+A]=this["cScalePeer"+A]||xn(this["cScale"+A],10);for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||yt(this.mainBkg,{h:30,s:-30,l:-(-10+A*4)}),this["surfacePeer"+A]=this["surfacePeer"+A]||yt(this.mainBkg,{h:30,s:-30,l:-(-7+A*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.scaleLabelColor;for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["pie"+A]=this["cScale"+A];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||yt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||yt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||yt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||yt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||yt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||yt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||T1(this.quadrant1Fill)?xn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((h=this.radar)==null?void 0:h.axisColor)||this.lineColor,axisStrokeWidth:((m=this.radar)==null?void 0:m.axisStrokeWidth)||2,axisLabelFontSize:((y=this.radar)==null?void 0:y.axisLabelFontSize)||12,curveOpacity:((b=this.radar)==null?void 0:b.curveOpacity)||.5,curveStrokeWidth:((v=this.radar)==null?void 0:v.curveStrokeWidth)||2,graticuleColor:((x=this.radar)==null?void 0:x.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((w=this.radar)==null?void 0:w.graticuleStrokeWidth)||1,graticuleOpacity:((S=this.radar)==null?void 0:S.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Bn(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=xn(this.secondaryColor,20),this.git1=xn(this.pie2||this.secondaryColor,20),this.git2=xn(this.pie3||this.tertiaryColor,20),this.git3=xn(this.pie4||yt(this.primaryColor,{h:-30}),20),this.git4=xn(this.pie5||yt(this.primaryColor,{h:-60}),20),this.git5=xn(this.pie6||yt(this.primaryColor,{h:-90}),10),this.git6=xn(this.pie7||yt(this.primaryColor,{h:60}),10),this.git7=xn(this.pie8||yt(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ln(this.git0),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ln(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ln(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||xn(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||xn(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},se(A0,"Theme"),A0),I3e=se(e=>{const t=new M3e;return t.calculate(e),t},"getThemeVariables"),R0,j3e=(R0=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=yt(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=yt(this.primaryColor,{h:-160}),this.primaryBorderColor=Ga(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ga(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ga(this.tertiaryColor,this.darkMode),this.primaryTextColor=ln(this.primaryColor),this.secondaryTextColor=ln(this.secondaryColor),this.tertiaryTextColor=ln(this.tertiaryColor),this.lineColor=ln(this.background),this.textColor=ln(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=ax(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,w,S,C,k;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||yt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||yt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||yt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||yt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||yt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||yt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||yt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||yt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||yt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Bn(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Bn(this.tertiaryColor,40);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScale"+A]=Bn(this["cScale"+A],10),this["cScalePeer"+A]=this["cScalePeer"+A]||Bn(this["cScale"+A],25);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||yt(this["cScale"+A],{h:180});for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||yt(this.mainBkg,{h:30,l:-(5+A*5)}),this["surfacePeer"+A]=this["surfacePeer"+A]||yt(this.mainBkg,{h:30,l:-(7+A*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ln(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ln(this.labelTextColor);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=xn(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||xn(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||xn(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=yt(this.primaryColor,{h:64}),this.fillType3=yt(this.secondaryColor,{h:64}),this.fillType4=yt(this.primaryColor,{h:-64}),this.fillType5=yt(this.secondaryColor,{h:-64}),this.fillType6=yt(this.primaryColor,{h:128}),this.fillType7=yt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||yt(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||yt(this.primaryColor,{l:-10}),this.pie5=this.pie5||yt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||yt(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||yt(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||yt(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||yt(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||yt(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||yt(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||yt(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||yt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||yt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||yt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||yt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||yt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||yt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||T1(this.quadrant1Fill)?xn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((h=this.xyChart)==null?void 0:h.titleColor)||this.primaryTextColor,xAxisTitleColor:((m=this.xyChart)==null?void 0:m.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((y=this.xyChart)==null?void 0:y.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((b=this.xyChart)==null?void 0:b.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((x=this.xyChart)==null?void 0:x.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((w=this.xyChart)==null?void 0:w.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((S=this.xyChart)==null?void 0:S.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||yt(this.primaryColor,{h:-30}),this.git4=this.git4||yt(this.primaryColor,{h:-60}),this.git5=this.git5||yt(this.primaryColor,{h:-90}),this.git6=this.git6||yt(this.primaryColor,{h:60}),this.git7=this.git7||yt(this.primaryColor,{h:120}),this.darkMode?(this.git0=xn(this.git0,25),this.git1=xn(this.git1,25),this.git2=xn(this.git2,25),this.git3=xn(this.git3,25),this.git4=xn(this.git4,25),this.git5=xn(this.git5,25),this.git6=xn(this.git6,25),this.git7=xn(this.git7,25)):(this.git0=Bn(this.git0,25),this.git1=Bn(this.git1,25),this.git2=Bn(this.git2,25),this.git3=Bn(this.git3,25),this.git4=Bn(this.git4,25),this.git5=Bn(this.git5,25),this.git6=Bn(this.git6,25),this.git7=Bn(this.git7,25)),this.gitInv0=this.gitInv0||Bn(ln(this.git0),25),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ln(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ln(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||iT,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||sT}calculate(t){if(Object.keys(this).forEach(r=>{this[r]==="calculated"&&(this[r]=void 0)}),typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},se(R0,"Theme"),R0),O3e=se(e=>{const t=new j3e;return t.calculate(e),t},"getThemeVariables"),N0,P3e=(N0=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=xn("#cde498",10),this.primaryBorderColor=Ga(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ga(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ga(this.tertiaryColor,this.darkMode),this.primaryTextColor=ln(this.primaryColor),this.secondaryTextColor=ln(this.secondaryColor),this.tertiaryTextColor=ln(this.primaryColor),this.lineColor=ln(this.background),this.textColor=ln(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,w,S,C,k;this.actorBorder=Bn(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||yt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||yt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||yt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||yt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||yt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||yt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||yt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||yt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||yt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Bn(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Bn(this.tertiaryColor,40);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScale"+A]=Bn(this["cScale"+A],10),this["cScalePeer"+A]=this["cScalePeer"+A]||Bn(this["cScale"+A],25);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||yt(this["cScale"+A],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.scaleLabelColor;for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||yt(this.mainBkg,{h:30,s:-30,l:-(5+A*5)}),this["surfacePeer"+A]=this["surfacePeer"+A]||yt(this.mainBkg,{h:30,s:-30,l:-(8+A*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||xn(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||xn(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=yt(this.primaryColor,{h:64}),this.fillType3=yt(this.secondaryColor,{h:64}),this.fillType4=yt(this.primaryColor,{h:-64}),this.fillType5=yt(this.secondaryColor,{h:-64}),this.fillType6=yt(this.primaryColor,{h:128}),this.fillType7=yt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||yt(this.primaryColor,{l:-30}),this.pie5=this.pie5||yt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||yt(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||yt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||yt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||yt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||yt(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||yt(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||yt(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||yt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||yt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||yt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||yt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||yt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||yt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||T1(this.quadrant1Fill)?xn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((h=this.xyChart)==null?void 0:h.titleColor)||this.primaryTextColor,xAxisTitleColor:((m=this.xyChart)==null?void 0:m.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((y=this.xyChart)==null?void 0:y.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((b=this.xyChart)==null?void 0:b.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((x=this.xyChart)==null?void 0:x.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((w=this.xyChart)==null?void 0:w.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((S=this.xyChart)==null?void 0:S.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||yt(this.primaryColor,{h:-30}),this.git4=this.git4||yt(this.primaryColor,{h:-60}),this.git5=this.git5||yt(this.primaryColor,{h:-90}),this.git6=this.git6||yt(this.primaryColor,{h:60}),this.git7=this.git7||yt(this.primaryColor,{h:120}),this.darkMode?(this.git0=xn(this.git0,25),this.git1=xn(this.git1,25),this.git2=xn(this.git2,25),this.git3=xn(this.git3,25),this.git4=xn(this.git4,25),this.git5=xn(this.git5,25),this.git6=xn(this.git6,25),this.git7=xn(this.git7,25)):(this.git0=Bn(this.git0,25),this.git1=Bn(this.git1,25),this.git2=Bn(this.git2,25),this.git3=Bn(this.git3,25),this.git4=Bn(this.git4,25),this.git5=Bn(this.git5,25),this.git6=Bn(this.git6,25),this.git7=Bn(this.git7,25)),this.gitInv0=this.gitInv0||ln(this.git0),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ln(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ln(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||iT,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||sT}calculate(t){if(typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},se(N0,"Theme"),N0),D3e=se(e=>{const t=new P3e;return t.calculate(e),t},"getThemeVariables"),M0,F3e=(M0=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=xn(this.contrast,55),this.background="#ffffff",this.tertiaryColor=yt(this.primaryColor,{h:-160}),this.primaryBorderColor=Ga(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ga(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ga(this.tertiaryColor,this.darkMode),this.primaryTextColor=ln(this.primaryColor),this.secondaryTextColor=ln(this.secondaryColor),this.tertiaryTextColor=ln(this.tertiaryColor),this.lineColor=ln(this.background),this.textColor=ln(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||xn(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,w,S,C,k;this.secondBkg=xn(this.contrast,55),this.border2=this.contrast,this.actorBorder=xn(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||ln(this["cScale"+A]);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this.darkMode?this["cScalePeer"+A]=this["cScalePeer"+A]||xn(this["cScale"+A],10):this["cScalePeer"+A]=this["cScalePeer"+A]||Bn(this["cScale"+A],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.scaleLabelColor;for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||yt(this.mainBkg,{l:-(5+A*5)}),this["surfacePeer"+A]=this["surfacePeer"+A]||yt(this.mainBkg,{l:-(8+A*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=xn(this.contrast,30),this.sectionBkgColor2=xn(this.contrast,30),this.taskBorderColor=Bn(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=xn(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Bn(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=yt(this.primaryColor,{h:64}),this.fillType3=yt(this.secondaryColor,{h:64}),this.fillType4=yt(this.primaryColor,{h:-64}),this.fillType5=yt(this.secondaryColor,{h:-64}),this.fillType6=yt(this.primaryColor,{h:128}),this.fillType7=yt(this.secondaryColor,{h:128});for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["pie"+A]=this["cScale"+A];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||yt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||yt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||yt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||yt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||yt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||yt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||T1(this.quadrant1Fill)?xn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((h=this.radar)==null?void 0:h.axisColor)||this.lineColor,axisStrokeWidth:((m=this.radar)==null?void 0:m.axisStrokeWidth)||2,axisLabelFontSize:((y=this.radar)==null?void 0:y.axisLabelFontSize)||12,curveOpacity:((b=this.radar)==null?void 0:b.curveOpacity)||.5,curveStrokeWidth:((v=this.radar)==null?void 0:v.curveStrokeWidth)||2,graticuleColor:((x=this.radar)==null?void 0:x.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((w=this.radar)==null?void 0:w.graticuleStrokeWidth)||1,graticuleOpacity:((S=this.radar)==null?void 0:S.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Bn(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||yt(this.primaryColor,{h:-30}),this.git4=this.pie5||yt(this.primaryColor,{h:-60}),this.git5=this.pie6||yt(this.primaryColor,{h:-90}),this.git6=this.pie7||yt(this.primaryColor,{h:60}),this.git7=this.pie8||yt(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ln(this.git0),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||iT,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||sT}calculate(t){if(typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},se(M0,"Theme"),M0),L3e=se(e=>{const t=new F3e;return t.calculate(e),t},"getThemeVariables"),Nd={base:{getThemeVariables:N3e},dark:{getThemeVariables:I3e},default:{getThemeVariables:O3e},forest:{getThemeVariables:D3e},neutral:{getThemeVariables:L3e}},ld={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},aJ={...ld,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:Nd.default.getThemeVariables(),sequence:{...ld.sequence,messageFont:se(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:se(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:se(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...ld.gantt,tickInterval:void 0,useWidth:void 0},c4:{...ld.c4,useWidth:void 0,personFont:se(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:se(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:se(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:se(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:se(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:se(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:se(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:se(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:se(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:se(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:se(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:se(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:se(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:se(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:se(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:se(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:se(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:se(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:se(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:se(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:se(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:se(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...ld.pie,useWidth:984},xyChart:{...ld.xyChart,useWidth:void 0},requirement:{...ld.requirement,useWidth:void 0},packet:{...ld.packet},radar:{...ld.radar}},oJ=se((e,t="")=>Object.keys(e).reduce((n,r)=>Array.isArray(e[r])?n:typeof e[r]=="object"&&e[r]!==null?[...n,t+r,...oJ(e[r],"")]:[...n,t+r],[]),"keyify"),B3e=new Set(oJ(aJ,"")),lJ=aJ,KC=se(e=>{if($t.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>KC(t));return}for(const t of Object.keys(e)){if($t.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!B3e.has(t)||e[t]==null){$t.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){$t.debug("sanitizing object",t),KC(e[t]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const r of n)t.includes(r)&&($t.debug("sanitizing css option",t),e[t]=$3e(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const n=e.themeVariables[t];n!=null&&n.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}$t.debug("After sanitization",e)}},"sanitizeDirective"),$3e=se(e=>{let t=0,n=0;for(const r of e){if(t<n)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?t++:r==="}"&&n++}return t!==n?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),sy=Object.freeze(lJ),mo=ya({},sy),cJ,ay=[],lx=ya({},sy),aT=se((e,t)=>{let n=ya({},e),r={};for(const i of t)fJ(i),r=ya(r,i);if(n=ya(n,r),r.theme&&r.theme in Nd){const i=ya({},cJ),s=ya(i.themeVariables||{},r.themeVariables);n.theme&&n.theme in Nd&&(n.themeVariables=Nd[n.theme].getThemeVariables(s))}return lx=n,hJ(lx),lx},"updateCurrentConfig"),z3e=se(e=>(mo=ya({},sy),mo=ya(mo,e),e.theme&&Nd[e.theme]&&(mo.themeVariables=Nd[e.theme].getThemeVariables(e.themeVariables)),aT(mo,ay),mo),"setSiteConfig"),U3e=se(e=>{cJ=ya({},e)},"saveConfigFromInitialize"),q3e=se(e=>(mo=ya(mo,e),aT(mo,ay),mo),"updateSiteConfig"),uJ=se(()=>ya({},mo),"getSiteConfig"),dJ=se(e=>(hJ(e),ya(lx,e),Eo()),"setConfig"),Eo=se(()=>ya({},lx),"getConfig"),fJ=se(e=>{e&&(["secure",...mo.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&($t.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&fJ(e[t])}))},"sanitize"),V3e=se(e=>{var t;KC(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),ay.push(e),aT(mo,ay)},"addDirective"),YC=se((e=mo)=>{ay=[],aT(e,ay)},"reset"),W3e={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},f7={},H3e=se(e=>{f7[e]||($t.warn(W3e[e]),f7[e]=!0)},"issueWarning"),hJ=se(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&H3e("LAZY_LOAD_DEPRECATED")},"checkConfig"),A1=/<br\s*\/?>/gi,G3e=se(e=>e?gJ(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),K3e=(()=>{let e=!1;return()=>{e||(pJ(),e=!0)}})();function pJ(){const e="data-temp-href-target";ry.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),ry.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}se(pJ,"setupDompurifyHooks");var mJ=se(e=>(K3e(),ry.sanitize(e)),"removeScript"),h7=se((e,t)=>{var n;if(((n=t.flowchart)==null?void 0:n.htmlLabels)!==!1){const r=t.securityLevel;r==="antiscript"||r==="strict"?e=mJ(e):r!=="loose"&&(e=gJ(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=J3e(e))}return e},"sanitizeMore"),sm=se((e,t)=>e&&(t.dompurifyConfig?e=ry.sanitize(h7(e,t),t.dompurifyConfig).toString():e=ry.sanitize(h7(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),Y3e=se((e,t)=>typeof e=="string"?sm(e,t):e.flat().map(n=>sm(n,t)),"sanitizeTextOrArray"),Z3e=se(e=>A1.test(e),"hasBreaks"),X3e=se(e=>e.split(A1),"splitBreaks"),J3e=se(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),gJ=se(e=>e.replace(A1,"#br#"),"breakToPlaceholder"),Q3e=se(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},"getUrl"),qs=se(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),eje=se(function(...e){const t=e.filter(n=>!isNaN(n));return Math.max(...t)},"getMax"),tje=se(function(...e){const t=e.filter(n=>!isNaN(n));return Math.min(...t)},"getMin"),p7=se(function(e){const t=e.split(/(,)/),n=[];for(let r=0;r<t.length;r++){let i=t[r];if(i===","&&r>0&&r+1<t.length){const s=t[r-1],a=t[r+1];nje(s,a)&&(i=s+","+a,r++,n.pop())}n.push(rje(i))}return n.join("")},"parseGenericTypes"),Uj=se((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),nje=se((e,t)=>{const n=Uj(e,"~"),r=Uj(t,"~");return n===1&&r===1},"shouldCombineSets"),rje=se(e=>{const t=Uj(e,"~");let n=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),n=!0);const r=[...e];let i=r.indexOf("~"),s=r.lastIndexOf("~");for(;i!==-1&&s!==-1&&i!==s;)r[i]="<",r[s]=">",i=r.indexOf("~"),s=r.lastIndexOf("~");return n&&r.unshift("~"),r.join("")},"processSet"),m7=se(()=>window.MathMLElement!==void 0,"isMathMLSupported"),qj=/\$\$(.*)\$\$/g,oy=se(e=>{var t;return(((t=e.match(qj))==null?void 0:t.length)??0)>0},"hasKatex"),Rdt=se(async(e,t)=>{e=await kD(e,t);const n=document.createElement("div");n.innerHTML=e,n.id="katex-temp",n.style.visibility="hidden",n.style.position="absolute",n.style.top="0";const r=document.querySelector("body");r==null||r.insertAdjacentElement("beforeend",n);const i={width:n.clientWidth,height:n.clientHeight};return n.remove(),i},"calculateMathMLDimensions"),kD=se(async(e,t)=>{if(!oy(e))return e;if(!(m7()||t.legacyMathML||t.forceLegacyMathML))return e.replace(qj,"MathML is unsupported in this environment.");const{default:n}=await Kr(async()=>{const{default:i}=await import("./katex-ChWnQ-fc.js");return{default:i}},[]),r=t.forceLegacyMathML||!m7()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(A1).map(i=>oy(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(qj,(i,s)=>n.renderToString(s,{throwOnError:!0,displayMode:!0,output:r}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),Wy={getRows:G3e,sanitizeText:sm,sanitizeTextOrArray:Y3e,hasBreaks:Z3e,splitBreaks:X3e,lineBreakRegex:A1,removeScript:mJ,getUrl:Q3e,evaluate:qs,getMax:eje,getMin:tje},ije=se(function(e,t){for(let n of t)e.attr(n[0],n[1])},"d3Attrs"),sje=se(function(e,t,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${t}px;`)):(r.set("height",e),r.set("width",t)),r},"calculateSvgSizeAttrs"),yJ=se(function(e,t,n,r){const i=sje(t,n,r);ije(e,i)},"configureSvgSize"),aje=se(function(e,t,n,r){const i=t.node().getBBox(),s=i.width,a=i.height;$t.info(`SVG bounds: ${s}x${a}`,i);let o=0,l=0;$t.info(`Graph bounds: ${o}x${l}`,e),o=s+n*2,l=a+n*2,$t.info(`Calculated bounds: ${o}x${l}`),yJ(t,l,o,r);const c=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;t.attr("viewBox",c)},"setupGraphViewbox"),x2={},oje=se((e,t,n)=>{let r="";return e in x2&&x2[e]?r=x2[e](n):$t.warn(`No theme found for ${e}`),` & {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
    fill: ${n.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${n.errorBkgColor};
  }
  & .error-text {
    fill: ${n.errorTextColor};
    stroke: ${n.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${n.lineColor};
    stroke: ${n.lineColor};
  }
  & .marker.cross {
    stroke: ${n.lineColor};
  }

  & svg {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
  }
   & p {
    margin: 0
   }

  ${r}

  ${t}
`},"getStyles"),lje=se((e,t)=>{t!==void 0&&(x2[e]=t)},"addStylesForDiagram"),cje=oje,bJ={};E3e(bJ,{clear:()=>uje,getAccDescription:()=>pje,getAccTitle:()=>fje,getDiagramTitle:()=>gje,setAccDescription:()=>hje,setAccTitle:()=>dje,setDiagramTitle:()=>mje});var ED="",TD="",AD="",RD=se(e=>sm(e,Eo()),"sanitizeText"),uje=se(()=>{ED="",AD="",TD=""},"clear"),dje=se(e=>{ED=RD(e).replace(/^\s+/g,"")},"setAccTitle"),fje=se(()=>ED,"getAccTitle"),hje=se(e=>{AD=RD(e).replace(/\n\s+/g,`
`)},"setAccDescription"),pje=se(()=>AD,"getAccDescription"),mje=se(e=>{TD=RD(e)},"setDiagramTitle"),gje=se(()=>TD,"getDiagramTitle"),g7=$t,yje=SD,si=Eo,Ndt=dJ,Mdt=sy,ND=se(e=>sm(e,si()),"sanitizeText"),bje=aje,vje=se(()=>bJ,"getCommonDb"),ZC={},XC=se((e,t,n)=>{var r;ZC[e]&&g7.warn(`Diagram with id ${e} already registered. Overwriting.`),ZC[e]=t,n&&sJ(e,n),lje(e,t.styles),(r=t.injectUtils)==null||r.call(t,g7,yje,si,ND,bje,vje(),()=>{})},"registerDiagram"),Vj=se(e=>{if(e in ZC)return ZC[e];throw new xje(e)},"getDiagram"),I0,xje=(I0=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},se(I0,"DiagramNotFoundError"),I0);function MD(e){return typeof e>"u"||e===null}se(MD,"isNothing");function vJ(e){return typeof e=="object"&&e!==null}se(vJ,"isObject");function xJ(e){return Array.isArray(e)?e:MD(e)?[]:[e]}se(xJ,"toArray");function wJ(e,t){var n,r,i,s;if(t)for(s=Object.keys(t),n=0,r=s.length;n<r;n+=1)i=s[n],e[i]=t[i];return e}se(wJ,"extend");function _J(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}se(_J,"repeat");function SJ(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}se(SJ,"isNegativeZero");var wje=MD,_je=vJ,Sje=xJ,Cje=_J,kje=SJ,Eje=wJ,Bs={isNothing:wje,isObject:_je,toArray:Sje,repeat:Cje,isNegativeZero:kje,extend:Eje};function ID(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}se(ID,"formatError");function ly(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=ID(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}se(ly,"YAMLException$1");ly.prototype=Object.create(Error.prototype);ly.prototype.constructor=ly;ly.prototype.toString=se(function(t){return this.name+": "+ID(this,t)},"toString");var xo=ly;function w2(e,t,n,r,i){var s="",a="",o=Math.floor(i/2)-1;return r-t>o&&(s=" ... ",t=r-o+s.length),n-r>o&&(a=" ...",n=r+o-a.length),{str:s+e.slice(t,n).replace(/\t/g,"")+a,pos:r-t+s.length}}se(w2,"getLine");function _2(e,t){return Bs.repeat(" ",t-e.length)+e}se(_2,"padStart");function CJ(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],s,a=-1;s=n.exec(e.buffer);)i.push(s.index),r.push(s.index+s[0].length),e.position<=s.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var o="",l,c,u=Math.min(e.line+t.linesAfter,i.length).toString().length,d=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(a-l<0);l++)c=w2(e.buffer,r[a-l],i[a-l],e.position-(r[a]-r[a-l]),d),o=Bs.repeat(" ",t.indent)+_2((e.line-l+1).toString(),u)+" | "+c.str+`
`+o;for(c=w2(e.buffer,r[a],i[a],e.position,d),o+=Bs.repeat(" ",t.indent)+_2((e.line+1).toString(),u)+" | "+c.str+`
`,o+=Bs.repeat("-",t.indent+u+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(a+l>=i.length);l++)c=w2(e.buffer,r[a+l],i[a+l],e.position-(r[a]-r[a+l]),d),o+=Bs.repeat(" ",t.indent)+_2((e.line+l+1).toString(),u)+" | "+c.str+`
`;return o.replace(/\n$/,"")}se(CJ,"makeSnippet");var Tje=CJ,Aje=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Rje=["scalar","sequence","mapping"];function kJ(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}se(kJ,"compileStyleAliases");function EJ(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(Aje.indexOf(n)===-1)throw new xo('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=kJ(t.styleAliases||null),Rje.indexOf(this.kind)===-1)throw new xo('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}se(EJ,"Type$1");var ja=EJ;function Wj(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(s,a){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=a)}),n[i]=r}),n}se(Wj,"compileList");function TJ(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(se(r,"collectType"),t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}se(TJ,"compileMap");function JC(e){return this.extend(e)}se(JC,"Schema$1");JC.prototype.extend=se(function(t){var n=[],r=[];if(t instanceof ja)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new xo("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof ja))throw new xo("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new xo("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new xo("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof ja))throw new xo("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(JC.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=Wj(i,"implicit"),i.compiledExplicit=Wj(i,"explicit"),i.compiledTypeMap=TJ(i.compiledImplicit,i.compiledExplicit),i},"extend");var Nje=JC,Mje=new ja("tag:yaml.org,2002:str",{kind:"scalar",construct:se(function(e){return e!==null?e:""},"construct")}),Ije=new ja("tag:yaml.org,2002:seq",{kind:"sequence",construct:se(function(e){return e!==null?e:[]},"construct")}),jje=new ja("tag:yaml.org,2002:map",{kind:"mapping",construct:se(function(e){return e!==null?e:{}},"construct")}),Oje=new Nje({explicit:[Mje,Ije,jje]});function AJ(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}se(AJ,"resolveYamlNull");function RJ(){return null}se(RJ,"constructYamlNull");function NJ(e){return e===null}se(NJ,"isNull");var Pje=new ja("tag:yaml.org,2002:null",{kind:"scalar",resolve:AJ,construct:RJ,predicate:NJ,represent:{canonical:se(function(){return"~"},"canonical"),lowercase:se(function(){return"null"},"lowercase"),uppercase:se(function(){return"NULL"},"uppercase"),camelcase:se(function(){return"Null"},"camelcase"),empty:se(function(){return""},"empty")},defaultStyle:"lowercase"});function MJ(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}se(MJ,"resolveYamlBoolean");function IJ(e){return e==="true"||e==="True"||e==="TRUE"}se(IJ,"constructYamlBoolean");function jJ(e){return Object.prototype.toString.call(e)==="[object Boolean]"}se(jJ,"isBoolean");var Dje=new ja("tag:yaml.org,2002:bool",{kind:"scalar",resolve:MJ,construct:IJ,predicate:jJ,represent:{lowercase:se(function(e){return e?"true":"false"},"lowercase"),uppercase:se(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:se(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function OJ(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}se(OJ,"isHexCode");function PJ(e){return 48<=e&&e<=55}se(PJ,"isOctCode");function DJ(e){return 48<=e&&e<=57}se(DJ,"isDecCode");function FJ(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!OJ(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!PJ(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!DJ(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}se(FJ,"resolveYamlInteger");function LJ(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}se(LJ,"constructYamlInteger");function BJ(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Bs.isNegativeZero(e)}se(BJ,"isInteger");var Fje=new ja("tag:yaml.org,2002:int",{kind:"scalar",resolve:FJ,construct:LJ,predicate:BJ,represent:{binary:se(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:se(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:se(function(e){return e.toString(10)},"decimal"),hexadecimal:se(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Lje=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function $J(e){return!(e===null||!Lje.test(e)||e[e.length-1]==="_")}se($J,"resolveYamlFloat");function zJ(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}se(zJ,"constructYamlFloat");var Bje=/^[-+]?[0-9]+e/;function UJ(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Bs.isNegativeZero(e))return"-0.0";return n=e.toString(10),Bje.test(n)?n.replace("e",".e"):n}se(UJ,"representYamlFloat");function qJ(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Bs.isNegativeZero(e))}se(qJ,"isFloat");var $je=new ja("tag:yaml.org,2002:float",{kind:"scalar",resolve:$J,construct:zJ,predicate:qJ,represent:UJ,defaultStyle:"lowercase"}),VJ=Oje.extend({implicit:[Pje,Dje,Fje,$je]}),zje=VJ,WJ=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),HJ=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function GJ(e){return e===null?!1:WJ.exec(e)!==null||HJ.exec(e)!==null}se(GJ,"resolveYamlTimestamp");function KJ(e){var t,n,r,i,s,a,o,l=0,c=null,u,d,h;if(t=WJ.exec(e),t===null&&(t=HJ.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(s=+t[4],a=+t[5],o=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=+t[10],d=+(t[11]||0),c=(u*60+d)*6e4,t[9]==="-"&&(c=-c)),h=new Date(Date.UTC(n,r,i,s,a,o,l)),c&&h.setTime(h.getTime()-c),h}se(KJ,"constructYamlTimestamp");function YJ(e){return e.toISOString()}se(YJ,"representYamlTimestamp");var Uje=new ja("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:GJ,construct:KJ,instanceOf:Date,represent:YJ});function ZJ(e){return e==="<<"||e===null}se(ZJ,"resolveYamlMerge");var qje=new ja("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ZJ}),jD=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function XJ(e){if(e===null)return!1;var t,n,r=0,i=e.length,s=jD;for(n=0;n<i;n++)if(t=s.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}se(XJ,"resolveYamlBinary");function JJ(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,s=jD,a=0,o=[];for(t=0;t<i;t++)t%4===0&&t&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|s.indexOf(r.charAt(t));return n=i%4*6,n===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):n===18?(o.push(a>>10&255),o.push(a>>2&255)):n===12&&o.push(a>>4&255),new Uint8Array(o)}se(JJ,"constructYamlBinary");function QJ(e){var t="",n=0,r,i,s=e.length,a=jD;for(r=0;r<s;r++)r%3===0&&r&&(t+=a[n>>18&63],t+=a[n>>12&63],t+=a[n>>6&63],t+=a[n&63]),n=(n<<8)+e[r];return i=s%3,i===0?(t+=a[n>>18&63],t+=a[n>>12&63],t+=a[n>>6&63],t+=a[n&63]):i===2?(t+=a[n>>10&63],t+=a[n>>4&63],t+=a[n<<2&63],t+=a[64]):i===1&&(t+=a[n>>2&63],t+=a[n<<4&63],t+=a[64],t+=a[64]),t}se(QJ,"representYamlBinary");function eQ(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}se(eQ,"isBinary");var Vje=new ja("tag:yaml.org,2002:binary",{kind:"scalar",resolve:XJ,construct:JJ,predicate:eQ,represent:QJ}),Wje=Object.prototype.hasOwnProperty,Hje=Object.prototype.toString;function tQ(e){if(e===null)return!0;var t=[],n,r,i,s,a,o=e;for(n=0,r=o.length;n<r;n+=1){if(i=o[n],a=!1,Hje.call(i)!=="[object Object]")return!1;for(s in i)if(Wje.call(i,s))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}se(tQ,"resolveYamlOmap");function nQ(e){return e!==null?e:[]}se(nQ,"constructYamlOmap");var Gje=new ja("tag:yaml.org,2002:omap",{kind:"sequence",resolve:tQ,construct:nQ}),Kje=Object.prototype.toString;function rQ(e){if(e===null)return!0;var t,n,r,i,s,a=e;for(s=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],Kje.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[t]=[i[0],r[i[0]]]}return!0}se(rQ,"resolveYamlPairs");function iQ(e){if(e===null)return[];var t,n,r,i,s,a=e;for(s=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],i=Object.keys(r),s[t]=[i[0],r[i[0]]];return s}se(iQ,"constructYamlPairs");var Yje=new ja("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:rQ,construct:iQ}),Zje=Object.prototype.hasOwnProperty;function sQ(e){if(e===null)return!0;var t,n=e;for(t in n)if(Zje.call(n,t)&&n[t]!==null)return!1;return!0}se(sQ,"resolveYamlSet");function aQ(e){return e!==null?e:{}}se(aQ,"constructYamlSet");var Xje=new ja("tag:yaml.org,2002:set",{kind:"mapping",resolve:sQ,construct:aQ}),oQ=zje.extend({implicit:[Uje,qje],explicit:[Vje,Gje,Yje,Xje]}),yh=Object.prototype.hasOwnProperty,QC=1,lQ=2,cQ=3,ek=4,SI=1,Jje=2,y7=3,Qje=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,e4e=/[\x85\u2028\u2029]/,t4e=/[,\[\]\{\}]/,uQ=/^(?:!|!!|![a-z\-]+!)$/i,dQ=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Hj(e){return Object.prototype.toString.call(e)}se(Hj,"_class");function gc(e){return e===10||e===13}se(gc,"is_EOL");function eh(e){return e===9||e===32}se(eh,"is_WHITE_SPACE");function Ka(e){return e===9||e===32||e===10||e===13}se(Ka,"is_WS_OR_EOL");function Op(e){return e===44||e===91||e===93||e===123||e===125}se(Op,"is_FLOW_INDICATOR");function fQ(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}se(fQ,"fromHexCode");function hQ(e){return e===120?2:e===117?4:e===85?8:0}se(hQ,"escapedHexLen");function pQ(e){return 48<=e&&e<=57?e-48:-1}se(pQ,"fromDecimalCode");function Gj(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}se(Gj,"simpleEscapeSequence");function mQ(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}se(mQ,"charFromCodepoint");var gQ=new Array(256),yQ=new Array(256);for(xp=0;xp<256;xp++)gQ[xp]=Gj(xp)?1:0,yQ[xp]=Gj(xp);var xp;function bQ(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||oQ,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}se(bQ,"State$1");function OD(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=Tje(n),new xo(t,n)}se(OD,"generateError");function Mn(e,t){throw OD(e,t)}se(Mn,"throwError");function ow(e,t){e.onWarning&&e.onWarning.call(null,OD(e,t))}se(ow,"throwWarning");var b7={YAML:se(function(t,n,r){var i,s,a;t.version!==null&&Mn(t,"duplication of %YAML directive"),r.length!==1&&Mn(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Mn(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),a=parseInt(i[2],10),s!==1&&Mn(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&ow(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:se(function(t,n,r){var i,s;r.length!==2&&Mn(t,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],uQ.test(i)||Mn(t,"ill-formed tag handle (first argument) of the TAG directive"),yh.call(t.tagMap,i)&&Mn(t,'there is a previously declared suffix for "'+i+'" tag handle'),dQ.test(s)||Mn(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Mn(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s},"handleTagDirective")};function Md(e,t,n,r){var i,s,a,o;if(t<n){if(o=e.input.slice(t,n),r)for(i=0,s=o.length;i<s;i+=1)a=o.charCodeAt(i),a===9||32<=a&&a<=1114111||Mn(e,"expected valid JSON character");else Qje.test(o)&&Mn(e,"the stream contains non-printable characters");e.result+=o}}se(Md,"captureSegment");function Kj(e,t,n,r){var i,s,a,o;for(Bs.isObject(n)||Mn(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,o=i.length;a<o;a+=1)s=i[a],yh.call(t,s)||(t[s]=n[s],r[s]=!0)}se(Kj,"mergeMappings");function Pp(e,t,n,r,i,s,a,o,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&Mn(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Hj(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&Hj(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)Kj(e,t,s[c],n);else Kj(e,t,s,n);else!e.json&&!yh.call(n,i)&&yh.call(t,i)&&(e.line=a||e.line,e.lineStart=o||e.lineStart,e.position=l||e.position,Mn(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete n[i];return t}se(Pp,"storeMappingPair");function oT(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Mn(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}se(oT,"readLineBreak");function ds(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;eh(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(gc(i))for(oT(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&ow(e,"deficient indentation"),r}se(ds,"skipSeparationSpace");function R1(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Ka(n)))}se(R1,"testDocumentSeparator");function lT(e,t){t===1?e.result+=" ":t>1&&(e.result+=Bs.repeat(`
`,t-1))}se(lT,"writeFoldedLines");function vQ(e,t,n){var r,i,s,a,o,l,c,u,d=e.kind,h=e.result,m;if(m=e.input.charCodeAt(e.position),Ka(m)||Op(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(i=e.input.charCodeAt(e.position+1),Ka(i)||n&&Op(i)))return!1;for(e.kind="scalar",e.result="",s=a=e.position,o=!1;m!==0;){if(m===58){if(i=e.input.charCodeAt(e.position+1),Ka(i)||n&&Op(i))break}else if(m===35){if(r=e.input.charCodeAt(e.position-1),Ka(r))break}else{if(e.position===e.lineStart&&R1(e)||n&&Op(m))break;if(gc(m))if(l=e.line,c=e.lineStart,u=e.lineIndent,ds(e,!1,-1),e.lineIndent>=t){o=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=l,e.lineStart=c,e.lineIndent=u;break}}o&&(Md(e,s,a,!1),lT(e,e.line-l),s=a=e.position,o=!1),eh(m)||(a=e.position+1),m=e.input.charCodeAt(++e.position)}return Md(e,s,a,!1),e.result?!0:(e.kind=d,e.result=h,!1)}se(vQ,"readPlainScalar");function xQ(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Md(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else gc(n)?(Md(e,r,i,!0),lT(e,ds(e,!1,t)),r=i=e.position):e.position===e.lineStart&&R1(e)?Mn(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Mn(e,"unexpected end of the stream within a single quoted scalar")}se(xQ,"readSingleQuotedScalar");function wQ(e,t){var n,r,i,s,a,o;if(o=e.input.charCodeAt(e.position),o!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(o=e.input.charCodeAt(e.position))!==0;){if(o===34)return Md(e,n,e.position,!0),e.position++,!0;if(o===92){if(Md(e,n,e.position,!0),o=e.input.charCodeAt(++e.position),gc(o))ds(e,!1,t);else if(o<256&&gQ[o])e.result+=yQ[o],e.position++;else if((a=hQ(o))>0){for(i=a,s=0;i>0;i--)o=e.input.charCodeAt(++e.position),(a=fQ(o))>=0?s=(s<<4)+a:Mn(e,"expected hexadecimal character");e.result+=mQ(s),e.position++}else Mn(e,"unknown escape sequence");n=r=e.position}else gc(o)?(Md(e,n,r,!0),lT(e,ds(e,!1,t)),n=r=e.position):e.position===e.lineStart&&R1(e)?Mn(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Mn(e,"unexpected end of the stream within a double quoted scalar")}se(wQ,"readDoubleQuotedScalar");function _Q(e,t){var n=!0,r,i,s,a=e.tag,o,l=e.anchor,c,u,d,h,m,y=Object.create(null),b,v,x,w;if(w=e.input.charCodeAt(e.position),w===91)u=93,m=!1,o=[];else if(w===123)u=125,m=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),w=e.input.charCodeAt(++e.position);w!==0;){if(ds(e,!0,t),w=e.input.charCodeAt(e.position),w===u)return e.position++,e.tag=a,e.anchor=l,e.kind=m?"mapping":"sequence",e.result=o,!0;n?w===44&&Mn(e,"expected the node content, but found ','"):Mn(e,"missed comma between flow collection entries"),v=b=x=null,d=h=!1,w===63&&(c=e.input.charCodeAt(e.position+1),Ka(c)&&(d=h=!0,e.position++,ds(e,!0,t))),r=e.line,i=e.lineStart,s=e.position,am(e,t,QC,!1,!0),v=e.tag,b=e.result,ds(e,!0,t),w=e.input.charCodeAt(e.position),(h||e.line===r)&&w===58&&(d=!0,w=e.input.charCodeAt(++e.position),ds(e,!0,t),am(e,t,QC,!1,!0),x=e.result),m?Pp(e,o,y,v,b,x,r,i,s):d?o.push(Pp(e,null,y,v,b,x,r,i,s)):o.push(b),ds(e,!0,t),w=e.input.charCodeAt(e.position),w===44?(n=!0,w=e.input.charCodeAt(++e.position)):n=!1}Mn(e,"unexpected end of the stream within a flow collection")}se(_Q,"readFlowCollection");function SQ(e,t){var n,r,i=SI,s=!1,a=!1,o=t,l=0,c=!1,u,d;if(d=e.input.charCodeAt(e.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)SI===i?i=d===43?y7:Jje:Mn(e,"repeat of a chomping mode identifier");else if((u=pQ(d))>=0)u===0?Mn(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Mn(e,"repeat of an indentation width identifier"):(o=t+u-1,a=!0);else break;if(eh(d)){do d=e.input.charCodeAt(++e.position);while(eh(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!gc(d)&&d!==0)}for(;d!==0;){for(oT(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!a||e.lineIndent<o)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>o&&(o=e.lineIndent),gc(d)){l++;continue}if(e.lineIndent<o){i===y7?e.result+=Bs.repeat(`
`,s?1+l:l):i===SI&&s&&(e.result+=`
`);break}for(r?eh(d)?(c=!0,e.result+=Bs.repeat(`
`,s?1+l:l)):c?(c=!1,e.result+=Bs.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=Bs.repeat(`
`,l):e.result+=Bs.repeat(`
`,s?1+l:l),s=!0,a=!0,l=0,n=e.position;!gc(d)&&d!==0;)d=e.input.charCodeAt(++e.position);Md(e,n,e.position,!1)}return!0}se(SQ,"readBlockScalar");function Yj(e,t){var n,r=e.tag,i=e.anchor,s=[],a,o=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Mn(e,"tab characters must not be used in indentation")),!(l!==45||(a=e.input.charCodeAt(e.position+1),!Ka(a))));){if(o=!0,e.position++,ds(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,am(e,t,cQ,!1,!0),s.push(e.result),ds(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)Mn(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return o?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}se(Yj,"readBlockSequence");function CQ(e,t,n){var r,i,s,a,o,l,c=e.tag,u=e.anchor,d={},h=Object.create(null),m=null,y=null,b=null,v=!1,x=!1,w;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),w=e.input.charCodeAt(e.position);w!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Mn(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),s=e.line,(w===63||w===58)&&Ka(r))w===63?(v&&(Pp(e,d,h,m,y,null,a,o,l),m=y=b=null),x=!0,v=!0,i=!0):v?(v=!1,i=!0):Mn(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,w=r;else{if(a=e.line,o=e.lineStart,l=e.position,!am(e,n,lQ,!1,!0))break;if(e.line===s){for(w=e.input.charCodeAt(e.position);eh(w);)w=e.input.charCodeAt(++e.position);if(w===58)w=e.input.charCodeAt(++e.position),Ka(w)||Mn(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Pp(e,d,h,m,y,null,a,o,l),m=y=b=null),x=!0,v=!1,i=!1,m=e.tag,y=e.result;else if(x)Mn(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=u,!0}else if(x)Mn(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=u,!0}if((e.line===s||e.lineIndent>t)&&(v&&(a=e.line,o=e.lineStart,l=e.position),am(e,t,ek,!0,i)&&(v?y=e.result:b=e.result),v||(Pp(e,d,h,m,y,b,a,o,l),m=y=b=null),ds(e,!0,-1),w=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&w!==0)Mn(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&Pp(e,d,h,m,y,null,a,o,l),x&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=d),x}se(CQ,"readBlockMapping");function kQ(e){var t,n=!1,r=!1,i,s,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&Mn(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(n=!0,a=e.input.charCodeAt(++e.position)):a===33?(r=!0,i="!!",a=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(s=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):Mn(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Ka(a);)a===33&&(r?Mn(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),uQ.test(i)||Mn(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),t4e.test(s)&&Mn(e,"tag suffix cannot contain flow indicator characters")}s&&!dQ.test(s)&&Mn(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Mn(e,"tag name is malformed: "+s)}return n?e.tag=s:yh.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:Mn(e,'undeclared tag handle "'+i+'"'),!0}se(kQ,"readTagProperty");function EQ(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&Mn(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Ka(n)&&!Op(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Mn(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}se(EQ,"readAnchorProperty");function TQ(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Ka(r)&&!Op(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Mn(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),yh.call(e.anchorMap,n)||Mn(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],ds(e,!0,-1),!0}se(TQ,"readAlias");function am(e,t,n,r,i){var s,a,o,l=1,c=!1,u=!1,d,h,m,y,b,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=a=o=ek===n||cQ===n,r&&ds(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;kQ(e)||EQ(e);)ds(e,!0,-1)?(c=!0,o=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):o=!1;if(o&&(o=c||i),(l===1||ek===n)&&(QC===n||lQ===n?b=t:b=t+1,v=e.position-e.lineStart,l===1?o&&(Yj(e,v)||CQ(e,v,b))||_Q(e,b)?u=!0:(a&&SQ(e,b)||xQ(e,b)||wQ(e,b)?u=!0:TQ(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&Mn(e,"alias node should not have any properties")):vQ(e,b,QC===n)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(u=o&&Yj(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Mn(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,h=e.implicitTypes.length;d<h;d+=1)if(y=e.implicitTypes[d],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(yh.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,m=e.typeMap.multi[e.kind||"fallback"],d=0,h=m.length;d<h;d+=1)if(e.tag.slice(0,m[d].tag.length)===m[d].tag){y=m[d];break}y||Mn(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&Mn(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Mn(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}se(am,"composeNode");function AQ(e){var t=e.position,n,r,i,s=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(a=e.input.charCodeAt(e.position))!==0&&(ds(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(s=!0,a=e.input.charCodeAt(++e.position),n=e.position;a!==0&&!Ka(a);)a=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&Mn(e,"directive name must not be less than one character in length");a!==0;){for(;eh(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!gc(a));break}if(gc(a))break;for(n=e.position;a!==0&&!Ka(a);)a=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}a!==0&&oT(e),yh.call(b7,r)?b7[r](e,r,i):ow(e,'unknown document directive "'+r+'"')}if(ds(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ds(e,!0,-1)):s&&Mn(e,"directives end mark is expected"),am(e,e.lineIndent-1,ek,!1,!0),ds(e,!0,-1),e.checkLineBreaks&&e4e.test(e.input.slice(t,e.position))&&ow(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&R1(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ds(e,!0,-1));return}if(e.position<e.length-1)Mn(e,"end of the stream or a document separator is expected");else return}se(AQ,"readDocument");function PD(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new bQ(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,Mn(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)AQ(n);return n.documents}se(PD,"loadDocuments");function n4e(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=PD(e,n);if(typeof t!="function")return r;for(var i=0,s=r.length;i<s;i+=1)t(r[i])}se(n4e,"loadAll$1");function RQ(e,t){var n=PD(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new xo("expected a single document in the stream, but found more")}}se(RQ,"load$1");var r4e=RQ,i4e={load:r4e},NQ=Object.prototype.toString,MQ=Object.prototype.hasOwnProperty,DD=65279,s4e=9,lw=10,a4e=13,o4e=32,l4e=33,c4e=34,Zj=35,u4e=37,d4e=38,f4e=39,h4e=42,IQ=44,p4e=45,tk=58,m4e=61,g4e=62,y4e=63,b4e=64,jQ=91,OQ=93,v4e=96,PQ=123,x4e=124,DQ=125,La={};La[0]="\\0";La[7]="\\a";La[8]="\\b";La[9]="\\t";La[10]="\\n";La[11]="\\v";La[12]="\\f";La[13]="\\r";La[27]="\\e";La[34]='\\"';La[92]="\\\\";La[133]="\\N";La[160]="\\_";La[8232]="\\L";La[8233]="\\P";var w4e=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],_4e=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function FQ(e,t){var n,r,i,s,a,o,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,s=r.length;i<s;i+=1)a=r[i],o=String(t[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=e.compiledTypeMap.fallback[a],l&&MQ.call(l.styleAliases,o)&&(o=l.styleAliases[o]),n[a]=o;return n}se(FQ,"compileStyleMap");function LQ(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new xo("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Bs.repeat("0",r-t.length)+t}se(LQ,"encodeHex");var S4e=1,cw=2;function BQ(e){this.schema=e.schema||oQ,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Bs.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=FQ(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?cw:S4e,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}se(BQ,"State");function Xj(e,t){for(var n=Bs.repeat(" ",t),r=0,i=-1,s="",a,o=e.length;r<o;)i=e.indexOf(`
`,r),i===-1?(a=e.slice(r),r=o):(a=e.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(s+=n),s+=a;return s}se(Xj,"indentString");function nk(e,t){return`
`+Bs.repeat(" ",e.indent*t)}se(nk,"generateNextLine");function $Q(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}se($Q,"testImplicitResolving");function uw(e){return e===o4e||e===s4e}se(uw,"isWhitespace");function cy(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==DD||65536<=e&&e<=1114111}se(cy,"isPrintable");function Jj(e){return cy(e)&&e!==DD&&e!==a4e&&e!==lw}se(Jj,"isNsCharOrWhitespace");function Qj(e,t,n){var r=Jj(e),i=r&&!uw(e);return(n?r:r&&e!==IQ&&e!==jQ&&e!==OQ&&e!==PQ&&e!==DQ)&&e!==Zj&&!(t===tk&&!i)||Jj(t)&&!uw(t)&&e===Zj||t===tk&&i}se(Qj,"isPlainSafe");function zQ(e){return cy(e)&&e!==DD&&!uw(e)&&e!==p4e&&e!==y4e&&e!==tk&&e!==IQ&&e!==jQ&&e!==OQ&&e!==PQ&&e!==DQ&&e!==Zj&&e!==d4e&&e!==h4e&&e!==l4e&&e!==x4e&&e!==m4e&&e!==g4e&&e!==f4e&&e!==c4e&&e!==u4e&&e!==b4e&&e!==v4e}se(zQ,"isPlainSafeFirst");function UQ(e){return!uw(e)&&e!==tk}se(UQ,"isPlainSafeLast");function r0(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}se(r0,"codePointAt");function FD(e){var t=/^\n* /;return t.test(e)}se(FD,"needIndentIndicator");var qQ=1,e4=2,VQ=3,WQ=4,Zg=5;function HQ(e,t,n,r,i,s,a,o){var l,c=0,u=null,d=!1,h=!1,m=r!==-1,y=-1,b=zQ(r0(e,0))&&UQ(r0(e,e.length-1));if(t||a)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=r0(e,l),!cy(c))return Zg;b=b&&Qj(c,u,o),u=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=r0(e,l),c===lw)d=!0,m&&(h=h||l-y-1>r&&e[y+1]!==" ",y=l);else if(!cy(c))return Zg;b=b&&Qj(c,u,o),u=c}h=h||m&&l-y-1>r&&e[y+1]!==" "}return!d&&!h?b&&!a&&!i(e)?qQ:s===cw?Zg:e4:n>9&&FD(e)?Zg:a?s===cw?Zg:e4:h?WQ:VQ}se(HQ,"chooseScalarStyle");function GQ(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===cw?'""':"''";if(!e.noCompatMode&&(w4e.indexOf(t)!==-1||_4e.test(t)))return e.quotingType===cw?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,n),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),o=r||e.flowLevel>-1&&n>=e.flowLevel;function l(c){return $Q(e,c)}switch(se(l,"testAmbiguity"),HQ(t,o,e.indent,a,l,e.quotingType,e.forceQuotes&&!r,i)){case qQ:return t;case e4:return"'"+t.replace(/'/g,"''")+"'";case VQ:return"|"+t4(t,e.indent)+n4(Xj(t,s));case WQ:return">"+t4(t,e.indent)+n4(Xj(KQ(t,a),s));case Zg:return'"'+YQ(t)+'"';default:throw new xo("impossible error: invalid scalar style")}}()}se(GQ,"writeScalar");function t4(e,t){var n=FD(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),s=i?"+":r?"":"-";return n+s+`
`}se(t4,"blockHeader");function n4(e){return e[e.length-1]===`
`?e.slice(0,-1):e}se(n4,"dropEndingNewline");function KQ(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,n.lastIndex=c,r4(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,a;a=n.exec(e);){var o=a[1],l=a[2];s=l[0]===" ",r+=o+(!i&&!s&&l!==""?`
`:"")+r4(l,t),i=s}return r}se(KQ,"foldString");function r4(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,s,a=0,o=0,l="";r=n.exec(e);)o=r.index,o-i>t&&(s=a>i?a:o,l+=`
`+e.slice(i,s),i=s+1),a=o;return l+=`
`,e.length-i>t&&a>i?l+=e.slice(i,a)+`
`+e.slice(a+1):l+=e.slice(i),l.slice(1)}se(r4,"foldLine");function YQ(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=r0(e,i),r=La[n],!r&&cy(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||LQ(n);return t}se(YQ,"escapeString");function ZQ(e,t,n){var r="",i=e.tag,s,a,o;for(s=0,a=n.length;s<a;s+=1)o=n[s],e.replacer&&(o=e.replacer.call(n,String(s),o)),(Tu(e,t,o,!1,!1)||typeof o>"u"&&Tu(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}se(ZQ,"writeFlowSequence");function i4(e,t,n,r){var i="",s=e.tag,a,o,l;for(a=0,o=n.length;a<o;a+=1)l=n[a],e.replacer&&(l=e.replacer.call(n,String(a),l)),(Tu(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&Tu(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=nk(e,t)),e.dump&&lw===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}se(i4,"writeBlockSequence");function XQ(e,t,n){var r="",i=e.tag,s=Object.keys(n),a,o,l,c,u;for(a=0,o=s.length;a<o;a+=1)u="",r!==""&&(u+=", "),e.condenseFlow&&(u+='"'),l=s[a],c=n[l],e.replacer&&(c=e.replacer.call(n,l,c)),Tu(e,t,l,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Tu(e,t,c,!1,!1)&&(u+=e.dump,r+=u));e.tag=i,e.dump="{"+r+"}"}se(XQ,"writeFlowMapping");function JQ(e,t,n,r){var i="",s=e.tag,a=Object.keys(n),o,l,c,u,d,h;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new xo("sortKeys must be a boolean or a function");for(o=0,l=a.length;o<l;o+=1)h="",(!r||i!=="")&&(h+=nk(e,t)),c=a[o],u=n[c],e.replacer&&(u=e.replacer.call(n,c,u)),Tu(e,t+1,c,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&lw===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,d&&(h+=nk(e,t)),Tu(e,t+1,u,!0,d)&&(e.dump&&lw===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,i+=h));e.tag=s,e.dump=i||"{}"}se(JQ,"writeBlockMapping");function s4(e,t,n){var r,i,s,a,o,l;for(i=n?e.explicitTypes:e.implicitTypes,s=0,a=i.length;s<a;s+=1)if(o=i[s],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof t=="object"&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(n?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(l=e.styleMap[o.tag]||o.defaultStyle,NQ.call(o.represent)==="[object Function]")r=o.represent(t,l);else if(MQ.call(o.represent,l))r=o.represent[l](t,l);else throw new xo("!<"+o.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}se(s4,"detectType");function Tu(e,t,n,r,i,s,a){e.tag=null,e.dump=n,s4(e,n,!1)||s4(e,n,!0);var o=NQ.call(e.dump),l=r,c;r&&(r=e.flowLevel<0||e.flowLevel>t);var u=o==="[object Object]"||o==="[object Array]",d,h;if(u&&(d=e.duplicates.indexOf(n),h=d!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(i=!1),h&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(u&&h&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),o==="[object Object]")r&&Object.keys(e.dump).length!==0?(JQ(e,t,e.dump,i),h&&(e.dump="&ref_"+d+e.dump)):(XQ(e,t,e.dump),h&&(e.dump="&ref_"+d+" "+e.dump));else if(o==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!a&&t>0?i4(e,t-1,e.dump,i):i4(e,t,e.dump,i),h&&(e.dump="&ref_"+d+e.dump)):(ZQ(e,t,e.dump),h&&(e.dump="&ref_"+d+" "+e.dump));else if(o==="[object String]")e.tag!=="?"&&GQ(e,e.dump,t,s,l);else{if(o==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new xo("unacceptable kind of an object to dump "+o)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}se(Tu,"writeNode");function QQ(e,t){var n=[],r=[],i,s;for(rk(e,n,r),i=0,s=r.length;i<s;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(s)}se(QQ,"getDuplicateReferences");function rk(e,t,n){var r,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)rk(e[i],t,n);else for(r=Object.keys(e),i=0,s=r.length;i<s;i+=1)rk(e[r[i]],t,n)}se(rk,"inspectNode");function C4e(e,t){t=t||{};var n=new BQ(t);n.noRefs||QQ(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Tu(n,0,r,!0,!0)?n.dump+`
`:""}se(C4e,"dump$1");function k4e(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}se(k4e,"renamed");var E4e=VJ,T4e=i4e.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Tl={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function zv(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=qi(e),t=qi(t);const[n,r]=[e.x,e.y],[i,s]=[t.x,t.y],a=i-n,o=s-r;return{angle:Math.atan(o/a),deltaX:a,deltaY:o}}se(zv,"calculateDeltaAndAngle");var qi=se(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),A4e=se(e=>({x:se(function(t,n,r){let i=0;const s=qi(r[0]).x<qi(r[r.length-1]).x?"left":"right";if(n===0&&Object.hasOwn(Tl,e.arrowTypeStart)){const{angle:m,deltaX:y}=zv(r[0],r[1]);i=Tl[e.arrowTypeStart]*Math.cos(m)*(y>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(Tl,e.arrowTypeEnd)){const{angle:m,deltaX:y}=zv(r[r.length-1],r[r.length-2]);i=Tl[e.arrowTypeEnd]*Math.cos(m)*(y>=0?1:-1)}const a=Math.abs(qi(t).x-qi(r[r.length-1]).x),o=Math.abs(qi(t).y-qi(r[r.length-1]).y),l=Math.abs(qi(t).x-qi(r[0]).x),c=Math.abs(qi(t).y-qi(r[0]).y),u=Tl[e.arrowTypeStart],d=Tl[e.arrowTypeEnd],h=1;if(a<d&&a>0&&o<d){let m=d+h-a;m*=s==="right"?-1:1,i-=m}if(l<u&&l>0&&c<u){let m=u+h-l;m*=s==="right"?-1:1,i+=m}return qi(t).x+i},"x"),y:se(function(t,n,r){let i=0;const s=qi(r[0]).y<qi(r[r.length-1]).y?"down":"up";if(n===0&&Object.hasOwn(Tl,e.arrowTypeStart)){const{angle:m,deltaY:y}=zv(r[0],r[1]);i=Tl[e.arrowTypeStart]*Math.abs(Math.sin(m))*(y>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(Tl,e.arrowTypeEnd)){const{angle:m,deltaY:y}=zv(r[r.length-1],r[r.length-2]);i=Tl[e.arrowTypeEnd]*Math.abs(Math.sin(m))*(y>=0?1:-1)}const a=Math.abs(qi(t).y-qi(r[r.length-1]).y),o=Math.abs(qi(t).x-qi(r[r.length-1]).x),l=Math.abs(qi(t).y-qi(r[0]).y),c=Math.abs(qi(t).x-qi(r[0]).x),u=Tl[e.arrowTypeStart],d=Tl[e.arrowTypeEnd],h=1;if(a<d&&a>0&&o<d){let m=d+h-a;m*=s==="up"?-1:1,i-=m}if(l<u&&l>0&&c<u){let m=u+h-l;m*=s==="up"?-1:1,i+=m}return qi(t).y+i},"y")}),"getLineFunctionsWithOffset"),LD=se(({flowchart:e})=>{var i,s;const t=((i=e==null?void 0:e.subGraphTitleMargin)==null?void 0:i.top)??0,n=((s=e==null?void 0:e.subGraphTitleMargin)==null?void 0:s.bottom)??0,r=t+n;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:r}},"getSubGraphTitleMargins");const R4e=Object.freeze({left:0,top:0,width:16,height:16}),ik=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),eee=Object.freeze({...R4e,...ik}),N4e=Object.freeze({...eee,body:"",hidden:!1}),M4e=Object.freeze({width:null,height:null}),I4e=Object.freeze({...M4e,...ik}),j4e=(e,t,n,r="")=>{const i=e.split(":");if(e.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const o=i.pop(),l=i.pop(),c={provider:i.length>0?i[0]:r,prefix:l,name:o};return CI(c)?c:null}const s=i[0],a=s.split("-");if(a.length>1){const o={provider:r,prefix:a.shift(),name:a.join("-")};return CI(o)?o:null}if(n&&r===""){const o={provider:r,prefix:"",name:s};return CI(o,n)?o:null}return null},CI=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function O4e(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const r=((e.rotate||0)+(t.rotate||0))%4;return r&&(n.rotate=r),n}function v7(e,t){const n=O4e(e,t);for(const r in N4e)r in ik?r in e&&!(r in n)&&(n[r]=ik[r]):r in t?n[r]=t[r]:r in e&&(n[r]=e[r]);return n}function P4e(e,t){const n=e.icons,r=e.aliases||Object.create(null),i=Object.create(null);function s(a){if(n[a])return i[a]=[];if(!(a in i)){i[a]=null;const o=r[a]&&r[a].parent,l=o&&s(o);l&&(i[a]=[o].concat(l))}return i[a]}return(t||Object.keys(n).concat(Object.keys(r))).forEach(s),i}function x7(e,t,n){const r=e.icons,i=e.aliases||Object.create(null);let s={};function a(o){s=v7(r[o]||i[o],s)}return a(t),n.forEach(a),v7(e,s)}function D4e(e,t){if(e.icons[t])return x7(e,t,[]);const n=P4e(e,[t])[t];return n?x7(e,t,n):null}const F4e=/(-?[0-9.]*[0-9]+[0-9.]*)/g,L4e=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function w7(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const r=e.split(F4e);if(r===null||!r.length)return e;const i=[];let s=r.shift(),a=L4e.test(s);for(;;){if(a){const o=parseFloat(s);isNaN(o)?i.push(s):i.push(Math.ceil(o*t*n)/n)}else i.push(s);if(s=r.shift(),s===void 0)return i.join("");a=!a}}function B4e(e,t="defs"){let n="";const r=e.indexOf("<"+t);for(;r>=0;){const i=e.indexOf(">",r),s=e.indexOf("</"+t);if(i===-1||s===-1)break;const a=e.indexOf(">",s);if(a===-1)break;n+=e.slice(i+1,s).trim(),e=e.slice(0,r).trim()+e.slice(a+1)}return{defs:n,content:e}}function $4e(e,t){return e?"<defs>"+e+"</defs>"+t:t}function z4e(e,t,n){const r=B4e(e);return $4e(r.defs,t+r.content+n)}const U4e=e=>e==="unset"||e==="undefined"||e==="none";function q4e(e,t){const n={...eee,...e},r={...I4e,...t},i={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(b=>{const v=[],x=b.hFlip,w=b.vFlip;let S=b.rotate;x?w?S+=2:(v.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),v.push("scale(-1 1)"),i.top=i.left=0):w&&(v.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),v.push("scale(1 -1)"),i.top=i.left=0);let C;switch(S<0&&(S-=Math.floor(S/4)*4),S=S%4,S){case 1:C=i.height/2+i.top,v.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:v.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:C=i.width/2+i.left,v.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}S%2===1&&(i.left!==i.top&&(C=i.left,i.left=i.top,i.top=C),i.width!==i.height&&(C=i.width,i.width=i.height,i.height=C)),v.length&&(s=z4e(s,'<g transform="'+v.join(" ")+'">',"</g>"))});const a=r.width,o=r.height,l=i.width,c=i.height;let u,d;a===null?(d=o===null?"1em":o==="auto"?c:o,u=w7(d,l/c)):(u=a==="auto"?l:a,d=o===null?w7(u,c/l):o==="auto"?c:o);const h={},m=(b,v)=>{U4e(v)||(h[b]=v.toString())};m("width",u),m("height",d);const y=[i.left,i.top,l,c];return h.viewBox=y.join(" "),{attributes:h,viewBox:y,body:s}}const V4e=/\sid="(\S+)"/g,W4e="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let H4e=0;function G4e(e,t=W4e){const n=[];let r;for(;r=V4e.exec(e);)n.push(r[1]);if(!n.length)return e;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const a=typeof t=="function"?t(s):t+(H4e++).toString(),o=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+a+i+"$3")}),e=e.replace(new RegExp(i,"g"),""),e}function K4e(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in t)n+=" "+r+'="'+t[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}var Y4e={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},a4=new Map,tee=new Map,Z4e=se(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if($t.debug("Registering icon pack:",t.name),"loader"in t)tee.set(t.name,t.loader);else if("icons"in t)a4.set(t.name,t.icons);else throw $t.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),X4e=se(async(e,t)=>{const n=j4e(e,!0,t!==void 0);if(!n)throw new Error(`Invalid icon name: ${e}`);const r=n.prefix||t;if(!r)throw new Error(`Icon name must contain a prefix: ${e}`);let i=a4.get(r);if(!i){const a=tee.get(r);if(!a)throw new Error(`Icon set not found: ${n.prefix}`);try{i={...await a(),prefix:r},a4.set(r,i)}catch(o){throw $t.error(o),new Error(`Failed to load icon set: ${n.prefix}`)}}const s=D4e(i,n.name);if(!s)throw new Error(`Icon not found: ${e}`);return s},"getRegisteredIconData"),cT=se(async(e,t)=>{let n;try{n=await X4e(e,t==null?void 0:t.fallbackPrefix)}catch(s){$t.error(s),n=Y4e}const r=q4e(n,t);return K4e(G4e(r.body),r.attributes)},"getIconSVG"),Tv={},Ds={},_7;function J4e(){return _7||(_7=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.BLANK_URL=Ds.relativeFirstCharacters=Ds.whitespaceEscapeCharsRegex=Ds.urlSchemeRegex=Ds.ctrlCharactersRegex=Ds.htmlCtrlEntityRegex=Ds.htmlEntitiesRegex=Ds.invalidProtocolRegex=void 0,Ds.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Ds.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Ds.htmlCtrlEntityRegex=/&(newline|tab);/gi,Ds.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Ds.urlSchemeRegex=/^.+(:|&colon;)/gim,Ds.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Ds.relativeFirstCharacters=[".","/"],Ds.BLANK_URL="about:blank"),Ds}var S7;function Q4e(){if(S7)return Tv;S7=1,Object.defineProperty(Tv,"__esModule",{value:!0}),Tv.sanitizeUrl=void 0;var e=J4e();function t(a){return e.relativeFirstCharacters.indexOf(a[0])>-1}function n(a){var o=a.replace(e.ctrlCharactersRegex,"");return o.replace(e.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function r(a){return URL.canParse(a)}function i(a){try{return decodeURIComponent(a)}catch{return a}}function s(a){if(!a)return e.BLANK_URL;var o,l=i(a.trim());do l=n(l).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),l=i(l),o=l.match(e.ctrlCharactersRegex)||l.match(e.htmlEntitiesRegex)||l.match(e.htmlCtrlEntityRegex)||l.match(e.whitespaceEscapeCharsRegex);while(o&&o.length>0);var c=l;if(!c)return e.BLANK_URL;if(t(c))return c;var u=c.trimStart(),d=u.match(e.urlSchemeRegex);if(!d)return c;var h=d[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(h))return e.BLANK_URL;var m=u.replace(/\\/g,"/");if(h==="mailto:"||h.includes("://"))return m;if(h==="http:"||h==="https:"){if(!r(m))return e.BLANK_URL;var y=new URL(m);return y.protocol=y.protocol.toLowerCase(),y.hostname=y.hostname.toLowerCase(),y.toString()}return m}return Tv.sanitizeUrl=s,Tv}var eOe=Q4e(),tOe={value:()=>{}};function nee(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new S2(n)}function S2(e){this._=e}function nOe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}S2.prototype=nee.prototype={constructor:S2,on:function(e,t){var n=this._,r=nOe(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=rOe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=C7(n[i],e.name,t);else if(t==null)for(i in n)n[i]=C7(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new S2(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function rOe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function C7(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=tOe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var o4="http://www.w3.org/1999/xhtml";const k7={svg:"http://www.w3.org/2000/svg",xhtml:o4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uT(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),k7.hasOwnProperty(t)?{space:k7[t],local:e}:e}function iOe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===o4&&t.documentElement.namespaceURI===o4?t.createElement(e):t.createElementNS(n,e)}}function sOe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ree(e){var t=uT(e);return(t.local?sOe:iOe)(t)}function aOe(){}function BD(e){return e==null?aOe:function(){return this.querySelector(e)}}function oOe(e){typeof e!="function"&&(e=BD(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new il(r,this._parents)}function lOe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cOe(){return[]}function iee(e){return e==null?cOe:function(){return this.querySelectorAll(e)}}function uOe(e){return function(){return lOe(e.apply(this,arguments))}}function dOe(e){typeof e=="function"?e=uOe(e):e=iee(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),i.push(l));return new il(r,i)}function see(e){return function(){return this.matches(e)}}function aee(e){return function(t){return t.matches(e)}}var fOe=Array.prototype.find;function hOe(e){return function(){return fOe.call(this.children,e)}}function pOe(){return this.firstElementChild}function mOe(e){return this.select(e==null?pOe:hOe(typeof e=="function"?e:aee(e)))}var gOe=Array.prototype.filter;function yOe(){return Array.from(this.children)}function bOe(e){return function(){return gOe.call(this.children,e)}}function vOe(e){return this.selectAll(e==null?yOe:bOe(typeof e=="function"?e:aee(e)))}function xOe(e){typeof e!="function"&&(e=see(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new il(r,this._parents)}function oee(e){return new Array(e.length)}function wOe(){return new il(this._enter||this._groups.map(oee),this._parents)}function sk(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sk.prototype={constructor:sk,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _Oe(e){return function(){return e}}function SOe(e,t,n,r,i,s){for(var a=0,o,l=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new sk(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function COe(e,t,n,r,i,s,a){var o,l,c=new Map,u=t.length,d=s.length,h=new Array(u),m;for(o=0;o<u;++o)(l=t[o])&&(h[o]=m=a.call(l,l.__data__,o,t)+"",c.has(m)?i[o]=l:c.set(m,l));for(o=0;o<d;++o)m=a.call(e,s[o],o,s)+"",(l=c.get(m))?(r[o]=l,l.__data__=s[o],c.delete(m)):n[o]=new sk(e,s[o]);for(o=0;o<u;++o)(l=t[o])&&c.get(h[o])===l&&(i[o]=l)}function kOe(e){return e.__data__}function EOe(e,t){if(!arguments.length)return Array.from(this,kOe);var n=t?COe:SOe,r=this._parents,i=this._groups;typeof e!="function"&&(e=_Oe(e));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],d=i[c],h=d.length,m=TOe(e.call(u,u&&u.__data__,c,r)),y=m.length,b=o[c]=new Array(y),v=a[c]=new Array(y),x=l[c]=new Array(h);n(u,d,b,v,x,m,t);for(var w=0,S=0,C,k;w<y;++w)if(C=b[w]){for(w>=S&&(S=w+1);!(k=v[S])&&++S<y;);C._next=k||null}}return a=new il(a,r),a._enter=o,a._exit=l,a}function TOe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function AOe(){return new il(this._exit||this._groups.map(oee),this._parents)}function ROe(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function NOe(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],d=c.length,h=o[l]=new Array(d),m,y=0;y<d;++y)(m=c[y]||u[y])&&(h[y]=m);for(;l<i;++l)o[l]=n[l];return new il(o,this._parents)}function MOe(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function IOe(e){e||(e=jOe);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new il(i,this._parents).order()}function jOe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function OOe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function POe(){return Array.from(this)}function DOe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function FOe(){let e=0;for(const t of this)++e;return e}function LOe(){return!this.node()}function BOe(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function $Oe(e){return function(){this.removeAttribute(e)}}function zOe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function UOe(e,t){return function(){this.setAttribute(e,t)}}function qOe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function VOe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function WOe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function HOe(e,t){var n=uT(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?zOe:$Oe:typeof t=="function"?n.local?WOe:VOe:n.local?qOe:UOe)(n,t))}function lee(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function GOe(e){return function(){this.style.removeProperty(e)}}function KOe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function YOe(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ZOe(e,t,n){return arguments.length>1?this.each((t==null?GOe:typeof t=="function"?YOe:KOe)(e,t,n??"")):uy(this.node(),e)}function uy(e,t){return e.style.getPropertyValue(t)||lee(e).getComputedStyle(e,null).getPropertyValue(t)}function XOe(e){return function(){delete this[e]}}function JOe(e,t){return function(){this[e]=t}}function QOe(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ePe(e,t){return arguments.length>1?this.each((t==null?XOe:typeof t=="function"?QOe:JOe)(e,t)):this.node()[e]}function cee(e){return e.trim().split(/^|\s+/)}function $D(e){return e.classList||new uee(e)}function uee(e){this._node=e,this._names=cee(e.getAttribute("class")||"")}uee.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function dee(e,t){for(var n=$D(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function fee(e,t){for(var n=$D(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function tPe(e){return function(){dee(this,e)}}function nPe(e){return function(){fee(this,e)}}function rPe(e,t){return function(){(t.apply(this,arguments)?dee:fee)(this,e)}}function iPe(e,t){var n=cee(e+"");if(arguments.length<2){for(var r=$D(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?rPe:t?tPe:nPe)(n,t))}function sPe(){this.textContent=""}function aPe(e){return function(){this.textContent=e}}function oPe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lPe(e){return arguments.length?this.each(e==null?sPe:(typeof e=="function"?oPe:aPe)(e)):this.node().textContent}function cPe(){this.innerHTML=""}function uPe(e){return function(){this.innerHTML=e}}function dPe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fPe(e){return arguments.length?this.each(e==null?cPe:(typeof e=="function"?dPe:uPe)(e)):this.node().innerHTML}function hPe(){this.nextSibling&&this.parentNode.appendChild(this)}function pPe(){return this.each(hPe)}function mPe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gPe(){return this.each(mPe)}function yPe(e){var t=typeof e=="function"?e:ree(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bPe(){return null}function vPe(e,t){var n=typeof e=="function"?e:ree(e),r=t==null?bPe:typeof t=="function"?t:BD(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xPe(){var e=this.parentNode;e&&e.removeChild(this)}function wPe(){return this.each(xPe)}function _Pe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function SPe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function CPe(e){return this.select(e?SPe:_Pe)}function kPe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function EPe(e){return function(t){e.call(this,t,this.__data__)}}function TPe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function APe(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function RPe(e,t,n){return function(){var r=this.__on,i,s=EPe(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function NPe(e,t,n){var r=TPe(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?RPe:APe,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function hee(e,t,n){var r=lee(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function MPe(e,t){return function(){return hee(this,e,t)}}function IPe(e,t){return function(){return hee(this,e,t.apply(this,arguments))}}function jPe(e,t){return this.each((typeof t=="function"?IPe:MPe)(e,t))}function*OPe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var pee=[null];function il(e,t){this._groups=e,this._parents=t}function N1(){return new il([[document.documentElement]],pee)}function PPe(){return this}il.prototype=N1.prototype={constructor:il,select:oOe,selectAll:dOe,selectChild:mOe,selectChildren:vOe,filter:xOe,data:EOe,enter:wOe,exit:AOe,join:ROe,merge:NOe,selection:PPe,order:MOe,sort:IOe,call:OOe,nodes:POe,node:DOe,size:FOe,empty:LOe,each:BOe,attr:HOe,style:ZOe,property:ePe,classed:iPe,text:lPe,html:fPe,raise:pPe,lower:gPe,append:yPe,insert:vPe,remove:wPe,clone:CPe,datum:kPe,on:NPe,dispatch:jPe,[Symbol.iterator]:OPe};function Wr(e){return typeof e=="string"?new il([[document.querySelector(e)]],[document.documentElement]):new il([[e]],pee)}function zD(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mee(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function M1(){}var dw=.7,ak=1/dw,v0="\\s*([+-]?\\d+)\\s*",fw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DPe=/^#([0-9a-f]{3,8})$/,FPe=new RegExp(`^rgb\\(${v0},${v0},${v0}\\)$`),LPe=new RegExp(`^rgb\\(${gu},${gu},${gu}\\)$`),BPe=new RegExp(`^rgba\\(${v0},${v0},${v0},${fw}\\)$`),$Pe=new RegExp(`^rgba\\(${gu},${gu},${gu},${fw}\\)$`),zPe=new RegExp(`^hsl\\(${fw},${gu},${gu}\\)$`),UPe=new RegExp(`^hsla\\(${fw},${gu},${gu},${fw}\\)$`),E7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zD(M1,hw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:T7,formatHex:T7,formatHex8:qPe,formatHsl:VPe,formatRgb:A7,toString:A7});function T7(){return this.rgb().formatHex()}function qPe(){return this.rgb().formatHex8()}function VPe(){return gee(this).formatHsl()}function A7(){return this.rgb().formatRgb()}function hw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=DPe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?R7(t):n===3?new wo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?MS(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?MS(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=FPe.exec(e))?new wo(t[1],t[2],t[3],1):(t=LPe.exec(e))?new wo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=BPe.exec(e))?MS(t[1],t[2],t[3],t[4]):(t=$Pe.exec(e))?MS(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zPe.exec(e))?I7(t[1],t[2]/100,t[3]/100,1):(t=UPe.exec(e))?I7(t[1],t[2]/100,t[3]/100,t[4]):E7.hasOwnProperty(e)?R7(E7[e]):e==="transparent"?new wo(NaN,NaN,NaN,0):null}function R7(e){return new wo(e>>16&255,e>>8&255,e&255,1)}function MS(e,t,n,r){return r<=0&&(e=t=n=NaN),new wo(e,t,n,r)}function WPe(e){return e instanceof M1||(e=hw(e)),e?(e=e.rgb(),new wo(e.r,e.g,e.b,e.opacity)):new wo}function l4(e,t,n,r){return arguments.length===1?WPe(e):new wo(e,t,n,r??1)}function wo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zD(wo,l4,mee(M1,{brighter(e){return e=e==null?ak:Math.pow(ak,e),new wo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dw:Math.pow(dw,e),new wo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wo(Up(this.r),Up(this.g),Up(this.b),ok(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N7,formatHex:N7,formatHex8:HPe,formatRgb:M7,toString:M7}));function N7(){return`#${Dp(this.r)}${Dp(this.g)}${Dp(this.b)}`}function HPe(){return`#${Dp(this.r)}${Dp(this.g)}${Dp(this.b)}${Dp((isNaN(this.opacity)?1:this.opacity)*255)}`}function M7(){const e=ok(this.opacity);return`${e===1?"rgb(":"rgba("}${Up(this.r)}, ${Up(this.g)}, ${Up(this.b)}${e===1?")":`, ${e})`}`}function ok(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Up(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dp(e){return e=Up(e),(e<16?"0":"")+e.toString(16)}function I7(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new lc(e,t,n,r)}function gee(e){if(e instanceof lc)return new lc(e.h,e.s,e.l,e.opacity);if(e instanceof M1||(e=hw(e)),!e)return new lc;if(e instanceof lc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new lc(a,o,l,e.opacity)}function GPe(e,t,n,r){return arguments.length===1?gee(e):new lc(e,t,n,r??1)}function lc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zD(lc,GPe,mee(M1,{brighter(e){return e=e==null?ak:Math.pow(ak,e),new lc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dw:Math.pow(dw,e),new lc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new wo(kI(e>=240?e-240:e+120,i,r),kI(e,i,r),kI(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new lc(j7(this.h),IS(this.s),IS(this.l),ok(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ok(this.opacity);return`${e===1?"hsl(":"hsla("}${j7(this.h)}, ${IS(this.s)*100}%, ${IS(this.l)*100}%${e===1?")":`, ${e})`}`}}));function j7(e){return e=(e||0)%360,e<0?e+360:e}function IS(e){return Math.max(0,Math.min(1,e||0))}function kI(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const UD=e=>()=>e;function yee(e,t){return function(n){return e+n*t}}function KPe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Idt(e,t){var n=t-e;return n?yee(e,n>180||n<-180?n-360*Math.round(n/360):n):UD(isNaN(e)?t:e)}function YPe(e){return(e=+e)==1?bee:function(t,n){return n-t?KPe(t,n,e):UD(isNaN(t)?n:t)}}function bee(e,t){var n=t-e;return n?yee(e,n):UD(isNaN(e)?t:e)}const O7=function e(t){var n=YPe(t);function r(i,s){var a=n((i=l4(i)).r,(s=l4(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=bee(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function Gf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var c4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,EI=new RegExp(c4.source,"g");function ZPe(e){return function(){return e}}function XPe(e){return function(t){return e(t)+""}}function JPe(e,t){var n=c4.lastIndex=EI.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=c4.exec(e))&&(i=EI.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Gf(r,i)})),n=EI.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?XPe(l[0].x):ZPe(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)o[(d=l[u]).i]=d.x(c);return o.join("")})}var P7=180/Math.PI,u4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vee(e,t,n,r,i,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*P7,skewX:Math.atan(l)*P7,scaleX:a,scaleY:o}}var jS;function QPe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?u4:vee(t.a,t.b,t.c,t.d,t.e,t.f)}function eDe(e){return e==null||(jS||(jS=document.createElementNS("http://www.w3.org/2000/svg","g")),jS.setAttribute("transform",e),!(e=jS.transform.baseVal.consolidate()))?u4:(e=e.matrix,vee(e.a,e.b,e.c,e.d,e.e,e.f))}function xee(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,d,h,m,y){if(c!==d||u!==h){var b=m.push("translate(",null,t,null,n);y.push({i:b-4,x:Gf(c,d)},{i:b-2,x:Gf(u,h)})}else(d||h)&&m.push("translate("+d+t+h+n)}function a(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Gf(c,u)})):u&&d.push(i(d)+"rotate("+u+r)}function o(c,u,d,h){c!==u?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Gf(c,u)}):u&&d.push(i(d)+"skewX("+u+r)}function l(c,u,d,h,m,y){if(c!==d||u!==h){var b=m.push(i(m)+"scale(",null,",",null,")");y.push({i:b-4,x:Gf(c,d)},{i:b-2,x:Gf(u,h)})}else(d!==1||h!==1)&&m.push(i(m)+"scale("+d+","+h+")")}return function(c,u){var d=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,d,h),a(c.rotate,u.rotate,d,h),o(c.skewX,u.skewX,d,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(m){for(var y=-1,b=h.length,v;++y<b;)d[(v=h[y]).i]=v.x(m);return d.join("")}}}var tDe=xee(QPe,"px, ","px)","deg)"),nDe=xee(eDe,", ",")",")"),dy=0,Uv=0,Av=0,wee=1e3,lk,qv,ck=0,om=0,dT=0,pw=typeof performance=="object"&&performance.now?performance:Date,_ee=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qD(){return om||(_ee(rDe),om=pw.now()+dT)}function rDe(){om=0}function uk(){this._call=this._time=this._next=null}uk.prototype=See.prototype={constructor:uk,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?qD():+n)+(t==null?0:+t),!this._next&&qv!==this&&(qv?qv._next=this:lk=this,qv=this),this._call=e,this._time=n,d4()},stop:function(){this._call&&(this._call=null,this._time=1/0,d4())}};function See(e,t,n){var r=new uk;return r.restart(e,t,n),r}function iDe(){qD(),++dy;for(var e=lk,t;e;)(t=om-e._time)>=0&&e._call.call(void 0,t),e=e._next;--dy}function D7(){om=(ck=pw.now())+dT,dy=Uv=0;try{iDe()}finally{dy=0,aDe(),om=0}}function sDe(){var e=pw.now(),t=e-ck;t>wee&&(dT-=t,ck=e)}function aDe(){for(var e,t=lk,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:lk=n);qv=e,d4(r)}function d4(e){if(!dy){Uv&&(Uv=clearTimeout(Uv));var t=e-om;t>24?(e<1/0&&(Uv=setTimeout(D7,e-pw.now()-dT)),Av&&(Av=clearInterval(Av))):(Av||(ck=pw.now(),Av=setInterval(sDe,wee)),dy=1,_ee(D7))}}function F7(e,t,n){var r=new uk;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var oDe=nee("start","end","cancel","interrupt"),lDe=[],Cee=0,L7=1,f4=2,C2=3,B7=4,h4=5,k2=6;function fT(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;cDe(e,n,{name:t,index:r,group:i,on:oDe,tween:lDe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Cee})}function VD(e,t){var n=Mc(e,t);if(n.state>Cee)throw new Error("too late; already scheduled");return n}function Iu(e,t){var n=Mc(e,t);if(n.state>C2)throw new Error("too late; already running");return n}function Mc(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cDe(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=See(s,0,n.time);function s(c){n.state=L7,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,d,h,m;if(n.state!==L7)return l();for(u in r)if(m=r[u],m.name===n.name){if(m.state===C2)return F7(a);m.state===B7?(m.state=k2,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[u]):+u<t&&(m.state=k2,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[u])}if(F7(function(){n.state===C2&&(n.state=B7,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=f4,n.on.call("start",e,e.__data__,n.index,n.group),n.state===f4){for(n.state=C2,i=new Array(h=n.tween.length),u=0,d=-1;u<h;++u)(m=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=m);i.length=d+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=h4,1),d=-1,h=i.length;++d<h;)i[d].call(e,u);n.state===h4&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=k2,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function uDe(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>f4&&r.state<h4,r.state=k2,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function dDe(e){return this.each(function(){uDe(this,e)})}function fDe(e,t){var n,r;return function(){var i=Iu(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function hDe(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Iu(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function pDe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Mc(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?fDe:hDe)(n,e,t))}function WD(e,t,n){var r=e._id;return e.each(function(){var i=Iu(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Mc(i,r).value[t]}}function kee(e,t){var n;return(typeof t=="number"?Gf:t instanceof hw?O7:(n=hw(t))?(t=n,O7):JPe)(e,t)}function mDe(e){return function(){this.removeAttribute(e)}}function gDe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yDe(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function bDe(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function vDe(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function xDe(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function wDe(e,t){var n=uT(e),r=n==="transform"?nDe:kee;return this.attrTween(e,typeof t=="function"?(n.local?xDe:vDe)(n,r,WD(this,"attr."+e,t)):t==null?(n.local?gDe:mDe)(n):(n.local?bDe:yDe)(n,r,t))}function _De(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function SDe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function CDe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&SDe(e,s)),n}return i._value=t,i}function kDe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&_De(e,s)),n}return i._value=t,i}function EDe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=uT(e);return this.tween(n,(r.local?CDe:kDe)(r,t))}function TDe(e,t){return function(){VD(this,e).delay=+t.apply(this,arguments)}}function ADe(e,t){return t=+t,function(){VD(this,e).delay=t}}function RDe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?TDe:ADe)(t,e)):Mc(this.node(),t).delay}function NDe(e,t){return function(){Iu(this,e).duration=+t.apply(this,arguments)}}function MDe(e,t){return t=+t,function(){Iu(this,e).duration=t}}function IDe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?NDe:MDe)(t,e)):Mc(this.node(),t).duration}function jDe(e,t){if(typeof t!="function")throw new Error;return function(){Iu(this,e).ease=t}}function ODe(e){var t=this._id;return arguments.length?this.each(jDe(t,e)):Mc(this.node(),t).ease}function PDe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Iu(this,e).ease=n}}function DDe(e){if(typeof e!="function")throw new Error;return this.each(PDe(this._id,e))}function FDe(e){typeof e!="function"&&(e=see(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new Bd(r,this._parents,this._name,this._id)}function LDe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=t[o],c=n[o],u=l.length,d=a[o]=new Array(u),h,m=0;m<u;++m)(h=l[m]||c[m])&&(d[m]=h);for(;o<r;++o)a[o]=t[o];return new Bd(a,this._parents,this._name,this._id)}function BDe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function $De(e,t,n){var r,i,s=BDe(t)?VD:Iu;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function zDe(e,t){var n=this._id;return arguments.length<2?Mc(this.node(),n).on.on(e):this.each($De(n,e,t))}function UDe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function qDe(){return this.on("end.remove",UDe(this._id))}function VDe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=BD(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,d,h=0;h<l;++h)(u=o[h])&&(d=e.call(u,u.__data__,h,o))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,fT(c[h],t,n,h,c,Mc(u,n)));return new Bd(s,this._parents,t,n)}function WDe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=iee(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var h=e.call(u,u.__data__,d,l),m,y=Mc(u,n),b=0,v=h.length;b<v;++b)(m=h[b])&&fT(m,t,n,b,h,y);s.push(h),a.push(u)}return new Bd(s,a,t,n)}var HDe=N1.prototype.constructor;function GDe(){return new HDe(this._groups,this._parents)}function KDe(e,t){var n,r,i;return function(){var s=uy(this,e),a=(this.style.removeProperty(e),uy(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function Eee(e){return function(){this.style.removeProperty(e)}}function YDe(e,t,n){var r,i=n+"",s;return function(){var a=uy(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function ZDe(e,t,n){var r,i,s;return function(){var a=uy(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),uy(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o))}}function XDe(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var l=Iu(this,e),c=l.on,u=l.value[s]==null?o||(o=Eee(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function JDe(e,t,n){var r=(e+="")=="transform"?tDe:kee;return t==null?this.styleTween(e,KDe(e,r)).on("end.style."+e,Eee(e)):typeof t=="function"?this.styleTween(e,ZDe(e,r,WD(this,"style."+e,t))).each(XDe(this._id,e)):this.styleTween(e,YDe(e,r,t),n).on("end.style."+e,null)}function QDe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function e6e(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&QDe(e,a,n)),r}return s._value=t,s}function t6e(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,e6e(e,t,n??""))}function n6e(e){return function(){this.textContent=e}}function r6e(e){return function(){var t=e(this);this.textContent=t??""}}function i6e(e){return this.tween("text",typeof e=="function"?r6e(WD(this,"text",e)):n6e(e==null?"":e+""))}function s6e(e){return function(t){this.textContent=e.call(this,t)}}function a6e(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&s6e(i)),t}return r._value=e,r}function o6e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,a6e(e))}function l6e(){for(var e=this._name,t=this._id,n=Tee(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=Mc(l,t);fT(l,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Bd(r,this._parents,e,n)}function c6e(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=Iu(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),c.on=t}),i===0&&s()})}var u6e=0;function Bd(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Tee(){return++u6e}var cd=N1.prototype;Bd.prototype={constructor:Bd,select:VDe,selectAll:WDe,selectChild:cd.selectChild,selectChildren:cd.selectChildren,filter:FDe,merge:LDe,selection:GDe,transition:l6e,call:cd.call,nodes:cd.nodes,node:cd.node,size:cd.size,empty:cd.empty,each:cd.each,on:zDe,attr:wDe,attrTween:EDe,style:JDe,styleTween:t6e,text:i6e,textTween:o6e,remove:qDe,tween:pDe,delay:RDe,duration:IDe,ease:ODe,easeVarying:DDe,end:c6e,[Symbol.iterator]:cd[Symbol.iterator]};function d6e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var f6e={time:null,delay:0,duration:250,ease:d6e};function h6e(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function p6e(e){var t,n;e instanceof Bd?(t=e._id,e=e._name):(t=Tee(),(n=f6e).time=qD(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&fT(l,e,t,c,a,n||h6e(l,t));return new Bd(r,this._parents,e,t)}N1.prototype.interrupt=dDe;N1.prototype.transition=p6e;const p4=Math.PI,m4=2*p4,Sp=1e-6,m6e=m4-Sp;function Aee(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function g6e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Aee;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class y6e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Aee:g6e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-t,c=i-n,u=a-t,d=o-n,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Sp)if(!(Math.abs(d*l-c*u)>Sp)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-a,y=i-o,b=l*l+c*c,v=m*m+y*y,x=Math.sqrt(b),w=Math.sqrt(h),S=s*Math.tan((p4-Math.acos((b+h-v)/(2*x*w)))/2),C=S/w,k=S/x;Math.abs(C-1)>Sp&&this._append`L${t+C*u},${n+C*d}`,this._append`A${s},${s},0,0,${+(d*m>u*y)},${this._x1=t+k*l},${this._y1=n+k*c}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=t+o,u=n+l,d=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Sp||Math.abs(this._y1-u)>Sp)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%m4+m4),h>m6e?this._append`A${r},${r},0,1,${d},${t-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>Sp&&this._append`A${r},${r},0,${+(h>=p4)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function zg(e){return function(){return e}}const jdt=Math.abs,Odt=Math.atan2,Pdt=Math.cos,Ddt=Math.max,Fdt=Math.min,Ldt=Math.sin,Bdt=Math.sqrt,$7=1e-12,HD=Math.PI,z7=HD/2,$dt=2*HD;function zdt(e){return e>1?0:e<-1?HD:Math.acos(e)}function Udt(e){return e>=1?z7:e<=-1?-z7:Math.asin(e)}function b6e(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new y6e(t)}function v6e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ree(e){this._context=e}Ree.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function dk(e){return new Ree(e)}function x6e(e){return e[0]}function w6e(e){return e[1]}function _6e(e,t){var n=zg(!0),r=null,i=dk,s=null,a=b6e(o);e=typeof e=="function"?e:e===void 0?x6e:zg(e),t=typeof t=="function"?t:t===void 0?w6e:zg(t);function o(l){var c,u=(l=v6e(l)).length,d,h=!1,m;for(r==null&&(s=i(m=a())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(d,c,l),+t(d,c,l));if(m)return s=null,m+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:zg(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:zg(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:zg(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}class Nee{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Mee(e){return new Nee(e,!0)}function Iee(e){return new Nee(e,!1)}function bh(){}function fk(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function hT(e){this._context=e}hT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function E2(e){return new hT(e)}function jee(e){this._context=e}jee.prototype={areaStart:bh,areaEnd:bh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S6e(e){return new jee(e)}function Oee(e){this._context=e}Oee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C6e(e){return new Oee(e)}function Pee(e,t){this._basis=new hT(e),this._beta=t}Pee.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,a=t[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(r+l*s),this._beta*t[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const k6e=function e(t){function n(r){return t===1?new hT(r):new Pee(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function hk(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function GD(e,t){this._context=e,this._k=(1-t)/6}GD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:hk(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:hk(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Dee=function e(t){function n(r){return new GD(r,t)}return n.tension=function(r){return e(+r)},n}(0);function KD(e,t){this._context=e,this._k=(1-t)/6}KD.prototype={areaStart:bh,areaEnd:bh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:hk(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E6e=function e(t){function n(r){return new KD(r,t)}return n.tension=function(r){return e(+r)},n}(0);function YD(e,t){this._context=e,this._k=(1-t)/6}YD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hk(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const T6e=function e(t){function n(r){return new YD(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ZD(e,t,n){var r=e._x1,i=e._y1,s=e._x2,a=e._y2;if(e._l01_a>$7){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>$7){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,a,e._x2,e._y2)}function Fee(e,t){this._context=e,this._alpha=t}Fee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ZD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Lee=function e(t){function n(r){return t?new Fee(r,t):new GD(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Bee(e,t){this._context=e,this._alpha=t}Bee.prototype={areaStart:bh,areaEnd:bh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ZD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A6e=function e(t){function n(r){return t?new Bee(r,t):new KD(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function $ee(e,t){this._context=e,this._alpha=t}$ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ZD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R6e=function e(t){function n(r){return t?new $ee(r,t):new YD(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function zee(e){this._context=e}zee.prototype={areaStart:bh,areaEnd:bh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function N6e(e){return new zee(e)}function U7(e){return e<0?-1:1}function q7(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(U7(s)+U7(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function V7(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function TI(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function pk(e){this._context=e}pk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:TI(this,this._t0,V7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,TI(this,V7(this,n=q7(this,e,t)),n);break;default:TI(this,this._t0,n=q7(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Uee(e){this._context=new qee(e)}(Uee.prototype=Object.create(pk.prototype)).point=function(e,t){pk.prototype.point.call(this,t,e)};function qee(e){this._context=e}qee.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Vee(e){return new pk(e)}function Wee(e){return new Uee(e)}function Hee(e){this._context=e}Hee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=W7(e),i=W7(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function W7(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Gee(e){return new Hee(e)}function pT(e,t){this._context=e,this._t=t}pT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Kee(e){return new pT(e,.5)}function Yee(e){return new pT(e,0)}function Zee(e){return new pT(e,1)}function Vv(e,t,n){this.k=e,this.x=t,this.y=n}Vv.prototype={constructor:Vv,scale:function(e){return e===1?this:new Vv(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Vv(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Vv.prototype;const i0=globalThis||void 0||self;var Xee=typeof i0=="object"&&i0&&i0.Object===Object&&i0,M6e=typeof self=="object"&&self&&self.Object===Object&&self,ju=Xee||M6e||Function("return this")(),mk=ju.Symbol,Jee=Object.prototype,I6e=Jee.hasOwnProperty,j6e=Jee.toString,Rv=mk?mk.toStringTag:void 0;function O6e(e){var t=I6e.call(e,Rv),n=e[Rv];try{e[Rv]=void 0;var r=!0}catch{}var i=j6e.call(e);return r&&(t?e[Rv]=n:delete e[Rv]),i}var P6e=Object.prototype,D6e=P6e.toString;function F6e(e){return D6e.call(e)}var L6e="[object Null]",B6e="[object Undefined]",H7=mk?mk.toStringTag:void 0;function Hy(e){return e==null?e===void 0?B6e:L6e:H7&&H7 in Object(e)?O6e(e):F6e(e)}function Nm(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $6e="[object AsyncFunction]",z6e="[object Function]",U6e="[object GeneratorFunction]",q6e="[object Proxy]";function XD(e){if(!Nm(e))return!1;var t=Hy(e);return t==z6e||t==U6e||t==$6e||t==q6e}var AI=ju["__core-js_shared__"],G7=function(){var e=/[^.]+$/.exec(AI&&AI.keys&&AI.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function V6e(e){return!!G7&&G7 in e}var W6e=Function.prototype,H6e=W6e.toString;function Mm(e){if(e!=null){try{return H6e.call(e)}catch{}try{return e+""}catch{}}return""}var G6e=/[\\^$.*+?()[\]{}|]/g,K6e=/^\[object .+?Constructor\]$/,Y6e=Function.prototype,Z6e=Object.prototype,X6e=Y6e.toString,J6e=Z6e.hasOwnProperty,Q6e=RegExp("^"+X6e.call(J6e).replace(G6e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function e5e(e){if(!Nm(e)||V6e(e))return!1;var t=XD(e)?Q6e:K6e;return t.test(Mm(e))}function t5e(e,t){return e==null?void 0:e[t]}function Im(e,t){var n=t5e(e,t);return e5e(n)?n:void 0}var mw=Im(Object,"create");function n5e(){this.__data__=mw?mw(null):{},this.size=0}function r5e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var i5e="__lodash_hash_undefined__",s5e=Object.prototype,a5e=s5e.hasOwnProperty;function o5e(e){var t=this.__data__;if(mw){var n=t[e];return n===i5e?void 0:n}return a5e.call(t,e)?t[e]:void 0}var l5e=Object.prototype,c5e=l5e.hasOwnProperty;function u5e(e){var t=this.__data__;return mw?t[e]!==void 0:c5e.call(t,e)}var d5e="__lodash_hash_undefined__";function f5e(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=mw&&t===void 0?d5e:t,this}function lm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lm.prototype.clear=n5e;lm.prototype.delete=r5e;lm.prototype.get=o5e;lm.prototype.has=u5e;lm.prototype.set=f5e;function h5e(){this.__data__=[],this.size=0}function mT(e,t){return e===t||e!==e&&t!==t}function gT(e,t){for(var n=e.length;n--;)if(mT(e[n][0],t))return n;return-1}var p5e=Array.prototype,m5e=p5e.splice;function g5e(e){var t=this.__data__,n=gT(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():m5e.call(t,n,1),--this.size,!0}function y5e(e){var t=this.__data__,n=gT(t,e);return n<0?void 0:t[n][1]}function b5e(e){return gT(this.__data__,e)>-1}function v5e(e,t){var n=this.__data__,r=gT(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Yd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Yd.prototype.clear=h5e;Yd.prototype.delete=g5e;Yd.prototype.get=y5e;Yd.prototype.has=b5e;Yd.prototype.set=v5e;var gw=Im(ju,"Map");function x5e(){this.size=0,this.__data__={hash:new lm,map:new(gw||Yd),string:new lm}}function w5e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function yT(e,t){var n=e.__data__;return w5e(t)?n[typeof t=="string"?"string":"hash"]:n.map}function _5e(e){var t=yT(this,e).delete(e);return this.size-=t?1:0,t}function S5e(e){return yT(this,e).get(e)}function C5e(e){return yT(this,e).has(e)}function k5e(e,t){var n=yT(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Fh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Fh.prototype.clear=x5e;Fh.prototype.delete=_5e;Fh.prototype.get=S5e;Fh.prototype.has=C5e;Fh.prototype.set=k5e;var E5e="Expected a function";function I1(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(E5e);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(I1.Cache||Fh),n}I1.Cache=Fh;function T5e(){this.__data__=new Yd,this.size=0}function A5e(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function R5e(e){return this.__data__.get(e)}function N5e(e){return this.__data__.has(e)}var M5e=200;function I5e(e,t){var n=this.__data__;if(n instanceof Yd){var r=n.__data__;if(!gw||r.length<M5e-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Fh(r)}return n.set(e,t),this.size=n.size,this}function Gy(e){var t=this.__data__=new Yd(e);this.size=t.size}Gy.prototype.clear=T5e;Gy.prototype.delete=A5e;Gy.prototype.get=R5e;Gy.prototype.has=N5e;Gy.prototype.set=I5e;var gk=function(){try{var e=Im(Object,"defineProperty");return e({},"",{}),e}catch{}}();function JD(e,t,n){t=="__proto__"&&gk?gk(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function g4(e,t,n){(n!==void 0&&!mT(e[t],n)||n===void 0&&!(t in e))&&JD(e,t,n)}function j5e(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var l=a[++i];if(n(s[l],l,s)===!1)break}return t}}var O5e=j5e(),Qee=typeof exports=="object"&&exports&&!exports.nodeType&&exports,K7=Qee&&typeof module=="object"&&module&&!module.nodeType&&module,P5e=K7&&K7.exports===Qee,Y7=P5e?ju.Buffer:void 0,Z7=Y7?Y7.allocUnsafe:void 0;function D5e(e,t){if(t)return e.slice();var n=e.length,r=Z7?Z7(n):new e.constructor(n);return e.copy(r),r}var X7=ju.Uint8Array;function F5e(e){var t=new e.constructor(e.byteLength);return new X7(t).set(new X7(e)),t}function L5e(e,t){var n=t?F5e(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function B5e(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var J7=Object.create,$5e=function(){function e(){}return function(t){if(!Nm(t))return{};if(J7)return J7(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function ete(e,t){return function(n){return e(t(n))}}var tte=ete(Object.getPrototypeOf,Object),z5e=Object.prototype;function bT(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||z5e;return e===n}function U5e(e){return typeof e.constructor=="function"&&!bT(e)?$5e(tte(e)):{}}function j1(e){return e!=null&&typeof e=="object"}var q5e="[object Arguments]";function Q7(e){return j1(e)&&Hy(e)==q5e}var nte=Object.prototype,V5e=nte.hasOwnProperty,W5e=nte.propertyIsEnumerable,yk=Q7(function(){return arguments}())?Q7:function(e){return j1(e)&&V5e.call(e,"callee")&&!W5e.call(e,"callee")},bk=Array.isArray,H5e=9007199254740991;function rte(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=H5e}function vT(e){return e!=null&&rte(e.length)&&!XD(e)}function G5e(e){return j1(e)&&vT(e)}function K5e(){return!1}var ite=typeof exports=="object"&&exports&&!exports.nodeType&&exports,eU=ite&&typeof module=="object"&&module&&!module.nodeType&&module,Y5e=eU&&eU.exports===ite,tU=Y5e?ju.Buffer:void 0,Z5e=tU?tU.isBuffer:void 0,QD=Z5e||K5e,X5e="[object Object]",J5e=Function.prototype,Q5e=Object.prototype,ste=J5e.toString,eFe=Q5e.hasOwnProperty,tFe=ste.call(Object);function nFe(e){if(!j1(e)||Hy(e)!=X5e)return!1;var t=tte(e);if(t===null)return!0;var n=eFe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&ste.call(n)==tFe}var rFe="[object Arguments]",iFe="[object Array]",sFe="[object Boolean]",aFe="[object Date]",oFe="[object Error]",lFe="[object Function]",cFe="[object Map]",uFe="[object Number]",dFe="[object Object]",fFe="[object RegExp]",hFe="[object Set]",pFe="[object String]",mFe="[object WeakMap]",gFe="[object ArrayBuffer]",yFe="[object DataView]",bFe="[object Float32Array]",vFe="[object Float64Array]",xFe="[object Int8Array]",wFe="[object Int16Array]",_Fe="[object Int32Array]",SFe="[object Uint8Array]",CFe="[object Uint8ClampedArray]",kFe="[object Uint16Array]",EFe="[object Uint32Array]",Fi={};Fi[bFe]=Fi[vFe]=Fi[xFe]=Fi[wFe]=Fi[_Fe]=Fi[SFe]=Fi[CFe]=Fi[kFe]=Fi[EFe]=!0;Fi[rFe]=Fi[iFe]=Fi[gFe]=Fi[sFe]=Fi[yFe]=Fi[aFe]=Fi[oFe]=Fi[lFe]=Fi[cFe]=Fi[uFe]=Fi[dFe]=Fi[fFe]=Fi[hFe]=Fi[pFe]=Fi[mFe]=!1;function TFe(e){return j1(e)&&rte(e.length)&&!!Fi[Hy(e)]}function AFe(e){return function(t){return e(t)}}var ate=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cx=ate&&typeof module=="object"&&module&&!module.nodeType&&module,RFe=cx&&cx.exports===ate,RI=RFe&&Xee.process,nU=function(){try{var e=cx&&cx.require&&cx.require("util").types;return e||RI&&RI.binding&&RI.binding("util")}catch{}}(),rU=nU&&nU.isTypedArray,e6=rU?AFe(rU):TFe;function y4(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var NFe=Object.prototype,MFe=NFe.hasOwnProperty;function IFe(e,t,n){var r=e[t];(!(MFe.call(e,t)&&mT(r,n))||n===void 0&&!(t in e))&&JD(e,t,n)}function jFe(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=void 0;l===void 0&&(l=e[o]),i?JD(n,o,l):IFe(n,o,l)}return n}function OFe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var PFe=9007199254740991,DFe=/^(?:0|[1-9]\d*)$/;function ote(e,t){var n=typeof e;return t=t??PFe,!!t&&(n=="number"||n!="symbol"&&DFe.test(e))&&e>-1&&e%1==0&&e<t}var FFe=Object.prototype,LFe=FFe.hasOwnProperty;function BFe(e,t){var n=bk(e),r=!n&&yk(e),i=!n&&!r&&QD(e),s=!n&&!r&&!i&&e6(e),a=n||r||i||s,o=a?OFe(e.length,String):[],l=o.length;for(var c in e)(t||LFe.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ote(c,l)))&&o.push(c);return o}function $Fe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var zFe=Object.prototype,UFe=zFe.hasOwnProperty;function qFe(e){if(!Nm(e))return $Fe(e);var t=bT(e),n=[];for(var r in e)r=="constructor"&&(t||!UFe.call(e,r))||n.push(r);return n}function lte(e){return vT(e)?BFe(e,!0):qFe(e)}function VFe(e){return jFe(e,lte(e))}function WFe(e,t,n,r,i,s,a){var o=y4(e,n),l=y4(t,n),c=a.get(l);if(c){g4(e,n,c);return}var u=s?s(o,l,n+"",e,t,a):void 0,d=u===void 0;if(d){var h=bk(l),m=!h&&QD(l),y=!h&&!m&&e6(l);u=l,h||m||y?bk(o)?u=o:G5e(o)?u=B5e(o):m?(d=!1,u=D5e(l,!0)):y?(d=!1,u=L5e(l,!0)):u=[]:nFe(l)||yk(l)?(u=o,yk(o)?u=VFe(o):(!Nm(o)||XD(o))&&(u=U5e(l))):d=!1}d&&(a.set(l,u),i(u,l,r,s,a),a.delete(l)),g4(e,n,u)}function cte(e,t,n,r,i){e!==t&&O5e(t,function(s,a){if(i||(i=new Gy),Nm(s))WFe(e,t,a,n,cte,r,i);else{var o=r?r(y4(e,a),s,a+"",e,t,i):void 0;o===void 0&&(o=s),g4(e,a,o)}},lte)}function ute(e){return e}function HFe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var iU=Math.max;function GFe(e,t,n){return t=iU(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=iU(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),HFe(e,this,o)}}function KFe(e){return function(){return e}}var YFe=gk?function(e,t){return gk(e,"toString",{configurable:!0,enumerable:!1,value:KFe(t),writable:!0})}:ute,ZFe=800,XFe=16,JFe=Date.now;function QFe(e){var t=0,n=0;return function(){var r=JFe(),i=XFe-(r-n);if(n=r,i>0){if(++t>=ZFe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var e8e=QFe(YFe);function t8e(e,t){return e8e(GFe(e,t,ute),e+"")}function n8e(e,t,n){if(!Nm(n))return!1;var r=typeof t;return(r=="number"?vT(n)&&ote(t,n.length):r=="string"&&t in n)?mT(n[t],e):!1}function r8e(e){return t8e(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&n8e(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var o=n[r];o&&e(t,o,r,s)}return t})}var i8e=r8e(function(e,t,n){cte(e,t,n)}),s8e="",a8e={curveBasis:E2,curveBasisClosed:S6e,curveBasisOpen:C6e,curveBumpX:Mee,curveBumpY:Iee,curveBundle:k6e,curveCardinalClosed:E6e,curveCardinalOpen:T6e,curveCardinal:Dee,curveCatmullRomClosed:A6e,curveCatmullRomOpen:R6e,curveCatmullRom:Lee,curveLinear:dk,curveLinearClosed:N6e,curveMonotoneX:Vee,curveMonotoneY:Wee,curveNatural:Gee,curveStep:Kee,curveStepAfter:Zee,curveStepBefore:Yee},o8e=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,l8e=se(function(e,t){const n=dte(e,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const a=n.map(o=>o.args);KC(a),r=ya(r,[...a])}else r=n.args;if(!r)return;let i=CD(e,t);const s="config";return r[s]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),r[i]=r[s],delete r[s]),r},"detectInit"),dte=se(function(e,t=null){var n,r;try{const i=new RegExp(`[%]{2}(?![{]${o8e.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(i,"").replace(/'/gm,'"'),$t.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let s;const a=[];for(;(s=ox.exec(e))!==null;)if(s.index===ox.lastIndex&&ox.lastIndex++,s&&!t||t&&((n=s[1])!=null&&n.match(t))||t&&((r=s[2])!=null&&r.match(t))){const o=s[1]?s[1]:s[2],l=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;a.push({type:o,args:l})}return a.length===0?{type:e,args:null}:a.length===1?a[0]:a}catch(i){return $t.error(`ERROR: ${i.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),c8e=se(function(e){return e.replace(ox,"")},"removeDirectives"),u8e=se(function(e,t){for(const[n,r]of t.entries())if(r.match(e))return n;return-1},"isSubstringInArray");function t6(e,t){if(!e)return t;const n=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return a8e[n]??t}se(t6,"interpolateToCurve");function fte(e,t){const n=e.trim();if(n)return t.securityLevel!=="loose"?eOe.sanitizeUrl(n):n}se(fte,"formatUrl");var d8e=se((e,...t)=>{const n=e.split("."),r=n.length-1,i=n[r];let s=window;for(let a=0;a<r;a++)if(s=s[n[a]],!s){$t.error(`Function name: ${e} not found in window`);return}s[i](...t)},"runFunc");function n6(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}se(n6,"distance");function hte(e){let t,n=0;e.forEach(i=>{n+=n6(i,t),t=i});const r=n/2;return r6(e,r)}se(hte,"traverseEdge");function pte(e){return e.length===1?e[0]:hte(e)}se(pte,"calcLabelPosition");var sU=se((e,t=2)=>{const n=Math.pow(10,t);return Math.round(e*n)/n},"roundNumber"),r6=se((e,t)=>{let n,r=t;for(const i of e){if(n){const s=n6(i,n);if(s===0)return n;if(s<r)r-=s;else{const a=r/s;if(a<=0)return n;if(a>=1)return{x:i.x,y:i.y};if(a>0&&a<1)return{x:sU((1-a)*n.x+a*i.x,5),y:sU((1-a)*n.y+a*i.y,5)}}}n=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),f8e=se((e,t,n)=>{$t.info(`our points ${JSON.stringify(t)}`),t[0]!==n&&(t=t.reverse());const i=r6(t,25),s=e?10:5,a=Math.atan2(t[0].y-i.y,t[0].x-i.x),o={x:0,y:0};return o.x=Math.sin(a)*s+(t[0].x+i.x)/2,o.y=-Math.cos(a)*s+(t[0].y+i.y)/2,o},"calcCardinalityPosition");function mte(e,t,n){const r=structuredClone(n);$t.info("our points",r),t!=="start_left"&&t!=="start_right"&&r.reverse();const i=25+e,s=r6(r,i),a=10+e*.5,o=Math.atan2(r[0].y-s.y,r[0].x-s.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(o+Math.PI)*a+(r[0].x+s.x)/2,l.y=-Math.cos(o+Math.PI)*a+(r[0].y+s.y)/2):t==="end_right"?(l.x=Math.sin(o-Math.PI)*a+(r[0].x+s.x)/2-5,l.y=-Math.cos(o-Math.PI)*a+(r[0].y+s.y)/2-5):t==="end_left"?(l.x=Math.sin(o)*a+(r[0].x+s.x)/2-5,l.y=-Math.cos(o)*a+(r[0].y+s.y)/2-5):(l.x=Math.sin(o)*a+(r[0].x+s.x)/2,l.y=-Math.cos(o)*a+(r[0].y+s.y)/2),l}se(mte,"calcTerminalLabelPosition");function gte(e){let t="",n="";for(const r of e)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?n=n+r+";":t=t+r+";");return{style:t,labelStyle:n}}se(gte,"getStylesFromArray");var aU=0,h8e=se(()=>(aU++,"id-"+Math.random().toString(36).substr(2,12)+"-"+aU),"generateId");function yte(e){let t="";const n="0123456789abcdef",r=n.length;for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t}se(yte,"makeRandomHex");var p8e=se(e=>yte(e.length),"random"),m8e=se(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),g8e=se(function(e,t){const n=t.text.replace(Wy.lineBreakRegex," "),[,r]=xT(t.fontSize),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.style("text-anchor",t.anchor),i.style("font-family",t.fontFamily),i.style("font-size",r),i.style("font-weight",t.fontWeight),i.attr("fill",t.fill),t.class!==void 0&&i.attr("class",t.class);const s=i.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.attr("fill",t.fill),s.text(n),i},"drawSimpleText"),y8e=I1((e,t,n)=>{if(!e||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),Wy.lineBreakRegex.test(e)))return e;const r=e.split(" ").filter(Boolean),i=[];let s="";return r.forEach((a,o)=>{const l=$d(`${a} `,n),c=$d(s,n);if(l>t){const{hyphenatedStrings:h,remainingWord:m}=b8e(a,t,"-",n);i.push(s,...h),s=m}else c+l>=t?(i.push(s),s=a):s=[s,a].filter(Boolean).join(" ");o+1===r.length&&i.push(s)}),i.filter(a=>a!=="").join(n.joinWith)},(e,t,n)=>`${e}${t}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),b8e=I1((e,t,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...e],s=[];let a="";return i.forEach((o,l)=>{const c=`${a}${o}`;if($d(c,r)>=t){const d=l+1,h=i.length===d,m=`${c}${n}`;s.push(h?c:m),a=""}else a=c}),{hyphenatedStrings:s,remainingWord:a}},(e,t,n="-",r)=>`${e}${t}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function bte(e,t){return i6(e,t).height}se(bte,"calculateTextHeight");function $d(e,t){return i6(e,t).width}se($d,"calculateTextWidth");var i6=I1((e,t)=>{const{fontSize:n=12,fontFamily:r="Arial",fontWeight:i=400}=t;if(!e)return{width:0,height:0};const[,s]=xT(n),a=["sans-serif",r],o=e.split(Wy.lineBreakRegex),l=[],c=Wr("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const h of a){let m=0;const y={width:0,height:0,lineHeight:0};for(const b of o){const v=m8e();v.text=b||s8e;const x=g8e(u,v).style("font-size",s).style("font-weight",i).style("font-family",h),w=(x._groups||x)[0][0].getBBox();if(w.width===0&&w.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,w.width)),m=Math.round(w.height),y.height+=m,y.lineHeight=Math.round(Math.max(y.lineHeight,m))}l.push(y)}u.remove();const d=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[d]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),j0,v8e=(j0=class{constructor(t=!1,n){this.count=0,this.count=n?n.length:0,this.next=t?()=>this.count++:()=>Date.now()}},se(j0,"InitIDGenerator"),j0),OS,x8e=se(function(e){return OS=OS||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),OS.innerHTML=e,unescape(OS.textContent)},"entityDecode");function s6(e){return"str"in e}se(s6,"isDetailedError");var w8e=se((e,t,n,r)=>{var s;if(!r)return;const i=(s=e.node())==null?void 0:s.getBBox();i&&e.append("text").text(r).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-n).attr("class",t)},"insertTitle"),xT=se(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function a6(e,t){return i8e({},e,t)}se(a6,"cleanAndMerge");var au={assignWithDepth:ya,wrapLabel:y8e,calculateTextHeight:bte,calculateTextWidth:$d,calculateTextDimensions:i6,cleanAndMerge:a6,detectInit:l8e,detectDirective:dte,isSubstringInArray:u8e,interpolateToCurve:t6,calcLabelPosition:pte,calcCardinalityPosition:f8e,calcTerminalLabelPosition:mte,formatUrl:fte,getStylesFromArray:gte,generateId:h8e,random:p8e,runFunc:d8e,entityDecode:x8e,insertTitle:w8e,parseFontSize:xT,InitIDGenerator:v8e},_8e=se(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),t=t.replace(/#\w+;/g,function(n){const r=n.substring(1,n.length-1);return/^\+?\d+$/.test(r)?""+r+"":""+r+""}),t},"encodeEntities"),jm=se(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),qdt=se((e,t,{counter:n=0,prefix:r,suffix:i},s)=>s||`${r?`${r}_`:""}${e}_${t}_${n}${i?`_${i}`:""}`,"getEdgeId");function Ja(e){return e??null}se(Ja,"handleUndefinedAttr");function o6(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Om=o6();function vte(e){Om=e}var ux={exec:()=>null};function fi(e,t=""){let n=typeof e=="string"?e:e.source;const r={replace:(i,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(Ya.caret,"$1"),n=n.replace(i,a),r},getRegex:()=>new RegExp(n,t)};return r}var Ya={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},S8e=/^(?:[ \t]*(?:\n|$))+/,C8e=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,k8e=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,O1=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,E8e=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,l6=/(?:[*+-]|\d{1,9}[.)])/,xte=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,wte=fi(xte).replace(/bull/g,l6).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),T8e=fi(xte).replace(/bull/g,l6).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),c6=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,A8e=/^[^\n]+/,u6=/(?!\s*\])(?:\\.|[^\[\]\\])+/,R8e=fi(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",u6).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),N8e=fi(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,l6).getRegex(),wT="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",d6=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,M8e=fi("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",d6).replace("tag",wT).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),_te=fi(c6).replace("hr",O1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wT).getRegex(),I8e=fi(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",_te).getRegex(),f6={blockquote:I8e,code:C8e,def:R8e,fences:k8e,heading:E8e,hr:O1,html:M8e,lheading:wte,list:N8e,newline:S8e,paragraph:_te,table:ux,text:A8e},oU=fi("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",O1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wT).getRegex(),j8e={...f6,lheading:T8e,table:oU,paragraph:fi(c6).replace("hr",O1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",oU).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wT).getRegex()},O8e={...f6,html:fi(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",d6).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ux,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:fi(c6).replace("hr",O1).replace("heading",` *#{1,6} *[^
]`).replace("lheading",wte).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},P8e=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,D8e=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ste=/^( {2,}|\\)\n(?!\s*$)/,F8e=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,_T=/[\p{P}\p{S}]/u,h6=/[\s\p{P}\p{S}]/u,Cte=/[^\s\p{P}\p{S}]/u,L8e=fi(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,h6).getRegex(),kte=/(?!~)[\p{P}\p{S}]/u,B8e=/(?!~)[\s\p{P}\p{S}]/u,$8e=/(?:[^\s\p{P}\p{S}]|~)/u,z8e=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Ete=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,U8e=fi(Ete,"u").replace(/punct/g,_T).getRegex(),q8e=fi(Ete,"u").replace(/punct/g,kte).getRegex(),Tte="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",V8e=fi(Tte,"gu").replace(/notPunctSpace/g,Cte).replace(/punctSpace/g,h6).replace(/punct/g,_T).getRegex(),W8e=fi(Tte,"gu").replace(/notPunctSpace/g,$8e).replace(/punctSpace/g,B8e).replace(/punct/g,kte).getRegex(),H8e=fi("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Cte).replace(/punctSpace/g,h6).replace(/punct/g,_T).getRegex(),G8e=fi(/\\(punct)/,"gu").replace(/punct/g,_T).getRegex(),K8e=fi(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Y8e=fi(d6).replace("(?:-->|$)","-->").getRegex(),Z8e=fi("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Y8e).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),vk=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,X8e=fi(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",vk).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ate=fi(/^!?\[(label)\]\[(ref)\]/).replace("label",vk).replace("ref",u6).getRegex(),Rte=fi(/^!?\[(ref)\](?:\[\])?/).replace("ref",u6).getRegex(),J8e=fi("reflink|nolink(?!\\()","g").replace("reflink",Ate).replace("nolink",Rte).getRegex(),p6={_backpedal:ux,anyPunctuation:G8e,autolink:K8e,blockSkip:z8e,br:Ste,code:D8e,del:ux,emStrongLDelim:U8e,emStrongRDelimAst:V8e,emStrongRDelimUnd:H8e,escape:P8e,link:X8e,nolink:Rte,punctuation:L8e,reflink:Ate,reflinkSearch:J8e,tag:Z8e,text:F8e,url:ux},Q8e={...p6,link:fi(/^!?\[(label)\]\((.*?)\)/).replace("label",vk).getRegex(),reflink:fi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",vk).getRegex()},b4={...p6,emStrongRDelimAst:W8e,emStrongLDelim:q8e,url:fi(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},eLe={...b4,br:fi(Ste).replace("{2,}","*").getRegex(),text:fi(b4.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},PS={normal:f6,gfm:j8e,pedantic:O8e},Nv={normal:p6,gfm:b4,breaks:eLe,pedantic:Q8e},tLe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lU=e=>tLe[e];function Kc(e,t){if(t){if(Ya.escapeTest.test(e))return e.replace(Ya.escapeReplace,lU)}else if(Ya.escapeTestNoEncode.test(e))return e.replace(Ya.escapeReplaceNoEncode,lU);return e}function cU(e){try{e=encodeURI(e).replace(Ya.percentDecode,"%")}catch{return null}return e}function uU(e,t){var s;const n=e.replace(Ya.findPipe,(a,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Ya.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Ya.slashPipe,"|");return r}function Mv(e,t,n){const r=e.length;if(r===0)return"";let i=0;for(;i<r&&e.charAt(r-i-1)===t;)i++;return e.slice(0,r-i)}function nLe(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function dU(e,t,n,r,i){const s=t.href,a=t.title||null,o=e[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:a,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,l}function rLe(e,t,n){const r=e.match(n.other.indentCodeCompensation);if(r===null)return t;const i=r[1];return t.split(`
`).map(s=>{const a=s.match(n.other.beginningSpace);if(a===null)return s;const[o]=a;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}var xk=class{constructor(e){ve(this,"options");ve(this,"rules");ve(this,"lexer");this.options=e||Om}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Mv(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],r=rLe(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const r=Mv(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Mv(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=Mv(t[0],`
`).split(`
`),r="",i="";const s=[];for(;n.length>0;){let a=!1;const o=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))o.push(n[l]),a=!0;else if(!a)o.push(n[l]);else break;n=n.slice(l);const c=o.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,i=i?`${i}
${u}`:u;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=d,n.length===0)break;const h=s.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){const m=h,y=m.raw+`
`+n.join(`
`),b=this.blockquote(y);s[s.length-1]=b,r=r.substring(0,r.length-m.raw.length)+b.raw,i=i.substring(0,i.length-m.text.length)+b.text;break}else if((h==null?void 0:h.type)==="list"){const m=h,y=m.raw+`
`+n.join(`
`),b=this.list(y);s[s.length-1]=b,r=r.substring(0,r.length-h.raw.length)+b.raw,i=i.substring(0,i.length-m.raw.length)+b.raw,n=y.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const s=this.rules.other.listItemRegex(n);let a=!1;for(;e;){let l=!1,c="",u="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let d=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),h=e.split(`
`,1)[0],m=!d.trim(),y=0;if(this.options.pedantic?(y=2,u=d.trimStart()):m?y=t[1].length+1:(y=t[2].search(this.rules.other.nonSpaceChar),y=y>4?1:y,u=d.slice(y),y+=t[1].length),m&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),l=!0),!l){const x=this.rules.other.nextBulletRegex(y),w=this.rules.other.hrRegex(y),S=this.rules.other.fencesBeginRegex(y),C=this.rules.other.headingBeginRegex(y),k=this.rules.other.htmlBeginRegex(y);for(;e;){const A=e.split(`
`,1)[0];let R;if(h=A,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),R=h):R=h.replace(this.rules.other.tabCharGlobal,"    "),S.test(h)||C.test(h)||k.test(h)||x.test(h)||w.test(h))break;if(R.search(this.rules.other.nonSpaceChar)>=y||!h.trim())u+=`
`+R.slice(y);else{if(m||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(d)||C.test(d)||w.test(d))break;u+=`
`+h}!m&&!h.trim()&&(m=!0),c+=A+`
`,e=e.substring(A.length+1),d=R.slice(y)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0));let b=null,v;this.options.gfm&&(b=this.rules.other.listIsTask.exec(u),b&&(v=b[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!b,checked:v,loose:!1,text:u,tokens:[]}),i.raw+=c}const o=i.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const c=i.items[l].tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:i}}}table(e){var a;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=uU(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const o of r)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<n.length;o++)s.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:s.align[o]});for(const o of i)s.rows.push(uU(o,s.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[c]})));return s}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const s=Mv(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=nLe(t[2],"()");if(s===-2)return;if(s>-1){const o=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),dU(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[r.toLowerCase()];if(!i){const s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return dU(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const s=[...r[0]].length-1;let a,o,l=s,c=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+s);(r=u.exec(t))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(o=[...a].length,r[3]||r[4]){l+=o;continue}else if((r[5]||r[6])&&s%3&&!((s+o)%3)){c+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+c);const d=[...r[0]][0].length,h=e.slice(0,s+r.index+d+o);if(Math.min(s,o)%2){const y=h.slice(1,-1);return{type:"em",raw:h,text:y,tokens:this.lexer.inlineTokens(y)}}const m=h.slice(2,-2);return{type:"strong",raw:h,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=t[1],r="mailto:"+n):(n=t[1],r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let s;do s=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(s!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},_d=class v4{constructor(t){ve(this,"tokens");ve(this,"options");ve(this,"state");ve(this,"tokenizer");ve(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Om,this.options.tokenizer=this.options.tokenizer||new xk,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Ya,block:PS.normal,inline:Nv.normal};this.options.pedantic?(n.block=PS.pedantic,n.inline=Nv.pedantic):this.options.gfm&&(n.block=PS.gfm,this.options.breaks?n.inline=Nv.breaks:n.inline=Nv.gfm),this.tokenizer.rules=n}static get rules(){return{block:PS,inline:Nv}}static lex(t,n){return new v4(n).lex(t)}static lexInline(t,n){return new v4(n).inlineTokens(t)}lex(t){t=t.replace(Ya.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){var i,s,a;for(this.options.pedantic&&(t=t.replace(Ya.tabCharGlobal,"    ").replace(Ya.spaceLine,""));t;){let o;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(o=c.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);const c=n.at(-1);o.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.at(-1).src=c.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let l=t;if((a=this.options.extensions)!=null&&a.startBlock){let c=1/0;const u=t.slice(1);let d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(o=this.tokenizer.paragraph(l))){const c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(o),r=l.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(o);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var o,l,c;let r=t,i=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,a="";for(;t;){s||(a=""),s=!1;let u;if((l=(o=this.options.extensions)==null?void 0:o.inline)!=null&&l.some(h=>(u=h.call({lexer:this},t,n))?(t=t.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);const h=n.at(-1);u.type==="text"&&(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(t,r,a)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),n.push(u);continue}let d=t;if((c=this.options.extensions)!=null&&c.startInline){let h=1/0;const m=t.slice(1);let y;this.options.extensions.startInline.forEach(b=>{y=b.call({lexer:this},m),typeof y=="number"&&y>=0&&(h=Math.min(h,y))}),h<1/0&&h>=0&&(d=t.substring(0,h+1))}if(u=this.tokenizer.inlineText(d)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(a=u.raw.slice(-1)),s=!0;const h=n.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(t){const h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},wk=class{constructor(e){ve(this,"options");ve(this,"parser");this.options=e||Om}space(e){return""}code({text:e,lang:t,escaped:n}){var s;const r=(s=(t||"").match(Ya.notSpaceStart))==null?void 0:s[0],i=e.replace(Ya.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Kc(r)+'">'+(n?i:Kc(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Kc(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let r="";for(let a=0;a<e.items.length;a++){const o=e.items[a];r+=this.listitem(o)}const i=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(e){var n;let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+Kc(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r="";for(let i=0;i<e.rows.length;i++){const s=e.rows[i];n="";for(let a=0;a<s.length;a++)n+=this.tablecell(s[a]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Kc(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const r=this.parser.parseInline(n),i=cU(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+Kc(t)+'"'),s+=">"+r+"</a>",s}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const i=cU(e);if(i===null)return Kc(n);e=i;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${Kc(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Kc(e.text)}},m6=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Sd=class x4{constructor(t){ve(this,"options");ve(this,"renderer");ve(this,"textRenderer");this.options=t||Om,this.options.renderer=this.options.renderer||new wk,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new m6}static parse(t,n){return new x4(n).parse(t)}static parseInline(t,n){return new x4(n).parseInline(t)}parse(t,n=!0){var i,s;let r="";for(let a=0;a<t.length;a++){const o=t[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[o.type]){const c=o,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=u||"";continue}}const l=o;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;a+1<t.length&&t[a+1].type==="text";)c=t[++a],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(t,n=this.renderer){var i,s;let r="";for(let a=0;a<t.length;a++){const o=t[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[o.type]){const c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=c||"";continue}}const l=o;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},B3,T2=(B3=class{constructor(e){ve(this,"options");ve(this,"block");this.options=e||Om}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?_d.lex:_d.lexInline}provideParser(){return this.block?Sd.parse:Sd.parseInline}},ve(B3,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),B3),iLe=class{constructor(...e){ve(this,"defaults",o6());ve(this,"options",this.setOptions);ve(this,"parse",this.parseMarkdown(!0));ve(this,"parseInline",this.parseMarkdown(!1));ve(this,"Parser",Sd);ve(this,"Renderer",wk);ve(this,"TextRenderer",m6);ve(this,"Lexer",_d);ve(this,"Tokenizer",xk);ve(this,"Hooks",T2);this.use(...e)}walkTokens(e,t){var r,i;let n=[];for(const s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{const a=s;for(const o of a.header)n=n.concat(this.walkTokens(o.tokens,t));for(const o of a.rows)for(const l of o)n=n.concat(this.walkTokens(l.tokens,t));break}case"list":{const a=s;n=n.concat(this.walkTokens(a.items,t));break}default:{const a=s;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(o=>{const l=a[o].flat(1/0);n=n.concat(this.walkTokens(l,t))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=t.renderers[i.name];s?t.renderers[i.name]=function(...a){let o=i.renderer.apply(this,a);return o===!1&&(o=s.apply(this,a)),o}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=t[i.level];s?s.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){const i=this.defaults.renderer||new wk(this.defaults);for(const s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const a=s,o=n.renderer[a],l=i[a];i[a]=(...c)=>{let u=o.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new xk(this.defaults);for(const s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,o=n.tokenizer[a],l=i[a];i[a]=(...c)=>{let u=o.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new T2;for(const s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const a=s,o=n.hooks[a],l=i[a];T2.passThroughHooks.has(s)?i[a]=c=>{if(this.defaults.async)return Promise.resolve(o.call(i,c)).then(d=>l.call(i,d));const u=o.call(i,c);return l.call(i,u)}:i[a]=(...c)=>{let u=o.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(a){let o=[];return o.push(s.call(this,a)),i&&(o=o.concat(i.call(this,a))),o}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return _d.lex(e,t??this.defaults)}parser(e,t){return Sd.parse(e,t??this.defaults)}parseMarkdown(e){return(n,r)=>{const i={...r},s={...this.defaults,...i},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const o=s.hooks?s.hooks.provideLexer():e?_d.lex:_d.lexInline,l=s.hooks?s.hooks.provideParser():e?Sd.parse:Sd.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(c=>o(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>l(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(a);try{s.hooks&&(n=s.hooks.preprocess(n));let c=o(n,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let u=l(c,s);return s.hooks&&(u=s.hooks.postprocess(u)),u}catch(c){return a(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+Kc(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}},cm=new iLe;function ci(e,t){return cm.parse(e,t)}ci.options=ci.setOptions=function(e){return cm.setOptions(e),ci.defaults=cm.defaults,vte(ci.defaults),ci};ci.getDefaults=o6;ci.defaults=Om;ci.use=function(...e){return cm.use(...e),ci.defaults=cm.defaults,vte(ci.defaults),ci};ci.walkTokens=function(e,t){return cm.walkTokens(e,t)};ci.parseInline=cm.parseInline;ci.Parser=Sd;ci.parser=Sd.parse;ci.Renderer=wk;ci.TextRenderer=m6;ci.Lexer=_d;ci.lexer=_d.lex;ci.Tokenizer=xk;ci.Hooks=T2;ci.parse=ci;ci.options;ci.setOptions;ci.use;ci.walkTokens;ci.parseInline;Sd.parse;_d.lex;function Nte(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.from(typeof e=="string"?[e]:e);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(o,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?o.concat(c.map(function(u){var d,h;return(h=(d=u.match(/[\t ]/g))===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0})):o},[]);if(i.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(o){return o.replace(s,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return t.forEach(function(o,l){var c=a.match(/(?:^|\n)( *)$/),u=c?c[1]:"",d=o;typeof o=="string"&&o.includes(`
`)&&(d=String(o).split(`
`).map(function(h,m){return m===0?h:""+u+h}).join(`
`)),a+=d+r[l+1]}),a}function Mte(e,{markdownAutoWrap:t}){const r=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=Nte(r);return t===!1?i.replace(/ /g,"&nbsp;"):i}se(Mte,"preprocessMarkdown");function Ite(e,t={}){const n=Mte(e,t),r=ci.lexer(n),i=[[]];let s=0;function a(o,l="normal"){o.type==="text"?o.text.split(`
`).forEach((u,d)=>{d!==0&&(s++,i.push([])),u.split(" ").forEach(h=>{h=h.replace(/&#39;/g,"'"),h&&i[s].push({content:h,type:l})})}):o.type==="strong"||o.type==="em"?o.tokens.forEach(c=>{a(c,o.type)}):o.type==="html"&&i[s].push({content:o.text,type:"normal"})}return se(a,"processNode"),r.forEach(o=>{var l;o.type==="paragraph"?(l=o.tokens)==null||l.forEach(c=>{a(c)}):o.type==="html"&&i[s].push({content:o.text,type:"normal"})}),i}se(Ite,"markdownToLines");function jte(e,{markdownAutoWrap:t}={}){const n=ci.lexer(e);function r(i){var s,a,o;return i.type==="text"?t===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(s=i.tokens)==null?void 0:s.map(r).join("")}</strong>`:i.type==="em"?`<em>${(a=i.tokens)==null?void 0:a.map(r).join("")}</em>`:i.type==="paragraph"?`<p>${(o=i.tokens)==null?void 0:o.map(r).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:`Unsupported markdown: ${i.type}`}return se(r,"output"),n.map(r).join("")}se(jte,"markdownToHTML");function Ote(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}se(Ote,"splitTextToChars");function Pte(e,t){const n=Ote(t.content);return g6(e,[],n,t.type)}se(Pte,"splitWordToFitWidth");function g6(e,t,n,r){if(n.length===0)return[{content:t.join(""),type:r},{content:"",type:r}];const[i,...s]=n,a=[...t,i];return e([{content:a.join(""),type:r}])?g6(e,a,s,r):(t.length===0&&i&&(t.push(i),n.shift()),[{content:t.join(""),type:r},{content:n.join(""),type:r}])}se(g6,"splitWordToFitWidthRecursion");function Dte(e,t){if(e.some(({content:n})=>n.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return _k(e,t)}se(Dte,"splitLineToFitWidth");function _k(e,t,n=[],r=[]){if(e.length===0)return r.length>0&&n.push(r),n.length>0?n:[];let i="";e[0].content===" "&&(i=" ",e.shift());const s=e.shift()??{content:" ",type:"normal"},a=[...r];if(i!==""&&a.push({content:i,type:"normal"}),a.push(s),t(a))return _k(e,t,n,a);if(r.length>0)n.push(r),e.unshift(s);else if(s.content){const[o,l]=Pte(t,s);n.push([o]),l.content&&e.unshift(l)}return _k(e,t,n)}se(_k,"splitLineToFitWidthRecursion");function w4(e,t){t&&e.attr("style",t)}se(w4,"applyStyle");async function Fte(e,t,n,r,i=!1){const s=e.append("foreignObject");s.attr("width",`${10*n}px`),s.attr("height",`${10*n}px`);const a=s.append("xhtml:div");let o=t.label;t.label&&oy(t.label)&&(o=await kD(t.label.replace(Wy.lineBreakRegex,`
`),si()));const l=t.isNode?"nodeLabel":"edgeLabel",c=a.append("span");c.html(o),w4(c,t.labelStyle),c.attr("class",`${l} ${r}`),w4(a,t.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",n+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&a.attr("class","labelBkg");let u=a.node().getBoundingClientRect();return u.width===n&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",n+"px"),u=a.node().getBoundingClientRect()),s.node()}se(Fte,"addHtmlSpan");function ST(e,t,n){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*n-.1+"em").attr("dy",n+"em")}se(ST,"createTspan");function Lte(e,t,n){const r=e.append("text"),i=ST(r,1,t);CT(i,n);const s=i.node().getComputedTextLength();return r.remove(),s}se(Lte,"computeWidthOfText");function sLe(e,t,n){var a;const r=e.append("text"),i=ST(r,1,t);CT(i,[{content:n,type:"normal"}]);const s=(a=i.node())==null?void 0:a.getBoundingClientRect();return s&&r.remove(),s}se(sLe,"computeDimensionOfText");function Bte(e,t,n,r=!1){const s=t.append("g"),a=s.insert("rect").attr("class","background").attr("style","stroke: none"),o=s.append("text").attr("y","-10.1");let l=0;for(const c of n){const u=se(h=>Lte(s,1.1,h)<=e,"checkWidth"),d=u(c)?[c]:Dte(c,u);for(const h of d){const m=ST(o,l,1.1);CT(m,h),l++}}if(r){const c=o.node().getBBox(),u=2;return a.attr("x",c.x-u).attr("y",c.y-u).attr("width",c.width+2*u).attr("height",c.height+2*u),s.node()}else return o.node()}se(Bte,"createFormattedText");function CT(e,t){e.text(""),t.forEach((n,r)=>{const i=e.append("tspan").attr("font-style",n.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",n.type==="strong"?"bold":"normal");r===0?i.text(n.content):i.text(" "+n.content)})}se(CT,"updateTextContentAndStyles");function $te(e){return e.replace(/fa[bklrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}se($te,"replaceIconSubstring");var Lh=se(async(e,t="",{style:n="",isTitle:r=!1,classes:i="",useHtmlLabels:s=!0,isNode:a=!0,width:o=200,addSvgBackground:l=!1}={},c)=>{if($t.debug("XYZ createText",t,n,r,i,s,a,"addSvgBackground: ",l),s){const u=jte(t,c),d=$te(jm(u)),h=t.replace(/\\\\/g,"\\"),m={isNode:a,label:oy(t)?h:d,labelStyle:n.replace("fill:","color:")};return await Fte(e,m,o,i,l)}else{const u=t.replace(/<br\s*\/?>/g,"<br/>"),d=Ite(u.replace("<br>","<br/>"),c),h=Bte(o,e,d,t?l:!1);if(a){/stroke:/.exec(n)&&(n=n.replace("stroke:","lineColor:"));const m=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Wr(h).attr("style",m)}else{const m=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Wr(h).select("rect").attr("style",m.replace(/background:/g,"fill:"));const y=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Wr(h).select("text").attr("style",y)}return h}},"createText");function NI(e,t,n){if(e&&e.length){const[r,i]=t,s=Math.PI/180*n,a=Math.cos(s),o=Math.sin(s);for(const l of e){const[c,u]=l;l[0]=(c-r)*a-(u-i)*o+r,l[1]=(c-r)*o+(u-i)*a+i}}}function aLe(e,t){return e[0]===t[0]&&e[1]===t[1]}function oLe(e,t,n,r=1){const i=n,s=Math.max(t,.1),a=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,o=[0,0];if(i)for(const c of a)NI(c,o,i);const l=function(c,u,d){const h=[];for(const w of c){const S=[...w];aLe(S[0],S[S.length-1])||S.push([S[0][0],S[0][1]]),S.length>2&&h.push(S)}const m=[];u=Math.max(u,.1);const y=[];for(const w of h)for(let S=0;S<w.length-1;S++){const C=w[S],k=w[S+1];if(C[1]!==k[1]){const A=Math.min(C[1],k[1]);y.push({ymin:A,ymax:Math.max(C[1],k[1]),x:A===C[1]?C[0]:k[0],islope:(k[0]-C[0])/(k[1]-C[1])})}}if(y.sort((w,S)=>w.ymin<S.ymin?-1:w.ymin>S.ymin?1:w.x<S.x?-1:w.x>S.x?1:w.ymax===S.ymax?0:(w.ymax-S.ymax)/Math.abs(w.ymax-S.ymax)),!y.length)return m;let b=[],v=y[0].ymin,x=0;for(;b.length||y.length;){if(y.length){let w=-1;for(let S=0;S<y.length&&!(y[S].ymin>v);S++)w=S;y.splice(0,w+1).forEach(S=>{b.push({s:v,edge:S})})}if(b=b.filter(w=>!(w.edge.ymax<=v)),b.sort((w,S)=>w.edge.x===S.edge.x?0:(w.edge.x-S.edge.x)/Math.abs(w.edge.x-S.edge.x)),(d!==1||x%u==0)&&b.length>1)for(let w=0;w<b.length;w+=2){const S=w+1;if(S>=b.length)break;const C=b[w].edge,k=b[S].edge;m.push([[Math.round(C.x),v],[Math.round(k.x),v]])}v+=d,b.forEach(w=>{w.edge.x=w.edge.x+d*w.edge.islope}),x++}return m}(a,s,r);if(i){for(const c of a)NI(c,o,-i);(function(c,u,d){const h=[];c.forEach(m=>h.push(...m)),NI(h,u,d)})(l,o,-i)}return l}function P1(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),oLe(e,i,r,s||1)}class y6{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=P1(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function kT(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class lLe extends y6{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=4*n.strokeWidth),r=Math.max(r,.1);const i=P1(t,Object.assign({},n,{hachureGap:r})),s=Math.PI/180*n.hachureAngle,a=[],o=.5*r*Math.cos(s),l=.5*r*Math.sin(s);for(const[c,u]of i)kT([c,u])&&a.push([[c[0]-o,c[1]+l],[...u]],[[c[0]+o,c[1]-l],[...u]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class cLe extends y6{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,i);return r.ops=r.ops.concat(s.ops),r}}class uLe{constructor(t){this.helper=t}fillPolygons(t,n){const r=P1(t,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=4*n.strokeWidth),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const a=i/4;for(const o of t){const l=kT(o),c=l/i,u=Math.ceil(c)-1,d=l-u*i,h=(o[0][0]+o[1][0])/2-i/4,m=Math.min(o[0][1],o[1][1]);for(let y=0;y<u;y++){const b=m+d+y*i,v=h-a+2*Math.random()*a,x=b-a+2*Math.random()*a,w=this.helper.ellipse(v,x,s,s,n);r.push(...w.ops)}}return{type:"fillSketch",ops:r}}}class dLe{constructor(t){this.helper=t}fillPolygons(t,n){const r=P1(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return t.forEach(a=>{const o=kT(a),l=Math.floor(o/(r+i)),c=(o+i-l*(r+i))/2;let u=a[0],d=a[1];u[0]>d[0]&&(u=a[1],d=a[0]);const h=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let m=0;m<l;m++){const y=m*(r+i),b=y+r,v=[u[0]+y*Math.cos(h)+c*Math.cos(h),u[1]+y*Math.sin(h)+c*Math.sin(h)],x=[u[0]+b*Math.cos(h)+c*Math.cos(h),u[1]+b*Math.sin(h)+c*Math.sin(h)];s.push(...this.helper.doubleLineOps(v[0],v[1],x[0],x[1],n))}}),s}}class fLe{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset,s=P1(t,n=Object.assign({},n,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(s=>{const a=kT(s),o=Math.round(a/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<o;d++){const h=2*d*n,m=2*(d+1)*n,y=Math.sqrt(2*Math.pow(n,2)),b=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],v=[l[0]+m*Math.cos(u),l[1]+m*Math.sin(u)],x=[b[0]+y*Math.cos(u+Math.PI/4),b[1]+y*Math.sin(u+Math.PI/4)];i.push(...this.helper.doubleLineOps(b[0],b[1],x[0],x[1],r),...this.helper.doubleLineOps(x[0],x[1],v[0],v[1],r))}}),i}}const fo={};let hLe=class{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}};const pLe=0,MI=1,fU=2,DS={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function II(e,t){return e.type===t}function b6(e){const t=[],n=function(a){const o=new Array;for(;a!=="";)if(a.match(/^([ \t\r\n,]+)/))a=a.substr(RegExp.$1.length);else if(a.match(/^([aAcChHlLmMqQsStTvVzZ])/))o[o.length]={type:pLe,text:RegExp.$1},a=a.substr(RegExp.$1.length);else{if(!a.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];o[o.length]={type:MI,text:`${parseFloat(RegExp.$1)}`},a=a.substr(RegExp.$1.length)}return o[o.length]={type:fU,text:""},o}(e);let r="BOD",i=0,s=n[i];for(;!II(s,fU);){let a=0;const o=[];if(r==="BOD"){if(s.text!=="M"&&s.text!=="m")return b6("M0,0"+e);i++,a=DS[s.text],r=s.text}else II(s,MI)?a=DS[r]:(i++,a=DS[s.text],r=s.text);if(!(i+a<n.length))throw new Error("Path data ended short");for(let l=i;l<i+a;l++){const c=n[l];if(!II(c,MI))throw new Error("Param not a number: "+r+","+c.text);o[o.length]=+c.text}if(typeof DS[r]!="number")throw new Error("Bad segment: "+r);{const l={key:r,data:o};t.push(l),i+=a,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}}return t}function zte(e){let t=0,n=0,r=0,i=0;const s=[];for(const{key:a,data:o}of e)switch(a){case"M":s.push({key:"M",data:[...o]}),[t,n]=o,[r,i]=o;break;case"m":t+=o[0],n+=o[1],s.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":s.push({key:"L",data:[...o]}),[t,n]=o;break;case"l":t+=o[0],n+=o[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...o]}),t=o[4],n=o[5];break;case"c":{const l=o.map((c,u)=>u%2?c+n:c+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...o]}),t=o[2],n=o[3];break;case"q":{const l=o.map((c,u)=>u%2?c+n:c+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...o]}),t=o[5],n=o[6];break;case"a":t+=o[5],n+=o[6],s.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],t,n]});break;case"H":s.push({key:"H",data:[...o]}),t=o[0];break;case"h":t+=o[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...o]}),n=o[0];break;case"v":n+=o[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...o]}),t=o[2],n=o[3];break;case"s":{const l=o.map((c,u)=>u%2?c+n:c+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...o]}),t=o[0],n=o[1];break;case"t":t+=o[0],n+=o[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=r,n=i}return s}function Ute(e){const t=[];let n="",r=0,i=0,s=0,a=0,o=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[r,i]=u,[s,a]=u;break;case"C":t.push({key:"C",data:[...u]}),r=u[4],i=u[5],o=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[r,i]=u;break;case"H":r=u[0],t.push({key:"L",data:[r,i]});break;case"V":i=u[0],t.push({key:"L",data:[r,i]});break;case"S":{let d=0,h=0;n==="C"||n==="S"?(d=r+(r-o),h=i+(i-l)):(d=r,h=i),t.push({key:"C",data:[d,h,...u]}),o=u[0],l=u[1],r=u[2],i=u[3];break}case"T":{const[d,h]=u;let m=0,y=0;n==="Q"||n==="T"?(m=r+(r-o),y=i+(i-l)):(m=r,y=i);const b=r+2*(m-r)/3,v=i+2*(y-i)/3,x=d+2*(m-d)/3,w=h+2*(y-h)/3;t.push({key:"C",data:[b,v,x,w,d,h]}),o=m,l=y,r=d,i=h;break}case"Q":{const[d,h,m,y]=u,b=r+2*(d-r)/3,v=i+2*(h-i)/3,x=m+2*(d-m)/3,w=y+2*(h-y)/3;t.push({key:"C",data:[b,v,x,w,m,y]}),o=d,l=h,r=m,i=y;break}case"A":{const d=Math.abs(u[0]),h=Math.abs(u[1]),m=u[2],y=u[3],b=u[4],v=u[5],x=u[6];d===0||h===0?(t.push({key:"C",data:[r,i,v,x,v,x]}),r=v,i=x):(r!==v||i!==x)&&(qte(r,i,v,x,d,h,m,y,b).forEach(function(w){t.push({key:"C",data:w})}),r=v,i=x);break}case"Z":t.push({key:"Z",data:[]}),r=s,i=a}n=c}return t}function Iv(e,t,n){return[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)]}function qte(e,t,n,r,i,s,a,o,l,c){const u=(d=a,Math.PI*d/180);var d;let h=[],m=0,y=0,b=0,v=0;if(c)[m,y,b,v]=c;else{[e,t]=Iv(e,t,-u),[n,r]=Iv(n,r,-u);const V=(e-n)/2,F=(t-r)/2;let J=V*V/(i*i)+F*F/(s*s);J>1&&(J=Math.sqrt(J),i*=J,s*=J);const U=i*i,G=s*s,$=U*G-U*F*F-G*V*V,ne=U*F*F+G*V*V,W=(o===l?-1:1)*Math.sqrt(Math.abs($/ne));b=W*i*F/s+(e+n)/2,v=W*-s*V/i+(t+r)/2,m=Math.asin(parseFloat(((t-v)/s).toFixed(9))),y=Math.asin(parseFloat(((r-v)/s).toFixed(9))),e<b&&(m=Math.PI-m),n<b&&(y=Math.PI-y),m<0&&(m=2*Math.PI+m),y<0&&(y=2*Math.PI+y),l&&m>y&&(m-=2*Math.PI),!l&&y>m&&(y-=2*Math.PI)}let x=y-m;if(Math.abs(x)>120*Math.PI/180){const V=y,F=n,J=r;y=l&&y>m?m+120*Math.PI/180*1:m+120*Math.PI/180*-1,h=qte(n=b+i*Math.cos(y),r=v+s*Math.sin(y),F,J,i,s,a,0,l,[y,V,b,v])}x=y-m;const w=Math.cos(m),S=Math.sin(m),C=Math.cos(y),k=Math.sin(y),A=Math.tan(x/4),R=4/3*i*A,N=4/3*s*A,I=[e,t],O=[e+R*S,t-N*w],L=[n+R*k,r-N*C],P=[n,r];if(O[0]=2*I[0]-O[0],O[1]=2*I[1]-O[1],c)return[O,L,P].concat(h);{h=[O,L,P].concat(h);const V=[];for(let F=0;F<h.length;F+=3){const J=Iv(h[F][0],h[F][1],u),U=Iv(h[F+1][0],h[F+1][1],u),G=Iv(h[F+2][0],h[F+2][1],u);V.push([J[0],J[1],U[0],U[1],G[0],G[1]])}return V}}const mLe={randOffset:function(e,t){return Jn(e,t)},randOffsetWithRange:function(e,t,n){return Sk(e,t,n)},ellipse:function(e,t,n,r,i){const s=Wte(n,r,i);return _4(e,t,i,s).opset},doubleLineOps:function(e,t,n,r,i){return vh(e,t,n,r,i,!0)}};function Vte(e,t,n,r,i){return{type:"path",ops:vh(e,t,n,r,i)}}function A2(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...vh(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&i.push(...vh(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}return r===2?Vte(e[0][0],e[0][1],e[1][0],e[1][1],n):{type:"path",ops:[]}}function gLe(e,t,n,r,i){return function(s,a){return A2(s,!0,a)}([[e,t],[e+n,t],[e+n,t+r],[e,t+r]],i)}function hU(e,t){if(e.length){const n=typeof e[0][0]=="number"?[e]:e,r=FS(n[0],1*(1+.2*t.roughness),t),i=t.disableMultiStroke?[]:FS(n[0],1.5*(1+.22*t.roughness),gU(t));for(let s=1;s<n.length;s++){const a=n[s];if(a.length){const o=FS(a,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:FS(a,1.5*(1+.22*t.roughness),gU(t));for(const c of o)c.op!=="move"&&r.push(c);for(const c of l)c.op!=="move"&&i.push(c)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function Wte(e,t,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=2*Math.PI/i;let a=Math.abs(e/2),o=Math.abs(t/2);const l=1-n.curveFitting;return a+=Jn(a*l,n),o+=Jn(o*l,n),{increment:s,rx:a,ry:o}}function _4(e,t,n,r){const[i,s]=yU(r.increment,e,t,r.rx,r.ry,1,r.increment*Sk(.1,Sk(.4,1,n),n),n);let a=Ck(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[o]=yU(r.increment,e,t,r.rx,r.ry,1.5,0,n),l=Ck(o,null,n);a=a.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:a}}}function pU(e,t,n,r,i,s,a,o,l){const c=e,u=t;let d=Math.abs(n/2),h=Math.abs(r/2);d+=Jn(.01*d,l),h+=Jn(.01*h,l);let m=i,y=s;for(;m<0;)m+=2*Math.PI,y+=2*Math.PI;y-m>2*Math.PI&&(m=0,y=2*Math.PI);const b=2*Math.PI/l.curveStepCount,v=Math.min(b/2,(y-m)/2),x=bU(v,c,u,d,h,m,y,1,l);if(!l.disableMultiStroke){const w=bU(v,c,u,d,h,m,y,1.5,l);x.push(...w)}return a&&(o?x.push(...vh(c,u,c+d*Math.cos(m),u+h*Math.sin(m),l),...vh(c,u,c+d*Math.cos(y),u+h*Math.sin(y),l)):x.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(m),u+h*Math.sin(m)]})),{type:"path",ops:x}}function mU(e,t){const n=Ute(zte(b6(e))),r=[];let i=[0,0],s=[0,0];for(const{key:a,data:o}of n)switch(a){case"M":s=[o[0],o[1]],i=[o[0],o[1]];break;case"L":r.push(...vh(s[0],s[1],o[0],o[1],t)),s=[o[0],o[1]];break;case"C":{const[l,c,u,d,h,m]=o;r.push(...yLe(l,c,u,d,h,m,s,t)),s=[h,m];break}case"Z":r.push(...vh(s[0],s[1],i[0],i[1],t)),s=[i[0],i[1]]}return{type:"path",ops:r}}function jI(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+Jn(i,t),r[0][1]+Jn(i,t)]});for(let a=1;a<s;a++)n.push({op:"lineTo",data:[r[a][0]+Jn(i,t),r[a][1]+Jn(i,t)]})}}return{type:"fillPath",ops:n}}function Ug(e,t){return function(n,r){let i=n.fillStyle||"hachure";if(!fo[i])switch(i){case"zigzag":fo[i]||(fo[i]=new lLe(r));break;case"cross-hatch":fo[i]||(fo[i]=new cLe(r));break;case"dots":fo[i]||(fo[i]=new uLe(r));break;case"dashed":fo[i]||(fo[i]=new dLe(r));break;case"zigzag-line":fo[i]||(fo[i]=new fLe(r));break;default:i="hachure",fo[i]||(fo[i]=new y6(r))}return fo[i]}(t,mLe).fillPolygons(e,t)}function gU(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function Hte(e){return e.randomizer||(e.randomizer=new hLe(e.seed||0)),e.randomizer.next()}function Sk(e,t,n,r=1){return n.roughness*r*(Hte(n)*(t-e)+e)}function Jn(e,t,n=1){return Sk(-e,e,t,n)}function vh(e,t,n,r,i,s=!1){const a=s?i.disableMultiStrokeFill:i.disableMultiStroke,o=S4(e,t,n,r,i,!0,!1);if(a)return o;const l=S4(e,t,n,r,i,!0,!0);return o.concat(l)}function S4(e,t,n,r,i,s,a){const o=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(o);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let u=i.maxRandomnessOffset||0;u*u*100>o&&(u=l/10);const d=u/2,h=.2+.2*Hte(i);let m=i.bowing*i.maxRandomnessOffset*(r-t)/200,y=i.bowing*i.maxRandomnessOffset*(e-n)/200;m=Jn(m,i,c),y=Jn(y,i,c);const b=[],v=()=>Jn(d,i,c),x=()=>Jn(u,i,c),w=i.preserveVertices;return a?b.push({op:"move",data:[e+(w?0:v()),t+(w?0:v())]}):b.push({op:"move",data:[e+(w?0:Jn(u,i,c)),t+(w?0:Jn(u,i,c))]}),a?b.push({op:"bcurveTo",data:[m+e+(n-e)*h+v(),y+t+(r-t)*h+v(),m+e+2*(n-e)*h+v(),y+t+2*(r-t)*h+v(),n+(w?0:v()),r+(w?0:v())]}):b.push({op:"bcurveTo",data:[m+e+(n-e)*h+x(),y+t+(r-t)*h+x(),m+e+2*(n-e)*h+x(),y+t+2*(r-t)*h+x(),n+(w?0:x()),r+(w?0:x())]}),b}function FS(e,t,n){if(!e.length)return[];const r=[];r.push([e[0][0]+Jn(t,n),e[0][1]+Jn(t,n)]),r.push([e[0][0]+Jn(t,n),e[0][1]+Jn(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+Jn(t,n),e[i][1]+Jn(t,n)]),i===e.length-1&&r.push([e[i][0]+Jn(t,n),e[i][1]+Jn(t,n)]);return Ck(r,null,n)}function Ck(e,t,n){const r=e.length,i=[];if(r>3){const s=[],a=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let o=1;o+2<r;o++){const l=e[o];s[0]=[l[0],l[1]],s[1]=[l[0]+(a*e[o+1][0]-a*e[o-1][0])/6,l[1]+(a*e[o+1][1]-a*e[o-1][1])/6],s[2]=[e[o+1][0]+(a*e[o][0]-a*e[o+2][0])/6,e[o+1][1]+(a*e[o][1]-a*e[o+2][1])/6],s[3]=[e[o+1][0],e[o+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...S4(e[0][0],e[0][1],e[1][0],e[1][1],n,!0,!0));return i}function yU(e,t,n,r,i,s,a,o){const l=[],c=[];if(o.roughness===0){e/=4,c.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let u=0;u<=2*Math.PI;u+=e){const d=[t+r*Math.cos(u),n+i*Math.sin(u)];l.push(d),c.push(d)}c.push([t+r*Math.cos(0),n+i*Math.sin(0)]),c.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const u=Jn(.5,o)-Math.PI/2;c.push([Jn(s,o)+t+.9*r*Math.cos(u-e),Jn(s,o)+n+.9*i*Math.sin(u-e)]);const d=2*Math.PI+u-.01;for(let h=u;h<d;h+=e){const m=[Jn(s,o)+t+r*Math.cos(h),Jn(s,o)+n+i*Math.sin(h)];l.push(m),c.push(m)}c.push([Jn(s,o)+t+r*Math.cos(u+2*Math.PI+.5*a),Jn(s,o)+n+i*Math.sin(u+2*Math.PI+.5*a)]),c.push([Jn(s,o)+t+.98*r*Math.cos(u+a),Jn(s,o)+n+.98*i*Math.sin(u+a)]),c.push([Jn(s,o)+t+.9*r*Math.cos(u+.5*a),Jn(s,o)+n+.9*i*Math.sin(u+.5*a)])}return[c,l]}function bU(e,t,n,r,i,s,a,o,l){const c=s+Jn(.1,l),u=[];u.push([Jn(o,l)+t+.9*r*Math.cos(c-e),Jn(o,l)+n+.9*i*Math.sin(c-e)]);for(let d=c;d<=a;d+=e)u.push([Jn(o,l)+t+r*Math.cos(d),Jn(o,l)+n+i*Math.sin(d)]);return u.push([t+r*Math.cos(a),n+i*Math.sin(a)]),u.push([t+r*Math.cos(a),n+i*Math.sin(a)]),Ck(u,null,l)}function yLe(e,t,n,r,i,s,a,o){const l=[],c=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let u=[0,0];const d=o.disableMultiStroke?1:2,h=o.preserveVertices;for(let m=0;m<d;m++)m===0?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(h?0:Jn(c[0],o)),a[1]+(h?0:Jn(c[0],o))]}),u=h?[i,s]:[i+Jn(c[m],o),s+Jn(c[m],o)],l.push({op:"bcurveTo",data:[e+Jn(c[m],o),t+Jn(c[m],o),n+Jn(c[m],o),r+Jn(c[m],o),u[0],u[1]]});return l}function jv(e){return[...e]}function vU(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(jv(e[0]),jv(e[1]),jv(e[2]),jv(e[2]));else{const i=[];i.push(e[0],e[0]);for(let o=1;o<e.length;o++)i.push(e[o]),o===e.length-1&&i.push(e[o]);const s=[],a=1-t;r.push(jv(i[0]));for(let o=1;o+2<i.length;o++){const l=i[o];s[0]=[l[0],l[1]],s[1]=[l[0]+(a*i[o+1][0]-a*i[o-1][0])/6,l[1]+(a*i[o+1][1]-a*i[o-1][1])/6],s[2]=[i[o+1][0]+(a*i[o][0]-a*i[o+2][0])/6,i[o+1][1]+(a*i[o][1]-a*i[o+2][1])/6],s[3]=[i[o+1][0],i[o+1][1]],r.push(s[1],s[2],s[3])}}return r}function R2(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function bLe(e,t,n){const r=R2(t,n);if(r===0)return R2(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),R2(e,Cp(t,n,i))}function Cp(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function C4(e,t,n,r){const i=r||[];if(function(o,l){const c=o[l+0],u=o[l+1],d=o[l+2],h=o[l+3];let m=3*u[0]-2*c[0]-h[0];m*=m;let y=3*u[1]-2*c[1]-h[1];y*=y;let b=3*d[0]-2*h[0]-c[0];b*=b;let v=3*d[1]-2*h[1]-c[1];return v*=v,m<b&&(m=b),y<v&&(y=v),m+y}(e,t)<n){const o=e[t+0];i.length?(s=i[i.length-1],a=o,Math.sqrt(R2(s,a))>1&&i.push(o)):i.push(o),i.push(e[t+3])}else{const l=e[t+0],c=e[t+1],u=e[t+2],d=e[t+3],h=Cp(l,c,.5),m=Cp(c,u,.5),y=Cp(u,d,.5),b=Cp(h,m,.5),v=Cp(m,y,.5),x=Cp(b,v,.5);C4([l,h,b,x],0,n,i),C4([x,v,y,d],0,n,i)}var s,a;return i}function vLe(e,t){return kk(e,0,e.length,t)}function kk(e,t,n,r,i){const s=i||[],a=e[t],o=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=bLe(e[u],a,o);d>l&&(l=d,c=u)}return Math.sqrt(l)>r?(kk(e,t,c+1,r,s),kk(e,c,n,r,s)):(s.length||s.push(a),s.push(o)),s}function OI(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++)C4(e,3*s,t,r);return n&&n>0?kk(r,0,r.length,n):r}const Vo="none";class Ek{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,s){const a=this._o(s);return this._d("line",[Vte(t,n,r,i,a)],a)}rectangle(t,n,r,i,s){const a=this._o(s),o=[],l=gLe(t,n,r,i,a);if(a.fill){const c=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];a.fillStyle==="solid"?o.push(jI([c],a)):o.push(Ug([c],a))}return a.stroke!==Vo&&o.push(l),this._d("rectangle",o,a)}ellipse(t,n,r,i,s){const a=this._o(s),o=[],l=Wte(r,i,a),c=_4(t,n,a,l);if(a.fill)if(a.fillStyle==="solid"){const u=_4(t,n,a,l).opset;u.type="fillPath",o.push(u)}else o.push(Ug([c.estimatedPoints],a));return a.stroke!==Vo&&o.push(c.opset),this._d("ellipse",o,a)}circle(t,n,r,i){const s=this.ellipse(t,n,r,r,i);return s.shape="circle",s}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[A2(t,!1,r)],r)}arc(t,n,r,i,s,a,o=!1,l){const c=this._o(l),u=[],d=pU(t,n,r,i,s,a,o,!0,c);if(o&&c.fill)if(c.fillStyle==="solid"){const h=Object.assign({},c);h.disableMultiStroke=!0;const m=pU(t,n,r,i,s,a,!0,!1,h);m.type="fillPath",u.push(m)}else u.push(function(h,m,y,b,v,x,w){const S=h,C=m;let k=Math.abs(y/2),A=Math.abs(b/2);k+=Jn(.01*k,w),A+=Jn(.01*A,w);let R=v,N=x;for(;R<0;)R+=2*Math.PI,N+=2*Math.PI;N-R>2*Math.PI&&(R=0,N=2*Math.PI);const I=(N-R)/w.curveStepCount,O=[];for(let L=R;L<=N;L+=I)O.push([S+k*Math.cos(L),C+A*Math.sin(L)]);return O.push([S+k*Math.cos(N),C+A*Math.sin(N)]),O.push([S,C]),Ug([O],w)}(t,n,r,i,s,a,c));return c.stroke!==Vo&&u.push(d),this._d("arc",u,c)}curve(t,n){const r=this._o(n),i=[],s=hU(t,r);if(r.fill&&r.fill!==Vo)if(r.fillStyle==="solid"){const a=hU(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{const a=[],o=t;if(o.length){const l=typeof o[0][0]=="number"?[o]:o;for(const c of l)c.length<3?a.push(...c):c.length===3?a.push(...OI(vU([c[0],c[0],c[1],c[2]]),10,(1+r.roughness)/2)):a.push(...OI(vU(c),10,(1+r.roughness)/2))}a.length&&i.push(Ug([a],r))}return r.stroke!==Vo&&i.push(s),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],s=A2(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(jI([t],r)):i.push(Ug([t],r))),r.stroke!==Vo&&i.push(s),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==Vo,a=r.stroke!==Vo,o=!!(r.simplification&&r.simplification<1),l=function(u,d,h){const m=Ute(zte(b6(u))),y=[];let b=[],v=[0,0],x=[];const w=()=>{x.length>=4&&b.push(...OI(x,d)),x=[]},S=()=>{w(),b.length&&(y.push(b),b=[])};for(const{key:k,data:A}of m)switch(k){case"M":S(),v=[A[0],A[1]],b.push(v);break;case"L":w(),b.push([A[0],A[1]]);break;case"C":if(!x.length){const R=b.length?b[b.length-1]:v;x.push([R[0],R[1]])}x.push([A[0],A[1]]),x.push([A[2],A[3]]),x.push([A[4],A[5]]);break;case"Z":w(),b.push([v[0],v[1]])}if(S(),!h)return y;const C=[];for(const k of y){const A=vLe(k,h);A.length&&C.push(A)}return C}(t,1,o?4-4*(r.simplification||1):(1+r.roughness)/2),c=mU(t,r);if(s)if(r.fillStyle==="solid")if(l.length===1){const u=mU(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else i.push(jI(l,r));else i.push(Ug(l,r));return a&&(o?l.forEach(u=>{i.push(A2(u,!1,r))}):i.push(c)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const s=typeof n=="number"&&n>=0?i.data.map(a=>+a.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const s of n){let a=null;switch(s.type){case"path":a={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:Vo};break;case"fillPath":a={d:this.opsToPath(s),stroke:Vo,strokeWidth:0,fill:r.fill||Vo};break;case"fillSketch":a=this.fillSketch(s,r)}a&&i.push(a)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Vo,strokeWidth:r,fill:Vo}}_mergedShape(t){return t.filter((n,r)=>r===0||n.op!=="move")}}class xLe{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Ek(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const a of n)switch(a.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,a,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const o=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,a,s,o),i.restore();break}case"fillSketch":this.fillSketch(i,a,r)}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const s of n.ops){const a=typeof r=="number"&&r>=0?s.data.map(o=>+o.toFixed(r)):s.data;switch(s.op){case"move":t.moveTo(a[0],a[1]);break;case"bcurveTo":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":t.lineTo(a[0],a[1])}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,s){const a=this.gen.line(t,n,r,i,s);return this.draw(a),a}rectangle(t,n,r,i,s){const a=this.gen.rectangle(t,n,r,i,s);return this.draw(a),a}ellipse(t,n,r,i,s){const a=this.gen.ellipse(t,n,r,i,s);return this.draw(a),a}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s),s}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,s,a,o=!1,l){const c=this.gen.arc(t,n,r,i,s,a,o,l);return this.draw(c),c}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const LS="http://www.w3.org/2000/svg";class wLe{constructor(t,n){this.svg=t,this.gen=new Ek(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(LS,"g"),a=t.options.fixedDecimalPlaceDigits;for(const o of n){let l=null;switch(o.type){case"path":l=i.createElementNS(LS,"path"),l.setAttribute("d",this.opsToPath(o,a)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(LS,"path"),l.setAttribute("d",this.opsToPath(o,a)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,o,r)}l&&s.appendChild(l)}return s}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=t.createElementNS(LS,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,s){const a=this.gen.line(t,n,r,i,s);return this.draw(a)}rectangle(t,n,r,i,s){const a=this.gen.rectangle(t,n,r,i,s);return this.draw(a)}ellipse(t,n,r,i,s){const a=this.gen.ellipse(t,n,r,i,s);return this.draw(a)}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,s,a,o=!1,l){const c=this.gen.arc(t,n,r,i,s,a,o,l);return this.draw(c)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}var Cn={canvas:(e,t)=>new xLe(e,t),svg:(e,t)=>new wLe(e,t),generator:e=>new Ek(e),newSeed:()=>Ek.newSeed()},ur=se(async(e,t,n)=>{var d,h;let r;const i=t.useHtmlLabels||qs((d=si())==null?void 0:d.htmlLabels);n?r=n:r="node default";const s=e.insert("g").attr("class",r).attr("id",t.domId||t.id),a=s.insert("g").attr("class","label").attr("style",Ja(t.labelStyle));let o;t.label===void 0?o="":o=typeof t.label=="string"?t.label:t.label[0];const l=await Lh(a,sm(jm(o),si()),{useHtmlLabels:i,width:t.width||((h=si().flowchart)==null?void 0:h.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let c=l.getBBox();const u=((t==null?void 0:t.padding)??0)/2;if(i){const m=l.children[0],y=Wr(l),b=m.getElementsByTagName("img");if(b){const v=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(x=>new Promise(w=>{function S(){if(x.style.display="flex",x.style.flexDirection="column",v){const C=si().fontSize?si().fontSize:window.getComputedStyle(document.body).fontSize,k=5,[A=lJ.fontSize]=xT(C),R=A*k+"px";x.style.minWidth=R,x.style.maxWidth=R}else x.style.width="100%";w(x)}se(S,"setupImage"),setTimeout(()=>{x.complete&&S()}),x.addEventListener("error",S),x.addEventListener("load",S)})))}c=m.getBoundingClientRect(),y.attr("width",c.width),y.attr("height",c.height)}return i?a.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):a.attr("transform","translate(0, "+-c.height/2+")"),t.centerLabel&&a.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),a.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:u,label:a}},"labelHelper"),PI=se(async(e,t,n)=>{var l,c,u,d,h,m;const r=n.useHtmlLabels||qs((c=(l=si())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),i=e.insert("g").attr("class","label").attr("style",n.labelStyle||""),s=await Lh(i,sm(jm(t),si()),{useHtmlLabels:r,width:n.width||((d=(u=si())==null?void 0:u.flowchart)==null?void 0:d.wrappingWidth),style:n.labelStyle,addSvgBackground:!!n.icon||!!n.img});let a=s.getBBox();const o=n.padding/2;if(qs((m=(h=si())==null?void 0:h.flowchart)==null?void 0:m.htmlLabels)){const y=s.children[0],b=Wr(s);a=y.getBoundingClientRect(),b.attr("width",a.width),b.attr("height",a.height)}return r?i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"):i.attr("transform","translate(0, "+-a.height/2+")"),n.centerLabel&&i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:e,bbox:a,halfPadding:o,label:i}},"insertLabel"),An=se((e,t)=>{const n=t.node().getBBox();e.width=n.width,e.height=n.height},"updateNodeBounds"),er=se((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function Yr(e){const t=e.map((n,r)=>`${r===0?"M":"L"}${n.x},${n.y}`);return t.push("Z"),t.join(" ")}se(Yr,"createPathFromPoints");function xh(e,t,n,r,i,s){const a=[],l=n-e,c=r-t,u=l/s,d=2*Math.PI/u,h=t+c/2;for(let m=0;m<=50;m++){const y=m/50,b=e+y*l,v=h+i*Math.sin(d*(b-e));a.push({x:b,y:v})}return a}se(xh,"generateFullSineWavePoints");function v6(e,t,n,r,i,s){const a=[],o=i*Math.PI/180,u=(s*Math.PI/180-o)/(r-1);for(let d=0;d<r;d++){const h=o+d*u,m=e+n*Math.cos(h),y=t+n*Math.sin(h);a.push({x:-m,y:-y})}return a}se(v6,"generateCirclePoints");var _Le=se((e,t)=>{var n=e.x,r=e.y,i=t.x-n,s=t.y-r,a=e.width/2,o=e.height/2,l,c;return Math.abs(s)*a>Math.abs(i)*o?(s<0&&(o=-o),l=s===0?0:o*i/s,c=o):(i<0&&(a=-a),l=a,c=i===0?0:a*s/i),{x:n+l,y:r+c}},"intersectRect"),Ky=_Le;function Gte(e,t){t&&e.attr("style",t)}se(Gte,"applyStyle");async function Kte(e){const t=Wr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=t.append("xhtml:div");let r=e.label;e.label&&oy(e.label)&&(r=await kD(e.label.replace(Wy.lineBreakRegex,`
`),si()));const i=e.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+i+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+r+"</span>"),Gte(n,e.labelStyle),n.style("display","inline-block"),n.style("padding-right","1px"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}se(Kte,"addHtmlLabel");var SLe=se(async(e,t,n,r)=>{let i=e||"";if(typeof i=="object"&&(i=i[0]),qs(si().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),$t.info("vertexText"+i);const s={isNode:r,label:jm(i).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await Kte(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",t.replace("color:","fill:"));let a=[];typeof i=="string"?a=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?a=i:a=[];for(const o of a){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),n?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),s.appendChild(l)}return s}},"createLabel"),Fp=SLe,Zd=se((e,t,n,r,i)=>["M",e+i,t,"H",e+n-i,"A",i,i,0,0,1,e+n,t+i,"V",t+r-i,"A",i,i,0,0,1,e+n-i,t+r,"H",e+i,"A",i,i,0,0,1,e,t+r-i,"V",t+i,"A",i,i,0,0,1,e+i,t,"Z"].join(" "),"createRoundedRectPathD"),CLe=se(e=>{const{handDrawnSeed:t}=si();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),Yy=se(e=>{const t=kLe([...e.cssCompiledStyles||[],...e.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),kLe=se(e=>{const t=new Map;return e.forEach(n=>{const[r,i]=n.split(":");t.set(r.trim(),i==null?void 0:i.trim())}),t},"styles2Map"),Yte=se(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),Rn=se(e=>{const{stylesArray:t}=Yy(e),n=[],r=[],i=[],s=[];return t.forEach(a=>{const o=a[0];Yte(o)?n.push(a.join(":")+" !important"):(r.push(a.join(":")+" !important"),o.includes("stroke")&&i.push(a.join(":")+" !important"),o==="fill"&&s.push(a.join(":")+" !important"))}),{labelStyles:n.join(";"),nodeStyles:r.join(";"),stylesArray:t,borderStyles:i,backgroundStyles:s}},"styles2String"),En=se((e,t)=>{var l;const{themeVariables:n,handDrawnSeed:r}=si(),{nodeBorder:i,mainBkg:s}=n,{stylesMap:a}=Yy(e);return Object.assign({roughness:.7,fill:a.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:a.get("stroke")||i,seed:r,strokeWidth:((l=a.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),Zte=se(async(e,t)=>{$t.info("Creating subgraph rect for ",t.id,t);const n=si(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:s,clusterBorder:a}=r,{labelStyles:o,nodeStyles:l,borderStyles:c,backgroundStyles:u}=Rn(t),d=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),h=qs(n.flowchart.htmlLabels),m=d.insert("g").attr("class","cluster-label "),y=await Lh(m,t.label,{style:t.labelStyle,useHtmlLabels:h,isNode:!0});let b=y.getBBox();if(qs(n.flowchart.htmlLabels)){const R=y.children[0],N=Wr(y);b=R.getBoundingClientRect(),N.attr("width",b.width),N.attr("height",b.height)}const v=t.width<=b.width+t.padding?b.width+t.padding:t.width;t.width<=b.width+t.padding?t.diff=(v-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height,w=t.x-v/2,S=t.y-x/2;$t.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const R=Cn.svg(d),N=En(t,{roughness:.7,fill:s,stroke:a,fillWeight:3,seed:i}),I=R.path(Zd(w,S,v,x,0),N);C=d.insert(()=>($t.debug("Rough node insert CXC",I),I),":first-child"),C.select("path:nth-child(2)").attr("style",c.join(";")),C.select("path").attr("style",u.join(";").replace("fill","stroke"))}else C=d.insert("rect",":first-child"),C.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",w).attr("y",S).attr("width",v).attr("height",x);const{subGraphTitleTopMargin:k}=LD(n);if(m.attr("transform",`translate(${t.x-b.width/2}, ${t.y-t.height/2+k})`),o){const R=m.select("span");R&&R.attr("style",o)}const A=C.node().getBBox();return t.offsetX=0,t.width=A.width,t.height=A.height,t.offsetY=b.height-t.padding/2,t.intersect=function(R){return Ky(t,R)},{cluster:d,labelBBox:b}},"rect"),ELe=se((e,t)=>{const n=e.insert("g").attr("class","note-cluster").attr("id",t.id),r=n.insert("rect",":first-child"),i=0*t.padding,s=i/2;r.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-s).attr("y",t.y-t.height/2-s).attr("width",t.width+i).attr("height",t.height+i).attr("fill","none");const a=r.node().getBBox();return t.width=a.width,t.height=a.height,t.intersect=function(o){return Ky(t,o)},{cluster:n,labelBBox:{width:0,height:0}}},"noteGroup"),TLe=se(async(e,t)=>{const n=si(),{themeVariables:r,handDrawnSeed:i}=n,{altBackground:s,compositeBackground:a,compositeTitleBackground:o,nodeBorder:l}=r,c=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),u=c.insert("g",":first-child"),d=c.insert("g").attr("class","cluster-label");let h=c.append("rect");const m=d.node().appendChild(await Fp(t.label,t.labelStyle,void 0,!0));let y=m.getBBox();if(qs(n.flowchart.htmlLabels)){const I=m.children[0],O=Wr(m);y=I.getBoundingClientRect(),O.attr("width",y.width),O.attr("height",y.height)}const b=0*t.padding,v=b/2,x=(t.width<=y.width+t.padding?y.width+t.padding:t.width)+b;t.width<=y.width+t.padding?t.diff=(x-t.width)/2-t.padding:t.diff=-t.padding;const w=t.height+b,S=t.height+b-y.height-6,C=t.x-x/2,k=t.y-w/2;t.width=x;const A=t.y-t.height/2-v+y.height+2;let R;if(t.look==="handDrawn"){const I=t.cssClasses.includes("statediagram-cluster-alt"),O=Cn.svg(c),L=t.rx||t.ry?O.path(Zd(C,k,x,w,10),{roughness:.7,fill:o,fillStyle:"solid",stroke:l,seed:i}):O.rectangle(C,k,x,w,{seed:i});R=c.insert(()=>L,":first-child");const P=O.rectangle(C,A,x,S,{fill:I?s:a,fillStyle:I?"hachure":"solid",stroke:l,seed:i});R=c.insert(()=>L,":first-child"),h=c.insert(()=>P)}else R=u.insert("rect",":first-child"),R.attr("class","outer").attr("x",C).attr("y",k).attr("width",x).attr("height",w).attr("data-look",t.look),h.attr("class","inner").attr("x",C).attr("y",A).attr("width",x).attr("height",S);d.attr("transform",`translate(${t.x-y.width/2}, ${k+1-(qs(n.flowchart.htmlLabels)?0:3)})`);const N=R.node().getBBox();return t.height=N.height,t.offsetX=0,t.offsetY=y.height-t.padding/2,t.labelBBox=y,t.intersect=function(I){return Ky(t,I)},{cluster:c,labelBBox:y}},"roundedWithTitle"),ALe=se(async(e,t)=>{$t.info("Creating subgraph rect for ",t.id,t);const n=si(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:s,clusterBorder:a}=r,{labelStyles:o,nodeStyles:l,borderStyles:c,backgroundStyles:u}=Rn(t),d=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),h=qs(n.flowchart.htmlLabels),m=d.insert("g").attr("class","cluster-label "),y=await Lh(m,t.label,{style:t.labelStyle,useHtmlLabels:h,isNode:!0,width:t.width});let b=y.getBBox();if(qs(n.flowchart.htmlLabels)){const R=y.children[0],N=Wr(y);b=R.getBoundingClientRect(),N.attr("width",b.width),N.attr("height",b.height)}const v=t.width<=b.width+t.padding?b.width+t.padding:t.width;t.width<=b.width+t.padding?t.diff=(v-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height,w=t.x-v/2,S=t.y-x/2;$t.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const R=Cn.svg(d),N=En(t,{roughness:.7,fill:s,stroke:a,fillWeight:4,seed:i}),I=R.path(Zd(w,S,v,x,t.rx),N);C=d.insert(()=>($t.debug("Rough node insert CXC",I),I),":first-child"),C.select("path:nth-child(2)").attr("style",c.join(";")),C.select("path").attr("style",u.join(";").replace("fill","stroke"))}else C=d.insert("rect",":first-child"),C.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",w).attr("y",S).attr("width",v).attr("height",x);const{subGraphTitleTopMargin:k}=LD(n);if(m.attr("transform",`translate(${t.x-b.width/2}, ${t.y-t.height/2+k})`),o){const R=m.select("span");R&&R.attr("style",o)}const A=C.node().getBBox();return t.offsetX=0,t.width=A.width,t.height=A.height,t.offsetY=b.height-t.padding/2,t.intersect=function(R){return Ky(t,R)},{cluster:d,labelBBox:b}},"kanbanSection"),RLe=se((e,t)=>{const n=si(),{themeVariables:r,handDrawnSeed:i}=n,{nodeBorder:s}=r,a=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),o=a.insert("g",":first-child"),l=0*t.padding,c=t.width+l;t.diff=-t.padding;const u=t.height+l,d=t.x-c/2,h=t.y-u/2;t.width=c;let m;if(t.look==="handDrawn"){const v=Cn.svg(a).rectangle(d,h,c,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:i});m=a.insert(()=>v,":first-child")}else m=o.insert("rect",":first-child"),m.attr("class","divider").attr("x",d).attr("y",h).attr("width",c).attr("height",u).attr("data-look",t.look);const y=m.node().getBBox();return t.height=y.height,t.offsetX=0,t.offsetY=0,t.intersect=function(b){return Ky(t,b)},{cluster:a,labelBBox:{}}},"divider"),NLe=Zte,MLe={rect:Zte,squareRect:NLe,roundedWithTitle:TLe,noteGroup:ELe,divider:RLe,kanbanSection:ALe},Xte=new Map,ILe=se(async(e,t)=>{const n=t.shape||"rect",r=await MLe[n](e,t);return Xte.set(t.id,r),r},"insertCluster"),Wdt=se(()=>{Xte=new Map},"clear");function Jte(e,t){return e.intersect(t)}se(Jte,"intersectNode");var jLe=Jte;function Qte(e,t,n,r){var i=e.x,s=e.y,a=i-r.x,o=s-r.y,l=Math.sqrt(t*t*o*o+n*n*a*a),c=Math.abs(t*n*a/l);r.x<i&&(c=-c);var u=Math.abs(t*n*o/l);return r.y<s&&(u=-u),{x:i+c,y:s+u}}se(Qte,"intersectEllipse");var ene=Qte;function tne(e,t,n){return ene(e,t,t,n)}se(tne,"intersectCircle");var OLe=tne;function nne(e,t,n,r){var i,s,a,o,l,c,u,d,h,m,y,b,v,x,w;if(i=t.y-e.y,a=e.x-t.x,l=t.x*e.y-e.x*t.y,h=i*n.x+a*n.y+l,m=i*r.x+a*r.y+l,!(h!==0&&m!==0&&k4(h,m))&&(s=r.y-n.y,o=n.x-r.x,c=r.x*n.y-n.x*r.y,u=s*e.x+o*e.y+c,d=s*t.x+o*t.y+c,!(u!==0&&d!==0&&k4(u,d))&&(y=i*o-s*a,y!==0)))return b=Math.abs(y/2),v=a*c-o*l,x=v<0?(v-b)/y:(v+b)/y,v=s*l-i*c,w=v<0?(v-b)/y:(v+b)/y,{x,y:w}}se(nne,"intersectLine");function k4(e,t){return e*t>0}se(k4,"sameSign");var PLe=nne;function rne(e,t,n){let r=e.x,i=e.y,s=[],a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(u){a=Math.min(a,u.x),o=Math.min(o,u.y)}):(a=Math.min(a,t.x),o=Math.min(o,t.y));let l=r-e.width/2-a,c=i-e.height/2-o;for(let u=0;u<t.length;u++){let d=t[u],h=t[u<t.length-1?u+1:0],m=PLe(e,n,{x:l+d.x,y:c+d.y},{x:l+h.x,y:c+h.y});m&&s.push(m)}return s.length?(s.length>1&&s.sort(function(u,d){let h=u.x-n.x,m=u.y-n.y,y=Math.sqrt(h*h+m*m),b=d.x-n.x,v=d.y-n.y,x=Math.sqrt(b*b+v*v);return y<x?-1:y===x?0:1}),s[0]):e}se(rne,"intersectPolygon");var DLe=rne,wn={node:jLe,circle:OLe,ellipse:ene,polygon:DLe,rect:Ky};function ine(e,t){const{labelStyles:n}=Rn(t);t.labelStyle=n;const r=er(t);let i=r;r||(i="anchor");const s=e.insert("g").attr("class",i).attr("id",t.domId||t.id),a=1,{cssStyles:o}=t,l=Cn.svg(s),c=En(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(c.roughness=0);const u=l.circle(0,0,a*2,c),d=s.insert(()=>u,":first-child");return d.attr("class","anchor").attr("style",Ja(o)),An(t,d),t.intersect=function(h){return $t.info("Circle intersect",t,a,h),wn.circle(t,a,h)},s}se(ine,"anchor");function E4(e,t,n,r,i,s,a){const l=(e+n)/2,c=(t+r)/2,u=Math.atan2(r-t,n-e),d=(n-e)/2,h=(r-t)/2,m=d/i,y=h/s,b=Math.sqrt(m**2+y**2);if(b>1)throw new Error("The given radii are too small to create an arc between the points.");const v=Math.sqrt(1-b**2),x=l+v*s*Math.sin(u)*(a?-1:1),w=c-v*i*Math.cos(u)*(a?-1:1),S=Math.atan2((t-w)/s,(e-x)/i);let k=Math.atan2((r-w)/s,(n-x)/i)-S;a&&k<0&&(k+=2*Math.PI),!a&&k>0&&(k-=2*Math.PI);const A=[];for(let R=0;R<20;R++){const N=R/19,I=S+N*k,O=x+i*Math.cos(I),L=w+s*Math.sin(I);A.push({x:O,y:L})}return A}se(E4,"generateArcPoints");async function sne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=s.width+t.padding+20,o=s.height+t.padding,l=o/2,c=l/(2.5+o/50),{cssStyles:u}=t,d=[{x:a/2,y:-o/2},{x:-a/2,y:-o/2},...E4(-a/2,-o/2,-a/2,o/2,c,l,!1),{x:a/2,y:o/2},...E4(a/2,o/2,a/2,-o/2,c,l,!0)],h=Cn.svg(i),m=En(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=Yr(d),b=h.path(y,m),v=i.insert(()=>b,":first-child");return v.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(${c/2}, 0)`),An(t,v),t.intersect=function(x){return wn.polygon(t,d,x)},i}se(sne,"bowTieRect");function Xd(e,t,n,r){return e.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+n/2+")")}se(Xd,"insertPolygonShape");async function ane(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=s.height+t.padding,o=12,l=s.width+t.padding+o,c=0,u=l,d=-a,h=0,m=[{x:c+o,y:d},{x:u,y:d},{x:u,y:h},{x:c,y:h},{x:c,y:d+o},{x:c+o,y:d}];let y;const{cssStyles:b}=t;if(t.look==="handDrawn"){const v=Cn.svg(i),x=En(t,{}),w=Yr(m),S=v.path(w,x);y=i.insert(()=>S,":first-child").attr("transform",`translate(${-l/2}, ${a/2})`),b&&y.attr("style",b)}else y=Xd(i,l,a,m);return r&&y.attr("style",r),An(t,y),t.intersect=function(v){return wn.polygon(t,m,v)},i}se(ane,"card");function one(e,t){const{nodeStyles:n}=Rn(t);t.label="";const r=e.insert("g").attr("class",er(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,s=Math.max(28,t.width??0),a=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],o=Cn.svg(r),l=En(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=Yr(a),u=o.path(c,l),d=r.insert(()=>u,":first-child");return i&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",i),n&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",n),t.width=28,t.height=28,t.intersect=function(h){return wn.polygon(t,a,h)},r}se(one,"choice");async function lne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:a}=await ur(e,t,er(t)),o=s.width/2+a;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=Cn.svg(i),d=En(t,{}),h=u.circle(0,0,o*2,d);l=i.insert(()=>h,":first-child"),l.attr("class","basic label-container").attr("style",Ja(c))}else l=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",r).attr("r",o).attr("cx",0).attr("cy",0);return An(t,l),t.intersect=function(u){return $t.info("Circle intersect",t,o,u),wn.circle(t,o,u)},i}se(lne,"circle");function cne(e){const t=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4),r=e*2,i={x:r/2*t,y:r/2*n},s={x:-(r/2)*t,y:r/2*n},a={x:-(r/2)*t,y:-(r/2)*n},o={x:r/2*t,y:-(r/2)*n};return`M ${s.x},${s.y} L ${o.x},${o.y}
                   M ${i.x},${i.y} L ${a.x},${a.y}`}se(cne,"createLine");function une(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n,t.label="";const i=e.insert("g").attr("class",er(t)).attr("id",t.domId??t.id),s=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:a}=t,o=Cn.svg(i),l=En(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=o.circle(0,0,s*2,l),u=cne(s),d=o.path(u,l),h=i.insert(()=>c,":first-child");return h.insert(()=>d),a&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",a),r&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",r),An(t,h),t.intersect=function(m){return $t.info("crossedCircle intersect",t,{radius:s,point:m}),wn.circle(t,s,m)},i}se(une,"crossedCircle");function pd(e,t,n,r=100,i=0,s=180){const a=[],o=i*Math.PI/180,u=(s*Math.PI/180-o)/(r-1);for(let d=0;d<r;d++){const h=o+d*u,m=e+n*Math.cos(h),y=t+n*Math.sin(h);a.push({x:-m,y:-y})}return a}se(pd,"generateCirclePoints");async function dne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=t,d=[...pd(o/2,-l/2,c,30,-90,0),{x:-o/2-c,y:c},...pd(o/2+c*2,-c,c,20,-180,-270),...pd(o/2+c*2,c,c,20,-90,-180),{x:-o/2-c,y:-l/2},...pd(o/2,l/2,c,20,0,90)],h=[{x:o/2,y:-l/2-c},{x:-o/2,y:-l/2-c},...pd(o/2,-l/2,c,20,-90,0),{x:-o/2-c,y:-c},...pd(o/2+o*.1,-c,c,20,-180,-270),...pd(o/2+o*.1,c,c,20,-90,-180),{x:-o/2-c,y:l/2},...pd(o/2,l/2,c,20,0,90),{x:-o/2,y:l/2+c},{x:o/2,y:l/2+c}],m=Cn.svg(i),y=En(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=Yr(d).replace("Z",""),x=m.path(v,y),w=Yr(h),S=m.path(w,{...y}),C=i.insert("g",":first-child");return C.insert(()=>S,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),u&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(${c}, 0)`),a.attr("transform",`translate(${-o/2+c-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),An(t,C),t.intersect=function(k){return wn.polygon(t,h,k)},i}se(dne,"curlyBraceLeft");function md(e,t,n,r=100,i=0,s=180){const a=[],o=i*Math.PI/180,u=(s*Math.PI/180-o)/(r-1);for(let d=0;d<r;d++){const h=o+d*u,m=e+n*Math.cos(h),y=t+n*Math.sin(h);a.push({x:m,y})}return a}se(md,"generateCirclePoints");async function fne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=t,d=[...md(o/2,-l/2,c,20,-90,0),{x:o/2+c,y:-c},...md(o/2+c*2,-c,c,20,-180,-270),...md(o/2+c*2,c,c,20,-90,-180),{x:o/2+c,y:l/2},...md(o/2,l/2,c,20,0,90)],h=[{x:-o/2,y:-l/2-c},{x:o/2,y:-l/2-c},...md(o/2,-l/2,c,20,-90,0),{x:o/2+c,y:-c},...md(o/2+c*2,-c,c,20,-180,-270),...md(o/2+c*2,c,c,20,-90,-180),{x:o/2+c,y:l/2},...md(o/2,l/2,c,20,0,90),{x:o/2,y:l/2+c},{x:-o/2,y:l/2+c}],m=Cn.svg(i),y=En(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=Yr(d).replace("Z",""),x=m.path(v,y),w=Yr(h),S=m.path(w,{...y}),C=i.insert("g",":first-child");return C.insert(()=>S,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),u&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(${-c}, 0)`),a.attr("transform",`translate(${-o/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),An(t,C),t.intersect=function(k){return wn.polygon(t,h,k)},i}se(fne,"curlyBraceRight");function fa(e,t,n,r=100,i=0,s=180){const a=[],o=i*Math.PI/180,u=(s*Math.PI/180-o)/(r-1);for(let d=0;d<r;d++){const h=o+d*u,m=e+n*Math.cos(h),y=t+n*Math.sin(h);a.push({x:-m,y:-y})}return a}se(fa,"generateCirclePoints");async function hne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=t,d=[...fa(o/2,-l/2,c,30,-90,0),{x:-o/2-c,y:c},...fa(o/2+c*2,-c,c,20,-180,-270),...fa(o/2+c*2,c,c,20,-90,-180),{x:-o/2-c,y:-l/2},...fa(o/2,l/2,c,20,0,90)],h=[...fa(-o/2+c+c/2,-l/2,c,20,-90,-180),{x:o/2-c/2,y:c},...fa(-o/2-c/2,-c,c,20,0,90),...fa(-o/2-c/2,c,c,20,-90,0),{x:o/2-c/2,y:-c},...fa(-o/2+c+c/2,l/2,c,30,-180,-270)],m=[{x:o/2,y:-l/2-c},{x:-o/2,y:-l/2-c},...fa(o/2,-l/2,c,20,-90,0),{x:-o/2-c,y:-c},...fa(o/2+c*2,-c,c,20,-180,-270),...fa(o/2+c*2,c,c,20,-90,-180),{x:-o/2-c,y:l/2},...fa(o/2,l/2,c,20,0,90),{x:-o/2,y:l/2+c},{x:o/2-c-c/2,y:l/2+c},...fa(-o/2+c+c/2,-l/2,c,20,-90,-180),{x:o/2-c/2,y:c},...fa(-o/2-c/2,-c,c,20,0,90),...fa(-o/2-c/2,c,c,20,-90,0),{x:o/2-c/2,y:-c},...fa(-o/2+c+c/2,l/2,c,30,-180,-270)],y=Cn.svg(i),b=En(t,{fill:"none"});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=Yr(d).replace("Z",""),w=y.path(x,b),C=Yr(h).replace("Z",""),k=y.path(C,b),A=Yr(m),R=y.path(A,{...b}),N=i.insert("g",":first-child");return N.insert(()=>R,":first-child").attr("stroke-opacity",0),N.insert(()=>w,":first-child"),N.insert(()=>k,":first-child"),N.attr("class","text"),u&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",r),N.attr("transform",`translate(${c-c/4}, 0)`),a.attr("transform",`translate(${-o/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),An(t,N),t.intersect=function(I){return wn.polygon(t,m,I)},i}se(hne,"curlyBraces");async function pne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=80,o=20,l=Math.max(a,(s.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),c=Math.max(o,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=c/2,{cssStyles:d}=t,h=Cn.svg(i),m=En(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=l,b=c,v=y-u,x=b/4,w=[{x:v,y:0},{x,y:0},{x:0,y:b/2},{x,y:b},{x:v,y:b},...v6(-v,-b/2,u,50,270,90)],S=Yr(w),C=h.path(S,m),k=i.insert(()=>C,":first-child");return k.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",d),r&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",r),k.attr("transform",`translate(${-l/2}, ${-c/2})`),An(t,k),t.intersect=function(A){return wn.polygon(t,w,A)},i}se(pne,"curvedTrapezoid");var FLe=se((e,t,n,r,i,s)=>[`M${e},${t+s}`,`a${i},${s} 0,0,0 ${n},0`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createCylinderPathD"),LLe=se((e,t,n,r,i,s)=>[`M${e},${t+s}`,`M${e+n},${t+s}`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createOuterCylinderPathD"),BLe=se((e,t,n,r,i,s)=>[`M${e-n/2},${-r/2}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function mne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+t.padding,t.width??0),l=o/2,c=l/(2.5+o/50),u=Math.max(s.height+c+t.padding,t.height??0);let d;const{cssStyles:h}=t;if(t.look==="handDrawn"){const m=Cn.svg(i),y=LLe(0,0,o,u,l,c),b=BLe(0,c,o,u,l,c),v=m.path(y,En(t,{})),x=m.path(b,En(t,{fill:"none"}));d=i.insert(()=>x,":first-child"),d=i.insert(()=>v,":first-child"),d.attr("class","basic label-container"),h&&d.attr("style",h)}else{const m=FLe(0,0,o,u,l,c);d=i.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",Ja(h)).attr("style",r)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-o/2}, ${-(u/2+c)})`),An(t,d),a.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(t.padding??0)/1.5-(s.y-(s.top??0))})`),t.intersect=function(m){const y=wn.rect(t,m),b=y.x-(t.x??0);if(l!=0&&(Math.abs(b)<(t.width??0)/2||Math.abs(b)==(t.width??0)/2&&Math.abs(y.y-(t.y??0))>(t.height??0)/2-c)){let v=c*c*(1-b*b/(l*l));v>0&&(v=Math.sqrt(v)),v=c-v,m.y-(t.y??0)>0&&(v=-v),y.y+=v}return y},i}se(mne,"cylinder");async function gne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=s.width+t.padding,l=s.height+t.padding,c=l*.2,u=-o/2,d=-l/2-c/2,{cssStyles:h}=t,m=Cn.svg(i),y=En(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:u,y:d+c},{x:-u,y:d+c},{x:-u,y:-d},{x:u,y:-d},{x:u,y:d},{x:-u,y:d},{x:-u,y:d+c}],v=m.polygon(b.map(w=>[w.x,w.y]),y),x=i.insert(()=>v,":first-child");return x.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",r),a.attr("transform",`translate(${u+(t.padding??0)/2-(s.x-(s.left??0))}, ${d+c+(t.padding??0)/2-(s.y-(s.top??0))})`),An(t,x),t.intersect=function(w){return wn.rect(t,w)},i}se(gne,"dividedRectangle");async function yne(e,t){var h,m;const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:a}=await ur(e,t,er(t)),l=s.width/2+a+5,c=s.width/2+a;let u;const{cssStyles:d}=t;if(t.look==="handDrawn"){const y=Cn.svg(i),b=En(t,{roughness:.2,strokeWidth:2.5}),v=En(t,{roughness:.2,strokeWidth:1.5}),x=y.circle(0,0,l*2,b),w=y.circle(0,0,c*2,v);u=i.insert("g",":first-child"),u.attr("class",Ja(t.cssClasses)).attr("style",Ja(d)),(h=u.node())==null||h.appendChild(x),(m=u.node())==null||m.appendChild(w)}else{u=i.insert("g",":first-child");const y=u.insert("circle",":first-child"),b=u.insert("circle");u.attr("class","basic label-container").attr("style",r),y.attr("class","outer-circle").attr("style",r).attr("r",l).attr("cx",0).attr("cy",0),b.attr("class","inner-circle").attr("style",r).attr("r",c).attr("cx",0).attr("cy",0)}return An(t,u),t.intersect=function(y){return $t.info("DoubleCircle intersect",t,l,y),wn.circle(t,l,y)},i}se(yne,"doublecircle");function bne(e,t,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=Rn(t);t.label="",t.labelStyle=r;const s=e.insert("g").attr("class",er(t)).attr("id",t.domId??t.id),a=7,{cssStyles:o}=t,l=Cn.svg(s),{nodeBorder:c}=n,u=En(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(u.roughness=0);const d=l.circle(0,0,a*2,u),h=s.insert(()=>d,":first-child");return h.selectAll("path").attr("style",`fill: ${c} !important;`),o&&o.length>0&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",o),i&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",i),An(t,h),t.intersect=function(m){return $t.info("filledCircle intersect",t,{radius:a,point:m}),wn.circle(t,a,m)},s}se(bne,"filledCircle");async function vne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=s.width+(t.padding??0),l=o+s.height,c=o+s.height,u=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:d}=t,h=Cn.svg(i),m=En(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=Yr(u),b=h.path(y,m),v=i.insert(()=>b,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return d&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",d),r&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",r),t.width=o,t.height=l,An(t,v),a.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(t.padding??0)/2+(s.y-(s.top??0))})`),t.intersect=function(x){return $t.info("Triangle intersect",t,u,x),wn.polygon(t,u,x)},i}se(vne,"flippedTriangle");function xne(e,t,{dir:n,config:{state:r,themeVariables:i}}){const{nodeStyles:s}=Rn(t);t.label="";const a=e.insert("g").attr("class",er(t)).attr("id",t.domId??t.id),{cssStyles:o}=t;let l=Math.max(70,(t==null?void 0:t.width)??0),c=Math.max(10,(t==null?void 0:t.height)??0);n==="LR"&&(l=Math.max(10,(t==null?void 0:t.width)??0),c=Math.max(70,(t==null?void 0:t.height)??0));const u=-1*l/2,d=-1*c/2,h=Cn.svg(a),m=En(t,{stroke:i.lineColor,fill:i.lineColor});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=h.rectangle(u,d,l,c,m),b=a.insert(()=>y,":first-child");o&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",o),s&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",s),An(t,b);const v=(r==null?void 0:r.padding)??0;return t.width&&t.height&&(t.width+=v/2||0,t.height+=v/2||0),t.intersect=function(x){return wn.rect(t,x)},a}se(xne,"forkJoin");async function wne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const i=80,s=50,{shapeSvg:a,bbox:o}=await ur(e,t,er(t)),l=Math.max(i,o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s,o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=c/2,{cssStyles:d}=t,h=Cn.svg(a),m=En(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-l/2,y:-c/2},{x:l/2-u,y:-c/2},...v6(-l/2+u,0,u,50,90,270),{x:l/2-u,y:c/2},{x:-l/2,y:c/2}],b=Yr(y),v=h.path(b,m),x=a.insert(()=>v,":first-child");return x.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),r&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",r),An(t,x),t.intersect=function(w){return $t.info("Pill intersect",t,{radius:u,point:w}),wn.polygon(t,y,w)},a}se(wne,"halfRoundedRectangle");var $Le=se((e,t,n,r,i)=>[`M${e+i},${t}`,`L${e+n-i},${t}`,`L${e+n},${t-r/2}`,`L${e+n-i},${t-r}`,`L${e+i},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createHexagonPathD");async function _ne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=4,o=s.height+t.padding,l=o/a,c=s.width+2*l+t.padding,u=[{x:l,y:0},{x:c-l,y:0},{x:c,y:-o/2},{x:c-l,y:-o},{x:l,y:-o},{x:0,y:-o/2}];let d;const{cssStyles:h}=t;if(t.look==="handDrawn"){const m=Cn.svg(i),y=En(t,{}),b=$Le(0,0,c,o,l),v=m.path(b,y);d=i.insert(()=>v,":first-child").attr("transform",`translate(${-c/2}, ${o/2})`),h&&d.attr("style",h)}else d=Xd(i,c,o,u);return r&&d.attr("style",r),t.width=c,t.height=o,An(t,d),t.intersect=function(m){return wn.polygon(t,u,m)},i}se(_ne,"hexagon");async function Sne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.label="",t.labelStyle=n;const{shapeSvg:i}=await ur(e,t,er(t)),s=Math.max(30,(t==null?void 0:t.width)??0),a=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:o}=t,l=Cn.svg(i),c=En(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const u=[{x:0,y:0},{x:s,y:0},{x:0,y:a},{x:s,y:a}],d=Yr(u),h=l.path(d,c),m=i.insert(()=>h,":first-child");return m.attr("class","basic label-container"),o&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",o),r&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",r),m.attr("transform",`translate(${-s/2}, ${-a/2})`),An(t,m),t.intersect=function(y){return $t.info("Pill intersect",t,{points:u}),wn.polygon(t,u,y)},i}se(Sne,"hourglass");async function Cne(e,t,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Rn(t);t.labelStyle=i;const s=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(s,a),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:c,bbox:u,label:d}=await ur(e,t,"icon-shape default"),h=t.pos==="t",m=o,y=o,{nodeBorder:b}=n,{stylesMap:v}=Yy(t),x=-y/2,w=-m/2,S=t.label?8:0,C=Cn.svg(c),k=En(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const A=C.rectangle(x,w,y,m,k),R=Math.max(y,u.width),N=m+u.height+S,I=C.rectangle(-R/2,-N/2,R,N,{...k,fill:"transparent",stroke:"none"}),O=c.insert(()=>A,":first-child"),L=c.insert(()=>I);if(t.icon){const P=c.append("g");P.html(`<g>${await cT(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const V=P.node().getBBox(),F=V.width,J=V.height,U=V.x,G=V.y;P.attr("transform",`translate(${-F/2-U},${h?u.height/2+S/2-J/2-G:-u.height/2-S/2-J/2-G})`),P.attr("style",`color: ${v.get("stroke")??b};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${h?-N/2:N/2-u.height})`),O.attr("transform",`translate(0,${h?u.height/2+S/2:-u.height/2-S/2})`),An(t,L),t.intersect=function(P){if($t.info("iconSquare intersect",t,P),!t.label)return wn.rect(t,P);const V=t.x??0,F=t.y??0,J=t.height??0;let U=[];return h?U=[{x:V-u.width/2,y:F-J/2},{x:V+u.width/2,y:F-J/2},{x:V+u.width/2,y:F-J/2+u.height+S},{x:V+y/2,y:F-J/2+u.height+S},{x:V+y/2,y:F+J/2},{x:V-y/2,y:F+J/2},{x:V-y/2,y:F-J/2+u.height+S},{x:V-u.width/2,y:F-J/2+u.height+S}]:U=[{x:V-y/2,y:F-J/2},{x:V+y/2,y:F-J/2},{x:V+y/2,y:F-J/2+m},{x:V+u.width/2,y:F-J/2+m},{x:V+u.width/2/2,y:F+J/2},{x:V-u.width/2,y:F+J/2},{x:V-u.width/2,y:F-J/2+m},{x:V-y/2,y:F-J/2+m}],wn.polygon(t,U,P)},c}se(Cne,"icon");async function kne(e,t,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Rn(t);t.labelStyle=i;const s=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(s,a),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:c,bbox:u,label:d}=await ur(e,t,"icon-shape default"),h=20,m=t.label?8:0,y=t.pos==="t",{nodeBorder:b,mainBkg:v}=n,{stylesMap:x}=Yy(t),w=Cn.svg(c),S=En(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const C=x.get("fill");S.stroke=C??v;const k=c.append("g");t.icon&&k.html(`<g>${await cT(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const A=k.node().getBBox(),R=A.width,N=A.height,I=A.x,O=A.y,L=Math.max(R,N)*Math.SQRT2+h*2,P=w.circle(0,0,L,S),V=Math.max(L,u.width),F=L+u.height+m,J=w.rectangle(-V/2,-F/2,V,F,{...S,fill:"transparent",stroke:"none"}),U=c.insert(()=>P,":first-child"),G=c.insert(()=>J);return k.attr("transform",`translate(${-R/2-I},${y?u.height/2+m/2-N/2-O:-u.height/2-m/2-N/2-O})`),k.attr("style",`color: ${x.get("stroke")??b};`),d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${y?-F/2:F/2-u.height})`),U.attr("transform",`translate(0,${y?u.height/2+m/2:-u.height/2-m/2})`),An(t,G),t.intersect=function($){return $t.info("iconSquare intersect",t,$),wn.rect(t,$)},c}se(kne,"iconCircle");async function Ene(e,t,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Rn(t);t.labelStyle=i;const s=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(s,a),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:c,bbox:u,halfPadding:d,label:h}=await ur(e,t,"icon-shape default"),m=t.pos==="t",y=o+d*2,b=o+d*2,{nodeBorder:v,mainBkg:x}=n,{stylesMap:w}=Yy(t),S=-b/2,C=-y/2,k=t.label?8:0,A=Cn.svg(c),R=En(t,{});t.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");const N=w.get("fill");R.stroke=N??x;const I=A.path(Zd(S,C,b,y,5),R),O=Math.max(b,u.width),L=y+u.height+k,P=A.rectangle(-O/2,-L/2,O,L,{...R,fill:"transparent",stroke:"none"}),V=c.insert(()=>I,":first-child").attr("class","icon-shape2"),F=c.insert(()=>P);if(t.icon){const J=c.append("g");J.html(`<g>${await cT(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const U=J.node().getBBox(),G=U.width,$=U.height,ne=U.x,W=U.y;J.attr("transform",`translate(${-G/2-ne},${m?u.height/2+k/2-$/2-W:-u.height/2-k/2-$/2-W})`),J.attr("style",`color: ${w.get("stroke")??v};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${m?-L/2:L/2-u.height})`),V.attr("transform",`translate(0,${m?u.height/2+k/2:-u.height/2-k/2})`),An(t,F),t.intersect=function(J){if($t.info("iconSquare intersect",t,J),!t.label)return wn.rect(t,J);const U=t.x??0,G=t.y??0,$=t.height??0;let ne=[];return m?ne=[{x:U-u.width/2,y:G-$/2},{x:U+u.width/2,y:G-$/2},{x:U+u.width/2,y:G-$/2+u.height+k},{x:U+b/2,y:G-$/2+u.height+k},{x:U+b/2,y:G+$/2},{x:U-b/2,y:G+$/2},{x:U-b/2,y:G-$/2+u.height+k},{x:U-u.width/2,y:G-$/2+u.height+k}]:ne=[{x:U-b/2,y:G-$/2},{x:U+b/2,y:G-$/2},{x:U+b/2,y:G-$/2+y},{x:U+u.width/2,y:G-$/2+y},{x:U+u.width/2/2,y:G+$/2},{x:U-u.width/2,y:G+$/2},{x:U-u.width/2,y:G-$/2+y},{x:U-b/2,y:G-$/2+y}],wn.polygon(t,ne,J)},c}se(Ene,"iconRounded");async function Tne(e,t,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Rn(t);t.labelStyle=i;const s=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(s,a),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:c,bbox:u,halfPadding:d,label:h}=await ur(e,t,"icon-shape default"),m=t.pos==="t",y=o+d*2,b=o+d*2,{nodeBorder:v,mainBkg:x}=n,{stylesMap:w}=Yy(t),S=-b/2,C=-y/2,k=t.label?8:0,A=Cn.svg(c),R=En(t,{});t.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");const N=w.get("fill");R.stroke=N??x;const I=A.path(Zd(S,C,b,y,.1),R),O=Math.max(b,u.width),L=y+u.height+k,P=A.rectangle(-O/2,-L/2,O,L,{...R,fill:"transparent",stroke:"none"}),V=c.insert(()=>I,":first-child"),F=c.insert(()=>P);if(t.icon){const J=c.append("g");J.html(`<g>${await cT(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const U=J.node().getBBox(),G=U.width,$=U.height,ne=U.x,W=U.y;J.attr("transform",`translate(${-G/2-ne},${m?u.height/2+k/2-$/2-W:-u.height/2-k/2-$/2-W})`),J.attr("style",`color: ${w.get("stroke")??v};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${m?-L/2:L/2-u.height})`),V.attr("transform",`translate(0,${m?u.height/2+k/2:-u.height/2-k/2})`),An(t,F),t.intersect=function(J){if($t.info("iconSquare intersect",t,J),!t.label)return wn.rect(t,J);const U=t.x??0,G=t.y??0,$=t.height??0;let ne=[];return m?ne=[{x:U-u.width/2,y:G-$/2},{x:U+u.width/2,y:G-$/2},{x:U+u.width/2,y:G-$/2+u.height+k},{x:U+b/2,y:G-$/2+u.height+k},{x:U+b/2,y:G+$/2},{x:U-b/2,y:G+$/2},{x:U-b/2,y:G-$/2+u.height+k},{x:U-u.width/2,y:G-$/2+u.height+k}]:ne=[{x:U-b/2,y:G-$/2},{x:U+b/2,y:G-$/2},{x:U+b/2,y:G-$/2+y},{x:U+u.width/2,y:G-$/2+y},{x:U+u.width/2/2,y:G+$/2},{x:U-u.width/2,y:G+$/2},{x:U-u.width/2,y:G-$/2+y},{x:U-b/2,y:G-$/2+y}],wn.polygon(t,ne,J)},c}se(Tne,"iconSquare");async function Ane(e,t,{config:{flowchart:n}}){const r=new Image;r.src=(t==null?void 0:t.img)??"",await r.decode();const i=Number(r.naturalWidth.toString().replace("px","")),s=Number(r.naturalHeight.toString().replace("px",""));t.imageAspectRatio=i/s;const{labelStyles:a}=Rn(t);t.labelStyle=a;const o=n==null?void 0:n.wrappingWidth;t.defaultWidth=n==null?void 0:n.wrappingWidth;const l=Math.max(t.label?o??0:0,(t==null?void 0:t.assetWidth)??i),c=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:l,u=t.constraint==="on"?c/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??s;t.width=Math.max(c,o??0);const{shapeSvg:d,bbox:h,label:m}=await ur(e,t,"image-shape default"),y=t.pos==="t",b=-c/2,v=-u/2,x=t.label?8:0,w=Cn.svg(d),S=En(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const C=w.rectangle(b,v,c,u,S),k=Math.max(c,h.width),A=u+h.height+x,R=w.rectangle(-k/2,-A/2,k,A,{...S,fill:"none",stroke:"none"}),N=d.insert(()=>C,":first-child"),I=d.insert(()=>R);if(t.img){const O=d.append("image");O.attr("href",t.img),O.attr("width",c),O.attr("height",u),O.attr("preserveAspectRatio","none"),O.attr("transform",`translate(${-c/2},${y?A/2-u:-A/2})`)}return m.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${y?-u/2-h.height/2-x/2:u/2-h.height/2+x/2})`),N.attr("transform",`translate(0,${y?h.height/2+x/2:-h.height/2-x/2})`),An(t,I),t.intersect=function(O){if($t.info("iconSquare intersect",t,O),!t.label)return wn.rect(t,O);const L=t.x??0,P=t.y??0,V=t.height??0;let F=[];return y?F=[{x:L-h.width/2,y:P-V/2},{x:L+h.width/2,y:P-V/2},{x:L+h.width/2,y:P-V/2+h.height+x},{x:L+c/2,y:P-V/2+h.height+x},{x:L+c/2,y:P+V/2},{x:L-c/2,y:P+V/2},{x:L-c/2,y:P-V/2+h.height+x},{x:L-h.width/2,y:P-V/2+h.height+x}]:F=[{x:L-c/2,y:P-V/2},{x:L+c/2,y:P-V/2},{x:L+c/2,y:P-V/2+u},{x:L+h.width/2,y:P-V/2+u},{x:L+h.width/2/2,y:P+V/2},{x:L-h.width/2,y:P+V/2},{x:L-h.width/2,y:P-V/2+u},{x:L-c/2,y:P-V/2+u}],wn.polygon(t,F,O)},d}se(Ane,"imageSquare");async function Rne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:a,y:0},{x:a+3*o/6,y:-o},{x:-3*o/6,y:-o}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=Cn.svg(i),h=En(t,{}),m=Yr(l),y=d.path(m,h);c=i.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&c.attr("style",u)}else c=Xd(i,a,o,l);return r&&c.attr("style",r),t.width=a,t.height=o,An(t,c),t.intersect=function(d){return wn.polygon(t,l,d)},i}se(Rne,"inv_trapezoid");async function D1(e,t,n){const{labelStyles:r,nodeStyles:i}=Rn(t);t.labelStyle=r;const{shapeSvg:s,bbox:a}=await ur(e,t,er(t)),o=Math.max(a.width+n.labelPaddingX*2,(t==null?void 0:t.width)||0),l=Math.max(a.height+n.labelPaddingY*2,(t==null?void 0:t.height)||0),c=-o/2,u=-l/2;let d,{rx:h,ry:m}=t;const{cssStyles:y}=t;if(n!=null&&n.rx&&n.ry&&(h=n.rx,m=n.ry),t.look==="handDrawn"){const b=Cn.svg(s),v=En(t,{}),x=h||m?b.path(Zd(c,u,o,l,h||0),v):b.rectangle(c,u,o,l,v);d=s.insert(()=>x,":first-child"),d.attr("class","basic label-container").attr("style",Ja(y))}else d=s.insert("rect",":first-child"),d.attr("class","basic label-container").attr("style",i).attr("rx",Ja(h)).attr("ry",Ja(m)).attr("x",c).attr("y",u).attr("width",o).attr("height",l);return An(t,d),t.intersect=function(b){return wn.rect(t,b)},s}se(D1,"drawRect");async function Nne(e,t){const{shapeSvg:n,bbox:r,label:i}=await ur(e,t,"label"),s=n.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(r.width/2)-(r.x-(r.left??0))}, ${-(r.height/2)-(r.y-(r.top??0))})`),An(t,s),t.intersect=function(l){return wn.rect(t,l)},n}se(Nne,"labelRect");async function Mne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:a+3*o/6,y:0},{x:a,y:-o},{x:-(3*o)/6,y:-o}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=Cn.svg(i),h=En(t,{}),m=Yr(l),y=d.path(m,h);c=i.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&c.attr("style",u)}else c=Xd(i,a,o,l);return r&&c.attr("style",r),t.width=a,t.height=o,An(t,c),t.intersect=function(d){return wn.polygon(t,l,d)},i}se(Mne,"lean_left");async function Ine(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:-3*o/6,y:0},{x:a,y:0},{x:a+3*o/6,y:-o},{x:0,y:-o}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=Cn.svg(i),h=En(t,{}),m=Yr(l),y=d.path(m,h);c=i.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&c.attr("style",u)}else c=Xd(i,a,o,l);return r&&c.attr("style",r),t.width=a,t.height=o,An(t,c),t.intersect=function(d){return wn.polygon(t,l,d)},i}se(Ine,"lean_right");function jne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.label="",t.labelStyle=n;const i=e.insert("g").attr("class",er(t)).attr("id",t.domId??t.id),{cssStyles:s}=t,a=Math.max(35,(t==null?void 0:t.width)??0),o=Math.max(35,(t==null?void 0:t.height)??0),l=7,c=[{x:a,y:0},{x:0,y:o+l/2},{x:a-2*l,y:o+l/2},{x:0,y:2*o},{x:a,y:o-l/2},{x:2*l,y:o-l/2}],u=Cn.svg(i),d=En(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=Yr(c),m=u.path(h,d),y=i.insert(()=>m,":first-child");return s&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",s),r&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",r),y.attr("transform",`translate(-${a/2},${-o})`),An(t,y),t.intersect=function(b){return $t.info("lightningBolt intersect",t,b),wn.polygon(t,c,b)},i}se(jne,"lightningBolt");var zLe=se((e,t,n,r,i,s,a)=>[`M${e},${t+s}`,`a${i},${s} 0,0,0 ${n},0`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`,`M${e},${t+s+a}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createCylinderPathD"),ULe=se((e,t,n,r,i,s,a)=>[`M${e},${t+s}`,`M${e+n},${t+s}`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`,`M${e},${t+s+a}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createOuterCylinderPathD"),qLe=se((e,t,n,r,i,s)=>[`M${e-n/2},${-r/2}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function One(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+(t.padding??0),t.width??0),l=o/2,c=l/(2.5+o/50),u=Math.max(s.height+c+(t.padding??0),t.height??0),d=u*.1;let h;const{cssStyles:m}=t;if(t.look==="handDrawn"){const y=Cn.svg(i),b=ULe(0,0,o,u,l,c,d),v=qLe(0,c,o,u,l,c),x=En(t,{}),w=y.path(b,x),S=y.path(v,x);i.insert(()=>S,":first-child").attr("class","line"),h=i.insert(()=>w,":first-child"),h.attr("class","basic label-container"),m&&h.attr("style",m)}else{const y=zLe(0,0,o,u,l,c,d);h=i.insert("path",":first-child").attr("d",y).attr("class","basic label-container").attr("style",Ja(m)).attr("style",r)}return h.attr("label-offset-y",c),h.attr("transform",`translate(${-o/2}, ${-(u/2+c)})`),An(t,h),a.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),t.intersect=function(y){const b=wn.rect(t,y),v=b.x-(t.x??0);if(l!=0&&(Math.abs(v)<(t.width??0)/2||Math.abs(v)==(t.width??0)/2&&Math.abs(b.y-(t.y??0))>(t.height??0)/2-c)){let x=c*c*(1-v*v/(l*l));x>0&&(x=Math.sqrt(x)),x=c-x,y.y-(t.y??0)>0&&(x=-x),b.y+=x}return b},i}se(One,"linedCylinder");async function Pne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,u=l+c,{cssStyles:d}=t,h=Cn.svg(i),m=En(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-o/2-o/2*.1,y:-u/2},{x:-o/2-o/2*.1,y:u/2},...xh(-o/2-o/2*.1,u/2,o/2+o/2*.1,u/2,c,.8),{x:o/2+o/2*.1,y:-u/2},{x:-o/2-o/2*.1,y:-u/2},{x:-o/2,y:-u/2},{x:-o/2,y:u/2*1.1},{x:-o/2,y:-u/2}],b=h.polygon(y.map(x=>[x.x,x.y]),m),v=i.insert(()=>b,":first-child");return v.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",d),r&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(0,${-c/2})`),a.attr("transform",`translate(${-o/2+(t.padding??0)+o/2*.1/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),An(t,v),t.intersect=function(x){return wn.polygon(t,y,x)},i}se(Pne,"linedWaveEdgedRect");async function Dne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,u=-o/2,d=-l/2,{cssStyles:h}=t,m=Cn.svg(i),y=En(t,{}),b=[{x:u-c,y:d+c},{x:u-c,y:d+l+c},{x:u+o-c,y:d+l+c},{x:u+o-c,y:d+l},{x:u+o,y:d+l},{x:u+o,y:d+l-c},{x:u+o+c,y:d+l-c},{x:u+o+c,y:d-c},{x:u+c,y:d-c},{x:u+c,y:d},{x:u,y:d},{x:u,y:d+c}],v=[{x:u,y:d+c},{x:u+o-c,y:d+c},{x:u+o-c,y:d+l},{x:u+o,y:d+l},{x:u+o,y:d},{x:u,y:d}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=Yr(b),w=m.path(x,y),S=Yr(v),C=m.path(S,{...y,fill:"none"}),k=i.insert(()=>C,":first-child");return k.insert(()=>w,":first-child"),k.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",r),a.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),An(t,k),t.intersect=function(A){return wn.polygon(t,b,A)},i}se(Dne,"multiRect");async function Fne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,u=l+c,d=-o/2,h=-u/2,m=5,{cssStyles:y}=t,b=xh(d-m,h+u+m,d+o-m,h+u+m,c,.8),v=b==null?void 0:b[b.length-1],x=[{x:d-m,y:h+m},{x:d-m,y:h+u+m},...b,{x:d+o-m,y:v.y-m},{x:d+o,y:v.y-m},{x:d+o,y:v.y-2*m},{x:d+o+m,y:v.y-2*m},{x:d+o+m,y:h-m},{x:d+m,y:h-m},{x:d+m,y:h},{x:d,y:h},{x:d,y:h+m}],w=[{x:d,y:h+m},{x:d+o-m,y:h+m},{x:d+o-m,y:v.y-m},{x:d+o,y:v.y-m},{x:d+o,y:h},{x:d,y:h}],S=Cn.svg(i),C=En(t,{});t.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const k=Yr(x),A=S.path(k,C),R=Yr(w),N=S.path(R,C),I=i.insert(()=>A,":first-child");return I.insert(()=>N),I.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",y),r&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",r),I.attr("transform",`translate(0,${-c/2})`),a.attr("transform",`translate(${-(s.width/2)-m-(s.x-(s.left??0))}, ${-(s.height/2)+m-c/2-(s.y-(s.top??0))})`),An(t,I),t.intersect=function(O){return wn.polygon(t,x,O)},i}se(Fne,"multiWaveEdgedRectangle");async function Lne(e,t,{config:{themeVariables:n}}){var x;const{labelStyles:r,nodeStyles:i}=Rn(t);t.labelStyle=r,t.useHtmlLabels||((x=Eo().flowchart)==null?void 0:x.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:a,bbox:o}=await ur(e,t,er(t)),l=Math.max(o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-l/2,d=-c/2,{cssStyles:h}=t,m=Cn.svg(a),y=En(t,{fill:n.noteBkgColor,stroke:n.noteBorderColor});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=m.rectangle(u,d,l,c,y),v=a.insert(()=>b,":first-child");return v.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",i),An(t,v),t.intersect=function(w){return wn.rect(t,w)},a}se(Lne,"note");var VLe=se((e,t,n)=>[`M${e+n/2},${t}`,`L${e+n},${t-n/2}`,`L${e+n/2},${t-n}`,`L${e},${t-n/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function Bne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=s.width+t.padding,o=s.height+t.padding,l=a+o,c=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let u;const{cssStyles:d}=t;if(t.look==="handDrawn"){const h=Cn.svg(i),m=En(t,{}),y=VLe(0,0,l),b=h.path(y,m);u=i.insert(()=>b,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`),d&&u.attr("style",d)}else u=Xd(i,l,l,c);return r&&u.attr("style",r),An(t,u),t.intersect=function(h){return $t.debug(`APA12 Intersect called SPLIT
point:`,h,`
node:
`,t,`
res:`,wn.polygon(t,c,h)),wn.polygon(t,c,h)},i}se(Bne,"question");async function $ne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),c=-o/2,u=-l/2,d=u/2,h=[{x:c+d,y:u},{x:c,y:0},{x:c+d,y:-u},{x:-c,y:-u},{x:-c,y:u}],{cssStyles:m}=t,y=Cn.svg(i),b=En(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const v=Yr(h),x=y.path(v,b),w=i.insert(()=>x,":first-child");return w.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",m),r&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",r),w.attr("transform",`translate(${-d/2},0)`),a.attr("transform",`translate(${-d/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),An(t,w),t.intersect=function(S){return wn.polygon(t,h,S)},i}se($ne,"rect_left_inv_arrow");async function zne(e,t){var N,I;const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;let i;t.cssClasses?i="node "+t.cssClasses:i="node default";const s=e.insert("g").attr("class",i).attr("id",t.domId||t.id),a=s.insert("g"),o=s.insert("g").attr("class","label").attr("style",r),l=t.description,c=t.label,u=o.node().appendChild(await Fp(c,t.labelStyle,!0,!0));let d={width:0,height:0};if(qs((I=(N=si())==null?void 0:N.flowchart)==null?void 0:I.htmlLabels)){const O=u.children[0],L=Wr(u);d=O.getBoundingClientRect(),L.attr("width",d.width),L.attr("height",d.height)}$t.info("Text 2",l);const h=l||[],m=u.getBBox(),y=o.node().appendChild(await Fp(h.join?h.join("<br/>"):h,t.labelStyle,!0,!0)),b=y.children[0],v=Wr(y);d=b.getBoundingClientRect(),v.attr("width",d.width),v.attr("height",d.height);const x=(t.padding||0)/2;Wr(y).attr("transform","translate( "+(d.width>m.width?0:(m.width-d.width)/2)+", "+(m.height+x+5)+")"),Wr(u).attr("transform","translate( "+(d.width<m.width?0:-(m.width-d.width)/2)+", 0)"),d=o.node().getBBox(),o.attr("transform","translate("+-d.width/2+", "+(-d.height/2-x+3)+")");const w=d.width+(t.padding||0),S=d.height+(t.padding||0),C=-d.width/2-x,k=-d.height/2-x;let A,R;if(t.look==="handDrawn"){const O=Cn.svg(s),L=En(t,{}),P=O.path(Zd(C,k,w,S,t.rx||0),L),V=O.line(-d.width/2-x,-d.height/2-x+m.height+x,d.width/2+x,-d.height/2-x+m.height+x,L);R=s.insert(()=>($t.debug("Rough node insert CXC",P),V),":first-child"),A=s.insert(()=>($t.debug("Rough node insert CXC",P),P),":first-child")}else A=a.insert("rect",":first-child"),R=a.insert("line"),A.attr("class","outer title-state").attr("style",r).attr("x",-d.width/2-x).attr("y",-d.height/2-x).attr("width",d.width+(t.padding||0)).attr("height",d.height+(t.padding||0)),R.attr("class","divider").attr("x1",-d.width/2-x).attr("x2",d.width/2+x).attr("y1",-d.height/2-x+m.height+x).attr("y2",-d.height/2-x+m.height+x);return An(t,A),t.intersect=function(O){return wn.rect(t,O)},s}se(zne,"rectWithTitle");async function Une(e,t){const n={rx:5,ry:5,labelPaddingX:((t==null?void 0:t.padding)||0)*1,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return D1(e,t,n)}se(Une,"roundedRect");async function qne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=(t==null?void 0:t.padding)??0,l=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-s.width/2-o,d=-s.height/2-o,{cssStyles:h}=t,m=Cn.svg(i),y=En(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:u,y:d},{x:u+l+8,y:d},{x:u+l+8,y:d+c},{x:u-8,y:d+c},{x:u-8,y:d},{x:u,y:d},{x:u,y:d+c}],v=m.polygon(b.map(w=>[w.x,w.y]),y),x=i.insert(()=>v,":first-child");return x.attr("class","basic label-container").attr("style",Ja(h)),r&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",r),h&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",r),a.attr("transform",`translate(${-l/2+4+(t.padding??0)-(s.x-(s.left??0))},${-c/2+(t.padding??0)-(s.y-(s.top??0))})`),An(t,x),t.intersect=function(w){return wn.rect(t,w)},i}se(qne,"shadedProcess");async function Vne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=-o/2,u=-l/2,{cssStyles:d}=t,h=Cn.svg(i),m=En(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:c,y:u},{x:c,y:u+l},{x:c+o,y:u+l},{x:c+o,y:u-l/2}],b=Yr(y),v=h.path(b,m),x=i.insert(()=>v,":first-child");return x.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),r&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",r),x.attr("transform",`translate(0, ${l/4})`),a.attr("transform",`translate(${-o/2+(t.padding??0)-(s.x-(s.left??0))}, ${-l/4+(t.padding??0)-(s.y-(s.top??0))})`),An(t,x),t.intersect=function(w){return wn.polygon(t,y,w)},i}se(Vne,"slopedRect");async function Wne(e,t){const n={rx:0,ry:0,labelPaddingX:((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return D1(e,t,n)}se(Wne,"squareRect");async function Hne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=s.height+t.padding,o=s.width+a/4+t.padding;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=Cn.svg(i),d=En(t,{}),h=Zd(-o/2,-a/2,o,a,a/2),m=u.path(h,d);l=i.insert(()=>m,":first-child"),l.attr("class","basic label-container").attr("style",Ja(c))}else l=i.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",r).attr("rx",a/2).attr("ry",a/2).attr("x",-o/2).attr("y",-a/2).attr("width",o).attr("height",a);return An(t,l),t.intersect=function(u){return wn.rect(t,u)},i}se(Hne,"stadium");async function Gne(e,t){return D1(e,t,{rx:5,ry:5})}se(Gne,"state");function Kne(e,t,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=Rn(t);t.labelStyle=r;const{cssStyles:s}=t,{lineColor:a,stateBorder:o,nodeBorder:l}=n,c=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),u=Cn.svg(c),d=En(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=u.circle(0,0,14,{...d,stroke:a,strokeWidth:2}),m=o??l,y=u.circle(0,0,5,{...d,fill:m,stroke:m,strokeWidth:2,fillStyle:"solid"}),b=c.insert(()=>h,":first-child");return b.insert(()=>y),s&&b.selectAll("path").attr("style",s),i&&b.selectAll("path").attr("style",i),An(t,b),t.intersect=function(v){return wn.circle(t,7,v)},c}se(Kne,"stateEnd");function Yne(e,t,{config:{themeVariables:n}}){const{lineColor:r}=n,i=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s;if(t.look==="handDrawn"){const o=Cn.svg(i).circle(0,0,14,CLe(r));s=i.insert(()=>o),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=i.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return An(t,s),t.intersect=function(a){return wn.circle(t,7,a)},i}se(Yne,"stateStart");async function Zne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=((t==null?void 0:t.padding)||0)/2,o=s.width+t.padding,l=s.height+t.padding,c=-s.width/2-a,u=-s.height/2-a,d=[{x:0,y:0},{x:o,y:0},{x:o,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const h=Cn.svg(i),m=En(t,{}),y=h.rectangle(c-8,u,o+16,l,m),b=h.line(c,u,c,u+l,m),v=h.line(c+o,u,c+o,u+l,m);i.insert(()=>b,":first-child"),i.insert(()=>v,":first-child");const x=i.insert(()=>y,":first-child"),{cssStyles:w}=t;x.attr("class","basic label-container").attr("style",Ja(w)),An(t,x)}else{const h=Xd(i,o,l,d);r&&h.attr("style",r),An(t,h)}return t.intersect=function(h){return wn.polygon(t,d,h)},i}se(Zne,"subroutine");async function Xne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-a/2,c=-o/2,u=.2*o,d=.2*o,{cssStyles:h}=t,m=Cn.svg(i),y=En(t,{}),b=[{x:l-u/2,y:c},{x:l+a+u/2,y:c},{x:l+a+u/2,y:c+o},{x:l-u/2,y:c+o}],v=[{x:l+a-u/2,y:c+o},{x:l+a+u/2,y:c+o},{x:l+a+u/2,y:c+o-d}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=Yr(b),w=m.path(x,y),S=Yr(v),C=m.path(S,{...y,fillStyle:"solid"}),k=i.insert(()=>C,":first-child");return k.insert(()=>w,":first-child"),k.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",r),An(t,k),t.intersect=function(A){return wn.polygon(t,b,A)},i}se(Xne,"taggedRect");async function Jne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,u=.2*o,d=.2*l,h=l+c,{cssStyles:m}=t,y=Cn.svg(i),b=En(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const v=[{x:-o/2-o/2*.1,y:h/2},...xh(-o/2-o/2*.1,h/2,o/2+o/2*.1,h/2,c,.8),{x:o/2+o/2*.1,y:-h/2},{x:-o/2-o/2*.1,y:-h/2}],x=-o/2+o/2*.1,w=-h/2-d*.4,S=[{x:x+o-u,y:(w+l)*1.4},{x:x+o,y:w+l-d},{x:x+o,y:(w+l)*.9},...xh(x+o,(w+l)*1.3,x+o-u,(w+l)*1.5,-l*.03,.5)],C=Yr(v),k=y.path(C,b),A=Yr(S),R=y.path(A,{...b,fillStyle:"solid"}),N=i.insert(()=>R,":first-child");return N.insert(()=>k,":first-child"),N.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",m),r&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",r),N.attr("transform",`translate(0,${-c/2})`),a.attr("transform",`translate(${-o/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),An(t,N),t.intersect=function(I){return wn.polygon(t,v,I)},i}se(Jne,"taggedWaveEdgedRectangle");async function Qne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=Math.max(s.width+t.padding,(t==null?void 0:t.width)||0),o=Math.max(s.height+t.padding,(t==null?void 0:t.height)||0),l=-a/2,c=-o/2,u=i.insert("rect",":first-child");return u.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",a).attr("height",o),An(t,u),t.intersect=function(d){return wn.rect(t,d)},i}se(Qne,"text");var WLe=se((e,t,n,r,i,s)=>`M${e},${t}
    a${i},${s} 0,0,1 0,${-r}
    l${n},0
    a${i},${s} 0,0,1 0,${r}
    M${n},${-r}
    a${i},${s} 0,0,0 0,${r}
    l${-n},0`,"createCylinderPathD"),HLe=se((e,t,n,r,i,s)=>[`M${e},${t}`,`M${e+n},${t}`,`a${i},${s} 0,0,0 0,${-r}`,`l${-n},0`,`a${i},${s} 0,0,0 0,${r}`,`l${n},0`].join(" "),"createOuterCylinderPathD"),GLe=se((e,t,n,r,i,s)=>[`M${e+n/2},${-r/2}`,`a${i},${s} 0,0,0 0,${r}`].join(" "),"createInnerCylinderPathD");async function ere(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a,halfPadding:o}=await ur(e,t,er(t)),l=t.look==="neo"?o*2:o,c=s.height+l,u=c/2,d=u/(2.5+c/50),h=s.width+d+l,{cssStyles:m}=t;let y;if(t.look==="handDrawn"){const b=Cn.svg(i),v=HLe(0,0,h,c,d,u),x=GLe(0,0,h,c,d,u),w=b.path(v,En(t,{})),S=b.path(x,En(t,{fill:"none"}));y=i.insert(()=>S,":first-child"),y=i.insert(()=>w,":first-child"),y.attr("class","basic label-container"),m&&y.attr("style",m)}else{const b=WLe(0,0,h,c,d,u);y=i.insert("path",":first-child").attr("d",b).attr("class","basic label-container").attr("style",Ja(m)).attr("style",r),y.attr("class","basic label-container"),m&&y.selectAll("path").attr("style",m),r&&y.selectAll("path").attr("style",r)}return y.attr("label-offset-x",d),y.attr("transform",`translate(${-h/2}, ${c/2} )`),a.attr("transform",`translate(${-(s.width/2)-d-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),An(t,y),t.intersect=function(b){const v=wn.rect(t,b),x=v.y-(t.y??0);if(u!=0&&(Math.abs(x)<(t.height??0)/2||Math.abs(x)==(t.height??0)/2&&Math.abs(v.x-(t.x??0))>(t.width??0)/2-d)){let w=d*d*(1-x*x/(u*u));w!=0&&(w=Math.sqrt(Math.abs(w))),w=d-w,b.x-(t.x??0)>0&&(w=-w),v.x+=w}return v},i}se(ere,"tiltedCylinder");async function tre(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=s.width+t.padding,o=s.height+t.padding,l=[{x:-3*o/6,y:0},{x:a+3*o/6,y:0},{x:a,y:-o},{x:0,y:-o}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=Cn.svg(i),h=En(t,{}),m=Yr(l),y=d.path(m,h);c=i.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&c.attr("style",u)}else c=Xd(i,a,o,l);return r&&c.attr("style",r),t.width=a,t.height=o,An(t,c),t.intersect=function(d){return wn.polygon(t,l,d)},i}se(tre,"trapezoid");async function nre(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=60,o=20,l=Math.max(a,s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(o,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:u}=t,d=Cn.svg(i),h=En(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const m=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],y=Yr(m),b=d.path(y,h),v=i.insert(()=>b,":first-child");return v.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",u),r&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",r),An(t,v),t.intersect=function(x){return wn.polygon(t,m,x)},i}se(nre,"trapezoidalPentagon");async function rre(e,t){var w;const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=qs((w=si().flowchart)==null?void 0:w.htmlLabels),l=s.width+(t.padding??0),c=l+s.height,u=l+s.height,d=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-c}],{cssStyles:h}=t,m=Cn.svg(i),y=En(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=Yr(d),v=m.path(b,y),x=i.insert(()=>v,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return h&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",h),r&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",r),t.width=l,t.height=c,An(t,x),a.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(t.padding??0)/(o?2:1)-(s.y-(s.top??0)))})`),t.intersect=function(S){return $t.info("Triangle intersect",t,d,S),wn.polygon(t,d,S)},i}se(rre,"triangle");async function ire(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/8,u=l+c,{cssStyles:d}=t,m=70-o,y=m>0?m/2:0,b=Cn.svg(i),v=En(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const x=[{x:-o/2-y,y:u/2},...xh(-o/2-y,u/2,o/2+y,u/2,c,.8),{x:o/2+y,y:-u/2},{x:-o/2-y,y:-u/2}],w=Yr(x),S=b.path(w,v),C=i.insert(()=>S,":first-child");return C.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",d),r&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(0,${-c/2})`),a.attr("transform",`translate(${-o/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c-(s.y-(s.top??0))})`),An(t,C),t.intersect=function(k){return wn.polygon(t,x,k)},i}se(ire,"waveEdgedRectangle");async function sre(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await ur(e,t,er(t)),a=100,o=50,l=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/c;let d=l,h=c;d>h*u?h=d/u:d=h*u,d=Math.max(d,a),h=Math.max(h,o);const m=Math.min(h*.2,h/4),y=h+m*2,{cssStyles:b}=t,v=Cn.svg(i),x=En(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const w=[{x:-d/2,y:y/2},...xh(-d/2,y/2,d/2,y/2,m,1),{x:d/2,y:-y/2},...xh(d/2,-y/2,-d/2,-y/2,m,-1)],S=Yr(w),C=v.path(S,x),k=i.insert(()=>C,":first-child");return k.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",b),r&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",r),An(t,k),t.intersect=function(A){return wn.polygon(t,w,A)},i}se(sre,"waveRectangle");async function are(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await ur(e,t,er(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,u=-o/2,d=-l/2,{cssStyles:h}=t,m=Cn.svg(i),y=En(t,{}),b=[{x:u-c,y:d-c},{x:u-c,y:d+l},{x:u+o,y:d+l},{x:u+o,y:d-c}],v=`M${u-c},${d-c} L${u+o},${d-c} L${u+o},${d+l} L${u-c},${d+l} L${u-c},${d-c}
                M${u-c},${d} L${u+o},${d}
                M${u},${d-c} L${u},${d+l}`;t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=m.path(v,y),w=i.insert(()=>x,":first-child");return w.attr("transform",`translate(${c/2}, ${c/2})`),w.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",r),a.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),An(t,w),t.intersect=function(S){return wn.polygon(t,b,S)},i}se(are,"windowPane");async function x6(e,t){var ne,W,te;const n=t;if(n.alias&&(t.label=n.alias),t.look==="handDrawn"){const{themeVariables:ee}=Eo(),{background:re}=ee,de={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${re}`]};await x6(e,de)}const r=Eo();t.useHtmlLabels=r.htmlLabels;let i=((ne=r.er)==null?void 0:ne.diagramPadding)??10,s=((W=r.er)==null?void 0:W.entityPadding)??6;const{cssStyles:a}=t,{labelStyles:o}=Rn(t);if(n.attributes.length===0&&t.label){const ee={rx:0,ry:0,labelPaddingX:i,labelPaddingY:i*1.5};$d(t.label,r)+ee.labelPaddingX*2<r.er.minEntityWidth&&(t.width=r.er.minEntityWidth);const re=await D1(e,t,ee);if(!qs(r.htmlLabels)){const de=re.select("text"),oe=(te=de.node())==null?void 0:te.getBBox();de.attr("transform",`translate(${-oe.width/2}, 0)`)}return re}r.htmlLabels||(i*=1.25,s*=1.25);let l=er(t);l||(l="node default");const c=e.insert("g").attr("class",l).attr("id",t.domId||t.id),u=await Xg(c,t.label??"",r,0,0,["name"],o);u.height+=s;let d=0;const h=[];let m=0,y=0,b=0,v=0,x=!0,w=!0;for(const ee of n.attributes){const re=await Xg(c,ee.type,r,0,d,["attribute-type"],o);m=Math.max(m,re.width+i);const de=await Xg(c,ee.name,r,0,d,["attribute-name"],o);y=Math.max(y,de.width+i);const oe=await Xg(c,ee.keys.join(),r,0,d,["attribute-keys"],o);b=Math.max(b,oe.width+i);const Ie=await Xg(c,ee.comment,r,0,d,["attribute-comment"],o);v=Math.max(v,Ie.width+i),d+=Math.max(re.height,de.height,oe.height,Ie.height)+s,h.push(d)}h.pop();let S=4;b<=i&&(x=!1,b=0,S--),v<=i&&(w=!1,v=0,S--);const C=c.node().getBBox();if(u.width+i*2-(m+y+b+v)>0){const ee=u.width+i*2-(m+y+b+v);m+=ee/S,y+=ee/S,b>0&&(b+=ee/S),v>0&&(v+=ee/S)}const k=m+y+b+v,A=Cn.svg(c),R=En(t,{});t.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");const N=Math.max(C.width+i*2,(t==null?void 0:t.width)||0,k),I=Math.max(C.height+(h[0]||d)+s,(t==null?void 0:t.height)||0),O=-N/2,L=-I/2;c.selectAll("g:not(:first-child)").each((ee,re,de)=>{const oe=Wr(de[re]),Ie=oe.attr("transform");let je=0,Me=0;if(Ie){const qe=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Ie);qe&&(je=parseFloat(qe[1]),Me=parseFloat(qe[2]),oe.attr("class").includes("attribute-name")?je+=m:oe.attr("class").includes("attribute-keys")?je+=m+y:oe.attr("class").includes("attribute-comment")&&(je+=m+y+b))}oe.attr("transform",`translate(${O+i/2+je}, ${Me+L+u.height+s/2})`)}),c.select(".name").attr("transform","translate("+-u.width/2+", "+(L+s/2)+")");const P=A.rectangle(O,L,N,I,R),V=c.insert(()=>P,":first-child").attr("style",a.join("")),{themeVariables:F}=Eo(),{rowEven:J,rowOdd:U,nodeBorder:G}=F;h.push(0);for(const[ee,re]of h.entries()){if(ee===0&&h.length>1)continue;const de=ee%2===0&&re!==0,oe=A.rectangle(O,u.height+L+re,N,u.height,{...R,fill:de?J:U,stroke:G});c.insert(()=>oe,"g.label").attr("style",a.join("")).attr("class",`row-rect-${ee%2===0?"even":"odd"}`)}let $=A.line(O,u.height+L,N+O,u.height+L,R);c.insert(()=>$).attr("class","divider"),$=A.line(m+O,u.height+L,m+O,I+L,R),c.insert(()=>$).attr("class","divider"),x&&($=A.line(m+y+O,u.height+L,m+y+O,I+L,R),c.insert(()=>$).attr("class","divider")),w&&($=A.line(m+y+b+O,u.height+L,m+y+b+O,I+L,R),c.insert(()=>$).attr("class","divider"));for(const ee of h)$=A.line(O,u.height+L+ee,N+O,u.height+L+ee,R),c.insert(()=>$).attr("class","divider");return An(t,V),t.intersect=function(ee){return wn.rect(t,ee)},c}se(x6,"erBox");async function Xg(e,t,n,r=0,i=0,s=[],a=""){const o=e.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${r}, ${i})`).attr("style",a);t!==p7(t)&&(t=p7(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=o.node().appendChild(await Lh(o,t,{width:$d(t,n)+100,style:a,useHtmlLabels:n.htmlLabels},n));if(t.includes("&lt;")||t.includes("&gt;")){let u=l.children[0];for(u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");u.childNodes[0];)u=u.childNodes[0],u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(qs(n.htmlLabels)){const u=l.children[0];u.style.textAlign="start";const d=Wr(l);c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}return c}se(Xg,"addText");async function ore(e,t,n,r,i=n.class.padding??12){const s=r?0:3,a=e.insert("g").attr("class",er(t)).attr("id",t.domId||t.id);let o=null,l=null,c=null,u=null,d=0,h=0,m=0;if(o=a.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const w=t.annotations[0];await Wv(o,{text:`${w}`},0),d=o.node().getBBox().height}l=a.insert("g").attr("class","label-group text"),await Wv(l,t,0,["font-weight: bolder"]);const y=l.node().getBBox();h=y.height,c=a.insert("g").attr("class","members-group text");let b=0;for(const w of t.members){const S=await Wv(c,w,b,[w.parseClassifier()]);b+=S+s}m=c.node().getBBox().height,m<=0&&(m=i/2),u=a.insert("g").attr("class","methods-group text");let v=0;for(const w of t.methods){const S=await Wv(u,w,v,[w.parseClassifier()]);v+=S+s}let x=a.node().getBBox();if(o!==null){const w=o.node().getBBox();o.attr("transform",`translate(${-w.width/2})`)}return l.attr("transform",`translate(${-y.width/2}, ${d})`),x=a.node().getBBox(),c.attr("transform",`translate(0, ${d+h+i*2})`),x=a.node().getBBox(),u.attr("transform",`translate(0, ${d+h+(m?m+i*4:i*2)})`),x=a.node().getBBox(),{shapeSvg:a,bbox:x}}se(ore,"textHelper");async function Wv(e,t,n,r=[]){const i=e.insert("g").attr("class","label").attr("style",r.join("; ")),s=Eo();let a="useHtmlLabels"in t?t.useHtmlLabels:qs(s.htmlLabels)??!0,o="";"text"in t?o=t.text:o=t.label,!a&&o.startsWith("\\")&&(o=o.substring(1)),oy(o)&&(a=!0);const l=await Lh(i,ND(jm(o)),{width:$d(o,s)+50,classes:"markdown-node-label",useHtmlLabels:a},s);let c,u=1;if(a){const d=l.children[0],h=Wr(l);u=d.innerHTML.split("<br>").length,d.innerHTML.includes("</math>")&&(u+=d.innerHTML.split("<mrow>").length-1);const m=d.getElementsByTagName("img");if(m){const y=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(b=>new Promise(v=>{function x(){var w;if(b.style.display="flex",b.style.flexDirection="column",y){const S=((w=s.fontSize)==null?void 0:w.toString())??window.getComputedStyle(document.body).fontSize,k=parseInt(S,10)*5+"px";b.style.minWidth=k,b.style.maxWidth=k}else b.style.width="100%";v(b)}se(x,"setupImage"),setTimeout(()=>{b.complete&&x()}),b.addEventListener("error",x),b.addEventListener("load",x)})))}c=d.getBoundingClientRect(),h.attr("width",c.width),h.attr("height",c.height)}else{r.includes("font-weight: bolder")&&Wr(l).selectAll("tspan").attr("font-weight",""),u=l.children.length;const d=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(d.textContent=o[0]+o.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),o[1]===" "&&(d.textContent=d.textContent[0]+" "+d.textContent.substring(1))),d.textContent==="undefined"&&(d.textContent=""),c=l.getBBox()}return i.attr("transform","translate(0,"+(-c.height/(2*u)+n)+")"),c.height}se(Wv,"addText");async function lre(e,t){var I,O;const n=si(),r=n.class.padding??12,i=r,s=t.useHtmlLabels??qs(n.htmlLabels)??!0,a=t;a.annotations=a.annotations??[],a.members=a.members??[],a.methods=a.methods??[];const{shapeSvg:o,bbox:l}=await ore(e,t,n,s,i),{labelStyles:c,nodeStyles:u}=Rn(t);t.labelStyle=c,t.cssStyles=a.styles||"";const d=((I=a.styles)==null?void 0:I.join(";"))||u||"";t.cssStyles||(t.cssStyles=d.replaceAll("!important","").split(";"));const h=a.members.length===0&&a.methods.length===0&&!((O=n.class)!=null&&O.hideEmptyMembersBox),m=Cn.svg(o),y=En(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=l.width;let v=l.height;a.members.length===0&&a.methods.length===0?v+=i:a.members.length>0&&a.methods.length===0&&(v+=i*2);const x=-b/2,w=-v/2,S=m.rectangle(x-r,w-r-(h?r:a.members.length===0&&a.methods.length===0?-r/2:0),b+2*r,v+2*r+(h?r*2:a.members.length===0&&a.methods.length===0?-r:0),y),C=o.insert(()=>S,":first-child");C.attr("class","basic label-container");const k=C.node().getBBox();o.selectAll(".text").each((L,P,V)=>{var ne;const F=Wr(V[P]),J=F.attr("transform");let U=0;if(J){const te=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(J);te&&(U=parseFloat(te[2]))}let G=U+w+r-(h?r:a.members.length===0&&a.methods.length===0?-r/2:0);s||(G-=4);let $=x;(F.attr("class").includes("label-group")||F.attr("class").includes("annotation-group"))&&($=-((ne=F.node())==null?void 0:ne.getBBox().width)/2||0,o.selectAll("text").each(function(W,te,ee){window.getComputedStyle(ee[te]).textAnchor==="middle"&&($=0)})),F.attr("transform",`translate(${$}, ${G})`)});const A=o.select(".annotation-group").node().getBBox().height-(h?r/2:0)||0,R=o.select(".label-group").node().getBBox().height-(h?r/2:0)||0,N=o.select(".members-group").node().getBBox().height-(h?r/2:0)||0;if(a.members.length>0||a.methods.length>0||h){const L=m.line(k.x,A+R+w+r,k.x+k.width,A+R+w+r,y);o.insert(()=>L).attr("class","divider").attr("style",d)}if(h||a.members.length>0||a.methods.length>0){const L=m.line(k.x,A+R+N+w+i*2+r,k.x+k.width,A+R+N+w+r+i*2,y);o.insert(()=>L).attr("class","divider").attr("style",d)}if(a.look!=="handDrawn"&&o.selectAll("path").attr("style",d),C.select(":nth-child(2)").attr("style",d),o.selectAll(".divider").select("path").attr("style",d),t.labelStyle?o.selectAll("span").attr("style",t.labelStyle):o.selectAll("span").attr("style",d),!s){const L=RegExp(/color\s*:\s*([^;]*)/),P=L.exec(d);if(P){const V=P[0].replace("color","fill");o.selectAll("tspan").attr("style",V)}else if(c){const V=L.exec(c);if(V){const F=V[0].replace("color","fill");o.selectAll("tspan").attr("style",F)}}}return An(t,C),t.intersect=function(L){return wn.rect(t,L)},o}se(lre,"classBox");async function cre(e,t){var A,R;const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const i=t,s=t,a=20,o=20,l="verifyMethod"in t,c=er(t),u=e.insert("g").attr("class",c).attr("id",t.domId??t.id);let d;l?d=await Yc(u,`&lt;&lt;${i.type}&gt;&gt;`,0,t.labelStyle):d=await Yc(u,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let h=d;const m=await Yc(u,i.name,h,t.labelStyle+"; font-weight: bold;");if(h+=m+o,l){const N=await Yc(u,`${i.requirementId?`Id: ${i.requirementId}`:""}`,h,t.labelStyle);h+=N;const I=await Yc(u,`${i.text?`Text: ${i.text}`:""}`,h,t.labelStyle);h+=I;const O=await Yc(u,`${i.risk?`Risk: ${i.risk}`:""}`,h,t.labelStyle);h+=O,await Yc(u,`${i.verifyMethod?`Verification: ${i.verifyMethod}`:""}`,h,t.labelStyle)}else{const N=await Yc(u,`${s.type?`Type: ${s.type}`:""}`,h,t.labelStyle);h+=N,await Yc(u,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,h,t.labelStyle)}const y=(((A=u.node())==null?void 0:A.getBBox().width)??200)+a,b=(((R=u.node())==null?void 0:R.getBBox().height)??200)+a,v=-y/2,x=-b/2,w=Cn.svg(u),S=En(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const C=w.rectangle(v,x,y,b,S),k=u.insert(()=>C,":first-child");if(k.attr("class","basic label-container").attr("style",r),u.selectAll(".label").each((N,I,O)=>{const L=Wr(O[I]),P=L.attr("transform");let V=0,F=0;if(P){const $=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(P);$&&(V=parseFloat($[1]),F=parseFloat($[2]))}const J=F-b/2;let U=v+a/2;(I===0||I===1)&&(U=V),L.attr("transform",`translate(${U}, ${J+a})`)}),h>d+m+o){const N=w.line(v,x+d+m+o,v+y,x+d+m+o,S);u.insert(()=>N).attr("style",r)}return An(t,k),t.intersect=function(N){return wn.rect(t,N)},u}se(cre,"requirementBox");async function Yc(e,t,n,r=""){if(t==="")return 0;const i=e.insert("g").attr("class","label").attr("style",r),s=si(),a=s.htmlLabels??!0,o=await Lh(i,ND(jm(t)),{width:$d(t,s)+50,classes:"markdown-node-label",useHtmlLabels:a,style:r},s);let l;if(a){const c=o.children[0],u=Wr(o);l=c.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}else{const c=o.children[0];for(const u of c.children)u.textContent=u.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),r&&u.setAttribute("style",r);l=o.getBBox(),l.height+=6}return i.attr("transform",`translate(${-l.width/2},${-l.height/2+n})`),l.height}se(Yc,"addText");var KLe=se(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function ure(e,t,{config:n}){var P,V;const{labelStyles:r,nodeStyles:i}=Rn(t);t.labelStyle=r||"";const s=10,a=t.width;t.width=(t.width??200)-10;const{shapeSvg:o,bbox:l,label:c}=await ur(e,t,er(t)),u=t.padding||10;let d="",h;"ticket"in t&&t.ticket&&((P=n==null?void 0:n.kanban)!=null&&P.ticketBaseUrl)&&(d=(V=n==null?void 0:n.kanban)==null?void 0:V.ticketBaseUrl.replace("#TICKET#",t.ticket),h=o.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",d).attr("target","_blank"));const m={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let y,b;h?{label:y,bbox:b}=await PI(h,"ticket"in t&&t.ticket||"",m):{label:y,bbox:b}=await PI(o,"ticket"in t&&t.ticket||"",m);const{label:v,bbox:x}=await PI(o,"assigned"in t&&t.assigned||"",m);t.width=a;const w=10,S=(t==null?void 0:t.width)||0,C=Math.max(b.height,x.height)/2,k=Math.max(l.height+w*2,(t==null?void 0:t.height)||0)+C,A=-S/2,R=-k/2;c.attr("transform","translate("+(u-S/2)+", "+(-C-l.height/2)+")"),y.attr("transform","translate("+(u-S/2)+", "+(-C+l.height/2)+")"),v.attr("transform","translate("+(u+S/2-x.width-2*s)+", "+(-C+l.height/2)+")");let N;const{rx:I,ry:O}=t,{cssStyles:L}=t;if(t.look==="handDrawn"){const F=Cn.svg(o),J=En(t,{}),U=I||O?F.path(Zd(A,R,S,k,I||0),J):F.rectangle(A,R,S,k,J);N=o.insert(()=>U,":first-child"),N.attr("class","basic label-container").attr("style",L||null)}else{N=o.insert("rect",":first-child"),N.attr("class","basic label-container __APA__").attr("style",i).attr("rx",I??5).attr("ry",O??5).attr("x",A).attr("y",R).attr("width",S).attr("height",k);const F="priority"in t&&t.priority;if(F){const J=o.append("line"),U=A+2,G=R+Math.floor((I??0)/2),$=R+k-Math.floor((I??0)/2);J.attr("x1",U).attr("y1",G).attr("x2",U).attr("y2",$).attr("stroke-width","4").attr("stroke",KLe(F))}}return An(t,N),t.height=k,t.intersect=function(F){return wn.rect(t,F)},o}se(ure,"kanbanItem");var YLe=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Wne},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Une},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Hne},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Zne},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:mne},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:lne},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:Bne},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:_ne},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Ine},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:Mne},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:tre},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Rne},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:yne},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Qne},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:ane},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:qne},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Yne},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Kne},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:xne},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:Sne},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:dne},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:fne},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:hne},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:jne},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:ire},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:wne},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:ere},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:One},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:pne},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:gne},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:rre},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:are},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:bne},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:nre},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:vne},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Vne},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Fne},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Dne},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:sne},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:une},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:Jne},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Xne},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:sre},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:$ne},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Pne}],ZLe=se(()=>{const t=[...Object.entries({state:Gne,choice:one,note:Lne,rectWithTitle:zne,labelRect:Nne,iconSquare:Tne,iconCircle:kne,icon:Cne,iconRounded:Ene,imageSquare:Ane,anchor:ine,kanbanItem:ure,classBox:lre,erBox:x6,requirementBox:cre}),...YLe.flatMap(n=>[n.shortName,..."aliases"in n?n.aliases:[],..."internalAliases"in n?n.internalAliases:[]].map(i=>[i,n.handler]))];return Object.fromEntries(t)},"generateShapeMap"),dre=ZLe();function XLe(e){return e in dre}se(XLe,"isValidShape");var ET=new Map;async function fre(e,t,n){let r,i;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const s=t.shape?dre[t.shape]:void 0;if(!s)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let a;n.config.securityLevel==="sandbox"?a="_top":t.linkTarget&&(a=t.linkTarget||"_blank"),r=e.insert("svg:a").attr("xlink:href",t.link).attr("target",a??null),i=await s(r,t,n)}else i=await s(e,t,n),r=i;return t.tooltip&&i.attr("title",t.tooltip),ET.set(t.id,r),t.haveCallback&&r.attr("class",r.attr("class")+" clickable"),r}se(fre,"insertNode");var Hdt=se((e,t)=>{ET.set(t.id,e)},"setNodeElem"),Gdt=se(()=>{ET.clear()},"clear"),Kdt=se(e=>{const t=ET.get(e.id);$t.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const n=8,r=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+r-e.width/2)+", "+(e.y-e.height/2-n)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),r},"positionNode"),JLe=se((e,t,n,r,i,s)=>{t.arrowTypeStart&&xU(e,"start",t.arrowTypeStart,n,r,i,s),t.arrowTypeEnd&&xU(e,"end",t.arrowTypeEnd,n,r,i,s)},"addEdgeMarkers"),QLe={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},xU=se((e,t,n,r,i,s,a)=>{var d;const o=QLe[n];if(!o){$t.warn(`Unknown arrow type: ${n}`);return}const l=o.type,u=`${i}_${s}-${l}${t==="start"?"Start":"End"}`;if(a&&a.trim()!==""){const h=a.replace(/[^\dA-Za-z]/g,"_"),m=`${u}_${h}`;if(!document.getElementById(m)){const y=document.getElementById(u);if(y){const b=y.cloneNode(!0);b.id=m,b.querySelectorAll("path, circle, line").forEach(x=>{x.setAttribute("stroke",a),o.fill&&x.setAttribute("fill",a)}),(d=y.parentNode)==null||d.appendChild(b)}}e.attr(`marker-${t}`,`url(${r}#${m})`)}else e.attr(`marker-${t}`,`url(${r}#${u})`)},"addEdgeMarker"),Tk=new Map,pa=new Map,Ydt=se(()=>{Tk.clear(),pa.clear()},"clear"),Ov=se(e=>e?e.reduce((n,r)=>n+";"+r,""):"","getLabelStyles"),eBe=se(async(e,t)=>{let n=qs(si().flowchart.htmlLabels);const r=await Lh(e,t.label,{style:Ov(t.labelStyle),useHtmlLabels:n,addSvgBackground:!0,isNode:!1});$t.info("abc82",t,t.labelType);const i=e.insert("g").attr("class","edgeLabel"),s=i.insert("g").attr("class","label");s.node().appendChild(r);let a=r.getBBox();if(n){const l=r.children[0],c=Wr(r);a=l.getBoundingClientRect(),c.attr("width",a.width),c.attr("height",a.height)}s.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),Tk.set(t.id,i),t.width=a.width,t.height=a.height;let o;if(t.startLabelLeft){const l=await Fp(t.startLabelLeft,Ov(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");o=u.node().appendChild(l);const d=l.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),pa.get(t.id)||pa.set(t.id,{}),pa.get(t.id).startLeft=c,Hv(o,t.startLabelLeft)}if(t.startLabelRight){const l=await Fp(t.startLabelRight,Ov(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");o=c.node().appendChild(l),u.node().appendChild(l);const d=l.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),pa.get(t.id)||pa.set(t.id,{}),pa.get(t.id).startRight=c,Hv(o,t.startLabelRight)}if(t.endLabelLeft){const l=await Fp(t.endLabelLeft,Ov(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");o=u.node().appendChild(l);const d=l.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),c.node().appendChild(l),pa.get(t.id)||pa.set(t.id,{}),pa.get(t.id).endLeft=c,Hv(o,t.endLabelLeft)}if(t.endLabelRight){const l=await Fp(t.endLabelRight,Ov(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");o=u.node().appendChild(l);const d=l.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),c.node().appendChild(l),pa.get(t.id)||pa.set(t.id,{}),pa.get(t.id).endRight=c,Hv(o,t.endLabelRight)}return r},"insertEdgeLabel");function Hv(e,t){si().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}se(Hv,"setTerminalWidth");var tBe=se((e,t)=>{$t.debug("Moving label abc88 ",e.id,e.label,Tk.get(e.id),t);let n=t.updatedPath?t.updatedPath:t.originalPath;const r=si(),{subGraphTitleTotalMargin:i}=LD(r);if(e.label){const s=Tk.get(e.id);let a=e.x,o=e.y;if(n){const l=au.calcLabelPosition(n);$t.debug("Moving label "+e.label+" from (",a,",",o,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(a=l.x,o=l.y)}s.attr("transform",`translate(${a}, ${o+i/2})`)}if(e.startLabelLeft){const s=pa.get(e.id).startLeft;let a=e.x,o=e.y;if(n){const l=au.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",n);a=l.x,o=l.y}s.attr("transform",`translate(${a}, ${o})`)}if(e.startLabelRight){const s=pa.get(e.id).startRight;let a=e.x,o=e.y;if(n){const l=au.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",n);a=l.x,o=l.y}s.attr("transform",`translate(${a}, ${o})`)}if(e.endLabelLeft){const s=pa.get(e.id).endLeft;let a=e.x,o=e.y;if(n){const l=au.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",n);a=l.x,o=l.y}s.attr("transform",`translate(${a}, ${o})`)}if(e.endLabelRight){const s=pa.get(e.id).endRight;let a=e.x,o=e.y;if(n){const l=au.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",n);a=l.x,o=l.y}s.attr("transform",`translate(${a}, ${o})`)}},"positionEdgeLabel"),nBe=se((e,t)=>{const n=e.x,r=e.y,i=Math.abs(t.x-n),s=Math.abs(t.y-r),a=e.width/2,o=e.height/2;return i>=a||s>=o},"outsideNode"),rBe=se((e,t,n)=>{$t.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const r=e.x,i=e.y,s=Math.abs(r-n.x),a=e.width/2;let o=n.x<t.x?a-s:a+s;const l=e.height/2,c=Math.abs(t.y-n.y),u=Math.abs(t.x-n.x);if(Math.abs(i-t.y)*a>Math.abs(r-t.x)*l){let d=n.y<t.y?t.y-l-i:i-l-t.y;o=u*d/c;const h={x:n.x<t.x?n.x+o:n.x-u+o,y:n.y<t.y?n.y+c-d:n.y-c+d};return o===0&&(h.x=t.x,h.y=t.y),u===0&&(h.x=t.x),c===0&&(h.y=t.y),$t.debug(`abc89 top/bottom calc, Q ${c}, q ${d}, R ${u}, r ${o}`,h),h}else{n.x<t.x?o=t.x-a-r:o=r-a-t.x;let d=c*o/u,h=n.x<t.x?n.x+u-o:n.x-u+o,m=n.y<t.y?n.y+d:n.y-d;return $t.debug(`sides calc abc89, Q ${c}, q ${d}, R ${u}, r ${o}`,{_x:h,_y:m}),o===0&&(h=t.x,m=t.y),u===0&&(h=t.x),c===0&&(m=t.y),{x:h,y:m}}},"intersection"),wU=se((e,t)=>{$t.warn("abc88 cutPathAtIntersect",e,t);let n=[],r=e[0],i=!1;return e.forEach(s=>{if($t.info("abc88 checking point",s,t),!nBe(t,s)&&!i){const a=rBe(t,r,s);$t.debug("abc88 inside",s,r,a),$t.debug("abc88 intersection",a,t);let o=!1;n.forEach(l=>{o=o||l.x===a.x&&l.y===a.y}),n.some(l=>l.x===a.x&&l.y===a.y)?$t.warn("abc88 no intersect",a,n):n.push(a),i=!0}else $t.warn("abc88 outside",s,r),r=s,i||n.push(s)}),$t.debug("returning points",n),n},"cutPathAtIntersect");function hre(e){const t=[],n=[];for(let r=1;r<e.length-1;r++){const i=e[r-1],s=e[r],a=e[r+1];(i.x===s.x&&s.y===a.y&&Math.abs(s.x-a.x)>5&&Math.abs(s.y-i.y)>5||i.y===s.y&&s.x===a.x&&Math.abs(s.x-i.x)>5&&Math.abs(s.y-a.y)>5)&&(t.push(s),n.push(r))}return{cornerPoints:t,cornerPointPositions:n}}se(hre,"extractCornerPoints");var _U=se(function(e,t,n){const r=t.x-e.x,i=t.y-e.y,s=Math.sqrt(r*r+i*i),a=n/s;return{x:t.x-a*r,y:t.y-a*i}},"findAdjacentPoint"),iBe=se(function(e){const{cornerPointPositions:t}=hre(e),n=[];for(let r=0;r<e.length;r++)if(t.includes(r)){const i=e[r-1],s=e[r+1],a=e[r],o=_U(i,a,5),l=_U(s,a,5),c=l.x-o.x,u=l.y-o.y;n.push(o);const d=Math.sqrt(2)*2;let h={x:a.x,y:a.y};if(Math.abs(s.x-i.x)>10&&Math.abs(s.y-i.y)>=10){$t.debug("Corner point fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));const m=5;a.x===o.x?h={x:c<0?o.x-m+d:o.x+m-d,y:u<0?o.y-d:o.y+d}:h={x:c<0?o.x-d:o.x+d,y:u<0?o.y-m+d:o.y+m-d}}else $t.debug("Corner point skipping fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));n.push(h,l)}else n.push(e[r]);return n},"fixCorners"),sBe=se(function(e,t,n,r,i,s,a){var I;const{handDrawnSeed:o}=si();let l=t.points,c=!1;const u=i;var d=s;const h=[];for(const O in t.cssCompiledStyles)Yte(O)||h.push(t.cssCompiledStyles[O]);d.intersect&&u.intersect&&(l=l.slice(1,t.points.length-1),l.unshift(u.intersect(l[0])),$t.debug("Last point APA12",t.start,"-->",t.end,l[l.length-1],d,d.intersect(l[l.length-1])),l.push(d.intersect(l[l.length-1]))),t.toCluster&&($t.info("to cluster abc88",n.get(t.toCluster)),l=wU(t.points,n.get(t.toCluster).node),c=!0),t.fromCluster&&($t.debug("from cluster abc88",n.get(t.fromCluster),JSON.stringify(l,null,2)),l=wU(l.reverse(),n.get(t.fromCluster).node).reverse(),c=!0);let m=l.filter(O=>!Number.isNaN(O.y));m=iBe(m);let y=E2;switch(y=dk,t.curve){case"linear":y=dk;break;case"basis":y=E2;break;case"cardinal":y=Dee;break;case"bumpX":y=Mee;break;case"bumpY":y=Iee;break;case"catmullRom":y=Lee;break;case"monotoneX":y=Vee;break;case"monotoneY":y=Wee;break;case"natural":y=Gee;break;case"step":y=Kee;break;case"stepAfter":y=Zee;break;case"stepBefore":y=Yee;break;default:y=E2}const{x:b,y:v}=A4e(t),x=_6e().x(b).y(v).curve(y);let w;switch(t.thickness){case"normal":w="edge-thickness-normal";break;case"thick":w="edge-thickness-thick";break;case"invisible":w="edge-thickness-invisible";break;default:w="edge-thickness-normal"}switch(t.pattern){case"solid":w+=" edge-pattern-solid";break;case"dotted":w+=" edge-pattern-dotted";break;case"dashed":w+=" edge-pattern-dashed";break;default:w+=" edge-pattern-solid"}let S,C=x(m);const k=Array.isArray(t.style)?t.style:[t.style];let A=k.find(O=>O==null?void 0:O.startsWith("stroke:"));if(t.look==="handDrawn"){const O=Cn.svg(e);Object.assign([],m);const L=O.path(C,{roughness:.3,seed:o});w+=" transition",S=Wr(L).select("path").attr("id",t.id).attr("class"," "+w+(t.classes?" "+t.classes:"")).attr("style",k?k.reduce((V,F)=>V+";"+F,""):"");let P=S.attr("d");S.attr("d",P),e.node().appendChild(S.node())}else{const O=h.join(";"),L=k?k.reduce((F,J)=>F+J+";",""):"";let P="";t.animate&&(P=" edge-animation-fast"),t.animation&&(P=" edge-animation-"+t.animation);const V=O?O+";"+L+";":L;S=e.append("path").attr("d",C).attr("id",t.id).attr("class"," "+w+(t.classes?" "+t.classes:"")+(P??"")).attr("style",V),A=(I=V.match(/stroke:([^;]+)/))==null?void 0:I[1]}let R="";(si().flowchart.arrowMarkerAbsolute||si().state.arrowMarkerAbsolute)&&(R=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,R=R.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),$t.info("arrowTypeStart",t.arrowTypeStart),$t.info("arrowTypeEnd",t.arrowTypeEnd),JLe(S,t,R,a,r,A);let N={};return c&&(N.updatedPath=l),N.originalPath=t.points,N},"insertEdge"),aBe=se((e,t,n,r)=>{t.forEach(i=>{_Be[i](e,n,r)})},"insertMarkers"),oBe=se((e,t,n)=>{$t.trace("Making markers for ",n),e.append("defs").append("marker").attr("id",n+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),lBe=se((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),cBe=se((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),uBe=se((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),dBe=se((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",n+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),fBe=se((e,t,n)=>{e.append("marker").attr("id",n+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",n+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),hBe=se((e,t,n)=>{e.append("marker").attr("id",n+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",n+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),pBe=se((e,t,n)=>{e.append("marker").attr("id",n+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",n+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),mBe=se((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),gBe=se((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",n+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),yBe=se((e,t,n)=>{const r=e.append("defs").append("marker").attr("id",n+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("d","M9,0 L9,18");const i=e.append("defs").append("marker").attr("id",n+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),bBe=se((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",n+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),vBe=se((e,t,n)=>{const r=e.append("defs").append("marker").attr("id",n+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=e.append("defs").append("marker").attr("id",n+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),xBe=se((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),wBe=se((e,t,n)=>{const r=e.append("defs").append("marker").attr("id",n+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");r.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),r.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),r.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),_Be={extension:oBe,composition:lBe,aggregation:cBe,dependency:uBe,lollipop:dBe,point:fBe,circle:hBe,cross:pBe,barb:mBe,only_one:gBe,zero_or_one:yBe,one_or_more:bBe,zero_or_more:vBe,requirement_arrow:xBe,requirement_contains:wBe},SBe=aBe,CBe={common:Wy,getConfig:Eo,insertCluster:ILe,insertEdge:sBe,insertEdgeLabel:eBe,insertMarkers:SBe,insertNode:fre,interpolateToCurve:t6,labelHelper:ur,log:$t,positionEdgeLabel:tBe},yw={},pre=se(e=>{for(const t of e)yw[t.name]=t},"registerLayoutLoaders"),kBe=se(()=>{pre([{name:"dagre",loader:se(async()=>await Kr(()=>import("./dagre-OKDRZEBW-C3bnvnEB.js"),__vite__mapDeps([0,1,2,3,4,5])),"loader")}])},"registerDefaultLayoutLoaders");kBe();var Zdt=se(async(e,t)=>{if(!(e.layoutAlgorithm in yw))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const n=yw[e.layoutAlgorithm];return(await n.loader()).render(e,t,CBe,{algorithm:n.algorithm})},"render"),Xdt=se((e="",{fallback:t="dagre"}={})=>{if(e in yw)return e;if(t in yw)return $t.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),SU={name:"mermaid",version:"11.6.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.4",katex:"^0.16.9",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^15.0.7",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",chokidar:"^4.0.3",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.0.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},EBe=se(e=>{var i;const{securityLevel:t}=si();let n=Wr("body");if(t==="sandbox"){const a=((i=Wr(`#i${e}`).node())==null?void 0:i.contentDocument)??document;n=Wr(a.body)}return n.select(`#${e}`)},"selectSvgElement"),mre="comm",gre="rule",yre="decl",TBe="@import",ABe="@namespace",RBe="@keyframes",NBe="@layer",bre=Math.abs,w6=String.fromCharCode;function vre(e){return e.trim()}function N2(e,t,n){return e.replace(t,n)}function MBe(e,t,n){return e.indexOf(t,n)}function x0(e,t){return e.charCodeAt(t)|0}function fy(e,t,n){return e.slice(t,n)}function tu(e){return e.length}function IBe(e){return e.length}function BS(e,t){return t.push(e),e}var TT=1,hy=1,xre=0,Ul=0,Es=0,Zy="";function _6(e,t,n,r,i,s,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:TT,column:hy,length:a,return:"",siblings:o}}function jBe(){return Es}function OBe(){return Es=Ul>0?x0(Zy,--Ul):0,hy--,Es===10&&(hy=1,TT--),Es}function yc(){return Es=Ul<xre?x0(Zy,Ul++):0,hy++,Es===10&&(hy=1,TT++),Es}function Qf(){return x0(Zy,Ul)}function M2(){return Ul}function AT(e,t){return fy(Zy,e,t)}function bw(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function PBe(e){return TT=hy=1,xre=tu(Zy=e),Ul=0,[]}function DBe(e){return Zy="",e}function DI(e){return vre(AT(Ul-1,T4(e===91?e+2:e===40?e+1:e)))}function FBe(e){for(;(Es=Qf())&&Es<33;)yc();return bw(e)>2||bw(Es)>3?"":" "}function LBe(e,t){for(;--t&&yc()&&!(Es<48||Es>102||Es>57&&Es<65||Es>70&&Es<97););return AT(e,M2()+(t<6&&Qf()==32&&yc()==32))}function T4(e){for(;yc();)switch(Es){case e:return Ul;case 34:case 39:e!==34&&e!==39&&T4(Es);break;case 40:e===41&&T4(e);break;case 92:yc();break}return Ul}function BBe(e,t){for(;yc()&&e+Es!==57;)if(e+Es===84&&Qf()===47)break;return"/*"+AT(t,Ul-1)+"*"+w6(e===47?e:yc())}function $Be(e){for(;!bw(Qf());)yc();return AT(e,Ul)}function zBe(e){return DBe(I2("",null,null,null,[""],e=PBe(e),0,[0],e))}function I2(e,t,n,r,i,s,a,o,l){for(var c=0,u=0,d=a,h=0,m=0,y=0,b=1,v=1,x=1,w=0,S="",C=i,k=s,A=r,R=S;v;)switch(y=w,w=yc()){case 40:if(y!=108&&x0(R,d-1)==58){MBe(R+=N2(DI(w),"&","&\f"),"&\f",bre(c?o[c-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:R+=DI(w);break;case 9:case 10:case 13:case 32:R+=FBe(y);break;case 92:R+=LBe(M2()-1,7);continue;case 47:switch(Qf()){case 42:case 47:BS(UBe(BBe(yc(),M2()),t,n,l),l),(bw(y||1)==5||bw(Qf()||1)==5)&&tu(R)&&fy(R,-1,void 0)!==" "&&(R+=" ");break;default:R+="/"}break;case 123*b:o[c++]=tu(R)*x;case 125*b:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+u:x==-1&&(R=N2(R,/\f/g,"")),m>0&&(tu(R)-d||b===0&&y===47)&&BS(m>32?kU(R+";",r,n,d-1,l):kU(N2(R," ","")+";",r,n,d-2,l),l);break;case 59:R+=";";default:if(BS(A=CU(R,t,n,c,u,i,o,S,C=[],k=[],d,s),s),w===123)if(u===0)I2(R,t,A,A,C,s,d,o,k);else{switch(h){case 99:if(x0(R,3)===110)break;case 108:if(x0(R,2)===97)break;default:u=0;case 100:case 109:case 115:}u?I2(e,A,A,r&&BS(CU(e,A,A,0,0,i,o,S,i,C=[],d,k),k),i,k,d,o,r?C:k):I2(R,A,A,A,[""],k,0,o,k)}}c=u=m=0,b=x=1,S=R="",d=a;break;case 58:d=1+tu(R),m=y;default:if(b<1){if(w==123)--b;else if(w==125&&b++==0&&OBe()==125)continue}switch(R+=w6(w),w*b){case 38:x=u>0?1:(R+="\f",-1);break;case 44:o[c++]=(tu(R)-1)*x,x=1;break;case 64:Qf()===45&&(R+=DI(yc())),h=Qf(),u=d=tu(S=R+=$Be(M2())),w++;break;case 45:y===45&&tu(R)==2&&(b=0)}}return s}function CU(e,t,n,r,i,s,a,o,l,c,u,d){for(var h=i-1,m=i===0?s:[""],y=IBe(m),b=0,v=0,x=0;b<r;++b)for(var w=0,S=fy(e,h+1,h=bre(v=a[b])),C=e;w<y;++w)(C=vre(v>0?m[w]+" "+S:N2(S,/&\f/g,m[w])))&&(l[x++]=C);return _6(e,t,n,i===0?gre:o,l,c,u,d)}function UBe(e,t,n,r){return _6(e,t,n,mre,w6(jBe()),fy(e,2,-2),0,r)}function kU(e,t,n,r,i){return _6(e,t,n,yre,fy(e,0,r),fy(e,r+1,-1),r,i)}function A4(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function qBe(e,t,n,r){switch(e.type){case NBe:if(e.children.length)break;case TBe:case ABe:case yre:return e.return=e.return||e.value;case mre:return"";case RBe:return e.return=e.value+"{"+A4(e.children,r)+"}";case gre:if(!tu(e.value=e.props.join(",")))return""}return tu(n=A4(e.children,r))?e.return=e.value+"{"+n+"}":""}var VBe=ete(Object.keys,Object),WBe=Object.prototype,HBe=WBe.hasOwnProperty;function GBe(e){if(!bT(e))return VBe(e);var t=[];for(var n in Object(e))HBe.call(e,n)&&n!="constructor"&&t.push(n);return t}var R4=Im(ju,"DataView"),N4=Im(ju,"Promise"),M4=Im(ju,"Set"),I4=Im(ju,"WeakMap"),EU="[object Map]",KBe="[object Object]",TU="[object Promise]",AU="[object Set]",RU="[object WeakMap]",NU="[object DataView]",YBe=Mm(R4),ZBe=Mm(gw),XBe=Mm(N4),JBe=Mm(M4),QBe=Mm(I4),kp=Hy;(R4&&kp(new R4(new ArrayBuffer(1)))!=NU||gw&&kp(new gw)!=EU||N4&&kp(N4.resolve())!=TU||M4&&kp(new M4)!=AU||I4&&kp(new I4)!=RU)&&(kp=function(e){var t=Hy(e),n=t==KBe?e.constructor:void 0,r=n?Mm(n):"";if(r)switch(r){case YBe:return NU;case ZBe:return EU;case XBe:return TU;case JBe:return AU;case QBe:return RU}return t});var e$e="[object Map]",t$e="[object Set]",n$e=Object.prototype,r$e=n$e.hasOwnProperty;function MU(e){if(e==null)return!0;if(vT(e)&&(bk(e)||typeof e=="string"||typeof e.splice=="function"||QD(e)||e6(e)||yk(e)))return!e.length;var t=kp(e);if(t==e$e||t==t$e)return!e.size;if(bT(e))return!GBe(e).length;for(var n in e)if(r$e.call(e,n))return!1;return!0}var wre="c4",i$e=se(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),s$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./c4Diagram-VJAJSXHY-CkCah2oN.js");return{diagram:t}},__vite__mapDeps([6,7]));return{id:wre,diagram:e}},"loader"),a$e={id:wre,detector:i$e,loader:s$e},o$e=a$e,_re="flowchart",l$e=se((e,t)=>{var n,r;return((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"||((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),c$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./flowDiagram-4HSFHLVR-DtSr6jRp.js");return{diagram:t}},__vite__mapDeps([8,9,10]));return{id:_re,diagram:e}},"loader"),u$e={id:_re,detector:l$e,loader:c$e},d$e=u$e,Sre="flowchart-v2",f$e=se((e,t)=>{var n,r,i;return((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="dagre-d3"?!1:(((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),h$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./flowDiagram-4HSFHLVR-DtSr6jRp.js");return{diagram:t}},__vite__mapDeps([8,9,10]));return{id:Sre,diagram:e}},"loader"),p$e={id:Sre,detector:f$e,loader:h$e},m$e=p$e,Cre="er",g$e=se(e=>/^\s*erDiagram/.test(e),"detector"),y$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./erDiagram-Q7BY3M3F-CngxepI_.js");return{diagram:t}},__vite__mapDeps([11,9,10]));return{id:Cre,diagram:e}},"loader"),b$e={id:Cre,detector:g$e,loader:y$e},v$e=b$e,kre="gitGraph",x$e=se(e=>/^\s*gitGraph/.test(e),"detector"),w$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./gitGraphDiagram-7IBYFJ6S-HNkyM_RT.js");return{diagram:t}},__vite__mapDeps([12,13,14,15,2,4,5]));return{id:kre,diagram:e}},"loader"),_$e={id:kre,detector:x$e,loader:w$e},S$e=_$e,Ere="gantt",C$e=se(e=>/^\s*gantt/.test(e),"detector"),k$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./ganttDiagram-APWFNJXF-DccAdQ3m.js");return{diagram:t}},__vite__mapDeps([16,17,18]));return{id:Ere,diagram:e}},"loader"),E$e={id:Ere,detector:C$e,loader:k$e},T$e=E$e,Tre="info",A$e=se(e=>/^\s*info/.test(e),"detector"),R$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./infoDiagram-PH2N3AL5-BWR4b331.js");return{diagram:t}},__vite__mapDeps([19,15,2,4,5]));return{id:Tre,diagram:e}},"loader"),N$e={id:Tre,detector:A$e,loader:R$e},Are="pie",M$e=se(e=>/^\s*pie/.test(e),"detector"),I$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./pieDiagram-IB7DONF6-CdFoDSkm.js");return{diagram:t}},__vite__mapDeps([20,13,15,2,4,5,21,22,18]));return{id:Are,diagram:e}},"loader"),j$e={id:Are,detector:M$e,loader:I$e},Rre="quadrantChart",O$e=se(e=>/^\s*quadrantChart/.test(e),"detector"),P$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./quadrantDiagram-7GDLP6J5-CijVQ8kn.js");return{diagram:t}},__vite__mapDeps([23,17,18]));return{id:Rre,diagram:e}},"loader"),D$e={id:Rre,detector:O$e,loader:P$e},F$e=D$e,Nre="xychart",L$e=se(e=>/^\s*xychart-beta/.test(e),"detector"),B$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./xychartDiagram-VJFVF3MP-BYBR3sW-.js");return{diagram:t}},__vite__mapDeps([24,18,22,17]));return{id:Nre,diagram:e}},"loader"),$$e={id:Nre,detector:L$e,loader:B$e},z$e=$$e,Mre="requirement",U$e=se(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),q$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./requirementDiagram-KVF5MWMF-BxSEBNmY.js");return{diagram:t}},__vite__mapDeps([25,9]));return{id:Mre,diagram:e}},"loader"),V$e={id:Mre,detector:U$e,loader:q$e},W$e=V$e,Ire="sequence",H$e=se(e=>/^\s*sequenceDiagram/.test(e),"detector"),G$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./sequenceDiagram-X6HHIX6F-CsIMqAl7.js");return{diagram:t}},__vite__mapDeps([26,7,14]));return{id:Ire,diagram:e}},"loader"),K$e={id:Ire,detector:H$e,loader:G$e},Y$e=K$e,jre="class",Z$e=se((e,t)=>{var n;return((n=t==null?void 0:t.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),X$e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./classDiagram-GIVACNV2-DHK--G6m.js");return{diagram:t}},__vite__mapDeps([27,28,9]));return{id:jre,diagram:e}},"loader"),J$e={id:jre,detector:Z$e,loader:X$e},Q$e=J$e,Ore="classDiagram",e9e=se((e,t)=>{var n;return/^\s*classDiagram/.test(e)&&((n=t==null?void 0:t.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),t9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./classDiagram-v2-COTLJTTW-DHK--G6m.js");return{diagram:t}},__vite__mapDeps([29,28,9]));return{id:Ore,diagram:e}},"loader"),n9e={id:Ore,detector:e9e,loader:t9e},r9e=n9e,Pre="state",i9e=se((e,t)=>{var n;return((n=t==null?void 0:t.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),s9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./stateDiagram-DGXRK772-Ck0t385H.js");return{diagram:t}},__vite__mapDeps([30,31,9,1,2,3,4]));return{id:Pre,diagram:e}},"loader"),a9e={id:Pre,detector:i9e,loader:s9e},o9e=a9e,Dre="stateDiagram",l9e=se((e,t)=>{var n;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((n=t==null?void 0:t.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper")},"detector"),c9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./stateDiagram-v2-YXO3MK2T-B_VjQhqr.js");return{diagram:t}},__vite__mapDeps([32,31,9]));return{id:Dre,diagram:e}},"loader"),u9e={id:Dre,detector:l9e,loader:c9e},d9e=u9e,Fre="journey",f9e=se(e=>/^\s*journey/.test(e),"detector"),h9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./journeyDiagram-U35MCT3I-pO7qWRTq.js");return{diagram:t}},__vite__mapDeps([33,7,21]));return{id:Fre,diagram:e}},"loader"),p9e={id:Fre,detector:f9e,loader:h9e},m9e=p9e,g9e=se((e,t,n)=>{$t.debug(`rendering svg for syntax error
`);const r=EBe(t),i=r.append("g");r.attr("viewBox","0 0 2412 512"),yJ(r,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)},"draw"),Lre={draw:g9e},y9e=Lre,b9e={db:{},renderer:Lre,parser:{parse:se(()=>{},"parse")}},v9e=b9e,Bre="flowchart-elk",x9e=se((e,t={})=>{var n;return/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),w9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./flowDiagram-4HSFHLVR-DtSr6jRp.js");return{diagram:t}},__vite__mapDeps([8,9,10]));return{id:Bre,diagram:e}},"loader"),_9e={id:Bre,detector:x9e,loader:w9e},S9e=_9e,$re="timeline",C9e=se(e=>/^\s*timeline/.test(e),"detector"),k9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./timeline-definition-BDJGKUSR-CrMO7Kvn.js");return{diagram:t}},__vite__mapDeps([34,21]));return{id:$re,diagram:e}},"loader"),E9e={id:$re,detector:C9e,loader:k9e},T9e=E9e,zre="mindmap",A9e=se(e=>/^\s*mindmap/.test(e),"detector"),R9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./mindmap-definition-ALO5MXBD-ChLr6thK.js");return{diagram:t}},__vite__mapDeps([35,36]));return{id:zre,diagram:e}},"loader"),N9e={id:zre,detector:A9e,loader:R9e},M9e=N9e,Ure="kanban",I9e=se(e=>/^\s*kanban/.test(e),"detector"),j9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./kanban-definition-NDS4AKOZ-CjoNMrQe.js");return{diagram:t}},[]);return{id:Ure,diagram:e}},"loader"),O9e={id:Ure,detector:I9e,loader:j9e},P9e=O9e,qre="sankey",D9e=se(e=>/^\s*sankey-beta/.test(e),"detector"),F9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./sankeyDiagram-QLVOVGJD-BTMjoiFE.js");return{diagram:t}},__vite__mapDeps([37,22,18]));return{id:qre,diagram:e}},"loader"),L9e={id:qre,detector:D9e,loader:F9e},B9e=L9e,Vre="packet",$9e=se(e=>/^\s*packet-beta/.test(e),"detector"),z9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./diagram-VNBRO52H-qmzVNPUI.js");return{diagram:t}},__vite__mapDeps([38,13,15,2,4,5]));return{id:Vre,diagram:e}},"loader"),U9e={id:Vre,detector:$9e,loader:z9e},Wre="radar",q9e=se(e=>/^\s*radar-beta/.test(e),"detector"),V9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./diagram-SSKATNLV-DdmkVTyx.js");return{diagram:t}},__vite__mapDeps([39,13,15,2,4,5]));return{id:Wre,diagram:e}},"loader"),W9e={id:Wre,detector:q9e,loader:V9e},Hre="block",H9e=se(e=>/^\s*block-beta/.test(e),"detector"),G9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./blockDiagram-JOT3LUYC-CmFRgFEb.js");return{diagram:t}},__vite__mapDeps([40,5,2,1,10]));return{id:Hre,diagram:e}},"loader"),K9e={id:Hre,detector:H9e,loader:G9e},Y9e=K9e,Gre="architecture",Z9e=se(e=>/^\s*architecture/.test(e),"detector"),X9e=se(async()=>{const{diagram:e}=await Kr(async()=>{const{diagram:t}=await import("./architectureDiagram-IEHRJDOE-BzLiCrrK.js");return{diagram:t}},__vite__mapDeps([41,13,14,15,2,4,5,36]));return{id:Gre,diagram:e}},"loader"),J9e={id:Gre,detector:Z9e,loader:X9e},Q9e=J9e,IU=!1,RT=se(()=>{IU||(IU=!0,XC("error",v9e,e=>e.toLowerCase().trim()==="error"),XC("---",{db:{clear:se(()=>{},"clear")},styles:{},renderer:{draw:se(()=>{},"draw")},parser:{parse:se(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:se(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),iJ(o$e,P9e,r9e,Q$e,v$e,T$e,N$e,j$e,W$e,Y$e,S9e,m$e,d$e,M9e,T9e,S$e,d9e,o9e,m9e,F$e,B9e,U9e,z$e,Y9e,Q9e,W9e))},"addDiagrams"),eze=se(async()=>{$t.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(iy).map(async([n,{detector:r,loader:i}])=>{if(i)try{Vj(n)}catch{try{const{diagram:s,id:a}=await i();XC(a,s,r)}catch(s){throw $t.error(`Failed to load external diagram with key ${n}. Removing from detectors.`),delete iy[n],s}}}))).filter(n=>n.status==="rejected");if(t.length>0){$t.error(`Failed to load ${t.length} external diagrams`);for(const n of t)$t.error(n);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),tze="graphics-document document";function Kre(e,t){e.attr("role",tze),t!==""&&e.attr("aria-roledescription",t)}se(Kre,"setA11yDiagramInfo");function Yre(e,t,n,r){if(e.insert!==void 0){if(n){const i=`chart-desc-${r}`;e.attr("aria-describedby",i),e.insert("desc",":first-child").attr("id",i).text(n)}if(t){const i=`chart-title-${r}`;e.attr("aria-labelledby",i),e.insert("title",":first-child").attr("id",i).text(t)}}}se(Yre,"addSVGa11yTitleDescription");var Hp,j4=(Hp=class{constructor(t,n,r,i,s){this.type=t,this.text=n,this.db=r,this.parser=i,this.renderer=s}static async fromText(t,n={}){var c,u;const r=Eo(),i=CD(t,r);t=_8e(t)+`
`;try{Vj(i)}catch{const d=A3e(i);if(!d)throw new rJ(`Diagram ${i} not found.`);const{id:h,diagram:m}=await d();XC(h,m)}const{db:s,parser:a,renderer:o,init:l}=Vj(i);return a.parser&&(a.parser.yy=s),(c=s.clear)==null||c.call(s),l==null||l(r),n.title&&((u=s.setDiagramTitle)==null||u.call(s,n.title)),await a.parse(t),new Hp(i,t,s,a,o)}async render(t,n){await this.renderer.draw(this.text,t,n,this)}getParser(){return this.parser}getType(){return this.type}},se(Hp,"Diagram"),Hp),jU=[],nze=se(()=>{jU.forEach(e=>{e()}),jU=[]},"attachFunctions"),rze=se(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function Zre(e){const t=e.match(nJ);if(!t)return{text:e,metadata:{}};let n=T4e(t[1],{schema:E4e})??{};n=typeof n=="object"&&!Array.isArray(n)?n:{};const r={};return n.displayMode&&(r.displayMode=n.displayMode.toString()),n.title&&(r.title=n.title.toString()),n.config&&(r.config=n.config),{text:e.slice(t[0].length),metadata:r}}se(Zre,"extractFrontMatter");var ize=se(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,n,r)=>"<"+n+r.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),sze=se(e=>{const{text:t,metadata:n}=Zre(e),{displayMode:r,title:i,config:s={}}=n;return r&&(s.gantt||(s.gantt={}),s.gantt.displayMode=r),{title:i,config:s,text:t}},"processFrontmatter"),aze=se(e=>{const t=au.detectInit(e)??{},n=au.detectDirective(e,"wrap");return Array.isArray(n)?t.wrap=n.some(({type:r})=>r==="wrap"):(n==null?void 0:n.type)==="wrap"&&(t.wrap=!0),{text:c8e(e),directive:t}},"processDirectives");function S6(e){const t=ize(e),n=sze(t),r=aze(n.text),i=a6(n.config,r.directive);return e=rze(r.text),{code:e,title:n.title,config:i}}se(S6,"preprocessDiagram");function Xre(e){const t=new TextEncoder().encode(e),n=Array.from(t,r=>String.fromCodePoint(r)).join("");return btoa(n)}se(Xre,"toBase64");var oze=5e4,lze="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",cze="sandbox",uze="loose",dze="http://www.w3.org/2000/svg",fze="http://www.w3.org/1999/xlink",hze="http://www.w3.org/1999/xhtml",pze="100%",mze="100%",gze="border:0;margin:0;",yze="margin:0",bze="allow-top-navigation-by-user-activation allow-popups",vze='The "iframe" tag is not supported by your browser.',xze=["foreignobject"],wze=["dominant-baseline"];function C6(e){const t=S6(e);return YC(),V3e(t.config??{}),t}se(C6,"processAndSetConfigs");async function Jre(e,t){RT();try{const{code:n,config:r}=C6(e);return{diagramType:(await eie(n)).type,config:r}}catch(n){if(t!=null&&t.suppressErrors)return!1;throw n}}se(Jre,"parse");var OU=se((e,t,n=[])=>`
.${e} ${t} { ${n.join(" !important; ")} !important; }`,"cssImportantStyles"),_ze=se((e,t=new Map)=>{var r;let n="";if(e.themeCSS!==void 0&&(n+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(n+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(n+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const o=e.htmlLabels??((r=e.flowchart)==null?void 0:r.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{MU(l.styles)||o.forEach(c=>{n+=OU(l.id,c,l.styles)}),MU(l.textStyles)||(n+=OU(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return n},"createCssStyles"),Sze=se((e,t,n,r)=>{const i=_ze(e,n),s=cje(t,i,e.themeVariables);return A4(zBe(`${r}{${s}}`),qBe)},"createUserStyles"),Cze=se((e="",t,n)=>{let r=e;return!n&&!t&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=jm(r),r=r.replace(/<br>/g,"<br/>"),r},"cleanUpSvgCode"),kze=se((e="",t)=>{var i,s;const n=(s=(i=t==null?void 0:t.viewBox)==null?void 0:i.baseVal)!=null&&s.height?t.viewBox.baseVal.height+"px":mze,r=Xre(`<body style="${yze}">${e}</body>`);return`<iframe style="width:${pze};height:${n};${gze}" src="data:text/html;charset=UTF-8;base64,${r}" sandbox="${bze}">
  ${vze}
</iframe>`},"putIntoIFrame"),PU=se((e,t,n,r,i)=>{const s=e.append("div");s.attr("id",n),r&&s.attr("style",r);const a=s.append("svg").attr("id",t).attr("width","100%").attr("xmlns",dze);return i&&a.attr("xmlns:xlink",i),a.append("g"),e},"appendDivSvgG");function O4(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}se(O4,"sandboxedIframe");var Eze=se((e,t,n,r)=>{var i,s,a;(i=e.getElementById(t))==null||i.remove(),(s=e.getElementById(n))==null||s.remove(),(a=e.getElementById(r))==null||a.remove()},"removeExistingElements"),Tze=se(async function(e,t,n){var P,V,F,J,U,G;RT();const r=C6(t);t=r.code;const i=Eo();$t.debug(i),t.length>((i==null?void 0:i.maxTextSize)??oze)&&(t=lze);const s="#"+e,a="i"+e,o="#"+a,l="d"+e,c="#"+l,u=se(()=>{const ne=Wr(h?o:c).node();ne&&"remove"in ne&&ne.remove()},"removeTempElements");let d=Wr("body");const h=i.securityLevel===cze,m=i.securityLevel===uze,y=i.fontFamily;if(n!==void 0){if(n&&(n.innerHTML=""),h){const $=O4(Wr(n),a);d=Wr($.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=Wr(n);PU(d,e,l,`font-family: ${y}`,fze)}else{if(Eze(document,e,l,a),h){const $=O4(Wr("body"),a);d=Wr($.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=Wr("body");PU(d,e,l)}let b,v;try{b=await j4.fromText(t,{title:r.title})}catch($){if(i.suppressErrorRendering)throw u(),$;b=await j4.fromText("error"),v=$}const x=d.select(c).node(),w=b.type,S=x.firstChild,C=S.firstChild,k=(V=(P=b.renderer).getClasses)==null?void 0:V.call(P,t,b),A=Sze(i,w,k,s),R=document.createElement("style");R.innerHTML=A,S.insertBefore(R,C);try{await b.renderer.draw(t,e,SU.version,b)}catch($){throw i.suppressErrorRendering?u():y9e.draw(t,e,SU.version),$}const N=d.select(`${c} svg`),I=(J=(F=b.db).getAccTitle)==null?void 0:J.call(F),O=(G=(U=b.db).getAccDescription)==null?void 0:G.call(U);tie(w,N,I,O),d.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",hze);let L=d.select(c).node().innerHTML;if($t.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),L=Cze(L,h,qs(i.arrowMarkerAbsolute)),h){const $=d.select(c+" svg").node();L=kze(L,$)}else m||(L=ry.sanitize(L,{ADD_TAGS:xze,ADD_ATTR:wze,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(nze(),v)throw v;return u(),{diagramType:w,svg:L,bindFunctions:b.db.bindFunctions}},"render");function Qre(e={}){var r;const t=ya({},e);t!=null&&t.fontFamily&&!((r=t.themeVariables)!=null&&r.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),U3e(t),t!=null&&t.theme&&t.theme in Nd?t.themeVariables=Nd[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Nd.default.getThemeVariables(t.themeVariables));const n=typeof t=="object"?z3e(t):uJ();SD(n.logLevel),RT()}se(Qre,"initialize");var eie=se((e,t={})=>{const{code:n}=S6(e);return j4.fromText(n,t)},"getDiagramFromText");function tie(e,t,n,r){Kre(t,e),Yre(t,n,r,t.attr("id"))}se(tie,"addA11yInfo");var um=Object.freeze({render:Tze,parse:Jre,getDiagramFromText:eie,initialize:Qre,getConfig:Eo,setConfig:dJ,getSiteConfig:uJ,updateSiteConfig:q3e,reset:se(()=>{YC()},"reset"),globalReset:se(()=>{YC(sy)},"globalReset"),defaultConfig:sy});SD(Eo().logLevel);YC(Eo());var Aze=se((e,t,n)=>{$t.warn(e),s6(e)?(n&&n(e.str,e.hash),t.push({...e,message:e.str,error:e})):(n&&n(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),nie=se(async function(e={querySelector:".mermaid"}){try{await Rze(e)}catch(t){if(s6(t)&&$t.error(t.str),Qo.parseError&&Qo.parseError(t),!e.suppressErrors)throw $t.error("Use the suppressErrors option to suppress these errors"),t}},"run"),Rze=se(async function({postRenderCallback:e,querySelector:t,nodes:n}={querySelector:".mermaid"}){const r=um.getConfig();$t.debug(`${e?"":"No "}Callback function found`);let i;if(n)i=n;else if(t)i=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");$t.debug(`Found ${i.length} diagrams`),(r==null?void 0:r.startOnLoad)!==void 0&&($t.debug("Start On Load: "+(r==null?void 0:r.startOnLoad)),um.updateSiteConfig({startOnLoad:r==null?void 0:r.startOnLoad}));const s=new au.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const o=[];for(const l of Array.from(i)){if($t.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;a=l.innerHTML,a=Nte(au.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=au.detectInit(a);u&&$t.debug("Detected early reinit: ",u);try{const{svg:d,bindFunctions:h}=await aie(c,a,l);l.innerHTML=d,e&&await e(c),h&&h(l)}catch(d){Aze(d,o,Qo.parseError)}}if(o.length>0)throw o[0]},"runThrowsErrors"),rie=se(function(e){um.initialize(e)},"initialize"),Nze=se(async function(e,t,n){$t.warn("mermaid.init is deprecated. Please use run instead."),e&&rie(e);const r={postRenderCallback:n,querySelector:".mermaid"};typeof t=="string"?r.querySelector=t:t&&(t instanceof HTMLElement?r.nodes=[t]:r.nodes=t),await nie(r)},"init"),Mze=se(async(e,{lazyLoad:t=!0}={})=>{RT(),iJ(...e),t===!1&&await eze()},"registerExternalDiagrams"),iie=se(function(){if(Qo.startOnLoad){const{startOnLoad:e}=um.getConfig();e&&Qo.run().catch(t=>$t.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",iie,!1);var Ize=se(function(e){Qo.parseError=e},"setParseErrorHandler"),Ak=[],FI=!1,sie=se(async()=>{if(!FI){for(FI=!0;Ak.length>0;){const e=Ak.shift();if(e)try{await e()}catch(t){$t.error("Error executing queue",t)}}FI=!1}},"executeQueue"),jze=se(async(e,t)=>new Promise((n,r)=>{const i=se(()=>new Promise((s,a)=>{um.parse(e,t).then(o=>{s(o),n(o)},o=>{var l;$t.error("Error parsing",o),(l=Qo.parseError)==null||l.call(Qo,o),a(o),r(o)})}),"performCall");Ak.push(i),sie().catch(r)}),"parse"),aie=se((e,t,n)=>new Promise((r,i)=>{const s=se(()=>new Promise((a,o)=>{um.render(e,t,n).then(l=>{a(l),r(l)},l=>{var c;$t.error("Error parsing",l),(c=Qo.parseError)==null||c.call(Qo,l),o(l),i(l)})}),"performCall");Ak.push(s),sie().catch(i)}),"render"),Qo={startOnLoad:!0,mermaidAPI:um,parse:jze,render:aie,init:Nze,run:nie,registerExternalDiagrams:Mze,registerLayoutLoaders:pre,initialize:rie,parseError:void 0,contentLoaded:iie,setParseErrorHandler:Ize,detectType:CD,registerIconPacks:Z4e},Oze=Qo;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const Pze=new DOMParser,Dze=new XMLSerializer;function DU(e,t){const n=e.getAttribute(t);if(!n)return;let r="";for(const i of n.split(/\s+/)){const s=e.getElementById(i);s&&(r+=s.textContent)}return r}let FU=0;const Fze=async(e,t)=>{const n=document.createElement("div");n.ariaHidden="true",n.style.maxHeight="0",n.style.opacity="0",n.style.overflow="hidden",t!=null&&t.containerStyle&&Object.assign(n.style,t.containerStyle),document.body.append(n);const r=await Promise.allSettled(e.map(async i=>{const s=`${(t==null?void 0:t.prefix)??"mermaid"}-${FU}`;FU+=1;const{svg:a}=await Oze.render(s,i,n),o=Pze.parseFromString(a,"text/html"),[l]=o.getElementsByTagName("svg"),{height:c,width:u}=l.viewBox.baseVal,d=DU(l,"aria-describedby"),h=DU(l,"aria-labelledby"),m={height:c,id:s,svg:Dze.serializeToString(l),width:u};return d&&(m.description=d),h&&(m.title=h),m}));return n.remove(),r},Lze=()=>Fze,Bze=({code:e,isStreaming:t=!1})=>{const{foldStreamingCodeBlocks:n}=gr(Sn(w=>({foldStreamingCodeBlocks:w.foldStreamingCodeBlocks}))),[r,i]=T.useState(t?n:!1),[s,a]=T.useState(null),[o,l]=T.useState(!1),[c,u]=T.useState(null),d=T.useRef(null),h=ll(Sn(w=>Object.values(w.canvasControls))),m=T.useCallback((w,S,C,k,A)=>h.filter(R=>R.type==="codeblock"&&R.targetSlot===w&&R.renderer).map(R=>{if(R.renderer){const N={codeBlockContent:S,codeBlockLang:"mermaid",isFolded:k,toggleFold:A,canvasContextType:"codeblock"};return p.jsx(Ve.Fragment,{children:R.renderer(N)},R.id)}return null}).filter(Boolean),[h]),y=T.useCallback(async()=>{if(!(!e.trim()||r)){l(!0),u(null),a(null);try{const S=await Lze()([e]);if(S.length>0&&S[0].status==="fulfilled")a(S[0].value.svg);else if(S.length>0&&S[0].status==="rejected"){const C=S[0].reason;u((C==null?void 0:C.message)||"Failed to render Mermaid diagram")}else u("No results returned from Mermaid renderer")}catch(w){console.error("Mermaid rendering error:",w),u(w instanceof Error?w.message:"Failed to render Mermaid diagram")}finally{l(!1)}}},[e,r]);T.useEffect(()=>{!r&&e.trim()&&y()},[e,r,y]);const b=()=>{const w=r;i(S=>!S),w&&setTimeout(y,0)},v=T.useMemo(()=>e?e.split(`
`).slice(0,3).join(`
`):"",[e]),x=m("codeblock-header-actions",e,"mermaid",r,b);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:"MERMAID"}),p.jsx("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:x})]}),p.jsx("div",{})]}),!r&&p.jsxs("div",{className:"overflow-hidden w-full",children:[o&&p.jsxs("div",{className:"flex items-center justify-center p-8",children:[p.jsx(Qn,{className:"h-6 w-6 animate-spin text-muted-foreground"}),p.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Rendering diagram..."})]}),c&&p.jsxs("div",{className:"flex items-center gap-2 p-4 border border-destructive/20 bg-destructive/10 rounded-md",children:[p.jsx(vc,{className:"h-5 w-5 text-destructive flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-destructive",children:[p.jsx("div",{className:"font-medium",children:"Failed to render Mermaid diagram"}),p.jsx("div",{className:"text-xs mt-1 opacity-80",children:c})]})]}),s&&!o&&!c&&p.jsx("div",{ref:d,className:"mermaid-container p-4 bg-background border rounded-md overflow-auto",dangerouslySetInnerHTML:{__html:s}})]}),r&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:b,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:v})})]})},k6=T.memo(Bze),$ze=({markdownContent:e})=>{const t=nT(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const i=n;return p.jsx(Ry,{lang:i.lang,code:i.code,filepath:i.filepath},`code-${r}`)}else if(n.type==="mermaid"){const i=n;return p.jsx(k6,{code:i.code},`mermaid-${r}`)}return null})}):null},NT=Ve.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var b,v;const i=gr(x=>x.foldUserMessagesOnCompletion),[s,a]=T.useState(r&&i),[o,l]=T.useState(!1);T.useEffect(()=>{r&&i&&a(!0)},[r,i]);const c=t?wX(new Date(t),{addSuffix:!0}):"Sending...",u=((b=e.metadata)==null?void 0:b.attachedFiles)&&e.metadata.attachedFiles.length>0,d=e.content&&e.content.trim().length>0,h=T.useCallback(()=>a(x=>!x),[]),m=T.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),Pe.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(x){Pe.error("Failed to copy prompt."),console.error("Clipboard copy failed:",x)}},[e.content]),y=T.useMemo(()=>{var w;let x="";return d&&(x+=`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`),d&&u&&(x+=" + "),u&&(x+=`${(w=e.metadata.attachedFiles)==null?void 0:w.length} file(s)`),x||"[Empty Prompt]"},[d,u,e.content,e.metadata]);return p.jsxs("div",{className:Ye("user-prompt relative group/user overflow-wrap-anywhere",n),children:[p.jsxs("div",{className:Ye("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-center gap-1 mb-1 sm:mb-0",children:[p.jsx(d0e,{className:"h-4 w-4 text-primary flex-shrink-0"}),p.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[d&&p.jsx(In,{tooltipText:"Copy Prompt",onClick:m,"aria-label":"Copy user prompt",icon:o?p.jsx(Qa,{className:"text-green-500"}):p.jsx(nE,{}),className:"h-5 w-5"}),(d||u)&&p.jsx(In,{tooltipText:s?"Unfold":"Fold",onClick:h,"aria-label":s?"Unfold prompt":"Fold prompt",icon:s?p.jsx(Tc,{}):p.jsx(Eh,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground",children:c})})]}),!s&&p.jsxs(p.Fragment,{children:[u&&p.jsx("div",{className:"mb-2 space-y-1",children:(v=e.metadata.attachedFiles)==null?void 0:v.map(x=>p.jsx(iX,{fileMeta:x,isReadOnly:!0},x.id))}),p.jsx($ze,{markdownContent:e.content})]}),s&&p.jsx("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:h,children:y})]})});NT.displayName="UserPromptDisplay";const zze=(e,t,n,r,i)=>{if(typeof e=="string")return e.trim()?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const s=e,a=s.lang?`language-${s.lang}`:"language-plaintext";return n?p.jsx(Ry,{lang:s.lang,code:s.code,filepath:s.filepath,isStreaming:r},`code-${t}`):p.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[p.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:p.jsx("div",{className:"text-sm font-medium",children:s.lang?s.lang.toUpperCase():"CODE"})}),p.jsx("code",{className:Ye(a,"block p-4 font-mono text-sm leading-relaxed"),children:s.code})]},`pre-${t}`)}else if(e.type==="mermaid"){const s=e;return p.jsx(k6,{code:s.code,isStreaming:r},`mermaid-${t}`)}return null},Uze=({interactionId:e,markdownContent:t,isStreaming:n=!1,className:r})=>{const{enableStreamingMarkdown:i,enableStreamingCodeBlockParsing:s}=gr(Sn(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,enableStreamingCodeBlockParsing:m.enableStreamingCodeBlockParsing}))),a=nT(i?t:null),o=ll(Sn(m=>Object.values(m.canvasControls))),l=T.useCallback((m,y)=>o.filter(b=>b.type==="tool-call-step"&&b.targetSlot===m&&b.renderer).map(b=>b.renderer?p.jsx(Ve.Fragment,{children:b.renderer(y)},b.id):null).filter(Boolean),[o]),{toolCallStrings:c,toolResultStrings:u}=Ln(Sn(m=>{var b,v;const y=m.interactions.find(x=>x.id===e);return{toolCallStrings:(b=y==null?void 0:y.metadata)==null?void 0:b.toolCalls,toolResultStrings:(v=y==null?void 0:y.metadata)==null?void 0:v.toolResults}})),d=T.useMemo(()=>{if(!c)return[];try{const m=c.map(b=>JSON.parse(b)),y=(u==null?void 0:u.map(b=>JSON.parse(b)))??[];return m.map(b=>{const v=y.find(x=>x.toolCallId===b.toolCallId);return{call:b,result:v}})}catch(m){return console.error("[StreamingContentView] Error parsing tool call/result strings:",m),[]}},[c,u]),h=T.useMemo(()=>i?a.map((m,y)=>zze(m,y,s,n&&y===a.length-1)).filter(Boolean):[],[i,a,s,n,e]);return!i&&!t&&d.length===0?n?p.jsx("div",{className:Ye("text-muted-foreground italic",r),children:"Generating response..."}):null:p.jsxs("div",{className:Ye("streaming-content-view overflow-wrap-anywhere",r),children:[d.map(({call:m,result:y},b)=>{const v={interactionId:e,toolCall:m,toolResult:y,canvasContextType:"tool-call-step"};return p.jsx(Ve.Fragment,{children:l("tool-call-content",v)},`tool-step-${m.toolCallId||b}`)}),i?h:t?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:new rl().render(t)}}):null]})},qze=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":i="Stop Generation"})=>p.jsx(In,{tooltipText:"Stop",onClick:e,"aria-label":i,icon:p.jsx(t0e,{}),variant:r,size:n,className:t}),Vze=Symbol("Let zodToJsonSchema decide on which parser to use"),LU={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Wze=e=>typeof e=="string"?{...LU,name:e}:{...LU,...e},Hze=e=>{const t=Wze(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function oie(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function yi(e,t,n,r,i){e[t]=n,oie(e,t,r,i)}function Gze(){return{}}function Kze(e,t){var r,i,s;const n={type:"array"};return(r=e.type)!=null&&r._def&&((s=(i=e.type)==null?void 0:i._def)==null?void 0:s.typeName)!==Qt.ZodAny&&(n.items=ai(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&yi(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&yi(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(yi(n,"minItems",e.exactLength.value,e.exactLength.message,t),yi(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function Yze(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?yi(n,"minimum",r.value,r.message,t):yi(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),yi(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?yi(n,"maximum",r.value,r.message,t):yi(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),yi(n,"maximum",r.value,r.message,t));break;case"multipleOf":yi(n,"multipleOf",r.value,r.message,t);break}return n}function Zze(){return{type:"boolean"}}function lie(e,t){return ai(e.type._def,t)}const Xze=(e,t)=>ai(e.innerType._def,t);function cie(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,s)=>cie(e,t,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Jze(e,t)}}const Jze=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":yi(n,"minimum",r.value,r.message,t);break;case"max":yi(n,"maximum",r.value,r.message,t);break}return n};function Qze(e,t){return{...ai(e.innerType._def,t),default:e.defaultValue()}}function e7e(e,t){return t.effectStrategy==="input"?ai(e.schema._def,t):{}}function t7e(e){return{type:"string",enum:Array.from(e.values)}}const n7e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function r7e(e,t){const n=[ai(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),ai(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(s=>{if(n7e(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:o,...l}=s;a=l}else r=void 0;i.push(a)}}),i.length?{allOf:i,...r}:void 0}function i7e(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let LI;const nc={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(LI===void 0&&(LI=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),LI),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function uie(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":yi(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":yi(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":rc(n,"email",r.message,t);break;case"format:idn-email":rc(n,"idn-email",r.message,t);break;case"pattern:zod":Ha(n,nc.email,r.message,t);break}break;case"url":rc(n,"uri",r.message,t);break;case"uuid":rc(n,"uuid",r.message,t);break;case"regex":Ha(n,r.regex,r.message,t);break;case"cuid":Ha(n,nc.cuid,r.message,t);break;case"cuid2":Ha(n,nc.cuid2,r.message,t);break;case"startsWith":Ha(n,RegExp(`^${BI(r.value,t)}`),r.message,t);break;case"endsWith":Ha(n,RegExp(`${BI(r.value,t)}$`),r.message,t);break;case"datetime":rc(n,"date-time",r.message,t);break;case"date":rc(n,"date",r.message,t);break;case"time":rc(n,"time",r.message,t);break;case"duration":rc(n,"duration",r.message,t);break;case"length":yi(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),yi(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{Ha(n,RegExp(BI(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&rc(n,"ipv4",r.message,t),r.version!=="v4"&&rc(n,"ipv6",r.message,t);break}case"base64url":Ha(n,nc.base64url,r.message,t);break;case"jwt":Ha(n,nc.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&Ha(n,nc.ipv4Cidr,r.message,t),r.version!=="v4"&&Ha(n,nc.ipv6Cidr,r.message,t);break}case"emoji":Ha(n,nc.emoji(),r.message,t);break;case"ulid":{Ha(n,nc.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{rc(n,"binary",r.message,t);break}case"contentEncoding:base64":{yi(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{Ha(n,nc.base64,r.message,t);break}}break}case"nanoid":Ha(n,nc.nanoid,r.message,t)}return n}function BI(e,t){return t.patternStrategy==="escape"?a7e(e):e}const s7e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function a7e(e){let t="";for(let n=0;n<e.length;n++)s7e.has(e[n])||(t+="\\"),t+=e[n];return t}function rc(e,t,n,r){var i;e.format||(i=e.anyOf)!=null&&i.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):yi(e,"format",t,n,r)}function Ha(e,t,n,r){var i;e.pattern||(i=e.allOf)!=null&&i.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:BU(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):yi(e,"pattern",BU(t,r),n,r)}function BU(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let i="",s=!1,a=!1,o=!1;for(let c=0;c<r.length;c++){if(s){i+=r[c],s=!1;continue}if(n.i){if(a){if(r[c].match(/[a-z]/)){o?(i+=r[c],i+=`${r[c-2]}-${r[c]}`.toUpperCase(),o=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(i+=r[c],o=!0):i+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){i+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){i+=a?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}i+=r[c],r[c]==="\\"?s=!0:a&&r[c]==="]"?a=!1:!a&&r[c]==="["&&(a=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function die(e,t){var r,i,s,a,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Qt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,u)=>({...c,[u]:ai(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",u]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:ai(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((i=e.keyType)==null?void 0:i._def.typeName)===Qt.ZodString&&((s=e.keyType._def.checks)!=null&&s.length)){const{type:c,...u}=uie(e.keyType._def,t);return{...n,propertyNames:u}}else{if(((a=e.keyType)==null?void 0:a._def.typeName)===Qt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===Qt.ZodBranded&&e.keyType._def.type._def.typeName===Qt.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...u}=lie(e.keyType._def,t);return{...n,propertyNames:u}}}return n}function o7e(e,t){if(t.mapStrategy==="record")return die(e,t);const n=ai(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=ai(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function l7e(e){const t=e.values,r=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),i=Array.from(new Set(r.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function c7e(){return{not:{}}}function u7e(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Rk={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function d7e(e,t){if(t.target==="openApi3")return $U(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in Rk&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,s)=>{const a=Rk[s._def.typeName];return a&&!i.includes(a)?[...i,a]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...i,a];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((s,a,o)=>o.indexOf(s)===a);return{type:i.length>1?i:i[0],enum:n.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(s=>!r.includes(s))],[])};return $U(e,t)}const $U=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,i)=>ai(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function f7e(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:Rk[e.innerType._def.typeName],nullable:!0}:{type:[Rk[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=ai(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=ai(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function h7e(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",oie(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?yi(n,"minimum",r.value,r.message,t):yi(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),yi(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?yi(n,"maximum",r.value,r.message,t):yi(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),yi(n,"maximum",r.value,r.message,t));break;case"multipleOf":yi(n,"multipleOf",r.value,r.message,t);break}return n}function p7e(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},i=[],s=e.shape();for(const o in s){let l=s[o];if(l===void 0||l._def===void 0)continue;let c=g7e(l);c&&n&&(l instanceof pu&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const u=ai(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});u!==void 0&&(r.properties[o]=u,c||i.push(o))}i.length&&(r.required=i);const a=m7e(e,t);return a!==void 0&&(r.additionalProperties=a),r}function m7e(e,t){if(e.catchall._def.typeName!=="ZodNever")return ai(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function g7e(e){try{return e.isOptional()}catch{return!0}}const y7e=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return ai(e.innerType._def,t);const n=ai(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},b7e=(e,t)=>{if(t.pipeStrategy==="input")return ai(e.in._def,t);if(t.pipeStrategy==="output")return ai(e.out._def,t);const n=ai(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=ai(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function v7e(e,t){return ai(e.type._def,t)}function x7e(e,t){const r={type:"array",uniqueItems:!0,items:ai(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&yi(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&yi(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function w7e(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>ai(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:ai(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>ai(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function _7e(){return{not:{}}}function S7e(){return{}}const C7e=(e,t)=>ai(e.innerType._def,t),k7e=(e,t,n)=>{switch(t){case Qt.ZodString:return uie(e,n);case Qt.ZodNumber:return h7e(e,n);case Qt.ZodObject:return p7e(e,n);case Qt.ZodBigInt:return Yze(e,n);case Qt.ZodBoolean:return Zze();case Qt.ZodDate:return cie(e,n);case Qt.ZodUndefined:return _7e();case Qt.ZodNull:return u7e(n);case Qt.ZodArray:return Kze(e,n);case Qt.ZodUnion:case Qt.ZodDiscriminatedUnion:return d7e(e,n);case Qt.ZodIntersection:return r7e(e,n);case Qt.ZodTuple:return w7e(e,n);case Qt.ZodRecord:return die(e,n);case Qt.ZodLiteral:return i7e(e,n);case Qt.ZodEnum:return t7e(e);case Qt.ZodNativeEnum:return l7e(e);case Qt.ZodNullable:return f7e(e,n);case Qt.ZodOptional:return y7e(e,n);case Qt.ZodMap:return o7e(e,n);case Qt.ZodSet:return x7e(e,n);case Qt.ZodLazy:return()=>e.getter()._def;case Qt.ZodPromise:return v7e(e,n);case Qt.ZodNaN:case Qt.ZodNever:return c7e();case Qt.ZodEffects:return e7e(e,n);case Qt.ZodAny:return Gze();case Qt.ZodUnknown:return S7e();case Qt.ZodDefault:return Qze(e,n);case Qt.ZodBranded:return lie(e,n);case Qt.ZodReadonly:return C7e(e,n);case Qt.ZodCatch:return Xze(e,n);case Qt.ZodPipeline:return b7e(e,n);case Qt.ZodFunction:case Qt.ZodVoid:case Qt.ZodSymbol:return;default:return(r=>{})()}};function ai(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==Vze)return l}if(r&&!n){const l=E7e(r,t);if(l!==void 0)return l}const i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);const s=k7e(e,e.typeName,t),a=typeof s=="function"?ai(s(),t):s;if(a&&A7e(e,t,a),t.postProcess){const l=t.postProcess(a,e,t);return i.jsonSchema=a,l}return i.jsonSchema=a,a}const E7e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:T7e(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},T7e=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},A7e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),R7e=(e,t)=>{const n=Hze(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[c,u])=>({...l,[c]:ai(u._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,i=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,s=ai(e._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??{},a=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;a!==void 0&&(s.title=a);const o=i===void 0?r?{...s,[n.definitionPath]:r}:s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:s}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var vw={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},xw={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ww={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},_w={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Sw={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},N7e=[vw,xw,ww,_w,Sw];vw.code+"",xw.code+"",ww.code+"",_w.code+"",Sw.code+"";vw.name+"",vw.code,xw.name+"",xw.code,ww.name+"",ww.code,_w.name+"",_w.code,Sw.name+"",Sw.code;N7e.map(e=>e.code);function M7e(e){const t=["ROOT"];let n=-1,r=null;function i(l,c,u){switch(l){case'"':{n=c,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function s(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function a(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":i(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{s(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const d=e.substring(r,l+1);!"false".startsWith(d)&&!"true".startsWith(d)&&!"null".startsWith(d)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?s(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(c,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const u=e.substring(r,e.length);"true".startsWith(u)?o+="true".slice(u.length):"false".startsWith(u)?o+="false".slice(u.length):"null".startsWith(u)&&(o+="null".slice(u.length))}}return o}function I7e(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Xp({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Xp({text:M7e(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var j7e={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},O7e={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},P7e={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},D7e={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},F7e={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},L7e={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},B7e={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},$7e={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},z7e={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},U7e={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},q7e={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},V7e={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},W7e={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},H7e={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},G7e={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},K7e={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},MT=[j7e,O7e,P7e,D7e,F7e,L7e,B7e,$7e,z7e,U7e,q7e,V7e,W7e,H7e,G7e,K7e];Object.fromEntries(MT.map(e=>[e.code,e]));Object.fromEntries(MT.map(e=>[e.name,e.code]));MT.map(e=>e.code);function Ea(e,t){const n=MT.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function Y7e(e,t){var n;const r=(n=void 0)!=null?n:!1;return Z7e(R7e(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:i=>{const s=e.safeParse(i);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}var P4=Symbol.for("vercel.ai.schema");function Z7e(e,{validate:t}={}){return{[P4]:!0,_type:void 0,[Y2]:!0,jsonSchema:e,validate:t}}function X7e(e){return typeof e=="object"&&e!==null&&P4 in e&&e[P4]===!0&&"jsonSchema"in e&&"validate"in e}function IT(e){return X7e(e)?e:Y7e(e)}var J7e=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof i0=="object"?i0:{},Lp="1.9.0",zU=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Q7e(e){var t=new Set([e]),n=new Set,r=e.match(zU);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(i.prerelease!=null)return function(l){return l===e};function s(o){return n.add(o),!1}function a(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match(zU);if(!c)return s(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||i.major!==u.major?s(l):i.major===0?i.minor===u.minor&&i.patch<=u.patch?a(l):s(l):i.minor<=u.minor?a(l):s(l)}}var eUe=Q7e(Lp),tUe=Lp.split(".")[0],Cw=Symbol.for("opentelemetry.js.api."+tUe),kw=J7e;function E6(e,t,n,r){var i;r===void 0&&(r=!1);var s=kw[Cw]=(i=kw[Cw])!==null&&i!==void 0?i:{version:Lp};if(!r&&s[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}if(s.version!==Lp){var a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+Lp);return n.error(a.stack||a.message),!1}return s[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Lp+"."),!0}function Ew(e){var t,n,r=(t=kw[Cw])===null||t===void 0?void 0:t.version;if(!(!r||!eUe(r)))return(n=kw[Cw])===null||n===void 0?void 0:n[e]}function T6(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Lp+".");var n=kw[Cw];n&&delete n[e]}var nUe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},rUe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},iUe=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pv("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pv("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pv("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pv("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pv("verbose",this._namespace,t)},e}();function Pv(e,t,n){var r=Ew("diag");if(r)return n.unshift(t),r[e].apply(r,rUe([],nUe(n),!1))}var Ho;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ho||(Ho={}));function sUe(e,t){e<Ho.NONE?e=Ho.NONE:e>Ho.ALL&&(e=Ho.ALL),t=t||{};function n(r,i){var s=t[r];return typeof s=="function"&&e>=i?s.bind(t):function(){}}return{error:n("error",Ho.ERROR),warn:n("warn",Ho.WARN),info:n("info",Ho.INFO),debug:n("debug",Ho.DEBUG),verbose:n("verbose",Ho.VERBOSE)}}var aUe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},oUe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},lUe="diag",Nk=function(){function e(){function t(i){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=Ew("diag");if(o)return o[i].apply(o,oUe([],aUe(s),!1))}}var n=this,r=function(i,s){var a,o,l;if(s===void 0&&(s={logLevel:Ho.INFO}),i===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((a=c.stack)!==null&&a!==void 0?a:c.message),!1}typeof s=="number"&&(s={logLevel:s});var u=Ew("diag"),d=sUe((o=s.logLevel)!==null&&o!==void 0?o:Ho.INFO,i);if(u&&!s.suppressOverrideMessage){var h=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+h),d.warn("Current logger will overwrite one already registered from "+h)}return E6("diag",d,n,!0)};n.setLogger=r,n.disable=function(){T6(lUe,n)},n.createComponentLogger=function(i){return new iUe(i)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function cUe(e){return Symbol.for(e)}var uUe=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,i){var s=new e(n._currentContext);return s._currentContext.set(r,i),s},n.deleteValue=function(r){var i=new e(n._currentContext);return i._currentContext.delete(r),i}}return e}(),dUe=new uUe,fUe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},hUe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},pUe=function(){function e(){}return e.prototype.active=function(){return dUe},e.prototype.with=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return n.call.apply(n,hUe([r],fUe(i),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),mUe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},gUe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},$I="context",yUe=new pUe,fie=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return E6($I,t,Nk.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return(i=this._getContextManager()).with.apply(i,gUe([t,n,r],mUe(s),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return Ew($I)||yUe},e.prototype.disable=function(){this._getContextManager().disable(),T6($I,Nk.instance())},e}(),D4;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(D4||(D4={}));var hie="0000000000000000",pie="00000000000000000000000000000000",bUe={traceId:pie,spanId:hie,traceFlags:D4.NONE},dx=function(){function e(t){t===void 0&&(t=bUe),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),A6=cUe("OpenTelemetry Context Key SPAN");function R6(e){return e.getValue(A6)||void 0}function vUe(){return R6(fie.getInstance().active())}function N6(e,t){return e.setValue(A6,t)}function xUe(e){return e.deleteValue(A6)}function wUe(e,t){return N6(e,new dx(t))}function mie(e){var t;return(t=R6(e))===null||t===void 0?void 0:t.spanContext()}var _Ue=/^([0-9a-f]{32})$/i,SUe=/^[0-9a-f]{16}$/i;function CUe(e){return _Ue.test(e)&&e!==pie}function kUe(e){return SUe.test(e)&&e!==hie}function gie(e){return CUe(e.traceId)&&kUe(e.spanId)}function EUe(e){return new dx(e)}var zI=fie.getInstance(),yie=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=zI.active());var i=!!(n!=null&&n.root);if(i)return new dx;var s=r&&mie(r);return TUe(s)&&gie(s)?new dx(s):new dx},e.prototype.startActiveSpan=function(t,n,r,i){var s,a,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(s=n,o=r):(s=n,a=r,o=i);var l=a??zI.active(),c=this.startSpan(t,s,l),u=N6(l,c);return zI.with(u,o,void 0,c)}},e}();function TUe(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var AUe=new yie,RUe=function(){function e(t,n,r,i){this._provider=t,this.name=n,this.version=r,this.options=i}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):AUe},e}(),NUe=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new yie},e}(),MUe=new NUe,UU=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var i;return(i=this.getDelegateTracer(t,n,r))!==null&&i!==void 0?i:new RUe(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:MUe},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(t,n,r)},e}(),Mk;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Mk||(Mk={}));var UI="trace",IUe=function(){function e(){this._proxyTracerProvider=new UU,this.wrapSpanContext=EUe,this.isSpanContextValid=gie,this.deleteSpan=xUe,this.getSpan=R6,this.getActiveSpan=vUe,this.getSpanContext=mie,this.setSpan=N6,this.setSpanContext=wUe}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=E6(UI,this._proxyTracerProvider,Nk.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return Ew(UI)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){T6(UI,Nk.instance()),this._proxyTracerProvider=new UU},e}(),jUe=IUe.getInstance(),OUe=Object.defineProperty,M6=(e,t)=>{for(var n in t)OUe(e,n,{get:t[n],enumerable:!0})};function Ik(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function qU(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[i,s]of Object.entries(e))r[i]=s;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function VU({response:e,status:t,statusText:n,headers:r,stream:i}){e.writeHead(t??200,n,r);const s=i.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await s.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var bie="AI_InvalidArgumentError",vie=`vercel.ai.error.${bie}`,PUe=Symbol.for(vie),xie,oc=class extends cr{constructor({parameter:e,value:t,message:n}){super({name:bie,message:`Invalid argument for parameter ${e}: ${n}`}),this[xie]=!0,this.parameter=e,this.value=t}static isInstance(e){return cr.hasMarker(e,vie)}};xie=PUe;var wie="AI_RetryError",_ie=`vercel.ai.error.${wie}`,DUe=Symbol.for(_ie),Sie,WU=class extends cr{constructor({message:e,reason:t,errors:n}){super({name:wie,message:e}),this[Sie]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return cr.hasMarker(e,_ie)}};Sie=DUe;var FUe=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>Cie(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function Cie(e,{maxRetries:t,delayInMs:n,backoffFactor:r},i=[]){try{return await e()}catch(s){if(d2(s)||t===0)throw s;const a=qye(s),o=[...i,s],l=o.length;if(l>t)throw new WU({message:`Failed after ${l} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:o});if(s instanceof Error&&Fl.isInstance(s)&&s.isRetryable===!0&&l<=t)return await $ye(n),Cie(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?s:new WU({message:`Failed after ${l} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:o})}}function LUe({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new oc({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new oc({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:FUe({maxRetries:t})}}function F4({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function BUe({model:e,settings:t,telemetry:n,headers:r}){var i;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((s,[a,o])=>(s[`ai.settings.${a}`]=o,s),{}),...Object.entries((i=n==null?void 0:n.metadata)!=null?i:{}).reduce((s,[a,o])=>(s[`ai.telemetry.metadata.${a}`]=o,s),{}),...Object.entries(r??{}).reduce((s,[a,o])=>(o!==void 0&&(s[`ai.request.headers.${a}`]=o),s),{})}}var $Ue={startSpan(){return $S},startActiveSpan(e,t,n,r){if(typeof t=="function")return t($S);if(typeof n=="function")return n($S);if(typeof r=="function")return r($S)}},$S={spanContext(){return zUe},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},zUe={traceId:"",spanId:"",traceFlags:0};function UUe({isEnabled:e=!1,tracer:t}={}){return e?t||jUe.getTracer("ai"):$Ue}function L4({name:e,tracer:t,attributes:n,fn:r,endWhenDone:i=!0}){return t.startActiveSpan(e,{attributes:n},async s=>{try{const a=await r(s);return i&&s.end(),a}catch(a){try{a instanceof Error?(s.recordException({name:a.name,message:a.message,stack:a.stack}),s.setStatus({code:Mk.ERROR,message:a.message})):s.setStatus({code:Mk.ERROR})}finally{s.end()}throw a}})}function s0({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,i])=>{if(i===void 0)return n;if(typeof i=="object"&&"input"in i&&typeof i.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const s=i.input();return s===void 0?n:{...n,[r]:s}}if(typeof i=="object"&&"output"in i&&typeof i.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const s=i.output();return s===void 0?n:{...n,[r]:s}}return{...n,[r]:i}},{})}var qUe=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=ih(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=fE(this.base64Data)),this.uint8ArrayData}},VUe=class extends qUe{constructor(e){super(e),this.type="file"}},WUe=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],HUe=e=>{const t=typeof e=="string"?fE(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function GUe(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?HUe(e):e}function KUe({data:e,signatures:t}){const n=GUe(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((i,s)=>n[s]===i))return r.mimeType}var kie="AI_NoObjectGeneratedError",Eie=`vercel.ai.error.${kie}`,YUe=Symbol.for(Eie),Tie,HU=class extends cr{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:i,finishReason:s}){super({name:kie,message:e,cause:t}),this[Tie]=!0,this.text=n,this.response=r,this.usage=i,this.finishReason=s}static isInstance(e){return cr.hasMarker(e,Eie)}};Tie=YUe;var Aie="AI_DownloadError",Rie=`vercel.ai.error.${Aie}`,ZUe=Symbol.for(Rie),Nie,qI=class extends cr{constructor({url:e,statusCode:t,statusText:n,cause:r,message:i=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:Aie,message:i,cause:r}),this[Nie]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return cr.hasMarker(e,Rie)}};Nie=ZUe;async function XUe({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new qI({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mimeType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw qI.isInstance(r)?r:new qI({url:n,cause:r})}}var Mie="AI_InvalidDataContentError",Iie=`vercel.ai.error.${Mie}`,JUe=Symbol.for(Iie),jie,GU=class extends cr{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:Mie,message:n,cause:t}),this[jie]=!0,this.content=e}static isInstance(e){return cr.hasMarker(e,Iie)}};jie=JUe;var Oie=Ni([Ue(),cC(Uint8Array),cC(ArrayBuffer),mG(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function I6(e){return typeof e=="string"?e:e instanceof ArrayBuffer?ih(new Uint8Array(e)):ih(e)}function jk(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return fE(e)}catch(t){throw new GU({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new GU({content:e})}function QUe(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var Pie="AI_InvalidMessageRoleError",Die=`vercel.ai.error.${Pie}`,eqe=Symbol.for(Die),Fie,tqe=class extends cr{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Pie,message:t}),this[Fie]=!0,this.role=e}static isInstance(e){return cr.hasMarker(e,Die)}};Fie=eqe;function nqe(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function rqe({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=XUe}){const i=await sqe(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(s=>iqe(s,i))]}function iqe(e,t){var n,r,i,s,a,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>aqe(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var u;const d=(u=c.providerOptions)!=null?u:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:I6(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:d};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:d};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:d};case"text":return{type:"text",text:c.text,providerMetadata:d};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:d}}}),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var u;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(u=c.providerOptions)!=null?u:c.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const c=l;throw new tqe({role:c})}}}async function sqe(e,t,n,r){const i=e.filter(a=>a.role==="user").map(a=>a.content).filter(a=>Array.isArray(a)).flat().filter(a=>a.type==="image"||a.type==="file").filter(a=>!(a.type==="image"&&n===!0)).map(a=>a.type==="image"?a.image:a.data).map(a=>typeof a=="string"&&(a.startsWith("http:")||a.startsWith("https:"))?new URL(a):a).filter(a=>a instanceof URL).filter(a=>!r(a)),s=await Promise.all(i.map(async a=>({url:a,data:await t({url:a})})));return Object.fromEntries(s.map(({url:a,data:o})=>[a.toString(),o]))}function aqe(e,t){var n,r,i,s;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let a=e.mimeType,o,l,c;const u=e.type;switch(u){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${u}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:d,base64Content:h}=nqe(l.toString());if(d==null||h==null)throw new Error(`Invalid data URL format in part ${u}`);a=d,c=jk(h)}else{const d=t[l.toString()];d?(c=d.data,a??(a=d.mimeType)):c=l}else c=jk(l);switch(u){case"image":return c instanceof Uint8Array&&(a=(r=KUe({data:c,signatures:WUe}))!=null?r:a),{type:"image",image:c,mimeType:a,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata};case"file":{if(a==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?I6(c):c,filename:e.filename,mimeType:a,providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata}}}}function oqe({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:i,frequencyPenalty:s,stopSequences:a,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new oc({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new oc({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new oc({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new oc({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new oc({parameter:"topK",value:r,message:"topK must be a number"});if(i!=null&&typeof i!="number")throw new oc({parameter:"presencePenalty",value:i,message:"presencePenalty must be a number"});if(s!=null&&typeof s!="number")throw new oc({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new oc({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:i,frequencyPenalty:s,stopSequences:a!=null&&a.length>0?a:void 0,seed:o}}function KU(e){var t,n,r;const i=[];for(const s of e){let a;try{a=new URL(s.url)}catch{throw new Error(`Invalid URL: ${s.url}`)}switch(a.protocol){case"http:":case"https:":{if((t=s.contentType)!=null&&t.startsWith("image/"))i.push({type:"image",image:a});else{if(!s.contentType)throw new Error("If the attachment is not an image, it must specify a content type");i.push({type:"file",data:a,mimeType:s.contentType})}break}case"data:":{let o,l,c;try{[o,l]=s.url.split(","),c=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${s.url}`)}if(c==null||l==null)throw new Error(`Invalid data URL format: ${s.url}`);if((n=s.contentType)!=null&&n.startsWith("image/"))i.push({type:"image",image:jk(l)});else if((r=s.contentType)!=null&&r.startsWith("text/"))i.push({type:"text",text:QUe(jk(l))});else{if(!s.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");i.push({type:"file",data:l,mimeType:s.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${a.protocol}`)}}return i}var Lie="AI_MessageConversionError",Bie=`vercel.ai.error.${Lie}`,lqe=Symbol.for(Bie),$ie,VI=class extends cr{constructor({originalMessage:e,message:t}){super({name:Lie,message:t}),this[$ie]=!0,this.originalMessage=e}static isInstance(e){return cr.hasMarker(e,Bie)}};$ie=lqe;function cqe(e,t){var n,r;const i=(n=t==null?void 0:t.tools)!=null?n:{},s=[];for(let a=0;a<e.length;a++){const o=e[a],l=a===e.length-1,{role:c,content:u,experimental_attachments:d}=o;switch(c){case"system":{s.push({role:"system",content:u});break}case"user":{if(o.parts==null)s.push({role:"user",content:d?[{type:"text",text:u},...KU(d)]:u});else{const h=o.parts.filter(m=>m.type==="text").map(m=>({type:"text",text:m.text}));s.push({role:"user",content:d?[...h,...KU(d)]:h})}break}case"assistant":{if(o.parts!=null){let y=function(){const w=[];for(const C of x)switch(C.type){case"file":case"text":{w.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":w.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":w.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":w.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}s.push({role:"assistant",content:w});const S=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);S.length>0&&s.push({role:"tool",content:S.map(C=>{if(!("result"in C))throw new VI({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:A,result:R}=C,N=i[A];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:A,result:N.experimental_toToolResultContent(R),experimental_content:N.experimental_toToolResultContent(R)}:{type:"tool-result",toolCallId:k,toolName:A,result:R}})}),x=[],v=!1,b++},b=0,v=!1,x=[];for(const w of o.parts)switch(w.type){case"text":{v&&y(),x.push(w);break}case"file":case"reasoning":{x.push(w);break}case"tool-invocation":{((r=w.toolInvocation.step)!=null?r:0)!==b&&y(),x.push(w),v=!0;break}}y();break}const h=o.toolInvocations;if(h==null||h.length===0){s.push({role:"assistant",content:u});break}const m=h.reduce((y,b)=>{var v;return Math.max(y,(v=b.step)!=null?v:0)},0);for(let y=0;y<=m;y++){const b=h.filter(v=>{var x;return((x=v.step)!=null?x:0)===y});b.length!==0&&(s.push({role:"assistant",content:[...l&&u&&y===0?[{type:"text",text:u}]:[],...b.map(({toolCallId:v,toolName:x,args:w})=>({type:"tool-call",toolCallId:v,toolName:x,args:w}))]}),s.push({role:"tool",content:b.map(v=>{if(!("result"in v))throw new VI({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(v)});const{toolCallId:x,toolName:w,result:S}=v,C=i[w];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:w,result:C.experimental_toToolResultContent(S),experimental_content:C.experimental_toToolResultContent(S)}:{type:"tool-result",toolCallId:x,toolName:w,result:S}})}))}u&&!l&&s.push({role:"assistant",content:u});break}case"data":break;default:{const h=c;throw new VI({originalMessage:o,message:`Unsupported role: ${h}`})}}}return s}var B4=Abe(()=>Ni([Tbe(),Ue(),Nt(),Cr(),ah(Ue(),B4),cn(B4)])),rs=ah(Ue(),ah(Ue(),B4)),uqe=cn(Ni([Je({type:Dn("text"),text:Ue()}),Je({type:Dn("image"),data:Ue(),mimeType:Ue().optional()})])),zie=Je({type:Dn("text"),text:Ue(),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),dqe=Je({type:Dn("image"),image:Ni([Oie,cC(URL)]),mimeType:Ue().optional(),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),Uie=Je({type:Dn("file"),data:Ni([Oie,cC(URL)]),filename:Ue().optional(),mimeType:Ue(),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),fqe=Je({type:Dn("reasoning"),text:Ue(),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),hqe=Je({type:Dn("redacted-reasoning"),data:Ue(),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),pqe=Je({type:Dn("tool-call"),toolCallId:Ue(),toolName:Ue(),args:Yw(),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),mqe=Je({type:Dn("tool-result"),toolCallId:Ue(),toolName:Ue(),result:Yw(),content:uqe.optional(),isError:Cr().optional(),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),gqe=Je({role:Dn("system"),content:Ue(),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),yqe=Je({role:Dn("user"),content:Ni([Ue(),cn(Ni([zie,dqe,Uie]))]),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),bqe=Je({role:Dn("assistant"),content:Ni([Ue(),cn(Ni([zie,Uie,fqe,hqe,pqe]))]),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),vqe=Je({role:Dn("tool"),content:cn(mqe),providerOptions:rs.optional(),experimental_providerMetadata:rs.optional()}),xqe=Ni([gqe,yqe,bqe,vqe]);function wqe({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new nu({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new nu({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new nu({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new nu({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const r=_qe(e.messages)==="ui-messages"?cqe(e.messages,{tools:t}):e.messages;if(r.length===0)throw new nu({prompt:e,message:"messages must not be empty"});const i=Sy({value:r,schema:cn(xqe)});if(!i.success)throw new nu({prompt:e,message:["message must be a CoreMessage or a UI message",`Validation error: ${i.error.message}`].join(`
`),cause:i.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function _qe(e){if(!Array.isArray(e))throw new nu({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received non-array value: ${JSON.stringify(e)}`].join(`
`),cause:e});if(e.length===0)return"messages";const t=e.map(Sqe);if(t.some(r=>r==="has-ui-specific-parts"))return"ui-messages";const n=t.findIndex(r=>r!=="has-core-specific-parts"&&r!=="message");if(n===-1)return"messages";throw new nu({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received message of type: "${t[n]}" at index ${n}`,`messages[${n}]: ${JSON.stringify(e[n])}`].join(`
`),cause:e})}function Sqe(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}function Cqe({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function kqe(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Eqe="JSON schema:",Tqe="You MUST answer with a JSON object that matches the JSON schema above.",Aqe="You MUST answer with JSON.";function Rqe({prompt:e,schema:t,schemaPrefix:n=t!=null?Eqe:void 0,schemaSuffix:r=t!=null?Tqe:Aqe}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(i=>i!=null).join(`
`)}function WI(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:i}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:i}}}},t}function Nqe(e){const t=e.map(n=>({...n,content:typeof n.content=="string"?n.content:n.content.map(Mqe)}));return JSON.stringify(t)}function Mqe(e){return e.type==="image"?{...e,image:e.image instanceof Uint8Array?I6(e.image):e.image}:e}gm({prefix:"aiobj",size:24});var ho=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function YU(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function Iqe(){let e=[],t=null,n=!1,r=YU();const i=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=YU(),await r.promise,i();try{const{value:s,done:a}=await e[0].read();a?(e.shift(),e.length>0?await i():n&&(t==null||t.close())):t==null||t.enqueue(s)}catch(s){t==null||t.error(s),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(s){t=s},pull:i,async cancel(){for(const s of e)await s.cancel();e=[],n=!0}}),addStream:s=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(s.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(s=>s.cancel()),e=[],t==null||t.close()}}}function jqe(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}gm({prefix:"aiobj",size:24});var qie="AI_NoOutputSpecifiedError",Vie=`vercel.ai.error.${qie}`,Oqe=Symbol.for(Vie),Wie,Pqe=class extends cr{constructor({message:e="No output specified."}={}){super({name:qie,message:e}),this[Wie]=!0}static isInstance(e){return cr.hasMarker(e,Vie)}};Wie=Oqe;var Hie="AI_ToolExecutionError",Gie=`vercel.ai.error.${Hie}`,Dqe=Symbol.for(Gie),Kie,Fqe=class extends cr{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:i=`Error executing tool ${t}: ${Kw(r)}`}){super({name:Hie,message:i,cause:r}),this[Kie]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return cr.hasMarker(e,Gie)}};Kie=Dqe;function Lqe(e){return e!=null&&Object.keys(e).length>0}function Bqe({tools:e,toolChoice:t,activeTools:n}){return Lqe(e)?{tools:(n!=null?Object.entries(e).filter(([i])=>n.includes(i)):Object.entries(e)).map(([i,s])=>{const a=s.type;switch(a){case void 0:case"function":return{type:"function",name:i,description:s.description,parameters:IT(s.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:i,id:s.id,args:s.args};default:{const o=a;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var $qe=/^([\s\S]*?)(\s+)(\S*)$/;function zqe(e){const t=e.match($qe);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var Yie="AI_InvalidToolArgumentsError",Zie=`vercel.ai.error.${Yie}`,Uqe=Symbol.for(Zie),Xie,Jie=class extends cr{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${Kw(n)}`}){super({name:Yie,message:r,cause:n}),this[Xie]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return cr.hasMarker(e,Zie)}};Xie=Uqe;var Qie="AI_NoSuchToolError",ese=`vercel.ai.error.${Qie}`,qqe=Symbol.for(ese),tse,$4=class extends cr{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:Qie,message:n}),this[tse]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return cr.hasMarker(e,ese)}};tse=qqe;var nse="AI_ToolCallRepairError",rse=`vercel.ai.error.${nse}`,Vqe=Symbol.for(rse),ise,Wqe=class extends cr{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${Kw(e)}`}){super({name:nse,message:n,cause:e}),this[ise]=!0,this.originalError=t}static isInstance(e){return cr.hasMarker(e,rse)}};ise=Vqe;async function Hqe({toolCall:e,tools:t,repairToolCall:n,system:r,messages:i}){if(t==null)throw new $4({toolName:e.toolName});try{return await ZU({toolCall:e,tools:t})}catch(s){if(n==null||!($4.isInstance(s)||Jie.isInstance(s)))throw s;let a=null;try{a=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>IT(t[o].parameters).jsonSchema,system:r,messages:i,error:s})}catch(o){throw new Wqe({cause:o,originalError:s})}if(a==null)throw s;return await ZU({toolCall:a,tools:t})}}async function ZU({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new $4({toolName:e.toolName,availableTools:Object.keys(t)});const i=IT(r.parameters),s=e.args.trim()===""?Sy({value:{},schema:i}):Xp({text:e.args,schema:i});if(s.success===!1)throw new Jie({toolName:n,toolArgs:e.args,cause:s.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:s.value}}function Gqe(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function XU({text:e="",files:t,reasoning:n,tools:r,toolCalls:i,toolResults:s,messageId:a,generateMessageId:o}){const l=[],c=[];return n.length>0&&c.push(...n.map(u=>u.type==="text"?{...u,type:"reasoning"}:{...u,type:"redacted-reasoning"})),t.length>0&&c.push(...t.map(u=>({type:"file",data:u.base64,mimeType:u.mimeType}))),e.length>0&&c.push({type:"text",text:e}),i.length>0&&c.push(...i),c.length>0&&l.push({role:"assistant",content:c,id:a}),s.length>0&&l.push({role:"tool",id:o(),content:s.map(u=>{const d=r[u.toolName];return(d==null?void 0:d.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:d.experimental_toToolResultContent(u.result),experimental_content:d.experimental_toToolResultContent(u.result)}:{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result}})}),l}gm({prefix:"aitxt",size:24});gm({prefix:"msg",size:24});var Kqe={};M6(Kqe,{object:()=>Jqe,text:()=>Xqe});var sse="AI_InvalidStreamPartError",ase=`vercel.ai.error.${sse}`,Yqe=Symbol.for(ase),ose,Zqe=class extends cr{constructor({chunk:e,message:t}){super({name:sse,message:t}),this[ose]=!0,this.chunk=e}static isInstance(e){return cr.hasMarker(e,ase)}};ose=Yqe;var Xqe=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),Jqe=({schema:e})=>{const t=IT(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Rqe({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=I7e(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const i=r.state;throw new Error(`Unsupported parse state: ${i}`)}}},parseOutput({text:n},r){const i=Xp({text:n});if(!i.success)throw new HU({message:"No object generated: could not parse the response.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const s=Sy({value:i.value,schema:t});if(!s.success)throw new HU({message:"No object generated: response did not match schema.",cause:s.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return s.value}}};function Qqe(e){return e===void 0?[]:Array.isArray(e)?e:[e]}async function eVe({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:r}=await n.read();if(r)break}}catch(r){t==null||t(r)}finally{n.releaseLock()}}function j6(e,t){const n=e.getReader(),r=t.getReader();let i,s,a=!1,o=!1;async function l(u){try{i==null&&(i=n.read());const d=await i;i=void 0,d.done?u.close():u.enqueue(d.value)}catch(d){u.error(d)}}async function c(u){try{s==null&&(s=r.read());const d=await s;s=void 0,d.done?u.close():u.enqueue(d.value)}catch(d){u.error(d)}}return new ReadableStream({async pull(u){try{if(a){await c(u);return}if(o){await l(u);return}i==null&&(i=n.read()),s==null&&(s=r.read());const{result:d,reader:h}=await Promise.race([i.then(m=>({result:m,reader:n})),s.then(m=>({result:m,reader:r}))]);d.done||u.enqueue(d.value),h===n?(i=void 0,d.done&&(await c(u),a=!0)):(s=void 0,d.done&&(o=!0,await l(u)))}catch(d){u.error(d)}},cancel(){n.cancel(),r.cancel()}})}function tVe({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:i,system:s,messages:a,abortSignal:o,repairToolCall:l}){let c=null;const u=new ReadableStream({start(x){c=x}}),d={},h=new Set;let m=!1,y;function b(){m&&h.size===0&&(y!=null&&c.enqueue(y),c.close())}const v=new TransformStream({async transform(x,w){const S=x.type;switch(S){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{w.enqueue(x);break}case"file":{w.enqueue(new VUe({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(d[x.toolCallId]||(w.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),d[x.toolCallId]=!0),w.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await Hqe({toolCall:x,tools:e,repairToolCall:l,system:s,messages:a});w.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const A=go();h.add(A),L4({name:"ai.toolCall",attributes:s0({telemetry:i,attributes:{...F4({operationId:"ai.toolCall",telemetry:i}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async R=>k.execute(C.args,{toolCallId:C.toolCallId,messages:a,abortSignal:o}).then(N=>{c.enqueue({...C,type:"tool-result",result:N}),h.delete(A),b();try{R.setAttributes(s0({telemetry:i,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(N)}}}))}catch{}},N=>{c.enqueue({type:"error",error:new Fqe({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:N})}),h.delete(A),b()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{y={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:Cqe(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=S;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){m=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(v).pipeTo(new WritableStream({write(w){x.enqueue(w)},close(){}})),u.pipeTo(new WritableStream({write(w){x.enqueue(w)},close(){x.close()}}))])}})}var nVe=gm({prefix:"aitxt",size:24}),rVe=gm({prefix:"msg",size:24});function iVe({model:e,tools:t,toolChoice:n,system:r,prompt:i,messages:s,maxRetries:a,abortSignal:o,headers:l,maxSteps:c=1,experimental_generateMessageId:u=rVe,experimental_output:d,experimental_continueSteps:h=!1,experimental_telemetry:m,experimental_providerMetadata:y,providerOptions:b=y,experimental_toolCallStreaming:v=!1,toolCallStreaming:x=v,experimental_activeTools:w,experimental_repairToolCall:S,experimental_transform:C,onChunk:k,onError:A,onFinish:R,onStepFinish:N,_internal:{now:I=jqe,generateId:O=nVe,currentDate:L=()=>new Date}={},...P}){return new aVe({model:e,telemetry:m,headers:l,settings:P,maxRetries:a,abortSignal:o,system:r,prompt:i,messages:s,tools:t,toolChoice:n,toolCallStreaming:x,transforms:Qqe(C),activeTools:w,repairToolCall:S,maxSteps:c,output:d,continueSteps:h,providerOptions:b,onChunk:k,onError:A,onFinish:R,onStepFinish:N,now:I,currentDate:L,generateId:O,generateMessageId:u})}function sVe(e){if(!e)return new TransformStream({transform(s,a){a.enqueue({part:s,partialOutput:void 0})}});let t="",n="",r="";function i({controller:s,partialOutput:a=void 0}){s.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:a}),n=""}return new TransformStream({transform(s,a){if(s.type==="step-finish"&&i({controller:a}),s.type!=="text-delta"){a.enqueue({part:s,partialOutput:void 0});return}t+=s.textDelta,n+=s.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(i({controller:a,partialOutput:o.partial}),r=l)}},flush(s){n.length>0&&i({controller:s})}})}var aVe=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:i,abortSignal:s,system:a,prompt:o,messages:l,tools:c,toolChoice:u,toolCallStreaming:d,transforms:h,activeTools:m,repairToolCall:y,maxSteps:b,output:v,continueSteps:x,providerOptions:w,now:S,currentDate:C,generateId:k,generateMessageId:A,onChunk:R,onError:N,onFinish:I,onStepFinish:O}){this.warningsPromise=new ho,this.usagePromise=new ho,this.finishReasonPromise=new ho,this.providerMetadataPromise=new ho,this.textPromise=new ho,this.reasoningPromise=new ho,this.reasoningDetailsPromise=new ho,this.sourcesPromise=new ho,this.filesPromise=new ho,this.toolCallsPromise=new ho,this.toolResultsPromise=new ho,this.requestPromise=new ho,this.responsePromise=new ho,this.stepsPromise=new ho;var L;if(b<1)throw new oc({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=v;let P="",V="",F="",J=[],U=[],G,$=[];const ne=[],W={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let te=[],ee=[],re,de,oe="initial";const Ie=[];let je;const Me=new TransformStream({async transform(ce,le){le.enqueue(ce);const{part:ie}=ce;if((ie.type==="text-delta"||ie.type==="reasoning"||ie.type==="source"||ie.type==="tool-call"||ie.type==="tool-result"||ie.type==="tool-call-streaming-start"||ie.type==="tool-call-delta")&&await(R==null?void 0:R({chunk:ie})),ie.type==="error"&&await(N==null?void 0:N({error:ie.error})),ie.type==="text-delta"&&(P+=ie.textDelta,V+=ie.textDelta,F+=ie.textDelta),ie.type==="reasoning"&&(G==null?(G={type:"text",text:ie.textDelta},J.push(G)):G.text+=ie.textDelta),ie.type==="reasoning-signature"){if(G==null)throw new cr({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});G.signature=ie.signature,G=void 0}if(ie.type==="redacted-reasoning"&&J.push({type:"redacted",data:ie.data}),ie.type==="file"&&U.push(ie),ie.type==="source"&&(ne.push(ie.source),$.push(ie.source)),ie.type==="tool-call"&&te.push(ie),ie.type==="tool-result"&&ee.push(ie),ie.type==="step-finish"){const Ee=XU({text:V,files:U,reasoning:J,tools:c??{},toolCalls:te,toolResults:ee,messageId:ie.messageId,generateMessageId:A}),Be=Ie.length;let Ce="done";Be+1<b&&(x&&ie.finishReason==="length"&&te.length===0?Ce="continue":te.length>0&&ee.length===te.length&&(Ce="tool-result"));const ct={stepType:oe,text:P,reasoning:Gqe(J),reasoningDetails:J,files:U,sources:$,toolCalls:te,toolResults:ee,finishReason:ie.finishReason,usage:ie.usage,warnings:ie.warnings,logprobs:ie.logprobs,request:ie.request,response:{...ie.response,messages:[...W.messages,...Ee]},providerMetadata:ie.experimental_providerMetadata,experimental_providerMetadata:ie.experimental_providerMetadata,isContinued:ie.isContinued};await(O==null?void 0:O(ct)),Ie.push(ct),te=[],ee=[],P="",$=[],J=[],U=[],G=void 0,Ce!=="done"&&(oe=Ce),Ce!=="continue"&&(W.messages.push(...Ee),V="")}ie.type==="finish"&&(W.id=ie.response.id,W.timestamp=ie.response.timestamp,W.modelId=ie.response.modelId,W.headers=ie.response.headers,de=ie.usage,re=ie.finishReason)},async flush(ce){var le;try{if(Ie.length===0)return;const ie=Ie[Ie.length-1];Te.warningsPromise.resolve(ie.warnings),Te.requestPromise.resolve(ie.request),Te.responsePromise.resolve(ie.response),Te.toolCallsPromise.resolve(ie.toolCalls),Te.toolResultsPromise.resolve(ie.toolResults),Te.providerMetadataPromise.resolve(ie.experimental_providerMetadata),Te.reasoningPromise.resolve(ie.reasoning),Te.reasoningDetailsPromise.resolve(ie.reasoningDetails);const Ee=re??"unknown",Be=de??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Te.finishReasonPromise.resolve(Ee),Te.usagePromise.resolve(Be),Te.textPromise.resolve(F),Te.sourcesPromise.resolve(ne),Te.filesPromise.resolve(ie.files),Te.stepsPromise.resolve(Ie),await(I==null?void 0:I({finishReason:Ee,logprobs:void 0,usage:Be,text:F,reasoning:ie.reasoning,reasoningDetails:ie.reasoningDetails,files:ie.files,sources:ie.sources,toolCalls:ie.toolCalls,toolResults:ie.toolResults,request:(le=ie.request)!=null?le:{},response:ie.response,warnings:ie.warnings,providerMetadata:ie.providerMetadata,experimental_providerMetadata:ie.experimental_providerMetadata,steps:Ie})),je.setAttributes(s0({telemetry:t,attributes:{"ai.response.finishReason":Ee,"ai.response.text":{output:()=>F},"ai.response.toolCalls":{output:()=>{var Ce;return(Ce=ie.toolCalls)!=null&&Ce.length?JSON.stringify(ie.toolCalls):void 0}},"ai.usage.promptTokens":Be.promptTokens,"ai.usage.completionTokens":Be.completionTokens}}))}catch(ie){ce.error(ie)}finally{je.end()}}}),Se=Iqe();this.addStream=Se.addStream,this.closeStream=Se.close;let qe=Se.stream;for(const ce of h)qe=qe.pipeThrough(ce({tools:c,stopStream(){Se.terminate()}}));this.baseStream=qe.pipeThrough(sVe(v)).pipeThrough(Me);const{maxRetries:Qe,retry:We}=LUe({maxRetries:i}),Re=UUe(t),K=BUe({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:Qe}}),ge=wqe({prompt:{system:(L=v==null?void 0:v.injectIntoSystemPrompt({system:a,model:e}))!=null?L:a,prompt:o,messages:l},tools:c}),Te=this;L4({name:"ai.streamText",attributes:s0({telemetry:t,attributes:{...F4({operationId:"ai.streamText",telemetry:t}),...K,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:o,messages:l})},"ai.settings.maxSteps":b}}),tracer:Re,endWhenDone:!1,fn:async ce=>{je=ce;async function le({currentStep:ie,responseMessages:Ee,usage:Be,stepType:Ce,previousStepText:ct,hasLeadingWhitespace:Tt,messageId:ft}){var Pt;const Ut=Ee.length===0?ge.type:"messages",Bt=[...ge.messages,...Ee],tn=await rqe({prompt:{type:Ut,system:ge.system,messages:Bt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Pt=e.supportsUrl)==null?void 0:Pt.bind(e)}),xe={type:"regular",...Bqe({tools:c,toolChoice:u,activeTools:m})},{result:{stream:D,warnings:Z,rawResponse:me,request:De},doStreamSpan:we,startTimestampMs:Ne}=await We(()=>L4({name:"ai.streamText.doStream",attributes:s0({telemetry:t,attributes:{...F4({operationId:"ai.streamText.doStream",telemetry:t}),...K,"ai.prompt.format":{input:()=>Ut},"ai.prompt.messages":{input:()=>Nqe(tn)},"ai.prompt.tools":{input:()=>{var Xt;return(Xt=xe.tools)==null?void 0:Xt.map(nn=>JSON.stringify(nn))}},"ai.prompt.toolChoice":{input:()=>xe.toolChoice!=null?JSON.stringify(xe.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Re,endWhenDone:!1,fn:async Xt=>({startTimestampMs:S(),doStreamSpan:Xt,result:await e.doStream({mode:xe,...oqe(r),inputFormat:Ut,responseFormat:v==null?void 0:v.responseFormat({model:e}),prompt:tn,providerMetadata:w,abortSignal:s,headers:n})})})),fe=tVe({tools:c,generatorStream:D,toolCallStreaming:d,tracer:Re,telemetry:t,system:a,messages:Bt,repairToolCall:y,abortSignal:s}),bt=De??{},ot=[],B=[],$e=[],it=[];let ye,_e="unknown",ze={promptTokens:0,completionTokens:0,totalTokens:0},kt,he=!0,Y="",H=Ce==="continue"?ct:"",X,be={id:k(),timestamp:C(),modelId:e.modelId},Oe="",Ge=!1,wt=!0,en=!1;async function $n({controller:Xt,chunk:nn}){Xt.enqueue(nn),Y+=nn.textDelta,H+=nn.textDelta,Ge=!0,en=nn.textDelta.trimEnd()!==nn.textDelta}Te.addStream(fe.pipeThrough(new TransformStream({async transform(Xt,nn){var un,pr,Er;if(he){const ni=S()-Ne;he=!1,we.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":ni}),we.setAttributes({"ai.response.msToFirstChunk":ni}),nn.enqueue({type:"step-start",messageId:ft,request:bt,warnings:Z??[]})}if(Xt.type==="text-delta"&&Xt.textDelta.length===0)return;const ti=Xt.type;switch(ti){case"text-delta":{if(x){const ni=wt&&Tt?Xt.textDelta.trimStart():Xt.textDelta;if(ni.length===0)break;wt=!1,Oe+=ni;const vr=zqe(Oe);vr!=null&&(Oe=vr.suffix,await $n({controller:nn,chunk:{type:"text-delta",textDelta:vr.prefix+vr.whitespace}}))}else await $n({controller:nn,chunk:Xt});break}case"reasoning":{nn.enqueue(Xt),ye==null?(ye={type:"text",text:Xt.textDelta},$e.push(ye)):ye.text+=Xt.textDelta;break}case"reasoning-signature":{if(nn.enqueue(Xt),ye==null)throw new Zqe({chunk:Xt,message:"reasoning-signature without reasoning"});ye.signature=Xt.signature,ye=void 0;break}case"redacted-reasoning":{nn.enqueue(Xt),$e.push({type:"redacted",data:Xt.data});break}case"tool-call":{nn.enqueue(Xt),ot.push(Xt);break}case"tool-result":{nn.enqueue(Xt),B.push(Xt);break}case"response-metadata":{be={id:(un=Xt.id)!=null?un:be.id,timestamp:(pr=Xt.timestamp)!=null?pr:be.timestamp,modelId:(Er=Xt.modelId)!=null?Er:be.modelId};break}case"finish":{ze=Xt.usage,_e=Xt.finishReason,kt=Xt.experimental_providerMetadata,X=Xt.logprobs;const ni=S()-Ne;we.addEvent("ai.stream.finish"),we.setAttributes({"ai.response.msToFinish":ni,"ai.response.avgCompletionTokensPerSecond":1e3*ze.completionTokens/ni});break}case"file":{it.push(Xt),nn.enqueue(Xt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{nn.enqueue(Xt);break}case"error":{nn.enqueue(Xt),_e="error";break}default:{const ni=ti;throw new Error(`Unknown chunk type: ${ni}`)}}},async flush(Xt){const nn=ot.length>0?JSON.stringify(ot):void 0;let un="done";ie+1<b&&(x&&_e==="length"&&ot.length===0?un="continue":ot.length>0&&B.length===ot.length&&(un="tool-result")),x&&Oe.length>0&&(un!=="continue"||Ce==="continue"&&!Ge)&&(await $n({controller:Xt,chunk:{type:"text-delta",textDelta:Oe}}),Oe="");try{we.setAttributes(s0({telemetry:t,attributes:{"ai.response.finishReason":_e,"ai.response.text":{output:()=>Y},"ai.response.toolCalls":{output:()=>nn},"ai.response.id":be.id,"ai.response.model":be.modelId,"ai.response.timestamp":be.timestamp.toISOString(),"ai.usage.promptTokens":ze.promptTokens,"ai.usage.completionTokens":ze.completionTokens,"gen_ai.response.finish_reasons":[_e],"gen_ai.response.id":be.id,"gen_ai.response.model":be.modelId,"gen_ai.usage.input_tokens":ze.promptTokens,"gen_ai.usage.output_tokens":ze.completionTokens}}))}catch{}finally{we.end()}Xt.enqueue({type:"step-finish",finishReason:_e,usage:ze,providerMetadata:kt,experimental_providerMetadata:kt,logprobs:X,request:bt,response:{...be,headers:me==null?void 0:me.headers},warnings:Z,isContinued:un==="continue",messageId:ft});const pr=kqe(Be,ze);if(un==="done")Xt.enqueue({type:"finish",finishReason:_e,usage:pr,providerMetadata:kt,experimental_providerMetadata:kt,logprobs:X,response:{...be,headers:me==null?void 0:me.headers}}),Te.closeStream();else{if(Ce==="continue"){const Er=Ee[Ee.length-1];typeof Er.content=="string"?Er.content+=Y:Er.content.push({text:Y,type:"text"})}else Ee.push(...XU({text:Y,files:it,reasoning:$e,tools:c??{},toolCalls:ot,toolResults:B,messageId:ft,generateMessageId:A}));await le({currentStep:ie+1,responseMessages:Ee,usage:pr,stepType:un,previousStepText:H,hasLeadingWhitespace:en,messageId:un==="continue"?ft:A()})}}})))}await le({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:A()})}}).catch(ce=>{Te.addStream(new ReadableStream({start(le){le.enqueue({type:"error",error:ce}),le.close()}})),Te.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return WI(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return WI(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await eVe({stream:this.fullStream,onError:e==null?void 0:e.onError})}catch(n){(t=e==null?void 0:e.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new Pqe;return WI(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:i=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(s,a)=>{const o=s.type;switch(o){case"text-delta":{a.enqueue(Ea("text",s.textDelta));break}case"reasoning":{n&&a.enqueue(Ea("reasoning",s.textDelta));break}case"redacted-reasoning":{n&&a.enqueue(Ea("redacted_reasoning",{data:s.data}));break}case"reasoning-signature":{n&&a.enqueue(Ea("reasoning_signature",{signature:s.signature}));break}case"file":{a.enqueue(Ea("file",{mimeType:s.mimeType,data:s.base64}));break}case"source":{r&&a.enqueue(Ea("source",s.source));break}case"tool-call-streaming-start":{a.enqueue(Ea("tool_call_streaming_start",{toolCallId:s.toolCallId,toolName:s.toolName}));break}case"tool-call-delta":{a.enqueue(Ea("tool_call_delta",{toolCallId:s.toolCallId,argsTextDelta:s.argsTextDelta}));break}case"tool-call":{a.enqueue(Ea("tool_call",{toolCallId:s.toolCallId,toolName:s.toolName,args:s.args}));break}case"tool-result":{a.enqueue(Ea("tool_result",{toolCallId:s.toolCallId,result:s.result}));break}case"error":{a.enqueue(Ea("error",e(s.error)));break}case"step-start":{a.enqueue(Ea("start_step",{messageId:s.messageId}));break}case"step-finish":{a.enqueue(Ea("finish_step",{finishReason:s.finishReason,usage:t?{promptTokens:s.usage.promptTokens,completionTokens:s.usage.completionTokens}:void 0,isContinued:s.isContinued}));break}case"finish":{i&&a.enqueue(Ea("finish_message",{finishReason:s.finishReason,usage:t?{promptTokens:s.usage.promptTokens,completionTokens:s.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:i,getErrorMessage:s,sendUsage:a,sendReasoning:o,sendSources:l,experimental_sendFinish:c}={}){VU({response:e,status:t,statusText:n,headers:qU(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:i,getErrorMessage:s,sendUsage:a,sendReasoning:o,sendSources:l,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){VU({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:qU(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?j6(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:i,sendUsage:s,sendReasoning:a,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:i,sendUsage:s,sendReasoning:a,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:Ik(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:Ik(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},oVe=Je({name:Ue(),version:Ue()}).passthrough(),O6=Je({_meta:Qs(Je({}).passthrough())}).passthrough(),Tw=O6,lVe=Je({method:Ue(),params:Qs(O6)}),cVe=Je({experimental:Qs(Je({}).passthrough()),logging:Qs(Je({}).passthrough()),prompts:Qs(Je({listChanged:Qs(Cr())}).passthrough()),resources:Qs(Je({subscribe:Qs(Cr()),listChanged:Qs(Cr())}).passthrough()),tools:Qs(Je({listChanged:Qs(Cr())}).passthrough())}).passthrough();Tw.extend({protocolVersion:Ue(),capabilities:cVe,serverInfo:oVe,instructions:Qs(Ue())});var uVe=Tw.extend({nextCursor:Qs(Ue())}),dVe=Je({name:Ue(),description:Qs(Ue()),inputSchema:Je({type:Dn("object"),properties:Qs(Je({}).passthrough())}).passthrough()}).passthrough();uVe.extend({tools:cn(dVe)});var fVe=Je({type:Dn("text"),text:Ue()}).passthrough(),hVe=Je({type:Dn("image"),data:Ue().base64(),mimeType:Ue()}).passthrough(),lse=Je({uri:Ue(),mimeType:Qs(Ue())}).passthrough(),pVe=lse.extend({text:Ue()}),mVe=lse.extend({blob:Ue().base64()}),gVe=Je({type:Dn("resource"),resource:Ni([pVe,mVe])}).passthrough();Tw.extend({content:cn(Ni([fVe,hVe,gVe])),isError:Cr().default(!1).optional()}).or(Tw.extend({toolResult:Yw()}));var jT="2.0",yVe=Je({jsonrpc:Dn(jT),id:Ni([Ue(),Nt().int()])}).merge(lVe).strict(),bVe=Je({jsonrpc:Dn(jT),id:Ni([Ue(),Nt().int()]),result:Tw}).strict(),vVe=Je({jsonrpc:Dn(jT),id:Ni([Ue(),Nt().int()]),error:Je({code:Nt().int(),message:Ue(),data:Qs(Yw())})}).strict(),xVe=Je({jsonrpc:Dn(jT)}).merge(Je({method:Ue(),params:Qs(O6)})).strict();Ni([yVe,xVe,bVe,vVe]);var wVe={};M6(wVe,{mergeIntoDataStream:()=>CVe,toDataStream:()=>_Ve,toDataStreamResponse:()=>SVe});function cse(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,i){i.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function P6(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var i;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&JU((i=n.data)==null?void 0:i.chunk,r);return}JU(n,r)}})).pipeThrough(cse(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Ea("text",n))}}))}function _Ve(e,t){return P6(e,t).pipeThrough(new TextEncoderStream)}function SVe(e,t){var n;const r=P6(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),i=t==null?void 0:t.data,s=t==null?void 0:t.init,a=i?j6(i.stream,r):r;return new Response(a,{status:(n=s==null?void 0:s.status)!=null?n:200,statusText:s==null?void 0:s.statusText,headers:Ik(s==null?void 0:s.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function CVe(e,t){t.dataStream.merge(P6(e,t.callbacks))}function JU(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var kVe={};M6(kVe,{mergeIntoDataStream:()=>AVe,toDataStream:()=>EVe,toDataStreamResponse:()=>TVe});function D6(e,t){const n=RVe();return Bye(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,i){i.enqueue(n(r.delta))}})).pipeThrough(cse(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,i)=>{i.enqueue(Ea("text",r))}}))}function EVe(e,t){return D6(e,t).pipeThrough(new TextEncoderStream)}function TVe(e,t={}){var n;const{init:r,data:i,callbacks:s}=t,a=D6(e,s).pipeThrough(new TextEncoderStream),o=i?j6(i.stream,a):a;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:Ik(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function AVe(e,t){t.dataStream.merge(D6(e,t.callbacks))}function RVe(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class NVe{static async executeInteraction(t,n,r){let i,s=!1,a=null,o,l,c;try{i=await iVe(n);for await(const u of i.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(u.type){case"text-delta":r.onChunk(u.textDelta);break;case"reasoning":r.onReasoningChunk(u.textDelta);break;case"tool-call":r.onToolCall(u);break;case"tool-result":r.onToolResult(u);break;case"step-start":r.onStepStart&&r.onStepStart({messageId:u.messageId,request:u.request,warnings:u.warnings||[]}),console.log(`[AIService] Step started for ${t} - Message ID: ${u.messageId}`);break;case"step-finish":r.onStepFinish&&r.onStepFinish({finishReason:u.finishReason,usage:u.usage,isContinued:u.isContinued||!1,warnings:u.warnings||[]}),console.log(`[AIService] Step finished for ${t} - Reason: ${u.finishReason}, Continued: ${u.isContinued}`);break;case"finish":s=!0,a=u.finishReason,o=u.usage,l=u.providerMetadata;break;case"error":r.onError(new Error(`AI Stream Error Part: ${u.error instanceof Error?u.error.message:u.error}`));return;default:console.warn(`[AIService] Received unexpected stream part type: ${u.type} for ${t}`,u);break}}i!=null&&i.reasoning?(c=await i.reasoning,console.log(`[AIService] Extracted final reasoning for ${t}`)):console.log(`[AIService] No final reasoning found in stream result for ${t}.`),!n.abortSignal.aborted&&s?r.onFinish({finishReason:a,usage:o,providerMetadata:l,reasoning:c}):!n.abortSignal.aborted&&!s&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(u){console.error(`[AIService] Error during streamText call for ${t}:`,u),u instanceof Error&&u.name==="AbortError"||r.onError(u instanceof Error?u:new Error(String(u)))}finally{console.log(`[AIService] Stream processing finished for ${t}.`)}}}const MVe=".litechat/conversations",use="/synced_repos";async function IVe(e,t,n,r=!1){n(t.id,"syncing");const i=Lr(`${use}/${t.id}`),s={username:t.username,password:t.password},a=t.branch||"main";try{let o=!1;try{await e.promises.stat(ku(i,".git")),o=!0}catch(l){if(l.code==="ENOENT")o=!1;else throw l}o?(r||Pe.info(`Pulling latest changes for "${t.name}"...`),await YE(i,a,s,{fsInstance:e}),r||Pe.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(r||Pe.info(`Cloning repository "${t.name}"...`),await JZ(i,t.remoteUrl,a,s,{fsInstance:e}),r||Pe.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(o){console.error(`Failed to initialize/sync repository ${t.name}:`,o),n(t.id,"error")}}async function jVe(e,t,n,r,i,s,a,o=!1){var h,m;r(t.id,"syncing");const l=Lr(`${use}/${n.id}`),c=ku(l,MVe,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(ku(l,".git"))}catch(w){if(w.code==="ENOENT"){Pe.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw w}o||Pe.info(`Pulling latest changes for "${n.name}"...`),await YE(l,d,u,{fsInstance:e});let y=null,b=null;try{const w=await Ph(c,{fsInstance:e}),S=new TextDecoder().decode(w);y=JSON.parse(S),b=(h=y==null?void 0:y.conversation)!=null&&h.updatedAt?new Date(y.conversation.updatedAt).getTime():null,isNaN(b??NaN)&&(b=null)}catch(w){w.code==="ENOENT"?console.log(`Conversation file ${c} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${w.message}`),Pe.warning(`Could not read remote version of conversation: ${w.message}`))}const v=t.updatedAt.getTime(),x=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!y||v>(b??0)||v>x&&v>=(b??0)){o||Pe.info("Local changes detected. Pushing to remote...");const w=await Mt.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...C}=t,k=JSON.stringify({conversation:C,interactions:w},null,2);await ZE(c,k,{fsInstance:e}),await dD(l,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await fD(l,d,u,{fsInstance:e}),await i(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),o||Pe.success("Conversation synced successfully (pushed).")}else if(b&&b>v){o||Pe.info("Remote changes detected. Updating local conversation...");const w={...y.conversation,createdAt:new Date(y.conversation.createdAt),updatedAt:new Date(y.conversation.updatedAt),lastSyncedAt:new Date};await Mt.saveConversation(w),await Mt.deleteInteractionsForConversation(t.id);const S=y.interactions.map(C=>Mt.saveInteraction({...C,conversationId:t.id,startedAt:C.startedAt?new Date(C.startedAt):null,endedAt:C.endedAt?new Date(C.endedAt):null}));await Promise.all(S),s()===t.id&&a()==="conversation"&&await Ln.getState().loadInteractions(t.id),r(t.id,"idle"),o||Pe.success("Conversation synced successfully (pulled).")}else o||Pe.info("Conversation already up-to-date."),await i(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(y){console.error(`Sync failed for conversation ${t.id}:`,y),r(t.id,"error",y.message)}}const ga={loaded:"project.loaded",added:"project.added",updated:"project.updated",deleted:"project.deleted",loadingStateChanged:"project.loading.state.changed",loadProjectsRequest:"project.load.projects.request",addProjectRequest:"project.add.project.request",updateProjectRequest:"project.update.project.request",deleteProjectRequest:"project.delete.project.request"},Yn={conversationsLoaded:"conversation.conversations.loaded",selectedItemChanged:"conversation.selected.item.changed",conversationAdded:"conversation.added",conversationUpdated:"conversation.updated",conversationDeleted:"conversation.deleted",conversationSyncStatusChanged:"conversation.sync.status.changed",syncReposLoaded:"conversation.sync.repos.loaded",syncRepoChanged:"conversation.sync.repo.changed",syncRepoInitStatusChanged:"conversation.sync.repo.init.status.changed",loadingStateChanged:"conversation.loading.state.changed",loadConversationsRequest:"conversation.load.conversations.request",addConversationRequest:"conversation.add.conversation.request",updateConversationRequest:"conversation.update.conversation.request",deleteConversationRequest:"conversation.delete.conversation.request",selectItemRequest:"conversation.select.item.request",importConversationRequest:"conversation.import.conversation.request",exportConversationRequest:"conversation.export.conversation.request",exportProjectRequest:"conversation.export.project.request",exportAllConversationsRequest:"conversation.export.all.conversations.request",loadSyncReposRequest:"conversation.load.sync.repos.request",addSyncRepoRequest:"conversation.add.sync.repo.request",updateSyncRepoRequest:"conversation.update.sync.repo.request",deleteSyncRepoRequest:"conversation.delete.sync.repo.request",linkConversationToRepoRequest:"conversation.link.conversation.to.repo.request",syncConversationRequest:"conversation.sync.conversation.request",initializeOrSyncRepoRequest:"conversation.initialize.or.sync.repo.request",updateCurrentConversationToolSettingsRequest:"conversation.update.current.conversation.tool.settings.request"},No=al(ol((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await Mt.loadProjects();e({projects:n,isLoading:!1}),Fe.emit(ga.loaded,{projects:n})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1}),Fe.emit(ga.loadingStateChanged,{isLoading:!1,error:"Failed to load projects"})}},addProject:async n=>{var l;const r=Us(),i=new Date,s=n.parentId?((l=t().getProjectById(n.parentId))==null?void 0:l.path)??"/":"/",a=Lr(`${s}/${n.name.replace(/\s+/g,"-").toLowerCase()}-${r.substring(0,4)}`),o={id:r,path:a,createdAt:i,updatedAt:i,name:n.name,parentId:n.parentId??null,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,defaultTagIds:n.defaultTagIds??null,defaultRuleIds:n.defaultRuleIds??null,metadata:n.metadata??{}};try{return await Mt.saveProject(o),e(c=>{c.projects.unshift(o),c.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime())}),Fe.emit(ga.added,{project:o}),r}catch(c){throw console.error("ProjectStore: Error adding project",c),e({error:"Failed to save new project"}),c}},updateProject:async(n,r)=>{var a;const i=t().getProjectById(n);if(!i){console.warn(`ProjectStore: Project ${n} not found for update.`);return}const s={...i,...r,updatedAt:new Date};if(r.name&&r.name!==i.name){const o=i.parentId?((a=t().getProjectById(i.parentId))==null?void 0:a.path)??"/":"/";s.path=Lr(`${o}/${r.name.replace(/\s+/g,"-").toLowerCase()}-${n.substring(0,4)}`)}try{await Mt.saveProject(s),e(o=>{const l=o.projects.findIndex(c=>c.id===n);l!==-1&&(o.projects[l]=s,o.projects.sort((c,u)=>u.updatedAt.getTime()-c.updatedAt.getTime()))}),Fe.emit(ga.updated,{projectId:n,updates:s})}catch(o){throw console.error("ProjectStore: Error updating project",o),e({error:"Failed to save project update"}),o}},deleteProject:async n=>{const r=t().projects.find(a=>a.id===n);if(!r)return;const i=new Set,s=a=>{i.add(a),t().projects.filter(o=>o.parentId===a).forEach(o=>s(o.id))};s(n);try{await Mt.deleteProject(n),e(a=>({projects:a.projects.filter(o=>!i.has(o.id))})),Fe.emit(Yn.loadConversationsRequest,void 0),Fe.emit(ga.deleted,{projectId:n}),Pe.success(`Project "${r.name}" and its contents deleted.`)}catch(a){throw console.error("ProjectStore: Error deleting project",a),e({error:"Failed to delete project"}),a}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getTopLevelProjectId:n=>{if(!n)return null;let r=t().getProjectById(n);if(!r)return null;for(;r.parentId;){const i=t().getProjectById(r.parentId);if(!i)break;r=i}return r.id},getEffectiveProjectSettings:n=>{const r=gr.getState(),i=Mr.getState().selectedModelId,s={systemPrompt:r.globalSystemPrompt,modelId:i,temperature:r.temperature,maxTokens:r.maxTokens,topP:r.topP,topK:r.topK,presencePenalty:r.presencePenalty,frequencyPenalty:r.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null};if(!n)return s;const a=t().getProjectById(n);if(!a)return s;const o=a.parentId?t().getEffectiveProjectSettings(a.parentId):s;return{systemPrompt:a.systemPrompt!==null&&a.systemPrompt!==void 0?a.systemPrompt:o.systemPrompt,modelId:a.modelId!==null&&a.modelId!==void 0?a.modelId:o.modelId,temperature:a.temperature!==null&&a.temperature!==void 0?a.temperature:o.temperature,maxTokens:a.maxTokens!==null&&a.maxTokens!==void 0?a.maxTokens:o.maxTokens,topP:a.topP!==null&&a.topP!==void 0?a.topP:o.topP,topK:a.topK!==null&&a.topK!==void 0?a.topK:o.topK,presencePenalty:a.presencePenalty!==null&&a.presencePenalty!==void 0?a.presencePenalty:o.presencePenalty,frequencyPenalty:a.frequencyPenalty!==null&&a.frequencyPenalty!==void 0?a.frequencyPenalty:o.frequencyPenalty,defaultTagIds:a.defaultTagIds!==null&&a.defaultTagIds!==void 0?a.defaultTagIds:o.defaultTagIds,defaultRuleIds:a.defaultRuleIds!==null&&a.defaultRuleIds!==void 0?a.defaultRuleIds:o.defaultRuleIds}},getRegisteredActionHandlers:()=>{const n="projectStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:ga.loadProjectsRequest,handler:r.loadProjects,storeId:n},{eventName:ga.addProjectRequest,handler:i(r.addProject),storeId:n},{eventName:ga.updateProjectRequest,handler:s=>r.updateProject(s.id,s.updates),storeId:n},{eventName:ga.deleteProjectRequest,handler:s=>r.deleteProject(s.id),storeId:n}]}}))),zS=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},OVe=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${nw(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${nw(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,i)=>r.index-i.index).forEach(r=>{var i,s,a,o,l,c,u,d;((i=r.prompt)!=null&&i.content||(o=(a=(s=r.prompt)==null?void 0:s.metadata)==null?void 0:a.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(h=>{n+=`- ${h.name} (${h.type}, ${Wx(h.size)}) ${h.source==="vfs"?`(VFS: ${h.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((u=r.metadata)!=null&&u.promptTokens||(d=r.metadata)!=null&&d.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class a0{static async importConversation(t,n,r){try{const i=await t.text(),s=JSON.parse(i);if(!s||typeof s!="object"||!s.conversation||!Array.isArray(s.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const a=s.conversation,o=s.interactions;if(!a.id||!a.title||!a.createdAt||!a.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:a.title||"Imported Chat",metadata:a.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),c=o.map(u=>Mt.saveInteraction({...u,conversationId:l,id:Us()}));await Promise.all(c),await r(l,"conversation"),Pe.success("Conversation imported successfully.")}catch(i){throw console.error("ImportExportService: Error importing conversation",i),Pe.error(`Import failed: ${i instanceof Error?i.message:String(i)}`),i}}static async exportConversation(t,n){try{const r=zn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const i=await Mt.loadInteractionsForConversation(t);let s,a;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const c=JSON.stringify({conversation:r,interactions:i},null,2);s=new Blob([c],{type:"application/json"}),a=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=OVe(r,i);s=new Blob([l],{type:"text/markdown"}),a=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");zS(s,a),Pe.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),Pe.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=No.getState(),{conversations:i}=zn.getState(),s=r(t);if(!s)throw new Error("Project not found.");const a=async h=>{const m=n.find(x=>x.id===h);if(!m)throw new Error(`Project ${h} not found in state.`);const y=n.filter(x=>x.parentId===h),b=i.filter(x=>x.projectId===h),v=[];for(const x of y)v.push(await a(x.id));for(const x of b){const w=await Mt.loadInteractionsForConversation(x.id);v.push({conversation:x,interactions:w})}return{project:m,children:v}},o=await a(t),l=JSON.stringify(o,null,2),c=new Blob([l],{type:"application/json"}),d=`litechat_project_${s.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;zS(c,d),Pe.success(`Project "${s.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),Pe.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=zn.getState().conversations,n=[];for(const a of t){const o=await Mt.loadInteractionsForConversation(a.id);n.push({conversation:a,interactions:o})}const r=JSON.stringify(n,null,2),i=new Blob([r],{type:"application/json"}),s=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;zS(i,s),Pe.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),Pe.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await Mt.getAllDataForExport(t),r=JSON.stringify(n,null,2),i=new Blob([r],{type:"application/json"}),s=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;zS(i,s),Pe.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),Pe.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),i=JSON.parse(r);if(!i||typeof i!="object"||!i.version)throw new Error("Invalid import file format. Missing version or basic structure.");await Mt.importAllData(i,n),Pe.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),Pe.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const Hc="sync_repos",li={repoChanged:"sync.repo.changed",repoInitStatusChanged:"sync.repo.init.status.changed",bulkSyncStarted:"sync.bulk.sync.started",bulkSyncProgress:"sync.bulk.sync.progress",bulkSyncCompleted:"sync.bulk.sync.completed",bulkSyncFailed:"sync.bulk.sync.failed"},Ki=al(ol((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)}),Fe.emit(dn.loadingStateChanged,{isLoading:t().loading,operationLoading:t().operationLoading,error:t().error})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n}),Fe.emit(dn.loadingStateChanged,{isLoading:t().loading,operationLoading:t().operationLoading,error:t().error})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&Pe.error(`VFS Error: ${n}`)}),Fe.emit(dn.loadingStateChanged,{isLoading:t().loading,operationLoading:t().operationLoading,error:t().error})},_addNodes:n=>{e(r=>{const i={};n.forEach(s=>{r.nodes[s.id]=s;const a=s.parentId??r.rootId??"";i[a]||(i[a]=r.childrenMap[a]?[...r.childrenMap[a]]:[]),i[a].includes(s.id)||i[a].push(s.id)});for(const s in i)(!r.childrenMap[s]||JSON.stringify(r.childrenMap[s].sort())!==JSON.stringify(i[s].sort()))&&(r.childrenMap[s]=i[s])}),Fe.emit(dn.nodesUpdated,{vfsKey:t().vfsKey,nodes:t().nodes,childrenMap:t().childrenMap})},_updateNode:(n,r)=>{e(i=>{i.nodes[n]&&Object.assign(i.nodes[n],r)}),Fe.emit(dn.nodesUpdated,{vfsKey:t().vfsKey,nodes:t().nodes,childrenMap:t().childrenMap})},_removeNodes:n=>{e(r=>{n.forEach(i=>{const s=r.nodes[i];if(s){const a=s.parentId??r.rootId??"";if(r.childrenMap[a]&&(r.childrenMap[a]=r.childrenMap[a].filter(o=>o!==i)),delete r.nodes[i],r.selectedFileIds.delete(i),s.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===i).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[i]}}})}),Fe.emit(dn.nodesUpdated,{vfsKey:t().vfsKey,nodes:t().nodes,childrenMap:t().childrenMap}),Fe.emit(dn.selectionChanged,{selectedFileIds:Array.from(t().selectedFileIds)})},_setFsInstance:n=>{e({fs:n}),Fe.emit(dn.fsInstanceChanged,{fsInstance:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),Fe.emit(dn.vfsEnabledChanged,{enabled:n}),n||(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),Fe.emit(dn.vfsKeyChanged,{vfsKey:null,configuredVfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),Fe.emit(dn.vfsKeyChanged,{vfsKey:t().vfsKey,configuredVfsKey:n})},setVfsKey:n=>{if(n!==null){const r=t().vfsKey,i=t().configuredVfsKey;if(n===r){n&&n!==i&&!t().initializingKey&&t().initializeVFS(n).catch(s=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,s)});return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${i}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),Fe.emit(dn.vfsKeyChanged,{vfsKey:n,configuredVfsKey:null}),n!==null&&t().initializeVFS(n).catch(s=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,s)})}},initializeVFS:async(n,r)=>{let i,s;if(typeof n=="object"&&n!==null&&"vfsKey"in n)console.warn("[VfsStore] initializeVFS called with a single object payload. Correcting. Input:",JSON.parse(JSON.stringify(n))),i=String(n.vfsKey),s=n.options;else if(typeof n=="string")i=n,s=r;else{const h=`[VfsStore] initializeVFS called with invalid vfsKey type. Type: ${typeof n}, Value: "${String(n)}". Aborting.`;throw console.error(h,n),new Error("VFS key must be a string and cannot be empty.")}if(!i||i.trim()===""){const h=`[VfsStore] initializeVFS: Derived vfsKey is empty or invalid. Original param: ${String(n)}, Derived key: "${i}". Aborting.`;throw console.error(h,{originalVfsKeyParam:n,originalOptionsParam:r}),new Error("VFS key cannot be empty after processing.")}const a=(s==null?void 0:s.force)===!0;if(t().initializingKey===i){const h=`Initialization skipped for "${i}". Already actively initializing this exact key.`;return console.warn(`[VfsStore] ${h}`),new Promise((m,y)=>{const b=setInterval(()=>{const v=t();v.initializingKey!==i&&(clearInterval(b),v.configuredVfsKey===i&&v.fs?m(v.fs):y(new Error(`VFS initialization for "${i}" failed or was interrupted`)))},100);setTimeout(()=>{clearInterval(b),y(new Error(`Timeout waiting for VFS "${i}" initialization to complete`))},1e4)})}if(t().configuredVfsKey===i&&t().fs)return a||e({loading:!1}),t().fs;if(!a){if(t().vfsKey!==i){const h=`UI Initialization aborted for "${i}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${h}`),new Error(h)}if(t().initializingKey!==null&&t().initializingKey!==i){const h=`UI Initialization skipped for "${i}". Already initializing a different key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${h}`),new Error(h)}}const{_setLoading:o,_setError:l,_addNodes:c,_setFsInstance:u,_setConfiguredVfsKey:d}=t();console.log(`[VfsStore] Initializing VFS with key: ${i} (Forced: ${a})`),e({initializingKey:i}),a||(o(!0),l(null));try{const h=await pAe(i);if(!h)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==i){const b=`UI Initialization for key "${i}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${b}`),e({initializingKey:null,loading:!1}),new Error(b)}if(a)return u(h),d(i),e({initializingKey:null}),Fe.emit(dn.loadingStateChanged,{isLoading:!1,operationLoading:!1,error:null}),h;u(h),d(i),console.log(`[VfsStore] UI VFS instance configured for key: ${i}`);const m="vfs-root";let y=t().nodes[m];try{await h.promises.stat("/")}catch(b){if(b.code==="ENOENT")console.warn("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw b}if(!y||y.path!=="/"){const b=Date.now();y={id:m,parentId:null,name:"",path:"/",type:"folder",createdAt:b,lastModified:b},c([y])}return e(b=>{b.rootId=y.id,b.currentParentId=y.id}),await t().fetchNodes(y.id),h}catch(h){const m=`Failed to initialize VFS (${i}): ${h instanceof Error?h.message:String(h)}`;throw console.error(`[VfsStore DEBUG] Error in initializeVFS catch block: ${m}`,h),t().initializingKey===i&&(l(m),a||(u(null),d(null))),new Error(m)}finally{t().initializingKey===i&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:i,_addNodes:s,fs:a,nodes:o,rootId:l,configuredVfsKey:c,vfsKey:u,initializingKey:d}=t();if(!a||c!==u||d){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!a}, Match: ${c===u}, Init: ${d}`);return}r(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/",y=await hD(m,{fsInstance:a}),b=n??l??"",v=new Set(y.map(k=>k.path)),S=(t().childrenMap[b]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!v.has(k.path)).map(k=>k.id);S.length>0&&t()._removeNodes(S);const C=y.map(k=>{const A=Object.values(t().nodes).find(N=>N.path===k.path),R=Date.now();return{id:(A==null?void 0:A.id)||Us(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(A==null?void 0:A.createdAt)??R,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});C.length>0&&s(C),e(k=>{const A=C.map(R=>R.id);(!k.childrenMap[b]||JSON.stringify(k.childrenMap[b].sort())!==JSON.stringify(A.sort()))&&(k.childrenMap[b]=A)})}catch(h){console.error("Failed to fetch VFS nodes:",h),i("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Lr(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const i=t().rootId;return i?t().nodes[i]:void 0}return Object.values(t().nodes).find(i=>i.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:i,rootId:s,fs:a}=t();if(!a||t().vfsKey!==t().configuredVfsKey)return;const o=Lr(n),l=r(o);l&&l.type==="folder"?(e(c=>{c.currentParentId=l.id}),t().childrenMap[l.id]||await i(l.id)):o==="/"&&s?(e(c=>{c.currentParentId=s}),t().childrenMap[s]||await i(s)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:i,_setError:s,fs:a,nodes:o,rootId:l,_addNodes:c,configuredVfsKey:u,vfsKey:d}=t();if(!a||u!==d){s("Filesystem not ready.");return}if(!r.trim()){s("Directory name cannot be empty.");return}i(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/",y=Nj(m,r.trim());try{throw await a.promises.stat(y),new Error(`"${r.trim()}" already exists.`)}catch(w){if(w.code!=="ENOENT")throw w}await tX(y,{fsInstance:a});const b=Date.now(),x={id:Us(),parentId:n,name:r.trim(),path:y,type:"folder",createdAt:b,lastModified:b};c([x])}catch(h){console.error("Failed to create directory:",h),s(h.message||"Failed to create directory.")}finally{i(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:i,_setError:s,fs:a,nodes:o,rootId:l,configuredVfsKey:c,vfsKey:u}=t();if(!a||c!==u){s("Filesystem not ready.");return}i(!0);try{const d=n?o[n]:o[l||""],h=d?d.path:"/";await nX(Array.from(r),h,{fsInstance:a}),await t().fetchNodes(n)}catch(d){console.error("Failed to upload files:",d),s("Failed to upload one or more files.")}finally{i(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:i,_removeNodes:s,fs:a,configuredVfsKey:o,vfsKey:l}=t();if(!a||o!==l){i("Filesystem not ready.");return}r(!0);try{const c=n.map(u=>t().nodes[u]).filter(Boolean);for(const u of c)await pD(u.path,u.type==="folder",{fsInstance:a});s(n)}catch(c){console.error("Failed to delete nodes:",c),i("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:i,_setError:s,_updateNode:a,nodes:o,fs:l,rootId:c,configuredVfsKey:u,vfsKey:d}=t();if(!l||u!==d){s("Filesystem not ready.");return}if(!r.trim()){s("Name cannot be empty.");return}const h=o[n];if(!h){s("Item not found.");return}if(h.name!==r.trim()){i(!0);try{const m=h.parentId?o[h.parentId]:o[c||""],y=m?m.path:"/",b=Nj(y,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await rX(h.path,b,{fsInstance:l});const v={name:r.trim(),path:b,lastModified:Date.now()};a(n,v)}catch(m){console.error("Failed to rename item:",m),s(m.message||"Failed to rename item.")}finally{i(!1)}}},downloadFile:async n=>{const{nodes:r,fs:i,_setError:s,configuredVfsKey:a,vfsKey:o}=t();if(!i||a!==o)return s("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return s("File not found."),null;try{const c=await Ph(l.path,{fsInstance:i}),u=l.mimeType||"application/octet-stream",d=new Blob([c],{type:u});return{name:l.name,blob:d}}catch(c){return console.error("Failed to download file:",c),s("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{r.selectedFileIds.add(n)}),Fe.emit(dn.selectionChanged,{selectedFileIds:Array.from(t().selectedFileIds)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)}),Fe.emit(dn.selectionChanged,{selectedFileIds:Array.from(t().selectedFileIds)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()}),Fe.emit(dn.selectionChanged,{selectedFileIds:[]})},resetStuckInitialization:()=>{console.warn("[VfsStore] Force resetting stuck initialization state"),e({initializingKey:null,loading:!1,operationLoading:!1,error:null})},getRegisteredActionHandlers:()=>{const n="vfsStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:dn.setVfsKeyRequest,handler:s=>r.setVfsKey(s.key),storeId:n},{eventName:dn.initializeVFSRequest,handler:async s=>{await r.initializeVFS(s.vfsKey,s.options)},storeId:n},{eventName:dn.fetchNodesRequest,handler:s=>r.fetchNodes(s.parentId),storeId:n},{eventName:dn.setCurrentPathRequest,handler:s=>r.setCurrentPath(s.path),storeId:n},{eventName:dn.createDirectoryRequest,handler:s=>r.createDirectory(s.parentId,s.name),storeId:n},{eventName:dn.uploadFilesRequest,handler:s=>r.uploadFiles(s.parentId,s.files),storeId:n},{eventName:dn.deleteNodesRequest,handler:s=>r.deleteNodes(s.ids),storeId:n},{eventName:dn.renameNodeRequest,handler:s=>r.renameNode(s.id,s.newName),storeId:n},{eventName:dn.downloadFileRequest,handler:i(r.downloadFile),storeId:n},{eventName:dn.selectFileRequest,handler:s=>r.selectFile(s.fileId),storeId:n},{eventName:dn.deselectFileRequest,handler:s=>r.deselectFile(s.fileId),storeId:n},{eventName:dn.clearSelectionRequest,handler:r.clearSelection,storeId:n},{eventName:dn.setEnableVfsRequest,handler:s=>r._setEnableVfs(s.enabled),storeId:n}]}}))),PVe="/synced_repos",zn=al(ol((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>(console.log("[ConversationStore] Ensuring Sync VFS is ready..."),Ki.getState().initializingKey===Hc&&(console.warn("[ConversationStore] VFS appears stuck in initializing state, resetting..."),Ki.getState().resetStuckInitialization()),new Promise((r,i)=>{let s=null;const a=()=>{Fe.off(dn.fsInstanceChanged,o),Fe.off(dn.loadingStateChanged,l),s&&(clearTimeout(s),s=null)},o=u=>{Ki.getState().configuredVfsKey===Hc&&u.fsInstance&&(console.log(`[ConversationStore] Sync VFS ready via fsInstanceChanged for key ${Hc}.`),a(),r(u.fsInstance))},l=u=>{const d=Ki.getState();d.configuredVfsKey===Hc&&(u.error?(console.error(`[ConversationStore] Sync VFS initialization error for key ${Hc}: ${u.error}`),a(),i(new Error(u.error))):!u.isLoading&&!u.operationLoading&&d.fs&&(console.log(`[ConversationStore] Sync VFS ready via loadingStateChanged for key ${Hc}.`),a(),r(d.fs)))};Fe.on(dn.fsInstanceChanged,o),Fe.on(dn.loadingStateChanged,l);const c=Ki.getState();if(c.configuredVfsKey===Hc&&c.fs&&!c.loading&&!c.operationLoading&&!c.error){console.log(`[ConversationStore] Sync VFS already ready for key ${Hc}.`),a(),r(c.fs);return}s=setTimeout(()=>{const u=`Timeout waiting for Sync VFS (${Hc}) to become ready.`;console.error(`[ConversationStore] ${u}`),a(),i(new Error(u))},3e4),Fe.emit(dn.initializeVFSRequest,{vfsKey:Hc,options:{force:!0}})})),loadConversations:async()=>{e({isLoading:!0,error:null});try{const[n,r]=await Promise.all([Mt.loadConversations(),Mt.loadSyncRepos()]),i={};n.forEach(s=>{if(s.syncRepoId){const a=s.lastSyncedAt instanceof Date?s.lastSyncedAt.getTime():null,o=s.updatedAt instanceof Date?s.updatedAt.getTime():null;a?o&&o>a?i[s.id]="needs-sync":i[s.id]="idle":i[s.id]="needs-sync"}else i[s.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:i,repoInitializationStatus:{},isLoading:!1}),Fe.emit(Yn.conversationsLoaded,{conversations:n}),Fe.emit(Yn.syncReposLoaded,{repos:r})}catch(n){console.error("ConversationStore: Error loading conversations",n),e({error:"Failed load conversations",isLoading:!1}),Fe.emit(Yn.loadingStateChanged,{isLoading:!1,error:"Failed load conversations"})}},addConversation:async n=>{const r=Us(),i=new Date,s={id:r,createdAt:i,updatedAt:i,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};let a=!1;try{const o=JSON.stringify(s);return await Mt.saveConversation(JSON.parse(o)),a=!0,e(l=>{l.conversations.some(c=>c.id===s.id)||(l.conversations.unshift(s),l.conversationSyncStatus[r]=s.syncRepoId?"needs-sync":"idle")}),Fe.emit(Yn.conversationAdded,{conversation:s}),r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),a&&e(l=>({error:"Failed to save new conversation to state",conversations:l.conversations.filter(c=>c.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(l.conversationSyncStatus).filter(([c])=>c!==r))})),o}},updateConversation:async(n,r)=>{const i=t().getConversationById(n);if(!i){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(a=>{const o=a.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=a.conversations[o].metadata??{},c=r.metadata??{},u={...l,...c};Object.assign(a.conversations[o],{...r,metadata:u,updatedAt:new Date});const d=["title","metadata","projectId"].some(y=>y in r),h=a.conversations[o].lastSyncedAt instanceof Date?a.conversations[o].lastSyncedAt.getTime():null,m=a.conversations[o].updatedAt.getTime();"syncRepoId"in r?a.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":d&&a.conversations[o].syncRepoId&&a.conversationSyncStatus[n]==="idle"&&(!h||m>h)&&(a.conversationSyncStatus[n]="needs-sync")}});const s=t().getConversationById(n);if(s)try{const a=JSON.parse(JSON.stringify(s));await Mt.saveConversation(a),Fe.emit(Yn.conversationUpdated,{conversationId:n,updates:r})}catch(a){throw console.error("ConversationStore: Error updating conversation",a),e(o=>{const l=o.conversations.findIndex(c=>c.id===n);if(l!==-1){o.conversations[l]=i;const c=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&c&&u<=c?"idle":i.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),a}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(a=>{const o=a.conversations.findIndex(l=>l.id===n);if(o!==-1){a.conversations[o]=i;const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,c=i.updatedAt.getTime();a.conversationSyncStatus[n]=i.syncRepoId&&l&&c<=l?"idle":i.syncRepoId?"needs-sync":"idle"}a.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,i=t().selectedItemType,s=t().conversations.find(a=>a.id===n);if(s){e(a=>({conversations:a.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&i==="conversation"?null:r,selectedItemType:r===n&&i==="conversation"?null:i,conversationSyncStatus:Object.fromEntries(Object.entries(a.conversationSyncStatus).filter(([o])=>o!==n))}));try{await Mt.deleteConversation(n),await Mt.deleteInteractionsForConversation(n),Fe.emit(Yn.conversationDeleted,{conversationId:n}),r===n&&i==="conversation"&&(Fe.emit(Zn.setCurrentConversationIdRequest,{id:null}),Fe.emit(Yn.selectedItemChanged,{itemId:null,itemType:null}))}catch(a){throw console.error("ConversationStore: Error deleting conversation",a),e(o=>{if(s){o.conversations.push(s);const l=s.lastSyncedAt instanceof Date?s.lastSyncedAt.getTime():null,c=s.updatedAt.getTime();o.conversationSyncStatus[n]=s.syncRepoId&&l&&c<=l?"idle":s.syncRepoId?"needs-sync":"idle"}r===n&&i==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),a}}},selectItem:async(n,r)=>{const i=t().selectedItemId,s=t().selectedItemType;if(i===n&&s===r)return;console.log(`ConversationStore: Selecting item. ID: ${n}, Type: ${r}. Previous: ${i} (${s})`);const a=r==="conversation"?n:null;a&&(Fe.emit(Zn.setCurrentConversationIdRequest,{id:a}),Fe.emit(Zn.loadInteractionsRequest,{conversationId:a})),e({selectedItemId:n,selectedItemType:r}),Fe.emit(Yn.selectedItemChanged,{itemId:n,itemType:r})},importConversation:async n=>{await a0.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await a0.exportConversation(n,r)},exportProject:async n=>{await a0.exportProject(n)},exportAllConversations:async()=>{await a0.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Mt.loadSyncRepos();e({syncRepos:n,isLoading:!1}),Fe.emit(Yn.syncReposLoaded,{repos:n})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1}),Fe.emit(Yn.loadingStateChanged,{isLoading:!1,error:"Failed load sync repositories"})}}},addSyncRepo:async n=>{const r=Us(),i=new Date,s={id:r,createdAt:i,updatedAt:i,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(a=>{a.syncRepos.push(s)});try{const a=t().syncRepos.find(o=>o.id===r);if(a){const o=JSON.parse(JSON.stringify(a));await Mt.saveSyncRepo(o),Fe.emit(li.repoChanged,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");Pe.success(`Sync repository "${s.name}" added.`);try{await t().initializeOrSyncRepo(r)}catch(o){console.warn(`Failed to automatically initialize repository "${s.name}":`,o),Pe.warning(`Repository "${s.name}" added but initialization failed. You can manually sync it later.`)}return r}catch(a){throw console.error("ConversationStore: Error adding sync repo",a),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),a}},updateSyncRepo:async(n,r)=>{const i=t().syncRepos.find(a=>a.id===n);if(!i){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(a=>{const o=a.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(a.syncRepos[o],{...r,branch:r.branch||a.syncRepos[o].branch||"main",updatedAt:new Date})});const s=t().syncRepos.find(a=>a.id===n);if(s)try{const a=JSON.parse(JSON.stringify(s));await Mt.saveSyncRepo(a),Fe.emit(li.repoChanged,{repoId:n,action:"updated"}),Pe.success(`Sync repository "${s.name}" updated.`)}catch(a){throw console.error("ConversationStore: Error updating sync repo",a),e(o=>{const l=o.syncRepos.findIndex(c=>c.id===n);l!==-1&&(o.syncRepos[l]=i),o.error="Failed to save sync repository update"}),a}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(a=>{const o=a.syncRepos.findIndex(l=>l.id===n);o!==-1&&(a.syncRepos[o]=i),a.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(r)try{let i;try{i=await t()._ensureSyncVfsReady()}catch(a){throw console.error("ConversationStore: Failed to initialize sync VFS for deletion",a),Pe.error("Failed to initialize filesystem for deletion. Repository not deleted."),a}await Mt.deleteSyncRepo(n);const s=Lr(`${PVe}/${n}`);try{await pD(s,!0,{fsInstance:i}),console.log(`[ConversationStore] Successfully deleted VFS directory: ${s}`)}catch(a){console.error(`[ConversationStore] Failed to delete VFS directory ${s}:`,a),a.code!=="ENOENT"&&console.warn(`Could not remove local sync folder for "${r.name}": ${a.message}`)}e(a=>({syncRepos:a.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(a.repoInitializationStatus).filter(([o])=>o!==n))})),Fe.emit(li.repoChanged,{repoId:n,action:"deleted"}),Pe.success(`Sync repository "${r.name}" deleted.`)}catch(i){throw console.error("ConversationStore: Error deleting sync repo",i),e(s=>{s.error="Failed to delete sync repository"}),i}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),Pe.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,i=null)=>{e(s=>{s.conversationSyncStatus[n]=r,r==="error"&&i&&console.error(`Sync error for ${n}: ${i}`)}),Fe.emit(Yn.conversationSyncStatusChanged,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(i=>{i.repoInitializationStatus[n]=r}),Fe.emit(li.repoInitStatusChanged,{repoId:n,status:r})},initializeOrSyncRepo:async(n,r=!1)=>{const i=t().syncRepos.find(a=>a.id===n);if(!i){r||Pe.error("Sync repsitory configuration not found.");return}let s;try{s=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await IVe(s,i,t()._setRepoInitializationStatus,r)},syncConversation:async(n,r=!1)=>{const i=t().getConversationById(n);if(!i){r||Pe.error("Conversation not found for syncing.");return}if(!i.syncRepoId){r||Pe.info("Conversation not linked to a sync repository.");return}const s=t().syncRepos.find(l=>l.id===i.syncRepoId);if(!s){r||Pe.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await jVe(a,i,s,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType,r);const o=t().getConversationById(n);o&&e(l=>{const c=l.conversations.findIndex(u=>u.id===n);c!==-1&&(l.conversations[c]=o)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},syncAllConversations:async()=>{const{BulkSyncService:n}=await Kr(async()=>{const{BulkSyncService:r}=await Promise.resolve().then(()=>C0);return{BulkSyncService:r}},void 0);await n.syncAll({syncRepos:!1,syncConversations:!0,continueOnError:!0,maxConcurrent:3})},syncPendingConversations:async()=>{const{BulkSyncService:n}=await Kr(async()=>{const{BulkSyncService:r}=await Promise.resolve().then(()=>C0);return{BulkSyncService:r}},void 0);await n.syncPendingConversations()},initializeAllRepositories:async()=>{const{BulkSyncService:n}=await Kr(async()=>{const{BulkSyncService:r}=await Promise.resolve().then(()=>C0);return{BulkSyncService:r}},void 0);await n.initializeAllRepositories()},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:i,updateConversation:s}=t();if(i!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const a=t().getConversationById(r);if(!a){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=a.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!a.metadata)&&await s(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(i=>{i.conversations=i.conversations.map(s=>s.projectId&&r.has(s.projectId)?{...s,projectId:null}:s)})},getRegisteredActionHandlers:()=>{const n="conversationStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:Yn.loadConversationsRequest,handler:r.loadConversations,storeId:n},{eventName:Yn.addConversationRequest,handler:i(r.addConversation),storeId:n},{eventName:Yn.updateConversationRequest,handler:s=>r.updateConversation(s.id,s.updates),storeId:n},{eventName:Yn.deleteConversationRequest,handler:s=>r.deleteConversation(s.id),storeId:n},{eventName:Yn.selectItemRequest,handler:s=>r.selectItem(s.id,s.type),storeId:n},{eventName:Yn.importConversationRequest,handler:s=>r.importConversation(s.file),storeId:n},{eventName:Yn.exportConversationRequest,handler:s=>r.exportConversation(s.conversationId,s.format),storeId:n},{eventName:Yn.exportProjectRequest,handler:s=>r.exportProject(s.projectId),storeId:n},{eventName:Yn.exportAllConversationsRequest,handler:r.exportAllConversations,storeId:n},{eventName:Yn.loadSyncReposRequest,handler:r.loadSyncRepos,storeId:n},{eventName:Yn.addSyncRepoRequest,handler:i(r.addSyncRepo),storeId:n},{eventName:Yn.updateSyncRepoRequest,handler:s=>r.updateSyncRepo(s.id,s.updates),storeId:n},{eventName:Yn.deleteSyncRepoRequest,handler:s=>r.deleteSyncRepo(s.id),storeId:n},{eventName:Yn.linkConversationToRepoRequest,handler:s=>r.linkConversationToRepo(s.conversationId,s.repoId),storeId:n},{eventName:Yn.syncConversationRequest,handler:s=>r.syncConversation(s.conversationId),storeId:n},{eventName:Yn.initializeOrSyncRepoRequest,handler:s=>r.initializeOrSyncRepo(s.repoId),storeId:n},{eventName:Yn.updateCurrentConversationToolSettingsRequest,handler:s=>r.updateCurrentConversationToolSettings(s),storeId:n}]}}))),cc={copyInteractionResponseRequest:"canvas.interaction.copy.response.request",regenerateInteractionRequest:"canvas.interaction.regenerate.request",regenerateInteractionWithModelRequest:"canvas.interaction.regenerate.with.model.request",raceInteractionRequest:"canvas.interaction.race.request",editResponseRequest:"canvas.interaction.edit.response.request",copyCodeBlockRequest:"canvas.codeblock.copy.request"},fx={async submitPrompt(e){var O,L,P,V,F,J;console.log("[ConversationService] submitPrompt called",e);const t=Ln.getState(),n=No.getState(),r=To.getState(),i=zn.getState(),s=gr.getState(),a=t.currentConversationId;if(!a){Pe.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const o=i.getConversationById(a),l=(o==null?void 0:o.projectId)??null,c=n.getEffectiveProjectSettings(l),d=t.interactions.filter(U=>U.conversationId===a).length===0&&s.autoTitleEnabled&&((O=e.metadata)==null?void 0:O.autoTitleEnabledForTurn)===!0&&s.autoTitleModelId,m=t.interactions.filter(U=>U.parentId===null&&U.status==="COMPLETED").sort((U,G)=>U.index-G.index).map(U=>{var G;if(U.type==="message.assistant_regen"&&((G=U.metadata)!=null&&G.regeneratedFromId)){const $=t.interactions.find(ne=>ne.id===U.metadata.regeneratedFromId);if($&&$.prompt&&$.type==="message.user_assistant")return{...U,prompt:$.prompt,type:"message.user_assistant"}}return U.type==="message.user_assistant"&&U.prompt?U:null}).filter(Boolean),y=mj(m);let b=e.content;const v=[],x=((L=e.metadata)==null?void 0:L.effectiveRulesContent)??[],w=x.filter(U=>U.type==="system").map(U=>U.content),S=x.filter(U=>U.type==="before").map(U=>U.content),C=x.filter(U=>U.type==="after").map(U=>U.content);S.length>0&&(b=`${S.join(`
`)}

${b}`),C.length>0&&(b=`${b}

    ${C.join(`
`)}`),b&&v.push({type:"text",text:b});const k=((P=e.metadata)==null?void 0:P.attachedFiles)??[];if(k.length>0){const U=await this._processFilesForPrompt(k,a);v.unshift(...U)}v.length>0?y.push({role:"user",content:v}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");let R=((V=e.metadata)==null?void 0:V.turnSystemPrompt)??c.systemPrompt??void 0;w.length>0&&(R=`${R?`${R}

        `:""}${w.join(`
`)}`);const N={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(N).forEach(U=>{(N[U]===null||N[U]===void 0)&&delete N[U]});const I={system:R,messages:y,parameters:N,metadata:{...(({turnSystemPrompt:U,activeTagIds:G,activeRuleIds:$,effectiveRulesContent:ne,autoTitleEnabledForTurn:W,...te})=>({...te,effectivelyAppliedTagIds:G,effectivelyAppliedRuleIds:$}))(e.metadata??{}),modelId:r.modelId??void 0,attachedFiles:(F=e.metadata.attachedFiles)==null?void 0:F.map(({contentBase64:U,contentText:G,...$})=>$)}};try{const U=qp.startInteraction(I,a,e);if(d){console.log("[ConversationService] Triggering asynchronous title generation.");const G=(((J=e.metadata)==null?void 0:J.effectiveRulesContent)??[]).map($=>({id:$.sourceRuleId||Us(),name:$.sourceRuleId?`Rule ${$.sourceRuleId.substring(0,4)}`:"Context Rule",content:$.content,type:$.type,createdAt:new Date,updatedAt:new Date}));this.generateConversationTitle(a,e,G).catch($=>{console.error("[ConversationService] Background title generation failed:",$)})}await U}catch(U){throw console.error("[ConversationService] Error starting interaction:",U),Pe.error(`Failed to start interaction: ${U instanceof Error?U.message:String(U)}`),U}},async generateConversationTitle(e,t,n){var o,l;const r=gr.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let i=t.content;if(i.length>r.autoTitlePromptMaxLength&&(i=i.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const c=t.metadata.attachedFiles.map(u=>u.name).join(", ");i+=`

[Attached files: ${c}]`}if(r.autoTitleIncludeRules&&n.length>0){const c=n.map(u=>u.name).join(", ");i+=`

[Active rules: ${c}]`}const s={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:i}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},a={id:Us(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:s.parameters,metadata:{...s.metadata,originalTurnId:t.id}};try{await qp.startInteraction(s,e,a,"conversation.title_generation")}catch(c){console.error("[ConversationService] Error starting title generation interaction:",c)}},async regenerateInteraction(e){var P,V,F,J;console.log(`[ConversationService] regenerateInteraction called for ID: ${e}`);const t=Ln.getState(),n=No.getState(),r=To.getState(),i=zn.getState(),s=t.interactions.find(U=>U.id===e);if(console.log("[ConversationService] Target interaction for regen:",JSON.parse(JSON.stringify(s))),!s||!s.prompt){Pe.error("Cannot regenerate: Original interaction data missing.");return}const a=null,o=s.index,l=s.prompt,c=s.conversationId,u=i.getConversationById(c),d=(u==null?void 0:u.projectId)??null,h=n.getEffectiveProjectSettings(d),m=s.index,y=t.interactions.filter(U=>U.conversationId===c&&U.index<m&&U.status==="COMPLETED"&&U.type==="message.user_assistant"&&U.parentId===null).sort((U,G)=>U.index-G.index),b=mj(y);let v=l.content;const x=[],w=((P=l.metadata)==null?void 0:P.effectiveRulesContent)??[],S=w.filter(U=>U.type==="system").map(U=>U.content),C=w.filter(U=>U.type==="before").map(U=>U.content),k=w.filter(U=>U.type==="after").map(U=>U.content);C.length>0&&(v=`${C.join(`
`)}

${v}`),k.length>0&&(v=`${v}

    ${k.join(`
`)}`),v&&x.push({type:"text",text:v});const A=((V=l.metadata)==null?void 0:V.attachedFiles)??[];if(A.length>0){const U=await this._processFilesForPrompt(A,c);x.unshift(...U)}x.length>0?b.push({role:"user",content:x}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");let N=((F=l.metadata)==null?void 0:F.turnSystemPrompt)??h.systemPrompt??void 0;S.length>0&&(N=`${N?`${N}

        `:""}${S.join(`
`)}`);const I={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...l.parameters??{}};Object.keys(I).forEach(U=>{(I[U]===null||I[U]===void 0)&&delete I[U]});const O={system:N,messages:b,parameters:I,metadata:{...(({turnSystemPrompt:U,activeTagIds:G,activeRuleIds:$,effectiveRulesContent:ne,autoTitleEnabledForTurn:W,...te})=>({...te,effectivelyAppliedTagIds:G,effectivelyAppliedRuleIds:$}))(l.metadata??{}),modelId:r.modelId??void 0,regeneratedFromId:e,attachedFiles:A.map(({contentBase64:U,contentText:G,...$})=>$)}};let L=null;try{if(L=await qp.startInteraction(O,c,l,"message.assistant_regen"),!L)throw new Error("Failed to create new interaction for regeneration.");const U={};let G=!1;L.index!==o&&(U.index=o,G=!0),L.parentId!==a&&(U.parentId=a,G=!0);let $=L;G&&(t._updateInteractionInState(L.id,U),$={...L,...U},await Mt.saveInteraction($)),console.log("[ConversationService] New active interaction state after potential updates:",JSON.parse(JSON.stringify($)));const ne=[];let W=s;for(;W;){ne.push(W);const ee=(J=W.metadata)==null?void 0:J.regeneratedFromId;ee?W=t.interactions.find(re=>re.id===ee):W=null}const te=ne.sort((ee,re)=>{var Ie,je;const de=((Ie=ee.startedAt)==null?void 0:Ie.getTime())??0,oe=((je=re.startedAt)==null?void 0:je.getTime())??0;return de-oe});for(let ee=0;ee<te.length;ee++){const re=te[ee],de={parentId:$.id,index:ee};console.log(`[ConversationService] Updating old version ${re.id} to be child of ${$.id} with childIndex ${ee}`,JSON.parse(JSON.stringify(de))),t._updateInteractionInState(re.id,de),await Mt.saveInteraction({...re,...de})}}catch(U){throw console.error("[ConversationService] Error during regeneration process:",U),Pe.error(`Failed to regenerate response: ${U instanceof Error?U.message:String(U)}`),U}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(s=>s.source==="vfs");let i;if(r.length>0){const s=zn.getState().getConversationById(t),a=(s==null?void 0:s.projectId)??"orphan";try{i=await this._ensureVfsReady(a)}catch{Pe.error(`Filesystem unavailable for key ${a}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),i=void 0}}for(const s of e){let a=null;try{if(s.source==="direct")a=w$(s);else if(s.source==="vfs"&&i&&s.path){console.log(`[ConversationService] Fetching VFS file: ${s.path}`);const o=await Ph(s.path,{fsInstance:i});a=w$({...s,contentBytes:o})}else if(s.source==="vfs"&&!i)continue;a&&n.push(a)}catch(o){console.error(`[ConversationService] Error processing file ${s.name}:`,o),n.push({type:"text",text:`[Error processing file: ${s.name}]`})}}return n},async _ensureVfsReady(e){return console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`),new Promise((t,n)=>{const r=o=>{Ki.getState().configuredVfsKey===e&&(s(),t(o.fsInstance))},i=o=>{if(Ki.getState().configuredVfsKey===e&&!o.isLoading&&!o.operationLoading)if(o.error)s(),n(new Error(o.error));else{const l=Ki.getState().fs;l&&(s(),t(l))}},s=()=>{Fe.off(dn.fsInstanceChanged,r),Fe.off(dn.loadingStateChanged,i)};Fe.on(dn.fsInstanceChanged,r),Fe.on(dn.loadingStateChanged,i);const a=Ki.getState();if(a.configuredVfsKey===e&&a.fs&&!a.loading&&!a.operationLoading&&!a.error){s(),t(a.fs);return}if(a.configuredVfsKey===e&&a.error&&!a.loading&&!a.operationLoading){s(),n(new Error(a.error));return}Fe.emit(dn.initializeVFSRequest,{vfsKey:e,options:{force:!0}})})}},qp={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,_pendingRegenerations:new Set,initializeCanvasEventHandlers(){Fe.on(cc.copyInteractionResponseRequest,async e=>{const{interactionId:t}=e,n=Ln.getState().interactions.find(i=>i.id===t);if(!n){Pe.error(`Copy failed: Interaction ${t} not found.`),console.warn(`[InteractionService] Copy request for unknown interaction ${t}`);return}const r=n.response??"";if(typeof r!="string"||r.trim()===""){Pe.info("No response content to copy.");return}try{await navigator.clipboard.writeText(r),Pe.success("Response copied!")}catch(i){Pe.error("Failed to copy response."),console.error("[InteractionService] Error copying response:",i)}}),Fe.on(cc.regenerateInteractionRequest,async e=>{const{interactionId:t}=e;if(console.log(`[InteractionService] Received regenerateInteractionRequest for ${t}`),this._pendingRegenerations.has(t)){console.warn(`[InteractionService] Regeneration already pending for ${t}. Ignoring request.`);return}const n=Ln.getState().interactions.find(o=>o.id===t);if(!n){Pe.error(`Regeneration failed: Interaction ${t} not found.`),console.warn(`[InteractionService] Regeneration request for unknown interaction ${t}`);return}const r=Ln.getState();if(r.status==="streaming"){Pe.info("Cannot regenerate while another response is streaming.");return}const s=r.interactions.filter(o=>o.conversationId===n.conversationId&&o.parentId===null&&(o.type==="message.user_assistant"||o.type==="message.assistant_regen")).sort((o,l)=>o.index-l.index),a=s.length>0?s[s.length-1]:null;if((a==null?void 0:a.id)!==t){Pe.info("Can only regenerate the last response in the conversation.");return}try{this._pendingRegenerations.add(t),console.log(`[InteractionService] Starting ConversationService.regenerateInteraction for ${t}`),await fx.regenerateInteraction(t),console.log(`[InteractionService] Finished ConversationService.regenerateInteraction for ${t}`)}catch(o){Pe.error(`Failed to regenerate response: ${String(o)}`),console.error(`[InteractionService] Error regenerating interaction ${t}:`,o)}finally{this._pendingRegenerations.delete(t)}}),Fe.on(cc.regenerateInteractionWithModelRequest,async e=>{const{interactionId:t,modelId:n}=e;if(console.log(`[InteractionService] Received regenerateInteractionWithModelRequest for ${t} with model ${n}`),this._pendingRegenerations.has(t)){console.warn(`[InteractionService] Regeneration already pending for ${t}. Ignoring request.`);return}const r=Ln.getState().interactions.find(l=>l.id===t);if(!r){Pe.error(`Regeneration failed: Interaction ${t} not found.`),console.warn(`[InteractionService] Regeneration request for unknown interaction ${t}`);return}const i=Ln.getState();if(i.status==="streaming"){Pe.info("Cannot regenerate while another response is streaming.");return}const a=i.interactions.filter(l=>l.conversationId===r.conversationId&&l.parentId===null&&(l.type==="message.user_assistant"||l.type==="message.assistant_regen")).sort((l,c)=>l.index-c.index),o=a.length>0?a[a.length-1]:null;if((o==null?void 0:o.id)!==t){Pe.info("Can only regenerate the last response in the conversation.");return}try{this._pendingRegenerations.add(t);const l=To.getState(),c=l.modelId;console.log(`[InteractionService] Temporarily setting model to ${n} for regeneration`),l.setModelId(n);try{console.log(`[InteractionService] Starting ConversationService.regenerateInteraction for ${t} with model ${n}`),await fx.regenerateInteraction(t),console.log(`[InteractionService] Finished ConversationService.regenerateInteraction for ${t}`)}finally{console.log(`[InteractionService] Restoring original model ${c}`),l.setModelId(c)}}catch(l){Pe.error(`Failed to regenerate response: ${String(l)}`),console.error(`[InteractionService] Error regenerating interaction ${t}:`,l)}finally{this._pendingRegenerations.delete(t)}}),Fe.on(cc.raceInteractionRequest,async e=>{const{interactionId:t,modelIds:n,staggerMs:r}=e;console.log(`[InteractionService] Received raceInteractionRequest for ${t} with ${n.length} models`);const i=Ln.getState().interactions.find(c=>c.id===t);if(!i){Pe.error(`Race failed: Interaction ${t} not found.`),console.warn(`[InteractionService] Race request for unknown interaction ${t}`);return}const s=Ln.getState();if(s.status==="streaming"){Pe.info("Cannot start race while another response is streaming.");return}const o=s.interactions.filter(c=>c.conversationId===i.conversationId&&c.parentId===null&&(c.type==="message.user_assistant"||c.type==="message.assistant_regen")).sort((c,u)=>c.index-u.index),l=o.length>0?o[o.length-1]:null;if((l==null?void 0:l.id)!==t){Pe.info("Can only race from the last response in the conversation.");return}if(n.length<2){Pe.error("Need at least 2 models to race");return}try{const c=To.getState(),u=c.modelId;console.log(`[InteractionService] Starting race with ${n.length} models`),Pe.info(`Starting race with ${n.length} models...`);const d=n.map((b,v)=>new Promise(x=>{setTimeout(async()=>{try{c.setModelId(b),console.log(`[InteractionService] Starting race participant ${v+1}/${n.length} with model ${b}`),await fx.regenerateInteraction(t),console.log(`[InteractionService] Race participant ${v+1} finished`),x({success:!0,modelId:b,index:v})}catch(w){console.error(`[InteractionService] Race participant ${v+1} failed:`,w),x({success:!1,modelId:b,index:v,error:w})}},v*r)})),h=await Promise.all(d);c.setModelId(u);const m=h.filter(b=>b.success).length,y=h.length-m;m>0?Pe.success(`Race completed! ${m} models responded${y>0?`, ${y} failed`:""}`):Pe.error(`Race failed: All ${n.length} models failed to respond`)}catch(c){Pe.error(`Race failed: ${String(c)}`),console.error("[InteractionService] Error during race:",c)}}),Fe.on(cc.copyCodeBlockRequest,async e=>{const{content:t,interactionId:n,codeBlockId:r,language:i}=e;if(!t||t.trim()===""){Pe.info("No code to copy.");return}try{await navigator.clipboard.writeText(t),Pe.success(`Code block ${i?`(${i}) `:""}copied!`),console.log(`[InteractionService] Code block copied. InteractionID: ${n}, CodeBlockID: ${r}, Language: ${i}`)}catch(s){Pe.error("Failed to copy code block."),console.error("[InteractionService] Error copying code block:",s)}})},async startInteraction(e,t,n,r="message.user_assistant"){var I,O,L,P,V,F,J,U,G,$;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const i=await SC(B0.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(i===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const s=i&&typeof i=="object"?i.prompt:e,a=Us(),o=new AbortController;this._activeControllers.set(a,o),this._streamingToolData.set(a,{calls:[],results:[]}),this._firstChunkTimestamps.delete(a),this._interactionStartTimes.delete(a);const l=Ln.getState(),u=l.interactions.filter(ne=>ne.conversationId===t),d=r==="conversation.title_generation"?-1:u.reduce((ne,W)=>Math.max(ne,W.index),-1)+1,h=null,m=performance.now();this._interactionStartTimes.set(a,m);const y={id:a,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...s.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:d,parentId:h};r!=="conversation.title_generation"?(l._addInteractionToState(y),l._addStreamingId(a)):(l._addInteractionToState(y),l._addStreamingId(a),console.log(`[InteractionService] Added title generation interaction ${a} to state.`)),Mt.saveInteraction({...y}).catch(ne=>{console.error(`[InteractionService] Failed initial persistence for ${a}`,ne)}),Fe.emit(Zn.started,{interactionId:a,conversationId:t,type:y.type});const b=(I=s.metadata)==null?void 0:I.modelId;if(!b)return this._finalizeInteraction(a,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:v,modelId:x}=hc(b);if(!v||!x)return this._finalizeInteraction(a,"ERROR",new Error(`Invalid combined model ID format: ${b}`),r),null;const w=Mr.getState().dbProviderConfigs.find(ne=>ne.id===v);if(!w)return this._finalizeInteraction(a,"ERROR",new Error(`Provider configuration not found for ID: ${v}`),r),null;const S=Mr.getState().getApiKeyForProvider(v),C=JO(w,x,S);if(!C)return this._finalizeInteraction(a,"ERROR",new Error(`Failed to instantiate model instance ${b} from provider ${w.name}`),r),null;console.log(`[InteractionService] Using model instance for ${b}`);const k=r!=="conversation.title_generation"?(((O=s.metadata)==null?void 0:O.enabledTools)??[]).reduce((ne,W)=>{const ee=ll.getState().getRegisteredTools()[W];if(ee!=null&&ee.implementation){const re={...ee.definition};re.execute=async de=>{const oe=Ln.getState().currentConversationId,Ie=oe?zn.getState().getConversationById(oe):null;let je;Ie&&Ie.projectId?typeof Ie.projectId=="string"?je=Ie.projectId:(console.warn(`[InteractionService] conversation.projectId for conversation ${oe} is not a string (type: ${typeof Ie.projectId}). Defaulting VFS key to "orphan". Value:`,Ie.projectId),je="orphan"):je="orphan";let Me;try{if(Fe.emit(dn.initializeVFSRequest,{vfsKey:je,options:{force:!0}}),await new Promise(Se=>setTimeout(Se,100)),Me=Ki.getState().fs,Ki.getState().configuredVfsKey!==je||!Me)throw new Error(`Filesystem for key "${je}" not ready after request.`)}catch(Se){return{_isError:!0,error:`Filesystem error: ${Se.message}`}}try{const Se=awe(),qe=ee.definition.parameters.parse(de),Qe=ee.implementation,We={...Se,fsInstance:Me};return await Qe(qe,We)}catch(Se){const qe=Se instanceof Error?Se.message:String(Se);return Se instanceof wu?{_isError:!0,error:`Invalid arguments: ${Se.errors.map(Qe=>`${Qe.path.join(".")} (${Qe.message})`).join(", ")}`}:{_isError:!0,error:qe}}},ne[W]=re}return ne},{}):void 0,A=((L=s.parameters)==null?void 0:L.maxSteps)??gr.getState().toolMaxSteps,R={model:C,messages:s.messages,abortSignal:o.signal,system:s.system,temperature:(P=s.parameters)==null?void 0:P.temperature,maxTokens:(V=s.parameters)==null?void 0:V.max_tokens,topP:(F=s.parameters)==null?void 0:F.top_p,topK:(J=s.parameters)==null?void 0:J.top_k,presencePenalty:(U=s.parameters)==null?void 0:U.presence_penalty,frequencyPenalty:(G=s.parameters)==null?void 0:G.frequency_penalty,maxSteps:A,...k&&Object.keys(k).length>0&&{tools:k},...(($=s.parameters)==null?void 0:$.providerOptions)&&{providerOptions:s.parameters.providerOptions},toolChoice:s.toolChoice},N={onChunk:ne=>this._handleChunk(a,ne),onReasoningChunk:ne=>this._handleReasoningChunk(a,ne),onToolCall:ne=>this._handleToolCall(a,ne),onToolResult:ne=>this._handleToolResult(a,ne),onFinish:ne=>this._handleFinish(a,ne,r),onError:ne=>this._handleError(a,ne,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${a}`),NVe.executeInteraction(a,R,N).catch(ne=>{console.error(`[InteractionService] Error during AIService.executeInteraction for ${a}:`,ne);const W=Ln.getState().interactions.find(te=>te.id===a);W&&W.status==="STREAMING"&&this._finalizeInteraction(a,"ERROR",ne instanceof Error?ne:new Error(String(ne)),r)}),y},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),Pe.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=Ln.getState(),r=n.interactions.find(i=>i.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await SC(B0.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const i=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;Ln.getState().appendInteractionResponseChunk(e,i),Fe.emit(Zn.streamChunk,{interactionId:e,chunk:i})}},_handleReasoningChunk(e,t){Ln.getState().appendReasoningChunk(e,t)},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),Ln.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),Ln.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",i){var k;const s=Ln.getState(),a=s.interactions.find(A=>A.id===e);if(!a||a.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=s.activeStreamBuffers[e]??"",l=s.activeReasoningBuffers[e]??"",c=this._streamingToolData.get(e)||{calls:[],results:[]},u=(a==null?void 0:a.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}, Reasoning Length: ${l.length}`);const d=performance.now(),h=this._interactionStartTimes.get(e),m=this._firstChunkTimestamps.get(e),y=h?Math.round(d-h):void 0,b=h&&m?Math.round(m-h):void 0,v=(i==null?void 0:i.reasoning)??l,x={status:t,endedAt:new Date,response:o||null,metadata:{...u,...(i==null?void 0:i.usage)&&{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens,totalTokens:i.usage.totalTokens},...(i==null?void 0:i.providerMetadata)&&{providerMetadata:i.providerMetadata},toolCalls:c.calls,toolResults:c.results,reasoning:v||void 0,timeToFirstToken:b,generationTime:y,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&x.response&&typeof x.response=="string"){const A=x.response.trim().replace(/^"|"$/g,"");A&&a&&(console.log(`[InteractionService] Updating conversation ${a.conversationId} title to: "${A}"`),Fe.emit(Yn.updateConversationRequest,{id:a.conversationId,updates:{title:A}}))}s._updateInteractionInState(e,x),s._removeStreamingId(e);const w=Ln.getState().interactions.find(A=>A.id===e);w?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((k=w.response)==null?void 0:k.length)??0}`),Mt.saveInteraction({...w}).catch(A=>{console.error(`[InteractionService] Failed final persistence for ${e}`,A)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let S=[],C=[];try{S=c.calls.map(A=>JSON.parse(A)),C=c.results.map(A=>JSON.parse(A))}catch(A){console.error("[InteractionService] Failed to parse tool strings for event emitter:",A)}Fe.emit(Zn.completed,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:S,toolResults:C}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},Ok=Ve.memo(({interactionId:e,className:t,renderSlot:n,showPrompt:r=!0})=>{var F;const{interaction:i,interactionStatus:s}=Ln(Sn(J=>{const U=J.interactions.find(G=>G.id===e);return{interaction:U,interactionStatus:U==null?void 0:U.status}})),a=gr(J=>J.streamingRenderFPS),[o,l]=T.useState(""),[c,u]=T.useState(""),[d,h]=T.useState(!0),[m,y]=T.useState(!1),b=T.useRef(null),v=T.useRef(0),x=T.useRef(null);T.useEffect(()=>{const J=1e3/a;let U=!0;const G=$=>{if(!U)return;if(Ln.getState().streamingInteractionIds.includes(e)){if($-v.current>=J){const W=Ln.getState().activeStreamBuffers[e]??"",te=Ln.getState().activeReasoningBuffers[e]??"";l(W),u(te),v.current=$}b.current=requestAnimationFrame(G)}else{const W=Ln.getState().activeStreamBuffers[e]??"",te=Ln.getState().activeReasoningBuffers[e]??"";l(W),u(te),b.current=null}};return b.current=requestAnimationFrame(G),()=>{U=!1,b.current&&(cancelAnimationFrame(b.current),b.current=null)}},[e,a]),T.useEffect(()=>{if(s&&s!=="STREAMING"){const J=Ln.getState().activeStreamBuffers[e]??"",U=Ln.getState().activeReasoningBuffers[e]??"";l(J),u(U),b.current&&(cancelAnimationFrame(b.current),b.current=null)}},[s,e]);const{dbProviderConfigs:w,getAllAvailableModelDefsForProvider:S}=Mr(Sn(J=>({dbProviderConfigs:J.dbProviderConfigs,getAllAvailableModelDefsForProvider:J.getAllAvailableModelDefsForProvider}))),C=T.useMemo(()=>{var ee;const J=(ee=i==null?void 0:i.metadata)==null?void 0:ee.modelId;if(!J)return"Loading Model...";const{providerId:U,modelId:G}=hc(J);if(!U||!G)return J;const $=w.find(re=>re.id===U),ne=($==null?void 0:$.name)??U,te=S(U).find(re=>re.id===G);return`${(te==null?void 0:te.name)??G} (${ne})`},[(F=i==null?void 0:i.metadata)==null?void 0:F.modelId,w,S]),k=T.useCallback(()=>h(J=>!J),[]),A=T.useCallback(()=>{y(!1)},[]),R=T.useCallback(()=>{y(!0)},[]),N=T.useCallback(()=>{m?A():R()},[m,A,R]);if(!i)return r?p.jsxs("div",{className:Ye("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",t),children:[p.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsxs("div",{className:"space-y-2 mt-2",children:[p.jsx("div",{className:"h-4 bg-muted rounded w-full"}),p.jsx("div",{className:"h-4 bg-muted rounded w-5/6"}),p.jsx("div",{className:"h-4 bg-muted rounded w-full"})]})]})]}):p.jsxs("div",{className:Ye("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",t),children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsxs("div",{className:"space-y-2 mt-2",children:[p.jsx("div",{className:"h-4 bg-muted rounded w-full"}),p.jsx("div",{className:"h-4 bg-muted rounded w-5/6"}),p.jsx("div",{className:"h-4 bg-muted rounded w-full"})]})]});const I=()=>{qp.abortInteraction(e)},O=n==null?void 0:n("header-actions",i,{isFolded:m,toggleFold:N}),L=n==null?void 0:n("actions",i),P=n==null?void 0:n("content",i),V=n==null?void 0:n("menu",i);return p.jsxs("div",{ref:x,className:Ye("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors",s==="ERROR"?"border-destructive/50 bg-destructive/5":s==="STREAMING"?"border-primary/30":"border-border",t),children:[r&&i.prompt&&p.jsx(NT,{turnData:i.prompt,timestamp:i.startedAt,isAssistantComplete:!1}),p.jsxs("div",{className:Ye("relative group/assistant",r&&i.prompt?"mt-3 pt-3 border-t border-border/50":""),children:[V,p.jsxs("div",{className:Ye("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(uH,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsx("div",{className:"flex flex-col min-w-0",children:p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",C,")"]}),p.jsx("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:O})]})})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:"Streaming..."})})]}),!m&&p.jsxs(p.Fragment,{children:[P,c&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:k,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(kh,{className:"h-3.5 w-3.5"})," Reasoning (Streaming)"]}),p.jsx("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:p.jsx(In,{tooltipText:d?"Show Reasoning":"Hide Reasoning",onClick:J=>{J.stopPropagation(),k()},"aria-label":d?"Show reasoning":"Hide reasoning",icon:d?p.jsx(Tc,{}):p.jsx(Eh,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})})]}),!d&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:c})]}),p.jsx(Uze,{interactionId:e,markdownContent:o,isStreaming:!0})]}),m&&p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:N,children:[c?"[Reasoning] ":"",o&&typeof o=="string"?`"${o.substring(0,80)}${o.length>80?"...":""}"`:"[Streaming...]"]})]}),p.jsxs("div",{className:Ye("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:[L,p.jsx(qze,{onStop:I,"aria-label":"Stop Generation"})]})]})});Ok.displayName="StreamingInteractionCard";const QU=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,DVe=({displayModelName:e,timeAgo:t,promptTokens:n,completionTokens:r,timeToFirstToken:i,generationTime:s,headerActionsSlot:a})=>{const o=n!==void 0&&r!==void 0?n+r:void 0;return p.jsxs("div",{className:Ye("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(uH,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),p.jsx("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:a})]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[o!==void 0&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsxs(wr,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(vme,{className:"h-3 w-3"}),p.jsx("span",{children:o.toLocaleString()})]}),p.jsxs(_r,{side:"bottom",children:["Tokens: ",n??"?"," (Prompt) +"," ",r??"?"," (Completion) = ",o]})]})}),i!==void 0&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsxs(wr,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(b0e,{className:"h-3 w-3"}),p.jsx("span",{children:QU(i)})]}),p.jsx(_r,{side:"bottom",children:"Time to First Token"})]})}),s!==void 0&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsxs(wr,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(hme,{className:"h-3 w-3"}),p.jsx("span",{children:QU(s)})]}),p.jsx(_r,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t})})]})},FVe=({markdownContent:e})=>{const t=nT(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const i=n;return p.jsx(Ry,{lang:i.lang,code:i.code,filepath:i.filepath},`code-${r}`)}else if(n.type==="mermaid"){const i=n;return p.jsx(k6,{code:i.code},`mermaid-${r}`)}return null})}):null},LVe=({interactionId:e,response:t,toolCalls:n,toolResults:r,reasoning:i,isError:s,errorMessage:a,isFolded:o,toggleFold:l})=>{const[c,u]=T.useState(!0),[d,h]=T.useState(!1),m=ll(Sn(k=>Object.values(k.canvasControls))),y=T.useCallback((k,A)=>m.filter(R=>R.type==="tool-call-step"&&R.targetSlot===k&&R.renderer).map(R=>R.renderer?p.jsx(Ve.Fragment,{children:R.renderer(A)},R.id):null).filter(Boolean),[m]),b=T.useMemo(()=>{if(!n)return[];const k=n.map(R=>JSON.parse(R)),A=(r==null?void 0:r.map(R=>JSON.parse(R)))??[];return k.map(R=>{const N=A.find(I=>I.toolCallId===R.toolCallId);return{call:R,result:N}})},[n,r]),v=T.useCallback(()=>u(k=>!k),[]),x=T.useCallback(async()=>{if(i)try{await navigator.clipboard.writeText(i),h(!0),Pe.success("Reasoning copied!"),setTimeout(()=>h(!1),1500)}catch(k){Pe.error("Failed to copy reasoning."),console.error("Clipboard copy failed for reasoning:",k)}},[i]),w=!!i,S=t&&(typeof t!="string"||t.trim().length>0),C=b&&b.length>0;return o?p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:l,children:[w?"[Reasoning] ":"",C?`[${b==null?void 0:b.length} Tool Call(s)] `:"",S&&typeof t=="string"?`"${t.substring(0,80)}${t.length>80?"...":""}"`:C||w?"":"[No text response]"]}):p.jsxs(p.Fragment,{children:[s&&a&&p.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[p.jsx("p",{className:"font-semibold",children:"Error:"}),p.jsx("p",{children:a})]}),w&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:v,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(kh,{className:"h-3.5 w-3.5"})," Reasoning"]}),p.jsxs("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(In,{tooltipText:"Copy Reasoning",onClick:k=>{k.stopPropagation(),x()},"aria-label":"Copy reasoning",icon:d?p.jsx(Qa,{className:"text-green-500"}):p.jsx(nE,{}),className:"h-5 w-5 text-muted-foreground"}),p.jsx(In,{tooltipText:c?"Show Reasoning":"Hide Reasoning",onClick:k=>{k.stopPropagation(),v()},"aria-label":c?"Show reasoning":"Hide reasoning",icon:c?p.jsx(Tc,{}):p.jsx(Eh,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]})]}),!c&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:i})]}),b.map(({call:k,result:A},R)=>{const N={interactionId:e,toolCall:k,toolResult:A,canvasContextType:"tool-call-step"};return p.jsx(Ve.Fragment,{children:y("tool-call-content",N)},`tool-step-${k.toolCallId||R}`)}),S&&typeof t=="string"&&p.jsx(FVe,{markdownContent:t,interactionId:e}),!S&&!C&&!w&&!s&&p.jsx("div",{className:"text-xs text-muted-foreground italic p-1",children:"[No text response]"})]})},z4=Ve.memo(({interaction:e,className:t,renderSlot:n,showPrompt:r=!0})=>{var O,L,P,V,F,J,U,G,$,ne,W,te;const[i,s]=T.useState(!1),a=T.useRef(null),o=T.useCallback(()=>{s(!1)},[]),l=T.useCallback(()=>{s(!0)},[]),c=T.useCallback(()=>{i?o():l()},[i,o,l]),{dbProviderConfigs:u,getAllAvailableModelDefsForProvider:d}=Mr(Sn(ee=>({dbProviderConfigs:ee.dbProviderConfigs,getAllAvailableModelDefsForProvider:ee.getAllAvailableModelDefsForProvider}))),h=e.endedAt?wX(new Date(e.endedAt),{addSuffix:!0}):"Processing...",m=T.useMemo(()=>{var Se;const ee=(Se=e.metadata)==null?void 0:Se.modelId;if(!ee)return"Unknown Model";const{providerId:re,modelId:de}=hc(ee);if(!re||!de)return ee;const oe=u.find(qe=>qe.id===re),Ie=(oe==null?void 0:oe.name)??re,Me=d(re).find(qe=>qe.id===de);return`${(Me==null?void 0:Me.name)??de} (${Ie})`},[(O=e.metadata)==null?void 0:O.modelId,u,d]),y=e.status==="COMPLETED",b=y||e.status==="ERROR",v=e.status==="ERROR",x=e.response&&(typeof e.response!="string"||e.response.trim().length>0),w=((L=e.metadata)==null?void 0:L.toolCalls)&&e.metadata.toolCalls.length>0,S=((P=e.metadata)==null?void 0:P.toolResults)&&e.metadata.toolResults.length>0,C=!!((V=e.metadata)!=null&&V.reasoning),k=x||w||S||C,A=n==null?void 0:n("header-actions",e,{isFolded:i,toggleFold:c}),R=n==null?void 0:n("actions",e),N=n==null?void 0:n("content",e),I=n==null?void 0:n("menu",e);return p.jsxs("div",{ref:a,className:Ye("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors hover:bg-muted/50","overflow-wrap-anywhere",v?"border-destructive/50 bg-destructive/5":"border-border",t),children:[r&&e.prompt&&p.jsx(NT,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:y}),p.jsxs("div",{className:Ye("relative group/assistant",r&&e.prompt?"mt-3 pt-3 border-t border-border/50":""),children:[I,p.jsx(DVe,{displayModelName:m,timeAgo:h,isFolded:i,toggleFold:c,canFold:k,promptTokens:(F=e.metadata)==null?void 0:F.promptTokens,completionTokens:(J=e.metadata)==null?void 0:J.completionTokens,timeToFirstToken:(U=e.metadata)==null?void 0:U.timeToFirstToken,generationTime:(G=e.metadata)==null?void 0:G.generationTime,headerActionsSlot:A&&A.length>0?p.jsx(p.Fragment,{children:A}):void 0}),N,p.jsx(LVe,{interactionId:e.id,response:e.response,toolCalls:($=e.metadata)==null?void 0:$.toolCalls,toolResults:(ne=e.metadata)==null?void 0:ne.toolResults,reasoning:(W=e.metadata)==null?void 0:W.reasoning,isError:v,errorMessage:(te=e.metadata)==null?void 0:te.error,isFolded:i,toggleFold:c})]}),b&&R&&R.length>0&&p.jsx("div",{className:Ye("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:R})]})});z4.displayName="InteractionCard";const BVe=({interactionGroup:e,renderSlot:t,activeStreamingInteractionId:n})=>{const[r,i]=T.useState(0);if(!e||e.length===0)return null;if(e.length===1){const a=e[0];return p.jsxs("div",{className:"tab-content pt-0",children:[" ",a.id===n&&a.status==="STREAMING"?p.jsx(Ok,{interactionId:a.id,renderSlot:t,showPrompt:!1},a.id):p.jsx(z4,{interaction:a,renderSlot:t,showPrompt:!1},a.id)]})}const s=e[r];return p.jsxs("div",{className:"response-tabs-container flex flex-col",children:[p.jsxs("div",{className:"tabs-header flex border-b mb-1",children:[" ",e.map((a,o)=>{const l=()=>{var c,u,d;return o===0?(c=a.metadata)!=null&&c.editedResponse?p.jsx(kB,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"}):p.jsx(kB,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"}):(u=a.metadata)!=null&&u.raceTab?p.jsx(yH,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"}):(d=a.metadata)!=null&&d.originalVersion?p.jsx(bH,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"}):p.jsx(ige,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"})};return p.jsxs(St,{variant:"ghost",size:"sm",onClick:()=>i(o),className:`mr-0.5 rounded-b-none flex items-center px-2 py-1 text-xs font-medium hover:bg-muted/50 focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 transition-colors duration-150 ease-in-out                 ${r===o?"border-b-2 border-primary text-primary":"border-b-2 border-transparent text-muted-foreground hover:text-foreground"}`,children:[l(),o+1," "]},a.id)})]}),p.jsxs("div",{className:"tab-content pt-1",children:[" ",s&&(s.id===n&&s.status==="STREAMING"?p.jsx(Ok,{interactionId:s.id,renderSlot:t,showPrompt:!1},s.id):p.jsx(z4,{interaction:s,renderSlot:t,showPrompt:!1},s.id))]})]})};var $Ve=T.createContext(void 0);function Xy(e){const t=T.useContext($Ve);return e||t||"ltr"}function Aw(e,[t,n]){return Math.min(n,Math.max(t,e))}function zVe(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var F6="ScrollArea",[dse,Jdt]=Vs(F6),[UVe,Yl]=dse(F6),fse=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...a}=e,[o,l]=T.useState(null),[c,u]=T.useState(null),[d,h]=T.useState(null),[m,y]=T.useState(null),[b,v]=T.useState(null),[x,w]=T.useState(0),[S,C]=T.useState(0),[k,A]=T.useState(!1),[R,N]=T.useState(!1),I=Tn(t,L=>l(L)),O=Xy(i);return p.jsx(UVe,{scope:n,type:r,dir:O,scrollHideDelay:s,scrollArea:o,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:k,onScrollbarXEnabledChange:A,scrollbarY:b,onScrollbarYChange:v,scrollbarYEnabled:R,onScrollbarYEnabledChange:N,onCornerWidthChange:w,onCornerHeightChange:C,children:p.jsx(sr.div,{dir:O,...a,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});fse.displayName=F6;var hse="ScrollAreaViewport",pse=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=e,a=Yl(hse,n),o=T.useRef(null),l=Tn(t,o,a.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(sr.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});pse.displayName=hse;var Ou="ScrollAreaScrollbar",mse=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yl(Ou,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,o=e.orientation==="horizontal";return T.useEffect(()=>(o?s(!0):a(!0),()=>{o?s(!1):a(!1)}),[o,s,a]),i.type==="hover"?p.jsx(qVe,{...r,ref:t,forceMount:n}):i.type==="scroll"?p.jsx(VVe,{...r,ref:t,forceMount:n}):i.type==="auto"?p.jsx(gse,{...r,ref:t,forceMount:n}):i.type==="always"?p.jsx(L6,{...r,ref:t}):null});mse.displayName=Ou;var qVe=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yl(Ou,e.__scopeScrollArea),[s,a]=T.useState(!1);return T.useEffect(()=>{const o=i.scrollArea;let l=0;if(o){const c=()=>{window.clearTimeout(l),a(!0)},u=()=>{l=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(sa,{present:n||s,children:p.jsx(gse,{"data-state":s?"visible":"hidden",...r,ref:t})})}),VVe=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yl(Ou,e.__scopeScrollArea),s=e.orientation==="horizontal",a=PT(()=>l("SCROLL_END"),100),[o,l]=zVe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,i.scrollHideDelay,l]),T.useEffect(()=>{const c=i.viewport,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const m=c[u];d!==m&&(l("SCROLL"),a()),d=m};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,s,l,a]),p.jsx(sa,{present:n||o!=="hidden",children:p.jsx(L6,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Wt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Wt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),gse=T.forwardRef((e,t)=>{const n=Yl(Ou,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,a]=T.useState(!1),o=e.orientation==="horizontal",l=PT(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;a(o?c:u)}},10);return py(n.viewport,l),py(n.content,l),p.jsx(sa,{present:r||s,children:p.jsx(L6,{"data-state":s?"visible":"hidden",...i,ref:t})})}),L6=T.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Yl(Ou,e.__scopeScrollArea),s=T.useRef(null),a=T.useRef(0),[o,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=wse(o.viewport,o.content),u={...r,sizes:o,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function d(h,m){return ZVe(h,a.current,o,m)}return n==="horizontal"?p.jsx(WVe,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollLeft,m=eq(h,o,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=d(h,i.dir))}}):n==="vertical"?p.jsx(HVe,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollTop,m=eq(h,o);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=d(h))}}):null}),WVe=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=Yl(Ou,e.__scopeScrollArea),[a,o]=T.useState(),l=T.useRef(null),c=Tn(t,l,s.onScrollbarXChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(bse,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":OT(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),Sse(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Dk(a.paddingLeft),paddingEnd:Dk(a.paddingRight)}})}})}),HVe=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=Yl(Ou,e.__scopeScrollArea),[a,o]=T.useState(),l=T.useRef(null),c=Tn(t,l,s.onScrollbarYChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(bse,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":OT(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),Sse(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Dk(a.paddingTop),paddingEnd:Dk(a.paddingBottom)}})}})}),[GVe,yse]=dse(Ou),bse=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=e,m=Yl(Ou,n),[y,b]=T.useState(null),v=Tn(t,I=>b(I)),x=T.useRef(null),w=T.useRef(""),S=m.viewport,C=r.content-r.viewport,k=_i(u),A=_i(l),R=PT(d,10);function N(I){if(x.current){const O=I.clientX-x.current.left,L=I.clientY-x.current.top;c({x:O,y:L})}}return T.useEffect(()=>{const I=O=>{const L=O.target;(y==null?void 0:y.contains(L))&&k(O,C)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[S,y,C,k]),T.useEffect(A,[r,A]),py(y,R),py(m.content,R),p.jsx(GVe,{scope:n,scrollbar:y,hasThumb:i,onThumbChange:_i(s),onThumbPointerUp:_i(a),onThumbPositionChange:A,onThumbPointerDown:_i(o),children:p.jsx(sr.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Wt(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),x.current=y.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),N(I))}),onPointerMove:Wt(e.onPointerMove,N),onPointerUp:Wt(e.onPointerUp,I=>{const O=I.target;O.hasPointerCapture(I.pointerId)&&O.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),Pk="ScrollAreaThumb",vse=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=yse(Pk,e.__scopeScrollArea);return p.jsx(sa,{present:n||i.hasThumb,children:p.jsx(KVe,{ref:t,...r})})}),KVe=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=Yl(Pk,n),a=yse(Pk,n),{onThumbPositionChange:o}=a,l=Tn(t,d=>a.onThumbChange(d)),c=T.useRef(void 0),u=PT(()=>{c.current&&(c.current(),c.current=void 0)},100);return T.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(u(),!c.current){const m=XVe(d,o);c.current=m,o()}};return o(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,u,o]),p.jsx(sr.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Wt(e.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),y=d.clientX-m.left,b=d.clientY-m.top;a.onThumbPointerDown({x:y,y:b})}),onPointerUp:Wt(e.onPointerUp,a.onThumbPointerUp)})});vse.displayName=Pk;var B6="ScrollAreaCorner",xse=T.forwardRef((e,t)=>{const n=Yl(B6,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(YVe,{...e,ref:t}):null});xse.displayName=B6;var YVe=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Yl(B6,n),[s,a]=T.useState(0),[o,l]=T.useState(0),c=!!(s&&o);return py(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),py(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),a(u)}),c?p.jsx(sr.div,{...r,ref:t,style:{width:s,height:o,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Dk(e){return e?parseInt(e,10):0}function wse(e,t){const n=e/t;return isNaN(n)?0:n}function OT(e){const t=wse(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function ZVe(e,t,n,r="ltr"){const i=OT(n),s=i/2,a=t||s,o=i-a,l=n.scrollbar.paddingStart+a,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return _se([l,c],d)(e)}function eq(e,t,n="ltr"){const r=OT(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,a=t.content-t.viewport,o=s-r,l=n==="ltr"?[0,a]:[a*-1,0],c=Aw(e,l);return _se([0,a],[0,o])(c)}function _se(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Sse(e,t){return e>0&&e<t}var XVe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},a=n.left!==s.left,o=n.top!==s.top;(a||o)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function PT(e,t){const n=_i(e),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function py(e,t){const n=_i(t);Ji(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}var JVe=fse,QVe=pse,eWe=xse;function sl({className:e,children:t,...n}){return p.jsxs(JVe,{"data-slot":"scroll-area",className:Ye("relative",e),...n,children:[p.jsx(QVe,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),p.jsx(tWe,{}),p.jsx(eWe,{})]})}function tWe({className:e,orientation:t="vertical",...n}){return p.jsx(mse,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Ye("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:p.jsx(vse,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Ur({className:e,...t}){return p.jsx("div",{"data-slot":"skeleton",className:Ye("bg-accent animate-pulse rounded-md",e),...t})}const nWe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})};function DT({className:e,...t}){return p.jsx("div",{"data-slot":"card",className:Ye("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function FT({className:e,...t}){return p.jsx("div",{"data-slot":"card-header",className:Ye("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function LT({className:e,...t}){return p.jsx("div",{"data-slot":"card-title",className:Ye("leading-none font-semibold",e),...t})}function $6({className:e,...t}){return p.jsx("div",{"data-slot":"card-description",className:Ye("text-muted-foreground text-sm",e),...t})}function BT({className:e,...t}){return p.jsx("div",{"data-slot":"card-content",className:Ye("px-6",e),...t})}const Nr={sidebarVisibilityChanged:"ui.sidebar.visibility.changed",chatControlPanelVisibilityChanged:"ui.chat.control.panel.visibility.changed",promptControlPanelVisibilityChanged:"ui.prompt.control.panel.visibility.changed",globalLoadingChanged:"ui.global.loading.changed",globalErrorChanged:"ui.global.error.changed",focusInputFlagChanged:"ui.focus.input.flag.changed",modalStateChanged:"ui.modal.state.changed",toggleSidebarRequest:"ui.toggle.sidebar.request",toggleChatControlPanelRequest:"ui.toggle.chat.control.panel.request",togglePromptControlPanelRequest:"ui.toggle.prompt.control.panel.request",setGlobalLoadingRequest:"ui.set.global.loading.request",setGlobalErrorRequest:"ui.set.global.error.request",setFocusInputFlagRequest:"ui.set.focus.input.flag.request",openModalRequest:"ui.modal.open.request",closeModalRequest:"ui.modal.close.request",contextChanged:"ui.legacy.contextChanged"},rWe=({title:e,description:t,icon:n,onClick:r})=>p.jsxs(DT,{className:"hover:border-primary/50 hover:bg-muted/30 transition-all cursor-pointer group",onClick:r,children:[p.jsxs(FT,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsxs(LT,{className:"text-sm font-medium flex items-center gap-2",children:[n," ",e]}),p.jsx(Lpe,{className:"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-transform"})]}),p.jsx(BT,{children:p.jsx("p",{className:"text-xs text-muted-foreground",children:t})})]}),Cse=()=>{const e=(r,i)=>{Fe.emit(Nr.openModalRequest,{modalId:"settingsModal",initialTab:r,initialSubTab:i})},t=()=>{Fe.emit(Nr.openModalRequest,{modalId:"core-vfs-modal-panel"})},n=[{title:"Configure Theme",description:"Customize colors, fonts, and code block appearance.",icon:p.jsx(z2,{className:"h-4 w-4 text-purple-500"}),onClick:()=>e("theme")},{title:"Manage Rules & Tags",description:"Define reusable prompt snippets and organize them.",icon:p.jsx(K3,{className:"h-4 w-4 text-blue-500"}),onClick:()=>e("rules-tags")},{title:"Add Files",description:"Upload or manage files in the virtual filesystem.",icon:p.jsx($O,{className:"h-4 w-4 text-cyan-500"}),onClick:t},{title:"Add Provider",description:"Connect to AI services like OpenAI, Ollama, etc.",icon:p.jsx(U2,{className:"h-4 w-4 text-green-500"}),onClick:()=>e("providers","providers-config")},{title:"Add API Key",description:"Store API keys securely in your browser.",icon:p.jsx(kx,{className:"h-4 w-4 text-amber-500"}),onClick:()=>e("providers","api-keys")},{title:"Setup Git Sync",description:"Configure repositories to sync conversations with Git.",icon:p.jsx(xc,{className:"h-4 w-4 text-orange-500"}),onClick:()=>e("git")}];return p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl w-full pt-4",children:n.map(r=>p.jsx(rWe,{title:r.title,description:r.description,icon:r.icon,onClick:r.onClick},r.title))})},tq=()=>p.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[p.jsx(nWe,{className:"h-16 w-16 text-muted-foreground mb-4"}),p.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),p.jsx("p",{className:"text-muted-foreground max-w-md mb-8",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat. You can also explore these setup options:"}),p.jsx(Cse,{})]}),z6=T.createContext({});function U6(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const q6=typeof window<"u",kse=q6?T.useLayoutEffect:T.useEffect,$T=T.createContext(null),V6=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class iWe extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=r instanceof HTMLElement&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function sWe({children:e,isPresent:t,anchorX:n}){const r=T.useId(),i=T.useRef(null),s=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=T.useContext(V6);return T.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:u,right:d}=s.current;if(t||!i.current||!o||!l)return;const h=n==="left"?`left: ${u}`:`right: ${d}`;i.current.dataset.motionPopId=r;const m=document.createElement("style");return a&&(m.nonce=a),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(m)&&document.head.removeChild(m)}},[t]),p.jsx(iWe,{isPresent:t,childRef:i,sizeRef:s,children:T.cloneElement(e,{ref:i})})}const aWe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:o})=>{const l=U6(oWe),c=T.useId();let u=!0,d=T.useMemo(()=>(u=!1,{id:c,initial:t,isPresent:n,custom:i,onExitComplete:h=>{l.set(h,!0);for(const m of l.values())if(!m)return;r&&r()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[n,l,r]);return s&&u&&(d={...d}),T.useMemo(()=>{l.forEach((h,m)=>l.set(m,!1))},[n]),T.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(e=p.jsx(sWe,{isPresent:n,anchorX:o,children:e})),p.jsx($T.Provider,{value:d,children:e})};function oWe(){return new Map}function Ese(e=!0){const t=T.useContext($T);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=T.useId();T.useEffect(()=>{if(e)return i(s)},[e]);const a=T.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}const US=e=>e.key||"";function nq(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const lWe=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:o="left"})=>{const[l,c]=Ese(a),u=T.useMemo(()=>nq(e),[e]),d=a&&!l?[]:u.map(US),h=T.useRef(!0),m=T.useRef(u),y=U6(()=>new Map),[b,v]=T.useState(u),[x,w]=T.useState(u);kse(()=>{h.current=!1,m.current=u;for(let k=0;k<x.length;k++){const A=US(x[k]);d.includes(A)?y.delete(A):y.get(A)!==!0&&y.set(A,!1)}},[x,d.length,d.join("-")]);const S=[];if(u!==b){let k=[...u];for(let A=0;A<x.length;A++){const R=x[A],N=US(R);d.includes(N)||(k.splice(A,0,R),S.push(R))}return s==="wait"&&S.length&&(k=S),w(nq(k)),v(u),null}const{forceRender:C}=T.useContext(z6);return p.jsx(p.Fragment,{children:x.map(k=>{const A=US(k),R=a&&!l?!1:u===x||d.includes(A),N=()=>{if(y.has(A))y.set(A,!0);else return;let I=!0;y.forEach(O=>{O||(I=!1)}),I&&(C==null||C(),w(m.current),a&&(c==null||c()),r&&r())};return p.jsx(aWe,{isPresent:R,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,onExitComplete:R?void 0:N,anchorX:o,children:k},A)})})},qS=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],rq={value:null};function cWe(e,t){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){a.has(d)&&(u.schedule(d),e()),l++,d(o)}const u={schedule:(d,h=!1,m=!1)=>{const b=m&&i?n:r;return h&&a.add(d),b.has(d)||b.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),t&&rq.value&&rq.value.frameloop[t].push(l),l=0,n.clear(),i=!1,s&&(s=!1,u.process(d))}};return u}const zd={},uWe=40;function Tse(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=qS.reduce((S,C)=>(S[C]=cWe(s,t?C:void 0),S),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:m,postRender:y}=a,b=()=>{const S=zd.useManualTiming?i.timestamp:performance.now();n=!1,zd.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,uWe),1)),i.timestamp=S,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),m.process(i),y.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(b))},v=()=>{n=!0,r=!0,i.isProcessing||e(b)};return{schedule:qS.reduce((S,C)=>{const k=a[C];return S[C]=(A,R=!1,N=!1)=>(n||v(),k.schedule(A,R,N)),S},{}),cancel:S=>{for(let C=0;C<qS.length;C++)a[qS[C]].cancel(S)},state:i,steps:a}}const Bl=e=>e,{schedule:Xi,cancel:wh,state:ma,steps:HI}=Tse(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bl,!0),Ase=T.createContext({strict:!1}),iq={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},my={};for(const e in iq)my[e]={isEnabled:t=>iq[e].some(n=>!!t[n])};function dWe(e){for(const t in e)my[t]={...my[t],...e[t]}}const fWe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fk(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||fWe.has(e)}let Rse=e=>!Fk(e);function hWe(e){e&&(Rse=t=>t.startsWith("on")?!Fk(t):e(t))}try{hWe(require("@emotion/is-prop-valid").default)}catch{}function pWe(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(Rse(i)||n===!0&&Fk(i)||!t&&!Fk(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function mWe(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const zT=T.createContext({});function UT(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Rw(e){return typeof e=="string"||Array.isArray(e)}const W6=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],H6=["initial",...W6];function qT(e){return UT(e.animate)||H6.some(t=>Rw(e[t]))}function Nse(e){return!!(qT(e)||e.variants)}function gWe(e,t){if(qT(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Rw(n)?n:void 0,animate:Rw(r)?r:void 0}}return e.inherit!==!1?t:{}}function yWe(e){const{initial:t,animate:n}=gWe(e,T.useContext(zT));return T.useMemo(()=>({initial:t,animate:n}),[sq(t),sq(n)])}function sq(e){return Array.isArray(e)?e.join(" "):e}const bWe=Symbol.for("motionComponentSymbol");function o0(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function vWe(e,t,n){return T.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):o0(n)&&(n.current=r))},[t])}const G6=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xWe="framerAppearId",Mse="data-"+G6(xWe),Ise=T.createContext({}),{schedule:K6}=Tse(queueMicrotask,!1);function wWe(e,t,n,r,i){var b,v;const{visualElement:s}=T.useContext(zT),a=T.useContext(Ase),o=T.useContext($T),l=T.useContext(V6).reducedMotion,c=T.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=T.useContext(Ise);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&_We(c.current,n,i,d);const h=T.useRef(!1);T.useInsertionEffect(()=>{u&&h.current&&u.update(n,o)});const m=n[Mse],y=T.useRef(!!m&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,m))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,m)));return kse(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),K6.render(u.render),y.current&&u.animationState&&u.animationState.animateChanges())}),T.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,m)}),y.current=!1))}),u}function _We(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:jse(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&o0(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function jse(e){if(e)return e.options.allowProjection!==!1?e.projection:jse(e.parent)}let Y6=()=>{};function SWe({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&dWe(e);function s(o,l){let c;const u={...T.useContext(V6),...o,layoutId:CWe(o)},{isStatic:d}=u,h=yWe(o),m=r(o,d);if(!d&&q6){kWe();const y=EWe(u);c=y.MeasureLayout,h.visualElement=wWe(i,m,u,t,y.ProjectionNode)}return p.jsxs(zT.Provider,{value:h,children:[c&&h.visualElement?p.jsx(c,{visualElement:h.visualElement,...u}):null,n(i,o,vWe(m,h.visualElement,l),m,d,h.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const a=T.forwardRef(s);return a[bWe]=i,a}function CWe({layoutId:e}){const t=T.useContext(z6).id;return t&&e!==void 0?t+"-"+e:e}function kWe(e,t){T.useContext(Ase).strict}function EWe(e){const{drag:t,layout:n}=my;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Ose=e=>t=>typeof t=="string"&&t.startsWith(e),Z6=Ose("--"),TWe=Ose("var(--"),X6=e=>TWe(e)?AWe.test(e.split("/*")[0].trim()):!1,AWe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Nw={};function RWe(e){for(const t in e)Nw[t]=e[t],Z6(t)&&(Nw[t].isCSSVariable=!0)}const Jy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qy=new Set(Jy);function Pse(e,{layout:t,layoutId:n}){return Qy.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Nw[e]||e==="opacity")}const Ia=e=>!!(e&&e.getVelocity),Dse=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ud=(e,t,n)=>n>t?t:n<e?e:n,eb={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Mw={...eb,transform:e=>Ud(0,1,e)},VS={...eb,default:1},aq={...eb,transform:Math.round},F1=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),zf=F1("deg"),yu=F1("%"),ir=F1("px"),NWe=F1("vh"),MWe=F1("vw"),oq={...yu,parse:e=>yu.parse(e)/100,transform:e=>yu.transform(e*100)},IWe={rotate:zf,rotateX:zf,rotateY:zf,rotateZ:zf,scale:VS,scaleX:VS,scaleY:VS,scaleZ:VS,skew:zf,skewX:zf,skewY:zf,distance:ir,translateX:ir,translateY:ir,translateZ:ir,x:ir,y:ir,z:ir,perspective:ir,transformPerspective:ir,opacity:Mw,originX:oq,originY:oq,originZ:ir},J6={borderWidth:ir,borderTopWidth:ir,borderRightWidth:ir,borderBottomWidth:ir,borderLeftWidth:ir,borderRadius:ir,radius:ir,borderTopLeftRadius:ir,borderTopRightRadius:ir,borderBottomRightRadius:ir,borderBottomLeftRadius:ir,width:ir,maxWidth:ir,height:ir,maxHeight:ir,top:ir,right:ir,bottom:ir,left:ir,padding:ir,paddingTop:ir,paddingRight:ir,paddingBottom:ir,paddingLeft:ir,margin:ir,marginTop:ir,marginRight:ir,marginBottom:ir,marginLeft:ir,backgroundPositionX:ir,backgroundPositionY:ir,...IWe,zIndex:aq,fillOpacity:Mw,strokeOpacity:Mw,numOctaves:aq},jWe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OWe=Jy.length;function PWe(e,t,n){let r="",i=!0;for(let s=0;s<OWe;s++){const a=Jy[s],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=Dse(o,J6[a]);if(!l){i=!1;const u=jWe[a]||a;r+=`${u}(${c}) `}n&&(t[a]=c)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function Q6(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const c=t[l];if(Qy.has(l)){a=!0;continue}else if(Z6(l)){i[l]=c;continue}else{const u=Dse(c,J6[l]);l.startsWith("origin")?(o=!0,s[l]=u):r[l]=u}}if(t.transform||(a||n?r.transform=PWe(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const e5=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Fse(e,t,n){for(const r in t)!Ia(t[r])&&!Pse(r,n)&&(e[r]=t[r])}function DWe({transformTemplate:e},t){return T.useMemo(()=>{const n=e5();return Q6(n,t,e),Object.assign({},n.vars,n.style)},[t])}function FWe(e,t){const n=e.style||{},r={};return Fse(r,n,e),Object.assign(r,DWe(e,t)),r}function LWe(e,t){const n={},r=FWe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const BWe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function t5(e){return typeof e!="string"||e.includes("-")?!1:!!(BWe.indexOf(e)>-1||/[A-Z]/u.test(e))}const $We={offset:"stroke-dashoffset",array:"stroke-dasharray"},zWe={offset:"strokeDashoffset",array:"strokeDasharray"};function UWe(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?$We:zWe;e[s.offset]=ir.transform(-r);const a=ir.transform(t),o=ir.transform(n);e[s.array]=`${a} ${o}`}function Lse(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,c,u){if(Q6(e,o,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&UWe(d,i,s,a,!1)}const Bse=()=>({...e5(),attrs:{}}),$se=e=>typeof e=="string"&&e.toLowerCase()==="svg";function qWe(e,t,n,r){const i=T.useMemo(()=>{const s=Bse();return Lse(s,t,$se(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};Fse(s,e.style,e),i.style={...s,...i.style}}return i}function VWe(e=!1){return(n,r,i,{latestValues:s},a)=>{const l=(t5(n)?qWe:LWe)(r,s,a,n),c=pWe(r,typeof n=="string",e),u=n!==T.Fragment?{...c,...l,ref:i}:{},{children:d}=r,h=T.useMemo(()=>Ia(d)?d.get():d,[d]);return T.createElement(n,{...u,children:h})}}function lq(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function n5(e,t,n,r){if(typeof t=="function"){const[i,s]=lq(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=lq(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function j2(e){return Ia(e)?e.get():e}function WWe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:HWe(n,r,i,e),renderState:t()}}const zse=e=>(t,n)=>{const r=T.useContext(zT),i=T.useContext($T),s=()=>WWe(e,t,r,i);return n?s():U6(s)};function HWe(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=j2(s[h]);let{initial:a,animate:o}=e;const l=qT(e),c=Nse(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!UT(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const y=n5(e,h[m]);if(y){const{transitionEnd:b,transition:v,...x}=y;for(const w in x){let S=x[w];if(Array.isArray(S)){const C=u?S.length-1:0;S=S[C]}S!==null&&(i[w]=S)}for(const w in b)i[w]=b[w]}}}return i}function r5(e,t,n){var s;const{style:r}=e,i={};for(const a in r)(Ia(r[a])||t.style&&Ia(t.style[a])||Pse(a,e)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const GWe={useVisualState:zse({scrapeMotionValuesFromProps:r5,createRenderState:e5})};function Use(e,t,n){const r=r5(e,t,n);for(const i in e)if(Ia(e[i])||Ia(t[i])){const s=Jy.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const KWe={useVisualState:zse({scrapeMotionValuesFromProps:Use,createRenderState:Bse})};function YWe(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...t5(r)?KWe:GWe,preloadedFeatures:e,useRender:VWe(i),createVisualElement:t,Component:r};return SWe(a)}}function Iw(e,t,n){const r=e.getProps();return n5(r,t,n!==void 0?n:r.custom,e)}const U4=e=>Array.isArray(e);let O2;function ZWe(){O2=void 0}const _o={now:()=>(O2===void 0&&_o.set(ma.isProcessing||zd.useManualTiming?ma.timestamp:performance.now()),O2),set:e=>{O2=e,queueMicrotask(ZWe)}};function i5(e,t){e.indexOf(t)===-1&&e.push(t)}function s5(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class a5{constructor(){this.subscriptions=[]}add(t){return i5(this.subscriptions,t),()=>s5(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function qse(e,t){return t?e*(1e3/t):0}const cq=30,XWe=e=>!isNaN(parseFloat(e));class JWe{constructor(t,n={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var a,o;const s=_o.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current)),i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=_o.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=XWe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new a5);const r=this.events[t].add(n);return t==="change"?()=>{r(),Xi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=_o.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>cq)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cq);return qse(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t;(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jw(e,t){return new JWe(e,t)}function QWe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,jw(n))}function eHe(e){return U4(e)?e[e.length-1]||0:e}function tHe(e,t){const n=Iw(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=eHe(s[a]);QWe(e,a,o)}}function nHe(e){return!!(Ia(e)&&e.add)}function q4(e,t){const n=e.getValue("willChange");if(nHe(n))return n.add(t);if(!n&&zd.WillChange){const r=new zd.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Vse(e){return e.props[Mse]}const rHe=e=>e!==null;function iHe(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(rHe),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const sHe={type:"spring",stiffness:500,damping:25,restSpeed:10},aHe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),oHe={type:"keyframes",duration:.8},lHe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cHe=(e,{keyframes:t})=>t.length>2?oHe:Qy.has(e)?e.startsWith("scale")?aHe(t[1]):sHe:lHe;function uHe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function o5(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const bu=e=>e*1e3,vu=e=>e/1e3,hx=e=>Math.round(e*1e5)/1e5,l5=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dHe(e){return e==null}const fHe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,c5=(e,t)=>n=>!!(typeof n=="string"&&fHe.test(n)&&n.startsWith(e)||t&&!dHe(n)&&Object.prototype.hasOwnProperty.call(n,t)),Wse=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(l5);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},hHe=e=>Ud(0,255,e),GI={...eb,transform:e=>Math.round(hHe(e))},Bp={test:c5("rgb","red"),parse:Wse("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+GI.transform(e)+", "+GI.transform(t)+", "+GI.transform(n)+", "+hx(Mw.transform(r))+")"};function pHe(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const V4={test:c5("#"),parse:pHe,transform:Bp.transform},l0={test:c5("hsl","hue"),parse:Wse("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+yu.transform(hx(t))+", "+yu.transform(hx(n))+", "+hx(Mw.transform(r))+")"},Aa={test:e=>Bp.test(e)||V4.test(e)||l0.test(e),parse:e=>Bp.test(e)?Bp.parse(e):l0.test(e)?l0.parse(e):V4.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Bp.transform(e):l0.transform(e)},mHe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gHe(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(l5))==null?void 0:t.length)||0)+(((n=e.match(mHe))==null?void 0:n.length)||0)>0}const Hse="number",Gse="color",yHe="var",bHe="var(",uq="${}",vHe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ow(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(vHe,l=>(Aa.test(l)?(r.color.push(s),i.push(Gse),n.push(Aa.parse(l))):l.startsWith(bHe)?(r.var.push(s),i.push(yHe),n.push(l)):(r.number.push(s),i.push(Hse),n.push(parseFloat(l))),++s,uq)).split(uq);return{values:n,split:o,indexes:r,types:i}}function Kse(e){return Ow(e).values}function Yse(e){const{split:t,types:n}=Ow(e),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=n[a];o===Hse?s+=hx(i[a]):o===Gse?s+=Aa.transform(i[a]):s+=i[a]}return s}}const xHe=e=>typeof e=="number"?0:e;function wHe(e){const t=Kse(e);return Yse(e)(t.map(xHe))}const _h={test:gHe,parse:Kse,createTransformer:Yse,getAnimatableNone:wHe};function KI(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _He({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,a=0;if(!t)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=KI(l,o,e+1/3),s=KI(l,o,e),a=KI(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Lk(e,t){return n=>n>0?t:e}const Yi=(e,t,n)=>e+(t-e)*n,YI=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},SHe=[V4,Bp,l0],CHe=e=>SHe.find(t=>t.test(e));function dq(e){const t=CHe(e);if(!t)return!1;let n=t.parse(e);return t===l0&&(n=_He(n)),n}const fq=(e,t)=>{const n=dq(e),r=dq(t);if(!n||!r)return Lk(e,t);const i={...n};return s=>(i.red=YI(n.red,r.red,s),i.green=YI(n.green,r.green,s),i.blue=YI(n.blue,r.blue,s),i.alpha=Yi(n.alpha,r.alpha,s),Bp.transform(i))},W4=new Set(["none","hidden"]);function kHe(e,t){return W4.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}const EHe=(e,t)=>n=>t(e(n)),L1=(...e)=>e.reduce(EHe);function THe(e,t){return n=>Yi(e,t,n)}function u5(e){return typeof e=="number"?THe:typeof e=="string"?X6(e)?Lk:Aa.test(e)?fq:NHe:Array.isArray(e)?Zse:typeof e=="object"?Aa.test(e)?fq:AHe:Lk}function Zse(e,t){const n=[...e],r=n.length,i=e.map((s,a)=>u5(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function AHe(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=u5(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function RHe(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=e.indexes[s][r[s]],o=e.values[a]??0;n[i]=o,r[s]++}return n}const NHe=(e,t)=>{const n=_h.createTransformer(t),r=Ow(e),i=Ow(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?W4.has(e)&&!i.values.length||W4.has(t)&&!r.values.length?kHe(e,t):L1(Zse(RHe(r,i),i.values),n):Lk(e,t)};function Xse(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Yi(e,t,n):u5(e)(e,t)}const MHe=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Xi.update(t,!0),stop:()=>wh(t),now:()=>ma.isProcessing?ma.timestamp:_o.now()}},Jse=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e(s/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Bk=2e4;function d5(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Bk;)t+=n,r=e.next(t);return t>=Bk?1/0:t}function IHe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(d5(r),Bk);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:vu(i)}}const jHe=5;function Qse(e,t,n){const r=Math.max(t-jHe,0);return qse(n-e(r),t-r)}const ts={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hq=.001;function OHe({duration:e=ts.duration,bounce:t=ts.bounce,velocity:n=ts.velocity,mass:r=ts.mass}){let i,s,a=1-t;a=Ud(ts.minDamping,ts.maxDamping,a),e=Ud(ts.minDuration,ts.maxDuration,vu(e)),a<1?(i=c=>{const u=c*a,d=u*e,h=u-n,m=H4(c,a),y=Math.exp(-d);return hq-h/m*y},s=c=>{const d=c*a*e,h=d*n+n,m=Math.pow(a,2)*Math.pow(c,2)*e,y=Math.exp(-d),b=H4(Math.pow(c,2),a);return(-i(c)+hq>0?-1:1)*((h-m)*y)/b}):(i=c=>{const u=Math.exp(-c*e),d=(c-n)*e+1;return-.001+u*d},s=c=>{const u=Math.exp(-c*e),d=(n-c)*(e*e);return u*d});const o=5/e,l=DHe(i,s,o);if(e=bu(e),isNaN(l))return{stiffness:ts.stiffness,damping:ts.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:e}}}const PHe=12;function DHe(e,t,n){let r=n;for(let i=1;i<PHe;i++)r=r-e(r)/t(r);return r}function H4(e,t){return e*Math.sqrt(1-t*t)}const FHe=["duration","bounce"],LHe=["stiffness","damping","mass"];function pq(e,t){return t.some(n=>e[n]!==void 0)}function BHe(e){let t={velocity:ts.velocity,stiffness:ts.stiffness,damping:ts.damping,mass:ts.mass,isResolvedFromDuration:!1,...e};if(!pq(e,LHe)&&pq(e,FHe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Ud(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:ts.mass,stiffness:i,damping:s}}else{const n=OHe(e);t={...t,...n,mass:ts.mass},t.isResolvedFromDuration=!0}return t}function $k(e=ts.visualDuration,t=ts.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=BHe({...n,velocity:-vu(n.velocity||0)}),y=h||0,b=c/(2*Math.sqrt(l*u)),v=a-s,x=vu(Math.sqrt(l/u)),w=Math.abs(v)<5;r||(r=w?ts.restSpeed.granular:ts.restSpeed.default),i||(i=w?ts.restDelta.granular:ts.restDelta.default);let S;if(b<1){const k=H4(x,b);S=A=>{const R=Math.exp(-b*x*A);return a-R*((y+b*x*v)/k*Math.sin(k*A)+v*Math.cos(k*A))}}else if(b===1)S=k=>a-Math.exp(-x*k)*(v+(y+x*v)*k);else{const k=x*Math.sqrt(b*b-1);S=A=>{const R=Math.exp(-b*x*A),N=Math.min(k*A,300);return a-R*((y+b*x*v)*Math.sinh(N)+k*v*Math.cosh(N))/k}}const C={calculatedDuration:m&&d||null,next:k=>{const A=S(k);if(m)o.done=k>=d;else{let R=k===0?y:0;b<1&&(R=k===0?bu(y):Qse(S,k,A));const N=Math.abs(R)<=r,I=Math.abs(a-A)<=i;o.done=N&&I}return o.value=o.done?a:A,o},toString:()=>{const k=Math.min(d5(C),Bk),A=Jse(R=>C.next(k*R).value,k,30);return k+"ms "+A},toTransition:()=>{}};return C}$k.applyToOptions=e=>{const t=IHe(e,100,$k);return e.ease=t.ease,e.duration=bu(t.duration),e.type="keyframes",e};function G4({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},m=N=>o!==void 0&&N<o||l!==void 0&&N>l,y=N=>o===void 0?l:l===void 0||Math.abs(o-N)<Math.abs(l-N)?o:l;let b=n*t;const v=d+b,x=a===void 0?v:a(v);x!==v&&(b=x-d);const w=N=>-b*Math.exp(-N/r),S=N=>x+w(N),C=N=>{const I=w(N),O=S(N);h.done=Math.abs(I)<=c,h.value=h.done?x:O};let k,A;const R=N=>{m(h.value)&&(k=N,A=$k({keyframes:[h.value,y(h.value)],velocity:Qse(S,N,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return R(0),{calculatedDuration:null,next:N=>{let I=!1;return!A&&k===void 0&&(I=!0,C(N),R(N)),k!==void 0&&N>=k?A.next(N-k):(!I&&C(N),h)}}}const Pw=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};function $He(e,t,n){const r=[],i=n||zd.mix||Xse,s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||Bl:t;o=L1(l,o)}r.push(o)}return r}function zHe(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Y6(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=$He(t,r,i),l=o.length,c=u=>{if(a&&u<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=Pw(e[d],e[d+1],u);return o[d](h)};return n?u=>c(Ud(e[0],e[s-1],u)):c}function UHe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Pw(0,t,r);e.push(Yi(n,1,i))}}function qHe(e){const t=[0];return UHe(t,e.length-1),t}function VHe(e,t){return e.map(n=>n*t)}const eae=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,WHe=1e-7,HHe=12;function GHe(e,t,n,r,i){let s,a,o=0;do a=t+(n-t)/2,s=eae(a,r,i)-e,s>0?n=a:t=a;while(Math.abs(s)>WHe&&++o<HHe);return a}function B1(e,t,n,r){if(e===t&&n===r)return Bl;const i=s=>GHe(s,0,1,e,n);return s=>s===0||s===1?s:eae(i(s),t,r)}const KHe=B1(.42,0,1,1),YHe=B1(0,0,.58,1),tae=B1(.42,0,.58,1),ZHe=e=>Array.isArray(e)&&typeof e[0]!="number",nae=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,rae=e=>t=>1-e(1-t),iae=B1(.33,1.53,.69,.99),f5=rae(iae),sae=nae(f5),aae=e=>(e*=2)<1?.5*f5(e):.5*(2-Math.pow(2,-10*(e-1))),h5=e=>1-Math.sin(Math.acos(e)),oae=rae(h5),lae=nae(h5),cae=e=>Array.isArray(e)&&typeof e[0]=="number",XHe={linear:Bl,easeIn:KHe,easeInOut:tae,easeOut:YHe,circIn:h5,circInOut:lae,circOut:oae,backIn:f5,backInOut:sae,backOut:iae,anticipate:aae},JHe=e=>typeof e=="string",mq=e=>{if(cae(e)){Y6(e.length===4);const[t,n,r,i]=e;return B1(t,n,r,i)}else if(JHe(e))return XHe[e];return e};function QHe(e,t){return e.map(()=>t||tae).splice(0,e.length-1)}function px({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=ZHe(r)?r.map(mq):mq(r),s={done:!1,value:t[0]},a=VHe(n&&n.length===t.length?n:qHe(t),e),o=zHe(a,t,{ease:Array.isArray(i)?i:QHe(t,i)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}const eGe=e=>e!==null;function p5(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(eGe),o=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const tGe={decay:G4,inertia:G4,tween:px,keyframes:px,spring:$k};function uae(e){typeof e.type=="string"&&(e.type=tGe[e.type])}class m5{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const nGe=e=>e/100;class dae extends m5{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;if(n&&n.updatedAt!==_o.now()&&this.tick(_o.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:r}=this.options;r&&r()},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;uae(t);const{type:n=px,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const l=n||px;l!==px&&typeof o[0]!="number"&&(this.mixKeyframes=L1(nGe,Xse(o[0],o[1])),o=[0,100]);const c=l({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=d5(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:m,type:y,onUpdate:b,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?x<0:x>i;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let S=this.currentTime,C=r;if(d){const N=Math.min(this.currentTime,i)/o;let I=Math.floor(N),O=N%1;!O&&N>=1&&(O=1),O===1&&I--,I=Math.min(I,d+1),!!(I%2)&&(h==="reverse"?(O=1-O,m&&(O-=m/o)):h==="mirror"&&(C=a)),S=Ud(0,1,O)*o}const k=w?{done:!1,value:u[0]}:C.next(S);s&&(k.value=s(k.value));let{done:A}=k;!w&&l!==null&&(A=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return R&&y!==G4&&(k.value=p5(u,this.options,v,this.speed)),b&&b(k.value),R&&this.finish(),k}then(t,n){return this.finished.then(t,n)}get duration(){return vu(this.calculatedDuration)}get time(){return vu(this.currentTime)}set time(t){t=bu(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(_o.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=vu(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=MHe,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=r??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_o.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),t.observe(this)}}function rGe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const $p=e=>e*180/Math.PI,K4=e=>{const t=$p(Math.atan2(e[1],e[0]));return Y4(t)},iGe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:K4,rotateZ:K4,skewX:e=>$p(Math.atan(e[1])),skewY:e=>$p(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Y4=e=>(e=e%360,e<0&&(e+=360),e),gq=K4,yq=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),bq=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),sGe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:yq,scaleY:bq,scale:e=>(yq(e)+bq(e))/2,rotateX:e=>Y4($p(Math.atan2(e[6],e[5]))),rotateY:e=>Y4($p(Math.atan2(-e[2],e[0]))),rotateZ:gq,rotate:gq,skewX:e=>$p(Math.atan(e[4])),skewY:e=>$p(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function vq(e){return e.includes("scale")?1:0}function Z4(e,t){if(!e||e==="none")return vq(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=sGe,i=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=iGe,i=o}if(!i)return vq(t);const s=r[t],a=i[1].split(",").map(oGe);return typeof s=="function"?s(a):a[s]}const aGe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Z4(n,t)};function oGe(e){return parseFloat(e.trim())}const xq=e=>e===eb||e===ir,lGe=new Set(["x","y","z"]),cGe=Jy.filter(e=>!lGe.has(e));function uGe(e){const t=[];return cGe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Vp={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Z4(t,"x"),y:(e,{transform:t})=>Z4(t,"y")};Vp.translateX=Vp.x;Vp.translateY=Vp.y;const Wp=new Set;let X4=!1,J4=!1,Q4=!1;function fae(){if(J4){const e=Array.from(Wp).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=uGe(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}J4=!1,X4=!1,Wp.forEach(e=>e.complete(Q4)),Wp.clear()}function hae(){Wp.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(J4=!0)})}function dGe(){Q4=!0,hae(),fae(),Q4=!1}class g5{constructor(t,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wp.add(this),X4||(X4=!0,Xi.read(hae),Xi.resolveKeyframes(fae))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const o=r.readValue(n,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}rGe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Wp.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wp.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const fGe=e=>e.startsWith("--");function hGe(e,t,n){fGe(t)?e.style.setProperty(t,n):e.style[t]=n}function y5(e){let t;return()=>(t===void 0&&(t=e()),t)}const pGe=y5(()=>window.ScrollTimeline!==void 0),mGe={};function gGe(e,t){const n=y5(e);return()=>mGe[t]??n()}const pae=gGe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gv=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,wq={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gv([0,.65,.55,1]),circOut:Gv([.55,0,1,.45]),backIn:Gv([.31,.01,.66,-.59]),backOut:Gv([.33,1.53,.69,.99])};function mae(e,t){if(e)return typeof e=="function"?pae()?Jse(e,t):"ease-out":cae(e)?Gv(e):Array.isArray(e)?e.map(n=>mae(n,t)||wq.easeOut):wq[e]}function yGe(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const d=mae(o,i);Array.isArray(d)&&(u.easing=d);const h={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),e.animate(u,h)}function gae(e){return typeof e=="function"&&"applyToOptions"in e}function bGe({type:e,...t}){return gae(e)&&pae()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class vGe extends m5{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,Y6(typeof t.type!="string");const c=bGe(t);this.animation=yGe(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=p5(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):hGe(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return vu(Number(t))}get time(){return vu(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=bu(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&pGe()?(this.animation.timeline=t,Bl):n(this)}}const yae={anticipate:aae,backInOut:sae,circInOut:lae};function xGe(e){return e in yae}function wGe(e){typeof e.ease=="string"&&xGe(e.ease)&&(e.ease=yae[e.ease])}const _q=10;class _Ge extends vGe{constructor(t){wGe(t),uae(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new dae({...a,autoplay:!1}),l=bu(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-_q).value,o.sample(l).value,_q),o.stop()}}const Sq=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_h.test(e)||e==="0")&&!e.startsWith("url("));function SGe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function CGe(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=Sq(i,t),o=Sq(s,t);return!a||!o?!1:SGe(e)||(n==="spring"||gae(n))&&r}const kGe=new Set(["opacity","clipPath","filter","transform"]),EGe=y5(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function TGe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return EGe()&&n&&kGe.has(n)&&(n!=="transform"||!l)&&!o&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const AGe=40;class RGe extends m5{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:u,...d}){var y;super(),this.stop=()=>{var b,v;this._animation?(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)):(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=_o.now();const h={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:c,element:u,...d},m=(u==null?void 0:u.KeyframeResolver)||g5;this.keyframeResolver=new m(o,(b,v,x)=>this.onKeyframesResolved(b,v,h,!x),l,c,u),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=_o.now(),CGe(t,s,a,o)||((zd.instantAnimations||!l)&&(u==null||u(p5(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>AGe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!c&&TGe(h)?new _Ge({...h,element:h.motionValue.owner.current}):new dae(h);m.finished.then(()=>this.notifyFinished()).catch(Bl),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||dGe(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const b5=(e,t,n,r={},i,s)=>a=>{const o=o5(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-bu(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};uHe(o)||Object.assign(u,cHe(e,u)),u.duration&&(u.duration=bu(u.duration)),u.repeatDelay&&(u.repeatDelay=bu(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),(zd.instantAnimations||zd.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!s&&t.get()!==void 0){const h=iHe(u.keyframes,o);if(h!==void 0){Xi.update(()=>{u.onUpdate(h),u.onComplete()});return}}return new RGe(u)},bae=new Set(["width","height","top","left","right","bottom",...Jy]);function NGe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function vae(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const l=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const u in o){const d=e.getValue(u,e.latestValues[u]??null),h=o[u];if(h===void 0||c&&NGe(c,u))continue;const m={delay:n,...o5(s||{},u)},y=d.get();if(y!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===y&&!m.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const x=Vse(e);if(x){const w=window.MotionHandoffAnimation(x,u,Xi);w!==null&&(m.startTime=w,b=!0)}}q4(e,u),d.start(b5(u,d,h,e.shouldReduceMotion&&bae.has(u)?{type:!1}:m,e,b));const v=d.animation;v&&l.push(v)}return a&&Promise.all(l).then(()=>{Xi.update(()=>{a&&tHe(e,a)})}),l}function eO(e,t,n={}){var l;const r=Iw(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(vae(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return MGe(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[s,a]:[a,s];return c().then(()=>u())}else return Promise.all([s(),a(n.delay)])}function MGe(e,t,n=0,r=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(e.variantChildren).sort(IGe).forEach((c,u)=>{c.notify("AnimationStart",t),a.push(eO(c,t,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function IGe(e,t){return e.sortNodePosition(t)}function jGe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>eO(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=eO(e,t,n);else{const i=typeof t=="function"?Iw(e,t,n.custom):t;r=Promise.all(vae(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function xae(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const OGe=H6.length;function wae(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?wae(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<OGe;n++){const r=H6[n],i=e.props[r];(Rw(i)||i===!1)&&(t[r]=i)}return t}const PGe=[...W6].reverse(),DGe=W6.length;function FGe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>jGe(e,n,r)))}function LGe(e){let t=FGe(e),n=Cq(),r=!0;const i=l=>(c,u)=>{var h;const d=Iw(e,u,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:m,transitionEnd:y,...b}=d;c={...c,...b,...y}}return c};function s(l){t=l(e)}function a(l){const{props:c}=e,u=wae(e.parent)||{},d=[],h=new Set;let m={},y=1/0;for(let v=0;v<DGe;v++){const x=PGe[v],w=n[x],S=c[x]!==void 0?c[x]:u[x],C=Rw(S),k=x===l?w.isActive:null;k===!1&&(y=v);let A=S===u[x]&&S!==c[x]&&C;if(A&&r&&e.manuallyAnimateOnMount&&(A=!1),w.protectedKeys={...m},!w.isActive&&k===null||!S&&!w.prevProp||UT(S)||typeof S=="boolean")continue;const R=BGe(w.prevProp,S);let N=R||x===l&&w.isActive&&!A&&C||v>y&&C,I=!1;const O=Array.isArray(S)?S:[S];let L=O.reduce(i(x),{});k===!1&&(L={});const{prevResolvedValues:P={}}=w,V={...P,...L},F=G=>{N=!0,h.has(G)&&(I=!0,h.delete(G)),w.needsAnimating[G]=!0;const $=e.getValue(G);$&&($.liveStyle=!1)};for(const G in V){const $=L[G],ne=P[G];if(m.hasOwnProperty(G))continue;let W=!1;U4($)&&U4(ne)?W=!xae($,ne):W=$!==ne,W?$!=null?F(G):h.add(G):$!==void 0&&h.has(G)?F(G):w.protectedKeys[G]=!0}w.prevProp=S,w.prevResolvedValues=L,w.isActive&&(m={...m,...L}),r&&e.blockInitialAnimation&&(N=!1),N&&(!(A&&R)||I)&&d.push(...O.map(G=>({animation:G,options:{type:x}})))}if(h.size){const v={};if(typeof c.initial!="boolean"){const x=Iw(e,Array.isArray(c.initial)?c.initial[0]:c.initial);x&&x.transition&&(v.transition=x.transition)}h.forEach(x=>{const w=e.getBaseTarget(x),S=e.getValue(x);S&&(S.liveStyle=!0),v[x]=w??null}),d.push({animation:v})}let b=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(d):Promise.resolve()}function o(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(l,c)}),n[l].isActive=c;const u=a(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Cq(),r=!0}}}function BGe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!xae(t,e):!1}function wp(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Cq(){return{animate:wp(!0),whileInView:wp(),whileHover:wp(),whileTap:wp(),whileDrag:wp(),whileFocus:wp(),exit:wp()}}class Bh{constructor(t){this.isMounted=!1,this.node=t}update(){}}class $Ge extends Bh{constructor(t){super(t),t.animationState||(t.animationState=LGe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();UT(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let zGe=0;class UGe extends Bh{constructor(){super(...arguments),this.id=zGe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const qGe={animation:{Feature:$Ge},exit:{Feature:UGe}};function Dw(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const v5=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function $1(e){return{point:{x:e.pageX,y:e.pageY}}}const VGe=e=>t=>v5(t)&&e(t,$1(t));function mx(e,t,n,r){return Dw(e,t,VGe(n),r)}function _ae({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function WGe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function HGe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Sae=1e-4,GGe=1-Sae,KGe=1+Sae,Cae=.01,YGe=0-Cae,ZGe=0+Cae;function Za(e){return e.max-e.min}function XGe(e,t,n){return Math.abs(e-t)<=n}function kq(e,t,n,r=.5){e.origin=r,e.originPoint=Yi(t.min,t.max,e.origin),e.scale=Za(n)/Za(t),e.translate=Yi(n.min,n.max,e.origin)-e.originPoint,(e.scale>=GGe&&e.scale<=KGe||isNaN(e.scale))&&(e.scale=1),(e.translate>=YGe&&e.translate<=ZGe||isNaN(e.translate))&&(e.translate=0)}function gx(e,t,n,r){kq(e.x,t.x,n.x,r?r.originX:void 0),kq(e.y,t.y,n.y,r?r.originY:void 0)}function Eq(e,t,n){e.min=n.min+t.min,e.max=e.min+Za(t)}function JGe(e,t,n){Eq(e.x,t.x,n.x),Eq(e.y,t.y,n.y)}function Tq(e,t,n){e.min=t.min-n.min,e.max=e.min+Za(t)}function yx(e,t,n){Tq(e.x,t.x,n.x),Tq(e.y,t.y,n.y)}const Aq=()=>({translate:0,scale:1,origin:0,originPoint:0}),c0=()=>({x:Aq(),y:Aq()}),Rq=()=>({min:0,max:0}),ls=()=>({x:Rq(),y:Rq()});function Nl(e){return[e("x"),e("y")]}function ZI(e){return e===void 0||e===1}function tO({scale:e,scaleX:t,scaleY:n}){return!ZI(e)||!ZI(t)||!ZI(n)}function Ep(e){return tO(e)||kae(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function kae(e){return Nq(e.x)||Nq(e.y)}function Nq(e){return e&&e!=="0%"}function zk(e,t,n){const r=e-n,i=t*r;return n+i}function Mq(e,t,n,r,i){return i!==void 0&&(e=zk(e,i,r)),zk(e,n,r)+t}function nO(e,t=0,n=1,r,i){e.min=Mq(e.min,t,n,r,i),e.max=Mq(e.max,t,n,r,i)}function Eae(e,{x:t,y:n}){nO(e.x,t.translate,t.scale,t.originPoint),nO(e.y,n.translate,n.scale,n.originPoint)}const Iq=.999999999999,jq=1.0000000000001;function QGe(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&d0(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Eae(e,a)),r&&Ep(s.latestValues)&&d0(e,s.latestValues))}t.x<jq&&t.x>Iq&&(t.x=1),t.y<jq&&t.y>Iq&&(t.y=1)}function u0(e,t){e.min=e.min+t,e.max=e.max+t}function Oq(e,t,n,r,i=.5){const s=Yi(e.min,e.max,i);nO(e,t,n,s,r)}function d0(e,t){Oq(e.x,t.x,t.scaleX,t.scale,t.originX),Oq(e.y,t.y,t.scaleY,t.scale,t.originY)}function Tae(e,t){return _ae(HGe(e.getBoundingClientRect(),t))}function eKe(e,t,n){const r=Tae(e,n),{scroll:i}=t;return i&&(u0(r.x,i.offset.x),u0(r.y,i.offset.y)),r}const Aae=({current:e})=>e?e.ownerDocument.defaultView:null,Pq=(e,t)=>Math.abs(e-t);function tKe(e,t){const n=Pq(e.x,t.x),r=Pq(e.y,t.y);return Math.sqrt(n**2+r**2)}class Rae{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=JI(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=tKe(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:y}=d,{timestamp:b}=ma;this.history.push({...y,timestamp:b});const{onStart:v,onMove:x}=this.handlers;h||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=XI(h,this.transformPagePoint),Xi.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=JI(d.type==="pointercancel"?this.lastMoveEventInfo:XI(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,v),y&&y(d,v)},!v5(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=$1(t),o=XI(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=ma;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(t,JI(o,this.history)),this.removeListeners=L1(mx(this.contextWindow,"pointermove",this.handlePointerMove),mx(this.contextWindow,"pointerup",this.handlePointerUp),mx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),wh(this.updatePoint)}}function XI(e,t){return t?{point:t(e.point)}:e}function Dq(e,t){return{x:e.x-t.x,y:e.y-t.y}}function JI({point:e},t){return{point:e,delta:Dq(e,Nae(t)),offset:Dq(e,nKe(t)),velocity:rKe(t,.1)}}function nKe(e){return e[0]}function Nae(e){return e[e.length-1]}function rKe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Nae(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>bu(t)));)n--;if(!r)return{x:0,y:0};const s=vu(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function iKe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Yi(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Yi(n,e,r.max):Math.min(e,n)),e}function Fq(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function sKe(e,{top:t,left:n,bottom:r,right:i}){return{x:Fq(e.x,n,i),y:Fq(e.y,t,r)}}function Lq(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function aKe(e,t){return{x:Lq(e.x,t.x),y:Lq(e.y,t.y)}}function oKe(e,t){let n=.5;const r=Za(e),i=Za(t);return i>r?n=Pw(t.min,t.max-r,e.min):r>i&&(n=Pw(e.min,e.max-i,t.min)),Ud(0,1,n)}function lKe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const rO=.35;function cKe(e=rO){return e===!1?e=0:e===!0&&(e=rO),{x:Bq(e,"left","right"),y:Bq(e,"top","bottom")}}function Bq(e,t,n){return{min:$q(e,t),max:$q(e,n)}}function $q(e,t){return typeof e=="number"?e:e[t]||0}const sc={x:!1,y:!1};function Mae(){return sc.x||sc.y}function uKe(e){return e==="x"||e==="y"?sc[e]?null:(sc[e]=!0,()=>{sc[e]=!1}):sc.x||sc.y?null:(sc.x=sc.y=!0,()=>{sc.x=sc.y=!1})}const dKe=new WeakMap;class fKe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ls(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor($1(u).point)},s=(u,d)=>{const{drag:h,dragPropagation:m,onDragStart:y}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uKe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nl(v=>{let x=this.getAxisMotionValue(v).get()||0;if(yu.test(x)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[v];S&&(x=Za(S)*(parseFloat(x)/100))}}this.originPoint[v]=x}),y&&Xi.postRender(()=>y(u,d)),q4(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(u,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:y,onDrag:b}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=d;if(m&&this.currentDirection===null){this.currentDirection=hKe(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),b&&b(u,d)},o=(u,d)=>this.stop(u,d),l=()=>Nl(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)==null?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Rae(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Aae(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Xi.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!WS(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=iKe(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&o0(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=sKe(r.layoutBox,t):this.constraints=!1,this.elastic=cKe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Nl(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=lKe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!o0(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=eKe(r,i.root,this.visualElement.getTransformPagePoint());let a=aKe(i.layout.layoutBox,s);if(n){const o=n(WGe(a));this.hasMutatedConstraints=!!o,o&&(a=_ae(o))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Nl(u=>{if(!WS(u,n,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?t[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return q4(this.visualElement,t),r.start(b5(t,r,0,n,this.visualElement,!1))}stopAnimation(){Nl(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Nl(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Nl(n=>{const{drag:r}=this.getProps();if(!WS(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(t[n]-Yi(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!o0(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Nl(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=oKe({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Nl(a=>{if(!WS(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(Yi(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;dKe.set(this.visualElement,this);const t=this.visualElement.current,n=mx(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();o0(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Xi.read(r);const a=Dw(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Nl(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=rO,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function WS(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function hKe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class pKe extends Bh{constructor(t){super(t),this.removeGroupControls=Bl,this.removeListeners=Bl,this.controls=new fKe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bl}unmount(){this.removeGroupControls(),this.removeListeners()}}const zq=e=>(t,n)=>{e&&Xi.postRender(()=>e(t,n))};class mKe extends Bh{constructor(){super(...arguments),this.removePointerDownListener=Bl}onPointerDown(t){this.session=new Rae(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Aae(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:zq(t),onStart:zq(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Xi.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=mx(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const P2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Uq(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Dv={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ir.test(e))e=parseFloat(e);else return e;const n=Uq(e,t.target.x),r=Uq(e,t.target.y);return`${n}% ${r}%`}},gKe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=_h.parse(e);if(i.length>5)return r;const s=_h.createTransformer(e),a=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const c=Yi(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class yKe extends T.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;RWe(bKe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),P2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||Xi.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),K6.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Iae(e){const[t,n]=Ese(),r=T.useContext(z6);return p.jsx(yKe,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(Ise),isPresent:t,safeToRemove:n})}const bKe={borderRadius:{...Dv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dv,borderTopRightRadius:Dv,borderBottomLeftRadius:Dv,borderBottomRightRadius:Dv,boxShadow:gKe};function vKe(e,t,n){const r=Ia(e)?e:jw(e);return r.start(b5("",r,t,n)),r.animation}function xKe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const wKe=(e,t)=>e.depth-t.depth;class _Ke{constructor(){this.children=[],this.isDirty=!1}add(t){i5(this.children,t),this.isDirty=!0}remove(t){s5(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(wKe),this.isDirty=!1,this.children.forEach(t)}}function SKe(e,t){const n=_o.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(wh(r),e(s-t))};return Xi.setup(r,!0),()=>wh(r)}const jae=["TopLeft","TopRight","BottomLeft","BottomRight"],CKe=jae.length,qq=e=>typeof e=="string"?parseFloat(e):e,Vq=e=>typeof e=="number"||ir.test(e);function kKe(e,t,n,r,i,s){i?(e.opacity=Yi(0,n.opacity??1,EKe(r)),e.opacityExit=Yi(t.opacity??1,0,TKe(r))):s&&(e.opacity=Yi(t.opacity??1,n.opacity??1,r));for(let a=0;a<CKe;a++){const o=`border${jae[a]}Radius`;let l=Wq(t,o),c=Wq(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Vq(l)===Vq(c)?(e[o]=Math.max(Yi(qq(l),qq(c),r),0),(yu.test(c)||yu.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||n.rotate)&&(e.rotate=Yi(t.rotate||0,n.rotate||0,r))}function Wq(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const EKe=Oae(0,.5,oae),TKe=Oae(.5,.95,Bl);function Oae(e,t,n){return r=>r<e?0:r>t?1:n(Pw(e,t,r))}function Hq(e,t){e.min=t.min,e.max=t.max}function Al(e,t){Hq(e.x,t.x),Hq(e.y,t.y)}function Gq(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Kq(e,t,n,r,i){return e-=t,e=zk(e,1/n,r),i!==void 0&&(e=zk(e,1/i,r)),e}function AKe(e,t=0,n=1,r=.5,i,s=e,a=e){if(yu.test(t)&&(t=parseFloat(t),t=Yi(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=Yi(s.min,s.max,r);e===s&&(o-=t),e.min=Kq(e.min,t,n,o,i),e.max=Kq(e.max,t,n,o,i)}function Yq(e,t,[n,r,i],s,a){AKe(e,t[n],t[r],t[i],t.scale,s,a)}const RKe=["x","scaleX","originX"],NKe=["y","scaleY","originY"];function Zq(e,t,n,r){Yq(e.x,t,RKe,n?n.x:void 0,r?r.x:void 0),Yq(e.y,t,NKe,n?n.y:void 0,r?r.y:void 0)}function Xq(e){return e.translate===0&&e.scale===1}function Pae(e){return Xq(e.x)&&Xq(e.y)}function Jq(e,t){return e.min===t.min&&e.max===t.max}function MKe(e,t){return Jq(e.x,t.x)&&Jq(e.y,t.y)}function Qq(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Dae(e,t){return Qq(e.x,t.x)&&Qq(e.y,t.y)}function eV(e){return Za(e.x)/Za(e.y)}function tV(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class IKe{constructor(){this.members=[]}add(t){i5(this.members,t),t.scheduleRender()}remove(t){if(s5(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jKe(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:m,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const QI=["","X","Y","Z"],OKe={visibility:"hidden"},nV=1e3;let PKe=0;function e3(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Fae(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Vse(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Xi,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Fae(r)}function Lae({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=PKe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(LKe),this.nodes.forEach(qKe),this.nodes.forEach(VKe),this.nodes.forEach(BKe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _Ke)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new a5),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=xKe(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let u;const d=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=SKe(d,250),P2.hasAnimatedSinceResize&&(P2.hasAnimatedSinceResize=!1,this.nodes.forEach(iV))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||YKe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=c.getProps(),x=!this.targetLayout||!Dae(this.targetLayout,m),w=!d&&h;if(this.options.layoutRoot||this.resumeFrom||w||d&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,w);const S={...o5(y,"layout"),onPlay:b,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else d||iV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WKe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Fae(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rV);return}this.isUpdating||this.nodes.forEach(zKe),this.isUpdating=!1,this.nodes.forEach(UKe),this.nodes.forEach(DKe),this.nodes.forEach(FKe),this.clearAllSnapshots();const o=_o.now();ma.delta=Ud(0,1e3/60,o-ma.timestamp),ma.timestamp=o,ma.isProcessing=!0,HI.update.process(ma),HI.preRender.process(ma),HI.render.process(ma),ma.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,K6.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($Ke),this.sharedNodes.forEach(HKe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Za(this.snapshot.measuredBox.x)&&!Za(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ls(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Pae(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||Ep(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),ZKe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return ls();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(XKe))){const{scroll:u}=this.root;u&&(u0(o.x,u.offset.x),u0(o.y,u.offset.y))}return o}removeElementScroll(a){var l;const o=ls();if(Al(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Al(o,a),u0(o.x,d.offset.x),u0(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=ls();Al(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&d0(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ep(u.latestValues)&&d0(l,u.latestValues)}return Ep(this.latestValues)&&d0(l,this.latestValues),l}removeTransform(a){const o=ls();Al(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ep(c.latestValues))continue;tO(c.latestValues)&&c.updateSnapshot();const u=ls(),d=c.measurePageBox();Al(u,d),Zq(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ep(this.latestValues)&&Zq(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ma.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=ma.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),yx(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Al(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ls(),this.targetWithTransforms=ls()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JGe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Al(this.target,this.layout.layoutBox),Eae(this.target,this.targetDelta)):Al(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),yx(this.relativeTargetOrigin,this.target,m.target),Al(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||tO(this.parent.latestValues)||kae(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ma.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Al(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;QGe(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ls());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Gq(this.prevProjectionDelta.x,this.projectionDelta.x),Gq(this.prevProjectionDelta.y,this.projectionDelta.y)),gx(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!tV(this.projectionDelta.x,this.prevProjectionDelta.x)||!tV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=c0(),this.projectionDelta=c0(),this.projectionDeltaWithTransform=c0()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=c0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=ls(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,b=m!==y,v=this.getStack(),x=!v||v.members.length<=1,w=!!(b&&!x&&this.options.crossfade===!0&&!this.path.some(KKe));this.animationProgress=0;let S;this.mixTargetDelta=C=>{const k=C/1e3;sV(d.x,a.x,k),sV(d.y,a.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yx(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GKe(this.relativeTarget,this.relativeTargetOrigin,h,k),S&&MKe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ls()),Al(S,this.relativeTarget)),b&&(this.animationValues=u,kKe(u,c,this.latestValues,k,w,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xi.update(()=>{P2.hasAnimatedSinceResize=!0,this.currentAnimation=vKe(0,nV,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&Bae(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ls();const d=Za(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=Za(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}Al(o,l),d0(o,u),gx(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new IKe),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&e3("z",a,c,this.animationValues);for(let u=0;u<QI.length;u++)e3(`rotate${QI[u]}`,a,c,this.animationValues),e3(`skew${QI[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return OKe;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=j2(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=j2(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ep(this.latestValues)&&(m.transform=l?l({},""):"none",this.hasProjected=!1),m}const u=c.animationValues||c.latestValues;this.applyTransformsToTarget(),o.transform=jKe(this.projectionDeltaWithTransform,this.treeScale,u),l&&(o.transform=l(u,o.transform));const{x:d,y:h}=this.projectionDelta;o.transformOrigin=`${d.origin*100}% ${h.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in Nw){if(u[m]===void 0)continue;const{correct:y,applyTo:b,isCSSVariable:v}=Nw[m],x=o.transform==="none"?u[m]:y(u[m],c);if(b){const w=b.length;for(let S=0;S<w;S++)o[b[S]]=x}else v?this.options.visualElement.renderState.vars[m]=x:o[m]=x}return this.options.layoutId&&(o.pointerEvents=c===this?j2(a==null?void 0:a.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(rV),this.root.sharedNodes.clear()}}}function DKe(e){e.updateLayout()}function FKe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?Nl(d=>{const h=a?t.measuredBox[d]:t.layoutBox[d],m=Za(h);h.min=r[d].min,h.max=h.min+m}):Bae(s,t.layoutBox,r)&&Nl(d=>{const h=a?t.measuredBox[d]:t.layoutBox[d],m=Za(r[d]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const o=c0();gx(o,r,t.layoutBox);const l=c0();a?gx(l,e.applyTransform(i,!0),t.measuredBox):gx(l,r,t.layoutBox);const c=!Pae(o);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const y=ls();yx(y,t.layoutBox,h.layoutBox);const b=ls();yx(b,r,m.layoutBox),Dae(y,b)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=y,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function LKe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function BKe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function $Ke(e){e.clearSnapshot()}function rV(e){e.clearMeasurements()}function zKe(e){e.isLayoutDirty=!1}function UKe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function iV(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function qKe(e){e.resolveTargetDelta()}function VKe(e){e.calcProjection()}function WKe(e){e.resetSkewAndRotation()}function HKe(e){e.removeLeadSnapshot()}function sV(e,t,n){e.translate=Yi(t.translate,0,n),e.scale=Yi(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function aV(e,t,n,r){e.min=Yi(t.min,n.min,r),e.max=Yi(t.max,n.max,r)}function GKe(e,t,n,r){aV(e.x,t.x,n.x,r),aV(e.y,t.y,n.y,r)}function KKe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const YKe={duration:.45,ease:[.4,0,.1,1]},oV=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),lV=oV("applewebkit/")&&!oV("chrome/")?Math.round:Bl;function cV(e){e.min=lV(e.min),e.max=lV(e.max)}function ZKe(e){cV(e.x),cV(e.y)}function Bae(e,t,n){return e==="position"||e==="preserve-aspect"&&!XGe(eV(t),eV(n),.2)}function XKe(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const JKe=Lae({attachResizeListener:(e,t)=>Dw(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),t3={current:void 0},$ae=Lae({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!t3.current){const e=new JKe({});e.mount(window),e.setOptions({layoutScroll:!0}),t3.current=e}return t3.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),QKe={pan:{Feature:mKe},drag:{Feature:pKe,ProjectionNode:$ae,MeasureLayout:Iae}};function eYe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=(n==null?void 0:n[e])??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}function zae(e,t){const n=eYe(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function uV(e){return!(e.pointerType==="touch"||Mae())}function tYe(e,t,n={}){const[r,i,s]=zae(e,n),a=o=>{if(!uV(o))return;const{target:l}=o,c=t(l,o);if(typeof c!="function"||!l)return;const u=d=>{uV(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}function dV(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Xi.postRender(()=>s(t,$1(t)))}class nYe extends Bh{mount(){const{current:t}=this.node;t&&(this.unmount=tYe(t,(n,r)=>(dV(this.node,r,"Start"),i=>dV(this.node,i,"End"))))}unmount(){}}class rYe extends Bh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=L1(Dw(this.node.current,"focus",()=>this.onFocus()),Dw(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Uae=(e,t)=>t?e===t?!0:Uae(e,t.parentElement):!1,iYe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sYe(e){return iYe.has(e.tagName)||e.tabIndex!==-1}const Kv=new WeakSet;function fV(e){return t=>{t.key==="Enter"&&e(t)}}function n3(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const aYe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=fV(()=>{if(Kv.has(n))return;n3(n,"down");const i=fV(()=>{n3(n,"up")}),s=()=>n3(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function hV(e){return v5(e)&&!Mae()}function oYe(e,t,n={}){const[r,i,s]=zae(e,n),a=o=>{const l=o.currentTarget;if(!hV(o)||Kv.has(l))return;Kv.add(l);const c=t(l,o),u=(m,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!hV(m)||!Kv.has(l))&&(Kv.delete(l),typeof c=="function"&&c(m,{success:y}))},d=m=>{u(m,l===window||l===document||n.useGlobalTarget||Uae(l,m.target))},h=m=>{u(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o instanceof HTMLElement&&(o.addEventListener("focus",c=>aYe(c,i)),!sYe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function pV(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Xi.postRender(()=>s(t,$1(t)))}class lYe extends Bh{mount(){const{current:t}=this.node;t&&(this.unmount=oYe(t,(n,r)=>(pV(this.node,r,"Start"),(i,{success:s})=>pV(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const iO=new WeakMap,r3=new WeakMap,cYe=e=>{const t=iO.get(e.target);t&&t(e)},uYe=e=>{e.forEach(cYe)};function dYe({root:e,...t}){const n=e||document;r3.has(n)||r3.set(n,{});const r=r3.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(uYe,{root:e,...t})),r[i]}function fYe(e,t,n){const r=dYe(t);return iO.set(e,n),r.observe(e),()=>{iO.delete(e),r.unobserve(e)}}const hYe={some:0,all:1};class pYe extends Bh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:hYe[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return fYe(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(mYe(t,n))&&this.startObserver()}unmount(){}}function mYe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const gYe={inView:{Feature:pYe},tap:{Feature:lYe},focus:{Feature:rYe},hover:{Feature:nYe}},yYe={layout:{ProjectionNode:$ae,MeasureLayout:Iae}},sO={current:null},qae={current:!1};function bYe(){if(qae.current=!0,!!q6)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sO.current=e.matches;e.addListener(t),t()}else sO.current=!1}const vYe=new WeakMap;function xYe(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Ia(i))e.addValue(r,i);else if(Ia(s))e.addValue(r,jw(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(r);e.addValue(r,jw(a!==void 0?a:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Vae=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Wae=e=>/^0[^.\s]+$/u.test(e),wYe={test:e=>e==="auto",parse:e=>e},Hae=e=>t=>t.test(e),Gae=[eb,ir,yu,zf,MWe,NWe,wYe],mV=e=>Gae.find(Hae(e)),_Ye=[...Gae,Aa,_h],SYe=e=>_Ye.find(Hae(e)),CYe=new Set(["brightness","contrast","saturate","opacity"]);function kYe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(l5)||[];if(!r)return e;const i=n.replace(r,"");let s=CYe.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const EYe=/\b([a-z-]*)\(.*?\)/gu,aO={..._h,getAnimatableNone:e=>{const t=e.match(EYe);return t?t.map(kYe).join(" "):e}},TYe={...J6,color:Aa,backgroundColor:Aa,outlineColor:Aa,fill:Aa,stroke:Aa,borderColor:Aa,borderTopColor:Aa,borderRightColor:Aa,borderBottomColor:Aa,borderLeftColor:Aa,filter:aO,WebkitFilter:aO},Kae=e=>TYe[e];function Yae(e,t){let n=Kae(e);return n!==aO&&(n=_h),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const gV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class AYe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=g5,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=_o.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Xi.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=qT(n),this.isVariantNode=Nse(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const m=d[h];l[h]!==void 0&&Ia(m)&&m.set(l[h],!1)}}mount(t){this.current=t,vYe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),qae.current||bYe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sO.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),wh(this.notifyUpdate),wh(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Qy.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Xi.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in my){const n=my[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ls()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<gV.length;r++){const i=gV[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=xYe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=jw(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Vae(r)||Wae(r))?r=parseFloat(r):!SYe(r)&&_h.test(n)&&(r=Yae(t,n)),this.setBaseTarget(t,Ia(r)?r.get():r)),Ia(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=n5(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Ia(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new a5),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}const RYe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function NYe(e){const t=RYe.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function Zae(e,t,n=1){const[r,i]=NYe(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return Vae(a)?parseFloat(a):a}return X6(i)?Zae(i,t,n+1):i}function MYe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Wae(e):!0}const IYe=new Set(["auto","none","0"]);function jYe(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!IYe.has(s)&&Ow(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=Yae(n,i)}class OYe extends g5{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),X6(c))){const u=Zae(c,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!bae.has(r)||t.length!==2)return;const[i,s]=t,a=mV(i),o=mV(s);if(a!==o)if(xq(a)&&xq(o))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Vp[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||MYe(t[i]))&&r.push(i);r.length&&jYe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vp[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=Vp[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}class Xae extends AYe{constructor(){super(...arguments),this.KeyframeResolver=OYe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ia(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Jae(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}function PYe(e){return window.getComputedStyle(e)}class DYe extends Xae{constructor(){super(...arguments),this.type="html",this.renderInstance=Jae}readValueFromInstance(t,n){if(Qy.has(n))return aGe(t,n);{const r=PYe(t),i=(Z6(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Tae(t,n)}build(t,n,r){Q6(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return r5(t,n,r)}}const Qae=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function FYe(e,t,n,r){Jae(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(Qae.has(i)?i:G6(i),t.attrs[i])}class LYe extends Xae{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ls}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Qy.has(n)){const r=Kae(n);return r&&r.default||0}return n=Qae.has(n)?n:G6(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Use(t,n,r)}build(t,n,r){Lse(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){FYe(t,n,r,i)}mount(t){this.isSVGTag=$se(t.tagName),super.mount(t)}}const BYe=(e,t)=>t5(e)?new LYe(t):new DYe(t,{allowProjection:e!==T.Fragment}),$Ye=YWe({...qGe,...gYe,...QKe,...yYe},BYe),ru=mWe($Ye),w0=new WeakMap,D2=new WeakMap,Uk={current:[]};let i3=!1,bx=0;const Yv=new Set,HS=new Map;function eoe(e){const t=Array.from(e).sort((n,r)=>n instanceof Id&&n.options.deps.includes(r)?1:r instanceof Id&&r.options.deps.includes(n)?-1:0);for(const n of t){if(Uk.current.includes(n))continue;Uk.current.push(n),n.recompute();const r=D2.get(n);if(r)for(const i of r){const s=w0.get(i);s&&eoe(s)}}}function zYe(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function UYe(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function toe(e){if(bx>0&&!HS.has(e)&&HS.set(e,e.prevState),Yv.add(e),!(bx>0)&&!i3)try{for(i3=!0;Yv.size>0;){const t=Array.from(Yv);Yv.clear();for(const n of t){const r=HS.get(n)??n.prevState;n.prevState=r,zYe(n)}for(const n of t){const r=w0.get(n);r&&(Uk.current.push(n),eoe(r))}for(const n of t){const r=w0.get(n);if(r)for(const i of r)UYe(i)}}}finally{i3=!1,Uk.current=[],HS.clear()}}function Zc(e){bx++;try{e()}finally{if(bx--,bx===0){const t=Array.from(Yv)[0];t&&toe(t)}}}function qYe(e){return typeof e=="function"}class oO{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const a=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),a==null||a()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,r,i;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):qYe(t)?this.state=t(this.prevState):this.state=t,(i=(r=this.options)==null?void 0:r.onUpdate)==null||i.call(r),toe(this)}}class Id{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:a}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:a}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof Id&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s==null||s()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const n of t)if(n instanceof Id)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof oO){let r=w0.get(n);r||(r=new Set,w0.set(n,r)),r.add(this);let i=D2.get(this);i||(i=new Set,D2.set(this,i)),i.add(n)}}unregisterFromGraph(t=this.options.deps){for(const n of t)if(n instanceof Id)this.unregisterFromGraph(n.options.deps);else if(n instanceof oO){const r=w0.get(n);r&&r.delete(this);const i=D2.get(this);i&&i.delete(n)}}}function VT(e,t){return typeof e=="function"?e(t):e}function Zv(e,t){return x5(t).reduce((r,i)=>{if(r===null)return null;if(typeof r<"u")return r[i]},e)}function GS(e,t,n){const r=x5(t);function i(s){if(!r.length)return VT(n,s);const a=r.shift();if(typeof a=="string"||typeof a=="number"&&!Array.isArray(s))return typeof s=="object"?(s===null&&(s={}),{...s,[a]:i(s[a])}):{[a]:i()};if(Array.isArray(s)&&typeof a=="number"){const o=s.slice(0,a);return[...o.length?o:new Array(a),i(s[a]),...s.slice(a+1)]}return[...new Array(a),i()]}return i(e)}function VYe(e,t){const n=x5(t);function r(i){if(!i)return;if(n.length===1){const a=n[0];if(Array.isArray(i)&&typeof a=="number")return i.filter((c,u)=>u!==a);const{[a]:o,...l}=i;return l}const s=n.shift();if(typeof s=="string"&&typeof i=="object")return{...i,[s]:r(i[s])};if(typeof s=="number"&&Array.isArray(i)){if(s>=i.length)return i;const a=i.slice(0,s);return[...a.length?a:new Array(s),r(i[s]),...i.slice(s+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return r(e)}const WYe=/^(\d+)$/gm,HYe=/\.(\d+)(?=\.)/gm,GYe=/^(\d+)\./gm,KYe=/\.(\d+$)/gm,YYe=/\.{2,}/gm,lO="__int__",KS=`${lO}$1`;function x5(e){if(Array.isArray(e))return[...e];if(typeof e!="string")throw new Error("Path must be a string.");return e.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(WYe,KS).replace(HYe,`.${KS}.`).replace(GYe,`${KS}.`).replace(KYe,`.${KS}`).replace(YYe,".").split(".").map(t=>t.indexOf(lO)===0?parseInt(t.substring(lO.length),10):t)}function ZYe(e){return!(Array.isArray(e)&&e.length===0)}function cO(e,t){const{asyncDebounceMs:n}=t,{onChangeAsync:r,onBlurAsync:i,onSubmitAsync:s,onBlurAsyncDebounceMs:a,onChangeAsyncDebounceMs:o}=t.validators||{},l=n??0,c={cause:"change",validate:r,debounceMs:o??l},u={cause:"blur",validate:i,debounceMs:a??l},d={cause:"submit",validate:s,debounceMs:0},h=m=>({...m,debounceMs:0});switch(e){case"submit":return[h(c),h(u),d];case"blur":return[u];case"change":return[c];case"server":default:return[]}}function uO(e,t){const{onChange:n,onBlur:r,onSubmit:i,onMount:s}=t.validators||{},a={cause:"change",validate:n},o={cause:"blur",validate:r},l={cause:"submit",validate:i},c={cause:"mount",validate:s},u={cause:"server",validate:()=>{}};switch(e){case"mount":return[c];case"submit":return[a,o,l,u];case"server":return[u];case"blur":return[o,u];case"change":default:return[a,u]}}const dO=e=>!!e&&typeof e=="object"&&"fields"in e;function Jg(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,s]of e)if(!t.has(i)||!Object.is(s,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n)if(!r.includes(i)||!Jg(e[i],t[i]))return!1;return!0}const yV=({newFormValidatorError:e,isPreviousErrorFromFormValidator:t,previousErrorValue:n})=>e?{newErrorValue:e,newSource:"form"}:t?{newErrorValue:void 0,newSource:void 0}:n?{newErrorValue:n,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},bV=({formLevelError:e,fieldLevelError:t})=>t?{newErrorValue:t,newSource:"field"}:e?{newErrorValue:e,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function XYe(e){const t=new Map;for(const n of e){const r=[...n.path??[]].map(i=>{const s=typeof i=="object"?i.key:i;return typeof s=="number"?`[${s}]`:s}).join(".").replace(/\.\[/g,"[");t.set(r,(t.get(r)??[]).concat(n))}return Object.fromEntries(t)}const vV=e=>{const t=XYe(e);return{form:t,fields:t}},_0={validate({value:e,validationSource:t},n){const r=n["~standard"].validate(e);if(r instanceof Promise)throw new Error("async function passed to sync validator");if(r.issues)return t==="field"?r.issues:vV(r.issues)},async validateAsync({value:e,validationSource:t},n){const r=await n["~standard"].validate(e);if(r.issues)return t==="field"?r.issues:vV(r.issues)}},noe=e=>!!e&&"~standard"in e,qk={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function YS(e){function t(d,h,m,y){const b=r(d,h,m,y);({insert:()=>o(b,d,h),remove:()=>l(b),swap:()=>y!==void 0&&u(b,d,h,y),move:()=>y!==void 0&&c(b,d,h,y)})[m]()}function n(d,h){return`${d}[${h}]`}function r(d,h,m,y){const b=[n(d,h)];if(m==="swap")b.push(n(d,y));else if(m==="move"){const[v,x]=[Math.min(h,y),Math.max(h,y)];for(let w=v;w<=x;w++)b.push(n(d,w))}else{const v=e.getFieldValue(d),x=Array.isArray(v)?v.length:0;for(let w=h+1;w<x;w++)b.push(n(d,w))}return Object.keys(e.fieldInfo).filter(v=>b.some(x=>v.startsWith(x)))}function i(d,h){return d.replace(/\[(\d+)\]/,(m,y)=>{const b=parseInt(y,10);return`[${h==="up"?b+1:Math.max(0,b-1)}]`})}function s(d,h){(h==="up"?d:[...d].reverse()).forEach(y=>{const b=i(y.toString(),h),v=e.getFieldMeta(b);v?e.setFieldMeta(y,v):e.setFieldMeta(y,a())})}const a=()=>qk,o=(d,h,m)=>{s(d,"down"),d.forEach(y=>{y.toString().startsWith(n(h,m))&&e.setFieldMeta(y,a())})},l=d=>{s(d,"up")},c=(d,h,m,y)=>{const b=new Map(Object.keys(e.fieldInfo).filter(v=>v.startsWith(n(h,m))).map(v=>[v,e.getFieldMeta(v)]));s(d,m<y?"up":"down"),Object.keys(e.fieldInfo).filter(v=>v.startsWith(n(h,y))).forEach(v=>{const x=v.replace(n(h,y),n(h,m)),w=b.get(x);w&&e.setFieldMeta(v,w)})},u=(d,h,m,y)=>{d.forEach(b=>{if(!b.toString().startsWith(n(h,m)))return;const v=b.toString().replace(n(h,m),n(h,y)),[x,w]=[e.getFieldMeta(b),e.getFieldMeta(v)];x&&e.setFieldMeta(v,x),w&&e.setFieldMeta(b,w)})};return{handleArrayFieldMetaShift:t}}function s3(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,isSubmitSuccessful:e.isSubmitSuccessful??!1,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}class JYe{constructor(t){var n;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{var r,i;const s=this.fieldMetaDerived.mount(),a=this.store.mount(),o=()=>{s(),a()};(i=(r=this.options.listeners)==null?void 0:r.onMount)==null||i.call(r,{formApi:this});const{onMount:l}=this.options.validators||{};return l&&this.validateSync("mount"),o},this.update=r=>{var i,s;if(!r)return;const a=this.options;this.options=r;const o=!!((s=(i=r.transform)==null?void 0:i.deps)!=null&&s.some((u,d)=>u!==this.prevTransformArray[d])),l=r.defaultValues&&!Jg(r.defaultValues,a.defaultValues)&&!this.state.isTouched,c=!Jg(r.defaultState,a.defaultState)&&!this.state.isTouched;!l&&!c&&!o||Zc(()=>{this.baseStore.setState(()=>s3(Object.assign({},this.state,c?r.defaultState:{},l?{values:r.defaultValues}:{},o?{_force_re_eval:!this.state._force_re_eval}:{})))})},this.reset=(r,i)=>{const{fieldMeta:s}=this.state,a=this.resetFieldMeta(s);r&&!(i!=null&&i.keepDefaultValues)&&(this.options={...this.options,defaultValues:r}),this.baseStore.setState(()=>{var o;return s3({...this.options.defaultState,values:r??this.options.defaultValues??((o=this.options.defaultState)==null?void 0:o.values),fieldMetaBase:a})})},this.validateAllFields=async r=>{const i=[];return Zc(()=>{Object.values(this.fieldInfo).forEach(a=>{if(!a.instance)return;const o=a.instance;i.push(Promise.resolve().then(()=>o.validate(r,{skipFormValidation:!0}))),a.instance.state.meta.isTouched||a.instance.setMeta(l=>({...l,isTouched:!0}))})}),(await Promise.all(i)).flat()},this.validateArrayFieldsStartingFrom=async(r,i,s)=>{const a=this.getFieldValue(r),o=Array.isArray(a)?Math.max(a.length-1,0):null,l=[`${r}[${i}]`];for(let h=i+1;h<=(o??0);h++)l.push(`${r}[${h}]`);const c=Object.keys(this.fieldInfo).filter(h=>l.some(m=>h.startsWith(m))),u=[];return Zc(()=>{c.forEach(h=>{u.push(Promise.resolve().then(()=>this.validateField(h,s)))})}),(await Promise.all(u)).flat()},this.validateField=(r,i)=>{var s;const a=(s=this.fieldInfo[r])==null?void 0:s.instance;return a?(a.state.meta.isTouched||a.setMeta(o=>({...o,isTouched:!0})),a.validate(i)):[]},this.validateSync=r=>{const i=uO(r,this.options);let s=!1;const a={};return Zc(()=>{var o,l;for(const u of i){if(!u.validate)continue;const d=this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:h,fieldErrors:m}=F2(d),y=ZS(u.cause);for(const b of Object.keys(this.state.fieldMeta)){const v=this.getFieldMeta(b);if(!v)continue;const{errorMap:x,errorSourceMap:w}=v,S=m==null?void 0:m[b],{newErrorValue:C,newSource:k}=yV({newFormValidatorError:S,isPreviousErrorFromFormValidator:(w==null?void 0:w[y])==="form",previousErrorValue:x==null?void 0:x[y]});k==="form"&&(a[b]={...a[b],[y]:S}),(x==null?void 0:x[y])!==C&&this.setFieldMeta(b,A=>({...A,errorMap:{...A.errorMap,[y]:C},errorSourceMap:{...A.errorSourceMap,[y]:k}}))}((o=this.state.errorMap)==null?void 0:o[y])!==h&&this.baseStore.setState(b=>({...b,errorMap:{...b.errorMap,[y]:h}})),(h||m)&&(s=!0)}const c=ZS("submit");(l=this.state.errorMap)!=null&&l[c]&&r!=="submit"&&!s&&this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[c]:void 0}}))}),{hasErrored:s,fieldsErrorMap:a}},this.validateAsync=async r=>{const i=cO(r,this.options);this.state.isFormValidating||this.baseStore.setState(c=>({...c,isFormValidating:!0}));const s=[];let a;for(const c of i){if(!c.validate)continue;const u=ZS(c.cause),d=this.state.validationMetaMap[u];d==null||d.lastAbortController.abort();const h=new AbortController;this.state.validationMetaMap[u]={lastAbortController:h},s.push(new Promise(async m=>{let y;try{y=await new Promise((w,S)=>{setTimeout(async()=>{if(h.signal.aborted)return w(void 0);try{w(await this.runValidator({validate:c.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:h.signal},type:"validateAsync"}))}catch(C){S(C)}},c.debounceMs)})}catch(w){y=w}const{formError:b,fieldErrors:v}=F2(y);v&&(a=a?{...a,...v}:v);const x=ZS(c.cause);for(const w of Object.keys(this.state.fieldMeta)){const S=this.getFieldMeta(w);if(!S)continue;const{errorMap:C,errorSourceMap:k}=S,A=a==null?void 0:a[w],{newErrorValue:R,newSource:N}=yV({newFormValidatorError:A,isPreviousErrorFromFormValidator:(k==null?void 0:k[x])==="form",previousErrorValue:C==null?void 0:C[x]});(C==null?void 0:C[x])!==R&&this.setFieldMeta(w,I=>({...I,errorMap:{...I.errorMap,[x]:R},errorSourceMap:{...I.errorSourceMap,[x]:N}}))}this.baseStore.setState(w=>({...w,errorMap:{...w.errorMap,[x]:b}})),m(a?{fieldErrors:a,errorMapKey:x}:void 0)}))}let o=[];const l={};if(s.length){o=await Promise.all(s);for(const c of o)if(c!=null&&c.fieldErrors){const{errorMapKey:u}=c;for(const[d,h]of Object.entries(c.fieldErrors)){const y={...l[d]||{},[u]:h};l[d]=y}}}return this.baseStore.setState(c=>({...c,isFormValidating:!1})),l},this.validate=r=>{const{hasErrored:i,fieldsErrorMap:s}=this.validateSync(r);return i&&!this.options.asyncAlways?s:this.validateAsync(r)},this.getFieldValue=r=>Zv(this.state.values,r),this.getFieldMeta=r=>this.state.fieldMeta[r],this.getFieldInfo=r=>{var i;return(i=this.fieldInfo)[r]||(i[r]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(r,i)=>{this.baseStore.setState(s=>({...s,fieldMetaBase:{...s.fieldMetaBase,[r]:VT(i,s.fieldMetaBase[r])}}))},this.resetFieldMeta=r=>Object.keys(r).reduce((i,s)=>{const a=s;return i[a]=qk,i},{}),this.setFieldValue=(r,i,s)=>{const a=(s==null?void 0:s.dontUpdateMeta)??!1;Zc(()=>{a||this.setFieldMeta(r,o=>({...o,isTouched:!0,isDirty:!0,errorMap:{...o==null?void 0:o.errorMap,onMount:void 0}})),this.baseStore.setState(o=>({...o,values:GS(o.values,r,i)}))})},this.deleteField=r=>{const s=[...Object.keys(this.fieldInfo).filter(a=>{const o=r.toString();return a!==o&&a.startsWith(o)}),r];this.baseStore.setState(a=>{const o={...a};return s.forEach(l=>{o.values=VYe(o.values,l),delete this.fieldInfo[l],delete o.fieldMetaBase[l]}),o})},this.pushFieldValue=(r,i,s)=>{this.setFieldValue(r,a=>[...Array.isArray(a)?a:[],i],s),this.validateField(r,"change")},this.insertFieldValue=async(r,i,s,a)=>{this.setFieldValue(r,o=>[...o.slice(0,i),s,...o.slice(i)],a),await this.validateField(r,"change"),YS(this).handleArrayFieldMetaShift(r,i,"insert"),await this.validateArrayFieldsStartingFrom(r,i,"change")},this.replaceFieldValue=async(r,i,s,a)=>{this.setFieldValue(r,o=>o.map((l,c)=>c===i?s:l),a),await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,i,"change")},this.removeFieldValue=async(r,i,s)=>{const a=this.getFieldValue(r),o=Array.isArray(a)?Math.max(a.length-1,0):null;if(this.setFieldValue(r,l=>l.filter((c,u)=>u!==i),s),YS(this).handleArrayFieldMetaShift(r,i,"remove"),o!==null){const l=`${r}[${o}]`;this.deleteField(l)}await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,i,"change")},this.swapFieldValues=(r,i,s,a)=>{this.setFieldValue(r,o=>{const l=o[i],c=o[s];return GS(GS(o,`${i}`,c),`${s}`,l)},a),YS(this).handleArrayFieldMetaShift(r,i,"swap",s),this.validateField(r,"change"),this.validateField(`${r}[${i}]`,"change"),this.validateField(`${r}[${s}]`,"change")},this.moveFieldValues=(r,i,s,a)=>{this.setFieldValue(r,o=>{const l=[...o];return l.splice(s,0,l.splice(i,1)[0]),l},a),YS(this).handleArrayFieldMetaShift(r,i,"move",s),this.validateField(r,"change"),this.validateField(`${r}[${i}]`,"change"),this.validateField(`${r}[${s}]`,"change")},this.clearFieldValues=(r,i)=>{const s=this.getFieldValue(r),a=Array.isArray(s)?Math.max(s.length-1,0):null;if(this.setFieldValue(r,[],i),a!==null)for(let o=0;o<=a;o++){const l=`${r}[${o}]`;this.deleteField(l)}this.validateField(r,"change")},this.resetField=r=>{this.baseStore.setState(i=>({...i,fieldMetaBase:{...i.fieldMetaBase,[r]:qk},values:this.options.defaultValues?GS(i.values,r,Zv(this.options.defaultValues,r)):i.values}))},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((r,[i,s])=>(Object.keys(s).length&&s.errors.length&&(r[i]={errors:s.errors,errorMap:s.errorMap}),r),{})}),this.parseValuesWithSchema=r=>_0.validate({value:this.state.values,validationSource:"form"},r),this.parseValuesWithSchemaAsync=r=>_0.validateAsync({value:this.state.values,validationSource:"form"},r),this.baseStore=new oO(s3({...t==null?void 0:t.defaultState,values:(t==null?void 0:t.defaultValues)??((n=t==null?void 0:t.defaultState)==null?void 0:n.values)})),this.fieldMetaDerived=new Id({deps:[this.baseStore],fn:({prevDepVals:r,currDepVals:i,prevVal:s})=>{var a,o,l;const c=s,u=r==null?void 0:r[0],d=i[0];let h=0;const m={};for(const y of Object.keys(d.fieldMetaBase)){const b=d.fieldMetaBase[y],v=u==null?void 0:u.fieldMetaBase[y],x=c==null?void 0:c[y],w=Zv(d.values,y);let S=x==null?void 0:x.errors;if(!v||b.errorMap!==v.errorMap){S=Object.values(b.errorMap??{}).filter(N=>N!==void 0);const R=(a=this.getFieldInfo(y))==null?void 0:a.instance;R&&!R.options.disableErrorFlat&&(S=S==null?void 0:S.flat(1))}const C=!ZYe(S??[]),k=!b.isDirty,A=Jg(w,Zv(this.options.defaultValues,y))||Jg(w,(l=(o=this.getFieldInfo(y))==null?void 0:o.instance)==null?void 0:l.options.defaultValue);if(x&&x.isPristine===k&&x.isValid===C&&x.isDefaultValue===A&&x.errors===S&&b===v){m[y]=x,h++;continue}m[y]={...b,errors:S,isPristine:k,isValid:C,isDefaultValue:A}}return Object.keys(d.fieldMetaBase).length&&c&&h===Object.keys(d.fieldMetaBase).length?c:m}}),this.store=new Id({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:r,currDepVals:i,prevVal:s})=>{var a,o,l,c;const u=s,d=r==null?void 0:r[0],h=i[0],m=i[1],y=Object.values(m).filter(Boolean),b=y.some($=>$.isValidating),v=y.every($=>$.isValid),x=y.some($=>$.isTouched),w=y.some($=>$.isBlurred),S=y.every($=>$.isDefaultValue),C=x&&((a=h.errorMap)==null?void 0:a.onMount),k=y.some($=>$.isDirty),A=!k,R=!!((o=h.errorMap)!=null&&o.onMount||y.some($=>{var ne;return(ne=$==null?void 0:$.errorMap)==null?void 0:ne.onMount})),N=!!b;let I=(u==null?void 0:u.errors)??[];(!d||h.errorMap!==d.errorMap)&&(I=Object.values(h.errorMap).reduce(($,ne)=>ne===void 0?$:ne&&dO(ne)?($.push(ne.form),$):($.push(ne),$),[]));const O=I.length===0,L=v&&O,P=this.options.canSubmitWhenInvalid??!1,V=h.submissionAttempts===0&&!x&&!R||!N&&!h.isSubmitting&&L||P;let F=h.errorMap;if(C&&(I=I.filter($=>$!==h.errorMap.onMount),F=Object.assign(F,{onMount:void 0})),u&&d&&u.errorMap===F&&u.fieldMeta===this.fieldMetaDerived.state&&u.errors===I&&u.isFieldsValidating===b&&u.isFieldsValid===v&&u.isFormValid===O&&u.isValid===L&&u.canSubmit===V&&u.isTouched===x&&u.isBlurred===w&&u.isPristine===A&&u.isDefaultValue===S&&u.isDirty===k&&Jg(d,h))return u;let J={...h,errorMap:F,fieldMeta:this.fieldMetaDerived.state,errors:I,isFieldsValidating:b,isFieldsValid:v,isFormValid:O,isValid:L,canSubmit:V,isTouched:x,isBlurred:w,isPristine:A,isDefaultValue:S,isDirty:k};const U=((l=this.options.transform)==null?void 0:l.deps)??[];if(U.length!==this.prevTransformArray.length||U.some(($,ne)=>$!==this.prevTransformArray[ne])){const $=Object.assign({},this,{state:J});(c=this.options.transform)==null||c.fn($),J=$.state,this.prevTransformArray=U}return J}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(t||{})}get state(){return this.store.state}runValidator(t){return noe(t.validate)?_0[t.type](t.value,t.validate):t.validate(t.value)}async handleSubmit(t){var n,r,i,s,a,o,l,c;if(this.baseStore.setState(d=>({...d,isSubmitted:!1,submissionAttempts:d.submissionAttempts+1,isSubmitSuccessful:!1})),Zc(()=>{Object.values(this.fieldInfo).forEach(d=>{d.instance&&(d.instance.state.meta.isTouched||d.instance.setMeta(h=>({...h,isTouched:!0})))})}),!this.state.canSubmit)return;this.baseStore.setState(d=>({...d,isSubmitting:!0}));const u=()=>{this.baseStore.setState(d=>({...d,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){u(),(r=(n=this.options).onSubmitInvalid)==null||r.call(n,{value:this.state.values,formApi:this});return}if(await this.validate("submit"),!this.state.isValid){u(),(s=(i=this.options).onSubmitInvalid)==null||s.call(i,{value:this.state.values,formApi:this});return}Zc(()=>{Object.values(this.fieldInfo).forEach(d=>{var h,m,y;(y=(m=(h=d.instance)==null?void 0:h.options.listeners)==null?void 0:m.onSubmit)==null||y.call(m,{value:d.instance.state.value,fieldApi:d.instance})})}),(o=(a=this.options.listeners)==null?void 0:a.onSubmit)==null||o.call(a,{formApi:this});try{await((c=(l=this.options).onSubmit)==null?void 0:c.call(l,{value:this.state.values,formApi:this,meta:t??this.options.onSubmitMeta})),Zc(()=>{this.baseStore.setState(d=>({...d,isSubmitted:!0,isSubmitSuccessful:!0})),u()})}catch(d){throw this.baseStore.setState(h=>({...h,isSubmitSuccessful:!1})),u(),d}}setErrorMap(t){Zc(()=>{Object.entries(t).forEach(([n,r])=>{const i=n;if(dO(r)){const{formError:s,fieldErrors:a}=F2(r);for(const o of Object.keys(this.fieldInfo))this.getFieldMeta(o)&&this.setFieldMeta(o,c=>({...c,errorMap:{...c.errorMap,[i]:a==null?void 0:a[o]},errorSourceMap:{...c.errorSourceMap,[i]:"form"}}));this.baseStore.setState(o=>({...o,errorMap:{...o.errorMap,[i]:s}}))}else this.baseStore.setState(s=>({...s,errorMap:{...s.errorMap,[i]:r}}))})})}}function F2(e){if(e){if(dO(e)){const t=F2(e.form).formError,n=e.fields;return{formError:t,fieldErrors:n}}return{formError:e}}return{formError:void 0}}function ZS(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}class QYe{constructor(t){this.options={},this.mount=()=>{var n,r;const i=this.store.mount();this.options.defaultValue!==void 0&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const s=this.getInfo();s.instance=this,this.update(this.options);const{onMount:a}=this.options.validators||{};if(a){const o=this.runValidator({validate:a,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});o&&this.setMeta(l=>({...l,errorMap:{...l==null?void 0:l.errorMap,onMount:o},errorSourceMap:{...l==null?void 0:l.errorSourceMap,onMount:"field"}}))}return(r=(n=this.options.listeners)==null?void 0:n.onMount)==null||r.call(n,{value:this.state.value,fieldApi:this}),i},this.update=n=>{this.options=n;const r=this.name!==n.name;if(this.name=n.name,this.state.value===void 0){const i=Zv(n.form.options.defaultValues,n.name),s=n.defaultValue??i;r?this.setValue(a=>a||s,{dontUpdateMeta:!0}):s!==void 0&&this.setValue(s,{dontUpdateMeta:!0})}this.form.getFieldMeta(this.name)===void 0&&this.setMeta(this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(n,r)=>{this.form.setFieldValue(this.name,n,r),this.triggerOnChangeListener(),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=n=>this.form.setFieldMeta(this.name,n),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(n,r)=>{this.form.pushFieldValue(this.name,n,r),this.triggerOnChangeListener()},this.insertValue=(n,r,i)=>{this.form.insertFieldValue(this.name,n,r,i),this.triggerOnChangeListener()},this.replaceValue=(n,r,i)=>{this.form.replaceFieldValue(this.name,n,r,i),this.triggerOnChangeListener()},this.removeValue=(n,r)=>{this.form.removeFieldValue(this.name,n,r),this.triggerOnChangeListener()},this.swapValues=(n,r,i)=>{this.form.swapFieldValues(this.name,n,r,i),this.triggerOnChangeListener()},this.moveValue=(n,r,i)=>{this.form.moveFieldValues(this.name,n,r,i),this.triggerOnChangeListener()},this.clearValues=n=>{this.form.clearFieldValues(this.name,n),this.triggerOnChangeListener()},this.getLinkedFields=n=>{const r=Object.values(this.form.fieldInfo),i=[];for(const s of r){if(!s.instance)continue;const{onChangeListenTo:a,onBlurListenTo:o}=s.instance.options.validators||{};n==="change"&&(a!=null&&a.includes(this.name))&&i.push(s.instance),n==="blur"&&(o!=null&&o.includes(this.name))&&i.push(s.instance)}return i},this.validateSync=(n,r)=>{var i;const s=uO(n,this.options),o=this.getLinkedFields(n).reduce((u,d)=>{const h=uO(n,d.options);return h.forEach(m=>{m.field=d}),u.concat(h)},[]);let l=!1;Zc(()=>{const u=(d,h)=>{var m;const y=XS(h.cause),b=h.validate?xV(d.runValidator({validate:h.validate,value:{value:d.store.state.value,validationSource:"field",fieldApi:d},type:"validate"})):void 0,v=r[y],{newErrorValue:x,newSource:w}=bV({formLevelError:v,fieldLevelError:b});((m=d.state.meta.errorMap)==null?void 0:m[y])!==x&&d.setMeta(S=>({...S,errorMap:{...S.errorMap,[y]:x},errorSourceMap:{...S.errorSourceMap,[y]:w}})),x&&(l=!0)};for(const d of s)u(this,d);for(const d of o)d.validate&&u(d.field,d)});const c=XS("submit");return(i=this.state.meta.errorMap)!=null&&i[c]&&n!=="submit"&&!l&&this.setMeta(u=>({...u,errorMap:{...u.errorMap,[c]:void 0},errorSourceMap:{...u.errorSourceMap,[c]:void 0}})),{hasErrored:l}},this.validateAsync=async(n,r)=>{const i=cO(n,this.options),s=await r,a=this.getLinkedFields(n),o=a.reduce((h,m)=>{const y=cO(n,m.options);return y.forEach(b=>{b.field=m}),h.concat(y)},[]);this.state.meta.isValidating||this.setMeta(h=>({...h,isValidating:!0}));for(const h of a)h.setMeta(m=>({...m,isValidating:!0}));const l=[],c=[],u=(h,m,y)=>{const b=XS(m.cause),v=h.getInfo().validationMetaMap[b];v==null||v.lastAbortController.abort();const x=new AbortController;this.getInfo().validationMetaMap[b]={lastAbortController:x},y.push(new Promise(async w=>{var S;let C;try{C=await new Promise((I,O)=>{this.timeoutIds.validations[m.cause]&&clearTimeout(this.timeoutIds.validations[m.cause]),this.timeoutIds.validations[m.cause]=setTimeout(async()=>{if(x.signal.aborted)return I(void 0);try{I(await this.runValidator({validate:m.validate,value:{value:h.store.state.value,fieldApi:h,signal:x.signal,validationSource:"field"},type:"validateAsync"}))}catch(L){O(L)}},m.debounceMs)})}catch(I){C=I}if(x.signal.aborted)return w(void 0);const k=xV(C),A=(S=s[this.name])==null?void 0:S[b],{newErrorValue:R,newSource:N}=bV({formLevelError:A,fieldLevelError:k});h.setMeta(I=>({...I,errorMap:{...I==null?void 0:I.errorMap,[b]:R},errorSourceMap:{...I.errorSourceMap,[b]:N}})),w(R)}))};for(const h of i)h.validate&&u(this,h,l);for(const h of o)h.validate&&u(h.field,h,c);let d=[];(l.length||c.length)&&(d=await Promise.all(l),await Promise.all(c)),this.setMeta(h=>({...h,isValidating:!1}));for(const h of a)h.setMeta(m=>({...m,isValidating:!1}));return d.filter(Boolean)},this.validate=(n,r)=>{var i;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:s}=r!=null&&r.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(n),{hasErrored:a}=this.validateSync(n,s[this.name]??{});if(a&&!this.options.asyncAlways)return(i=this.getInfo().validationMetaMap[XS(n)])==null||i.lastAbortController.abort(),this.state.meta.errors;const o=r!=null&&r.skipFormValidation?Promise.resolve({}):this.form.validateAsync(n);return this.validateAsync(n,o)},this.handleChange=n=>{this.setValue(n)},this.handleBlur=()=>{this.state.meta.isTouched||(this.setMeta(r=>({...r,isTouched:!0})),this.validate("change")),this.state.meta.isBlurred||this.setMeta(r=>({...r,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.parseValueWithSchema=n=>_0.validate({value:this.state.value,validationSource:"field"},n),this.parseValueWithSchemaAsync=n=>_0.validateAsync({value:this.state.value,validationSource:"field"},n),this.form=t.form,this.name=t.name,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new Id({deps:[this.form.store],fn:()=>{const n=this.form.getFieldValue(this.name),r=this.form.getFieldMeta(this.name)??{...qk,...t.defaultMeta};return{value:n,meta:r}}}),this.options=t}get state(){return this.store.state}runValidator(t){return noe(t.validate)?_0[t.type](t.value,t.validate):t.validate(t.value)}setErrorMap(t){this.setMeta(n=>({...n,errorMap:{...n.errorMap,...t}}))}triggerOnBlurListener(){var t,n,r,i,s,a;const o=(t=this.form.options.listeners)==null?void 0:t.onBlurDebounceMs;o&&o>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{var c,u;(u=(c=this.form.options.listeners)==null?void 0:c.onBlur)==null||u.call(c,{formApi:this.form,fieldApi:this})},o)):(r=(n=this.form.options.listeners)==null?void 0:n.onBlur)==null||r.call(n,{formApi:this.form,fieldApi:this});const l=(i=this.options.listeners)==null?void 0:i.onBlurDebounceMs;l&&l>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{var c,u;(u=(c=this.options.listeners)==null?void 0:c.onBlur)==null||u.call(c,{value:this.state.value,fieldApi:this})},l)):(a=(s=this.options.listeners)==null?void 0:s.onBlur)==null||a.call(s,{value:this.state.value,fieldApi:this})}triggerOnChangeListener(){var t,n,r,i,s,a;const o=(t=this.form.options.listeners)==null?void 0:t.onChangeDebounceMs;o&&o>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{var c,u;(u=(c=this.form.options.listeners)==null?void 0:c.onChange)==null||u.call(c,{formApi:this.form,fieldApi:this})},o)):(r=(n=this.form.options.listeners)==null?void 0:n.onChange)==null||r.call(n,{formApi:this.form,fieldApi:this});const l=(i=this.options.listeners)==null?void 0:i.onChangeDebounceMs;l&&l>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{var c,u;(u=(c=this.options.listeners)==null?void 0:c.onChange)==null||u.call(c,{value:this.state.value,fieldApi:this})},l)):(a=(s=this.options.listeners)==null?void 0:s.onChange)==null||a.call(s,{value:this.state.value,fieldApi:this})}}function xV(e){if(e)return e}function XS(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}var a3={exports:{}},o3={},l3={exports:{}},c3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wV;function eZe(){if(wV)return c3;wV=1;var e=Hw();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,a=e.useDebugValue;function o(d,h){var m=h(),y=r({inst:{value:m,getSnapshot:h}}),b=y[0].inst,v=y[1];return s(function(){b.value=m,b.getSnapshot=h,l(b)&&v({inst:b})},[d,m,h]),i(function(){return l(b)&&v({inst:b}),d(function(){l(b)&&v({inst:b})})},[d]),a(m),m}function l(d){var h=d.getSnapshot;d=d.value;try{var m=h();return!n(d,m)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return c3.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,c3}var _V;function tZe(){return _V||(_V=1,l3.exports=eZe()),l3.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SV;function nZe(){if(SV)return o3;SV=1;var e=Hw(),t=tZe();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,a=e.useEffect,o=e.useMemo,l=e.useDebugValue;return o3.useSyncExternalStoreWithSelector=function(c,u,d,h,m){var y=s(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=o(function(){function x(A){if(!w){if(w=!0,S=A,A=h(A),m!==void 0&&b.hasValue){var R=b.value;if(m(R,A))return C=R}return C=A}if(R=C,r(S,A))return R;var N=h(A);return m!==void 0&&m(R,N)?(S=A,R):(S=A,C=N)}var w=!1,S,C,k=d===void 0?null:d;return[function(){return x(u())},k===null?void 0:function(){return x(k())}]},[u,d,h,m]);var v=i(c,y[0],y[1]);return a(function(){b.hasValue=!0,b.value=v},[v]),l(v),v},o3}var CV;function rZe(){return CV||(CV=1,a3.exports=nZe()),a3.exports}var iZe=rZe();function w5(e,t=n=>n){return iZe.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,sZe)}function sZe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!t.has(r)||!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const Vk=typeof window<"u"?T.useLayoutEffect:T.useEffect;function aZe(e){const[t]=T.useState(()=>{const r=new QYe({...e,form:e.form,name:e.name});return r.Field=roe,r});return Vk(t.mount,[t]),Vk(()=>{t.update(e)}),w5(t.store,e.mode==="array"?n=>[n.meta,Object.keys(n.value??[]).length]:void 0),t}const roe=({children:e,...t})=>{const n=aZe(t),r=T.useMemo(()=>VT(e,n),[e,n,n.state.value,n.state.meta]);return p.jsx(p.Fragment,{children:r})};function oZe({form:e,selector:t,children:n}){const r=w5(e.store,t);return VT(n,r)}function Ns(e){const[t]=T.useState(()=>{const n=new JYe(e),r=n;return r.Field=function(s){return p.jsx(roe,{...s,form:n})},r.Subscribe=i=>p.jsx(oZe,{form:n,selector:i.selector,children:i.children}),r});return Vk(t.mount,[]),w5(t.store,n=>n.isSubmitting),Vk(()=>{t.update(e)}),t}function Un({className:e,type:t,...n}){return p.jsx("input",{type:t,"data-slot":"input",className:Ye("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function lZe(e){const t=e+"CollectionProvider",[n,r]=Vs(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:v,children:x}=b,w=Ve.useRef(null),S=Ve.useRef(new Map).current;return p.jsx(i,{scope:v,itemMap:S,collectionRef:w,children:x})};a.displayName=t;const o=e+"CollectionSlot",l=xu(o),c=Ve.forwardRef((b,v)=>{const{scope:x,children:w}=b,S=s(o,x),C=Tn(v,S.collectionRef);return p.jsx(l,{ref:C,children:w})});c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=xu(u),m=Ve.forwardRef((b,v)=>{const{scope:x,children:w,...S}=b,C=Ve.useRef(null),k=Tn(v,C),A=s(u,x);return Ve.useEffect(()=>(A.itemMap.set(C,{ref:C,...S}),()=>void A.itemMap.delete(C))),p.jsx(h,{[d]:"",ref:k,children:w})});m.displayName=u;function y(b){const v=s(e+"CollectionConsumer",b);return Ve.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((A,R)=>S.indexOf(A.ref.current)-S.indexOf(R.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:m},y,r]}var cZe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ys=cZe.reduce((e,t)=>{const n=xu(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function uZe(e,t){e&&Zo.flushSync(()=>e.dispatchEvent(t))}var dZe="DismissableLayer",fO="dismissableLayer.update",fZe="dismissableLayer.pointerDownOutside",hZe="dismissableLayer.focusOutside",kV,ioe=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),soe=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=T.useContext(ioe),[u,d]=T.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=T.useState({}),y=Tn(t,R=>d(R)),b=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(v),w=u?b.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,C=w>=x,k=gZe(R=>{const N=R.target,I=[...c.branches].some(O=>O.contains(N));!C||I||(i==null||i(R),a==null||a(R),R.defaultPrevented||o==null||o())},h),A=yZe(R=>{const N=R.target;[...c.branches].some(O=>O.contains(N))||(s==null||s(R),a==null||a(R),R.defaultPrevented||o==null||o())},h);return QO(R=>{w===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},h),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(kV=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),EV(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=kV)}},[u,h,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),EV())},[u,c]),T.useEffect(()=>{const R=()=>m({});return document.addEventListener(fO,R),()=>document.removeEventListener(fO,R)},[]),p.jsx(ys.div,{...l,ref:y,style:{pointerEvents:S?C?"auto":"none":void 0,...e.style},onFocusCapture:Wt(e.onFocusCapture,A.onFocusCapture),onBlurCapture:Wt(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Wt(e.onPointerDownCapture,k.onPointerDownCapture)})});soe.displayName=dZe;var pZe="DismissableLayerBranch",mZe=T.forwardRef((e,t)=>{const n=T.useContext(ioe),r=T.useRef(null),i=Tn(t,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(ys.div,{...e,ref:i})});mZe.displayName=pZe;function gZe(e,t=globalThis==null?void 0:globalThis.document){const n=_i(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let l=function(){aoe(fZe,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function yZe(e,t=globalThis==null?void 0:globalThis.document){const n=_i(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&aoe(hZe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function EV(){const e=new CustomEvent(fO);document.dispatchEvent(e)}function aoe(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?uZe(i,s):i.dispatchEvent(s)}var u3=0;function WT(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??TV()),document.body.insertAdjacentElement("beforeend",e[1]??TV()),u3++,()=>{u3===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),u3--}},[])}function TV(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var d3="focusScope.autoFocusOnMount",f3="focusScope.autoFocusOnUnmount",AV={bubbles:!1,cancelable:!0},bZe="FocusScope",ooe=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=T.useState(null),c=_i(i),u=_i(s),d=T.useRef(null),h=Tn(t,b=>l(b)),m=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(S){if(m.paused||!o)return;const C=S.target;o.contains(C)?d.current=C:Uf(d.current,{select:!0})},v=function(S){if(m.paused||!o)return;const C=S.relatedTarget;C!==null&&(o.contains(C)||Uf(d.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const k of S)k.removedNodes.length>0&&Uf(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",v);const w=new MutationObserver(x);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",v),w.disconnect()}}},[r,o,m.paused]),T.useEffect(()=>{if(o){NV.add(m);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(d3,AV);o.addEventListener(d3,c),o.dispatchEvent(x),x.defaultPrevented||(vZe(CZe(loe(o)),{select:!0}),document.activeElement===b&&Uf(o))}return()=>{o.removeEventListener(d3,c),setTimeout(()=>{const x=new CustomEvent(f3,AV);o.addEventListener(f3,u),o.dispatchEvent(x),x.defaultPrevented||Uf(b??document.body,{select:!0}),o.removeEventListener(f3,u),NV.remove(m)},0)}}},[o,c,u,m]);const y=T.useCallback(b=>{if(!n&&!r||m.paused)return;const v=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(v&&x){const w=b.currentTarget,[S,C]=xZe(w);S&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Uf(S,{select:!0})):b.shiftKey&&x===S&&(b.preventDefault(),n&&Uf(C,{select:!0})):x===w&&b.preventDefault()}},[n,r,m.paused]);return p.jsx(ys.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});ooe.displayName=bZe;function vZe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Uf(r,{select:t}),document.activeElement!==n)return}function xZe(e){const t=loe(e),n=RV(t,e),r=RV(t.reverse(),e);return[n,r]}function loe(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function RV(e,t){for(const n of e)if(!wZe(n,{upTo:t}))return n}function wZe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function _Ze(e){return e instanceof HTMLInputElement&&"select"in e}function Uf(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&_Ze(e)&&t&&e.select()}}var NV=SZe();function SZe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=MV(e,t),e.unshift(t)},remove(t){var n;e=MV(e,t),(n=e[0])==null||n.resume()}}}function MV(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function CZe(e){return e.filter(t=>t.tagName!=="A")}var kZe="Arrow",coe=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return p.jsx(ys.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});coe.displayName=kZe;var EZe=coe,_5="Popper",[uoe,doe]=Vs(_5),[TZe,foe]=uoe(_5),hoe=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return p.jsx(TZe,{scope:t,anchor:r,onAnchorChange:i,children:n})};hoe.displayName=_5;var poe="PopperAnchor",moe=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=foe(poe,n),a=T.useRef(null),o=Tn(t,a);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:p.jsx(ys.div,{...i,ref:o})});moe.displayName=poe;var S5="PopperContent",[AZe,RZe]=uoe(S5),goe=T.forwardRef((e,t)=>{var je,Me,Se,qe,Qe,We;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...b}=e,v=foe(S5,n),[x,w]=T.useState(null),S=Tn(t,Re=>w(Re)),[C,k]=T.useState(null),A=Ay(C),R=(A==null?void 0:A.width)??0,N=(A==null?void 0:A.height)??0,I=r+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],P=L.length>0,V={padding:O,boundary:L.filter(MZe),altBoundary:P},{refs:F,floatingStyles:J,placement:U,isPositioned:G,middlewareData:$}=lP({strategy:"fixed",placement:I,whileElementsMounted:(...Re)=>oP(...Re,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[cP({mainAxis:i+N,alignmentAxis:a}),l&&uP({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?dP():void 0,...V}),l&&fP({...V}),hP({...V,apply:({elements:Re,rects:K,availableWidth:ge,availableHeight:Te})=>{const{width:ce,height:le}=K.reference,ie=Re.floating.style;ie.setProperty("--radix-popper-available-width",`${ge}px`),ie.setProperty("--radix-popper-available-height",`${Te}px`),ie.setProperty("--radix-popper-anchor-width",`${ce}px`),ie.setProperty("--radix-popper-anchor-height",`${le}px`)}}),C&&mP({element:C,padding:o}),IZe({arrowWidth:R,arrowHeight:N}),h&&pP({strategy:"referenceHidden",...V})]}),[ne,W]=voe(U),te=_i(y);Ji(()=>{G&&(te==null||te())},[G,te]);const ee=(je=$.arrow)==null?void 0:je.x,re=(Me=$.arrow)==null?void 0:Me.y,de=((Se=$.arrow)==null?void 0:Se.centerOffset)!==0,[oe,Ie]=T.useState();return Ji(()=>{x&&Ie(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:G?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(qe=$.transformOrigin)==null?void 0:qe.x,(Qe=$.transformOrigin)==null?void 0:Qe.y].join(" "),...((We=$.hide)==null?void 0:We.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(AZe,{scope:n,placedSide:ne,onArrowChange:k,arrowX:ee,arrowY:re,shouldHideArrow:de,children:p.jsx(ys.div,{"data-side":ne,"data-align":W,...b,ref:S,style:{...b.style,animation:G?void 0:"none"}})})})});goe.displayName=S5;var yoe="PopperArrow",NZe={top:"bottom",right:"left",bottom:"top",left:"right"},boe=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=RZe(yoe,r),a=NZe[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(EZe,{...i,ref:n,style:{...i.style,display:"block"}})})});boe.displayName=yoe;function MZe(e){return e!==null}var IZe=e=>({name:"transformOrigin",options:e,fn(t){var v,x,w;const{placement:n,rects:r,middlewareData:i}=t,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,u]=voe(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let y="",b="";return c==="bottom"?(y=a?d:`${h}px`,b=`${-l}px`):c==="top"?(y=a?d:`${h}px`,b=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,b=a?d:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,b=a?d:`${m}px`),{data:{x:y,y:b}}}});function voe(e){const[t,n="center"]=e.split("-");return[t,n]}var jZe=hoe,OZe=moe,PZe=goe,DZe=boe,FZe="Portal",xoe=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=T.useState(!1);Ji(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?lE.createPortal(p.jsx(ys.div,{...r,ref:t}),a):null});xoe.displayName=FZe;function HT(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var woe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),LZe="VisuallyHidden",BZe=T.forwardRef((e,t)=>p.jsx(ys.span,{...e,ref:t,style:{...woe,...e.style}}));BZe.displayName=LZe;var $Ze=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},qg=new WeakMap,JS=new WeakMap,QS={},h3=0,_oe=function(e){return e&&(e.host||_oe(e.parentNode))},zZe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=_oe(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},UZe=function(e,t,n,r){var i=zZe(t,Array.isArray(e)?e:[e]);QS[n]||(QS[n]=new WeakMap);var s=QS[n],a=[],o=new Set,l=new Set(i),c=function(d){!d||o.has(d)||(o.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))u(h);else try{var m=h.getAttribute(r),y=m!==null&&m!=="false",b=(qg.get(h)||0)+1,v=(s.get(h)||0)+1;qg.set(h,b),s.set(h,v),a.push(h),b===1&&y&&JS.set(h,!0),v===1&&h.setAttribute(n,"true"),y||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return u(t),o.clear(),h3++,function(){a.forEach(function(d){var h=qg.get(d)-1,m=s.get(d)-1;qg.set(d,h),s.set(d,m),h||(JS.has(d)||d.removeAttribute(r),JS.delete(d)),m||d.removeAttribute(n)}),h3--,h3||(qg=new WeakMap,qg=new WeakMap,JS=new WeakMap,QS={})}},GT=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=$Ze(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),UZe(r,i,n,"aria-hidden")):function(){return null}},ou=function(){return ou=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ou.apply(this,arguments)};function Soe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function qZe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var L2="right-scroll-bar-position",B2="width-before-scroll-bar",VZe="with-scroll-bars-hidden",WZe="--removed-body-scroll-bar-size";function p3(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function HZe(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var GZe=typeof window<"u"?T.useLayoutEffect:T.useEffect,IV=new WeakMap;function KZe(e,t){var n=HZe(null,function(r){return e.forEach(function(i){return p3(i,r)})});return GZe(function(){var r=IV.get(n);if(r){var i=new Set(r),s=new Set(e),a=n.current;i.forEach(function(o){s.has(o)||p3(o,null)}),s.forEach(function(o){i.has(o)||p3(o,a)})}IV.set(n,e)},[e]),n}function YZe(e){return e}function ZZe(e,t){t===void 0&&(t=YZe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var l=function(){var u=a;a=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),n}}}};return i}function XZe(e){e===void 0&&(e={});var t=ZZe(null);return t.options=ou({async:!0,ssr:!1},e),t}var Coe=function(e){var t=e.sideCar,n=Soe(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,ou({},n))};Coe.isSideCarExport=!0;function JZe(e,t){return e.useMedium(t),Coe}var koe=XZe(),m3=function(){},KT=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:m3,onWheelCapture:m3,onTouchMoveCapture:m3}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,m=e.noIsolation,y=e.inert,b=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,w=e.gapMode,S=Soe(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=h,k=KZe([n,t]),A=ou(ou({},S),i);return T.createElement(T.Fragment,null,u&&T.createElement(C,{sideCar:koe,removeScrollBar:c,shards:d,noIsolation:m,inert:y,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:w}),a?T.cloneElement(T.Children.only(o),ou(ou({},A),{ref:k})):T.createElement(x,ou({},A,{className:l,ref:k}),o))});KT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};KT.classNames={fullWidth:B2,zeroRight:L2};var QZe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eXe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=QZe();return t&&e.setAttribute("nonce",t),e}function tXe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function nXe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var rXe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=eXe())&&(tXe(t,n),nXe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},iXe=function(){var e=rXe();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Eoe=function(){var e=iXe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},sXe={left:0,top:0,right:0,gap:0},g3=function(e){return parseInt(e||"",10)||0},aXe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[g3(n),g3(r),g3(i)]},oXe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return sXe;var t=aXe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},lXe=Eoe(),S0="data-scroll-locked",cXe=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(VZe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(S0,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(L2,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(B2,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(L2," .").concat(L2,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(B2," .").concat(B2,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(S0,`] {
    `).concat(WZe,": ").concat(o,`px;
  }
`)},jV=function(){var e=parseInt(document.body.getAttribute(S0)||"0",10);return isFinite(e)?e:0},uXe=function(){T.useEffect(function(){return document.body.setAttribute(S0,(jV()+1).toString()),function(){var e=jV()-1;e<=0?document.body.removeAttribute(S0):document.body.setAttribute(S0,e.toString())}},[])},dXe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;uXe();var s=T.useMemo(function(){return oXe(i)},[i]);return T.createElement(lXe,{styles:cXe(s,!t,i,n?"":"!important")})},hO=!1;if(typeof window<"u")try{var e2=Object.defineProperty({},"passive",{get:function(){return hO=!0,!0}});window.addEventListener("test",e2,e2),window.removeEventListener("test",e2,e2)}catch{hO=!1}var Vg=hO?{passive:!1}:!1,fXe=function(e){return e.tagName==="TEXTAREA"},Toe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!fXe(e)&&n[t]==="visible")},hXe=function(e){return Toe(e,"overflowY")},pXe=function(e){return Toe(e,"overflowX")},OV=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Aoe(e,r);if(i){var s=Roe(e,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},mXe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},gXe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Aoe=function(e,t){return e==="v"?hXe(t):pXe(t)},Roe=function(e,t){return e==="v"?mXe(t):gXe(t)},yXe=function(e,t){return e==="h"&&t==="rtl"?-1:1},bXe=function(e,t,n,r,i){var s=yXe(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,l=t.contains(o),c=!1,u=a>0,d=0,h=0;do{var m=Roe(e,o),y=m[0],b=m[1],v=m[2],x=b-v-s*y;(y||x)&&Aoe(e,o)&&(d+=x,h+=y),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},t2=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},PV=function(e){return[e.deltaX,e.deltaY]},DV=function(e){return e&&"current"in e?e.current:e},vXe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},xXe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},wXe=0,Wg=[];function _Xe(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(wXe++)[0],s=T.useState(Eoe)[0],a=T.useRef(e);T.useEffect(function(){a.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var b=qZe([e.lockRef.current],(e.shards||[]).map(DV),!0).filter(Boolean);return b.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),b.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=T.useCallback(function(b,v){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!a.current.allowPinchZoom;var x=t2(b),w=n.current,S="deltaX"in b?b.deltaX:w[0]-x[0],C="deltaY"in b?b.deltaY:w[1]-x[1],k,A=b.target,R=Math.abs(S)>Math.abs(C)?"h":"v";if("touches"in b&&R==="h"&&A.type==="range")return!1;var N=OV(R,A);if(!N)return!0;if(N?k=R:(k=R==="v"?"h":"v",N=OV(R,A)),!N)return!1;if(!r.current&&"changedTouches"in b&&(S||C)&&(r.current=k),!k)return!0;var I=r.current||k;return bXe(I,v,b,I==="h"?S:C)},[]),l=T.useCallback(function(b){var v=b;if(!(!Wg.length||Wg[Wg.length-1]!==s)){var x="deltaY"in v?PV(v):t2(v),w=t.current.filter(function(k){return k.name===v.type&&(k.target===v.target||v.target===k.shadowParent)&&vXe(k.delta,x)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var S=(a.current.shards||[]).map(DV).filter(Boolean).filter(function(k){return k.contains(v.target)}),C=S.length>0?o(v,S[0]):!a.current.noIsolation;C&&v.cancelable&&v.preventDefault()}}},[]),c=T.useCallback(function(b,v,x,w){var S={name:b,delta:v,target:x,should:w,shadowParent:SXe(x)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(C){return C!==S})},1)},[]),u=T.useCallback(function(b){n.current=t2(b),r.current=void 0},[]),d=T.useCallback(function(b){c(b.type,PV(b),b.target,o(b,e.lockRef.current))},[]),h=T.useCallback(function(b){c(b.type,t2(b),b.target,o(b,e.lockRef.current))},[]);T.useEffect(function(){return Wg.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Vg),document.addEventListener("touchmove",l,Vg),document.addEventListener("touchstart",u,Vg),function(){Wg=Wg.filter(function(b){return b!==s}),document.removeEventListener("wheel",l,Vg),document.removeEventListener("touchmove",l,Vg),document.removeEventListener("touchstart",u,Vg)}},[]);var m=e.removeScrollBar,y=e.inert;return T.createElement(T.Fragment,null,y?T.createElement(s,{styles:xXe(i)}):null,m?T.createElement(dXe,{gapMode:e.gapMode}):null)}function SXe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const CXe=JZe(koe,_Xe);var z1=T.forwardRef(function(e,t){return T.createElement(KT,ou({},e,{ref:t,sideCar:CXe}))});z1.classNames=KT.classNames;var kXe=[" ","Enter","ArrowUp","ArrowDown"],EXe=[" ","Enter"],dm="Select",[YT,ZT,TXe]=lZe(dm),[tb,eft]=Vs(dm,[TXe,doe]),XT=doe(),[AXe,$h]=tb(dm),[RXe,NXe]=tb(dm),Noe=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:m,form:y}=e,b=XT(t),[v,x]=T.useState(null),[w,S]=T.useState(null),[C,k]=T.useState(!1),A=Xy(c),[R,N]=Sc({prop:r,defaultProp:i??!1,onChange:s,caller:dm}),[I,O]=Sc({prop:a,defaultProp:o,onChange:l,caller:dm}),L=T.useRef(null),P=v?y||!!v.closest("form"):!0,[V,F]=T.useState(new Set),J=Array.from(V).map(U=>U.props.value).join(";");return p.jsx(jZe,{...b,children:p.jsxs(AXe,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:na(),value:I,onValueChange:O,open:R,onOpenChange:N,dir:A,triggerPointerDownPosRef:L,disabled:h,children:[p.jsx(YT.Provider,{scope:t,children:p.jsx(RXe,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback(U=>{F(G=>new Set(G).add(U))},[]),onNativeOptionRemove:T.useCallback(U=>{F(G=>{const $=new Set(G);return $.delete(U),$})},[]),children:n})}),P?p.jsxs(Joe,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:d,value:I,onChange:U=>O(U.target.value),disabled:h,form:y,children:[I===void 0?p.jsx("option",{value:""}):null,Array.from(V)]},J):null]})})};Noe.displayName=dm;var Moe="SelectTrigger",Ioe=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,s=XT(n),a=$h(Moe,n),o=a.disabled||r,l=Tn(t,a.onTriggerChange),c=ZT(n),u=T.useRef("touch"),[d,h,m]=ele(b=>{const v=c().filter(S=>!S.disabled),x=v.find(S=>S.value===a.value),w=tle(v,b,x);w!==void 0&&a.onValueChange(w.value)}),y=b=>{o||(a.onOpenChange(!0),m()),b&&(a.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return p.jsx(OZe,{asChild:!0,...s,children:p.jsx(ys.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Qoe(a.value)?"":void 0,...i,ref:l,onClick:Wt(i.onClick,b=>{b.currentTarget.focus(),u.current!=="mouse"&&y(b)}),onPointerDown:Wt(i.onPointerDown,b=>{u.current=b.pointerType;const v=b.target;v.hasPointerCapture(b.pointerId)&&v.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(y(b),b.preventDefault())}),onKeyDown:Wt(i.onKeyDown,b=>{const v=d.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&h(b.key),!(v&&b.key===" ")&&kXe.includes(b.key)&&(y(),b.preventDefault())})})})});Ioe.displayName=Moe;var joe="SelectValue",Ooe=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...o}=e,l=$h(joe,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=Tn(t,l.onValueNodeChange);return Ji(()=>{c(u)},[c,u]),p.jsx(ys.span,{...o,ref:d,style:{pointerEvents:"none"},children:Qoe(l.value)?p.jsx(p.Fragment,{children:a}):s})});Ooe.displayName=joe;var MXe="SelectIcon",Poe=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return p.jsx(ys.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});Poe.displayName=MXe;var IXe="SelectPortal",Doe=e=>p.jsx(xoe,{asChild:!0,...e});Doe.displayName=IXe;var fm="SelectContent",Foe=T.forwardRef((e,t)=>{const n=$h(fm,e.__scopeSelect),[r,i]=T.useState();if(Ji(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Zo.createPortal(p.jsx(Loe,{scope:e.__scopeSelect,children:p.jsx(YT.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),s):null}return p.jsx(Boe,{...e,ref:t})});Foe.displayName=fm;var ac=10,[Loe,zh]=tb(fm),jXe="SelectContentImpl",OXe=xu("SelectContent.RemoveScroll"),Boe=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:b,avoidCollisions:v,...x}=e,w=$h(fm,n),[S,C]=T.useState(null),[k,A]=T.useState(null),R=Tn(t,je=>C(je)),[N,I]=T.useState(null),[O,L]=T.useState(null),P=ZT(n),[V,F]=T.useState(!1),J=T.useRef(!1);T.useEffect(()=>{if(S)return GT(S)},[S]),WT();const U=T.useCallback(je=>{const[Me,...Se]=P().map(We=>We.ref.current),[qe]=Se.slice(-1),Qe=document.activeElement;for(const We of je)if(We===Qe||(We==null||We.scrollIntoView({block:"nearest"}),We===Me&&k&&(k.scrollTop=0),We===qe&&k&&(k.scrollTop=k.scrollHeight),We==null||We.focus(),document.activeElement!==Qe))return},[P,k]),G=T.useCallback(()=>U([N,S]),[U,N,S]);T.useEffect(()=>{V&&G()},[V,G]);const{onOpenChange:$,triggerPointerDownPosRef:ne}=w;T.useEffect(()=>{if(S){let je={x:0,y:0};const Me=qe=>{var Qe,We;je={x:Math.abs(Math.round(qe.pageX)-(((Qe=ne.current)==null?void 0:Qe.x)??0)),y:Math.abs(Math.round(qe.pageY)-(((We=ne.current)==null?void 0:We.y)??0))}},Se=qe=>{je.x<=10&&je.y<=10?qe.preventDefault():S.contains(qe.target)||$(!1),document.removeEventListener("pointermove",Me),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",Me),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Me),document.removeEventListener("pointerup",Se,{capture:!0})}}},[S,$,ne]),T.useEffect(()=>{const je=()=>$(!1);return window.addEventListener("blur",je),window.addEventListener("resize",je),()=>{window.removeEventListener("blur",je),window.removeEventListener("resize",je)}},[$]);const[W,te]=ele(je=>{const Me=P().filter(Qe=>!Qe.disabled),Se=Me.find(Qe=>Qe.ref.current===document.activeElement),qe=tle(Me,je,Se);qe&&setTimeout(()=>qe.ref.current.focus())}),ee=T.useCallback((je,Me,Se)=>{const qe=!J.current&&!Se;(w.value!==void 0&&w.value===Me||qe)&&(I(je),qe&&(J.current=!0))},[w.value]),re=T.useCallback(()=>S==null?void 0:S.focus(),[S]),de=T.useCallback((je,Me,Se)=>{const qe=!J.current&&!Se;(w.value!==void 0&&w.value===Me||qe)&&L(je)},[w.value]),oe=r==="popper"?pO:$oe,Ie=oe===pO?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:b,avoidCollisions:v}:{};return p.jsx(Loe,{scope:n,content:S,viewport:k,onViewportChange:A,itemRefCallback:ee,selectedItem:N,onItemLeave:re,itemTextRefCallback:de,focusSelectedItem:G,selectedItemText:O,position:r,isPositioned:V,searchRef:W,children:p.jsx(z1,{as:OXe,allowPinchZoom:!0,children:p.jsx(ooe,{asChild:!0,trapped:w.open,onMountAutoFocus:je=>{je.preventDefault()},onUnmountAutoFocus:Wt(i,je=>{var Me;(Me=w.trigger)==null||Me.focus({preventScroll:!0}),je.preventDefault()}),children:p.jsx(soe,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:je=>je.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:p.jsx(oe,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:je=>je.preventDefault(),...x,...Ie,onPlaced:()=>F(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Wt(x.onKeyDown,je=>{const Me=je.ctrlKey||je.altKey||je.metaKey;if(je.key==="Tab"&&je.preventDefault(),!Me&&je.key.length===1&&te(je.key),["ArrowUp","ArrowDown","Home","End"].includes(je.key)){let qe=P().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(je.key)&&(qe=qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(je.key)){const Qe=je.target,We=qe.indexOf(Qe);qe=qe.slice(We+1)}setTimeout(()=>U(qe)),je.preventDefault()}})})})})})})});Boe.displayName=jXe;var PXe="SelectItemAlignedPosition",$oe=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,s=$h(fm,n),a=zh(fm,n),[o,l]=T.useState(null),[c,u]=T.useState(null),d=Tn(t,R=>u(R)),h=ZT(n),m=T.useRef(!1),y=T.useRef(!0),{viewport:b,selectedItem:v,selectedItemText:x,focusSelectedItem:w}=a,S=T.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&c&&b&&v&&x){const R=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),I=s.valueNode.getBoundingClientRect(),O=x.getBoundingClientRect();if(s.dir!=="rtl"){const Qe=O.left-N.left,We=I.left-Qe,Re=R.left-We,K=R.width+Re,ge=Math.max(K,N.width),Te=window.innerWidth-ac,ce=Aw(We,[ac,Math.max(ac,Te-ge)]);o.style.minWidth=K+"px",o.style.left=ce+"px"}else{const Qe=N.right-O.right,We=window.innerWidth-I.right-Qe,Re=window.innerWidth-R.right-We,K=R.width+Re,ge=Math.max(K,N.width),Te=window.innerWidth-ac,ce=Aw(We,[ac,Math.max(ac,Te-ge)]);o.style.minWidth=K+"px",o.style.right=ce+"px"}const L=h(),P=window.innerHeight-ac*2,V=b.scrollHeight,F=window.getComputedStyle(c),J=parseInt(F.borderTopWidth,10),U=parseInt(F.paddingTop,10),G=parseInt(F.borderBottomWidth,10),$=parseInt(F.paddingBottom,10),ne=J+U+V+$+G,W=Math.min(v.offsetHeight*5,ne),te=window.getComputedStyle(b),ee=parseInt(te.paddingTop,10),re=parseInt(te.paddingBottom,10),de=R.top+R.height/2-ac,oe=P-de,Ie=v.offsetHeight/2,je=v.offsetTop+Ie,Me=J+U+je,Se=ne-Me;if(Me<=de){const Qe=L.length>0&&v===L[L.length-1].ref.current;o.style.bottom="0px";const We=c.clientHeight-b.offsetTop-b.offsetHeight,Re=Math.max(oe,Ie+(Qe?re:0)+We+G),K=Me+Re;o.style.height=K+"px"}else{const Qe=L.length>0&&v===L[0].ref.current;o.style.top="0px";const Re=Math.max(de,J+b.offsetTop+(Qe?ee:0)+Ie)+Se;o.style.height=Re+"px",b.scrollTop=Me-de+b.offsetTop}o.style.margin=`${ac}px 0`,o.style.minHeight=W+"px",o.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,o,c,b,v,x,s.dir,r]);Ji(()=>S(),[S]);const[C,k]=T.useState();Ji(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const A=T.useCallback(R=>{R&&y.current===!0&&(S(),w==null||w(),y.current=!1)},[S,w]);return p.jsx(FXe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:A,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:p.jsx(ys.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});$oe.displayName=PXe;var DXe="SelectPopperPosition",pO=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ac,...s}=e,a=XT(n);return p.jsx(PZe,{...a,...s,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pO.displayName=DXe;var[FXe,C5]=tb(fm,{}),mO="SelectViewport",zoe=T.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,s=zh(mO,n),a=C5(mO,n),o=Tn(t,s.onViewportChange),l=T.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(YT.Slot,{scope:n,children:p.jsx(ys.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Wt(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&d){const m=Math.abs(l.current-u.scrollTop);if(m>0){const y=window.innerHeight-ac*2,b=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),x=Math.max(b,v);if(x<y){const w=x+m,S=Math.min(y,w),C=w-S;d.style.height=S+"px",d.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});zoe.displayName=mO;var Uoe="SelectGroup",[LXe,BXe]=tb(Uoe),$Xe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=na();return p.jsx(LXe,{scope:n,id:i,children:p.jsx(ys.div,{role:"group","aria-labelledby":i,...r,ref:t})})});$Xe.displayName=Uoe;var qoe="SelectLabel",zXe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=BXe(qoe,n);return p.jsx(ys.div,{id:i.id,...r,ref:t})});zXe.displayName=qoe;var Wk="SelectItem",[UXe,Voe]=tb(Wk),Woe=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=e,o=$h(Wk,n),l=zh(Wk,n),c=o.value===r,[u,d]=T.useState(s??""),[h,m]=T.useState(!1),y=Tn(t,w=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,w,r,i)}),b=na(),v=T.useRef("touch"),x=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(UXe,{scope:n,value:r,disabled:i,textId:b,isSelected:c,onItemTextChange:T.useCallback(w=>{d(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:p.jsx(YT.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:p.jsx(ys.div,{role:"option","aria-labelledby":b,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:y,onFocus:Wt(a.onFocus,()=>m(!0)),onBlur:Wt(a.onBlur,()=>m(!1)),onClick:Wt(a.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:Wt(a.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:Wt(a.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:Wt(a.onPointerMove,w=>{var S;v.current=w.pointerType,i?(S=l.onItemLeave)==null||S.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Wt(a.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:Wt(a.onKeyDown,w=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&w.key===" "||(EXe.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});Woe.displayName=Wk;var Xv="SelectItemText",Hoe=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...s}=e,a=$h(Xv,n),o=zh(Xv,n),l=Voe(Xv,n),c=NXe(Xv,n),[u,d]=T.useState(null),h=Tn(t,x=>d(x),l.onItemTextChange,x=>{var w;return(w=o.itemTextRefCallback)==null?void 0:w.call(o,x,l.value,l.disabled)}),m=u==null?void 0:u.textContent,y=T.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:b,onNativeOptionRemove:v}=c;return Ji(()=>(b(y),()=>v(y)),[b,v,y]),p.jsxs(p.Fragment,{children:[p.jsx(ys.span,{id:l.textId,...s,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Zo.createPortal(s.children,a.valueNode):null]})});Hoe.displayName=Xv;var Goe="SelectItemIndicator",Koe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Voe(Goe,n).isSelected?p.jsx(ys.span,{"aria-hidden":!0,...r,ref:t}):null});Koe.displayName=Goe;var gO="SelectScrollUpButton",Yoe=T.forwardRef((e,t)=>{const n=zh(gO,e.__scopeSelect),r=C5(gO,e.__scopeSelect),[i,s]=T.useState(!1),a=Tn(t,r.onScrollButtonChange);return Ji(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?p.jsx(Xoe,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});Yoe.displayName=gO;var yO="SelectScrollDownButton",Zoe=T.forwardRef((e,t)=>{const n=zh(yO,e.__scopeSelect),r=C5(yO,e.__scopeSelect),[i,s]=T.useState(!1),a=Tn(t,r.onScrollButtonChange);return Ji(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?p.jsx(Xoe,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});Zoe.displayName=yO;var Xoe=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,s=zh("SelectScrollButton",n),a=T.useRef(null),o=ZT(n),l=T.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),Ji(()=>{var u;const c=o().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),p.jsx(ys.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Wt(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Wt(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Wt(i.onPointerLeave,()=>{l()})})}),qXe="SelectSeparator",VXe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(ys.div,{"aria-hidden":!0,...r,ref:t})});VXe.displayName=qXe;var bO="SelectArrow",WXe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=XT(n),s=$h(bO,n),a=zh(bO,n);return s.open&&a.position==="popper"?p.jsx(DZe,{...i,...r,ref:t}):null});WXe.displayName=bO;var HXe="SelectBubbleInput",Joe=T.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=T.useRef(null),s=Tn(r,i),a=HT(t);return T.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&u){const d=new Event("change",{bubbles:!0});u.call(o,t),o.dispatchEvent(d)}},[a,t]),p.jsx(ys.select,{...n,style:{...woe,...n.style},ref:s,defaultValue:t})});Joe.displayName=HXe;function Qoe(e){return e===""||e===void 0}function ele(e){const t=_i(e),n=T.useRef(""),r=T.useRef(0),i=T.useCallback(a=>{const o=n.current+a;t(o),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),s=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function tle(e,t,n){const i=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=GXe(e,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function GXe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var KXe=Noe,YXe=Ioe,ZXe=Ooe,XXe=Poe,JXe=Doe,QXe=Foe,eJe=zoe,tJe=Woe,nJe=Hoe,rJe=Koe,iJe=Yoe,sJe=Zoe;function Pm({...e}){return p.jsx(KXe,{"data-slot":"select",...e})}function Dm({...e}){return p.jsx(ZXe,{"data-slot":"select-value",...e})}function Fm({className:e,size:t="default",children:n,...r}){return p.jsxs(YXe,{"data-slot":"select-trigger","data-size":t,className:Ye("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,p.jsx(XXe,{asChild:!0,children:p.jsx(Tc,{className:"size-4 opacity-50"})})]})}function Lm({className:e,children:t,position:n="popper",...r}){return p.jsx(JXe,{children:p.jsxs(QXe,{"data-slot":"select-content",className:Ye("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(aJe,{}),p.jsx(eJe,{className:Ye("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),p.jsx(oJe,{})]})})}function Xo({className:e,children:t,...n}){return p.jsxs(tJe,{"data-slot":"select-item",className:Ye("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[p.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:p.jsx(rJe,{children:p.jsx(Qa,{className:"size-4"})})}),p.jsx(nJe,{children:t})]})}function aJe({className:e,...t}){return p.jsx(iJe,{"data-slot":"select-scroll-up-button",className:Ye("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(Eh,{className:"size-4"})})}function oJe({className:e,...t}){return p.jsx(sJe,{"data-slot":"select-scroll-down-button",className:Ye("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(Tc,{className:"size-4"})})}var lJe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],cJe=lJe.reduce((e,t)=>{const n=xu(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),uJe="Label",nle=T.forwardRef((e,t)=>p.jsx(cJe.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));nle.displayName=uJe;var dJe=nle;function zt({className:e,...t}){return p.jsx(dJe,{"data-slot":"label",className:Ye("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const Ts=({field:e,className:t})=>e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:`text-xs text-destructive mt-1 block ${t||""}`,children:e.state.meta.errors.map(r=>typeof r=="string"?r:typeof r=="object"&&r!==null&&"message"in r&&typeof r.message=="string"?r.message:(console.warn("[GlobalFieldMetaMessages] Encountered an unexpected error structure:",r),"Validation error")).join(", ")}):null,fJe=yo.map(e=>e.value),n2=Je({keyName:Ue().min(1,"Key Name is required."),providerType:cl(fJe,{errorMap:()=>({message:"Provider Type is required."})}),keyValue:Ue().min(1,"API Key Value is required.")}),rle=({initialProviderType:e=null,initialName:t="",initialValue:n="",onSave:r,onCancel:i,disabled:s=!1,className:a})=>{const o=T.useRef(null),l=Ns({defaultValues:{keyName:t,providerType:e,keyValue:n},validators:{onChangeAsync:n2,onChangeAsyncDebounceMs:500},onSubmit:async({value:u})=>{await r(u.keyName,u.providerType,u.keyValue)}});T.useEffect(()=>{l.reset({keyName:t,providerType:e,keyValue:n})},[t,n,e,l]);const c=(u,d)=>{var b,v;if(!u)return;const h=(b=yo.find(x=>x.value===u))==null?void 0:b.label,m=l.getFieldValue("providerType"),y=(v=yo.find(x=>x.value===m))==null?void 0:v.label;h&&(!(d!=null&&d.trim())||d===y)&&l.setFieldValue("keyName",h),requestAnimationFrame(()=>{var x;(x=o.current)==null||x.focus()})};return p.jsxs("form",{onSubmit:u=>{u.preventDefault(),u.stopPropagation(),l.handleSubmit()},className:Ye("space-y-6",a),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsx(l.Field,{name:"providerType",validators:{onChange:n2.shape.providerType},children:u=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:u.name,children:"Provider Type"}),p.jsxs(Pm,{value:u.state.value??"",onValueChange:d=>{const h=d;u.handleChange(h),u.handleBlur(),c(h,l.getFieldValue("keyName"))},disabled:s||l.state.isSubmitting,children:[p.jsx(Fm,{id:u.name,children:p.jsx(Dm,{placeholder:"Select Provider Type"})}),p.jsx(Lm,{children:yo.map(d=>p.jsx(Xo,{value:d.value,children:d.label},d.value))})]}),p.jsx(Ts,{field:u})]})}),p.jsx(l.Field,{name:"keyName",validators:{onChange:n2.shape.keyName},children:u=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:u.name,children:"Key Name"}),p.jsx(Un,{id:u.name,value:u.state.value??"",onChange:d=>u.handleChange(d.target.value),onBlur:u.handleBlur,placeholder:"e.g., My OpenAI Key",disabled:s||l.state.isSubmitting}),p.jsx(Ts,{field:u})]})}),p.jsx(l.Field,{name:"keyValue",validators:{onChange:n2.shape.keyValue},children:u=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:u.name,children:"API Key Value"}),p.jsx(Un,{ref:o,id:u.name,type:"password",value:u.state.value??"",onChange:d=>u.handleChange(d.target.value),onBlur:u.handleBlur,placeholder:"Enter your API key",disabled:s||l.state.isSubmitting,autoComplete:"new-password"}),p.jsx(Ts,{field:u})]})})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(St,{variant:"ghost",size:"sm",onClick:i,disabled:s||l.state.isSubmitting,type:"button",children:[p.jsx(va,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(l.Subscribe,{selector:u=>[u.canSubmit,u.isSubmitting,u.isValidating,u.isValid],children:([u,d,h,m])=>p.jsxs(St,{type:"submit",size:"sm",disabled:s||!u||d||h||!m,children:[(d||h)&&p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"}),d||h?"Saving...":"Save API Key"]})})]})]})},hJe=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:i,disabled:s=!1})=>{var c;const a=u=>{r(u==="none"?null:u)},o=(c=i.find(u=>u.id===n))==null?void 0:c.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return p.jsxs(Pm,{value:n??"none",onValueChange:a,disabled:s||i.length===0,children:[p.jsx(Fm,{className:Ye("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:p.jsx(Dm,{asChild:!0,children:p.jsxs("div",{className:"flex items-center overflow-hidden",children:[p.jsx(kx,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),p.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&p.jsxs("span",{className:"mr-1",children:[t,":"]}),i.length===0?p.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),p.jsxs(Lm,{className:"bg-popover border-border text-popover-foreground",children:[p.jsx(Xo,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),i.map(u=>p.jsx(Xo,{value:u.id,children:u.name||`Key ID: ${u.id.substring(0,6)}...`},u.id))]})]})};function Fw({form:e,name:t,label:n,type:r="text",placeholder:i,disabled:s,wrapperClassName:a,className:o,...l}){return p.jsx(e.Field,{name:t,children:c=>{const u=typeof c.state.value=="string"||typeof c.state.value=="number"?String(c.state.value):"";return p.jsxs("div",{className:Ye("space-y-1.5",a),children:[p.jsx(zt,{htmlFor:c.name,className:"text-sm",children:n}),p.jsx(Un,{id:c.name,name:c.name,type:r,value:u,onBlur:c.handleBlur,onChange:d=>c.handleChange(d.target.value),placeholder:i,disabled:s??c.form.state.isSubmitting,className:Ye(o,c.state.meta.errors.length?"border-destructive":""),...l}),p.jsx(Ts,{field:c})]})}})}function vx({form:e,name:t,label:n,options:r,placeholder:i,disabled:s,wrapperClassName:a,triggerClassName:o,contentClassName:l,...c}){return console.log("SelectField",t),p.jsx(e.Field,{name:t,children:u=>{const d=u.state.value!==null&&u.state.value!==void 0?String(u.state.value):"";return p.jsxs("div",{className:Ye("space-y-1.5",a),children:[p.jsx(zt,{htmlFor:u.name,className:"text-sm",children:n}),p.jsxs(Pm,{value:d,onValueChange:h=>u.handleChange(h),disabled:s??u.form.state.isSubmitting,...c,children:[p.jsx(Fm,{id:u.name,onBlur:u.handleBlur,className:Ye(o,u.state.meta.errors.length?"border-destructive":""),children:p.jsx(Dm,{placeholder:i})}),p.jsx(Lm,{className:l,children:r.map(h=>p.jsx(Xo,{value:String(h.value),disabled:h.disabled,children:h.label},h.value))})]}),p.jsx(Ts,{field:u})]})}})}var pJe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ile=pJe.reduce((e,t)=>{const n=xu(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),JT="Switch",[mJe,tft]=Vs(JT),[gJe,yJe]=mJe(JT),sle=T.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:c,form:u,...d}=e,[h,m]=T.useState(null),y=Tn(t,S=>m(S)),b=T.useRef(!1),v=h?u||!!h.closest("form"):!0,[x,w]=Sc({prop:i,defaultProp:s??!1,onChange:c,caller:JT});return p.jsxs(gJe,{scope:n,checked:x,disabled:o,children:[p.jsx(ile.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":cle(x),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:y,onClick:Wt(e.onClick,S=>{w(C=>!C),v&&(b.current=S.isPropagationStopped(),b.current||S.stopPropagation())})}),v&&p.jsx(lle,{control:h,bubbles:!b.current,name:r,value:l,checked:x,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});sle.displayName=JT;var ale="SwitchThumb",ole=T.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=yJe(ale,n);return p.jsx(ile.span,{"data-state":cle(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});ole.displayName=ale;var bJe="SwitchBubbleInput",lle=T.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},s)=>{const a=T.useRef(null),o=Tn(a,s),l=HT(n),c=Ay(t);return T.useEffect(()=>{const u=a.current;if(!u)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&m){const y=new Event("click",{bubbles:r});m.call(u,n),u.dispatchEvent(y)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lle.displayName=bJe;function cle(e){return e?"checked":"unchecked"}var vJe=sle,xJe=ole;function bc({className:e,...t}){return p.jsx(vJe,{"data-slot":"switch",className:Ye("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(xJe,{"data-slot":"switch-thumb",className:Ye("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Rp({form:e,name:t,label:n,description:r,disabled:i,wrapperClassName:s,className:a,labelClassName:o,...l}){return p.jsx(e.Field,{name:t,children:c=>{const u=typeof c.state.value=="boolean"?c.state.value:!1;return p.jsxs("div",{className:Ye("space-y-1.5",s),children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(zt,{htmlFor:c.name,className:Ye("text-sm font-medium leading-none cursor-pointer",o),children:n}),p.jsx(bc,{id:c.name,name:c.name,checked:u,onCheckedChange:d=>c.handleChange(d),onBlur:c.handleBlur,disabled:i??c.form.state.isSubmitting,className:Ye(a,c.state.meta.errors.length?"border-destructive":""),...l})]}),r&&p.jsx("p",{className:"text-xs text-muted-foreground pt-1",children:r}),p.jsx(Ts,{field:c})]})}})}const wJe=yo.map(e=>e.value),_Je=Je({name:Ue().min(1,"Provider Name is required."),type:cl(wJe,{errorMap:()=>({message:"Provider Type is required."})}),isEnabled:Cr(),apiKeyId:Ue().nullable(),baseURL:Ue().url().nullable().or(Dn("")),autoFetchModels:Cr()}).refine(e=>_C(e.type)?!(!e.baseURL||e.baseURL.trim()===""):!0,{message:"Base URL is required and must be a valid URL for this provider type.",path:["baseURL"]}).refine(e=>L0(e.type)?!!e.apiKeyId:!0,{message:"API Key is required for this provider type.",path:["apiKeyId"]}),SJe=yo.map(e=>({value:e.value,label:e.label})),ule=({initialData:e,onSubmit:t,onChange:n,onCancel:r,apiKeys:i,isSavingExt:s=!1,disabled:a=!1,className:o})=>{var v;const l=Ns({defaultValues:{name:(e==null?void 0:e.name)||"",type:(e==null?void 0:e.type)||((v=yo[0])==null?void 0:v.value),isEnabled:(e==null?void 0:e.isEnabled)??!0,apiKeyId:(e==null?void 0:e.apiKeyId)||null,baseURL:(e==null?void 0:e.baseURL)||null,autoFetchModels:(e==null?void 0:e.autoFetchModels)??!1},validators:{onChangeAsync:_Je,onChangeAsyncDebounceMs:500},onSubmit:async({value:x})=>{const w={...x,baseURL:(x.baseURL===null||typeof x.baseURL=="string"&&x.baseURL.trim()==="")&&!_C(x.type)?null:x.baseURL};await t(w)}}),c=T.useRef(l.state.values);T.useEffect(()=>{const x=l.store.subscribe(()=>{const w=l.state.values,S=c.current;if(n&&S)for(const C in w){const k=C;w[k]!==S[k]&&n(k,w[k])}c.current={...w}});return l.state.values!==c.current&&(c.current=l.state.values),x},[l,n]),T.useEffect(()=>{var S,C;const x=(e==null?void 0:e.type)||((S=yo[0])==null?void 0:S.value),w={name:(e==null?void 0:e.name)||((C=yo.find(k=>k.value===x))==null?void 0:C.label)||"",type:x,isEnabled:(e==null?void 0:e.isEnabled)??!0,apiKeyId:(e==null?void 0:e.apiKeyId)||null,baseURL:(e==null?void 0:e.baseURL)||null,autoFetchModels:(e==null?void 0:e.autoFetchModels)??zp(x)};l.reset(w),c.current=w},[e]);const u=l.state.values.type,d=L0(u??null),h=_C(u??null),m=zp(u??null),y=T.useCallback(x=>{var S,C;if(!x)return;const w=l.state.values.type;if(x!==w){l.setFieldValue("apiKeyId",null),l.setFieldValue("baseURL",null),l.setFieldValue("autoFetchModels",zp(x));const k=(S=yo.find(N=>N.value===x))==null?void 0:S.label,A=(C=yo.find(N=>N.value===w))==null?void 0:C.label,R=l.state.values.name;k&&(!(R!=null&&R.trim())||R===A)&&l.setFieldValue("name",k)}},[l]);T.useEffect(()=>{const x=l.state.values.type;x!==void 0&&y(x)},[l.state.values.type,y]);const b=(i||[]).filter(x=>!u||x.providerId===u);return p.jsxs("form",{onSubmit:x=>{x.preventDefault(),x.stopPropagation(),l.handleSubmit()},className:Ye("space-y-4 border rounded-md p-4 bg-card shadow-sm",o),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3",children:[p.jsx(vx,{form:l,name:"type",label:"Provider Type",options:SJe,disabled:a||s,placeholder:"Select Type",wrapperClassName:"md:col-span-1"}),p.jsx(Fw,{form:l,name:"name",label:"Provider Name",placeholder:"e.g., My Ollama",disabled:a||s,"aria-label":"Provider Name",wrapperClassName:"md:col-span-1"}),d&&p.jsx(l.Field,{name:"apiKeyId",children:x=>p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(zt,{htmlFor:`${x.name}-trigger`,children:"API Key"})," ",p.jsx(hJe,{selectedKeyId:x.state.value??null,onKeySelected:w=>{x.handleChange(w),x.handleBlur()},apiKeys:b,disabled:a||s||!u}),p.jsx(Ts,{field:x})]})}),h&&p.jsx(Fw,{form:l,name:"baseURL",label:"Base URL",placeholder:"e.g., http://localhost:11434",type:"url",disabled:a||s||!u,wrapperClassName:"md:col-span-2"}),m&&p.jsx(Rp,{form:l,name:"autoFetchModels",label:"Auto-Fetch Models",description:"Automatically fetch and update the list of available models from this provider.",disabled:a||s||!u,wrapperClassName:"md:col-span-2"}),p.jsx(Rp,{form:l,name:"isEnabled",label:"Enable Provider",description:"Allow this provider to be used for generating responses.",disabled:a||s,wrapperClassName:"md:col-span-2"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(St,{variant:"ghost",size:"sm",onClick:r,disabled:a||s,type:"button",children:[p.jsx(va,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(l.Subscribe,{selector:x=>[x.canSubmit,x.isSubmitting,x.isValidating,x.isValid],children:([x,w,S,C])=>p.jsxs(St,{type:"submit",size:"sm",disabled:a||s||!x||w||!C||S,children:[(s||w||S)&&p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",s||w||S?"Saving...":e!=null&&e.name?"Save Changes":"Add Provider"]})})]})]})},dle=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:i="",initialApiKeyId:s=null})=>{const[a,o]=T.useState(!1),[l,c]=T.useState({name:i,type:r,isEnabled:!0,apiKeyId:s,baseURL:null,autoFetchModels:zp(r)});T.useEffect(()=>{c(h=>({...h,name:i||h.name||"",type:r||h.type||null,apiKeyId:s||h.apiKeyId||null,autoFetchModels:!1}))},[i,r,s]);const u=T.useCallback((h,m)=>new Promise(y=>{c(b=>{var w,S;const v={...b,[h]:m},x=b.name||"";if(h==="type"){const C=m,k=(w=yo.find(R=>R.value===b.type))==null?void 0:w.label;v.apiKeyId=null,v.baseURL=null,v.autoFetchModels=C?zp(C):!1;const A=(S=yo.find(R=>R.value===C))==null?void 0:S.label;if(A&&(!x.trim()||x===k)&&(v.name=A),C&&L0(C)){const R=(e||[]).filter(N=>N.providerId===C);R.length>0&&(v.apiKeyId=R[0].id)}}return v}),y(void 0)}),[e]),d=T.useCallback(async()=>{var h,m;if(!((h=l.name)!=null&&h.trim())||!l.type){Pe.error("Provider Name and Type are required.");return}o(!0);try{const y=l.type,b=l.autoFetchModels??zp(y),v={name:l.name.trim(),type:y,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((m=l.baseURL)==null?void 0:m.trim())||null,enabledModels:null,autoFetchModels:b,fetchedModels:null,modelsLastFetchedAt:null};await t(v),n()}catch(y){console.error("Failed to add provider (from form component):",y)}finally{o(!1)}},[l,t,n]);return p.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),p.jsx(ule,{initialData:l,onSubmit:d,onCancel:n,onChange:u,apiKeys:e,disabled:a})]})},bd=Ve.forwardRef(({className:e,href:t,children:n,...r},i)=>p.jsx("a",{ref:i,href:t,target:"_blank",rel:"noopener noreferrer",className:Ye("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));bd.displayName="Lnk";const CJe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})},kJe=OO("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function As({className:e,variant:t,asChild:n=!1,...r}){const i=n?KW:"span";return p.jsx(i,{"data-slot":"badge",className:Ye(kJe({variant:t}),e),...r})}const EJe=()=>{const[e,t]=T.useState(!1);T.useEffect(()=>{t(!0)},[]);const n={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},r={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},i=[{word:"LiteChat",color:"bg-gradient-to-tr from-lime-500 via-amber-400 to-red-600 bg-clip-text text-transparent"},{word:"library",color:"text-emerald-500"},{word:"browser",color:"text-violet-500"},{word:"local",color:"text-amber-500"},{word:"remote",color:"text-sky-500"},{word:"providers",color:"text-purple-500"},{word:" AI ",color:"bg-gradient-to-b from-amber-300 to-rose-700 bg-clip-text text-transparent"},{word:"Open Source",color:"bg-gradient-to-r from-lime-500 to-yellow-500 bg-clip-text text-transparent"}],s=o=>{let l=[o];return i.forEach(({word:c,color:u})=>{l=l.reduce((d,h)=>typeof h!="string"?(d.push(h),d):(h.split(new RegExp(`(${c})`,"gi")).forEach((y,b)=>{y.toLowerCase()===c.toLowerCase()?d.push(p.jsx("span",{className:`${u} font-medium`,children:y},`${y}-${b}`)):d.push(y)}),d),[])}),l=l.reduce((c,u,d)=>{if(typeof u!="string")return c.push(u),c;const h=/(\([^)]*\))/g;return u.split(h).forEach((y,b)=>{h.test(y)?c.push(p.jsx("span",{className:"text-sm text-muted",children:y},`paren-${d}-${b}`)):c.push(y)}),c},[]),l},a=["Oh, hey?! Hi there!! How are you doing!?","Nice of you to pop by to checkout LiteChat!","What'd you mean you don't know what LiteChat is? Oh Boy hey, you in for a treat!","To start with, it's an(other) AI chat app (yes...shocker, right ?) and it's Open Source ! ","But, it is also an extensible library, so you can go on and create your own, AI chat app! With your own functionnalities !","(are AI chat apps the new JS frameworks?)","And cause I might be a wee bit on the reluctant side when it comes to parting with my coins, it doesn't require no servers! It all stays in your browser.","(that means I couldn't snoop on what you do here, even if I wanted to!)","While able to run LLM both local (did I tell you I ain't liking throwing coins out?) and from remote providers","(but sometimes you have to :(..)","To cap things off, there is no fancy/crazy tech involved, I just glued bricks together with AI","(kids call it vibing apparently ^^)","Enough of this interminable babble! Go setup your future chat to prompt your brains out!"];return p.jsxs(ru.div,{className:"text-center max-w-4xl mx-auto space-y-3 my-6",initial:"hidden",animate:e?"show":"hidden",variants:n,children:[p.jsx("div",{className:"flex justify-center mb-4",children:p.jsxs(As,{variant:"outline",className:"px-3 py-1 bg-black/5 dark:bg-white/10 backdrop-blur-sm border-none",children:[p.jsx(vH,{className:"w-4 h-4 mr-2 text-yellow-500"}),p.jsx("span",{className:"text-sm",children:"Welcome to your future AI chat"})]})}),a.map((o,l)=>p.jsx(ru.p,{className:`text-sm md:text-base ${l===0?"font-medium":""} leading-relaxed`,variants:r,children:s(o)},l)),p.jsxs(ru.div,{variants:r,className:"pt-2",children:[p.jsx(As,{className:"bg-gradient-to-r from-violet-600 to-primary border-none",children:"No server required!"}),p.jsx(As,{className:"ml-2 bg-gradient-to-r from-amber-500 to-emerald-500 border-none",children:"100% in-browser"})]})]})};var k5="Progress",E5=100,[TJe,nft]=Vs(k5),[AJe,RJe]=TJe(k5),fle=T.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=NJe,...a}=e;(i||i===0)&&!FV(i)&&console.error(MJe(`${i}`,"Progress"));const o=FV(i)?i:E5;r!==null&&!LV(r,o)&&console.error(IJe(`${r}`,"Progress"));const l=LV(r,o)?r:null,c=Hk(l)?s(l,o):void 0;return p.jsx(AJe,{scope:n,value:l,max:o,children:p.jsx(sr.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Hk(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":mle(l,o),"data-value":l??void 0,"data-max":o,...a,ref:t})})});fle.displayName=k5;var hle="ProgressIndicator",ple=T.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=RJe(hle,n);return p.jsx(sr.div,{"data-state":mle(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});ple.displayName=hle;function NJe(e,t){return`${Math.round(e/t*100)}%`}function mle(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Hk(e){return typeof e=="number"}function FV(e){return Hk(e)&&!isNaN(e)&&e>0}function LV(e,t){return Hk(e)&&!isNaN(e)&&e<=t&&e>=0}function MJe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${E5}\`.`}function IJe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${E5} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var gle=fle,jJe=ple;const gy=T.forwardRef(({className:e,value:t,...n},r)=>p.jsx(gle,{ref:r,className:Ye("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:p.jsx(jJe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));gy.displayName=gle.displayName;var OJe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jd=OJe.reduce((e,t)=>{const n=xu(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function PJe(e,t){e&&Zo.flushSync(()=>e.dispatchEvent(t))}var DJe="DismissableLayer",vO="dismissableLayer.update",FJe="dismissableLayer.pointerDownOutside",LJe="dismissableLayer.focusOutside",BV,yle=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ble=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=T.useContext(yle),[u,d]=T.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=T.useState({}),y=Tn(t,R=>d(R)),b=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(v),w=u?b.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,C=w>=x,k=zJe(R=>{const N=R.target,I=[...c.branches].some(O=>O.contains(N));!C||I||(i==null||i(R),a==null||a(R),R.defaultPrevented||o==null||o())},h),A=UJe(R=>{const N=R.target;[...c.branches].some(O=>O.contains(N))||(s==null||s(R),a==null||a(R),R.defaultPrevented||o==null||o())},h);return QO(R=>{w===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},h),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(BV=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),$V(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=BV)}},[u,h,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),$V())},[u,c]),T.useEffect(()=>{const R=()=>m({});return document.addEventListener(vO,R),()=>document.removeEventListener(vO,R)},[]),p.jsx(Jd.div,{...l,ref:y,style:{pointerEvents:S?C?"auto":"none":void 0,...e.style},onFocusCapture:Wt(e.onFocusCapture,A.onFocusCapture),onBlurCapture:Wt(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Wt(e.onPointerDownCapture,k.onPointerDownCapture)})});ble.displayName=DJe;var BJe="DismissableLayerBranch",$Je=T.forwardRef((e,t)=>{const n=T.useContext(yle),r=T.useRef(null),i=Tn(t,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(Jd.div,{...e,ref:i})});$Je.displayName=BJe;function zJe(e,t=globalThis==null?void 0:globalThis.document){const n=_i(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let l=function(){vle(FJe,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function UJe(e,t=globalThis==null?void 0:globalThis.document){const n=_i(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&vle(LJe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $V(){const e=new CustomEvent(vO);document.dispatchEvent(e)}function vle(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?PJe(i,s):i.dispatchEvent(s)}var y3="focusScope.autoFocusOnMount",b3="focusScope.autoFocusOnUnmount",zV={bubbles:!1,cancelable:!0},qJe="FocusScope",xle=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=T.useState(null),c=_i(i),u=_i(s),d=T.useRef(null),h=Tn(t,b=>l(b)),m=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(S){if(m.paused||!o)return;const C=S.target;o.contains(C)?d.current=C:qf(d.current,{select:!0})},v=function(S){if(m.paused||!o)return;const C=S.relatedTarget;C!==null&&(o.contains(C)||qf(d.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const k of S)k.removedNodes.length>0&&qf(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",v);const w=new MutationObserver(x);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",v),w.disconnect()}}},[r,o,m.paused]),T.useEffect(()=>{if(o){qV.add(m);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(y3,zV);o.addEventListener(y3,c),o.dispatchEvent(x),x.defaultPrevented||(VJe(YJe(wle(o)),{select:!0}),document.activeElement===b&&qf(o))}return()=>{o.removeEventListener(y3,c),setTimeout(()=>{const x=new CustomEvent(b3,zV);o.addEventListener(b3,u),o.dispatchEvent(x),x.defaultPrevented||qf(b??document.body,{select:!0}),o.removeEventListener(b3,u),qV.remove(m)},0)}}},[o,c,u,m]);const y=T.useCallback(b=>{if(!n&&!r||m.paused)return;const v=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(v&&x){const w=b.currentTarget,[S,C]=WJe(w);S&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&qf(S,{select:!0})):b.shiftKey&&x===S&&(b.preventDefault(),n&&qf(C,{select:!0})):x===w&&b.preventDefault()}},[n,r,m.paused]);return p.jsx(Jd.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});xle.displayName=qJe;function VJe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(qf(r,{select:t}),document.activeElement!==n)return}function WJe(e){const t=wle(e),n=UV(t,e),r=UV(t.reverse(),e);return[n,r]}function wle(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function UV(e,t){for(const n of e)if(!HJe(n,{upTo:t}))return n}function HJe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function GJe(e){return e instanceof HTMLInputElement&&"select"in e}function qf(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&GJe(e)&&t&&e.select()}}var qV=KJe();function KJe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=VV(e,t),e.unshift(t)},remove(t){var n;e=VV(e,t),(n=e[0])==null||n.resume()}}}function VV(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function YJe(e){return e.filter(t=>t.tagName!=="A")}var ZJe="Arrow",_le=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return p.jsx(Jd.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});_le.displayName=ZJe;var XJe=_le,T5="Popper",[Sle,Cle]=Vs(T5),[JJe,kle]=Sle(T5),Ele=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return p.jsx(JJe,{scope:t,anchor:r,onAnchorChange:i,children:n})};Ele.displayName=T5;var Tle="PopperAnchor",Ale=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=kle(Tle,n),a=T.useRef(null),o=Tn(t,a);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:p.jsx(Jd.div,{...i,ref:o})});Ale.displayName=Tle;var A5="PopperContent",[QJe,eQe]=Sle(A5),Rle=T.forwardRef((e,t)=>{var je,Me,Se,qe,Qe,We;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...b}=e,v=kle(A5,n),[x,w]=T.useState(null),S=Tn(t,Re=>w(Re)),[C,k]=T.useState(null),A=Ay(C),R=(A==null?void 0:A.width)??0,N=(A==null?void 0:A.height)??0,I=r+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],P=L.length>0,V={padding:O,boundary:L.filter(nQe),altBoundary:P},{refs:F,floatingStyles:J,placement:U,isPositioned:G,middlewareData:$}=lP({strategy:"fixed",placement:I,whileElementsMounted:(...Re)=>oP(...Re,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[cP({mainAxis:i+N,alignmentAxis:a}),l&&uP({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?dP():void 0,...V}),l&&fP({...V}),hP({...V,apply:({elements:Re,rects:K,availableWidth:ge,availableHeight:Te})=>{const{width:ce,height:le}=K.reference,ie=Re.floating.style;ie.setProperty("--radix-popper-available-width",`${ge}px`),ie.setProperty("--radix-popper-available-height",`${Te}px`),ie.setProperty("--radix-popper-anchor-width",`${ce}px`),ie.setProperty("--radix-popper-anchor-height",`${le}px`)}}),C&&mP({element:C,padding:o}),rQe({arrowWidth:R,arrowHeight:N}),h&&pP({strategy:"referenceHidden",...V})]}),[ne,W]=Ile(U),te=_i(y);Ji(()=>{G&&(te==null||te())},[G,te]);const ee=(je=$.arrow)==null?void 0:je.x,re=(Me=$.arrow)==null?void 0:Me.y,de=((Se=$.arrow)==null?void 0:Se.centerOffset)!==0,[oe,Ie]=T.useState();return Ji(()=>{x&&Ie(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:G?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(qe=$.transformOrigin)==null?void 0:qe.x,(Qe=$.transformOrigin)==null?void 0:Qe.y].join(" "),...((We=$.hide)==null?void 0:We.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(QJe,{scope:n,placedSide:ne,onArrowChange:k,arrowX:ee,arrowY:re,shouldHideArrow:de,children:p.jsx(Jd.div,{"data-side":ne,"data-align":W,...b,ref:S,style:{...b.style,animation:G?void 0:"none"}})})})});Rle.displayName=A5;var Nle="PopperArrow",tQe={top:"bottom",right:"left",bottom:"top",left:"right"},Mle=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=eQe(Nle,r),a=tQe[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(XJe,{...i,ref:n,style:{...i.style,display:"block"}})})});Mle.displayName=Nle;function nQe(e){return e!==null}var rQe=e=>({name:"transformOrigin",options:e,fn(t){var v,x,w;const{placement:n,rects:r,middlewareData:i}=t,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,u]=Ile(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let y="",b="";return c==="bottom"?(y=a?d:`${h}px`,b=`${-l}px`):c==="top"?(y=a?d:`${h}px`,b=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,b=a?d:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,b=a?d:`${m}px`),{data:{x:y,y:b}}}});function Ile(e){const[t,n="center"]=e.split("-");return[t,n]}var iQe=Ele,jle=Ale,sQe=Rle,aQe=Mle,oQe="Portal",Ole=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=T.useState(!1);Ji(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?lE.createPortal(p.jsx(Jd.div,{...r,ref:t}),a):null});Ole.displayName=oQe;var QT="Popover",[Ple,rft]=Vs(QT,[Cle]),U1=Cle(),[lQe,Uh]=Ple(QT),Dle=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!1}=e,o=U1(t),l=T.useRef(null),[c,u]=T.useState(!1),[d,h]=Sc({prop:r,defaultProp:i??!1,onChange:s,caller:QT});return p.jsx(iQe,{...o,children:p.jsx(lQe,{scope:t,contentId:na(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:c,onCustomAnchorAdd:T.useCallback(()=>u(!0),[]),onCustomAnchorRemove:T.useCallback(()=>u(!1),[]),modal:a,children:n})})};Dle.displayName=QT;var Fle="PopoverAnchor",cQe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Uh(Fle,n),s=U1(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=i;return T.useEffect(()=>(a(),()=>o()),[a,o]),p.jsx(jle,{...s,...r,ref:t})});cQe.displayName=Fle;var Lle="PopoverTrigger",Ble=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Uh(Lle,n),s=U1(n),a=Tn(t,i.triggerRef),o=p.jsx(Jd.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Vle(i.open),...r,ref:a,onClick:Wt(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?o:p.jsx(jle,{asChild:!0,...s,children:o})});Ble.displayName=Lle;var R5="PopoverPortal",[uQe,dQe]=Ple(R5,{forceMount:void 0}),$le=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,s=Uh(R5,t);return p.jsx(uQe,{scope:t,forceMount:n,children:p.jsx(sa,{present:n||s.open,children:p.jsx(Ole,{asChild:!0,container:i,children:r})})})};$le.displayName=R5;var yy="PopoverContent",zle=T.forwardRef((e,t)=>{const n=dQe(yy,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,s=Uh(yy,e.__scopePopover);return p.jsx(sa,{present:r||s.open,children:s.modal?p.jsx(hQe,{...i,ref:t}):p.jsx(pQe,{...i,ref:t})})});zle.displayName=yy;var fQe=xu("PopoverContent.RemoveScroll"),hQe=T.forwardRef((e,t)=>{const n=Uh(yy,e.__scopePopover),r=T.useRef(null),i=Tn(t,r),s=T.useRef(!1);return T.useEffect(()=>{const a=r.current;if(a)return GT(a)},[]),p.jsx(z1,{as:fQe,allowPinchZoom:!0,children:p.jsx(Ule,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),s.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,c=o.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Wt(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),pQe=T.forwardRef((e,t)=>{const n=Uh(yy,e.__scopePopover),r=T.useRef(!1),i=T.useRef(!1);return p.jsx(Ule,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Ule=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,h=Uh(yy,n),m=U1(n);return WT(),p.jsx(xle,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(ble,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:p.jsx(sQe,{"data-state":Vle(h.open),role:"dialog",id:h.contentId,...m,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),qle="PopoverClose",mQe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Uh(qle,n);return p.jsx(Jd.button,{type:"button",...r,ref:t,onClick:Wt(e.onClick,()=>i.onOpenChange(!1))})});mQe.displayName=qle;var gQe="PopoverArrow",yQe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=U1(n);return p.jsx(aQe,{...i,...r,ref:t})});yQe.displayName=gQe;function Vle(e){return e?"open":"closed"}var bQe=Dle,vQe=Ble,xQe=$le,wQe=zle;function ul({...e}){return p.jsx(bQe,{"data-slot":"popover",...e})}function dl({...e}){return p.jsx(vQe,{"data-slot":"popover-trigger",...e})}function fl({className:e,align:t="center",sideOffset:n=4,...r}){return p.jsx(xQe,{children:p.jsx(wQe,{"data-slot":"popover-content",align:t,sideOffset:n,className:Ye("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function Hg(e,t,n){let r=n.initialDeps??[],i;function s(){var a,o,l,c;let u;n.key&&((a=n.debug)!=null&&a.call(n))&&(u=Date.now());const d=e();if(!(d.length!==r.length||d.some((y,b)=>r[b]!==y)))return i;r=d;let m;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(m=Date.now()),i=t(...d),n.key&&((l=n.debug)!=null&&l.call(n))){const y=Math.round((Date.now()-u)*100)/100,b=Math.round((Date.now()-m)*100)/100,v=b/16,x=(w,S)=>{for(w=String(w);w.length<S;)w=" "+w;return w};console.info(`%c ${x(b,5)} /${x(y,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(c=n==null?void 0:n.onChange)==null||c.call(n,i),i}return s.updateDeps=a=>{r=a},s}function v3(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const _Qe=(e,t)=>Math.abs(e-t)<=1,SQe=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},WV=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},CQe=e=>e,kQe=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},EQe=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=a=>{const{width:o,height:l}=a;t({width:Math.round(o),height:Math.round(l)})};if(i(WV(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(WV(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},HV={passive:!0},GV=typeof window>"u"?!0:"onscrollend"in window,TQe=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=e.options.useScrollendEvent&&GV?()=>{}:SQe(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:d,isRtl:h}=e.options;i=d?n.scrollLeft*(h&&-1||1):n.scrollTop,s(),t(i,u)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,HV);const c=e.options.useScrollendEvent&&GV;return c&&n.addEventListener("scrollend",l,HV),()=>{n.removeEventListener("scroll",o),c&&n.removeEventListener("scrollend",l)}},AQe=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},RQe=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const a=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class NQe{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:CQe,rangeExtractor:kQe,onChange:()=>{},measureElement:AQe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Hg(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const l=s.get(o.lane);if(l==null||o.end>l.end?s.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=Hg(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=Hg(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let u=l;u<n;u++){const d=s(u),h=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),m=h?h.end+this.options.gap:r+i,y=o.get(d),b=typeof y=="number"?y:this.options.estimateSize(u),v=m+b,x=h?h.lane:u%this.options.lanes;c[u]={index:u,start:m,size:b,end:v,key:d,lane:x}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Hg(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?MQe({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Hg(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Hg(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return v3(r[Wle(0,r.length-1,i=>v3(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(n,r);if(!s)return;const[a,o]=s;this._scrollToOffset(a,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[c]=v3(this.getOffsetForIndex(n,o)),u=this.getScrollOffset();_Qe(c,u)||this.scrollToIndex(n,{align:o,behavior:i})}else this.scrollToIndex(n,{align:o,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const Wle=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function MQe({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const i=e.length-1,s=l=>e[l].start;if(e.length<=r)return{startIndex:0,endIndex:i};let a=Wle(0,i,s,n),o=a;if(r===1)for(;o<i&&e[o].end<n+t;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(u=>u<n+t);){const u=e[o];l[u.lane]=u.end,o++}const c=Array(r).fill(n+t);for(;a>=0&&c.some(u=>u>=n);){const u=e[a];c[u.lane]=u.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}const KV=typeof document<"u"?T.useLayoutEffect:T.useEffect;function IQe(e){const t=T.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var a;s?Zo.flushSync(t):t(),(a=e.onChange)==null||a.call(e,i,s)}},[r]=T.useState(()=>new NQe(n));return r.setOptions(n),KV(()=>r._didMount(),[]),KV(()=>r._willUpdate()),r}function N5(e){return IQe({observeElementRect:EQe,observeElementOffset:TQe,scrollToFn:RQe,...e})}const YV=e=>{if(!e)return null;const t=parseFloat(e);return isNaN(t)?null:t/1e6},M5=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:i=!1,disabled:s=!1,listHeightClass:a="h-[26rem]",onModelClick:o})=>{const[l,c]=T.useState(null),u=T.useCallback(J=>{if(J){const U=J.querySelector("[data-radix-scroll-area-viewport]");if(U)c(U);else{const G=new MutationObserver(()=>{const $=J.querySelector("[data-radix-scroll-area-viewport]");$&&(c($),G.disconnect())});return G.observe(J,{childList:!0,subtree:!0}),()=>G.disconnect()}}else c(null)},[]),[d,h]=T.useState(""),[m,y]=T.useState(!1),[b,v]=T.useState("all"),[x,w]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),[S,C]=T.useState(""),[k,A]=T.useState(""),[R,N]=T.useState(""),[I,O]=T.useState(""),L=T.useMemo(()=>{let J=[...t];if(b==="enabled"?J=J.filter(oe=>n.has(oe.id)):b==="disabled"&&(J=J.filter(oe=>!n.has(oe.id))),d.trim()){const oe=d.toLowerCase();J=J.filter(Ie=>Ie.name.toLowerCase().includes(oe)||Ie.id.toLowerCase().includes(oe))}const U=Object.entries(x).filter(([,oe])=>oe).map(([oe])=>oe);U.length>0&&(J=J.filter(oe=>{var Me;const Ie=new Set(oe.supported_parameters??[]),je=new Set(((Me=oe.architecture)==null?void 0:Me.input_modalities)??[]);return U.every(Se=>{switch(Se){case"reasoning":return Ie.has("reasoning");case"webSearch":return Ie.has("web_search")||Ie.has("web_search_options");case"tools":return Ie.has("tools");case"multimodal":return Array.from(je).some(qe=>qe!=="text");default:return!0}})}));const G=parseFloat(S),$=parseFloat(k),ne=parseFloat(R),W=parseFloat(I),te=!isNaN(G),ee=!isNaN($),re=!isNaN(ne),de=!isNaN(W);return(te||ee||re||de)&&(J=J.filter(oe=>{var ge,Te;const Ie=YV((ge=oe.pricing)==null?void 0:ge.prompt),je=YV((Te=oe.pricing)==null?void 0:Te.completion),Me=te?G/1e6:-1/0,Se=ee?$/1e6:1/0,qe=re?ne/1e6:-1/0,Qe=de?W/1e6:1/0,We=Ie!==null&&Ie>=Me&&Ie<=Se,Re=je!==null&&je>=qe&&je<=Qe;let K=!0;return(te||ee)&&K&&(K=We),(re||de)&&K&&(K=Re),K})),J},[t,d,b,n,x,S,k,R,I]),P=N5({count:L.length,getScrollElement:()=>l,estimateSize:()=>40,overscan:10}),V=J=>{w(U=>({...U,[J]:!U[J]}))},F=(b!=="all"?1:0)+Object.values(x).filter(Boolean).length+(S||k||R||I?1:0);return i?p.jsxs("div",{className:Ye("space-y-2",a),children:[p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"})]}):t.length===0?p.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):p.jsxs("div",{className:"space-y-2 flex flex-col h-full",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Oa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Un,{value:d,onChange:J=>h(J.target.value),placeholder:"Filter models by name...",className:"pl-8 h-9 w-full text-xs",type:"text",disabled:s})]}),p.jsxs(ul,{open:m,onOpenChange:y,children:[p.jsx(dl,{asChild:!0,children:p.jsxs(St,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:s,children:[p.jsx(LO,{className:"h-4 w-4 mr-1"}),"Filters",F>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:F})]})}),p.jsxs(fl,{className:"w-72 p-4 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(zt,{className:"text-xs font-semibold",children:"Status"}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(St,{variant:b==="all"?"secondary":"outline",size:"sm",onClick:()=>v("all"),children:"All"}),p.jsxs(St,{variant:b==="enabled"?"secondary":"outline",size:"sm",onClick:()=>v("enabled"),children:[p.jsx(Qa,{className:"h-3 w-3 mr-1"})," Enabled"]}),p.jsxs(St,{variant:b==="disabled"?"secondary":"outline",size:"sm",onClick:()=>v("disabled"),children:[p.jsx(Upe,{className:"h-3 w-3 mr-1"})," Disabled"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(zt,{className:"text-xs font-semibold",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.jsx(In,{tooltipText:"Reasoning","aria-label":"Reasoning",icon:p.jsx(kh,{}),onClick:()=>V("reasoning"),variant:x.reasoning?"secondary":"outline",className:Ye(x.reasoning&&"text-primary")}),p.jsx(In,{tooltipText:"Web Search","aria-label":"Web Search",icon:p.jsx(Oa,{}),onClick:()=>V("webSearch"),variant:x.webSearch?"secondary":"outline",className:Ye(x.webSearch&&"text-primary")}),p.jsx(In,{tooltipText:"Tools","aria-label":"Tools",icon:p.jsx(Yp,{}),onClick:()=>V("tools"),variant:x.tools?"secondary":"outline",className:Ye(x.tools&&"text-primary")}),p.jsx(In,{tooltipText:"Multimodal","aria-label":"Multimodal",icon:p.jsx(Gp,{}),onClick:()=>V("multimodal"),variant:x.multimodal?"secondary":"outline",className:Ye(x.multimodal&&"text-primary")})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(zt,{className:"text-xs font-semibold flex items-center gap-1",children:[p.jsx(Sme,{className:"h-3 w-3"})," Price Range ($ / 1M Tokens)"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(Un,{type:"number",min:"0",step:"0.01",placeholder:"Min Input",value:S,onChange:J=>C(J.target.value),className:"h-8 text-xs"}),p.jsx(Un,{type:"number",min:"0",step:"0.01",placeholder:"Max Input",value:k,onChange:J=>A(J.target.value),className:"h-8 text-xs"}),p.jsx(Un,{type:"number",min:"0",step:"0.01",placeholder:"Min Output",value:R,onChange:J=>N(J.target.value),className:"h-8 text-xs"}),p.jsx(Un,{type:"number",min:"0",step:"0.01",placeholder:"Max Output",value:I,onChange:J=>O(J.target.value),className:"h-8 text-xs"})]})]})]})]})]}),p.jsxs(sl,{className:Ye("w-full rounded-md border border-border p-1 bg-background/50 flex-grow",a),ref:u,children:[l&&p.jsx("div",{style:{height:`${P.getTotalSize()}px`,width:"100%",position:"relative"},children:L.length===0&&!i?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4 absolute inset-0 flex items-center justify-center",children:"No models match the current filters."}):P.getVirtualItems().map(J=>{const U=L[J.index];return U?p.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${J.size}px`,transform:`translateY(${J.start}px)`},className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[p.jsx(bc,{id:`enable-model-${e}-${U.id}`,checked:n.has(U.id),onCheckedChange:G=>r(U.id,G),disabled:s,"aria-label":`Enable model ${U.name||U.id}`,className:"flex-shrink-0",onClick:G=>G.stopPropagation()}),p.jsx(zt,{htmlFor:`enable-model-${e}-${U.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate pl-2",title:U.name||U.id,onClick:o?()=>o(U.id):void 0,children:U.name||U.id})]},U.id):null})}),!l&&!i&&p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Initializing list..."})]})]})},jQe=({stepNumber:e,title:t,description:n,isComplete:r,isActive:i,openOnComplete:s=!1,contentClassName:a="",icon:o,children:l})=>{const[c,u]=T.useState(!1);return T.useEffect(()=>{u(i||r&&s)},[i,r,s]),p.jsxs(DT,{className:`border border-border/40 bg-card/50 backdrop-blur-sm shadow-lg ${r?"border-l-4 border-l-green-500/70":i?"border-l-4 border-l-primary/70":""}`,children:[p.jsx(FT,{className:"pb-2",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${r?"bg-green-500/20 text-green-500":i?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:r?p.jsx(tE,{className:"h-5 w-5"}):p.jsx("div",{className:"flex items-center justify-center",children:o})}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>u(!c),children:[p.jsxs(LT,{className:"text-base",children:[p.jsxs("span",{className:"opacity-60 mr-2",children:[e,"."]}),t]}),p.jsx("button",{className:`p-1 rounded-full transition-all ${c?"rotate-90":""} hover:bg-muted/60`,children:p.jsx(DO,{className:"h-4 w-4"})})]}),!c&&p.jsx($6,{className:"text-xs mt-1",children:typeof n=="string"?n.substring(0,60)+(n.length>60?"...":""):"Click to expand"})]})]})}),p.jsx(lWe,{children:c&&p.jsx(ru.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:p.jsxs(BT,{className:"pt-2",children:[typeof n=="string"?p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}):p.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:n}),p.jsx("div",{className:a,children:l})]})})})]})},OQe=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:i,getAllAvailableModelDefsForProvider:s,isLoading:a,enableApiKeyManagement:o}=Mr(Sn(re=>({apiKeys:re.dbApiKeys,addApiKey:re.addApiKey,providers:re.dbProviderConfigs,addProviderConfig:re.addProviderConfig,updateProviderConfig:re.updateProviderConfig,getAllAvailableModelDefsForProvider:re.getAllAvailableModelDefsForProvider,isLoading:re.isLoading,enableApiKeyManagement:re.enableApiKeyManagement}))),{addConversation:l,selectItem:c}=zn(Sn(re=>({addConversation:re.addConversation,selectItem:re.selectItem}))),[u,d]=T.useState(!1),[h,m]=T.useState(!1),[y,b]=T.useState(!1),[v,x]=T.useState(!1),[w,S]=T.useState(!1),C=T.useMemo(()=>!o||e.length>0,[o,e]),k=T.useMemo(()=>n.length>0,[n]),A=T.useMemo(()=>n.some(re=>re.isEnabled&&re.enabledModels&&re.enabledModels.length>0),[n]),R=T.useMemo(()=>{const re=[...n].sort((de,oe)=>oe.createdAt.getTime()-de.createdAt.getTime());return re.length>0?re[0]:null},[n]),N=T.useMemo(()=>R?s(R.id):[],[R,s]),I=T.useMemo(()=>new Set((R==null?void 0:R.enabledModels)??[]),[R]),{initialProviderTypeForForm:O,initialProviderNameForForm:L,initialApiKeyIdForForm:P}=T.useMemo(()=>{var re;if(k)return{type:void 0,name:void 0,keyId:void 0};if(e.length>0){const oe=[...e].sort((Ie,je)=>je.createdAt.getTime()-Ie.createdAt.getTime()).find(Ie=>L0(Ie.providerId));if(oe){const Ie=oe.providerId,je=((re=yo.find(Me=>Me.value===Ie))==null?void 0:re.label)||Ie;return{initialProviderTypeForForm:Ie,initialProviderNameForForm:je,initialApiKeyIdForForm:oe.id}}}return{initialProviderTypeForForm:void 0,initialProviderNameForForm:void 0,initialApiKeyIdForForm:void 0}},[e,k]),V=T.useCallback(async(re,de,oe)=>{d(!0);try{await t(re,de,oe),Pe.success("API key added successfully!")}finally{d(!1)}},[t]),F=T.useCallback(async re=>{m(!0);try{const de={...re,apiKeyId:re.apiKeyId??(L0(re.type)?P??null:null)},oe=await r(de);return Pe.success("Provider added successfully!"),oe}finally{m(!1)}},[r,P]),J=T.useCallback(async(re,de)=>{if(!R)return;x(!0);const oe=new Set(R.enabledModels??[]);de?oe.add(re):oe.delete(re);const Ie=Array.from(oe);try{await i(R.id,{enabledModels:Ie}),Pe.success(de?"Model enabled successfully!":"Model disabled successfully!")}catch(je){Pe.error("Failed to update model status."),console.error("Failed to save model toggle:",je)}finally{x(!1)}},[R,i]),U=T.useCallback(async()=>{b(!0),S(!0);try{await new Promise(de=>setTimeout(de,800));const re=await l({title:"New Chat"});await c(re,"conversation"),Pe.success("Welcome to your first chat!")}catch(re){Pe.error("Failed to start your first chat."),console.error("Failed to start first chat:",re),b(!1),S(!1)}},[l,c]),G=()=>{Fe.emit(Nr.openModalRequest,{modalId:"settingsModal",initialTab:"providers"})},$=[C,k,A].filter(Boolean).length,ne=o?3:2,W=$/ne*100,te=[...o?[{id:"api-key",title:"Add API Key",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["To use providers like"," ",p.jsx(bd,{href:"https://platform.openai.com/api-keys",className:"text-blue-500 hover:text-blue-700 transition-colors",children:"OpenAI"}),","," ",p.jsx(bd,{href:"https://aistudio.google.com/app/apikey",className:"text-green-600 hover:text-green-700 transition-colors",children:"Google"}),","," ",p.jsx(bd,{href:"https://console.anthropic.com/settings/keys",className:"text-purple-500 hover:text-purple-700 transition-colors",children:"Anthropic (Claude)"}),", or"," ",p.jsx(bd,{href:"https://openrouter.ai/keys",className:"text-orange-500 hover:text-orange-700 transition-colors",children:"OpenRouter"})," ","or any OpenAI API compatible provider, add an API key. Keys are stored securely in your browser."]}),p.jsxs("p",{children:['If you want truly local AI, "no internet required", you can setup'," ",p.jsx(bd,{href:"https://www.ollama.com/",className:"text-teal-500 hover:text-teal-700 transition-colors",children:"Ollama"})," ","or,"," ",p.jsx(bd,{href:"https://lmstudio.ai/",className:"text-indigo-500 hover:text-indigo-700 transition-colors",children:"LMStudio"})," ","(or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys so see you in step 2."]})]}),isComplete:C,content:p.jsx(rle,{onSave:V,onCancel:()=>{},disabled:u,className:"border-none shadow-none p-0",initialProviderType:O}),icon:p.jsx(kx,{className:"h-4 w-4"})}]:[],{id:"add-provider",title:"Add AI Provider",description:p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{children:"Connect to an AI provider you configured the key for..."}),p.jsx("p",{children:"This might look redundant, but it allows you to have multiple keys for the same provider (personal, professional, etc.)"})]}),isComplete:k,content:p.jsx(dle,{apiKeys:e,onAddProvider:F,onCancel:()=>{},initialType:O,initialName:L,initialApiKeyId:P}),icon:p.jsx(U2,{className:"h-4 w-4"})},{id:"enable-models",title:"Enable Models",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["Enable models for the provider you just added (",p.jsx("span",{className:"font-medium text-primary",children:(R==null?void 0:R.name)||"..."}),")."]}),p.jsx("p",{children:"Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."}),p.jsx("p",{children:"And just like before, you can choose to activate a model for a certain combination of key/provider!"})]}),isComplete:A,content:R?p.jsx("div",{className:"bg-card/40 rounded-lg p-3 border border-border/30 shadow-inner",children:p.jsx(M5,{providerId:R.id,allAvailableModels:N,enabledModelIds:I,onToggleModel:J,isLoading:a||v,listHeightClass:"h-[26rem]"})}):p.jsxs("p",{className:"text-sm text-muted-foreground italic flex items-center",children:[p.jsx(vc,{className:"h-4 w-4 mr-2 text-amber-500"}),"Add a provider in Step ",o?"2":"1"," first."]}),icon:p.jsx(kh,{className:"h-4 w-4"})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:p.jsxs("div",{children:[w&&p.jsx(ru.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:p.jsx(gy,{value:y?void 0:100,className:"h-2"})}),p.jsxs(St,{onClick:U,disabled:y||!A,className:"w-full bg-gradient-to-r from-indigo-500 to-primary hover:opacity-90 transition-all",children:[p.jsx(yge,{className:"mr-2 h-4 w-4"}),y?"Launching...":"Start First Chat"]}),p.jsx(Cse,{})]}),contentClassName:"p-4",icon:p.jsx(Lge,{className:"h-4 w-4"})}],ee=te.findIndex(re=>!re.isComplete);return a?p.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-4xl mx-auto w-full",children:p.jsxs(ru.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full",children:[p.jsx(Ur,{className:"h-12 w-1/2 mx-auto mb-6"}),p.jsx(Ur,{className:"h-8 w-3/4 mx-auto mb-2"}),p.jsx(Ur,{className:"h-4 w-1/2 mx-auto mb-8"}),p.jsx(Ur,{className:"h-20 w-full mb-6"}),p.jsx(Ur,{className:"h-20 w-full mb-6"}),p.jsx(Ur,{className:"h-20 w-full"})]})}):p.jsx("div",{className:"flex h-full flex-col items-center justify-start p-4 bg-gradient-to-b from-background to-background/80",children:p.jsxs("div",{className:"w-full max-w-4xl space-y-6 pt-8",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(ru.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:p.jsxs("div",{className:"relative mx-auto w-16 h-16 mb-4",children:[p.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl"}),p.jsx("div",{className:"relative bg-gradient-to-br from-primary to-indigo-600 p-3 rounded-full",children:p.jsx(CJe,{className:"h-10 w-10 text-white"})})]})}),p.jsx("h2",{className:"text-3xl font-bold mb-3 bg-gradient-to-r from-primary to-indigo-500 bg-clip-text text-transparent",children:"Welcome to LiteChat"}),p.jsx(EJe,{})]}),p.jsxs(ru.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[p.jsx(br,{children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsxs("div",{className:"mt-6 bg-card/40 backdrop-blur-sm border border-border/30 rounded-xl p-3 w-3/4 mx-auto",children:[p.jsx(gy,{value:W,className:"h-1.5"}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Setup Progress: ",Math.round(W),"%"]})]})}),p.jsx(_r,{children:p.jsxs("p",{children:["Steps completed: ",$," of ",ne]})})]})}),te.map((re,de)=>{const oe=de===ee;return p.jsx(ru.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:de*.1,duration:.3},children:p.jsx(jQe,{stepNumber:de+1,title:re.title,description:re.description,isComplete:re.id!=="start-chat"&&re.isComplete,isActive:oe,openOnComplete:re.id==="enable-models",contentClassName:re.id==="add-provider"||re.id==="api-key"?"p-0 border-none shadow-none bg-transparent":re.contentClassName,icon:re.icon,children:re.content})},re.id)})]}),!a&&!k&&ee===-1&&p.jsxs(ru.div,{className:"text-center mt-6 p-4 bg-red-500/10 rounded-lg border border-red-500/30",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[p.jsx(vc,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),p.jsx("p",{className:"text-sm mb-3",children:"Configuration issue detected. Please review provider settings."}),p.jsx(St,{variant:"outline",size:"sm",onClick:G,className:"border-red-500/50 hover:bg-red-500/20 transition-colors",children:"Open Provider Settings"})]})]})})},r2=["conversation.title_generation"],PQe=({conversationId:e,interactions:t,status:n,className:r})=>{const i=T.useRef(null),s=T.useRef(null),[a,o]=T.useState(!1),l=T.useRef(null),c=Ln(F=>F.streamingInteractionIds),{chatMaxWidth:u,autoScrollInterval:d,enableAutoScrollOnStream:h}=gr(Sn(F=>({chatMaxWidth:F.chatMaxWidth,autoScrollInterval:F.autoScrollInterval,enableAutoScrollOnStream:F.enableAutoScrollOnStream}))),m=gr(F=>F.setEnableAutoScrollOnStream),y=T.useMemo(()=>F=>({isLoading:F.isLoading}),[]),b=T.useMemo(()=>F=>({conversationCount:F.conversations.length,isConversationLoading:F.isLoading}),[]),{isLoading:v}=Mr(Sn(y)),{conversationCount:x,isConversationLoading:w}=zn(Sn(b)),{projectCount:S,isProjectLoading:C}=No(Sn(F=>({projectCount:F.projects.length,isProjectLoading:F.isLoading}))),k=T.useMemo(()=>v||w||C?!1:x===0&&S===0,[x,S,v,w,C]),A=T.useMemo(()=>t.filter(U=>U.parentId===null&&!r2.includes(U.type)).sort((U,G)=>U.index-G.index).map(U=>{const G=t.filter($=>$.parentId===U.id&&!r2.includes($.type)).sort(($,ne)=>$.index-ne.index);return[U,...G]}),[t]),R=ll(Sn(F=>Object.values(F.canvasControls))),N=T.useCallback((F,J,U,G)=>R.filter(ne=>{const W=ne.type===F,te=ne.targetSlot===J,ee=!!ne.renderer;return W&&te&&ee}).map(ne=>{if(ne.renderer){const te={...{interaction:U,interactionId:U==null?void 0:U.id,responseContent:typeof(U==null?void 0:U.response)=="string"?U.response:void 0,canvasContextType:F},...G};return p.jsx(Ve.Fragment,{children:ne.renderer(te)},ne.id)}return null}).filter(Boolean),[R]),I=(F="smooth")=>{s.current&&s.current.scrollTo({top:s.current.scrollHeight,behavior:F})};T.useEffect(()=>{if(s.current){const{scrollHeight:F,clientHeight:J,scrollTop:U}=s.current;(F-J<=U+150||n!=="streaming")&&requestAnimationFrame(()=>{I(n==="streaming"?"smooth":"auto")})}},[A.length,n]),T.useEffect(()=>(n==="streaming"&&h?(l.current&&clearInterval(l.current),l.current=setInterval(()=>{I("smooth")},d)):l.current&&(clearInterval(l.current),l.current=null),()=>{l.current&&clearInterval(l.current)}),[n,d,h]),T.useEffect(()=>{const F=s.current;if(!F)return;const J=()=>{if(!s.current)return;const{scrollHeight:U,clientHeight:G,scrollTop:$}=s.current,ne=$<U-G-G*.5;o(ne)};return F.addEventListener("scroll",J,{passive:!0}),J(),()=>{s.current&&s.current.removeEventListener("scroll",J)}},[]),T.useEffect(()=>{i.current&&(s.current=i.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const O=T.useMemo(()=>{const F=[];return[...t].sort((G,$)=>{var ne,W;return G.index!==$.index?G.index-$.index:G.parentId===null&&$.parentId!==null?-1:G.parentId!==null&&$.parentId===null?1:G.parentId!==null&&$.parentId!==null&&G.parentId===$.parentId?G.index-$.index:(((ne=G.startedAt)==null?void 0:ne.getTime())??0)-(((W=$.startedAt)==null?void 0:W.getTime())??0)}).filter(G=>G.parentId===null&&!r2.includes(G.type)).forEach(G=>{var te,ee;let $=null;if(G.type==="message.user_assistant"&&G.prompt)$=G.prompt;else if(G.type==="message.assistant_regen"&&((te=G.metadata)!=null&&te.regeneratedFromId)){let re,de=G;const oe=new Set;for(;de&&!oe.has(de.id);){if(oe.add(de.id),de.type==="message.user_assistant"&&de.prompt){re=de;break}if((ee=de.metadata)!=null&&ee.regeneratedFromId)de=t.find(Ie=>Ie.id===de.metadata.regeneratedFromId);else break}re?$=re.prompt:G.prompt?$=G.prompt:console.warn(`[ChatCanvas] Could not reliably find user prompt for active interaction ${G.id} of type ${G.type}. Displaying turn without prompt.`)}if($)F.push(p.jsx(NT,{turnData:$,timestamp:G.startedAt,isAssistantComplete:G.status==="COMPLETED"||G.status==="ERROR"},`prompt-${G.id}`));else if(G.type!=="message.user_assistant"&&G.type!=="message.assistant_regen"){console.log("[ChatCanvas] Skipping active interaction on spine due to no user prompt and non-standard type:",G.id,G.type);return}const ne=t.filter(re=>re.parentId===G.id&&!r2.includes(re.type)).sort((re,de)=>re.index-de.index),W=[G,...ne];W.length>0&&F.push(p.jsx(BVe,{interactionGroup:W,renderSlot:(re,de,oe)=>N("interaction",re,de,oe),activeStreamingInteractionId:c.find(re=>W.some(de=>de.id===re))},`tabs-${G.id}`))}),F},[t,N,c]),L=T.useMemo(()=>c.filter(F=>!t.some(J=>J.id===F)).map(F=>p.jsx(Ok,{interactionId:F,renderSlot:(J,U,G)=>N("interaction",J,U,G)},`${F}-streaming-new`)),[c,t,N]),P=()=>v||w||C?p.jsxs("div",{className:"space-y-4 p-2 md:p-4",children:[p.jsx(Ur,{className:"h-24 w-full"}),p.jsx(Ur,{className:"h-32 w-full"}),p.jsx(Ur,{className:"h-20 w-full"})]}):e?A.length===0&&n!=="streaming"&&c.length===0?p.jsx(tq,{}):p.jsxs("div",{className:"space-y-4 p-2 md:p-4 break-words",children:[O,L]}):p.jsx(tq,{}),V=u||"max-w-7xl";return p.jsx("div",{className:Ye("flex-grow relative",r),children:k?p.jsx(sl,{className:"h-full w-full",children:p.jsx("div",{className:Ye("mx-auto w-full",V),children:p.jsx(OQe,{})})}):p.jsxs(p.Fragment,{children:[p.jsx(sl,{className:"h-full w-full",ref:i,children:p.jsx("div",{className:Ye("mx-auto w-full",V),children:P()})}),a&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>I(),"aria-label":"Scroll to bottom",children:p.jsx(cH,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"left",children:"Scroll to Bottom"})]})}),n==="streaming"&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"outline",size:"icon",className:"absolute bottom-4 right-14 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>m(!h),"aria-label":h?"Disable follow stream":"Enable follow stream",children:h?p.jsx(Nge,{className:"h-4 w-4"}):p.jsx(jge,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"left",children:h?"Stop Following Stream":"Follow Stream"})]})})]})})},DQe=Ve.memo(PQe),Gg=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const i=e.filter(s=>(s.panel??"main")===t&&(s.show?s.show():!0));return i.length===0?null:p.jsx("div",{className:Ye(r),children:i.map(s=>{const a=n==="icon"?s.iconRenderer:s.renderer;return p.jsx(Ve.Fragment,{children:a?a():null},s.id)})})},Lw=al(ol((e,t)=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,toggleChatControlPanel:(n,r)=>{const i=t().isChatControlPanelOpen[n]??!1,s=r??!i;i!==s&&(e(a=>{a.isChatControlPanelOpen[n]=s}),Fe.emit(Nr.chatControlPanelVisibilityChanged,{panelId:n,isOpen:s}))},togglePromptControlPanel:(n,r)=>{const i=t().isPromptControlPanelOpen[n]??!1,s=r??!i;i!==s&&(e(a=>{a.isPromptControlPanelOpen[n]=s}),Fe.emit(Nr.promptControlPanelVisibilityChanged,{controlId:n,isOpen:s}))},toggleSidebar:n=>{const r=t().isSidebarCollapsed,i=n??!r;r!==i&&(e({isSidebarCollapsed:i}),Fe.emit(Nr.sidebarVisibilityChanged,{isCollapsed:i}))},setGlobalLoading:n=>{t().globalLoading!==n&&(e({globalLoading:n}),Fe.emit(Nr.globalLoadingChanged,{loading:n}))},setGlobalError:n=>{t().globalError!==n&&(e({globalError:n}),Fe.emit(Nr.globalErrorChanged,{error:n}))},setFocusInputFlag:n=>{t().focusInputOnNextRender!==n&&(e({focusInputOnNextRender:n}),Fe.emit(Nr.focusInputFlagChanged,{focus:n}))},getRegisteredActionHandlers:()=>{const n="uiStateStore",r=t();return[{eventName:Nr.toggleSidebarRequest,handler:i=>r.toggleSidebar(i==null?void 0:i.isCollapsed),storeId:n},{eventName:Nr.toggleChatControlPanelRequest,handler:i=>r.toggleChatControlPanel(i.panelId,i.isOpen),storeId:n},{eventName:Nr.togglePromptControlPanelRequest,handler:i=>r.togglePromptControlPanel(i.controlId,i.isOpen),storeId:n},{eventName:Nr.setGlobalLoadingRequest,handler:i=>r.setGlobalLoading(i.loading),storeId:n},{eventName:Nr.setGlobalErrorRequest,handler:i=>r.setGlobalError(i.error),storeId:n},{eventName:Nr.setFocusInputFlagRequest,handler:i=>r.setFocusInputFlag(i.focus),storeId:n}]}})));var FQe=(e,t,n,r,i,s,a,o)=>{let l=document.documentElement,c=["light","dark"];function u(m){(Array.isArray(e)?e:[e]).forEach(y=>{let b=y==="class",v=b&&s?i.map(x=>s[x]||x):i;b?(l.classList.remove(...v),l.classList.add(s&&s[m]?s[m]:m)):l.setAttribute(y,m)}),d(m)}function d(m){o&&c.includes(m)&&(l.style.colorScheme=m)}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let m=localStorage.getItem(t)||n,y=a&&m==="system"?h():m;u(y)}catch{}},LQe=T.createContext(void 0),BQe={setTheme:e=>{},themes:[]},$Qe=()=>{var e;return(e=T.useContext(LQe))!=null?e:BQe};T.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:a,themes:o,nonce:l,scriptProps:c})=>{let u=JSON.stringify([n,t,s,e,o,a,r,i]).slice(1,-1);return T.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${FQe.toString()})(${u})`}})});const zQe=({...e})=>{const{theme:t="system"}=$Qe();return p.jsx(fye,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function ql({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:Ye("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const Hle=T.memo(T.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:i,onValueChange:s,...a},o)=>{const l=T.useRef(null),[c,u]=T.useState(e);T.useImperativeHandle(o,()=>({getValue:()=>c,setValue:m=>{u(m),s&&s(m),Fe.emit(Pn.inputChanged,{value:m}),requestAnimationFrame(()=>{const y=l.current;y&&(y.style.height="auto",y.style.height=`${y.scrollHeight}px`,y.style.overflowY=y.scrollHeight>250?"auto":"hidden")})},focus:()=>{var m;return(m=l.current)==null?void 0:m.focus()},clearValue:()=>{u(""),s&&s(""),Fe.emit(Pn.inputChanged,{value:""}),requestAnimationFrame(()=>{const m=l.current;m&&(m.style.height="auto",m.style.height=`${m.scrollHeight}px`,m.style.overflowY="hidden")})}}));const d=m=>{var y;if(m.key==="Enter"&&!m.shiftKey&&!n){m.preventDefault();const b=rh.getState().attachedFilesMetadata.length>0;(c.trim().length>0||b)&&(t(),(y=o==null?void 0:o.current)==null||y.clearValue())}},h=m=>{const y=m.target.value;u(y),s&&s(y),Fe.emit(Pn.inputChanged,{value:y})};return T.useEffect(()=>{const m=l.current;if(m){m.style.height="auto";const y=m.scrollHeight,b=250;m.style.height=`${Math.min(y,b)}px`,m.style.overflowY=y>b?"auto":"hidden"}},[c]),T.useEffect(()=>{e!==c&&(u(e),s&&s(e))},[e,s]),T.useEffect(()=>{const m=y=>{u(y.text),s&&s(y.text),Fe.emit(Pn.inputChanged,{value:y.text}),requestAnimationFrame(()=>{const b=l.current;b&&(b.style.height="auto",b.style.height=`${b.scrollHeight}px`,b.style.overflowY=b.scrollHeight>250?"auto":"hidden")})};return Fe.on(Pn.setInputTextRequest,m),()=>{Fe.off(Pn.setInputTextRequest,m)}},[s]),p.jsx(ql,{ref:l,value:c,onChange:h,onKeyDown:d,disabled:n,placeholder:r,rows:1,className:Ye("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",i),"aria-label":"Chat input",...a})}));Hle.displayName="InputArea";const Ss={dbModsLoaded:"mod.db.mods.loaded",loadedInstancesChanged:"mod.loaded.instances.changed",settingsTabsChanged:"mod.settings.tabs.changed",loadingStateChanged:"mod.loading.state.changed",modLoaded:"mod.sdk.loaded",modError:"mod.sdk.error",loadDbModsRequest:"mod.load.db.mods.request",addDbModRequest:"mod.add.db.mod.request",updateDbModRequest:"mod.update.db.mod.request",deleteDbModRequest:"mod.delete.db.mod.request"},Sh=al(ol((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Mt.loadMods();e({dbMods:n,isLoading:!1}),Fe.emit(Ss.dbModsLoaded,{dbMods:n})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),Fe.emit(Ss.loadingStateChanged,{isLoading:!1,error:r}),Pe.error(r)}},addDbMod:async n=>{const r=Us(),i={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(s=>{s.dbMods.push(i),s.dbMods.sort((a,o)=>a.loadOrder-o.loadOrder)});try{return await Mt.saveMod(i),Pe.success(`Mod "${i.name}" added.`),Fe.emit(Ss.dbModsLoaded,{dbMods:t().dbMods}),r}catch(s){const a="Failed to save new mod";throw console.error("ModStore: Error adding mod",s),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=a}),Fe.emit(Ss.loadingStateChanged,{isLoading:t().isLoading,error:a}),Pe.error(a),s}},updateDbMod:async(n,r)=>{let i,s=-1;e(o=>{s=o.dbMods.findIndex(l=>l.id===n),s!==-1?(i={...o.dbMods[s]},o.dbMods[s]={...o.dbMods[s],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,c)=>l.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const a=s!==-1?t().dbMods[s]:void 0;if(a)try{await Mt.saveMod(a),Pe.success(`Mod "${a.name}" updated.`),Fe.emit(Ss.dbModsLoaded,{dbMods:t().dbMods})}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(c=>{const u=c.dbMods.findIndex(d=>d.id===n);u!==-1&&i&&(c.dbMods[u]=i,c.dbMods.sort((d,h)=>d.loadOrder-h.loadOrder)),c.error=l}),Fe.emit(Ss.loadingStateChanged,{isLoading:t().isLoading,error:l}),Pe.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(s=>s.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const i=r.name;e(s=>({dbMods:s.dbMods.filter(a=>a.id!==n)}));try{await Mt.deleteMod(n),Pe.success(`Mod "${i}" deleted.`),Fe.emit(Ss.dbModsLoaded,{dbMods:t().dbMods})}catch(s){const a="Failed to delete mod";throw console.error("ModStore: Error deleting mod",s),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,c)=>l.loadOrder-c.loadOrder),o.error=a}),Fe.emit(Ss.loadingStateChanged,{isLoading:t().isLoading,error:a}),Pe.error(a),s}},setLoadedMods:n=>{e({loadedMods:n}),Fe.emit(Ss.loadedInstancesChanged,{loadedMods:n})},_addSettingsTab:n=>{e(r=>{if(!r.modSettingsTabs.some(i=>i.id===n.id))r.modSettingsTabs.push(n),r.modSettingsTabs.sort((i,s)=>(i.order??999)-(s.order??999));else{console.warn(`ModStore: Settings tab with ID "${n.id}" already registered. Overwriting.`);const i=r.modSettingsTabs.findIndex(s=>s.id===n.id);r.modSettingsTabs[i]=n,r.modSettingsTabs.sort((s,a)=>(s.order??999)-(a.order??999))}}),Fe.emit(Ss.settingsTabsChanged,{tabs:t().modSettingsTabs})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(i=>i.id!==n)}),Fe.emit(Ss.settingsTabsChanged,{tabs:t().modSettingsTabs})},getRegisteredActionHandlers:()=>{const n="modStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:Ss.loadDbModsRequest,handler:r.loadDbMods,storeId:n},{eventName:Ss.addDbModRequest,handler:i(r.addDbMod),storeId:n},{eventName:Ss.updateDbModRequest,handler:s=>r.updateDbMod(s.id,s.changes),storeId:n},{eventName:Ss.deleteDbModRequest,handler:s=>r.deleteDbMod(s.id),storeId:n}]}}))),qh={loaded:"app.loaded",errorBoundaryTriggered:"app.error.boundary.triggered",initializationPhaseCompleted:"app.initialization.phase.completed"};function xO(e){const t=e.id,n=e.name;return{modId:t,modName:n,registerPromptControl:i=>(Fe.emit(Fr.registerPromptControlRequest,{control:i}),()=>Fe.emit(Fr.unregisterPromptControlRequest,{id:i.id})),registerChatControl:i=>{const s={...i,status:i.status??(()=>"ready")};return Fe.emit(Fr.registerChatControlRequest,{control:s}),()=>Fe.emit(Fr.unregisterChatControlRequest,{id:i.id})},registerCanvasControl:i=>(Fe.emit(Fr.registerCanvasControlRequest,{control:i}),()=>Fe.emit(Fr.unregisterCanvasControlRequest,{id:i.id})),registerTool:(i,s,a)=>(console.log(`[${n}] Registering tool: ${i}`),Fe.emit(Fr.registerToolRequest,{modId:t,toolName:i,definition:s,implementation:a}),()=>Fe.emit(Fr.unregisterToolRequest,{toolName:i})),on:(i,s)=>(Fe.on(i,s),()=>Fe.off(i,s)),emit:(i,s)=>{Fe.emit(i,s)},addMiddleware:(i,s)=>(Fe.emit(Fr.registerMiddlewareRequest,{hookName:i,modId:t,callback:s}),()=>Fe.emit(Fr.unregisterMiddlewareRequest,{hookName:i,modId:t,callback:s})),registerSettingsTab:i=>(Sh.getState()._addSettingsTab(i),()=>Sh.getState()._removeSettingsTab(i.id)),getContextSnapshot:()=>{const i=Ln.getState(),s=zn.getState(),a=gr.getState(),o=Mr.getState(),{providerId:l}=hc(o.selectedModelId),c=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:c,interactions:Object.freeze(i.currentConversationId===c?i.interactions.map(u=>Object.freeze({...u})):[]),isStreaming:i.status==="streaming",selectedProviderId:l,selectedModelId:o.selectedModelId,activeSystemPrompt:a.globalSystemPrompt,temperature:a.temperature,maxTokens:a.maxTokens,theme:a.theme,gitUserName:a.gitUserName,gitUserEmail:a.gitUserEmail})},showToast:(i,s)=>{Pe[i](`[Mod: ${n}] ${s}`)},log:(i,...s)=>{console[i](`[Mod: ${n}]`,...s)},registerModalProvider:(i,s)=>(Fe.emit(Fr.registerModalProviderRequest,{modalId:i,provider:s}),()=>Fe.emit(Fr.unregisterModalProviderRequest,{modalId:i})),getVfsInstance:async i=>Ki.getState().initializeVFS(i,{force:!0})}}async function UQe(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let i=r.scriptContent,s=null,a=null;try{if(s=xO(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);i=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!i)throw new Error("Mod script content is empty.");new Function("modApi",i)(s),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){a=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),Pe.error(`Error loading mod "${r.name}": ${a instanceof Error?a.message:a}`)}s||(s=xO(r));const o={id:r.id,name:r.name,api:s,error:a};return Fe.emit(o.error?Ss.modError:Ss.modLoaded,{id:r.id,name:r.name,error:o.error??"unknown error"}),o}));return Fe.emit(qh.loaded,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}const mr={dataLoaded:"rules.data.loaded",ruleSaved:"rules.rule.saved",ruleDeleted:"rules.rule.deleted",tagSaved:"rules.tag.saved",tagDeleted:"rules.tag.deleted",linkSaved:"rules.link.saved",linkDeleted:"rules.link.deleted",loadingStateChanged:"rules.loading.state.changed",loadRulesAndTagsRequest:"rules.load.rules.and.tags.request",addRuleRequest:"rules.add.rule.request",updateRuleRequest:"rules.update.rule.request",deleteRuleRequest:"rules.delete.rule.request",addTagRequest:"rules.add.tag.request",updateTagRequest:"rules.update.tag.request",deleteTagRequest:"rules.delete.tag.request",linkTagToRuleRequest:"rules.link.tag.to.rule.request",unlinkTagFromRuleRequest:"rules.unlink.tag.from.rule.request"},ZV=null;class qQe{static async applyBundledConfig(t){{console.log("[BundledConfig] No bundled user configuration found, skipping...");return}}static hasBundledConfig(){return ZV!==null}static getBundledConfig(){return ZV}}class Bw{static async syncAll(t={}){const n={syncRepos:!0,syncConversations:!0,continueOnError:!0,maxConcurrent:3,...t};if(this.isRunning){Pe.warning("Bulk sync already in progress");return}this.isRunning=!0,this.abortController=new AbortController;const r=zn.getState(),i=r.syncRepos,s=r.conversations.filter(o=>o.syncRepoId),a={totalRepos:n.syncRepos?i.length:0,completedRepos:0,totalConversations:n.syncConversations?s.length:0,completedConversations:0,currentOperation:"Starting bulk sync...",errors:[]};try{Fe.emit(li.bulkSyncStarted,{progress:a}),Pe.info(`Starting bulk sync: ${i.length} repositories, ${s.length} conversations`),n.syncRepos&&i.length>0&&await this.syncRepositoriesInBatches(i,n,a),n.syncConversations&&s.length>0&&await this.syncConversationsInBatches(s,n,a);const o=a.errors.length>0;Fe.emit(li.bulkSyncCompleted,{progress:a,success:!o}),o?(Pe.warning(`Bulk sync completed with ${a.errors.length} errors. Check console for details.`),console.warn("Bulk sync errors:",a.errors)):Pe.success("Bulk sync completed successfully!")}catch(o){console.error("Bulk sync failed:",o),Pe.error(`Bulk sync failed: ${o instanceof Error?o.message:"Unknown error"}`),Fe.emit(li.bulkSyncFailed,{progress:a,error:String(o)})}finally{this.isRunning=!1,this.abortController=null}}static async syncPendingConversations(){const t=zn.getState(),n=t.conversations.filter(r=>{const i=t.conversationSyncStatus[r.id];return r.syncRepoId&&i==="needs-sync"});if(n.length===0){Pe.info("No conversations need syncing");return}Pe.info(`Syncing ${n.length} pending conversations...`),await this.syncAll({syncRepos:!1,syncConversations:!0,continueOnError:!0,maxConcurrent:2})}static async initializeAllRepositories(){const n=zn.getState().syncRepos;if(n.length===0){Pe.info("No repositories configured");return}Pe.info(`Initializing ${n.length} repositories...`),await this.syncAll({syncRepos:!0,syncConversations:!1,continueOnError:!0,maxConcurrent:2})}static abort(){this.isRunning&&this.abortController&&(this.abortController.abort(),Pe.info("Bulk sync operation cancelled"))}static isActive(){return this.isRunning}static async syncRepositoriesInBatches(t,n,r){var s;r.currentOperation="Initializing repositories...",Fe.emit(li.bulkSyncProgress,{progress:r});const i=this.createBatches(t,n.maxConcurrent);for(const a of i){if((s=this.abortController)!=null&&s.signal.aborted)throw new Error("Operation cancelled");const o=a.map(async l=>{try{r.currentOperation=`Syncing repository: ${l.name}`,Fe.emit(li.bulkSyncProgress,{progress:r}),await zn.getState().initializeOrSyncRepo(l.id,!0),r.completedRepos++}catch(c){const u=c instanceof Error?c.message:String(c);if(r.errors.push({type:"repo",id:l.id,error:u}),console.error(`Failed to sync repository ${l.name}:`,c),!n.continueOnError)throw c}});await Promise.all(o),Fe.emit(li.bulkSyncProgress,{progress:r})}}static async syncConversationsInBatches(t,n,r){var s;r.currentOperation="Syncing conversations...",Fe.emit(li.bulkSyncProgress,{progress:r});const i=this.createBatches(t,n.maxConcurrent);for(const a of i){if((s=this.abortController)!=null&&s.signal.aborted)throw new Error("Operation cancelled");const o=a.map(async l=>{try{r.currentOperation=`Syncing conversation: ${l.title}`,Fe.emit(li.bulkSyncProgress,{progress:r}),await zn.getState().syncConversation(l.id,!0),r.completedConversations++}catch(c){const u=c instanceof Error?c.message:String(c);if(r.errors.push({type:"conversation",id:l.id,error:u}),console.error(`Failed to sync conversation ${l.title}:`,c),!n.continueOnError)throw c}});await Promise.all(o),Fe.emit(li.bulkSyncProgress,{progress:r})}}static createBatches(t,n){const r=[];for(let i=0;i<t.length;i+=n)r.push(t.slice(i,i+n));return r}}ve(Bw,"isRunning",!1),ve(Bw,"abortController",null);const C0=Object.freeze(Object.defineProperty({__proto__:null,BulkSyncService:Bw},Symbol.toStringTag,{value:"Module"}));class Gle{static async runStartupSync(){if(!this.hasRunStartupSync){this.hasRunStartupSync=!0;try{const t=zn.getState(),n=gr.getState();await new Promise(o=>setTimeout(o,1e3));const r=t.syncRepos,i=t.conversations.filter(o=>o.syncRepoId);if(r.length===0){console.log("[StartupSync] No repositories configured, skipping startup sync");return}console.log(`[StartupSync] Found ${r.length} repositories and ${i.length} synced conversations`);const s=r.filter(o=>{const l=t.repoInitializationStatus[o.id];return!l||l==="error"});s.length>0&&n.autoInitializeReposOnStartup?(console.log(`[StartupSync] Initializing ${s.length} repositories in background`),setTimeout(async()=>{try{await Bw.syncAll({syncRepos:!0,syncConversations:!1,continueOnError:!0,maxConcurrent:1})}catch(o){console.warn("[StartupSync] Background repo initialization failed:",o)}},2e3)):s.length>0&&console.log(`[StartupSync] Found ${s.length} uninitialized repositories, but auto-initialization is disabled`);const a=i.filter(o=>t.conversationSyncStatus[o.id]==="needs-sync");a.length>0&&n.autoSyncOnStreamComplete&&(console.log(`[StartupSync] Found ${a.length} conversations pending sync`),setTimeout(async()=>{try{await Bw.syncPendingConversations()}catch(o){console.warn("[StartupSync] Background conversation sync failed:",o)}},5e3))}catch(t){console.error("[StartupSync] Startup sync failed:",t)}}}static reset(){this.hasRunStartupSync=!1}}ve(Gle,"hasRunStartupSync",!1);function VQe(e){const t=new Map(e.map(a=>[a.id,a])),n=new Set,r=new Set,i=[];function s(a){if(n.has(a.id))return!0;if(r.has(a.id))return console.error(`[Init] Circular dependency detected involving module: ${a.id}`),Pe.error("Initialization Error: Circular dependency in controls."),!1;r.add(a.id);for(const o of a.dependencies??[]){const l=t.get(o);if(!l)return console.error(`[Init] Missing dependency "${o}" for module "${a.id}"`),Pe.error(`Initialization Error: Missing dependency "${o}" for "${a.id}".`),r.delete(a.id),!1;if(!s(l))return r.delete(a.id),!1}return r.delete(a.id),n.add(a.id),i.push(a),!0}for(const a of e)if(!n.has(a.id)&&!s(a))return null;return i}async function WQe(e,t){console.log("[Init] Core Data: Applying bundled configuration..."),await qQe.applyBundledConfig(),console.log("[Init] Core Data: Requesting loads..."),t.emit(sn.loadSettingsRequest,void 0),t.emit(dr.loadInitialDataRequest,void 0),t.emit(mr.loadRulesAndTagsRequest,void 0),t.emit(Yn.loadConversationsRequest,void 0),t.emit(ga.loadProjectsRequest,void 0),await new Promise(n=>{let r=!1,i=!1,s=!1,a=!1,o=!1;const l=()=>{r&&i&&s&&a&&o&&n()},c=t.on(sn.loaded,()=>{r=!0,c(),l()}),u=t.on(dr.initialDataLoaded,()=>{i=!0,u(),l()}),d=t.on(mr.dataLoaded,()=>{s=!0,d(),l()}),h=t.on(Yn.conversationsLoaded,()=>{a=!0,h(),l()}),m=t.on(ga.loaded,()=>{o=!0,m(),l()})}),Fe.emit(qh.initializationPhaseCompleted,{phase:"coreData"}),console.log("[Init] Core Data: Loaded (or load requested)."),setTimeout(()=>{Gle.runStartupSync().catch(n=>{console.warn("[Init] Startup sync failed:",n)})},1e3)}async function HQe(e,t){console.log("[Init] Control Modules: Instantiation & Dependency Resolution START");const n=e.map(i=>new i),r=VQe(n);if(!r)throw console.error("[Init] Control Modules: Dependency resolution FAILED."),new Error("Failed to resolve control module dependency order.");console.log(`[Init] Control Modules: Dependency order resolved (${r.length} modules):`,r.map(i=>i.id)),console.log("[Init] Control Modules: Instantiation & Dependency Resolution COMPLETE"),console.log("[Init] Control Modules: Initialization START");for(const i of r)try{await i.initialize(t)}catch(s){console.error(`[Init] Error initializing module "${i.id}":`,s),Pe.error(`Module Init Error (${i.id}): ${s instanceof Error?s.message:String(s)}`)}return Fe.emit(qh.initializationPhaseCompleted,{phase:"controlModulesInit"}),console.log("[Init] Control Modules: Initialization COMPLETE."),r}function GQe(e,t){console.log("[Init] Control Modules: Registration START");for(const n of e)try{n.register(t)}catch(r){console.error(`[Init] Error registering module "${n.id}":`,r),Pe.error(`Module Registration Error (${n.id}): ${r instanceof Error?r.message:String(r)}`)}Fe.emit(qh.initializationPhaseCompleted,{phase:"controlModulesRegister"}),console.log("[Init] Control Modules: Registration COMPLETE.")}async function KQe(e,t){console.log("[Init] External Mods: Loading DB records..."),t.emit(Ss.loadDbModsRequest,void 0),await new Promise(i=>{const s=t.on(Ss.dbModsLoaded,()=>{s(),i()})});const n=Sh.getState().dbMods;console.log(`[Init] External Mods: Processing ${n.length} mods...`);const r=await UQe(n);Sh.getState().setLoadedMods(r),Fe.emit(qh.initializationPhaseCompleted,{phase:"externalMods"}),console.log(`[Init] External Mods: ${r.length} mods processed.`)}function YQe(e,t){var a;console.log("[Init] Core UI States: Initializing...");const n=e.selectedItemId,r=e.selectedItemType,i=r==="project"?n:r==="conversation"?((a=e.getConversationById(n))==null?void 0:a.projectId)??null:null,s=e.getEffectiveProjectSettings(i);t.emit(Pn.initializePromptStateRequest,{effectiveSettings:s}),Fe.emit(qh.initializationPhaseCompleted,{phase:"uiStateSync"}),console.log("[Init] Core UI States: Initial prompt state synchronization requested.")}async function ZQe(e,t){console.log("[Init] LiteChat Full Initialization START"),qp.initializeCanvasEventHandlers();const n={requestLoadSettings:()=>t.emit(sn.loadSettingsRequest,void 0),requestLoadProviderData:()=>t.emit(dr.loadInitialDataRequest,void 0),requestLoadRulesAndTags:()=>t.emit(mr.loadRulesAndTagsRequest,void 0),requestLoadConversations:()=>t.emit(Yn.loadConversationsRequest,void 0),requestLoadProjects:()=>t.emit(ga.loadProjectsRequest,void 0),requestLoadDbMods:()=>t.emit(Ss.loadDbModsRequest,void 0),setLoadedMods:Sh.getState().setLoadedMods,getConversationById:zn.getState().getConversationById,getEffectiveProjectSettings:No.getState().getEffectiveProjectSettings,initializePromptState:To.getState().initializePromptState,selectedItemId:zn.getState().selectedItemId,selectedItemType:zn.getState().selectedItemType};let r=[];try{await WQe(n,t),r=await HQe(e,t),GQe(r,t),await KQe(n,t),YQe(n,t),Fe.emit(qh.initializationPhaseCompleted,{phase:"all"}),console.log("LiteChat: Full initialization sequence COMPLETE.")}catch(i){throw console.error("LiteChat: Full initialization sequence FAILED:",i),Pe.error(`Initialization sequence failed: ${i instanceof Error?i.message:String(i)}`),Lw.getState().setGlobalError("Initialization sequence failed."),i}return r}const Kle=al(ol((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,i]=await Promise.all([Mt.loadRules(),Mt.loadTags(),Mt.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:i,isLoading:!1}),Fe.emit(mr.dataLoaded,{rules:n,tags:r,links:i})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),Pe.error("Failed to load rules and tags."),Fe.emit(mr.loadingStateChanged,{isLoading:!1,error:"Failed load rules/tags"})}},addRule:async n=>{const r=Us(),i=new Date,s={id:r,createdAt:i,updatedAt:i,...n};e(a=>{a.rules.push(s),a.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{await Mt.saveRule(s),Pe.success(`Rule "${s.name}" added.`),Fe.emit(mr.ruleSaved,{rule:s});const{rules:a,tags:o,tagRuleLinks:l}=t();return Fe.emit(mr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]}),r}catch(a){throw console.error("RulesStore: Error adding rule",a),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),Pe.error("Failed to save new rule."),a}},updateRule:async(n,r)=>{const i=t().rules.find(a=>a.id===n);if(!i)throw Pe.error("Rule not found for update."),new Error("Rule not found");const s={...i,...r,updatedAt:new Date};e(a=>{const o=a.rules.findIndex(l=>l.id===n);o!==-1&&(a.rules[o]=s,a.rules.sort((l,c)=>l.name.localeCompare(c.name)))});try{await Mt.saveRule(s),Pe.success(`Rule "${s.name}" updated.`),Fe.emit(mr.ruleSaved,{rule:s});const{rules:a,tags:o,tagRuleLinks:l}=t();Fe.emit(mr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error updating rule",a),e(o=>{const l=o.rules.findIndex(c=>c.id===n);l!==-1&&(o.rules[l]=i,o.rules.sort((c,u)=>c.name.localeCompare(u.name))),o.error="Failed to save rule update"}),Pe.error("Failed to save rule update."),a}},deleteRule:async n=>{const r=t().rules.find(a=>a.id===n);if(!r)throw Pe.error("Rule not found for deletion."),new Error("Rule not found");const i=[...t().tagRuleLinks.filter(a=>a.ruleId===n)],s={...r};e(a=>{a.rules=a.rules.filter(o=>o.id!==n),a.tagRuleLinks=a.tagRuleLinks.filter(o=>o.ruleId!==n)});try{await Mt.deleteRule(n),Pe.success(`Rule "${r.name}" deleted.`),Fe.emit(mr.ruleDeleted,{ruleId:n});const{rules:a,tags:o,tagRuleLinks:l}=t();Fe.emit(mr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error deleting rule",a),e(o=>{o.rules.find(l=>l.id===s.id)||(o.rules.push(s),o.rules.sort((l,c)=>l.name.localeCompare(c.name))),i.forEach(l=>{o.tagRuleLinks.find(c=>c.tagId===l.tagId&&c.ruleId===l.ruleId)||o.tagRuleLinks.push(l)}),o.error="Failed to delete rule"}),Pe.error("Failed to delete rule."),a}},addTag:async n=>{const r=Us(),i=new Date,s={id:r,createdAt:i,updatedAt:i,...n};e(a=>{a.tags.push(s),a.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{await Mt.saveTag(s),Pe.success(`Tag "${s.name}" added.`),Fe.emit(mr.tagSaved,{tag:s});const{rules:a,tags:o,tagRuleLinks:l}=t();return Fe.emit(mr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]}),r}catch(a){throw console.error("RulesStore: Error adding tag",a),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),Pe.error("Failed to save new tag."),a}},updateTag:async(n,r)=>{const i=t().tags.find(a=>a.id===n);if(!i)throw Pe.error("Tag not found for update."),new Error("Tag not found");const s={...i,...r,updatedAt:new Date};e(a=>{const o=a.tags.findIndex(l=>l.id===n);o!==-1&&(a.tags[o]=s,a.tags.sort((l,c)=>l.name.localeCompare(c.name)))});try{await Mt.saveTag(s),Pe.success(`Tag "${s.name}" updated.`),Fe.emit(mr.tagSaved,{tag:s});const{rules:a,tags:o,tagRuleLinks:l}=t();Fe.emit(mr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error updating tag",a),e(o=>{const l=o.tags.findIndex(c=>c.id===n);l!==-1&&(o.tags[l]=i,o.tags.sort((c,u)=>c.name.localeCompare(u.name))),o.error="Failed to save tag update"}),Pe.error("Failed to save tag update."),a}},deleteTag:async n=>{const r=t().tags.find(a=>a.id===n);if(!r)throw Pe.error("Tag not found for deletion."),new Error("Tag not found");const i={...r},s=[...t().tagRuleLinks.filter(a=>a.tagId===n)];e(a=>{a.tags=a.tags.filter(o=>o.id!==n),a.tagRuleLinks=a.tagRuleLinks.filter(o=>o.tagId!==n)});try{await Mt.deleteTag(n),Pe.success(`Tag "${r.name}" deleted.`),Fe.emit(mr.tagDeleted,{tagId:n});const{rules:a,tags:o,tagRuleLinks:l}=t();Fe.emit(mr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error deleting tag",a),e(o=>{o.tags.find(l=>l.id===i.id)||(o.tags.push(i),o.tags.sort((l,c)=>l.name.localeCompare(c.name))),s.forEach(l=>{o.tagRuleLinks.find(c=>c.tagId===l.tagId&&c.ruleId===l.ruleId)||o.tagRuleLinks.push(l)}),o.error="Failed to delete tag"}),Pe.error("Failed to delete tag."),a}},linkTagToRule:async(n,r)=>{const i=`${n}-${r}`;if(t().tagRuleLinks.some(a=>a.id===i)){Pe.info("Link already exists.");return}const s={id:i,tagId:n,ruleId:r};e(a=>{a.tagRuleLinks.push(s)});try{await Mt.saveTagRuleLink(s),Pe.success("Tag linked to rule."),mr.linkSaved&&Fe.emit(mr.linkSaved,{link:s});const{rules:a,tags:o,tagRuleLinks:l}=t();Fe.emit(mr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error linking tag to rule",a),e(o=>{o.tagRuleLinks=o.tagRuleLinks.filter(l=>l.id!==i),o.error="Failed to link tag to rule"}),Pe.error("Failed to link tag to rule."),a}},unlinkTagFromRule:async(n,r)=>{const i=`${n}-${r}`,s=t().tagRuleLinks.find(a=>a.id===i);s||Pe.info("Link not found for unlinking."),e(a=>{a.tagRuleLinks=a.tagRuleLinks.filter(o=>o.id!==i)});try{await Mt.deleteTagRuleLink(i),Pe.success("Tag unlinked from rule."),mr.linkDeleted&&Fe.emit(mr.linkDeleted,{linkId:i});const{rules:a,tags:o,tagRuleLinks:l}=t();Fe.emit(mr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error unlinking tag from rule",a),s&&e(o=>{o.tagRuleLinks.some(l=>l.id===s.id)||o.tagRuleLinks.push(s),o.error="Failed to unlink tag from rule"}),Pe.error("Failed to unlink tag from rule."),a}},getRulesForTag:n=>{const r=t(),i=new Set(r.tagRuleLinks.filter(s=>s.tagId===n).map(s=>s.ruleId));return r.rules.filter(s=>i.has(s.id))},getTagsForRule:n=>{const r=t(),i=new Set(r.tagRuleLinks.filter(s=>s.ruleId===n).map(s=>s.tagId));return r.tags.filter(s=>i.has(s.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(i=>r.has(i.id))},getRegisteredActionHandlers:()=>{const n="rulesStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:mr.loadRulesAndTagsRequest,handler:r.loadRulesAndTags,storeId:n},{eventName:mr.addRuleRequest,handler:i(r.addRule),storeId:n},{eventName:mr.updateRuleRequest,handler:s=>r.updateRule(s.id,s.updates),storeId:n},{eventName:mr.deleteRuleRequest,handler:s=>r.deleteRule(s.id),storeId:n},{eventName:mr.addTagRequest,handler:i(r.addTag),storeId:n},{eventName:mr.updateTagRequest,handler:s=>r.updateTag(s.id,s.updates),storeId:n},{eventName:mr.deleteTagRequest,handler:s=>r.deleteTag(s.id),storeId:n},{eventName:mr.linkTagToRuleRequest,handler:s=>r.linkTagToRule(s.tagId,s.ruleId),storeId:n},{eventName:mr.unlinkTagFromRuleRequest,handler:s=>r.unlinkTagFromRule(s.tagId,s.ruleId),storeId:n}]}}))),ud={promptTemplatesChanged:"prompt-template.prompts.changed",promptTemplateAdded:"prompt-template.added",promptTemplateUpdated:"prompt-template.updated",promptTemplateDeleted:"prompt-template.deleted",loadPromptTemplatesRequest:"prompt-template.load.request",addPromptTemplateRequest:"prompt-template.add.request",updatePromptTemplateRequest:"prompt-template.update.request",deletePromptTemplateRequest:"prompt-template.delete.request",selectPromptTemplateRequest:"prompt-template.select.request",compilePromptTemplateRequest:"prompt-template.compile.request"},eA=al(ol((e,t)=>({promptTemplates:[],loading:!1,error:null,loadPromptTemplates:async()=>{e(n=>{n.loading=!0,n.error=null});try{const n=await Mt.loadPromptTemplates();e(r=>{r.promptTemplates=n,r.loading=!1}),Fe.emit(ud.promptTemplatesChanged,{promptTemplates:n})}catch(n){const r=n instanceof Error?n.message:"Failed to load prompt templates";e(i=>{i.error=r,i.loading=!1}),Pe.error(r)}},addPromptTemplate:async n=>{const r={id:Us(),createdAt:new Date,updatedAt:new Date,...n};e(i=>{i.promptTemplates.push(r)});try{return await Mt.savePromptTemplate(r),Fe.emit(ud.promptTemplateAdded,{promptTemplate:r}),Pe.success("Prompt template created successfully"),r.id}catch(i){e(a=>{a.promptTemplates=a.promptTemplates.filter(o=>o.id!==r.id)});const s=i instanceof Error?i.message:"Failed to create prompt template";throw e(a=>{a.error=s}),Pe.error(s),i}},updatePromptTemplate:async(n,r)=>{const i=t().promptTemplates.find(a=>a.id===n);if(!i){Pe.error("Prompt template not found");return}const s={...i,...r,updatedAt:new Date};e(a=>{const o=a.promptTemplates.findIndex(l=>l.id===n);o!==-1&&(a.promptTemplates[o]=s)});try{await Mt.savePromptTemplate(s),Fe.emit(ud.promptTemplateUpdated,{promptTemplate:s}),Pe.success("Prompt template updated successfully")}catch(a){e(l=>{const c=l.promptTemplates.findIndex(u=>u.id===n);c!==-1&&(l.promptTemplates[c]=i)});const o=a instanceof Error?a.message:"Failed to update prompt template";throw e(l=>{l.error=o}),Pe.error(o),a}},deletePromptTemplate:async n=>{const r=t().promptTemplates.find(i=>i.id===n);if(!r){Pe.error("Prompt template not found");return}e(i=>{i.promptTemplates=i.promptTemplates.filter(s=>s.id!==n)});try{await Mt.deletePromptTemplate(n),Fe.emit(ud.promptTemplateDeleted,{id:n}),Pe.success("Prompt template deleted successfully")}catch(i){e(a=>{a.promptTemplates.push(r)});const s=i instanceof Error?i.message:"Failed to delete prompt template";throw e(a=>{a.error=s}),Pe.error(s),i}},compilePromptTemplate:async(n,r)=>{const i=t().promptTemplates.find(s=>s.id===n);if(!i)throw new Error("Template not found");try{let s=i.prompt;for(const o of i.variables){const l=r[o.name],c=[new RegExp(`{{\\s*${o.name}\\s*}}`,"g"),new RegExp(`{{${o.name}}}`,"g"),new RegExp(`{{ ${o.name} }}`,"g")];if(l!=null){let u;typeof l=="object"?u=JSON.stringify(l):u=String(l);for(const d of c){const h=s;s=s.replace(d,u),h!==s&&console.log(`Replaced "${o.name}" using pattern ${d} in:`,h,"",s)}}else{if(o.required)throw new Error(`Required variable "${o.name}" is missing`);if(o.default)for(const u of c)s=s.replace(u,o.default)}}return{content:s,selectedTools:i.tools,selectedRules:i.rules}}catch(s){const a=s instanceof Error?s.message:"Failed to compile prompt template";throw Pe.error(a),s}},getRegisteredActionHandlers:()=>{const n=t();return[{eventName:ud.loadPromptTemplatesRequest,handler:()=>n.loadPromptTemplates(),storeId:"promptTemplateStore"},{eventName:ud.addPromptTemplateRequest,handler:async r=>{await n.addPromptTemplate(r.promptTemplate)},storeId:"promptTemplateStore"},{eventName:ud.updatePromptTemplateRequest,handler:r=>n.updatePromptTemplate(r.id,r.updates),storeId:"promptTemplateStore"},{eventName:ud.deletePromptTemplateRequest,handler:r=>n.deletePromptTemplate(r.id),storeId:"promptTemplateStore"},{eventName:ud.compilePromptTemplateRequest,handler:async r=>{await n.compilePromptTemplate(r.templateId,r.formData)},storeId:"promptTemplateStore"}]}}))),XQe=[gr,Mr,Kle,zn,No,Ln,rh,To,Sh,Lw,Ki,ll,eA];class Yle{static initialize(){if(this.isInitialized){console.warn("[Coordinator] Already initialized. Skipping re-initialization.");return}console.log("[Coordinator] Initializing dynamic event listeners for action requests...");const t=[];XQe.forEach(n=>{const r=n.getState();if(r&&typeof r.getRegisteredActionHandlers=="function")try{const i=r.getRegisteredActionHandlers();Array.isArray(i)?t.push(...i):console.warn(`[Coordinator] getRegisteredActionHandlers for store did not return an array. Store ID: ${r.id||"Unknown"}`)}catch(i){console.error("[Coordinator] Error calling getRegisteredActionHandlers for a store:",i)}}),t.length===0?console.warn("[Coordinator] No action handlers were registered by any store."):t.forEach(n=>{n&&n.eventName&&typeof n.handler=="function"?Fe.on(n.eventName,n.handler):console.error("[Coordinator] Invalid action handler structure encountered:",n)}),this.isInitialized=!0,console.log(`[Coordinator] Dynamic event listeners initialized. Total handlers: ${t.length}.`)}}ve(Yle,"isInitialized",!1);const JQe=()=>{const[e,t]=T.useState({}),n=ll(r=>r.modalProviders);return T.useEffect(()=>{const r=s=>{t(a=>({...a,[s.modalId]:{...s,isOpen:!0}})),Fe.emit(Nr.modalStateChanged,{...s,isOpen:!0})},i=s=>{t(a=>{const o={...a};return o[s.modalId]&&(o[s.modalId].isOpen=!1),o}),Fe.emit(Nr.modalStateChanged,{modalId:s.modalId,isOpen:!1})};return Fe.on(Nr.openModalRequest,r),Fe.on(Nr.closeModalRequest,i),()=>{Fe.off(Nr.openModalRequest,r),Fe.off(Nr.closeModalRequest,i)}},[]),p.jsx(p.Fragment,{children:Object.entries(e).map(([r,i])=>{if(!i.isOpen)return null;const s=n[r];if(!s)return console.warn(`[ModalManager] No provider for modalId: ${r}`),null;const a={isOpen:!0,onClose:()=>Fe.emit(Nr.closeModalRequest,{modalId:r}),modalProps:i.modalProps,targetId:i.targetId,initialTab:i.initialTab,initialSubTab:i.initialSubTab};return p.jsx(s,{...a},r)})})};let XV=[],JV=null,dd=!1;const QQe=({controls:e=[]})=>{const[t,n]=T.useState(!0),[r,i]=T.useState(!1),s=T.useRef(null),a=T.useRef(null),{selectedItemId:o,selectedItemType:l,getConversationById:c}=zn(Sn(I=>({selectedItemId:I.selectedItemId,selectedItemType:I.selectedItemType,getConversationById:I.getConversationById}))),{getEffectiveProjectSettings:u}=No(Sn(I=>({getEffectiveProjectSettings:I.getEffectiveProjectSettings}))),{interactions:d,status:h}=Ln(Sn(I=>({interactions:I.interactions,status:I.status}))),{globalError:m,isSidebarCollapsed:y,isChatControlPanelOpen:b}=Lw(Sn(I=>({globalError:I.globalError,isSidebarCollapsed:I.isSidebarCollapsed,isChatControlPanelOpen:I.isChatControlPanelOpen}))),v=ll(Sn(I=>Object.values(I.chatControls))),x=T.useMemo(()=>v.filter(I=>(I.panel??"main")==="sidebar"&&(I.show?I.show():!0)),[v]),w=T.useMemo(()=>v.filter(I=>I.panel==="sidebar-footer"&&(I.show?I.show():!0)),[v]),S=T.useMemo(()=>v.filter(I=>I.panel==="header"&&(I.show?I.show():!0)),[v]),C=T.useCallback(()=>{i(I=>!I)},[]);T.useEffect(()=>{r&&o&&(l==="conversation"||l==="project")&&i(!1)},[o,l]),T.useEffect(()=>{a.current||(a.current=xO({id:"core-litechat-app",name:"LiteChat App Core"}));const I=a.current;Yle.initialize(),JV||(JV=(async()=>{if(dd){n(!1);return}n(!0);try{XV=await ZQe(e,I),dd=!0}catch(L){console.error("[LiteChat] App: Top-level initialization error:",L),dd=!1}finally{n(!1)}})().then(()=>XV))},[e]);const k=T.useRef({itemId:null,itemType:null,effectiveSettingsString:""});T.useEffect(()=>{if(t||!dd||!a.current)return;const I=a.current,O={itemId:o,itemType:l};let L=null;if(l==="project")L=o;else if(l==="conversation"&&o){const F=c(o);L=(F==null?void 0:F.projectId)??null}const P=u(L),V=JSON.stringify(P);(O.itemId!==k.current.itemId||O.itemType!==k.current.itemType||V!==k.current.effectiveSettingsString)&&(I.emit(Pn.initializePromptStateRequest,{effectiveSettings:P}),I.emit(Nr.contextChanged,{selectedItemId:o,selectedItemType:l}),k.current={...O,effectiveSettingsString:V})},[o,l,c,u,t,dd]),T.useEffect(()=>{if(t||!dd||!a.current)return;const I=a.current,O=()=>{let J=null;if(l==="project")J=o;else if(l==="conversation"&&o){const G=c(o);J=(G==null?void 0:G.projectId)??null}const U=u(J);I.emit(Pn.initializePromptStateRequest,{effectiveSettings:U})},L=I.on(sn.loaded,O),P=I.on(ga.updated,O),V=I.on(sn.globalSystemPromptChanged,O),F=I.on(sn.temperatureChanged,O);return()=>{L(),P(),V(),F()}},[o,l,c,u,t,dd]),T.useEffect(()=>{if(t||!dd||!a.current)return;const I=a.current;let O=null;if(b["core-vfs-modal-panel"]||l==="project")if(l==="project")O=o;else if(l==="conversation"){const V=c(o);O=(V==null?void 0:V.projectId)??"orphan"}else O="orphan";else if(l==="conversation"){const V=c(o);O=(V==null?void 0:V.projectId)??"orphan"}let P=null;typeof O=="string"?P=O:O===null?P=null:(console.warn(`[LiteChatVFS] Calculated VFS key was not a string or null. Type: ${typeof O}, Value:`,O,"Defaulting to 'orphan'."),P="orphan"),Ki.getState().vfsKey!==P&&I.emit(dn.setVfsKeyRequest,{key:P})},[o,l,c,t,dd,b]);const A=async I=>{const O=zn.getState(),L=await O.addConversation(I);return console.log("New conversation ID:",L),await O.selectItem(L,"conversation"),console.log("conv selected:",L),L},R=T.useCallback(async I=>{var V;if(!a.current){Pe.error("Application core not ready. Please try again.");return}const O=zn.getState();let L=O.selectedItemType==="conversation"?O.selectedItemId:null;const P=O.selectedItemType==="project"?O.selectedItemId:O.selectedItemType==="conversation"?((V=O.getConversationById(O.selectedItemId))==null?void 0:V.projectId)??null:null;if(!L)try{L=await A({title:"New Chat",projectId:P}),console.log("New conversation ID 2:",L)}catch(F){console.error("[LiteChat] App: Failed to create new conversation",F),Pe.error("Failed to start new chat.");return}try{const F=To.getState(),J={...I,metadata:{...I.metadata,modelId:F.modelId}};await fx.submitPrompt(J)}catch(F){console.error("[LiteChat] App: Error submitting prompt:",F),Pe.error("Failed to send message.")}},[]),N=l==="conversation"?o:null;return t?p.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx(Qn,{className:"h-12 w-12 animate-spin text-primary"}),p.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):p.jsxs(p.Fragment,{children:[p.jsx(JQe,{}),p.jsxs("div",{className:"flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground",children:[p.jsxs("div",{className:Ye("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",y?"w-16":"w-64"),children:[p.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[p.jsx("div",{className:Ye(y?"hidden":"block"),children:p.jsx(Gg,{controls:x,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:Ye(y?"block":"hidden"),children:p.jsx(Gg,{controls:x,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),p.jsx("div",{className:Ye("flex-shrink-0 border-t border-border p-2",y?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:p.jsx(Gg,{controls:w,panelId:"sidebar-footer",renderMode:y?"icon":"full",className:Ye("flex",y?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),r&&p.jsxs("div",{className:"md:hidden fixed inset-0 z-40 flex",children:[p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:C}),p.jsxs("div",{className:"relative w-4/5 max-w-sm bg-card border-r border-border h-full flex flex-col animate-slideInFromLeft shadow-2xl",children:[p.jsxs("div",{className:"sticky top-0 z-10 flex justify-between items-center p-4 border-b border-border bg-card",children:[p.jsx("h2",{className:"font-semibold text-card-foreground",children:"LiteChat Menu"}),p.jsx("button",{onClick:C,className:"p-2 rounded-md hover:bg-muted text-card-foreground touch-manipulation","aria-label":"Close menu",style:{minHeight:"44px",minWidth:"44px"},children:p.jsx(va,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden bg-card",children:x.length>0?p.jsx(Gg,{controls:x,panelId:"sidebar",renderMode:"full",className:"h-full"}):p.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[p.jsx("p",{className:"text-sm",children:"Loading menu..."}),p.jsx("p",{className:"text-xs mt-2",children:"Please wait while the application initializes."})]})}),p.jsx("div",{className:"flex-shrink-0 border-t border-border p-4 bg-card",children:w.length>0?p.jsx(Gg,{controls:w,panelId:"sidebar-footer",renderMode:"full",className:"flex items-center justify-between"}):p.jsx("div",{className:"text-center text-muted-foreground text-xs",children:"Footer controls loading..."})})]})]}),p.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border bg-card flex-shrink-0",children:[p.jsx("button",{className:Ye("md:hidden p-3 rounded-md hover:bg-muted active:bg-muted/80 transition-colors touch-manipulation",r&&"bg-muted"),onClick:C,"aria-label":r?"Close menu":"Open menu",style:{minHeight:"44px",minWidth:"44px"},children:r?p.jsx(va,{className:"h-6 w-6"}):p.jsx(mge,{className:"h-6 w-6"})}),p.jsx(Gg,{controls:S,panelId:"header",className:"flex items-center justify-end gap-1 flex-grow"})]}),p.jsx(DQe,{conversationId:N,interactions:d,status:h,className:"flex-grow overflow-y-hidden"}),m&&p.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",m]}),p.jsx(uwe,{InputAreaRenderer:Hle,onSubmit:R,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:s,selectedItemId:o,selectedItemType:l})]})]}),p.jsx(zQe,{richColors:!0,position:"bottom-right",closeButton:!0})]})},eet="prism-theme-link",tet="prism-default-light-theme-link",net="prism-default-dark-theme-link",ret="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",iet="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css",x3=e=>{let t=document.getElementById(e);return t||(t=document.createElement("link"),t.id=e,t.rel="stylesheet",document.head.appendChild(t)),t},set=()=>{const{prismThemeUrl:e,theme:t}=gr(Sn(i=>({prismThemeUrl:i.prismThemeUrl,theme:i.theme}))),n=T.useMemo(()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=T.useMemo(()=>{const i=t==="system"?n:t;return i==="dark"||i==="TijuDark"?"dark":"light"},[t,n]);return T.useEffect(()=>{if(typeof window>"u")return;const i=x3(tet),s=x3(net),a=x3(eet);return i.disabled=!0,s.disabled=!0,a.disabled=!0,i.href=ret,s.href=iet,e?(a.href=e,a.disabled=!1):(console.log(r),r==="dark"?s.disabled=!1:i.disabled=!1),()=>{}},[e,r]),null},w3=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),_3=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring","chart1","chart2","chart3","chart4","chart5","sidebar","sidebarForeground","sidebarPrimary","sidebarPrimaryForeground","sidebarAccent","sidebarAccentForeground","sidebarBorder","sidebarRing"],aet=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=gr(Sn(i=>({theme:i.theme,customFontFamily:i.customFontFamily,customFontSize:i.customFontSize,customThemeColors:i.customThemeColors})));return T.useEffect(()=>{const i=document.body,s=document.documentElement;i.classList.remove("light","dark","TijuLight","TijuDark","custom"),_3.forEach(a=>{s.style.removeProperty(`--${w3(a)}`)}),s.style.removeProperty("--custom-font-family"),s.style.removeProperty("--custom-font-size"),e==="light"?i.classList.add("light"):e==="dark"?i.classList.add("dark"):e==="TijuLight"?i.classList.add("TijuLight"):e==="TijuDark"?i.classList.add("TijuDark"):e==="custom"?(i.classList.add("custom"),t?s.style.setProperty("--custom-font-family",t):s.style.removeProperty("--custom-font-family"),n?s.style.setProperty("--custom-font-size",`${n}px`):s.style.removeProperty("--custom-font-size"),r&&Object.entries(r).forEach(([a,o])=>{if(o&&_3.includes(a)){const l=`--${w3(a)}`;s.style.setProperty(l,o)}else if(_3.includes(a)){const l=`--${w3(a)}`;s.style.removeProperty(l)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?i.classList.add("dark"):i.classList.add("light")},[e,t,n,r]),null},oet=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1750 c-26 15 -48 65 -41 94
             15 61 181 167 304 196
             30 7 100 12 155 12
             81 -1 115 -6 178 -27
             135 -45 247 -133 249 -194
             2 -60 -48 -103 -104 -88
             -13 3 -50 25 -83 50
             -85 64 -172 90 -280 84
             -92 -6 -165 -35 -259 -103
             -49 -35 -86 -43 -119 -24z`})})]})},QV="0.1.0-dev",eW="https://github.com/DimitriGilbert/LiteChat",tW=({textToCopy:e,label:t,className:n})=>{const[r,i]=T.useState(!1),s=async()=>{try{await navigator.clipboard.writeText(e),i(!0),Pe.success(`${t} copied to clipboard!`),setTimeout(()=>i(!1),2e3)}catch(a){Pe.error(`Failed to copy ${t.toLowerCase()}.`),console.error(`Clipboard copy failed for ${t}:`,a)}};return p.jsxs(St,{variant:"outline",onClick:s,className:n,children:[r?p.jsx(Qa,{className:"mr-2 h-4 w-4 text-green-500"}):p.jsx(wme,{className:"mr-2 h-4 w-4"}),r?"Copied!":`Copy ${t}`]})};class cet extends T.Component{constructor(){super(...arguments);ve(this,"state",{hasError:!1,error:null,errorInfo:null});ve(this,"handleReportOnGitHub",async()=>{const n=this.generateErrorReport(!0);try{await navigator.clipboard.writeText(n),Pe.success("Error report copied to clipboard. Paste it into the GitHub issue body.");const r=`${eW}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(r,"_blank","noopener,noreferrer")}catch(r){Pe.error("Failed to copy error report. Please copy manually."),console.error("Clipboard copy failed for GitHub report:",r);const i=`${eW}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(i,"_blank","noopener,noreferrer")}})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueTitle(){var s;const{error:n,errorInfo:r}=this.state;let i="Crash Report: ";if(r!=null&&r.componentStack){const a=(s=r.componentStack.trim().split(/\s+at\s+/)[1])==null?void 0:s.split(" ")[0];a&&(i+=`Error in <${a}> - `)}return i+=(n==null?void 0:n.message.substring(0,70))??"Unknown Error",n&&n.message.length>70&&(i+="..."),i}generateErrorReport(n=!1){const{error:r,errorInfo:i}=this.state,s=`
`,a=n?"```":"";let o=`## LiteChat Error Report${s}${s}`;return o+=`**Version:** ${QV}${s}`,o+=`**Timestamp:** ${new Date().toISOString()}${s}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${s}${s}`,r?o+=`**Error Message:**${s}${a}${s}${r.message}${s}${a}${s}${s}`:o+=`**Error Message:** Unknown Error${s}${s}`,i!=null&&i.componentStack&&(o+=`**Component Stack:**${s}${a}text${s}${i.componentStack.trim()}${s}${a}${s}${s}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${s}${a}text${s}${r.stack.trim()}${s}${a}${s}${s}`),o+=`**Steps to Reproduce (Please Describe):**${s}1. ...${s}2. ...${s}${s}`,o+=`**Expected Behavior:**${s}...${s}${s}`,o+=`**Actual Behavior:**${s}...${s}`,o}generateAIPrompt(){var s,a;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${QV}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((s=r==null?void 0:r.componentStack)==null?void 0:s.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((a=n==null?void 0:n.stack)==null?void 0:a.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:p.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[p.jsx(oet,{className:"h-24 w-24 text-destructive mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),p.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue. Copy the details and paste them into the GitHub issue."}),p.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[p.jsx(St,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),p.jsx(tW,{textToCopy:this.generateErrorReport(),label:"Details"}),p.jsx(tW,{textToCopy:this.generateAIPrompt(),label:"AI Debug Prompt"}),p.jsxs(St,{variant:"outline",onClick:this.handleReportOnGitHub,children:[p.jsx(dH,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})]})]})}):this.props.children}}const Zle=(e,t)=>{if(!t)return null;let n=xc,r="text-muted-foreground/70",i=`Linked to ${t}`;switch(e){case"syncing":n=Qn,r="animate-spin text-blue-500",i=`Syncing with ${t}...`;break;case"error":n=vc,r="text-destructive",i=`Sync error with ${t}`;break;case"needs-sync":n=qO,r="text-orange-500",i=`Needs sync with ${t}`;break;case"idle":n=tE,r="text-green-500",i=`Synced with ${t}`;break;default:n=xc,r="text-muted-foreground/70",i=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(n,{className:Ye("h-3 w-3 ml-1 flex-shrink-0",r)})}),p.jsx(_r,{side:"right",children:i})]})})},Xle=T.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:i,onSelectItem:s,onDeleteConversation:a,onDeleteProject:o,onExportConversation:l,onExportProject:c,expandedProjects:u,toggleProjectExpansion:d,editingItemId:h,editingItemType:m,handleStartEditing:y,handleSaveEdit:b,handleCancelEdit:v,isSavingEdit:x,originalNameToCompare:w})=>{const S=e.id===n,C=e.itemType==="project",k=e.id===h&&e.itemType===m,[A,R]=T.useState(C?e.name:e.title),N=T.useRef(null);T.useEffect(()=>{if(k){const oe=C?e.name:e.title;R(oe),requestAnimationFrame(()=>{var Ie,je;(Ie=N.current)==null||Ie.focus(),(je=N.current)==null||je.select()})}},[k,e,C]),T.useEffect(()=>{if(!k){const oe=C?e.name:e.title;A!==oe&&R(oe)}},[C?e.name:e.title,k,A,C]);const I=C&&u.has(e.id),O=C,L=!C&&e.syncRepoId?r[e.id]:void 0,P=!C&&e.syncRepoId?i.get(e.syncRepoId):void 0,V=!C&&P?Zle(L,P):null,F=oe=>{oe.stopPropagation(),Fe.emit(Nr.openModalRequest,{modalId:"projectSettingsModal",targetId:e.id})},J=()=>{k||(C&&d(e.id),s(e.id,e.itemType))},U=oe=>{oe.stopPropagation(),C?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,oe):a(e.id,oe)},G=oe=>{oe.stopPropagation(),y(e)},$=()=>{R(w),v(e.itemType==="project"&&w==="New Project")},ne=async()=>{if(x)return;const oe=A.trim();await b(e.id,e.itemType,oe)},W=()=>{var je;if(x)return;const oe=A.trim(),Ie=e.itemType==="project"&&w==="New Project";if(!oe){w!=="New Project"?(Pe.error("Name cannot be empty."),R(w),(je=N.current)==null||je.focus()):$();return}oe!==w||Ie?ne():$()},te=oe=>{oe.key==="Enter"?(oe.preventDefault(),ne()):oe.key==="Escape"&&(oe.preventDefault(),$())},ee=C?e.name:e.title,re=x?Qn:Qa,de=x?"h-3 w-3 animate-spin":"h-3 w-3";return p.jsxs("li",{className:Ye("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!k&&"hover:bg-muted/50 hover:text-primary/80",S&&!k?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",k&&"bg-muted ring-1 ring-primary",!k&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:J,title:k?"":ee,children:[p.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[O&&p.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:oe=>{oe.stopPropagation(),d(e.id)},children:I?p.jsx(Tc,{className:"h-3 w-3 text-muted-foreground"}):p.jsx(DO,{className:"h-3 w-3 text-muted-foreground"})}),!O&&p.jsx("span",{className:"w-3 flex-shrink-0"}),C?p.jsx(nh,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):p.jsx(H3,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),k?p.jsx(Un,{ref:N,value:A,onChange:oe=>R(oe.target.value),onKeyDown:te,onBlur:W,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:oe=>oe.stopPropagation(),disabled:x}):p.jsx("span",{className:"truncate min-w-0 flex-1",children:ee}),V]}),p.jsx("div",{className:Ye("items-center flex-shrink-0 ml-1",k?"flex":"hidden group-hover:flex transition-all duration-150"),onClick:oe=>oe.stopPropagation(),children:k?p.jsxs(p.Fragment,{children:[p.jsx(In,{tooltipText:"Save (Enter)",onClick:oe=>{oe.stopPropagation(),ne()},disabled:x||!A.trim(),"aria-label":"Save changes",icon:p.jsx(re,{}),iconClassName:de,className:"h-5 w-5 text-green-500 hover:text-green-600"}),p.jsx(In,{tooltipText:"Cancel (Esc)",onClick:oe=>{oe.stopPropagation(),$()},disabled:x,"aria-label":"Cancel edit",icon:p.jsx(va,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[C&&p.jsx(In,{tooltipText:"Project Settings",onClick:F,"aria-label":`Settings for ${ee}`,icon:p.jsx(yme,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),p.jsx(In,{tooltipText:"Edit",onClick:G,"aria-label":`Edit ${ee}`,icon:p.jsx(Gw,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),C?p.jsx(In,{tooltipText:"Export Project (JSON)",onClick:oe=>c(e.id,oe),"aria-label":`Export project ${ee}`,icon:p.jsx(Ime,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):p.jsxs("div",{className:"relative group/export",children:[p.jsx(In,{tooltipText:"Export Conversation","aria-label":`Export ${ee}`,icon:p.jsx(fu,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),p.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                 bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:oe=>oe.stopPropagation(),children:[p.jsx(St,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:oe=>l(e.id,"json",oe),children:"JSON"}),p.jsx(St,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:oe=>l(e.id,"md",oe),children:"MD"})]})]}),p.jsx(In,{tooltipText:"Delete",onClick:U,"aria-label":`Delete ${ee}`,icon:p.jsx(So,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]})});Xle.displayName="ConversationItemRenderer";function uet({updateProject:e,updateConversation:t,deleteProject:n}){const[r,i]=T.useState(null),[s,a]=T.useState(null),[o,l]=T.useState(""),[c,u]=T.useState(!1),d=T.useCallback(y=>{i(y.id),a(y.itemType);const b=y.itemType==="project"?y.name:y.title;l(b),u(!1)},[]),h=T.useCallback(y=>{const b=r,v=y??(s==="project"&&o==="New Project");i(null),a(null),l(""),u(!1),v&&b&&n(b).catch(x=>{console.error("Failed to delete new project on cancel:",x),Pe.error("Failed to clean up cancelled new project.")})},[r,s,o,n]),m=T.useCallback(async(y,b,v)=>{if(y!==r||b!==s||c)return;const x=v==null?void 0:v.trim();if(!x){Pe.error("Name cannot be empty.");return}if(x===o&&!(b==="project"&&o==="New Project")){h();return}u(!0);try{b==="project"?await e(y,{name:x}):await t(y,{title:x}),Pe.success("Item renamed successfully."),i(null),a(null),l("")}catch(S){console.error("Failed to save item name:",S),Pe.error(`Failed to rename item: ${S instanceof Error?S.message:String(S)}`)}finally{u(!1)}},[r,s,c,e,t,h,o]);return{editingItemId:r,editingItemType:s,isSavingEdit:c,handleStartEditing:d,handleSaveEdit:m,handleCancelEdit:h,originalNameToCompare:o}}const Jle=(e,t,n,r,i,s,a,o,l)=>{if(!n)return!0;const c=`${t}-${e}`;if(l[c]!==void 0)return l[c];let u=!1;{const d=s.get(e);if(d)if(d.name.toLowerCase().includes(n))u=!0;else{const h=o.get(e)||[],m=a.get(e)||[];for(const y of m)if(y.title.toLowerCase().includes(n)){u=!0;break}if(!u){for(const y of h)if(Jle(y.id,"project",n,r,i,s,a,o,l)){u=!0;break}}}}return l[c]=u,u},det=({module:e})=>{const t=T.useRef(null),n=T.useRef(null),[r,i]=T.useState(!1),[,s]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>s({})),e.isLoading&&!zn.getState().isLoading&&!No.getState().isLoading&&e.setIsLoading(!1),()=>e.setNotifyCallback(null)),[e]),T.useEffect(()=>{const ge=t.current;if(ge){const Te=ge.querySelector("[data-radix-scroll-area-viewport]");if(Te&&n.current!==Te?(n.current=Te,r||i(!0),s({})):!Te&&n.current&&(n.current=null,i(!1)),!n.current){const ce=new MutationObserver(()=>{const le=ge.querySelector("[data-radix-scroll-area-viewport]");le&&n.current!==le&&(n.current=le,i(!0),s({}),ce.disconnect())});return ce.observe(ge,{childList:!0,subtree:!0}),()=>ce.disconnect()}}},[t.current,r]);const{selectedItemId:a,selectedItemType:o,conversations:l,syncRepos:c,conversationSyncStatus:u,selectItem:d,addConversation:h,updateConversation:m,deleteConversation:y,exportConversation:b,exportProject:v,getConversationById:x}=zn(Sn(ge=>({selectedItemId:ge.selectedItemId,selectedItemType:ge.selectedItemType,conversations:ge.conversations,syncRepos:ge.syncRepos,conversationSyncStatus:ge.conversationSyncStatus,selectItem:ge.selectItem,addConversation:ge.addConversation,updateConversation:ge.updateConversation,deleteConversation:ge.deleteConversation,exportConversation:ge.exportConversation,exportProject:ge.exportProject,getConversationById:ge.getConversationById}))),{projects:w,addProject:S,updateProject:C,deleteProject:k,getProjectById:A}=No(Sn(ge=>({projects:ge.projects,addProject:ge.addProject,updateProject:ge.updateProject,deleteProject:ge.deleteProject,getProjectById:ge.getProjectById}))),R=e.isLoading,[N,I]=Ve.useState(new Set),[O,L]=T.useState(""),P=uet({updateProject:C,updateConversation:m,deleteProject:k}),{editingItemId:V,editingItemType:F,isSavingEdit:J,handleStartEditing:U,handleSaveEdit:G,handleCancelEdit:$,originalNameToCompare:ne}=P,W=T.useCallback(ge=>{I(Te=>{const ce=new Set(Te);return ce.has(ge)?ce.delete(ge):ce.add(ge),ce})},[]),te=T.useCallback(()=>{if(o==="project")return a;if(o==="conversation"&&a){const ge=x(a);return(ge==null?void 0:ge.projectId)??null}return null},[a,o,x]),ee=T.useCallback(async()=>{if(!V)try{const ge=te(),Te=await h({title:"New Chat",projectId:ge});d(Te,"conversation")}catch(ge){console.error("Failed to create new chat:",ge),Pe.error("Failed to create new chat.")}},[V,te,h,d]),re=T.useCallback(async()=>{if(!V)try{const ge=te(),Te=await S({name:"New Project",parentId:ge});d(Te,"project"),ge&&I(ce=>new Set(ce).add(ge)),setTimeout(()=>{const ce=A(Te);ce&&U({...ce,itemType:"project"})},50)}catch(ge){console.error("Failed to create new project:",ge)}},[V,te,S,d,A,U]),de=T.useCallback((ge,Te)=>{ge===V&&Te===F||(V&&(ge!==V||Te!==F)&&$(),(ge!==a||Te!==o)&&d(ge,Te))},[V,F,a,o,$,d]),oe=T.useCallback((ge,Te)=>{Te.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&y(ge).catch(ce=>{console.error("Failed to delete conversation:",ce),Pe.error("Failed to delete conversation.")})},[y]),Ie=T.useCallback((ge,Te)=>{Te.stopPropagation(),k(ge).catch(ce=>{console.error("Failed to delete project:",ce),Pe.error("Failed to delete project.")})},[k]),je=T.useCallback(async(ge,Te,ce)=>{ce.stopPropagation();try{await b(ge,Te)}catch(le){console.error(`Failed to export conversation as ${Te}:`,le)}},[b]),Me=T.useCallback(async(ge,Te)=>{Te.stopPropagation();try{await v(ge)}catch(ce){console.error("Failed to export project:",ce)}},[v]),Se=T.useMemo(()=>new Map((c||[]).map(ge=>[ge.id,ge.name])),[c]),{projectsById:qe,conversationsByProjectId:Qe,projectsByParentId:We}=T.useMemo(()=>{const ge=new Map(w.map(le=>[le.id,le])),Te=new Map;l.forEach(le=>{const ie=le.projectId??null;Te.has(ie)||Te.set(ie,[]),Te.get(ie).push(le)});const ce=new Map;return w.forEach(le=>{const ie=le.parentId??null;ce.has(ie)||ce.set(ie,[]),ce.get(ie).push(le)}),{projectsById:ge,conversationsByProjectId:Te,projectsByParentId:ce}},[w,l]),Re=T.useMemo(()=>{const ge=[],Te=O.toLowerCase(),ce={};function le(ie,Ee){const Be=(We.get(ie)||[]).filter(Tt=>Jle(Tt.id,"project",Te,w,l,qe,Qe,We,ce)),Ce=(Qe.get(ie)||[]).filter(Tt=>Tt.title.toLowerCase().includes(Te)),ct=[...Be,...Ce];ct.sort((Tt,ft)=>new Date(ft.updatedAt).getTime()-new Date(Tt.updatedAt).getTime()),ct.forEach(Tt=>{"path"in Tt?(ge.push({id:`project-${Tt.id}`,originalId:Tt.id,type:"project",level:Ee,data:Tt,updatedAt:Tt.updatedAt}),N.has(Tt.id)&&le(Tt.id,Ee+1)):ge.push({id:`conversation-${Tt.id}`,originalId:Tt.id,type:"conversation",level:Ee,data:Tt,updatedAt:Tt.updatedAt})})}return le(null,0),ge},[w,l,O,N,qe,Qe,We]),K=N5({count:Re.length,getScrollElement:()=>n.current,estimateSize:()=>30,overscan:10});return p.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("h3",{className:"text-sm font-semibold",children:"LiteChat"}),p.jsx(bd,{href:"https://github.com/DimitriGilbert/LiteChat",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub Repository",children:p.jsx(St,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0",children:p.jsx(Jme,{className:"h-4 w-4"})})}),p.jsx(bd,{href:"release/latest.zip",download:"LiteChat.zip","aria-label":"Download LiteChat",children:p.jsx(St,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0",children:p.jsx(fu,{className:"h-4 w-4"})})})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{size:"sm",variant:"ghost",onClick:re,"aria-label":"New Project",disabled:R||!!V,className:"h-7 w-7 p-0",children:p.jsx(pH,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"bottom",children:"New Project"})]})}),p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{size:"sm",variant:"ghost",onClick:ee,"aria-label":"New Chat",disabled:R||!!V,className:"h-7 w-7 p-0",children:p.jsx(mm,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"bottom",children:"New Chat"})]})})]})]}),p.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[p.jsx(Oa,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),p.jsx(Un,{type:"search",placeholder:"Filter...",value:O,onChange:ge=>L(ge.target.value),className:"h-8 text-xs pl-8",disabled:R})]}),p.jsxs(sl,{className:"flex-grow",ref:t,children:[R&&Re.length===0?p.jsxs("div",{className:"space-y-1 p-1",children:[p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"})]}):!R&&Re.length===0?p.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:O.trim()!==""?"No items match your filter.":"Workspace is empty."}):r&&p.jsx("div",{style:{height:`${K.getTotalSize()}px`,width:"100%",position:"relative"},children:K.getVirtualItems().map(ge=>{const Te=Re[ge.index];if(!Te)return null;const ce={...Te.data,itemType:Te.type};return p.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${ge.size}px`,transform:`translateY(${ge.start}px)`},className:"px-1",children:p.jsx(Xle,{item:ce,level:Te.level,selectedItemId:a,conversationSyncStatus:u,repoNameMap:Se,onSelectItem:()=>de(Te.originalId,Te.type),onDeleteConversation:oe,onDeleteProject:Ie,onExportConversation:je,onExportProject:Me,expandedProjects:N,toggleProjectExpansion:W,editingItemId:V,editingItemType:F,handleStartEditing:U,handleSaveEdit:G,handleCancelEdit:$,isSavingEdit:J,originalNameToCompare:ne})},Te.id)})}),!r&&!R&&p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Initializing list..."})]})]})},fet=({module:e})=>{const{selectedItemType:t}=zn(Sn(r=>({selectedItemType:r.selectedItemType})));return e.isLoading?p.jsx(Qn,{className:"h-5 w-5 animate-spin text-muted-foreground"}):t==="project"?p.jsx(nh,{className:"h-5 w-5 text-primary"}):t==="conversation"?p.jsx(_B,{className:"h-5 w-5 text-primary"}):p.jsx(_B,{className:"h-5 w-5 text-muted-foreground"})};class het{constructor(){ve(this,"id","core-conversation-list");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"isLoading",!0);ve(this,"conversationsLoading",!0);ve(this,"projectsLoading",!0);ve(this,"notifyComponentUpdate",null);ve(this,"setIsLoading",t=>{var n;this.isLoading!==t&&(this.isLoading=t,(n=this.notifyComponentUpdate)==null||n.call(this))});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.conversationsLoading=zn.getState().isLoading,this.projectsLoading=No.getState().isLoading,this.updateCombinedLoadingState(),t.emit(Yn.loadConversationsRequest,void 0),t.emit(ga.loadProjectsRequest,void 0);const n=t.on(Yn.conversationsLoaded,()=>{this.conversationsLoading=!1,this.updateCombinedLoadingState()}),r=t.on(ga.loaded,()=>{this.projectsLoading=!1,this.updateCombinedLoadingState()}),i=t.on(Yn.loadingStateChanged,a=>{a.isLoading!==this.conversationsLoading&&(this.conversationsLoading=a.isLoading,this.updateCombinedLoadingState())}),s=t.on(ga.loadingStateChanged,a=>{a.isLoading!==this.projectsLoading&&(this.projectsLoading=a.isLoading,this.updateCombinedLoadingState())});this.eventUnsubscribers.push(n,r,i,s)}updateCombinedLoadingState(){var n;const t=this.conversationsLoading||this.projectsLoading;this.isLoading!==t&&(this.isLoading=t,(n=this.notifyComponentUpdate)==null||n.call(this))}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Module "${this.id}" already registered. Skipping.`);return}this.unregisterCallback=t.registerChatControl({id:this.id,panel:"sidebar",status:()=>this.isLoading?"loading":"ready",renderer:()=>Ve.createElement(det,{module:this}),iconRenderer:()=>Ve.createElement(fet,{module:this}),show:()=>!0})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}const nW=({module:e})=>{const t=(n,r)=>{e.openSettingsModal(n,r)};return p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",onClick:()=>t(),className:"h-8 w-8","aria-label":"Open Settings",children:p.jsx(G3,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"top",children:"Settings"})]})})};var S3="focusScope.autoFocusOnMount",C3="focusScope.autoFocusOnUnmount",rW={bubbles:!1,cancelable:!0},pet="FocusScope",I5=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=T.useState(null),c=_i(i),u=_i(s),d=T.useRef(null),h=Tn(t,b=>l(b)),m=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(S){if(m.paused||!o)return;const C=S.target;o.contains(C)?d.current=C:Vf(d.current,{select:!0})},v=function(S){if(m.paused||!o)return;const C=S.relatedTarget;C!==null&&(o.contains(C)||Vf(d.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const k of S)k.removedNodes.length>0&&Vf(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",v);const w=new MutationObserver(x);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",v),w.disconnect()}}},[r,o,m.paused]),T.useEffect(()=>{if(o){sW.add(m);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(S3,rW);o.addEventListener(S3,c),o.dispatchEvent(x),x.defaultPrevented||(met(xet(Qle(o)),{select:!0}),document.activeElement===b&&Vf(o))}return()=>{o.removeEventListener(S3,c),setTimeout(()=>{const x=new CustomEvent(C3,rW);o.addEventListener(C3,u),o.dispatchEvent(x),x.defaultPrevented||Vf(b??document.body,{select:!0}),o.removeEventListener(C3,u),sW.remove(m)},0)}}},[o,c,u,m]);const y=T.useCallback(b=>{if(!n&&!r||m.paused)return;const v=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(v&&x){const w=b.currentTarget,[S,C]=get(w);S&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Vf(S,{select:!0})):b.shiftKey&&x===S&&(b.preventDefault(),n&&Vf(C,{select:!0})):x===w&&b.preventDefault()}},[n,r,m.paused]);return p.jsx(sr.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});I5.displayName=pet;function met(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Vf(r,{select:t}),document.activeElement!==n)return}function get(e){const t=Qle(e),n=iW(t,e),r=iW(t.reverse(),e);return[n,r]}function Qle(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function iW(e,t){for(const n of e)if(!yet(n,{upTo:t}))return n}function yet(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function bet(e){return e instanceof HTMLInputElement&&"select"in e}function Vf(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&bet(e)&&t&&e.select()}}var sW=vet();function vet(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=aW(e,t),e.unshift(t)},remove(t){var n;e=aW(e,t),(n=e[0])==null||n.resume()}}}function aW(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function xet(e){return e.filter(t=>t.tagName!=="A")}function wet(e){const t=_et(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(ket);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function _et(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=Tet(i),o=Eet(s,i.props);return i.type!==T.Fragment&&(o.ref=r?el(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Cet=Symbol("radix.slottable");function ket(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Cet}function Eet(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function Tet(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var tA="Dialog",[ece,ift]=Vs(tA),[Aet,Ic]=ece(tA),tce=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=T.useRef(null),l=T.useRef(null),[c,u]=Sc({prop:r,defaultProp:i??!1,onChange:s,caller:tA});return p.jsx(Aet,{scope:t,triggerRef:o,contentRef:l,contentId:na(),titleId:na(),descriptionId:na(),open:c,onOpenChange:u,onOpenToggle:T.useCallback(()=>u(d=>!d),[u]),modal:a,children:n})};tce.displayName=tA;var nce="DialogTrigger",Ret=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ic(nce,n),s=Tn(t,i.triggerRef);return p.jsx(sr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":P5(i.open),...r,ref:s,onClick:Wt(e.onClick,i.onOpenToggle)})});Ret.displayName=nce;var j5="DialogPortal",[Net,rce]=ece(j5,{forceMount:void 0}),ice=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=Ic(j5,t);return p.jsx(Net,{scope:t,forceMount:n,children:T.Children.map(r,a=>p.jsx(sa,{present:n||s.open,children:p.jsx(_E,{asChild:!0,container:i,children:a})}))})};ice.displayName=j5;var Gk="DialogOverlay",sce=T.forwardRef((e,t)=>{const n=rce(Gk,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Ic(Gk,e.__scopeDialog);return s.modal?p.jsx(sa,{present:r||s.open,children:p.jsx(Iet,{...i,ref:t})}):null});sce.displayName=Gk;var Met=wet("DialogOverlay.RemoveScroll"),Iet=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ic(Gk,n);return p.jsx(z1,{as:Met,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(sr.div,{"data-state":P5(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),hm="DialogContent",ace=T.forwardRef((e,t)=>{const n=rce(hm,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Ic(hm,e.__scopeDialog);return p.jsx(sa,{present:r||s.open,children:s.modal?p.jsx(jet,{...i,ref:t}):p.jsx(Oet,{...i,ref:t})})});ace.displayName=hm;var jet=T.forwardRef((e,t)=>{const n=Ic(hm,e.__scopeDialog),r=T.useRef(null),i=Tn(t,n.contentRef,r);return T.useEffect(()=>{const s=r.current;if(s)return GT(s)},[]),p.jsx(oce,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:Wt(e.onFocusOutside,s=>s.preventDefault())})}),Oet=T.forwardRef((e,t)=>{const n=Ic(hm,e.__scopeDialog),r=T.useRef(!1),i=T.useRef(!1);return p.jsx(oce,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),oce=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=Ic(hm,n),l=T.useRef(null),c=Tn(t,l);return WT(),p.jsxs(p.Fragment,{children:[p.jsx(I5,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(yE,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":P5(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(Pet,{titleId:o.titleId}),p.jsx(Fet,{contentRef:l,descriptionId:o.descriptionId})]})]})}),O5="DialogTitle",lce=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ic(O5,n);return p.jsx(sr.h2,{id:i.titleId,...r,ref:t})});lce.displayName=O5;var cce="DialogDescription",uce=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ic(cce,n);return p.jsx(sr.p,{id:i.descriptionId,...r,ref:t})});uce.displayName=cce;var dce="DialogClose",fce=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ic(dce,n);return p.jsx(sr.button,{type:"button",...r,ref:t,onClick:Wt(e.onClick,()=>i.onOpenChange(!1))})});fce.displayName=dce;function P5(e){return e?"open":"closed"}var hce="DialogTitleWarning",[sft,pce]=dwe(hce,{contentName:hm,titleName:O5,docsSlug:"dialog"}),Pet=({titleId:e})=>{const t=pce(hce),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return T.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Det="DialogDescriptionWarning",Fet=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pce(Det).contentName}}.`;return T.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},mce=tce,gce=ice,yce=sce,bce=ace,Let=lce,Bet=uce,vce=fce;function Bm({...e}){return p.jsx(mce,{"data-slot":"dialog",...e})}function $et({...e}){return p.jsx(gce,{"data-slot":"dialog-portal",...e})}function zet({...e}){return p.jsx(vce,{"data-slot":"dialog-close",...e})}function Uet({className:e,...t}){return p.jsx(yce,{"data-slot":"dialog-overlay",className:Ye("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function $m({className:e,children:t,...n}){return p.jsxs($et,{"data-slot":"dialog-portal",children:[p.jsx(Uet,{}),p.jsxs(bce,{"data-slot":"dialog-content",className:Ye("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,p.jsxs(vce,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(va,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function zm({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-header",className:Ye("flex flex-col gap-2 text-center sm:text-left",e),...t})}function nb({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-footer",className:Ye("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Um({className:e,...t}){return p.jsx(Let,{"data-slot":"dialog-title",className:Ye("text-lg leading-none font-semibold",e),...t})}function rb({className:e,...t}){return p.jsx(Bet,{"data-slot":"dialog-description",className:Ye("text-muted-foreground text-sm",e),...t})}function oW(e){const t=qet(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(Wet);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function qet(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=Get(i),o=Het(s,i.props);return i.type!==T.Fragment&&(o.ref=r?el(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Vet=Symbol("radix.slottable");function Wet(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Vet}function Het(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function Get(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function D5(e){const t=e+"CollectionProvider",[n,r]=Vs(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:v,children:x}=b,w=Ve.useRef(null),S=Ve.useRef(new Map).current;return p.jsx(i,{scope:v,itemMap:S,collectionRef:w,children:x})};a.displayName=t;const o=e+"CollectionSlot",l=oW(o),c=Ve.forwardRef((b,v)=>{const{scope:x,children:w}=b,S=s(o,x),C=Tn(v,S.collectionRef);return p.jsx(l,{ref:C,children:w})});c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=oW(u),m=Ve.forwardRef((b,v)=>{const{scope:x,children:w,...S}=b,C=Ve.useRef(null),k=Tn(v,C),A=s(u,x);return Ve.useEffect(()=>(A.itemMap.set(C,{ref:C,...S}),()=>void A.itemMap.delete(C))),p.jsx(h,{[d]:"",ref:k,children:w})});m.displayName=u;function y(b){const v=s(e+"CollectionConsumer",b);return Ve.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((A,R)=>S.indexOf(A.ref.current)-S.indexOf(R.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:m},y,r]}var k3="rovingFocusGroup.onEntryFocus",Ket={bubbles:!1,cancelable:!0},q1="RovingFocusGroup",[wO,xce,Yet]=D5(q1),[Zet,nA]=Vs(q1,[Yet]),[Xet,Jet]=Zet(q1),wce=T.forwardRef((e,t)=>p.jsx(wO.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(wO.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Qet,{...e,ref:t})})}));wce.displayName=q1;var Qet=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=T.useRef(null),m=Tn(t,h),y=Xy(s),[b,v]=Sc({prop:a,defaultProp:o??null,onChange:l,caller:q1}),[x,w]=T.useState(!1),S=_i(c),C=xce(n),k=T.useRef(!1),[A,R]=T.useState(0);return T.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(k3,S),()=>N.removeEventListener(k3,S)},[S]),p.jsx(Xet,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:b,onItemFocus:T.useCallback(N=>v(N),[v]),onItemShiftTab:T.useCallback(()=>w(!0),[]),onFocusableItemAdd:T.useCallback(()=>R(N=>N+1),[]),onFocusableItemRemove:T.useCallback(()=>R(N=>N-1),[]),children:p.jsx(sr.div,{tabIndex:x||A===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:Wt(e.onMouseDown,()=>{k.current=!0}),onFocus:Wt(e.onFocus,N=>{const I=!k.current;if(N.target===N.currentTarget&&I&&!x){const O=new CustomEvent(k3,Ket);if(N.currentTarget.dispatchEvent(O),!O.defaultPrevented){const L=C().filter(U=>U.focusable),P=L.find(U=>U.active),V=L.find(U=>U.id===b),J=[P,V,...L].filter(Boolean).map(U=>U.ref.current);Cce(J,u)}}k.current=!1}),onBlur:Wt(e.onBlur,()=>w(!1))})})}),_ce="RovingFocusGroupItem",Sce=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:a,...o}=e,l=na(),c=s||l,u=Jet(_ce,n),d=u.currentTabStopId===c,h=xce(n),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:b}=u;return T.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),p.jsx(wO.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:p.jsx(sr.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:Wt(e.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:Wt(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Wt(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=ntt(v,u.orientation,u.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let S=h().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")S.reverse();else if(x==="prev"||x==="next"){x==="prev"&&S.reverse();const C=S.indexOf(v.currentTarget);S=u.loop?rtt(S,C+1):S.slice(C+1)}setTimeout(()=>Cce(S))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:b!=null}):a})})});Sce.displayName=_ce;var ett={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ttt(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ntt(e,t,n){const r=ttt(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ett[r]}function Cce(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function rtt(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var kce=wce,Ece=Sce,rA="Tabs",[itt,aft]=Vs(rA,[nA]),Tce=nA(),[stt,F5]=itt(rA),Ace=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=e,u=Xy(o),[d,h]=Sc({prop:r,onChange:i,defaultProp:s??"",caller:rA});return p.jsx(stt,{scope:n,baseId:na(),value:d,onValueChange:h,orientation:a,dir:u,activationMode:l,children:p.jsx(sr.div,{dir:u,"data-orientation":a,...c,ref:t})})});Ace.displayName=rA;var Rce="TabsList",Nce=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=F5(Rce,n),a=Tce(n);return p.jsx(kce,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(sr.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});Nce.displayName=Rce;var Mce="TabsTrigger",Ice=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,a=F5(Mce,n),o=Tce(n),l=Pce(a.baseId,r),c=Dce(a.baseId,r),u=r===a.value;return p.jsx(Ece,{asChild:!0,...o,focusable:!i,active:u,children:p.jsx(sr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:t,onMouseDown:Wt(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?a.onValueChange(r):d.preventDefault()}),onKeyDown:Wt(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(r)}),onFocus:Wt(e.onFocus,()=>{const d=a.activationMode!=="manual";!u&&!i&&d&&a.onValueChange(r)})})})});Ice.displayName=Mce;var jce="TabsContent",Oce=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=e,o=F5(jce,n),l=Pce(o.baseId,r),c=Dce(o.baseId,r),u=r===o.value,d=T.useRef(u);return T.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),p.jsx(sa,{present:i||u,children:({present:h})=>p.jsx(sr.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});Oce.displayName=jce;function Pce(e,t){return`${e}-trigger-${t}`}function Dce(e,t){return`${e}-content-${t}`}var att=Ace,ott=Nce,ltt=Ice,ctt=Oce;function utt({className:e,...t}){return p.jsx(att,{"data-slot":"tabs",className:Ye("flex flex-col gap-2",e),...t})}function dtt({className:e,...t}){return p.jsx(ott,{"data-slot":"tabs-list",className:Ye("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function ftt({className:e,...t}){return p.jsx(ltt,{"data-slot":"tabs-trigger",className:Ye("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function htt({className:e,...t}){return p.jsx(ctt,{"data-slot":"tabs-content",className:Ye("flex-1 outline-none",e),...t})}const Pu=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:i,listClassName:s,contentContainerClassName:a,scrollable:o})=>{var m;const[l,c]=T.useState(n??t??((m=e[0])==null?void 0:m.value));T.useEffect(()=>{n!==void 0&&n!==l&&c(n)},[n,l]);const u=y=>{console.log("handleValueChange",y),c(y),r&&r(y)},d=Ye("px-1 py-0.25 text-xs sm:px-3 sm:py-1.5 sm:text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),h=({children:y})=>{const v=Ye(o?"flex-grow overflow-y-auto pb-2 sm:pb-6 pr-1 sm:pr-2 -mr-1 sm:-mr-2":"flex-grow pb-2 sm:pb-6 pr-1 sm:pr-2 -mr-1 sm:-mr-2",a);return o?p.jsx(sl,{className:v,children:y}):p.jsx("div",{className:v,children:y})};return p.jsxs(utt,{value:l,onValueChange:u,defaultValue:t,className:Ye("flex flex-col h-full",i),children:[p.jsx(dtt,{className:Ye("flex-shrink-0 sticky top-0 bg-background z-10 flex-wrap h-auto justify-start border-b gap-0.5 sm:gap-1 p-0.5 sm:p-1 px-2 sm:px-6",s),children:e.map(y=>p.jsx(ftt,{value:y.value,disabled:y.disabled,className:d,children:y.label},y.value))}),p.jsx(h,{children:e.map(y=>p.jsx(htt,{value:y.value,className:"data-[state=inactive]:hidden h-full",children:y.content},y.value))})]})},Fce=T.memo(({isOpen:e,onClose:t,initialTab:n})=>{const{modSettingsTabs:r}=Sh(Sn(u=>({modSettingsTabs:u.modSettingsTabs||[]}))),i=T.useMemo(()=>[...r.map(h=>{const m=h.component;return{value:h.id,label:h.title,content:p.jsx(m,{}),order:h.order??999}})].sort((h,m)=>(h.order??999)-(m.order??999)),[r]),s=T.useCallback(()=>i.length>0?i[0].value:"general",[i]),[a,o]=T.useState(s());T.useEffect(()=>{if(e){let u=s();n&&i.some(d=>d.value===n)?u=n:n&&(console.warn(`[SettingsModal] Initial tab "${n}" not found. Defaulting to "${u}".`),Pe.error(`Settings tab "${n}" not found. Opening default tab.`)),o(u)}},[e,n,i,s]);const l=u=>{u||t()},c=u=>{o(u)};return p.jsx(Bm,{open:e,onOpenChange:l,children:p.jsxs($m,{className:Ye("w-[95vw] h-[90vh] flex flex-col p-0","sm:w-[90vw] sm:h-[85vh]","md:w-[85vw] md:max-w-[1200px] md:h-[80vh]","lg:w-[75vw]","min-h-[500px] max-h-[95vh]"),children:[p.jsxs(zm,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsx(Um,{children:"Settings"}),p.jsx(rb,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),i.length>0?p.jsx(Pu,{tabs:i,initialValue:a,onValueChange:c,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"flex-grow overflow-y-auto pb-4 md:pb-6",scrollable:!1},a):p.jsx("div",{className:"flex-grow flex items-center justify-center text-muted-foreground p-4",children:"No settings tabs available or still loading. Check console for module registration errors."}),p.jsx(nb,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:p.jsx(St,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});Fce.displayName="SettingsModalComponent";const ptt=Fce;class mtt{constructor(){ve(this,"id","core-settings-trigger");ve(this,"modalId","settingsModal");ve(this,"unregisterChatControlCallback",null);ve(this,"unregisterModalProviderCallback",null);ve(this,"modApiRef",null);ve(this,"openSettingsModal",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(Nr.openModalRequest,{modalId:this.modalId,initialTab:t||"general",initialSubTab:n})});ve(this,"closeSettingsModal",()=>{var t;(t=this.modApiRef)==null||t.emit(Nr.closeModalRequest,{modalId:this.modalId})})}async initialize(t){this.modApiRef=t}register(t){if(this.modApiRef=t,this.unregisterChatControlCallback&&this.unregisterModalProviderCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterChatControlCallback||(this.unregisterChatControlCallback=t.registerChatControl({id:this.id,panel:"sidebar-footer",status:()=>"ready",renderer:()=>Ve.createElement(nW,{module:this}),iconRenderer:()=>Ve.createElement(nW,{module:this}),show:()=>!0})),this.unregisterModalProviderCallback||(this.unregisterModalProviderCallback=t.registerModalProvider(this.modalId,n=>Ve.createElement(ptt,{isOpen:n.isOpen,onClose:n.onClose,initialTab:n.initialTab,initialSubTab:n.initialSubTab})))}destroy(){this.unregisterChatControlCallback&&(this.unregisterChatControlCallback(),this.unregisterChatControlCallback=null),this.unregisterModalProviderCallback&&(this.unregisterModalProviderCallback(),this.unregisterModalProviderCallback=null),this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const gtt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getIsSidebarCollapsed();return p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",onClick:()=>e.toggleSidebar(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?p.jsx(Tge,{className:"h-4 w-4"}):p.jsx(kge,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};class ytt{constructor(){ve(this,"id","core-sidebar-toggle");ve(this,"unregisterCallback",null);ve(this,"notifyComponentUpdate",null);ve(this,"modApiRef",null);ve(this,"getIsSidebarCollapsed",()=>Lw.getState().isSidebarCollapsed);ve(this,"toggleSidebar",t=>{var i,s;const n=Lw.getState().isSidebarCollapsed,r=t??!n;n!==r&&((i=this.modApiRef)==null||i.emit(Nr.toggleSidebarRequest,{isCollapsed:r}),(s=this.notifyComponentUpdate)==null||s.call(this))});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=()=>Ve.createElement(gtt,{module:this});this.unregisterCallback=t.registerChatControl({id:this.id,panel:"sidebar-footer",status:()=>"ready",renderer:n,iconRenderer:n,show:()=>!0})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}function by({form:e,name:t,label:n,placeholder:r,disabled:i,wrapperClassName:s,allowNull:a=!1,min:o,max:l,step:c,className:u,onBlurInput:d,...h}){return p.jsx(e.Field,{name:t,children:m=>{const y=x=>{const w=x.target.value;if(w===""&&a)m.handleChange(null);else{const S=parseFloat(w);isNaN(S)?w===""&&!a&&m.handleChange(w):m.handleChange(S)}},b=typeof m.state.value=="number"?m.state.value.toString():(m.state.value===null&&a,""),v=x=>{m.handleBlur(),d&&d(x)};return p.jsxs("div",{className:Ye("space-y-1.5",s),children:[" ",p.jsx(zt,{htmlFor:m.name,className:"text-sm",children:n}),p.jsx(Un,{id:m.name,name:m.name,type:"number",value:b,onBlur:v,onChange:y,placeholder:r,disabled:i??m.form.state.isSubmitting,min:o,max:l,step:c,className:Ye(u,m.state.meta.errors.length?"border-destructive":""),...h}),p.jsx(Ts,{field:m})]})}})}var Lce=["PageUp","PageDown"],Bce=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$ce={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ib="Slider",[_O,btt,vtt]=D5(ib),[zce,oft]=Vs(ib,[vtt]),[xtt,iA]=zce(ib),Uce=T.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:y,...b}=e,v=T.useRef(new Set),x=T.useRef(0),S=a==="horizontal"?wtt:_tt,[C=[],k]=Sc({prop:u,defaultProp:c,onChange:L=>{var V;(V=[...v.current][x.current])==null||V.focus(),d(L)}}),A=T.useRef(C);function R(L){const P=Ttt(C,L);O(L,P)}function N(L){O(L,x.current)}function I(){const L=A.current[x.current];C[x.current]!==L&&h(C)}function O(L,P,{commit:V}={commit:!1}){const F=Mtt(s),J=Itt(Math.round((L-r)/s)*s+r,F),U=Aw(J,[r,i]);k((G=[])=>{const $=ktt(G,U,P);if(Ntt($,l*s)){x.current=$.indexOf(U);const ne=String($)!==String(G);return ne&&V&&h($),ne?$:G}else return G})}return p.jsx(xtt,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:i,valueIndexToChangeRef:x,thumbs:v.current,values:C,orientation:a,form:y,children:p.jsx(_O.Provider,{scope:e.__scopeSlider,children:p.jsx(_O.Slot,{scope:e.__scopeSlider,children:p.jsx(S,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:t,onPointerDown:Wt(b.onPointerDown,()=>{o||(A.current=C)}),min:r,max:i,inverted:m,onSlideStart:o?void 0:R,onSlideMove:o?void 0:N,onSlideEnd:o?void 0:I,onHomeKeyDown:()=>!o&&O(r,0,{commit:!0}),onEndKeyDown:()=>!o&&O(i,C.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:P})=>{if(!o){const J=Lce.includes(L.key)||L.shiftKey&&Bce.includes(L.key)?10:1,U=x.current,G=C[U],$=s*J*P;O(G+$,U,{commit:!0})}}})})})})});Uce.displayName=ib;var[qce,Vce]=zce(ib,{startEdge:"left",endEdge:"right",size:"width",direction:1}),wtt=T.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,[d,h]=T.useState(null),m=Tn(t,S=>h(S)),y=T.useRef(void 0),b=Xy(i),v=b==="ltr",x=v&&!s||!v&&s;function w(S){const C=y.current||d.getBoundingClientRect(),k=[0,C.width],R=L5(k,x?[n,r]:[r,n]);return y.current=C,R(S-C.left)}return p.jsx(qce,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:p.jsx(Wce,{dir:b,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const C=w(S.clientX);a==null||a(C)},onSlideMove:S=>{const C=w(S.clientX);o==null||o(C)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:S=>{const k=$ce[x?"from-left":"from-right"].includes(S.key);c==null||c({event:S,direction:k?-1:1})}})})}),_tt=T.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=e,u=T.useRef(null),d=Tn(t,u),h=T.useRef(void 0),m=!i;function y(b){const v=h.current||u.current.getBoundingClientRect(),x=[0,v.height],S=L5(x,m?[r,n]:[n,r]);return h.current=v,S(b-v.top)}return p.jsx(qce,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:p.jsx(Wce,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const v=y(b.clientY);s==null||s(v)},onSlideMove:b=>{const v=y(b.clientY);a==null||a(v)},onSlideEnd:()=>{h.current=void 0,o==null||o()},onStepKeyDown:b=>{const x=$ce[m?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:x?-1:1})}})})}),Wce=T.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=e,u=iA(ib,n);return p.jsx(sr.span,{...c,ref:t,onKeyDown:Wt(e.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(o(d),d.preventDefault()):Lce.concat(Bce).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Wt(e.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():r(d)}),onPointerMove:Wt(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:Wt(e.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),Hce="SliderTrack",Gce=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=iA(Hce,n);return p.jsx(sr.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});Gce.displayName=Hce;var SO="SliderRange",Kce=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=iA(SO,n),s=Vce(SO,n),a=T.useRef(null),o=Tn(t,a),l=i.values.length,c=i.values.map(h=>Xce(h,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return p.jsx(sr.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:o,style:{...e.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});Kce.displayName=SO;var CO="SliderThumb",Yce=T.forwardRef((e,t)=>{const n=btt(e.__scopeSlider),[r,i]=T.useState(null),s=Tn(t,o=>i(o)),a=T.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return p.jsx(Stt,{...e,ref:s,index:a})}),Stt=T.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:i,...s}=e,a=iA(CO,n),o=Vce(CO,n),[l,c]=T.useState(null),u=Tn(t,w=>c(w)),d=l?a.form||!!l.closest("form"):!0,h=Ay(l),m=a.values[r],y=m===void 0?0:Xce(m,a.min,a.max),b=Ett(r,a.values.length),v=h==null?void 0:h[o.size],x=v?Att(v,y,o.direction):0;return T.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${y}% + ${x}px)`},children:[p.jsx(_O.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(sr.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":a.min,"aria-valuenow":m,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:u,style:m===void 0?{display:"none"}:e.style,onFocus:Wt(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),d&&p.jsx(Zce,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:m},r)]})});Yce.displayName=CO;var Ctt="RadioBubbleInput",Zce=T.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const i=T.useRef(null),s=Tn(i,r),a=HT(t);return T.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&u){const d=new Event("input",{bubbles:!0});u.call(o,t),o.dispatchEvent(d)}},[a,t]),p.jsx(sr.input,{style:{display:"none"},...n,ref:s,defaultValue:t})});Zce.displayName=Ctt;function ktt(e=[],t,n){const r=[...e];return r[n]=t,r.sort((i,s)=>i-s)}function Xce(e,t,n){const s=100/(n-t)*(e-t);return Aw(s,[0,100])}function Ett(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ttt(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),r=Math.min(...n);return n.indexOf(r)}function Att(e,t,n){const r=e/2,s=L5([0,50],[0,r]);return(r-s(t)*n)*n}function Rtt(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Ntt(e,t){if(t>0){const n=Rtt(e);return Math.min(...n)>=t}return!0}function L5(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Mtt(e){return(String(e).split(".")[1]||"").length}function Itt(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var jtt=Uce,Ott=Gce,Ptt=Kce,Dtt=Yce;function f0({className:e,defaultValue:t,value:n,min:r=0,max:i=100,...s}){const a=T.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,i],[n,t,r,i]);return p.jsxs(jtt,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:i,className:Ye("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...s,children:[p.jsx(Ott,{"data-slot":"slider-track",className:Ye("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:p.jsx(Ptt,{"data-slot":"slider-range",className:Ye("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(o,l)=>p.jsx(Dtt,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}function dc({form:e,name:t,label:n,valueLabelPrefix:r="",valueLabelSuffix:i="",valueDisplayPrecision:s=2,showRawValue:a=!1,disabled:o,wrapperClassName:l,className:c,min:u,max:d,step:h,...m}){return p.jsx(e.Field,{name:t,children:y=>{const b=typeof y.state.value=="number"?y.state.value:u??0,v=b.toFixed(s);return p.jsxs("div",{className:Ye("space-y-1.5",l),children:[p.jsxs(zt,{htmlFor:y.name,className:"text-sm",children:[n," (",r,v,i,")",a&&p.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(Raw: ",y.state.value,")"]})]}),p.jsx(f0,{id:y.name,name:y.name,value:[b],onValueChange:x=>y.handleChange(x[0]),onBlur:y.handleBlur,disabled:o??y.form.state.isSubmitting,min:u,max:d,step:h,className:Ye(c,y.state.meta.errors.length?"border-destructive":""),...m}),p.jsx(Ts,{field:y})]})}})}const Ftt=Je({temperature:Nt().min(0).max(1),topP:Nt().min(0).max(1),maxTokens:Nt().min(1).nullable(),topK:Nt().min(1).nullable(),presencePenalty:Nt().min(-2).max(2),frequencyPenalty:Nt().min(-2).max(2)}),Ltt=({module:e,className:t})=>{const n=Ns({defaultValues:{temperature:e.temperature??e.defaultTemperature??.7,topP:e.topP??e.defaultTopP??1,maxTokens:e.maxTokens??e.defaultMaxTokens??null,topK:e.topK??e.defaultTopK??null,presencePenalty:e.presencePenalty??e.defaultPresencePenalty??0,frequencyPenalty:e.frequencyPenalty??e.defaultFrequencyPenalty??0},validators:{onChangeAsync:Ftt,onChangeAsyncDebounceMs:500}});T.useEffect(()=>{n.reset({temperature:e.temperature??e.defaultTemperature??.7,topP:e.topP??e.defaultTopP??1,maxTokens:e.maxTokens??e.defaultMaxTokens??null,topK:e.topK??e.defaultTopK??null,presencePenalty:e.presencePenalty??e.defaultPresencePenalty??0,frequencyPenalty:e.frequencyPenalty??e.defaultFrequencyPenalty??0})},[e.temperature,e.defaultTemperature,e.topP,e.defaultTopP,e.maxTokens,e.defaultMaxTokens,e.topK,e.defaultTopK,e.presencePenalty,e.defaultPresencePenalty,e.frequencyPenalty,e.defaultFrequencyPenalty]);const[,r]=Ve.useState({});T.useEffect(()=>{const u=()=>r({});return e.setNotifyCallback(u),()=>e.setNotifyCallback(null)},[e]);const i=T.useCallback((u,d,h)=>{var m;((m=n.getFieldMeta(u))==null?void 0:m.errors.length)===0&&d(h)},[n,e]),s=T.useCallback((u,d)=>{var h;if(((h=n.getFieldMeta(u))==null?void 0:h.errors.length)===0){const m=n.getFieldValue(u);d(m)}},[n,e]),a=T.useCallback((u,d,h)=>{n.setFieldValue(u,h),d(null)},[n,e]),o=e.supportedParams,l=e.defaultTemperature!==void 0||e.defaultTopP!==void 0||e.defaultMaxTokens!==void 0||e.defaultTopK!==void 0||e.defaultPresencePenalty!==void 0||e.defaultFrequencyPenalty!==void 0,c=(u,d,h,m,y="N/A")=>{var b;return!l||m===void 0?null:p.jsxs(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>a(u,h,m??null),disabled:d===null,children:["Use Default (",((b=m==null?void 0:m.toFixed)==null?void 0:b.call(m,2))??y,")"]})};return p.jsxs("div",{className:Ye("space-y-4 p-4",t),children:[o.has("temperature")&&p.jsxs("div",{className:"space-y-0.5",children:[" ",p.jsx(dc,{form:n,name:"temperature",label:"Temperature",min:0,max:1,step:.01,valueDisplayPrecision:2,onValueCommit:u=>i("temperature",e.setTemperature,u[0]),wrapperClassName:"text-xs"}),c("temperature",e.temperature,e.setTemperature,e.defaultTemperature,"0.70")]}),o.has("top_p")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(dc,{form:n,name:"topP",label:"Top P",min:0,max:1,step:.01,valueDisplayPrecision:2,onValueCommit:u=>i("topP",e.setTopP,u[0]),wrapperClassName:"text-xs"}),c("topP",e.topP,e.setTopP,e.defaultTopP,"1.00")]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-start",children:[" ",o.has("max_tokens")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(by,{form:n,name:"maxTokens",label:"Max Tokens",placeholder:`Default: ${e.defaultMaxTokens??"None"}`,min:1,allowNull:!0,onBlurInput:()=>s("maxTokens",e.setMaxTokens),className:"h-8 text-xs",wrapperClassName:"text-xs"}),c("maxTokens",e.maxTokens,e.setMaxTokens,e.defaultMaxTokens,"None")]}),o.has("top_k")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(by,{form:n,name:"topK",label:"Top K",placeholder:`Default: ${e.defaultTopK??"None"}`,min:1,allowNull:!0,onBlurInput:()=>s("topK",e.setTopK),className:"h-8 text-xs",wrapperClassName:"text-xs"}),c("topK",e.topK,e.setTopK,e.defaultTopK,"None")]})]}),o.has("presence_penalty")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(dc,{form:n,name:"presencePenalty",label:"Presence Penalty",min:-2,max:2,step:.01,valueDisplayPrecision:2,onValueCommit:u=>i("presencePenalty",e.setPresencePenalty,u[0]),wrapperClassName:"text-xs"}),c("presencePenalty",e.presencePenalty,e.setPresencePenalty,e.defaultPresencePenalty,"0.00")]}),o.has("frequency_penalty")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(dc,{form:n,name:"frequencyPenalty",label:"Frequency Penalty",min:-2,max:2,step:.01,valueDisplayPrecision:2,onValueCommit:u=>i("frequencyPenalty",e.setFrequencyPenalty,u[0]),wrapperClassName:"text-xs"}),c("frequencyPenalty",e.frequencyPenalty,e.setFrequencyPenalty,e.defaultFrequencyPenalty,"0.00")]})]})},Btt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getIsStreaming();return e.getIsVisible()?p.jsxs(ul,{children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(dl,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:n,"aria-label":"Adjust Advanced Parameters",children:p.jsx(Kge,{className:"h-4 w-4"})})})}),p.jsx(_r,{side:"top",children:"Advanced Parameters"})]})}),p.jsx(fl,{className:"w-auto p-0",align:"start",children:p.jsx(Ltt,{module:e})})]}):null};class $tt{constructor(){ve(this,"id","core-parameters");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"temperature",null);ve(this,"topP",null);ve(this,"maxTokens",null);ve(this,"topK",null);ve(this,"presencePenalty",null);ve(this,"frequencyPenalty",null);ve(this,"defaultTemperature",null);ve(this,"defaultTopP",null);ve(this,"defaultMaxTokens",null);ve(this,"defaultTopK",null);ve(this,"defaultPresencePenalty",null);ve(this,"defaultFrequencyPenalty",null);ve(this,"isStreaming",!1);ve(this,"isVisible",!0);ve(this,"supportedParams",new Set);ve(this,"notifyComponentUpdate",null);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"getIsVisible",()=>this.isVisible);ve(this,"setTemperature",t=>{var n,r;this.temperature=t,(n=this.modApiRef)==null||n.emit(Pn.setTemperatureRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setTopP",t=>{var n,r;this.topP=t,(n=this.modApiRef)==null||n.emit(Pn.setTopPRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setMaxTokens",t=>{var n,r;this.maxTokens=t,(n=this.modApiRef)==null||n.emit(Pn.setMaxTokensRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setTopK",t=>{var n,r;this.topK=t,(n=this.modApiRef)==null||n.emit(Pn.setTopKRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setPresencePenalty",t=>{var n,r;this.presencePenalty=t,(n=this.modApiRef)==null||n.emit(Pn.setPresencePenaltyRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setFrequencyPenalty",t=>{var n,r;this.frequencyPenalty=t,(n=this.modApiRef)==null||n.emit(Pn.setFrequencyPenaltyRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.loadInitialState(),this.updateSupportedParams();const n=t.on(Zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(dr.selectedModelChanged,()=>{var a;this.updateSupportedParams(),this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(sn.enableAdvancedSettingsChanged,()=>{var a;this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),s=t.on(Pn.parameterChanged,a=>{var o;if(typeof a=="object"&&a&&"params"in a){const l=a.params;let c=!1;"temperature"in l&&this.temperature!==l.temperature&&(this.temperature=l.temperature??null,c=!0),"topP"in l&&this.topP!==l.topP&&(this.topP=l.topP??null,c=!0),"maxTokens"in l&&this.maxTokens!==l.maxTokens&&(this.maxTokens=l.maxTokens??null,c=!0),"topK"in l&&this.topK!==l.topK&&(this.topK=l.topK??null,c=!0),"presencePenalty"in l&&this.presencePenalty!==l.presencePenalty&&(this.presencePenalty=l.presencePenalty??null,c=!0),"frequencyPenalty"in l&&this.frequencyPenalty!==l.frequencyPenalty&&(this.frequencyPenalty=l.frequencyPenalty??null,c=!0),c&&((o=this.notifyComponentUpdate)==null||o.call(this))}});this.eventUnsubscribers.push(n,r,i,s)}loadInitialState(){const t=gr.getState(),n=To.getState();this.isStreaming=Ln.getState().status==="streaming",this.temperature=n.temperature,this.topP=n.topP,this.maxTokens=n.maxTokens,this.topK=n.topK,this.presencePenalty=n.presencePenalty,this.frequencyPenalty=n.frequencyPenalty,this.defaultTemperature=t.temperature,this.defaultTopP=t.topP,this.defaultMaxTokens=t.maxTokens,this.defaultTopK=t.topK,this.defaultPresencePenalty=t.presencePenalty,this.defaultFrequencyPenalty=t.frequencyPenalty,this.updateVisibility()}updateSupportedParams(){var o;const t=Mr.getState();if(!t.selectedModelId){this.supportedParams=new Set;return}const{providerId:n,modelId:r}=hc(t.selectedModelId);if(!n||!r){this.supportedParams=new Set;return}const i=t.dbProviderConfigs.find(l=>l.id===n);if(!i){this.supportedParams=new Set;return}const s=t.dbApiKeys.find(l=>l.id===i.apiKeyId),a=dK(i,r,s==null?void 0:s.value);this.supportedParams=new Set(((o=a==null?void 0:a.metadata)==null?void 0:o.supported_parameters)??[])}updateVisibility(){const r=gr.getState().enableAdvancedSettings&&["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"].some(i=>this.supportedParams.has(i));this.isVisible!==r&&(this.isVisible=r)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>Ve.createElement(Btt,{module:this}),getParameters:()=>{const n={},r=(i,s)=>{s!==null&&(n[i]=s)};return r("temperature",this.temperature),r("top_p",this.topP),r("max_tokens",this.maxTokens),r("top_k",this.topK),r("presence_penalty",this.presencePenalty),r("frequency_penalty",this.frequencyPenalty),Object.keys(n).length>0?n:void 0}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const ztt=({module:e})=>{const t=T.useRef(null),[,n]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>n({})),()=>e.setNotifyCallback(null)),[e]);const r=e.getIsStreaming(),i=e.getModelSupportsNonText(),s=T.useCallback(async l=>{const c=l.target.files;if(c){for(const u of Array.from(c))try{let d={};const h=e.isLikelyTextFile(u.name,u.type),m=u.type.startsWith("image/");if(h)d.contentText=await u.text();else if(m&&i){const y=new FileReader,b=new Promise((x,w)=>{y.onload=()=>x(y.result),y.onerror=S=>w(S)});y.readAsDataURL(u);const v=await b;v&&v.includes(",")&&(d.contentBase64=v.split(",")[1])}e.onFileAdd({source:"direct",name:u.name,type:u.type||"application/octet-stream",size:u.size,...d})}catch(d){console.error(`Error processing file ${u.name}:`,d),Pe.error(`Failed to process file "${u.name}": ${d instanceof Error?d.message:String(d)}`)}l.target&&(l.target.value="")}},[e,i]),a=()=>{var l;(l=t.current)==null||l.click()},o=i?"Attach Files (Text, Images, etc.)":"Attach Text Files";return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:t,onChange:s,multiple:!0,className:"hidden",disabled:r}),p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{type:"button",variant:"ghost",size:"icon",onClick:a,disabled:r,className:"h-8 w-8","aria-label":o,children:p.jsx(rE,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"top",children:o})]})})]})},Utt=({module:e})=>{const[,t]=T.useState({}),n=e.getAttachedFiles(),r=e.getIsStreaming();return T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]),n.length===0?null:p.jsx("div",{className:Ye("max-h-40 overflow-y-auto pr-1","flex flex-wrap gap-1"),children:n.map(i=>p.jsx(iX,{fileMeta:i,onRemove:e.onFileRemove,isReadOnly:r},i.id))})},Jce=20,qtt=Jce*1024*1024;class Vtt{constructor(){ve(this,"id","core-file-attachment");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"isStreaming",!1);ve(this,"modelSupportsNonText",!0);ve(this,"attachedFiles",[]);ve(this,"notifyComponentUpdate",null);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"getModelSupportsNonText",()=>this.modelSupportsNonText);ve(this,"getAttachedFiles",()=>this.attachedFiles);ve(this,"isLikelyTextFile",(t,n)=>Nx(t,n));ve(this,"onFileAdd",t=>{var r;if(t.size>qtt){Pe.error(`File "${t.name}" exceeds the ${Jce}MB limit.`);return}if(!Nx(t.name,t.type)&&!this.modelSupportsNonText){Pe.warning(`File "${t.name}" (${t.type}) cannot be uploaded. The current model only supports text input.`);return}(r=this.modApiRef)==null||r.emit(Ol.addAttachedFileRequest,t)});ve(this,"onFileRemove",t=>{var n;(n=this.modApiRef)==null||n.emit(Ol.removeAttachedFileRequest,{attachmentId:t})});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var s;this.modApiRef=t,this.isStreaming=Ln.getState().status==="streaming",this.attachedFiles=rh.getState().attachedFilesMetadata,this.updateModelSupport(),(s=this.notifyComponentUpdate)==null||s.call(this);const n=t.on(Zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(dr.selectedModelChanged,()=>{var a;this.updateModelSupport(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(Ol.attachedFilesChanged,a=>{var o;typeof a=="object"&&a&&"files"in a&&JSON.stringify(this.attachedFiles)!==JSON.stringify(a.files)&&(this.attachedFiles=a.files,(o=this.notifyComponentUpdate)==null||o.call(this))});this.eventUnsubscribers.push(n,r,i)}updateModelSupport(){var s,a;const{getSelectedModel:t}=Mr.getState(),n=t(),r=(a=(s=n==null?void 0:n.metadata)==null?void 0:s.architecture)==null?void 0:a.input_modalities,i=!r||r.some(o=>o!=="text");this.modelSupportsNonText!==i&&(this.modelSupportsNonText=i)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,triggerRenderer:()=>Ve.createElement(ztt,{module:this}),renderer:()=>Ve.createElement(Utt,{module:this})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Wtt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>{if(e&&typeof e.setNotifyTriggerUpdate=="function")return e.setNotifyTriggerUpdate(()=>t({})),()=>{e&&typeof e.setNotifyTriggerUpdate=="function"&&e.setNotifyTriggerUpdate(null)}},[e]);const n=e&&typeof e.getIsVfsModalOpen=="function"?e.getIsVfsModalOpen():!1,r=e&&typeof e.getSelectedFileIdsCount=="function"?e.getSelectedFileIdsCount():0,i=e&&typeof e.getEnableVfs=="function"?e.getEnableVfs():!1,s=rh.getState().addAttachedFile,a=()=>{const o=Ki.getState().selectedFileIds;if(o.size===0){Pe.info("No files selected in VFS to attach.");return}let l=0;const c=e.getVfsNodes();o.forEach(u=>{const d=c[u];d&&d.type==="file"&&(s({source:"vfs",name:d.name,type:d.mimeType||"application/octet-stream",size:d.size,path:d.path}),l++)}),l>0?(Pe.success(`Attached ${l} file(s) from VFS to the next prompt.`),typeof e.clearVfsSelection=="function"&&e.clearVfsSelection(),e.toggleVfsModal):Pe.warning("No valid files were selected to attach.")};return i?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:Ye("h-8 w-8",n&&"bg-muted text-primary"),onClick:()=>e&&typeof e.toggleVfsModal=="function"&&e.toggleVfsModal(),"aria-label":"Toggle Virtual File System",children:p.jsx($O,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"top",children:"Virtual Filesystem"})]})}),r>0&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsxs(St,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:a,"aria-label":`Attach ${r} selected VFS file(s)`,children:[p.jsx(rE,{className:"h-4 w-4 mr-1"}),"Attach (",r,")"]})}),p.jsx(_r,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null};function Vh({className:e,...t}){return p.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:p.jsx("table",{"data-slot":"table",className:Ye("w-full caption-bottom text-sm",e),...t})})}function qm({className:e,...t}){return p.jsx("thead",{"data-slot":"table-header",className:Ye("[&_tr]:border-b",e),...t})}function Wh({className:e,...t}){return p.jsx("tbody",{"data-slot":"table-body",className:Ye("[&_tr:last-child]:border-0",e),...t})}function Ii({className:e,...t}){return p.jsx("tr",{"data-slot":"table-row",className:Ye("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Hr({className:e,...t}){return p.jsx("th",{"data-slot":"table-head",className:Ye("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Kn({className:e,...t}){return p.jsx("td",{"data-slot":"table-cell",className:Ye("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Htt({className:e,...t}){return p.jsx("caption",{"data-slot":"table-caption",className:Ye("text-muted-foreground mt-4 text-sm",e),...t})}const Qce=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:i,isOperationLoading:s,isMobile:a=!1})=>{const o=l=>{l.key==="Enter"?n():l.key==="Escape"&&r()};return a?p.jsxs("div",{className:"flex items-center gap-2 p-1",children:[p.jsx(nh,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"}),p.jsx(Un,{ref:i,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary flex-grow",placeholder:"New folder name",disabled:s}),p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx(St,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:s||!e.trim(),children:s?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(Qa,{className:"h-4 w-4"})}),p.jsx(St,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:s,children:p.jsx(va,{className:"h-4 w-4"})})]})]}):p.jsxs(Ii,{className:"bg-muted/30",children:[p.jsx(Kn,{className:"px-2 py-1"}),p.jsx(Kn,{className:"px-2 py-1",children:p.jsx(nh,{className:"h-5 w-5 text-yellow-400"})}),p.jsx(Kn,{className:"py-1 px-2",colSpan:3,children:p.jsx(Un,{ref:i,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:s})}),p.jsx(Kn,{className:"text-right pr-4 py-1",children:p.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:s||!e.trim(),children:s?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(Qa,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"top",children:"Create (Enter)"})]})}),p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:s,children:p.jsx(va,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var Gtt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],B5=Gtt.reduce((e,t)=>{const n=xu(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),sA="Checkbox",[Ktt,lft]=Vs(sA),[Ytt,$5]=Ktt(sA);function Ztt(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:i,disabled:s,form:a,name:o,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=e,[h,m]=Sc({prop:n,defaultProp:i??!1,onChange:l,caller:sA}),[y,b]=T.useState(null),[v,x]=T.useState(null),w=T.useRef(!1),S=y?!!a||!!y.closest("form"):!0,C={checked:h,disabled:s,setChecked:m,control:y,setControl:b,name:o,form:a,value:u,hasConsumerStoppedPropagationRef:w,required:c,defaultChecked:th(i)?!1:i,isFormControl:S,bubbleInput:v,setBubbleInput:x};return p.jsx(Ytt,{scope:t,...C,children:Xtt(d)?d(C):r})}var eue="CheckboxTrigger",tue=T.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},i)=>{const{control:s,value:a,disabled:o,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:y}=$5(eue,e),b=Tn(i,u),v=T.useRef(l);return T.useEffect(()=>{const x=s==null?void 0:s.form;if(x){const w=()=>d(v.current);return x.addEventListener("reset",w),()=>x.removeEventListener("reset",w)}},[s,d]),p.jsx(B5.button,{type:"button",role:"checkbox","aria-checked":th(l)?"mixed":l,"aria-required":c,"data-state":oue(l),"data-disabled":o?"":void 0,disabled:o,value:a,...r,ref:b,onKeyDown:Wt(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Wt(n,x=>{d(w=>th(w)?!0:!w),y&&m&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});tue.displayName=eue;var nue=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:l,onCheckedChange:c,form:u,...d}=e;return p.jsx(Ztt,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:o,required:a,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:h})=>p.jsxs(p.Fragment,{children:[p.jsx(tue,{...d,ref:t,__scopeCheckbox:n}),h&&p.jsx(aue,{__scopeCheckbox:n})]})})});nue.displayName=sA;var rue="CheckboxIndicator",iue=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,s=$5(rue,n);return p.jsx(sa,{present:r||th(s.checked)||s.checked===!0,children:p.jsx(B5.span,{"data-state":oue(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});iue.displayName=rue;var sue="CheckboxBubbleInput",aue=T.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:a,required:o,disabled:l,name:c,value:u,form:d,bubbleInput:h,setBubbleInput:m}=$5(sue,e),y=Tn(n,m),b=HT(s),v=Ay(r);T.useEffect(()=>{const w=h;if(!w)return;const S=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(S,"checked").set,A=!i.current;if(b!==s&&k){const R=new Event("click",{bubbles:A});w.indeterminate=th(s),k.call(w,th(s)?!1:s),w.dispatchEvent(R)}},[h,b,s,i]);const x=T.useRef(th(s)?!1:s);return p.jsx(B5.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??x.current,required:o,disabled:l,name:c,value:u,form:d,...t,tabIndex:-1,ref:y,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});aue.displayName=sue;function Xtt(e){return typeof e=="function"}function th(e){return e==="indeterminate"}function oue(e){return th(e)?"indeterminate":e?"checked":"unchecked"}function Vl({className:e,...t}){return p.jsx(nue,{"data-slot":"checkbox",className:Ye("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(iue,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:p.jsx(Qa,{className:"size-3.5"})})})}function Jtt(e){const t=Qtt(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(tnt);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function Qtt(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=rnt(i),o=nnt(s,i.props);return i.type!==T.Fragment&&(o.ref=r?el(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ent=Symbol("radix.slottable");function tnt(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ent}function nnt(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function rnt(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var kO=["Enter"," "],int=["ArrowDown","PageUp","Home"],lue=["ArrowUp","PageDown","End"],snt=[...int,...lue],ant={ltr:[...kO,"ArrowRight"],rtl:[...kO,"ArrowLeft"]},ont={ltr:["ArrowLeft"],rtl:["ArrowRight"]},V1="Menu",[$w,lnt,cnt]=D5(V1),[Vm,aA]=Vs(V1,[cnt,wE,nA]),oA=wE(),cue=nA(),[unt,Wm]=Vm(V1),[dnt,W1]=Vm(V1),uue=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:s,modal:a=!0}=e,o=oA(t),[l,c]=T.useState(null),u=T.useRef(!1),d=_i(s),h=Xy(i);return T.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),p.jsx(DK,{...o,children:p.jsx(unt,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:c,children:p.jsx(dnt,{scope:t,onClose:T.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:a,children:r})})})};uue.displayName=V1;var fnt="MenuAnchor",z5=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=oA(n);return p.jsx(FK,{...i,...r,ref:t})});z5.displayName=fnt;var U5="MenuPortal",[hnt,due]=Vm(U5,{forceMount:void 0}),fue=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,s=Wm(U5,t);return p.jsx(hnt,{scope:t,forceMount:n,children:p.jsx(sa,{present:n||s.open,children:p.jsx(_E,{asChild:!0,container:i,children:r})})})};fue.displayName=U5;var $l="MenuContent",[pnt,q5]=Vm($l),hue=T.forwardRef((e,t)=>{const n=due($l,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,s=Wm($l,e.__scopeMenu),a=W1($l,e.__scopeMenu);return p.jsx($w.Provider,{scope:e.__scopeMenu,children:p.jsx(sa,{present:r||s.open,children:p.jsx($w.Slot,{scope:e.__scopeMenu,children:a.modal?p.jsx(mnt,{...i,ref:t}):p.jsx(gnt,{...i,ref:t})})})})}),mnt=T.forwardRef((e,t)=>{const n=Wm($l,e.__scopeMenu),r=T.useRef(null),i=Tn(t,r);return T.useEffect(()=>{const s=r.current;if(s)return GT(s)},[]),p.jsx(V5,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Wt(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),gnt=T.forwardRef((e,t)=>{const n=Wm($l,e.__scopeMenu);return p.jsx(V5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ynt=Jtt("MenuContent.ScrollLock"),V5=T.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:y,...b}=e,v=Wm($l,n),x=W1($l,n),w=oA(n),S=cue(n),C=lnt(n),[k,A]=T.useState(null),R=T.useRef(null),N=Tn(t,R,v.onContentChange),I=T.useRef(0),O=T.useRef(""),L=T.useRef(0),P=T.useRef(null),V=T.useRef("right"),F=T.useRef(0),J=y?z1:T.Fragment,U=y?{as:ynt,allowPinchZoom:!0}:void 0,G=ne=>{var je,Me;const W=O.current+ne,te=C().filter(Se=>!Se.disabled),ee=document.activeElement,re=(je=te.find(Se=>Se.ref.current===ee))==null?void 0:je.textValue,de=te.map(Se=>Se.textValue),oe=Rnt(de,W,re),Ie=(Me=te.find(Se=>Se.textValue===oe))==null?void 0:Me.ref.current;(function Se(qe){O.current=qe,window.clearTimeout(I.current),qe!==""&&(I.current=window.setTimeout(()=>Se(""),1e3))})(W),Ie&&setTimeout(()=>Ie.focus())};T.useEffect(()=>()=>window.clearTimeout(I.current),[]),WT();const $=T.useCallback(ne=>{var te,ee;return V.current===((te=P.current)==null?void 0:te.side)&&Mnt(ne,(ee=P.current)==null?void 0:ee.area)},[]);return p.jsx(pnt,{scope:n,searchRef:O,onItemEnter:T.useCallback(ne=>{$(ne)&&ne.preventDefault()},[$]),onItemLeave:T.useCallback(ne=>{var W;$(ne)||((W=R.current)==null||W.focus(),A(null))},[$]),onTriggerLeave:T.useCallback(ne=>{$(ne)&&ne.preventDefault()},[$]),pointerGraceTimerRef:L,onPointerGraceIntentChange:T.useCallback(ne=>{P.current=ne},[]),children:p.jsx(J,{...U,children:p.jsx(I5,{asChild:!0,trapped:i,onMountAutoFocus:Wt(s,ne=>{var W;ne.preventDefault(),(W=R.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:p.jsx(yE,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:p.jsx(kce,{asChild:!0,...S,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:A,onEntryFocus:Wt(l,ne=>{x.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(LK,{role:"menu","aria-orientation":"vertical","data-state":Rue(v.open),"data-radix-menu-content":"",dir:x.dir,...w,...b,ref:N,style:{outline:"none",...b.style},onKeyDown:Wt(b.onKeyDown,ne=>{const te=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,ee=ne.ctrlKey||ne.altKey||ne.metaKey,re=ne.key.length===1;te&&(ne.key==="Tab"&&ne.preventDefault(),!ee&&re&&G(ne.key));const de=R.current;if(ne.target!==de||!snt.includes(ne.key))return;ne.preventDefault();const Ie=C().filter(je=>!je.disabled).map(je=>je.ref.current);lue.includes(ne.key)&&Ie.reverse(),Tnt(Ie)}),onBlur:Wt(e.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(I.current),O.current="")}),onPointerMove:Wt(e.onPointerMove,zw(ne=>{const W=ne.target,te=F.current!==ne.clientX;if(ne.currentTarget.contains(W)&&te){const ee=ne.clientX>F.current?"right":"left";V.current=ee,F.current=ne.clientX}}))})})})})})})});hue.displayName=$l;var bnt="MenuGroup",W5=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(sr.div,{role:"group",...r,ref:t})});W5.displayName=bnt;var vnt="MenuLabel",pue=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(sr.div,{...r,ref:t})});pue.displayName=vnt;var Kk="MenuItem",lW="menu.itemSelect",lA=T.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,s=T.useRef(null),a=W1(Kk,e.__scopeMenu),o=q5(Kk,e.__scopeMenu),l=Tn(t,s),c=T.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(lW,{bubbles:!0,cancelable:!0});d.addEventListener(lW,m=>r==null?void 0:r(m),{once:!0}),hK(d,h),h.defaultPrevented?c.current=!1:a.onClose()}};return p.jsx(mue,{...i,ref:l,disabled:n,onClick:Wt(e.onClick,u),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),c.current=!0},onPointerUp:Wt(e.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Wt(e.onKeyDown,d=>{const h=o.searchRef.current!=="";n||h&&d.key===" "||kO.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});lA.displayName=Kk;var mue=T.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=e,a=q5(Kk,n),o=cue(n),l=T.useRef(null),c=Tn(t,l),[u,d]=T.useState(!1),[h,m]=T.useState("");return T.useEffect(()=>{const y=l.current;y&&m((y.textContent??"").trim())},[s.children]),p.jsx($w.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:p.jsx(Ece,{asChild:!0,...o,focusable:!r,children:p.jsx(sr.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:Wt(e.onPointerMove,zw(y=>{r?a.onItemLeave(y):(a.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Wt(e.onPointerLeave,zw(y=>a.onItemLeave(y))),onFocus:Wt(e.onFocus,()=>d(!0)),onBlur:Wt(e.onBlur,()=>d(!1))})})})}),xnt="MenuCheckboxItem",gue=T.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return p.jsx(wue,{scope:e.__scopeMenu,checked:n,children:p.jsx(lA,{role:"menuitemcheckbox","aria-checked":Yk(n)?"mixed":n,...i,ref:t,"data-state":G5(n),onSelect:Wt(i.onSelect,()=>r==null?void 0:r(Yk(n)?!0:!n),{checkForDefaultPrevented:!1})})})});gue.displayName=xnt;var yue="MenuRadioGroup",[wnt,_nt]=Vm(yue,{value:void 0,onValueChange:()=>{}}),bue=T.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,s=_i(r);return p.jsx(wnt,{scope:e.__scopeMenu,value:n,onValueChange:s,children:p.jsx(W5,{...i,ref:t})})});bue.displayName=yue;var vue="MenuRadioItem",xue=T.forwardRef((e,t)=>{const{value:n,...r}=e,i=_nt(vue,e.__scopeMenu),s=n===i.value;return p.jsx(wue,{scope:e.__scopeMenu,checked:s,children:p.jsx(lA,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":G5(s),onSelect:Wt(r.onSelect,()=>{var a;return(a=i.onValueChange)==null?void 0:a.call(i,n)},{checkForDefaultPrevented:!1})})})});xue.displayName=vue;var H5="MenuItemIndicator",[wue,Snt]=Vm(H5,{checked:!1}),_ue=T.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,s=Snt(H5,n);return p.jsx(sa,{present:r||Yk(s.checked)||s.checked===!0,children:p.jsx(sr.span,{...i,ref:t,"data-state":G5(s.checked)})})});_ue.displayName=H5;var Cnt="MenuSeparator",Sue=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(sr.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Sue.displayName=Cnt;var knt="MenuArrow",Cue=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=oA(n);return p.jsx(BK,{...i,...r,ref:t})});Cue.displayName=knt;var Ent="MenuSub",[cft,kue]=Vm(Ent),Jv="MenuSubTrigger",Eue=T.forwardRef((e,t)=>{const n=Wm(Jv,e.__scopeMenu),r=W1(Jv,e.__scopeMenu),i=kue(Jv,e.__scopeMenu),s=q5(Jv,e.__scopeMenu),a=T.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},u=T.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return T.useEffect(()=>u,[u]),T.useEffect(()=>{const d=o.current;return()=>{window.clearTimeout(d),l(null)}},[o,l]),p.jsx(z5,{asChild:!0,...c,children:p.jsx(mue,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Rue(n.open),...e,ref:el(t,i.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Wt(e.onPointerMove,zw(d=>{s.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Wt(e.onPointerLeave,zw(d=>{var m,y;u();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const b=(y=n.content)==null?void 0:y.dataset.side,v=b==="right",x=v?-5:5,w=h[v?"left":"right"],S=h[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+x,y:d.clientY},{x:w,y:h.top},{x:S,y:h.top},{x:S,y:h.bottom},{x:w,y:h.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Wt(e.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";e.disabled||h&&d.key===" "||ant[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});Eue.displayName=Jv;var Tue="MenuSubContent",Aue=T.forwardRef((e,t)=>{const n=due($l,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,s=Wm($l,e.__scopeMenu),a=W1($l,e.__scopeMenu),o=kue(Tue,e.__scopeMenu),l=T.useRef(null),c=Tn(t,l);return p.jsx($w.Provider,{scope:e.__scopeMenu,children:p.jsx(sa,{present:r||s.open,children:p.jsx($w.Slot,{scope:e.__scopeMenu,children:p.jsx(V5,{id:o.contentId,"aria-labelledby":o.triggerId,...i,ref:c,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;a.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Wt(e.onFocusOutside,u=>{u.target!==o.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Wt(e.onEscapeKeyDown,u=>{a.onClose(),u.preventDefault()}),onKeyDown:Wt(e.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),h=ont[a.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(m=o.trigger)==null||m.focus(),u.preventDefault())})})})})})});Aue.displayName=Tue;function Rue(e){return e?"open":"closed"}function Yk(e){return e==="indeterminate"}function G5(e){return Yk(e)?"indeterminate":e?"checked":"unchecked"}function Tnt(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Ant(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Rnt(e,t,n){const i=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=Ant(e,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Nnt(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s],l=t[a],c=o.x,u=o.y,d=l.x,h=l.y;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=!i)}return i}function Mnt(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Nnt(n,t)}function zw(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Nue=uue,Mue=z5,Iue=fue,jue=hue,Oue=W5,Pue=pue,Due=lA,Fue=gue,Lue=bue,Bue=xue,$ue=_ue,zue=Sue,Uue=Cue,que=Eue,Vue=Aue,K5="ContextMenu",[Int,uft]=Vs(K5,[aA]),ao=aA(),[jnt,Wue]=Int(K5),Hue=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:i,modal:s=!0}=e,[a,o]=T.useState(!1),l=ao(t),c=_i(r),u=T.useCallback(d=>{o(d),c(d)},[c]);return p.jsx(jnt,{scope:t,open:a,onOpenChange:u,modal:s,children:p.jsx(Nue,{...l,dir:i,open:a,onOpenChange:u,modal:s,children:n})})};Hue.displayName=K5;var Gue="ContextMenuTrigger",Kue=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...i}=e,s=Wue(Gue,n),a=ao(n),o=T.useRef({x:0,y:0}),l=T.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),c=T.useRef(0),u=T.useCallback(()=>window.clearTimeout(c.current),[]),d=h=>{o.current={x:h.clientX,y:h.clientY},s.onOpenChange(!0)};return T.useEffect(()=>u,[u]),T.useEffect(()=>void(r&&u()),[r,u]),p.jsxs(p.Fragment,{children:[p.jsx(Mue,{...a,virtualRef:l}),p.jsx(sr.span,{"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,...i,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Wt(e.onContextMenu,h=>{u(),d(h),h.preventDefault()}),onPointerDown:r?e.onPointerDown:Wt(e.onPointerDown,i2(h=>{u(),c.current=window.setTimeout(()=>d(h),700)})),onPointerMove:r?e.onPointerMove:Wt(e.onPointerMove,i2(u)),onPointerCancel:r?e.onPointerCancel:Wt(e.onPointerCancel,i2(u)),onPointerUp:r?e.onPointerUp:Wt(e.onPointerUp,i2(u))})]})});Kue.displayName=Gue;var Ont="ContextMenuPortal",Yue=e=>{const{__scopeContextMenu:t,...n}=e,r=ao(t);return p.jsx(Iue,{...r,...n})};Yue.displayName=Ont;var Zue="ContextMenuContent",Xue=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Wue(Zue,n),s=ao(n),a=T.useRef(!1);return p.jsx(jue,{...s,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&a.current&&o.preventDefault(),a.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!i.modal&&(a.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Xue.displayName=Zue;var Pnt="ContextMenuGroup",Dnt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(Oue,{...i,...r,ref:t})});Dnt.displayName=Pnt;var Fnt="ContextMenuLabel",Lnt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(Pue,{...i,...r,ref:t})});Lnt.displayName=Fnt;var Bnt="ContextMenuItem",Jue=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(Due,{...i,...r,ref:t})});Jue.displayName=Bnt;var $nt="ContextMenuCheckboxItem",znt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(Fue,{...i,...r,ref:t})});znt.displayName=$nt;var Unt="ContextMenuRadioGroup",qnt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(Lue,{...i,...r,ref:t})});qnt.displayName=Unt;var Vnt="ContextMenuRadioItem",Wnt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(Bue,{...i,...r,ref:t})});Wnt.displayName=Vnt;var Hnt="ContextMenuItemIndicator",Gnt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx($ue,{...i,...r,ref:t})});Gnt.displayName=Hnt;var Knt="ContextMenuSeparator",Que=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(zue,{...i,...r,ref:t})});Que.displayName=Knt;var Ynt="ContextMenuArrow",Znt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(Uue,{...i,...r,ref:t})});Znt.displayName=Ynt;var Xnt="ContextMenuSubTrigger",Jnt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(que,{...i,...r,ref:t})});Jnt.displayName=Xnt;var Qnt="ContextMenuSubContent",ert=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=ao(n);return p.jsx(Vue,{...i,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ert.displayName=Qnt;function i2(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var trt=Hue,nrt=Kue,rrt=Yue,irt=Xue,srt=Jue,art=Que;function cW({...e}){return p.jsx(trt,{"data-slot":"context-menu",...e})}function uW({...e}){return p.jsx(nrt,{"data-slot":"context-menu-trigger",...e})}function dW({className:e,...t}){return p.jsx(rrt,{children:p.jsx(irt,{"data-slot":"context-menu-content",className:Ye("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function Wo({className:e,inset:t,variant:n="default",...r}){return p.jsx(srt,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:Ye("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function fW({className:e,...t}){return p.jsx(art,{"data-slot":"context-menu-separator",className:Ye("bg-border -mx-1 my-1 h-px",e),...t})}const ort=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:i,isOperationLoading:s,creatingFolder:a,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:u,handleRename:d,handleDownload:h,handleDelete:m,setNewName:y,renameInputRef:b,handleGitInit:v,handleGitPull:x,handleGitCommit:w,handleGitPush:S,handleGitStatus:C})=>{const k=e.type==="folder",A=L=>{L.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||s||(k?o(e):l(!n,e.id))},R=L=>{L.key==="Enter"?d():L.key==="Escape"&&u()},N=k?r?hH:nh:fH,I=k?r?"text-green-400":"text-yellow-400":"text-blue-400",O=p.jsxs(Ii,{className:Ye("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",s&&"opacity-70 cursor-not-allowed",!k&&"cursor-pointer"),onClick:A,onDoubleClick:()=>!s&&!t&&o(e),children:[p.jsx(Kn,{className:"px-2 py-1",children:p.jsx(Vl,{checked:n,onCheckedChange:L=>l(!!L,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:s||k})}),p.jsx(Kn,{className:"px-2 py-1",children:p.jsx(N,{className:Ye("h-5 w-5",I)})}),p.jsx(Kn,{className:"py-1 px-2",children:t?p.jsx(Un,{ref:b,value:i,onChange:L=>y(L.target.value),onBlur:d,onKeyDown:R,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:L=>L.stopPropagation(),disabled:s}):p.jsx("span",{className:Ye("truncate",k&&"cursor-pointer hover:underline"),title:e.name,onClick:L=>{k&&(L.stopPropagation(),o(e))},children:e.name})}),p.jsx(Kn,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?Wx(e.size):""}),p.jsx(Kn,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),p.jsx(Kn,{className:"text-right pr-4 py-1",children:p.jsx("div",{className:Ye("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",s&&"opacity-30"),children:t?p.jsxs(p.Fragment,{children:[p.jsx(In,{tooltipText:"Save (Enter)",onClick:L=>{L.stopPropagation(),d()},"aria-label":"Save name",disabled:s||!i.trim(),icon:s?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(Qa,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),p.jsx(In,{tooltipText:"Cancel (Esc)",onClick:L=>{L.stopPropagation(),u()},"aria-label":"Cancel edit",disabled:s,icon:p.jsx(va,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[p.jsx(In,{tooltipText:"Rename",onClick:L=>{L.stopPropagation(),c(e)},"aria-label":"Rename",disabled:s||a,icon:p.jsx(nx,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(In,{tooltipText:k?"Download folder (.zip)":"Download file",onClick:L=>{L.stopPropagation(),h(e)},"aria-label":k?"Download folder as ZIP":"Download file",disabled:s,icon:p.jsx(fu,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(In,{tooltipText:"Delete",onClick:L=>{L.stopPropagation(),m(e)},"aria-label":`Delete ${k?"folder":"file"}`,disabled:s,icon:p.jsx(So,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return k?p.jsxs(cW,{children:[p.jsx(uW,{disabled:t||s,asChild:!0,children:O}),p.jsxs(dW,{children:[p.jsx(Wo,{onSelect:()=>o(e),disabled:t||s,children:"Open Folder"}),p.jsx(fW,{}),r?p.jsxs(p.Fragment,{children:[p.jsxs(Wo,{onSelect:()=>x(e.path),disabled:s,children:[p.jsx(gH,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),p.jsxs(Wo,{onSelect:()=>w(e.path),disabled:s,children:[p.jsx(mH,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),p.jsxs(Wo,{onSelect:()=>S(e.path),disabled:s,children:[p.jsx(BO,{className:"mr-2 h-4 w-4"}),"Git Push"]}),p.jsxs(Wo,{onSelect:()=>C(e.path),disabled:s,children:[p.jsx(zO,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):p.jsxs(Wo,{onSelect:()=>v(e.path),disabled:s,children:[p.jsx(xc,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),p.jsx(fW,{}),p.jsxs(Wo,{onSelect:()=>c(e),disabled:s,children:[p.jsx(nx,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(Wo,{onSelect:()=>h(e),disabled:s,children:[p.jsx(fu,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),p.jsxs(Wo,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>m(e),disabled:s,children:[p.jsx(So,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):p.jsxs(cW,{children:[p.jsx(uW,{disabled:t||s,asChild:!0,children:O}),p.jsxs(dW,{children:[p.jsxs(Wo,{onSelect:()=>l(!n,e.id),disabled:s,children:[n?"Deselect":"Select"," File"]}),p.jsxs(Wo,{onSelect:()=>c(e),disabled:s,children:[p.jsx(nx,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(Wo,{onSelect:()=>h(e),disabled:s,children:[p.jsx(fu,{className:"mr-2 h-4 w-4"}),"Download File"]}),p.jsxs(Wo,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>m(e),disabled:s,children:[p.jsx(So,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},lrt=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:i,selectedFileIds:s,isOperationLoading:a,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:u,handleRename:d,cancelCreatingFolder:h,handleCreateFolder:m,handleDownload:y,handleDelete:b,setNewName:v,setNewFolderName:x,renameInputRef:w,newFolderInputRef:S,gitRepoStatus:C,handleGitInit:k,handleGitPull:A,handleGitCommit:R,handleGitPush:N,handleGitStatus:I})=>{const O=T.useMemo(()=>e,[e]);return a&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):p.jsx("div",{className:"relative h-full",children:p.jsxs(Vh,{className:"w-full text-sm",children:[p.jsx(qm,{className:"sticky top-0 bg-card z-10",children:p.jsxs(Ii,{className:"hover:bg-card",children:[p.jsx(Hr,{className:"w-[40px] px-2"}),p.jsx(Hr,{className:"w-[40px] px-2"}),p.jsx(Hr,{children:"Name"}),p.jsx(Hr,{className:"w-[100px] text-right",children:"Size"}),p.jsx(Hr,{className:"w-[150px] text-right",children:"Modified"}),p.jsx(Hr,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),p.jsxs(Wh,{children:[r&&p.jsx(Qce,{newFolderName:i,setNewFolderName:x,handleCreateFolder:m,cancelCreatingFolder:h,newFolderInputRef:S,isOperationLoading:a}),O.map(L=>{const P=t===L.path,V=s.has(L.id),F=C[L.path]??!1;return p.jsx(ort,{entry:L,isEditingThis:P,isChecked:V,isGitRepo:F,newName:P?n:"",isOperationLoading:a,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:u,handleRename:d,handleDownload:y,handleDelete:b,setNewName:v,renameInputRef:w,handleGitInit:k,handleGitPull:A,handleGitCommit:R,handleGitPush:N,handleGitStatus:I},L.id)}),e.length===0&&!r&&!a&&p.jsx(Ii,{children:p.jsx(Kn,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},crt=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:i,creatingFolder:s,handleNavigateHome:a,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:c,handleUploadClick:u,handleFolderUploadClick:d,handleArchiveUploadClick:h,handleDownloadAll:m,handleCloneClick:y,fileInputRef:b,folderInputRef:v,archiveInputRef:x,handleFileChange:w,handleArchiveChange:S})=>p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:b,onChange:w,className:"hidden",multiple:!0,disabled:t}),p.jsx("input",{type:"file",ref:v,onChange:w,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),p.jsx("input",{type:"file",ref:x,onChange:S,className:"hidden",accept:".zip",disabled:t}),p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(St,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),a()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:p.jsx(age,{className:"h-4 w-4"})}),p.jsx(St,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:p.jsx(Vme,{className:"h-4 w-4"})}),p.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[150px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),p.jsx("div",{className:"flex-grow"}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap justify-end",children:[" ",p.jsx(St,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(Kp,{className:"h-4 w-4"})}),p.jsxs(St,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||s||!!i,className:"h-8",title:"Create New Folder",type:"button",children:[n&&s?p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(pH,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(St,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(FO,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Files"})," "]}),p.jsxs(St,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(nh,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(St,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(Ame,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"ZIP"})," "]}),p.jsxs(St,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),y()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(xc,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Clone"})," "]}),p.jsxs(St,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(lH,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Export"})," "]})]})]})]}),ede=({isOpen:e,onOpenChange:t,title:n,description:r,children:i,submitLabel:s="Submit",onSubmit:a,isSubmitting:o,submitDisabled:l=!1,className:c,contentClassName:u})=>{const d=async h=>{h==null||h.preventDefault(),!(o||l)&&await a()};return p.jsx(Bm,{open:e,onOpenChange:t,children:p.jsxs($m,{className:Ye(c),children:[p.jsxs(zm,{children:[p.jsx(Um,{children:n}),r&&p.jsx(rb,{children:r})]}),p.jsx("div",{className:Ye("py-4",u),children:i}),p.jsxs(nb,{children:[p.jsx(zet,{asChild:!0,children:p.jsx(St,{variant:"outline",disabled:o,children:"Cancel"})}),p.jsxs(St,{onClick:d,disabled:o||l,children:[o&&p.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":s]})]})]})})},urt=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:i,setCloneBranch:s,isCloning:a,onSubmitClone:o,currentPath:l})=>p.jsx(ede,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:p.jsxs(p.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",p.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:a,submitDisabled:!n.trim(),children:p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(zt,{htmlFor:"clone-url",className:"text-right",children:"URL"}),p.jsx(Un,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:a})]}),p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(zt,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),p.jsx(Un,{id:"clone-branch",value:i,onChange:c=>s(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:a})]})]})}),drt=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:i,isCommitting:s,onSubmitCommit:a})=>p.jsx(ede,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:p.jsxs(p.Fragment,{children:["Enter a commit message for the changes in ",p.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:a,isSubmitting:s,submitDisabled:!r.trim(),children:p.jsx("div",{className:"grid gap-4",children:p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(zt,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),p.jsx(Un,{id:"commit-msg",value:r,onChange:o=>i(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:s})]})})});var cA="DropdownMenu",[frt,dft]=Vs(cA,[aA]),oo=aA(),[hrt,tde]=frt(cA),nde=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=oo(t),c=T.useRef(null),[u,d]=Sc({prop:i,defaultProp:s??!1,onChange:a,caller:cA});return p.jsx(hrt,{scope:t,triggerId:na(),triggerRef:c,contentId:na(),open:u,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:o,children:p.jsx(Nue,{...l,open:u,onOpenChange:d,dir:r,modal:o,children:n})})};nde.displayName=cA;var rde="DropdownMenuTrigger",ide=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,s=tde(rde,n),a=oo(n);return p.jsx(Mue,{asChild:!0,...a,children:p.jsx(sr.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:el(t,s.triggerRef),onPointerDown:Wt(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(s.onOpenToggle(),s.open||o.preventDefault())}),onKeyDown:Wt(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&s.onOpenToggle(),o.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});ide.displayName=rde;var prt="DropdownMenuPortal",sde=e=>{const{__scopeDropdownMenu:t,...n}=e,r=oo(t);return p.jsx(Iue,{...r,...n})};sde.displayName=prt;var ade="DropdownMenuContent",ode=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=tde(ade,n),s=oo(n),a=T.useRef(!1);return p.jsx(jue,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:t,onCloseAutoFocus:Wt(e.onCloseAutoFocus,o=>{var l;a.current||(l=i.triggerRef.current)==null||l.focus(),a.current=!1,o.preventDefault()}),onInteractOutside:Wt(e.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ode.displayName=ade;var mrt="DropdownMenuGroup",grt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(Oue,{...i,...r,ref:t})});grt.displayName=mrt;var yrt="DropdownMenuLabel",brt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(Pue,{...i,...r,ref:t})});brt.displayName=yrt;var vrt="DropdownMenuItem",lde=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(Due,{...i,...r,ref:t})});lde.displayName=vrt;var xrt="DropdownMenuCheckboxItem",wrt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(Fue,{...i,...r,ref:t})});wrt.displayName=xrt;var _rt="DropdownMenuRadioGroup",Srt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(Lue,{...i,...r,ref:t})});Srt.displayName=_rt;var Crt="DropdownMenuRadioItem",krt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(Bue,{...i,...r,ref:t})});krt.displayName=Crt;var Ert="DropdownMenuItemIndicator",Trt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx($ue,{...i,...r,ref:t})});Trt.displayName=Ert;var Art="DropdownMenuSeparator",cde=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(zue,{...i,...r,ref:t})});cde.displayName=Art;var Rrt="DropdownMenuArrow",Nrt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(Uue,{...i,...r,ref:t})});Nrt.displayName=Rrt;var Mrt="DropdownMenuSubTrigger",Irt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(que,{...i,...r,ref:t})});Irt.displayName=Mrt;var jrt="DropdownMenuSubContent",Ort=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=oo(n);return p.jsx(Vue,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ort.displayName=jrt;var Prt=nde,Drt=ide,Frt=sde,Lrt=ode,Brt=lde,$rt=cde;function zrt({...e}){return p.jsx(Prt,{"data-slot":"dropdown-menu",...e})}function Urt({...e}){return p.jsx(Drt,{"data-slot":"dropdown-menu-trigger",...e})}function qrt({className:e,sideOffset:t=4,...n}){return p.jsx(Frt,{children:p.jsx(Lrt,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Ye("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Gc({className:e,inset:t,variant:n="default",...r}){return p.jsx(Brt,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Ye("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function hW({className:e,...t}){return p.jsx($rt,{"data-slot":"dropdown-menu-separator",className:Ye("bg-border -mx-1 my-1 h-px",e),...t})}const Vrt=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:i,selectedFileIds:s,isOperationLoading:a,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:u,handleRename:d,cancelCreatingFolder:h,handleCreateFolder:m,handleDownload:y,handleDelete:b,setNewName:v,setNewFolderName:x,renameInputRef:w,newFolderInputRef:S,gitRepoStatus:C,handleGitInit:k,handleGitPull:A,handleGitCommit:R,handleGitPush:N,handleGitStatus:I})=>{const O=L=>{L.key==="Enter"?d():L.key==="Escape"&&u()};return a&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:"Loading..."}):p.jsxs("div",{className:"p-2 space-y-1",children:[r&&p.jsx("div",{className:"border rounded-md p-2 bg-muted/30",children:p.jsx(Qce,{newFolderName:i,setNewFolderName:x,handleCreateFolder:m,cancelCreatingFolder:h,newFolderInputRef:S,isOperationLoading:a,isMobile:!0})}),e.map(L=>{const P=t===L.path,V=s.has(L.id),F=C[L.path]??!1,J=L.type==="folder",U=J?F?hH:nh:fH,G=J?F?"text-green-400":"text-yellow-400":"text-blue-400";return p.jsxs("div",{className:Ye("flex items-center justify-between p-2 border rounded-md",P&&"bg-muted ring-1 ring-primary",a&&"opacity-70 cursor-not-allowed",!P&&"hover:bg-muted/50",!P&&"cursor-pointer"),onClick:()=>{P||a||(J?o(L):l(!V,L.id))},children:[p.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[!J&&p.jsx(Vl,{checked:V,onCheckedChange:$=>l(!!$,L.id),"aria-label":`Select ${L.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground flex-shrink-0",disabled:a,onClick:$=>$.stopPropagation()}),J&&p.jsx("div",{className:"w-6 flex-shrink-0"}),p.jsx(U,{className:Ye("h-5 w-5 flex-shrink-0",G)}),p.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[P?p.jsx(Un,{ref:w,value:n,onChange:$=>v($.target.value),onBlur:d,onKeyDown:O,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:$=>$.stopPropagation(),disabled:a}):p.jsx("span",{className:"text-sm font-medium truncate",title:L.name,children:L.name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:L.type==="file"&&L.size!==void 0?Wx(L.size):L.type==="folder"?F?"Git Repository":"Folder":""})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 ml-2",children:P?p.jsxs(p.Fragment,{children:[p.jsx(St,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-600",onClick:$=>{$.stopPropagation(),d()},disabled:a||!n.trim(),"aria-label":"Save name",children:a?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(Qa,{className:"h-4 w-4"})}),p.jsx(St,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:$=>{$.stopPropagation(),u()},disabled:a,"aria-label":"Cancel edit",children:p.jsx(va,{className:"h-4 w-4"})})]}):p.jsxs(zrt,{children:[p.jsx(Urt,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:$=>$.stopPropagation(),disabled:a,"aria-label":"More actions",children:p.jsx(Eme,{className:"h-4 w-4"})})}),p.jsxs(qrt,{align:"end",onClick:$=>$.stopPropagation(),children:[J&&p.jsx(Gc,{onSelect:()=>o(L),children:"Open Folder"}),!J&&p.jsxs(Gc,{onSelect:()=>l(!V,L.id),children:[V?"Deselect":"Select"," File"]}),p.jsxs(Gc,{onSelect:()=>c(L),children:[p.jsx(nx,{className:"mr-2 h-4 w-4"})," Rename"]}),p.jsxs(Gc,{onSelect:()=>y(L),children:[p.jsx(fu,{className:"mr-2 h-4 w-4"})," Download"," ",J?"as ZIP":""]}),J&&p.jsx(hW,{}),J&&F&&p.jsxs(p.Fragment,{children:[p.jsxs(Gc,{onSelect:()=>A(L.path),children:[p.jsx(gH,{className:"mr-2 h-4 w-4"})," Git Pull"]}),p.jsxs(Gc,{onSelect:()=>R(L.path),children:[p.jsx(mH,{className:"mr-2 h-4 w-4"})," Git Commit..."]}),p.jsxs(Gc,{onSelect:()=>N(L.path),children:[p.jsx(BO,{className:"mr-2 h-4 w-4"})," Git Push"]}),p.jsxs(Gc,{onSelect:()=>I(L.path),children:[p.jsx(zO,{className:"mr-2 h-4 w-4"})," Git Status"]})]}),J&&!F&&p.jsxs(Gc,{onSelect:()=>k(L.path),children:[p.jsx(xc,{className:"mr-2 h-4 w-4"})," Initialize Git Repo"]}),p.jsx(hW,{}),p.jsxs(Gc,{className:"text-red-600 focus:text-red-600",onSelect:()=>b(L),children:[p.jsx(So,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},L.id)}),e.length===0&&!r&&!a&&p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Folder is empty"})]})},Y5=T.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:i,error:s,rootId:a,selectedFileIds:o,vfsKey:l,configuredVfsKey:c,initializingKey:u}=Ki(Sn(_e=>({nodes:_e.nodes,childrenMap:_e.childrenMap,currentParentId:_e.currentParentId,selectedFileIds:_e.selectedFileIds,loading:_e.loading,operationLoading:_e.operationLoading,error:_e.error,rootId:_e.rootId,vfsKey:_e.vfsKey,configuredVfsKey:_e.configuredVfsKey,initializingKey:_e.initializingKey}))),[d,h]=T.useState(""),[m,y]=T.useState(null),[b,v]=T.useState(!1),[x,w]=T.useState(""),[S,C]=T.useState({}),[k,A]=T.useState(!1),[R,N]=T.useState(""),[I,O]=T.useState(""),[L,P]=T.useState(!1),[V,F]=T.useState(!1),[J,U]=T.useState(null),[G,$]=T.useState(""),[ne,W]=T.useState(!1),[te,ee]=T.useState({}),re=T.useRef(null),de=T.useRef(null),oe=T.useRef(null),Ie=T.useRef(null),je=T.useRef(null),Me=n?e[n]:null,Se=Me?Me.path:"/",Qe=(t[n||a||""]||[]).map(_e=>e[_e]).filter(_e=>!!_e).sort((_e,ze)=>_e.type==="folder"&&ze.type==="file"?-1:_e.type==="file"&&ze.type==="folder"?1:_e.name.localeCompare(ze.name)),We=T.useMemo(()=>Qe.filter(_e=>_e.type==="folder").map(_e=>_e.path),[Qe]),Re=r||u!==null||l!==c,K=i||L||ne||Object.values(te).some(Boolean);T.useEffect(()=>{n!==null&&!t[n]&&!Re&&c===l?Fe.emit(dn.fetchNodesRequest,{parentId:n}):n===null&&a&&!t[a]&&!Re&&c===l&&Fe.emit(dn.fetchNodesRequest,{parentId:a})},[n,t,a,Re,c,l]),T.useEffect(()=>{var _e,ze;m&&((_e=Ie.current)==null||_e.focus(),(ze=Ie.current)==null||ze.select())},[m]),T.useEffect(()=>{var _e;b&&((_e=je.current)==null||_e.focus())},[b]),T.useEffect(()=>{(async()=>{if(Re||We.length===0)return;const ze={};let kt=!1;for(const he of We)try{const Y=await hAe(he);S[he]!==Y&&(ze[he]=Y,kt=!0)}catch(Y){console.error(`Error checking git status for ${he}:`,Y),S[he]!==!1&&(ze[he]=!1,kt=!0)}kt&&C(he=>({...he,...ze}))})()},[We,Re,S]);const ge=T.useCallback(async(_e,ze,kt)=>{if(!(K||Re)){kt!==!1&&Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{Fe.emit(_e,ze)}catch(he){console.error("[FileManager Operation Error]:",he),Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:i,error:he instanceof Error?he.message:String(he)})}finally{kt!==!1&&Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:!1,error:s})}}},[K,Re,r,i,s]),Te=T.useCallback(_e=>{K||Re||m||_e.type==="folder"&&ge(dn.setCurrentPathRequest,{path:_e.path},!1)},[K,Re,m,ge]),ce=T.useCallback(()=>{if(K||Re||Se==="/")return;const _e=qE(Se);ge(dn.setCurrentPathRequest,{path:_e},!1)},[K,Re,Se,ge]),le=T.useCallback(()=>{K||Re||Se==="/"||ge(dn.setCurrentPathRequest,{path:"/"},!1)},[K,Re,Se,ge]),ie=T.useCallback(()=>{Re||ge(dn.fetchNodesRequest,{parentId:n},!1)},[ge,n,Re]),Ee=T.useCallback((_e,ze)=>{const kt=e[ze];kt&&kt.type==="file"?_e?Fe.emit(dn.selectFileRequest,{fileId:ze}):Fe.emit(dn.deselectFileRequest,{fileId:ze}):kt&&kt.type==="folder"&&Pe.info("Folders cannot be attached to the prompt.")},[e]),Be=T.useCallback(_e=>{K||Re||b||(y(_e.path),h(_e.name),v(!1))},[K,Re,b]),Ce=T.useCallback(()=>{y(null),h("")},[]),ct=T.useCallback(async()=>{if(!m||!d.trim()){Ce();return}const _e=Object.values(e).find(ze=>ze.path===m);_e&&_e.name!==d.trim()&&await ge(dn.renameNodeRequest,{id:_e.id,newName:d.trim()}),Ce()},[m,d,e,Ce,ge]),Tt=T.useCallback(()=>{K||Re||m||(v(!0),w(""),y(null))},[K,Re,m]),ft=T.useCallback(()=>{v(!1),w("")},[]),Pt=T.useCallback(async()=>{if(!x.trim()){ft();return}await ge(dn.createDirectoryRequest,{parentId:n,name:x.trim()}),ft()},[x,n,ft,ge]),Ut=()=>{var _e;return(_e=re.current)==null?void 0:_e.click()},Bt=()=>{var _e;return(_e=de.current)==null?void 0:_e.click()},tn=()=>{var _e;return(_e=oe.current)==null?void 0:_e.click()},xe=T.useCallback(async _e=>{const ze=_e.target.files;ze&&ze.length>0&&(await ge(dn.uploadFilesRequest,{parentId:n,files:ze}),_e.target&&(_e.target.value=""))},[n,ge]),D=T.useCallback(async _e=>{var kt;const ze=(kt=_e.target.files)==null?void 0:kt[0];if(ze){Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{await gAe(ze,Se),Fe.emit(dn.fetchNodesRequest,{parentId:n})}catch(he){console.error("Archive upload error:",he)}finally{Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:!1,error:s}),_e.target&&(_e.target.value="")}}},[Se,n,r,s]),Z=T.useCallback(async _e=>{window.confirm(`Delete ${_e.type} "${_e.name}"?${_e.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await ge(dn.deleteNodesRequest,{ids:[_e.id]})},[ge]),me=T.useCallback(async _e=>{Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{_e.type==="file"?await mAe(_e.path):await Rz(`${_e.name}.zip`,_e.path)}catch(ze){console.error("Download error:",ze)}finally{Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:!1,error:s})}},[r,s]),De=T.useCallback(async()=>{if(Qe.length!==0){Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{const _e=fs(Se)||"root";await Rz(`${_e}_export.zip`,Se)}catch(_e){console.error("Download all error:",_e)}finally{Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:!1,error:s})}}},[Se,Qe.length,r,s]),we=T.useCallback(async(_e,ze)=>{if(!(te[_e]||Re||i)){ee(kt=>({...kt,[_e]:!0})),Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:i,error:null});try{await ze()}catch(kt){console.error(`[FileManager Git Op Error @ ${_e}]:`,kt)}finally{ee(kt=>({...kt,[_e]:!1}))}}},[te,Re,i,r]),Ne=T.useCallback(_e=>{we(_e,async()=>{await QZ(_e),C(ze=>({...ze,[_e]:!0}))})},[we]),fe=T.useCallback(_e=>{Pe.info("Pulling default branch (auth not implemented yet)..."),we(_e,()=>YE(_e,"main"))},[we]),bt=T.useCallback(_e=>{U(_e),$(""),F(!0)},[]),ot=T.useCallback(_e=>{Pe.info("Pushing default branch (auth not implemented yet)..."),we(_e,()=>fD(_e,"main"))},[we]),B=T.useCallback(_e=>{we(_e,()=>eX(_e))},[we]),$e=T.useCallback(()=>{N(""),O(""),A(!0)},[]),it=T.useCallback(async()=>{if(!R.trim()){Pe.error("Repository URL cannot be empty.");return}P(!0),Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:i,error:null});try{const _e=fs(R.trim().replace(/\.git$/,""))||"cloned_repo",ze=Nj(Se,_e);await JZ(ze,R.trim(),I.trim()||void 0),A(!1),Fe.emit(dn.fetchNodesRequest,{parentId:n})}catch{}finally{P(!1)}},[R,I,Se,n,r,i]),ye=T.useCallback(async()=>{if(!J||!G.trim()){Pe.error("Commit message cannot be empty.");return}W(!0),Fe.emit(dn.loadingStateChanged,{isLoading:r,operationLoading:i,error:null});try{await dD(J,G.trim()),F(!1)}catch{}finally{W(!1)}},[J,G,r,i]);return Re?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[p.jsx(Qn,{className:"h-8 w-8 animate-spin mb-2"}),p.jsx("p",{children:u?`Initializing filesystem: ${u}`:"Loading filesystem..."}),s&&p.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",s]})]}):s&&!Re?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[p.jsxs("p",{children:["Error loading filesystem: ",s]}),p.jsx(St,{variant:"outline",size:"sm",onClick:()=>Fe.emit(dn.initializeVFSRequest,{vfsKey:l||"default_fallback_key"}),className:"mt-2",children:"Retry"})]}):p.jsxs("div",{className:Ye("flex h-full flex-col bg-card text-card-foreground"),children:[p.jsx(crt,{currentPath:Se,isAnyLoading:K||Re,isOperationLoading:i,entries:Qe,editingPath:m,creatingFolder:b,handleNavigateHome:le,handleNavigateUp:ce,handleRefresh:ie,startCreatingFolder:Tt,handleUploadClick:Ut,handleFolderUploadClick:Bt,handleArchiveUploadClick:tn,handleDownloadAll:De,handleCloneClick:$e,fileInputRef:re,folderInputRef:de,archiveInputRef:oe,handleFileChange:xe,handleArchiveChange:D}),p.jsx("div",{className:"flex-grow overflow-auto hidden md:block",children:p.jsx(lrt,{entries:Qe,editingPath:m,newName:d,creatingFolder:b,newFolderName:x,selectedFileIds:o,isOperationLoading:K,handleNavigate:Te,handleCheckboxChange:Ee,startEditing:Be,cancelEditing:Ce,handleRename:ct,cancelCreatingFolder:ft,handleCreateFolder:Pt,handleDownload:me,handleDelete:Z,setNewName:h,setNewFolderName:w,renameInputRef:Ie,newFolderInputRef:je,gitRepoStatus:S,handleGitInit:Ne,handleGitPull:fe,handleGitCommit:bt,handleGitPush:ot,handleGitStatus:B})}),p.jsx("div",{className:"flex-grow overflow-auto block md:hidden",children:p.jsx(Vrt,{entries:Qe,editingPath:m,newName:d,creatingFolder:b,newFolderName:x,selectedFileIds:o,isOperationLoading:K,handleNavigate:Te,handleCheckboxChange:Ee,startEditing:Be,cancelEditing:Ce,handleRename:ct,cancelCreatingFolder:ft,handleCreateFolder:Pt,handleDownload:me,handleDelete:Z,setNewName:h,setNewFolderName:w,renameInputRef:Ie,newFolderInputRef:je,gitRepoStatus:S,handleGitInit:Ne,handleGitPull:fe,handleGitCommit:bt,handleGitPush:ot,handleGitStatus:B})}),p.jsx(urt,{isOpen:k,onOpenChange:A,cloneRepoUrl:R,setCloneRepoUrl:N,cloneBranch:I,setCloneBranch:O,isCloning:L,onSubmitClone:it,currentPath:Se}),p.jsx(drt,{isOpen:V,onOpenChange:F,commitPath:J,commitMessage:G,setCommitMessage:$,isCommitting:ne,onSubmitCommit:ye})]})});Y5.displayName="FileManager";const Wrt=({vfsKey:e,selectedItemType:t})=>e==="orphan"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(EB,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Shared VFS:"})," All chats ",p.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(EB,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(nh,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,Hrt=({module:e,isOpen:t,onClose:n})=>{const[r,i]=T.useState(e.getSelectedFileIdsCount()),[s,a]=T.useState(null);T.useEffect(()=>{const u=h=>{i(h.selectedFileIds.length)},d=h=>{a(h.itemType)};return Fe.on(dn.selectionChanged,u),Fe.on(Yn.selectedItemChanged,d),()=>{Fe.off(dn.selectionChanged,u),Fe.off(Yn.selectedItemChanged,d)}},[]);const o=Ki.getState().vfsKey,l=()=>{const u=Ki.getState().selectedFileIds,d=e.getVfsNodes();if(u.size===0){Pe.info("No files selected in VFS to attach.");return}let h=0;u.forEach(m=>{const y=d[m];y&&y.type==="file"&&(Fe.emit(Ol.addAttachedFileRequest,{source:"vfs",name:y.name,type:y.mimeType||"application/octet-stream",size:y.size,path:y.path}),h++)}),h>0?(Pe.success(`Attached ${h} file(s) from VFS to the next prompt.`),e.clearVfsSelection(),n()):Pe.warning("No valid files were selected to attach.")},c=()=>{e.clearVfsSelection(),n()};return p.jsx(Bm,{open:t,onOpenChange:u=>!u&&c(),children:p.jsxs($m,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[p.jsxs(zm,{className:"p-4 pb-2 border-b flex-shrink-0",children:[p.jsx(Um,{children:"Virtual Filesystem"}),p.jsx(rb,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),p.jsx(Wrt,{vfsKey:o,selectedItemType:s})]}),p.jsx("div",{className:"flex-grow overflow-hidden",children:p.jsx(Y5,{})}),p.jsxs(nb,{className:"p-4 pt-2 border-t flex-shrink-0",children:[p.jsx(St,{variant:"outline",onClick:c,children:"Close"}),p.jsxs(St,{onClick:l,disabled:r===0,children:[p.jsx(rE,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r,")"]})]})]})})};class Grt{constructor(){ve(this,"id","core-vfs");ve(this,"modalId","core-vfs-modal-panel");ve(this,"unregisterCallbacks",[]);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"notifyTriggerUpdate",null);ve(this,"isModalOpenByManager",!1);ve(this,"getEnableVfs",()=>Ki.getState().enableVfs);ve(this,"getIsVfsModalOpen",()=>this.isModalOpenByManager);ve(this,"getSelectedFileIdsCount",()=>Ki.getState().selectedFileIds.size);ve(this,"toggleVfsModal",()=>{var t,n;this.isModalOpenByManager?(t=this.modApiRef)==null||t.emit(Nr.closeModalRequest,{modalId:this.modalId}):(n=this.modApiRef)==null||n.emit(Nr.openModalRequest,{modalId:this.modalId})});ve(this,"clearVfsSelection",()=>{var t;(t=this.modApiRef)==null||t.emit(dn.clearSelectionRequest,void 0)});ve(this,"getVfsNodes",()=>Ki.getState().nodes);ve(this,"setNotifyTriggerUpdate",t=>{this.notifyTriggerUpdate=t})}async initialize(t){this.modApiRef=t,this.updateVfsKeyBasedOnContext();const n=t.on(Nr.contextChanged,()=>{var i;this.updateVfsKeyBasedOnContext(),(i=this.notifyTriggerUpdate)==null||i.call(this)}),r=t.on(Nr.modalStateChanged,i=>{var s;if(i.modalId===this.modalId){const a=i.isOpen;this.isModalOpenByManager!==a&&(this.isModalOpenByManager=a,(s=this.notifyTriggerUpdate)==null||s.call(this),a&&this.updateVfsKeyBasedOnContext())}});this.eventUnsubscribers.push(n,r)}updateVfsKeyBasedOnContext(){var s;const{selectedItemId:t,selectedItemType:n}=zn.getState(),r=Ki.getState().vfsKey;let i=null;if(this.isModalOpenByManager)if(n==="project")i=t;else if(n==="conversation"){const a=zn.getState().getConversationById(t);i=(a==null?void 0:a.projectId)??"orphan"}else i="orphan";else if(n==="project")i=t;else if(n==="conversation"){const a=zn.getState().getConversationById(t);i=(a==null?void 0:a.projectId)??"orphan"}else i="orphan";r!==i&&(console.log(`[${this.id}] Updating VFS key from "${r}" to "${i}"`),(s=this.modApiRef)==null||s.emit(dn.setVfsKeyRequest,{key:i}))}register(t){if(this.modApiRef=t,this.unregisterCallbacks.length>0){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=t.registerPromptControl({id:"core-vfs-prompt-trigger",triggerRenderer:()=>Ve.createElement(Wtt,{module:this})});this.unregisterCallbacks.push(n);const r=t.registerModalProvider(this.modalId,i=>Ve.createElement(Hrt,{module:this,...i}));this.unregisterCallbacks.push(r)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallbacks.forEach(t=>t()),this.unregisterCallbacks=[],this.notifyTriggerUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Krt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.selectedItemId,r=e.selectedItemType,i=e.syncRepos,s=e.conversationSyncStatus,a=e.isStreaming,[o,l]=T.useState(null),[c,u]=T.useState("idle"),[d,h]=T.useState(!1),[m,y]=T.useState(!1);T.useEffect(()=>{if(r==="conversation"&&n){const A=e.getConversationById(n);l((A==null?void 0:A.syncRepoId)??null),u(s[n]??"idle")}else l(null),u("idle")},[n,r,s,e]);const b=Ve.useMemo(()=>new Map(i.map(A=>[A.id,A.name])),[i]),v=o?b.get(o):void 0,x=T.useCallback(async A=>{if(!n||r!=="conversation")return;h(!0);const R=A==="none"?null:A;await e.linkConversationToRepo(n,R),h(!1)},[n,r,e]),w=T.useCallback(async()=>{!n||!o||(y(!0),await e.syncConversation(n),y(!1))},[n,o,e]),S=Zle(c,v),C=!o||m||d||a||c==="syncing";return r==="conversation"&&i.length>0?p.jsxs(ul,{children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(dl,{asChild:!0,children:p.jsx(St,{variant:o?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:a||d||m,"aria-label":"Configure Git Sync",children:c==="syncing"||m||d?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(xc,{className:"h-4 w-4"})})})}),p.jsx(_r,{side:"top",children:o?`Sync Status: ${c}`:"Link to Sync Repo"})]})}),p.jsxs(fl,{className:"w-64 p-4 space-y-3",align:"start",children:[p.jsx(zt,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),p.jsxs(Pm,{value:o??"none",onValueChange:x,disabled:d||m||a,children:[p.jsx(Fm,{id:"sync-repo-select",className:"w-full h-9",children:p.jsx(Dm,{placeholder:"Select repository..."})}),p.jsxs(Lm,{children:[p.jsx(Xo,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),i.map(A=>p.jsx(Xo,{value:A.id,children:A.name},A.id))]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",S||"Not Linked"]}),p.jsxs(St,{size:"sm",variant:"outline",onClick:w,disabled:C,className:"h-8",children:[m||c==="syncing"?p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(BO,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]}):null},Qv=({title:e,description:t,children:n,className:r,titleClassName:i,descriptionClassName:s,contentClassName:a})=>p.jsxs("div",{className:Ye("space-y-2",r),children:[p.jsxs("div",{children:[p.jsx("h3",{className:Ye("text-lg font-medium",i),children:e}),t&&p.jsx("p",{className:Ye("text-sm text-muted-foreground",s),children:t})]}),p.jsx("div",{className:Ye(a),children:n})]}),Yrt=Je({gitUserName:Ue().min(1,"User name cannot be empty."),gitUserEmail:Ue().email("Invalid email address.")});function pW({field:e}){return p.jsx(p.Fragment,{children:e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive mt-1 block",children:e.state.meta.errors.map(t=>typeof t=="string"?t:typeof t=="object"&&t!==null&&"message"in t&&typeof t.message=="string"?t.message:(console.warn("FieldMetaMessages encountered an unexpected error object:",t),"Invalid input")).join(", ")}):null})}const Zrt=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=gr(Sn(s=>({gitUserName:s.gitUserName,setGitUserName:s.setGitUserName,gitUserEmail:s.gitUserEmail,setGitUserEmail:s.setGitUserEmail}))),i=Ns({defaultValues:{gitUserName:e??"",gitUserEmail:n??""},validators:{onChange:Yrt},onSubmit:async({value:s})=>{try{t(s.gitUserName),r(s.gitUserEmail),Pe.success("Git user configuration updated!")}catch(a){Pe.error("Failed to update Git configuration."),console.error("Error submitting Git config form:",a)}}});return T.useEffect(()=>{i.reset({gitUserName:e??"",gitUserEmail:n??""})},[e,n,i]),p.jsx("div",{className:"space-y-4 p-1",children:p.jsx(Qv,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card",children:p.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),i.handleSubmit()},className:"space-y-3",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsx(i.Field,{name:"gitUserName",children:s=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:s.name,children:"Git User Name"}),p.jsx(Un,{id:s.name,value:s.state.value,onBlur:s.handleBlur,onChange:a=>s.handleChange(a.target.value),placeholder:"Your Name",className:s.state.meta.errors.length?"border-destructive":""}),p.jsx(pW,{field:s})]})}),p.jsx(i.Field,{name:"gitUserEmail",children:s=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:s.name,children:"Git User Email"}),p.jsx(Un,{id:s.name,type:"email",value:s.state.value,onBlur:s.handleBlur,onChange:a=>s.handleChange(a.target.value),placeholder:"your.email@example.com",className:s.state.meta.errors.length?"border-destructive":""}),p.jsx(pW,{field:s})]})})]}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(i.Subscribe,{selector:s=>[s.canSubmit,s.isSubmitting,s.isValidating,s.isValid],children:([s,a,o,l])=>p.jsx(St,{type:"submit",size:"sm",disabled:!s||a||o||!l,children:a?"Saving...":o?"Validating...":"Save Git Config"})})})]})})})},Xrt=Ve.memo(Zrt),Jrt=OO("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ude({className:e,variant:t,...n}){return p.jsx("div",{"data-slot":"alert",role:"alert",className:Ye(Jrt({variant:t}),e),...n})}function dde({className:e,...t}){return p.jsx("div",{"data-slot":"alert-title",className:Ye("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function fde({className:e,...t}){return p.jsx("div",{"data-slot":"alert-description",className:Ye("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}var Qrt="Separator",mW="horizontal",eit=["horizontal","vertical"],hde=T.forwardRef((e,t)=>{const{decorative:n,orientation:r=mW,...i}=e,s=tit(r)?r:mW,o=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return p.jsx(sr.div,{"data-orientation":s,...o,...i,ref:t})});hde.displayName=Qrt;function tit(e){return eit.includes(e)}var nit=hde;function qd({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return p.jsx(nit,{"data-slot":"separator-root",decorative:n,orientation:t,className:Ye("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const rit=({onSyncAll:e,onSyncPending:t,onInitializeRepos:n,onAbortSync:r,isRunning:i=!1,totalRepos:s,totalConversations:a,pendingConversations:o})=>{const[l,c]=T.useState(null),[u,d]=T.useState(!1);T.useEffect(()=>{const S=R=>{R&&R.progress&&(c(R.progress),d(!0))},C=R=>{R&&R.progress&&c(R.progress)},k=R=>{R&&R.progress&&(c(R.progress),setTimeout(()=>{c(null),d(!1)},2e3))},A=R=>{R&&R.progress&&(c(R.progress),setTimeout(()=>{c(null),d(!1)},5e3))};return Fe.on(li.bulkSyncStarted,S),Fe.on(li.bulkSyncProgress,C),Fe.on(li.bulkSyncCompleted,k),Fe.on(li.bulkSyncFailed,A),()=>{Fe.off(li.bulkSyncStarted,S),Fe.off(li.bulkSyncProgress,C),Fe.off(li.bulkSyncCompleted,k),Fe.off(li.bulkSyncFailed,A)}},[]);const h=i||u,m=l?l.completedRepos/Math.max(l.totalRepos,1)*100:0,y=l?l.completedConversations/Math.max(l.totalConversations,1)*100:0,b=async()=>{d(!0);try{await e()}catch(S){console.error("Sync all failed:",S),d(!1)}},v=async()=>{d(!0);try{await t()}catch(S){console.error("Sync pending failed:",S),d(!1)}},x=async()=>{d(!0);try{await n()}catch(S){console.error("Initialize repos failed:",S),d(!1)}},w=async()=>{try{await r()}catch(S){console.error("Abort sync failed:",S)}};return p.jsxs(DT,{className:"w-full",children:[p.jsxs(FT,{className:"pb-3",children:[p.jsxs(LT,{className:"flex items-center gap-2",children:[p.jsx(xc,{className:"h-5 w-5"}),"Bulk Git Sync"]}),p.jsx($6,{children:"Manage synchronization across all repositories and conversations"})]}),p.jsxs(BT,{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-medium text-lg",children:s}),p.jsx("div",{className:"text-muted-foreground",children:"Repositories"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-medium text-lg",children:a}),p.jsx("div",{className:"text-muted-foreground",children:"Total Conversations"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:Ye("font-medium text-lg",o>0?"text-orange-600":"text-green-600"),children:o}),p.jsx("div",{className:"text-muted-foreground",children:"Pending Sync"})]})]}),p.jsx(qd,{}),l&&p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"font-medium",children:"Current Operation"}),p.jsx(As,{variant:l.errors.length>0?"destructive":"default",children:l.errors.length>0?"Errors":"Running"})]}),p.jsx("div",{className:"text-sm text-muted-foreground bg-muted p-2 rounded",children:l.currentOperation}),l.totalRepos>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{children:"Repository Progress"}),p.jsxs("span",{children:[l.completedRepos,"/",l.totalRepos]})]}),p.jsx(gy,{value:m,className:"h-2"})]}),l.totalConversations>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{children:"Conversation Progress"}),p.jsxs("span",{children:[l.completedConversations,"/",l.totalConversations]})]}),p.jsx(gy,{value:y,className:"h-2"})]}),l.errors.length>0&&p.jsxs("div",{className:"mt-2",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive mb-2",children:[p.jsx(vc,{className:"h-4 w-4"}),l.errors.length," Error",l.errors.length!==1?"s":""]}),p.jsxs("div",{className:"max-h-24 overflow-y-auto space-y-1",children:[l.errors.slice(0,5).map((S,C)=>p.jsxs("div",{className:"text-xs text-muted-foreground bg-destructive/10 p-2 rounded",children:[p.jsxs("span",{className:"font-medium",children:[S.type,":"]})," ",S.error]},C)),l.errors.length>5&&p.jsxs("div",{className:"text-xs text-muted-foreground",children:["...and ",l.errors.length-5," more errors"]})]})]})]}),p.jsx(qd,{}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(br,{children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsxs(St,{onClick:x,disabled:h||s===0,variant:"outline",size:"sm",className:"w-full",children:[p.jsx(fu,{className:"h-4 w-4 mr-1"}),"Clone Repos"]})}),p.jsx(_r,{children:"Initialize/clone all configured repositories"})]})}),p.jsx(br,{children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsxs(St,{onClick:v,disabled:h||o===0,variant:"outline",size:"sm",className:"w-full",children:[p.jsx(xH,{className:"h-4 w-4 mr-1"}),"Sync Pending"]})}),p.jsx(_r,{children:"Sync only conversations that need syncing"})]})}),p.jsx(br,{children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsxs(St,{onClick:b,disabled:h||s===0&&a===0,size:"sm",className:"w-full",children:[p.jsx(Kp,{className:Ye("h-4 w-4 mr-1",h&&"animate-spin")}),"Sync All"]})}),p.jsx(_r,{children:"Sync all repositories and conversations"})]})}),p.jsxs(St,{onClick:w,disabled:!h,variant:"destructive",size:"sm",className:"w-full",children:[p.jsx(lme,{className:"h-4 w-4 mr-1"}),"Stop"]})]})]})]})},iit=Je({name:Ue().min(1,"Repository Name is required."),remoteUrl:Ue().min(1,"Remote URL is required.").url("Invalid URL format (e.g., https://github.com/user/repo.git)"),branch:Ue().min(1,"Branch name is required (e.g., main)."),username:Ue().nullable().optional(),password:Ue().nullable().optional()}),s2={name:"",remoteUrl:"",branch:"main",username:null,password:null},sit=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,repoInitializationStatus:r,isLoading:i}=zn(Sn(C=>({syncRepos:C.syncRepos,addSyncRepo:C.addSyncRepo,updateSyncRepo:C.updateSyncRepo,repoInitializationStatus:C.repoInitializationStatus,isLoading:C.isLoading}))),{autoSyncOnStreamComplete:s,setAutoSyncOnStreamComplete:a}=gr(Sn(C=>({autoSyncOnStreamComplete:C.autoSyncOnStreamComplete,setAutoSyncOnStreamComplete:C.setAutoSyncOnStreamComplete}))),[o,l]=T.useState(!1),[c,u]=T.useState(null),[d,h]=T.useState({});T.useEffect(()=>{const C=k=>{k&&k.action==="deleted"&&k.repoId&&h(A=>({...A,[k.repoId]:!1}))};return Fe.on(li.repoChanged,C),()=>Fe.off(li.repoChanged,C)},[]);const m=Ns({defaultValues:s2,validators:{onChangeAsync:iit,onChangeAsyncDebounceMs:500},onSubmit:async({value:C})=>{var k,A,R,N;if(!((k=C.name)!=null&&k.trim())||!((A=C.remoteUrl)!=null&&A.trim())){Pe.error("Repository Name and Remote URL are required.");return}try{const I={name:C.name.trim(),remoteUrl:C.remoteUrl.trim(),branch:((R=C.branch)==null?void 0:R.trim())||"main",username:((N=C.username)==null?void 0:N.trim())||null,password:C.password||null};c?await n(c,I):await t(I),y()}catch(I){console.error("Failed to save sync repo:",I)}}}),y=T.useCallback(()=>{m.reset(s2),l(!1),u(null)},[m]);T.useEffect(()=>{if(c){const C=e.find(k=>k.id===c);C?(m.reset({name:C.name,remoteUrl:C.remoteUrl,branch:C.branch||"main",username:C.username??null,password:C.password??null}),l(!1)):y()}else o||m.reset(s2)},[c,e,m,o,y]);const b=C=>{u(C.id),l(!1)},v=T.useCallback((C,k)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${k}"? This will unlink it from any conversations and remove the local copy.`)){h(A=>({...A,[C]:!0}));try{Fe.emit(Yn.deleteSyncRepoRequest,{id:C}),c===C&&y()}catch(A){console.error("Failed to delete sync repo:",A),h(R=>({...R,[C]:!1}))}}},[c,y]),x=T.useCallback(C=>{Fe.emit(Yn.initializeOrSyncRepoRequest,{repoId:C})},[]),w=()=>{u(null),m.reset(s2),l(!0)},S=()=>p.jsxs("form",{onSubmit:C=>{C.preventDefault(),C.stopPropagation(),m.handleSubmit()},className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:c?"Edit Sync Repository":"Add New Sync Repository"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx(m.Field,{name:"name",children:C=>p.jsxs("div",{className:"sm:col-span-1 space-y-1.5",children:[p.jsx(zt,{htmlFor:C.name,children:"Name"}),p.jsx(Un,{id:C.name,value:C.state.value??"",onChange:k=>C.handleChange(k.target.value),onBlur:C.handleBlur,placeholder:"e.g., My Backup",disabled:m.state.isSubmitting}),p.jsx(Ts,{field:C})]})}),p.jsx(m.Field,{name:"remoteUrl",children:C=>p.jsxs("div",{className:"sm:col-span-2 space-y-1.5",children:[p.jsx(zt,{htmlFor:C.name,children:"Remote URL (HTTPS)"}),p.jsx(Un,{id:C.name,type:"url",value:C.state.value??"",onChange:k=>C.handleChange(k.target.value),onBlur:C.handleBlur,placeholder:"https://github.com/user/repo.git",disabled:m.state.isSubmitting}),p.jsx(Ts,{field:C})]})}),p.jsx(m.Field,{name:"branch",children:C=>p.jsxs("div",{className:"sm:col-span-1 space-y-1.5",children:[p.jsx(zt,{htmlFor:C.name,children:"Branch"}),p.jsx(Un,{id:C.name,value:C.state.value??"",onChange:k=>C.handleChange(k.target.value),onBlur:C.handleBlur,placeholder:"main",disabled:m.state.isSubmitting}),p.jsx(Ts,{field:C})]})})]}),p.jsxs("div",{className:"pt-2",children:[p.jsx(zt,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),p.jsxs(ude,{variant:"destructive",className:"mt-2 mb-3",children:[p.jsx(qO,{className:"h-4 w-4"}),p.jsx(dde,{children:"Security Warning"}),p.jsx(fde,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsx(m.Field,{name:"username",children:C=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:C.name,children:"Username"}),p.jsx(Un,{id:C.name,value:C.state.value??"",onChange:k=>C.handleChange(k.target.value),onBlur:C.handleBlur,placeholder:"Git Username (Optional)",disabled:m.state.isSubmitting,autoComplete:"off"}),p.jsx(Ts,{field:C})]})}),p.jsx(m.Field,{name:"password",children:C=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:C.name,children:"Password / Token"}),p.jsx(Un,{id:C.name,type:"password",value:C.state.value??"",onChange:k=>C.handleChange(k.target.value),onBlur:C.handleBlur,placeholder:"Password or PAT (Optional)",disabled:m.state.isSubmitting,autoComplete:"new-password"}),p.jsx(Ts,{field:C})]})})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(St,{variant:"ghost",size:"sm",onClick:y,disabled:m.state.isSubmitting,type:"button",children:[p.jsx(va,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(m.Subscribe,{selector:C=>[C.canSubmit,C.isSubmitting,C.isValidating,C.isValid],children:([C,k,A,R])=>p.jsxs(St,{variant:"secondary",size:"sm",type:"submit",disabled:k||!C||!R||A,children:[(k||A)&&p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",k||A?"Saving...":"Save Repository"]})})]})]});return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-card",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx(zt,{htmlFor:"auto-sync-toggle",className:"text-sm font-medium",children:"Auto-sync after stream completion"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically sync conversations with linked repositories when a message stream completes"})]}),p.jsx(bc,{id:"auto-sync-toggle",checked:s,onCheckedChange:a})]}),p.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-card",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx(zt,{htmlFor:"auto-init-repos-toggle",className:"text-sm font-medium",children:"Auto-initialize repositories on startup"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically clone/initialize configured repositories when the app starts (off by default)"})]}),p.jsx(bc,{id:"auto-init-repos-toggle",checked:gr(C=>C.autoInitializeReposOnStartup),onCheckedChange:gr.getState().setAutoInitializeReposOnStartup})]})]}),e.length>0&&p.jsx(rit,{onSyncAll:async()=>{await zn.getState().syncAllConversations()},onSyncPending:async()=>{await zn.getState().syncPendingConversations()},onInitializeRepos:async()=>{await zn.getState().initializeAllRepositories()},onAbortSync:async()=>{const{BulkSyncService:C}=await Kr(async()=>{const{BulkSyncService:k}=await Promise.resolve().then(()=>C0);return{BulkSyncService:k}},void 0);C.abort()},totalRepos:e.length,totalConversations:zn.getState().conversations.filter(C=>C.syncRepoId).length,pendingConversations:zn.getState().conversations.filter(C=>{const k=zn.getState().conversationSyncStatus[C.id];return C.syncRepoId&&k==="needs-sync"}).length})]}),!o&&!c&&p.jsxs(St,{onClick:w,variant:"outline",className:"w-full mb-4",disabled:i,children:[p.jsx(mm,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||c)&&S(),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),i&&!o&&!c?p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ur,{className:"h-10 w-full"}),p.jsx(Ur,{className:"h-10 w-full"}),p.jsx(Ur,{className:"h-10 w-full"})]}):e.length===0&&!o&&!c?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):p.jsx("div",{className:"border rounded-md overflow-x-auto",children:p.jsxs(Vh,{children:[p.jsx(qm,{children:p.jsxs(Ii,{children:[p.jsx(Hr,{children:"Name"}),p.jsx(Hr,{className:"hidden md:table-cell",children:"Remote URL"}),p.jsx(Hr,{className:"hidden lg:table-cell",children:"Branch"}),p.jsx(Hr,{className:"hidden lg:table-cell",children:"Auth"}),p.jsx(Hr,{className:"text-right",children:"Actions"})]})}),p.jsx(Wh,{children:e.map(C=>{const k=d[C.id],A=c===C.id,R=!!C.username||!!C.password,N=r[C.id]||"idle",I=N==="syncing",O=k||m.state.isSubmitting||!!c||I;let L=null,P="Initialize/Sync Repository";return N==="syncing"?(L=p.jsx(Qn,{className:"h-4 w-4 animate-spin mr-1"}),P="Initializing/Syncing..."):N==="idle"?(L=p.jsx(tE,{className:"h-4 w-4 text-green-500 mr-1"}),P="Sync Successful / Ready"):N==="error"?(L=p.jsx(vc,{className:"h-4 w-4 text-destructive mr-1"}),P="Sync Failed"):L=p.jsx(Kp,{className:"h-4 w-4 mr-1"}),p.jsxs(Ii,{className:Ye(A?"bg-muted/50":"",O&&!A?"opacity-70":""),children:[p.jsx(Kn,{className:"font-medium truncate max-w-[100px] sm:max-w-xs",children:C.name}),p.jsx(Kn,{className:"text-xs truncate max-w-[100px] sm:max-w-xs hidden md:table-cell",children:C.remoteUrl}),p.jsx(Kn,{className:"hidden lg:table-cell",children:C.branch||"main"}),p.jsx(Kn,{className:"text-xs hidden lg:table-cell",children:R?"Configured":"None"}),p.jsxs(Kn,{className:"text-right space-x-1",children:[p.jsx(In,{tooltipText:P,onClick:()=>x(C.id),"aria-label":`Initialize or Sync repo ${C.name}`,disabled:O,icon:L,variant:"outline",className:"h-8 w-8"}),p.jsx(In,{tooltipText:"Edit",onClick:()=>b(C),"aria-label":`Edit repo ${C.name}`,disabled:O,icon:p.jsx(Gw,{}),className:"h-8 w-8"}),p.jsx(In,{tooltipText:"Delete",onClick:()=>v(C.id,C.name),"aria-label":`Delete repo ${C.name}`,disabled:O,icon:k?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(So,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},C.id)})})]})})]})]})},ait=Ve.memo(sit),oit=()=>{const e=T.useMemo(()=>[{value:"config",label:"User Config",content:p.jsx(Xrt,{})},{value:"sync",label:"Sync Repositories",content:p.jsx(ait,{})}],[]);return p.jsx(Pu,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},lit=Ve.memo(oit);class cit{constructor(){ve(this,"id","core-git-sync");ve(this,"unregisterPromptControlCallback",null);ve(this,"unregisterSettingsTabCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"selectedItemId",null);ve(this,"selectedItemType",null);ve(this,"syncRepos",[]);ve(this,"conversationSyncStatus",{});ve(this,"isStreaming",!1);ve(this,"autoSyncEnabled",!1);ve(this,"isBulkSyncing",!1);ve(this,"bulkSyncProgress",null);ve(this,"notifyComponentUpdate",null);ve(this,"linkConversationToRepo",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(Yn.linkConversationToRepoRequest,{conversationId:t,repoId:n})});ve(this,"syncConversation",t=>{var n;(n=this.modApiRef)==null||n.emit(Yn.syncConversationRequest,{conversationId:t})});ve(this,"getConversationById",t=>zn.getState().getConversationById(t));ve(this,"syncAllConversations",async()=>{await zn.getState().syncAllConversations()});ve(this,"syncPendingConversations",async()=>{await zn.getState().syncPendingConversations()});ve(this,"initializeAllRepositories",async()=>{await zn.getState().initializeAllRepositories()});ve(this,"abortBulkSync",async()=>{const{BulkSyncService:t}=await Kr(async()=>{const{BulkSyncService:n}=await Promise.resolve().then(()=>C0);return{BulkSyncService:n}},void 0);t.abort()});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.loadInitialState();const n=t.on(Nr.contextChanged,m=>{var y;this.selectedItemId=m.selectedItemId,this.selectedItemType=m.selectedItemType,(y=this.notifyComponentUpdate)==null||y.call(this)}),r=t.on(li.repoChanged,()=>{var m;this.syncRepos=zn.getState().syncRepos,(m=this.notifyComponentUpdate)==null||m.call(this)}),i=t.on(Yn.conversationSyncStatusChanged,m=>{var y;typeof m=="object"&&m&&"conversationId"in m&&"status"in m&&(this.conversationSyncStatus={...this.conversationSyncStatus,[m.conversationId]:m.status},(y=this.notifyComponentUpdate)==null||y.call(this))}),s=t.on(Zn.statusChanged,m=>{var y;typeof m=="object"&&m&&"status"in m&&(this.isStreaming=m.status==="streaming",(y=this.notifyComponentUpdate)==null||y.call(this))}),a=t.on(Zn.completed,async m=>{typeof m=="object"&&m&&"interactionId"in m&&"status"in m&&m.status==="COMPLETED"&&this.autoSyncEnabled&&await this.handleAutoSync()}),o=t.on(sn.autoSyncOnStreamCompleteChanged,m=>{var y;typeof m=="object"&&m&&"enabled"in m&&(this.autoSyncEnabled=m.enabled,(y=this.notifyComponentUpdate)==null||y.call(this))}),l=t.on(li.bulkSyncStarted,m=>{var y;typeof m=="object"&&m&&"progress"in m&&(this.isBulkSyncing=!0,this.bulkSyncProgress=m.progress,(y=this.notifyComponentUpdate)==null||y.call(this))}),c=t.on(li.bulkSyncProgress,m=>{var y;typeof m=="object"&&m&&"progress"in m&&(this.bulkSyncProgress=m.progress,(y=this.notifyComponentUpdate)==null||y.call(this))}),u=t.on(li.bulkSyncCompleted,m=>{var y;typeof m=="object"&&m&&"progress"in m&&(this.isBulkSyncing=!1,this.bulkSyncProgress=null,(y=this.notifyComponentUpdate)==null||y.call(this))}),d=t.on(li.bulkSyncFailed,m=>{var y;typeof m=="object"&&m&&"progress"in m&&(this.isBulkSyncing=!1,this.bulkSyncProgress=null,(y=this.notifyComponentUpdate)==null||y.call(this))}),h=t.on(Yn.conversationUpdated,m=>{var y;typeof m=="object"&&m&&"conversationId"in m&&"updates"in m&&m.conversationId===this.selectedItemId&&m.updates.syncRepoId!==void 0&&(this.loadInitialState(),(y=this.notifyComponentUpdate)==null||y.call(this))});this.eventUnsubscribers.push(n,r,i,s,a,o,l,c,u,d,h)}loadInitialState(){const t=zn.getState();this.selectedItemId=t.selectedItemId,this.selectedItemType=t.selectedItemType,this.syncRepos=t.syncRepos,this.conversationSyncStatus=t.conversationSyncStatus,this.isStreaming=Ln.getState().status==="streaming",this.autoSyncEnabled=gr.getState().autoSyncOnStreamComplete}async handleAutoSync(){if(!this.selectedItemId||this.selectedItemType!=="conversation")return;const t=this.getConversationById(this.selectedItemId);if(!(t!=null&&t.syncRepoId))return;const n=this.conversationSyncStatus[this.selectedItemId];if(!(n==="syncing"||n==="idle")){console.log(`[GitSyncControlModule] Auto-syncing conversation ${this.selectedItemId}`);try{await this.syncConversation(this.selectedItemId)}catch(r){console.error("[GitSyncControlModule] Auto-sync failed:",r)}}}register(t){this.modApiRef=t,this.unregisterPromptControlCallback||(this.unregisterPromptControlCallback=t.registerPromptControl({id:this.id,triggerRenderer:()=>Ve.createElement(Krt,{module:this})})),this.unregisterSettingsTabCallback||(this.unregisterSettingsTabCallback=t.registerSettingsTab({id:"git",title:"Git",component:lit,order:60}))}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterPromptControlCallback&&(this.unregisterPromptControlCallback(),this.unregisterPromptControlCallback=null),this.unregisterSettingsTabCallback&&(this.unregisterSettingsTabCallback(),this.unregisterSettingsTabCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const uit=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const{syncRepos:n,repoInitializationStatus:r}=zn(Sn(c=>({syncRepos:c.syncRepos,repoInitializationStatus:c.repoInitializationStatus}))),i=()=>{e.syncAllRepos()},s=c=>{e.syncRepo(c)},a=e.isSyncing,o=n.length>0,l=Object.values(r).some(c=>c==="syncing");return p.jsx(br,{delayDuration:100,children:p.jsxs(ul,{children:[p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(dl,{asChild:!0,children:p.jsx(St,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:!o,"aria-label":"Manual Git Sync",children:a||l?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(xc,{className:"h-4 w-4"})})})}),p.jsx(_r,{side:"top",children:o?"Manual Git Sync":"No sync repositories configured"})]}),p.jsx(fl,{className:"w-80 p-4",align:"start",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h4",{className:"font-semibold text-sm",children:"Git Sync Repositories"}),p.jsxs(St,{variant:"outline",size:"sm",onClick:i,disabled:!o||a||l,className:"h-8",children:[a||l?p.jsx(Qn,{className:"h-3 w-3 mr-1 animate-spin"}):p.jsx(Kp,{className:"h-3 w-3 mr-1"}),"Sync All"]})]}),o?p.jsx("div",{className:"space-y-2",children:n.map(c=>{const u=r[c.id]||"idle",d=u==="syncing";return p.jsxs("div",{className:Ye("flex items-center justify-between p-3 border rounded-lg","bg-card hover:bg-muted/50 transition-colors"),children:[p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm font-medium truncate",children:c.name}),p.jsx(As,{variant:u==="idle"?"secondary":u==="syncing"?"default":u==="error"?"destructive":"outline",className:"text-xs",children:u==="idle"?"Ready":u==="syncing"?"Syncing":u==="error"?"Error":"Unknown"})]}),p.jsx("p",{className:"text-xs text-muted-foreground truncate",children:c.branch||"main"})]}),p.jsx(St,{variant:"ghost",size:"sm",onClick:()=>s(c.id),disabled:d||a,className:"h-8 w-8 p-0",children:d?p.jsx(Qn,{className:"h-3 w-3 animate-spin"}):p.jsx(Kp,{className:"h-3 w-3"})})]},c.id)})}):p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured. Go to Settings  Git  Sync Repositories to add one."})]})})]})})};class dit{constructor(){ve(this,"id","core-manual-git-sync-sidebar");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"syncRepos",[]);ve(this,"repoInitializationStatus",{});ve(this,"isSyncing",!1);ve(this,"notifyComponentUpdate",null);ve(this,"syncAllRepos",async()=>{var t,n;if(!(this.isSyncing||this.syncRepos.length===0)){this.isSyncing=!0,(t=this.notifyComponentUpdate)==null||t.call(this);try{console.log("[ManualSyncSidebarControlModule] Starting bulk sync for all repositories and conversations");const{BulkSyncService:r}=await Kr(async()=>{const{BulkSyncService:i}=await Promise.resolve().then(()=>C0);return{BulkSyncService:i}},void 0);await r.syncAll({syncRepos:!0,syncConversations:!0,continueOnError:!0,maxConcurrent:3}),console.log("[ManualSyncSidebarControlModule] Completed bulk sync")}catch(r){console.error("[ManualSyncSidebarControlModule] Error in bulk sync:",r)}finally{this.isSyncing=!1,(n=this.notifyComponentUpdate)==null||n.call(this)}}});ve(this,"syncRepo",async t=>{var r;const n=this.syncRepos.find(i=>i.id===t);if(!n){console.warn(`[ManualSyncSidebarControlModule] Repository ${t} not found`);return}console.log(`[ManualSyncSidebarControlModule] Starting sync for repository: ${n.name}`),(r=this.modApiRef)==null||r.emit(Yn.initializeOrSyncRepoRequest,{repoId:t})});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.loadInitialState();const n=t.on(li.repoChanged,()=>{var s;this.syncRepos=zn.getState().syncRepos,(s=this.notifyComponentUpdate)==null||s.call(this)}),r=t.on(li.repoInitStatusChanged,s=>{var a;typeof s=="object"&&s&&"repoId"in s&&"status"in s&&(this.repoInitializationStatus={...this.repoInitializationStatus,[s.repoId]:s.status},(a=this.notifyComponentUpdate)==null||a.call(this))}),i=t.on(Yn.syncReposLoaded,()=>{var s;this.loadInitialState(),(s=this.notifyComponentUpdate)==null||s.call(this)});this.eventUnsubscribers.push(n,r,i)}loadInitialState(){const t=zn.getState();this.syncRepos=t.syncRepos,this.repoInitializationStatus=t.repoInitializationStatus}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=()=>Ve.createElement(uit,{module:this});this.unregisterCallback=t.registerChatControl({id:this.id,panel:"sidebar-footer",status:()=>"ready",renderer:n,iconRenderer:n,show:()=>!0})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const fit=Je({path:Ue().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),hit=Je({path:Ue().describe("The path of the file to read within the VFS."),encoding:cl(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),pit=Je({path:Ue().describe("The path where the file should be written."),content:Ue().describe("The content to write to the file."),encoding:cl(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),mit=Je({path:Ue().describe("The path of the file or directory to delete."),recursive:Cr().optional().default(!1).describe("Whether to delete directories recursively.")}),git=Je({path:Ue().describe("The path of the directory to create (including parents).")}),yit=Je({oldPath:Ue().describe("The current path of the item to rename."),newName:Ue().describe("The new name for the item.")});class bit{constructor(){ve(this,"id","core-vfs-tools");ve(this,"unregisterCallbacks",[])}async initialize(t){console.log(`[${this.id}] Initialized.`)}register(t){if(this.unregisterCallbacks.length>0){console.warn(`[${this.id}] Already registered. Skipping.`);return}console.log(`[${this.id}] Registering Core VFS Tools...`);const n={description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:fit};this.unregisterCallbacks.push(t.registerTool("vfsListFiles",n,async({path:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Lr(l||"/");try{const h=await hD(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(m=>({name:m.name,type:m.isDirectory?"folder":"file",size:m.size,lastModified:m.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}));const r={description:"Read the content of a file from the VFS.",parameters:hit};this.unregisterCallbacks.push(t.registerTool("vfsReadFile",r,async({path:l,encoding:c},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Lr(l);try{const m=await Ph(h,{fsInstance:d});let y;return c==="base64"?y=btoa(String.fromCharCode(...m)):y=new TextDecoder().decode(m),{success:!0,path:h,content:y,encoding:c}}catch(m){return{success:!1,path:h,error:m.message}}}));const i={description:"Write content to a file in the VFS.",parameters:pit};this.unregisterCallbacks.push(t.registerTool("vfsWriteFile",i,async({path:l,content:c,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=Lr(l);try{let y;if(u==="base64"){const b=atob(c),v=b.length,x=new Uint8Array(v);for(let w=0;w<v;w++)x[w]=b.charCodeAt(w);y=x}else y=c;return await ZE(m,y,{fsInstance:h}),{success:!0,path:m}}catch(y){return{success:!1,path:m,error:y.message}}}));const s={description:"Delete a file or directory from the VFS.",parameters:mit};this.unregisterCallbacks.push(t.registerTool("vfsDelete",s,async({path:l,recursive:c},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Lr(l);try{return await pD(h,c,{fsInstance:d}),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}));const a={description:"Create a directory (including parents) in the VFS.",parameters:git};this.unregisterCallbacks.push(t.registerTool("vfsCreateDirectory",a,async({path:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Lr(l);try{return await tX(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}));const o={description:"Rename a file or directory in the VFS.",parameters:yit};this.unregisterCallbacks.push(t.registerTool("vfsRename",o,async({oldPath:l,newName:c},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Lr(l),m=Lr(h.substring(0,h.lastIndexOf("/"))||"/"),y=ku(m,c);try{return await rX(h,y,{fsInstance:d}),{success:!0,oldPath:h,newPath:y}}catch(b){return{success:!1,oldPath:h,newName:c,error:b.message}}})),console.log(`[${this.id}] Core VFS Tools Registered.`)}destroy(){this.unregisterCallbacks.forEach(t=>t()),this.unregisterCallbacks=[],console.log(`[${this.id}] Destroyed.`)}}const vit=Je({path:Ue().describe("The directory path within the VFS to initialize as a Git repository.")}),xit=Je({path:Ue().describe("The directory path of the Git repository within the VFS to commit."),message:Ue().describe("The commit message.")}),wit=Je({path:Ue().describe("The directory path of the Git repository within the VFS to pull from."),branch:Ue().optional().describe("The branch name to pull.")}),_it=Je({path:Ue().describe("The directory path of the Git repository within the VFS to push."),branch:Ue().optional().describe("The branch name to push.")}),Sit=Je({path:Ue().describe("The directory path of the Git repository within the VFS to check status.")});class Cit{constructor(){ve(this,"id","core-git-tools");ve(this,"unregisterCallbacks",[])}async initialize(t){}register(t){if(this.unregisterCallbacks.length>0){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n={description:"Initialize an empty Git repository in a VFS directory.",parameters:vit};this.unregisterCallbacks.push(t.registerTool("gitInit",n,async({path:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};try{return await QZ(o,{fsInstance:c}),{success:!0,message:`Repository initialized at ${o}`}}catch(u){return{success:!1,error:u.message}}}));const r={description:"Stage all changes and commit them in a VFS Git repository.",parameters:xit};this.unregisterCallbacks.push(t.registerTool("gitCommit",r,async({path:o,message:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=gr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await dD(o,l,{fsInstance:u}),{success:!0,message:`Changes committed in ${o}`}}catch(h){return{success:!1,error:h.message}}}));const i={description:"Pull changes from the remote repository for the specified branch.",parameters:wit};this.unregisterCallbacks.push(t.registerTool("gitPull",i,async({path:o,branch:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await YE(o,l||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${o}`}}catch(d){return{success:!1,error:d.message}}}));const s={description:"Push committed changes from the local branch to the remote repository.",parameters:_it};this.unregisterCallbacks.push(t.registerTool("gitPush",s,async({path:o,branch:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await fD(o,l||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${o}`}}catch(d){return{success:!1,error:d.message}}}));const a={description:"Get the Git status for a VFS repository.",parameters:Sit};this.unregisterCallbacks.push(t.registerTool("gitStatus",a,async({path:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};try{return await eX(o,{fsInstance:c}),{success:!0,message:`Status checked for ${o}`}}catch(u){return{success:!1,error:u.message}}}))}destroy(){this.unregisterCallbacks.forEach(t=>t()),this.unregisterCallbacks=[],console.log(`[${this.id}] Destroyed.`)}}const pde=({module:e,popoverMaxSteps:t,setPopoverMaxSteps:n,className:r})=>{const i=e.getEnabledTools(),s=e.getSelectedItemId(),a=e.getSelectedItemType(),o=e.getGlobalDefaultMaxSteps(),l=ll(w=>w.tools),[c,u]=T.useState(""),d=T.useMemo(()=>Object.entries(l).map(([w,{definition:S,modId:C}])=>({name:w,description:S.description??"No description provided.",modId:C})).sort((w,S)=>w.name.localeCompare(S.name)),[l]),h=T.useMemo(()=>{const w=c.trim().toLowerCase();return w?d.filter(S=>S.name.toLowerCase().includes(w)||S.description.toLowerCase().includes(w)||S.modId.toLowerCase().includes(w)):d},[d,c]),m=T.useCallback((w,S)=>{e.setEnabledTools(C=>{const k=new Set(C);return S?k.add(w):k.delete(w),k})},[e]),y=T.useCallback(w=>{e.setEnabledTools(()=>w?new Set(d.map(S=>S.name)):new Set)},[d,e]),b=w=>{const S=w.target.value;if(S===""){n(null);return}const C=parseInt(S,10);if(isNaN(C))n(null);else{const k=Math.max(1,Math.min(20,C));n(k)}},v=t===null?"":String(t),x=a!=="conversation"||!s;return p.jsxs("div",{className:Ye("p-4 max-w-2xl space-y-3",r),children:[p.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),p.jsxs("div",{className:"relative",children:[p.jsx(Oa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Un,{type:"search",placeholder:"Filter tools...",value:c,onChange:w=>u(w.target.value),className:"pl-8 h-9",disabled:x})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs(zt,{className:"text-xs text-muted-foreground",children:[h.length," tools shown (",i.size," enabled)"]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx(St,{variant:"outline",size:"sm",onClick:()=>y(!0),disabled:x||d.length===0,children:"Enable All"}),p.jsx(St,{variant:"outline",size:"sm",onClick:()=>y(!1),disabled:x||d.length===0||i.size===0,children:"Disable All"})]})]}),p.jsx("div",{className:"border rounded-md p-2 bg-background/50",children:x?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):d.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(w=>p.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[p.jsx(bc,{id:`tool-switch-${w.name}`,checked:i.has(w.name),onCheckedChange:S=>m(w.name,S),className:"flex-shrink-0",disabled:x}),p.jsxs(zt,{htmlFor:`tool-switch-${w.name}`,className:Ye("text-sm font-normal flex-grow pl-2 space-y-0.5",x?"cursor-not-allowed":"cursor-pointer"),title:`${w.name} (from ${w.modId})`,children:[p.jsx("span",{className:"block font-medium",children:w.name}),p.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:w.description})]})]},w.name))})}),p.jsxs("div",{className:"pt-2",children:[p.jsx(zt,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),p.jsx(Un,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:v,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(o??5),disabled:x}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})},kit=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const[n,r]=T.useState(!1),[i,s]=T.useState(e.getMaxStepsOverride()),a=e.getEnabledTools(),o=e.getMaxStepsOverride(),l=e.getIsStreaming(),c=e.getIsVisible();T.useEffect(()=>{s(e.getMaxStepsOverride())},[e.getMaxStepsOverride()]);const u=m=>{r(m),!m&&i!==e.getMaxStepsOverride()&&e.setMaxStepsOverride(i)},d=a.size>0||o!==null,h=l;return c?p.jsxs(ul,{open:n,onOpenChange:u,children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(dl,{asChild:!0,children:p.jsx(St,{variant:d?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:h,"aria-label":"Configure Tools",children:p.jsx(Yp,{className:"h-4 w-4"})})})}),p.jsx(_r,{side:"top",children:`Tools (${a.size} enabled)`})]})}),p.jsx(fl,{className:"w-auto p-0",align:"start",children:p.jsx(pde,{module:e,popoverMaxSteps:i,setPopoverMaxSteps:s})})]}):null};class Eit{constructor(){ve(this,"id","core-tool-selector");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"transientEnabledTools",new Set);ve(this,"transientMaxStepsOverride",null);ve(this,"isStreaming",!1);ve(this,"isVisible",!0);ve(this,"selectedItemId",null);ve(this,"selectedItemType",null);ve(this,"allToolsCount",0);ve(this,"globalDefaultMaxSteps",5);ve(this,"notifyComponentUpdate",null);ve(this,"getEnabledTools",()=>this.transientEnabledTools);ve(this,"getMaxStepsOverride",()=>this.transientMaxStepsOverride);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"getIsVisible",()=>this.isVisible);ve(this,"getSelectedItemId",()=>this.selectedItemId);ve(this,"getSelectedItemType",()=>this.selectedItemType);ve(this,"getAllToolsCount",()=>this.allToolsCount);ve(this,"getGlobalDefaultMaxSteps",()=>this.globalDefaultMaxSteps);ve(this,"setEnabledTools",t=>{var n;this.transientEnabledTools=t(this.transientEnabledTools),(n=this.notifyComponentUpdate)==null||n.call(this)});ve(this,"setMaxStepsOverride",t=>{var n;this.transientMaxStepsOverride=t,(n=this.notifyComponentUpdate)==null||n.call(this)});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var o;this.loadInitialState(),this.updateVisibility(),(o=this.notifyComponentUpdate)==null||o.call(this);const n=t.on(Zn.statusChanged,l=>{var c;typeof l=="object"&&l&&"status"in l&&this.isStreaming!==(l.status==="streaming")&&(this.isStreaming=l.status==="streaming",(c=this.notifyComponentUpdate)==null||c.call(this))}),r=t.on(dr.selectedModelChanged,()=>{var l;this.updateVisibility(),(l=this.notifyComponentUpdate)==null||l.call(this)}),i=t.on(Nr.contextChanged,l=>{var c;this.selectedItemId=l.selectedItemId,this.selectedItemType=l.selectedItemType,this.updateVisibility(),(c=this.notifyComponentUpdate)==null||c.call(this)}),s=t.on(sn.toolMaxStepsChanged,l=>{var c;typeof l=="object"&&l&&"steps"in l&&(this.globalDefaultMaxSteps=l.steps,(c=this.notifyComponentUpdate)==null||c.call(this))}),a=t.on(Fr.toolsChanged,l=>{var c;if(l&&typeof l.tools=="object"){const u=Object.keys(l.tools).length;this.allToolsCount!==u&&(this.allToolsCount=u,this.updateVisibility(),(c=this.notifyComponentUpdate)==null||c.call(this))}});this.eventUnsubscribers.push(n,r,i,s,a)}loadInitialState(){this.isStreaming=Ln.getState().status==="streaming",this.selectedItemId=zn.getState().selectedItemId,this.selectedItemType=zn.getState().selectedItemType,this.allToolsCount=Object.keys(ll.getState().tools).length,this.globalDefaultMaxSteps=gr.getState().toolMaxSteps}updateVisibility(){var a,o;const{getSelectedModel:t}=Mr.getState(),n=t(),r=this.allToolsCount>0,i=((o=(a=n==null?void 0:n.metadata)==null?void 0:a.supported_parameters)==null?void 0:o.includes("tools"))??!1,s=r&&i;this.isVisible!==s&&(this.isVisible=s)}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,triggerRenderer:()=>Ve.createElement(kit,{module:this}),getMetadata:()=>{if(this.transientEnabledTools.size>0||this.transientMaxStepsOverride!==null)return{enabledTools:Array.from(this.transientEnabledTools),...this.transientMaxStepsOverride!==null&&{maxSteps:this.transientMaxStepsOverride}}},clearOnSubmit:()=>{var r;let n=!1;this.transientEnabledTools.size>0&&(this.transientEnabledTools=new Set,n=!0),this.transientMaxStepsOverride!==null&&(this.transientMaxStepsOverride=null,n=!0),n&&((r=this.notifyComponentUpdate)==null||r.call(this))}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}var gW=1,Tit=.9,Ait=.8,Rit=.17,E3=.1,T3=.999,Nit=.9999,Mit=.99,Iit=/[\\\/_+.#"@\[\(\{&]/,jit=/[\\\/_+.#"@\[\(\{&]/g,Oit=/[\s-]/,mde=/[\s-]/g;function EO(e,t,n,r,i,s,a){if(s===t.length)return i===e.length?gW:Mit;var o=`${i},${s}`;if(a[o]!==void 0)return a[o];for(var l=r.charAt(s),c=n.indexOf(l,i),u=0,d,h,m,y;c>=0;)d=EO(e,t,n,r,c+1,s+1,a),d>u&&(c===i?d*=gW:Iit.test(e.charAt(c-1))?(d*=Ait,m=e.slice(i,c-1).match(jit),m&&i>0&&(d*=Math.pow(T3,m.length))):Oit.test(e.charAt(c-1))?(d*=Tit,y=e.slice(i,c-1).match(mde),y&&i>0&&(d*=Math.pow(T3,y.length))):(d*=Rit,i>0&&(d*=Math.pow(T3,c-i))),e.charAt(c)!==t.charAt(s)&&(d*=Nit)),(d<E3&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(h=EO(e,t,n,r,c+1,s+2,a),h*E3>d&&(d=h*E3)),d>u&&(u=d),c=n.indexOf(l,c+1);return a[o]=u,u}function yW(e){return e.toLowerCase().replace(mde," ")}function Pit(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,EO(e,t,yW(e),yW(t),0,0,{})}var Fv='[cmdk-group=""]',A3='[cmdk-group-items=""]',Dit='[cmdk-group-heading=""]',gde='[cmdk-item=""]',bW=`${gde}:not([aria-disabled="true"])`,TO="cmdk-item-select",Qg="data-value",Fit=(e,t,n)=>Pit(e,t,n),yde=T.createContext(void 0),H1=()=>T.useContext(yde),bde=T.createContext(void 0),Z5=()=>T.useContext(bde),vde=T.createContext(void 0),xde=T.forwardRef((e,t)=>{let n=e0(()=>{var ee,re;return{search:"",value:(re=(ee=e.value)!=null?ee:e.defaultValue)!=null?re:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=e0(()=>new Set),i=e0(()=>new Map),s=e0(()=>new Map),a=e0(()=>new Set),o=wde(e),{label:l,children:c,value:u,onValueChange:d,filter:h,shouldFilter:m,loop:y,disablePointerSelection:b=!1,vimBindings:v=!0,...x}=e,w=na(),S=na(),C=na(),k=T.useRef(null),A=Kit();pm(()=>{if(u!==void 0){let ee=u.trim();n.current.value=ee,R.emit()}},[u]),pm(()=>{A(6,V)},[]);let R=T.useMemo(()=>({subscribe:ee=>(a.current.add(ee),()=>a.current.delete(ee)),snapshot:()=>n.current,setState:(ee,re,de)=>{var oe,Ie,je,Me;if(!Object.is(n.current[ee],re)){if(n.current[ee]=re,ee==="search")P(),O(),A(1,L);else if(ee==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Se=document.getElementById(C);Se?Se.focus():(oe=document.getElementById(w))==null||oe.focus()}if(A(7,()=>{var Se;n.current.selectedItemId=(Se=F())==null?void 0:Se.id,R.emit()}),de||A(5,V),((Ie=o.current)==null?void 0:Ie.value)!==void 0){let Se=re??"";(Me=(je=o.current).onValueChange)==null||Me.call(je,Se);return}}R.emit()}},emit:()=>{a.current.forEach(ee=>ee())}}),[]),N=T.useMemo(()=>({value:(ee,re,de)=>{var oe;re!==((oe=s.current.get(ee))==null?void 0:oe.value)&&(s.current.set(ee,{value:re,keywords:de}),n.current.filtered.items.set(ee,I(re,de)),A(2,()=>{O(),R.emit()}))},item:(ee,re)=>(r.current.add(ee),re&&(i.current.has(re)?i.current.get(re).add(ee):i.current.set(re,new Set([ee]))),A(3,()=>{P(),O(),n.current.value||L(),R.emit()}),()=>{s.current.delete(ee),r.current.delete(ee),n.current.filtered.items.delete(ee);let de=F();A(4,()=>{P(),(de==null?void 0:de.getAttribute("id"))===ee&&L(),R.emit()})}),group:ee=>(i.current.has(ee)||i.current.set(ee,new Set),()=>{s.current.delete(ee),i.current.delete(ee)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:w,inputId:C,labelId:S,listInnerRef:k}),[]);function I(ee,re){var de,oe;let Ie=(oe=(de=o.current)==null?void 0:de.filter)!=null?oe:Fit;return ee?Ie(ee,n.current.search,re):0}function O(){if(!n.current.search||o.current.shouldFilter===!1)return;let ee=n.current.filtered.items,re=[];n.current.filtered.groups.forEach(oe=>{let Ie=i.current.get(oe),je=0;Ie.forEach(Me=>{let Se=ee.get(Me);je=Math.max(Se,je)}),re.push([oe,je])});let de=k.current;J().sort((oe,Ie)=>{var je,Me;let Se=oe.getAttribute("id"),qe=Ie.getAttribute("id");return((je=ee.get(qe))!=null?je:0)-((Me=ee.get(Se))!=null?Me:0)}).forEach(oe=>{let Ie=oe.closest(A3);Ie?Ie.appendChild(oe.parentElement===Ie?oe:oe.closest(`${A3} > *`)):de.appendChild(oe.parentElement===de?oe:oe.closest(`${A3} > *`))}),re.sort((oe,Ie)=>Ie[1]-oe[1]).forEach(oe=>{var Ie;let je=(Ie=k.current)==null?void 0:Ie.querySelector(`${Fv}[${Qg}="${encodeURIComponent(oe[0])}"]`);je==null||je.parentElement.appendChild(je)})}function L(){let ee=J().find(de=>de.getAttribute("aria-disabled")!=="true"),re=ee==null?void 0:ee.getAttribute(Qg);R.setState("value",re||void 0)}function P(){var ee,re,de,oe;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Ie=0;for(let je of r.current){let Me=(re=(ee=s.current.get(je))==null?void 0:ee.value)!=null?re:"",Se=(oe=(de=s.current.get(je))==null?void 0:de.keywords)!=null?oe:[],qe=I(Me,Se);n.current.filtered.items.set(je,qe),qe>0&&Ie++}for(let[je,Me]of i.current)for(let Se of Me)if(n.current.filtered.items.get(Se)>0){n.current.filtered.groups.add(je);break}n.current.filtered.count=Ie}function V(){var ee,re,de;let oe=F();oe&&(((ee=oe.parentElement)==null?void 0:ee.firstChild)===oe&&((de=(re=oe.closest(Fv))==null?void 0:re.querySelector(Dit))==null||de.scrollIntoView({block:"nearest"})),oe.scrollIntoView({block:"nearest"}))}function F(){var ee;return(ee=k.current)==null?void 0:ee.querySelector(`${gde}[aria-selected="true"]`)}function J(){var ee;return Array.from(((ee=k.current)==null?void 0:ee.querySelectorAll(bW))||[])}function U(ee){let re=J()[ee];re&&R.setState("value",re.getAttribute(Qg))}function G(ee){var re;let de=F(),oe=J(),Ie=oe.findIndex(Me=>Me===de),je=oe[Ie+ee];(re=o.current)!=null&&re.loop&&(je=Ie+ee<0?oe[oe.length-1]:Ie+ee===oe.length?oe[0]:oe[Ie+ee]),je&&R.setState("value",je.getAttribute(Qg))}function $(ee){let re=F(),de=re==null?void 0:re.closest(Fv),oe;for(;de&&!oe;)de=ee>0?Hit(de,Fv):Git(de,Fv),oe=de==null?void 0:de.querySelector(bW);oe?R.setState("value",oe.getAttribute(Qg)):G(ee)}let ne=()=>U(J().length-1),W=ee=>{ee.preventDefault(),ee.metaKey?ne():ee.altKey?$(1):G(1)},te=ee=>{ee.preventDefault(),ee.metaKey?U(0):ee.altKey?$(-1):G(-1)};return T.createElement(sr.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:ee=>{var re;(re=x.onKeyDown)==null||re.call(x,ee);let de=ee.nativeEvent.isComposing||ee.keyCode===229;if(!(ee.defaultPrevented||de))switch(ee.key){case"n":case"j":{v&&ee.ctrlKey&&W(ee);break}case"ArrowDown":{W(ee);break}case"p":case"k":{v&&ee.ctrlKey&&te(ee);break}case"ArrowUp":{te(ee);break}case"Home":{ee.preventDefault(),U(0);break}case"End":{ee.preventDefault(),ne();break}case"Enter":{ee.preventDefault();let oe=F();if(oe){let Ie=new Event(TO);oe.dispatchEvent(Ie)}}}}},T.createElement("label",{"cmdk-label":"",htmlFor:N.inputId,id:N.labelId,style:Zit},l),uA(e,ee=>T.createElement(bde.Provider,{value:R},T.createElement(yde.Provider,{value:N},ee))))}),Lit=T.forwardRef((e,t)=>{var n,r;let i=na(),s=T.useRef(null),a=T.useContext(vde),o=H1(),l=wde(e),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:a==null?void 0:a.forceMount;pm(()=>{if(!c)return o.item(i,a==null?void 0:a.id)},[c]);let u=_de(i,s,[e.value,e.children,s],e.keywords),d=Z5(),h=Ch(A=>A.value&&A.value===u.current),m=Ch(A=>c||o.filter()===!1?!0:A.search?A.filtered.items.get(i)>0:!0);T.useEffect(()=>{let A=s.current;if(!(!A||e.disabled))return A.addEventListener(TO,y),()=>A.removeEventListener(TO,y)},[m,e.onSelect,e.disabled]);function y(){var A,R;b(),(R=(A=l.current).onSelect)==null||R.call(A,u.current)}function b(){d.setState("value",u.current,!0)}if(!m)return null;let{disabled:v,value:x,onSelect:w,forceMount:S,keywords:C,...k}=e;return T.createElement(sr.div,{ref:el(s,t),...k,id:i,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!h,"data-disabled":!!v,"data-selected":!!h,onPointerMove:v||o.getDisablePointerSelection()?void 0:b,onClick:v?void 0:y},e.children)}),Bit=T.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...s}=e,a=na(),o=T.useRef(null),l=T.useRef(null),c=na(),u=H1(),d=Ch(m=>i||u.filter()===!1?!0:m.search?m.filtered.groups.has(a):!0);pm(()=>u.group(a),[]),_de(a,o,[e.value,e.heading,l]);let h=T.useMemo(()=>({id:a,forceMount:i}),[i]);return T.createElement(sr.div,{ref:el(o,t),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&T.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),uA(e,m=>T.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},T.createElement(vde.Provider,{value:h},m))))}),$it=T.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=T.useRef(null),s=Ch(a=>!a.search);return!n&&!s?null:T.createElement(sr.div,{ref:el(i,t),...r,"cmdk-separator":"",role:"separator"})}),zit=T.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,s=Z5(),a=Ch(c=>c.search),o=Ch(c=>c.selectedItemId),l=H1();return T.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),T.createElement(sr.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:i?e.value:a,onChange:c=>{i||s.setState("search",c.target.value),n==null||n(c.target.value)}})}),Uit=T.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...i}=e,s=T.useRef(null),a=T.useRef(null),o=Ch(c=>c.selectedItemId),l=H1();return T.useEffect(()=>{if(a.current&&s.current){let c=a.current,u=s.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let m=c.offsetHeight;u.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(d),h.unobserve(c)}}},[]),T.createElement(sr.div,{ref:el(s,t),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},uA(e,c=>T.createElement("div",{ref:el(a,l.listInnerRef),"cmdk-list-sizer":""},c)))}),qit=T.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:a,...o}=e;return T.createElement(mce,{open:n,onOpenChange:r},T.createElement(gce,{container:a},T.createElement(yce,{"cmdk-overlay":"",className:i}),T.createElement(bce,{"aria-label":e.label,"cmdk-dialog":"",className:s},T.createElement(xde,{ref:t,...o}))))}),Vit=T.forwardRef((e,t)=>Ch(n=>n.filtered.count===0)?T.createElement(sr.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Wit=T.forwardRef((e,t)=>{let{progress:n,children:r,label:i="Loading...",...s}=e;return T.createElement(sr.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},uA(e,a=>T.createElement("div",{"aria-hidden":!0},a)))}),sb=Object.assign(xde,{List:Uit,Item:Lit,Input:zit,Group:Bit,Separator:$it,Dialog:qit,Empty:Vit,Loading:Wit});function Hit(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Git(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function wde(e){let t=T.useRef(e);return pm(()=>{t.current=e}),t}var pm=typeof window>"u"?T.useEffect:T.useLayoutEffect;function e0(e){let t=T.useRef();return t.current===void 0&&(t.current=e()),t}function Ch(e){let t=Z5(),n=()=>e(t.snapshot());return T.useSyncExternalStore(t.subscribe,n,n)}function _de(e,t,n,r=[]){let i=T.useRef(),s=H1();return pm(()=>{var a;let o=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():i.current}})(),l=r.map(c=>c.trim());s.value(e,o,l),(a=t.current)==null||a.setAttribute(Qg,o),i.current=o}),i}var Kit=()=>{let[e,t]=T.useState(),n=e0(()=>new Map);return pm(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,i)=>{n.current.set(r,i),t({})}};function Yit(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function uA({asChild:e,children:t},n){return e&&T.isValidElement(t)?T.cloneElement(Yit(t),{ref:t.ref},n(t.props.children)):n(t)}var Zit={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Sde({className:e,...t}){return p.jsx(sb,{"data-slot":"command",className:Ye("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function Cde({className:e,...t}){return p.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[p.jsx(Oa,{className:"size-4 shrink-0 opacity-50"}),p.jsx(sb.Input,{"data-slot":"command-input",className:Ye("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function kde({className:e,...t}){return p.jsx(sb.List,{"data-slot":"command-list",className:Ye("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function Ede({...e}){return p.jsx(sb.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function Tde({className:e,...t}){return p.jsx(sb.Group,{"data-slot":"command-group",className:Ye("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function Ade({className:e,...t}){return p.jsx(sb.Item,{"data-slot":"command-item",className:Ye("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const X5=({models:e,value:t,onChange:n,className:r,disabled:i,isLoading:s})=>{const[a,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1,imageGeneration:!1}),h=T.useMemo(()=>{let w=e;if(l.trim()){const C=l.toLowerCase();w=e.filter(k=>k.name.toLowerCase().includes(C)||k.providerName.toLowerCase().includes(C)||k.id.toLowerCase().includes(C))}const S=Object.entries(u).filter(([,C])=>C).map(([C])=>C);return S.length===0?w:w.filter(C=>{var N,I,O;const k=new Set(((N=C.metadataSummary)==null?void 0:N.supported_parameters)??[]),A=new Set(((I=C.metadataSummary)==null?void 0:I.input_modalities)??[]),R=new Set(((O=C.metadataSummary)==null?void 0:O.output_modalities)??[]);return S.every(L=>{switch(L){case"reasoning":return k.has("reasoning");case"webSearch":return k.has("web_search")||k.has("web_search_options");case"tools":return k.has("tools");case"multimodal":return Array.from(A).some(P=>P!=="text");case"imageGeneration":return R.has("image");default:return!0}})})},[e,l,u]),m=T.useMemo(()=>e.find(w=>w.id===t),[e,t]),y=T.useCallback(w=>{const S=w===t?null:w;n==null||n(S),o(!1),c("")},[t,n]),b=w=>{d(S=>({...S,[w]:!S[w]}))};if(s)return p.jsx(Ur,{className:Ye("h-9 w-[250px]",r)});const x=Object.values(u).filter(Boolean).length;return p.jsxs(ul,{open:a,onOpenChange:o,children:[p.jsx(dl,{asChild:!0,children:p.jsxs(St,{variant:"outline",role:"combobox","aria-expanded":a,disabled:i||e.length===0,className:Ye("w-auto justify-between h-9 text-sm font-normal relative",r),children:[p.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:m?`${m.name} (${m.providerName})`:"Select Model..."}),p.jsx(eE,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"}),x>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:x})]})}),p.jsx(fl,{className:"w-[--radix-popover-trigger-width] p-0",style:{maxHeight:"min(40vh, 400px)",overflow:"hidden"},children:p.jsxs(Sde,{shouldFilter:!1,children:[p.jsxs("div",{className:"flex items-center border-b px-3",children:[p.jsx(Oa,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(Cde,{placeholder:"Search model...",value:l,onValueChange:c,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[p.jsx(St,{variant:u.reasoning?"secondary":"ghost",size:"sm",className:Ye("h-7 w-7 p-0",u.reasoning&&"text-primary"),onClick:()=>b("reasoning"),title:"Filter: Reasoning","aria-label":"Filter by reasoning capability",children:p.jsx(vB,{className:"h-4 w-4"})}),p.jsx(St,{variant:u.webSearch?"secondary":"ghost",size:"sm",className:Ye("h-7 w-7 p-0",u.webSearch&&"text-primary"),onClick:()=>b("webSearch"),title:"Filter: Web Search","aria-label":"Filter by web search capability",children:p.jsx(wB,{className:"h-4 w-4"})}),p.jsx(St,{variant:u.tools?"secondary":"ghost",size:"sm",className:Ye("h-7 w-7 p-0",u.tools&&"text-primary"),onClick:()=>b("tools"),title:"Filter: Tools","aria-label":"Filter by tool usage capability",children:p.jsx(Yp,{className:"h-4 w-4"})}),p.jsx(St,{variant:u.multimodal?"secondary":"ghost",size:"sm",className:Ye("h-7 w-7 p-0",u.multimodal&&"text-primary"),onClick:()=>b("multimodal"),title:"Filter: Multimodal","aria-label":"Filter by multimodal capability",children:p.jsx(Gp,{className:"h-4 w-4"})}),p.jsx(St,{variant:u.imageGeneration?"secondary":"ghost",size:"sm",className:Ye("h-7 w-7 p-0",u.imageGeneration&&"text-primary"),onClick:()=>b("imageGeneration"),title:"Filter: Image Generation","aria-label":"Filter by image generation capability",children:p.jsx(z2,{className:"h-4 w-4"})})]})]}),p.jsxs(kde,{className:"max-h-[calc(min(40vh,400px)-70px)] overflow-y-auto",children:[p.jsx(Ede,{children:x>0?"No models match all active filters.":e.length===0?"No models available.":"No model found."}),p.jsx(Tde,{children:h.map(w=>{var S,C,k,A,R,N,I,O,L,P,V,F;return p.jsx(Ade,{value:w.id,onSelect:y,className:"flex items-center",children:p.jsxs("div",{className:"flex-1 truncate flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-medium",children:w.name}),p.jsx("div",{className:"text-xs text-muted-foreground",children:w.providerName})]}),p.jsxs("div",{className:"flex gap-1 ml-2",children:[((C=(S=w.metadataSummary)==null?void 0:S.supported_parameters)==null?void 0:C.includes("reasoning"))&&p.jsx(vB,{className:"h-3.5 w-3.5 text-purple-500"}),(((A=(k=w.metadataSummary)==null?void 0:k.supported_parameters)==null?void 0:A.includes("web_search"))||((N=(R=w.metadataSummary)==null?void 0:R.supported_parameters)==null?void 0:N.includes("web_search_options")))&&p.jsx(wB,{className:"h-3.5 w-3.5 text-blue-500"}),((O=(I=w.metadataSummary)==null?void 0:I.supported_parameters)==null?void 0:O.includes("tools"))&&p.jsx(Yp,{className:"h-3.5 w-3.5 text-orange-500"}),((P=(L=w.metadataSummary)==null?void 0:L.input_modalities)==null?void 0:P.some(J=>J!=="text"))&&p.jsx(Gp,{className:"h-3.5 w-3.5 text-green-500"}),((F=(V=w.metadataSummary)==null?void 0:V.output_modalities)==null?void 0:F.includes("image"))&&p.jsx(z2,{className:"h-3.5 w-3.5 text-pink-500"})]})]})},w.id)})})]})]})})]})},R3=Je({systemPrompt:Ue().nullable(),modelId:Ue().nullable()}),Xit=({initialSystemPrompt:e,initialModelId:t,onSave:n,effectiveSystemPrompt:r,effectiveModelId:i,isParentSaving:s=!1})=>{var u;const{getAvailableModelListItems:a}=Mr(Sn(d=>({getAvailableModelListItems:d.getAvailableModelListItems}))),o=a(),l=((u=o.find(d=>d.id===i))==null?void 0:u.name)||i,c=Ns({defaultValues:{systemPrompt:e??null,modelId:t??null},validators:{onChangeAsync:R3,onChangeAsyncDebounceMs:500},onSubmit:async({value:d})=>{await n({systemPrompt:d.systemPrompt,modelId:d.modelId})}});return T.useEffect(()=>{c.reset({systemPrompt:e??null,modelId:t??null})},[e,t,c]),p.jsxs("form",{onSubmit:d=>{d.preventDefault(),d.stopPropagation(),c.handleSubmit()},className:"space-y-6",children:[p.jsx(c.Field,{name:"systemPrompt",validators:{onChange:R3.shape.systemPrompt},children:d=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:`${d.name}-textarea`,children:"System Prompt (Overrides Parent/Global)"}),p.jsx(ql,{id:`${d.name}-textarea`,placeholder:`Inherited: ${(r==null?void 0:r.substring(0,100))||"Default"}${r&&r.length>100?"...":""}`,value:d.state.value??"",onChange:h=>d.handleChange(h.target.value),onBlur:d.handleBlur,rows:6,disabled:c.state.isSubmitting||s,className:"mt-1"}),p.jsx(Ts,{field:d}),p.jsx(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>c.setFieldValue("systemPrompt",null),disabled:c.state.isSubmitting||s||d.state.value===null,type:"button",children:"Use Inherited/Default"})]})}),p.jsx(c.Field,{name:"modelId",validators:{onChange:R3.shape.modelId},children:d=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{children:"Default Model (Overrides Parent/Global)"}),p.jsx(X5,{models:o,value:d.state.value,onChange:h=>{d.handleChange(h),d.handleBlur()},disabled:c.state.isSubmitting||s,className:"w-full mt-1"}),p.jsx(Ts,{field:d}),p.jsxs(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>c.setFieldValue("modelId",null),disabled:c.state.isSubmitting||s||d.state.value===null,type:"button",children:["Use Inherited/Default (",l||"Global Default",")"]})]})}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(c.Subscribe,{selector:d=>[d.canSubmit,d.isSubmitting,d.isValidating,d.isValid],children:([d,h,m,y])=>p.jsxs(St,{type:"submit",size:"sm",disabled:s||!d||h||m||!y,children:[(h||m)&&p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"}),h||m?"Saving...":"Save Prompt Settings"]})})})]})};function Kg({field:e}){return e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive pt-1 block",children:e.state.meta.errors.join(", ")}):null}const Jit=({form:e,isSaving:t,effectiveTemperature:n,effectiveMaxTokens:r,effectiveTopP:i,effectiveTopK:s,effectivePresencePenalty:a,effectiveFrequencyPenalty:o})=>p.jsxs("div",{className:"space-y-4",children:[p.jsx(e.Field,{name:"temperature",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(zt,{htmlFor:l.name,className:"text-xs",children:["Temperature (",(l.state.value??n??.7).toFixed(2),")"]}),p.jsx(f0,{id:l.name,min:0,max:1,step:.01,value:[l.state.value??n??.7],onValueChange:c=>l.handleChange(c[0]),onBlur:l.handleBlur,disabled:t}),p.jsxs(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:["Use Inherited/Default (",(n==null?void 0:n.toFixed(2))??"N/A",")"]}),p.jsx(Kg,{field:l})]})}),p.jsx(e.Field,{name:"topP",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(zt,{htmlFor:l.name,className:"text-xs",children:["Top P (",(l.state.value??i??1).toFixed(2),")"]}),p.jsx(f0,{id:l.name,min:0,max:1,step:.01,value:[l.state.value??i??1],onValueChange:c=>l.handleChange(c[0]),onBlur:l.handleBlur,disabled:t}),p.jsxs(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:["Use Inherited/Default (",(i==null?void 0:i.toFixed(2))??"N/A",")"]}),p.jsx(Kg,{field:l})]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsx(e.Field,{name:"maxTokens",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:l.name,className:"text-xs",children:"Max Tokens"}),p.jsx(Un,{id:l.name,type:"number",placeholder:`Inherited: ${r??"Default"}`,value:l.state.value??"",onChange:c=>l.handleChange(c.target.value===""?null:parseInt(c.target.value,10)),onBlur:l.handleBlur,min:"1",className:"h-8 text-xs",disabled:t}),p.jsx(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:"Use Inherited/Default"}),p.jsx(Kg,{field:l})]})}),p.jsx(e.Field,{name:"topK",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:l.name,className:"text-xs",children:"Top K"}),p.jsx(Un,{id:l.name,type:"number",placeholder:`Inherited: ${s??"Default"}`,value:l.state.value??"",onChange:c=>l.handleChange(c.target.value===""?null:parseInt(c.target.value,10)),onBlur:l.handleBlur,min:"1",className:"h-8 text-xs",disabled:t}),p.jsx(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:"Use Inherited/Default"}),p.jsx(Kg,{field:l})]})})]}),p.jsx(e.Field,{name:"presencePenalty",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(zt,{htmlFor:l.name,className:"text-xs",children:["Presence Penalty (",(l.state.value??a??0).toFixed(2),")"]}),p.jsx(f0,{id:l.name,min:-2,max:2,step:.01,value:[l.state.value??a??0],onValueChange:c=>l.handleChange(c[0]),onBlur:l.handleBlur,disabled:t}),p.jsxs(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:["Use Inherited/Default (",(a==null?void 0:a.toFixed(2))??"N/A",")"]}),p.jsx(Kg,{field:l})]})}),p.jsx(e.Field,{name:"frequencyPenalty",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(zt,{htmlFor:l.name,className:"text-xs",children:["Frequency Penalty (",(l.state.value??o??0).toFixed(2),")"]}),p.jsx(f0,{id:l.name,min:-2,max:2,step:.01,value:[l.state.value??o??0],onValueChange:c=>l.handleChange(c[0]),onBlur:l.handleBlur,disabled:t}),p.jsxs(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:["Use Inherited/Default (",(o==null?void 0:o.toFixed(2))??"N/A",")"]}),p.jsx(Kg,{field:l})]})})]}),vW=Je({syncRepoId:Ue().nullable()}),Qit=({initialSyncRepoId:e,onSave:t,effectiveSyncRepoId:n,syncRepos:r,isParentSaving:i=!1})=>{var o;const s=((o=r.find(l=>l.id===n))==null?void 0:o.name)??"None",a=Ns({defaultValues:{syncRepoId:e??null},validators:{onChangeAsync:vW,onChangeAsyncDebounceMs:500},onSubmit:async({value:l})=>{await t(l)}});return T.useEffect(()=>{a.reset({syncRepoId:e??null})},[e,a]),p.jsxs("form",{onSubmit:l=>{l.preventDefault(),l.stopPropagation(),a.handleSubmit()},className:"space-y-6",children:[p.jsx(a.Field,{name:"syncRepoId",validators:{onChange:vW.shape.syncRepoId},children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:l.name,children:"Sync Repository (Overrides Parent/Global)"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),p.jsxs(Pm,{value:l.state.value??"none",onValueChange:c=>{l.handleChange(c==="none"?null:c),l.handleBlur()},disabled:a.state.isSubmitting||i||r.length===0,children:[p.jsx(Fm,{id:l.name,children:p.jsx(Dm,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${s}`})}),p.jsxs(Lm,{children:[p.jsx(Xo,{value:"none",children:p.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",s,")"]})}),r.map(c=>p.jsx(Xo,{value:c.id,children:c.name},c.id))]})]}),p.jsx(Ts,{field:l}),p.jsx(St,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>a.setFieldValue("syncRepoId",null),disabled:a.state.isSubmitting||i||l.state.value===null,type:"button",children:"Use Inherited/Default"})]})}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(a.Subscribe,{selector:l=>[l.canSubmit,l.isSubmitting,l.isValidating,l.isValid],children:([l,c,u,d])=>p.jsxs(St,{type:"submit",size:"sm",disabled:i||!l||c||u||!d||r.length===0,children:[(c||u)&&p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"}),c||u?"Saving...":"Save Sync Settings"]})})})]})},est=({projectId:e})=>{const t=T.useMemo(()=>[{value:"manage",label:"Manage Files",content:p.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?p.jsx(Y5,{}):p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(zt,{children:"Project Filesystem Info"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),p.jsxs("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2 break-all",children:[" ",p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",p.jsx("code",{className:"text-xs",children:e||"N/A"})]})]})]}),p.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[p.jsx(zt,{className:"text-destructive",children:"Danger Zone"}),p.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."})]})]})}],[e]);return p.jsx(Pu,{tabs:t,defaultValue:"manage",className:"h-full flex flex-col",listClassName:Ye("bg-muted/50 rounded-md","flex-wrap justify-start h-auto","p-1 gap-1"),contentContainerClassName:"mt-3 flex-grow flex flex-col overflow-y-auto"})},tst=({allRules:e,selectedRuleIds:t,onSelectionChange:n,disabled:r=!1})=>{const[i,s]=T.useState(""),a=T.useMemo(()=>{const o=i.toLowerCase();return o?e.filter(l=>l.name.toLowerCase().includes(o)||l.content.toLowerCase().includes(o)||l.type.toLowerCase().includes(o)):e},[e,i]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Oa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Un,{type:"search",placeholder:"Filter rules...",value:i,onChange:o=>s(o.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(sl,{className:"h-48 border rounded-md p-2 bg-background/50",children:a.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No rules defined globally.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:a.map(o=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Vl,{id:`project-default-rule-${o.id}`,checked:t.has(o.id),onCheckedChange:l=>n(o.id,!!l),className:"mt-0.5",disabled:r}),p.jsxs(zt,{htmlFor:`project-default-rule-${o.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:o.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",o.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",o.content]})]})]})},o.id))})})]})},nst=({defaultRuleIds:e,setDefaultRuleIds:t,isSaving:n,allRules:r})=>{const i=T.useMemo(()=>new Set(e??[]),[e]),s=T.useCallback((a,o)=>{const l=new Set(i);o?l.add(a):l.delete(a);const c=Array.from(l);t(c.length>0?c:null)},[i,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx(zt,{children:"Default Rules for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select rules that will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(tst,{allRules:r,selectedRuleIds:i,onSelectionChange:s,disabled:n})]})},rst=({allTags:e,selectedTagIds:t,onSelectionChange:n,disabled:r=!1,getRulesForTag:i})=>{const[s,a]=T.useState(""),o=T.useMemo(()=>{const l=s.toLowerCase();return l?e.filter(c=>{var u;return c.name.toLowerCase().includes(l)||((u=c.description)==null?void 0:u.toLowerCase().includes(l))}):e},[e,s]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Oa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Un,{type:"search",placeholder:"Filter tags...",value:s,onChange:l=>a(l.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(sl,{className:"h-48 border rounded-md p-2 bg-background/50",children:o.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No tags defined globally.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:o.map(l=>{const c=i(l.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Vl,{id:`project-default-tag-${l.id}`,checked:t.has(l.id),onCheckedChange:u=>n(l.id,!!u),className:"mt-0.5",disabled:r}),p.jsxs(zt,{htmlFor:`project-default-tag-${l.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:l.name}),l.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:l.description}),c.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",c.map(u=>u.name).join(", ")]})]})]})},l.id)})})})]})},ist=({defaultTagIds:e,setDefaultTagIds:t,isSaving:n,allTags:r,getRulesForTag:i})=>{const s=T.useMemo(()=>new Set(e??[]),[e]),a=T.useCallback((o,l)=>{const c=new Set(s);l?c.add(o):c.delete(o);const u=Array.from(c);t(u.length>0?u:null)},[s,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx(zt,{children:"Default Tags for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select tags whose rules will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(rst,{allTags:r,selectedTagIds:s,onSelectionChange:a,disabled:n,getRulesForTag:i})]})},sst=Je({temperature:Nt().min(0).max(1),topP:Nt().min(0).max(1),maxTokens:Nt().min(1).nullable(),topK:Nt().min(1).nullable(),presencePenalty:Nt().min(-2).max(2),frequencyPenalty:Nt().min(-2).max(2)}),ast=({isOpen:e,onClose:t,projectId:n,module:r})=>{const{getProjectById:i,updateProject:s}=No(Sn(U=>({getProjectById:U.getProjectById,updateProject:U.updateProject}))),a=No(U=>U.getEffectiveProjectSettings),o=zn(U=>U.syncRepos),l=gr(Sn(U=>({globalSystemPrompt:U.globalSystemPrompt,temperature:U.temperature,maxTokens:U.maxTokens,topP:U.topP,topK:U.topK,presencePenalty:U.presencePenalty,frequencyPenalty:U.frequencyPenalty}))),c=Mr(U=>U.selectedModelId),u=Ki(U=>U.setVfsKey),[d,h]=T.useState(null),[m,y]=T.useState(null),[b,v]=T.useState(null),[x,w]=T.useState(null),[S,C]=T.useState(null),[k,A]=T.useState(!1),[R,N]=T.useState("prompt"),{project:I,effectiveSettings:O}=T.useMemo(()=>{const U=n?i(n):null,G=n?a(n):null;return{project:U,effectiveSettings:G}},[n,i,a]),L=Ns({defaultValues:{temperature:(I==null?void 0:I.temperature)??.7,topP:(I==null?void 0:I.topP)??1,maxTokens:(I==null?void 0:I.maxTokens)??null,topK:(I==null?void 0:I.topK)??null,presencePenalty:(I==null?void 0:I.presencePenalty)??0,frequencyPenalty:(I==null?void 0:I.presencePenalty)??0},validators:{onChangeAsync:sst,onChangeAsyncDebounceMs:500}}),P=T.useCallback(U=>{var $;if(!U)return null;const G=i(U);return G?(($=G.metadata)==null?void 0:$.syncRepoId)!==void 0?G.metadata.syncRepoId:P(G.parentId):null},[i]),V=n?P(n):null;T.useEffect(()=>{var U;e&&n&&I&&O?(u(n),h(I.systemPrompt??null),y(I.modelId??null),v(((U=I.metadata)==null?void 0:U.syncRepoId)??null),w(I.defaultTagIds??null),C(I.defaultRuleIds??null),L.reset({temperature:I.temperature??.7,topP:I.topP??1,maxTokens:I.maxTokens??null,topK:I.topK??null,presencePenalty:I.presencePenalty??0,frequencyPenalty:I.frequencyPenalty??0}),N("prompt")):e||(u(null),h(null),y(null),v(null),w(null),C(null),L.reset({temperature:.7,topP:1,maxTokens:null,topK:null,presencePenalty:0,frequencyPenalty:0}))},[e,n,I,O,u,L]);const F=async()=>{if(!(!n||!I)){A(!0);try{const U=I.parentId?a(I.parentId):{systemPrompt:l.globalSystemPrompt,modelId:c,temperature:l.temperature,maxTokens:l.maxTokens,topP:l.topP,topK:l.topK,presencePenalty:l.presencePenalty,frequencyPenalty:l.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null},G=I.parentId?P(I.parentId):null,$={},ne={...I.metadata??{}},W=L.state.values;d!==U.systemPrompt?$.systemPrompt=d:$.systemPrompt=void 0,m!==U.modelId?$.modelId=m:$.modelId=void 0,W.temperature!==U.temperature?$.temperature=W.temperature:$.temperature=void 0,W.maxTokens!==U.maxTokens?$.maxTokens=W.maxTokens:$.maxTokens=void 0,W.topP!==U.topP?$.topP=W.topP:$.topP=void 0,W.topK!==U.topK?$.topK=W.topK:$.topK=void 0,W.presencePenalty!==U.presencePenalty?$.presencePenalty=W.presencePenalty:$.presencePenalty=void 0,W.frequencyPenalty!==U.frequencyPenalty?$.frequencyPenalty=W.frequencyPenalty:$.frequencyPenalty=void 0,b!==G?ne.syncRepoId=b:delete ne.syncRepoId,JSON.stringify(x)!==JSON.stringify(U.defaultTagIds)?$.defaultTagIds=x:$.defaultTagIds=void 0,JSON.stringify(S)!==JSON.stringify(U.defaultRuleIds)?$.defaultRuleIds=S:$.defaultRuleIds=void 0,$.metadata=ne,await s(n,$),Pe.success(`Project "${I.name}" settings updated.`),t()}catch(U){Pe.error("Failed to save project settings."),console.error("Failed to save project settings:",U)}finally{A(!1)}}},J=T.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:p.jsx(Xit,{initialSystemPrompt:d,initialModelId:m,onSave:({systemPrompt:U,modelId:G})=>{h(U),y(G)},effectiveSystemPrompt:(O==null?void 0:O.systemPrompt)??l.globalSystemPrompt,effectiveModelId:(O==null?void 0:O.modelId)??c,isParentSaving:k})},{value:"params",label:"Parameters",content:p.jsx(Jit,{form:L,effectiveTemperature:(O==null?void 0:O.temperature)??l.temperature,effectiveMaxTokens:(O==null?void 0:O.maxTokens)??l.maxTokens,effectiveTopP:(O==null?void 0:O.topP)??l.topP??1,effectiveTopK:(O==null?void 0:O.topK)??l.topK,effectivePresencePenalty:(O==null?void 0:O.presencePenalty)??l.presencePenalty??0,effectiveFrequencyPenalty:(O==null?void 0:O.frequencyPenalty)??l.frequencyPenalty??0,isSaving:k})},{value:"rules-tags",label:"Rules & Tags",content:p.jsxs("div",{className:"space-y-6",children:[p.jsx(nst,{defaultRuleIds:S,setDefaultRuleIds:C,isSaving:k,allRules:r.getAllRules()}),p.jsx(ist,{defaultTagIds:x,setDefaultTagIds:w,isSaving:k,allTags:r.getAllTags(),getRulesForTag:r.getRulesForTag})]})},{value:"sync",label:"Sync",content:p.jsx(Qit,{initialSyncRepoId:b,onSave:({syncRepoId:U})=>{v(U)},effectiveSyncRepoId:V,syncRepos:o,isParentSaving:k})},{value:"vfs",label:"Filesystem",content:p.jsx(est,{projectId:n,projectName:(I==null?void 0:I.name)??null,isSaving:k})}],[d,m,b,x,S,L,O,l,c,k,V,o,n,I==null?void 0:I.name,r]);return p.jsx(Bm,{open:e,onOpenChange:t,children:p.jsxs($m,{className:Ye("w-[95vw] h-[85vh] flex flex-col p-0","sm:w-[90vw] sm:max-w-[800px]","md:h-[75vh]","min-h-[500px] max-h-[90vh]"),children:[p.jsxs(zm,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsxs(Um,{children:["Project Settings: ",I==null?void 0:I.name]}),p.jsx(rb,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),p.jsx(Pu,{tabs:J,initialValue:R,onValueChange:N,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"pb-4 md:pb-6 overflow-y-auto",scrollable:!1}),p.jsxs(nb,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:[p.jsx(St,{variant:"outline",onClick:t,disabled:k,children:"Cancel"}),p.jsxs(St,{onClick:F,disabled:k,children:[k&&p.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};class ost{constructor(){ve(this,"id","core-project-settings");ve(this,"modalId","projectSettingsModal");ve(this,"unregisterModalProviderCallback",null);ve(this,"modApiRef",null);ve(this,"eventUnsubscribers",[]);ve(this,"allRules",[]);ve(this,"allTags",[]);ve(this,"tagRuleLinks",[]);ve(this,"getAllRules",()=>this.allRules);ve(this,"getAllTags",()=>this.allTags);ve(this,"getRulesForTag",t=>{const n=new Set(this.tagRuleLinks.filter(r=>r.tagId===t).map(r=>r.ruleId));return this.allRules.filter(r=>n.has(r.id))});ve(this,"openModal",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(Nr.openModalRequest,{modalId:this.modalId,targetId:t,initialTab:n})});ve(this,"closeModal",()=>{var t;(t=this.modApiRef)==null||t.emit(Nr.closeModalRequest,{modalId:this.modalId})})}async initialize(t){this.modApiRef=t;const n=t.on(mr.dataLoaded,r=>{r&&(this.allRules=r.rules||[],this.allTags=r.tags||[],this.tagRuleLinks=(r.links||[]).map(i=>({tagId:i.tagId,ruleId:i.ruleId})))});this.eventUnsubscribers.push(n),t.emit(mr.loadRulesAndTagsRequest,void 0),console.log(`[${this.id}] Initialized.`)}register(t){if(this.modApiRef=t,this.unregisterModalProviderCallback){console.warn(`[${this.id}] Modal provider already registered. Skipping.`);return}this.unregisterModalProviderCallback=t.registerModalProvider(this.modalId,n=>Ve.createElement(ast,{isOpen:n.isOpen,onClose:n.onClose,projectId:n.targetId||null,module:this})),console.log(`[${this.id}] Modal provider registered for ${this.modalId}.`)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterModalProviderCallback&&(this.unregisterModalProviderCallback(),this.unregisterModalProviderCallback=null),this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const J5=Ve.memo(({module:e,value:t,onChange:n,className:r,disabled:i})=>{const[,s]=T.useState({});T.useEffect(()=>{if(e)return e.setNotifyCallback(()=>s({})),()=>e.setNotifyCallback(null)},[e]);const a=!!e,o=a?e.selectedModelId:t,l=a?e.isStreaming:i,c=a?e.isLoadingProviders:!1,u=a?e.globallyEnabledModels:Mr(h=>h.getGloballyEnabledModelDefinitions()),d=T.useCallback(h=>{a&&e?e.handleSelectionChange(h):n&&n(h)},[a,e,n]);return p.jsx(X5,{models:u,value:o,onChange:d,className:r,disabled:l,isLoading:c})});J5.displayName="GlobalModelSelector";class lst{constructor(){ve(this,"id","core-global-model-selector");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"selectedModelId",null);ve(this,"isStreaming",!1);ve(this,"isLoadingProviders",!0);ve(this,"globallyEnabledModels",[]);ve(this,"notifyComponentUpdate",null);ve(this,"handleSelectionChange",t=>{var n,r;(n=this.modApiRef)==null||n.emit(dr.selectModelRequest,{modelId:t}),(r=this.modApiRef)==null||r.emit(Pn.setModelIdRequest,{id:t})});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t;const n=Mr.getState();this.isLoadingProviders=n.isLoading,this.selectedModelId=n.selectedModelId,this.isStreaming=Ln.getState().status==="streaming",this.isLoadingProviders||(this.globallyEnabledModels=n.getGloballyEnabledModelDefinitions());const r=t.on(Zn.statusChanged,o=>{var l;if(typeof o=="object"&&o&&"status"in o){const c=o.status==="streaming";this.isStreaming!==c&&(this.isStreaming=c,(l=this.notifyComponentUpdate)==null||l.call(this))}}),i=t.on(dr.selectedModelChanged,o=>{var l,c;typeof o=="object"&&o&&"modelId"in o&&this.selectedModelId!==o.modelId&&(this.selectedModelId=o.modelId,(l=this.modApiRef)==null||l.emit(Pn.setModelIdRequest,{id:o.modelId}),(c=this.notifyComponentUpdate)==null||c.call(this))}),s=t.on(dr.globallyEnabledModelsUpdated,o=>{var d,h;let l=!1;JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(o.models)&&(this.globallyEnabledModels=o.models,l=!0);const c=Mr.getState().isLoading;this.isLoadingProviders!==c&&(this.isLoadingProviders=c,l=!0);const u=Mr.getState().selectedModelId;this.selectedModelId!==u&&(this.selectedModelId=u,(d=this.modApiRef)==null||d.emit(Pn.setModelIdRequest,{id:this.selectedModelId}),l=!0),l&&((h=this.notifyComponentUpdate)==null||h.call(this))}),a=t.on(dr.initialDataLoaded,()=>{var u,d;const o=Mr.getState();let l=!1;this.isLoadingProviders!==o.isLoading&&(this.isLoadingProviders=o.isLoading,l=!0),this.selectedModelId!==o.selectedModelId&&(this.selectedModelId=o.selectedModelId,(u=this.modApiRef)==null||u.emit(Pn.setModelIdRequest,{id:this.selectedModelId}),l=!0);const c=o.getGloballyEnabledModelDefinitions();JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(c)&&(this.globallyEnabledModels=c,l=!0),l&&((d=this.notifyComponentUpdate)==null||d.call(this))});this.eventUnsubscribers.push(r,i,s,a)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>this.isLoadingProviders?"loading":"ready",triggerRenderer:()=>Ve.createElement(J5,{module:this})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const cst=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const[n,r]=T.useState(!1),[i,s]=T.useState(e.getTurnSystemPrompt()),a=e.getEffectiveSystemPrompt(),o=e.getIsStreaming(),l=e.getTurnSystemPrompt();T.useEffect(()=>{n&&s(e.getTurnSystemPrompt())},[n,e]),T.useEffect(()=>{const m=e.getTurnSystemPrompt();i!==m&&s(m)},[e.getTurnSystemPrompt(),i]);const c=T.useCallback(()=>{e.setTurnSystemPrompt(i.trim()),r(!1)},[i,e]),u=T.useCallback(()=>{s(""),e.setTurnSystemPrompt(""),r(!1)},[e]),d=m=>{m&&s(e.getTurnSystemPrompt()),r(m)},h=l.trim().length>0;return p.jsxs(ul,{open:n,onOpenChange:d,children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(dl,{asChild:!0,children:p.jsx(St,{variant:h?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:o,"aria-label":"Set System Prompt for Next Turn",children:p.jsx(a0e,{className:"h-4 w-4"})})})}),p.jsx(_r,{side:"top",children:h?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),p.jsxs(fl,{className:"w-80 p-4 space-y-3",align:"start",children:[p.jsx(zt,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),p.jsx(ql,{id:"turn-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,50))||"Default"}${a&&a.length>50?"...":""}`,value:i,onChange:m=>s(m.target.value),rows:5,className:"text-sm"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx(St,{variant:"outline",size:"sm",onClick:u,disabled:!i.trim(),children:"Clear Override"}),p.jsx(St,{size:"sm",onClick:c,children:"Set for Next Turn"})]})]})]})};class ust{constructor(){ve(this,"id","core-system-prompt");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"turnSystemPromptValue","");ve(this,"effectiveSystemPrompt",null);ve(this,"isStreaming",!1);ve(this,"notifyComponentUpdate",null);ve(this,"getTurnSystemPrompt",()=>this.turnSystemPromptValue);ve(this,"getEffectiveSystemPrompt",()=>this.effectiveSystemPrompt);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"setTurnSystemPrompt",t=>{var n;this.turnSystemPromptValue!==t&&(this.turnSystemPromptValue=t,(n=this.notifyComponentUpdate)==null||n.call(this))});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.isStreaming=Ln.getState().status==="streaming",this.updateEffectivePrompt();const n=t.on(Zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(Nr.contextChanged,()=>{var a;this.updateEffectivePrompt(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(ga.updated,()=>{var a;this.updateEffectivePrompt(),(a=this.notifyComponentUpdate)==null||a.call(this)}),s=t.on(sn.globalSystemPromptChanged,()=>{var a;this.updateEffectivePrompt(),(a=this.notifyComponentUpdate)==null||a.call(this)});this.eventUnsubscribers.push(n,r,i,s)}updateEffectivePrompt(){var a;const t=zn.getState(),n=No.getState(),r=gr.getState(),i=t.selectedItemType==="project"?t.selectedItemId:t.selectedItemType==="conversation"?((a=t.getConversationById(t.selectedItemId))==null?void 0:a.projectId)??null:null,s=n.getEffectiveProjectSettings(i).systemPrompt??r.globalSystemPrompt;this.effectiveSystemPrompt!==s&&(this.effectiveSystemPrompt=s)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>Ve.createElement(cst,{module:this}),getMetadata:()=>{const n=this.turnSystemPromptValue.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{var n;this.turnSystemPromptValue!==""&&(this.turnSystemPromptValue="",(n=this.notifyComponentUpdate)==null||n.call(this))}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const dst=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getStructuredOutputJson(),[r,i]=T.useState(!1),[s,a]=T.useState(n??""),[o,l]=T.useState(""),[c,u]=T.useState([]),d=T.useCallback(()=>{try{JSON.parse(s),e.setStructuredOutputJson(s.trim()||null),i(!1),Pe.success("Structured output applied for next turn.")}catch{Pe.error("Invalid JSON format.")}},[s,e]),h=T.useCallback(()=>{a(""),e.setStructuredOutputJson(null),i(!1),Pe.info("Structured output cleared.")},[e]),m=T.useCallback(()=>{if(!o.trim()){Pe.error("Please provide a name to save to the library.");return}try{JSON.parse(s);const w={id:Date.now().toString(),name:o.trim(),json:s};u(S=>[...S,w]),l(""),Pe.success(`"${w.name}" saved to library.`)}catch{Pe.error("Cannot save invalid JSON to library.")}},[s,o]),y=T.useCallback(w=>{a(w.json),e.setStructuredOutputJson(w.json),i(!1),Pe.success(`Loaded "${w.name}" from library.`)},[e]),b=T.useCallback(w=>{u(S=>S.filter(C=>C.id!==w)),Pe.info("Item removed from library.")},[]);T.useEffect(()=>{r&&a(e.getStructuredOutputJson()??"")},[r,e]);const v=[{value:"entry",label:"Entry",content:p.jsxs("div",{className:"space-y-3 p-1",children:[p.jsx(zt,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),p.jsx(ql,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:s,onChange:w=>a(w.target.value),rows:8,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-between items-end gap-2",children:[p.jsxs("div",{className:"flex-grow space-y-1",children:[p.jsx(zt,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),p.jsx(Un,{id:"structured-output-name",value:o,onChange:w=>l(w.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),p.jsxs(St,{size:"sm",variant:"outline",onClick:m,disabled:!o.trim()||!s.trim(),className:"h-8",children:[p.jsx(Wd,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsx(St,{variant:"outline",size:"sm",onClick:h,disabled:!n,children:"Clear Applied Schema"}),p.jsx(St,{size:"sm",onClick:d,disabled:!s,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:p.jsx("div",{className:"space-y-2 p-1",children:c.length===0?p.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):c.map(w=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[p.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:w.name}),p.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[p.jsx(St,{size:"sm",variant:"outline",onClick:()=>y(w),className:"h-7 px-2 text-xs",children:"Use"}),p.jsx(St,{size:"icon",variant:"ghost",onClick:()=>b(w.id),className:"h-7 w-7 text-destructive",children:p.jsx(So,{className:"h-3.5 w-3.5"})})]})]},w.id))})}],x=!!n;return p.jsxs(ul,{open:r,onOpenChange:i,children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(dl,{asChild:!0,children:p.jsx(St,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:p.jsx(dH,{className:"h-4 w-4"})})})}),p.jsx(_r,{side:"top",children:x?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),p.jsx(fl,{className:"w-[450px] p-0",align:"start",children:p.jsx(Pu,{tabs:v,defaultValue:"entry"})})]})},fst=({module:e})=>{const[,t]=T.useState({});return T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]),e.getIsVisible()?p.jsx(dst,{module:e}):null};class hst{constructor(){ve(this,"id","core-structured-output");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"structuredOutputJson",null);ve(this,"isVisible",!0);ve(this,"notifyComponentUpdate",null);ve(this,"getStructuredOutputJson",()=>this.structuredOutputJson);ve(this,"getIsVisible",()=>this.isVisible);ve(this,"setStructuredOutputJson",t=>{var n,r;this.structuredOutputJson=t,(n=this.modApiRef)==null||n.emit(Pn.setStructuredOutputJsonRequest,{json:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var i;this.modApiRef=t,this.structuredOutputJson=To.getState().structuredOutputJson,this.updateVisibility(),(i=this.notifyComponentUpdate)==null||i.call(this);const n=t.on(dr.selectedModelChanged,()=>{var s;this.updateVisibility(),(s=this.notifyComponentUpdate)==null||s.call(this)}),r=t.on(Pn.parameterChanged,s=>{var a;if(typeof s=="object"&&s&&"params"in s){const o=s.params;"structuredOutputJson"in o&&this.structuredOutputJson!==(o.structuredOutputJson??null)&&(this.structuredOutputJson=o.structuredOutputJson??null,(a=this.notifyComponentUpdate)==null||a.call(this))}});this.eventUnsubscribers.push(n,r)}updateVisibility(){var s;const{getSelectedModel:t}=Mr.getState(),n=t(),r=(s=n==null?void 0:n.metadata)==null?void 0:s.supported_parameters,i=Array.isArray(r)&&r.includes("structured_output");this.isVisible!==i&&(this.isVisible=i)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>Ve.createElement(fst,{module:this}),getParameters:()=>{if(this.structuredOutputJson)try{return{structured_output:JSON.parse(this.structuredOutputJson)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{var n;(n=this.modApiRef)==null||n.emit(Pn.setStructuredOutputJsonRequest,{json:null})}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const pst=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.contextLength,r=e.getEstimatedInputTokens(),i=e.getTotalEstimatedTokens(),s=e.getContextPercentage(),a=e.historyTokens,o=e.selectedModelId,l=T.useMemo(()=>s>85?"text-red-600 dark:text-red-500":s>70?"text-orange-500 dark:text-orange-400":s>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[s]);if(!(o!==null&&n>0))return null;const u=`Context: ~${i.toLocaleString()} / ${n.toLocaleString()} tokens (${s}%) [History: ${a}, Input: ${r}]`;return p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:p.jsx(ume,{className:Ye("h-3 w-3 fill-current",l)})})}),p.jsx(_r,{side:"top",children:u})]})})},Rde=4,mst=e=>{let t=0;return e.forEach(n=>{var r,i,s,a;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(a=(s=(i=n.prompt)==null?void 0:i.metadata)==null?void 0:s.attachedFiles)==null||a.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/Rde)};class gst{constructor(){ve(this,"id","core-usage-display");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"currentInputText","");ve(this,"historyTokens",0);ve(this,"attachedFiles",[]);ve(this,"selectedModelId",null);ve(this,"contextLength",0);ve(this,"notifyComponentUpdate",null);ve(this,"getEstimatedInputTokens",()=>{const t=new TextEncoder().encode(this.currentInputText).length,n=this.attachedFiles.reduce((r,i)=>r+i.size,0);return Math.ceil((t+n)/Rde)});ve(this,"getTotalEstimatedTokens",()=>this.historyTokens+this.getEstimatedInputTokens());ve(this,"getContextPercentage",()=>this.contextLength?Math.min(100,Math.round(this.getTotalEstimatedTokens()/this.contextLength*100)):0);ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.loadInitialState(),this.updateContextLength();const n=t.on(Pn.inputChanged,o=>{var l;typeof o=="object"&&o&&"value"in o&&(this.currentInputText=o.value,(l=this.notifyComponentUpdate)==null||l.call(this))}),r=t.on(Ol.attachedFilesChanged,o=>{var l;typeof o=="object"&&o&&"files"in o&&(this.attachedFiles=o.files,(l=this.notifyComponentUpdate)==null||l.call(this))}),i=t.on(dr.selectedModelChanged,o=>{var l;typeof o=="object"&&o&&"modelId"in o&&(this.selectedModelId=o.modelId,this.updateContextLength(),(l=this.notifyComponentUpdate)==null||l.call(this))}),s=t.on(Zn.completed,()=>{var o;this.updateHistoryTokens(),(o=this.notifyComponentUpdate)==null||o.call(this)}),a=t.on(Nr.contextChanged,()=>{var o;this.updateHistoryTokens(),(o=this.notifyComponentUpdate)==null||o.call(this)});this.eventUnsubscribers.push(n,r,i,s,a),console.log(`[${this.id}] Initialized.`)}loadInitialState(){const t=rh.getState(),n=Mr.getState();this.attachedFiles=t.attachedFilesMetadata,this.selectedModelId=n.selectedModelId,this.updateHistoryTokens()}updateHistoryTokens(){const t=Ln.getState();if(t.currentConversationId){const n=t.interactions.filter(r=>r.status==="COMPLETED");this.historyTokens=mst(n)}else this.historyTokens=0}updateContextLength(){var c;if(!this.selectedModelId){this.contextLength=0;return}const{dbProviderConfigs:t,dbApiKeys:n}=Mr.getState(),{providerId:r,modelId:i}=hc(this.selectedModelId);if(!r||!i){this.contextLength=0;return}const s=t.find(u=>u.id===r);if(!s){this.contextLength=0;return}const a=n.find(u=>u.id===s.apiKeyId),o=dK(s,i,a==null?void 0:a.value),l=o==null?void 0:o.metadata;this.contextLength=((c=l==null?void 0:l.top_provider)==null?void 0:c.context_length)??(l==null?void 0:l.context_length)??0}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>Ve.createElement(pst,{module:this})}),console.log(`[${this.id}] Registered.`)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}const yst=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getReasoningEnabled(),r=e.getIsStreaming(),i=e.getIsVisible(),s=n===!0,a=T.useCallback(()=>{const o=s?null:!0;e.setReasoningEnabled(o)},[s,e]);return i?p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:s?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:a,disabled:r,"aria-label":s?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:p.jsx(kh,{className:Ye("h-4 w-4",s?"text-primary":"text-muted-foreground")})})}),p.jsx(_r,{side:"top",children:s?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};class bst{constructor(){ve(this,"id","core-reasoning");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"reasoningEnabled",null);ve(this,"isStreaming",!1);ve(this,"isVisible",!0);ve(this,"notifyComponentUpdate",null);ve(this,"getReasoningEnabled",()=>this.reasoningEnabled);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"getIsVisible",()=>this.isVisible);ve(this,"setReasoningEnabled",t=>{var n,r;this.reasoningEnabled=t,(n=this.modApiRef)==null||n.emit(Pn.setReasoningEnabledRequest,{enabled:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var s;this.modApiRef=t,this.reasoningEnabled=To.getState().reasoningEnabled,this.isStreaming=Ln.getState().status==="streaming",this.updateVisibility(),(s=this.notifyComponentUpdate)==null||s.call(this);const n=t.on(Zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(dr.selectedModelChanged,()=>{var a;this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(Pn.parameterChanged,a=>{var o;if(typeof a=="object"&&a&&"params"in a){const l=a.params;"reasoningEnabled"in l&&this.reasoningEnabled!==l.reasoningEnabled&&(this.reasoningEnabled=l.reasoningEnabled??null,(o=this.notifyComponentUpdate)==null||o.call(this))}});this.eventUnsubscribers.push(n,r,i)}updateVisibility(){var i,s;const{getSelectedModel:t}=Mr.getState(),n=t(),r=((s=(i=n==null?void 0:n.metadata)==null?void 0:i.supported_parameters)==null?void 0:s.includes("reasoning"))??!1;this.isVisible!==r&&(this.isVisible=r)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>Ve.createElement(yst,{module:this}),getMetadata:()=>this.reasoningEnabled===!0?{reasoningEnabled:!0}:void 0,clearOnSubmit:()=>{var n;(n=this.modApiRef)==null||n.emit(Pn.setReasoningEnabledRequest,{enabled:null})}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const vst=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getWebSearchEnabled(),r=e.getIsStreaming(),i=e.getIsVisible(),s=n===!0,a=T.useCallback(()=>{const o=s?null:!0;e.setWebSearchEnabled(o)},[s,e]);return i?p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:s?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:a,disabled:r,"aria-label":s?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:p.jsx(Oa,{className:Ye("h-4 w-4",s?"text-primary":"text-muted-foreground")})})}),p.jsx(_r,{side:"top",children:s?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};class xst{constructor(){ve(this,"id","core-web-search");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"webSearchEnabled",null);ve(this,"isStreaming",!1);ve(this,"isVisible",!0);ve(this,"notifyComponentUpdate",null);ve(this,"getWebSearchEnabled",()=>this.webSearchEnabled);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"getIsVisible",()=>this.isVisible);ve(this,"setWebSearchEnabled",t=>{var n,r;this.webSearchEnabled=t,(n=this.modApiRef)==null||n.emit(Pn.setWebSearchEnabledRequest,{enabled:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var s;this.modApiRef=t,this.webSearchEnabled=To.getState().webSearchEnabled,this.isStreaming=Ln.getState().status==="streaming",this.updateVisibility(),(s=this.notifyComponentUpdate)==null||s.call(this);const n=t.on(Zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(dr.selectedModelChanged,()=>{var a;this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(Pn.parameterChanged,a=>{var o;if(typeof a=="object"&&a&&"params"in a){const l=a.params;"webSearchEnabled"in l&&this.webSearchEnabled!==l.webSearchEnabled&&(this.webSearchEnabled=l.webSearchEnabled??null,(o=this.notifyComponentUpdate)==null||o.call(this))}});this.eventUnsubscribers.push(n,r,i)}updateVisibility(){var s;const{getSelectedModel:t}=Mr.getState(),n=t(),r=((s=n==null?void 0:n.metadata)==null?void 0:s.supported_parameters)??[],i=r.includes("web_search")||r.includes("web_search_options");this.isVisible!==i&&(this.isVisible=i)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>Ve.createElement(vst,{module:this}),getParameters:()=>this.webSearchEnabled===!0?{web_search:!0}:void 0,clearOnSubmit:()=>{var n;(n=this.modApiRef)==null||n.emit(Pn.setWebSearchEnabledRequest,{enabled:null})}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Nde=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r,allRules:i,allTags:s,getRulesForTag:a})=>{const[o,l]=T.useState(""),[c,u]=T.useState(""),d=T.useMemo(()=>{const w=o.toLowerCase();return w?s.filter(S=>{var C;return S.name.toLowerCase().includes(w)||((C=S.description)==null?void 0:C.toLowerCase().includes(w))}):s},[s,o]),h=T.useMemo(()=>{const w=c.toLowerCase();return w?i.filter(S=>S.name.toLowerCase().includes(w)||S.content.toLowerCase().includes(w)||S.type.toLowerCase().includes(w)):i},[i,c]),m=T.useCallback((w,S)=>{n(w,S)},[n]),y=T.useCallback((w,S)=>{r(w,S)},[r]),b=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Oa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Un,{type:"search",placeholder:"Filter tags...",value:o,onChange:w=>l(w.target.value),className:"pl-8 h-9"})]}),p.jsx("div",{className:"border rounded-md p-2 bg-background/50",children:d.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:s.length===0?"No tags defined.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:d.map(w=>{const S=a(w.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Vl,{id:`tag-activate-${w.id}`,checked:e.has(w.id),onCheckedChange:C=>m(w.id,!!C),className:"mt-0.5"}),p.jsxs(zt,{htmlFor:`tag-activate-${w.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:w.name}),w.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:w.description}),S.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",S.map(C=>C.name).join(", ")]})]})]})},w.id)})})})]}),v=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Oa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Un,{type:"search",placeholder:"Filter rules...",value:c,onChange:w=>u(w.target.value),className:"pl-8 h-9"})]}),p.jsx("div",{className:"border rounded-md p-2 bg-background/50",children:h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No rules defined.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(w=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Vl,{id:`rule-activate-${w.id}`,checked:t.has(w.id),onCheckedChange:S=>y(w.id,!!S),className:"mt-0.5"}),p.jsxs(zt,{htmlFor:`rule-activate-${w.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:w.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",w.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",w.content]})]})]})},w.id))})})]}),x=[{value:"tags",label:"Activate Tags",content:b()},{value:"rules",label:"Activate Rules",content:v()}];return p.jsx("div",{className:"p-0 max-w-lg",children:p.jsx(Pu,{tabs:x,defaultValue:"tags",scrollable:!1})})},wst=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const[n,r]=T.useState(!1),i=e.getActiveTagIds(),s=e.getActiveRuleIds(),a=e.getIsStreaming(),o=e.getHasRulesOrTags(),l=e.getAllRules(),c=e.getAllTags(),u=e.getRulesForTag,d=T.useCallback((v,x)=>{e.setActiveTagIds(w=>{const S=new Set(w);return x?S.add(v):S.delete(v),S})},[e]),h=T.useCallback((v,x)=>{e.setActiveRuleIds(w=>{const S=new Set(w);return x?S.add(v):S.delete(v),S})},[e]),m=()=>{o?r(v=>!v):e.handleTriggerClick()&&r(!1)},y=i.size>0||s.size>0,b=a;return p.jsxs(ul,{open:n,onOpenChange:r,children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:o?p.jsx(dl,{asChild:!0,children:p.jsx(St,{variant:y?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:b,"aria-label":"Configure Rules & Tags for Next Turn",onClick:m,children:p.jsx(CB,{className:"h-4 w-4"})})}):p.jsx(St,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:b,"aria-label":"Add Rules & Tags (Opens Settings)",onClick:m,children:p.jsx(CB,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"top",children:o?y?`Rules/Tags Active (${i.size} tags, ${s.size} rules)`:"Activate Rules/Tags (Next Turn)":"Add Rules/Tags (Opens Settings)"})]})}),o&&p.jsx(fl,{className:"w-auto p-0",align:"start",children:p.jsx(Nde,{activeTagIds:i,activeRuleIds:s,onToggleTag:d,onToggleRule:h,allRules:l,allTags:c,getRulesForTag:u})})]})};function _st({form:e,name:t,label:n,description:r,placeholder:i,disabled:s,wrapperClassName:a,className:o,rows:l,...c}){return p.jsx(e.Field,{name:t,children:u=>{const d=typeof u.state.value=="string"||typeof u.state.value=="number"?String(u.state.value):"";return p.jsxs("div",{className:Ye("space-y-1.5",a),children:[p.jsx(zt,{htmlFor:u.name,className:"text-sm",children:n}),r&&p.jsx("p",{className:"text-xs text-muted-foreground",children:r}),p.jsx(ql,{id:u.name,name:u.name,value:d,onBlur:u.handleBlur,onChange:h=>u.handleChange(h.target.value),placeholder:i,disabled:s??u.form.state.isSubmitting,rows:l,className:Ye(o,u.state.meta.errors.length?"border-destructive":""),...c}),p.jsx(Ts,{field:u})]})}})}const Sst=Je({name:Ue().min(1,"Rule Name is required."),content:Ue().min(1,"Rule Content is required."),type:cl(["system","before","after"],{errorMap:()=>({message:"Rule Type is required."})})}),Cst=[{value:"system",label:"System Prompt"},{value:"before",label:"Before User Prompt"},{value:"after",label:"After User Prompt"}],kst=({initialData:e,isSavingExt:t,onSave:n,onCancel:r})=>{const i=Ns({defaultValues:{name:(e==null?void 0:e.name)||"",content:(e==null?void 0:e.content)||"",type:(e==null?void 0:e.type)||"before"},validators:{onChangeAsync:Sst,onChangeAsyncDebounceMs:500},onSubmit:async({value:s})=>{await n({name:s.name.trim(),content:s.content.trim(),type:s.type})}});return T.useEffect(()=>{i.reset({name:(e==null?void 0:e.name)||"",content:(e==null?void 0:e.content)||"",type:(e==null?void 0:e.type)||"before"})},[e,i]),p.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),i.handleSubmit()},className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsx(Fw,{form:i,name:"name",label:"Rule Name",placeholder:"e.g., Always respond in JSON",required:!0,disabled:t,wrapperClassName:"md:col-span-2"}),p.jsx(vx,{form:i,name:"type",label:"Rule Type",options:Cst,placeholder:"Select Type",disabled:t})]}),p.jsx(_st,{form:i,name:"content",label:"Rule Content",placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(St,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(va,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(i.Subscribe,{selector:s=>[s.canSubmit,s.isSubmitting,s.isValidating,s.isValid],children:([s,a,o,l])=>p.jsxs(St,{variant:"secondary",size:"sm",type:"submit",disabled:t||!s||a||!l||o,children:[(t||a||o)&&p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",t||a||o?"Saving...":"Save Rule"]})})]})]})},Est=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:i})=>{const s=a=>{window.confirm(`Are you sure you want to delete the rule "${a.name}"? This will also remove it from any tags.`)&&i(a.id,a.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Vh,{children:[p.jsx(qm,{children:p.jsxs(Ii,{children:[p.jsx(Hr,{children:"Name"}),p.jsx(Hr,{children:"Type"}),p.jsx(Hr,{children:"Content Preview"}),p.jsx(Hr,{className:"text-right",children:"Actions"})]})}),p.jsx(Wh,{children:t?p.jsxs(p.Fragment,{children:[p.jsx(Ii,{children:p.jsx(Kn,{colSpan:4,children:p.jsx(Ur,{className:"h-10 w-full"})})}),p.jsx(Ii,{children:p.jsx(Kn,{colSpan:4,children:p.jsx(Ur,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Ii,{children:p.jsx(Kn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(a=>{const o=n[a.id];return p.jsxs(Ii,{children:[p.jsx(Kn,{className:"font-medium",children:a.name}),p.jsx(Kn,{className:"capitalize",children:a.type}),p.jsx(Kn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:a.content}),p.jsxs(Kn,{className:"text-right space-x-1",children:[p.jsx(In,{tooltipText:"Edit Rule",onClick:()=>r(a),disabled:o,icon:p.jsx(Gw,{}),className:"h-8 w-8","aria-label":`Edit rule ${a.name}`}),p.jsx(In,{tooltipText:"Delete Rule",onClick:()=>s(a),disabled:o,icon:o?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(So,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${a.name}`})]})]},a.id)})})]})})},Tst=({module:e})=>{const[,t]=T.useState(Date.now()),n=e.getAllRules(),r=e.getIsLoadingRules(),[i,s]=T.useState(!1),[a,o]=T.useState(null),[l,c]=T.useState(!1),[u,d]=T.useState({});T.useEffect(()=>(e.setNotifySettingsCallback(()=>t(Date.now())),()=>{e.setNotifySettingsCallback(null)}),[e]);const h=()=>{o(null),s(!0)},m=x=>{o(x),s(!0)},y=T.useCallback(()=>{s(!1),o(null),c(!1)},[]),b=T.useCallback(async x=>{c(!0);try{a?e.updateRule(a.id,x):e.addRule(x),y()}catch{}finally{c(!1)}},[e,a,y]),v=T.useCallback(async x=>{d(w=>({...w,[x]:!0}));try{e.deleteRule(x),(a==null?void 0:a.id)===x&&y()}catch{}finally{d(w=>({...w,[x]:!1}))}},[e,a,y]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!i&&p.jsxs(St,{onClick:h,variant:"outline",className:"w-full",disabled:r,children:[p.jsx(mm,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),i&&p.jsx(kst,{initialData:a??void 0,isSavingExt:l,onSave:b,onCancel:y}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),p.jsx(Est,{rules:n,isLoading:r,isDeleting:u,onEdit:m,onDelete:v})]})]})},N3=Je({name:Ue().min(1,"Tag Name is required."),description:Ue().nullable()}),Ast=({initialData:e,isParentSaving:t=!1,onSave:n,onCancel:r})=>{const i=Ns({defaultValues:{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||null},validators:{onChangeAsync:N3,onChangeAsyncDebounceMs:500},onSubmit:async({value:s})=>{var a;await n({name:s.name.trim(),description:((a=s.description)==null?void 0:a.trim())||null})}});return T.useEffect(()=>{i.reset({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||null})},[e,i]),p.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),i.handleSubmit()},className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),p.jsx(i.Field,{name:"name",validators:{onChange:N3.shape.name},children:s=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:s.name,children:"Tag Name"}),p.jsx(Un,{id:s.name,value:s.state.value??"",onChange:a=>s.handleChange(a.target.value),onBlur:s.handleBlur,placeholder:"e.g., Code Generation, Summarization",disabled:i.state.isSubmitting||t}),p.jsx(Ts,{field:s})]})}),p.jsx(i.Field,{name:"description",validators:{onChange:N3.shape.description},children:s=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:s.name,children:"Description (Optional)"}),p.jsx(ql,{id:s.name,value:s.state.value??"",onChange:a=>s.handleChange(a.target.value),onBlur:s.handleBlur,placeholder:"Describe when to use this tag...",rows:2,disabled:i.state.isSubmitting||t}),p.jsx(Ts,{field:s})]})}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(St,{variant:"ghost",size:"sm",onClick:r,disabled:i.state.isSubmitting||t,type:"button",children:[p.jsx(va,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(i.Subscribe,{selector:s=>[s.canSubmit,s.isSubmitting,s.isValidating,s.isValid],children:([s,a,o,l])=>p.jsxs(St,{variant:"secondary",size:"sm",type:"submit",disabled:t||!s||a||o||!l,children:[(a||o)&&p.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",a||o?"Saving...":"Save Tag"]})})]})]})},Rst=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:i,onDelete:s})=>{const a=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&s(o.id,o.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Vh,{children:[p.jsx(qm,{children:p.jsxs(Ii,{children:[p.jsx(Hr,{children:"Name"}),p.jsx(Hr,{children:"Description"}),p.jsx(Hr,{children:"Linked Rules"}),p.jsx(Hr,{className:"text-right",children:"Actions"})]})}),p.jsx(Wh,{children:n?p.jsxs(p.Fragment,{children:[p.jsx(Ii,{children:p.jsx(Kn,{colSpan:4,children:p.jsx(Ur,{className:"h-10 w-full"})})}),p.jsx(Ii,{children:p.jsx(Kn,{colSpan:4,children:p.jsx(Ur,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Ii,{children:p.jsx(Kn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],c=t.get(o.id)||[];return p.jsxs(Ii,{children:[p.jsx(Kn,{className:"font-medium",children:o.name}),p.jsx(Kn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),p.jsx(Kn,{className:"text-xs",children:c.length>0?c.map(u=>u.name).join(", "):"None"}),p.jsxs(Kn,{className:"text-right space-x-1",children:[p.jsx(In,{tooltipText:"Edit Tag & Rules",onClick:()=>i(o),disabled:l,icon:p.jsx(Gw,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),p.jsx(In,{tooltipText:"Delete Tag",onClick:()=>a(o),disabled:l,icon:l?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(So,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},Nst=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:i=!1})=>{const[s,a]=T.useState(!1),[o,l]=T.useState(""),c=T.useMemo(()=>[...t].sort((y,b)=>y.name.localeCompare(b.name)),[t]),u=T.useMemo(()=>{const y=o.toLowerCase();return y?c.filter(b=>b.name.toLowerCase().includes(y)||b.content.toLowerCase().includes(y)||b.type.toLowerCase().includes(y)):c},[c,o]),d=T.useCallback(y=>{const b=n.has(y);r(e.id,y,!b),l("")},[n,r,e.id]),h=T.useCallback((y,b)=>{b.stopPropagation(),r(e.id,y,!1)},[r,e.id]),m=T.useMemo(()=>c.filter(y=>n.has(y.id)),[c,n]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs(zt,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),p.jsxs(ul,{open:s,onOpenChange:a,children:[p.jsx(dl,{asChild:!0,children:p.jsxs(St,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-full justify-between h-9",disabled:i||t.length===0,children:[p.jsx("span",{className:"truncate",children:m.length>0?`${m.length} rule(s) selected`:"Select rules..."}),p.jsx(eE,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(fl,{className:"w-[--radix-popover-trigger-width] p-0",children:p.jsxs(Sde,{shouldFilter:!1,children:[p.jsx(Cde,{placeholder:"Search rules...",value:o,onValueChange:l}),p.jsxs(kde,{children:[p.jsx(Ede,{children:t.length===0?"No rules defined.":"No rules found."}),p.jsx(Tde,{children:u.map(y=>{const b=n.has(y.id);return p.jsxs(Ade,{value:y.id,onSelect:()=>d(y.id),className:"cursor-pointer",children:[p.jsx(Qa,{className:Ye("mr-2 h-4 w-4",b?"opacity-100":"opacity-0")}),p.jsx("span",{className:"truncate",children:y.name}),p.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",y.type,")"]})]},y.id)})})]})]})})]}),m.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:m.map(y=>p.jsxs(As,{variant:"secondary",className:"flex items-center gap-1",children:[p.jsx("span",{className:"truncate",children:y.name}),p.jsx(St,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:b=>h(y.id,b),disabled:i,"aria-label":`Unlink rule ${y.name}`,children:p.jsx(va,{className:"h-3 w-3"})})]},y.id))})]})},Mst=({module:e})=>{const[,t]=T.useState(Date.now()),n=e.getAllTags(),r=e.getAllRules(),i=e.getTagRuleLinks(),s=e.getRulesForTag,a=e.getIsLoadingRules(),[o,l]=T.useState(!1),[c,u]=T.useState(null),[d,h]=T.useState(!1),[m,y]=T.useState({});T.useEffect(()=>(e.setNotifySettingsCallback(()=>t(Date.now())),()=>{e.setNotifySettingsCallback(null)}),[e]);const b=()=>{u(null),l(!0)},v=R=>{u(R),l(!0)},x=T.useCallback(()=>{l(!1),u(null),h(!1)},[]),w=T.useCallback(async R=>{h(!0);try{c?e.updateTag(c.id,R):e.addTag(R),c||x()}catch{}finally{h(!1)}},[e,c,x]),S=T.useCallback(async R=>{y(N=>({...N,[R]:!0}));try{e.deleteTag(R),(c==null?void 0:c.id)===R&&x()}catch{}finally{y(N=>({...N,[R]:!1}))}},[e,c,x]),C=T.useCallback(async(R,N,I)=>{try{I?e.linkTagToRule(R,N):e.unlinkTagFromRule(R,N)}catch{}},[e]),k=T.useMemo(()=>{const R=new Map;return n.forEach(N=>{R.set(N.id,s(N.id))}),R},[n,s]),A=T.useMemo(()=>c?new Set(i.filter(R=>R.tagId===c.id).map(R=>R.ruleId)):new Set,[c,i]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!o&&p.jsxs(St,{onClick:b,variant:"outline",className:"w-full",disabled:a,children:[p.jsx(mm,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),o&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(Ast,{initialData:c??void 0,isParentSaving:d,onSave:w,onCancel:x}),c&&p.jsx(Nst,{tag:c,allRules:r,linkedRuleIds:A,onLinkChange:C,disabled:d})]}),p.jsx(qd,{}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),p.jsx(Rst,{tags:n,rulesByTagId:k,isLoading:a,isDeleting:m,onEdit:v,onDelete:S})]})]})},Ist=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifySettingsCallback(()=>t({})),()=>e.setNotifySettingsCallback(null)),[e]);const n=T.useMemo(()=>[{value:"rules",label:"Rules",content:p.jsx(Tst,{module:e})},{value:"tags",label:"Tags",content:p.jsx(Mst,{module:e})}],[e]);return p.jsx(Pu,{tabs:n,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})};class jst{constructor(){ve(this,"id","core-rules-tags");ve(this,"unregisterPromptControlCallback",null);ve(this,"unregisterSettingsTabCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"modApiRef",null);ve(this,"allRules",[]);ve(this,"allTags",[]);ve(this,"tagRuleLinks",[]);ve(this,"transientActiveTagIds",new Set);ve(this,"transientActiveRuleIds",new Set);ve(this,"isStreaming",!1);ve(this,"hasRulesOrTags",!1);ve(this,"isLoadingRules",!0);ve(this,"notifyComponentUpdate",null);ve(this,"notifySettingsComponentUpdate",null);ve(this,"getAllRules",()=>this.allRules);ve(this,"getAllTags",()=>this.allTags);ve(this,"getTagRuleLinks",()=>this.tagRuleLinks);ve(this,"getRulesForTag",t=>{const n=new Set(this.tagRuleLinks.filter(r=>r.tagId===t).map(r=>r.ruleId));return this.allRules.filter(r=>n.has(r.id))});ve(this,"getRuleById",t=>this.allRules.find(n=>n.id===t));ve(this,"getTagById",t=>this.allTags.find(n=>n.id===t));ve(this,"getRulesByIds",t=>{const n=new Set(t);return this.allRules.filter(r=>n.has(r.id))});ve(this,"addRule",t=>{var n;(n=this.modApiRef)==null||n.emit(mr.addRuleRequest,t)});ve(this,"updateRule",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(mr.updateRuleRequest,{id:t,updates:n})});ve(this,"deleteRule",t=>{var n;(n=this.modApiRef)==null||n.emit(mr.deleteRuleRequest,{id:t})});ve(this,"addTag",t=>{var n;(n=this.modApiRef)==null||n.emit(mr.addTagRequest,t)});ve(this,"updateTag",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(mr.updateTagRequest,{id:t,updates:n})});ve(this,"deleteTag",t=>{var n;(n=this.modApiRef)==null||n.emit(mr.deleteTagRequest,{id:t})});ve(this,"linkTagToRule",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(mr.linkTagToRuleRequest,{tagId:t,ruleId:n})});ve(this,"unlinkTagFromRule",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(mr.unlinkTagFromRuleRequest,{tagId:t,ruleId:n})});ve(this,"handleTriggerClick",()=>!this.hasRulesOrTags&&this.modApiRef?(this.modApiRef.emit(Nr.openModalRequest,{modalId:"settingsModal",initialTab:"rules-tags"}),!0):!1);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"getHasRulesOrTags",()=>this.hasRulesOrTags);ve(this,"getIsLoadingRules",()=>this.isLoadingRules);ve(this,"getActiveTagIds",()=>this.transientActiveTagIds);ve(this,"getActiveRuleIds",()=>this.transientActiveRuleIds);ve(this,"setActiveTagIds",t=>{var n;this.transientActiveTagIds=t(this.transientActiveTagIds),(n=this.notifyComponentUpdate)==null||n.call(this)});ve(this,"setActiveRuleIds",t=>{var n;this.transientActiveRuleIds=t(this.transientActiveRuleIds),(n=this.notifyComponentUpdate)==null||n.call(this)});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t});ve(this,"setNotifySettingsCallback",t=>{this.notifySettingsComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.isStreaming=t.getContextSnapshot().isStreaming,t.emit(mr.loadRulesAndTagsRequest,void 0);const n=t.on(Zn.statusChanged,i=>{var s;typeof i=="object"&&i&&"status"in i&&this.isStreaming!==(i.status==="streaming")&&(this.isStreaming=i.status==="streaming",(s=this.notifyComponentUpdate)==null||s.call(this))}),r=t.on(mr.dataLoaded,i=>{var s,a;i&&(this.allRules=i.rules||[],this.allTags=i.tags||[],this.tagRuleLinks=(i.links||[]).map(o=>({tagId:o.tagId,ruleId:o.ruleId}))),this.updateHasRulesOrTags(),this.isLoadingRules=!1,(s=this.notifyComponentUpdate)==null||s.call(this),(a=this.notifySettingsComponentUpdate)==null||a.call(this)});this.eventUnsubscribers.push(n,r)}updateHasRulesOrTags(){const t=this.allRules.length>0||this.allTags.length>0;this.hasRulesOrTags!==t&&(this.hasRulesOrTags=t)}register(t){this.modApiRef=t,this.unregisterPromptControlCallback||(this.unregisterPromptControlCallback=t.registerPromptControl({id:this.id,status:()=>this.isLoadingRules?"loading":"ready",triggerRenderer:()=>Ve.createElement(wst,{module:this}),getMetadata:()=>{const n=Array.from(this.transientActiveTagIds),r=Array.from(this.transientActiveRuleIds),i=[],s=new Set(r);if(n.forEach(a=>{this.getRulesForTag(a).forEach(o=>s.add(o.id))}),s.forEach(a=>{const o=this.getRuleById(a);o&&i.push({type:o.type,content:o.content,sourceRuleId:o.id})}),n.length>0||r.length>0||i.length>0)return{activeTagIds:n,activeRuleIds:r,effectiveRulesContent:i}},clearOnSubmit:()=>{var r;let n=!1;this.transientActiveTagIds.size>0&&(this.transientActiveTagIds=new Set,n=!0),this.transientActiveRuleIds.size>0&&(this.transientActiveRuleIds=new Set,n=!0),n&&((r=this.notifyComponentUpdate)==null||r.call(this))}})),this.unregisterSettingsTabCallback||(this.unregisterSettingsTabCallback=t.registerSettingsTab({id:"rules-tags",title:"Rules & Tags",component:()=>Ve.createElement(Ist,{module:this}),order:50}))}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterPromptControlCallback&&(this.unregisterPromptControlCallback(),this.unregisterPromptControlCallback=null),this.unregisterSettingsTabCallback&&(this.unregisterSettingsTabCallback(),this.unregisterSettingsTabCallback=null),this.notifyComponentUpdate=null,this.notifySettingsComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Ost=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getTurnEnabled(),r=e.getIsStreaming(),i=e.getGlobalAutoTitleEnabled()&&e.getIsFirstInteraction(),s=T.useCallback(()=>{const a=!n;e.setTurnEnabled(a)},[n,e]);return i?p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:s,disabled:r,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:p.jsx(vH,{className:Ye("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),p.jsx(_r,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})}):null};class Pst{constructor(){ve(this,"id","core-auto-title");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"turnAutoTitleEnabled",!1);ve(this,"isStreaming",!1);ve(this,"isFirstInteraction",!1);ve(this,"globalAutoTitleEnabled",!0);ve(this,"notifyComponentUpdate",null);ve(this,"getTurnEnabled",()=>this.turnAutoTitleEnabled);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"getIsFirstInteraction",()=>this.isFirstInteraction);ve(this,"getGlobalAutoTitleEnabled",()=>this.globalAutoTitleEnabled);ve(this,"setTurnEnabled",t=>{var n;this.turnAutoTitleEnabled!==t&&(this.turnAutoTitleEnabled=t,(n=this.notifyComponentUpdate)==null||n.call(this))});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var a;this.turnAutoTitleEnabled=!1,this.isStreaming=Ln.getState().status==="streaming",this.globalAutoTitleEnabled=gr.getState().autoTitleEnabled,this.checkFirstInteraction(),(a=this.notifyComponentUpdate)==null||a.call(this);const n=t.on(Zn.statusChanged,o=>{var l;typeof o=="object"&&o&&"status"in o&&this.isStreaming!==(o.status==="streaming")&&(this.isStreaming=o.status==="streaming",(l=this.notifyComponentUpdate)==null||l.call(this))}),r=t.on(Nr.contextChanged,()=>{var l;const o=this.isFirstInteraction;this.checkFirstInteraction(),o!==this.isFirstInteraction&&((l=this.notifyComponentUpdate)==null||l.call(this))}),i=t.on(Zn.completed,()=>{var l;const o=this.isFirstInteraction;this.checkFirstInteraction(),o!==this.isFirstInteraction&&((l=this.notifyComponentUpdate)==null||l.call(this))}),s=t.on(sn.autoTitleEnabledChanged,o=>{var l;typeof o=="object"&&o&&"enabled"in o&&this.globalAutoTitleEnabled!==o.enabled&&(this.globalAutoTitleEnabled=o.enabled,(l=this.notifyComponentUpdate)==null||l.call(this))});this.eventUnsubscribers.push(n,r,i,s)}checkFirstInteraction(){const t=Ln.getState(),n=t.currentConversationId===null||t.interactions.filter(r=>r.conversationId===t.currentConversationId).length===0;this.isFirstInteraction!==n&&(this.isFirstInteraction=n,!n&&this.turnAutoTitleEnabled&&(this.turnAutoTitleEnabled=!1))}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=()=>Ve.createElement(Ost,{module:this});this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:n,getMetadata:()=>this.turnAutoTitleEnabled?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{var r;this.turnAutoTitleEnabled&&(this.turnAutoTitleEnabled=!1,(r=this.notifyComponentUpdate)==null||r.call(this))}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}function Dst(){const e=new URLSearchParams(window.location.search),t=e.get("q")??void 0,n=e.get("m")??void 0,r=e.getAll("vfs").filter(Boolean),i=e.get("s")??"1";return{query:t,modelId:n,vfsFiles:r.length>0?r:void 0,submit:i}}class Fst{constructor(){ve(this,"id","core-url-parameters");ve(this,"modApiRef",null)}async initialize(t){this.modApiRef=t,console.log(`[${this.id}] Initializing...`),t.on(qh.initializationPhaseCompleted,n=>{n.phase==="all"&&this.processUrlParameters().catch(r=>{console.error(`[${this.id}] Error processing URL parameters:`,r),Pe.error("Failed to process URL parameters.")})}),console.log(`[${this.id}] Initialized, awaiting full app load.`)}register(t){}destroy(){this.modApiRef=null}async processUrlParameters(){var r,i;if(!this.modApiRef){console.warn(`[${this.id}] ModAPI not available, cannot process URL parameters.`);return}const t=this.modApiRef,n=Dst();if(!(!n.query&&!n.modelId&&!((r=n.vfsFiles)!=null&&r.length))){Pe.info("Processing parameters from URL...");try{const s=await new Promise((a,o)=>{const l=t.on(Yn.conversationAdded,c=>{c.conversation.title.startsWith("From URL:")&&(l(),a(c.conversation.id))});setTimeout(()=>{l(),o(new Error("Timeout waiting for conversation creation event."))},5e3),t.emit(Yn.addConversationRequest,{title:n.query?`From URL: ${n.query.substring(0,30)}...`:"From URL Parameters"})});if(t.emit(Yn.selectItemRequest,{id:s,type:"conversation"}),n.modelId){const a=Mr.getState().getAvailableModelListItems();let o=null;const l=n.modelId.toLowerCase();if(n.modelId.includes(":")){const c=a.find(u=>u.id===n.modelId);c&&(o=c.id)}if(!o){const c=a.find(u=>u.name.toLowerCase()===l);c&&(o=c.id)}if(!o){const c=a.find(u=>u.name.toLowerCase().startsWith(l));c&&(o=c.id)}if(!o){const c=a.find(u=>{const d=u.id.toLowerCase().split("/");return d.length>1&&d[1].startsWith(l)});c&&(o=c.id)}if(o){t.emit(Pn.setModelIdRequest,{id:o}),t.emit(dr.selectModelRequest,{modelId:o});const c=a.find(u=>u.id===o);Pe.success(`Model set to: ${c==null?void 0:c.name} (${c==null?void 0:c.providerName})`)}else Pe.warning(`Model matching "${n.modelId}" not found or not enabled. Using default.`)}if(n.vfsFiles&&n.vfsFiles.length>0){const a="orphan";let o;try{if(o=await t.getVfsInstance(a),!o)throw new Error("Failed to get VFS instance via ModAPI.")}catch(l){Pe.error(`Failed to initialize VFS for URL files: ${l instanceof Error?l.message:String(l)}`)}if(o)for(const l of n.vfsFiles)try{const c=await Ph(l,{fsInstance:o}),u=await o.promises.stat(l),d=fs(l),h="application/octet-stream",m=Nx(d,h);let y={};if(m)y.contentText=new TextDecoder().decode(c);else{let b="";const v=c.byteLength;for(let x=0;x<v;x++)b+=String.fromCharCode(c[x]);y.contentBase64=window.btoa(b)}t.emit(Ol.addAttachedFileRequest,{source:"vfs",name:d,type:h,size:u.size,path:l,...y}),Pe.success(`Attached VFS file: ${d}`)}catch(c){c.code==="ENOENT"?Pe.warning(`VFS file not found: ${l}`):Pe.warning(`Failed to attach VFS file "${l}": ${c.message}`),console.error(`Error processing VFS file ${l}:`,c)}}if(n.query)if(n.submit==="0")t.emit(Pn.inputChanged,{value:n.query}),Pe.info("Query from URL loaded into input area."),window.history.replaceState({},document.title,window.location.pathname);else{let a={},o={};const l=rh.getState().attachedFilesMetadata;l.length>0&&(o.attachedFiles=[...l]);let c={id:Us(),content:n.query,parameters:a,metadata:o};t.emit(Pn.submitted,{turnData:c});const u=await SC(B0.PROMPT_TURN_FINALIZE,{turnData:c});if(u===!1){Pe.warning("Prompt submission from URL cancelled by middleware.");return}const d=u&&typeof u=="object"?u.turnData:c;await fx.submitPrompt(d),window.history.replaceState({},document.title,window.location.pathname)}else(n.modelId||(i=n.vfsFiles)!=null&&i.length)&&(Pe.info("Model and/or VFS files from URL applied. Type your message."),window.history.replaceState({},document.title,window.location.pathname))}catch(s){Pe.error(`Failed to process URL parameters: ${s instanceof Error?s.message:String(s)}`),console.error("Error processing URL parameters:",s)}}}}const Lst=({module:e})=>{const[t,n]=T.useState(!1),[,r]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>r({})),()=>e.setNotifyCallback(null)),[e]),T.useEffect(()=>{const o=e.getImageGenerationEnabled();n(o===!0)},[e]);const i=e.getIsVisible(),s=e.getIsStreaming(),a=T.useCallback(()=>{const o=!t;e.setImageGenerationEnabled(o?!0:null),n(o)},[t,e]);return i?p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx(St,{variant:t?"secondary":"ghost",size:"icon",onClick:a,disabled:s,className:"h-8 w-8","aria-label":t?"Disable Image Generation for Next Turn":"Enable Image Generation for Next Turn",children:p.jsx(z2,{className:Ye("h-4 w-4",t?"text-primary":"text-muted-foreground")})})}),p.jsx(_r,{side:"top",children:t?"Image Generation Enabled (Click to Disable)":"Image Generation Disabled (Click to Enable)"})]})}):null};class Bst{constructor(){ve(this,"id","core-image-generation");ve(this,"modApiRef",null);ve(this,"isImageGenerationEnabled",null);ve(this,"unregisterCallback",null);ve(this,"notifyComponentUpdate",null);ve(this,"eventUnsubscribers",[]);ve(this,"isVisible",!1);ve(this,"isStreaming",!1);ve(this,"getImageGenerationEnabled",()=>this.isImageGenerationEnabled);ve(this,"getIsVisible",()=>this.isVisible);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"setImageGenerationEnabled",t=>{var n,r;this.isImageGenerationEnabled=t,(n=this.modApiRef)==null||n.emit(Pn.setImageGenerationEnabledRequest,{enabled:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.isImageGenerationEnabled=null,this.isStreaming=Ln.getState().status==="streaming",this.updateVisibility();const n=t.on(dr.selectedModelChanged,()=>{var i;this.updateVisibility(),(i=this.notifyComponentUpdate)==null||i.call(this)}),r=t.on(Zn.statusChanged,i=>{var s;typeof i=="object"&&i&&"status"in i&&this.isStreaming!==(i.status==="streaming")&&(this.isStreaming=i.status==="streaming",(s=this.notifyComponentUpdate)==null||s.call(this))});this.eventUnsubscribers.push(n,r),console.log(`[${this.id}] Initialized.`)}updateVisibility(){var s,a;const{getSelectedModel:t}=Mr.getState(),n=t(),i=(((a=(s=n==null?void 0:n.metadata)==null?void 0:s.architecture)==null?void 0:a.output_modalities)??[]).includes("image");this.isVisible!==i&&(this.isVisible=i)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>Ve.createElement(Lst,{module:this}),getMetadata:()=>this.isImageGenerationEnabled===!0?{imageGenerationEnabled:!0}:void 0,clearOnSubmit:()=>{var i;(i=this.modApiRef)==null||i.emit(Pn.setImageGenerationEnabledRequest,{enabled:null})}});const n=i=>{var s;i.enabled!==this.isImageGenerationEnabled&&(this.isImageGenerationEnabled=i.enabled,(s=this.notifyComponentUpdate)==null||s.call(this))},r=this.modApiRef.on(Pn.setImageGenerationEnabledRequest,n);this.eventUnsubscribers.push(r),console.log(`[${this.id}] Registered successfully`)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const $st=({module:e})=>{const[t,n]=T.useState(!1),[r,i]=T.useState([]),[s,a]=T.useState(250),[,o]=T.useState({}),{status:l}=Ln(Sn(b=>({status:b.status})));T.useEffect(()=>{if(e)return e.setNotifyCallback(()=>o({})),()=>e.setNotifyCallback(null)},[e]);const c=(b,v)=>{i(x=>v?[...x,b]:x.filter(w=>w!==b))},u=()=>{if(r.length<2){Pe.error("Please select at least 2 models to race");return}e.setRaceMode(!0,r,s),n(!1),Pe.info(`Race mode enabled! Send your prompt to race ${r.length} models.`),i([]),a(250)},d=()=>{e.setRaceMode(!1),Pe.info("Race mode disabled")},h=b=>{if(b.stopPropagation(),e.isRaceModeActive){d();return}if(l==="streaming"){Pe.info("Cannot start race while another response is streaming");return}if(e.globallyEnabledModels.length<2){Pe.info("Need at least 2 models enabled to race");return}n(!0)},m=l!=="streaming"&&e.globallyEnabledModels.length>=2,y=()=>e.isRaceModeActive?"Race mode active - click to cancel, or send your prompt to race models":l==="streaming"?"Cannot race while streaming":e.globallyEnabledModels.length<2?`Need at least 2 models enabled to race (currently have ${e.globallyEnabledModels.length})`:"Race multiple models with your prompt";return p.jsxs(p.Fragment,{children:[p.jsx(In,{tooltipText:y(),onClick:h,"aria-label":"Race Multiple Models Against Each Other",disabled:!m,icon:p.jsx(yH,{}),className:`h-5 w-5 md:h-6 md:w-6 ${e.isRaceModeActive?"bg-primary text-primary-foreground":""}`}),p.jsx(Bm,{open:t,onOpenChange:n,children:p.jsxs($m,{className:"max-w-md",children:[p.jsxs(zm,{children:[p.jsx(Um,{children:"Race Models"}),p.jsx(rb,{children:'Select multiple models to race against each other. After clicking "Enable Race Mode", send your prompt and all selected models will respond.'})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(zt,{htmlFor:"stagger-input",children:"Stagger Delay (ms)"}),p.jsx(Un,{id:"stagger-input",type:"number",min:"0",max:"5000",step:"50",value:s,onChange:b=>a(parseInt(b.target.value)||250),placeholder:"250",className:"w-full"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Delay between starting each model (0-5000ms)"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(zt,{children:["Select Models to Race (",r.length," selected)"]}),p.jsx(sl,{className:"h-48 w-full border rounded-md p-3",children:p.jsx("div",{className:"space-y-2",children:e.globallyEnabledModels.map(b=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Vl,{id:`model-${b.id}`,checked:r.includes(b.id),onCheckedChange:v=>c(b.id,v===!0)}),p.jsx(zt,{htmlFor:`model-${b.id}`,className:"text-sm cursor-pointer flex-1 min-w-0",children:p.jsxs("div",{className:"truncate",children:[p.jsx("span",{className:"font-medium",children:b.name}),p.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",b.providerName,")"]})]})})]},b.id))})}),e.globallyEnabledModels.length===0&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No models available"})]})]}),p.jsxs(nb,{children:[p.jsx(St,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),p.jsx(St,{onClick:u,disabled:r.length<2||e.isLoadingProviders,children:"Enable Race Mode"})]})]})})]})};class zst{constructor(){ve(this,"id","race-prompt-control");ve(this,"eventUnsubscribers",[]);ve(this,"modApi",null);ve(this,"notifyComponentUpdate",null);ve(this,"isRaceMode",!1);ve(this,"raceModelIds",[]);ve(this,"raceStaggerMs",250);ve(this,"globallyEnabledModels",[]);ve(this,"isLoadingProviders",!1)}async initialize(t){this.modApi=t;const n=Mr.getState();this.globallyEnabledModels=n.getGloballyEnabledModelDefinitions(),this.isLoadingProviders=n.isLoading;const r=t.on(dr.globallyEnabledModelsUpdated,a=>{var o;this.globallyEnabledModels=a.models,(o=this.notifyComponentUpdate)==null||o.call(this)}),i=t.on(dr.initialDataLoaded,a=>{var o;a.globallyEnabledModels&&(this.globallyEnabledModels=a.globallyEnabledModels,this.isLoadingProviders=!1,(o=this.notifyComponentUpdate)==null||o.call(this))}),s=t.addMiddleware(B0.PROMPT_TURN_FINALIZE,async a=>this.isRaceMode?await this.handleRaceSubmission(a.turnData):a);this.eventUnsubscribers.push(r,i,s)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.notifyComponentUpdate=null,this.modApi=null}setNotifyCallback(t){this.notifyComponentUpdate=t}setRaceMode(t,n,r){var i;this.isRaceMode=t,t&&n&&r!==void 0?(this.raceModelIds=n,this.raceStaggerMs=r):(this.raceModelIds=[],this.raceStaggerMs=250),(i=this.notifyComponentUpdate)==null||i.call(this)}get isRaceModeActive(){return this.isRaceMode}async handleRaceSubmission(t){try{console.log(`[RacePromptControlModule] Starting race submission with ${this.raceModelIds.length} models:`,this.raceModelIds);const n=Ln.getState(),r=n.currentConversationId;if(!r)return Pe.error("No active conversation for racing"),!1;if(this.raceModelIds.length===0)return Pe.error("No models selected for racing"),this.setRaceMode(!1),!1;Pe.info(`Racing ${this.raceModelIds.length} models with your prompt...`);const s=n.interactions.filter(y=>y.conversationId===r).reduce((y,b)=>Math.max(y,b.index),-1)+1,a=await this.buildPromptObject(t,r,s),o=[...this.raceModelIds],l=this.raceStaggerMs,u=To.getState().modelId;if(!u)return Pe.error("No model currently selected"),this.setRaceMode(!1),!1;this.setRaceMode(!1);const d={...a,metadata:{...a.metadata,modelId:u}},h=await qp.startInteraction(d,r,t,"message.user_assistant");if(!h)throw new Error("Failed to create main race interaction");const m=o.map((y,b)=>new Promise(v=>{setTimeout(async()=>{try{const x={...a,metadata:{...a.metadata,modelId:y,raceTab:!0,raceParticipantIndex:b+1}},w=await qp.startInteraction(x,r,t,"message.assistant_regen");if(w){const S={parentId:h.id,index:b+1};n._updateInteractionInState(w.id,S),await Mt.saveInteraction({...w,...S})}v()}catch(x){console.error(`[RacePromptControlModule] Race participant ${b+1} failed:`,x),v()}},(b+1)*l)}));return await Promise.all(m),Pe.success(`Race started! Current model + ${o.length} race models responding in tabs.`),!1}catch(n){return Pe.error(`Race failed: ${String(n)}`),console.error("[RacePromptControlModule] Error during race:",n),this.setRaceMode(!1),!1}}async buildPromptObject(t,n,r){var R,N,I;const i=Ln.getState(),s=No.getState(),o=zn.getState().getConversationById(n),l=(o==null?void 0:o.projectId)??null,c=s.getEffectiveProjectSettings(l),u=i.interactions.filter(O=>O.conversationId===n&&O.index<r&&O.status==="COMPLETED"&&O.type==="message.user_assistant"&&O.parentId===null).sort((O,L)=>O.index-L.index),d=mj(u);let h=t.content;const m=[],y=((R=t.metadata)==null?void 0:R.effectiveRulesContent)??[],b=y.filter(O=>O.type==="system").map(O=>O.content),v=y.filter(O=>O.type==="before").map(O=>O.content),x=y.filter(O=>O.type==="after").map(O=>O.content);v.length>0&&(h=`${v.join(`
`)}

${h}`),x.length>0&&(h=`${h}

${x.join(`
`)}`),h&&m.push({type:"text",text:h});const w=((N=t.metadata)==null?void 0:N.attachedFiles)??[];w.length>0,m.length>0&&d.push({role:"user",content:m});let C=((I=t.metadata)==null?void 0:I.turnSystemPrompt)??c.systemPrompt??void 0;b.length>0&&(C=`${C?`${C}

`:""}${b.join(`
`)}`);const k=To.getState(),A={temperature:k.temperature,max_tokens:k.maxTokens,top_p:k.topP,top_k:k.topK,presence_penalty:k.presencePenalty,frequency_penalty:k.frequencyPenalty,...t.parameters??{}};return Object.keys(A).forEach(O=>{(A[O]===null||A[O]===void 0)&&delete A[O]}),{system:C,messages:d,parameters:A,metadata:{...t.metadata??{},attachedFiles:w.map(({contentBase64:O,contentText:L,...P})=>P)}}}register(t){t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>Ve.createElement($st,{module:this})})}}const ex=({fieldApi:e,label:t,description:n,placeholder:r,inputClassName:i,labelClassName:s,wrapperClassName:a,type:o="text"})=>{const{name:l,state:c,handleChange:u,handleBlur:d}=e,h=c.value,m=y=>{u(y.target.value)};return p.jsxs("div",{className:Ye("space-y-1.5",a),children:[t&&p.jsx(zt,{htmlFor:l,className:Ye("text-sm font-medium",s),children:t}),n&&p.jsx("p",{className:"text-xs text-muted-foreground",children:n}),p.jsx(Un,{id:l,name:l,type:o,value:h==null?"":String(h),onBlur:d,onChange:m,placeholder:r,className:Ye(i,c.meta.errors.length?"border-destructive":""),disabled:e.form.state.isSubmitting}),c.meta.isTouched&&c.meta.errors.length>0&&p.jsx("div",{className:"text-xs text-destructive pt-1",children:c.meta.errors.map((y,b)=>p.jsx("p",{children:typeof y=="string"?y:(y==null?void 0:y.message)||"Invalid"},b))})]})},Ust=({fieldApi:e,label:t,placeholder:n,description:r,rows:i=3,inputClassName:s,labelClassName:a,wrapperClassName:o})=>p.jsxs("div",{className:Ye("space-y-1.5",o),children:[t&&p.jsx(zt,{htmlFor:e.name,className:Ye("text-sm font-medium",a),children:t}),r&&p.jsx("p",{className:"text-xs text-muted-foreground",children:r}),p.jsx(ql,{id:e.name,name:e.name,value:e.state.value||"",onBlur:e.handleBlur,onChange:l=>e.handleChange(l.target.value),placeholder:n,rows:i,className:Ye(s,e.state.meta.errors.length?"border-destructive":""),disabled:e.form.state.isSubmitting}),e.state.meta.isTouched&&e.state.meta.errors.length>0&&p.jsx("div",{className:"text-xs text-destructive pt-1",children:e.state.meta.errors.map((l,c)=>p.jsx("p",{children:String(l)},c))})]}),qst=({fieldApi:e,label:t,placeholder:n,description:r,options:i=[],inputClassName:s,labelClassName:a,wrapperClassName:o})=>p.jsxs("div",{className:Ye("space-y-1.5",o),children:[t&&p.jsx(zt,{htmlFor:e.name+"-trigger",className:Ye("text-sm font-medium",a),children:t}),r&&p.jsx("p",{className:"text-xs text-muted-foreground",children:r}),p.jsxs(Pm,{value:e.state.value||"",onValueChange:l=>e.handleChange(l),disabled:e.form.state.isSubmitting,children:[p.jsx(Fm,{id:e.name+"-trigger",onBlur:e.handleBlur,className:Ye(s,e.state.meta.errors.length?"border-destructive":""),children:p.jsx(Dm,{placeholder:n||"Select an option"})}),p.jsx(Lm,{children:i.map((l,c)=>{const u=typeof l=="string"?l:l.value,d=typeof l=="string"?l:l.label;return p.jsx(Xo,{value:u,children:d},u+c)})})]}),e.state.meta.isTouched&&e.state.meta.errors.length>0&&p.jsx("div",{className:"text-xs text-destructive pt-1",children:e.state.meta.errors.map((l,c)=>p.jsx("p",{children:String(l)},c))})]}),Vst=({fieldApi:e,label:t,description:n,labelClassName:r,wrapperClassName:i})=>p.jsxs("div",{className:Ye("space-y-1.5",i),children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Vl,{id:e.name,checked:!!e.state.value,onCheckedChange:s=>e.handleChange(!!s),onBlur:e.handleBlur,disabled:e.form.state.isSubmitting,"aria-describedby":n?`${e.name}-description`:void 0}),t&&p.jsx(zt,{htmlFor:e.name,className:Ye("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),children:t})]}),n&&p.jsx("p",{id:`${e.name}-description`,className:"text-xs text-muted-foreground",children:n}),e.state.meta.isTouched&&e.state.meta.errors.length>0&&p.jsx("div",{className:"text-xs text-destructive pt-1",children:e.state.meta.errors.map((s,a)=>p.jsx("p",{children:String(s)},a))})]}),Wst=({fieldApi:e,label:t,description:n,labelClassName:r,wrapperClassName:i})=>p.jsxs("div",{className:Ye("space-y-1.5",i),children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(bc,{id:e.name,checked:!!e.state.value,onCheckedChange:s=>e.handleChange(s),onBlur:e.handleBlur,disabled:e.form.state.isSubmitting,"aria-describedby":n?`${e.name}-description`:void 0}),t&&p.jsx(zt,{htmlFor:e.name,className:Ye("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),children:t})]}),n&&p.jsx("p",{id:`${e.name}-description`,className:"text-xs text-muted-foreground",children:n}),e.state.meta.isTouched&&e.state.meta.errors.length>0&&p.jsx("div",{className:"text-xs text-destructive pt-1",children:e.state.meta.errors.map((s,a)=>p.jsx("p",{children:String(s)},a))})]}),Hst=({fieldApi:e,label:t,description:n,placeholder:r,inputClassName:i,labelClassName:s,wrapperClassName:a,min:o,max:l,step:c})=>{const{name:u,state:d,handleChange:h,handleBlur:m}=e,y=d.value,b=x=>{const w=x.target.value;if(w==="")h(void 0);else{const S=parseFloat(w);h(isNaN(S)?w:S)}};let v="";return(typeof y=="number"||typeof y=="string")&&(v=y),p.jsxs("div",{className:Ye("space-y-1.5",a),children:[t&&p.jsx(zt,{htmlFor:u,className:Ye("text-sm font-medium",s),children:t}),n&&p.jsx("p",{className:"text-xs text-muted-foreground",children:n}),p.jsx(Un,{id:u,name:u,type:"number",value:v,onBlur:m,onChange:b,placeholder:r,min:o,max:l,step:c,className:Ye(i,d.meta.errors.length?"border-destructive":""),disabled:e.form.state.isSubmitting}),d.meta.isTouched&&d.meta.errors.length>0&&p.jsx("div",{className:"text-xs text-destructive pt-1",children:d.meta.errors.map((x,w)=>p.jsx("p",{children:typeof x=="string"?x:(x==null?void 0:x.message)||"Invalid"},w))})]})},M3={},tx={};function xx(e,t){try{const r=(M3[e]||(M3[e]=new Intl.DateTimeFormat("en-GB",{timeZone:e,hour:"numeric",timeZoneName:"longOffset"}).format))(t).split("GMT")[1]||"";return r in tx?tx[r]:xW(r,r.split(":"))}catch{if(e in tx)return tx[e];const n=e==null?void 0:e.match(Gst);return n?xW(e,n.slice(1)):NaN}}const Gst=/([+-]\d\d):?(\d\d)?/;function xW(e,t){const n=+t[0],r=+(t[1]||0);return tx[e]=n>0?n*60+r:n*60-r}class du extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(xx(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),Mde(this),AO(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new du(...n,t):new du(Date.now(),t)}withTimeZone(t){return new du(+this,t)}getTimezoneOffset(){return-xx(this.timeZone,this)}setTime(t){return Date.prototype.setTime.apply(this,arguments),AO(this),+this}[Symbol.for("constructDateFrom")](t){return new du(+new Date(t),this.timeZone)}}const wW=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!wW.test(e))return;const t=e.replace(wW,"$1UTC");du.prototype[t]&&(e.startsWith("get")?du.prototype[e]=function(){return this.internal[t]()}:(du.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),Kst(this),+this},du.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),AO(this),+this}))});function AO(e){e.internal.setTime(+e),e.internal.setUTCMinutes(e.internal.getUTCMinutes()-e.getTimezoneOffset())}function Kst(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),Mde(e)}function Mde(e){const t=xx(e.timeZone,e),n=new Date(+e);n.setUTCHours(n.getUTCHours()-1);const r=-new Date(+e).getTimezoneOffset(),i=-new Date(+n).getTimezoneOffset(),s=r-i,a=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();s&&a&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+s);const o=r-t;o&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+o);const l=xx(e.timeZone,e),u=-new Date(+e).getTimezoneOffset()-l,d=l!==t,h=u-o;if(d&&h){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+h);const m=xx(e.timeZone,e),y=l-m;y&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+y),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+y))}}class Ra extends du{static tz(t,...n){return n.length?new Ra(...n,t):new Ra(Date.now(),t)}toISOString(){const[t,n,r]=this.tzComponents(),i=`${t}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,n,r,i]=this.internal.toUTCString().split(" ");return`${t==null?void 0:t.slice(0,-1)} ${r} ${n} ${i}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[n,r,i]=this.tzComponents();return`${t} GMT${n}${r}${i} (${Yst(this.timeZone,this)})`}toLocaleString(t,n){return Date.prototype.toLocaleString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleDateString(t,n){return Date.prototype.toLocaleDateString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleTimeString(t,n){return Date.prototype.toLocaleTimeString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),n=t>0?"-":"+",r=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),i=String(Math.abs(t)%60).padStart(2,"0");return[n,r,i]}withTimeZone(t){return new Ra(+this,t)}[Symbol.for("constructDateFrom")](t){return new Ra(+new Date(t),this.timeZone)}}function Yst(e,t){return new Intl.DateTimeFormat("en-GB",{timeZone:e,timeZoneName:"long"}).format(t).slice(12)}var On;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(On||(On={}));var Gi;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(Gi||(Gi={}));var fc;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(fc||(fc={}));var Ko;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Ko||(Ko={}));const _W=5,Zst=4;function Xst(e,t){const n=t.startOfMonth(e),r=n.getDay()>0?n.getDay():7,i=t.addDays(e,-r+1),s=t.addDays(i,_W*7-1);return t.getMonth(e)===t.getMonth(s)?_W:Zst}function Ide(e,t){const n=t.startOfMonth(e),r=n.getDay();return r===1?n:r===0?t.addDays(n,-1*6):t.addDays(n,-1*(r-1))}function Jst(e,t){const n=Ide(e,t),r=Xst(e,t);return t.addDays(n,r*7-1)}class Qd{constructor(t,n){this.Date=Date,this.today=()=>{var r;return(r=this.overrides)!=null&&r.today?this.overrides.today():this.options.timeZone?Ra.tz(this.options.timeZone):new this.Date},this.newDate=(r,i,s)=>{var a;return(a=this.overrides)!=null&&a.newDate?this.overrides.newDate(r,i,s):this.options.timeZone?new Ra(r,i,s,this.options.timeZone):new Date(r,i,s)},this.addDays=(r,i)=>{var s;return(s=this.overrides)!=null&&s.addDays?this.overrides.addDays(r,i):lX(r,i)},this.addMonths=(r,i)=>{var s;return(s=this.overrides)!=null&&s.addMonths?this.overrides.addMonths(r,i):cX(r,i)},this.addWeeks=(r,i)=>{var s;return(s=this.overrides)!=null&&s.addWeeks?this.overrides.addWeeks(r,i):_Ae(r,i)},this.addYears=(r,i)=>{var s;return(s=this.overrides)!=null&&s.addYears?this.overrides.addYears(r,i):SAe(r,i)},this.differenceInCalendarDays=(r,i)=>{var s;return(s=this.overrides)!=null&&s.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,i):dX(r,i)},this.differenceInCalendarMonths=(r,i)=>{var s;return(s=this.overrides)!=null&&s.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,i):hX(r,i)},this.eachMonthOfInterval=r=>{var i;return(i=this.overrides)!=null&&i.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):DAe(r)},this.endOfBroadcastWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):Jst(r,this)},this.endOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfISOWeek?this.overrides.endOfISOWeek(r):BAe(r)},this.endOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.endOfMonth?this.overrides.endOfMonth(r):pX(r)},this.endOfWeek=(r,i)=>{var s;return(s=this.overrides)!=null&&s.endOfWeek?this.overrides.endOfWeek(r,i):gX(r,this.options)},this.endOfYear=r=>{var i;return(i=this.overrides)!=null&&i.endOfYear?this.overrides.endOfYear(r):LAe(r)},this.format=(r,i,s)=>{var o;const a=(o=this.overrides)!=null&&o.format?this.overrides.format(r,i,this.options):nw(r,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(a):a},this.getISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.getISOWeek?this.overrides.getISOWeek(r):yX(r)},this.getMonth=(r,i)=>{var s;return(s=this.overrides)!=null&&s.getMonth?this.overrides.getMonth(r,this.options):FRe(r,this.options)},this.getYear=(r,i)=>{var s;return(s=this.overrides)!=null&&s.getYear?this.overrides.getYear(r,this.options):LRe(r,this.options)},this.getWeek=(r,i)=>{var s;return(s=this.overrides)!=null&&s.getWeek?this.overrides.getWeek(r,this.options):vX(r,this.options)},this.isAfter=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isAfter?this.overrides.isAfter(r,i):BRe(r,i)},this.isBefore=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isBefore?this.overrides.isBefore(r,i):$Re(r,i)},this.isDate=r=>{var i;return(i=this.overrides)!=null&&i.isDate?this.overrides.isDate(r):fX(r)},this.isSameDay=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isSameDay?this.overrides.isSameDay(r,i):TAe(r,i)},this.isSameMonth=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isSameMonth?this.overrides.isSameMonth(r,i):zRe(r,i)},this.isSameYear=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isSameYear?this.overrides.isSameYear(r,i):URe(r,i)},this.max=r=>{var i;return(i=this.overrides)!=null&&i.max?this.overrides.max(r):CAe(r)},this.min=r=>{var i;return(i=this.overrides)!=null&&i.min?this.overrides.min(r):kAe(r)},this.setMonth=(r,i)=>{var s;return(s=this.overrides)!=null&&s.setMonth?this.overrides.setMonth(r,i):sNe(r,i)},this.setYear=(r,i)=>{var s;return(s=this.overrides)!=null&&s.setYear?this.overrides.setYear(r,i):aNe(r,i)},this.startOfBroadcastWeek=(r,i)=>{var s;return(s=this.overrides)!=null&&s.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):Ide(r,this)},this.startOfDay=r=>{var i;return(i=this.overrides)!=null&&i.startOfDay?this.overrides.startOfDay(r):tw(r)},this.startOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.startOfISOWeek?this.overrides.startOfISOWeek(r):ew(r)},this.startOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.startOfMonth?this.overrides.startOfMonth(r):FAe(r)},this.startOfWeek=(r,i)=>{var s;return(s=this.overrides)!=null&&s.startOfWeek?this.overrides.startOfWeek(r,this.options):ey(r,this.options)},this.startOfYear=r=>{var i;return(i=this.overrides)!=null&&i.startOfYear?this.overrides.startOfYear(r):mX(r)},this.options={locale:XE,...t},this.overrides=n}getDigitMap(){const{numerals:t="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:t}),r={};for(let i=0;i<10;i++)r[i.toString()]=n.format(i);return r}replaceDigits(t){const n=this.getDigitMap();return t.replace(/\d/g,r=>n[r]||r)}formatNumber(t){return this.replaceDigits(t.toString())}}const Du=new Qd;class jde{constructor(t,n,r=Du){this.date=t,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(t,n)),this.dateLib=r}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class Qst{constructor(t,n){this.date=t,this.weeks=n}}class eat{constructor(t,n){this.days=n,this.weekNumber=t}}function Cd(e,t,n=!1,r=Du){let{from:i,to:s}=e;const{differenceInCalendarDays:a,isSameDay:o}=r;return i&&s?(a(s,i)<0&&([i,s]=[s,i]),a(t,i)>=(n?1:0)&&a(s,t)>=(n?1:0)):!n&&s?o(s,t):!n&&i?o(i,t):!1}function Ode(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Q5(e){return!!(e&&typeof e=="object"&&"from"in e)}function Pde(e){return!!(e&&typeof e=="object"&&"after"in e)}function Dde(e){return!!(e&&typeof e=="object"&&"before"in e)}function Fde(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Lde(e,t){return Array.isArray(e)&&e.every(t.isDate)}function kd(e,t,n=Du){const r=Array.isArray(t)?t:[t],{isSameDay:i,differenceInCalendarDays:s,isAfter:a}=n;return r.some(o=>{if(typeof o=="boolean")return o;if(n.isDate(o))return i(e,o);if(Lde(o,n))return o.includes(e);if(Q5(o))return Cd(o,e,!1,n);if(Fde(o))return Array.isArray(o.dayOfWeek)?o.dayOfWeek.includes(e.getDay()):o.dayOfWeek===e.getDay();if(Ode(o)){const l=s(o.before,e),c=s(o.after,e),u=l>0,d=c<0;return a(o.before,o.after)?d&&u:u||d}return Pde(o)?s(e,o.after)>0:Dde(o)?s(o.before,e)>0:typeof o=="function"?o(e):!1})}function tat(e,t,n){const{disabled:r,hidden:i,modifiers:s,showOutsideDays:a,broadcastCalendar:o,today:l}=t,{isSameDay:c,isSameMonth:u,startOfMonth:d,isBefore:h,endOfMonth:m,isAfter:y}=n,b=t.startMonth&&d(t.startMonth),v=t.endMonth&&m(t.endMonth),x={[Gi.focused]:[],[Gi.outside]:[],[Gi.disabled]:[],[Gi.hidden]:[],[Gi.today]:[]},w={};for(const S of e){const{date:C,displayMonth:k}=S,A=!!(k&&!u(C,k)),R=!!(b&&h(C,b)),N=!!(v&&y(C,v)),I=!!(r&&kd(C,r,n)),O=!!(i&&kd(C,i,n))||R||N||!o&&!a&&A||o&&a===!1&&A,L=c(C,l??n.today());A&&x.outside.push(S),I&&x.disabled.push(S),O&&x.hidden.push(S),L&&x.today.push(S),s&&Object.keys(s).forEach(P=>{const V=s==null?void 0:s[P];V&&kd(C,V,n)&&(w[P]?w[P].push(S):w[P]=[S])})}return S=>{const C={[Gi.focused]:!1,[Gi.disabled]:!1,[Gi.hidden]:!1,[Gi.outside]:!1,[Gi.today]:!1},k={};for(const A in x){const R=x[A];C[A]=R.some(N=>N===S)}for(const A in w)k[A]=w[A].some(R=>R===S);return{...C,...k}}}function nat(e,t,n={}){return Object.entries(e).filter(([,i])=>i===!0).reduce((i,[s])=>(n[s]?i.push(n[s]):t[Gi[s]]?i.push(t[Gi[s]]):t[fc[s]]&&i.push(t[fc[s]]),i),[t[On.Day]])}function rat(e){return Ve.createElement("button",{...e})}function iat(e){return Ve.createElement("span",{...e})}function sat(e){const{size:t=24,orientation:n="left",className:r}=e;return Ve.createElement("svg",{className:r,width:t,height:t,viewBox:"0 0 24 24"},n==="up"&&Ve.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&Ve.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&Ve.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&Ve.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function aat(e){const{day:t,modifiers:n,...r}=e;return Ve.createElement("td",{...r})}function oat(e){const{day:t,modifiers:n,...r}=e,i=Ve.useRef(null);return Ve.useEffect(()=>{var s;n.focused&&((s=i.current)==null||s.focus())},[n.focused]),Ve.createElement("button",{ref:i,...r})}function lat(e){const{options:t,className:n,components:r,classNames:i,...s}=e,a=[i[On.Dropdown],n].join(" "),o=t==null?void 0:t.find(({value:l})=>l===s.value);return Ve.createElement("span",{"data-disabled":s.disabled,className:i[On.DropdownRoot]},Ve.createElement(r.Select,{className:a,...s},t==null?void 0:t.map(({value:l,label:c,disabled:u})=>Ve.createElement(r.Option,{key:l,value:l,disabled:u},c))),Ve.createElement("span",{className:i[On.CaptionLabel],"aria-hidden":!0},o==null?void 0:o.label,Ve.createElement(r.Chevron,{orientation:"down",size:18,className:i[On.Chevron]})))}function cat(e){return Ve.createElement("div",{...e})}function uat(e){return Ve.createElement("div",{...e})}function dat(e){const{calendarMonth:t,displayIndex:n,...r}=e;return Ve.createElement("div",{...r},e.children)}function fat(e){const{calendarMonth:t,displayIndex:n,...r}=e;return Ve.createElement("div",{...r})}function hat(e){return Ve.createElement("table",{...e})}function pat(e){return Ve.createElement("div",{...e})}const Bde=T.createContext(void 0);function G1(){const e=T.useContext(Bde);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function mat(e){const{components:t}=G1();return Ve.createElement(t.Dropdown,{...e})}function gat(e){const{onPreviousClick:t,onNextClick:n,previousMonth:r,nextMonth:i,...s}=e,{components:a,classNames:o,labels:{labelPrevious:l,labelNext:c}}=G1(),u=T.useCallback(h=>{i&&(n==null||n(h))},[i,n]),d=T.useCallback(h=>{r&&(t==null||t(h))},[r,t]);return Ve.createElement("nav",{...s},Ve.createElement(a.PreviousMonthButton,{type:"button",className:o[On.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:d},Ve.createElement(a.Chevron,{disabled:r?void 0:!0,className:o[On.Chevron],orientation:"left"})),Ve.createElement(a.NextMonthButton,{type:"button",className:o[On.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":c(i),onClick:u},Ve.createElement(a.Chevron,{disabled:i?void 0:!0,orientation:"right",className:o[On.Chevron]})))}function yat(e){const{components:t}=G1();return Ve.createElement(t.Button,{...e})}function bat(e){return Ve.createElement("option",{...e})}function vat(e){const{components:t}=G1();return Ve.createElement(t.Button,{...e})}function xat(e){const{rootRef:t,...n}=e;return Ve.createElement("div",{...n,ref:t})}function wat(e){return Ve.createElement("select",{...e})}function _at(e){const{week:t,...n}=e;return Ve.createElement("tr",{...n})}function Sat(e){return Ve.createElement("th",{...e})}function Cat(e){return Ve.createElement("thead",{"aria-hidden":!0},Ve.createElement("tr",{...e}))}function kat(e){const{week:t,...n}=e;return Ve.createElement("th",{...n})}function Eat(e){return Ve.createElement("th",{...e})}function Tat(e){return Ve.createElement("tbody",{...e})}function Aat(e){const{components:t}=G1();return Ve.createElement(t.Dropdown,{...e})}const Rat=Object.freeze(Object.defineProperty({__proto__:null,Button:rat,CaptionLabel:iat,Chevron:sat,Day:aat,DayButton:oat,Dropdown:lat,DropdownNav:cat,Footer:uat,Month:dat,MonthCaption:fat,MonthGrid:hat,Months:pat,MonthsDropdown:mat,Nav:gat,NextMonthButton:yat,Option:bat,PreviousMonthButton:vat,Root:xat,Select:wat,Week:_at,WeekNumber:kat,WeekNumberHeader:Eat,Weekday:Sat,Weekdays:Cat,Weeks:Tat,YearsDropdown:Aat},Symbol.toStringTag,{value:"Module"}));function Nat(e){return{...Rat,...e}}function Mat(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([n,r])=>{n.startsWith("data-")&&(t[n]=r)}),t}function eF(){const e={};for(const t in On)e[On[t]]=`rdp-${On[t]}`;for(const t in Gi)e[Gi[t]]=`rdp-${Gi[t]}`;for(const t in fc)e[fc[t]]=`rdp-${fc[t]}`;for(const t in Ko)e[Ko[t]]=`rdp-${Ko[t]}`;return e}function $de(e,t,n){return(n??new Qd(t)).format(e,"LLLL y")}const Iat=$de;function jat(e,t,n){return(n??new Qd(t)).format(e,"d")}function Oat(e,t=Du){return t.format(e,"LLLL")}function Pat(e,t=Du){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function Dat(){return""}function Fat(e,t,n){return(n??new Qd(t)).format(e,"cccccc")}function zde(e,t=Du){return t.format(e,"yyyy")}const Lat=zde,Bat=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:$de,formatDay:jat,formatMonthCaption:Iat,formatMonthDropdown:Oat,formatWeekNumber:Pat,formatWeekNumberHeader:Dat,formatWeekdayName:Fat,formatYearCaption:Lat,formatYearDropdown:zde},Symbol.toStringTag,{value:"Module"}));function $at(e){return e!=null&&e.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e!=null&&e.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...Bat,...e}}function zat(e,t,n,r,i){const{startOfMonth:s,startOfYear:a,endOfYear:o,eachMonthOfInterval:l,getMonth:c}=i;return l({start:a(e),end:o(e)}).map(h=>{const m=r.formatMonthDropdown(h,i),y=c(h),b=t&&h<s(t)||n&&h>s(n)||!1;return{value:y,label:m,disabled:b}})}function Uat(e,t={},n={}){let r={...t==null?void 0:t[On.Day]};return Object.entries(e).filter(([,i])=>i===!0).forEach(([i])=>{r={...r,...n==null?void 0:n[i]}}),r}function qat(e,t,n){const r=e.today(),i=t?e.startOfISOWeek(r):e.startOfWeek(r),s=[];for(let a=0;a<7;a++){const o=e.addDays(i,a);s.push(o)}return s}function Vat(e,t,n,r){if(!e||!t)return;const{startOfYear:i,endOfYear:s,addYears:a,getYear:o,isBefore:l,isSameYear:c}=r,u=i(e),d=s(t),h=[];let m=u;for(;l(m,d)||c(m,d);)h.push(m),m=a(m,1);return h.map(y=>{const b=n.formatYearDropdown(y,r);return{value:o(y),label:b,disabled:!1}})}function Ude(e,t,n){return(n??new Qd(t)).format(e,"LLLL y")}const Wat=Ude;function Hat(e,t,n,r){let i=(r??new Qd(n)).format(e,"PPPP");return t!=null&&t.today&&(i=`Today, ${i}`),i}function qde(e,t,n,r){let i=(r??new Qd(n)).format(e,"PPPP");return t.today&&(i=`Today, ${i}`),t.selected&&(i=`${i}, selected`),i}const Gat=qde;function Kat(){return""}function Yat(e){return"Choose the Month"}function Zat(e){return"Go to the Next Month"}function Xat(e){return"Go to the Previous Month"}function Jat(e,t,n){return(n??new Qd(t)).format(e,"cccc")}function Qat(e,t){return`Week ${e}`}function eot(e){return"Week Number"}function tot(e){return"Choose the Year"}const not=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:Wat,labelDay:Gat,labelDayButton:qde,labelGrid:Ude,labelGridcell:Hat,labelMonthDropdown:Yat,labelNav:Kat,labelNext:Zat,labelPrevious:Xat,labelWeekNumber:Qat,labelWeekNumberHeader:eot,labelWeekday:Jat,labelYearDropdown:tot},Symbol.toStringTag,{value:"Module"})),K1=e=>e instanceof HTMLElement?e:null,I3=e=>[...e.querySelectorAll("[data-animated-month]")??[]],rot=e=>K1(e.querySelector("[data-animated-month]")),j3=e=>K1(e.querySelector("[data-animated-caption]")),O3=e=>K1(e.querySelector("[data-animated-weeks]")),iot=e=>K1(e.querySelector("[data-animated-nav]")),sot=e=>K1(e.querySelector("[data-animated-weekdays]"));function aot(e,t,{classNames:n,months:r,focused:i,dateLib:s}){const a=T.useRef(null),o=T.useRef(r),l=T.useRef(!1);T.useLayoutEffect(()=>{const c=o.current;if(o.current=r,!t||!e.current||!(e.current instanceof HTMLElement)||r.length===0||c.length===0||r.length!==c.length)return;const u=s.isSameMonth(r[0].date,c[0].date),d=s.isAfter(r[0].date,c[0].date),h=d?n[Ko.caption_after_enter]:n[Ko.caption_before_enter],m=d?n[Ko.weeks_after_enter]:n[Ko.weeks_before_enter],y=a.current,b=e.current.cloneNode(!0);if(b instanceof HTMLElement?(I3(b).forEach(S=>{if(!(S instanceof HTMLElement))return;const C=rot(S);C&&S.contains(C)&&S.removeChild(C);const k=j3(S);k&&k.classList.remove(h);const A=O3(S);A&&A.classList.remove(m)}),a.current=b):a.current=null,l.current||u||i)return;const v=y instanceof HTMLElement?I3(y):[],x=I3(e.current);if(x&&x.every(w=>w instanceof HTMLElement)&&v&&v.every(w=>w instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const w=iot(e.current);w&&(w.style.zIndex="1"),x.forEach((S,C)=>{const k=v[C];if(!k)return;S.style.position="relative",S.style.overflow="hidden";const A=j3(S);A&&A.classList.add(h);const R=O3(S);R&&R.classList.add(m);const N=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),w&&(w.style.zIndex=""),A&&A.classList.remove(h),R&&R.classList.remove(m),S.style.position="",S.style.overflow="",S.contains(k)&&S.removeChild(k)};k.style.pointerEvents="none",k.style.position="absolute",k.style.overflow="hidden",k.setAttribute("aria-hidden","true");const I=sot(k);I&&(I.style.opacity="0");const O=j3(k);O&&(O.classList.add(d?n[Ko.caption_before_exit]:n[Ko.caption_after_exit]),O.addEventListener("animationend",N));const L=O3(k);L&&L.classList.add(d?n[Ko.weeks_before_exit]:n[Ko.weeks_after_exit]),S.insertBefore(k,S.firstChild)})}})}function oot(e,t,n,r){const i=e[0],s=e[e.length-1],{ISOWeek:a,fixedWeeks:o,broadcastCalendar:l}=n??{},{addDays:c,differenceInCalendarDays:u,differenceInCalendarMonths:d,endOfBroadcastWeek:h,endOfISOWeek:m,endOfMonth:y,endOfWeek:b,isAfter:v,startOfBroadcastWeek:x,startOfISOWeek:w,startOfWeek:S}=r,C=l?x(i,r):a?w(i):S(i),k=l?h(s):a?m(y(s)):b(y(s)),A=u(k,C),R=d(s,i)+1,N=[];for(let L=0;L<=A;L++){const P=c(C,L);if(t&&v(P,t))break;N.push(P)}const O=(l?35:42)*R;if(o&&N.length<O){const L=O-N.length;for(let P=0;P<L;P++){const V=c(N[N.length-1],1);N.push(V)}}return N}function lot(e){const t=[];return e.reduce((n,r)=>{const i=r.weeks.reduce((s,a)=>[...s,...a.days],t);return[...n,...i]},t)}function cot(e,t,n,r){const{numberOfMonths:i=1}=n,s=[];for(let a=0;a<i;a++){const o=r.addMonths(e,a);if(t&&o>t)break;s.push(o)}return s}function SW(e,t){const{month:n,defaultMonth:r,today:i=t.today(),numberOfMonths:s=1,endMonth:a,startMonth:o}=e;let l=n||r||i;const{differenceInCalendarMonths:c,addMonths:u,startOfMonth:d}=t;if(a&&c(a,l)<0){const h=-1*(s-1);l=u(a,h)}return o&&c(l,o)<0&&(l=o),d(l)}function uot(e,t,n,r){const{addDays:i,endOfBroadcastWeek:s,endOfISOWeek:a,endOfMonth:o,endOfWeek:l,getISOWeek:c,getWeek:u,startOfBroadcastWeek:d,startOfISOWeek:h,startOfWeek:m}=r,y=e.reduce((b,v)=>{const x=n.broadcastCalendar?d(v,r):n.ISOWeek?h(v):m(v),w=n.broadcastCalendar?s(v):n.ISOWeek?a(o(v)):l(o(v)),S=t.filter(R=>R>=x&&R<=w),C=n.broadcastCalendar?35:42;if(n.fixedWeeks&&S.length<C){const R=t.filter(N=>{const I=C-S.length;return N>w&&N<=i(w,I)});S.push(...R)}const k=S.reduce((R,N)=>{const I=n.ISOWeek?c(N):u(N),O=R.find(P=>P.weekNumber===I),L=new jde(N,v,r);return O?O.days.push(L):R.push(new eat(I,[L])),R},[]),A=new Qst(v,k);return b.push(A),b},[]);return n.reverseMonths?y.reverse():y}function dot(e,t){let{startMonth:n,endMonth:r}=e;const{startOfYear:i,startOfDay:s,startOfMonth:a,endOfMonth:o,addYears:l,endOfYear:c,newDate:u,today:d}=t,{fromYear:h,toYear:m,fromMonth:y,toMonth:b}=e;!n&&y&&(n=y),!n&&h&&(n=t.newDate(h,0,1)),!r&&b&&(r=b),!r&&m&&(r=u(m,11,31));const v=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return n?n=a(n):h?n=u(h,0,1):!n&&v&&(n=i(l(e.today??d(),-100))),r?r=o(r):m?r=u(m,11,31):!r&&v&&(r=c(e.today??d())),[n&&s(n),r&&s(r)]}function fot(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:s=1}=n,{startOfMonth:a,addMonths:o,differenceInCalendarMonths:l}=r,c=i?s:1,u=a(e);if(!t)return o(u,c);if(!(l(t,e)<s))return o(u,c)}function hot(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:s}=n,{startOfMonth:a,addMonths:o,differenceInCalendarMonths:l}=r,c=i?s??1:1,u=a(e);if(!t)return o(u,-c);if(!(l(u,t)<=0))return o(u,-c)}function pot(e){const t=[];return e.reduce((n,r)=>[...n,...r.weeks],t)}function dA(e,t){const[n,r]=T.useState(e);return[t===void 0?n:t,r]}function mot(e,t){const[n,r]=dot(e,t),{startOfMonth:i,endOfMonth:s}=t,a=SW(e,t),[o,l]=dA(a,e.month?a:void 0);T.useEffect(()=>{const A=SW(e,t);l(A)},[e.timeZone]);const c=cot(o,r,e,t),u=oot(c,e.endMonth?s(e.endMonth):void 0,e,t),d=uot(c,u,e,t),h=pot(d),m=lot(d),y=hot(o,n,e,t),b=fot(o,r,e,t),{disableNavigation:v,onMonthChange:x}=e,w=A=>h.some(R=>R.days.some(N=>N.isEqualTo(A))),S=A=>{if(v)return;let R=i(A);n&&R<i(n)&&(R=i(n)),r&&R>i(r)&&(R=i(r)),l(R),x==null||x(R)};return{months:d,weeks:h,days:m,navStart:n,navEnd:r,previousMonth:y,nextMonth:b,goToMonth:S,goToDay:A=>{w(A)||S(A.date)}}}var Jc;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(Jc||(Jc={}));function CW(e){return!e[Gi.disabled]&&!e[Gi.hidden]&&!e[Gi.outside]}function got(e,t,n,r){let i,s=-1;for(const a of e){const o=t(a);CW(o)&&(o[Gi.focused]&&s<Jc.FocusedModifier?(i=a,s=Jc.FocusedModifier):r!=null&&r.isEqualTo(a)&&s<Jc.LastFocused?(i=a,s=Jc.LastFocused):n(a.date)&&s<Jc.Selected?(i=a,s=Jc.Selected):o[Gi.today]&&s<Jc.Today&&(i=a,s=Jc.Today))}return i||(i=e.find(a=>CW(t(a)))),i}function yot(e,t,n,r,i,s,a){const{ISOWeek:o,broadcastCalendar:l}=s,{addDays:c,addMonths:u,addWeeks:d,addYears:h,endOfBroadcastWeek:m,endOfISOWeek:y,endOfWeek:b,max:v,min:x,startOfBroadcastWeek:w,startOfISOWeek:S,startOfWeek:C}=a;let A={day:c,week:d,month:u,year:h,startOfWeek:R=>l?w(R,a):o?S(R):C(R),endOfWeek:R=>l?m(R):o?y(R):b(R)}[e](n,t==="after"?1:-1);return t==="before"&&r?A=v([r,A]):t==="after"&&i&&(A=x([i,A])),A}function Vde(e,t,n,r,i,s,a,o=0){if(o>365)return;const l=yot(e,t,n.date,r,i,s,a),c=!!(s.disabled&&kd(l,s.disabled,a)),u=!!(s.hidden&&kd(l,s.hidden,a)),d=l,h=new jde(l,d,a);return!c&&!u?h:Vde(e,t,h,r,i,s,a,o+1)}function bot(e,t,n,r,i){const{autoFocus:s}=e,[a,o]=T.useState(),l=got(t.days,n,r||(()=>!1),a),[c,u]=T.useState(s?l:void 0);return{isFocusTarget:b=>!!(l!=null&&l.isEqualTo(b)),setFocused:u,focused:c,blur:()=>{o(c),u(void 0)},moveFocus:(b,v)=>{if(!c)return;const x=Vde(b,v,c,t.navStart,t.navEnd,e,i);x&&(t.goToDay(x),u(x))}}}function vot(e,t){const{selected:n,required:r,onSelect:i}=e,[s,a]=dA(n,i?n:void 0),o=i?n:s,{isSameDay:l}=t,c=m=>(o==null?void 0:o.some(y=>l(y,m)))??!1,{min:u,max:d}=e;return{selected:o,select:(m,y,b)=>{let v=[...o??[]];if(c(m)){if((o==null?void 0:o.length)===u||r&&(o==null?void 0:o.length)===1)return;v=o==null?void 0:o.filter(x=>!l(x,m))}else(o==null?void 0:o.length)===d?v=[m]:v=[...v,m];return i||a(v),i==null||i(v,m,y,b),v},isSelected:c}}function xot(e,t,n=0,r=0,i=!1,s=Du){const{from:a,to:o}=t||{},{isSameDay:l,isAfter:c,isBefore:u}=s;let d;if(!a&&!o)d={from:e,to:n>0?void 0:e};else if(a&&!o)l(a,e)?i?d={from:a,to:void 0}:d=void 0:u(e,a)?d={from:e,to:a}:d={from:a,to:e};else if(a&&o)if(l(a,e)&&l(o,e))i?d={from:a,to:o}:d=void 0;else if(l(a,e))d={from:a,to:n>0?void 0:e};else if(l(o,e))d={from:e,to:n>0?void 0:e};else if(u(e,a))d={from:e,to:o};else if(c(e,a))d={from:a,to:e};else if(c(e,o))d={from:a,to:e};else throw new Error("Invalid range");if(d!=null&&d.from&&(d!=null&&d.to)){const h=s.differenceInCalendarDays(d.to,d.from);r>0&&h>r?d={from:e,to:void 0}:n>1&&h<n&&(d={from:e,to:void 0})}return d}function wot(e,t,n=Du){const r=Array.isArray(t)?t:[t];let i=e.from;const s=n.differenceInCalendarDays(e.to,e.from),a=Math.min(s,6);for(let o=0;o<=a;o++){if(r.includes(i.getDay()))return!0;i=n.addDays(i,1)}return!1}function kW(e,t,n=Du){return Cd(e,t.from,!1,n)||Cd(e,t.to,!1,n)||Cd(t,e.from,!1,n)||Cd(t,e.to,!1,n)}function _ot(e,t,n=Du){const r=Array.isArray(t)?t:[t];if(r.filter(o=>typeof o!="function").some(o=>typeof o=="boolean"?o:n.isDate(o)?Cd(e,o,!1,n):Lde(o,n)?o.some(l=>Cd(e,l,!1,n)):Q5(o)?o.from&&o.to?kW(e,{from:o.from,to:o.to},n):!1:Fde(o)?wot(e,o.dayOfWeek,n):Ode(o)?n.isAfter(o.before,o.after)?kW(e,{from:n.addDays(o.after,1),to:n.addDays(o.before,-1)},n):kd(e.from,o,n)||kd(e.to,o,n):Pde(o)||Dde(o)?kd(e.from,o,n)||kd(e.to,o,n):!1))return!0;const a=r.filter(o=>typeof o=="function");if(a.length){let o=e.from;const l=n.differenceInCalendarDays(e.to,e.from);for(let c=0;c<=l;c++){if(a.some(u=>u(o)))return!0;o=n.addDays(o,1)}}return!1}function Sot(e,t){const{disabled:n,excludeDisabled:r,selected:i,required:s,onSelect:a}=e,[o,l]=dA(i,a?i:void 0),c=a?i:o;return{selected:c,select:(h,m,y)=>{const{min:b,max:v}=e,x=h?xot(h,c,b,v,s,t):void 0;return r&&n&&(x!=null&&x.from)&&x.to&&_ot({from:x.from,to:x.to},n,t)&&(x.from=h,x.to=void 0),a||l(x),a==null||a(x,h,m,y),x},isSelected:h=>c&&Cd(c,h,!1,t)}}function Cot(e,t){const{selected:n,required:r,onSelect:i}=e,[s,a]=dA(n,i?n:void 0),o=i?n:s,{isSameDay:l}=t;return{selected:o,select:(d,h,m)=>{let y=d;return!r&&o&&o&&l(d,o)&&(y=void 0),i||a(y),i==null||i(y,d,h,m),y},isSelected:d=>o?l(o,d):!1}}function kot(e,t){const n=Cot(e,t),r=vot(e,t),i=Sot(e,t);switch(e.mode){case"single":return n;case"multiple":return r;case"range":return i;default:return}}function Eot(e){var bt;let t=e;t.timeZone&&(t={...e},t.today&&(t.today=new Ra(t.today,t.timeZone)),t.month&&(t.month=new Ra(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new Ra(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new Ra(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new Ra(t.endMonth,t.timeZone)),t.mode==="single"&&t.selected?t.selected=new Ra(t.selected,t.timeZone):t.mode==="multiple"&&t.selected?t.selected=(bt=t.selected)==null?void 0:bt.map(ot=>new Ra(ot,t.timeZone)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?new Ra(t.selected.from,t.timeZone):void 0,to:t.selected.to?new Ra(t.selected.to,t.timeZone):void 0}));const{components:n,formatters:r,labels:i,dateLib:s,locale:a,classNames:o}=T.useMemo(()=>{const ot={...XE,...t.locale};return{dateLib:new Qd({locale:ot,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:Nat(t.components),formatters:$at(t.formatters),labels:{...not,...t.labels},locale:ot,classNames:{...eF(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:l,mode:c,navLayout:u,numberOfMonths:d=1,onDayBlur:h,onDayClick:m,onDayFocus:y,onDayKeyDown:b,onDayMouseEnter:v,onDayMouseLeave:x,onNextClick:w,onPrevClick:S,showWeekNumber:C,styles:k}=t,{formatCaption:A,formatDay:R,formatMonthDropdown:N,formatWeekNumber:I,formatWeekNumberHeader:O,formatWeekdayName:L,formatYearDropdown:P}=r,V=mot(t,s),{days:F,months:J,navStart:U,navEnd:G,previousMonth:$,nextMonth:ne,goToMonth:W}=V,te=tat(F,t,s),{isSelected:ee,select:re,selected:de}=kot(t,s)??{},{blur:oe,focused:Ie,isFocusTarget:je,moveFocus:Me,setFocused:Se}=bot(t,V,te,ee??(()=>!1),s),{labelDayButton:qe,labelGridcell:Qe,labelGrid:We,labelMonthDropdown:Re,labelNav:K,labelPrevious:ge,labelNext:Te,labelWeekday:ce,labelWeekNumber:le,labelWeekNumberHeader:ie,labelYearDropdown:Ee}=i,Be=T.useMemo(()=>qat(s,t.ISOWeek),[s,t.ISOWeek]),Ce=c!==void 0||m!==void 0,ct=T.useCallback(()=>{$&&(W($),S==null||S($))},[$,W,S]),Tt=T.useCallback(()=>{ne&&(W(ne),w==null||w(ne))},[W,ne,w]),ft=T.useCallback((ot,B)=>$e=>{$e.preventDefault(),$e.stopPropagation(),Se(ot),re==null||re(ot.date,B,$e),m==null||m(ot.date,B,$e)},[re,m,Se]),Pt=T.useCallback((ot,B)=>$e=>{Se(ot),y==null||y(ot.date,B,$e)},[y,Se]),Ut=T.useCallback((ot,B)=>$e=>{oe(),h==null||h(ot.date,B,$e)},[oe,h]),Bt=T.useCallback((ot,B)=>$e=>{const it={ArrowLeft:["day",t.dir==="rtl"?"after":"before"],ArrowRight:["day",t.dir==="rtl"?"before":"after"],ArrowDown:["week","after"],ArrowUp:["week","before"],PageUp:[$e.shiftKey?"year":"month","before"],PageDown:[$e.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(it[$e.key]){$e.preventDefault(),$e.stopPropagation();const[ye,_e]=it[$e.key];Me(ye,_e)}b==null||b(ot.date,B,$e)},[Me,b,t.dir]),tn=T.useCallback((ot,B)=>$e=>{v==null||v(ot.date,B,$e)},[v]),xe=T.useCallback((ot,B)=>$e=>{x==null||x(ot.date,B,$e)},[x]),D=T.useCallback(ot=>B=>{const $e=Number(B.target.value),it=s.setMonth(s.startOfMonth(ot),$e);W(it)},[s,W]),Z=T.useCallback(ot=>B=>{const $e=Number(B.target.value),it=s.setYear(s.startOfMonth(ot),$e);W(it)},[s,W]),{className:me,style:De}=T.useMemo(()=>({className:[o[On.Root],t.className].filter(Boolean).join(" "),style:{...k==null?void 0:k[On.Root],...t.style}}),[o,t.className,t.style,k]),we=Mat(t),Ne=T.useRef(null);aot(Ne,!!t.animate,{classNames:o,months:J,focused:Ie,dateLib:s});const fe={dayPickerProps:t,selected:de,select:re,isSelected:ee,months:J,nextMonth:ne,previousMonth:$,goToMonth:W,getModifiers:te,components:n,classNames:o,styles:k,labels:i,formatters:r};return Ve.createElement(Bde.Provider,{value:fe},Ve.createElement(n.Root,{rootRef:t.animate?Ne:void 0,className:me,style:De,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],...we},Ve.createElement(n.Months,{className:o[On.Months],style:k==null?void 0:k[On.Months]},!t.hideNavigation&&!u&&Ve.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:o[On.Nav],style:k==null?void 0:k[On.Nav],"aria-label":K(),onPreviousClick:ct,onNextClick:Tt,previousMonth:$,nextMonth:ne}),J.map((ot,B)=>{const $e=zat(ot.date,U,G,r,s),it=Vat(U,G,r,s);return Ve.createElement(n.Month,{"data-animated-month":t.animate?"true":void 0,className:o[On.Month],style:k==null?void 0:k[On.Month],key:B,displayIndex:B,calendarMonth:ot},u==="around"&&!t.hideNavigation&&B===0&&Ve.createElement(n.PreviousMonthButton,{type:"button",className:o[On.PreviousMonthButton],tabIndex:$?void 0:-1,"aria-disabled":$?void 0:!0,"aria-label":ge($),onClick:ct,"data-animated-button":t.animate?"true":void 0},Ve.createElement(n.Chevron,{disabled:$?void 0:!0,className:o[On.Chevron],orientation:t.dir==="rtl"?"right":"left"})),Ve.createElement(n.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:o[On.MonthCaption],style:k==null?void 0:k[On.MonthCaption],calendarMonth:ot,displayIndex:B},l!=null&&l.startsWith("dropdown")?Ve.createElement(n.DropdownNav,{className:o[On.Dropdowns],style:k==null?void 0:k[On.Dropdowns]},l==="dropdown"||l==="dropdown-months"?Ve.createElement(n.MonthsDropdown,{className:o[On.MonthsDropdown],"aria-label":Re(),classNames:o,components:n,disabled:!!t.disableNavigation,onChange:D(ot.date),options:$e,style:k==null?void 0:k[On.Dropdown],value:s.getMonth(ot.date)}):Ve.createElement("span",null,N(ot.date,s)),l==="dropdown"||l==="dropdown-years"?Ve.createElement(n.YearsDropdown,{className:o[On.YearsDropdown],"aria-label":Ee(s.options),classNames:o,components:n,disabled:!!t.disableNavigation,onChange:Z(ot.date),options:it,style:k==null?void 0:k[On.Dropdown],value:s.getYear(ot.date)}):Ve.createElement("span",null,P(ot.date,s)),Ve.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},A(ot.date,s.options,s))):Ve.createElement(n.CaptionLabel,{className:o[On.CaptionLabel],role:"status","aria-live":"polite"},A(ot.date,s.options,s))),u==="around"&&!t.hideNavigation&&B===d-1&&Ve.createElement(n.NextMonthButton,{type:"button",className:o[On.NextMonthButton],tabIndex:ne?void 0:-1,"aria-disabled":ne?void 0:!0,"aria-label":Te(ne),onClick:Tt,"data-animated-button":t.animate?"true":void 0},Ve.createElement(n.Chevron,{disabled:ne?void 0:!0,className:o[On.Chevron],orientation:t.dir==="rtl"?"left":"right"})),B===d-1&&u==="after"&&!t.hideNavigation&&Ve.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:o[On.Nav],style:k==null?void 0:k[On.Nav],"aria-label":K(),onPreviousClick:ct,onNextClick:Tt,previousMonth:$,nextMonth:ne}),Ve.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":c==="multiple"||c==="range","aria-label":We(ot.date,s.options,s)||void 0,className:o[On.MonthGrid],style:k==null?void 0:k[On.MonthGrid]},!t.hideWeekdays&&Ve.createElement(n.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:o[On.Weekdays],style:k==null?void 0:k[On.Weekdays]},C&&Ve.createElement(n.WeekNumberHeader,{"aria-label":ie(s.options),className:o[On.WeekNumberHeader],style:k==null?void 0:k[On.WeekNumberHeader],scope:"col"},O()),Be.map((ye,_e)=>Ve.createElement(n.Weekday,{"aria-label":ce(ye,s.options,s),className:o[On.Weekday],key:_e,style:k==null?void 0:k[On.Weekday],scope:"col"},L(ye,s.options,s)))),Ve.createElement(n.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:o[On.Weeks],style:k==null?void 0:k[On.Weeks]},ot.weeks.map((ye,_e)=>Ve.createElement(n.Week,{className:o[On.Week],key:ye.weekNumber,style:k==null?void 0:k[On.Week],week:ye},C&&Ve.createElement(n.WeekNumber,{week:ye,style:k==null?void 0:k[On.WeekNumber],"aria-label":le(ye.weekNumber,{locale:a}),className:o[On.WeekNumber],scope:"row",role:"rowheader"},I(ye.weekNumber,s)),ye.days.map(ze=>{const{date:kt}=ze,he=te(ze);if(he[Gi.focused]=!he.hidden&&!!(Ie!=null&&Ie.isEqualTo(ze)),he[fc.selected]=(ee==null?void 0:ee(kt))||he.selected,Q5(de)){const{from:be,to:Oe}=de;he[fc.range_start]=!!(be&&Oe&&s.isSameDay(kt,be)),he[fc.range_end]=!!(be&&Oe&&s.isSameDay(kt,Oe)),he[fc.range_middle]=Cd(de,kt,!0,s)}const Y=Uat(he,k,t.modifiersStyles),H=nat(he,o,t.modifiersClassNames),X=!Ce&&!he.hidden?Qe(kt,he,s.options,s):void 0;return Ve.createElement(n.Day,{key:`${s.format(kt,"yyyy-MM-dd")}_${s.format(ze.displayMonth,"yyyy-MM")}`,day:ze,modifiers:he,className:H.join(" "),style:Y,role:"gridcell","aria-selected":he.selected||void 0,"aria-label":X,"data-day":s.format(kt,"yyyy-MM-dd"),"data-month":ze.outside?s.format(kt,"yyyy-MM"):void 0,"data-selected":he.selected||void 0,"data-disabled":he.disabled||void 0,"data-hidden":he.hidden||void 0,"data-outside":ze.outside||void 0,"data-focused":he.focused||void 0,"data-today":he.today||void 0},!he.hidden&&Ce?Ve.createElement(n.DayButton,{className:o[On.DayButton],style:k==null?void 0:k[On.DayButton],type:"button",day:ze,modifiers:he,disabled:he.disabled||void 0,tabIndex:je(ze)?0:-1,"aria-label":qe(kt,he,s.options,s),onClick:ft(ze,he),onBlur:Ut(ze,he),onFocus:Pt(ze,he),onKeyDown:Bt(ze,he),onMouseEnter:tn(ze,he),onMouseLeave:xe(ze,he)},R(kt,s.options,s)):!he.hidden&&R(ze.date,s.options,s))}))))))})),t.footer&&Ve.createElement(n.Footer,{className:o[On.Footer],style:k==null?void 0:k[On.Footer],role:"status","aria-live":"polite"},t.footer)))}function Tot({className:e,classNames:t,showOutsideDays:n=!0,captionLayout:r="label",buttonVariant:i="ghost",formatters:s,components:a,...o}){const l=eF();return p.jsx(Eot,{showOutsideDays:n,className:Ye("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:r,formatters:{formatMonthDropdown:c=>c.toLocaleString("default",{month:"short"}),...s},classNames:{root:Ye("w-fit",l.root),months:Ye("flex gap-4 flex-col md:flex-row relative",l.months),month:Ye("flex flex-col w-full gap-4",l.month),nav:Ye("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",l.nav),button_previous:Ye(W3({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",l.button_previous),button_next:Ye(W3({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",l.button_next),month_caption:Ye("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",l.month_caption),dropdowns:Ye("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",l.dropdowns),dropdown_root:Ye("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",l.dropdown_root),dropdown:Ye("absolute inset-0 opacity-0",l.dropdown),caption_label:Ye("select-none font-medium",r==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",l.caption_label),table:"w-full border-collapse",weekdays:Ye("flex",l.weekdays),weekday:Ye("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",l.weekday),week:Ye("flex w-full mt-2",l.week),week_number_header:Ye("select-none w-(--cell-size)",l.week_number_header),week_number:Ye("text-[0.8rem] select-none text-muted-foreground",l.week_number),day:Ye("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",l.day),range_start:Ye("rounded-l-md bg-accent",l.range_start),range_middle:Ye("rounded-none",l.range_middle),range_end:Ye("rounded-r-md bg-accent",l.range_end),today:Ye("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",l.today),outside:Ye("text-muted-foreground aria-selected:text-muted-foreground",l.outside),disabled:Ye("text-muted-foreground opacity-50",l.disabled),hidden:Ye("invisible",l.hidden),...t},components:{Root:({className:c,rootRef:u,...d})=>p.jsx("div",{"data-slot":"calendar",ref:u,className:Ye(c),...d}),Chevron:({className:c,orientation:u,...d})=>u==="left"?p.jsx(Qpe,{className:Ye("size-4",c),...d}):u==="right"?p.jsx(DO,{className:Ye("size-4",c),...d}):p.jsx(Tc,{className:Ye("size-4",c),...d}),DayButton:Aot,WeekNumber:({children:c,...u})=>p.jsx("td",{...u,children:p.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:c})}),...a},...o})}function Aot({className:e,day:t,modifiers:n,...r}){const i=eF(),s=T.useRef(null);return T.useEffect(()=>{var a;n.focused&&((a=s.current)==null||a.focus())},[n.focused]),p.jsx(St,{ref:s,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,"data-range-start":n.range_start,"data-range-end":n.range_end,"data-range-middle":n.range_middle,className:Ye("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",i.day,e),...r})}const Rot=({fieldApi:e,label:t,placeholder:n="Pick a date",description:r,inputClassName:i,labelClassName:s,wrapperClassName:a})=>{const[o,l]=Ve.useState(!1),c=e.state.value?e.state.value instanceof Date?e.state.value:typeof e.state.value=="string"?qRe(e.state.value):void 0:void 0,u=d=>{e.handleChange(d),e.handleBlur(),l(!1)};return p.jsxs("div",{className:Ye("space-y-1.5",a),children:[t&&p.jsx(zt,{htmlFor:e.name+"-trigger",className:Ye("text-sm font-medium",s),children:t}),r&&p.jsx("p",{className:"text-xs text-muted-foreground",children:r}),p.jsxs(ul,{open:o,onOpenChange:l,children:[p.jsx(dl,{asChild:!0,children:p.jsxs(St,{id:e.name+"-trigger",variant:"outline",className:Ye("w-full justify-start text-left font-normal",!c&&"text-muted-foreground",i,e.state.meta.errors.length?"border-destructive":""),disabled:e.form.state.isSubmitting,onBlur:e.handleBlur,children:[p.jsx(Ype,{className:"mr-2 h-4 w-4"}),c?nw(c,"PPP"):p.jsx("span",{children:n})]})}),p.jsx(fl,{className:"w-auto p-0",children:p.jsx(Tot,{mode:"single",selected:c,onSelect:u,initialFocus:!0,disabled:e.form.state.isSubmitting})})]}),e.state.meta.isTouched&&e.state.meta.errors.length>0&&p.jsx("div",{className:"text-xs text-destructive pt-1",children:e.state.meta.errors.map((d,h)=>p.jsx("p",{children:String(d)},h))})]})},Not=({fieldApi:e,label:t,description:n,min:r=0,max:i=100,step:s=1,valueLabelPrefix:a="",valueLabelSuffix:o="",valueDisplayPrecision:l=0,showRawValue:c=!1,wrapperClassName:u,inputClassName:d,labelClassName:h})=>{const{name:m,state:y,handleChange:b,handleBlur:v}=e,x=typeof y.value=="number"?y.value:r,w=x.toFixed(l);return p.jsxs("div",{className:Ye("space-y-1.5",u),children:[t&&p.jsxs(zt,{htmlFor:m,className:Ye("text-sm font-medium",h),children:[t," (",a,w,o,")",c&&p.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(Raw: ",y.value,")"]})]}),n&&p.jsx("p",{className:"text-xs text-muted-foreground",children:n}),p.jsx(f0,{id:m,name:m,value:[x],onValueChange:S=>b(S[0]),onBlur:v,disabled:e.form.state.isSubmitting,min:r,max:i,step:s,className:Ye(d,y.meta.errors.length?"border-destructive":"")}),y.meta.isTouched&&y.meta.errors.length>0&&p.jsx("div",{className:"text-xs text-destructive pt-1",children:y.meta.errors.map((S,C)=>p.jsx("p",{children:typeof S=="string"?S:(S==null?void 0:S.message)||"Invalid"},C))})]})},Mot=({fieldApi:e,label:t,accept:n,className:r,wrapperClassName:i,description:s})=>{const{name:a,state:o,handleChange:l,handleBlur:c}=e,u=o.value,d=y=>{var v;const b=((v=y.target.files)==null?void 0:v[0])??null;l(b),c()},h=()=>{l(null);const y=document.getElementById(a);y&&(y.value=""),c()},m=()=>{const y=document.getElementById(a);y==null||y.click()};return p.jsxs("div",{className:Ye("space-y-1.5",i),children:[t&&p.jsx(zt,{className:"text-sm font-medium cursor-pointer",onClick:m,children:t}),s&&p.jsx("p",{className:"text-xs text-muted-foreground",children:s}),p.jsx(Un,{id:a,name:a,type:"file",accept:n,onChange:d,className:"hidden"}),u?p.jsxs("div",{className:"flex items-center justify-between p-2.5 border rounded-lg bg-muted/40 shadow-sm hover:shadow-md transition-shadow",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm overflow-hidden",children:[p.jsx(rE,{className:"h-5 w-5 text-primary shrink-0"}),p.jsx("span",{className:"truncate",title:u.name,children:u.name}),p.jsxs("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:["(",(u.size/1024).toFixed(1)," KB)"]})]}),p.jsx(St,{type:"button",variant:"ghost",size:"icon",onClick:h,className:"h-7 w-7 text-destructive hover:bg-destructive/10 shrink-0","aria-label":"Remove file",children:p.jsx(va,{className:"h-4 w-4"})})]}):p.jsxs("button",{type:"button",onClick:m,className:Ye("w-full flex flex-col items-center justify-center p-4 border-2 border-dashed rounded-lg hover:border-primary transition-colors cursor-pointer bg-background hover:bg-muted/50",r,o.meta.errors.length?"border-destructive hover:border-destructive":"border-muted-foreground/50"),children:[p.jsx(FO,{className:"h-8 w-8 text-muted-foreground mb-2"}),p.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Click or drag and drop a file"}),n&&p.jsxs("span",{className:"text-xs text-muted-foreground/80 mt-1",children:["Accepted types: ",n]})]}),o.meta.isTouched&&o.meta.errors.length>0&&p.jsx("div",{className:"text-xs text-destructive pt-1",children:o.meta.errors.map((y,b)=>p.jsx("p",{children:typeof y=="string"?y:(y==null?void 0:y.message)||"Invalid"},b))})]})},Iot={text:ex,email:ex,password:ex,url:ex,textarea:Ust,select:qst,checkbox:Vst,switch:Wst,number:Hst,date:Rot,slider:Not,file:Mot},jot=({value:e,currentPage:t,totalPages:n,className:r})=>p.jsxs("div",{className:Ye("space-y-2",r),children:[p.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[p.jsxs("span",{children:["Step ",t," of ",n]}),p.jsxs("span",{children:[Math.round(e),"%"]})]}),p.jsx(gy,{value:e,className:"h-2"})]}),Oot=({children:e,title:t,description:n})=>p.jsxs("div",{className:"space-y-6",children:[(t||n)&&p.jsxs("div",{className:"space-y-2",children:[t&&p.jsx("h3",{className:"text-lg font-semibold",children:t}),n&&p.jsx("p",{className:"text-muted-foreground",children:n})]}),p.jsx("div",{className:"space-y-4",children:e})]});function Pot(e){const{fields:t=[],schema:n,submitLabel:r="Submit",nextLabel:i="Next",previousLabel:s="Previous",formClassName:a,fieldClassName:o,pages:l=[],progress:c,defaultComponents:u={},globalWrapper:d,formOptions:h,onPageChange:m}=e,[y,b]=T.useState(1),v={...Iot,...u},x=T.useMemo(()=>{const F={};return t.forEach(J=>{const U=J.page||1;F[U]||(F[U]=[]),F[U].push(J)}),F},[t]),w=Math.max(...Object.keys(x).map(Number),1),S=w>1,C=S?(y-1)/(w-1)*100:100,k={...h,...n&&{validators:{onChange:n,...h==null?void 0:h.validators}}},A=Ns(k),R=()=>x[y]||[],N=()=>l.find(F=>F.page===y),I=()=>{if(y<w){const F=y+1;b(F),m==null||m(F,"next")}},O=()=>{if(y>1){const F=y-1;b(F),m==null||m(F,"previous")}},L=y===w,P=y===1;return{form:A,Form:({className:F,children:J,onSubmit:U})=>{const G=re=>{re.preventDefault(),re.stopPropagation(),U?U(re):L?A.handleSubmit():I()},$=Ye("space-y-6",a,F),ne=re=>{const{name:de,type:oe,label:Ie,placeholder:je,description:Me,options:Se,min:qe,max:Qe,step:We,accept:Re,multiple:K,component:ge,wrapper:Te,conditional:ce,validation:le}=re;return p.jsx(A.Field,{name:de,validators:le?{onChange:le}:void 0,children:ie=>{const Ee=ie.form.state.values;if(ce&&!ce(Ee))return null;const Be={fieldApi:ie,label:Ie,placeholder:je,description:Me,wrapperClassName:o,min:qe,max:Qe,step:We,accept:Re,multiple:K},Ce=ge||v[oe]||ex,ct=oe==="select"?{...Be,options:Se||[]}:{...Be,type:["text","email","password","url"].includes(oe)?oe:void 0},Tt=p.jsx(Ce,{...ct}),ft=Te||d;return ft?p.jsx(ft,{field:re,children:Tt}):Tt}},de)},W=()=>{const re=R(),de=N();return p.jsx(A.Subscribe,{selector:oe=>oe.values,children:()=>{const oe=re.map(je=>ne(je)).filter(Boolean),Ie=(de==null?void 0:de.component)||Oot;return p.jsx(Ie,{title:de==null?void 0:de.title,description:de==null?void 0:de.description,page:y,totalPages:w,children:oe})}})},te=()=>{if(!S||!c)return null;const re=c.component||jot;return p.jsx(re,{value:C,currentPage:y,totalPages:w,className:c.className})},ee=()=>S?p.jsx(A.Subscribe,{selector:re=>({canSubmit:re.canSubmit,isSubmitting:re.isSubmitting}),children:re=>{const{canSubmit:de,isSubmitting:oe}=re;return p.jsxs("div",{className:"flex justify-between gap-4",children:[p.jsx(St,{type:"button",variant:"outline",onClick:O,disabled:P,className:P?"invisible":"",children:s}),p.jsx(St,{type:"submit",disabled:(!de||oe)&&L,className:"flex-1 max-w-xs",children:oe&&L?"Submitting...":L?r:i})]})}}):p.jsx(A.Subscribe,{selector:re=>({canSubmit:re.canSubmit,isSubmitting:re.isSubmitting}),children:re=>{const{canSubmit:de,isSubmitting:oe}=re;return p.jsx(St,{type:"submit",disabled:!de||oe,className:"w-full",children:oe?"Submitting...":r})}});return p.jsx("form",{onSubmit:G,className:$,children:J||p.jsxs(p.Fragment,{children:[te(),W(),ee()]})})},currentPage:y,totalPages:w,goToNextPage:I,goToPreviousPage:O,setCurrentPage:b,isFirstPage:P,isLastPage:L,progressValue:C}}function Dot({templates:e,onSelect:t}){const[n,r]=T.useState(""),i=e.filter(s=>s.name.toLowerCase().includes(n.toLowerCase())||s.description.toLowerCase().includes(n.toLowerCase())||s.tags.some(a=>a.toLowerCase().includes(n.toLowerCase())));return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(zt,{htmlFor:"search",children:"Search Templates"}),p.jsx(Un,{id:"search",placeholder:"Search by name, description, or tags...",value:n,onChange:s=>r(s.target.value)})]}),p.jsx("div",{className:"grid gap-3",children:i.length===0?p.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n?"No templates match your search.":"No templates available."}):i.map(s=>p.jsxs(DT,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>t(s),children:[p.jsx(FT,{className:"pb-3",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx(LT,{className:"text-sm",children:s.name}),p.jsx($6,{className:"text-xs",children:s.description})]}),s.isPublic&&p.jsx(As,{variant:"default",className:"text-xs",children:"Public"})]})}),p.jsx(BT,{className:"pt-0",children:p.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.map(a=>p.jsx(As,{variant:"outline",className:"text-xs",children:a},a)),s.variables.length>0&&p.jsxs(As,{variant:"secondary",className:"text-xs",children:[s.variables.length," variables"]}),s.tools&&s.tools.length>0&&p.jsxs(As,{variant:"secondary",className:"text-xs",children:[s.tools.length," tools"]}),s.rules&&s.rules.length>0&&p.jsxs(As,{variant:"secondary",className:"text-xs",children:[s.rules.length," rules"]})]})})]},s.id))})]})}function Fot({template:e,onSubmit:t,onBack:n}){console.log("PromptTemplateForm - template.variables:",e.variables),console.log("PromptTemplateForm - template.prompt:",e.prompt);const r=e.variables.map(a=>({name:a.name,type:a.type==="boolean"?"switch":a.type==="number"?"number":a.type==="array"?"textarea":"text",label:a.name,placeholder:a.default||`Enter ${a.name}`,description:a.description||a.instructions,required:a.required}));console.log("PromptTemplateForm - fieldConfigs:",r);const i=e.variables.reduce((a,o)=>{if(o.default)if(o.type==="number")a[o.name]=parseFloat(o.default)||0;else if(o.type==="boolean")a[o.name]=o.default.toLowerCase()==="true";else if(o.type==="array")try{a[o.name]=JSON.parse(o.default)}catch{a[o.name]=o.default.split(",").map(l=>l.trim())}else a[o.name]=o.default;return a},{}),{Form:s}=Pot({fields:r,submitLabel:"Apply Template",formOptions:{defaultValues:i,onSubmit:async({value:a})=>{console.log("Form submitted with value:",a),t(a)}}});return console.log("useFormedible result:",{Form:s}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(St,{variant:"outline",size:"sm",onClick:n,children:" Back"}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-medium",children:e.name}),p.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]}),p.jsxs("div",{className:"border rounded-lg p-4",children:[p.jsx(zt,{className:"text-sm font-medium",children:"Template Preview"}),p.jsx("div",{className:"mt-2 p-3 bg-muted rounded text-sm font-mono whitespace-pre-wrap",children:e.prompt})]}),e.variables.length===0?p.jsxs("div",{className:"border rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-muted-foreground",children:"This template has no variables defined. The template will be applied as-is."}),p.jsx(St,{onClick:()=>t({}),className:"mt-3",children:"Apply Template"})]}):p.jsxs("div",{className:"border rounded-lg p-4",children:[p.jsx(zt,{className:"text-sm font-medium mb-4 block",children:"Template Variables"}),p.jsx(s,{})]})]})}const Lot=({module:e})=>{const[t,n]=T.useState(!1),[r,i]=T.useState(null),{promptTemplates:s,loadPromptTemplates:a}=eA(Sn(u=>({promptTemplates:u.promptTemplates,loadPromptTemplates:u.loadPromptTemplates})));T.useEffect(()=>{t&&a()},[t,a]);const o=u=>{i(u)},l=async u=>{if(r){console.log("handleFormSubmit called with:",u),console.log("selectedTemplate:",r);try{console.log("Calling module.applyTemplate..."),await e.applyTemplate(r.id,u),console.log("Template applied successfully, closing modal..."),n(!1),i(null),Pe.success("Template applied to input area!")}catch(d){console.error("Failed to apply template:",d),Pe.error("Failed to apply template")}}},c=()=>{i(null)};return p.jsxs(p.Fragment,{children:[p.jsx(St,{variant:"ghost",size:"sm",onClick:()=>n(!0),className:"h-8 w-8 p-0",title:"Open Prompt Library",children:p.jsx(Vpe,{className:"h-4 w-4"})}),p.jsx(Bm,{open:t,onOpenChange:n,children:p.jsxs($m,{className:"!w-[80vw] !h-[85vh] !max-w-none flex flex-col",children:[p.jsxs(zm,{children:[p.jsx(Um,{children:r?"Fill Template Variables":"Prompt Library"}),p.jsx(rb,{children:r?"Provide values for the template variables below.":"Select a prompt template to use. Templates can include dynamic variables, auto-select tools, and rules."})]}),p.jsx("div",{className:"flex-1 overflow-hidden",children:r?p.jsx(Fot,{template:r,onSubmit:l,onBack:c}):p.jsx(Dot,{templates:s,onSelect:o})})]})})]})};class Bot{constructor(){ve(this,"id","core-prompt-library");ve(this,"unregisterCallback",null);ve(this,"eventUnsubscribers",[]);ve(this,"notifyComponentUpdate",null);ve(this,"isStreaming",!1);ve(this,"modApiRef",null);ve(this,"getIsStreaming",()=>this.isStreaming);ve(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t});ve(this,"compileTemplate",async(t,n)=>{const{compilePromptTemplate:r}=eA.getState();return await r(t,n)});ve(this,"applyTemplate",async(t,n)=>{var i;const r=await this.compileTemplate(t,n);(i=this.modApiRef)==null||i.emit(Pn.setInputTextRequest,{text:r.content})})}async initialize(t){this.modApiRef=t,this.isStreaming=Ln.getState().status==="streaming";const n=t.on(Zn.statusChanged,r=>{var i;typeof r=="object"&&r&&"status"in r&&this.isStreaming!==(r.status==="streaming")&&(this.isStreaming=r.status==="streaming",(i=this.notifyComponentUpdate)==null||i.call(this))});this.eventUnsubscribers.push(n)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>Ve.createElement(Lot,{module:this})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const $ot=Je({enableStreamingMarkdown:Cr(),enableStreamingCodeBlockParsing:Cr(),foldStreamingCodeBlocks:Cr(),foldUserMessagesOnCompletion:Cr(),enableAutoScrollOnStream:Cr(),streamingRenderFPS:Nt().min(3,"Min 3 FPS").max(60,"Max 60 FPS"),autoScrollInterval:Nt().min(50,"Min 50ms").max(5e3,"Max 5000ms")}),zot=()=>{const e=gr(Sn(i=>({setEnableStreamingMarkdown:i.setEnableStreamingMarkdown,setEnableStreamingCodeBlockParsing:i.setEnableStreamingCodeBlockParsing,setFoldStreamingCodeBlocks:i.setFoldStreamingCodeBlocks,setFoldUserMessagesOnCompletion:i.setFoldUserMessagesOnCompletion,setStreamingRenderFPS:i.setStreamingRenderFPS,setAutoScrollInterval:i.setAutoScrollInterval,setEnableAutoScrollOnStream:i.setEnableAutoScrollOnStream,resetGeneralSettings:i.resetGeneralSettings}))),t=gr(Sn(i=>({enableStreamingMarkdown:i.enableStreamingMarkdown,enableStreamingCodeBlockParsing:i.enableStreamingCodeBlockParsing,foldStreamingCodeBlocks:i.foldStreamingCodeBlocks,foldUserMessagesOnCompletion:i.foldUserMessagesOnCompletion,streamingRenderFPS:i.streamingRenderFPS,autoScrollInterval:i.autoScrollInterval,enableAutoScrollOnStream:i.enableAutoScrollOnStream}))),n=Ns({defaultValues:{enableStreamingMarkdown:t.enableStreamingMarkdown??!0,enableStreamingCodeBlockParsing:t.enableStreamingCodeBlockParsing??!0,foldStreamingCodeBlocks:t.foldStreamingCodeBlocks??!1,foldUserMessagesOnCompletion:t.foldUserMessagesOnCompletion??!1,enableAutoScrollOnStream:t.enableAutoScrollOnStream??!0,streamingRenderFPS:t.streamingRenderFPS??15,autoScrollInterval:t.autoScrollInterval??1e3},validators:{onChangeAsync:$ot,onChangeAsyncDebounceMs:500},onSubmit:async({value:i})=>{e.setEnableStreamingMarkdown(i.enableStreamingMarkdown),e.setEnableStreamingCodeBlockParsing(i.enableStreamingCodeBlockParsing),e.setFoldStreamingCodeBlocks(i.foldStreamingCodeBlocks),e.setFoldUserMessagesOnCompletion(i.foldUserMessagesOnCompletion),e.setEnableAutoScrollOnStream(i.enableAutoScrollOnStream),e.setStreamingRenderFPS(i.streamingRenderFPS),e.setAutoScrollInterval(i.autoScrollInterval)}});T.useEffect(()=>{n.reset({enableStreamingMarkdown:t.enableStreamingMarkdown??!0,enableStreamingCodeBlockParsing:t.enableStreamingCodeBlockParsing??!0,foldStreamingCodeBlocks:t.foldStreamingCodeBlocks??!1,foldUserMessagesOnCompletion:t.foldUserMessagesOnCompletion??!1,enableAutoScrollOnStream:t.enableAutoScrollOnStream??!0,streamingRenderFPS:t.streamingRenderFPS??15,autoScrollInterval:t.autoScrollInterval??1e3})},[t.enableStreamingMarkdown,t.enableStreamingCodeBlockParsing,t.foldStreamingCodeBlocks,t.foldUserMessagesOnCompletion,t.enableAutoScrollOnStream,t.streamingRenderFPS,t.autoScrollInterval,n]);const r=()=>{window.confirm("Are you sure you want to reset Streaming & Display settings to their defaults?")&&e.resetGeneralSettings()};return p.jsxs("form",{onSubmit:i=>{i.preventDefault(),i.stopPropagation(),n.handleSubmit()},className:"p-1 space-y-4",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),p.jsx(Rp,{form:n,name:"enableStreamingMarkdown",label:"Parse Markdown While Streaming",description:"Render Markdown formatting as the response arrives (may impact performance slightly)."}),p.jsx(Rp,{form:n,name:"enableStreamingCodeBlockParsing",label:"Use Full Code Blocks While Streaming",description:"Use the syntax-highlighting component for code blocks during streaming."}),p.jsx(Rp,{form:n,name:"foldStreamingCodeBlocks",label:"Fold Code Blocks by Default During Streaming",description:"Automatically collapse code blocks as they stream in. Useful for long code outputs."}),p.jsx(Rp,{form:n,name:"foldUserMessagesOnCompletion",label:"Fold User Messages After Response",description:"Automatically collapse the user's prompt message once the assistant finishes responding."}),p.jsx(Rp,{form:n,name:"enableAutoScrollOnStream",label:"Auto-Scroll While Streaming",description:"Automatically scroll to the bottom as new content arrives."}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsx(dc,{form:n,name:"streamingRenderFPS",label:"Streaming Update Rate",min:3,max:60,step:1,valueLabelSuffix:" FPS"}),p.jsx(by,{form:n,name:"streamingRenderFPS",label:"FPS Input",min:3,max:60,step:1,className:"w-24 h-8 text-xs ml-auto","aria-label":"Streaming Render FPS Value"}),p.jsx("p",{className:Ye("text-sm text-muted-foreground"),children:"Controls how frequently the UI updates during streaming (3-60 FPS)."})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsx(dc,{form:n,name:"autoScrollInterval",label:"Auto-Scroll Interval",min:50,max:5e3,step:50,valueLabelSuffix:" ms",disabled:!n.state.values.enableAutoScrollOnStream}),p.jsx(by,{form:n,name:"autoScrollInterval",label:"Interval Input (ms)",min:50,max:5e3,step:50,className:"w-24 h-8 text-xs ml-auto",disabled:!n.state.values.enableAutoScrollOnStream,"aria-label":"Auto Scroll Interval Value"}),p.jsx("p",{className:Ye("text-sm text-muted-foreground"),children:"How often to scroll to the bottom during streaming (50-5000 ms)."})]})]}),p.jsx(qd,{}),p.jsx("div",{className:"flex items-center justify-between pt-3",children:p.jsx(n.Subscribe,{children:i=>{const s=i.canSubmit,a=i.isSubmitting,o=i.isValidating,l=i.isValid;return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(St,{type:"submit",size:"sm",disabled:!s||a||o||!l,children:a?"Saving...":o?"Validating...":"Save Changes"}),p.jsxs(St,{variant:"outline",size:"sm",onClick:r,type:"button",children:[p.jsx(UO,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})]})}})})]})},Uot=Ve.memo(zot);class qot{constructor(){ve(this,"id","core-settings-general");ve(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"general",title:"General",component:Uot,order:10})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const Vot=({label:e,colorKey:t,value:n,onChange:r})=>{const[i,s]=T.useState(n??"");T.useEffect(()=>{s(n??"")},[n]);const a=()=>{r(t,i.trim()||null)},o=l=>{s(l.target.value)};return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(zt,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),p.jsx(Un,{id:`color-${t}`,type:"text",value:i,onChange:o,onBlur:a,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),p.jsx(Un,{type:"color",value:i!=null&&i.startsWith("#")?i:"#000000",onChange:l=>{s(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer bg-transparent","aria-label":`Pick ${e} color`})]})},Wot=[{label:"Default Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css"},{label:"A11y Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-a11y-dark.min.css"},{label:"Atom Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-atom-dark.min.css"},{label:"Atelier Sulphurpool Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-base16-ateliersulphurpool.light.min.css"},{label:"CB",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-cb.min.css"},{label:"Coldark Cold",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-cold.min.css"},{label:"Coldark Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css"},{label:"Coy (No Shadow)",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coy-without-shadows.min.css"},{label:"Darcula",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-darcula.min.css"},{label:"Dracula",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-dracula.min.css"},{label:"Duotone Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-dark.min.css"},{label:"Duotone Earth",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-earth.min.css"},{label:"Duotone Forest",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-forest.min.css"},{label:"Duotone Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-light.min.css"},{label:"Duotone Sea",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-sea.min.css"},{label:"Duotone Space",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-space.min.css"},{label:"GH Colors",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-ghcolors.min.css"},{label:"Gruvbox Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-dark.min.css"},{label:"Gruvbox Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-light.min.css"},{label:"Holi",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-holi-theme.min.css"},{label:"Hopscotch",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-hopscotch.min.css"},{label:"Lucario",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-lucario.min.css"},{label:"Material Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-dark.min.css"},{label:"Material Oceanic",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-oceanic.min.css"},{label:"Night Owl",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-night-owl.min.css"},{label:"Nord",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-nord.min.css"},{label:"One Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css"},{label:"One Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-light.min.css"},{label:"Pojoaque",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-pojoaque.min.css"},{label:"Shades of Purple",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-shades-of-purple.min.css"},{label:"Solarized Dark Atom",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-solarized-dark-atom.min.css"},{label:"Synthwave '84",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-synthwave84.min.css"},{label:"VS",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vs.min.css"},{label:"VSC Dark Plus",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css"},{label:"Xonokai",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-xonokai.min.css"},{label:"Z-Touch",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-z-touch.min.css"}],Hot=cl(["system","light","dark","TijuLight","TijuDark","custom"]),Got=Je({theme:Hot,prismThemeUrl:Ue(),customFontFamily:Ue(),customFontSize:Nt().min(12).max(20),chatMaxWidth:Ue(),customThemeColors:ah(Ue(),Ue().nullable())}),Kot=()=>{const e=gr(Sn(a=>({setTheme:a.setTheme,setPrismThemeUrl:a.setPrismThemeUrl,setCustomFontFamily:a.setCustomFontFamily,setCustomFontSize:a.setCustomFontSize,setChatMaxWidth:a.setChatMaxWidth,setCustomThemeColor:a.setCustomThemeColor,resetThemeSettings:a.resetThemeSettings}))),t=gr(Sn(a=>({theme:a.theme,prismThemeUrl:a.prismThemeUrl,customFontFamily:a.customFontFamily,customFontSize:a.customFontSize,chatMaxWidth:a.chatMaxWidth,_rawCustomThemeColors:a.customThemeColors}))),n=Ns({defaultValues:{theme:t.theme??"system",prismThemeUrl:t.prismThemeUrl??"",customFontFamily:t.customFontFamily??"",customFontSize:t.customFontSize??16,chatMaxWidth:t.chatMaxWidth??"max-w-7xl",customThemeColors:t._rawCustomThemeColors??{}},onSubmit:async({value:a})=>{e.setTheme(a.theme),e.setPrismThemeUrl(a.prismThemeUrl||null),e.setCustomFontFamily(a.customFontFamily),e.setCustomFontSize(a.customFontSize),e.setChatMaxWidth(a.chatMaxWidth),a.customThemeColors&&Object.entries(a.customThemeColors).forEach(([o,l])=>{e.setCustomThemeColor(o,l)})},validators:{onChangeAsync:Got,onChangeAsyncDebounceMs:300}});T.useEffect(()=>{n.reset({theme:t.theme??"system",prismThemeUrl:t.prismThemeUrl??"",customFontFamily:t.customFontFamily??"",customFontSize:t.customFontSize??16,chatMaxWidth:t.chatMaxWidth??"max-w-7xl",customThemeColors:t._rawCustomThemeColors??{}})},[t.theme,t.prismThemeUrl,t.customFontFamily,t.customFontSize,t.chatMaxWidth,t._rawCustomThemeColors]);const r=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&e.resetThemeSettings()},i=[{value:"max-w-3xl",label:"Very Small"},{value:"max-w-4xl",label:"Small"},{value:"max-w-5xl",label:"Medium"},{value:"max-w-6xl",label:"Large"},{value:"max-w-7xl",label:"Very Large"},{value:"max-w-full",label:"Full Width"}],s=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"},{key:"sidebar",label:"Sidebar BG"},{key:"sidebarForeground",label:"Sidebar FG"},{key:"sidebarPrimary",label:"Sidebar Primary"},{key:"sidebarPrimaryForeground",label:"Sidebar Primary FG"},{key:"sidebarAccent",label:"Sidebar Accent"},{key:"sidebarAccentForeground",label:"Sidebar Accent FG"},{key:"sidebarBorder",label:"Sidebar Border"},{key:"sidebarRing",label:"Sidebar Ring"},{key:"chart1",label:"Chart 1"},{key:"chart2",label:"Chart 2"},{key:"chart3",label:"Chart 3"},{key:"chart4",label:"Chart 4"},{key:"chart5",label:"Chart 5"}];return p.jsxs("form",{onSubmit:a=>{a.preventDefault(),a.stopPropagation(),n.handleSubmit()},className:"space-y-4 p-1",children:[p.jsx(Qv,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(zt,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),p.jsx(vx,{form:n,name:"theme",label:"Theme",options:[{value:"light",label:"Default Light"},{value:"dark",label:"Default Dark"},{value:"system",label:"System"},{value:"TijuLight",label:"Tiju Light"},{value:"TijuDark",label:"Tiju Dark"},{value:"custom",label:"User Custom"}],triggerClassName:"w-[180px]"})]})}),p.jsxs(Qv,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card space-y-3",children:[p.jsxs("div",{children:[p.jsx(Fw,{form:n,name:"customFontFamily",label:"Custom Font Family",placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(dc,{form:n,name:"customFontSize",label:`Base Font Size (${n.getFieldValue("customFontSize")}px)`,min:12,max:20,step:1,className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),p.jsxs("div",{children:[p.jsx(vx,{form:n,name:"chatMaxWidth",label:"Chat Content Max Width",options:i,triggerClassName:"w-full mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),p.jsxs(Qv,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card space-y-3",children:[p.jsx(vx,{form:n,name:"prismThemeUrl",label:"Code Block Theme",options:Wot,triggerClassName:"w-full"}),p.jsx(Fw,{form:n,name:"prismThemeUrl",label:"Or paste custom theme URL here...",placeholder:"Or paste custom theme URL here...",type:"url",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a preset theme or paste a URL to a PrismJS CSS file. Leave blank or select 'Default' to use themes matching light/dark mode."})]}),n.getFieldValue("theme")==="custom"&&p.jsx(Qv,{title:"Custom Theme Colors",description:"Define custom colors. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:s.map(({key:a,label:o})=>{var l;return p.jsx(Vot,{label:o,colorKey:a,value:(l=n.getFieldValue("customThemeColors"))==null?void 0:l[a],onChange:(c,u)=>n.setFieldValue(`customThemeColors.${c}`,u===null?"":u)},a)})})}),p.jsx(qd,{}),p.jsxs("div",{className:"flex justify-between pt-3",children:[p.jsxs(St,{variant:"outline",size:"sm",onClick:r,type:"button",children:[p.jsx(UO,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]}),p.jsx(St,{type:"submit",size:"sm",className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Apply Theme Settings"})]})]})},Yot=Ve.memo(Kot);class Zot{constructor(){ve(this,"id","core-settings-theme");ve(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"theme",title:"Theme",component:Yot,order:20})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const Xot=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:i,onUpdate:s,fetchStatus:a,isDeleting:o,allAvailableModelsForView:l})=>{var N,I;const[c,u]=T.useState(!0),d=L0(e.type),h=_C(e.type),m=zp(e.type),y=a==="fetching"||o,b=o||a==="fetching",v=o||a==="fetching",x=T.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),w=e.apiKeyId?t.some(O=>O.id===e.apiKeyId):!1,S=d&&!w,C=T.useCallback(async(O,L)=>{const P=new Set(e.enabledModels??[]);L?P.add(O):P.delete(O);const V=Array.from(P);try{await s(e.id,{enabledModels:V})}catch(F){Pe.error("Failed to update model status."),console.error("Failed to save model toggle:",F)}},[e.enabledModels,e.id,s]),k=()=>u(O=>!O),A=((N=e.enabledModels)==null?void 0:N.length)??0,R=l.length;return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{children:p.jsx("span",{className:Ye("h-2.5 w-2.5 rounded-full flex-shrink-0 block",a==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),p.jsx(_r,{side:"top",children:a==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),p.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),p.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),S&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{children:p.jsx(vc,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),p.jsx(_r,{side:"top",children:p.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),p.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[p.jsx(In,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:p.jsx(Gw,{}),className:"h-8 w-8"}),p.jsx(In,{tooltipText:"Delete",onClick:r,disabled:v,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(So,{})})]})]}),p.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[d&&p.jsxs("div",{children:["API Key:"," ",e.apiKeyId?w?p.jsx("span",{className:"text-green-400",children:((I=t.find(O=>O.id===e.apiKeyId))==null?void 0:I.name)||"Linked (Unnamed Key)"}):p.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):p.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),h&&p.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),p.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?p.jsx("span",{className:"text-green-400",children:"Enabled"}):p.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&p.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),m&&p.jsx("div",{className:"pt-1",children:p.jsxs(St,{variant:"outline",size:"sm",onClick:i,disabled:y,className:"text-xs h-7 px-2",children:[a==="fetching"&&p.jsx(Qn,{className:"h-3 w-3 mr-1 animate-spin"}),a==="success"&&p.jsx(Qa,{className:"h-3 w-3 mr-1 text-green-500"}),a==="error"&&p.jsx(vc,{className:"h-3 w-3 mr-1 text-destructive"}),a==="idle"&&p.jsx(Kp,{className:"h-3 w-3 mr-1"}),a==="fetching"?"Fetching...":a==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),p.jsxs("div",{className:"space-y-1 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",A," / ",R," enabled)"]}),p.jsx(In,{tooltipText:c?"Show Models":"Hide Models",onClick:k,"aria-label":c?"Show model list":"Hide model list",icon:c?p.jsx(Tc,{}):p.jsx(Eh,{}),className:"h-6 w-6"})]}),!c&&p.jsx(M5,{providerId:e.id,allAvailableModels:l,enabledModelIds:x,onToggleModel:C,isLoading:a==="fetching",disabled:o,listHeightClass:"h-[26rem]"})]})]})},Jot=Ve.memo(Xot),Qot=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:i,onCancel:s,onSave:a,onChange:o})=>{const l=T.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),c=T.useCallback((d,h)=>{const m=new Set(t.enabledModels??[]);h?m.add(d):m.delete(d);const y=Array.from(m);o("enabledModels",y)},[t.enabledModels,o]),u=T.useCallback((d,h)=>new Promise(m=>{o(d,h),m(void 0)}),[o]);return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),p.jsx(ule,{initialData:t,onChange:u,onSubmit:a,onCancel:s,apiKeys:n,disabled:i})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),p.jsx(M5,{providerId:e,allAvailableModels:r,enabledModelIds:l,onToggleModel:c,disabled:i,listHeightClass:"h-[calc(100%-8rem)]"})]})]})})},elt=Ve.memo(Qot),tlt=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:i,fetchStatus:s,onSelectModelForDetails:a})=>{const[o,l]=T.useState(!1),[c,u]=T.useState(!1),[d,h]=T.useState(!1),[m,y]=T.useState({name:"placeholder"}),b=Mr(I=>I.getAllAvailableModelDefsForProvider),[v,x]=T.useState([]),w=T.useMemo(()=>[...b(e.id)].sort((O,L)=>(O.name||O.id).localeCompare(L.name||L.id)),[e.id,b]);T.useEffect(()=>{if(o){const I=b(e.id);x([...I].sort((O,L)=>(O.name||O.id).localeCompare(L.name||L.id))),y({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else x([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const S=()=>l(!0),C=()=>{l(!1),y({}),u(!1)},k=T.useCallback(async()=>{u(!0);try{const I=m.enabledModels&&m.enabledModels.length>0?m.enabledModels:null,O={name:m.name,type:m.type,isEnabled:m.isEnabled,apiKeyId:m.apiKeyId,baseURL:m.baseURL,autoFetchModels:m.autoFetchModels,enabledModels:I};Object.keys(O).forEach(L=>{O[L]===void 0&&delete O[L]}),await n(e.id,O),l(!1),y({}),Pe.success(`Provider "${O.name||e.name}" updated.`)}catch(I){console.error("Failed to save provider update:",I),Pe.error("Failed to save provider configuration.")}finally{u(!1)}},[m,n,e.id,e.name]),A=T.useCallback((I,O)=>{y(L=>({...L,[I]:O}))},[]),R=T.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(I){console.error("Failed to delete provider:",I),h(!1)}}},[r,e.id,e.name]),N=T.useCallback(async()=>{if(await i(e.id),o){const I=b(e.id);x([...I].sort((O,L)=>(O.name||O.id).localeCompare(L.name||L.id)))}},[i,e.id,o,b]);return p.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?p.jsx(elt,{providerId:e.id,editData:m,apiKeys:t,allAvailableModels:v,isSaving:c,onCancel:C,onSave:k,onChange:A}):p.jsx(Jot,{provider:e,apiKeys:t,onEdit:S,onDelete:R,onFetchModels:N,onUpdate:n,fetchStatus:s,isDeleting:d,onSelectModelForDetails:a,allAvailableModelsForView:w})})},nlt=Ve.memo(tlt);function rlt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const fA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ab(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function tF(e){return"nodeType"in e}function jo(e){var t,n;return e?ab(e)?e:tF(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function nF(e){const{Document:t}=jo(e);return e instanceof t}function Y1(e){return ab(e)?!1:e instanceof jo(e).HTMLElement}function Wde(e){return e instanceof jo(e).SVGElement}function ob(e){return e?ab(e)?e.document:tF(e)?nF(e)?e:Y1(e)||Wde(e)?e.ownerDocument:document:document:document}const Au=fA?T.useLayoutEffect:T.useEffect;function rF(e){const t=T.useRef(e);return Au(()=>{t.current=e}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function ilt(){const e=T.useRef(null),t=T.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=T.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Uw(e,t){t===void 0&&(t=[e]);const n=T.useRef(e);return Au(()=>{n.current!==e&&(n.current=e)},t),n}function Z1(e,t){const n=T.useRef();return T.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Zk(e){const t=rF(e),n=T.useRef(null),r=T.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function RO(e){const t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}let P3={};function X1(e,t){return T.useMemo(()=>{if(t)return t;const n=P3[e]==null?0:P3[e]+1;return P3[e]=n,e+"-"+n},[e,t])}function Hde(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const o=Object.entries(a);for(const[l,c]of o){const u=s[l];u!=null&&(s[l]=u+e*c)}return s},{...t})}}const k0=Hde(1),qw=Hde(-1);function slt(e){return"clientX"in e&&"clientY"in e}function iF(e){if(!e)return!1;const{KeyboardEvent:t}=jo(e.target);return t&&e instanceof t}function alt(e){if(!e)return!1;const{TouchEvent:t}=jo(e.target);return t&&e instanceof t}function NO(e){if(alt(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return slt(e)?{x:e.clientX,y:e.clientY}:null}const Vw=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Vw.Translate.toString(e),Vw.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),EW="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function olt(e){return e.matches(EW)?e:e.querySelector(EW)}const llt={display:"none"};function clt(e){let{id:t,value:n}=e;return Ve.createElement("div",{id:t,style:llt},n)}function ult(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ve.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function dlt(){const[e,t]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Gde=T.createContext(null);function flt(e){const t=T.useContext(Gde);T.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function hlt(){const[e]=T.useState(()=>new Set),t=T.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[T.useCallback(r=>{let{type:i,event:s}=r;e.forEach(a=>{var o;return(o=a[i])==null?void 0:o.call(a,s)})},[e]),t]}const plt={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},mlt={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function glt(e){let{announcements:t=mlt,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=plt}=e;const{announce:s,announcement:a}=dlt(),o=X1("DndLiveRegion"),[l,c]=T.useState(!1);if(T.useEffect(()=>{c(!0)},[]),flt(T.useMemo(()=>({onDragStart(d){let{active:h}=d;s(t.onDragStart({active:h}))},onDragMove(d){let{active:h,over:m}=d;t.onDragMove&&s(t.onDragMove({active:h,over:m}))},onDragOver(d){let{active:h,over:m}=d;s(t.onDragOver({active:h,over:m}))},onDragEnd(d){let{active:h,over:m}=d;s(t.onDragEnd({active:h,over:m}))},onDragCancel(d){let{active:h,over:m}=d;s(t.onDragCancel({active:h,over:m}))}}),[s,t])),!l)return null;const u=Ve.createElement(Ve.Fragment,null,Ve.createElement(clt,{id:r,value:i.draggable}),Ve.createElement(ult,{id:o,announcement:a}));return n?Zo.createPortal(u,n):u}var Fs;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Fs||(Fs={}));function Xk(){}function TW(e,t){return T.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ylt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Ec=Object.freeze({x:0,y:0});function Kde(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Yde(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function blt(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function AW(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function Zde(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function RW(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const vlt=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=RW(t,t.left,t.top),s=[];for(const a of r){const{id:o}=a,l=n.get(o);if(l){const c=Kde(RW(l),i);s.push({id:o,data:{droppableContainer:a,value:c}})}}return s.sort(Yde)},xlt=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=AW(t),s=[];for(const a of r){const{id:o}=a,l=n.get(o);if(l){const c=AW(l),u=i.reduce((h,m,y)=>h+Kde(c[y],m),0),d=Number((u/4).toFixed(4));s.push({id:o,data:{droppableContainer:a,value:d}})}}return s.sort(Yde)};function wlt(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=i-r,o=s-n;if(r<i&&n<s){const l=t.width*t.height,c=e.width*e.height,u=a*o,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const _lt=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:a}=s,o=n.get(a);if(o){const l=wlt(o,t);l>0&&i.push({id:a,data:{droppableContainer:s,value:l}})}}return i.sort(blt)};function Slt(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Xde(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ec}function Clt(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,o)=>({...a,top:a.top+e*o.y,bottom:a.bottom+e*o.y,left:a.left+e*o.x,right:a.right+e*o.x}),{...n})}}const klt=Clt(1);function Elt(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Tlt(e,t,n){const r=Elt(t);if(!r)return e;const{scaleX:i,scaleY:s,x:a,y:o}=r,l=e.left-a-(1-i)*parseFloat(n),c=e.top-o-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,d=s?e.height/s:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const Alt={ignoreTransform:!1};function lb(e,t){t===void 0&&(t=Alt);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:u}=jo(e).getComputedStyle(e);c&&(n=Tlt(n,c,u))}const{top:r,left:i,width:s,height:a,bottom:o,right:l}=n;return{top:r,left:i,width:s,height:a,bottom:o,right:l}}function NW(e){return lb(e,{ignoreTransform:!0})}function Rlt(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Nlt(e,t){return t===void 0&&(t=jo(e).getComputedStyle(e)),t.position==="fixed"}function Mlt(e,t){t===void 0&&(t=jo(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function hA(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(nF(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Y1(i)||Wde(i)||n.includes(i))return n;const s=jo(e).getComputedStyle(i);return i!==e&&Mlt(i,s)&&n.push(i),Nlt(i,s)?n:r(i.parentNode)}return e?r(e):n}function Jde(e){const[t]=hA(e,1);return t??null}function D3(e){return!fA||!e?null:ab(e)?e:tF(e)?nF(e)||e===ob(e).scrollingElement?window:Y1(e)?e:null:null}function Qde(e){return ab(e)?e.scrollX:e.scrollLeft}function efe(e){return ab(e)?e.scrollY:e.scrollTop}function MO(e){return{x:Qde(e),y:efe(e)}}var ea;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ea||(ea={}));function tfe(e){return!fA||!e?!1:e===document.scrollingElement}function nfe(e){const t={x:0,y:0},n=tfe(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:o,maxScroll:r,minScroll:t}}const Ilt={x:.2,y:.2};function jlt(e,t,n,r,i){let{top:s,left:a,right:o,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=Ilt);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=nfe(e),m={x:0,y:0},y={x:0,y:0},b={height:t.height*i.y,width:t.width*i.x};return!c&&s<=t.top+b.height?(m.y=ea.Backward,y.y=r*Math.abs((t.top+b.height-s)/b.height)):!u&&l>=t.bottom-b.height&&(m.y=ea.Forward,y.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!h&&o>=t.right-b.width?(m.x=ea.Forward,y.x=r*Math.abs((t.right-b.width-o)/b.width)):!d&&a<=t.left+b.width&&(m.x=ea.Backward,y.x=r*Math.abs((t.left+b.width-a)/b.width)),{direction:m,speed:y}}function Olt(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function rfe(e){return e.reduce((t,n)=>k0(t,MO(n)),Ec)}function Plt(e){return e.reduce((t,n)=>t+Qde(n),0)}function Dlt(e){return e.reduce((t,n)=>t+efe(n),0)}function Flt(e,t){if(t===void 0&&(t=lb),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);Jde(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Llt=[["x",["left","right"],Plt],["y",["top","bottom"],Dlt]];class sF{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=hA(n),i=rfe(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,o]of Llt)for(const l of a)Object.defineProperty(this,l,{get:()=>{const c=o(r),u=i[s]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class wx{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Blt(e){const{EventTarget:t}=jo(e);return e instanceof t?e:ob(e)}function F3(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var jl;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(jl||(jl={}));function MW(e){e.preventDefault()}function $lt(e){e.stopPropagation()}var zr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(zr||(zr={}));const ife={start:[zr.Space,zr.Enter],cancel:[zr.Esc],end:[zr.Space,zr.Enter,zr.Tab]},zlt=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case zr.Right:return{...n,x:n.x+25};case zr.Left:return{...n,x:n.x-25};case zr.Down:return{...n,y:n.y+25};case zr.Up:return{...n,y:n.y-25}}};class aF{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new wx(ob(n)),this.windowListeners=new wx(jo(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(jl.Resize,this.handleCancel),this.windowListeners.add(jl.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(jl.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Flt(r),n(Ec)}handleKeyDown(t){if(iF(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=ife,coordinateGetter:a=zlt,scrollBehavior:o="smooth"}=i,{code:l}=t;if(s.end.includes(l)){this.handleEnd(t);return}if(s.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:Ec;this.referenceCoordinates||(this.referenceCoordinates=u);const d=a(t,{active:n,context:r.current,currentCoordinates:u});if(d){const h=qw(d,u),m={x:0,y:0},{scrollableAncestors:y}=r.current;for(const b of y){const v=t.code,{isTop:x,isRight:w,isLeft:S,isBottom:C,maxScroll:k,minScroll:A}=nfe(b),R=Olt(b),N={x:Math.min(v===zr.Right?R.right-R.width/2:R.right,Math.max(v===zr.Right?R.left:R.left+R.width/2,d.x)),y:Math.min(v===zr.Down?R.bottom-R.height/2:R.bottom,Math.max(v===zr.Down?R.top:R.top+R.height/2,d.y))},I=v===zr.Right&&!w||v===zr.Left&&!S,O=v===zr.Down&&!C||v===zr.Up&&!x;if(I&&N.x!==d.x){const L=b.scrollLeft+h.x,P=v===zr.Right&&L<=k.x||v===zr.Left&&L>=A.x;if(P&&!h.y){b.scrollTo({left:L,behavior:o});return}P?m.x=b.scrollLeft-L:m.x=v===zr.Right?b.scrollLeft-k.x:b.scrollLeft-A.x,m.x&&b.scrollBy({left:-m.x,behavior:o});break}else if(O&&N.y!==d.y){const L=b.scrollTop+h.y,P=v===zr.Down&&L<=k.y||v===zr.Up&&L>=A.y;if(P&&!h.x){b.scrollTo({top:L,behavior:o});return}P?m.y=b.scrollTop-L:m.y=v===zr.Down?b.scrollTop-k.y:b.scrollTop-A.y,m.y&&b.scrollBy({top:-m.y,behavior:o});break}}this.handleMove(t,k0(qw(d,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}aF.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ife,onActivation:i}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const o=s.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function IW(e){return!!(e&&"distance"in e)}function jW(e){return!!(e&&"delay"in e)}class oF{constructor(t,n,r){var i;r===void 0&&(r=Blt(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=ob(a),this.documentListeners=new wx(this.document),this.listeners=new wx(r),this.windowListeners=new wx(jo(a)),this.initialCoordinates=(i=NO(s))!=null?i:Ec,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(jl.Resize,this.handleCancel),this.windowListeners.add(jl.DragStart,MW),this.windowListeners.add(jl.VisibilityChange,this.handleCancel),this.windowListeners.add(jl.ContextMenu,MW),this.documentListeners.add(jl.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(jW(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(IW(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(jl.Click,$lt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(jl.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:o}}=s;if(!i)return;const l=(n=NO(t))!=null?n:Ec,c=qw(i,l);if(!r&&o){if(IW(o)){if(o.tolerance!=null&&F3(c,o.tolerance))return this.handleCancel();if(F3(c,o.distance))return this.handleStart()}if(jW(o)&&F3(c,o.tolerance))return this.handleCancel();this.handlePending(o,c);return}t.cancelable&&t.preventDefault(),a(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===zr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ult={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class lF extends oF{constructor(t){const{event:n}=t,r=ob(n.target);super(t,Ult,r)}}lF.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const qlt={move:{name:"mousemove"},end:{name:"mouseup"}};var IO;(function(e){e[e.RightClick=2]="RightClick"})(IO||(IO={}));class Vlt extends oF{constructor(t){super(t,qlt,ob(t.event.target))}}Vlt.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===IO.RightClick?!1:(r==null||r({event:n}),!0)}}];const L3={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Wlt extends oF{constructor(t){super(t,L3)}static setup(){return window.addEventListener(L3.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(L3.move.name,t)};function t(){}}}Wlt.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var _x;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(_x||(_x={}));var Jk;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Jk||(Jk={}));function Hlt(e){let{acceleration:t,activator:n=_x.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:o=Jk.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:h}=e;const m=Klt({delta:d,disabled:!s}),[y,b]=ilt(),v=T.useRef({x:0,y:0}),x=T.useRef({x:0,y:0}),w=T.useMemo(()=>{switch(n){case _x.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case _x.DraggableRect:return i}},[n,i,l]),S=T.useRef(null),C=T.useCallback(()=>{const A=S.current;if(!A)return;const R=v.current.x*x.current.x,N=v.current.y*x.current.y;A.scrollBy(R,N)},[]),k=T.useMemo(()=>o===Jk.TreeOrder?[...c].reverse():c,[o,c]);T.useEffect(()=>{if(!s||!c.length||!w){b();return}for(const A of k){if((r==null?void 0:r(A))===!1)continue;const R=c.indexOf(A),N=u[R];if(!N)continue;const{direction:I,speed:O}=jlt(A,N,w,t,h);for(const L of["x","y"])m[L][I[L]]||(O[L]=0,I[L]=0);if(O.x>0||O.y>0){b(),S.current=A,y(C,a),v.current=O,x.current=I;return}}v.current={x:0,y:0},x.current={x:0,y:0},b()},[t,C,r,b,s,a,JSON.stringify(w),JSON.stringify(m),y,c,k,u,JSON.stringify(h)])}const Glt={x:{[ea.Backward]:!1,[ea.Forward]:!1},y:{[ea.Backward]:!1,[ea.Forward]:!1}};function Klt(e){let{delta:t,disabled:n}=e;const r=RO(t);return Z1(i=>{if(n||!r||!i)return Glt;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ea.Backward]:i.x[ea.Backward]||s.x===-1,[ea.Forward]:i.x[ea.Forward]||s.x===1},y:{[ea.Backward]:i.y[ea.Backward]||s.y===-1,[ea.Forward]:i.y[ea.Forward]||s.y===1}}},[n,t,r])}function Ylt(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Z1(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function Zlt(e,t){return T.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var Ww;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ww||(Ww={}));var jO;(function(e){e.Optimized="optimized"})(jO||(jO={}));const OW=new Map;function Xlt(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,a]=T.useState(null),{frequency:o,measure:l,strategy:c}=i,u=T.useRef(e),d=v(),h=Uw(d),m=T.useCallback(function(x){x===void 0&&(x=[]),!h.current&&a(w=>w===null?x:w.concat(x.filter(S=>!w.includes(S))))},[h]),y=T.useRef(null),b=Z1(x=>{if(d&&!n)return OW;if(!x||x===OW||u.current!==e||s!=null){const w=new Map;for(let S of e){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const C=S.node.current,k=C?new sF(l(C),C):null;S.rect.current=k,k&&w.set(S.id,k)}return w}return x},[e,s,n,d,l]);return T.useEffect(()=>{u.current=e},[e]),T.useEffect(()=>{d||m()},[n,d]),T.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),T.useEffect(()=>{d||typeof o!="number"||y.current!==null||(y.current=setTimeout(()=>{m(),y.current=null},o))},[o,d,m,...r]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:s!=null};function v(){switch(c){case Ww.Always:return!1;case Ww.BeforeDragging:return n;default:return!n}}}function sfe(e,t){return Z1(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Jlt(e,t){return sfe(e,t)}function Qlt(e){let{callback:t,disabled:n}=e;const r=rF(t),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return T.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function pA(e){let{callback:t,disabled:n}=e;const r=rF(t),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return T.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function ect(e){return new sF(lb(e),e)}function PW(e,t,n){t===void 0&&(t=ect);const[r,i]=T.useState(null);function s(){i(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const a=Qlt({callback(l){if(e)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(e)){s();break}}}}),o=pA({callback:s});return Au(()=>{s(),e?(o==null||o.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),a==null||a.disconnect())},[e]),r}function tct(e){const t=sfe(e);return Xde(e,t)}const DW=[];function nct(e){const t=T.useRef(e),n=Z1(r=>e?r&&r!==DW&&e&&t.current&&e.parentNode===t.current.parentNode?r:hA(e):DW,[e]);return T.useEffect(()=>{t.current=e},[e]),n}function rct(e){const[t,n]=T.useState(null),r=T.useRef(e),i=T.useCallback(s=>{const a=D3(s.target);a&&n(o=>o?(o.set(a,MO(a)),new Map(o)):null)},[]);return T.useEffect(()=>{const s=r.current;if(e!==s){a(s);const o=e.map(l=>{const c=D3(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,MO(c)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{a(e),a(s)};function a(o){o.forEach(l=>{const c=D3(l);c==null||c.removeEventListener("scroll",i)})}},[i,e]),T.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>k0(s,a),Ec):rfe(e):Ec,[e,t])}function FW(e,t){t===void 0&&(t=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},t),T.useEffect(()=>{const r=e!==Ec;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?qw(e,n.current):Ec}function ict(e){T.useEffect(()=>{if(!fA)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function sct(e,t){return T.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,t)},n},{}),[e,t])}function afe(e){return T.useMemo(()=>e?Rlt(e):null,[e])}const LW=[];function act(e,t){t===void 0&&(t=lb);const[n]=e,r=afe(n?jo(n):null),[i,s]=T.useState(LW);function a(){s(()=>e.length?e.map(l=>tfe(l)?r:new sF(t(l),l)):LW)}const o=pA({callback:a});return Au(()=>{o==null||o.disconnect(),a(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),i}function oct(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Y1(t)?t:e}function lct(e){let{measure:t}=e;const[n,r]=T.useState(null),i=T.useCallback(c=>{for(const{target:u}of c)if(Y1(u)){r(d=>{const h=t(u);return d?{...d,width:h.width,height:h.height}:h});break}},[t]),s=pA({callback:i}),a=T.useCallback(c=>{const u=oct(c);s==null||s.disconnect(),u&&(s==null||s.observe(u)),r(u?t(u):null)},[t,s]),[o,l]=Zk(a);return T.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const cct=[{sensor:lF,options:{}},{sensor:aF,options:{}}],uct={current:{}},$2={draggable:{measure:NW},droppable:{measure:NW,strategy:Ww.WhileDragging,frequency:jO.Optimized},dragOverlay:{measure:lb}};class Sx extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const dct={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Sx,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Xk},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:$2,measureDroppableContainers:Xk,windowRect:null,measuringScheduled:!1},fct={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Xk,draggableNodes:new Map,over:null,measureDroppableContainers:Xk},mA=T.createContext(fct),ofe=T.createContext(dct);function hct(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Sx}}}function pct(e,t){switch(t.type){case Fs.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Fs.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Fs.DragEnd:case Fs.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Fs.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Sx(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Fs.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Sx(e.droppable.containers);return a.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case Fs.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Sx(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function mct(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=T.useContext(mA),s=RO(r),a=RO(n==null?void 0:n.id);return T.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!iF(s)||document.activeElement===s.target)return;const o=i.get(a);if(!o)return;const{activatorNode:l,node:c}=o;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=olt(u);if(d){d.focus();break}}})}},[r,t,i,a,s]),null}function gct(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function yct(e){return T.useMemo(()=>({draggable:{...$2.draggable,...e==null?void 0:e.draggable},droppable:{...$2.droppable,...e==null?void 0:e.droppable},dragOverlay:{...$2.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function bct(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=T.useRef(!1),{x:a,y:o}=typeof i=="boolean"?{x:i,y:i}:i;Au(()=>{if(!a&&!o||!t){s.current=!1;return}if(s.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=Xde(u,r);if(a||(d.x=0),o||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=Jde(c);h&&h.scrollBy({top:d.y,left:d.x})}},[t,a,o,r,n])}const lfe=T.createContext({...Ec,scaleX:1,scaleY:1});var Kf;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Kf||(Kf={}));const vct=T.memo(function(t){var n,r,i,s;let{id:a,accessibility:o,autoScroll:l=!0,children:c,sensors:u=cct,collisionDetection:d=_lt,measuring:h,modifiers:m,...y}=t;const b=T.useReducer(pct,void 0,hct),[v,x]=b,[w,S]=hlt(),[C,k]=T.useState(Kf.Uninitialized),A=C===Kf.Initialized,{draggable:{active:R,nodes:N,translate:I},droppable:{containers:O}}=v,L=R!=null?N.get(R):null,P=T.useRef({initial:null,translated:null}),V=T.useMemo(()=>{var it;return R!=null?{id:R,data:(it=L==null?void 0:L.data)!=null?it:uct,rect:P}:null},[R,L]),F=T.useRef(null),[J,U]=T.useState(null),[G,$]=T.useState(null),ne=Uw(y,Object.values(y)),W=X1("DndDescribedBy",a),te=T.useMemo(()=>O.getEnabled(),[O]),ee=yct(h),{droppableRects:re,measureDroppableContainers:de,measuringScheduled:oe}=Xlt(te,{dragging:A,dependencies:[I.x,I.y],config:ee.droppable}),Ie=Ylt(N,R),je=T.useMemo(()=>G?NO(G):null,[G]),Me=$e(),Se=Jlt(Ie,ee.draggable.measure);bct({activeNode:R!=null?N.get(R):null,config:Me.layoutShiftCompensation,initialRect:Se,measure:ee.draggable.measure});const qe=PW(Ie,ee.draggable.measure,Se),Qe=PW(Ie?Ie.parentElement:null),We=T.useRef({activatorEvent:null,active:null,activeNode:Ie,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=O.getNodeFor((n=We.current.over)==null?void 0:n.id),K=lct({measure:ee.dragOverlay.measure}),ge=(r=K.nodeRef.current)!=null?r:Ie,Te=A?(i=K.rect)!=null?i:qe:null,ce=!!(K.nodeRef.current&&K.rect),le=tct(ce?null:qe),ie=afe(ge?jo(ge):null),Ee=nct(A?Re??Ie:null),Be=act(Ee),Ce=gct(m,{transform:{x:I.x-le.x,y:I.y-le.y,scaleX:1,scaleY:1},activatorEvent:G,active:V,activeNodeRect:qe,containerNodeRect:Qe,draggingNodeRect:Te,over:We.current.over,overlayNodeRect:K.rect,scrollableAncestors:Ee,scrollableAncestorRects:Be,windowRect:ie}),ct=je?k0(je,I):null,Tt=rct(Ee),ft=FW(Tt),Pt=FW(Tt,[qe]),Ut=k0(Ce,ft),Bt=Te?klt(Te,Ce):null,tn=V&&Bt?d({active:V,collisionRect:Bt,droppableRects:re,droppableContainers:te,pointerCoordinates:ct}):null,xe=Zde(tn,"id"),[D,Z]=T.useState(null),me=ce?Ce:k0(Ce,Pt),De=Slt(me,(s=D==null?void 0:D.rect)!=null?s:null,qe),we=T.useRef(null),Ne=T.useCallback((it,ye)=>{let{sensor:_e,options:ze}=ye;if(F.current==null)return;const kt=N.get(F.current);if(!kt)return;const he=it.nativeEvent,Y=new _e({active:F.current,activeNode:kt,event:he,options:ze,context:We,onAbort(X){if(!N.get(X))return;const{onDragAbort:Oe}=ne.current,Ge={id:X};Oe==null||Oe(Ge),w({type:"onDragAbort",event:Ge})},onPending(X,be,Oe,Ge){if(!N.get(X))return;const{onDragPending:en}=ne.current,$n={id:X,constraint:be,initialCoordinates:Oe,offset:Ge};en==null||en($n),w({type:"onDragPending",event:$n})},onStart(X){const be=F.current;if(be==null)return;const Oe=N.get(be);if(!Oe)return;const{onDragStart:Ge}=ne.current,wt={activatorEvent:he,active:{id:be,data:Oe.data,rect:P}};Zo.unstable_batchedUpdates(()=>{Ge==null||Ge(wt),k(Kf.Initializing),x({type:Fs.DragStart,initialCoordinates:X,active:be}),w({type:"onDragStart",event:wt}),U(we.current),$(he)})},onMove(X){x({type:Fs.DragMove,coordinates:X})},onEnd:H(Fs.DragEnd),onCancel:H(Fs.DragCancel)});we.current=Y;function H(X){return async function(){const{active:Oe,collisions:Ge,over:wt,scrollAdjustedTranslate:en}=We.current;let $n=null;if(Oe&&en){const{cancelDrop:Xt}=ne.current;$n={activatorEvent:he,active:Oe,collisions:Ge,delta:en,over:wt},X===Fs.DragEnd&&typeof Xt=="function"&&await Promise.resolve(Xt($n))&&(X=Fs.DragCancel)}F.current=null,Zo.unstable_batchedUpdates(()=>{x({type:X}),k(Kf.Uninitialized),Z(null),U(null),$(null),we.current=null;const Xt=X===Fs.DragEnd?"onDragEnd":"onDragCancel";if($n){const nn=ne.current[Xt];nn==null||nn($n),w({type:Xt,event:$n})}})}}},[N]),fe=T.useCallback((it,ye)=>(_e,ze)=>{const kt=_e.nativeEvent,he=N.get(ze);if(F.current!==null||!he||kt.dndKit||kt.defaultPrevented)return;const Y={active:he};it(_e,ye.options,Y)===!0&&(kt.dndKit={capturedBy:ye.sensor},F.current=ze,Ne(_e,ye))},[N,Ne]),bt=Zlt(u,fe);ict(u),Au(()=>{qe&&C===Kf.Initializing&&k(Kf.Initialized)},[qe,C]),T.useEffect(()=>{const{onDragMove:it}=ne.current,{active:ye,activatorEvent:_e,collisions:ze,over:kt}=We.current;if(!ye||!_e)return;const he={active:ye,activatorEvent:_e,collisions:ze,delta:{x:Ut.x,y:Ut.y},over:kt};Zo.unstable_batchedUpdates(()=>{it==null||it(he),w({type:"onDragMove",event:he})})},[Ut.x,Ut.y]),T.useEffect(()=>{const{active:it,activatorEvent:ye,collisions:_e,droppableContainers:ze,scrollAdjustedTranslate:kt}=We.current;if(!it||F.current==null||!ye||!kt)return;const{onDragOver:he}=ne.current,Y=ze.get(xe),H=Y&&Y.rect.current?{id:Y.id,rect:Y.rect.current,data:Y.data,disabled:Y.disabled}:null,X={active:it,activatorEvent:ye,collisions:_e,delta:{x:kt.x,y:kt.y},over:H};Zo.unstable_batchedUpdates(()=>{Z(H),he==null||he(X),w({type:"onDragOver",event:X})})},[xe]),Au(()=>{We.current={activatorEvent:G,active:V,activeNode:Ie,collisionRect:Bt,collisions:tn,droppableRects:re,draggableNodes:N,draggingNode:ge,draggingNodeRect:Te,droppableContainers:O,over:D,scrollableAncestors:Ee,scrollAdjustedTranslate:Ut},P.current={initial:Te,translated:Bt}},[V,Ie,tn,Bt,N,ge,Te,re,O,D,Ee,Ut]),Hlt({...Me,delta:I,draggingRect:Bt,pointerCoordinates:ct,scrollableAncestors:Ee,scrollableAncestorRects:Be});const ot=T.useMemo(()=>({active:V,activeNode:Ie,activeNodeRect:qe,activatorEvent:G,collisions:tn,containerNodeRect:Qe,dragOverlay:K,draggableNodes:N,droppableContainers:O,droppableRects:re,over:D,measureDroppableContainers:de,scrollableAncestors:Ee,scrollableAncestorRects:Be,measuringConfiguration:ee,measuringScheduled:oe,windowRect:ie}),[V,Ie,qe,G,tn,Qe,K,N,O,re,D,de,Ee,Be,ee,oe,ie]),B=T.useMemo(()=>({activatorEvent:G,activators:bt,active:V,activeNodeRect:qe,ariaDescribedById:{draggable:W},dispatch:x,draggableNodes:N,over:D,measureDroppableContainers:de}),[G,bt,V,qe,x,W,N,D,de]);return Ve.createElement(Gde.Provider,{value:S},Ve.createElement(mA.Provider,{value:B},Ve.createElement(ofe.Provider,{value:ot},Ve.createElement(lfe.Provider,{value:De},c)),Ve.createElement(mct,{disabled:(o==null?void 0:o.restoreFocus)===!1})),Ve.createElement(glt,{...o,hiddenTextDescribedById:W}));function $e(){const it=(J==null?void 0:J.autoScrollEnabled)===!1,ye=typeof l=="object"?l.enabled===!1:l===!1,_e=A&&!it&&!ye;return typeof l=="object"?{...l,enabled:_e}:{enabled:_e}}}),xct=T.createContext(null),BW="button",wct="Draggable";function _ct(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=X1(wct),{activators:a,activatorEvent:o,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:h}=T.useContext(mA),{role:m=BW,roleDescription:y="draggable",tabIndex:b=0}=i??{},v=(l==null?void 0:l.id)===t,x=T.useContext(v?lfe:xct),[w,S]=Zk(),[C,k]=Zk(),A=sct(a,t),R=Uw(n);Au(()=>(d.set(t,{id:t,key:s,node:w,activatorNode:C,data:R}),()=>{const I=d.get(t);I&&I.key===s&&d.delete(t)}),[d,t]);const N=T.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":r,"aria-pressed":v&&m===BW?!0:void 0,"aria-roledescription":y,"aria-describedby":u.draggable}),[r,m,b,v,y,u.draggable]);return{active:l,activatorEvent:o,activeNodeRect:c,attributes:N,isDragging:v,listeners:r?void 0:A,node:w,over:h,setNodeRef:S,setActivatorNodeRef:k,transform:x}}function Sct(){return T.useContext(ofe)}const Cct="Droppable",kct={timeout:25};function Ect(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=X1(Cct),{active:a,dispatch:o,over:l,measureDroppableContainers:c}=T.useContext(mA),u=T.useRef({disabled:n}),d=T.useRef(!1),h=T.useRef(null),m=T.useRef(null),{disabled:y,updateMeasurementsFor:b,timeout:v}={...kct,...i},x=Uw(b??r),w=T.useCallback(()=>{if(!d.current){d.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),m.current=null},v)},[v]),S=pA({callback:w,disabled:y||!a}),C=T.useCallback((N,I)=>{S&&(I&&(S.unobserve(I),d.current=!1),N&&S.observe(N))},[S]),[k,A]=Zk(C),R=Uw(t);return T.useEffect(()=>{!S||!k.current||(S.disconnect(),d.current=!1,S.observe(k.current))},[k,S]),T.useEffect(()=>(o({type:Fs.RegisterDroppable,element:{id:r,key:s,disabled:n,node:k,rect:h,data:R}}),()=>o({type:Fs.UnregisterDroppable,key:s,id:r})),[r]),T.useEffect(()=>{n!==u.current.disabled&&(o({type:Fs.SetDroppableDisabled,id:r,key:s,disabled:n}),u.current.disabled=n)},[r,s,n,o]),{active:a,rect:h,isOver:(l==null?void 0:l.id)===r,node:k,over:l,setNodeRef:A}}function Cx(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Tct(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function a2(e){return e!==null&&e>=0}function Act(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Rct(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const cfe=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=Cx(t,r,n),a=t[i],o=s[i];return!o||!a?null:{x:o.left-a.left,y:o.top-a.top,scaleX:o.width/a.width,scaleY:o.height/a.height}},o2={scaleX:1,scaleY:1},Nct=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=e;const o=(t=s[n])!=null?t:r;if(!o)return null;if(i===n){const c=s[a];return c?{x:0,y:n<a?c.top+c.height-(o.top+o.height):c.top-o.top,...o2}:null}const l=Mct(s,i,n);return i>n&&i<=a?{x:0,y:-o.height-l,...o2}:i<n&&i>=a?{x:0,y:o.height+l,...o2}:{x:0,y:0,...o2}};function Mct(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const ufe="Sortable",dfe=Ve.createContext({activeIndex:-1,containerId:ufe,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:cfe,disabled:{draggable:!1,droppable:!1}});function Ict(e){let{children:t,id:n,items:r,strategy:i=cfe,disabled:s=!1}=e;const{active:a,dragOverlay:o,droppableRects:l,over:c,measureDroppableContainers:u}=Sct(),d=X1(ufe,n),h=o.rect!==null,m=T.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),y=a!=null,b=a?m.indexOf(a.id):-1,v=c?m.indexOf(c.id):-1,x=T.useRef(m),w=!Act(m,x.current),S=v!==-1&&b===-1||w,C=Rct(s);Au(()=>{w&&y&&u(m)},[w,m,y,u]),T.useEffect(()=>{x.current=m},[m]);const k=T.useMemo(()=>({activeIndex:b,containerId:d,disabled:C,disableTransforms:S,items:m,overIndex:v,useDragOverlay:h,sortedRects:Tct(m,l),strategy:i}),[b,d,C.draggable,C.droppable,S,m,v,l,h,i]);return Ve.createElement(dfe.Provider,{value:k},t)}const jct=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return Cx(n,r,i).indexOf(t)},Oct=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:o,previousContainerId:l,transition:c}=e;return!c||!r||o!==s&&i===a?!1:n?!0:a!==i&&t===l},Pct={duration:200,easing:"ease"},ffe="transform",Dct=Vw.Transition.toString({property:ffe,duration:0,easing:"linear"}),Fct={roleDescription:"sortable"};function Lct(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,a]=T.useState(null),o=T.useRef(n);return Au(()=>{if(!t&&n!==o.current&&r.current){const l=i.current;if(l){const c=lb(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&a(u)}}n!==o.current&&(o.current=n)},[t,n,r,i]),T.useEffect(()=>{s&&a(null)},[s]),s}function Bct(e){let{animateLayoutChanges:t=Oct,attributes:n,disabled:r,data:i,getNewIndex:s=jct,id:a,strategy:o,resizeObserverConfig:l,transition:c=Pct}=e;const{items:u,containerId:d,activeIndex:h,disabled:m,disableTransforms:y,sortedRects:b,overIndex:v,useDragOverlay:x,strategy:w}=T.useContext(dfe),S=$ct(r,m),C=u.indexOf(a),k=T.useMemo(()=>({sortable:{containerId:d,index:C,items:u},...i}),[d,i,C,u]),A=T.useMemo(()=>u.slice(u.indexOf(a)),[u,a]),{rect:R,node:N,isOver:I,setNodeRef:O}=Ect({id:a,data:k,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...l}}),{active:L,activatorEvent:P,activeNodeRect:V,attributes:F,setNodeRef:J,listeners:U,isDragging:G,over:$,setActivatorNodeRef:ne,transform:W}=_ct({id:a,data:k,attributes:{...Fct,...n},disabled:S.draggable}),te=rlt(O,J),ee=!!L,re=ee&&!y&&a2(h)&&a2(v),de=!x&&G,oe=de&&re?W:null,je=re?oe??(o??w)({rects:b,activeNodeRect:V,activeIndex:h,overIndex:v,index:C}):null,Me=a2(h)&&a2(v)?s({id:a,items:u,activeIndex:h,overIndex:v}):C,Se=L==null?void 0:L.id,qe=T.useRef({activeId:Se,items:u,newIndex:Me,containerId:d}),Qe=u!==qe.current.items,We=t({active:L,containerId:d,isDragging:G,isSorting:ee,id:a,index:C,items:u,newIndex:qe.current.newIndex,previousItems:qe.current.items,previousContainerId:qe.current.containerId,transition:c,wasDragging:qe.current.activeId!=null}),Re=Lct({disabled:!We,index:C,node:N,rect:R});return T.useEffect(()=>{ee&&qe.current.newIndex!==Me&&(qe.current.newIndex=Me),d!==qe.current.containerId&&(qe.current.containerId=d),u!==qe.current.items&&(qe.current.items=u)},[ee,Me,d,u]),T.useEffect(()=>{if(Se===qe.current.activeId)return;if(Se!=null&&qe.current.activeId==null){qe.current.activeId=Se;return}const ge=setTimeout(()=>{qe.current.activeId=Se},50);return()=>clearTimeout(ge)},[Se]),{active:L,activeIndex:h,attributes:F,data:k,rect:R,index:C,newIndex:Me,items:u,isOver:I,isSorting:ee,isDragging:G,listeners:U,node:N,overIndex:v,over:$,setNodeRef:te,setActivatorNodeRef:ne,setDroppableNodeRef:O,setDraggableNodeRef:J,transform:Re??je,transition:K()};function K(){if(Re||Qe&&qe.current.newIndex===C)return Dct;if(!(de&&!iF(P)||!c)&&(ee||We))return Vw.Transition.toString({...c,property:ffe})}}function $ct(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Qk(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const zct=[zr.Down,zr.Right,zr.Up,zr.Left],Uct=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:a,scrollableAncestors:o}}=t;if(zct.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=i.get(d.id);if(h)switch(e.code){case zr.Down:r.top<h.top&&l.push(d);break;case zr.Up:r.top>h.top&&l.push(d);break;case zr.Left:r.left>h.left&&l.push(d);break;case zr.Right:r.left<h.left&&l.push(d);break}});const c=xlt({collisionRect:r,droppableRects:i,droppableContainers:l});let u=Zde(c,"id");if(u===(a==null?void 0:a.id)&&c.length>1&&(u=c[1].id),u!=null){const d=s.get(n.id),h=s.get(u),m=h?i.get(h.id):null,y=h==null?void 0:h.node.current;if(y&&m&&d&&h){const v=hA(y).some((A,R)=>o[R]!==A),x=hfe(d,h),w=qct(d,h),S=v||!x?{x:0,y:0}:{x:w?r.width-m.width:0,y:w?r.height-m.height:0},C={x:m.left,y:m.top};return S.x&&S.y?C:qw(C,S)}}}};function hfe(e,t){return!Qk(e)||!Qk(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function qct(e,t){return!Qk(e)||!Qk(t)||!hfe(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Vct=({id:e,modelDetails:t,buttonsDisabled:n,onMoveToTop:r,onMoveUp:i,onMoveDown:s,isFirst:a,isLast:o})=>{var k,A,R;const{attributes:l,listeners:c,setNodeRef:u,transform:d,transition:h,isDragging:m}=Bct({id:e,disabled:!1}),y={transform:Vw.Transform.toString(d),transition:h,zIndex:m?10:void 0},b=new Set(((k=t.metadataSummary)==null?void 0:k.supported_parameters)??[]),v=new Set(((A=t.metadataSummary)==null?void 0:A.input_modalities)??[]),x=b.has("reasoning"),w=b.has("web_search")||b.has("web_search_options"),S=b.has("tools"),C=Array.from(v).some(N=>N!=="text");return p.jsxs("div",{ref:u,style:y,className:Ye("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",m&&"shadow-lg border-primary bg-card","cursor-grab active:cursor-grabbing"),"aria-label":`Drag to reorder model ${t.name}`,children:[p.jsx("button",{...l,...c,type:"button",className:Ye("p-1 flex-shrink-0","hover:text-foreground"),"aria-hidden":"true",tabIndex:-1,children:p.jsx(tge,{className:"h-5 w-5 text-muted-foreground"})}),p.jsxs("div",{className:"flex-grow min-w-0",children:[p.jsxs(zt,{className:Ye("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:[t.name," ",p.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.providerName,")"]})]}),p.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[x&&p.jsx(kh,{className:"h-3 w-3 text-blue-500"}),w&&p.jsx(Oa,{className:"h-3 w-3 text-green-500"}),S&&p.jsx(Yp,{className:"h-3 w-3 text-orange-500"}),C&&p.jsx(Gp,{className:"h-3 w-3 text-purple-500"})]})]}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto flex-shrink-0",children:[((R=t.metadataSummary)==null?void 0:R.description)&&p.jsx(br,{delayDuration:100,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx("span",{className:"p-1 text-muted-foreground hover:text-foreground cursor-default","aria-label":"Model information",children:p.jsx(zO,{className:"h-4 w-4"})})}),p.jsx(_r,{side:"top",align:"end",className:"max-w-xs break-words",children:p.jsx("p",{children:t.metadataSummary.description})})]})}),p.jsx(In,{tooltipText:"Move to Top",onClick:()=>r(e),disabled:a||n,icon:p.jsx(ime,{}),className:"h-6 w-6"}),p.jsx(In,{tooltipText:"Move Up",onClick:()=>i(e),disabled:a||n,icon:p.jsx($pe,{}),className:"h-6 w-6"}),p.jsx(In,{tooltipText:"Move Down",onClick:()=>s(e),disabled:o||n,icon:p.jsx(cH,{}),className:"h-6 w-6"})]})]})},Wct=({setGlobalModelSortOrderFromModule:e})=>{const{dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAvailableModelListItems:i}=Mr(Sn(I=>({dbProviderConfigs:I.dbProviderConfigs,globalModelSortOrder:I.globalModelSortOrder,isLoading:I.isLoading,getAvailableModelListItems:I.getAvailableModelListItems}))),[s,a]=T.useState(""),[o,l]=T.useState(!1),[c,u]=T.useState(()=>new Set(t.map(I=>I.id))),[d,h]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1});T.useEffect(()=>{u(new Set(t.map(I=>I.id)))},[t]);const m=T.useMemo(()=>{const I=i(),O=new Map(I.map(J=>[J.id,J])),L=new Set;t.forEach(J=>{J.isEnabled&&J.enabledModels&&J.enabledModels.forEach(U=>{L.add(rx(J.id,U))})});const P=I.filter(J=>L.has(J.id)),V=[],F=new Set;return n.forEach(J=>{if(L.has(J)){const U=O.get(J);U&&!F.has(J)&&(V.push(U),F.add(J))}}),P.forEach(J=>{F.has(J.id)||V.push(J)}),V},[t,n,i]),y=T.useMemo(()=>{let I=m;if(c.size!==t.length&&(I=I.filter(L=>c.has(L.providerId))),s.trim()){const L=s.toLowerCase();I=I.filter(P=>P.name.toLowerCase().includes(L)||P.providerName.toLowerCase().includes(L)||P.id.toLowerCase().includes(L))}const O=Object.entries(d).filter(([,L])=>L).map(([L])=>L);return O.length>0&&(I=I.filter(L=>{var F,J;const P=new Set(((F=L.metadataSummary)==null?void 0:F.supported_parameters)??[]),V=new Set(((J=L.metadataSummary)==null?void 0:J.input_modalities)??[]);return O.every(U=>{switch(U){case"reasoning":return P.has("reasoning");case"webSearch":return P.has("web_search")||P.has("web_search_options");case"tools":return P.has("tools");case"multimodal":return Array.from(V).some(G=>G!=="text");default:return!0}})})),I},[m,s,c,t.length,d]),b=s.trim().length>0||c.size!==t.length||Object.values(d).some(Boolean),v=T.useMemo(()=>y.map(I=>I.id),[y]),x=T.useCallback(I=>{const{active:O,over:L}=I;if(L&&O.id!==L.id){const P=m.map(G=>G.id),V=O.id,F=L.id,J=P.indexOf(V),U=P.indexOf(F);if(J!==-1&&U!==-1){const G=Cx(P,J,U);e(G)}else console.warn("DND: Could not find dragged items in the full model order. This might happen if the underlying list changed during drag or items are filtered out.")}},[m,e]),w=T.useCallback((I,O)=>{if(b)return;const L=m.map(F=>F.id),P=L.indexOf(I);if(P===-1)return;let V;if(O==="top"){if(P===0)return;const F=L.splice(P,1)[0];L.unshift(F),V=L}else if(O==="up"){if(P===0)return;V=Cx(L,P,P-1)}else{if(P===L.length-1)return;V=Cx(L,P,P+1)}e(V)},[m,e,b]),S=ylt(TW(lF),TW(aF,{coordinateGetter:Uct})),C=T.useCallback((I,O)=>{u(L=>{const P=new Set(L);return O?P.add(I):P.delete(I),P})},[]),k=I=>{h(O=>({...O,[I]:!O[I]}))},A=c.size!==t.length?1:0,R=Object.values(d).filter(Boolean).length,N=A+R;return r?p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx(Ur,{className:"h-8 w-1/3"}),p.jsx(Ur,{className:"h-6 w-1/2"}),p.jsx(Ur,{className:"h-64 w-full"})]}):p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models to define their display order. Filtering affects the view below. Move buttons (up/down/top) are disabled when filters are active."}),p.jsx(qd,{}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(zt,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Oa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Un,{type:"search",placeholder:"Filter models by name or provider...",value:s,onChange:I=>a(I.target.value),className:"pl-8 w-full h-9",disabled:r})]}),p.jsxs(ul,{open:o,onOpenChange:l,children:[p.jsx(dl,{asChild:!0,children:p.jsxs(St,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:r||t.length===0,children:[p.jsx(LO,{className:"h-4 w-4 mr-1"}),"Filters",N>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:N})]})}),p.jsx(fl,{className:"w-64 p-0",children:p.jsxs("div",{className:"p-2 space-y-3",children:[p.jsxs("div",{children:[p.jsx(zt,{className:"text-xs px-2 font-semibold block mb-1",children:"Providers"}),p.jsx(sl,{className:"h-32 border rounded-md p-1",children:t.map(I=>p.jsxs("div",{className:"flex items-center space-x-2 p-1.5 rounded hover:bg-muted",children:[p.jsx(Vl,{id:`organizer-provider-filter-${I.id}`,checked:c.has(I.id),onCheckedChange:O=>C(I.id,!!O)}),p.jsxs(zt,{htmlFor:`organizer-provider-filter-${I.id}`,className:"text-sm font-normal cursor-pointer",children:[I.name," (",I.type,")"]})]},I.id))})]}),p.jsxs("div",{children:[p.jsx(zt,{className:"text-xs px-2 font-semibold block mb-1",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1 p-1 border rounded-md",children:[p.jsx(In,{tooltipText:"Reasoning",icon:p.jsx(kh,{}),onClick:()=>k("reasoning"),variant:d.reasoning?"secondary":"outline",className:Ye("h-7 w-auto px-2 text-xs",d.reasoning&&"text-primary"),children:"Reasoning"}),p.jsx(In,{tooltipText:"Web Search",icon:p.jsx(Oa,{}),onClick:()=>k("webSearch"),variant:d.webSearch?"secondary":"outline",className:Ye("h-7 w-auto px-2 text-xs",d.webSearch&&"text-primary"),children:"Web"}),p.jsx(In,{tooltipText:"Tools",icon:p.jsx(Yp,{}),onClick:()=>k("tools"),variant:d.tools?"secondary":"outline",className:Ye("h-7 w-auto px-2 text-xs",d.tools&&"text-primary"),children:"Tools"}),p.jsx(In,{tooltipText:"Multimodal",icon:p.jsx(Gp,{}),onClick:()=>k("multimodal"),variant:d.multimodal?"secondary":"outline",className:Ye("h-7 w-auto px-2 text-xs",d.multimodal&&"text-primary"),children:"Multimodal"})]})]})]})})]})]}),p.jsx(sl,{className:"h-[calc(20*2.75rem+2px)] w-full rounded-md border border-border p-3 bg-background/50",children:y.length>0?p.jsx(vct,{sensors:S,collisionDetection:vlt,onDragEnd:x,children:p.jsx(Ict,{items:v,strategy:Nct,children:y.map(I=>p.jsx(Vct,{id:I.id,modelDetails:I,onMoveToTop:()=>w(I.id,"top"),onMoveUp:()=>w(I.id,"up"),onMoveDown:()=>w(I.id,"down"),isFirst:m.findIndex(O=>O.id===I.id)===0,isLast:m.findIndex(O=>O.id===I.id)===m.length-1,buttonsDisabled:b},I.id))})}):p.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:b?"No models match your filters.":"No models enabled globally. Enable models within provider configurations."})})]})]})},l2=e=>{if(!e)return"N/A";const t=parseFloat(e);return isNaN(t)?"N/A":`$${(t/1e3).toFixed(4)} / 1K tokens`},Rl=(e,t,n=!1,r="secondary")=>t==null||String(t).trim()===""?null:p.jsxs(Ii,{children:[p.jsx(Kn,{className:"font-medium text-xs w-1/3 py-1.5 px-3",children:e}),p.jsx(Kn,{className:"text-xs py-1.5 px-3 break-all",children:n?p.jsx(As,{variant:r,className:"text-xs",children:String(t)}):Array.isArray(t)?p.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((i,s)=>p.jsx(As,{variant:"outline",className:"text-xs",children:String(i)},s))}):String(t)})]}),Hct=({modelId:e})=>{var m,y,b,v,x,w,S,C,k,A,R,N;const{createAiModelConfig:t,dbProviderConfigs:n,dbApiKeys:r,updateProviderConfig:i,isLoading:s}=Mr(Sn(I=>({createAiModelConfig:I.createAiModelConfig,dbProviderConfigs:I.dbProviderConfigs,dbApiKeys:I.dbApiKeys,updateProviderConfig:I.updateProviderConfig,isLoading:I.isLoading}))),a=T.useMemo(()=>{if(!e)return;const{providerId:I,modelId:O}=hc(e);if(!I||!O)return;const L=n.find(V=>V.id===I);if(!L)return;const P=r.find(V=>V.id===L.apiKeyId);return t(L,O,P==null?void 0:P.value)},[e,n,r,t]),o=a==null?void 0:a.metadata,l=T.useCallback(async()=>{if(!a||!e)return;const{providerId:I,modelId:O}=hc(e);if(!I||!O)return;const L=n.find(J=>J.id===I);if(!L){Pe.error("Provider configuration not found.");return}const P=new Set(L.enabledModels??[]),V=P.has(O);V?P.delete(O):P.add(O);const F=Array.from(P);try{await i(L.id,{enabledModels:F}),Pe.success(`Model "${a.name}" ${V?"disabled":"enabled"}.`)}catch{Pe.error("Failed to update model status.")}},[a,e,n,i]);if(s)return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsx(Ur,{className:"h-8 w-3/4 flex-shrink-0"}),p.jsx(Ur,{className:"h-4 w-1/2 flex-shrink-0"}),p.jsxs("div",{className:"flex-grow space-y-2",children:[p.jsx(Ur,{className:"h-10 w-full"}),p.jsx(Ur,{className:"h-10 w-full"}),p.jsx(Ur,{className:"h-10 w-full"}),p.jsx(Ur,{className:"h-10 w-full"})]})]});if(!e)return p.jsxs("div",{className:"p-4 text-center text-muted-foreground h-full flex flex-col items-center justify-center",children:[p.jsx(vc,{className:"mx-auto h-10 w-10 mb-2 text-amber-500"}),p.jsx("p",{className:"text-sm",children:'No model selected. Click a model in the "Configuration" or "Browse Models" tab to view its details.'})]});if(!a||!o)return p.jsxs("div",{className:"p-4 text-center text-destructive h-full flex flex-col items-center justify-center",children:[p.jsx(vc,{className:"mx-auto h-10 w-10 mb-2"}),p.jsxs("p",{className:"text-sm",children:["Details not available for model: ",e,". It might be misconfigured or no longer available."]})]});const{providerId:c,modelId:u}=hc(e),d=n.find(I=>I.id===c),h=u!=null&&(d==null?void 0:d.isEnabled)&&((m=d==null?void 0:d.enabledModels)==null?void 0:m.includes(u))===!0;return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[p.jsxs("h4",{className:"text-lg font-semibold text-card-foreground truncate",children:[a.name,p.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",a.providerName,")"]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(zt,{htmlFor:`enable-details-${u}`,className:"text-xs",children:h?"Enabled":"Disabled"}),p.jsx(bc,{id:`enable-details-${u}`,checked:h,onCheckedChange:l,disabled:!(d!=null&&d.isEnabled),"aria-label":`Enable model ${a.name}`})]})]}),o.description&&p.jsx("p",{className:"text-xs text-muted-foreground flex-shrink-0",children:o.description}),p.jsx(sl,{className:"flex-grow border rounded-md bg-background/30",children:p.jsxs(Vh,{children:[p.jsxs(Htt,{className:"py-2 text-xs",children:["Model ID: ",o.id]}),p.jsxs(Wh,{children:[Rl("Context Length",((y=o.top_provider)==null?void 0:y.context_length)??o.context_length),Rl("Max Completion Tokens",(b=o.top_provider)==null?void 0:b.max_completion_tokens),Rl("Input Modalities",(v=o.architecture)==null?void 0:v.input_modalities),Rl("Output Modalities",(x=o.architecture)==null?void 0:x.output_modalities),Rl("Tokenizer",(w=o.architecture)==null?void 0:w.tokenizer,!0),Rl("Instruct Type",(S=o.architecture)==null?void 0:S.instruct_type,!0),Rl("Pricing (Prompt)",l2((C=o.pricing)==null?void 0:C.prompt)),Rl("Pricing (Completion)",l2((k=o.pricing)==null?void 0:k.completion)),Rl("Pricing (Image)",l2((A=o.pricing)==null?void 0:A.image)),Rl("Pricing (Request)",l2((R=o.pricing)==null?void 0:R.request)),Rl("Supported Parameters",o.supported_parameters),Rl("Moderated",(N=o.top_provider)!=null&&N.is_moderated?p.jsx(tE,{className:"h-4 w-4 text-green-500"}):"No")]})]})})]})},Gct=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=Mr(Sn(h=>({apiKeys:h.dbApiKeys,addApiKey:h.addApiKey,deleteApiKey:h.deleteApiKey,isLoading:h.isLoading}))),[i,s]=T.useState(!1),[a,o]=T.useState(!1),[l,c]=T.useState({}),u=T.useCallback(async(h,m,y)=>{o(!0);try{await t(h,m,y),s(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{o(!1)}},[t]),d=T.useCallback(async(h,m)=>{if(window.confirm(`Are you sure you want to delete the API key "${m}"? This will unlink it from any providers using it.`)){c(y=>({...y,[h]:!0}));try{await n(h)}catch(y){console.error("Failed to delete API key (from component):",y)}finally{c(y=>({...y,[h]:!1}))}}},[n]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!i&&p.jsxs(St,{onClick:()=>s(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[p.jsx(mm,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),i&&p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),p.jsx(rle,{onSave:u,onCancel:()=>s(!1),disabled:a})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!i?p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ur,{className:"h-10 w-full"}),p.jsx(Ur,{className:"h-10 w-full"})]}):(e||[]).length===0&&!i?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Vh,{children:[p.jsx(qm,{children:p.jsxs(Ii,{children:[p.jsx(Hr,{children:"Name"}),p.jsx(Hr,{children:"Provider Type"}),p.jsx(Hr,{children:"Created"}),p.jsx(Hr,{className:"text-right",children:"Actions"})]})}),p.jsx(Wh,{children:(e||[]).map(h=>{const m=l[h.id];return p.jsxs(Ii,{className:m?"opacity-50":"",children:[p.jsx(Kn,{className:"font-medium",children:h.name||"Unnamed Key"}),p.jsx(Kn,{children:h.providerId||"Unknown"}),p.jsx(Kn,{className:"text-xs text-muted-foreground",children:nw(new Date(h.createdAt),"PPp")}),p.jsx(Kn,{className:"text-right",children:p.jsx(In,{tooltipText:"Delete Key",onClick:()=>d(h.id,h.name||"Unnamed Key"),disabled:m,"aria-label":`Delete key ${h.name||"Unnamed Key"}`,icon:m?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(So,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},h.id)})})]})})]})]})},Kct=Ve.memo(Gct),Yct=({onSelectModelForDetails:e})=>{const[t,n]=T.useState(null),[r,i]=T.useState(null),s=T.useCallback(O=>{if(O){n(O);const L=O.querySelector("[data-radix-scroll-area-viewport]");if(L)i(L);else{const P=new MutationObserver(()=>{const V=O.querySelector("[data-radix-scroll-area-viewport]");V&&(i(V),P.disconnect())});return P.observe(O,{childList:!0,subtree:!0}),()=>P.disconnect()}}else n(null),i(null)},[]),{getAvailableModelListItems:a,isLoading:o,dbProviderConfigs:l}=Mr(Sn(O=>({getAvailableModelListItems:O.getAvailableModelListItems,isLoading:O.isLoading,dbProviderConfigs:O.dbProviderConfigs}))),[c,u]=T.useState(""),[d,h]=T.useState(!1),[m,y]=T.useState(()=>new Set(l.map(O=>O.id))),[b,v]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),x=T.useMemo(()=>a(),[a]);T.useEffect(()=>{y(new Set(l.map(O=>O.id)))},[l]);const w=T.useMemo(()=>{let O=x;if(m.size!==l.length&&(O=O.filter(P=>m.has(P.providerId))),c.trim()){const P=c.toLowerCase();O=O.filter(V=>V.name.toLowerCase().includes(P)||V.providerName.toLowerCase().includes(P)||V.id.toLowerCase().includes(P))}const L=Object.entries(b).filter(([,P])=>P).map(([P])=>P);return L.length>0&&(O=O.filter(P=>{var J,U;const V=new Set(((J=P.metadataSummary)==null?void 0:J.supported_parameters)??[]),F=new Set(((U=P.metadataSummary)==null?void 0:U.input_modalities)??[]);return L.every(G=>{switch(G){case"reasoning":return V.has("reasoning");case"webSearch":return V.has("web_search")||V.has("web_search_options");case"tools":return V.has("tools");case"multimodal":return Array.from(F).some($=>$!=="text");default:return!0}})})),O.sort((P,V)=>{const F=P.providerName.localeCompare(V.providerName);return F!==0?F:P.name.localeCompare(V.name)})},[x,c,m,l.length,b]),S=N5({count:w.length,getScrollElement:()=>r,estimateSize:()=>48,overscan:10}),C=T.useCallback((O,L)=>{y(P=>{const V=new Set(P);return L?V.add(O):V.delete(O),V})},[]),k=O=>{v(L=>({...L,[O]:!L[O]}))},A=O=>{e(O)},R=m.size!==l.length?1:0,N=Object.values(b).filter(Boolean).length,I=R+N;return o?p.jsxs("div",{className:"space-y-2 h-full flex flex-col",children:[p.jsx(Ur,{className:"h-9 w-full flex-shrink-0"}),p.jsx(Ur,{className:"h-full w-full flex-grow"})]}):p.jsxs("div",{className:"space-y-3 h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Oa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Un,{type:"search",placeholder:"Filter models by name or provider...",value:c,onChange:O=>u(O.target.value),className:"pl-8 w-full h-9",disabled:o})]}),p.jsxs(ul,{open:d,onOpenChange:h,children:[p.jsx(dl,{asChild:!0,children:p.jsxs(St,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:o||l.length===0,children:[p.jsx(LO,{className:"h-4 w-4 mr-1"}),"Filters",I>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:I})]})}),p.jsx(fl,{className:"w-64 p-0",children:p.jsxs("div",{className:"p-2 space-y-3",children:[p.jsxs("div",{children:[p.jsx(zt,{className:"text-xs px-2 font-semibold block mb-1",children:"Providers"}),p.jsx(sl,{className:"h-32 border rounded-md p-1",children:l.map(O=>p.jsxs("div",{className:"flex items-center space-x-2 p-1.5 rounded hover:bg-muted",children:[p.jsx(Vl,{id:`model-browser-provider-filter-${O.id}`,checked:m.has(O.id),onCheckedChange:L=>C(O.id,!!L)}),p.jsxs(zt,{htmlFor:`model-browser-provider-filter-${O.id}`,className:"text-sm font-normal cursor-pointer",children:[O.name," (",O.type,")"]})]},O.id))})]}),p.jsxs("div",{children:[p.jsx(zt,{className:"text-xs px-2 font-semibold block mb-1",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1 p-1 border rounded-md",children:[p.jsx(In,{tooltipText:"Reasoning",icon:p.jsx(kh,{}),onClick:()=>k("reasoning"),variant:b.reasoning?"secondary":"outline",className:Ye("h-7 w-auto px-2 text-xs",b.reasoning&&"text-primary"),children:"Reasoning"}),p.jsx(In,{tooltipText:"Web Search",icon:p.jsx(Oa,{}),onClick:()=>k("webSearch"),variant:b.webSearch?"secondary":"outline",className:Ye("h-7 w-auto px-2 text-xs",b.webSearch&&"text-primary"),children:"Web"}),p.jsx(In,{tooltipText:"Tools",icon:p.jsx(Yp,{}),onClick:()=>k("tools"),variant:b.tools?"secondary":"outline",className:Ye("h-7 w-auto px-2 text-xs",b.tools&&"text-primary"),children:"Tools"}),p.jsx(In,{tooltipText:"Multimodal",icon:p.jsx(Gp,{}),onClick:()=>k("multimodal"),variant:b.multimodal?"secondary":"outline",className:Ye("h-7 w-auto px-2 text-xs",b.multimodal&&"text-primary"),children:"Multimodal"})]})]})]})})]})]}),p.jsxs(sl,{className:"flex-grow border rounded-md bg-background/50 h-[calc(15*2.5rem+2px)]",ref:s,children:[r&&p.jsx("div",{style:{height:`${S.getTotalSize()}px`,width:"100%",position:"relative"},children:w.length===0&&!o?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4 absolute inset-0 flex items-center justify-center",children:"No models match your filters."}):S.getVirtualItems().map(O=>{var P;const L=w[O.index];return L?p.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${O.size}px`,transform:`translateY(${O.start}px)`},className:"p-1",children:p.jsx(br,{delayDuration:300,children:p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsxs("button",{className:"w-full text-left p-1.5 rounded hover:bg-muted/50 flex flex-col",onClick:()=>A(L.id),children:[p.jsx("span",{className:"text-sm font-medium truncate",children:L.name}),p.jsx("span",{className:"text-xs text-muted-foreground truncate",children:L.providerName})]})}),((P=L.metadataSummary)==null?void 0:P.description)&&p.jsx(_r,{side:"bottom",align:"start",className:"max-w-xs",children:p.jsx("p",{children:L.metadataSummary.description})})]})})},L.id):null})}),!r&&!o&&p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Initializing list..."})]})]})},Zct=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:i,providerFetchStatus:s,dbProviderConfigs:a,apiKeys:o,isLoading:l}=Mr(Sn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[c,u]=T.useState(!1),d=()=>u(!0),h=T.useCallback(()=>u(!1),[]),m=T.useCallback(async b=>{await i(b)},[i]),y=T.useMemo(()=>a||[],[a]);return p.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),p.jsx("div",{className:"flex-shrink-0",children:c?p.jsx(dle,{apiKeys:o||[],onAddProvider:t,onCancel:h}):p.jsxs(St,{onClick:d,variant:"outline",className:"w-full",disabled:l,children:[p.jsx(mm,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),p.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:p.jsxs("div",{className:"space-y-2",children:[l&&!c?p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[p.jsx(Ur,{className:"h-24 w-full"}),p.jsx(Ur,{className:"h-24 w-full"}),p.jsx(Ur,{className:"h-24 w-full"})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:y.map(b=>p.jsx(nlt,{provider:b,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:m,fetchStatus:s[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&y.length===0&&!c&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},Xct=({setGlobalModelSortOrderFromModule:e})=>{const{selectedModelForDetails:t,setSelectedModelForDetails:n}=Mr(Sn(o=>({selectedModelForDetails:o._selectedModelForDetails,setSelectedModelForDetails:o.setSelectedModelForDetails}))),[r,i]=T.useState("providers-config"),s=T.useCallback(o=>{n(o),o&&i("providers-details-current")},[n,i]),a=T.useMemo(()=>[{value:"providers-config",label:"Configuration",content:p.jsx(Zct,{onSelectModelForDetails:s})},{value:"providers-order",label:"Model Order",content:p.jsx(Wct,{setGlobalModelSortOrderFromModule:e})},{value:"api-keys",label:"API Keys",content:p.jsx(Kct,{})},{value:"providers-details-current",label:"Selected Model",content:p.jsx(Hct,{modelId:t})},{value:"providers-browse-all",label:"Browse Models",content:p.jsx(Yct,{onSelectModelForDetails:s})}],[t,s,e]);return p.jsx(Pu,{tabs:a,initialValue:r,onValueChange:i,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},Jct=Ve.memo(Xct);class Qct{constructor(){ve(this,"id","core-provider-settings");ve(this,"modApiRef",null);ve(this,"eventUnsubscribers",[]);ve(this,"setGlobalModelSortOrderFromModule",t=>{var n;(n=this.modApiRef)==null||n.emit(dr.setGlobalModelSortOrderRequest,{ids:t})})}async initialize(t){this.modApiRef=t}register(t){this.modApiRef=t,t.registerSettingsTab({id:"providers",title:"Providers & Models",order:20,component:()=>Ve.createElement(Jct,{setGlobalModelSortOrderFromModule:this.setGlobalModelSortOrderFromModule})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.modApiRef=null}}const eut=Je({globalSystemPrompt:Ue()});function tut({field:e}){return p.jsx(p.Fragment,{children:e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive mt-1 block",children:e.state.meta.errors.join(", ")}):null})}const nut=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t}=gr(Sn(r=>({globalSystemPrompt:r.globalSystemPrompt,setGlobalSystemPrompt:r.setGlobalSystemPrompt}))),n=Ns({defaultValues:{globalSystemPrompt:e??""},validators:{onChangeAsync:eut,onChangeAsyncDebounceMs:500},onSubmit:async({value:r})=>{try{t(r.globalSystemPrompt),Pe.success("Global system prompt updated!")}catch(i){Pe.error("Failed to update prompt. Please try again."),console.error("Error submitting assistant prompt form:",i)}}});return T.useEffect(()=>{n.state.values.globalSystemPrompt!==(e??"")&&n.reset({globalSystemPrompt:e??""})},[e,n]),p.jsxs("form",{onSubmit:r=>{r.preventDefault(),r.stopPropagation(),n.handleSubmit()},className:"space-y-3",children:[p.jsx("div",{children:p.jsx(n.Field,{name:"globalSystemPrompt",children:r=>p.jsxs(p.Fragment,{children:[p.jsx(zt,{htmlFor:r.name,className:"text-sm mb-1 block",children:"Global System Prompt"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),p.jsx(ql,{id:r.name,placeholder:"Enter default system instructions for the assistant...",value:r.state.value,onBlur:r.handleBlur,onChange:i=>r.handleChange(i.target.value),rows:6,className:r.state.meta.errors.length?"border-destructive":""}),p.jsx(tut,{field:r})]})})}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(n.Subscribe,{selector:r=>[r.canSubmit,r.isSubmitting,r.isValidating,r.isValid],children:([r,i,s,a])=>p.jsx(St,{type:"submit",size:"sm",disabled:!r||i||s||!a,children:i?"Saving...":s?"Validating...":"Save Prompt"})})})]})},rut=Je({temperature:Nt().min(0).max(1),topP:Nt().min(0).max(1),maxTokens:Nt().min(1).nullable(),topK:Nt().min(1).nullable(),presencePenalty:Nt().min(-2).max(2),frequencyPenalty:Nt().min(-2).max(2)}),iut=()=>{const e=gr(Sn(n=>({temperature:n.temperature,setTemperature:n.setTemperature,topP:n.topP,setTopP:n.setTopP,maxTokens:n.maxTokens,setMaxTokens:n.setMaxTokens,topK:n.topK,setTopK:n.setTopK,presencePenalty:n.presencePenalty,setPresencePenalty:n.setPresencePenalty,frequencyPenalty:n.frequencyPenalty,setFrequencyPenalty:n.setFrequencyPenalty}))),t=Ns({defaultValues:{temperature:e.temperature??.7,topP:e.topP??1,maxTokens:e.maxTokens??null,topK:e.topK??null,presencePenalty:e.presencePenalty??0,frequencyPenalty:e.frequencyPenalty??0},validators:{onChangeAsync:rut,onChangeAsyncDebounceMs:500},onSubmit:async({value:n})=>{try{e.setTemperature(n.temperature),e.setTopP(n.topP),e.setMaxTokens(n.maxTokens??null),e.setTopK(n.topK??null),e.setPresencePenalty(n.presencePenalty),e.setFrequencyPenalty(n.frequencyPenalty),Pe.success("Assistant parameters updated!")}catch(r){Pe.error("Failed to update parameters."),console.error("Error submitting parameters form:",r)}}});return T.useEffect(()=>{t.reset({temperature:e.temperature??.7,topP:e.topP??1,maxTokens:e.maxTokens??null,topK:e.topK??null,presencePenalty:e.presencePenalty??0,frequencyPenalty:e.frequencyPenalty??0})},[e.temperature,e.topP,e.maxTokens,e.topK,e.presencePenalty,e.frequencyPenalty,t]),p.jsxs("form",{onSubmit:n=>{n.preventDefault(),n.stopPropagation(),t.handleSubmit()},className:"space-y-4",children:[p.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),p.jsx(dc,{form:t,name:"temperature",label:"Temperature",min:0,max:1,step:.01,valueDisplayPrecision:2,wrapperClassName:"space-y-1.5"}),p.jsx(dc,{form:t,name:"topP",label:"Top P",min:0,max:1,step:.01,valueDisplayPrecision:2,wrapperClassName:"space-y-1.5"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsx(by,{form:t,name:"maxTokens",label:"Max Tokens",placeholder:"Default (None)",min:1,className:"h-9 text-sm",allowNull:!0,wrapperClassName:"space-y-1.5"}),p.jsx(by,{form:t,name:"topK",label:"Top K",placeholder:"Default (None)",min:1,className:"h-9 text-sm",allowNull:!0,wrapperClassName:"space-y-1.5"})]}),p.jsx(dc,{form:t,name:"presencePenalty",label:"Presence Penalty",min:-2,max:2,step:.01,valueDisplayPrecision:2,wrapperClassName:"space-y-1.5"}),p.jsx(dc,{form:t,name:"frequencyPenalty",label:"Frequency Penalty",min:-2,max:2,step:.01,valueDisplayPrecision:2,wrapperClassName:"space-y-1.5"}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx(St,{type:"button",variant:"ghost",onClick:()=>t.reset(),disabled:!t.state.isDirty,children:"Reset"}),p.jsx(t.Subscribe,{selector:n=>[n.canSubmit,n.isSubmitting],children:([n,r])=>p.jsx(St,{type:"submit",disabled:!n||r,children:r?"Saving...":"Save Changes"})})]})]})},sut=Je({toolMaxSteps:Nt({required_error:"Max steps is required",invalid_type_error:"Max steps must be a number"}).min(1,"Must be at least 1").max(20,"Cannot exceed 20")});function aut({field:e}){return p.jsx(p.Fragment,{children:e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive mt-1 block",children:e.state.meta.errors.join(", ")}):null})}const out=()=>{const{toolMaxSteps:e,setToolMaxSteps:t}=gr(Sn(r=>({toolMaxSteps:r.toolMaxSteps,setToolMaxSteps:r.setToolMaxSteps}))),n=Ns({defaultValues:{toolMaxSteps:e??5},validators:{onChangeAsync:sut,onChangeAsyncDebounceMs:500},onSubmit:async({value:r})=>{try{t(r.toolMaxSteps),Pe.success("Tool settings updated!")}catch(i){Pe.error("Failed to update tool settings."),console.error("Error submitting tool settings form:",i)}}});return T.useEffect(()=>{n.state.values.toolMaxSteps!==(e??5)&&n.reset({toolMaxSteps:e??5})},[e,n]),p.jsxs("form",{onSubmit:r=>{r.preventDefault(),r.stopPropagation(),n.handleSubmit()},className:"space-y-3",children:[p.jsx(n.Field,{name:"toolMaxSteps",children:r=>p.jsxs("div",{children:[p.jsx(zt,{htmlFor:r.name,className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),p.jsx(Un,{id:r.name,type:"number",min:1,max:20,step:1,value:r.state.value,onBlur:r.handleBlur,onChange:i=>{const s=i.target.valueAsNumber;isNaN(s)?i.target.value===""&&r.handleChange(void 0):r.handleChange(s)},className:`w-24 ${r.state.meta.errors.length?"border-destructive":""}`}),p.jsx(aut,{field:r})]})}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(n.Subscribe,{selector:r=>[r.canSubmit,r.isSubmitting,r.isValidating,r.isValid],children:([r,i,s,a])=>p.jsx(St,{type:"submit",size:"sm",disabled:!r||i||s||!a,children:i?"Saving...":s?"Validating...":"Save Tool Settings"})})})]})},lut=Je({autoTitleEnabled:Cr(),autoTitleModelId:Ue().nullable(),autoTitlePromptMaxLength:Nt().min(100).max(4e3),autoTitleIncludeFiles:Cr(),autoTitleIncludeRules:Cr()});function Lv({field:e}){return p.jsx(p.Fragment,{children:e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive mt-1 block",children:e.state.meta.errors.join(", ")}):null})}const cut=()=>{const e=gr(Sn(n=>({autoTitleEnabled:n.autoTitleEnabled,setAutoTitleEnabled:n.setAutoTitleEnabled,autoTitleModelId:n.autoTitleModelId,setAutoTitleModelId:n.setAutoTitleModelId,autoTitlePromptMaxLength:n.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:n.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:n.autoTitleIncludeFiles,setAutoTitleIncludeFiles:n.setAutoTitleIncludeFiles,autoTitleIncludeRules:n.autoTitleIncludeRules,setAutoTitleIncludeRules:n.setAutoTitleIncludeRules}))),t=Ns({defaultValues:{autoTitleEnabled:e.autoTitleEnabled??!1,autoTitleModelId:e.autoTitleModelId??null,autoTitlePromptMaxLength:e.autoTitlePromptMaxLength??768,autoTitleIncludeFiles:e.autoTitleIncludeFiles??!1,autoTitleIncludeRules:e.autoTitleIncludeRules??!1},validators:{onChangeAsync:lut,onChangeAsyncDebounceMs:500},onSubmit:async({value:n})=>{try{e.setAutoTitleEnabled(n.autoTitleEnabled),e.setAutoTitleModelId(n.autoTitleModelId??null),e.setAutoTitlePromptMaxLength(n.autoTitlePromptMaxLength),e.setAutoTitleIncludeFiles(n.autoTitleIncludeFiles),e.setAutoTitleIncludeRules(n.autoTitleIncludeRules),Pe.success("Auto-title settings updated!")}catch(r){Pe.error("Failed to update auto-title settings."),console.error("Error submitting auto-title settings form:",r)}}});return T.useEffect(()=>{t.reset({autoTitleEnabled:e.autoTitleEnabled??!1,autoTitleModelId:e.autoTitleModelId??null,autoTitlePromptMaxLength:e.autoTitlePromptMaxLength??768,autoTitleIncludeFiles:e.autoTitleIncludeFiles??!1,autoTitleIncludeRules:e.autoTitleIncludeRules??!1})},[e.autoTitleEnabled,e.autoTitleModelId,e.autoTitlePromptMaxLength,e.autoTitleIncludeFiles,e.autoTitleIncludeRules,t]),p.jsxs("form",{onSubmit:n=>{n.preventDefault(),n.stopPropagation(),t.handleSubmit()},className:"space-y-3",children:[p.jsx(t.Field,{name:"autoTitleEnabled",children:n=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(bc,{id:n.name,checked:n.state.value,onCheckedChange:n.handleChange,onBlur:n.handleBlur,"aria-labelledby":`${n.name}-label`}),p.jsx(zt,{id:`${n.name}-label`,htmlFor:n.name,children:"Enable Auto-Title Generation"}),p.jsx(Lv,{field:n})]})}),t.state.values.autoTitleEnabled&&p.jsxs("div",{className:"space-y-3 pl-6 border-l-2 border-muted",children:[p.jsx(t.Field,{name:"autoTitleModelId",children:n=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:n.name,children:"Model for Title Generation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose which model to use for generating conversation titles. Uses global default model if not specified."}),p.jsx(J5,{value:n.state.value,onChange:r=>n.handleChange(r),className:"w-full"}),p.jsx(Lv,{field:n})]})}),p.jsx(t.Field,{name:"autoTitlePromptMaxLength",children:n=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(zt,{htmlFor:n.name,children:"Conversation Content Length Limit"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum characters from conversation to include in title generation prompt (100-4000)."}),p.jsx(Un,{id:n.name,type:"number",min:100,max:4e3,step:1,value:n.state.value,onBlur:n.handleBlur,onChange:r=>{const i=r.target.valueAsNumber;isNaN(i)||n.handleChange(i)},className:`w-32 ${n.state.meta.errors.length?"border-destructive":""}`}),p.jsx(Lv,{field:n})]})}),p.jsx(t.Field,{name:"autoTitleIncludeFiles",children:n=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(bc,{id:n.name,checked:n.state.value,onCheckedChange:n.handleChange,onBlur:n.handleBlur,"aria-labelledby":`${n.name}-label`}),p.jsx(zt,{id:`${n.name}-label`,htmlFor:n.name,children:"Include file context in title prompt"}),p.jsx(Lv,{field:n})]})}),p.jsx(t.Field,{name:"autoTitleIncludeRules",children:n=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(bc,{id:n.name,checked:n.state.value,onCheckedChange:n.handleChange,onBlur:n.handleBlur,"aria-labelledby":`${n.name}-label`}),p.jsx(zt,{id:`${n.name}-label`,htmlFor:n.name,children:"Include active rules in title prompt"}),p.jsx(Lv,{field:n})]})})]}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(t.Subscribe,{selector:n=>[n.canSubmit,n.isSubmitting,n.isValidating,n.isValid],children:([n,r,i,s])=>p.jsx(St,{type:"submit",size:"sm",disabled:!n||r||i||!s,children:r?"Saving...":i?"Validating...":"Save Title Settings"})})})]})},uut=Je({name:Ue().min(1,"Name is required"),description:Ue(),variables:cn(Je({name:Ue().min(1,"Variable name is required"),description:Ue(),type:cl(["string","number","boolean","array"]),required:Cr(),default:Ue().optional(),instructions:Ue().optional()})),prompt:Ue().min(1,"Prompt content is required"),tags:cn(Ue()),tools:cn(Ue()),rules:cn(Ue())}),dut=(e,t)=>({getEnabledTools:()=>new Set(e),setEnabledTools:n=>{const r=n(new Set(e));t(Array.from(r))},getSelectedItemId:()=>"mock-id",getSelectedItemType:()=>"conversation",getGlobalDefaultMaxSteps:()=>5});function $W({template:e,onSubmit:t,onSuccess:n}){const[r,i]=T.useState({name:"",description:"",type:"string",required:!1,default:"",instructions:""}),[s,a]=T.useState(null),{rules:o,tags:l,tagRuleLinks:c,loadRulesAndTags:u}=Kle(Sn(b=>({rules:b.rules,tags:b.tags,tagRuleLinks:b.tagRuleLinks,loadRulesAndTags:b.loadRulesAndTags})));T.useEffect(()=>{u()},[u]);const d=Ns({defaultValues:{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",variables:(e==null?void 0:e.variables)||[],prompt:(e==null?void 0:e.prompt)||"",tags:(e==null?void 0:e.tags)||[],tools:(e==null?void 0:e.tools)||[],rules:(e==null?void 0:e.rules)||[]},validators:{onChangeAsync:uut,onChangeAsyncDebounceMs:500},onSubmit:async({value:b})=>{t(b),n()}}),h=()=>{r.name&&(d.setFieldValue("variables",[...d.getFieldValue("variables"),{...r}]),i({name:"",description:"",type:"string",required:!1,default:"",instructions:""}))},m=b=>{const v=d.getFieldValue("variables");d.setFieldValue("variables",v.filter((x,w)=>w!==b))},y=b=>{const v=c.filter(x=>x.tagId===b).map(x=>x.ruleId);return o.filter(x=>v.includes(x.id))};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-medium",children:e?"Edit Template":"New Template"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:e?"Update your prompt template":"Create a reusable prompt template with variables"})]}),p.jsxs("form",{onSubmit:b=>{b.preventDefault(),b.stopPropagation(),d.handleSubmit()},className:"space-y-6",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx(d.Field,{name:"name",children:b=>{var v;return p.jsxs("div",{children:[p.jsx(zt,{htmlFor:b.name,children:"Template Name"}),p.jsx(Un,{id:b.name,value:b.state.value,onChange:x=>b.handleChange(x.target.value),onBlur:b.handleBlur,placeholder:"Enter template name"}),b.state.meta.errors.length>0&&p.jsx("p",{className:"text-xs text-destructive mt-1",children:((v=b.state.meta.errors[0])==null?void 0:v.message)||"Invalid input"})]})}}),p.jsx(d.Field,{name:"description",children:b=>p.jsxs("div",{children:[p.jsx(zt,{htmlFor:b.name,children:"Description"}),p.jsx(ql,{id:b.name,value:b.state.value,onChange:v=>b.handleChange(v.target.value),onBlur:b.handleBlur,placeholder:"Describe what this template does",rows:3})]})}),p.jsx(d.Field,{name:"prompt",children:b=>{var v;return p.jsxs("div",{children:[p.jsx(zt,{htmlFor:b.name,children:"Prompt Template"}),p.jsx(ql,{id:b.name,value:b.state.value,onChange:x=>b.handleChange(x.target.value),onBlur:b.handleBlur,placeholder:"Enter your prompt template using {{ variable_name }} syntax",rows:6,className:"font-mono"}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Use double curly braces to reference variables:"," ","{{ variable_name }}"]}),b.state.meta.errors.length>0&&p.jsx("p",{className:"text-xs text-destructive mt-1",children:((v=b.state.meta.errors[0])==null?void 0:v.message)||"Invalid input"})]})}})]}),p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(zt,{className:"text-base font-medium",children:"Variables"}),p.jsxs("div",{className:"space-y-3 mt-2",children:[d.getFieldValue("variables").map((b,v)=>p.jsxs("div",{className:"p-3 border rounded-lg space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h4",{className:"font-medium",children:b.name}),p.jsx(St,{variant:"ghost",size:"sm",onClick:()=>m(v),children:p.jsx(va,{className:"h-4 w-4"})})]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:b.description}),p.jsxs("div",{className:"flex gap-2 text-xs",children:[p.jsx(As,{variant:b.required?"default":"secondary",children:b.required?"Required":"Optional"}),p.jsx(As,{variant:"outline",children:b.type}),b.default&&p.jsxs(As,{variant:"outline",children:["Default: ",b.default]})]})]},v)),p.jsxs("div",{className:"p-3 border-2 border-dashed rounded-lg space-y-3",children:[p.jsx(zt,{children:"Add New Variable"}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx(zt,{children:"Name"}),p.jsx(Un,{value:r.name,onChange:b=>i(v=>({...v,name:b.target.value})),placeholder:"Variable name"})]}),p.jsxs("div",{children:[p.jsx(zt,{children:"Type"}),p.jsxs(Pm,{value:r.type,onValueChange:b=>i(v=>({...v,type:b})),children:[p.jsx(Fm,{children:p.jsx(Dm,{})}),p.jsxs(Lm,{children:[p.jsx(Xo,{value:"string",children:"String"}),p.jsx(Xo,{value:"number",children:"Number"}),p.jsx(Xo,{value:"boolean",children:"Boolean"}),p.jsx(Xo,{value:"array",children:"Array"})]})]})]})]}),p.jsxs("div",{children:[p.jsx(zt,{children:"Description"}),p.jsx(Un,{value:r.description,onChange:b=>i(v=>({...v,description:b.target.value})),placeholder:"Describe this variable"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx(zt,{children:"Default Value"}),p.jsx(Un,{value:r.default,onChange:b=>i(v=>({...v,default:b.target.value})),placeholder:"Default value (optional)"})]}),p.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[p.jsx(Vl,{checked:r.required,onCheckedChange:b=>i(v=>({...v,required:!!b}))}),p.jsx(zt,{children:"Required"})]})]}),p.jsxs(St,{type:"button",onClick:h,className:"w-full",children:[p.jsx(mm,{className:"h-4 w-4 mr-2"}),"Add Variable"]})]})]})]})}),p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(zt,{className:"text-base font-medium",children:"Auto-select Tools"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose tools that will be automatically enabled when this template is applied."}),p.jsx(pde,{module:dut(d.getFieldValue("tools"),b=>d.setFieldValue("tools",b)),popoverMaxSteps:s,setPopoverMaxSteps:a,className:"p-0 max-w-none"})]})}),p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(zt,{className:"text-base font-medium",children:"Auto-select Rules & Tags"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose rules and tags that will be automatically enabled when this template is applied."}),p.jsx(Nde,{activeTagIds:new Set(d.getFieldValue("tags")),activeRuleIds:new Set(d.getFieldValue("rules")),onToggleTag:(b,v)=>{const x=d.getFieldValue("tags");v?d.setFieldValue("tags",[...x,b]):d.setFieldValue("tags",x.filter(w=>w!==b))},onToggleRule:(b,v)=>{const x=d.getFieldValue("rules");v?d.setFieldValue("rules",[...x,b]):d.setFieldValue("rules",x.filter(w=>w!==b))},allRules:o,allTags:l,getRulesForTag:y})]})}),p.jsx("div",{className:"flex gap-3 pt-4 border-t",children:p.jsxs(St,{type:"submit",className:"flex-1",children:[p.jsx(Wd,{className:"h-4 w-4 mr-2"}),e?"Update Template":"Create Template"]})})]})]})}function fut({templates:e,onEdit:t,onDelete:n}){return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-medium",children:"Prompt Templates"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your reusable prompt templates with dynamic variables"})]}),e.length===0?p.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[p.jsx("h4",{className:"font-medium text-muted-foreground",children:"No Templates Yet"}),p.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:'Use the "New Template" tab to create your first template'})]}):p.jsxs(Vh,{children:[p.jsx(qm,{children:p.jsxs(Ii,{children:[p.jsx(Hr,{children:"Name"}),p.jsx(Hr,{children:"Description"}),p.jsx(Hr,{children:"Variables"}),p.jsx(Hr,{children:"Tools"}),p.jsx(Hr,{children:"Rules/Tags"}),p.jsx(Hr,{className:"text-right",children:"Actions"})]})}),p.jsx(Wh,{children:e.map(r=>{var i,s,a;return p.jsxs(Ii,{children:[p.jsx(Kn,{className:"font-medium",children:r.name}),p.jsx(Kn,{className:"max-w-xs truncate",children:r.description}),p.jsx(Kn,{children:p.jsx(As,{variant:"secondary",children:r.variables.length})}),p.jsx(Kn,{children:p.jsx(As,{variant:"secondary",children:((i=r.tools)==null?void 0:i.length)||0})}),p.jsx(Kn,{children:p.jsxs("div",{className:"flex gap-1",children:[p.jsxs(As,{variant:"secondary",children:[((s=r.tags)==null?void 0:s.length)||0," tags"]}),p.jsxs(As,{variant:"secondary",children:[((a=r.rules)==null?void 0:a.length)||0," rules"]})]})}),p.jsx(Kn,{className:"text-right",children:p.jsxs("div",{className:"flex gap-2 justify-end",children:[p.jsx(St,{variant:"ghost",size:"sm",onClick:()=>t(r),children:p.jsx(nx,{className:"h-4 w-4"})}),p.jsx(St,{variant:"ghost",size:"sm",onClick:()=>n(r.id),children:p.jsx(So,{className:"h-4 w-4"})})]})})]},r.id)})})]})]})}const hut=()=>{const[e,t]=T.useState("templates"),[n,r]=T.useState(),{promptTemplates:i,loadPromptTemplates:s,addPromptTemplate:a,updatePromptTemplate:o,deletePromptTemplate:l}=eA(Sn(b=>({promptTemplates:b.promptTemplates,loadPromptTemplates:b.loadPromptTemplates,addPromptTemplate:b.addPromptTemplate,updatePromptTemplate:b.updatePromptTemplate,deletePromptTemplate:b.deletePromptTemplate})));T.useEffect(()=>{s()},[s]);const c=async b=>{await a({...b,isPublic:!1})},u=async b=>{n&&await o(n.id,b)},d=async b=>{confirm("Are you sure you want to delete this template?")&&await l(b)},h=b=>{r(b),t("edit")},m=()=>{t("templates"),r(void 0)},y=[{value:"templates",label:"Templates",content:p.jsx(fut,{templates:i,onEdit:h,onDelete:d})},{value:"new",label:"New Template",content:p.jsx($W,{onSubmit:c,onSuccess:m})}];return n&&y.push({value:"edit",label:`Edit: ${n.name}`,content:p.jsx($W,{template:n,onSubmit:u,onSuccess:m})}),p.jsx(Pu,{tabs:y,initialValue:e,onValueChange:t,defaultValue:"templates",contentContainerClassName:"pb-2 sm:pb-6 pr-1 sm:pr-2 -mr-1 sm:-mr-2",scrollable:!1})},put=()=>{const{resetAssistantSettings:e}=gr(Sn(r=>({resetAssistantSettings:r.resetAssistantSettings}))),t=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&e()},n=T.useMemo(()=>[{value:"prompt",label:"System Prompt",content:p.jsx(nut,{})},{value:"parameters",label:"Parameters",content:p.jsx(iut,{})},{value:"tools",label:"Tools",content:p.jsx(out,{})},{value:"titles",label:"Auto-Titles",content:p.jsx(cut,{})},{value:"prompts",label:"Prompts",content:p.jsx(hut,{})}],[]);return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsx(Pu,{tabs:n,defaultValue:"prompt",className:"flex-grow",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-3",scrollable:!1}),p.jsx(qd,{className:"mt-auto"}),p.jsx("div",{className:"flex justify-end pt-3 flex-shrink-0",children:p.jsxs(St,{variant:"outline",size:"sm",onClick:t,children:[p.jsx(UO,{className:"mr-2 h-4 w-4"}),"Reset All Assistant Settings"]})})]})},mut=Ve.memo(put);class gut{constructor(){ve(this,"id","core-settings-assistant");ve(this,"unregisterCallback",null);ve(this,"modApiRef",null);ve(this,"eventUnsubscribers",[]);ve(this,"isVisible",!1)}async initialize(t){this.modApiRef=t,this.isVisible=gr.getState().enableAdvancedSettings;const n=t.on(sn.enableAdvancedSettingsChanged,r=>{typeof r=="object"&&r&&"enabled"in r&&this.isVisible!==r.enabled&&(this.isVisible=r.enabled,this.reregisterTab())});this.eventUnsubscribers.push(n)}reregisterTab(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.modApiRef&&this.register(this.modApiRef)}register(t){this.modApiRef=t,this.isVisible?this.unregisterCallback||(this.unregisterCallback=t.registerSettingsTab({id:"assistant",title:"Assistant",component:mut,order:40})):this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const yut=Je({importSettings:Cr(),importApiKeys:Cr(),importProviderConfigs:Cr(),importProjects:Cr(),importConversations:Cr(),importRulesAndTags:Cr(),importMods:Cr(),importSyncRepos:Cr()}),but=Je({importSettings:Cr(),importApiKeys:Cr(),importProviderConfigs:Cr(),importProjects:Cr(),importConversations:Cr(),importRulesAndTags:Cr(),importMods:Cr(),importSyncRepos:Cr()}),vut=()=>{const{importConversation:e,exportAllConversations:t}=zn(Sn(N=>({importConversation:N.importConversation,exportAllConversations:N.exportAllConversations}))),n=T.useRef(null),r=T.useRef(null),[i,s]=T.useState(!1),[a,o]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1),[h,m]=T.useState(!1),y=Ns({defaultValues:{importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0},validators:{onChange:yut}}),b=Ns({defaultValues:{importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0},validators:{onChange:but}}),v=()=>{var N;(N=n.current)==null||N.click()},x=()=>{var N;(N=r.current)==null||N.click()},w=T.useCallback(async N=>{var O;const I=(O=N.target.files)==null?void 0:O[0];if(I){s(!0);try{await e(I)}catch(L){console.error("Import failed (from component):",L)}finally{n.current&&(n.current.value=""),s(!1)}}},[e]),S=T.useCallback(async N=>{var O;const I=(O=N.target.files)==null?void 0:O[0];if(I){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}m(!0);try{await a0.importFullConfiguration(I,y.state.values)}catch(L){console.error("Full import failed (from component):",L)}finally{r.current&&(r.current.value=""),m(!1)}}},[y]),C=T.useCallback(async()=>{o(!0);try{await t()}catch(N){console.error("Export all failed (from component):",N)}finally{o(!1)}},[t]),k=T.useCallback(async()=>{d(!0);try{await a0.exportFullConfiguration(b.state.values)}catch(N){console.error("Full export failed (from component):",N)}finally{d(!1)}},[b]),A=T.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){c(!0);try{await Mt.clearAllData(),Pe.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(N){const I="Failed to clear all data";console.error(I,N),Pe.error(`${I}: ${N instanceof Error?N.message:String(N)}`),c(!1)}}},[]),R=(N,I,O,L,P,V)=>{const F=`${V}-${I}-checkbox`;return p.jsx(N.Field,{name:I,children:J=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Vl,{id:F,checked:J.state.value,onCheckedChange:U=>J.handleChange(!!U),disabled:P}),p.jsxs(zt,{htmlFor:F,className:"text-sm font-normal flex items-center gap-1.5",children:[p.jsx(L,{className:"h-4 w-4 text-muted-foreground"})," ",O]})]})},I)};return p.jsxs("div",{className:"space-y-4 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-3 rounded-md space-y-2",children:[p.jsx(zt,{className:"font-semibold",children:"Import Conversation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),p.jsx("input",{type:"file",ref:n,onChange:w,accept:".json",className:"hidden",id:"import-file-input",disabled:i}),p.jsxs(St,{onClick:v,variant:"outline",size:"sm",disabled:i,children:[i?p.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(xH,{className:"mr-2 h-4 w-4"}),i?"Importing...":"Select File..."]})]}),p.jsxs("div",{className:"border p-3 rounded-md space-y-2",children:[p.jsx(zt,{className:"font-semibold",children:"Export All Conversations"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),p.jsxs(St,{onClick:C,variant:"outline",size:"sm",disabled:a,children:[a?p.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(fu,{className:"mr-2 h-4 w-4"}),a?"Exporting...":"Export All Chats"]})]})]})]}),p.jsx(qd,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration Backup"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-3 rounded-md space-y-3",children:[p.jsx(zt,{className:"font-semibold",children:"Import Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import settings, providers, keys, projects, conversations, etc., from a backup file. Select which data types to restore."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[R(y,"importSettings","Settings",G3,h,"import"),R(y,"importApiKeys","API Keys",kx,h,"import"),R(y,"importProviderConfigs","Providers",U2,h,"import"),R(y,"importProjects","Projects",xB,h,"import"),R(y,"importConversations","Conversations",H3,h,"import"),R(y,"importRulesAndTags","Rules & Tags",K3,h,"import"),R(y,"importMods","Mods",SB,h,"import"),R(y,"importSyncRepos","Sync Repos",xc,h,"import")]}),p.jsx("input",{type:"file",ref:r,onChange:S,accept:".json",className:"hidden",id:"full-import-file-input",disabled:h}),p.jsxs(St,{onClick:x,variant:"outline",size:"sm",disabled:h,children:[h?p.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Lme,{className:"mr-2 h-4 w-4"}),h?"Importing...":"Select Backup File..."]})]}),p.jsxs("div",{className:"border p-3 rounded-md space-y-3",children:[p.jsx(zt,{className:"font-semibold",children:"Export Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[R(b,"importSettings","Settings",G3,u,"export"),R(b,"importApiKeys","API Keys",kx,u,"export"),R(b,"importProviderConfigs","Providers",U2,u,"export"),R(b,"importProjects","Projects",xB,u,"export"),R(b,"importConversations","Conversations",H3,u,"export"),R(b,"importRulesAndTags","Rules & Tags",K3,u,"export"),R(b,"importMods","Mods",SB,u,"export"),R(b,"importSyncRepos","Sync Repos",xc,u,"export")]}),p.jsxs(St,{onClick:k,variant:"secondary",size:"sm",disabled:u,children:[u?p.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Nme,{className:"mr-2 h-4 w-4"}),u?"Exporting...":"Export Configuration"]})]})]})]}),p.jsx(qd,{}),p.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[p.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),p.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),p.jsxs(St,{onClick:A,variant:"destructive",disabled:l,children:[l?p.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(So,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},xut=Ve.memo(vut);class wut{constructor(){ve(this,"id","core-settings-data");ve(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"data",title:"Data",component:xut,order:70})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const _ut=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:i,isLoading:s}=Sh(Sn(A=>({loadedMods:A.loadedMods,addDbMod:A.addDbMod,updateDbMod:A.updateDbMod,deleteDbMod:A.deleteDbMod,dbMods:A.dbMods,isLoading:A.isLoading}))),[a,o]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState(""),[h,m]=T.useState(!1),[y,b]=T.useState({}),[v,x]=T.useState({}),w=T.useCallback(async()=>{if(!a.trim()){Pe.error("Mod name cannot be empty.");return}if(!l.trim()&&!u.trim()){Pe.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&u.trim()){Pe.error("Provide either a Mod URL or Script Content, not both.");return}m(!0);try{const A={name:a.trim(),sourceUrl:l.trim()||null,scriptContent:u.trim()||null,enabled:!0,loadOrder:((i==null?void 0:i.length)??1)*10};await t(A),o(""),c(""),d(""),Pe.info("Mod added. Reload required for changes to take effect.")}catch(A){console.error("Failed to add mod (from component):",A)}finally{m(!1)}},[a,l,u,t,i==null?void 0:i.length]),S=T.useCallback(async A=>{b(R=>({...R,[A.id]:!0}));try{await n(A.id,{enabled:!A.enabled}),Pe.info(`Mod "${A.name}" ${A.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(R){console.error("Failed to update mod (from component):",R)}finally{b(R=>({...R,[A.id]:!1}))}},[n]),C=T.useCallback(async A=>{if(window.confirm(`Are you sure you want to delete the mod "${A.name}"? This cannot be undone.`)){x(R=>({...R,[A.id]:!0}));try{await r(A.id),Pe.info("Mod deleted. Reload required for changes to take effect.")}catch(R){console.error("Failed to delete mod (from component):",R)}finally{x(R=>({...R,[A.id]:!1}))}}},[r]),k=T.useCallback(A=>{const R=e.find(I=>I.id===A);if(R)if(R.error){const I=R.error instanceof Error?R.error.message:String(R.error);return{status:"Error",error:R.error,tooltip:I}}else return{status:"Loaded"};const N=(i||[]).find(I=>I.id===A);return N?N.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,i]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs(ude,{variant:"destructive",className:"border-destructive/50",children:[p.jsx(qO,{className:"h-4 w-4"}),p.jsx(dde,{children:"Security Warning"}),p.jsx(fde,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),p.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(zt,{htmlFor:"mod-name",children:"Mod Name"}),p.jsx(Un,{id:"mod-name",value:a,onChange:A=>o(A.target.value),placeholder:"My Awesome Mod",disabled:h})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(zt,{htmlFor:"mod-url",children:"Source URL (Optional)"}),p.jsx(Un,{id:"mod-url",type:"url",value:l,onChange:A=>c(A.target.value),placeholder:"https://example.com/my-mod.js",disabled:h||!!u.trim()})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(zt,{htmlFor:"mod-script",children:"Script Content (Optional)"}),p.jsx(ql,{id:"mod-script",value:u,onChange:A=>d(A.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:h||!!l.trim()})]}),p.jsxs(St,{onClick:w,disabled:h,children:[h&&p.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),h?"Adding...":"Add Mod"]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),p.jsx("div",{className:"rounded-md border",children:p.jsx(br,{delayDuration:100,children:p.jsxs(Vh,{children:[p.jsx(qm,{children:p.jsxs(Ii,{children:[p.jsx(Hr,{children:"Name"}),p.jsx(Hr,{children:"Source"}),p.jsx(Hr,{children:"Status"}),p.jsx(Hr,{className:"text-center",children:"Enabled"}),p.jsx(Hr,{className:"text-right",children:"Actions"})]})}),p.jsx(Wh,{children:s?p.jsxs(p.Fragment,{children:[p.jsx(Ii,{children:p.jsx(Kn,{colSpan:5,children:p.jsx(Ur,{className:"h-10 w-full"})})}),p.jsx(Ii,{children:p.jsx(Kn,{colSpan:5,children:p.jsx(Ur,{className:"h-10 w-full"})})})]}):(i||[]).length===0?p.jsx(Ii,{children:p.jsx(Kn,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(i||[]).map(A=>{const{status:R,error:N,tooltip:I}=k(A.id),O=A.sourceUrl?new URL(A.sourceUrl).hostname:"Direct Script",L=y[A.id],P=v[A.id],V=L||P,F=R==="Error";return p.jsxs(Ii,{children:[p.jsx(Kn,{className:"font-medium",children:A.name}),p.jsx(Kn,{className:"text-muted-foreground",children:O}),p.jsxs(Kn,{children:[p.jsxs(xr,{children:[p.jsx(wr,{asChild:!0,children:p.jsx("span",{className:F?"text-destructive font-semibold cursor-help":"",children:R})}),I&&p.jsx(_r,{className:"max-w-xs break-words",children:p.jsx("p",{children:I})})]}),F&&N&&p.jsx("p",{className:"text-xs text-destructive truncate",children:N instanceof Error?N.message:String(N)})]}),p.jsxs(Kn,{className:"text-center",children:[p.jsx(bc,{checked:A.enabled??!1,onCheckedChange:()=>S(A),disabled:V,"aria-label":`Enable ${A.name}`}),L&&p.jsx(Qn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),p.jsx(Kn,{className:"text-right",children:p.jsx(St,{variant:"ghost",size:"icon",onClick:()=>C(A),disabled:V,"aria-label":`Delete ${A.name}`,className:"text-destructive hover:text-destructive/80",children:P?p.jsx(Qn,{className:"h-4 w-4 animate-spin"}):p.jsx(So,{className:"h-4 w-4"})})})]},A.id)})})]})})})]})]})},Sut=Ve.memo(_ut);class Cut{constructor(){ve(this,"id","core-settings-mods");ve(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"mods",title:"Mods",component:Sut,order:80})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const kut=({interactionId:e,contentToCopy:t,disabled:n})=>{const[r]=T.useState(!1),i=T.useCallback(async s=>{if(s.stopPropagation(),n||!t){Pe.info("No content to copy or action disabled.");return}Fe.emit(cc.copyInteractionResponseRequest,{interactionId:e})},[e,t,n]);return p.jsx(In,{tooltipText:"Copy",onClick:i,"aria-label":"Copy content",disabled:n||!t,icon:r?p.jsx(Qa,{className:"text-green-500"}):p.jsx(nE,{}),className:"h-5 w-5"})};class Eut{constructor(){ve(this,"id","core-canvas-copy-action")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"header-actions",renderer:n=>n.interactionId?Ve.createElement(kut,{interactionId:n.interactionId,contentToCopy:n.responseContent??"",disabled:!n.responseContent||n.responseContent.trim()===""}):(console.warn("CopyActionControlModule: interactionId is missing in context for an interaction control."),null)})}destroy(t){}}const Tut=({interactionId:e,disabled:t})=>{const n=r=>{if(r.stopPropagation(),t){Pe.info("Regeneration is currently disabled.");return}Fe.emit(cc.regenerateInteractionRequest,{interactionId:e})};return p.jsx(In,{tooltipText:"Regenerate",onClick:n,"aria-label":"Regenerate Response",disabled:t,icon:p.jsx(Kp,{}),className:"h-5 w-5 md:h-6 md:w-6"})};class Aut{constructor(){ve(this,"id","core-canvas-regenerate-action")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"actions",renderer:n=>{if(!n.interactionId||!n.interaction)return null;const r=n.interaction,i=Ln.getState(),s=i.status,a=i.interactions.filter(u=>u.conversationId===r.conversationId&&u.parentId===null&&(u.type==="message.user_assistant"||u.type==="message.assistant_regen"));a.sort((u,d)=>u.index-d.index);const o=a.length>0?a[a.length-1]:null,c=(o==null?void 0:o.id)===r.id&&(r.status==="COMPLETED"||r.status==="ERROR")&&s!=="streaming";return Ve.createElement(Tut,{interactionId:r.id,disabled:!c})}})}destroy(t){}}const Rut=({module:e,interactionId:t,disabled:n})=>{const[r,i]=T.useState(!1),[,s]=T.useState({});T.useEffect(()=>{if(e)return e.setNotifyCallback(()=>s({})),()=>e.setNotifyCallback(null)},[e]);const a=l=>{if(!l){i(!1);return}i(!1),Fe.emit(cc.regenerateInteractionWithModelRequest,{interactionId:t,modelId:l})},o=l=>{if(l.stopPropagation(),n){Pe.info("Regeneration is currently disabled.");return}i(!r)};return r?p.jsx("div",{className:"relative",children:p.jsx(X5,{models:e.globallyEnabledModels,value:null,onChange:a,isLoading:e.isLoadingProviders})}):p.jsx(In,{tooltipText:"Regenerate with Model",onClick:o,"aria-label":"Regenerate Response with Model Selection",disabled:n,icon:p.jsx(fge,{}),className:"h-5 w-5 md:h-6 md:w-6"})};class Nut{constructor(){ve(this,"id","core-canvas-regenerate-with-model-action");ve(this,"eventUnsubscribers",[]);ve(this,"notifyComponentUpdate",null);ve(this,"globallyEnabledModels",[]);ve(this,"isLoadingProviders",!0)}async initialize(t){const n=Mr.getState();this.isLoadingProviders=n.isLoading,this.globallyEnabledModels=n.getGloballyEnabledModelDefinitions();const r=t.on(dr.globallyEnabledModelsUpdated,a=>{var c;let o=!1;JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(a.models)&&(this.globallyEnabledModels=a.models,o=!0);const l=Mr.getState().isLoading;this.isLoadingProviders!==l&&(this.isLoadingProviders=l,o=!0),o&&((c=this.notifyComponentUpdate)==null||c.call(this))}),i=t.on(dr.initialDataLoaded,()=>{var c;const a=Mr.getState();let o=!1;this.isLoadingProviders!==a.isLoading&&(this.isLoadingProviders=a.isLoading,o=!0);const l=a.getGloballyEnabledModelDefinitions();JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(l)&&(this.globallyEnabledModels=l,o=!0),o&&((c=this.notifyComponentUpdate)==null||c.call(this))}),s=t.on(Zn.statusChanged,()=>{var a;(a=this.notifyComponentUpdate)==null||a.call(this)});this.eventUnsubscribers.push(r,i,s)}setNotifyCallback(t){this.notifyComponentUpdate=t}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"actions",renderer:n=>{if(!n.interactionId||!n.interaction)return null;const r=n.interaction,i=Ln.getState(),s=i.status,a=i.interactions.filter(u=>u.conversationId===r.conversationId&&u.parentId===null&&(u.type==="message.user_assistant"||u.type==="message.assistant_regen"));a.sort((u,d)=>u.index-d.index);const o=a.length>0?a[a.length-1]:null,c=(o==null?void 0:o.id)===r.id&&(r.status==="COMPLETED"||r.status==="ERROR")&&s!=="streaming";return Ve.createElement(Rut,{module:this,interactionId:r.id,disabled:!c})}})}async cleanup(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.notifyComponentUpdate=null}async destroy(){await this.cleanup()}}const Mut=({interactionId:e,currentRating:t})=>{const n=i=>{const s=i===t?null:i;Fe.emit(Zn.rateInteractionRequest,{interactionId:e,rating:s})},r=Array.from({length:11},(i,s)=>s-5);return p.jsx("div",{className:"flex items-center gap-1",children:r.map(i=>{let s="";i===-5?s="Terrible":i===-4?s="Very Bad":i===-3?s="Bad":i===-2?s="Poor":i===-1?s="Below Average":i===0?s="Neutral":i===1?s="Above Average":i===2?s="Good":i===3?s="Very Good":i===4?s="Excellent":i===5&&(s="Perfect");let a="text-muted-foreground",o="hover:text-foreground",l="";i<0?(o="hover:text-red-500",t===i&&(a="text-red-500",l="fill-red-500")):i===0?(o="hover:text-gray-500",t===i&&(a="text-gray-500",l="fill-gray-500")):(o="hover:text-green-500",t===i&&(a="text-green-500",l="fill-green-500"));const c=t===i?"bg-muted":"";return p.jsx(In,{tooltipText:s,onClick:()=>n(i),"aria-label":`Rate response as ${s}`,icon:p.jsx(r0e,{className:Ye(l,t===i?"fill-current":"fill-none")}),variant:"ghost",className:Ye("h-4 w-4 md:h-5 md:w-5 p-0",a,o,c)},i)})})};class Iut{constructor(){ve(this,"id","core-canvas-rating-action")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"actions",renderer:n=>!n.interactionId||!n.interaction?null:Ve.createElement(Mut,{interactionId:n.interactionId,currentRating:n.interaction.rating})})}destroy(t){}}const jut=({interactionId:e,response:t,disabled:n})=>{const[r,i]=T.useState(!1),[s,a]=T.useState(""),o=u=>{if(u.stopPropagation(),n){Pe.info("Response editing is currently disabled.");return}a(t||""),i(!0)},l=()=>{if(s.trim()===""){Pe.error("Response cannot be empty");return}Fe.emit(cc.editResponseRequest,{interactionId:e,newContent:s.trim()}),i(!1),Pe.success("Response edited successfully")},c=()=>{i(!1),a("")};return p.jsxs(p.Fragment,{children:[p.jsx(In,{tooltipText:"Edit Response",onClick:o,"aria-label":"Edit Assistant Response",disabled:n,icon:p.jsx(bH,{}),className:"h-5 max-w-7xl md:h-6 md:max-w-6xl"}),p.jsx(Bm,{open:r,onOpenChange:i,children:p.jsxs($m,{className:"!w-[80vw] !h-[85vh] !max-w-none flex flex-col",children:[p.jsx(zm,{children:p.jsx(Um,{children:"Edit Assistant Response"})}),p.jsx("div",{className:"flex-1 space-y-4 overflow-hidden",children:p.jsxs("div",{className:"space-y-2 h-full",children:[p.jsx(zt,{htmlFor:"response-edit",children:"Response Content"}),p.jsx(ql,{id:"response-edit",value:s,onChange:u=>a(u.target.value),placeholder:"Edit the assistant's response...",className:"min-h-[60vh] h-full resize-none text-sm leading-relaxed"})]})}),p.jsxs(nb,{className:"flex-shrink-0",children:[p.jsx(St,{variant:"outline",onClick:c,children:"Cancel"}),p.jsx(St,{onClick:l,children:"Save Changes"})]})]})})]})};class Out{constructor(){ve(this,"id","core-canvas-edit-response-action");ve(this,"eventUnsubscribers",[])}async initialize(t){const n=t.on(cc.editResponseRequest,async r=>{await this.handleResponseEdit(r.interactionId,r.newContent)});this.eventUnsubscribers.push(n)}async handleResponseEdit(t,n){var r;try{const i=Ln.getState(),s=i.interactions.find(y=>y.id===t);if(!s)throw new Error("Original interaction not found");if(s.status!=="COMPLETED")throw new Error("Can only edit completed interactions");const a=Us(),o={...s,id:a,response:n,parentId:null,index:s.index,metadata:{...s.metadata,editedResponse:!0,editedFromId:s.id},endedAt:new Date};i._addInteractionToState(o);const l=i.interactions.filter(y=>y.parentId===s.id),c=[];let u=s;for(;u;){c.push(u);const y=(r=u.metadata)==null?void 0:r.editedFromId;y?u=i.interactions.find(b=>b.id===y):u=void 0}const d=c.sort((y,b)=>{var w,S;const v=((w=y.startedAt)==null?void 0:w.getTime())??0,x=((S=b.startedAt)==null?void 0:S.getTime())??0;return v-x}),h=d.map(async(y,b)=>{const v={parentId:a,index:b,metadata:{...y.metadata,originalVersion:b===0}};return console.log(`[EditResponseControlModule] Updating version ${y.id} to be child of ${a} with childIndex ${b}`),i._updateInteractionInState(y.id,v),Mt.saveInteraction({...y,...v})}),m=l.map(async y=>{const b={parentId:a,index:d.length+y.index};return i._updateInteractionInState(y.id,b),Mt.saveInteraction({...y,...b})});await Promise.all([Mt.saveInteraction(o),...h,...m]),console.log(`[EditResponseControlModule] Response edited successfully. Original: ${t}, Edited: ${a}`)}catch(i){throw console.error("[EditResponseControlModule] Failed to edit response:",i),i}}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"actions",renderer:n=>{if(!n.interactionId||!n.interaction)return null;const r=n.interaction,s=Ln.getState().status,a=r.status==="COMPLETED"&&r.response&&typeof r.response=="string"&&s!=="streaming"&&(r.type==="message.user_assistant"||r.type==="message.assistant_regen");return a?Ve.createElement(jut,{interactionId:r.id,response:r.response,disabled:!a}):null}})}async cleanup(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[]}async destroy(){await this.cleanup()}}const Put=({context:e})=>{const t=()=>{Pe.info(`Example Canvas Action Clicked! Interaction ID: ${e.interactionId}`)};return p.jsxs(St,{variant:"outline",size:"sm",onClick:t,className:"h-6 px-2 text-xs",children:[p.jsx(Zge,{className:"h-3 w-3 mr-1"})," Example Action"]})};class Dut{constructor(){ve(this,"id","example-canvas-control-module")}async initialize(t){}register(t){t.registerCanvasControl({id:"example-canvas-action",type:"interaction",targetSlot:"actions",renderer:n=>Ve.createElement(Put,{context:n})})}destroy(t){}}const Fut=({isFolded:e,toggleFold:t,canFold:n})=>{if(!n)return null;const r=i=>{i.stopPropagation(),t()};return p.jsx(In,{tooltipText:e?"Unfold":"Fold",onClick:r,"aria-label":e?"Unfold response":"Fold response",icon:e?p.jsx(Tc,{}):p.jsx(Eh,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})};class Lut{constructor(){ve(this,"id","core-canvas-fold-interaction")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"header-actions",renderer:n=>!n.toggleFold||n.isFolded===void 0?null:Ve.createElement(Fut,{isFolded:n.isFolded,toggleFold:n.toggleFold,canFold:!0})})}destroy(t){}}const But=({context:e})=>{const t=nT(e.responseContent||""),n=T.useMemo(()=>{const i=[];return t.forEach(s=>{if(typeof s=="object"&&s.type==="code"){const a=s;a.filepath&&a.filepath.trim()&&i.push({filepath:a.filepath,code:a.code,lang:a.lang})}}),i},[t]),r=T.useCallback(async()=>{var i;if(n.length===0){Pe.info("No code blocks with filepaths found to download");return}try{const s=new nD,a=new Set;n.forEach(({filepath:h,code:m})=>{const y=h.replace(/^[\/\\]+/,"").replace(/\\/g,"/"),b=y.split("/");if(b.length>1)for(let w=1;w<b.length;w++){const S=b.slice(0,w).join("/");a.has(S)||(s.folder(S),a.add(S))}let v=y,x=1;for(;s.file(v);){const w=y.lastIndexOf(".");if(w>0){const S=y.substring(0,w),C=y.substring(w);v=`${S}_${x}${C}`}else v=`${y}_${x}`;x++}s.file(v,m)});const o=await s.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l;const u=new Date().toISOString().slice(0,19).replace(/[:.]/g,"-"),d=((i=e.interactionId)==null?void 0:i.slice(0,8))||"unknown";c.download=`codeblocks_${d}_${u}.zip`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l),Pe.success(`Downloaded ${n.length} code files as ZIP`)}catch(s){console.error("ZIP download failed:",s),Pe.error("Failed to create ZIP file")}},[n,e.interactionId]);return n.length===0?null:p.jsx(In,{tooltipText:`Download ${n.length} code files as ZIP`,onClick:r,"aria-label":"Download code blocks as ZIP file",icon:p.jsx(lH,{}),iconClassName:"h-4 w-4",className:"h-6 w-6 text-muted-foreground hover:text-foreground"})};class $ut{constructor(){ve(this,"id","core-interaction-zip-download")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"header-actions",renderer:n=>!n.interactionId||!n.responseContent?null:Ve.createElement(But,{context:n})})}destroy(t){}}const zut=({interactionId:e,codeBlockId:t,language:n,codeToCopy:r,disabled:i})=>{const[s,a]=T.useState(!1),o=T.useCallback(async l=>{l.stopPropagation(),!(i||!r)&&(Fe.emit(cc.copyCodeBlockRequest,{interactionId:e,codeBlockId:t,language:n,content:r}),a(!0),setTimeout(()=>a(!1),1500))},[e,t,n,r,i]);return p.jsx(In,{tooltipText:"Copy Code",onClick:o,"aria-label":"Copy code block",disabled:i||!r,icon:s?p.jsx(Qa,{className:"text-green-500"}):p.jsx(nE,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})};class Uut{constructor(){ve(this,"id","core-codeblock-copy")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"codeblock",targetSlot:"codeblock-header-actions",renderer:n=>Ve.createElement(zut,{interactionId:n.interactionId,codeBlockId:n.codeBlockId,language:n.codeBlockLang,codeToCopy:n.codeBlockContent??"",disabled:!n.codeBlockContent||n.codeBlockContent.trim()===""})})}destroy(t){}}const qut=({isFolded:e,toggleFold:t})=>{const n=r=>{r.stopPropagation(),t()};return p.jsx(In,{tooltipText:e?"Unfold Code":"Fold Code",onClick:n,"aria-label":e?"Unfold code block":"Fold code block",icon:p.jsx(eE,{}),iconClassName:"h-3.5 w-3.5",className:"h-6 w-6 text-muted-foreground hover:text-foreground"})};class Vut{constructor(){ve(this,"id","core-codeblock-fold")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"codeblock",targetSlot:"codeblock-header-actions",renderer:n=>n.toggleFold===void 0||n.isFolded===void 0?null:Ve.createElement(qut,{isFolded:n.isFolded,toggleFold:n.toggleFold})})}destroy(t){}}const Wut=({interactionId:e,codeBlockId:t,language:n,codeToDownload:r,filepath:i,disabled:s})=>{const a=T.useCallback(l=>{if(l.stopPropagation(),!(s||!r))try{let c;if(i){const m=i.split("/");c=m[m.length-1]}else c=`code${Hut(n)}`;const u=new Blob([r],{type:"text/plain"}),d=URL.createObjectURL(u),h=document.createElement("a");h.href=d,h.download=c,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(d),Pe.success(`Downloaded ${c}`)}catch(c){console.error("Download failed:",c),Pe.error("Failed to download file")}},[e,t,n,r,i,s]);return i||r&&r.trim().length>5e3?p.jsx(In,{tooltipText:"Download File",onClick:a,"aria-label":"Download code as file",disabled:s||!r,icon:p.jsx(fu,{}),iconClassName:"h-3.5 w-3.5",className:"h-6 w-6 text-muted-foreground hover:text-foreground"}):null};function Hut(e){return e&&{javascript:".js",js:".js",typescript:".ts",ts:".ts",tsx:".tsx",jsx:".jsx",python:".py",py:".py",java:".java",c:".c",cpp:".cpp",cxx:".cxx",cc:".cc","c++":".cpp",csharp:".cs",cs:".cs",php:".php",ruby:".rb",rb:".rb",go:".go",rust:".rs",rs:".rs",swift:".swift",kotlin:".kt",kt:".kt",scala:".scala",html:".html",css:".css",scss:".scss",sass:".sass",less:".less",json:".json",xml:".xml",yaml:".yaml",yml:".yml",toml:".toml",ini:".ini",conf:".conf",config:".config",sh:".sh",bash:".sh",zsh:".zsh",fish:".fish",powershell:".ps1",ps1:".ps1",bat:".bat",cmd:".cmd",sql:".sql",r:".r",matlab:".m",octave:".m",lua:".lua",perl:".pl",vim:".vim",dockerfile:"Dockerfile",makefile:"Makefile",markdown:".md",md:".md",tex:".tex",latex:".tex"}[e.toLowerCase()]||".txt"}class Gut{constructor(){ve(this,"id","core-codeblock-download")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"codeblock",targetSlot:"codeblock-header-actions",renderer:n=>Ve.createElement(Wut,{interactionId:n.interactionId,codeBlockId:n.codeBlockId,language:n.codeBlockLang,codeToDownload:n.codeBlockContent??"",filepath:n.codeBlockFilepath,disabled:!n.codeBlockContent||n.codeBlockContent.trim()===""})})}destroy(t){}}const Kut=({toolCall:e})=>{const[t,n]=T.useState(!0),r=()=>n(s=>!s),i=T.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return p.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(In,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?p.jsx(Tc,{}):p.jsx(Eh,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(Ry,{lang:"json",code:i})]})},Yut=({toolResult:e})=>{const[t,n]=T.useState(!0),r=()=>n(a=>!a),i=T.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),s=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return p.jsxs("div",{className:Ye("my-2 p-2 border rounded-md text-xs",s?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:Ye("font-semibold",s?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(In,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?p.jsx(Tc,{}):p.jsx(Eh,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(Ry,{lang:s?"text":"json",code:i})]})},Zut=({interactionId:e,toolCall:t,toolResult:n})=>p.jsxs("div",{className:"tool-call-step my-1","data-interaction-id":e,"data-tool-call-id":t.toolCallId,children:[p.jsx(Kut,{toolCall:t}),n&&p.jsx(Yut,{toolResult:n})]});class Xut{constructor(){ve(this,"id","core-tool-call-step-display")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"tool-call-step",targetSlot:"tool-call-content",renderer:n=>!n.interactionId||!n.toolCall?(console.warn("[ToolCallStepControlModule] Missing interactionId or toolCall in context"),null):Ve.createElement(Zut,{interactionId:n.interactionId,toolCall:n.toolCall,toolResult:n.toolResult})})}destroy(t){}}const Jut=[Fst,qot,Zot,Qct,gut,wut,Cut,het,ytt,mtt,ost,lst,Pst,gst,bst,xst,Bst,Vtt,Grt,jst,ust,Eit,$tt,hst,zst,Bot,cit,dit,bit,Cit,Eut,Lut,$ut,Aut,Nut,Out,Iut,Uut,Vut,Gut,Dut,Xut];function Qut(){return p.jsxs(cet,{children:[p.jsx(aet,{}),p.jsx(set,{}),p.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:p.jsx("main",{className:"flex-grow overflow-hidden",children:p.jsx(QQe,{controls:Jut})})})]})}I0e();Whe.createRoot(document.getElementById("root")).render(p.jsx(Ve.StrictMode,{children:p.jsx(Qut,{})}));export{b6e as $,ax as A,E3e as B,bje as C,a6 as D,Eo as E,lJ as F,p8e as G,EBe as H,SU as I,E4e as J,O3e as K,oy as L,Rdt as M,xT as N,kD as O,p7 as P,_6e as Q,E2 as R,h8e as S,A1 as T,aje as U,T1 as V,xn as W,Bn as X,bJ as Y,s8e as Z,se as _,fje as a,XIe as a$,HD as a0,Pdt as a1,Ldt as a2,zg as a3,z7 as a4,$7 as a5,$dt as a6,Bdt as a7,Fdt as a8,jdt as a9,t8e as aA,G5e as aB,KFe as aC,XD as aD,MU as aE,sLe as aF,v6e as aG,xa as aH,cT as aI,Z4e as aJ,Y4e as aK,Nm as aL,n8e as aM,lte as aN,mT as aO,vT as aP,bk as aQ,ute as aR,ote as aS,IFe as aT,wo as aU,WPe as aV,zD as aW,mee as aX,M1 as aY,bee as aZ,Idt as a_,Odt as aa,Udt as ab,Ddt as ac,zdt as ad,ILe as ae,fre as af,Kdt as ag,A4e as ah,qs as ai,Lh as aj,LD as ak,$te as al,jm as am,gte as an,or as ao,Eu as ap,i0 as aq,SBe as ar,Gdt as as,Ydt as at,Wdt as au,An as av,Hdt as aw,sBe as ax,tBe as ay,eBe as az,dje as b,UD as b0,Gf as b1,O7 as b2,JPe as b3,hw as b4,e8e as b5,GFe as b6,O5e as b7,JD as b8,AFe as b9,us as bA,Kr as bB,i8e as ba,j1 as bb,Hy as bc,mk as bd,BFe as be,GBe as bf,I1 as bg,yk as bh,jFe as bi,tte as bj,F5e as bk,L5e as bl,kp as bm,nU as bn,B5e as bo,QD as bp,D5e as bq,U5e as br,Gy as bs,Fh as bt,X7 as bu,e6 as bv,rte as bw,M4 as bx,r8e as by,bT as bz,si as c,Wr as d,yJ as e,ya as f,pje as g,$d as h,sm as i,eOe as j,Wy as k,$t as l,bte as m,Ndt as n,Xdt as o,mje as p,gje as q,Zdt as r,hje as s,T4e as t,au as u,XLe as v,y8e as w,qdt as x,uje as y,Mdt as z};
