var C7=Object.defineProperty;var k7=(e,t,n)=>t in e?C7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ha=(e,t,n)=>k7(e,typeof t!="symbol"?t+"":t,n);function A7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ei(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dx={exports:{}},Qp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xR;function T7(){if(xR)return Qp;xR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Qp.Fragment=t,Qp.jsx=n,Qp.jsxs=n,Qp}var SR;function R7(){return SR||(SR=1,dx.exports=T7()),dx.exports}var y=R7(),fx={exports:{}};function N7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fO={exports:{}},ea=fO.exports={},Ss,Es;function N2(){throw new Error("setTimeout has not been defined")}function I2(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ss=setTimeout:Ss=N2}catch{Ss=N2}try{typeof clearTimeout=="function"?Es=clearTimeout:Es=I2}catch{Es=I2}})();function hO(e){if(Ss===setTimeout)return setTimeout(e,0);if((Ss===N2||!Ss)&&setTimeout)return Ss=setTimeout,setTimeout(e,0);try{return Ss(e,0)}catch{try{return Ss.call(null,e,0)}catch{return Ss.call(this,e,0)}}}function I7(e){if(Es===clearTimeout)return clearTimeout(e);if((Es===I2||!Es)&&clearTimeout)return Es=clearTimeout,clearTimeout(e);try{return Es(e)}catch{try{return Es.call(null,e)}catch{return Es.call(this,e)}}}var kl=[],$f=!1,td,ub=-1;function O7(){!$f||!td||($f=!1,td.length?kl=td.concat(kl):ub=-1,kl.length&&pO())}function pO(){if(!$f){var e=hO(O7);$f=!0;for(var t=kl.length;t;){for(td=kl,kl=[];++ub<t;)td&&td[ub].run();ub=-1,t=kl.length}td=null,$f=!1,I7(e)}}ea.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];kl.push(new mO(e,t)),kl.length===1&&!$f&&hO(pO)};function mO(e,t){this.fun=e,this.array=t}mO.prototype.run=function(){this.fun.apply(null,this.array)};ea.title="browser";ea.browser=!0;ea.env={};ea.argv=[];ea.version="";ea.versions={};function $l(){}ea.on=$l;ea.addListener=$l;ea.once=$l;ea.off=$l;ea.removeListener=$l;ea.removeAllListeners=$l;ea.emit=$l;ea.prependListener=$l;ea.prependOnceListener=$l;ea.listeners=function(e){return[]};ea.binding=function(e){throw new Error("process.binding is not supported")};ea.cwd=function(){return"/"};ea.chdir=function(e){throw new Error("process.chdir is not supported")};ea.umask=function(){return 0};var D7=fO.exports;const Wr=N7(D7);var Nn={},ER;function j7(){if(ER)return Nn;ER=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function _(G,X,Y){this.props=G,this.context=X,this.refs=b,this.updater=Y||g}_.prototype.isReactComponent={},_.prototype.setState=function(G,X){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,X,"setState")},_.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function x(){}x.prototype=_.prototype;function S(G,X,Y){this.props=G,this.context=X,this.refs=b,this.updater=Y||g}var E=S.prototype=new x;E.constructor=S,v(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function N(G,X,Y,re,be,we){return Y=we.ref,{$$typeof:e,type:G,key:X,ref:Y!==void 0?Y:null,props:we}}function D(G,X){return N(G.type,X,void 0,void 0,void 0,G.props)}function U(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function W(G){var X={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Y){return X[Y]})}var Q=/\/+/g;function F(G,X){return typeof G=="object"&&G!==null&&G.key!=null?W(""+G.key):X.toString(36)}function Z(){}function L(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(Z,Z):(G.status="pending",G.then(function(X){G.status==="pending"&&(G.status="fulfilled",G.value=X)},function(X){G.status==="pending"&&(G.status="rejected",G.reason=X)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function he(G,X,Y,re,be){var we=typeof G;(we==="undefined"||we==="boolean")&&(G=null);var Me=!1;if(G===null)Me=!0;else switch(we){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(G.$$typeof){case e:case t:Me=!0;break;case f:return Me=G._init,he(Me(G._payload),X,Y,re,be)}}if(Me)return be=be(G),Me=re===""?"."+F(G,0):re,C(be)?(Y="",Me!=null&&(Y=Me.replace(Q,"$&/")+"/"),he(be,X,Y,"",function(Te){return Te})):be!=null&&(U(be)&&(be=D(be,Y+(be.key==null||G&&G.key===be.key?"":(""+be.key).replace(Q,"$&/")+"/")+Me)),X.push(be)),1;Me=0;var Pe=re===""?".":re+":";if(C(G))for(var Ae=0;Ae<G.length;Ae++)re=G[Ae],we=Pe+F(re,Ae),Me+=he(re,X,Y,we,be);else if(Ae=p(G),typeof Ae=="function")for(G=Ae.call(G),Ae=0;!(re=G.next()).done;)re=re.value,we=Pe+F(re,Ae++),Me+=he(re,X,Y,we,be);else if(we==="object"){if(typeof G.then=="function")return he(L(G),X,Y,re,be);throw X=String(G),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ie(G,X,Y){if(G==null)return G;var re=[],be=0;return he(G,re,"","",function(we){return X.call(Y,we,be++)}),re}function ne(G){if(G._status===-1){var X=G._result;X=X(),X.then(function(Y){(G._status===0||G._status===-1)&&(G._status=1,G._result=Y)},function(Y){(G._status===0||G._status===-1)&&(G._status=2,G._result=Y)}),G._status===-1&&(G._status=0,G._result=X)}if(G._status===1)return G._result.default;throw G._result}var ee=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(X))return}else if(typeof Wr=="object"&&typeof Wr.emit=="function"){Wr.emit("uncaughtException",G);return}console.error(G)};function se(){}return Nn.Children={map:ie,forEach:function(G,X,Y){ie(G,function(){X.apply(this,arguments)},Y)},count:function(G){var X=0;return ie(G,function(){X++}),X},toArray:function(G){return ie(G,function(X){return X})||[]},only:function(G){if(!U(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Nn.Component=_,Nn.Fragment=n,Nn.Profiler=a,Nn.PureComponent=S,Nn.StrictMode=r,Nn.Suspense=u,Nn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Nn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return k.H.useMemoCache(G)}},Nn.cache=function(G){return function(){return G.apply(null,arguments)}},Nn.cloneElement=function(G,X,Y){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var re=v({},G.props),be=G.key,we=void 0;if(X!=null)for(Me in X.ref!==void 0&&(we=void 0),X.key!==void 0&&(be=""+X.key),X)!O.call(X,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&X.ref===void 0||(re[Me]=X[Me]);var Me=arguments.length-2;if(Me===1)re.children=Y;else if(1<Me){for(var Pe=Array(Me),Ae=0;Ae<Me;Ae++)Pe[Ae]=arguments[Ae+2];re.children=Pe}return N(G.type,be,void 0,void 0,we,re)},Nn.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:i,_context:G},G},Nn.createElement=function(G,X,Y){var re,be={},we=null;if(X!=null)for(re in X.key!==void 0&&(we=""+X.key),X)O.call(X,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(be[re]=X[re]);var Me=arguments.length-2;if(Me===1)be.children=Y;else if(1<Me){for(var Pe=Array(Me),Ae=0;Ae<Me;Ae++)Pe[Ae]=arguments[Ae+2];be.children=Pe}if(G&&G.defaultProps)for(re in Me=G.defaultProps,Me)be[re]===void 0&&(be[re]=Me[re]);return N(G,we,void 0,void 0,null,be)},Nn.createRef=function(){return{current:null}},Nn.forwardRef=function(G){return{$$typeof:s,render:G}},Nn.isValidElement=U,Nn.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:ne}},Nn.memo=function(G,X){return{$$typeof:c,type:G,compare:X===void 0?null:X}},Nn.startTransition=function(G){var X=k.T,Y={};k.T=Y;try{var re=G(),be=k.S;be!==null&&be(Y,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(se,ee)}catch(we){ee(we)}finally{k.T=X}},Nn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Nn.use=function(G){return k.H.use(G)},Nn.useActionState=function(G,X,Y){return k.H.useActionState(G,X,Y)},Nn.useCallback=function(G,X){return k.H.useCallback(G,X)},Nn.useContext=function(G){return k.H.useContext(G)},Nn.useDebugValue=function(){},Nn.useDeferredValue=function(G,X){return k.H.useDeferredValue(G,X)},Nn.useEffect=function(G,X,Y){var re=k.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(G,X)},Nn.useId=function(){return k.H.useId()},Nn.useImperativeHandle=function(G,X,Y){return k.H.useImperativeHandle(G,X,Y)},Nn.useInsertionEffect=function(G,X){return k.H.useInsertionEffect(G,X)},Nn.useLayoutEffect=function(G,X){return k.H.useLayoutEffect(G,X)},Nn.useMemo=function(G,X){return k.H.useMemo(G,X)},Nn.useOptimistic=function(G,X){return k.H.useOptimistic(G,X)},Nn.useReducer=function(G,X,Y){return k.H.useReducer(G,X,Y)},Nn.useRef=function(G){return k.H.useRef(G)},Nn.useState=function(G){return k.H.useState(G)},Nn.useSyncExternalStore=function(G,X,Y){return k.H.useSyncExternalStore(G,X,Y)},Nn.useTransition=function(){return k.H.useTransition()},Nn.version="19.1.0",Nn}var CR;function QE(){return CR||(CR=1,fx.exports=j7()),fx.exports}var R=QE();const vt=ei(R),gO=A7({__proto__:null,default:vt},[R]);var hx={exports:{}},em={},px={exports:{}},mx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR;function M7(){return kR||(kR=1,function(e){function t(ie,ne){var ee=ie.length;ie.push(ne);e:for(;0<ee;){var se=ee-1>>>1,G=ie[se];if(0<a(G,ne))ie[se]=ne,ie[ee]=G,ee=se;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ne=ie[0],ee=ie.pop();if(ee!==ne){ie[0]=ee;e:for(var se=0,G=ie.length,X=G>>>1;se<X;){var Y=2*(se+1)-1,re=ie[Y],be=Y+1,we=ie[be];if(0>a(re,ee))be<G&&0>a(we,re)?(ie[se]=we,ie[be]=ee,se=be):(ie[se]=re,ie[Y]=ee,se=Y);else if(be<G&&0>a(we,ee))ie[se]=we,ie[be]=ee,se=be;else break e}}return ne}function a(ie,ne){var ee=ie.sortIndex-ne.sortIndex;return ee!==0?ee:ie.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var u=[],c=[],f=1,h=null,p=3,g=!1,v=!1,b=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ie){for(var ne=n(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=ie)r(c),ne.sortIndex=ne.expirationTime,t(u,ne);else break;ne=n(c)}}function k(ie){if(b=!1,C(ie),!v)if(n(u)!==null)v=!0,O||(O=!0,F());else{var ne=n(c);ne!==null&&he(k,ne.startTime-ie)}}var O=!1,N=-1,D=5,U=-1;function W(){return _?!0:!(e.unstable_now()-U<D)}function Q(){if(_=!1,O){var ie=e.unstable_now();U=ie;var ne=!0;try{e:{v=!1,b&&(b=!1,S(N),N=-1),g=!0;var ee=p;try{t:{for(C(ie),h=n(u);h!==null&&!(h.expirationTime>ie&&W());){var se=h.callback;if(typeof se=="function"){h.callback=null,p=h.priorityLevel;var G=se(h.expirationTime<=ie);if(ie=e.unstable_now(),typeof G=="function"){h.callback=G,C(ie),ne=!0;break t}h===n(u)&&r(u),C(ie)}else r(u);h=n(u)}if(h!==null)ne=!0;else{var X=n(c);X!==null&&he(k,X.startTime-ie),ne=!1}}break e}finally{h=null,p=ee,g=!1}ne=void 0}}finally{ne?F():O=!1}}}var F;if(typeof E=="function")F=function(){E(Q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,L=Z.port2;Z.port1.onmessage=Q,F=function(){L.postMessage(null)}}else F=function(){x(Q,0)};function he(ie,ne){N=x(function(){ie(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(ie){switch(p){case 1:case 2:case 3:var ne=3;break;default:ne=p}var ee=p;p=ne;try{return ie()}finally{p=ee}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(ie,ne){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ee=p;p=ie;try{return ne()}finally{p=ee}},e.unstable_scheduleCallback=function(ie,ne,ee){var se=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?se+ee:se):ee=se,ie){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ee+G,ie={id:f++,callback:ne,priorityLevel:ie,startTime:ee,expirationTime:G,sortIndex:-1},ee>se?(ie.sortIndex=ee,t(c,ie),n(u)===null&&ie===n(c)&&(b?(S(N),N=-1):b=!0,he(k,ee-se))):(ie.sortIndex=G,t(u,ie),v||g||(v=!0,O||(O=!0,F()))),ie},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(ie){var ne=p;return function(){var ee=p;p=ne;try{return ie.apply(this,arguments)}finally{p=ee}}}}(mx)),mx}var AR;function P7(){return AR||(AR=1,px.exports=M7()),px.exports}var gx={exports:{}},Va={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR;function F7(){if(TR)return Va;TR=1;var e=QE();function t(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:u,containerInfo:c,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Va.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Va.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(u,c,null,f)},Va.flushSync=function(u){var c=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=c,r.p=f,r.d.f()}},Va.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},Va.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Va.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):f==="script"&&r.d.X(u,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Va.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=s(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},Va.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Va.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=s(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},Va.requestFormReset=function(u){r.d.r(u)},Va.unstable_batchedUpdates=function(u,c){return u(c)},Va.useFormState=function(u,c,f){return o.H.useFormState(u,c,f)},Va.useFormStatus=function(){return o.H.useHostTransitionStatus()},Va.version="19.1.0",Va}var RR;function yO(){if(RR)return gx.exports;RR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gx.exports=F7(),gx.exports}var NR;function L7(){if(NR)return em;NR=1;var e=P7(),t=QE(),n=yO();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,m=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(m=d.return),l=d.return;while(l)}return d.tag===3?m:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function s(l){if(i(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var m=l,w=d;;){var T=m.return;if(T===null)break;var P=T.alternate;if(P===null){if(w=T.return,w!==null){m=w;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===m)return s(T),l;if(P===w)return s(T),d;P=P.sibling}throw Error(r(188))}if(m.return!==w.return)m=T,w=P;else{for(var oe=!1,Ee=T.child;Ee;){if(Ee===m){oe=!0,m=T,w=P;break}if(Ee===w){oe=!0,w=T,m=P;break}Ee=Ee.sibling}if(!oe){for(Ee=P.child;Ee;){if(Ee===m){oe=!0,m=P,w=T;break}if(Ee===w){oe=!0,w=P,m=T;break}Ee=Ee.sibling}if(!oe)throw Error(r(189))}}if(m.alternate!==w)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function F(l){return l===null||typeof l!="object"?null:(l=Q&&l[Q]||l["@@iterator"],typeof l=="function"?l:null)}var Z=Symbol.for("react.client.reference");function L(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case _:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case O:return"SuspenseList";case U:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case E:return(l.displayName||"Context")+".Provider";case S:return(l._context.displayName||"Context")+".Consumer";case C:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case N:return d=l.displayName||null,d!==null?d:L(l.type)||"Memo";case D:d=l._payload,l=l._init;try{return L(l(d))}catch{}}return null}var he=Array.isArray,ie=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},se=[],G=-1;function X(l){return{current:l}}function Y(l){0>G||(l.current=se[G],se[G]=null,G--)}function re(l,d){G++,se[G]=l.current,l.current=d}var be=X(null),we=X(null),Me=X(null),Pe=X(null);function Ae(l,d){switch(re(Me,d),re(we,l),re(be,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?Y3(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=Y3(d),l=X3(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Y(be),re(be,l)}function Te(){Y(be),Y(we),Y(Me)}function qe(l){l.memoizedState!==null&&re(Pe,l);var d=be.current,m=X3(d,l.type);d!==m&&(re(we,l),re(be,m))}function it(l){we.current===l&&(Y(be),Y(we)),Pe.current===l&&(Y(Pe),Kp._currentValue=ee)}var Ie=Object.prototype.hasOwnProperty,Re=e.unstable_scheduleCallback,z=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,Ne=e.unstable_requestPaint,ce=e.unstable_now,ae=e.unstable_getCurrentPriorityLevel,J=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Le=e.unstable_NormalPriority,Se=e.unstable_LowPriority,Ve=e.unstable_IdlePriority,xt=e.log,ht=e.unstable_setDisableYieldValue,Et=null,Pt=null;function Tt(l){if(typeof xt=="function"&&ht(l),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Et,l)}catch{}}var Ut=Math.clz32?Math.clz32:H,ge=Math.log,I=Math.LN2;function H(l){return l>>>=0,l===0?32:31-(ge(l)/I|0)|0}var fe=256,Oe=4194304;function ve(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ke(l,d,m){var w=l.pendingLanes;if(w===0)return 0;var T=0,P=l.suspendedLanes,oe=l.pingedLanes;l=l.warmLanes;var Ee=w&134217727;return Ee!==0?(w=Ee&~P,w!==0?T=ve(w):(oe&=Ee,oe!==0?T=ve(oe):m||(m=Ee&~l,m!==0&&(T=ve(m))))):(Ee=w&~P,Ee!==0?T=ve(Ee):oe!==0?T=ve(oe):m||(m=w&~l,m!==0&&(T=ve(m)))),T===0?0:d!==0&&d!==T&&(d&P)===0&&(P=T&-T,m=d&-d,P>=m||P===32&&(m&4194048)!==0)?d:T}function le(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ct(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var l=fe;return fe<<=1,(fe&4194048)===0&&(fe=256),l}function M(){var l=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),l}function Be(l){for(var d=[],m=0;31>m;m++)d.push(l);return d}function et(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function me(l,d,m,w,T,P){var oe=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var Ee=l.entanglements,ze=l.expirationTimes,ut=l.hiddenUpdates;for(m=oe&~m;0<m;){var _t=31-Ut(m),kt=1<<_t;Ee[_t]=0,ze[_t]=-1;var pt=ut[_t];if(pt!==null)for(ut[_t]=null,_t=0;_t<pt.length;_t++){var mt=pt[_t];mt!==null&&(mt.lane&=-536870913)}m&=~kt}w!==0&&De(l,w,0),P!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=P&~(oe&~d))}function De(l,d,m){l.pendingLanes|=d,l.suspendedLanes&=~d;var w=31-Ut(d);l.entangledLanes|=d,l.entanglements[w]=l.entanglements[w]|1073741824|m&4194090}function Ke(l,d){var m=l.entangledLanes|=d;for(l=l.entanglements;m;){var w=31-Ut(m),T=1<<w;T&d|l[w]&d&&(l[w]|=d),m&=~T}}function Ct(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ye(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function q(){var l=ne.p;return l!==0?l:(l=window.event,l===void 0?32:gR(l.type))}function B(l,d){var m=ne.p;try{return ne.p=l,d()}finally{ne.p=m}}var V=Math.random().toString(36).slice(2),pe="__reactFiber$"+V,de="__reactProps$"+V,Fe="__reactContainer$"+V,ot="__reactEvents$"+V,Dt="__reactListeners$"+V,un="__reactHandles$"+V,zt="__reactResources$"+V,Vt="__reactMarker$"+V;function Xt(l){delete l[pe],delete l[de],delete l[ot],delete l[Dt],delete l[un]}function Rn(l){var d=l[pe];if(d)return d;for(var m=l.parentNode;m;){if(d=m[Fe]||m[pe]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(l=tR(l);l!==null;){if(m=l[pe])return m;l=tR(l)}return d}l=m,m=l.parentNode}return null}function zn(l){if(l=l[pe]||l[Fe]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function fr(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function hr(l){var d=l[zt];return d||(d=l[zt]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function jn(l){l[Vt]=!0}var ni=new Set,as={};function is(l,d){os(l,d),os(l+"Capture",d)}function os(l,d){for(as[l]=d,l=0;l<d.length;l++)ni.add(d[l])}var $r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ss={},Ji={};function vg(l){return Ie.call(Ji,l)?!0:Ie.call(ss,l)?!1:$r.test(l)?Ji[l]=!0:(ss[l]=!0,!1)}function To(l,d,m){if(vg(d))if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var w=d.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+m)}}function Vs(l,d,m){if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+m)}}function Di(l,d,m,w){if(w===null)l.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(d,m,""+w)}}var xc,ls;function Gs(l){if(xc===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);xc=d&&d[1]||"",ls=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xc+l+ls}var Gl=!1;function Nd(l,d){if(!l||Gl)return"";Gl=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(d){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(mt){var pt=mt}Reflect.construct(l,[],kt)}else{try{kt.call()}catch(mt){pt=mt}l.call(kt.prototype)}}else{try{throw Error()}catch(mt){pt=mt}(kt=l())&&typeof kt.catch=="function"&&kt.catch(function(){})}}catch(mt){if(mt&&pt&&typeof mt.stack=="string")return[mt.stack,pt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=w.DetermineComponentFrameRoot(),oe=P[0],Ee=P[1];if(oe&&Ee){var ze=oe.split(`
`),ut=Ee.split(`
`);for(T=w=0;w<ze.length&&!ze[w].includes("DetermineComponentFrameRoot");)w++;for(;T<ut.length&&!ut[T].includes("DetermineComponentFrameRoot");)T++;if(w===ze.length||T===ut.length)for(w=ze.length-1,T=ut.length-1;1<=w&&0<=T&&ze[w]!==ut[T];)T--;for(;1<=w&&0<=T;w--,T--)if(ze[w]!==ut[T]){if(w!==1||T!==1)do if(w--,T--,0>T||ze[w]!==ut[T]){var _t=`
`+ze[w].replace(" at new "," at ");return l.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",l.displayName)),_t}while(1<=w&&0<=T);break}}}finally{Gl=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?Gs(m):""}function Un(l){switch(l.tag){case 26:case 27:case 5:return Gs(l.type);case 16:return Gs("Lazy");case 13:return Gs("Suspense");case 19:return Gs("SuspenseList");case 0:case 15:return Nd(l.type,!1);case 11:return Nd(l.type.render,!1);case 1:return Nd(l.type,!0);case 31:return Gs("Activity");default:return""}}function Yh(l){try{var d="";do d+=Un(l),l=l.return;while(l);return d}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function ri(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Xh(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function xr(l){var d=Xh(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),w=""+l[d];if(!l.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var T=m.get,P=m.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(oe){w=""+oe,P.call(this,oe)}}),Object.defineProperty(l,d,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(oe){w=""+oe},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function us(l){l._valueTracker||(l._valueTracker=xr(l))}function Wl(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var m=d.getValue(),w="";return l&&(w=Xh(l)?l.checked?"true":"false":l.value),l=w,l!==m?(d.setValue(l),!0):!1}function Ro(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Jh=/[\n"\\]/g;function Ba(l){return l.replace(Jh,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Kl(l,d,m,w,T,P,oe,Ee){l.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?l.type=oe:l.removeAttribute("type"),d!=null?oe==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ri(d)):l.value!==""+ri(d)&&(l.value=""+ri(d)):oe!=="submit"&&oe!=="reset"||l.removeAttribute("value"),d!=null?Zl(l,oe,ri(d)):m!=null?Zl(l,oe,ri(m)):w!=null&&l.removeAttribute("value"),T==null&&P!=null&&(l.defaultChecked=!!P),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&typeof Ee!="boolean"?l.name=""+ri(Ee):l.removeAttribute("name")}function Qh(l,d,m,w,T,P,oe,Ee){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.type=P),d!=null||m!=null){if(!(P!=="submit"&&P!=="reset"||d!=null))return;m=m!=null?""+ri(m):"",d=d!=null?""+ri(d):m,Ee||d===l.value||(l.value=d),l.defaultValue=d}w=w??T,w=typeof w!="function"&&typeof w!="symbol"&&!!w,l.checked=Ee?l.checked:!!w,l.defaultChecked=!!w,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(l.name=oe)}function Zl(l,d,m){d==="number"&&Ro(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function Ws(l,d,m,w){if(l=l.options,d){d={};for(var T=0;T<m.length;T++)d["$"+m[T]]=!0;for(m=0;m<l.length;m++)T=d.hasOwnProperty("$"+l[m].value),l[m].selected!==T&&(l[m].selected=T),T&&w&&(l[m].defaultSelected=!0)}else{for(m=""+ri(m),d=null,T=0;T<l.length;T++){if(l[T].value===m){l[T].selected=!0,w&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function Yl(l,d,m){if(d!=null&&(d=""+ri(d),d!==l.value&&(l.value=d),m==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=m!=null?""+ri(m):""}function ep(l,d,m,w){if(d==null){if(w!=null){if(m!=null)throw Error(r(92));if(he(w)){if(1<w.length)throw Error(r(93));w=w[0]}m=w}m==null&&(m=""),d=m}m=ri(d),l.defaultValue=m,w=l.textContent,w===m&&w!==""&&w!==null&&(l.value=w)}function Xl(l,d){if(d){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=d;return}}l.textContent=d}var Wn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Id(l,d,m){var w=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?w?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":w?l.setProperty(d,m):typeof m!="number"||m===0||Wn.has(d)?d==="float"?l.cssFloat=m:l[d]=(""+m).trim():l[d]=m+"px"}function wg(l,d,m){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,m!=null){for(var w in m)!m.hasOwnProperty(w)||d!=null&&d.hasOwnProperty(w)||(w.indexOf("--")===0?l.setProperty(w,""):w==="float"?l.cssFloat="":l[w]="");for(var T in d)w=d[T],d.hasOwnProperty(T)&&m[T]!==w&&Id(l,T,w)}else for(var P in d)d.hasOwnProperty(P)&&Id(l,P,d[P])}function tp(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ks(l){return Jl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Qi=null;function Od(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Zs=null,Nr=null;function ji(l){var d=zn(l);if(d&&(l=d.stateNode)){var m=l[de]||null;e:switch(l=d.stateNode,d.type){case"input":if(Kl(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Ba(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var w=m[d];if(w!==l&&w.form===l.form){var T=w[de]||null;if(!T)throw Error(r(90));Kl(w,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<m.length;d++)w=m[d],w.form===l.form&&Wl(w)}break e;case"textarea":Yl(l,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&Ws(l,!!m.multiple,d,!1)}}}var Ys=!1;function Ql(l,d,m){if(Ys)return l(d,m);Ys=!0;try{var w=l(d);return w}finally{if(Ys=!1,(Zs!==null||Nr!==null)&&(ly(),Zs&&(d=Zs,l=Nr,Nr=Zs=null,ji(d),l)))for(d=0;d<l.length;d++)ji(l[d])}}function Xs(l,d){var m=l.stateNode;if(m===null)return null;var w=m[de]||null;if(w===null)return null;m=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(l=l.type,w=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!w;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(r(231,d,typeof m));return m}var ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=!1;if(ya)try{var za={};Object.defineProperty(za,"passive",{get:function(){np=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{np=!1}var eo=null,Dd=null,eu=null;function tu(){if(eu)return eu;var l,d=Dd,m=d.length,w,T="value"in eo?eo.value:eo.textContent,P=T.length;for(l=0;l<m&&d[l]===T[l];l++);var oe=m-l;for(w=1;w<=oe&&d[m-w]===T[P-w];w++);return eu=T.slice(l,1<w?1-w:void 0)}function nu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Sc(){return!0}function _g(){return!1}function ta(l){function d(m,w,T,P,oe){this._reactName=m,this._targetInst=T,this.type=w,this.nativeEvent=P,this.target=oe,this.currentTarget=null;for(var Ee in l)l.hasOwnProperty(Ee)&&(m=l[Ee],this[Ee]=m?m(P):P[Ee]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Sc:_g,this.isPropagationStopped=_g,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Sc)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Sc)},persist:function(){},isPersistent:Sc}),d}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jd=ta(Js),cs=f({},Js,{view:0,detail:0}),Md=ta(cs),Ec,rp,Cc,Pd=f({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Cc&&(Cc&&l.type==="mousemove"?(Ec=l.screenX-Cc.screenX,rp=l.screenY-Cc.screenY):rp=Ec=0,Cc=l),Ec)},movementY:function(l){return"movementY"in l?l.movementY:rp}}),Fd=ta(Pd),ap=f({},Pd,{dataTransfer:0}),xg=ta(ap),Ld=f({},cs,{relatedTarget:0}),ru=ta(Ld),$d=f({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),Sg=ta($d),C1=f({},Js,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Bd=ta(C1),ip=f({},Js,{data:0}),zd=ta(ip),op={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ba={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kc(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=ba[l])?!!d[l]:!1}function Qs(){return kc}var Eg=f({},cs,{key:function(l){if(l.key){var d=op[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=nu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?sp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(l){return l.type==="keypress"?nu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?nu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Ud=ta(Eg),Cg=f({},Pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lp=ta(Cg),qd=f({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),up=ta(qd),el=f({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),cp=ta(el),dp=f({},Pd,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Hd=ta(dp),fp=f({},Js,{newState:0,oldState:0}),kg=ta(fp),k1=[9,13,27,32],Ac=ya&&"CompositionEvent"in window,ds=null;ya&&"documentMode"in document&&(ds=document.documentMode);var A1=ya&&"TextEvent"in window&&!ds,Vd=ya&&(!Ac||ds&&8<ds&&11>=ds),Gd=" ",Ag=!1;function hp(l,d){switch(l){case"keyup":return k1.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tg(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var tl=!1;function Rg(l,d){switch(l){case"compositionend":return Tg(d);case"keypress":return d.which!==32?null:(Ag=!0,Gd);case"textInput":return l=d.data,l===Gd&&Ag?null:l;default:return null}}function T1(l,d){if(tl)return l==="compositionend"||!Ac&&hp(l,d)?(l=tu(),eu=Dd=eo=null,tl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Vd&&d.locale!=="ko"?null:d.data;default:return null}}var Ng={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wd(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!Ng[l.type]:d==="textarea"}function pp(l,d,m,w){Zs?Nr?Nr.push(w):Nr=[w]:Zs=w,d=py(d,"onChange"),0<d.length&&(m=new jd("onChange","change",null,m,w),l.push({event:m,listeners:d}))}var au=null,Tc=null;function R1(l){V3(l,0)}function Kd(l){var d=fr(l);if(Wl(d))return l}function Rc(l,d){if(l==="change")return d}var to=!1;if(ya){var Ir;if(ya){var iu="oninput"in document;if(!iu){var ii=document.createElement("div");ii.setAttribute("oninput","return;"),iu=typeof ii.oninput=="function"}Ir=iu}else Ir=!1;to=Ir&&(!document.documentMode||9<document.documentMode)}function Ig(){au&&(au.detachEvent("onpropertychange",Zd),Tc=au=null)}function Zd(l){if(l.propertyName==="value"&&Kd(Tc)){var d=[];pp(d,Tc,l,Od(l)),Ql(R1,d)}}function Og(l,d,m){l==="focusin"?(Ig(),au=d,Tc=m,au.attachEvent("onpropertychange",Zd)):l==="focusout"&&Ig()}function nl(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Kd(Tc)}function mp(l,d){if(l==="click")return Kd(d)}function ou(l,d){if(l==="input"||l==="change")return Kd(d)}function fs(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ua=typeof Object.is=="function"?Object.is:fs;function A(l,d){if(Ua(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var m=Object.keys(l),w=Object.keys(d);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var T=m[w];if(!Ie.call(d,T)||!Ua(l[T],d[T]))return!1}return!0}function j(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function K(l,d){var m=j(l);l=0;for(var w;m;){if(m.nodeType===3){if(w=l+m.textContent.length,l<=d&&w>=d)return{node:m,offset:d-l};l=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=j(m)}}function te(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?te(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function ue(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Ro(l.document);d instanceof l.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)l=d.contentWindow;else break;d=Ro(l.document)}return d}function _e(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var je=ya&&"documentMode"in document&&11>=document.documentMode,$e=null,We=null,Ye=null,tt=!1;function He(l,d,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;tt||$e==null||$e!==Ro(w)||(w=$e,"selectionStart"in w&&_e(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ye&&A(Ye,w)||(Ye=w,w=py(We,"onSelect"),0<w.length&&(d=new jd("onSelect","select",null,d,m),l.push({event:d,listeners:w}),d.target=$e)))}function rt(l,d){var m={};return m[l.toLowerCase()]=d.toLowerCase(),m["Webkit"+l]="webkit"+d,m["Moz"+l]="moz"+d,m}var Ge={animationend:rt("Animation","AnimationEnd"),animationiteration:rt("Animation","AnimationIteration"),animationstart:rt("Animation","AnimationStart"),transitionrun:rt("Transition","TransitionRun"),transitionstart:rt("Transition","TransitionStart"),transitioncancel:rt("Transition","TransitionCancel"),transitionend:rt("Transition","TransitionEnd")},Qe={},at={};ya&&(at=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Xe(l){if(Qe[l])return Qe[l];if(!Ge[l])return l;var d=Ge[l],m;for(m in d)if(d.hasOwnProperty(m)&&m in at)return Qe[l]=d[m];return l}var ft=Xe("animationend"),gt=Xe("animationiteration"),bt=Xe("animationstart"),wt=Xe("transitionrun"),jt=Xe("transitionstart"),qt=Xe("transitioncancel"),Nt=Xe("transitionend"),Ft=new Map,Ht="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ht.push("scrollEnd");function It(l,d){Ft.set(l,d),is(d,[l])}var Zt=new WeakMap;function cn(l,d){if(typeof l=="object"&&l!==null){var m=Zt.get(l);return m!==void 0?m:(d={value:l,source:d,stack:Yh(d)},Zt.set(l,d),d)}return{value:l,source:d,stack:Yh(d)}}var dn=[],Sn=0,Oa=0;function yn(){for(var l=Sn,d=Oa=Sn=0;d<l;){var m=dn[d];dn[d++]=null;var w=dn[d];dn[d++]=null;var T=dn[d];dn[d++]=null;var P=dn[d];if(dn[d++]=null,w!==null&&T!==null){var oe=w.pending;oe===null?T.next=T:(T.next=oe.next,oe.next=T),w.pending=T}P!==0&&va(m,T,P)}}function Yr(l,d,m,w){dn[Sn++]=l,dn[Sn++]=d,dn[Sn++]=m,dn[Sn++]=w,Oa|=w,l.lanes|=w,l=l.alternate,l!==null&&(l.lanes|=w)}function na(l,d,m,w){return Yr(l,d,m,w),no(l)}function No(l,d){return Yr(l,null,null,d),no(l)}function va(l,d,m){l.lanes|=m;var w=l.alternate;w!==null&&(w.lanes|=m);for(var T=!1,P=l.return;P!==null;)P.childLanes|=m,w=P.alternate,w!==null&&(w.childLanes|=m),P.tag===22&&(l=P.stateNode,l===null||l._visibility&1||(T=!0)),l=P,P=P.return;return l.tag===3?(P=l.stateNode,T&&d!==null&&(T=31-Ut(m),l=P.hiddenUpdates,w=l[T],w===null?l[T]=[d]:w.push(d),d.lane=m|536870912),P):null}function no(l){if(50<Bp)throw Bp=0,M_=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var hs={};function cB(l,d,m,w){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(l,d,m,w){return new cB(l,d,m,w)}function N1(l){return l=l.prototype,!(!l||!l.isReactComponent)}function rl(l,d){var m=l.alternate;return m===null?(m=Mi(l.tag,d,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=d,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,d=l.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function NA(l,d){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,d=m.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Dg(l,d,m,w,T,P){var oe=0;if(w=l,typeof l=="function")N1(l)&&(oe=1);else if(typeof l=="string")oe=f7(l,m,be.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case U:return l=Mi(31,m,d,T),l.elementType=U,l.lanes=P,l;case v:return Nc(m.children,T,P,d);case b:oe=8,T|=24;break;case _:return l=Mi(12,m,d,T|2),l.elementType=_,l.lanes=P,l;case k:return l=Mi(13,m,d,T),l.elementType=k,l.lanes=P,l;case O:return l=Mi(19,m,d,T),l.elementType=O,l.lanes=P,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case E:oe=10;break e;case S:oe=9;break e;case C:oe=11;break e;case N:oe=14;break e;case D:oe=16,w=null;break e}oe=29,m=Error(r(130,l===null?"null":typeof l,"")),w=null}return d=Mi(oe,m,d,T),d.elementType=l,d.type=w,d.lanes=P,d}function Nc(l,d,m,w){return l=Mi(7,l,w,d),l.lanes=m,l}function I1(l,d,m){return l=Mi(6,l,null,d),l.lanes=m,l}function O1(l,d,m){return d=Mi(4,l.children!==null?l.children:[],l.key,d),d.lanes=m,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Yd=[],Xd=0,jg=null,Mg=0,ro=[],ao=0,Ic=null,al=1,il="";function Oc(l,d){Yd[Xd++]=Mg,Yd[Xd++]=jg,jg=l,Mg=d}function IA(l,d,m){ro[ao++]=al,ro[ao++]=il,ro[ao++]=Ic,Ic=l;var w=al;l=il;var T=32-Ut(w)-1;w&=~(1<<T),m+=1;var P=32-Ut(d)+T;if(30<P){var oe=T-T%5;P=(w&(1<<oe)-1).toString(32),w>>=oe,T-=oe,al=1<<32-Ut(d)+T|m<<T|w,il=P+l}else al=1<<P|m<<T|w,il=l}function D1(l){l.return!==null&&(Oc(l,1),IA(l,1,0))}function j1(l){for(;l===jg;)jg=Yd[--Xd],Yd[Xd]=null,Mg=Yd[--Xd],Yd[Xd]=null;for(;l===Ic;)Ic=ro[--ao],ro[ao]=null,il=ro[--ao],ro[ao]=null,al=ro[--ao],ro[ao]=null}var oi=null,Hr=null,er=!1,Dc=null,ps=!1,M1=Error(r(519));function jc(l){var d=Error(r(418,""));throw bp(cn(d,l)),M1}function OA(l){var d=l.stateNode,m=l.type,w=l.memoizedProps;switch(d[pe]=l,d[de]=w,m){case"dialog":Hn("cancel",d),Hn("close",d);break;case"iframe":case"object":case"embed":Hn("load",d);break;case"video":case"audio":for(m=0;m<Up.length;m++)Hn(Up[m],d);break;case"source":Hn("error",d);break;case"img":case"image":case"link":Hn("error",d),Hn("load",d);break;case"details":Hn("toggle",d);break;case"input":Hn("invalid",d),Qh(d,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),us(d);break;case"select":Hn("invalid",d);break;case"textarea":Hn("invalid",d),ep(d,w.value,w.defaultValue,w.children),us(d)}m=w.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||w.suppressHydrationWarning===!0||Z3(d.textContent,m)?(w.popover!=null&&(Hn("beforetoggle",d),Hn("toggle",d)),w.onScroll!=null&&Hn("scroll",d),w.onScrollEnd!=null&&Hn("scrollend",d),w.onClick!=null&&(d.onclick=my),d=!0):d=!1,d||jc(l)}function DA(l){for(oi=l.return;oi;)switch(oi.tag){case 5:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:oi=oi.return}}function gp(l){if(l!==oi)return!1;if(!er)return DA(l),er=!0,!1;var d=l.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||X_(l.type,l.memoizedProps)),m=!m),m&&Hr&&jc(l),DA(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(m=l.data,m==="/$"){if(d===0){Hr=Oo(l.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++;l=l.nextSibling}Hr=null}}else d===27?(d=Hr,xu(l.type)?(l=tx,tx=null,Hr=l):Hr=d):Hr=oi?Oo(l.stateNode.nextSibling):null;return!0}function yp(){Hr=oi=null,er=!1}function jA(){var l=Dc;return l!==null&&(bi===null?bi=l:bi.push.apply(bi,l),Dc=null),l}function bp(l){Dc===null?Dc=[l]:Dc.push(l)}var P1=X(null),Mc=null,ol=null;function su(l,d,m){re(P1,d._currentValue),d._currentValue=m}function sl(l){l._currentValue=P1.current,Y(P1)}function F1(l,d,m){for(;l!==null;){var w=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),l===m)break;l=l.return}}function L1(l,d,m,w){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var P=T.dependencies;if(P!==null){var oe=T.child;P=P.firstContext;e:for(;P!==null;){var Ee=P;P=T;for(var ze=0;ze<d.length;ze++)if(Ee.context===d[ze]){P.lanes|=m,Ee=P.alternate,Ee!==null&&(Ee.lanes|=m),F1(P.return,m,l),w||(oe=null);break e}P=Ee.next}}else if(T.tag===18){if(oe=T.return,oe===null)throw Error(r(341));oe.lanes|=m,P=oe.alternate,P!==null&&(P.lanes|=m),F1(oe,m,l),oe=null}else oe=T.child;if(oe!==null)oe.return=T;else for(oe=T;oe!==null;){if(oe===l){oe=null;break}if(T=oe.sibling,T!==null){T.return=oe.return,oe=T;break}oe=oe.return}T=oe}}function vp(l,d,m,w){l=null;for(var T=d,P=!1;T!==null;){if(!P){if((T.flags&524288)!==0)P=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var oe=T.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var Ee=T.type;Ua(T.pendingProps.value,oe.value)||(l!==null?l.push(Ee):l=[Ee])}}else if(T===Pe.current){if(oe=T.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Kp):l=[Kp])}T=T.return}l!==null&&L1(d,l,m,w),d.flags|=262144}function Pg(l){for(l=l.firstContext;l!==null;){if(!Ua(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Pc(l){Mc=l,ol=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function qa(l){return MA(Mc,l)}function Fg(l,d){return Mc===null&&Pc(l),MA(l,d)}function MA(l,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},ol===null){if(l===null)throw Error(r(308));ol=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else ol=ol.next=d;return m}var dB=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(m,w){l.push(w)}};this.abort=function(){d.aborted=!0,l.forEach(function(m){return m()})}},fB=e.unstable_scheduleCallback,hB=e.unstable_NormalPriority,ca={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $1(){return{controller:new dB,data:new Map,refCount:0}}function wp(l){l.refCount--,l.refCount===0&&fB(hB,function(){l.controller.abort()})}var _p=null,B1=0,Jd=0,Qd=null;function pB(l,d){if(_p===null){var m=_p=[];B1=0,Jd=U_(),Qd={status:"pending",value:void 0,then:function(w){m.push(w)}}}return B1++,d.then(PA,PA),d}function PA(){if(--B1===0&&_p!==null){Qd!==null&&(Qd.status="fulfilled");var l=_p;_p=null,Jd=0,Qd=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function mB(l,d){var m=[],w={status:"pending",value:null,reason:null,then:function(T){m.push(T)}};return l.then(function(){w.status="fulfilled",w.value=d;for(var T=0;T<m.length;T++)(0,m[T])(d)},function(T){for(w.status="rejected",w.reason=T,T=0;T<m.length;T++)(0,m[T])(void 0)}),w}var FA=ie.S;ie.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&pB(l,d),FA!==null&&FA(l,d)};var Fc=X(null);function z1(){var l=Fc.current;return l!==null?l:Ar.pooledCache}function Lg(l,d){d===null?re(Fc,Fc.current):re(Fc,d.pool)}function LA(){var l=z1();return l===null?null:{parent:ca._currentValue,pool:l}}var xp=Error(r(460)),$A=Error(r(474)),$g=Error(r(542)),U1={then:function(){}};function BA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Bg(){}function zA(l,d,m){switch(m=l[m],m===void 0?l.push(d):m!==d&&(d.then(Bg,Bg),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,qA(l),l;default:if(typeof d.status=="string")d.then(Bg,Bg);else{if(l=Ar,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(w){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=w}},function(w){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=w}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,qA(l),l}throw Sp=d,xp}}var Sp=null;function UA(){if(Sp===null)throw Error(r(459));var l=Sp;return Sp=null,l}function qA(l){if(l===xp||l===$g)throw Error(r(483))}var lu=!1;function q1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function H1(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function uu(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function cu(l,d,m){var w=l.updateQueue;if(w===null)return null;if(w=w.shared,(or&2)!==0){var T=w.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),w.pending=d,d=no(l),va(l,null,m),d}return Yr(l,w,d,m),no(l)}function Ep(l,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var w=d.lanes;w&=l.pendingLanes,m|=w,d.lanes=m,Ke(l,m)}}function V1(l,d){var m=l.updateQueue,w=l.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var T=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var oe={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};P===null?T=P=oe:P=P.next=oe,m=m.next}while(m!==null);P===null?T=P=d:P=P.next=d}else T=P=d;m={baseState:w.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:w.shared,callbacks:w.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=d}var G1=!1;function Cp(){if(G1){var l=Qd;if(l!==null)throw l}}function kp(l,d,m,w){G1=!1;var T=l.updateQueue;lu=!1;var P=T.firstBaseUpdate,oe=T.lastBaseUpdate,Ee=T.shared.pending;if(Ee!==null){T.shared.pending=null;var ze=Ee,ut=ze.next;ze.next=null,oe===null?P=ut:oe.next=ut,oe=ze;var _t=l.alternate;_t!==null&&(_t=_t.updateQueue,Ee=_t.lastBaseUpdate,Ee!==oe&&(Ee===null?_t.firstBaseUpdate=ut:Ee.next=ut,_t.lastBaseUpdate=ze))}if(P!==null){var kt=T.baseState;oe=0,_t=ut=ze=null,Ee=P;do{var pt=Ee.lane&-536870913,mt=pt!==Ee.lane;if(mt?(Kn&pt)===pt:(w&pt)===pt){pt!==0&&pt===Jd&&(G1=!0),_t!==null&&(_t=_t.next={lane:0,tag:Ee.tag,payload:Ee.payload,callback:null,next:null});e:{var bn=l,fn=Ee;pt=d;var gr=m;switch(fn.tag){case 1:if(bn=fn.payload,typeof bn=="function"){kt=bn.call(gr,kt,pt);break e}kt=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=fn.payload,pt=typeof bn=="function"?bn.call(gr,kt,pt):bn,pt==null)break e;kt=f({},kt,pt);break e;case 2:lu=!0}}pt=Ee.callback,pt!==null&&(l.flags|=64,mt&&(l.flags|=8192),mt=T.callbacks,mt===null?T.callbacks=[pt]:mt.push(pt))}else mt={lane:pt,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},_t===null?(ut=_t=mt,ze=kt):_t=_t.next=mt,oe|=pt;if(Ee=Ee.next,Ee===null){if(Ee=T.shared.pending,Ee===null)break;mt=Ee,Ee=mt.next,mt.next=null,T.lastBaseUpdate=mt,T.shared.pending=null}}while(!0);_t===null&&(ze=kt),T.baseState=ze,T.firstBaseUpdate=ut,T.lastBaseUpdate=_t,P===null&&(T.shared.lanes=0),bu|=oe,l.lanes=oe,l.memoizedState=kt}}function HA(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function VA(l,d){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)HA(m[l],d)}var ef=X(null),zg=X(0);function GA(l,d){l=pl,re(zg,l),re(ef,d),pl=l|d.baseLanes}function W1(){re(zg,pl),re(ef,ef.current)}function K1(){pl=zg.current,Y(ef),Y(zg)}var du=0,Ln=null,pr=null,ra=null,Ug=!1,tf=!1,Lc=!1,qg=0,Ap=0,nf=null,gB=0;function Xr(){throw Error(r(321))}function Z1(l,d){if(d===null)return!1;for(var m=0;m<d.length&&m<l.length;m++)if(!Ua(l[m],d[m]))return!1;return!0}function Y1(l,d,m,w,T,P){return du=P,Ln=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ie.H=l===null||l.memoizedState===null?RT:NT,Lc=!1,P=m(w,T),Lc=!1,tf&&(P=KA(d,m,w,T)),WA(l),P}function WA(l){ie.H=Zg;var d=pr!==null&&pr.next!==null;if(du=0,ra=pr=Ln=null,Ug=!1,Ap=0,nf=null,d)throw Error(r(300));l===null||wa||(l=l.dependencies,l!==null&&Pg(l)&&(wa=!0))}function KA(l,d,m,w){Ln=l;var T=0;do{if(tf&&(nf=null),Ap=0,tf=!1,25<=T)throw Error(r(301));if(T+=1,ra=pr=null,l.updateQueue!=null){var P=l.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}ie.H=SB,P=d(m,w)}while(tf);return P}function yB(){var l=ie.H,d=l.useState()[0];return d=typeof d.then=="function"?Tp(d):d,l=l.useState()[0],(pr!==null?pr.memoizedState:null)!==l&&(Ln.flags|=1024),d}function X1(){var l=qg!==0;return qg=0,l}function J1(l,d,m){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~m}function Q1(l){if(Ug){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Ug=!1}du=0,ra=pr=Ln=null,tf=!1,Ap=qg=0,nf=null}function gi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ra===null?Ln.memoizedState=ra=l:ra=ra.next=l,ra}function aa(){if(pr===null){var l=Ln.alternate;l=l!==null?l.memoizedState:null}else l=pr.next;var d=ra===null?Ln.memoizedState:ra.next;if(d!==null)ra=d,pr=l;else{if(l===null)throw Ln.alternate===null?Error(r(467)):Error(r(310));pr=l,l={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},ra===null?Ln.memoizedState=ra=l:ra=ra.next=l}return ra}function e_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tp(l){var d=Ap;return Ap+=1,nf===null&&(nf=[]),l=zA(nf,l,d),d=Ln,(ra===null?d.memoizedState:ra.next)===null&&(d=d.alternate,ie.H=d===null||d.memoizedState===null?RT:NT),l}function Hg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Tp(l);if(l.$$typeof===E)return qa(l)}throw Error(r(438,String(l)))}function t_(l){var d=null,m=Ln.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var w=Ln.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(d={data:w.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=e_(),Ln.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(l),w=0;w<l;w++)m[w]=W;return d.index++,m}function ll(l,d){return typeof d=="function"?d(l):d}function Vg(l){var d=aa();return n_(d,pr,l)}function n_(l,d,m){var w=l.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=m;var T=l.baseQueue,P=w.pending;if(P!==null){if(T!==null){var oe=T.next;T.next=P.next,P.next=oe}d.baseQueue=T=P,w.pending=null}if(P=l.baseState,T===null)l.memoizedState=P;else{d=T.next;var Ee=oe=null,ze=null,ut=d,_t=!1;do{var kt=ut.lane&-536870913;if(kt!==ut.lane?(Kn&kt)===kt:(du&kt)===kt){var pt=ut.revertLane;if(pt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),kt===Jd&&(_t=!0);else if((du&pt)===pt){ut=ut.next,pt===Jd&&(_t=!0);continue}else kt={lane:0,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},ze===null?(Ee=ze=kt,oe=P):ze=ze.next=kt,Ln.lanes|=pt,bu|=pt;kt=ut.action,Lc&&m(P,kt),P=ut.hasEagerState?ut.eagerState:m(P,kt)}else pt={lane:kt,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},ze===null?(Ee=ze=pt,oe=P):ze=ze.next=pt,Ln.lanes|=kt,bu|=kt;ut=ut.next}while(ut!==null&&ut!==d);if(ze===null?oe=P:ze.next=Ee,!Ua(P,l.memoizedState)&&(wa=!0,_t&&(m=Qd,m!==null)))throw m;l.memoizedState=P,l.baseState=oe,l.baseQueue=ze,w.lastRenderedState=P}return T===null&&(w.lanes=0),[l.memoizedState,w.dispatch]}function r_(l){var d=aa(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var w=m.dispatch,T=m.pending,P=d.memoizedState;if(T!==null){m.pending=null;var oe=T=T.next;do P=l(P,oe.action),oe=oe.next;while(oe!==T);Ua(P,d.memoizedState)||(wa=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),m.lastRenderedState=P}return[P,w]}function ZA(l,d,m){var w=Ln,T=aa(),P=er;if(P){if(m===void 0)throw Error(r(407));m=m()}else m=d();var oe=!Ua((pr||T).memoizedState,m);oe&&(T.memoizedState=m,wa=!0),T=T.queue;var Ee=JA.bind(null,w,T,l);if(Rp(2048,8,Ee,[l]),T.getSnapshot!==d||oe||ra!==null&&ra.memoizedState.tag&1){if(w.flags|=2048,rf(9,Gg(),XA.bind(null,w,T,m,d),null),Ar===null)throw Error(r(349));P||(du&124)!==0||YA(w,d,m)}return m}function YA(l,d,m){l.flags|=16384,l={getSnapshot:d,value:m},d=Ln.updateQueue,d===null?(d=e_(),Ln.updateQueue=d,d.stores=[l]):(m=d.stores,m===null?d.stores=[l]:m.push(l))}function XA(l,d,m,w){d.value=m,d.getSnapshot=w,QA(d)&&eT(l)}function JA(l,d,m){return m(function(){QA(d)&&eT(l)})}function QA(l){var d=l.getSnapshot;l=l.value;try{var m=d();return!Ua(l,m)}catch{return!0}}function eT(l){var d=No(l,2);d!==null&&Bi(d,l,2)}function a_(l){var d=gi();if(typeof l=="function"){var m=l;if(l=m(),Lc){Tt(!0);try{m()}finally{Tt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:l},d}function tT(l,d,m,w){return l.baseState=m,n_(l,pr,typeof w=="function"?w:ll)}function bB(l,d,m,w,T){if(Kg(l))throw Error(r(485));if(l=d.action,l!==null){var P={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){P.listeners.push(oe)}};ie.T!==null?m(!0):P.isTransition=!1,w(P),m=d.pending,m===null?(P.next=d.pending=P,nT(d,P)):(P.next=m.next,d.pending=m.next=P)}}function nT(l,d){var m=d.action,w=d.payload,T=l.state;if(d.isTransition){var P=ie.T,oe={};ie.T=oe;try{var Ee=m(T,w),ze=ie.S;ze!==null&&ze(oe,Ee),rT(l,d,Ee)}catch(ut){i_(l,d,ut)}finally{ie.T=P}}else try{P=m(T,w),rT(l,d,P)}catch(ut){i_(l,d,ut)}}function rT(l,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(w){aT(l,d,w)},function(w){return i_(l,d,w)}):aT(l,d,m)}function aT(l,d,m){d.status="fulfilled",d.value=m,iT(d),l.state=m,d=l.pending,d!==null&&(m=d.next,m===d?l.pending=null:(m=m.next,d.next=m,nT(l,m)))}function i_(l,d,m){var w=l.pending;if(l.pending=null,w!==null){w=w.next;do d.status="rejected",d.reason=m,iT(d),d=d.next;while(d!==w)}l.action=null}function iT(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function oT(l,d){return d}function sT(l,d){if(er){var m=Ar.formState;if(m!==null){e:{var w=Ln;if(er){if(Hr){t:{for(var T=Hr,P=ps;T.nodeType!==8;){if(!P){T=null;break t}if(T=Oo(T.nextSibling),T===null){T=null;break t}}P=T.data,T=P==="F!"||P==="F"?T:null}if(T){Hr=Oo(T.nextSibling),w=T.data==="F!";break e}}jc(w)}w=!1}w&&(d=m[0])}}return m=gi(),m.memoizedState=m.baseState=d,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oT,lastRenderedState:d},m.queue=w,m=kT.bind(null,Ln,w),w.dispatch=m,w=a_(!1),P=c_.bind(null,Ln,!1,w.queue),w=gi(),T={state:d,dispatch:null,action:l,pending:null},w.queue=T,m=bB.bind(null,Ln,T,P,m),T.dispatch=m,w.memoizedState=l,[d,m,!1]}function lT(l){var d=aa();return uT(d,pr,l)}function uT(l,d,m){if(d=n_(l,d,oT)[0],l=Vg(ll)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var w=Tp(d)}catch(oe){throw oe===xp?$g:oe}else w=d;d=aa();var T=d.queue,P=T.dispatch;return m!==d.memoizedState&&(Ln.flags|=2048,rf(9,Gg(),vB.bind(null,T,m),null)),[w,P,l]}function vB(l,d){l.action=d}function cT(l){var d=aa(),m=pr;if(m!==null)return uT(d,m,l);aa(),d=d.memoizedState,m=aa();var w=m.queue.dispatch;return m.memoizedState=l,[d,w,!1]}function rf(l,d,m,w){return l={tag:l,create:m,deps:w,inst:d,next:null},d=Ln.updateQueue,d===null&&(d=e_(),Ln.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=l.next=l:(w=m.next,m.next=l,l.next=w,d.lastEffect=l),l}function Gg(){return{destroy:void 0,resource:void 0}}function dT(){return aa().memoizedState}function Wg(l,d,m,w){var T=gi();w=w===void 0?null:w,Ln.flags|=l,T.memoizedState=rf(1|d,Gg(),m,w)}function Rp(l,d,m,w){var T=aa();w=w===void 0?null:w;var P=T.memoizedState.inst;pr!==null&&w!==null&&Z1(w,pr.memoizedState.deps)?T.memoizedState=rf(d,P,m,w):(Ln.flags|=l,T.memoizedState=rf(1|d,P,m,w))}function fT(l,d){Wg(8390656,8,l,d)}function hT(l,d){Rp(2048,8,l,d)}function pT(l,d){return Rp(4,2,l,d)}function mT(l,d){return Rp(4,4,l,d)}function gT(l,d){if(typeof d=="function"){l=l();var m=d(l);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function yT(l,d,m){m=m!=null?m.concat([l]):null,Rp(4,4,gT.bind(null,d,l),m)}function o_(){}function bT(l,d){var m=aa();d=d===void 0?null:d;var w=m.memoizedState;return d!==null&&Z1(d,w[1])?w[0]:(m.memoizedState=[l,d],l)}function vT(l,d){var m=aa();d=d===void 0?null:d;var w=m.memoizedState;if(d!==null&&Z1(d,w[1]))return w[0];if(w=l(),Lc){Tt(!0);try{l()}finally{Tt(!1)}}return m.memoizedState=[w,d],w}function s_(l,d,m){return m===void 0||(du&1073741824)!==0?l.memoizedState=d:(l.memoizedState=m,l=x3(),Ln.lanes|=l,bu|=l,m)}function wT(l,d,m,w){return Ua(m,d)?m:ef.current!==null?(l=s_(l,m,w),Ua(l,d)||(wa=!0),l):(du&42)===0?(wa=!0,l.memoizedState=m):(l=x3(),Ln.lanes|=l,bu|=l,d)}function _T(l,d,m,w,T){var P=ne.p;ne.p=P!==0&&8>P?P:8;var oe=ie.T,Ee={};ie.T=Ee,c_(l,!1,d,m);try{var ze=T(),ut=ie.S;if(ut!==null&&ut(Ee,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var _t=mB(ze,w);Np(l,d,_t,$i(l))}else Np(l,d,w,$i(l))}catch(kt){Np(l,d,{then:function(){},status:"rejected",reason:kt},$i())}finally{ne.p=P,ie.T=oe}}function wB(){}function l_(l,d,m,w){if(l.tag!==5)throw Error(r(476));var T=xT(l).queue;_T(l,T,d,ee,m===null?wB:function(){return ST(l),m(w)})}function xT(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:ee},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:m},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function ST(l){var d=xT(l).next.queue;Np(l,d,{},$i())}function u_(){return qa(Kp)}function ET(){return aa().memoizedState}function CT(){return aa().memoizedState}function _B(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var m=$i();l=uu(m);var w=cu(d,l,m);w!==null&&(Bi(w,d,m),Ep(w,d,m)),d={cache:$1()},l.payload=d;return}d=d.return}}function xB(l,d,m){var w=$i();m={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Kg(l)?AT(d,m):(m=na(l,d,m,w),m!==null&&(Bi(m,l,w),TT(m,d,w)))}function kT(l,d,m){var w=$i();Np(l,d,m,w)}function Np(l,d,m,w){var T={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Kg(l))AT(d,T);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var oe=d.lastRenderedState,Ee=P(oe,m);if(T.hasEagerState=!0,T.eagerState=Ee,Ua(Ee,oe))return Yr(l,d,T,0),Ar===null&&yn(),!1}catch{}finally{}if(m=na(l,d,T,w),m!==null)return Bi(m,l,w),TT(m,d,w),!0}return!1}function c_(l,d,m,w){if(w={lane:2,revertLane:U_(),action:w,hasEagerState:!1,eagerState:null,next:null},Kg(l)){if(d)throw Error(r(479))}else d=na(l,m,w,2),d!==null&&Bi(d,l,2)}function Kg(l){var d=l.alternate;return l===Ln||d!==null&&d===Ln}function AT(l,d){tf=Ug=!0;var m=l.pending;m===null?d.next=d:(d.next=m.next,m.next=d),l.pending=d}function TT(l,d,m){if((m&4194048)!==0){var w=d.lanes;w&=l.pendingLanes,m|=w,d.lanes=m,Ke(l,m)}}var Zg={readContext:qa,use:Hg,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useLayoutEffect:Xr,useInsertionEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useSyncExternalStore:Xr,useId:Xr,useHostTransitionStatus:Xr,useFormState:Xr,useActionState:Xr,useOptimistic:Xr,useMemoCache:Xr,useCacheRefresh:Xr},RT={readContext:qa,use:Hg,useCallback:function(l,d){return gi().memoizedState=[l,d===void 0?null:d],l},useContext:qa,useEffect:fT,useImperativeHandle:function(l,d,m){m=m!=null?m.concat([l]):null,Wg(4194308,4,gT.bind(null,d,l),m)},useLayoutEffect:function(l,d){return Wg(4194308,4,l,d)},useInsertionEffect:function(l,d){Wg(4,2,l,d)},useMemo:function(l,d){var m=gi();d=d===void 0?null:d;var w=l();if(Lc){Tt(!0);try{l()}finally{Tt(!1)}}return m.memoizedState=[w,d],w},useReducer:function(l,d,m){var w=gi();if(m!==void 0){var T=m(d);if(Lc){Tt(!0);try{m(d)}finally{Tt(!1)}}}else T=d;return w.memoizedState=w.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},w.queue=l,l=l.dispatch=xB.bind(null,Ln,l),[w.memoizedState,l]},useRef:function(l){var d=gi();return l={current:l},d.memoizedState=l},useState:function(l){l=a_(l);var d=l.queue,m=kT.bind(null,Ln,d);return d.dispatch=m,[l.memoizedState,m]},useDebugValue:o_,useDeferredValue:function(l,d){var m=gi();return s_(m,l,d)},useTransition:function(){var l=a_(!1);return l=_T.bind(null,Ln,l.queue,!0,!1),gi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,m){var w=Ln,T=gi();if(er){if(m===void 0)throw Error(r(407));m=m()}else{if(m=d(),Ar===null)throw Error(r(349));(Kn&124)!==0||YA(w,d,m)}T.memoizedState=m;var P={value:m,getSnapshot:d};return T.queue=P,fT(JA.bind(null,w,P,l),[l]),w.flags|=2048,rf(9,Gg(),XA.bind(null,w,P,m,d),null),m},useId:function(){var l=gi(),d=Ar.identifierPrefix;if(er){var m=il,w=al;m=(w&~(1<<32-Ut(w)-1)).toString(32)+m,d=""+d+"R"+m,m=qg++,0<m&&(d+="H"+m.toString(32)),d+=""}else m=gB++,d=""+d+"r"+m.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:u_,useFormState:sT,useActionState:sT,useOptimistic:function(l){var d=gi();d.memoizedState=d.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=c_.bind(null,Ln,!0,m),m.dispatch=d,[l,d]},useMemoCache:t_,useCacheRefresh:function(){return gi().memoizedState=_B.bind(null,Ln)}},NT={readContext:qa,use:Hg,useCallback:bT,useContext:qa,useEffect:hT,useImperativeHandle:yT,useInsertionEffect:pT,useLayoutEffect:mT,useMemo:vT,useReducer:Vg,useRef:dT,useState:function(){return Vg(ll)},useDebugValue:o_,useDeferredValue:function(l,d){var m=aa();return wT(m,pr.memoizedState,l,d)},useTransition:function(){var l=Vg(ll)[0],d=aa().memoizedState;return[typeof l=="boolean"?l:Tp(l),d]},useSyncExternalStore:ZA,useId:ET,useHostTransitionStatus:u_,useFormState:lT,useActionState:lT,useOptimistic:function(l,d){var m=aa();return tT(m,pr,l,d)},useMemoCache:t_,useCacheRefresh:CT},SB={readContext:qa,use:Hg,useCallback:bT,useContext:qa,useEffect:hT,useImperativeHandle:yT,useInsertionEffect:pT,useLayoutEffect:mT,useMemo:vT,useReducer:r_,useRef:dT,useState:function(){return r_(ll)},useDebugValue:o_,useDeferredValue:function(l,d){var m=aa();return pr===null?s_(m,l,d):wT(m,pr.memoizedState,l,d)},useTransition:function(){var l=r_(ll)[0],d=aa().memoizedState;return[typeof l=="boolean"?l:Tp(l),d]},useSyncExternalStore:ZA,useId:ET,useHostTransitionStatus:u_,useFormState:cT,useActionState:cT,useOptimistic:function(l,d){var m=aa();return pr!==null?tT(m,pr,l,d):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:t_,useCacheRefresh:CT},af=null,Ip=0;function Yg(l){var d=Ip;return Ip+=1,af===null&&(af=[]),zA(af,l,d)}function Op(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Xg(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function IT(l){var d=l._init;return d(l._payload)}function OT(l){function d(nt,Ze){if(l){var lt=nt.deletions;lt===null?(nt.deletions=[Ze],nt.flags|=16):lt.push(Ze)}}function m(nt,Ze){if(!l)return null;for(;Ze!==null;)d(nt,Ze),Ze=Ze.sibling;return null}function w(nt){for(var Ze=new Map;nt!==null;)nt.key!==null?Ze.set(nt.key,nt):Ze.set(nt.index,nt),nt=nt.sibling;return Ze}function T(nt,Ze){return nt=rl(nt,Ze),nt.index=0,nt.sibling=null,nt}function P(nt,Ze,lt){return nt.index=lt,l?(lt=nt.alternate,lt!==null?(lt=lt.index,lt<Ze?(nt.flags|=67108866,Ze):lt):(nt.flags|=67108866,Ze)):(nt.flags|=1048576,Ze)}function oe(nt){return l&&nt.alternate===null&&(nt.flags|=67108866),nt}function Ee(nt,Ze,lt,St){return Ze===null||Ze.tag!==6?(Ze=I1(lt,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,lt),Ze.return=nt,Ze)}function ze(nt,Ze,lt,St){var Qt=lt.type;return Qt===v?_t(nt,Ze,lt.props.children,St,lt.key):Ze!==null&&(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&IT(Qt)===Ze.type)?(Ze=T(Ze,lt.props),Op(Ze,lt),Ze.return=nt,Ze):(Ze=Dg(lt.type,lt.key,lt.props,null,nt.mode,St),Op(Ze,lt),Ze.return=nt,Ze)}function ut(nt,Ze,lt,St){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==lt.containerInfo||Ze.stateNode.implementation!==lt.implementation?(Ze=O1(lt,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,lt.children||[]),Ze.return=nt,Ze)}function _t(nt,Ze,lt,St,Qt){return Ze===null||Ze.tag!==7?(Ze=Nc(lt,nt.mode,St,Qt),Ze.return=nt,Ze):(Ze=T(Ze,lt),Ze.return=nt,Ze)}function kt(nt,Ze,lt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=I1(""+Ze,nt.mode,lt),Ze.return=nt,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case p:return lt=Dg(Ze.type,Ze.key,Ze.props,null,nt.mode,lt),Op(lt,Ze),lt.return=nt,lt;case g:return Ze=O1(Ze,nt.mode,lt),Ze.return=nt,Ze;case D:var St=Ze._init;return Ze=St(Ze._payload),kt(nt,Ze,lt)}if(he(Ze)||F(Ze))return Ze=Nc(Ze,nt.mode,lt,null),Ze.return=nt,Ze;if(typeof Ze.then=="function")return kt(nt,Yg(Ze),lt);if(Ze.$$typeof===E)return kt(nt,Fg(nt,Ze),lt);Xg(nt,Ze)}return null}function pt(nt,Ze,lt,St){var Qt=Ze!==null?Ze.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Qt!==null?null:Ee(nt,Ze,""+lt,St);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case p:return lt.key===Qt?ze(nt,Ze,lt,St):null;case g:return lt.key===Qt?ut(nt,Ze,lt,St):null;case D:return Qt=lt._init,lt=Qt(lt._payload),pt(nt,Ze,lt,St)}if(he(lt)||F(lt))return Qt!==null?null:_t(nt,Ze,lt,St,null);if(typeof lt.then=="function")return pt(nt,Ze,Yg(lt),St);if(lt.$$typeof===E)return pt(nt,Ze,Fg(nt,lt),St);Xg(nt,lt)}return null}function mt(nt,Ze,lt,St,Qt){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return nt=nt.get(lt)||null,Ee(Ze,nt,""+St,Qt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case p:return nt=nt.get(St.key===null?lt:St.key)||null,ze(Ze,nt,St,Qt);case g:return nt=nt.get(St.key===null?lt:St.key)||null,ut(Ze,nt,St,Qt);case D:var Bn=St._init;return St=Bn(St._payload),mt(nt,Ze,lt,St,Qt)}if(he(St)||F(St))return nt=nt.get(lt)||null,_t(Ze,nt,St,Qt,null);if(typeof St.then=="function")return mt(nt,Ze,lt,Yg(St),Qt);if(St.$$typeof===E)return mt(nt,Ze,lt,Fg(Ze,St),Qt);Xg(Ze,St)}return null}function bn(nt,Ze,lt,St){for(var Qt=null,Bn=null,on=Ze,mn=Ze=0,xa=null;on!==null&&mn<lt.length;mn++){on.index>mn?(xa=on,on=null):xa=on.sibling;var Qn=pt(nt,on,lt[mn],St);if(Qn===null){on===null&&(on=xa);break}l&&on&&Qn.alternate===null&&d(nt,on),Ze=P(Qn,Ze,mn),Bn===null?Qt=Qn:Bn.sibling=Qn,Bn=Qn,on=xa}if(mn===lt.length)return m(nt,on),er&&Oc(nt,mn),Qt;if(on===null){for(;mn<lt.length;mn++)on=kt(nt,lt[mn],St),on!==null&&(Ze=P(on,Ze,mn),Bn===null?Qt=on:Bn.sibling=on,Bn=on);return er&&Oc(nt,mn),Qt}for(on=w(on);mn<lt.length;mn++)xa=mt(on,nt,mn,lt[mn],St),xa!==null&&(l&&xa.alternate!==null&&on.delete(xa.key===null?mn:xa.key),Ze=P(xa,Ze,mn),Bn===null?Qt=xa:Bn.sibling=xa,Bn=xa);return l&&on.forEach(function(Au){return d(nt,Au)}),er&&Oc(nt,mn),Qt}function fn(nt,Ze,lt,St){if(lt==null)throw Error(r(151));for(var Qt=null,Bn=null,on=Ze,mn=Ze=0,xa=null,Qn=lt.next();on!==null&&!Qn.done;mn++,Qn=lt.next()){on.index>mn?(xa=on,on=null):xa=on.sibling;var Au=pt(nt,on,Qn.value,St);if(Au===null){on===null&&(on=xa);break}l&&on&&Au.alternate===null&&d(nt,on),Ze=P(Au,Ze,mn),Bn===null?Qt=Au:Bn.sibling=Au,Bn=Au,on=xa}if(Qn.done)return m(nt,on),er&&Oc(nt,mn),Qt;if(on===null){for(;!Qn.done;mn++,Qn=lt.next())Qn=kt(nt,Qn.value,St),Qn!==null&&(Ze=P(Qn,Ze,mn),Bn===null?Qt=Qn:Bn.sibling=Qn,Bn=Qn);return er&&Oc(nt,mn),Qt}for(on=w(on);!Qn.done;mn++,Qn=lt.next())Qn=mt(on,nt,mn,Qn.value,St),Qn!==null&&(l&&Qn.alternate!==null&&on.delete(Qn.key===null?mn:Qn.key),Ze=P(Qn,Ze,mn),Bn===null?Qt=Qn:Bn.sibling=Qn,Bn=Qn);return l&&on.forEach(function(E7){return d(nt,E7)}),er&&Oc(nt,mn),Qt}function gr(nt,Ze,lt,St){if(typeof lt=="object"&&lt!==null&&lt.type===v&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case p:e:{for(var Qt=lt.key;Ze!==null;){if(Ze.key===Qt){if(Qt=lt.type,Qt===v){if(Ze.tag===7){m(nt,Ze.sibling),St=T(Ze,lt.props.children),St.return=nt,nt=St;break e}}else if(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&IT(Qt)===Ze.type){m(nt,Ze.sibling),St=T(Ze,lt.props),Op(St,lt),St.return=nt,nt=St;break e}m(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}lt.type===v?(St=Nc(lt.props.children,nt.mode,St,lt.key),St.return=nt,nt=St):(St=Dg(lt.type,lt.key,lt.props,null,nt.mode,St),Op(St,lt),St.return=nt,nt=St)}return oe(nt);case g:e:{for(Qt=lt.key;Ze!==null;){if(Ze.key===Qt)if(Ze.tag===4&&Ze.stateNode.containerInfo===lt.containerInfo&&Ze.stateNode.implementation===lt.implementation){m(nt,Ze.sibling),St=T(Ze,lt.children||[]),St.return=nt,nt=St;break e}else{m(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}St=O1(lt,nt.mode,St),St.return=nt,nt=St}return oe(nt);case D:return Qt=lt._init,lt=Qt(lt._payload),gr(nt,Ze,lt,St)}if(he(lt))return bn(nt,Ze,lt,St);if(F(lt)){if(Qt=F(lt),typeof Qt!="function")throw Error(r(150));return lt=Qt.call(lt),fn(nt,Ze,lt,St)}if(typeof lt.then=="function")return gr(nt,Ze,Yg(lt),St);if(lt.$$typeof===E)return gr(nt,Ze,Fg(nt,lt),St);Xg(nt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Ze!==null&&Ze.tag===6?(m(nt,Ze.sibling),St=T(Ze,lt),St.return=nt,nt=St):(m(nt,Ze),St=I1(lt,nt.mode,St),St.return=nt,nt=St),oe(nt)):m(nt,Ze)}return function(nt,Ze,lt,St){try{Ip=0;var Qt=gr(nt,Ze,lt,St);return af=null,Qt}catch(on){if(on===xp||on===$g)throw on;var Bn=Mi(29,on,null,nt.mode);return Bn.lanes=St,Bn.return=nt,Bn}finally{}}}var of=OT(!0),DT=OT(!1),io=X(null),ms=null;function fu(l){var d=l.alternate;re(da,da.current&1),re(io,l),ms===null&&(d===null||ef.current!==null||d.memoizedState!==null)&&(ms=l)}function jT(l){if(l.tag===22){if(re(da,da.current),re(io,l),ms===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(ms=l)}}else hu()}function hu(){re(da,da.current),re(io,io.current)}function ul(l){Y(io),ms===l&&(ms=null),Y(da)}var da=X(0);function Jg(l){for(var d=l;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||ex(m)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function d_(l,d,m,w){d=l.memoizedState,m=m(w,d),m=m==null?d:f({},d,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var f_={enqueueSetState:function(l,d,m){l=l._reactInternals;var w=$i(),T=uu(w);T.payload=d,m!=null&&(T.callback=m),d=cu(l,T,w),d!==null&&(Bi(d,l,w),Ep(d,l,w))},enqueueReplaceState:function(l,d,m){l=l._reactInternals;var w=$i(),T=uu(w);T.tag=1,T.payload=d,m!=null&&(T.callback=m),d=cu(l,T,w),d!==null&&(Bi(d,l,w),Ep(d,l,w))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var m=$i(),w=uu(m);w.tag=2,d!=null&&(w.callback=d),d=cu(l,w,m),d!==null&&(Bi(d,l,m),Ep(d,l,m))}};function MT(l,d,m,w,T,P,oe){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(w,P,oe):d.prototype&&d.prototype.isPureReactComponent?!A(m,w)||!A(T,P):!0}function PT(l,d,m,w){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,w),d.state!==l&&f_.enqueueReplaceState(d,d.state,null)}function $c(l,d){var m=d;if("ref"in d){m={};for(var w in d)w!=="ref"&&(m[w]=d[w])}if(l=l.defaultProps){m===d&&(m=f({},m));for(var T in l)m[T]===void 0&&(m[T]=l[T])}return m}var Qg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof Wr=="object"&&typeof Wr.emit=="function"){Wr.emit("uncaughtException",l);return}console.error(l)};function FT(l){Qg(l)}function LT(l){console.error(l)}function $T(l){Qg(l)}function ey(l,d){try{var m=l.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(w){setTimeout(function(){throw w})}}function BT(l,d,m){try{var w=l.onCaughtError;w(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function h_(l,d,m){return m=uu(m),m.tag=3,m.payload={element:null},m.callback=function(){ey(l,d)},m}function zT(l){return l=uu(l),l.tag=3,l}function UT(l,d,m,w){var T=m.type.getDerivedStateFromError;if(typeof T=="function"){var P=w.value;l.payload=function(){return T(P)},l.callback=function(){BT(d,m,w)}}var oe=m.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(l.callback=function(){BT(d,m,w),typeof T!="function"&&(vu===null?vu=new Set([this]):vu.add(this));var Ee=w.stack;this.componentDidCatch(w.value,{componentStack:Ee!==null?Ee:""})})}function EB(l,d,m,w,T){if(m.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(d=m.alternate,d!==null&&vp(d,m,T,!0),m=io.current,m!==null){switch(m.tag){case 13:return ms===null?F_():m.alternate===null&&Vr===0&&(Vr=3),m.flags&=-257,m.flags|=65536,m.lanes=T,w===U1?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([w]):d.add(w),$_(l,w,T)),!1;case 22:return m.flags|=65536,w===U1?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([w])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([w]):m.add(w)),$_(l,w,T)),!1}throw Error(r(435,m.tag))}return $_(l,w,T),F_(),!1}if(er)return d=io.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,w!==M1&&(l=Error(r(422),{cause:w}),bp(cn(l,m)))):(w!==M1&&(d=Error(r(423),{cause:w}),bp(cn(d,m))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,w=cn(w,m),T=h_(l.stateNode,w,T),V1(l,T),Vr!==4&&(Vr=2)),!1;var P=Error(r(520),{cause:w});if(P=cn(P,m),$p===null?$p=[P]:$p.push(P),Vr!==4&&(Vr=2),d===null)return!0;w=cn(w,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,l=T&-T,m.lanes|=l,l=h_(m.stateNode,w,l),V1(m,l),!1;case 1:if(d=m.type,P=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(vu===null||!vu.has(P))))return m.flags|=65536,T&=-T,m.lanes|=T,T=zT(T),UT(T,l,m,w),V1(m,T),!1}m=m.return}while(m!==null);return!1}var qT=Error(r(461)),wa=!1;function Da(l,d,m,w){d.child=l===null?DT(d,null,m,w):of(d,l.child,m,w)}function HT(l,d,m,w,T){m=m.render;var P=d.ref;if("ref"in w){var oe={};for(var Ee in w)Ee!=="ref"&&(oe[Ee]=w[Ee])}else oe=w;return Pc(d),w=Y1(l,d,m,oe,P,T),Ee=X1(),l!==null&&!wa?(J1(l,d,T),cl(l,d,T)):(er&&Ee&&D1(d),d.flags|=1,Da(l,d,w,T),d.child)}function VT(l,d,m,w,T){if(l===null){var P=m.type;return typeof P=="function"&&!N1(P)&&P.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=P,GT(l,d,P,w,T)):(l=Dg(m.type,null,w,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(P=l.child,!__(l,T)){var oe=P.memoizedProps;if(m=m.compare,m=m!==null?m:A,m(oe,w)&&l.ref===d.ref)return cl(l,d,T)}return d.flags|=1,l=rl(P,w),l.ref=d.ref,l.return=d,d.child=l}function GT(l,d,m,w,T){if(l!==null){var P=l.memoizedProps;if(A(P,w)&&l.ref===d.ref)if(wa=!1,d.pendingProps=w=P,__(l,T))(l.flags&131072)!==0&&(wa=!0);else return d.lanes=l.lanes,cl(l,d,T)}return p_(l,d,m,w,T)}function WT(l,d,m){var w=d.pendingProps,T=w.children,P=l!==null?l.memoizedState:null;if(w.mode==="hidden"){if((d.flags&128)!==0){if(w=P!==null?P.baseLanes|m:m,l!==null){for(T=d.child=l.child,P=0;T!==null;)P=P|T.lanes|T.childLanes,T=T.sibling;d.childLanes=P&~w}else d.childLanes=0,d.child=null;return KT(l,d,w,m)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Lg(d,P!==null?P.cachePool:null),P!==null?GA(d,P):W1(),jT(d);else return d.lanes=d.childLanes=536870912,KT(l,d,P!==null?P.baseLanes|m:m,m)}else P!==null?(Lg(d,P.cachePool),GA(d,P),hu(),d.memoizedState=null):(l!==null&&Lg(d,null),W1(),hu());return Da(l,d,T,m),d.child}function KT(l,d,m,w){var T=z1();return T=T===null?null:{parent:ca._currentValue,pool:T},d.memoizedState={baseLanes:m,cachePool:T},l!==null&&Lg(d,null),W1(),jT(d),l!==null&&vp(l,d,w,!0),null}function ty(l,d){var m=d.ref;if(m===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(l===null||l.ref!==m)&&(d.flags|=4194816)}}function p_(l,d,m,w,T){return Pc(d),m=Y1(l,d,m,w,void 0,T),w=X1(),l!==null&&!wa?(J1(l,d,T),cl(l,d,T)):(er&&w&&D1(d),d.flags|=1,Da(l,d,m,T),d.child)}function ZT(l,d,m,w,T,P){return Pc(d),d.updateQueue=null,m=KA(d,w,m,T),WA(l),w=X1(),l!==null&&!wa?(J1(l,d,P),cl(l,d,P)):(er&&w&&D1(d),d.flags|=1,Da(l,d,m,P),d.child)}function YT(l,d,m,w,T){if(Pc(d),d.stateNode===null){var P=hs,oe=m.contextType;typeof oe=="object"&&oe!==null&&(P=qa(oe)),P=new m(w,P),d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=f_,d.stateNode=P,P._reactInternals=d,P=d.stateNode,P.props=w,P.state=d.memoizedState,P.refs={},q1(d),oe=m.contextType,P.context=typeof oe=="object"&&oe!==null?qa(oe):hs,P.state=d.memoizedState,oe=m.getDerivedStateFromProps,typeof oe=="function"&&(d_(d,m,oe,w),P.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(oe=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),oe!==P.state&&f_.enqueueReplaceState(P,P.state,null),kp(d,w,P,T),Cp(),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308),w=!0}else if(l===null){P=d.stateNode;var Ee=d.memoizedProps,ze=$c(m,Ee);P.props=ze;var ut=P.context,_t=m.contextType;oe=hs,typeof _t=="object"&&_t!==null&&(oe=qa(_t));var kt=m.getDerivedStateFromProps;_t=typeof kt=="function"||typeof P.getSnapshotBeforeUpdate=="function",Ee=d.pendingProps!==Ee,_t||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(Ee||ut!==oe)&&PT(d,P,w,oe),lu=!1;var pt=d.memoizedState;P.state=pt,kp(d,w,P,T),Cp(),ut=d.memoizedState,Ee||pt!==ut||lu?(typeof kt=="function"&&(d_(d,m,kt,w),ut=d.memoizedState),(ze=lu||MT(d,m,ze,w,pt,ut,oe))?(_t||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(d.flags|=4194308)):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=ut),P.props=w,P.state=ut,P.context=oe,w=ze):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{P=d.stateNode,H1(l,d),oe=d.memoizedProps,_t=$c(m,oe),P.props=_t,kt=d.pendingProps,pt=P.context,ut=m.contextType,ze=hs,typeof ut=="object"&&ut!==null&&(ze=qa(ut)),Ee=m.getDerivedStateFromProps,(ut=typeof Ee=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(oe!==kt||pt!==ze)&&PT(d,P,w,ze),lu=!1,pt=d.memoizedState,P.state=pt,kp(d,w,P,T),Cp();var mt=d.memoizedState;oe!==kt||pt!==mt||lu||l!==null&&l.dependencies!==null&&Pg(l.dependencies)?(typeof Ee=="function"&&(d_(d,m,Ee,w),mt=d.memoizedState),(_t=lu||MT(d,m,_t,w,pt,mt,ze)||l!==null&&l.dependencies!==null&&Pg(l.dependencies))?(ut||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(w,mt,ze),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(w,mt,ze)),typeof P.componentDidUpdate=="function"&&(d.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof P.componentDidUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=mt),P.props=w,P.state=mt,P.context=ze,w=_t):(typeof P.componentDidUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),w=!1)}return P=w,ty(l,d),w=(d.flags&128)!==0,P||w?(P=d.stateNode,m=w&&typeof m.getDerivedStateFromError!="function"?null:P.render(),d.flags|=1,l!==null&&w?(d.child=of(d,l.child,null,T),d.child=of(d,null,m,T)):Da(l,d,m,T),d.memoizedState=P.state,l=d.child):l=cl(l,d,T),l}function XT(l,d,m,w){return yp(),d.flags|=256,Da(l,d,m,w),d.child}var m_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function g_(l){return{baseLanes:l,cachePool:LA()}}function y_(l,d,m){return l=l!==null?l.childLanes&~m:0,d&&(l|=oo),l}function JT(l,d,m){var w=d.pendingProps,T=!1,P=(d.flags&128)!==0,oe;if((oe=P)||(oe=l!==null&&l.memoizedState===null?!1:(da.current&2)!==0),oe&&(T=!0,d.flags&=-129),oe=(d.flags&32)!==0,d.flags&=-33,l===null){if(er){if(T?fu(d):hu(),er){var Ee=Hr,ze;if(ze=Ee){e:{for(ze=Ee,Ee=ps;ze.nodeType!==8;){if(!Ee){Ee=null;break e}if(ze=Oo(ze.nextSibling),ze===null){Ee=null;break e}}Ee=ze}Ee!==null?(d.memoizedState={dehydrated:Ee,treeContext:Ic!==null?{id:al,overflow:il}:null,retryLane:536870912,hydrationErrors:null},ze=Mi(18,null,null,0),ze.stateNode=Ee,ze.return=d,d.child=ze,oi=d,Hr=null,ze=!0):ze=!1}ze||jc(d)}if(Ee=d.memoizedState,Ee!==null&&(Ee=Ee.dehydrated,Ee!==null))return ex(Ee)?d.lanes=32:d.lanes=536870912,null;ul(d)}return Ee=w.children,w=w.fallback,T?(hu(),T=d.mode,Ee=ny({mode:"hidden",children:Ee},T),w=Nc(w,T,m,null),Ee.return=d,w.return=d,Ee.sibling=w,d.child=Ee,T=d.child,T.memoizedState=g_(m),T.childLanes=y_(l,oe,m),d.memoizedState=m_,w):(fu(d),b_(d,Ee))}if(ze=l.memoizedState,ze!==null&&(Ee=ze.dehydrated,Ee!==null)){if(P)d.flags&256?(fu(d),d.flags&=-257,d=v_(l,d,m)):d.memoizedState!==null?(hu(),d.child=l.child,d.flags|=128,d=null):(hu(),T=w.fallback,Ee=d.mode,w=ny({mode:"visible",children:w.children},Ee),T=Nc(T,Ee,m,null),T.flags|=2,w.return=d,T.return=d,w.sibling=T,d.child=w,of(d,l.child,null,m),w=d.child,w.memoizedState=g_(m),w.childLanes=y_(l,oe,m),d.memoizedState=m_,d=T);else if(fu(d),ex(Ee)){if(oe=Ee.nextSibling&&Ee.nextSibling.dataset,oe)var ut=oe.dgst;oe=ut,w=Error(r(419)),w.stack="",w.digest=oe,bp({value:w,source:null,stack:null}),d=v_(l,d,m)}else if(wa||vp(l,d,m,!1),oe=(m&l.childLanes)!==0,wa||oe){if(oe=Ar,oe!==null&&(w=m&-m,w=(w&42)!==0?1:Ct(w),w=(w&(oe.suspendedLanes|m))!==0?0:w,w!==0&&w!==ze.retryLane))throw ze.retryLane=w,No(l,w),Bi(oe,l,w),qT;Ee.data==="$?"||F_(),d=v_(l,d,m)}else Ee.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=ze.treeContext,Hr=Oo(Ee.nextSibling),oi=d,er=!0,Dc=null,ps=!1,l!==null&&(ro[ao++]=al,ro[ao++]=il,ro[ao++]=Ic,al=l.id,il=l.overflow,Ic=d),d=b_(d,w.children),d.flags|=4096);return d}return T?(hu(),T=w.fallback,Ee=d.mode,ze=l.child,ut=ze.sibling,w=rl(ze,{mode:"hidden",children:w.children}),w.subtreeFlags=ze.subtreeFlags&65011712,ut!==null?T=rl(ut,T):(T=Nc(T,Ee,m,null),T.flags|=2),T.return=d,w.return=d,w.sibling=T,d.child=w,w=T,T=d.child,Ee=l.child.memoizedState,Ee===null?Ee=g_(m):(ze=Ee.cachePool,ze!==null?(ut=ca._currentValue,ze=ze.parent!==ut?{parent:ut,pool:ut}:ze):ze=LA(),Ee={baseLanes:Ee.baseLanes|m,cachePool:ze}),T.memoizedState=Ee,T.childLanes=y_(l,oe,m),d.memoizedState=m_,w):(fu(d),m=l.child,l=m.sibling,m=rl(m,{mode:"visible",children:w.children}),m.return=d,m.sibling=null,l!==null&&(oe=d.deletions,oe===null?(d.deletions=[l],d.flags|=16):oe.push(l)),d.child=m,d.memoizedState=null,m)}function b_(l,d){return d=ny({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function ny(l,d){return l=Mi(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function v_(l,d,m){return of(d,l.child,null,m),l=b_(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function QT(l,d,m){l.lanes|=d;var w=l.alternate;w!==null&&(w.lanes|=d),F1(l.return,d,m)}function w_(l,d,m,w,T){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:T}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=w,P.tail=m,P.tailMode=T)}function e3(l,d,m){var w=d.pendingProps,T=w.revealOrder,P=w.tail;if(Da(l,d,w.children,m),w=da.current,(w&2)!==0)w=w&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&QT(l,m,d);else if(l.tag===19)QT(l,m,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}w&=1}switch(re(da,w),T){case"forwards":for(m=d.child,T=null;m!==null;)l=m.alternate,l!==null&&Jg(l)===null&&(T=m),m=m.sibling;m=T,m===null?(T=d.child,d.child=null):(T=m.sibling,m.sibling=null),w_(d,!1,T,m,P);break;case"backwards":for(m=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&Jg(l)===null){d.child=T;break}l=T.sibling,T.sibling=m,m=T,T=l}w_(d,!0,m,null,P);break;case"together":w_(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function cl(l,d,m){if(l!==null&&(d.dependencies=l.dependencies),bu|=d.lanes,(m&d.childLanes)===0)if(l!==null){if(vp(l,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,m=rl(l,l.pendingProps),d.child=m,m.return=d;l.sibling!==null;)l=l.sibling,m=m.sibling=rl(l,l.pendingProps),m.return=d;m.sibling=null}return d.child}function __(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Pg(l)))}function CB(l,d,m){switch(d.tag){case 3:Ae(d,d.stateNode.containerInfo),su(d,ca,l.memoizedState.cache),yp();break;case 27:case 5:qe(d);break;case 4:Ae(d,d.stateNode.containerInfo);break;case 10:su(d,d.type,d.memoizedProps.value);break;case 13:var w=d.memoizedState;if(w!==null)return w.dehydrated!==null?(fu(d),d.flags|=128,null):(m&d.child.childLanes)!==0?JT(l,d,m):(fu(d),l=cl(l,d,m),l!==null?l.sibling:null);fu(d);break;case 19:var T=(l.flags&128)!==0;if(w=(m&d.childLanes)!==0,w||(vp(l,d,m,!1),w=(m&d.childLanes)!==0),T){if(w)return e3(l,d,m);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),re(da,da.current),w)break;return null;case 22:case 23:return d.lanes=0,WT(l,d,m);case 24:su(d,ca,l.memoizedState.cache)}return cl(l,d,m)}function t3(l,d,m){if(l!==null)if(l.memoizedProps!==d.pendingProps)wa=!0;else{if(!__(l,m)&&(d.flags&128)===0)return wa=!1,CB(l,d,m);wa=(l.flags&131072)!==0}else wa=!1,er&&(d.flags&1048576)!==0&&IA(d,Mg,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var w=d.elementType,T=w._init;if(w=T(w._payload),d.type=w,typeof w=="function")N1(w)?(l=$c(w,l),d.tag=1,d=YT(null,d,w,l,m)):(d.tag=0,d=p_(null,d,w,l,m));else{if(w!=null){if(T=w.$$typeof,T===C){d.tag=11,d=HT(null,d,w,l,m);break e}else if(T===N){d.tag=14,d=VT(null,d,w,l,m);break e}}throw d=L(w)||w,Error(r(306,d,""))}}return d;case 0:return p_(l,d,d.type,d.pendingProps,m);case 1:return w=d.type,T=$c(w,d.pendingProps),YT(l,d,w,T,m);case 3:e:{if(Ae(d,d.stateNode.containerInfo),l===null)throw Error(r(387));w=d.pendingProps;var P=d.memoizedState;T=P.element,H1(l,d),kp(d,w,null,m);var oe=d.memoizedState;if(w=oe.cache,su(d,ca,w),w!==P.cache&&L1(d,[ca],m,!0),Cp(),w=oe.element,P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:oe.cache},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){d=XT(l,d,w,m);break e}else if(w!==T){T=cn(Error(r(424)),d),bp(T),d=XT(l,d,w,m);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Hr=Oo(l.firstChild),oi=d,er=!0,Dc=null,ps=!0,m=DT(d,null,w,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(yp(),w===T){d=cl(l,d,m);break e}Da(l,d,w,m)}d=d.child}return d;case 26:return ty(l,d),l===null?(m=iR(d.type,null,d.pendingProps,null))?d.memoizedState=m:er||(m=d.type,l=d.pendingProps,w=gy(Me.current).createElement(m),w[pe]=d,w[de]=l,Ma(w,m,l),jn(w),d.stateNode=w):d.memoizedState=iR(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return qe(d),l===null&&er&&(w=d.stateNode=nR(d.type,d.pendingProps,Me.current),oi=d,ps=!0,T=Hr,xu(d.type)?(tx=T,Hr=Oo(w.firstChild)):Hr=T),Da(l,d,d.pendingProps.children,m),ty(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&er&&((T=w=Hr)&&(w=QB(w,d.type,d.pendingProps,ps),w!==null?(d.stateNode=w,oi=d,Hr=Oo(w.firstChild),ps=!1,T=!0):T=!1),T||jc(d)),qe(d),T=d.type,P=d.pendingProps,oe=l!==null?l.memoizedProps:null,w=P.children,X_(T,P)?w=null:oe!==null&&X_(T,oe)&&(d.flags|=32),d.memoizedState!==null&&(T=Y1(l,d,yB,null,null,m),Kp._currentValue=T),ty(l,d),Da(l,d,w,m),d.child;case 6:return l===null&&er&&((l=m=Hr)&&(m=e7(m,d.pendingProps,ps),m!==null?(d.stateNode=m,oi=d,Hr=null,l=!0):l=!1),l||jc(d)),null;case 13:return JT(l,d,m);case 4:return Ae(d,d.stateNode.containerInfo),w=d.pendingProps,l===null?d.child=of(d,null,w,m):Da(l,d,w,m),d.child;case 11:return HT(l,d,d.type,d.pendingProps,m);case 7:return Da(l,d,d.pendingProps,m),d.child;case 8:return Da(l,d,d.pendingProps.children,m),d.child;case 12:return Da(l,d,d.pendingProps.children,m),d.child;case 10:return w=d.pendingProps,su(d,d.type,w.value),Da(l,d,w.children,m),d.child;case 9:return T=d.type._context,w=d.pendingProps.children,Pc(d),T=qa(T),w=w(T),d.flags|=1,Da(l,d,w,m),d.child;case 14:return VT(l,d,d.type,d.pendingProps,m);case 15:return GT(l,d,d.type,d.pendingProps,m);case 19:return e3(l,d,m);case 31:return w=d.pendingProps,m=d.mode,w={mode:w.mode,children:w.children},l===null?(m=ny(w,m),m.ref=d.ref,d.child=m,m.return=d,d=m):(m=rl(l.child,w),m.ref=d.ref,d.child=m,m.return=d,d=m),d;case 22:return WT(l,d,m);case 24:return Pc(d),w=qa(ca),l===null?(T=z1(),T===null&&(T=Ar,P=$1(),T.pooledCache=P,P.refCount++,P!==null&&(T.pooledCacheLanes|=m),T=P),d.memoizedState={parent:w,cache:T},q1(d),su(d,ca,T)):((l.lanes&m)!==0&&(H1(l,d),kp(d,null,null,m),Cp()),T=l.memoizedState,P=d.memoizedState,T.parent!==w?(T={parent:w,cache:w},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),su(d,ca,w)):(w=P.cache,su(d,ca,w),w!==T.cache&&L1(d,[ca],m,!0))),Da(l,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function dl(l){l.flags|=4}function n3(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!cR(d)){if(d=io.current,d!==null&&((Kn&4194048)===Kn?ms!==null:(Kn&62914560)!==Kn&&(Kn&536870912)===0||d!==ms))throw Sp=U1,$A;l.flags|=8192}}function ry(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?M():536870912,l.lanes|=d,cf|=d)}function Dp(l,d){if(!er)switch(l.tailMode){case"hidden":d=l.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:w.sibling=null}}function Br(l){var d=l.alternate!==null&&l.alternate.child===l.child,m=0,w=0;if(d)for(var T=l.child;T!==null;)m|=T.lanes|T.childLanes,w|=T.subtreeFlags&65011712,w|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)m|=T.lanes|T.childLanes,w|=T.subtreeFlags,w|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=w,l.childLanes=m,d}function kB(l,d,m){var w=d.pendingProps;switch(j1(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(d),null;case 1:return Br(d),null;case 3:return m=d.stateNode,w=null,l!==null&&(w=l.memoizedState.cache),d.memoizedState.cache!==w&&(d.flags|=2048),sl(ca),Te(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(gp(d)?dl(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,jA())),Br(d),null;case 26:return m=d.memoizedState,l===null?(dl(d),m!==null?(Br(d),n3(d,m)):(Br(d),d.flags&=-16777217)):m?m!==l.memoizedState?(dl(d),Br(d),n3(d,m)):(Br(d),d.flags&=-16777217):(l.memoizedProps!==w&&dl(d),Br(d),d.flags&=-16777217),null;case 27:it(d),m=Me.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==w&&dl(d);else{if(!w){if(d.stateNode===null)throw Error(r(166));return Br(d),null}l=be.current,gp(d)?OA(d):(l=nR(T,w,m),d.stateNode=l,dl(d))}return Br(d),null;case 5:if(it(d),m=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==w&&dl(d);else{if(!w){if(d.stateNode===null)throw Error(r(166));return Br(d),null}if(l=be.current,gp(d))OA(d);else{switch(T=gy(Me.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof w.is=="string"?T.createElement("select",{is:w.is}):T.createElement("select"),w.multiple?l.multiple=!0:w.size&&(l.size=w.size);break;default:l=typeof w.is=="string"?T.createElement(m,{is:w.is}):T.createElement(m)}}l[pe]=d,l[de]=w;e:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break e;for(;T.sibling===null;){if(T.return===null||T.return===d)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;e:switch(Ma(l,m,w),m){case"button":case"input":case"select":case"textarea":l=!!w.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&dl(d)}}return Br(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==w&&dl(d);else{if(typeof w!="string"&&d.stateNode===null)throw Error(r(166));if(l=Me.current,gp(d)){if(l=d.stateNode,m=d.memoizedProps,w=null,T=oi,T!==null)switch(T.tag){case 27:case 5:w=T.memoizedProps}l[pe]=d,l=!!(l.nodeValue===m||w!==null&&w.suppressHydrationWarning===!0||Z3(l.nodeValue,m)),l||jc(d)}else l=gy(l).createTextNode(w),l[pe]=d,d.stateNode=l}return Br(d),null;case 13:if(w=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=gp(d),w!==null&&w.dehydrated!==null){if(l===null){if(!T)throw Error(r(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[pe]=d}else yp(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Br(d),T=!1}else T=jA(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(ul(d),d):(ul(d),null)}if(ul(d),(d.flags&128)!==0)return d.lanes=m,d;if(m=w!==null,l=l!==null&&l.memoizedState!==null,m){w=d.child,T=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(T=w.alternate.memoizedState.cachePool.pool);var P=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(P=w.memoizedState.cachePool.pool),P!==T&&(w.flags|=2048)}return m!==l&&m&&(d.child.flags|=8192),ry(d,d.updateQueue),Br(d),null;case 4:return Te(),l===null&&G_(d.stateNode.containerInfo),Br(d),null;case 10:return sl(d.type),Br(d),null;case 19:if(Y(da),T=d.memoizedState,T===null)return Br(d),null;if(w=(d.flags&128)!==0,P=T.rendering,P===null)if(w)Dp(T,!1);else{if(Vr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(P=Jg(l),P!==null){for(d.flags|=128,Dp(T,!1),l=P.updateQueue,d.updateQueue=l,ry(d,l),d.subtreeFlags=0,l=m,m=d.child;m!==null;)NA(m,l),m=m.sibling;return re(da,da.current&1|2),d.child}l=l.sibling}T.tail!==null&&ce()>oy&&(d.flags|=128,w=!0,Dp(T,!1),d.lanes=4194304)}else{if(!w)if(l=Jg(P),l!==null){if(d.flags|=128,w=!0,l=l.updateQueue,d.updateQueue=l,ry(d,l),Dp(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!er)return Br(d),null}else 2*ce()-T.renderingStartTime>oy&&m!==536870912&&(d.flags|=128,w=!0,Dp(T,!1),d.lanes=4194304);T.isBackwards?(P.sibling=d.child,d.child=P):(l=T.last,l!==null?l.sibling=P:d.child=P,T.last=P)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=ce(),d.sibling=null,l=da.current,re(da,w?l&1|2:l&1),d):(Br(d),null);case 22:case 23:return ul(d),K1(),w=d.memoizedState!==null,l!==null?l.memoizedState!==null!==w&&(d.flags|=8192):w&&(d.flags|=8192),w?(m&536870912)!==0&&(d.flags&128)===0&&(Br(d),d.subtreeFlags&6&&(d.flags|=8192)):Br(d),m=d.updateQueue,m!==null&&ry(d,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==m&&(d.flags|=2048),l!==null&&Y(Fc),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),sl(ca),Br(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function AB(l,d){switch(j1(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return sl(ca),Te(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return it(d),null;case 13:if(ul(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));yp()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Y(da),null;case 4:return Te(),null;case 10:return sl(d.type),null;case 22:case 23:return ul(d),K1(),l!==null&&Y(Fc),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return sl(ca),null;case 25:return null;default:return null}}function r3(l,d){switch(j1(d),d.tag){case 3:sl(ca),Te();break;case 26:case 27:case 5:it(d);break;case 4:Te();break;case 13:ul(d);break;case 19:Y(da);break;case 10:sl(d.type);break;case 22:case 23:ul(d),K1(),l!==null&&Y(Fc);break;case 24:sl(ca)}}function jp(l,d){try{var m=d.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var T=w.next;m=T;do{if((m.tag&l)===l){w=void 0;var P=m.create,oe=m.inst;w=P(),oe.destroy=w}m=m.next}while(m!==T)}}catch(Ee){Sr(d,d.return,Ee)}}function pu(l,d,m){try{var w=d.updateQueue,T=w!==null?w.lastEffect:null;if(T!==null){var P=T.next;w=P;do{if((w.tag&l)===l){var oe=w.inst,Ee=oe.destroy;if(Ee!==void 0){oe.destroy=void 0,T=d;var ze=m,ut=Ee;try{ut()}catch(_t){Sr(T,ze,_t)}}}w=w.next}while(w!==P)}}catch(_t){Sr(d,d.return,_t)}}function a3(l){var d=l.updateQueue;if(d!==null){var m=l.stateNode;try{VA(d,m)}catch(w){Sr(l,l.return,w)}}}function i3(l,d,m){m.props=$c(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(w){Sr(l,d,w)}}function Mp(l,d){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var w=l.stateNode;break;case 30:w=l.stateNode;break;default:w=l.stateNode}typeof m=="function"?l.refCleanup=m(w):m.current=w}}catch(T){Sr(l,d,T)}}function gs(l,d){var m=l.ref,w=l.refCleanup;if(m!==null)if(typeof w=="function")try{w()}catch(T){Sr(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(T){Sr(l,d,T)}else m.current=null}function o3(l){var d=l.type,m=l.memoizedProps,w=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&w.focus();break e;case"img":m.src?w.src=m.src:m.srcSet&&(w.srcset=m.srcSet)}}catch(T){Sr(l,l.return,T)}}function x_(l,d,m){try{var w=l.stateNode;KB(w,l.type,m,d),w[de]=d}catch(T){Sr(l,l.return,T)}}function s3(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&xu(l.type)||l.tag===4}function S_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||s3(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&xu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function E_(l,d,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(l),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=my));else if(w!==4&&(w===27&&xu(l.type)&&(m=l.stateNode,d=null),l=l.child,l!==null))for(E_(l,d,m),l=l.sibling;l!==null;)E_(l,d,m),l=l.sibling}function ay(l,d,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,d?m.insertBefore(l,d):m.appendChild(l);else if(w!==4&&(w===27&&xu(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(ay(l,d,m),l=l.sibling;l!==null;)ay(l,d,m),l=l.sibling}function l3(l){var d=l.stateNode,m=l.memoizedProps;try{for(var w=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);Ma(d,w,m),d[pe]=l,d[de]=m}catch(P){Sr(l,l.return,P)}}var fl=!1,Jr=!1,C_=!1,u3=typeof WeakSet=="function"?WeakSet:Set,_a=null;function TB(l,d){if(l=l.containerInfo,Z_=xy,l=ue(l),_e(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var T=w.anchorOffset,P=w.focusNode;w=w.focusOffset;try{m.nodeType,P.nodeType}catch{m=null;break e}var oe=0,Ee=-1,ze=-1,ut=0,_t=0,kt=l,pt=null;t:for(;;){for(var mt;kt!==m||T!==0&&kt.nodeType!==3||(Ee=oe+T),kt!==P||w!==0&&kt.nodeType!==3||(ze=oe+w),kt.nodeType===3&&(oe+=kt.nodeValue.length),(mt=kt.firstChild)!==null;)pt=kt,kt=mt;for(;;){if(kt===l)break t;if(pt===m&&++ut===T&&(Ee=oe),pt===P&&++_t===w&&(ze=oe),(mt=kt.nextSibling)!==null)break;kt=pt,pt=kt.parentNode}kt=mt}m=Ee===-1||ze===-1?null:{start:Ee,end:ze}}else m=null}m=m||{start:0,end:0}}else m=null;for(Y_={focusedElem:l,selectionRange:m},xy=!1,_a=d;_a!==null;)if(d=_a,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,_a=l;else for(;_a!==null;){switch(d=_a,P=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&P!==null){l=void 0,m=d,T=P.memoizedProps,P=P.memoizedState,w=m.stateNode;try{var bn=$c(m.type,T,m.elementType===m.type);l=w.getSnapshotBeforeUpdate(bn,P),w.__reactInternalSnapshotBeforeUpdate=l}catch(fn){Sr(m,m.return,fn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,m=l.nodeType,m===9)Q_(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Q_(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,_a=l;break}_a=d.return}}function c3(l,d,m){var w=m.flags;switch(m.tag){case 0:case 11:case 15:mu(l,m),w&4&&jp(5,m);break;case 1:if(mu(l,m),w&4)if(l=m.stateNode,d===null)try{l.componentDidMount()}catch(oe){Sr(m,m.return,oe)}else{var T=$c(m.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(oe){Sr(m,m.return,oe)}}w&64&&a3(m),w&512&&Mp(m,m.return);break;case 3:if(mu(l,m),w&64&&(l=m.updateQueue,l!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{VA(l,d)}catch(oe){Sr(m,m.return,oe)}}break;case 27:d===null&&w&4&&l3(m);case 26:case 5:mu(l,m),d===null&&w&4&&o3(m),w&512&&Mp(m,m.return);break;case 12:mu(l,m);break;case 13:mu(l,m),w&4&&h3(l,m),w&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=FB.bind(null,m),t7(l,m))));break;case 22:if(w=m.memoizedState!==null||fl,!w){d=d!==null&&d.memoizedState!==null||Jr,T=fl;var P=Jr;fl=w,(Jr=d)&&!P?gu(l,m,(m.subtreeFlags&8772)!==0):mu(l,m),fl=T,Jr=P}break;case 30:break;default:mu(l,m)}}function d3(l){var d=l.alternate;d!==null&&(l.alternate=null,d3(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Xt(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Pr=null,yi=!1;function hl(l,d,m){for(m=m.child;m!==null;)f3(l,d,m),m=m.sibling}function f3(l,d,m){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Et,m)}catch{}switch(m.tag){case 26:Jr||gs(m,d),hl(l,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Jr||gs(m,d);var w=Pr,T=yi;xu(m.type)&&(Pr=m.stateNode,yi=!1),hl(l,d,m),Hp(m.stateNode),Pr=w,yi=T;break;case 5:Jr||gs(m,d);case 6:if(w=Pr,T=yi,Pr=null,hl(l,d,m),Pr=w,yi=T,Pr!==null)if(yi)try{(Pr.nodeType===9?Pr.body:Pr.nodeName==="HTML"?Pr.ownerDocument.body:Pr).removeChild(m.stateNode)}catch(P){Sr(m,d,P)}else try{Pr.removeChild(m.stateNode)}catch(P){Sr(m,d,P)}break;case 18:Pr!==null&&(yi?(l=Pr,eR(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),Jp(l)):eR(Pr,m.stateNode));break;case 4:w=Pr,T=yi,Pr=m.stateNode.containerInfo,yi=!0,hl(l,d,m),Pr=w,yi=T;break;case 0:case 11:case 14:case 15:Jr||pu(2,m,d),Jr||pu(4,m,d),hl(l,d,m);break;case 1:Jr||(gs(m,d),w=m.stateNode,typeof w.componentWillUnmount=="function"&&i3(m,d,w)),hl(l,d,m);break;case 21:hl(l,d,m);break;case 22:Jr=(w=Jr)||m.memoizedState!==null,hl(l,d,m),Jr=w;break;default:hl(l,d,m)}}function h3(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Jp(l)}catch(m){Sr(d,d.return,m)}}function RB(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new u3),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new u3),d;default:throw Error(r(435,l.tag))}}function k_(l,d){var m=RB(l);d.forEach(function(w){var T=LB.bind(null,l,w);m.has(w)||(m.add(w),w.then(T,T))})}function Pi(l,d){var m=d.deletions;if(m!==null)for(var w=0;w<m.length;w++){var T=m[w],P=l,oe=d,Ee=oe;e:for(;Ee!==null;){switch(Ee.tag){case 27:if(xu(Ee.type)){Pr=Ee.stateNode,yi=!1;break e}break;case 5:Pr=Ee.stateNode,yi=!1;break e;case 3:case 4:Pr=Ee.stateNode.containerInfo,yi=!0;break e}Ee=Ee.return}if(Pr===null)throw Error(r(160));f3(P,oe,T),Pr=null,yi=!1,P=T.alternate,P!==null&&(P.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)p3(d,l),d=d.sibling}var Io=null;function p3(l,d){var m=l.alternate,w=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Pi(d,l),Fi(l),w&4&&(pu(3,l,l.return),jp(3,l),pu(5,l,l.return));break;case 1:Pi(d,l),Fi(l),w&512&&(Jr||m===null||gs(m,m.return)),w&64&&fl&&(l=l.updateQueue,l!==null&&(w=l.callbacks,w!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?w:m.concat(w))));break;case 26:var T=Io;if(Pi(d,l),Fi(l),w&512&&(Jr||m===null||gs(m,m.return)),w&4){var P=m!==null?m.memoizedState:null;if(w=l.memoizedState,m===null)if(w===null)if(l.stateNode===null){e:{w=l.type,m=l.memoizedProps,T=T.ownerDocument||T;t:switch(w){case"title":P=T.getElementsByTagName("title")[0],(!P||P[Vt]||P[pe]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=T.createElement(w),T.head.insertBefore(P,T.querySelector("head > title"))),Ma(P,w,m),P[pe]=l,jn(P),w=P;break e;case"link":var oe=lR("link","href",T).get(w+(m.href||""));if(oe){for(var Ee=0;Ee<oe.length;Ee++)if(P=oe[Ee],P.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&P.getAttribute("rel")===(m.rel==null?null:m.rel)&&P.getAttribute("title")===(m.title==null?null:m.title)&&P.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){oe.splice(Ee,1);break t}}P=T.createElement(w),Ma(P,w,m),T.head.appendChild(P);break;case"meta":if(oe=lR("meta","content",T).get(w+(m.content||""))){for(Ee=0;Ee<oe.length;Ee++)if(P=oe[Ee],P.getAttribute("content")===(m.content==null?null:""+m.content)&&P.getAttribute("name")===(m.name==null?null:m.name)&&P.getAttribute("property")===(m.property==null?null:m.property)&&P.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&P.getAttribute("charset")===(m.charSet==null?null:m.charSet)){oe.splice(Ee,1);break t}}P=T.createElement(w),Ma(P,w,m),T.head.appendChild(P);break;default:throw Error(r(468,w))}P[pe]=l,jn(P),w=P}l.stateNode=w}else uR(T,l.type,l.stateNode);else l.stateNode=sR(T,w,l.memoizedProps);else P!==w?(P===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):P.count--,w===null?uR(T,l.type,l.stateNode):sR(T,w,l.memoizedProps)):w===null&&l.stateNode!==null&&x_(l,l.memoizedProps,m.memoizedProps)}break;case 27:Pi(d,l),Fi(l),w&512&&(Jr||m===null||gs(m,m.return)),m!==null&&w&4&&x_(l,l.memoizedProps,m.memoizedProps);break;case 5:if(Pi(d,l),Fi(l),w&512&&(Jr||m===null||gs(m,m.return)),l.flags&32){T=l.stateNode;try{Xl(T,"")}catch(mt){Sr(l,l.return,mt)}}w&4&&l.stateNode!=null&&(T=l.memoizedProps,x_(l,T,m!==null?m.memoizedProps:T)),w&1024&&(C_=!0);break;case 6:if(Pi(d,l),Fi(l),w&4){if(l.stateNode===null)throw Error(r(162));w=l.memoizedProps,m=l.stateNode;try{m.nodeValue=w}catch(mt){Sr(l,l.return,mt)}}break;case 3:if(vy=null,T=Io,Io=yy(d.containerInfo),Pi(d,l),Io=T,Fi(l),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Jp(d.containerInfo)}catch(mt){Sr(l,l.return,mt)}C_&&(C_=!1,m3(l));break;case 4:w=Io,Io=yy(l.stateNode.containerInfo),Pi(d,l),Fi(l),Io=w;break;case 12:Pi(d,l),Fi(l);break;case 13:Pi(d,l),Fi(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(O_=ce()),w&4&&(w=l.updateQueue,w!==null&&(l.updateQueue=null,k_(l,w)));break;case 22:T=l.memoizedState!==null;var ze=m!==null&&m.memoizedState!==null,ut=fl,_t=Jr;if(fl=ut||T,Jr=_t||ze,Pi(d,l),Jr=_t,fl=ut,Fi(l),w&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(m===null||ze||fl||Jr||Bc(l)),m=null,d=l;;){if(d.tag===5||d.tag===26){if(m===null){ze=m=d;try{if(P=ze.stateNode,T)oe=P.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{Ee=ze.stateNode;var kt=ze.memoizedProps.style,pt=kt!=null&&kt.hasOwnProperty("display")?kt.display:null;Ee.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(mt){Sr(ze,ze.return,mt)}}}else if(d.tag===6){if(m===null){ze=d;try{ze.stateNode.nodeValue=T?"":ze.memoizedProps}catch(mt){Sr(ze,ze.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}w&4&&(w=l.updateQueue,w!==null&&(m=w.retryQueue,m!==null&&(w.retryQueue=null,k_(l,m))));break;case 19:Pi(d,l),Fi(l),w&4&&(w=l.updateQueue,w!==null&&(l.updateQueue=null,k_(l,w)));break;case 30:break;case 21:break;default:Pi(d,l),Fi(l)}}function Fi(l){var d=l.flags;if(d&2){try{for(var m,w=l.return;w!==null;){if(s3(w)){m=w;break}w=w.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var T=m.stateNode,P=S_(l);ay(l,P,T);break;case 5:var oe=m.stateNode;m.flags&32&&(Xl(oe,""),m.flags&=-33);var Ee=S_(l);ay(l,Ee,oe);break;case 3:case 4:var ze=m.stateNode.containerInfo,ut=S_(l);E_(l,ut,ze);break;default:throw Error(r(161))}}catch(_t){Sr(l,l.return,_t)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function m3(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;m3(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function mu(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)c3(l,d.alternate,d),d=d.sibling}function Bc(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:pu(4,d,d.return),Bc(d);break;case 1:gs(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&i3(d,d.return,m),Bc(d);break;case 27:Hp(d.stateNode);case 26:case 5:gs(d,d.return),Bc(d);break;case 22:d.memoizedState===null&&Bc(d);break;case 30:Bc(d);break;default:Bc(d)}l=l.sibling}}function gu(l,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var w=d.alternate,T=l,P=d,oe=P.flags;switch(P.tag){case 0:case 11:case 15:gu(T,P,m),jp(4,P);break;case 1:if(gu(T,P,m),w=P,T=w.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ut){Sr(w,w.return,ut)}if(w=P,T=w.updateQueue,T!==null){var Ee=w.stateNode;try{var ze=T.shared.hiddenCallbacks;if(ze!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ze.length;T++)HA(ze[T],Ee)}catch(ut){Sr(w,w.return,ut)}}m&&oe&64&&a3(P),Mp(P,P.return);break;case 27:l3(P);case 26:case 5:gu(T,P,m),m&&w===null&&oe&4&&o3(P),Mp(P,P.return);break;case 12:gu(T,P,m);break;case 13:gu(T,P,m),m&&oe&4&&h3(T,P);break;case 22:P.memoizedState===null&&gu(T,P,m),Mp(P,P.return);break;case 30:break;default:gu(T,P,m)}d=d.sibling}}function A_(l,d){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&wp(m))}function T_(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&wp(l))}function ys(l,d,m,w){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)g3(l,d,m,w),d=d.sibling}function g3(l,d,m,w){var T=d.flags;switch(d.tag){case 0:case 11:case 15:ys(l,d,m,w),T&2048&&jp(9,d);break;case 1:ys(l,d,m,w);break;case 3:ys(l,d,m,w),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&wp(l)));break;case 12:if(T&2048){ys(l,d,m,w),l=d.stateNode;try{var P=d.memoizedProps,oe=P.id,Ee=P.onPostCommit;typeof Ee=="function"&&Ee(oe,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ze){Sr(d,d.return,ze)}}else ys(l,d,m,w);break;case 13:ys(l,d,m,w);break;case 23:break;case 22:P=d.stateNode,oe=d.alternate,d.memoizedState!==null?P._visibility&2?ys(l,d,m,w):Pp(l,d):P._visibility&2?ys(l,d,m,w):(P._visibility|=2,sf(l,d,m,w,(d.subtreeFlags&10256)!==0)),T&2048&&A_(oe,d);break;case 24:ys(l,d,m,w),T&2048&&T_(d.alternate,d);break;default:ys(l,d,m,w)}}function sf(l,d,m,w,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var P=l,oe=d,Ee=m,ze=w,ut=oe.flags;switch(oe.tag){case 0:case 11:case 15:sf(P,oe,Ee,ze,T),jp(8,oe);break;case 23:break;case 22:var _t=oe.stateNode;oe.memoizedState!==null?_t._visibility&2?sf(P,oe,Ee,ze,T):Pp(P,oe):(_t._visibility|=2,sf(P,oe,Ee,ze,T)),T&&ut&2048&&A_(oe.alternate,oe);break;case 24:sf(P,oe,Ee,ze,T),T&&ut&2048&&T_(oe.alternate,oe);break;default:sf(P,oe,Ee,ze,T)}d=d.sibling}}function Pp(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=l,w=d,T=w.flags;switch(w.tag){case 22:Pp(m,w),T&2048&&A_(w.alternate,w);break;case 24:Pp(m,w),T&2048&&T_(w.alternate,w);break;default:Pp(m,w)}d=d.sibling}}var Fp=8192;function lf(l){if(l.subtreeFlags&Fp)for(l=l.child;l!==null;)y3(l),l=l.sibling}function y3(l){switch(l.tag){case 26:lf(l),l.flags&Fp&&l.memoizedState!==null&&p7(Io,l.memoizedState,l.memoizedProps);break;case 5:lf(l);break;case 3:case 4:var d=Io;Io=yy(l.stateNode.containerInfo),lf(l),Io=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=Fp,Fp=16777216,lf(l),Fp=d):lf(l));break;default:lf(l)}}function b3(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Lp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var w=d[m];_a=w,w3(w,l)}b3(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)v3(l),l=l.sibling}function v3(l){switch(l.tag){case 0:case 11:case 15:Lp(l),l.flags&2048&&pu(9,l,l.return);break;case 3:Lp(l);break;case 12:Lp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,iy(l)):Lp(l);break;default:Lp(l)}}function iy(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var w=d[m];_a=w,w3(w,l)}b3(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:pu(8,d,d.return),iy(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,iy(d));break;default:iy(d)}l=l.sibling}}function w3(l,d){for(;_a!==null;){var m=_a;switch(m.tag){case 0:case 11:case 15:pu(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var w=m.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:wp(m.memoizedState.cache)}if(w=m.child,w!==null)w.return=m,_a=w;else e:for(m=l;_a!==null;){w=_a;var T=w.sibling,P=w.return;if(d3(w),w===m){_a=null;break e}if(T!==null){T.return=P,_a=T;break e}_a=P}}}var NB={getCacheForType:function(l){var d=qa(ca),m=d.data.get(l);return m===void 0&&(m=l(),d.data.set(l,m)),m}},IB=typeof WeakMap=="function"?WeakMap:Map,or=0,Ar=null,qn=null,Kn=0,sr=0,Li=null,yu=!1,uf=!1,R_=!1,pl=0,Vr=0,bu=0,zc=0,N_=0,oo=0,cf=0,$p=null,bi=null,I_=!1,O_=0,oy=1/0,sy=null,vu=null,ja=0,wu=null,df=null,ff=0,D_=0,j_=null,_3=null,Bp=0,M_=null;function $i(){if((or&2)!==0&&Kn!==0)return Kn&-Kn;if(ie.T!==null){var l=Jd;return l!==0?l:U_()}return q()}function x3(){oo===0&&(oo=(Kn&536870912)===0||er?yt():536870912);var l=io.current;return l!==null&&(l.flags|=32),oo}function Bi(l,d,m){(l===Ar&&(sr===2||sr===9)||l.cancelPendingCommit!==null)&&(hf(l,0),_u(l,Kn,oo,!1)),et(l,m),((or&2)===0||l!==Ar)&&(l===Ar&&((or&2)===0&&(zc|=m),Vr===4&&_u(l,Kn,oo,!1)),bs(l))}function S3(l,d,m){if((or&6)!==0)throw Error(r(327));var w=!m&&(d&124)===0&&(d&l.expiredLanes)===0||le(l,d),T=w?jB(l,d):L_(l,d,!0),P=w;do{if(T===0){uf&&!w&&_u(l,d,0,!1);break}else{if(m=l.current.alternate,P&&!OB(m)){T=L_(l,d,!1),P=!1;continue}if(T===2){if(P=d,l.errorRecoveryDisabledLanes&P)var oe=0;else oe=l.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){d=oe;e:{var Ee=l;T=$p;var ze=Ee.current.memoizedState.isDehydrated;if(ze&&(hf(Ee,oe).flags|=256),oe=L_(Ee,oe,!1),oe!==2){if(R_&&!ze){Ee.errorRecoveryDisabledLanes|=P,zc|=P,T=4;break e}P=bi,bi=T,P!==null&&(bi===null?bi=P:bi.push.apply(bi,P))}T=oe}if(P=!1,T!==2)continue}}if(T===1){hf(l,0),_u(l,d,0,!0);break}e:{switch(w=l,P=T,P){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:_u(w,d,oo,!yu);break e;case 2:bi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(T=O_+300-ce(),10<T)){if(_u(w,d,oo,!yu),ke(w,0,!0)!==0)break e;w.timeoutHandle=J3(E3.bind(null,w,m,bi,sy,I_,d,oo,zc,cf,yu,P,2,-0,0),T);break e}E3(w,m,bi,sy,I_,d,oo,zc,cf,yu,P,0,-0,0)}}break}while(!0);bs(l)}function E3(l,d,m,w,T,P,oe,Ee,ze,ut,_t,kt,pt,mt){if(l.timeoutHandle=-1,kt=d.subtreeFlags,(kt&8192||(kt&16785408)===16785408)&&(Wp={stylesheets:null,count:0,unsuspend:h7},y3(d),kt=m7(),kt!==null)){l.cancelPendingCommit=kt(I3.bind(null,l,d,P,m,w,T,oe,Ee,ze,_t,1,pt,mt)),_u(l,P,oe,!ut);return}I3(l,d,P,m,w,T,oe,Ee,ze)}function OB(l){for(var d=l;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var w=0;w<m.length;w++){var T=m[w],P=T.getSnapshot;T=T.value;try{if(!Ua(P(),T))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function _u(l,d,m,w){d&=~N_,d&=~zc,l.suspendedLanes|=d,l.pingedLanes&=~d,w&&(l.warmLanes|=d),w=l.expirationTimes;for(var T=d;0<T;){var P=31-Ut(T),oe=1<<P;w[P]=-1,T&=~oe}m!==0&&De(l,m,d)}function ly(){return(or&6)===0?(zp(0),!1):!0}function P_(){if(qn!==null){if(sr===0)var l=qn.return;else l=qn,ol=Mc=null,Q1(l),af=null,Ip=0,l=qn;for(;l!==null;)r3(l.alternate,l),l=l.return;qn=null}}function hf(l,d){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,YB(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),P_(),Ar=l,qn=m=rl(l.current,null),Kn=d,sr=0,Li=null,yu=!1,uf=le(l,d),R_=!1,cf=oo=N_=zc=bu=Vr=0,bi=$p=null,I_=!1,(d&8)!==0&&(d|=d&32);var w=l.entangledLanes;if(w!==0)for(l=l.entanglements,w&=d;0<w;){var T=31-Ut(w),P=1<<T;d|=l[T],w&=~P}return pl=d,yn(),m}function C3(l,d){Ln=null,ie.H=Zg,d===xp||d===$g?(d=UA(),sr=3):d===$A?(d=UA(),sr=4):sr=d===qT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Li=d,qn===null&&(Vr=1,ey(l,cn(d,l.current)))}function k3(){var l=ie.H;return ie.H=Zg,l===null?Zg:l}function A3(){var l=ie.A;return ie.A=NB,l}function F_(){Vr=4,yu||(Kn&4194048)!==Kn&&io.current!==null||(uf=!0),(bu&134217727)===0&&(zc&134217727)===0||Ar===null||_u(Ar,Kn,oo,!1)}function L_(l,d,m){var w=or;or|=2;var T=k3(),P=A3();(Ar!==l||Kn!==d)&&(sy=null,hf(l,d)),d=!1;var oe=Vr;e:do try{if(sr!==0&&qn!==null){var Ee=qn,ze=Li;switch(sr){case 8:P_(),oe=6;break e;case 3:case 2:case 9:case 6:io.current===null&&(d=!0);var ut=sr;if(sr=0,Li=null,pf(l,Ee,ze,ut),m&&uf){oe=0;break e}break;default:ut=sr,sr=0,Li=null,pf(l,Ee,ze,ut)}}DB(),oe=Vr;break}catch(_t){C3(l,_t)}while(!0);return d&&l.shellSuspendCounter++,ol=Mc=null,or=w,ie.H=T,ie.A=P,qn===null&&(Ar=null,Kn=0,yn()),oe}function DB(){for(;qn!==null;)T3(qn)}function jB(l,d){var m=or;or|=2;var w=k3(),T=A3();Ar!==l||Kn!==d?(sy=null,oy=ce()+500,hf(l,d)):uf=le(l,d);e:do try{if(sr!==0&&qn!==null){d=qn;var P=Li;t:switch(sr){case 1:sr=0,Li=null,pf(l,d,P,1);break;case 2:case 9:if(BA(P)){sr=0,Li=null,R3(d);break}d=function(){sr!==2&&sr!==9||Ar!==l||(sr=7),bs(l)},P.then(d,d);break e;case 3:sr=7;break e;case 4:sr=5;break e;case 7:BA(P)?(sr=0,Li=null,R3(d)):(sr=0,Li=null,pf(l,d,P,7));break;case 5:var oe=null;switch(qn.tag){case 26:oe=qn.memoizedState;case 5:case 27:var Ee=qn;if(!oe||cR(oe)){sr=0,Li=null;var ze=Ee.sibling;if(ze!==null)qn=ze;else{var ut=Ee.return;ut!==null?(qn=ut,uy(ut)):qn=null}break t}}sr=0,Li=null,pf(l,d,P,5);break;case 6:sr=0,Li=null,pf(l,d,P,6);break;case 8:P_(),Vr=6;break e;default:throw Error(r(462))}}MB();break}catch(_t){C3(l,_t)}while(!0);return ol=Mc=null,ie.H=w,ie.A=T,or=m,qn!==null?0:(Ar=null,Kn=0,yn(),Vr)}function MB(){for(;qn!==null&&!Ce();)T3(qn)}function T3(l){var d=t3(l.alternate,l,pl);l.memoizedProps=l.pendingProps,d===null?uy(l):qn=d}function R3(l){var d=l,m=d.alternate;switch(d.tag){case 15:case 0:d=ZT(m,d,d.pendingProps,d.type,void 0,Kn);break;case 11:d=ZT(m,d,d.pendingProps,d.type.render,d.ref,Kn);break;case 5:Q1(d);default:r3(m,d),d=qn=NA(d,pl),d=t3(m,d,pl)}l.memoizedProps=l.pendingProps,d===null?uy(l):qn=d}function pf(l,d,m,w){ol=Mc=null,Q1(d),af=null,Ip=0;var T=d.return;try{if(EB(l,T,d,m,Kn)){Vr=1,ey(l,cn(m,l.current)),qn=null;return}}catch(P){if(T!==null)throw qn=T,P;Vr=1,ey(l,cn(m,l.current)),qn=null;return}d.flags&32768?(er||w===1?l=!0:uf||(Kn&536870912)!==0?l=!1:(yu=l=!0,(w===2||w===9||w===3||w===6)&&(w=io.current,w!==null&&w.tag===13&&(w.flags|=16384))),N3(d,l)):uy(d)}function uy(l){var d=l;do{if((d.flags&32768)!==0){N3(d,yu);return}l=d.return;var m=kB(d.alternate,d,pl);if(m!==null){qn=m;return}if(d=d.sibling,d!==null){qn=d;return}qn=d=l}while(d!==null);Vr===0&&(Vr=5)}function N3(l,d){do{var m=AB(l.alternate,l);if(m!==null){m.flags&=32767,qn=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(l=l.sibling,l!==null)){qn=l;return}qn=l=m}while(l!==null);Vr=6,qn=null}function I3(l,d,m,w,T,P,oe,Ee,ze){l.cancelPendingCommit=null;do cy();while(ja!==0);if((or&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(P=d.lanes|d.childLanes,P|=Oa,me(l,m,P,oe,Ee,ze),l===Ar&&(qn=Ar=null,Kn=0),df=d,wu=l,ff=m,D_=P,j_=T,_3=w,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,$B(Le,function(){return P3(),null})):(l.callbackNode=null,l.callbackPriority=0),w=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||w){w=ie.T,ie.T=null,T=ne.p,ne.p=2,oe=or,or|=4;try{TB(l,d,m)}finally{or=oe,ne.p=T,ie.T=w}}ja=1,O3(),D3(),j3()}}function O3(){if(ja===1){ja=0;var l=wu,d=df,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=ie.T,ie.T=null;var w=ne.p;ne.p=2;var T=or;or|=4;try{p3(d,l);var P=Y_,oe=ue(l.containerInfo),Ee=P.focusedElem,ze=P.selectionRange;if(oe!==Ee&&Ee&&Ee.ownerDocument&&te(Ee.ownerDocument.documentElement,Ee)){if(ze!==null&&_e(Ee)){var ut=ze.start,_t=ze.end;if(_t===void 0&&(_t=ut),"selectionStart"in Ee)Ee.selectionStart=ut,Ee.selectionEnd=Math.min(_t,Ee.value.length);else{var kt=Ee.ownerDocument||document,pt=kt&&kt.defaultView||window;if(pt.getSelection){var mt=pt.getSelection(),bn=Ee.textContent.length,fn=Math.min(ze.start,bn),gr=ze.end===void 0?fn:Math.min(ze.end,bn);!mt.extend&&fn>gr&&(oe=gr,gr=fn,fn=oe);var nt=K(Ee,fn),Ze=K(Ee,gr);if(nt&&Ze&&(mt.rangeCount!==1||mt.anchorNode!==nt.node||mt.anchorOffset!==nt.offset||mt.focusNode!==Ze.node||mt.focusOffset!==Ze.offset)){var lt=kt.createRange();lt.setStart(nt.node,nt.offset),mt.removeAllRanges(),fn>gr?(mt.addRange(lt),mt.extend(Ze.node,Ze.offset)):(lt.setEnd(Ze.node,Ze.offset),mt.addRange(lt))}}}}for(kt=[],mt=Ee;mt=mt.parentNode;)mt.nodeType===1&&kt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof Ee.focus=="function"&&Ee.focus(),Ee=0;Ee<kt.length;Ee++){var St=kt[Ee];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}xy=!!Z_,Y_=Z_=null}finally{or=T,ne.p=w,ie.T=m}}l.current=d,ja=2}}function D3(){if(ja===2){ja=0;var l=wu,d=df,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=ie.T,ie.T=null;var w=ne.p;ne.p=2;var T=or;or|=4;try{c3(l,d.alternate,d)}finally{or=T,ne.p=w,ie.T=m}}ja=3}}function j3(){if(ja===4||ja===3){ja=0,Ne();var l=wu,d=df,m=ff,w=_3;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?ja=5:(ja=0,df=wu=null,M3(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(vu=null),ye(m),d=d.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Et,d,void 0,(d.current.flags&128)===128)}catch{}if(w!==null){d=ie.T,T=ne.p,ne.p=2,ie.T=null;try{for(var P=l.onRecoverableError,oe=0;oe<w.length;oe++){var Ee=w[oe];P(Ee.value,{componentStack:Ee.stack})}}finally{ie.T=d,ne.p=T}}(ff&3)!==0&&cy(),bs(l),T=l.pendingLanes,(m&4194090)!==0&&(T&42)!==0?l===M_?Bp++:(Bp=0,M_=l):Bp=0,zp(0)}}function M3(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,wp(d)))}function cy(l){return O3(),D3(),j3(),P3()}function P3(){if(ja!==5)return!1;var l=wu,d=D_;D_=0;var m=ye(ff),w=ie.T,T=ne.p;try{ne.p=32>m?32:m,ie.T=null,m=j_,j_=null;var P=wu,oe=ff;if(ja=0,df=wu=null,ff=0,(or&6)!==0)throw Error(r(331));var Ee=or;if(or|=4,v3(P.current),g3(P,P.current,oe,m),or=Ee,zp(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Et,P)}catch{}return!0}finally{ne.p=T,ie.T=w,M3(l,d)}}function F3(l,d,m){d=cn(m,d),d=h_(l.stateNode,d,2),l=cu(l,d,2),l!==null&&(et(l,2),bs(l))}function Sr(l,d,m){if(l.tag===3)F3(l,l,m);else for(;d!==null;){if(d.tag===3){F3(d,l,m);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(vu===null||!vu.has(w))){l=cn(m,l),m=zT(2),w=cu(d,m,2),w!==null&&(UT(m,w,d,l),et(w,2),bs(w));break}}d=d.return}}function $_(l,d,m){var w=l.pingCache;if(w===null){w=l.pingCache=new IB;var T=new Set;w.set(d,T)}else T=w.get(d),T===void 0&&(T=new Set,w.set(d,T));T.has(m)||(R_=!0,T.add(m),l=PB.bind(null,l,d,m),d.then(l,l))}function PB(l,d,m){var w=l.pingCache;w!==null&&w.delete(d),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,Ar===l&&(Kn&m)===m&&(Vr===4||Vr===3&&(Kn&62914560)===Kn&&300>ce()-O_?(or&2)===0&&hf(l,0):N_|=m,cf===Kn&&(cf=0)),bs(l)}function L3(l,d){d===0&&(d=M()),l=No(l,d),l!==null&&(et(l,d),bs(l))}function FB(l){var d=l.memoizedState,m=0;d!==null&&(m=d.retryLane),L3(l,m)}function LB(l,d){var m=0;switch(l.tag){case 13:var w=l.stateNode,T=l.memoizedState;T!==null&&(m=T.retryLane);break;case 19:w=l.stateNode;break;case 22:w=l.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(d),L3(l,m)}function $B(l,d){return Re(l,d)}var dy=null,mf=null,B_=!1,fy=!1,z_=!1,Uc=0;function bs(l){l!==mf&&l.next===null&&(mf===null?dy=mf=l:mf=mf.next=l),fy=!0,B_||(B_=!0,zB())}function zp(l,d){if(!z_&&fy){z_=!0;do for(var m=!1,w=dy;w!==null;){if(l!==0){var T=w.pendingLanes;if(T===0)var P=0;else{var oe=w.suspendedLanes,Ee=w.pingedLanes;P=(1<<31-Ut(42|l)+1)-1,P&=T&~(oe&~Ee),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(m=!0,U3(w,P))}else P=Kn,P=ke(w,w===Ar?P:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(P&3)===0||le(w,P)||(m=!0,U3(w,P));w=w.next}while(m);z_=!1}}function BB(){$3()}function $3(){fy=B_=!1;var l=0;Uc!==0&&(ZB()&&(l=Uc),Uc=0);for(var d=ce(),m=null,w=dy;w!==null;){var T=w.next,P=B3(w,d);P===0?(w.next=null,m===null?dy=T:m.next=T,T===null&&(mf=m)):(m=w,(l!==0||(P&3)!==0)&&(fy=!0)),w=T}zp(l)}function B3(l,d){for(var m=l.suspendedLanes,w=l.pingedLanes,T=l.expirationTimes,P=l.pendingLanes&-62914561;0<P;){var oe=31-Ut(P),Ee=1<<oe,ze=T[oe];ze===-1?((Ee&m)===0||(Ee&w)!==0)&&(T[oe]=ct(Ee,d)):ze<=d&&(l.expiredLanes|=Ee),P&=~Ee}if(d=Ar,m=Kn,m=ke(l,l===d?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),w=l.callbackNode,m===0||l===d&&(sr===2||sr===9)||l.cancelPendingCommit!==null)return w!==null&&w!==null&&z(w),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||le(l,m)){if(d=m&-m,d===l.callbackPriority)return d;switch(w!==null&&z(w),ye(m)){case 2:case 8:m=xe;break;case 32:m=Le;break;case 268435456:m=Ve;break;default:m=Le}return w=z3.bind(null,l),m=Re(m,w),l.callbackPriority=d,l.callbackNode=m,d}return w!==null&&w!==null&&z(w),l.callbackPriority=2,l.callbackNode=null,2}function z3(l,d){if(ja!==0&&ja!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(cy()&&l.callbackNode!==m)return null;var w=Kn;return w=ke(l,l===Ar?w:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),w===0?null:(S3(l,w,d),B3(l,ce()),l.callbackNode!=null&&l.callbackNode===m?z3.bind(null,l):null)}function U3(l,d){if(cy())return null;S3(l,d,!0)}function zB(){XB(function(){(or&6)!==0?Re(J,BB):$3()})}function U_(){return Uc===0&&(Uc=yt()),Uc}function q3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Ks(""+l)}function H3(l,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,l.id&&m.setAttribute("form",l.id),d.parentNode.insertBefore(m,d),l=new FormData(l),m.parentNode.removeChild(m),l}function UB(l,d,m,w,T){if(d==="submit"&&m&&m.stateNode===T){var P=q3((T[de]||null).action),oe=w.submitter;oe&&(d=(d=oe[de]||null)?q3(d.formAction):oe.getAttribute("formAction"),d!==null&&(P=d,oe=null));var Ee=new jd("action","action",null,w,T);l.push({event:Ee,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Uc!==0){var ze=oe?H3(T,oe):new FormData(T);l_(m,{pending:!0,data:ze,method:T.method,action:P},null,ze)}}else typeof P=="function"&&(Ee.preventDefault(),ze=oe?H3(T,oe):new FormData(T),l_(m,{pending:!0,data:ze,method:T.method,action:P},P,ze))},currentTarget:T}]})}}for(var q_=0;q_<Ht.length;q_++){var H_=Ht[q_],qB=H_.toLowerCase(),HB=H_[0].toUpperCase()+H_.slice(1);It(qB,"on"+HB)}It(ft,"onAnimationEnd"),It(gt,"onAnimationIteration"),It(bt,"onAnimationStart"),It("dblclick","onDoubleClick"),It("focusin","onFocus"),It("focusout","onBlur"),It(wt,"onTransitionRun"),It(jt,"onTransitionStart"),It(qt,"onTransitionCancel"),It(Nt,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),is("onBeforeInput",["compositionend","keypress","textInput","paste"]),is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Up="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Up));function V3(l,d){d=(d&4)!==0;for(var m=0;m<l.length;m++){var w=l[m],T=w.event;w=w.listeners;e:{var P=void 0;if(d)for(var oe=w.length-1;0<=oe;oe--){var Ee=w[oe],ze=Ee.instance,ut=Ee.currentTarget;if(Ee=Ee.listener,ze!==P&&T.isPropagationStopped())break e;P=Ee,T.currentTarget=ut;try{P(T)}catch(_t){Qg(_t)}T.currentTarget=null,P=ze}else for(oe=0;oe<w.length;oe++){if(Ee=w[oe],ze=Ee.instance,ut=Ee.currentTarget,Ee=Ee.listener,ze!==P&&T.isPropagationStopped())break e;P=Ee,T.currentTarget=ut;try{P(T)}catch(_t){Qg(_t)}T.currentTarget=null,P=ze}}}}function Hn(l,d){var m=d[ot];m===void 0&&(m=d[ot]=new Set);var w=l+"__bubble";m.has(w)||(G3(d,l,2,!1),m.add(w))}function V_(l,d,m){var w=0;d&&(w|=4),G3(m,l,w,d)}var hy="_reactListening"+Math.random().toString(36).slice(2);function G_(l){if(!l[hy]){l[hy]=!0,ni.forEach(function(m){m!=="selectionchange"&&(VB.has(m)||V_(m,!1,l),V_(m,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[hy]||(d[hy]=!0,V_("selectionchange",!1,d))}}function G3(l,d,m,w){switch(gR(d)){case 2:var T=b7;break;case 8:T=v7;break;default:T=ox}m=T.bind(null,d,m,l),T=void 0,!np||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),w?T!==void 0?l.addEventListener(d,m,{capture:!0,passive:T}):l.addEventListener(d,m,!0):T!==void 0?l.addEventListener(d,m,{passive:T}):l.addEventListener(d,m,!1)}function W_(l,d,m,w,T){var P=w;if((d&1)===0&&(d&2)===0&&w!==null)e:for(;;){if(w===null)return;var oe=w.tag;if(oe===3||oe===4){var Ee=w.stateNode.containerInfo;if(Ee===T)break;if(oe===4)for(oe=w.return;oe!==null;){var ze=oe.tag;if((ze===3||ze===4)&&oe.stateNode.containerInfo===T)return;oe=oe.return}for(;Ee!==null;){if(oe=Rn(Ee),oe===null)return;if(ze=oe.tag,ze===5||ze===6||ze===26||ze===27){w=P=oe;continue e}Ee=Ee.parentNode}}w=w.return}Ql(function(){var ut=P,_t=Od(m),kt=[];e:{var pt=Ft.get(l);if(pt!==void 0){var mt=jd,bn=l;switch(l){case"keypress":if(nu(m)===0)break e;case"keydown":case"keyup":mt=Ud;break;case"focusin":bn="focus",mt=ru;break;case"focusout":bn="blur",mt=ru;break;case"beforeblur":case"afterblur":mt=ru;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=xg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=up;break;case ft:case gt:case bt:mt=Sg;break;case Nt:mt=cp;break;case"scroll":case"scrollend":mt=Md;break;case"wheel":mt=Hd;break;case"copy":case"cut":case"paste":mt=Bd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=lp;break;case"toggle":case"beforetoggle":mt=kg}var fn=(d&4)!==0,gr=!fn&&(l==="scroll"||l==="scrollend"),nt=fn?pt!==null?pt+"Capture":null:pt;fn=[];for(var Ze=ut,lt;Ze!==null;){var St=Ze;if(lt=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||lt===null||nt===null||(St=Xs(Ze,nt),St!=null&&fn.push(qp(Ze,St,lt))),gr)break;Ze=Ze.return}0<fn.length&&(pt=new mt(pt,bn,null,m,_t),kt.push({event:pt,listeners:fn}))}}if((d&7)===0){e:{if(pt=l==="mouseover"||l==="pointerover",mt=l==="mouseout"||l==="pointerout",pt&&m!==Qi&&(bn=m.relatedTarget||m.fromElement)&&(Rn(bn)||bn[Fe]))break e;if((mt||pt)&&(pt=_t.window===_t?_t:(pt=_t.ownerDocument)?pt.defaultView||pt.parentWindow:window,mt?(bn=m.relatedTarget||m.toElement,mt=ut,bn=bn?Rn(bn):null,bn!==null&&(gr=i(bn),fn=bn.tag,bn!==gr||fn!==5&&fn!==27&&fn!==6)&&(bn=null)):(mt=null,bn=ut),mt!==bn)){if(fn=Fd,St="onMouseLeave",nt="onMouseEnter",Ze="mouse",(l==="pointerout"||l==="pointerover")&&(fn=lp,St="onPointerLeave",nt="onPointerEnter",Ze="pointer"),gr=mt==null?pt:fr(mt),lt=bn==null?pt:fr(bn),pt=new fn(St,Ze+"leave",mt,m,_t),pt.target=gr,pt.relatedTarget=lt,St=null,Rn(_t)===ut&&(fn=new fn(nt,Ze+"enter",bn,m,_t),fn.target=lt,fn.relatedTarget=gr,St=fn),gr=St,mt&&bn)t:{for(fn=mt,nt=bn,Ze=0,lt=fn;lt;lt=gf(lt))Ze++;for(lt=0,St=nt;St;St=gf(St))lt++;for(;0<Ze-lt;)fn=gf(fn),Ze--;for(;0<lt-Ze;)nt=gf(nt),lt--;for(;Ze--;){if(fn===nt||nt!==null&&fn===nt.alternate)break t;fn=gf(fn),nt=gf(nt)}fn=null}else fn=null;mt!==null&&W3(kt,pt,mt,fn,!1),bn!==null&&gr!==null&&W3(kt,gr,bn,fn,!0)}}e:{if(pt=ut?fr(ut):window,mt=pt.nodeName&&pt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&pt.type==="file")var Qt=Rc;else if(Wd(pt))if(to)Qt=ou;else{Qt=nl;var Bn=Og}else mt=pt.nodeName,!mt||mt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?ut&&tp(ut.elementType)&&(Qt=Rc):Qt=mp;if(Qt&&(Qt=Qt(l,ut))){pp(kt,Qt,m,_t);break e}Bn&&Bn(l,pt,ut),l==="focusout"&&ut&&pt.type==="number"&&ut.memoizedProps.value!=null&&Zl(pt,"number",pt.value)}switch(Bn=ut?fr(ut):window,l){case"focusin":(Wd(Bn)||Bn.contentEditable==="true")&&($e=Bn,We=ut,Ye=null);break;case"focusout":Ye=We=$e=null;break;case"mousedown":tt=!0;break;case"contextmenu":case"mouseup":case"dragend":tt=!1,He(kt,m,_t);break;case"selectionchange":if(je)break;case"keydown":case"keyup":He(kt,m,_t)}var on;if(Ac)e:{switch(l){case"compositionstart":var mn="onCompositionStart";break e;case"compositionend":mn="onCompositionEnd";break e;case"compositionupdate":mn="onCompositionUpdate";break e}mn=void 0}else tl?hp(l,m)&&(mn="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(mn="onCompositionStart");mn&&(Vd&&m.locale!=="ko"&&(tl||mn!=="onCompositionStart"?mn==="onCompositionEnd"&&tl&&(on=tu()):(eo=_t,Dd="value"in eo?eo.value:eo.textContent,tl=!0)),Bn=py(ut,mn),0<Bn.length&&(mn=new zd(mn,l,null,m,_t),kt.push({event:mn,listeners:Bn}),on?mn.data=on:(on=Tg(m),on!==null&&(mn.data=on)))),(on=A1?Rg(l,m):T1(l,m))&&(mn=py(ut,"onBeforeInput"),0<mn.length&&(Bn=new zd("onBeforeInput","beforeinput",null,m,_t),kt.push({event:Bn,listeners:mn}),Bn.data=on)),UB(kt,l,ut,m,_t)}V3(kt,d)})}function qp(l,d,m){return{instance:l,listener:d,currentTarget:m}}function py(l,d){for(var m=d+"Capture",w=[];l!==null;){var T=l,P=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||P===null||(T=Xs(l,m),T!=null&&w.unshift(qp(l,T,P)),T=Xs(l,d),T!=null&&w.push(qp(l,T,P))),l.tag===3)return w;l=l.return}return[]}function gf(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function W3(l,d,m,w,T){for(var P=d._reactName,oe=[];m!==null&&m!==w;){var Ee=m,ze=Ee.alternate,ut=Ee.stateNode;if(Ee=Ee.tag,ze!==null&&ze===w)break;Ee!==5&&Ee!==26&&Ee!==27||ut===null||(ze=ut,T?(ut=Xs(m,P),ut!=null&&oe.unshift(qp(m,ut,ze))):T||(ut=Xs(m,P),ut!=null&&oe.push(qp(m,ut,ze)))),m=m.return}oe.length!==0&&l.push({event:d,listeners:oe})}var GB=/\r\n?/g,WB=/\u0000|\uFFFD/g;function K3(l){return(typeof l=="string"?l:""+l).replace(GB,`
`).replace(WB,"")}function Z3(l,d){return d=K3(d),K3(l)===d}function my(){}function mr(l,d,m,w,T,P){switch(m){case"children":typeof w=="string"?d==="body"||d==="textarea"&&w===""||Xl(l,w):(typeof w=="number"||typeof w=="bigint")&&d!=="body"&&Xl(l,""+w);break;case"className":Vs(l,"class",w);break;case"tabIndex":Vs(l,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Vs(l,m,w);break;case"style":wg(l,w,P);break;case"data":if(d!=="object"){Vs(l,"data",w);break}case"src":case"href":if(w===""&&(d!=="a"||m!=="href")){l.removeAttribute(m);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){l.removeAttribute(m);break}w=Ks(""+w),l.setAttribute(m,w);break;case"action":case"formAction":if(typeof w=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(m==="formAction"?(d!=="input"&&mr(l,d,"name",T.name,T,null),mr(l,d,"formEncType",T.formEncType,T,null),mr(l,d,"formMethod",T.formMethod,T,null),mr(l,d,"formTarget",T.formTarget,T,null)):(mr(l,d,"encType",T.encType,T,null),mr(l,d,"method",T.method,T,null),mr(l,d,"target",T.target,T,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){l.removeAttribute(m);break}w=Ks(""+w),l.setAttribute(m,w);break;case"onClick":w!=null&&(l.onclick=my);break;case"onScroll":w!=null&&Hn("scroll",l);break;case"onScrollEnd":w!=null&&Hn("scrollend",l);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"multiple":l.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":l.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){l.removeAttribute("xlink:href");break}m=Ks(""+w),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?l.setAttribute(m,""+w):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":w===!0?l.setAttribute(m,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?l.setAttribute(m,w):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?l.setAttribute(m,w):l.removeAttribute(m);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?l.removeAttribute(m):l.setAttribute(m,w);break;case"popover":Hn("beforetoggle",l),Hn("toggle",l),To(l,"popover",w);break;case"xlinkActuate":Di(l,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Di(l,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Di(l,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Di(l,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Di(l,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Di(l,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Di(l,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Di(l,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Di(l,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":To(l,"is",w);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=ai.get(m)||m,To(l,m,w))}}function K_(l,d,m,w,T,P){switch(m){case"style":wg(l,w,P);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"children":typeof w=="string"?Xl(l,w):(typeof w=="number"||typeof w=="bigint")&&Xl(l,""+w);break;case"onScroll":w!=null&&Hn("scroll",l);break;case"onScrollEnd":w!=null&&Hn("scrollend",l);break;case"onClick":w!=null&&(l.onclick=my);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!as.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(T=m.endsWith("Capture"),d=m.slice(2,T?m.length-7:void 0),P=l[de]||null,P=P!=null?P[m]:null,typeof P=="function"&&l.removeEventListener(d,P,T),typeof w=="function")){typeof P!="function"&&P!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(d,w,T);break e}m in l?l[m]=w:w===!0?l.setAttribute(m,""):To(l,m,w)}}}function Ma(l,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hn("error",l),Hn("load",l);var w=!1,T=!1,P;for(P in m)if(m.hasOwnProperty(P)){var oe=m[P];if(oe!=null)switch(P){case"src":w=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,P,oe,m,null)}}T&&mr(l,d,"srcSet",m.srcSet,m,null),w&&mr(l,d,"src",m.src,m,null);return;case"input":Hn("invalid",l);var Ee=P=oe=T=null,ze=null,ut=null;for(w in m)if(m.hasOwnProperty(w)){var _t=m[w];if(_t!=null)switch(w){case"name":T=_t;break;case"type":oe=_t;break;case"checked":ze=_t;break;case"defaultChecked":ut=_t;break;case"value":P=_t;break;case"defaultValue":Ee=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,d));break;default:mr(l,d,w,_t,m,null)}}Qh(l,P,Ee,ze,ut,oe,T,!1),us(l);return;case"select":Hn("invalid",l),w=oe=P=null;for(T in m)if(m.hasOwnProperty(T)&&(Ee=m[T],Ee!=null))switch(T){case"value":P=Ee;break;case"defaultValue":oe=Ee;break;case"multiple":w=Ee;default:mr(l,d,T,Ee,m,null)}d=P,m=oe,l.multiple=!!w,d!=null?Ws(l,!!w,d,!1):m!=null&&Ws(l,!!w,m,!0);return;case"textarea":Hn("invalid",l),P=T=w=null;for(oe in m)if(m.hasOwnProperty(oe)&&(Ee=m[oe],Ee!=null))switch(oe){case"value":w=Ee;break;case"defaultValue":T=Ee;break;case"children":P=Ee;break;case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(91));break;default:mr(l,d,oe,Ee,m,null)}ep(l,w,T,P),us(l);return;case"option":for(ze in m)if(m.hasOwnProperty(ze)&&(w=m[ze],w!=null))switch(ze){case"selected":l.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:mr(l,d,ze,w,m,null)}return;case"dialog":Hn("beforetoggle",l),Hn("toggle",l),Hn("cancel",l),Hn("close",l);break;case"iframe":case"object":Hn("load",l);break;case"video":case"audio":for(w=0;w<Up.length;w++)Hn(Up[w],l);break;case"image":Hn("error",l),Hn("load",l);break;case"details":Hn("toggle",l);break;case"embed":case"source":case"link":Hn("error",l),Hn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in m)if(m.hasOwnProperty(ut)&&(w=m[ut],w!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,ut,w,m,null)}return;default:if(tp(d)){for(_t in m)m.hasOwnProperty(_t)&&(w=m[_t],w!==void 0&&K_(l,d,_t,w,m,void 0));return}}for(Ee in m)m.hasOwnProperty(Ee)&&(w=m[Ee],w!=null&&mr(l,d,Ee,w,m,null))}function KB(l,d,m,w){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,P=null,oe=null,Ee=null,ze=null,ut=null,_t=null;for(mt in m){var kt=m[mt];if(m.hasOwnProperty(mt)&&kt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":ze=kt;default:w.hasOwnProperty(mt)||mr(l,d,mt,null,w,kt)}}for(var pt in w){var mt=w[pt];if(kt=m[pt],w.hasOwnProperty(pt)&&(mt!=null||kt!=null))switch(pt){case"type":P=mt;break;case"name":T=mt;break;case"checked":ut=mt;break;case"defaultChecked":_t=mt;break;case"value":oe=mt;break;case"defaultValue":Ee=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,d));break;default:mt!==kt&&mr(l,d,pt,mt,w,kt)}}Kl(l,oe,Ee,ze,ut,_t,P,T);return;case"select":mt=oe=Ee=pt=null;for(P in m)if(ze=m[P],m.hasOwnProperty(P)&&ze!=null)switch(P){case"value":break;case"multiple":mt=ze;default:w.hasOwnProperty(P)||mr(l,d,P,null,w,ze)}for(T in w)if(P=w[T],ze=m[T],w.hasOwnProperty(T)&&(P!=null||ze!=null))switch(T){case"value":pt=P;break;case"defaultValue":Ee=P;break;case"multiple":oe=P;default:P!==ze&&mr(l,d,T,P,w,ze)}d=Ee,m=oe,w=mt,pt!=null?Ws(l,!!m,pt,!1):!!w!=!!m&&(d!=null?Ws(l,!!m,d,!0):Ws(l,!!m,m?[]:"",!1));return;case"textarea":mt=pt=null;for(Ee in m)if(T=m[Ee],m.hasOwnProperty(Ee)&&T!=null&&!w.hasOwnProperty(Ee))switch(Ee){case"value":break;case"children":break;default:mr(l,d,Ee,null,w,T)}for(oe in w)if(T=w[oe],P=m[oe],w.hasOwnProperty(oe)&&(T!=null||P!=null))switch(oe){case"value":pt=T;break;case"defaultValue":mt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==P&&mr(l,d,oe,T,w,P)}Yl(l,pt,mt);return;case"option":for(var bn in m)if(pt=m[bn],m.hasOwnProperty(bn)&&pt!=null&&!w.hasOwnProperty(bn))switch(bn){case"selected":l.selected=!1;break;default:mr(l,d,bn,null,w,pt)}for(ze in w)if(pt=w[ze],mt=m[ze],w.hasOwnProperty(ze)&&pt!==mt&&(pt!=null||mt!=null))switch(ze){case"selected":l.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:mr(l,d,ze,pt,w,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fn in m)pt=m[fn],m.hasOwnProperty(fn)&&pt!=null&&!w.hasOwnProperty(fn)&&mr(l,d,fn,null,w,pt);for(ut in w)if(pt=w[ut],mt=m[ut],w.hasOwnProperty(ut)&&pt!==mt&&(pt!=null||mt!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,d));break;default:mr(l,d,ut,pt,w,mt)}return;default:if(tp(d)){for(var gr in m)pt=m[gr],m.hasOwnProperty(gr)&&pt!==void 0&&!w.hasOwnProperty(gr)&&K_(l,d,gr,void 0,w,pt);for(_t in w)pt=w[_t],mt=m[_t],!w.hasOwnProperty(_t)||pt===mt||pt===void 0&&mt===void 0||K_(l,d,_t,pt,w,mt);return}}for(var nt in m)pt=m[nt],m.hasOwnProperty(nt)&&pt!=null&&!w.hasOwnProperty(nt)&&mr(l,d,nt,null,w,pt);for(kt in w)pt=w[kt],mt=m[kt],!w.hasOwnProperty(kt)||pt===mt||pt==null&&mt==null||mr(l,d,kt,pt,w,mt)}var Z_=null,Y_=null;function gy(l){return l.nodeType===9?l:l.ownerDocument}function Y3(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X3(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function X_(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var J_=null;function ZB(){var l=window.event;return l&&l.type==="popstate"?l===J_?!1:(J_=l,!0):(J_=null,!1)}var J3=typeof setTimeout=="function"?setTimeout:void 0,YB=typeof clearTimeout=="function"?clearTimeout:void 0,Q3=typeof Promise=="function"?Promise:void 0,XB=typeof queueMicrotask=="function"?queueMicrotask:typeof Q3<"u"?function(l){return Q3.resolve(null).then(l).catch(JB)}:J3;function JB(l){setTimeout(function(){throw l})}function xu(l){return l==="head"}function eR(l,d){var m=d,w=0,T=0;do{var P=m.nextSibling;if(l.removeChild(m),P&&P.nodeType===8)if(m=P.data,m==="/$"){if(0<w&&8>w){m=w;var oe=l.ownerDocument;if(m&1&&Hp(oe.documentElement),m&2&&Hp(oe.body),m&4)for(m=oe.head,Hp(m),oe=m.firstChild;oe;){var Ee=oe.nextSibling,ze=oe.nodeName;oe[Vt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||m.removeChild(oe),oe=Ee}}if(T===0){l.removeChild(P),Jp(d);return}T--}else m==="$"||m==="$?"||m==="$!"?T++:w=m.charCodeAt(0)-48;else w=0;m=P}while(m);Jp(d)}function Q_(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Q_(m),Xt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function QB(l,d,m,w){for(;l.nodeType===1;){var T=m;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!w&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(w){if(!l[Vt])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(P=l.getAttribute("rel"),P==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(P!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(P=l.getAttribute("src"),(P!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&P&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var P=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===P)return l}else return l;if(l=Oo(l.nextSibling),l===null)break}return null}function e7(l,d,m){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=Oo(l.nextSibling),l===null))return null;return l}function ex(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function t7(l,d){var m=l.ownerDocument;if(l.data!=="$?"||m.readyState==="complete")d();else{var w=function(){d(),m.removeEventListener("DOMContentLoaded",w)};m.addEventListener("DOMContentLoaded",w),l._reactRetry=w}}function Oo(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var tx=null;function tR(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return l;d--}else m==="/$"&&d++}l=l.previousSibling}return null}function nR(l,d,m){switch(d=gy(m),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Hp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Xt(l)}var so=new Map,rR=new Set;function yy(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ml=ne.d;ne.d={f:n7,r:r7,D:a7,C:i7,L:o7,m:s7,X:u7,S:l7,M:c7};function n7(){var l=ml.f(),d=ly();return l||d}function r7(l){var d=zn(l);d!==null&&d.tag===5&&d.type==="form"?ST(d):ml.r(l)}var yf=typeof document>"u"?null:document;function aR(l,d,m){var w=yf;if(w&&typeof d=="string"&&d){var T=Ba(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof m=="string"&&(T+='[crossorigin="'+m+'"]'),rR.has(T)||(rR.add(T),l={rel:l,crossOrigin:m,href:d},w.querySelector(T)===null&&(d=w.createElement("link"),Ma(d,"link",l),jn(d),w.head.appendChild(d)))}}function a7(l){ml.D(l),aR("dns-prefetch",l,null)}function i7(l,d){ml.C(l,d),aR("preconnect",l,d)}function o7(l,d,m){ml.L(l,d,m);var w=yf;if(w&&l&&d){var T='link[rel="preload"][as="'+Ba(d)+'"]';d==="image"&&m&&m.imageSrcSet?(T+='[imagesrcset="'+Ba(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(T+='[imagesizes="'+Ba(m.imageSizes)+'"]')):T+='[href="'+Ba(l)+'"]';var P=T;switch(d){case"style":P=bf(l);break;case"script":P=vf(l)}so.has(P)||(l=f({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:l,as:d},m),so.set(P,l),w.querySelector(T)!==null||d==="style"&&w.querySelector(Vp(P))||d==="script"&&w.querySelector(Gp(P))||(d=w.createElement("link"),Ma(d,"link",l),jn(d),w.head.appendChild(d)))}}function s7(l,d){ml.m(l,d);var m=yf;if(m&&l){var w=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+Ba(w)+'"][href="'+Ba(l)+'"]',P=T;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=vf(l)}if(!so.has(P)&&(l=f({rel:"modulepreload",href:l},d),so.set(P,l),m.querySelector(T)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Gp(P)))return}w=m.createElement("link"),Ma(w,"link",l),jn(w),m.head.appendChild(w)}}}function l7(l,d,m){ml.S(l,d,m);var w=yf;if(w&&l){var T=hr(w).hoistableStyles,P=bf(l);d=d||"default";var oe=T.get(P);if(!oe){var Ee={loading:0,preload:null};if(oe=w.querySelector(Vp(P)))Ee.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},m),(m=so.get(P))&&nx(l,m);var ze=oe=w.createElement("link");jn(ze),Ma(ze,"link",l),ze._p=new Promise(function(ut,_t){ze.onload=ut,ze.onerror=_t}),ze.addEventListener("load",function(){Ee.loading|=1}),ze.addEventListener("error",function(){Ee.loading|=2}),Ee.loading|=4,by(oe,d,w)}oe={type:"stylesheet",instance:oe,count:1,state:Ee},T.set(P,oe)}}}function u7(l,d){ml.X(l,d);var m=yf;if(m&&l){var w=hr(m).hoistableScripts,T=vf(l),P=w.get(T);P||(P=m.querySelector(Gp(T)),P||(l=f({src:l,async:!0},d),(d=so.get(T))&&rx(l,d),P=m.createElement("script"),jn(P),Ma(P,"link",l),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(T,P))}}function c7(l,d){ml.M(l,d);var m=yf;if(m&&l){var w=hr(m).hoistableScripts,T=vf(l),P=w.get(T);P||(P=m.querySelector(Gp(T)),P||(l=f({src:l,async:!0,type:"module"},d),(d=so.get(T))&&rx(l,d),P=m.createElement("script"),jn(P),Ma(P,"link",l),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(T,P))}}function iR(l,d,m,w){var T=(T=Me.current)?yy(T):null;if(!T)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=bf(m.href),m=hr(T).hoistableStyles,w=m.get(d),w||(w={type:"style",instance:null,count:0,state:null},m.set(d,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=bf(m.href);var P=hr(T).hoistableStyles,oe=P.get(l);if(oe||(T=T.ownerDocument||T,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(l,oe),(P=T.querySelector(Vp(l)))&&!P._p&&(oe.instance=P,oe.state.loading=5),so.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},so.set(l,m),P||d7(T,l,m,oe.state))),d&&w===null)throw Error(r(528,""));return oe}if(d&&w!==null)throw Error(r(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=vf(m),m=hr(T).hoistableScripts,w=m.get(d),w||(w={type:"script",instance:null,count:0,state:null},m.set(d,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function bf(l){return'href="'+Ba(l)+'"'}function Vp(l){return'link[rel="stylesheet"]['+l+"]"}function oR(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function d7(l,d,m,w){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?w.loading=1:(d=l.createElement("link"),w.preload=d,d.addEventListener("load",function(){return w.loading|=1}),d.addEventListener("error",function(){return w.loading|=2}),Ma(d,"link",m),jn(d),l.head.appendChild(d))}function vf(l){return'[src="'+Ba(l)+'"]'}function Gp(l){return"script[async]"+l}function sR(l,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var w=l.querySelector('style[data-href~="'+Ba(m.href)+'"]');if(w)return d.instance=w,jn(w),w;var T=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return w=(l.ownerDocument||l).createElement("style"),jn(w),Ma(w,"style",T),by(w,m.precedence,l),d.instance=w;case"stylesheet":T=bf(m.href);var P=l.querySelector(Vp(T));if(P)return d.state.loading|=4,d.instance=P,jn(P),P;w=oR(m),(T=so.get(T))&&nx(w,T),P=(l.ownerDocument||l).createElement("link"),jn(P);var oe=P;return oe._p=new Promise(function(Ee,ze){oe.onload=Ee,oe.onerror=ze}),Ma(P,"link",w),d.state.loading|=4,by(P,m.precedence,l),d.instance=P;case"script":return P=vf(m.src),(T=l.querySelector(Gp(P)))?(d.instance=T,jn(T),T):(w=m,(T=so.get(P))&&(w=f({},m),rx(w,T)),l=l.ownerDocument||l,T=l.createElement("script"),jn(T),Ma(T,"link",w),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(w=d.instance,d.state.loading|=4,by(w,m.precedence,l));return d.instance}function by(l,d,m){for(var w=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=w.length?w[w.length-1]:null,P=T,oe=0;oe<w.length;oe++){var Ee=w[oe];if(Ee.dataset.precedence===d)P=Ee;else if(P!==T)break}P?P.parentNode.insertBefore(l,P.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(l,d.firstChild))}function nx(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function rx(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var vy=null;function lR(l,d,m){if(vy===null){var w=new Map,T=vy=new Map;T.set(m,w)}else T=vy,w=T.get(m),w||(w=new Map,T.set(m,w));if(w.has(l))return w;for(w.set(l,null),m=m.getElementsByTagName(l),T=0;T<m.length;T++){var P=m[T];if(!(P[Vt]||P[pe]||l==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=P.getAttribute(d)||"";oe=l+oe;var Ee=w.get(oe);Ee?Ee.push(P):w.set(oe,[P])}}return w}function uR(l,d,m){l=l.ownerDocument||l,l.head.insertBefore(m,d==="title"?l.querySelector("head > title"):null)}function f7(l,d,m){if(m===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function cR(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Wp=null;function h7(){}function p7(l,d,m){if(Wp===null)throw Error(r(475));var w=Wp;if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=bf(m.href),P=l.querySelector(Vp(T));if(P){l=P._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(w.count++,w=wy.bind(w),l.then(w,w)),d.state.loading|=4,d.instance=P,jn(P);return}P=l.ownerDocument||l,m=oR(m),(T=so.get(T))&&nx(m,T),P=P.createElement("link"),jn(P);var oe=P;oe._p=new Promise(function(Ee,ze){oe.onload=Ee,oe.onerror=ze}),Ma(P,"link",m),d.instance=P}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(w.count++,d=wy.bind(w),l.addEventListener("load",d),l.addEventListener("error",d))}}function m7(){if(Wp===null)throw Error(r(475));var l=Wp;return l.stylesheets&&l.count===0&&ax(l,l.stylesheets),0<l.count?function(d){var m=setTimeout(function(){if(l.stylesheets&&ax(l,l.stylesheets),l.unsuspend){var w=l.unsuspend;l.unsuspend=null,w()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(m)}}:null}function wy(){if(this.count--,this.count===0){if(this.stylesheets)ax(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var _y=null;function ax(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,_y=new Map,d.forEach(g7,l),_y=null,wy.call(l))}function g7(l,d){if(!(d.state.loading&4)){var m=_y.get(l);if(m)var w=m.get(null);else{m=new Map,_y.set(l,m);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<T.length;P++){var oe=T[P];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(m.set(oe.dataset.precedence,oe),w=oe)}w&&m.set(null,w)}T=d.instance,oe=T.getAttribute("data-precedence"),P=m.get(oe)||w,P===w&&m.set(null,T),m.set(oe,T),this.count++,w=wy.bind(this),T.addEventListener("load",w),T.addEventListener("error",w),P?P.parentNode.insertBefore(T,P.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var Kp={$$typeof:E,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function y7(l,d,m,w,T,P,oe,Ee){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=w,this.onUncaughtError=T,this.onCaughtError=P,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function dR(l,d,m,w,T,P,oe,Ee,ze,ut,_t,kt){return l=new y7(l,d,m,oe,Ee,ze,ut,kt),d=1,P===!0&&(d|=24),P=Mi(3,null,null,d),l.current=P,P.stateNode=l,d=$1(),d.refCount++,l.pooledCache=d,d.refCount++,P.memoizedState={element:w,isDehydrated:m,cache:d},q1(P),l}function fR(l){return l?(l=hs,l):hs}function hR(l,d,m,w,T,P){T=fR(T),w.context===null?w.context=T:w.pendingContext=T,w=uu(d),w.payload={element:m},P=P===void 0?null:P,P!==null&&(w.callback=P),m=cu(l,w,d),m!==null&&(Bi(m,l,d),Ep(m,l,d))}function pR(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<d?m:d}}function ix(l,d){pR(l,d),(l=l.alternate)&&pR(l,d)}function mR(l){if(l.tag===13){var d=No(l,67108864);d!==null&&Bi(d,l,67108864),ix(l,67108864)}}var xy=!0;function b7(l,d,m,w){var T=ie.T;ie.T=null;var P=ne.p;try{ne.p=2,ox(l,d,m,w)}finally{ne.p=P,ie.T=T}}function v7(l,d,m,w){var T=ie.T;ie.T=null;var P=ne.p;try{ne.p=8,ox(l,d,m,w)}finally{ne.p=P,ie.T=T}}function ox(l,d,m,w){if(xy){var T=sx(w);if(T===null)W_(l,d,w,Sy,m),yR(l,w);else if(_7(T,l,d,m,w))w.stopPropagation();else if(yR(l,w),d&4&&-1<w7.indexOf(l)){for(;T!==null;){var P=zn(T);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var oe=ve(P.pendingLanes);if(oe!==0){var Ee=P;for(Ee.pendingLanes|=2,Ee.entangledLanes|=2;oe;){var ze=1<<31-Ut(oe);Ee.entanglements[1]|=ze,oe&=~ze}bs(P),(or&6)===0&&(oy=ce()+500,zp(0))}}break;case 13:Ee=No(P,2),Ee!==null&&Bi(Ee,P,2),ly(),ix(P,2)}if(P=sx(w),P===null&&W_(l,d,w,Sy,m),P===T)break;T=P}T!==null&&w.stopPropagation()}else W_(l,d,w,null,m)}}function sx(l){return l=Od(l),lx(l)}var Sy=null;function lx(l){if(Sy=null,l=Rn(l),l!==null){var d=i(l);if(d===null)l=null;else{var m=d.tag;if(m===13){if(l=o(d),l!==null)return l;l=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Sy=l,null}function gR(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ae()){case J:return 2;case xe:return 8;case Le:case Se:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var ux=!1,Su=null,Eu=null,Cu=null,Zp=new Map,Yp=new Map,ku=[],w7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yR(l,d){switch(l){case"focusin":case"focusout":Su=null;break;case"dragenter":case"dragleave":Eu=null;break;case"mouseover":case"mouseout":Cu=null;break;case"pointerover":case"pointerout":Zp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yp.delete(d.pointerId)}}function Xp(l,d,m,w,T,P){return l===null||l.nativeEvent!==P?(l={blockedOn:d,domEventName:m,eventSystemFlags:w,nativeEvent:P,targetContainers:[T]},d!==null&&(d=zn(d),d!==null&&mR(d)),l):(l.eventSystemFlags|=w,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function _7(l,d,m,w,T){switch(d){case"focusin":return Su=Xp(Su,l,d,m,w,T),!0;case"dragenter":return Eu=Xp(Eu,l,d,m,w,T),!0;case"mouseover":return Cu=Xp(Cu,l,d,m,w,T),!0;case"pointerover":var P=T.pointerId;return Zp.set(P,Xp(Zp.get(P)||null,l,d,m,w,T)),!0;case"gotpointercapture":return P=T.pointerId,Yp.set(P,Xp(Yp.get(P)||null,l,d,m,w,T)),!0}return!1}function bR(l){var d=Rn(l.target);if(d!==null){var m=i(d);if(m!==null){if(d=m.tag,d===13){if(d=o(m),d!==null){l.blockedOn=d,B(l.priority,function(){if(m.tag===13){var w=$i();w=Ct(w);var T=No(m,w);T!==null&&Bi(T,m,w),ix(m,w)}});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ey(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var m=sx(l.nativeEvent);if(m===null){m=l.nativeEvent;var w=new m.constructor(m.type,m);Qi=w,m.target.dispatchEvent(w),Qi=null}else return d=zn(m),d!==null&&mR(d),l.blockedOn=m,!1;d.shift()}return!0}function vR(l,d,m){Ey(l)&&m.delete(d)}function x7(){ux=!1,Su!==null&&Ey(Su)&&(Su=null),Eu!==null&&Ey(Eu)&&(Eu=null),Cu!==null&&Ey(Cu)&&(Cu=null),Zp.forEach(vR),Yp.forEach(vR)}function Cy(l,d){l.blockedOn===d&&(l.blockedOn=null,ux||(ux=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,x7)))}var ky=null;function wR(l){ky!==l&&(ky=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ky===l&&(ky=null);for(var d=0;d<l.length;d+=3){var m=l[d],w=l[d+1],T=l[d+2];if(typeof w!="function"){if(lx(w||m)===null)continue;break}var P=zn(m);P!==null&&(l.splice(d,3),d-=3,l_(P,{pending:!0,data:T,method:m.method,action:w},w,T))}}))}function Jp(l){function d(ze){return Cy(ze,l)}Su!==null&&Cy(Su,l),Eu!==null&&Cy(Eu,l),Cu!==null&&Cy(Cu,l),Zp.forEach(d),Yp.forEach(d);for(var m=0;m<ku.length;m++){var w=ku[m];w.blockedOn===l&&(w.blockedOn=null)}for(;0<ku.length&&(m=ku[0],m.blockedOn===null);)bR(m),m.blockedOn===null&&ku.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(w=0;w<m.length;w+=3){var T=m[w],P=m[w+1],oe=T[de]||null;if(typeof P=="function")oe||wR(m);else if(oe){var Ee=null;if(P&&P.hasAttribute("formAction")){if(T=P,oe=P[de]||null)Ee=oe.formAction;else if(lx(T)!==null)continue}else Ee=oe.action;typeof Ee=="function"?m[w+1]=Ee:(m.splice(w,3),w-=3),wR(m)}}}function cx(l){this._internalRoot=l}Ay.prototype.render=cx.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var m=d.current,w=$i();hR(m,w,l,d,null,null)},Ay.prototype.unmount=cx.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;hR(l.current,2,null,l,null,null),ly(),d[Fe]=null}};function Ay(l){this._internalRoot=l}Ay.prototype.unstable_scheduleHydration=function(l){if(l){var d=q();l={blockedOn:null,target:l,priority:d};for(var m=0;m<ku.length&&d!==0&&d<ku[m].priority;m++);ku.splice(m,0,l),m===0&&bR(l)}};var _R=t.version;if(_R!=="19.1.0")throw Error(r(527,_R,"19.1.0"));ne.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var S7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ty=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ty.isDisabled&&Ty.supportsFiber)try{Et=Ty.inject(S7),Pt=Ty}catch{}}return em.createRoot=function(l,d){if(!a(l))throw Error(r(299));var m=!1,w="",T=FT,P=LT,oe=$T,Ee=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(P=d.onCaughtError),d.onRecoverableError!==void 0&&(oe=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(Ee=d.unstable_transitionCallbacks)),d=dR(l,1,!1,null,null,m,w,T,P,oe,Ee,null),l[Fe]=d.current,G_(l),new cx(d)},em.hydrateRoot=function(l,d,m){if(!a(l))throw Error(r(299));var w=!1,T="",P=FT,oe=LT,Ee=$T,ze=null,ut=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(P=m.onUncaughtError),m.onCaughtError!==void 0&&(oe=m.onCaughtError),m.onRecoverableError!==void 0&&(Ee=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ze=m.unstable_transitionCallbacks),m.formState!==void 0&&(ut=m.formState)),d=dR(l,1,!0,d,m??null,w,T,P,oe,Ee,ze,ut),d.context=fR(null),m=d.current,w=$i(),w=Ct(w),T=uu(w),T.callback=null,cu(m,T,w),m=w,d.current.lanes=m,et(d,m),bs(d),l[Fe]=d.current,G_(l),new Ay(d)},em.version="19.1.0",em}var IR;function $7(){if(IR)return hx.exports;IR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hx.exports=L7(),hx.exports}var B7=$7();const z7=ei(B7);function bO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=bO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function vO(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=bO(e))&&(r&&(r+=" "),r+=t);return r}const eC="-",U7=e=>{const t=H7(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(eC);return s[0]===""&&s.length!==1&&s.shift(),wO(s,t)||q7(o)},getConflictingClassGroupIds:(o,s)=>{const u=n[o]||[];return s&&r[o]?[...u,...r[o]]:u}}},wO=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?wO(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(eC);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},OR=/^\[(.+)\]$/,q7=e=>{if(OR.test(e)){const t=OR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},H7=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)O2(n[a],r,a,t);return r},O2=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:DR(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(V7(a)){O2(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{O2(o,DR(t,i),n,r)})})},DR=(e,t)=>{let n=e;return t.split(eC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},V7=e=>e.isThemeGetter,G7=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},D2="!",j2=":",W7=j2.length,K7=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,u=0,c;for(let v=0;v<a.length;v++){let b=a[v];if(o===0&&s===0){if(b===j2){i.push(a.slice(u,v)),u=v+W7;continue}if(b==="/"){c=v;continue}}b==="["?o++:b==="]"?o--:b==="("?s++:b===")"&&s--}const f=i.length===0?a:a.substring(u),h=Z7(f),p=h!==f,g=c&&c>u?c-u:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+j2,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},Z7=e=>e.endsWith(D2)?e.substring(0,e.length-1):e.startsWith(D2)?e.substring(1):e,Y7=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},X7=e=>({cache:G7(e.cacheSize),parseClassName:K7(e),sortModifiers:Y7(e),...U7(e)}),J7=/\s+/,Q7=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(J7);let u="";for(let c=s.length-1;c>=0;c-=1){const f=s[c],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(f);if(h){u=f+(u.length>0?" "+u:u);continue}let _=!!b,x=r(_?v.substring(0,b):v);if(!x){if(!_){u=f+(u.length>0?" "+u:u);continue}if(x=r(v),!x){u=f+(u.length>0?" "+u:u);continue}_=!1}const S=i(p).join(":"),E=g?S+D2:S,C=E+x;if(o.includes(C))continue;o.push(C);const k=a(x,_);for(let O=0;O<k.length;++O){const N=k[O];o.push(E+N)}u=f+(u.length>0?" "+u:u)}return u};function ez(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=_O(t))&&(r&&(r+=" "),r+=n);return r}const _O=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=_O(e[r]))&&(n&&(n+=" "),n+=t);return n};function tz(e,...t){let n,r,a,i=o;function o(u){const c=t.reduce((f,h)=>h(f),e());return n=X7(c),r=n.cache.get,a=n.cache.set,i=s,s(u)}function s(u){const c=r(u);if(c)return c;const f=Q7(u,n);return a(u,f),f}return function(){return i(ez.apply(null,arguments))}}const fa=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},xO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,SO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nz=/^\d+\/\d+$/,rz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,az=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wf=e=>nz.test(e),$n=e=>!!e&&!Number.isNaN(Number(e)),Tu=e=>!!e&&Number.isInteger(Number(e)),yx=e=>e.endsWith("%")&&$n(e.slice(0,-1)),gl=e=>rz.test(e),lz=()=>!0,uz=e=>az.test(e)&&!iz.test(e),EO=()=>!1,cz=e=>oz.test(e),dz=e=>sz.test(e),fz=e=>!en(e)&&!tn(e),hz=e=>yh(e,AO,EO),en=e=>xO.test(e),qc=e=>yh(e,TO,uz),bx=e=>yh(e,bz,$n),jR=e=>yh(e,CO,EO),pz=e=>yh(e,kO,dz),Ry=e=>yh(e,RO,cz),tn=e=>SO.test(e),tm=e=>bh(e,TO),mz=e=>bh(e,vz),MR=e=>bh(e,CO),gz=e=>bh(e,AO),yz=e=>bh(e,kO),Ny=e=>bh(e,RO,!0),yh=(e,t,n)=>{const r=xO.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},bh=(e,t,n=!1)=>{const r=SO.exec(e);return r?r[1]?t(r[1]):n:!1},CO=e=>e==="position"||e==="percentage",kO=e=>e==="image"||e==="url",AO=e=>e==="length"||e==="size"||e==="bg-size",TO=e=>e==="length",bz=e=>e==="number",vz=e=>e==="family-name",RO=e=>e==="shadow",wz=()=>{const e=fa("color"),t=fa("font"),n=fa("text"),r=fa("font-weight"),a=fa("tracking"),i=fa("leading"),o=fa("breakpoint"),s=fa("container"),u=fa("spacing"),c=fa("radius"),f=fa("shadow"),h=fa("inset-shadow"),p=fa("text-shadow"),g=fa("drop-shadow"),v=fa("blur"),b=fa("perspective"),_=fa("aspect"),x=fa("ease"),S=fa("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),tn,en],O=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],D=()=>[tn,en,u],U=()=>[wf,"full","auto",...D()],W=()=>[Tu,"none","subgrid",tn,en],Q=()=>["auto",{span:["full",Tu,tn,en]},Tu,tn,en],F=()=>[Tu,"auto",tn,en],Z=()=>["auto","min","max","fr",tn,en],L=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],he=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...D()],ne=()=>[wf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],ee=()=>[e,tn,en],se=()=>[...C(),MR,jR,{position:[tn,en]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",gz,hz,{size:[tn,en]}],Y=()=>[yx,tm,qc],re=()=>["","none","full",c,tn,en],be=()=>["",$n,tm,qc],we=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[$n,yx,MR,jR],Ae=()=>["","none",v,tn,en],Te=()=>["none",$n,tn,en],qe=()=>["none",$n,tn,en],it=()=>[$n,tn,en],Ie=()=>[wf,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[gl],breakpoint:[gl],color:[lz],container:[gl],"drop-shadow":[gl],ease:["in","out","in-out"],font:[fz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[gl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[gl],shadow:[gl],spacing:["px",$n],text:[gl],"text-shadow":[gl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wf,en,tn,_]}],container:["container"],columns:[{columns:[$n,en,tn,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[Tu,"auto",tn,en]}],basis:[{basis:[wf,"full","auto",s,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$n,wf,"auto","initial","none",en]}],grow:[{grow:["",$n,tn,en]}],shrink:[{shrink:["",$n,tn,en]}],order:[{order:[Tu,"first","last","none",tn,en]}],"grid-cols":[{"grid-cols":W()}],"col-start-end":[{col:Q()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":W()}],"row-start-end":[{row:Q()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...L(),"normal"]}],"justify-items":[{"justify-items":[...he(),"normal"]}],"justify-self":[{"justify-self":["auto",...he()]}],"align-content":[{content:["normal",...L()]}],"align-items":[{items:[...he(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...he(),{baseline:["","last"]}]}],"place-content":[{"place-content":L()}],"place-items":[{"place-items":[...he(),"baseline"]}],"place-self":[{"place-self":["auto",...he()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[s,"screen",...ne()]}],"min-w":[{"min-w":[s,"screen","none",...ne()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...ne()]}],h:[{h:["screen",...ne()]}],"min-h":[{"min-h":["screen","none",...ne()]}],"max-h":[{"max-h":["screen",...ne()]}],"font-size":[{text:["base",n,tm,qc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tn,bx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",yx,en]}],"font-family":[{font:[mz,en,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tn,en]}],"line-clamp":[{"line-clamp":[$n,"none",tn,bx]}],leading:[{leading:[i,...D()]}],"list-image":[{"list-image":["none",tn,en]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tn,en]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ee()}],"text-color":[{text:ee()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...we(),"wavy"]}],"text-decoration-thickness":[{decoration:[$n,"from-font","auto",tn,qc]}],"text-decoration-color":[{decoration:ee()}],"underline-offset":[{"underline-offset":[$n,"auto",tn,en]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn,en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn,en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Tu,tn,en],radial:["",tn,en],conic:[Tu,tn,en]},yz,pz]}],"bg-color":[{bg:ee()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:ee()}],"gradient-via":[{via:ee()}],"gradient-to":[{to:ee()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...we(),"hidden","none"]}],"divide-style":[{divide:[...we(),"hidden","none"]}],"border-color":[{border:ee()}],"border-color-x":[{"border-x":ee()}],"border-color-y":[{"border-y":ee()}],"border-color-s":[{"border-s":ee()}],"border-color-e":[{"border-e":ee()}],"border-color-t":[{"border-t":ee()}],"border-color-r":[{"border-r":ee()}],"border-color-b":[{"border-b":ee()}],"border-color-l":[{"border-l":ee()}],"divide-color":[{divide:ee()}],"outline-style":[{outline:[...we(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$n,tn,en]}],"outline-w":[{outline:["",$n,tm,qc]}],"outline-color":[{outline:ee()}],shadow:[{shadow:["","none",f,Ny,Ry]}],"shadow-color":[{shadow:ee()}],"inset-shadow":[{"inset-shadow":["none",h,Ny,Ry]}],"inset-shadow-color":[{"inset-shadow":ee()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ee()}],"ring-offset-w":[{"ring-offset":[$n,qc]}],"ring-offset-color":[{"ring-offset":ee()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":ee()}],"text-shadow":[{"text-shadow":["none",p,Ny,Ry]}],"text-shadow-color":[{"text-shadow":ee()}],opacity:[{opacity:[$n,tn,en]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$n]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":ee()}],"mask-image-linear-to-color":[{"mask-linear-to":ee()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":ee()}],"mask-image-t-to-color":[{"mask-t-to":ee()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":ee()}],"mask-image-r-to-color":[{"mask-r-to":ee()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":ee()}],"mask-image-b-to-color":[{"mask-b-to":ee()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":ee()}],"mask-image-l-to-color":[{"mask-l-to":ee()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":ee()}],"mask-image-x-to-color":[{"mask-x-to":ee()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":ee()}],"mask-image-y-to-color":[{"mask-y-to":ee()}],"mask-image-radial":[{"mask-radial":[tn,en]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":ee()}],"mask-image-radial-to-color":[{"mask-radial-to":ee()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[$n]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":ee()}],"mask-image-conic-to-color":[{"mask-conic-to":ee()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tn,en]}],filter:[{filter:["","none",tn,en]}],blur:[{blur:Ae()}],brightness:[{brightness:[$n,tn,en]}],contrast:[{contrast:[$n,tn,en]}],"drop-shadow":[{"drop-shadow":["","none",g,Ny,Ry]}],"drop-shadow-color":[{"drop-shadow":ee()}],grayscale:[{grayscale:["",$n,tn,en]}],"hue-rotate":[{"hue-rotate":[$n,tn,en]}],invert:[{invert:["",$n,tn,en]}],saturate:[{saturate:[$n,tn,en]}],sepia:[{sepia:["",$n,tn,en]}],"backdrop-filter":[{"backdrop-filter":["","none",tn,en]}],"backdrop-blur":[{"backdrop-blur":Ae()}],"backdrop-brightness":[{"backdrop-brightness":[$n,tn,en]}],"backdrop-contrast":[{"backdrop-contrast":[$n,tn,en]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$n,tn,en]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$n,tn,en]}],"backdrop-invert":[{"backdrop-invert":["",$n,tn,en]}],"backdrop-opacity":[{"backdrop-opacity":[$n,tn,en]}],"backdrop-saturate":[{"backdrop-saturate":[$n,tn,en]}],"backdrop-sepia":[{"backdrop-sepia":["",$n,tn,en]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tn,en]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$n,"initial",tn,en]}],ease:[{ease:["linear","initial",x,tn,en]}],delay:[{delay:[$n,tn,en]}],animate:[{animate:["none",S,tn,en]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,tn,en]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:qe()}],"scale-x":[{"scale-x":qe()}],"scale-y":[{"scale-y":qe()}],"scale-z":[{"scale-z":qe()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[tn,en,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ie()}],"translate-x":[{"translate-x":Ie()}],"translate-y":[{"translate-y":Ie()}],"translate-z":[{"translate-z":Ie()}],"translate-none":["translate-none"],accent:[{accent:ee()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ee()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn,en]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn,en]}],fill:[{fill:["none",...ee()]}],"stroke-w":[{stroke:[$n,tm,qc,bx]}],stroke:[{stroke:["none",...ee()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},_z=tz(wz);function $t(...e){return _z(vO(e))}const PR=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:$t(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(vt.Fragment,{children:i},a.id):null})})};function FR(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Bu(...e){return t=>{let n=!1;const r=e.map(a=>{const i=FR(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():FR(e[a],null)}}}}function _n(...e){return R.useCallback(Bu(...e),e)}function zu(e){const t=xz(e),n=R.forwardRef((r,a)=>{const{children:i,...o}=r,s=R.Children.toArray(i),u=s.find(Ez);if(u){const c=u.props.children,f=s.map(h=>h===u?R.Children.count(c)>1?R.Children.only(null):R.isValidElement(c)?c.props.children:null:h);return y.jsx(t,{...o,ref:a,children:R.isValidElement(c)?R.cloneElement(c,void 0,f):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var NO=zu("Slot");function xz(e){const t=R.forwardRef((n,r)=>{const{children:a,...i}=n;if(R.isValidElement(a)){const o=kz(a),s=Cz(i,a.props);return a.type!==R.Fragment&&(s.ref=r?Bu(r,o):o),R.cloneElement(a,s)}return R.Children.count(a)>1?R.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var IO=Symbol("radix.slottable");function Sz(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=IO,t}function Ez(e){return R.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===IO}function Cz(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function kz(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const LR=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,$R=vO,tC=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return $R(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const f=n==null?void 0:n[c],h=i==null?void 0:i[c];if(f===null)return null;const p=LR(f)||LR(h);return a[c][p]}),s=n&&Object.entries(n).reduce((c,f)=>{let[h,p]=f;return p===void 0||(c[h]=p),c},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:p,...g}=f;return Object.entries(g).every(v=>{let[b,_]=v;return Array.isArray(_)?_.includes({...i,...s}[b]):{...i,...s}[b]===_})?[...c,h,p]:c},[]);return $R(e,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},Az=tC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Lt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?NO:"button";return y.jsx(i,{"data-slot":"button",className:$t(Az({variant:t,size:n,className:e})),...a})}const BR=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,p))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(r,a,s);return s},Tz=e=>e?BR(e):BR,Rz=e=>e;function Nz(e,t=Rz){const n=vt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return vt.useDebugValue(n),n}const zR=e=>{const t=Tz(e),n=r=>Nz(t,r);return Object.assign(n,t),n},Bl=e=>e?zR(e):zR;var OO=Symbol.for("immer-nothing"),UR=Symbol.for("immer-draftable"),rr=Symbol.for("immer-state");function bo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Gf=Object.getPrototypeOf;function Wf(e){return!!e&&!!e[rr]}function Il(e){var t;return e?DO(e)||Array.isArray(e)||!!e[UR]||!!((t=e.constructor)!=null&&t[UR])||Bv(e)||zv(e):!1}var Iz=Object.prototype.constructor.toString();function DO(e){if(!e||typeof e!="object")return!1;const t=Gf(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Iz}function xm(e,t){$v(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function $v(e){const t=e[rr];return t?t.type_:Array.isArray(e)?1:Bv(e)?2:zv(e)?3:0}function M2(e,t){return $v(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function jO(e,t,n){const r=$v(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Oz(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Bv(e){return e instanceof Map}function zv(e){return e instanceof Set}function Ea(e){return e.copy_||e.base_}function P2(e,t){if(Bv(e))return new Map(e);if(zv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=DO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[rr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Gf(e),r)}else{const r=Gf(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function nC(e,t=!1){return Uv(e)||Wf(e)||!Il(e)||($v(e)>1&&(e.set=e.add=e.clear=e.delete=Dz),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>nC(r,!0))),e}function Dz(){bo(2)}function Uv(e){return Object.isFrozen(e)}var F2={};function id(e){const t=F2[e];return t||bo(0,e),t}function jz(e,t){F2[e]||(F2[e]=t)}var Sm;function _b(){return Sm}function Mz(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qR(e,t){t&&(id("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function L2(e){$2(e),e.drafts_.forEach(Pz),e.drafts_=null}function $2(e){e===Sm&&(Sm=e.parent_)}function HR(e){return Sm=Mz(Sm,e)}function Pz(e){const t=e[rr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function VR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[rr].modified_&&(L2(t),bo(4)),Il(e)&&(e=xb(t,e),t.parent_||Sb(t,e)),t.patches_&&id("Patches").generateReplacementPatches_(n[rr].base_,e,t.patches_,t.inversePatches_)):e=xb(t,n,[]),L2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==OO?e:void 0}function xb(e,t,n){if(Uv(t))return t;const r=t[rr];if(!r)return xm(t,(a,i)=>GR(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Sb(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),xm(i,(s,u)=>GR(e,r,a,s,u,n,o)),Sb(e,a,!1),n&&e.patches_&&id("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function GR(e,t,n,r,a,i,o){if(Wf(a)){const s=i&&t&&t.type_!==3&&!M2(t.assigned_,r)?i.concat(r):void 0,u=xb(e,a,s);if(jO(n,r,u),Wf(u))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(Il(a)&&!Uv(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xb(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Sb(e,a)}}function Sb(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nC(t,n)}function Fz(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:_b(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=rC;n&&(a=[r],i=Em);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var rC={get(e,t){if(t===rr)return e;const n=Ea(e);if(!M2(n,t))return Lz(e,n,t);const r=n[t];return e.finalized_||!Il(r)?r:r===vx(e.base_,t)?(wx(e),e.copy_[t]=Cm(r,e)):r},has(e,t){return t in Ea(e)},ownKeys(e){return Reflect.ownKeys(Ea(e))},set(e,t,n){const r=MO(Ea(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=vx(Ea(e),t),i=a==null?void 0:a[rr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Oz(n,a)&&(n!==void 0||M2(e.base_,t)))return!0;wx(e),wl(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return vx(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,wx(e),wl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ea(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){bo(11)},getPrototypeOf(e){return Gf(e.base_)},setPrototypeOf(){bo(12)}},Em={};xm(rC,(e,t)=>{Em[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Em.deleteProperty=function(e,t){return Em.set.call(this,e,t,void 0)};Em.set=function(e,t,n){return rC.set.call(this,e[0],t,n,e[0])};function vx(e,t){const n=e[rr];return(n?Ea(n):e)[t]}function Lz(e,t,n){var a;const r=MO(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function MO(e,t){if(!(t in e))return;let n=Gf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Gf(n)}}function wl(e){e.modified_||(e.modified_=!0,e.parent_&&wl(e.parent_))}function wx(e){e.copy_||(e.copy_=P2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var $z=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(u=i,...c){return o.produce(u,f=>n.call(this,f,...c))}}typeof n!="function"&&bo(6),r!==void 0&&typeof r!="function"&&bo(7);let a;if(Il(t)){const i=HR(this),o=Cm(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?L2(i):$2(i)}return qR(i,r),VR(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===OO&&(a=void 0),this.autoFreeze_&&nC(a,!0),r){const i=[],o=[];id("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else bo(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,u=>t(u,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Il(e)||bo(8),Wf(e)&&(e=Bz(e));const t=HR(this),n=Cm(e,void 0);return n[rr].isManual_=!0,$2(t),n}finishDraft(e,t){const n=e&&e[rr];(!n||!n.isManual_)&&bo(9);const{scope_:r}=n;return qR(r,t),VR(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=id("Patches").applyPatches_;return Wf(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Cm(e,t){const n=Bv(e)?id("MapSet").proxyMap_(e,t):zv(e)?id("MapSet").proxySet_(e,t):Fz(e,t);return(t?t.scope_:_b()).drafts_.push(n),n}function Bz(e){return Wf(e)||bo(10,e),PO(e)}function PO(e){if(!Il(e)||Uv(e))return e;const t=e[rr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=P2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=P2(e,!0);return xm(n,(r,a)=>{jO(n,r,PO(a))}),t&&(t.finalized_=!1),n}function zz(){class e extends Map{constructor(u,c){super(),this[rr]={type_:2,parent_:c,scope_:c?c.scope_:_b(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Ea(this[rr]).size}has(u){return Ea(this[rr]).has(u)}set(u,c){const f=this[rr];return o(f),(!Ea(f).has(u)||Ea(f).get(u)!==c)&&(n(f),wl(f),f.assigned_.set(u,!0),f.copy_.set(u,c),f.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const c=this[rr];return o(c),n(c),wl(c),c.base_.has(u)?c.assigned_.set(u,!1):c.assigned_.delete(u),c.copy_.delete(u),!0}clear(){const u=this[rr];o(u),Ea(u).size&&(n(u),wl(u),u.assigned_=new Map,xm(u.base_,c=>{u.assigned_.set(c,!1)}),u.copy_.clear())}forEach(u,c){const f=this[rr];Ea(f).forEach((h,p,g)=>{u.call(c,this.get(p),p,this)})}get(u){const c=this[rr];o(c);const f=Ea(c).get(u);if(c.finalized_||!Il(f)||f!==c.base_.get(u))return f;const h=Cm(f,c);return n(c),c.copy_.set(u,h),h}keys(){return Ea(this[rr]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=u.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=u.next();if(c.done)return c;const f=this.get(c.value);return{done:!1,value:[c.value,f]}}}}[Symbol.iterator](){return this.entries()}}function t(s,u){return new e(s,u)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(u,c){super(),this[rr]={type_:3,parent_:c,scope_:c?c.scope_:_b(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Ea(this[rr]).size}has(u){const c=this[rr];return o(c),c.copy_?!!(c.copy_.has(u)||c.drafts_.has(u)&&c.copy_.has(c.drafts_.get(u))):c.base_.has(u)}add(u){const c=this[rr];return o(c),this.has(u)||(i(c),wl(c),c.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const c=this[rr];return o(c),i(c),wl(c),c.copy_.delete(u)||(c.drafts_.has(u)?c.copy_.delete(c.drafts_.get(u)):!1)}clear(){const u=this[rr];o(u),Ea(u).size&&(i(u),wl(u),u.copy_.clear())}values(){const u=this[rr];return o(u),i(u),u.copy_.values()}entries(){const u=this[rr];return o(u),i(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,c){const f=this.values();let h=f.next();for(;!h.done;)u.call(c,h.value,h.value,this),h=f.next()}}function a(s,u){return new r(s,u)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(u=>{if(Il(u)){const c=Cm(u,s);s.drafts_.set(u,c),s.copy_.add(c)}else s.copy_.add(u)}))}function o(s){s.revoked_&&bo(3,JSON.stringify(Ea(s)))}jz("MapSet",{proxyMap_:t,proxySet_:a})}var Yi=new $z,Uz=Yi.produce;Yi.produceWithPatches.bind(Yi);Yi.setAutoFreeze.bind(Yi);Yi.setUseStrictShallowCopy.bind(Yi);Yi.applyPatches.bind(Yi);Yi.createDraft.bind(Yi);Yi.finishDraft.bind(Yi);const qz=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?Uz(a):a;return t(s,i,...o)},e(r.setState,n,r)),zl=qz,Na=Bl(zl((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((u,c)=>(u.order??0)-(c.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var cb={exports:{}},Hz=cb.exports,WR;function Vz(){return WR||(WR=1,function(e,t){(function(n,r){e.exports=r()})(Hz,function(){var n=function(A,j){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,te){K.__proto__=te}||function(K,te){for(var ue in te)Object.prototype.hasOwnProperty.call(te,ue)&&(K[ue]=te[ue])})(A,j)},r=function(){return(r=Object.assign||function(A){for(var j,K=1,te=arguments.length;K<te;K++)for(var ue in j=arguments[K])Object.prototype.hasOwnProperty.call(j,ue)&&(A[ue]=j[ue]);return A}).apply(this,arguments)};function a(A,j,K){for(var te,ue=0,_e=j.length;ue<_e;ue++)!te&&ue in j||((te=te||Array.prototype.slice.call(j,0,ue))[ue]=j[ue]);return A.concat(te||Array.prototype.slice.call(j))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ed,o=Object.keys,s=Array.isArray;function u(A,j){return typeof j!="object"||o(j).forEach(function(K){A[K]=j[K]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function h(A,j){return f.call(A,j)}function p(A,j){typeof j=="function"&&(j=j(c(A))),(typeof Reflect>"u"?o:Reflect.ownKeys)(j).forEach(function(K){v(A,K,j[K])})}var g=Object.defineProperty;function v(A,j,K,te){g(A,j,u(K&&h(K,"get")&&typeof K.get=="function"?{get:K.get,set:K.set,configurable:!0}:{value:K,configurable:!0,writable:!0},te))}function b(A){return{from:function(j){return A.prototype=Object.create(j.prototype),v(A.prototype,"constructor",A),{extend:p.bind(null,A.prototype)}}}}var _=Object.getOwnPropertyDescriptor,x=[].slice;function S(A,j,K){return x.call(A,j,K)}function E(A,j){return j(A)}function C(A){if(!A)throw new Error("Assertion Failed")}function k(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function O(A,j){if(typeof j=="string"&&h(A,j))return A[j];if(!j)return A;if(typeof j!="string"){for(var K=[],te=0,ue=j.length;te<ue;++te){var _e=O(A,j[te]);K.push(_e)}return K}var je=j.indexOf(".");if(je!==-1){var $e=A[j.substr(0,je)];return $e==null?void 0:O($e,j.substr(je+1))}}function N(A,j,K){if(A&&j!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof j!="string"&&"length"in j){C(typeof K!="string"&&"length"in K);for(var te=0,ue=j.length;te<ue;++te)N(A,j[te],K[te])}else{var _e,je,$e=j.indexOf(".");$e!==-1?(_e=j.substr(0,$e),(je=j.substr($e+1))===""?K===void 0?s(A)&&!isNaN(parseInt(_e))?A.splice(_e,1):delete A[_e]:A[_e]=K:N($e=!($e=A[_e])||!h(A,_e)?A[_e]={}:$e,je,K)):K===void 0?s(A)&&!isNaN(parseInt(j))?A.splice(j,1):delete A[j]:A[j]=K}}function D(A){var j,K={};for(j in A)h(A,j)&&(K[j]=A[j]);return K}var U=[].concat;function W(A){return U.apply([],A)}var Et="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(j){return j+A+"Array"})}))).filter(function(A){return i[A]}),Q=new Set(Et.map(function(A){return i[A]})),F=null;function Z(A){return F=new WeakMap,A=function j(K){if(!K||typeof K!="object")return K;var te=F.get(K);if(te)return te;if(s(K)){te=[],F.set(K,te);for(var ue=0,_e=K.length;ue<_e;++ue)te.push(j(K[ue]))}else if(Q.has(K.constructor))te=K;else{var je,$e=c(K);for(je in te=$e===Object.prototype?{}:Object.create($e),F.set(K,te),K)h(K,je)&&(te[je]=j(K[je]))}return te}(A),F=null,A}var L={}.toString;function he(A){return L.call(A).slice(8,-1)}var ie=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof ie=="symbol"?function(A){var j;return A!=null&&(j=A[ie])&&j.apply(A)}:function(){return null};function ee(A,j){return j=A.indexOf(j),0<=j&&A.splice(j,1),0<=j}var se={};function G(A){var j,K,te,ue;if(arguments.length===1){if(s(A))return A.slice();if(this===se&&typeof A=="string")return[A];if(ue=ne(A)){for(K=[];!(te=ue.next()).done;)K.push(te.value);return K}if(A==null)return[A];if(typeof(j=A.length)!="number")return[A];for(K=new Array(j);j--;)K[j]=A[j];return K}for(j=arguments.length,K=new Array(j);j--;)K[j]=arguments[j];return K}var X=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ht=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ii=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ht),Y={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function re(A,j){this.name=A,this.message=j}function be(A,j){return A+". Errors: "+Object.keys(j).map(function(K){return j[K].toString()}).filter(function(K,te,ue){return ue.indexOf(K)===te}).join(`
`)}function we(A,j,K,te){this.failures=j,this.failedKeys=te,this.successCount=K,this.message=be(A,j)}function Me(A,j){this.name="BulkError",this.failures=Object.keys(j).map(function(K){return j[K]}),this.failuresByPos=j,this.message=be(A,this.failures)}b(re).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(we).from(re),b(Me).from(re);var Pe=ii.reduce(function(A,j){return A[j]=j+"Error",A},{}),Ae=re,Te=ii.reduce(function(A,j){var K=j+"Error";function te(ue,_e){this.name=K,ue?typeof ue=="string"?(this.message="".concat(ue).concat(_e?`
 `+_e:""),this.inner=_e||null):typeof ue=="object"&&(this.message="".concat(ue.name," ").concat(ue.message),this.inner=ue):(this.message=Y[j]||K,this.inner=null)}return b(te).from(Ae),A[j]=te,A},{});Te.Syntax=SyntaxError,Te.Type=TypeError,Te.Range=RangeError;var qe=ht.reduce(function(A,j){return A[j+"Error"]=Te[j],A},{}),it=ii.reduce(function(A,j){return["Syntax","Type","Range"].indexOf(j)===-1&&(A[j+"Error"]=Te[j]),A},{});function Ie(){}function Re(A){return A}function z(A,j){return A==null||A===Re?j:function(K){return j(A(K))}}function Ce(A,j){return function(){A.apply(this,arguments),j.apply(this,arguments)}}function Ne(A,j){return A===Ie?j:function(){var K=A.apply(this,arguments);K!==void 0&&(arguments[0]=K);var te=this.onsuccess,ue=this.onerror;this.onsuccess=null,this.onerror=null;var _e=j.apply(this,arguments);return te&&(this.onsuccess=this.onsuccess?Ce(te,this.onsuccess):te),ue&&(this.onerror=this.onerror?Ce(ue,this.onerror):ue),_e!==void 0?_e:K}}function ce(A,j){return A===Ie?j:function(){A.apply(this,arguments);var K=this.onsuccess,te=this.onerror;this.onsuccess=this.onerror=null,j.apply(this,arguments),K&&(this.onsuccess=this.onsuccess?Ce(K,this.onsuccess):K),te&&(this.onerror=this.onerror?Ce(te,this.onerror):te)}}function ae(A,j){return A===Ie?j:function(K){var te=A.apply(this,arguments);u(K,te);var ue=this.onsuccess,_e=this.onerror;return this.onsuccess=null,this.onerror=null,K=j.apply(this,arguments),ue&&(this.onsuccess=this.onsuccess?Ce(ue,this.onsuccess):ue),_e&&(this.onerror=this.onerror?Ce(_e,this.onerror):_e),te===void 0?K===void 0?void 0:K:u(te,K)}}function J(A,j){return A===Ie?j:function(){return j.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function xe(A,j){return A===Ie?j:function(){var K=A.apply(this,arguments);if(K&&typeof K.then=="function"){for(var te=this,ue=arguments.length,_e=new Array(ue);ue--;)_e[ue]=arguments[ue];return K.then(function(){return j.apply(te,_e)})}return j.apply(this,arguments)}}it.ModifyError=we,it.DexieError=re,it.BulkError=Me;var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Se(A){Le=A}var Ve={},xt=100,Et=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,c(A),A];var j=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[j,c(j),A]}(),ht=Et[0],ii=Et[1],Et=Et[2],ii=ii&&ii.then,Pt=ht&&ht.constructor,Tt=!!Et,Ut=function(A,j){le.push([A,j]),I&&(queueMicrotask(ye),I=!1)},ge=!0,I=!0,H=[],fe=[],Oe=Re,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ie,pgp:!1,env:{},finalize:Ie},ke=ve,le=[],ct=0,yt=[];function M(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var j=this._PSD=ke;if(typeof A!="function"){if(A!==Ve)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&me(this,this._value))}this._state=null,this._value=null,++j.ref,function K(te,ue){try{ue(function(_e){if(te._state===null){if(_e===te)throw new TypeError("A promise cannot be resolved with itself.");var je=te._lib&&q();_e&&typeof _e.then=="function"?K(te,function($e,We){_e instanceof M?_e._then($e,We):_e.then($e,We)}):(te._state=!0,te._value=_e,De(te)),je&&B()}},me.bind(null,te))}catch(_e){me(te,_e)}}(this,A)}var Be={get:function(){var A=ke,j=zt;function K(te,ue){var _e=this,je=!A.global&&(A!==ke||j!==zt),$e=je&&!zn(),We=new M(function(Ye,tt){Ke(_e,new et(is(te,A,je,$e),is(ue,A,je,$e),Ye,tt,A))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return K.prototype=Ve,K},set:function(A){v(this,"then",A&&A.prototype===Ve?Be:{get:function(){return A},set:Be.set})}};function et(A,j,K,te,ue){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof j=="function"?j:null,this.resolve=K,this.reject=te,this.psd=ue}function me(A,j){var K,te;fe.push(j),A._state===null&&(K=A._lib&&q(),j=Oe(j),A._state=!1,A._value=j,te=A,H.some(function(ue){return ue._value===te._value})||H.push(te),De(A),K&&B())}function De(A){var j=A._listeners;A._listeners=[];for(var K=0,te=j.length;K<te;++K)Ke(A,j[K]);var ue=A._PSD;--ue.ref||ue.finalize(),ct===0&&(++ct,Ut(function(){--ct==0&&V()},[]))}function Ke(A,j){if(A._state!==null){var K=A._state?j.onFulfilled:j.onRejected;if(K===null)return(A._state?j.resolve:j.reject)(A._value);++j.psd.ref,++ct,Ut(Ct,[K,A,j])}else A._listeners.push(j)}function Ct(A,j,K){try{var te,ue=j._value;!j._state&&fe.length&&(fe=[]),te=Le&&j._consoleTask?j._consoleTask.run(function(){return A(ue)}):A(ue),j._state||fe.indexOf(ue)!==-1||function(_e){for(var je=H.length;je;)if(H[--je]._value===_e._value)return H.splice(je,1)}(j),K.resolve(te)}catch(_e){K.reject(_e)}finally{--ct==0&&V(),--K.psd.ref||K.psd.finalize()}}function ye(){as(ve,function(){q()&&B()})}function q(){var A=ge;return I=ge=!1,A}function B(){var A,j,K;do for(;0<le.length;)for(A=le,le=[],K=A.length,j=0;j<K;++j){var te=A[j];te[0].apply(null,te[1])}while(0<le.length);I=ge=!0}function V(){var A=H;H=[],A.forEach(function(te){te._PSD.onunhandled.call(null,te._value,te)});for(var j=yt.slice(0),K=j.length;K;)j[--K]()}function pe(A){return new M(Ve,!1,A)}function de(A,j){var K=ke;return function(){var te=q(),ue=ke;try{return jn(K,!0),A.apply(this,arguments)}catch(_e){j&&j(_e)}finally{jn(ue,!1),te&&B()}}}p(M.prototype,{then:Be,_then:function(A,j){Ke(this,new et(null,null,A,j,ke))},catch:function(A){if(arguments.length===1)return this.then(null,A);var j=A,K=arguments[1];return typeof j=="function"?this.then(null,function(te){return(te instanceof j?K:pe)(te)}):this.then(null,function(te){return(te&&te.name===j?K:pe)(te)})},finally:function(A){return this.then(function(j){return M.resolve(A()).then(function(){return j})},function(j){return M.resolve(A()).then(function(){return pe(j)})})},timeout:function(A,j){var K=this;return A<1/0?new M(function(te,ue){var _e=setTimeout(function(){return ue(new Te.Timeout(j))},A);K.then(te,ue).finally(clearTimeout.bind(null,_e))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(M.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=ni(),p(M,{all:function(){var A=G.apply(null,arguments).map(fr);return new M(function(j,K){A.length===0&&j([]);var te=A.length;A.forEach(function(ue,_e){return M.resolve(ue).then(function(je){A[_e]=je,--te||j(A)},K)})})},resolve:function(A){return A instanceof M?A:A&&typeof A.then=="function"?new M(function(j,K){A.then(j,K)}):new M(Ve,!0,A)},reject:pe,race:function(){var A=G.apply(null,arguments).map(fr);return new M(function(j,K){A.map(function(te){return M.resolve(te).then(j,K)})})},PSD:{get:function(){return ke},set:function(A){return ke=A}},totalEchoes:{get:function(){return zt}},newPSD:Xt,usePSD:as,scheduler:{get:function(){return Ut},set:function(A){Ut=A}},rejectionMapper:{get:function(){return Oe},set:function(A){Oe=A}},follow:function(A,j){return new M(function(K,te){return Xt(function(ue,_e){var je=ke;je.unhandleds=[],je.onunhandled=_e,je.finalize=Ce(function(){var $e,We=this;$e=function(){We.unhandleds.length===0?ue():_e(We.unhandleds[0])},yt.push(function Ye(){$e(),yt.splice(yt.indexOf(Ye),1)}),++ct,Ut(function(){--ct==0&&V()},[])},je.finalize),A()},j,K,te)})}}),Pt&&(Pt.allSettled&&v(M,"allSettled",function(){var A=G.apply(null,arguments).map(fr);return new M(function(j){A.length===0&&j([]);var K=A.length,te=new Array(K);A.forEach(function(ue,_e){return M.resolve(ue).then(function(je){return te[_e]={status:"fulfilled",value:je}},function(je){return te[_e]={status:"rejected",reason:je}}).then(function(){return--K||j(te)})})})}),Pt.any&&typeof AggregateError<"u"&&v(M,"any",function(){var A=G.apply(null,arguments).map(fr);return new M(function(j,K){A.length===0&&K(new AggregateError([]));var te=A.length,ue=new Array(te);A.forEach(function(_e,je){return M.resolve(_e).then(function($e){return j($e)},function($e){ue[je]=$e,--te||K(new AggregateError(ue))})})})}),Pt.withResolvers&&(M.withResolvers=Pt.withResolvers));var Fe={awaits:0,echoes:0,id:0},ot=0,Dt=[],un=0,zt=0,Vt=0;function Xt(A,j,K,te){var ue=ke,_e=Object.create(ue);return _e.parent=ue,_e.ref=0,_e.global=!1,_e.id=++Vt,ve.env,_e.env=Tt?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},j&&u(_e,j),++ue.ref,_e.finalize=function(){--this.parent.ref||this.parent.finalize()},te=as(_e,A,K,te),_e.ref===0&&_e.finalize(),te}function Rn(){return Fe.id||(Fe.id=++ot),++Fe.awaits,Fe.echoes+=xt,Fe.id}function zn(){return!!Fe.awaits&&(--Fe.awaits==0&&(Fe.id=0),Fe.echoes=Fe.awaits*xt,!0)}function fr(A){return Fe.echoes&&A&&A.constructor===Pt?(Rn(),A.then(function(j){return zn(),j},function(j){return zn(),$r(j)})):A}function hr(){var A=Dt[Dt.length-1];Dt.pop(),jn(A,!1)}function jn(A,j){var K,te=ke;(j?!Fe.echoes||un++&&A===ke:!un||--un&&A===ke)||queueMicrotask(j?(function(ue){++zt,Fe.echoes&&--Fe.echoes!=0||(Fe.echoes=Fe.awaits=Fe.id=0),Dt.push(ke),jn(ue,!0)}).bind(null,A):hr),A!==ke&&(ke=A,te===ve&&(ve.env=ni()),Tt&&(K=ve.env.Promise,j=A.env,(te.global||A.global)&&(Object.defineProperty(i,"Promise",j.PromiseProp),K.all=j.all,K.race=j.race,K.resolve=j.resolve,K.reject=j.reject,j.allSettled&&(K.allSettled=j.allSettled),j.any&&(K.any=j.any))))}function ni(){var A=i.Promise;return Tt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function as(A,j,K,te,ue){var _e=ke;try{return jn(A,!0),j(K,te,ue)}finally{jn(_e,!1)}}function is(A,j,K,te){return typeof A!="function"?A:function(){var ue=ke;K&&Rn(),jn(j,!0);try{return A.apply(this,arguments)}finally{jn(ue,!1),te&&queueMicrotask(zn)}}}function os(A){Promise===Pt&&Fe.echoes===0?un===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+ii).indexOf("[native code]")===-1&&(Rn=zn=Ie);var $r=M.reject,ss="",Ji="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",vg="String expected.",To=[],Vs="__dbnames",Di="readonly",xc="readwrite";function ls(A,j){return A?j?function(){return A.apply(this,arguments)&&j.apply(this,arguments)}:A:j}var Gs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Gl(A){return typeof A!="string"||/\./.test(A)?function(j){return j}:function(j){return j[A]===void 0&&A in j&&delete(j=Z(j))[A],j}}function Nd(){throw Te.Type()}function Un(A,j){try{var K=Yh(A),te=Yh(j);if(K!==te)return K==="Array"?1:te==="Array"?-1:K==="binary"?1:te==="binary"?-1:K==="string"?1:te==="string"?-1:K==="Date"?1:te!=="Date"?NaN:-1;switch(K){case"number":case"Date":case"string":return j<A?1:A<j?-1:0;case"binary":return function(ue,_e){for(var je=ue.length,$e=_e.length,We=je<$e?je:$e,Ye=0;Ye<We;++Ye)if(ue[Ye]!==_e[Ye])return ue[Ye]<_e[Ye]?-1:1;return je===$e?0:je<$e?-1:1}(ri(A),ri(j));case"Array":return function(ue,_e){for(var je=ue.length,$e=_e.length,We=je<$e?je:$e,Ye=0;Ye<We;++Ye){var tt=Un(ue[Ye],_e[Ye]);if(tt!==0)return tt}return je===$e?0:je<$e?-1:1}(A,j)}}catch{}return NaN}function Yh(A){var j=typeof A;return j!="object"?j:ArrayBuffer.isView(A)?"binary":(A=he(A),A==="ArrayBuffer"?"binary":A)}function ri(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var Xh=(xr.prototype._trans=function(A,j,K){var te=this._tx||ke.trans,ue=this.name,_e=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function je(Ye,tt,He){if(!He.schema[ue])throw new Te.NotFound("Table "+ue+" not part of transaction");return j(He.idbtrans,He)}var $e=q();try{var We=te&&te.db._novip===this.db._novip?te===ke.trans?te._promise(A,je,K):Xt(function(){return te._promise(A,je,K)},{trans:te,transless:ke.transless||ke}):function Ye(tt,He,rt,Ge){if(tt.idbdb&&(tt._state.openComplete||ke.letThrough||tt._vip)){var Qe=tt._createTransaction(He,rt,tt._dbSchema);try{Qe.create(),tt._state.PR1398_maxLoop=3}catch(at){return at.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,He,rt,Ge)})):$r(at)}return Qe._promise(He,function(at,Xe){return Xt(function(){return ke.trans=Qe,Ge(at,Xe,Qe)})}).then(function(at){if(He==="readwrite")try{Qe.idbtrans.commit()}catch{}return He==="readonly"?at:Qe._completion.then(function(){return at})})}if(tt._state.openComplete)return $r(new Te.DatabaseClosed(tt._state.dbOpenError));if(!tt._state.isBeingOpened){if(!tt._state.autoOpen)return $r(new Te.DatabaseClosed);tt.open().catch(Ie)}return tt._state.dbReadyPromise.then(function(){return Ye(tt,He,rt,Ge)})}(this.db,A,[this.name],je);return _e&&(We._consoleTask=_e,We=We.catch(function(Ye){return console.trace(Ye),$r(Ye)})),We}finally{$e&&B()}},xr.prototype.get=function(A,j){var K=this;return A&&A.constructor===Object?this.where(A).first(j):A==null?$r(new Te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(te){return K.core.get({trans:te,key:A}).then(function(ue){return K.hook.reading.fire(ue)})}).then(j)},xr.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(s(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var j=o(A);if(j.length===1)return this.where(j[0]).equals(A[j[0]]);var K=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&j.every(function(Ye){return 0<=$e.keyPath.indexOf(Ye)})){for(var We=0;We<j.length;++We)if(j.indexOf($e.keyPath[We])===-1)return!1;return!0}return!1}).sort(function($e,We){return $e.keyPath.length-We.keyPath.length})[0];if(K&&this.db._maxKey!==ss){var _e=K.keyPath.slice(0,j.length);return this.where(_e).equals(_e.map(function(We){return A[We]}))}!K&&Le&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(j.join("+"),"]"));var te=this.schema.idxByName;function ue($e,We){return Un($e,We)===0}var je=j.reduce(function(He,We){var Ye=He[0],tt=He[1],He=te[We],rt=A[We];return[Ye||He,Ye||!He?ls(tt,He&&He.multi?function(Ge){return Ge=O(Ge,We),s(Ge)&&Ge.some(function(Qe){return ue(rt,Qe)})}:function(Ge){return ue(rt,O(Ge,We))}):tt]},[null,null]),_e=je[0],je=je[1];return _e?this.where(_e.name).equals(A[_e.keyPath]).filter(je):K?this.filter(je):this.where(j).equals("")},xr.prototype.filter=function(A){return this.toCollection().and(A)},xr.prototype.count=function(A){return this.toCollection().count(A)},xr.prototype.offset=function(A){return this.toCollection().offset(A)},xr.prototype.limit=function(A){return this.toCollection().limit(A)},xr.prototype.each=function(A){return this.toCollection().each(A)},xr.prototype.toArray=function(A){return this.toCollection().toArray(A)},xr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xr.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,s(A)?"[".concat(A.join("+"),"]"):A))},xr.prototype.reverse=function(){return this.toCollection().reverse()},xr.prototype.mapToClass=function(A){var j,K=this.db,te=this.name;function ue(){return j!==null&&j.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof Nd&&(function(We,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function tt(){this.constructor=We}n(We,Ye),We.prototype=Ye===null?Object.create(Ye):(tt.prototype=Ye.prototype,new tt)}(ue,j=A),Object.defineProperty(ue.prototype,"db",{get:function(){return K},enumerable:!1,configurable:!0}),ue.prototype.table=function(){return te},A=ue);for(var _e=new Set,je=A.prototype;je;je=c(je))Object.getOwnPropertyNames(je).forEach(function(We){return _e.add(We)});function $e(We){if(!We)return We;var Ye,tt=Object.create(A.prototype);for(Ye in We)if(!_e.has(Ye))try{tt[Ye]=We[Ye]}catch{}return tt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),A},xr.prototype.defineClass=function(){return this.mapToClass(function(A){u(this,A)})},xr.prototype.add=function(A,j){var K=this,te=this.schema.primKey,ue=te.auto,_e=te.keyPath,je=A;return _e&&ue&&(je=Gl(_e)(A)),this._trans("readwrite",function($e){return K.core.mutate({trans:$e,type:"add",keys:j!=null?[j]:null,values:[je]})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(_e)try{N(A,_e,$e)}catch{}return $e})},xr.prototype.update=function(A,j){return typeof A!="object"||s(A)?this.where(":id").equals(A).modify(j):(A=O(A,this.schema.primKey.keyPath),A===void 0?$r(new Te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(j))},xr.prototype.put=function(A,j){var K=this,te=this.schema.primKey,ue=te.auto,_e=te.keyPath,je=A;return _e&&ue&&(je=Gl(_e)(A)),this._trans("readwrite",function($e){return K.core.mutate({trans:$e,type:"put",values:[je],keys:j!=null?[j]:null})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(_e)try{N(A,_e,$e)}catch{}return $e})},xr.prototype.delete=function(A){var j=this;return this._trans("readwrite",function(K){return j.core.mutate({trans:K,type:"delete",keys:[A]})}).then(function(K){return K.numFailures?M.reject(K.failures[0]):void 0})},xr.prototype.clear=function(){var A=this;return this._trans("readwrite",function(j){return A.core.mutate({trans:j,type:"deleteRange",range:Gs})}).then(function(j){return j.numFailures?M.reject(j.failures[0]):void 0})},xr.prototype.bulkGet=function(A){var j=this;return this._trans("readonly",function(K){return j.core.getMany({keys:A,trans:K}).then(function(te){return te.map(function(ue){return j.hook.reading.fire(ue)})})})},xr.prototype.bulkAdd=function(A,j,K){var te=this,ue=Array.isArray(j)?j:void 0,_e=(K=K||(ue?void 0:j))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==A.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var We=A.length,Ye=Ye&&$e?A.map(Gl(Ye)):A;return te.core.mutate({trans:je,type:"add",keys:ue,values:Ye,wantResults:_e}).then(function(Qe){var He=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(He===0)return _e?rt:Ge;throw new Me("".concat(te.name,".bulkAdd(): ").concat(He," of ").concat(We," operations failed"),Qe)})})},xr.prototype.bulkPut=function(A,j,K){var te=this,ue=Array.isArray(j)?j:void 0,_e=(K=K||(ue?void 0:j))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==A.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var We=A.length,Ye=Ye&&$e?A.map(Gl(Ye)):A;return te.core.mutate({trans:je,type:"put",keys:ue,values:Ye,wantResults:_e}).then(function(Qe){var He=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(He===0)return _e?rt:Ge;throw new Me("".concat(te.name,".bulkPut(): ").concat(He," of ").concat(We," operations failed"),Qe)})})},xr.prototype.bulkUpdate=function(A){var j=this,K=this.core,te=A.map(function(je){return je.key}),ue=A.map(function(je){return je.changes}),_e=[];return this._trans("readwrite",function(je){return K.getMany({trans:je,keys:te,cache:"clone"}).then(function($e){var We=[],Ye=[];A.forEach(function(He,rt){var Ge=He.key,Qe=He.changes,at=$e[rt];if(at){for(var Xe=0,ft=Object.keys(Qe);Xe<ft.length;Xe++){var gt=ft[Xe],bt=Qe[gt];if(gt===j.schema.primKey.keyPath){if(Un(bt,Ge)!==0)throw new Te.Constraint("Cannot update primary key in bulkUpdate()")}else N(at,gt,bt)}_e.push(rt),We.push(Ge),Ye.push(at)}});var tt=We.length;return K.mutate({trans:je,type:"put",keys:We,values:Ye,updates:{keys:te,changeSpecs:ue}}).then(function(He){var rt=He.numFailures,Ge=He.failures;if(rt===0)return tt;for(var Qe=0,at=Object.keys(Ge);Qe<at.length;Qe++){var Xe,ft=at[Qe],gt=_e[Number(ft)];gt!=null&&(Xe=Ge[ft],delete Ge[ft],Ge[gt]=Xe)}throw new Me("".concat(j.name,".bulkUpdate(): ").concat(rt," of ").concat(tt," operations failed"),Ge)})})})},xr.prototype.bulkDelete=function(A){var j=this,K=A.length;return this._trans("readwrite",function(te){return j.core.mutate({trans:te,type:"delete",keys:A})}).then(function(je){var ue=je.numFailures,_e=je.lastResult,je=je.failures;if(ue===0)return _e;throw new Me("".concat(j.name,".bulkDelete(): ").concat(ue," of ").concat(K," operations failed"),je)})},xr);function xr(){}function us(A){function j(je,$e){if($e){for(var We=arguments.length,Ye=new Array(We-1);--We;)Ye[We-1]=arguments[We];return K[je].subscribe.apply(null,Ye),A}if(typeof je=="string")return K[je]}var K={};j.addEventType=_e;for(var te=1,ue=arguments.length;te<ue;++te)_e(arguments[te]);return j;function _e(je,$e,We){if(typeof je!="object"){var Ye;$e=$e||J;var tt={subscribers:[],fire:We=We||Ie,subscribe:function(He){tt.subscribers.indexOf(He)===-1&&(tt.subscribers.push(He),tt.fire=$e(tt.fire,He))},unsubscribe:function(He){tt.subscribers=tt.subscribers.filter(function(rt){return rt!==He}),tt.fire=tt.subscribers.reduce($e,We)}};return K[je]=j[je]=tt}o(Ye=je).forEach(function(He){var rt=Ye[He];if(s(rt))_e(He,Ye[He][0],Ye[He][1]);else{if(rt!=="asap")throw new Te.InvalidArgument("Invalid event config");var Ge=_e(He,Re,function(){for(var Qe=arguments.length,at=new Array(Qe);Qe--;)at[Qe]=arguments[Qe];Ge.subscribers.forEach(function(Xe){k(function(){Xe.apply(null,at)})})})}})}}function Wl(A,j){return b(j).from({prototype:A}),j}function Ro(A,j){return!(A.filter||A.algorithm||A.or)&&(j?A.justLimit:!A.replayFilter)}function Jh(A,j){A.filter=ls(A.filter,j)}function Ba(A,j,K){var te=A.replayFilter;A.replayFilter=te?function(){return ls(te(),j())}:j,A.justLimit=K&&!te}function Kl(A,j){if(A.isPrimKey)return j.primaryKey;var K=j.getIndexByKeyPath(A.index);if(!K)throw new Te.Schema("KeyPath "+A.index+" on object store "+j.name+" is not indexed");return K}function Qh(A,j,K){var te=Kl(A,j.schema);return j.openCursor({trans:K,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:te,range:A.range}})}function Zl(A,j,K,te){var ue=A.replayFilter?ls(A.filter,A.replayFilter()):A.filter;if(A.or){var _e={},je=function($e,We,Ye){var tt,He;ue&&!ue(We,Ye,function(rt){return We.stop(rt)},function(rt){return We.fail(rt)})||((He=""+(tt=We.primaryKey))=="[object ArrayBuffer]"&&(He=""+new Uint8Array(tt)),h(_e,He)||(_e[He]=!0,j($e,We,Ye)))};return Promise.all([A.or._iterate(je,K),Ws(Qh(A,te,K),A.algorithm,je,!A.keysOnly&&A.valueMapper)])}return Ws(Qh(A,te,K),ls(A.algorithm,ue),j,!A.keysOnly&&A.valueMapper)}function Ws(A,j,K,te){var ue=de(te?function(_e,je,$e){return K(te(_e),je,$e)}:K);return A.then(function(_e){if(_e)return _e.start(function(){var je=function(){return _e.continue()};j&&!j(_e,function($e){return je=$e},function($e){_e.stop($e),je=Ie},function($e){_e.fail($e),je=Ie})||ue(_e.value,_e,function($e){return je=$e}),je()})})}var Yl=(ep.prototype.execute=function(A){var j=this["@@propmod"];if(j.add!==void 0){var K=j.add;if(s(K))return a(a([],s(A)?A:[],!0),K).sort();if(typeof K=="number")return(Number(A)||0)+K;if(typeof K=="bigint")try{return BigInt(A)+K}catch{return BigInt(0)+K}throw new TypeError("Invalid term ".concat(K))}if(j.remove!==void 0){var te=j.remove;if(s(te))return s(A)?A.filter(function(ue){return!te.includes(ue)}).sort():[];if(typeof te=="number")return Number(A)-te;if(typeof te=="bigint")try{return BigInt(A)-te}catch{return BigInt(0)-te}throw new TypeError("Invalid subtrahend ".concat(te))}return K=(K=j.replacePrefix)===null||K===void 0?void 0:K[0],K&&typeof A=="string"&&A.startsWith(K)?j.replacePrefix[1]+A.substring(K.length):A},ep);function ep(A){this["@@propmod"]=A}var Xl=(Wn.prototype._read=function(A,j){var K=this._ctx;return K.error?K.table._trans(null,$r.bind(null,K.error)):K.table._trans("readonly",A).then(j)},Wn.prototype._write=function(A){var j=this._ctx;return j.error?j.table._trans(null,$r.bind(null,j.error)):j.table._trans("readwrite",A,"locked")},Wn.prototype._addAlgorithm=function(A){var j=this._ctx;j.algorithm=ls(j.algorithm,A)},Wn.prototype._iterate=function(A,j){return Zl(this._ctx,A,j,this._ctx.table.core)},Wn.prototype.clone=function(A){var j=Object.create(this.constructor.prototype),K=Object.create(this._ctx);return A&&u(K,A),j._ctx=K,j},Wn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Wn.prototype.each=function(A){var j=this._ctx;return this._read(function(K){return Zl(j,A,K,j.table.core)})},Wn.prototype.count=function(A){var j=this;return this._read(function(K){var te=j._ctx,ue=te.table.core;if(Ro(te,!0))return ue.count({trans:K,query:{index:Kl(te,ue.schema),range:te.range}}).then(function(je){return Math.min(je,te.limit)});var _e=0;return Zl(te,function(){return++_e,!1},K,ue).then(function(){return _e})}).then(A)},Wn.prototype.sortBy=function(A,j){var K=A.split(".").reverse(),te=K[0],ue=K.length-1;function _e(We,Ye){return Ye?_e(We[K[Ye]],Ye-1):We[te]}var je=this._ctx.dir==="next"?1:-1;function $e(We,Ye){return Un(_e(We,ue),_e(Ye,ue))*je}return this.toArray(function(We){return We.sort($e)}).then(j)},Wn.prototype.toArray=function(A){var j=this;return this._read(function(K){var te=j._ctx;if(te.dir==="next"&&Ro(te,!0)&&0<te.limit){var ue=te.valueMapper,_e=Kl(te,te.table.core.schema);return te.table.core.query({trans:K,limit:te.limit,values:!0,query:{index:_e,range:te.range}}).then(function($e){return $e=$e.result,ue?$e.map(ue):$e})}var je=[];return Zl(te,function($e){return je.push($e)},K,te.table.core).then(function(){return je})},A)},Wn.prototype.offset=function(A){var j=this._ctx;return A<=0||(j.offset+=A,Ro(j)?Ba(j,function(){var K=A;return function(te,ue){return K===0||(K===1?--K:ue(function(){te.advance(K),K=0}),!1)}}):Ba(j,function(){var K=A;return function(){return--K<0}})),this},Wn.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),Ba(this._ctx,function(){var j=A;return function(K,te,ue){return--j<=0&&te(ue),0<=j}},!0),this},Wn.prototype.until=function(A,j){return Jh(this._ctx,function(K,te,ue){return!A(K.value)||(te(ue),j)}),this},Wn.prototype.first=function(A){return this.limit(1).toArray(function(j){return j[0]}).then(A)},Wn.prototype.last=function(A){return this.reverse().first(A)},Wn.prototype.filter=function(A){var j;return Jh(this._ctx,function(K){return A(K.value)}),(j=this._ctx).isMatch=ls(j.isMatch,A),this},Wn.prototype.and=function(A){return this.filter(A)},Wn.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},Wn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Wn.prototype.desc=function(){return this.reverse()},Wn.prototype.eachKey=function(A){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(K,te){A(te.key,te)})},Wn.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},Wn.prototype.eachPrimaryKey=function(A){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(K,te){A(te.primaryKey,te)})},Wn.prototype.keys=function(A){var j=this._ctx;j.keysOnly=!j.isMatch;var K=[];return this.each(function(te,ue){K.push(ue.key)}).then(function(){return K}).then(A)},Wn.prototype.primaryKeys=function(A){var j=this._ctx;if(j.dir==="next"&&Ro(j,!0)&&0<j.limit)return this._read(function(te){var ue=Kl(j,j.table.core.schema);return j.table.core.query({trans:te,values:!1,limit:j.limit,query:{index:ue,range:j.range}})}).then(function(te){return te.result}).then(A);j.keysOnly=!j.isMatch;var K=[];return this.each(function(te,ue){K.push(ue.primaryKey)}).then(function(){return K}).then(A)},Wn.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},Wn.prototype.firstKey=function(A){return this.limit(1).keys(function(j){return j[0]}).then(A)},Wn.prototype.lastKey=function(A){return this.reverse().firstKey(A)},Wn.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var j={};return Jh(this._ctx,function(ue){var te=ue.primaryKey.toString(),ue=h(j,te);return j[te]=!0,!ue}),this},Wn.prototype.modify=function(A){var j=this,K=this._ctx;return this._write(function(te){var ue,_e,je;je=typeof A=="function"?A:(ue=o(A),_e=ue.length,function(Xe){for(var ft=!1,gt=0;gt<_e;++gt){var bt=ue[gt],wt=A[bt],jt=O(Xe,bt);wt instanceof Yl?(N(Xe,bt,wt.execute(jt)),ft=!0):jt!==wt&&(N(Xe,bt,wt),ft=!0)}return ft});var $e=K.table.core,He=$e.schema.primaryKey,We=He.outbound,Ye=He.extractKey,tt=200,He=j.db._options.modifyChunkSize;He&&(tt=typeof He=="object"?He[$e.name]||He["*"]||200:He);function rt(Xe,bt){var gt=bt.failures,bt=bt.numFailures;Qe+=Xe-bt;for(var wt=0,jt=o(gt);wt<jt.length;wt++){var qt=jt[wt];Ge.push(gt[qt])}}var Ge=[],Qe=0,at=[];return j.clone().primaryKeys().then(function(Xe){function ft(bt){var wt=Math.min(tt,Xe.length-bt);return $e.getMany({trans:te,keys:Xe.slice(bt,bt+wt),cache:"immutable"}).then(function(jt){for(var qt=[],Nt=[],Ft=We?[]:null,Ht=[],It=0;It<wt;++It){var Zt=jt[It],cn={value:Z(Zt),primKey:Xe[bt+It]};je.call(cn,cn.value,cn)!==!1&&(cn.value==null?Ht.push(Xe[bt+It]):We||Un(Ye(Zt),Ye(cn.value))===0?(Nt.push(cn.value),We&&Ft.push(Xe[bt+It])):(Ht.push(Xe[bt+It]),qt.push(cn.value)))}return Promise.resolve(0<qt.length&&$e.mutate({trans:te,type:"add",values:qt}).then(function(dn){for(var Sn in dn.failures)Ht.splice(parseInt(Sn),1);rt(qt.length,dn)})).then(function(){return(0<Nt.length||gt&&typeof A=="object")&&$e.mutate({trans:te,type:"put",keys:Ft,values:Nt,criteria:gt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<bt}).then(function(dn){return rt(Nt.length,dn)})}).then(function(){return(0<Ht.length||gt&&A===Id)&&$e.mutate({trans:te,type:"delete",keys:Ht,criteria:gt,isAdditionalChunk:0<bt}).then(function(dn){return rt(Ht.length,dn)})}).then(function(){return Xe.length>bt+wt&&ft(bt+tt)})})}var gt=Ro(K)&&K.limit===1/0&&(typeof A!="function"||A===Id)&&{index:K.index,range:K.range};return ft(0).then(function(){if(0<Ge.length)throw new we("Error modifying one or more objects",Ge,Qe,at);return Xe.length})})})},Wn.prototype.delete=function(){var A=this._ctx,j=A.range;return Ro(A)&&(A.isPrimKey||j.type===3)?this._write(function(K){var te=A.table.core.schema.primaryKey,ue=j;return A.table.core.count({trans:K,query:{index:te,range:ue}}).then(function(_e){return A.table.core.mutate({trans:K,type:"deleteRange",range:ue}).then(function(je){var $e=je.failures;if(je.lastResult,je.results,je=je.numFailures,je)throw new we("Could not delete some values",Object.keys($e).map(function(We){return $e[We]}),_e-je);return _e-je})})}):this.modify(Id)},Wn);function Wn(){}var Id=function(A,j){return j.value=null};function wg(A,j){return A<j?-1:A===j?0:1}function tp(A,j){return j<A?-1:A===j?0:1}function ai(A,j,K){return A=A instanceof Zs?new A.Collection(A):A,A._ctx.error=new(K||TypeError)(j),A}function Jl(A){return new A.Collection(A,function(){return Od("")}).limit(0)}function Ks(A,j,K,te){var ue,_e,je,$e,We,Ye,tt,He=K.length;if(!K.every(function(Qe){return typeof Qe=="string"}))return ai(A,vg);function rt(Qe){ue=Qe==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},_e=Qe==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},je=Qe==="next"?wg:tp;var at=K.map(function(Xe){return{lower:_e(Xe),upper:ue(Xe)}}).sort(function(Xe,ft){return je(Xe.lower,ft.lower)});$e=at.map(function(Xe){return Xe.upper}),We=at.map(function(Xe){return Xe.lower}),tt=(Ye=Qe)==="next"?"":te}rt("next"),A=new A.Collection(A,function(){return Qi($e[0],We[He-1]+te)}),A._ondirectionchange=function(Qe){rt(Qe)};var Ge=0;return A._addAlgorithm(function(Qe,at,Xe){var ft=Qe.key;if(typeof ft!="string")return!1;var gt=_e(ft);if(j(gt,We,Ge))return!0;for(var bt=null,wt=Ge;wt<He;++wt){var jt=function(qt,Nt,Ft,Ht,It,Zt){for(var cn=Math.min(qt.length,Ht.length),dn=-1,Sn=0;Sn<cn;++Sn){var Oa=Nt[Sn];if(Oa!==Ht[Sn])return It(qt[Sn],Ft[Sn])<0?qt.substr(0,Sn)+Ft[Sn]+Ft.substr(Sn+1):It(qt[Sn],Ht[Sn])<0?qt.substr(0,Sn)+Ht[Sn]+Ft.substr(Sn+1):0<=dn?qt.substr(0,dn)+Nt[dn]+Ft.substr(dn+1):null;It(qt[Sn],Oa)<0&&(dn=Sn)}return cn<Ht.length&&Zt==="next"?qt+Ft.substr(qt.length):cn<qt.length&&Zt==="prev"?qt.substr(0,Ft.length):dn<0?null:qt.substr(0,dn)+Ht[dn]+Ft.substr(dn+1)}(ft,gt,$e[wt],We[wt],je,Ye);jt===null&&bt===null?Ge=wt+1:(bt===null||0<je(bt,jt))&&(bt=jt)}return at(bt!==null?function(){Qe.continue(bt+tt)}:Xe),!1}),A}function Qi(A,j,K,te){return{type:2,lower:A,upper:j,lowerOpen:K,upperOpen:te}}function Od(A){return{type:1,lower:A,upper:A}}var Zs=(Object.defineProperty(Nr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Nr.prototype.between=function(A,j,K,te){K=K!==!1,te=te===!0;try{return 0<this._cmp(A,j)||this._cmp(A,j)===0&&(K||te)&&(!K||!te)?Jl(this):new this.Collection(this,function(){return Qi(A,j,!K,!te)})}catch{return ai(this,Ji)}},Nr.prototype.equals=function(A){return A==null?ai(this,Ji):new this.Collection(this,function(){return Od(A)})},Nr.prototype.above=function(A){return A==null?ai(this,Ji):new this.Collection(this,function(){return Qi(A,void 0,!0)})},Nr.prototype.aboveOrEqual=function(A){return A==null?ai(this,Ji):new this.Collection(this,function(){return Qi(A,void 0,!1)})},Nr.prototype.below=function(A){return A==null?ai(this,Ji):new this.Collection(this,function(){return Qi(void 0,A,!1,!0)})},Nr.prototype.belowOrEqual=function(A){return A==null?ai(this,Ji):new this.Collection(this,function(){return Qi(void 0,A)})},Nr.prototype.startsWith=function(A){return typeof A!="string"?ai(this,vg):this.between(A,A+ss,!0,!0)},Nr.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):Ks(this,function(j,K){return j.indexOf(K[0])===0},[A],ss)},Nr.prototype.equalsIgnoreCase=function(A){return Ks(this,function(j,K){return j===K[0]},[A],"")},Nr.prototype.anyOfIgnoreCase=function(){var A=G.apply(se,arguments);return A.length===0?Jl(this):Ks(this,function(j,K){return K.indexOf(j)!==-1},A,"")},Nr.prototype.startsWithAnyOfIgnoreCase=function(){var A=G.apply(se,arguments);return A.length===0?Jl(this):Ks(this,function(j,K){return K.some(function(te){return j.indexOf(te)===0})},A,ss)},Nr.prototype.anyOf=function(){var A=this,j=G.apply(se,arguments),K=this._cmp;try{j.sort(K)}catch{return ai(this,Ji)}if(j.length===0)return Jl(this);var te=new this.Collection(this,function(){return Qi(j[0],j[j.length-1])});te._ondirectionchange=function(_e){K=_e==="next"?A._ascending:A._descending,j.sort(K)};var ue=0;return te._addAlgorithm(function(_e,je,$e){for(var We=_e.key;0<K(We,j[ue]);)if(++ue===j.length)return je($e),!1;return K(We,j[ue])===0||(je(function(){_e.continue(j[ue])}),!1)}),te},Nr.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Nr.prototype.noneOf=function(){var A=G.apply(se,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return ai(this,Ji)}var j=A.reduce(function(K,te){return K?K.concat([[K[K.length-1][1],te]]):[[-1/0,te]]},null);return j.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(j,{includeLowers:!1,includeUppers:!1})},Nr.prototype.inAnyRange=function(ft,j){var K=this,te=this._cmp,ue=this._ascending,_e=this._descending,je=this._min,$e=this._max;if(ft.length===0)return Jl(this);if(!ft.every(function(gt){return gt[0]!==void 0&&gt[1]!==void 0&&ue(gt[0],gt[1])<=0}))return ai(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Te.InvalidArgument);var We=!j||j.includeLowers!==!1,Ye=j&&j.includeUppers===!0,tt,He=ue;function rt(gt,bt){return He(gt[0],bt[0])}try{(tt=ft.reduce(function(gt,bt){for(var wt=0,jt=gt.length;wt<jt;++wt){var qt=gt[wt];if(te(bt[0],qt[1])<0&&0<te(bt[1],qt[0])){qt[0]=je(qt[0],bt[0]),qt[1]=$e(qt[1],bt[1]);break}}return wt===jt&&gt.push(bt),gt},[])).sort(rt)}catch{return ai(this,Ji)}var Ge=0,Qe=Ye?function(gt){return 0<ue(gt,tt[Ge][1])}:function(gt){return 0<=ue(gt,tt[Ge][1])},at=We?function(gt){return 0<_e(gt,tt[Ge][0])}:function(gt){return 0<=_e(gt,tt[Ge][0])},Xe=Qe,ft=new this.Collection(this,function(){return Qi(tt[0][0],tt[tt.length-1][1],!We,!Ye)});return ft._ondirectionchange=function(gt){He=gt==="next"?(Xe=Qe,ue):(Xe=at,_e),tt.sort(rt)},ft._addAlgorithm(function(gt,bt,wt){for(var jt,qt=gt.key;Xe(qt);)if(++Ge===tt.length)return bt(wt),!1;return!Qe(jt=qt)&&!at(jt)||(K._cmp(qt,tt[Ge][1])===0||K._cmp(qt,tt[Ge][0])===0||bt(function(){He===ue?gt.continue(tt[Ge][0]):gt.continue(tt[Ge][1])}),!1)}),ft},Nr.prototype.startsWithAnyOf=function(){var A=G.apply(se,arguments);return A.every(function(j){return typeof j=="string"})?A.length===0?Jl(this):this.inAnyRange(A.map(function(j){return[j,j+ss]})):ai(this,"startsWithAnyOf() only works with strings")},Nr);function Nr(){}function ji(A){return de(function(j){return Ys(j),A(j.target.error),!1})}function Ys(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var Ql="storagemutated",Xs="x-storagemutated-1",ya=us(null,Ql),np=(za.prototype._lock=function(){return C(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},za.prototype._unlock=function(){if(C(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{as(A[1],A[0])}catch{}}return this},za.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},za.prototype.create=function(A){var j=this;if(!this.mode)return this;var K=this.db.idbdb,te=this.db._state.dbOpenError;if(C(!this.idbtrans),!A&&!K)switch(te&&te.name){case"DatabaseClosedError":throw new Te.DatabaseClosed(te);case"MissingAPIError":throw new Te.MissingAPI(te.message,te);default:throw new Te.OpenFailed(te)}if(!this.active)throw new Te.TransactionInactive;return C(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||K).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=de(function(ue){Ys(ue),j._reject(A.error)}),A.onabort=de(function(ue){Ys(ue),j.active&&j._reject(new Te.Abort(A.error)),j.active=!1,j.on("abort").fire(ue)}),A.oncomplete=de(function(){j.active=!1,j._resolve(),"mutatedParts"in A&&ya.storagemutated.fire(A.mutatedParts)}),this},za.prototype._promise=function(A,j,K){var te=this;if(A==="readwrite"&&this.mode!=="readwrite")return $r(new Te.ReadOnly("Transaction is readonly"));if(!this.active)return $r(new Te.TransactionInactive);if(this._locked())return new M(function(_e,je){te._blockedFuncs.push([function(){te._promise(A,j,K).then(_e,je)},ke])});if(K)return Xt(function(){var _e=new M(function(je,$e){te._lock();var We=j(je,$e,te);We&&We.then&&We.then(je,$e)});return _e.finally(function(){return te._unlock()}),_e._lib=!0,_e});var ue=new M(function(_e,je){var $e=j(_e,je,te);$e&&$e.then&&$e.then(_e,je)});return ue._lib=!0,ue},za.prototype._root=function(){return this.parent?this.parent._root():this},za.prototype.waitFor=function(A){var j,K=this._root(),te=M.resolve(A);K._waitingFor?K._waitingFor=K._waitingFor.then(function(){return te}):(K._waitingFor=te,K._waitingQueue=[],j=K.idbtrans.objectStore(K.storeNames[0]),function _e(){for(++K._spinCount;K._waitingQueue.length;)K._waitingQueue.shift()();K._waitingFor&&(j.get(-1/0).onsuccess=_e)}());var ue=K._waitingFor;return new M(function(_e,je){te.then(function($e){return K._waitingQueue.push(de(_e.bind(null,$e)))},function($e){return K._waitingQueue.push(de(je.bind(null,$e)))}).finally(function(){K._waitingFor===ue&&(K._waitingFor=null)})})},za.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Te.Abort))},za.prototype.table=function(A){var j=this._memoizedTables||(this._memoizedTables={});if(h(j,A))return j[A];var K=this.schema[A];if(!K)throw new Te.NotFound("Table "+A+" not part of transaction");return K=new this.db.Table(A,K,this),K.core=this.db.core.table(A),j[A]=K},za);function za(){}function eo(A,j,K,te,ue,_e,je){return{name:A,keyPath:j,unique:K,multi:te,auto:ue,compound:_e,src:(K&&!je?"&":"")+(te?"*":"")+(ue?"++":"")+Dd(j)}}function Dd(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function eu(A,j,K){return{name:A,primKey:j,indexes:K,mappedClass:null,idxByName:(te=function(ue){return[ue.name,ue]},K.reduce(function(ue,_e,je){return je=te(_e,je),je&&(ue[je[0]]=je[1]),ue},{}))};var te}var tu=function(A){try{return A.only([[]]),tu=function(){return[[]]},[[]]}catch{return tu=function(){return ss},ss}};function nu(A){return A==null?function(){}:typeof A=="string"?(j=A).split(".").length===1?function(K){return K[j]}:function(K){return O(K,j)}:function(K){return O(K,A)};var j}function Sc(A){return[].slice.call(A)}var _g=0;function ta(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function Js(A,j,We){function te(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Xe.lower,Qe=Xe.upper,at=Xe.lowerOpen,Xe=Xe.upperOpen;return Ge===void 0?Qe===void 0?null:j.upperBound(Qe,!!Xe):Qe===void 0?j.lowerBound(Ge,!!at):j.bound(Ge,Qe,!!at,!!Xe)}function ue(rt){var Ge,Qe=rt.name;return{name:Qe,schema:rt,mutate:function(at){var Xe=at.trans,ft=at.type,gt=at.keys,bt=at.values,wt=at.range;return new Promise(function(jt,qt){jt=de(jt);var Nt=Xe.objectStore(Qe),Ft=Nt.keyPath==null,Ht=ft==="put"||ft==="add";if(!Ht&&ft!=="delete"&&ft!=="deleteRange")throw new Error("Invalid operation type: "+ft);var It,Zt=(gt||bt||{length:1}).length;if(gt&&bt&&gt.length!==bt.length)throw new Error("Given keys array must have same length as given values array.");if(Zt===0)return jt({numFailures:0,failures:{},results:[],lastResult:void 0});function cn(va){++Oa,Ys(va)}var dn=[],Sn=[],Oa=0;if(ft==="deleteRange"){if(wt.type===4)return jt({numFailures:Oa,failures:Sn,results:[],lastResult:void 0});wt.type===3?dn.push(It=Nt.clear()):dn.push(It=Nt.delete(te(wt)))}else{var Ft=Ht?Ft?[bt,gt]:[bt,null]:[gt,null],yn=Ft[0],Yr=Ft[1];if(Ht)for(var na=0;na<Zt;++na)dn.push(It=Yr&&Yr[na]!==void 0?Nt[ft](yn[na],Yr[na]):Nt[ft](yn[na])),It.onerror=cn;else for(na=0;na<Zt;++na)dn.push(It=Nt[ft](yn[na])),It.onerror=cn}function No(va){va=va.target.result,dn.forEach(function(no,hs){return no.error!=null&&(Sn[hs]=no.error)}),jt({numFailures:Oa,failures:Sn,results:ft==="delete"?gt:dn.map(function(no){return no.result}),lastResult:va})}It.onerror=function(va){cn(va),No(va)},It.onsuccess=No})},getMany:function(at){var Xe=at.trans,ft=at.keys;return new Promise(function(gt,bt){gt=de(gt);for(var wt,jt=Xe.objectStore(Qe),qt=ft.length,Nt=new Array(qt),Ft=0,Ht=0,It=function(dn){dn=dn.target,Nt[dn._pos]=dn.result,++Ht===Ft&&gt(Nt)},Zt=ji(bt),cn=0;cn<qt;++cn)ft[cn]!=null&&((wt=jt.get(ft[cn]))._pos=cn,wt.onsuccess=It,wt.onerror=Zt,++Ft);Ft===0&&gt(Nt)})},get:function(at){var Xe=at.trans,ft=at.key;return new Promise(function(gt,bt){gt=de(gt);var wt=Xe.objectStore(Qe).get(ft);wt.onsuccess=function(jt){return gt(jt.target.result)},wt.onerror=ji(bt)})},query:(Ge=Ye,function(at){return new Promise(function(Xe,ft){Xe=de(Xe);var gt,bt,wt,Ft=at.trans,jt=at.values,qt=at.limit,It=at.query,Nt=qt===1/0?void 0:qt,Ht=It.index,It=It.range,Ft=Ft.objectStore(Qe),Ht=Ht.isPrimaryKey?Ft:Ft.index(Ht.name),It=te(It);if(qt===0)return Xe({result:[]});Ge?((Nt=jt?Ht.getAll(It,Nt):Ht.getAllKeys(It,Nt)).onsuccess=function(Zt){return Xe({result:Zt.target.result})},Nt.onerror=ji(ft)):(gt=0,bt=!jt&&"openKeyCursor"in Ht?Ht.openKeyCursor(It):Ht.openCursor(It),wt=[],bt.onsuccess=function(Zt){var cn=bt.result;return cn?(wt.push(jt?cn.value:cn.primaryKey),++gt===qt?Xe({result:wt}):void cn.continue()):Xe({result:wt})},bt.onerror=ji(ft))})}),openCursor:function(at){var Xe=at.trans,ft=at.values,gt=at.query,bt=at.reverse,wt=at.unique;return new Promise(function(jt,qt){jt=de(jt);var Ht=gt.index,Nt=gt.range,Ft=Xe.objectStore(Qe),Ft=Ht.isPrimaryKey?Ft:Ft.index(Ht.name),Ht=bt?wt?"prevunique":"prev":wt?"nextunique":"next",It=!ft&&"openKeyCursor"in Ft?Ft.openKeyCursor(te(Nt),Ht):Ft.openCursor(te(Nt),Ht);It.onerror=ji(qt),It.onsuccess=de(function(Zt){var cn,dn,Sn,Oa,yn=It.result;yn?(yn.___id=++_g,yn.done=!1,cn=yn.continue.bind(yn),dn=(dn=yn.continuePrimaryKey)&&dn.bind(yn),Sn=yn.advance.bind(yn),Oa=function(){throw new Error("Cursor not stopped")},yn.trans=Xe,yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=function(){throw new Error("Cursor not started")},yn.fail=de(qt),yn.next=function(){var Yr=this,na=1;return this.start(function(){return na--?Yr.continue():Yr.stop()}).then(function(){return Yr})},yn.start=function(Yr){function na(){if(It.result)try{Yr()}catch(va){yn.fail(va)}else yn.done=!0,yn.start=function(){throw new Error("Cursor behind last entry")},yn.stop()}var No=new Promise(function(va,no){va=de(va),It.onerror=ji(no),yn.fail=no,yn.stop=function(hs){yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=Oa,va(hs)}});return It.onsuccess=de(function(va){It.onsuccess=na,na()}),yn.continue=cn,yn.continuePrimaryKey=dn,yn.advance=Sn,na(),No},jt(yn)):jt(null)},qt)})},count:function(at){var Xe=at.query,ft=at.trans,gt=Xe.index,bt=Xe.range;return new Promise(function(wt,jt){var qt=ft.objectStore(Qe),Nt=gt.isPrimaryKey?qt:qt.index(gt.name),qt=te(bt),Nt=qt?Nt.count(qt):Nt.count();Nt.onsuccess=de(function(Ft){return wt(Ft.target.result)}),Nt.onerror=ji(jt)})}}}var _e,je,$e,tt=(je=We,$e=Sc((_e=A).objectStoreNames),{schema:{name:_e.name,tables:$e.map(function(rt){return je.objectStore(rt)}).map(function(rt){var Ge=rt.keyPath,Xe=rt.autoIncrement,Qe=s(Ge),at={},Xe={name:rt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:Qe,keyPath:Ge,autoIncrement:Xe,unique:!0,extractKey:nu(Ge)},indexes:Sc(rt.indexNames).map(function(ft){return rt.index(ft)}).map(function(wt){var gt=wt.name,bt=wt.unique,jt=wt.multiEntry,wt=wt.keyPath,jt={name:gt,compound:s(wt),keyPath:wt,unique:bt,multiEntry:jt,extractKey:nu(wt)};return at[ta(wt)]=jt}),getIndexByKeyPath:function(ft){return at[ta(ft)]}};return at[":id"]=Xe.primaryKey,Ge!=null&&(at[ta(Ge)]=Xe.primaryKey),Xe})},hasGetAll:0<$e.length&&"getAll"in je.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=tt.schema,Ye=tt.hasGetAll,tt=We.tables.map(ue),He={};return tt.forEach(function(rt){return He[rt.name]=rt}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(rt){if(!He[rt])throw new Error("Table '".concat(rt,"' not found"));return He[rt]},MIN_KEY:-1/0,MAX_KEY:tu(j),schema:We}}function jd(A,j,K,te){var ue=K.IDBKeyRange;return K.indexedDB,{dbcore:(te=Js(j,ue,te),A.dbcore.reduce(function(_e,je){return je=je.create,r(r({},_e),je(_e))},te))}}function cs(A,te){var K=te.db,te=jd(A._middlewares,K,A._deps,te);A.core=te.dbcore,A.tables.forEach(function(ue){var _e=ue.name;A.core.schema.tables.some(function(je){return je.name===_e})&&(ue.core=A.core.table(_e),A[_e]instanceof A.Table&&(A[_e].core=ue.core))})}function Md(A,j,K,te){K.forEach(function(ue){var _e=te[ue];j.forEach(function(je){var $e=function We(Ye,tt){return _(Ye,tt)||(Ye=c(Ye))&&We(Ye,tt)}(je,ue);(!$e||"value"in $e&&$e.value===void 0)&&(je===A.Transaction.prototype||je instanceof A.Transaction?v(je,ue,{get:function(){return this.table(ue)},set:function(We){g(this,ue,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):je[ue]=new A.Table(ue,_e))})})}function Ec(A,j){j.forEach(function(K){for(var te in K)K[te]instanceof A.Table&&delete K[te]})}function rp(A,j){return A._cfg.version-j._cfg.version}function Cc(A,j,K,te){var ue=A._dbSchema;K.objectStoreNames.contains("$meta")&&!ue.$meta&&(ue.$meta=eu("$meta",Sg("")[0],[]),A._storeNames.push("$meta"));var _e=A._createTransaction("readwrite",A._storeNames,ue);_e.create(K),_e._completion.catch(te);var je=_e._reject.bind(_e),$e=ke.transless||ke;Xt(function(){return ke.trans=_e,ke.transless=$e,j!==0?(cs(A,K),Ye=j,((We=_e).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(tt){return tt??Ye}):M.resolve(Ye)).then(function(tt){return rt=tt,Ge=_e,Qe=K,at=[],tt=(He=A)._versions,Xe=He._dbSchema=ru(0,He.idbdb,Qe),(tt=tt.filter(function(ft){return ft._cfg.version>=rt})).length!==0?(tt.forEach(function(ft){at.push(function(){var gt=Xe,bt=ft._cfg.dbschema;$d(He,gt,Qe),$d(He,bt,Qe),Xe=He._dbSchema=bt;var wt=Fd(gt,bt);wt.add.forEach(function(Ht){ap(Qe,Ht[0],Ht[1].primKey,Ht[1].indexes)}),wt.change.forEach(function(Ht){if(Ht.recreate)throw new Te.Upgrade("Not yet support for changing primary key");var It=Qe.objectStore(Ht.name);Ht.add.forEach(function(Zt){return Ld(It,Zt)}),Ht.change.forEach(function(Zt){It.deleteIndex(Zt.name),Ld(It,Zt)}),Ht.del.forEach(function(Zt){return It.deleteIndex(Zt)})});var jt=ft._cfg.contentUpgrade;if(jt&&ft._cfg.version>rt){cs(He,Qe),Ge._memoizedTables={};var qt=D(bt);wt.del.forEach(function(Ht){qt[Ht]=gt[Ht]}),Ec(He,[He.Transaction.prototype]),Md(He,[He.Transaction.prototype],o(qt),qt),Ge.schema=qt;var Nt,Ft=X(jt);return Ft&&Rn(),wt=M.follow(function(){var Ht;(Nt=jt(Ge))&&Ft&&(Ht=zn.bind(null,null),Nt.then(Ht,Ht))}),Nt&&typeof Nt.then=="function"?M.resolve(Nt):wt.then(function(){return Nt})}}),at.push(function(gt){var bt,wt,jt=ft._cfg.dbschema;bt=jt,wt=gt,[].slice.call(wt.db.objectStoreNames).forEach(function(qt){return bt[qt]==null&&wt.db.deleteObjectStore(qt)}),Ec(He,[He.Transaction.prototype]),Md(He,[He.Transaction.prototype],He._storeNames,He._dbSchema),Ge.schema=He._dbSchema}),at.push(function(gt){He.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(He.idbdb.version/10)===ft._cfg.version?(He.idbdb.deleteObjectStore("$meta"),delete He._dbSchema.$meta,He._storeNames=He._storeNames.filter(function(bt){return bt!=="$meta"})):gt.objectStore("$meta").put(ft._cfg.version,"version"))})}),function ft(){return at.length?M.resolve(at.shift()(Ge.idbtrans)).then(ft):M.resolve()}().then(function(){xg(Xe,Qe)})):M.resolve();var He,rt,Ge,Qe,at,Xe}).catch(je)):(o(ue).forEach(function(tt){ap(K,tt,ue[tt].primKey,ue[tt].indexes)}),cs(A,K),void M.follow(function(){return A.on.populate.fire(_e)}).catch(je));var We,Ye})}function Pd(A,j){xg(A._dbSchema,j),j.db.version%10!=0||j.objectStoreNames.contains("$meta")||j.db.createObjectStore("$meta").add(Math.ceil(j.db.version/10-1),"version");var K=ru(0,A.idbdb,j);$d(A,A._dbSchema,j);for(var te=0,ue=Fd(K,A._dbSchema).change;te<ue.length;te++){var _e=function(je){if(je.change.length||je.recreate)return console.warn("Unable to patch indexes of table ".concat(je.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=j.objectStore(je.name);je.add.forEach(function(We){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(je.name,".").concat(We.src)),Ld($e,We)})}(ue[te]);if(typeof _e=="object")return _e.value}}function Fd(A,j){var K,te={del:[],add:[],change:[]};for(K in A)j[K]||te.del.push(K);for(K in j){var ue=A[K],_e=j[K];if(ue){var je={name:K,def:_e,recreate:!1,del:[],add:[],change:[]};if(""+(ue.primKey.keyPath||"")!=""+(_e.primKey.keyPath||"")||ue.primKey.auto!==_e.primKey.auto)je.recreate=!0,te.change.push(je);else{var $e=ue.idxByName,We=_e.idxByName,Ye=void 0;for(Ye in $e)We[Ye]||je.del.push(Ye);for(Ye in We){var tt=$e[Ye],He=We[Ye];tt?tt.src!==He.src&&je.change.push(He):je.add.push(He)}(0<je.del.length||0<je.add.length||0<je.change.length)&&te.change.push(je)}}else te.add.push([K,_e])}return te}function ap(A,j,K,te){var ue=A.db.createObjectStore(j,K.keyPath?{keyPath:K.keyPath,autoIncrement:K.auto}:{autoIncrement:K.auto});return te.forEach(function(_e){return Ld(ue,_e)}),ue}function xg(A,j){o(A).forEach(function(K){j.db.objectStoreNames.contains(K)||(Le&&console.debug("Dexie: Creating missing table",K),ap(j,K,A[K].primKey,A[K].indexes))})}function Ld(A,j){A.createIndex(j.name,j.keyPath,{unique:j.unique,multiEntry:j.multi})}function ru(A,j,K){var te={};return S(j.objectStoreNames,0).forEach(function(ue){for(var _e=K.objectStore(ue),je=eo(Dd(Ye=_e.keyPath),Ye||"",!0,!1,!!_e.autoIncrement,Ye&&typeof Ye!="string",!0),$e=[],We=0;We<_e.indexNames.length;++We){var tt=_e.index(_e.indexNames[We]),Ye=tt.keyPath,tt=eo(tt.name,Ye,!!tt.unique,!!tt.multiEntry,!1,Ye&&typeof Ye!="string",!1);$e.push(tt)}te[ue]=eu(ue,je,$e)}),te}function $d(A,j,K){for(var te=K.db.objectStoreNames,ue=0;ue<te.length;++ue){var _e=te[ue],je=K.objectStore(_e);A._hasGetAll="getAll"in je;for(var $e=0;$e<je.indexNames.length;++$e){var We=je.indexNames[$e],Ye=je.index(We).keyPath,tt=typeof Ye=="string"?Ye:"["+S(Ye).join("+")+"]";!j[_e]||(Ye=j[_e].idxByName[tt])&&(Ye.name=We,delete j[_e].idxByName[tt],j[_e].idxByName[We]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function Sg(A){return A.split(",").map(function(j,K){var te=(j=j.trim()).replace(/([&*]|\+\+)/g,""),ue=/^\[/.test(te)?te.match(/^\[(.*)\]$/)[1].split("+"):te;return eo(te,ue||null,/\&/.test(j),/\*/.test(j),/\+\+/.test(j),s(ue),K===0)})}var C1=(Bd.prototype._parseStoresSpec=function(A,j){o(A).forEach(function(K){if(A[K]!==null){var te=Sg(A[K]),ue=te.shift();if(ue.unique=!0,ue.multi)throw new Te.Schema("Primary key cannot be multi-valued");te.forEach(function(_e){if(_e.auto)throw new Te.Schema("Only primary key can be marked as autoIncrement (++)");if(!_e.keyPath)throw new Te.Schema("Index must have a name and cannot be an empty string")}),j[K]=eu(K,ue,te)}})},Bd.prototype.stores=function(K){var j=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,K):K;var K=j._versions,te={},ue={};return K.forEach(function(_e){u(te,_e._cfg.storesSource),ue=_e._cfg.dbschema={},_e._parseStoresSpec(te,ue)}),j._dbSchema=ue,Ec(j,[j._allTables,j,j.Transaction.prototype]),Md(j,[j._allTables,j,j.Transaction.prototype,this._cfg.tables],o(ue),ue),j._storeNames=o(ue),this},Bd.prototype.upgrade=function(A){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Ie,A),this},Bd);function Bd(){}function ip(A,j){var K=A._dbNamesDB;return K||(K=A._dbNamesDB=new to(Vs,{addons:[],indexedDB:A,IDBKeyRange:j})).version(1).stores({dbnames:"name"}),K.table("dbnames")}function zd(A){return A&&typeof A.databases=="function"}function op(A){return Xt(function(){return ke.letThrough=!0,A()})}function sp(A){return!("from"in A)}var ba=function(A,j){if(!this){var K=new ba;return A&&"d"in A&&u(K,A),K}u(this,arguments.length?{d:1,from:A,to:1<arguments.length?j:A}:{d:0})};function kc(A,j,K){var te=Un(j,K);if(!isNaN(te)){if(0<te)throw RangeError();if(sp(A))return u(A,{from:j,to:K,d:1});var ue=A.l,te=A.r;if(Un(K,A.from)<0)return ue?kc(ue,j,K):A.l={from:j,to:K,d:1,l:null,r:null},Cg(A);if(0<Un(j,A.to))return te?kc(te,j,K):A.r={from:j,to:K,d:1,l:null,r:null},Cg(A);Un(j,A.from)<0&&(A.from=j,A.l=null,A.d=te?te.d+1:1),0<Un(K,A.to)&&(A.to=K,A.r=null,A.d=A.l?A.l.d+1:1),K=!A.r,ue&&!A.l&&Qs(A,ue),te&&K&&Qs(A,te)}}function Qs(A,j){sp(j)||function K(te,We){var _e=We.from,je=We.to,$e=We.l,We=We.r;kc(te,_e,je),$e&&K(te,$e),We&&K(te,We)}(A,j)}function Eg(A,j){var K=Ud(j),te=K.next();if(te.done)return!1;for(var ue=te.value,_e=Ud(A),je=_e.next(ue.from),$e=je.value;!te.done&&!je.done;){if(Un($e.from,ue.to)<=0&&0<=Un($e.to,ue.from))return!0;Un(ue.from,$e.from)<0?ue=(te=K.next($e.from)).value:$e=(je=_e.next(ue.from)).value}return!1}function Ud(A){var j=sp(A)?null:{s:0,n:A};return{next:function(K){for(var te=0<arguments.length;j;)switch(j.s){case 0:if(j.s=1,te)for(;j.n.l&&Un(K,j.n.from)<0;)j={up:j,n:j.n.l,s:1};else for(;j.n.l;)j={up:j,n:j.n.l,s:1};case 1:if(j.s=2,!te||Un(K,j.n.to)<=0)return{value:j.n,done:!1};case 2:if(j.n.r){j.s=3,j={up:j,n:j.n.r,s:0};continue}case 3:j=j.up}return{done:!0}}}}function Cg(A){var j,K,te=(((j=A.r)===null||j===void 0?void 0:j.d)||0)-(((K=A.l)===null||K===void 0?void 0:K.d)||0),ue=1<te?"r":te<-1?"l":"";ue&&(j=ue=="r"?"l":"r",K=r({},A),te=A[ue],A.from=te.from,A.to=te.to,A[ue]=te[ue],K[ue]=te[j],(A[j]=K).d=lp(K)),A.d=lp(A)}function lp(K){var j=K.r,K=K.l;return(j?K?Math.max(j.d,K.d):j.d:K?K.d:0)+1}function qd(A,j){return o(j).forEach(function(K){A[K]?Qs(A[K],j[K]):A[K]=function te(ue){var _e,je,$e={};for(_e in ue)h(ue,_e)&&(je=ue[_e],$e[_e]=!je||typeof je!="object"||Q.has(je.constructor)?je:te(je));return $e}(j[K])}),A}function up(A,j){return A.all||j.all||Object.keys(A).some(function(K){return j[K]&&Eg(j[K],A[K])})}p(ba.prototype,((ii={add:function(A){return Qs(this,A),this},addKey:function(A){return kc(this,A,A),this},addKeys:function(A){var j=this;return A.forEach(function(K){return kc(j,K,K)}),this},hasKey:function(A){var j=Ud(this).next(A).value;return j&&Un(j.from,A)<=0&&0<=Un(j.to,A)}})[ie]=function(){return Ud(this)},ii));var el={},cp={},dp=!1;function Hd(A){qd(cp,A),dp||(dp=!0,setTimeout(function(){dp=!1,fp(cp,!(cp={}))},0))}function fp(A,j){j===void 0&&(j=!1);var K=new Set;if(A.all)for(var te=0,ue=Object.values(el);te<ue.length;te++)kg(je=ue[te],A,K,j);else for(var _e in A){var je,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(_e);$e&&(_e=$e[1],$e=$e[2],(je=el["idb://".concat(_e,"/").concat($e)])&&kg(je,A,K,j))}K.forEach(function(We){return We()})}function kg(A,j,K,te){for(var ue=[],_e=0,je=Object.entries(A.queries.query);_e<je.length;_e++){for(var $e=je[_e],We=$e[0],Ye=[],tt=0,He=$e[1];tt<He.length;tt++){var rt=He[tt];up(j,rt.obsSet)?rt.subscribers.forEach(function(Xe){return K.add(Xe)}):te&&Ye.push(rt)}te&&ue.push([We,Ye])}if(te)for(var Ge=0,Qe=ue;Ge<Qe.length;Ge++){var at=Qe[Ge],We=at[0],Ye=at[1];A.queries.query[We]=Ye}}function k1(A){var j=A._state,K=A._deps.indexedDB;if(j.isBeingOpened||A.idbdb)return j.dbReadyPromise.then(function(){return j.dbOpenError?$r(j.dbOpenError):A});j.isBeingOpened=!0,j.dbOpenError=null,j.openComplete=!1;var te=j.openCanceller,ue=Math.round(10*A.verno),_e=!1;function je(){if(j.openCanceller!==te)throw new Te.DatabaseClosed("db.open() was cancelled")}function $e(){return new M(function(rt,Ge){if(je(),!K)throw new Te.MissingAPI;var Qe=A.name,at=j.autoSchema||!ue?K.open(Qe):K.open(Qe,ue);if(!at)throw new Te.MissingAPI;at.onerror=ji(Ge),at.onblocked=de(A._fireOnBlocked),at.onupgradeneeded=de(function(Xe){var ft;tt=at.transaction,j.autoSchema&&!A._options.allowEmptyDB?(at.onerror=Ys,tt.abort(),at.result.close(),(ft=K.deleteDatabase(Qe)).onsuccess=ft.onerror=de(function(){Ge(new Te.NoSuchDatabase("Database ".concat(Qe," doesnt exist")))})):(tt.onerror=ji(Ge),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,He=Xe<1,A.idbdb=at.result,_e&&Pd(A,tt),Cc(A,Xe/10,tt,Ge))},Ge),at.onsuccess=de(function(){tt=null;var Xe,ft,gt,bt,wt,jt=A.idbdb=at.result,qt=S(jt.objectStoreNames);if(0<qt.length)try{var Nt=jt.transaction((bt=qt).length===1?bt[0]:bt,"readonly");if(j.autoSchema)ft=jt,gt=Nt,(Xe=A).verno=ft.version/10,gt=Xe._dbSchema=ru(0,ft,gt),Xe._storeNames=S(ft.objectStoreNames,0),Md(Xe,[Xe._allTables],o(gt),gt);else if($d(A,A._dbSchema,Nt),((wt=Fd(ru(0,(wt=A).idbdb,Nt),wt._dbSchema)).add.length||wt.change.some(function(Ft){return Ft.add.length||Ft.change.length}))&&!_e)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),jt.close(),ue=jt.version+1,_e=!0,rt($e());cs(A,Nt)}catch{}To.push(A),jt.onversionchange=de(function(Ft){j.vcFired=!0,A.on("versionchange").fire(Ft)}),jt.onclose=de(function(Ft){A.on("close").fire(Ft)}),He&&(wt=A._deps,Nt=Qe,jt=wt.indexedDB,wt=wt.IDBKeyRange,zd(jt)||Nt===Vs||ip(jt,wt).put({name:Nt}).catch(Ie)),rt()},Ge)}).catch(function(rt){switch(rt==null?void 0:rt.name){case"UnknownError":if(0<j.PR1398_maxLoop)return j.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ue)return ue=0,$e()}return M.reject(rt)})}var We,Ye=j.dbReadyResolve,tt=null,He=!1;return M.race([te,(typeof navigator>"u"?M.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(rt){function Ge(){return indexedDB.databases().finally(rt)}We=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then($e)]).then(function(){return je(),j.onReadyBeingFired=[],M.resolve(op(function(){return A.on.ready.fire(A.vip)})).then(function rt(){if(0<j.onReadyBeingFired.length){var Ge=j.onReadyBeingFired.reduce(xe,Ie);return j.onReadyBeingFired=[],M.resolve(op(function(){return Ge(A.vip)})).then(rt)}})}).finally(function(){j.openCanceller===te&&(j.onReadyBeingFired=null,j.isBeingOpened=!1)}).catch(function(rt){j.dbOpenError=rt;try{tt&&tt.abort()}catch{}return te===j.openCanceller&&A._close(),$r(rt)}).finally(function(){j.openComplete=!0,Ye()}).then(function(){var rt;return He&&(rt={},A.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(Qe){Qe.name&&(rt["idb://".concat(A.name,"/").concat(Ge.name,"/").concat(Qe.name)]=new ba(-1/0,[[[]]]))}),rt["idb://".concat(A.name,"/").concat(Ge.name,"/")]=rt["idb://".concat(A.name,"/").concat(Ge.name,"/:dels")]=new ba(-1/0,[[[]]])}),ya(Ql).fire(rt),fp(rt,!0)),A})}function Ac(A){function j(_e){return A.next(_e)}var K=ue(j),te=ue(function(_e){return A.throw(_e)});function ue(_e){return function(We){var $e=_e(We),We=$e.value;return $e.done?We:We&&typeof We.then=="function"?We.then(K,te):s(We)?Promise.all(We).then(K,te):K(We)}}return ue(j)()}function ds(A,j,K){for(var te=s(A)?A.slice():[A],ue=0;ue<K;++ue)te.push(j);return te}var A1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(j){var K=A.table(j),te=K.schema,ue={},_e=[];function je(He,rt,Ge){var Qe=ta(He),at=ue[Qe]=ue[Qe]||[],Xe=He==null?0:typeof He=="string"?1:He.length,ft=0<rt,ft=r(r({},Ge),{name:ft?"".concat(Qe,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:ft,keyTail:rt,keyLength:Xe,extractKey:nu(He),unique:!ft&&Ge.unique});return at.push(ft),ft.isPrimaryKey||_e.push(ft),1<Xe&&je(Xe===2?He[0]:He.slice(0,Xe-1),rt+1,Ge),at.sort(function(gt,bt){return gt.keyTail-bt.keyTail}),ft}j=je(te.primaryKey.keyPath,0,te.primaryKey),ue[":id"]=[j];for(var $e=0,We=te.indexes;$e<We.length;$e++){var Ye=We[$e];je(Ye.keyPath,0,Ye)}function tt(He){var rt,Ge=He.query.index;return Ge.isVirtual?r(r({},He),{query:{index:Ge.lowLevelIndex,range:(rt=He.query.range,Ge=Ge.keyTail,{type:rt.type===1?2:rt.type,lower:ds(rt.lower,rt.lowerOpen?A.MAX_KEY:A.MIN_KEY,Ge),lowerOpen:!0,upper:ds(rt.upper,rt.upperOpen?A.MIN_KEY:A.MAX_KEY,Ge),upperOpen:!0})}}):He}return r(r({},K),{schema:r(r({},te),{primaryKey:j,indexes:_e,getIndexByKeyPath:function(He){return(He=ue[ta(He)])&&He[0]}}),count:function(He){return K.count(tt(He))},query:function(He){return K.query(tt(He))},openCursor:function(He){var rt=He.query.index,Ge=rt.keyTail,Qe=rt.isVirtual,at=rt.keyLength;return Qe?K.openCursor(tt(He)).then(function(ft){return ft&&Xe(ft)}):K.openCursor(He);function Xe(ft){return Object.create(ft,{continue:{value:function(gt){gt!=null?ft.continue(ds(gt,He.reverse?A.MAX_KEY:A.MIN_KEY,Ge)):He.unique?ft.continue(ft.key.slice(0,at).concat(He.reverse?A.MIN_KEY:A.MAX_KEY,Ge)):ft.continue()}},continuePrimaryKey:{value:function(gt,bt){ft.continuePrimaryKey(ds(gt,A.MAX_KEY,Ge),bt)}},primaryKey:{get:function(){return ft.primaryKey}},key:{get:function(){var gt=ft.key;return at===1?gt[0]:gt.slice(0,at)}},value:{get:function(){return ft.value}}})}}})}})}};function Vd(A,j,K,te){return K=K||{},te=te||"",o(A).forEach(function(ue){var _e,je,$e;h(j,ue)?(_e=A[ue],je=j[ue],typeof _e=="object"&&typeof je=="object"&&_e&&je?($e=he(_e))!==he(je)?K[te+ue]=j[ue]:$e==="Object"?Vd(_e,je,K,te+ue+"."):_e!==je&&(K[te+ue]=j[ue]):_e!==je&&(K[te+ue]=j[ue])):K[te+ue]=void 0}),o(j).forEach(function(ue){h(A,ue)||(K[te+ue]=j[ue])}),K}function Gd(A,j){return j.type==="delete"?j.keys:j.keys||j.values.map(A.extractKey)}var Ag={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(j){var K=A.table(j),te=K.schema.primaryKey;return r(r({},K),{mutate:function(ue){var _e=ke.trans,je=_e.table(j).hook,$e=je.deleting,We=je.creating,Ye=je.updating;switch(ue.type){case"add":if(We.fire===Ie)break;return _e._promise("readwrite",function(){return tt(ue)},!0);case"put":if(We.fire===Ie&&Ye.fire===Ie)break;return _e._promise("readwrite",function(){return tt(ue)},!0);case"delete":if($e.fire===Ie)break;return _e._promise("readwrite",function(){return tt(ue)},!0);case"deleteRange":if($e.fire===Ie)break;return _e._promise("readwrite",function(){return function He(rt,Ge,Qe){return K.query({trans:rt,values:!1,query:{index:te,range:Ge},limit:Qe}).then(function(at){var Xe=at.result;return tt({type:"delete",keys:Xe,trans:rt}).then(function(ft){return 0<ft.numFailures?Promise.reject(ft.failures[0]):Xe.length<Qe?{failures:[],numFailures:0,lastResult:void 0}:He(rt,r(r({},Ge),{lower:Xe[Xe.length-1],lowerOpen:!0}),Qe)})})}(ue.trans,ue.range,1e4)},!0)}return K.mutate(ue);function tt(He){var rt,Ge,Qe,at=ke.trans,Xe=He.keys||Gd(te,He);if(!Xe)throw new Error("Keys missing");return(He=He.type==="add"||He.type==="put"?r(r({},He),{keys:Xe}):r({},He)).type!=="delete"&&(He.values=a([],He.values)),He.keys&&(He.keys=a([],He.keys)),rt=K,Qe=Xe,((Ge=He).type==="add"?Promise.resolve([]):rt.getMany({trans:Ge.trans,keys:Qe,cache:"immutable"})).then(function(ft){var gt=Xe.map(function(bt,wt){var jt,qt,Nt,Ft=ft[wt],Ht={onerror:null,onsuccess:null};return He.type==="delete"?$e.fire.call(Ht,bt,Ft,at):He.type==="add"||Ft===void 0?(jt=We.fire.call(Ht,bt,He.values[wt],at),bt==null&&jt!=null&&(He.keys[wt]=bt=jt,te.outbound||N(He.values[wt],te.keyPath,bt))):(jt=Vd(Ft,He.values[wt]),(qt=Ye.fire.call(Ht,jt,bt,Ft,at))&&(Nt=He.values[wt],Object.keys(qt).forEach(function(It){h(Nt,It)?Nt[It]=qt[It]:N(Nt,It,qt[It])}))),Ht});return K.mutate(He).then(function(bt){for(var wt=bt.failures,jt=bt.results,qt=bt.numFailures,bt=bt.lastResult,Nt=0;Nt<Xe.length;++Nt){var Ft=(jt||Xe)[Nt],Ht=gt[Nt];Ft==null?Ht.onerror&&Ht.onerror(wt[Nt]):Ht.onsuccess&&Ht.onsuccess(He.type==="put"&&ft[Nt]?He.values[Nt]:Ft)}return{failures:wt,results:jt,numFailures:qt,lastResult:bt}}).catch(function(bt){return gt.forEach(function(wt){return wt.onerror&&wt.onerror(bt)}),Promise.reject(bt)})})}}})}})}};function hp(A,j,K){try{if(!j||j.keys.length<A.length)return null;for(var te=[],ue=0,_e=0;ue<j.keys.length&&_e<A.length;++ue)Un(j.keys[ue],A[_e])===0&&(te.push(K?Z(j.values[ue]):j.values[ue]),++_e);return te.length===A.length?te:null}catch{return null}}var Tg={stack:"dbcore",level:-1,create:function(A){return{table:function(j){var K=A.table(j);return r(r({},K),{getMany:function(te){if(!te.cache)return K.getMany(te);var ue=hp(te.keys,te.trans._cache,te.cache==="clone");return ue?M.resolve(ue):K.getMany(te).then(function(_e){return te.trans._cache={keys:te.keys,values:te.cache==="clone"?Z(_e):_e},_e})},mutate:function(te){return te.type!=="add"&&(te.trans._cache=null),K.mutate(te)}})}}}};function tl(A,j){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!j.schema.primaryKey.outbound}function Rg(A,j){switch(A){case"query":return j.values&&!j.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var T1={stack:"dbcore",level:0,name:"Observability",create:function(A){var j=A.schema.name,K=new ba(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(te,ue,_e){if(ke.subscr&&ue!=="readonly")throw new Te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return A.transaction(te,ue,_e)},table:function(te){var ue=A.table(te),_e=ue.schema,je=_e.primaryKey,He=_e.indexes,$e=je.extractKey,We=je.outbound,Ye=je.autoIncrement&&He.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(je.keyPath)}),tt=r(r({},ue),{mutate:function(Ge){function Qe(It){return It="idb://".concat(j,"/").concat(te,"/").concat(It),bt[It]||(bt[It]=new ba)}var at,Xe,ft,gt=Ge.trans,bt=Ge.mutatedParts||(Ge.mutatedParts={}),wt=Qe(""),jt=Qe(":dels"),qt=Ge.type,Ht=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[Gd(je,Ge).filter(function(It){return It}),Ge.values]:[],Nt=Ht[0],Ft=Ht[1],Ht=Ge.trans._cache;return s(Nt)?(wt.addKeys(Nt),(Ht=qt==="delete"||Nt.length===Ft.length?hp(Nt,Ht):null)||jt.addKeys(Nt),(Ht||Ft)&&(at=Qe,Xe=Ht,ft=Ft,_e.indexes.forEach(function(It){var Zt=at(It.name||"");function cn(Sn){return Sn!=null?It.extractKey(Sn):null}function dn(Sn){return It.multiEntry&&s(Sn)?Sn.forEach(function(Oa){return Zt.addKey(Oa)}):Zt.addKey(Sn)}(Xe||ft).forEach(function(Sn,Yr){var yn=Xe&&cn(Xe[Yr]),Yr=ft&&cn(ft[Yr]);Un(yn,Yr)!==0&&(yn!=null&&dn(yn),Yr!=null&&dn(Yr))})}))):Nt?(Ft={from:(Ft=Nt.lower)!==null&&Ft!==void 0?Ft:A.MIN_KEY,to:(Ft=Nt.upper)!==null&&Ft!==void 0?Ft:A.MAX_KEY},jt.add(Ft),wt.add(Ft)):(wt.add(K),jt.add(K),_e.indexes.forEach(function(It){return Qe(It.name).add(K)})),ue.mutate(Ge).then(function(It){return!Nt||Ge.type!=="add"&&Ge.type!=="put"||(wt.addKeys(It.results),Ye&&Ye.forEach(function(Zt){for(var cn=Ge.values.map(function(yn){return Zt.extractKey(yn)}),dn=Zt.keyPath.findIndex(function(yn){return yn===je.keyPath}),Sn=0,Oa=It.results.length;Sn<Oa;++Sn)cn[Sn][dn]=It.results[Sn];Qe(Zt.name).addKeys(cn)})),gt.mutatedParts=qd(gt.mutatedParts||{},bt),It})}}),He=function(Qe){var at=Qe.query,Qe=at.index,at=at.range;return[Qe,new ba((Qe=at.lower)!==null&&Qe!==void 0?Qe:A.MIN_KEY,(at=at.upper)!==null&&at!==void 0?at:A.MAX_KEY)]},rt={get:function(Ge){return[je,new ba(Ge.key)]},getMany:function(Ge){return[je,new ba().addKeys(Ge.keys)]},count:He,query:He,openCursor:He};return o(rt).forEach(function(Ge){tt[Ge]=function(Qe){var at=ke.subscr,Xe=!!at,ft=tl(ke,ue)&&Rg(Ge,Qe)?Qe.obsSet={}:at;if(Xe){var gt=function(Ft){return Ft="idb://".concat(j,"/").concat(te,"/").concat(Ft),ft[Ft]||(ft[Ft]=new ba)},bt=gt(""),wt=gt(":dels"),at=rt[Ge](Qe),Xe=at[0],at=at[1];if((Ge==="query"&&Xe.isPrimaryKey&&!Qe.values?wt:gt(Xe.name||"")).add(at),!Xe.isPrimaryKey){if(Ge!=="count"){var jt=Ge==="query"&&We&&Qe.values&&ue.query(r(r({},Qe),{values:!1}));return ue[Ge].apply(this,arguments).then(function(Ft){if(Ge==="query"){if(We&&Qe.values)return jt.then(function(cn){return cn=cn.result,bt.addKeys(cn),Ft});var Ht=Qe.values?Ft.result.map($e):Ft.result;(Qe.values?bt:wt).addKeys(Ht)}else if(Ge==="openCursor"){var It=Ft,Zt=Qe.values;return It&&Object.create(It,{key:{get:function(){return wt.addKey(It.primaryKey),It.key}},primaryKey:{get:function(){var cn=It.primaryKey;return wt.addKey(cn),cn}},value:{get:function(){return Zt&&bt.addKey(It.primaryKey),It.value}}})}return Ft})}wt.add(K)}}return ue[Ge].apply(this,arguments)}}),tt}})}};function Ng(A,j,K){if(K.numFailures===0)return j;if(j.type==="deleteRange")return null;var te=j.keys?j.keys.length:"values"in j&&j.values?j.values.length:1;return K.numFailures===te?null:(j=r({},j),s(j.keys)&&(j.keys=j.keys.filter(function(ue,_e){return!(_e in K.failures)})),"values"in j&&s(j.values)&&(j.values=j.values.filter(function(ue,_e){return!(_e in K.failures)})),j)}function Wd(A,j){return K=A,((te=j).lower===void 0||(te.lowerOpen?0<Un(K,te.lower):0<=Un(K,te.lower)))&&(A=A,(j=j).upper===void 0||(j.upperOpen?Un(A,j.upper)<0:Un(A,j.upper)<=0));var K,te}function pp(A,j,rt,te,ue,_e){if(!rt||rt.length===0)return A;var je=j.query.index,$e=je.multiEntry,We=j.query.range,Ye=te.schema.primaryKey.extractKey,tt=je.extractKey,He=(je.lowLevelIndex||je).extractKey,rt=rt.reduce(function(Ge,Qe){var at=Ge,Xe=[];if(Qe.type==="add"||Qe.type==="put")for(var ft=new ba,gt=Qe.values.length-1;0<=gt;--gt){var bt,wt=Qe.values[gt],jt=Ye(wt);ft.hasKey(jt)||(bt=tt(wt),($e&&s(bt)?bt.some(function(It){return Wd(It,We)}):Wd(bt,We))&&(ft.addKey(jt),Xe.push(wt)))}switch(Qe.type){case"add":var qt=new ba().addKeys(j.values?Ge.map(function(Zt){return Ye(Zt)}):Ge),at=Ge.concat(j.values?Xe.filter(function(Zt){return Zt=Ye(Zt),!qt.hasKey(Zt)&&(qt.addKey(Zt),!0)}):Xe.map(function(Zt){return Ye(Zt)}).filter(function(Zt){return!qt.hasKey(Zt)&&(qt.addKey(Zt),!0)}));break;case"put":var Nt=new ba().addKeys(Qe.values.map(function(Zt){return Ye(Zt)}));at=Ge.filter(function(Zt){return!Nt.hasKey(j.values?Ye(Zt):Zt)}).concat(j.values?Xe:Xe.map(function(Zt){return Ye(Zt)}));break;case"delete":var Ft=new ba().addKeys(Qe.keys);at=Ge.filter(function(Zt){return!Ft.hasKey(j.values?Ye(Zt):Zt)});break;case"deleteRange":var Ht=Qe.range;at=Ge.filter(function(Zt){return!Wd(Ye(Zt),Ht)})}return at},A);return rt===A?A:(rt.sort(function(Ge,Qe){return Un(He(Ge),He(Qe))||Un(Ye(Ge),Ye(Qe))}),j.limit&&j.limit<1/0&&(rt.length>j.limit?rt.length=j.limit:A.length===j.limit&&rt.length<j.limit&&(ue.dirty=!0)),_e?Object.freeze(rt):rt)}function au(A,j){return Un(A.lower,j.lower)===0&&Un(A.upper,j.upper)===0&&!!A.lowerOpen==!!j.lowerOpen&&!!A.upperOpen==!!j.upperOpen}function Tc(A,j){return function(K,te,ue,_e){if(K===void 0)return te!==void 0?-1:0;if(te===void 0)return 1;if((te=Un(K,te))===0){if(ue&&_e)return 0;if(ue)return 1;if(_e)return-1}return te}(A.lower,j.lower,A.lowerOpen,j.lowerOpen)<=0&&0<=function(K,te,ue,_e){if(K===void 0)return te!==void 0?1:0;if(te===void 0)return-1;if((te=Un(K,te))===0){if(ue&&_e)return 0;if(ue)return-1;if(_e)return 1}return te}(A.upper,j.upper,A.upperOpen,j.upperOpen)}function R1(A,j,K,te){A.subscribers.add(K),te.addEventListener("abort",function(){var ue,_e;A.subscribers.delete(K),A.subscribers.size===0&&(ue=A,_e=j,setTimeout(function(){ue.subscribers.size===0&&ee(_e,ue)},3e3))})}var Kd={stack:"dbcore",level:0,name:"Cache",create:function(A){var j=A.schema.name;return r(r({},A),{transaction:function(K,te,ue){var _e,je,$e=A.transaction(K,te,ue);return te==="readwrite"&&(je=(_e=new AbortController).signal,ue=function(We){return function(){if(_e.abort(),te==="readwrite"){for(var Ye=new Set,tt=0,He=K;tt<He.length;tt++){var rt=He[tt],Ge=el["idb://".concat(j,"/").concat(rt)];if(Ge){var Qe=A.table(rt),at=Ge.optimisticOps.filter(function(Zt){return Zt.trans===$e});if($e._explicit&&We&&$e.mutatedParts)for(var Xe=0,ft=Object.values(Ge.queries.query);Xe<ft.length;Xe++)for(var gt=0,bt=(qt=ft[Xe]).slice();gt<bt.length;gt++)up((Nt=bt[gt]).obsSet,$e.mutatedParts)&&(ee(qt,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)}));else if(0<at.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(Zt){return Zt.trans!==$e});for(var wt=0,jt=Object.values(Ge.queries.query);wt<jt.length;wt++)for(var qt,Nt,Ft,Ht=0,It=(qt=jt[wt]).slice();Ht<It.length;Ht++)(Nt=It[Ht]).res!=null&&$e.mutatedParts&&(We&&!Nt.dirty?(Ft=Object.isFrozen(Nt.res),Ft=pp(Nt.res,Nt.req,at,Qe,Nt,Ft),Nt.dirty?(ee(qt,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)})):Ft!==Nt.res&&(Nt.res=Ft,Nt.promise=M.resolve({result:Ft}))):(Nt.dirty&&ee(qt,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)})))}}}Ye.forEach(function(Zt){return Zt()})}}},$e.addEventListener("abort",ue(!1),{signal:je}),$e.addEventListener("error",ue(!1),{signal:je}),$e.addEventListener("complete",ue(!0),{signal:je})),$e},table:function(K){var te=A.table(K),ue=te.schema.primaryKey;return r(r({},te),{mutate:function(_e){var je=ke.trans;if(ue.outbound||je.db._options.cache==="disabled"||je.explicit||je.idbtrans.mode!=="readwrite")return te.mutate(_e);var $e=el["idb://".concat(j,"/").concat(K)];return $e?(je=te.mutate(_e),_e.type!=="add"&&_e.type!=="put"||!(50<=_e.values.length||Gd(ue,_e).some(function(We){return We==null}))?($e.optimisticOps.push(_e),_e.mutatedParts&&Hd(_e.mutatedParts),je.then(function(We){0<We.numFailures&&(ee($e.optimisticOps,_e),(We=Ng(0,_e,We))&&$e.optimisticOps.push(We),_e.mutatedParts&&Hd(_e.mutatedParts))}),je.catch(function(){ee($e.optimisticOps,_e),_e.mutatedParts&&Hd(_e.mutatedParts)})):je.then(function(We){var Ye=Ng(0,r(r({},_e),{values:_e.values.map(function(tt,He){var rt;return We.failures[He]?tt:(tt=(rt=ue.keyPath)!==null&&rt!==void 0&&rt.includes(".")?Z(tt):r({},tt),N(tt,ue.keyPath,We.results[He]),tt)})}),We);$e.optimisticOps.push(Ye),queueMicrotask(function(){return _e.mutatedParts&&Hd(_e.mutatedParts)})}),je):te.mutate(_e)},query:function(_e){if(!tl(ke,te)||!Rg("query",_e))return te.query(_e);var je=((Ye=ke.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",He=ke,$e=He.requery,We=He.signal,Ye=function(Qe,at,Xe,ft){var gt=el["idb://".concat(Qe,"/").concat(at)];if(!gt)return[];if(!(at=gt.queries[Xe]))return[null,!1,gt,null];var bt=at[(ft.query?ft.query.index.name:null)||""];if(!bt)return[null,!1,gt,null];switch(Xe){case"query":var wt=bt.find(function(jt){return jt.req.limit===ft.limit&&jt.req.values===ft.values&&au(jt.req.query.range,ft.query.range)});return wt?[wt,!0,gt,bt]:[bt.find(function(jt){return("limit"in jt.req?jt.req.limit:1/0)>=ft.limit&&(!ft.values||jt.req.values)&&Tc(jt.req.query.range,ft.query.range)}),!1,gt,bt];case"count":return wt=bt.find(function(jt){return au(jt.req.query.range,ft.query.range)}),[wt,!!wt,gt,bt]}}(j,K,"query",_e),tt=Ye[0],He=Ye[1],rt=Ye[2],Ge=Ye[3];return tt&&He?tt.obsSet=_e.obsSet:(He=te.query(_e).then(function(Qe){var at=Qe.result;if(tt&&(tt.res=at),je){for(var Xe=0,ft=at.length;Xe<ft;++Xe)Object.freeze(at[Xe]);Object.freeze(at)}else Qe.result=Z(at);return Qe}).catch(function(Qe){return Ge&&tt&&ee(Ge,tt),Promise.reject(Qe)}),tt={obsSet:_e.obsSet,promise:He,subscribers:new Set,type:"query",req:_e,dirty:!1},Ge?Ge.push(tt):(Ge=[tt],(rt=rt||(el["idb://".concat(j,"/").concat(K)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[_e.query.index.name||""]=Ge)),R1(tt,Ge,$e,We),tt.promise.then(function(Qe){return{result:pp(Qe.result,_e,rt==null?void 0:rt.optimisticOps,te,tt,je)}})}})}})}};function Rc(A,j){return new Proxy(A,{get:function(K,te,ue){return te==="db"?j:Reflect.get(K,te,ue)}})}var to=(Ir.prototype.version=function(A){if(isNaN(A)||A<.1)throw new Te.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new Te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var j=this._versions,K=j.filter(function(te){return te._cfg.version===A})[0];return K||(K=new this.Version(A),j.push(K),j.sort(rp),K.stores({}),this._state.autoSchema=!1,K)},Ir.prototype._whenReady=function(A){var j=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?A():new M(function(K,te){if(j._state.openComplete)return te(new Te.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return void te(new Te.DatabaseClosed);j.open().catch(Ie)}j._state.dbReadyPromise.then(K,te)}).then(A)},Ir.prototype.use=function(A){var j=A.stack,K=A.create,te=A.level,ue=A.name;return ue&&this.unuse({stack:j,name:ue}),A=this._middlewares[j]||(this._middlewares[j]=[]),A.push({stack:j,create:K,level:te??10,name:ue}),A.sort(function(_e,je){return _e.level-je.level}),this},Ir.prototype.unuse=function(A){var j=A.stack,K=A.name,te=A.create;return j&&this._middlewares[j]&&(this._middlewares[j]=this._middlewares[j].filter(function(ue){return te?ue.create!==te:!!K&&ue.name!==K})),this},Ir.prototype.open=function(){var A=this;return as(ve,function(){return k1(A)})},Ir.prototype._close=function(){var A=this._state,j=To.indexOf(this);if(0<=j&&To.splice(j,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new M(function(K){A.dbReadyResolve=K}),A.openCanceller=new M(function(K,te){A.cancelOpen=te}))},Ir.prototype.close=function(K){var j=(K===void 0?{disableAutoOpen:!0}:K).disableAutoOpen,K=this._state;j?(K.isBeingOpened&&K.cancelOpen(new Te.DatabaseClosed),this._close(),K.autoOpen=!1,K.dbOpenError=new Te.DatabaseClosed):(this._close(),K.autoOpen=this._options.autoOpen||K.isBeingOpened,K.openComplete=!1,K.dbOpenError=null)},Ir.prototype.delete=function(A){var j=this;A===void 0&&(A={disableAutoOpen:!0});var K=0<arguments.length&&typeof arguments[0]!="object",te=this._state;return new M(function(ue,_e){function je(){j.close(A);var $e=j._deps.indexedDB.deleteDatabase(j.name);$e.onsuccess=de(function(){var We,Ye,tt;We=j._deps,Ye=j.name,tt=We.indexedDB,We=We.IDBKeyRange,zd(tt)||Ye===Vs||ip(tt,We).delete(Ye).catch(Ie),ue()}),$e.onerror=ji(_e),$e.onblocked=j._fireOnBlocked}if(K)throw new Te.InvalidArgument("Invalid closeOptions argument to db.delete()");te.isBeingOpened?te.dbReadyPromise.then(je):je()})},Ir.prototype.backendDB=function(){return this.idbdb},Ir.prototype.isOpen=function(){return this.idbdb!==null},Ir.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},Ir.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ir.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ir.prototype,"tables",{get:function(){var A=this;return o(this._allTables).map(function(j){return A._allTables[j]})},enumerable:!1,configurable:!0}),Ir.prototype.transaction=function(){var A=(function(j,K,te){var ue=arguments.length;if(ue<2)throw new Te.InvalidArgument("Too few arguments");for(var _e=new Array(ue-1);--ue;)_e[ue-1]=arguments[ue];return te=_e.pop(),[j,W(_e),te]}).apply(this,arguments);return this._transaction.apply(this,A)},Ir.prototype._transaction=function(A,j,K){var te=this,ue=ke.trans;ue&&ue.db===this&&A.indexOf("!")===-1||(ue=null);var _e,je,$e=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(je=j.map(function(Ye){if(Ye=Ye instanceof te.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),A=="r"||A===Di)_e=Di;else{if(A!="rw"&&A!=xc)throw new Te.InvalidArgument("Invalid transaction mode: "+A);_e=xc}if(ue){if(ue.mode===Di&&_e===xc){if(!$e)throw new Te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ue=null}ue&&je.forEach(function(Ye){if(ue&&ue.storeNames.indexOf(Ye)===-1){if(!$e)throw new Te.SubTransaction("Table "+Ye+" not included in parent transaction.");ue=null}}),$e&&ue&&!ue.active&&(ue=null)}}catch(Ye){return ue?ue._promise(null,function(tt,He){He(Ye)}):$r(Ye)}var We=(function Ye(tt,He,rt,Ge,Qe){return M.resolve().then(function(){var at=ke.transless||ke,Xe=tt._createTransaction(He,rt,tt._dbSchema,Ge);if(Xe.explicit=!0,at={trans:Xe,transless:at},Ge)Xe.idbtrans=Ge.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,tt._state.PR1398_maxLoop=3}catch(bt){return bt.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,He,rt,null,Qe)})):$r(bt)}var ft,gt=X(Qe);return gt&&Rn(),at=M.follow(function(){var bt;(ft=Qe.call(Xe,Xe))&&(gt?(bt=zn.bind(null,null),ft.then(bt,bt)):typeof ft.next=="function"&&typeof ft.throw=="function"&&(ft=Ac(ft)))},at),(ft&&typeof ft.then=="function"?M.resolve(ft).then(function(bt){return Xe.active?bt:$r(new Te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):at.then(function(){return ft})).then(function(bt){return Ge&&Xe._resolve(),Xe._completion.then(function(){return bt})}).catch(function(bt){return Xe._reject(bt),$r(bt)})})}).bind(null,this,_e,je,ue,K);return ue?ue._promise(_e,We,"lock"):ke.trans?as(ke.transless,function(){return te._whenReady(We)}):this._whenReady(We)},Ir.prototype.table=function(A){if(!h(this._allTables,A))throw new Te.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},Ir);function Ir(A,j){var K=this;this._middlewares={},this.verno=0;var te=Ir.dependencies;this._options=j=r({addons:Ir.addons,autoOpen:!0,indexedDB:te.indexedDB,IDBKeyRange:te.IDBKeyRange,cache:"cloned"},j),this._deps={indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange},te=j.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ue,_e,je,$e,We,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ie,dbReadyPromise:null,cancelOpen:Ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:j.autoOpen};Ye.dbReadyPromise=new M(function(He){Ye.dbReadyResolve=He}),Ye.openCanceller=new M(function(He,rt){Ye.cancelOpen=rt}),this._state=Ye,this.name=A,this.on=us(this,"populate","blocked","versionchange","close",{ready:[xe,Ie]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(He){return function(rt,Ge){Ir.vip(function(){var Qe,at=K._state;at.openComplete?(at.dbOpenError||M.resolve().then(rt),Ge&&He(rt)):at.onReadyBeingFired?(at.onReadyBeingFired.push(rt),Ge&&He(rt)):(He(rt),Qe=K,Ge||He(function Xe(){Qe.on.ready.unsubscribe(rt),Qe.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(ue=this,Wl(Xl.prototype,function(ft,Xe){this.db=ue;var Ge=Gs,Qe=null;if(Xe)try{Ge=Xe()}catch(gt){Qe=gt}var at=ft._ctx,Xe=at.table,ft=Xe.hook.reading.fire;this._ctx={table:Xe,index:at.index,isPrimKey:!at.index||Xe.schema.primKey.keyPath&&at.index===Xe.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Qe,or:at.or,valueMapper:ft!==Re?ft:null}})),this.Table=(_e=this,Wl(Xh.prototype,function(He,rt,Ge){this.db=_e,this._tx=Ge,this.name=He,this.schema=rt,this.hook=_e._allTables[He]?_e._allTables[He].hook:us(null,{creating:[Ne,Ie],reading:[z,Re],updating:[ae,Ie],deleting:[ce,Ie]})})),this.Transaction=(je=this,Wl(np.prototype,function(He,rt,Ge,Qe,at){var Xe=this;this.db=je,this.mode=He,this.storeNames=rt,this.schema=Ge,this.chromeTransactionDurability=Qe,this.idbtrans=null,this.on=us(this,"complete","error","abort"),this.parent=at||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(ft,gt){Xe._resolve=ft,Xe._reject=gt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(ft){var gt=Xe.active;return Xe.active=!1,Xe.on.error.fire(ft),Xe.parent?Xe.parent._reject(ft):gt&&Xe.idbtrans&&Xe.idbtrans.abort(),$r(ft)})})),this.Version=($e=this,Wl(C1.prototype,function(He){this.db=$e,this._cfg={version:He,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,Wl(Zs.prototype,function(He,rt,Ge){if(this.db=We,this._ctx={table:He,index:rt===":id"?null:rt,or:Ge},this._cmp=this._ascending=Un,this._descending=function(Qe,at){return Un(at,Qe)},this._max=function(Qe,at){return 0<Un(Qe,at)?Qe:at},this._min=function(Qe,at){return Un(Qe,at)<0?Qe:at},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new Te.MissingAPI})),this.on("versionchange",function(He){0<He.newVersion?console.warn("Another connection wants to upgrade database '".concat(K.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(K.name,"'. Closing db now to resume the delete request.")),K.close({disableAutoOpen:!1})}),this.on("blocked",function(He){!He.newVersion||He.newVersion<He.oldVersion?console.warn("Dexie.delete('".concat(K.name,"') was blocked")):console.warn("Upgrade '".concat(K.name,"' blocked by other connection holding version ").concat(He.oldVersion/10))}),this._maxKey=tu(j.IDBKeyRange),this._createTransaction=function(He,rt,Ge,Qe){return new K.Transaction(He,rt,Ge,K._options.chromeTransactionDurability,Qe)},this._fireOnBlocked=function(He){K.on("blocked").fire(He),To.filter(function(rt){return rt.name===K.name&&rt!==K&&!rt._state.vcFired}).map(function(rt){return rt.on("versionchange").fire(He)})},this.use(Tg),this.use(Kd),this.use(T1),this.use(A1),this.use(Ag);var tt=new Proxy(this,{get:function(He,rt,Ge){if(rt==="_vip")return!0;if(rt==="table")return function(at){return Rc(K.table(at),tt)};var Qe=Reflect.get(He,rt,Ge);return Qe instanceof Xh?Rc(Qe,tt):rt==="tables"?Qe.map(function(at){return Rc(at,tt)}):rt==="_createTransaction"?function(){return Rc(Qe.apply(this,arguments),tt)}:Qe}});this.vip=tt,te.forEach(function(He){return He(K)})}var iu,ii=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ig=(Zd.prototype.subscribe=function(A,j,K){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:j,complete:K})},Zd.prototype[ii]=function(){return this},Zd);function Zd(A){this._subscribe=A}try{iu={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{iu={indexedDB:null,IDBKeyRange:null}}function Og(A){var j,K=!1,te=new Ig(function(ue){var _e=X(A),je,$e=!1,We={},Ye={},tt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,je&&je.abort(),He&&ya.storagemutated.unsubscribe(Ge))}};ue.start&&ue.start(tt);var He=!1,rt=function(){return os(Qe)},Ge=function(at){qd(We,at),up(Ye,We)&&rt()},Qe=function(){var at,Xe,ft;!$e&&iu.indexedDB&&(We={},at={},je&&je.abort(),je=new AbortController,ft=function(gt){var bt=q();try{_e&&Rn();var wt=Xt(A,gt);return wt=_e?wt.finally(zn):wt}finally{bt&&B()}}(Xe={subscr:at,signal:je.signal,requery:rt,querier:A,trans:null}),Promise.resolve(ft).then(function(gt){K=!0,j=gt,$e||Xe.signal.aborted||(We={},function(bt){for(var wt in bt)if(h(bt,wt))return;return 1}(Ye=at)||He||(ya(Ql,Ge),He=!0),os(function(){return!$e&&ue.next&&ue.next(gt)}))},function(gt){K=!1,["DatabaseClosedError","AbortError"].includes(gt==null?void 0:gt.name)||$e||os(function(){$e||ue.error&&ue.error(gt)})}))};return setTimeout(rt,0),tt});return te.hasValue=function(){return K},te.getValue=function(){return j},te}var nl=to;function mp(A){var j=fs;try{fs=!0,ya.storagemutated.fire(A),fp(A,!0)}finally{fs=j}}p(nl,r(r({},it),{delete:function(A){return new nl(A,{addons:[]}).delete()},exists:function(A){return new nl(A,{addons:[]}).open().then(function(j){return j.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return j=nl.dependencies,K=j.indexedDB,j=j.IDBKeyRange,(zd(K)?Promise.resolve(K.databases()).then(function(te){return te.map(function(ue){return ue.name}).filter(function(ue){return ue!==Vs})}):ip(K,j).toCollection().primaryKeys()).then(A)}catch{return $r(new Te.MissingAPI)}var j,K},defineClass:function(){return function(A){u(this,A)}},ignoreTransaction:function(A){return ke.trans?as(ke.transless,A):A()},vip:op,async:function(A){return function(){try{var j=Ac(A.apply(this,arguments));return j&&typeof j.then=="function"?j:M.resolve(j)}catch(K){return $r(K)}}},spawn:function(A,j,K){try{var te=Ac(A.apply(K,j||[]));return te&&typeof te.then=="function"?te:M.resolve(te)}catch(ue){return $r(ue)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(A,j){return j=M.resolve(typeof A=="function"?nl.ignoreTransaction(A):A).timeout(j||6e4),ke.trans?ke.trans.waitFor(j):j},Promise:M,debug:{get:function(){return Le},set:function(A){Se(A)}},derive:b,extend:u,props:p,override:E,Events:us,on:ya,liveQuery:Og,extendObservabilitySet:qd,getByKeyPath:O,setByKeyPath:N,delByKeyPath:function(A,j){typeof j=="string"?N(A,j,void 0):"length"in j&&[].map.call(j,function(K){N(A,K,void 0)})},shallowClone:D,deepClone:Z,getObjectDiff:Vd,cmp:Un,asap:k,minKey:-1/0,addons:[],connections:To,errnames:Pe,dependencies:iu,cache:el,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,j,K){return A+j/Math.pow(10,2*K)})})),nl.maxKey=tu(nl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ya(Ql,function(A){fs||(A=new CustomEvent(Xs,{detail:A}),fs=!0,dispatchEvent(A),fs=!1)}),addEventListener(Xs,function(A){A=A.detail,fs||mp(A)}));var ou,fs=!1,Ua=function(){};return typeof BroadcastChannel<"u"&&((Ua=function(){(ou=new BroadcastChannel(Xs)).onmessage=function(A){return A.data&&mp(A.data)}})(),typeof ou.unref=="function"&&ou.unref(),ya(Ql,function(A){fs||ou.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!to.disableBfCache&&A.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),ou!=null&&ou.close();for(var j=0,K=To;j<K.length;j++)K[j].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!to.disableBfCache&&A.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),Ua(),mp({all:new ba(-1/0,[[]])}))})),M.rejectionMapper=function(A,j){return!A||A instanceof re||A instanceof TypeError||A instanceof SyntaxError||!A.name||!qe[A.name]?A:(j=new qe[A.name](j||A.message,A),"stack"in A&&v(j,"stack",{get:function(){return this.inner.stack}}),j)},Se(Le),r(to,Object.freeze({__proto__:null,Dexie:to,liveQuery:Og,Entity:Nd,cmp:Un,PropModification:Yl,replacePrefix:function(A,j){return new Yl({replacePrefix:[A,j]})},add:function(A){return new Yl({add:A})},remove:function(A){return new Yl({remove:A})},default:to,RangeSet:ba,mergeRanges:Qs,rangesOverlap:Eg}),{default:to}),to})}(cb)),cb.exports}var Gz=Vz();const B2=ei(Gz),KR=Symbol.for("Dexie"),Eb=globalThis[KR]||(globalThis[KR]=B2);if(B2.semVer!==Eb.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${B2.semVer} and ${Eb.semVer}`);const{liveQuery:Swe,mergeRanges:Ewe,rangesOverlap:Cwe,RangeSet:kwe,cmp:Awe,Entity:Twe,PropModification:Rwe,replacePrefix:Nwe,add:Iwe,remove:Owe}=Eb,qv=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},Gn=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Lu=(...e)=>Gn(e.map(t=>t.trim()).filter(Boolean).join("/")),Hv=e=>{const t=Gn(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},la=e=>{const t=Gn(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Cb=(e,t)=>Gn(e==="/"?`/${t}`:`${e}/${t}`);class Wz extends Eb{constructor(){super("LiteChatDatabase_Rewrite_v1");Ha(this,"conversations");Ha(this,"interactions");Ha(this,"mods");Ha(this,"appState");Ha(this,"providerConfigs");Ha(this,"apiKeys");Ha(this,"syncRepos");Ha(this,"projects");this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}).upgrade(async n=>{console.log("Upgrading DB to version 5, adding unique path to projects.");const r=n.table("projects"),a=await r.toArray(),i=[],o=new Map(a.map(u=>[u.id,u])),s=(u,c)=>{if(!u.parentId)return Gn(`/${u.name}`);const f=c.get(u.parentId);if(!f)return console.error(`Upgrade Error: Parent project ${u.parentId} not found for project ${u.id}. Defaulting path.`),Gn(`/__ORPHANED__/${u.name}`);const h=s(f,c);return Gn(`${h}/${u.name}`)};for(const u of a)if(!u.path){const c=s(u,o);i.push(r.update(u.id,{path:c}))}await Promise.all(i),console.log(`Updated paths for ${i.length} projects.`)}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const sn=new Wz,nm=e=>({...e,...e.createdAt&&{createdAt:new Date(e.createdAt)},...e.updatedAt&&{updatedAt:new Date(e.updatedAt)}});class Gt{static async loadConversations(){try{return(await sn.conversations.orderBy("updatedAt").reverse().toArray()).map(nm)}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await sn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await sn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await sn.interactions.where({conversationId:t}).sortBy("index")).map(r=>({...r,...r.startedAt&&{startedAt:new Date(r.startedAt)},...r.endedAt&&{endedAt:new Date(r.endedAt)}}))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await sn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await sn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await sn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await sn.mods.orderBy("loadOrder").toArray()).map(n=>({...n,...n.createdAt&&{createdAt:new Date(n.createdAt)}}))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await sn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await sn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await sn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await sn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=sn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>({...nm(r),...r.modelsLastFetchedAt&&{modelsLastFetchedAt:new Date(r.modelsLastFetchedAt)}}))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await sn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await sn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=sn.apiKeys)==null?void 0:t.toArray())??[]).map(nm)}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await sn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await sn.transaction("rw",[sn.apiKeys,sn.providerConfigs],async()=>{const n=await sn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await sn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await sn.syncRepos.toArray()).map(n=>({...nm(n),...n.lastPulledAt&&{lastPulledAt:new Date(n.lastPulledAt)},...n.lastPushedAt&&{lastPushedAt:new Date(n.lastPushedAt)}}))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await sn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await sn.transaction("rw",[sn.syncRepos,sn.conversations],async()=>{const n=await sn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await sn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await sn.projects.orderBy("updatedAt").reverse().toArray()).map(nm)}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await sn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await sn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await sn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>sn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await sn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await sn.transaction("rw",[sn.projects,sn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await sn.transaction("rw",[sn.conversations,sn.interactions,sn.mods,sn.appState,sn.providerConfigs,sn.apiKeys,sn.syncRepos,sn.projects],async()=>{await sn.interactions.clear(),await sn.conversations.clear(),await sn.projects.clear(),await sn.mods.clear(),await sn.appState.clear(),await sn.providerConfigs.clear(),await sn.apiKeys.clear(),await sn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const yr=Bl(zl((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n});try{const r=await Gt.loadInteractionsForConversation(n);r.sort((a,i)=>a.index-i.index),e({interactions:r,status:"idle"})}catch(r){console.error("InteractionStore: Error loading interactions",r),e({error:"Failed load interactions",status:"error"})}},_addInteractionToState:n=>{const r=t().interactions;if(r.some(a=>a.id===n.id))console.warn(`InteractionStore: Interaction ${n.id} already exists in state.`);else{const a=[...r,n];a.sort((i,o)=>i.index-o.index),e({interactions:a})}},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];let s={...o.metadata||{}};r.metadata&&(s={...s,...r.metadata},r.metadata.toolCalls!==void 0&&(s.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&(s.toolResults=[...r.metadata.toolResults])),Object.assign(o,{...r,metadata:void 0}),o.metadata=s}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)?a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r:console.warn(`InteractionStore: Tried to append chunk to non-streaming interaction buffer ${n}.`)})},_removeInteractionFromState:n=>{const a=t().interactions.filter(i=>i.id!==n);e({interactions:a})},addInteractionAndPersist:async n=>{const a=t().interactions.filter(u=>u.conversationId===n.conversationId),i=a.reduce((u,c)=>Math.max(u,c.index),-1)+1,o=a.length>0?a[a.length-1].id:null,s={...n,index:i,parentId:o};t()._addInteractionToState(s);try{return await Gt.saveInteraction(s),s}catch(u){throw console.error("InteractionStore: Error persisting added interaction",u),t()._removeInteractionFromState(s.id),e({error:"Failed to save interaction"}),u}},updateInteractionAndPersist:async n=>{try{await Gt.saveInteraction({...n})}catch(r){throw console.error(`InteractionStore: Error persisting final update for ${n.id}`,r),e({error:"Failed to save final interaction state"}),r}},deleteInteraction:async n=>{const r=t().interactions.find(i=>i.id===n);if(!r)return;const a={...r};t()._removeInteractionFromState(n),t()._removeStreamingId(n);try{await Gt.deleteInteraction(n)}catch(i){throw console.error("InteractionStore: Error deleting interaction",i),t()._addInteractionToState(a),a.status==="STREAMING"&&t()._addStreamingId(n),e({error:"Failed to delete interaction"}),i}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions."),e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null})},setError:n=>{e(r=>{r.error=n,n?r.status="error":r.status==="error"&&(r.status=r.streamingInteractionIds.length>0?"streaming":"idle")})},setStatus:n=>{t().status!==n&&e({status:n})},_addStreamingId:n=>{e(r=>{r.streamingInteractionIds.includes(n)||(r.streamingInteractionIds.push(n),r.activeStreamBuffers[n]="",r.streamingInteractionIds.length===1&&(r.status="streaming"),r.error=null)})},_removeStreamingId:n=>{e(r=>{const a=r.streamingInteractionIds.indexOf(n);a!==-1&&(r.streamingInteractionIds.splice(a,1),delete r.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),r.streamingInteractionIds.length===0&&r.status==="streaming"&&(r.status=r.error?"error":"idle"))})}})));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zz=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),ZR=e=>{const t=Zz(e);return t.charAt(0).toUpperCase()+t.slice(1)},FO=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},u)=>R.createElement("svg",{ref:u,...Yz,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:FO("lucide",a),...s},[...o.map(([c,f])=>R.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=(e,t)=>{const n=R.forwardRef(({className:r,...a},i)=>R.createElement(Xz,{ref:i,iconNode:t,className:FO(`lucide-${Kz(ZR(e))}`,`lucide-${e}`,r),...a}));return n.displayName=ZR(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Qz=rn("archive",Jz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],tU=rn("arrow-down",eU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_o=rn("check",nU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vv=rn("chevron-down",rU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],iU=rn("chevron-left",aU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],aC=rn("chevron-right",oU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],lU=rn("chevron-up",sU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Gv=rn("chevrons-up-down",uU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],js=rn("circle-alert",cU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],iC=rn("circle-check",dU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],oC=rn("clipboard",fU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],LO=rn("cloud-upload",hU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$O=rn("copy",pU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],kb=rn("download",mU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yU=rn("eye-off",gU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vU=rn("eye",bU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],_U=rn("file-archive",wU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],SU=rn("file-json",xU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],CU=rn("file-question",EU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],AU=rn("file-text",kU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],RU=rn("file",TU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],IU=rn("folder-git",NU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],DU=rn("folder-open",OU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],sC=rn("folder-plus",jU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],PU=rn("folder-up",MU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Wv=rn("folder",FU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Kv=rn("git-branch",LU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],BO=rn("git-commit-horizontal",$U);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],zU=rn("git-merge",BU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],zO=rn("git-pull-request",UU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],HU=rn("grip-vertical",qU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],GU=rn("house",VU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],KU=rn("image",WU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],UO=rn("info",ZU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],XU=rn("key",YU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],QU=rn("link",JU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Zn=rn("loader-circle",eq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],nq=rn("message-square",tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],aq=rn("music",rq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],oq=rn("panel-left-close",iq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],lq=rn("panel-right-close",sq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],cq=rn("paperclip",uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],lC=rn("pen",dq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zv=rn("plus",fq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],uC=rn("refresh-cw",hq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],mq=rn("rotate-ccw",pq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cC=rn("save",gq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Yv=rn("search",yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],vq=rn("send-horizontal",bq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dC=rn("settings",wq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],xq=rn("sliders-horizontal",_q);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],z2=rn("square-pen",Sq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Cq=rn("square",Eq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Uu=rn("trash-2",kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Tq=rn("triangle-alert",Aq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],YR=rn("unlink",Rq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Iq=rn("upload",Nq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Dq=rn("user",Oq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Mq=rn("video",jq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Ab=rn("wrench",Pq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ul=rn("x",Fq),Lq="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Lo=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Lq[n[e]&63];return t};function $q(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ei=$q(),Tb=Bl(zl(e=>({attachedFilesMetadata:[],enabledTools:new Set,addAttachedFile:t=>{e(n=>{if(n.attachedFilesMetadata.some(a=>a.source==="direct"&&t.source==="direct"?a.name===t.name:a.source==="vfs"&&t.source==="vfs"?a.path===t.path:!1))console.warn(`InputStore: File "${t.name}" (source: ${t.source}) already attached. Skipping.`);else{const a={id:crypto.randomUUID(),...t};n.attachedFilesMetadata.push(a)}})},removeAttachedFile:t=>{e(n=>{n.attachedFilesMetadata=n.attachedFilesMetadata.filter(r=>r.id!==t)})},clearAttachedFiles:()=>{e({attachedFilesMetadata:[],enabledTools:new Set})},setEnabledTools:t=>{e(n=>{n.enabledTools=t(n.enabledTools)})}}))),Bq=tC("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function zq({className:e,variant:t,asChild:n=!1,...r}){const a=n?NO:"span";return y.jsx(a,{"data-slot":"badge",className:$t(Bq({variant:t}),e),...r})}var Rs=yO();const qO=ei(Rs);function Uq(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const qq=e=>{switch(e){case"success":return Gq;case"info":return Kq;case"warning":return Wq;case"error":return Zq;default:return null}},Hq=Array(12).fill(0),Vq=({visible:e,className:t})=>vt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},vt.createElement("div",{className:"sonner-spinner"},Hq.map((n,r)=>vt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Gq=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Wq=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Kq=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Zq=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Yq=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},vt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),vt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Xq=()=>{const[e,t]=vt.useState(document.hidden);return vt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let U2=1;class Jq{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:U2++,o=this.toasts.find(u=>u.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:r}),{...u,...t,id:i,dismissible:s,title:r}):u):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async c=>{if(o=["resolve",c],vt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(eH(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,v=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,p=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,p=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:p,...v})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof f=="object"&&!vt.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((c,f)=>s.then(()=>o[0]==="reject"?f(o[1]):c(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||U2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const wi=new Jq,Qq=(e,t)=>{const n=(t==null?void 0:t.id)||U2++;return wi.addToast({title:e,...t,id:n}),n},eH=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",tH=Qq,nH=()=>wi.toasts,rH=()=>wi.getActiveToasts(),dt=Object.assign(tH,{success:wi.success,info:wi.info,warning:wi.warning,error:wi.error,custom:wi.custom,message:wi.message,promise:wi.promise,dismiss:wi.dismiss,loading:wi.loading},{getHistory:nH,getToasts:rH});Uq("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Iy(e){return e.label!==void 0}const aH=3,iH="24px",oH="16px",XR=4e3,sH=356,lH=14,uH=45,cH=200;function vs(...e){return e.filter(Boolean).join(" ")}function dH(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const fH=e=>{var t,n,r,a,i,o,s,u,c;const{invert:f,toast:h,unstyled:p,interacting:g,setHeights:v,visibleToasts:b,heights:_,index:x,toasts:S,expanded:E,removeToast:C,defaultRichColors:k,closeButton:O,style:N,cancelButtonStyle:D,actionButtonStyle:U,className:W="",descriptionClassName:Q="",duration:F,position:Z,gap:L,expandByDefault:he,classNames:ie,icons:ne,closeButtonAriaLabel:ee="Close toast"}=e,[se,G]=vt.useState(null),[X,Y]=vt.useState(null),[re,be]=vt.useState(!1),[we,Me]=vt.useState(!1),[Pe,Ae]=vt.useState(!1),[Te,qe]=vt.useState(!1),[it,Ie]=vt.useState(!1),[Re,z]=vt.useState(0),[Ce,Ne]=vt.useState(0),ce=vt.useRef(h.duration||F||XR),ae=vt.useRef(null),J=vt.useRef(null),xe=x===0,Le=x+1<=b,Se=h.type,Ve=h.dismissible!==!1,xt=h.className||"",ht=h.descriptionClassName||"",Et=vt.useMemo(()=>_.findIndex(De=>De.toastId===h.id)||0,[_,h.id]),Pt=vt.useMemo(()=>{var De;return(De=h.closeButton)!=null?De:O},[h.closeButton,O]),Tt=vt.useMemo(()=>h.duration||F||XR,[h.duration,F]),Ut=vt.useRef(0),ge=vt.useRef(0),I=vt.useRef(0),H=vt.useRef(null),[fe,Oe]=Z.split("-"),ve=vt.useMemo(()=>_.reduce((De,Ke,Ct)=>Ct>=Et?De:De+Ke.height,0),[_,Et]),ke=Xq(),le=h.invert||f,ct=Se==="loading";ge.current=vt.useMemo(()=>Et*L+ve,[Et,ve]),vt.useEffect(()=>{ce.current=Tt},[Tt]),vt.useEffect(()=>{be(!0)},[]),vt.useEffect(()=>{const De=J.current;if(De){const Ke=De.getBoundingClientRect().height;return Ne(Ke),v(Ct=>[{toastId:h.id,height:Ke,position:h.position},...Ct]),()=>v(Ct=>Ct.filter(ye=>ye.toastId!==h.id))}},[v,h.id]),vt.useLayoutEffect(()=>{if(!re)return;const De=J.current,Ke=De.style.height;De.style.height="auto";const Ct=De.getBoundingClientRect().height;De.style.height=Ke,Ne(Ct),v(ye=>ye.find(B=>B.toastId===h.id)?ye.map(B=>B.toastId===h.id?{...B,height:Ct}:B):[{toastId:h.id,height:Ct,position:h.position},...ye])},[re,h.title,h.description,v,h.id]);const yt=vt.useCallback(()=>{Me(!0),z(ge.current),v(De=>De.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},cH)},[h,C,v,ge]);vt.useEffect(()=>{if(h.promise&&Se==="loading"||h.duration===1/0||h.type==="loading")return;let De;return E||g||ke?(()=>{if(I.current<Ut.current){const ye=new Date().getTime()-Ut.current;ce.current=ce.current-ye}I.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(Ut.current=new Date().getTime(),De=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),yt()},ce.current))})(),()=>clearTimeout(De)},[E,g,h,Se,ke,yt]),vt.useEffect(()=>{h.delete&&yt()},[yt,h.delete]);function M(){var De;if(ne!=null&&ne.loading){var Ke;return vt.createElement("div",{className:vs(ie==null?void 0:ie.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Se==="loading"},ne.loading)}return vt.createElement(Vq,{className:vs(ie==null?void 0:ie.loader,h==null||(De=h.classNames)==null?void 0:De.loader),visible:Se==="loading"})}const Be=h.icon||(ne==null?void 0:ne[Se])||qq(Se);var et,me;return vt.createElement("li",{tabIndex:0,ref:J,className:vs(W,xt,ie==null?void 0:ie.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ie==null?void 0:ie.default,ie==null?void 0:ie[Se],h==null||(n=h.classNames)==null?void 0:n[Se]),"data-sonner-toast":"","data-rich-colors":(et=h.richColors)!=null?et:k,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":re,"data-promise":!!h.promise,"data-swiped":it,"data-removed":we,"data-visible":Le,"data-y-position":fe,"data-x-position":Oe,"data-index":x,"data-front":xe,"data-swiping":Pe,"data-dismissible":Ve,"data-type":Se,"data-invert":le,"data-swipe-out":Te,"data-swipe-direction":X,"data-expanded":!!(E||he&&re),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${we?Re:ge.current}px`,"--initial-height":he?"auto":`${Ce}px`,...N,...h.style},onDragEnd:()=>{Ae(!1),G(null),H.current=null},onPointerDown:De=>{ct||!Ve||(ae.current=new Date,z(ge.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(Ae(!0),H.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,Ke,Ct;if(Te||!Ve)return;H.current=null;const ye=Number(((De=J.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),q=Number(((Ke=J.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),B=new Date().getTime()-((Ct=ae.current)==null?void 0:Ct.getTime()),V=se==="x"?ye:q,pe=Math.abs(V)/B;if(Math.abs(V)>=uH||pe>.11){z(ge.current),h.onDismiss==null||h.onDismiss.call(h,h),Y(se==="x"?ye>0?"right":"left":q>0?"down":"up"),yt(),qe(!0);return}else{var de,Fe;(de=J.current)==null||de.style.setProperty("--swipe-amount-x","0px"),(Fe=J.current)==null||Fe.style.setProperty("--swipe-amount-y","0px")}Ie(!1),Ae(!1),G(null)},onPointerMove:De=>{var Ke,Ct,ye;if(!H.current||!Ve||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const B=De.clientY-H.current.y,V=De.clientX-H.current.x;var pe;const de=(pe=e.swipeDirections)!=null?pe:dH(Z);!se&&(Math.abs(V)>1||Math.abs(B)>1)&&G(Math.abs(V)>Math.abs(B)?"x":"y");let Fe={x:0,y:0};const ot=Dt=>1/(1.5+Math.abs(Dt)/20);if(se==="y"){if(de.includes("top")||de.includes("bottom"))if(de.includes("top")&&B<0||de.includes("bottom")&&B>0)Fe.y=B;else{const Dt=B*ot(B);Fe.y=Math.abs(Dt)<Math.abs(B)?Dt:B}}else if(se==="x"&&(de.includes("left")||de.includes("right")))if(de.includes("left")&&V<0||de.includes("right")&&V>0)Fe.x=V;else{const Dt=V*ot(V);Fe.x=Math.abs(Dt)<Math.abs(V)?Dt:V}(Math.abs(Fe.x)>0||Math.abs(Fe.y)>0)&&Ie(!0),(Ct=J.current)==null||Ct.style.setProperty("--swipe-amount-x",`${Fe.x}px`),(ye=J.current)==null||ye.style.setProperty("--swipe-amount-y",`${Fe.y}px`)}},Pt&&!h.jsx&&Se!=="loading"?vt.createElement("button",{"aria-label":ee,"data-disabled":ct,"data-close-button":!0,onClick:ct||!Ve?()=>{}:()=>{yt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:vs(ie==null?void 0:ie.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(me=ne==null?void 0:ne.close)!=null?me:Yq):null,(Se||h.icon||h.promise)&&h.icon!==null&&((ne==null?void 0:ne[Se])!==null||h.icon)?vt.createElement("div",{"data-icon":"",className:vs(ie==null?void 0:ie.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||M():null,h.type!=="loading"?Be:null):null,vt.createElement("div",{"data-content":"",className:vs(ie==null?void 0:ie.content,h==null||(i=h.classNames)==null?void 0:i.content)},vt.createElement("div",{"data-title":"",className:vs(ie==null?void 0:ie.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?vt.createElement("div",{"data-description":"",className:vs(Q,ht,ie==null?void 0:ie.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),vt.isValidElement(h.cancel)?h.cancel:h.cancel&&Iy(h.cancel)?vt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||D,onClick:De=>{Iy(h.cancel)&&Ve&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,De),yt())},className:vs(ie==null?void 0:ie.cancelButton,h==null||(u=h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,vt.isValidElement(h.action)?h.action:h.action&&Iy(h.action)?vt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||U,onClick:De=>{Iy(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,De),!De.defaultPrevented&&yt())},className:vs(ie==null?void 0:ie.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function JR(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function hH(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?oH:iH;function u(c){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=s:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):u(s)}),n}const pH=vt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:u,offset:c,mobileOffset:f,theme:h="light",richColors:p,duration:g,style:v,visibleToasts:b=aH,toastOptions:_,dir:x=JR(),gap:S=lH,icons:E,containerAriaLabel:C="Notifications"}=t,[k,O]=vt.useState([]),N=vt.useMemo(()=>Array.from(new Set([a].concat(k.filter(X=>X.position).map(X=>X.position)))),[k,a]),[D,U]=vt.useState([]),[W,Q]=vt.useState(!1),[F,Z]=vt.useState(!1),[L,he]=vt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ie=vt.useRef(null),ne=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=vt.useRef(null),se=vt.useRef(!1),G=vt.useCallback(X=>{O(Y=>{var re;return(re=Y.find(be=>be.id===X.id))!=null&&re.delete||wi.dismiss(X.id),Y.filter(({id:be})=>be!==X.id)})},[]);return vt.useEffect(()=>wi.subscribe(X=>{if(X.dismiss){requestAnimationFrame(()=>{O(Y=>Y.map(re=>re.id===X.id?{...re,delete:!0}:re))});return}setTimeout(()=>{qO.flushSync(()=>{O(Y=>{const re=Y.findIndex(be=>be.id===X.id);return re!==-1?[...Y.slice(0,re),{...Y[re],...X},...Y.slice(re+1)]:[X,...Y]})})})}),[k]),vt.useEffect(()=>{if(h!=="system"){he(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?he("dark"):he("light")),typeof window>"u")return;const X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:Y})=>{he(Y?"dark":"light")})}catch{X.addListener(({matches:re})=>{try{he(re?"dark":"light")}catch(be){console.error(be)}})}},[h]),vt.useEffect(()=>{k.length<=1&&Q(!1)},[k]),vt.useEffect(()=>{const X=Y=>{var re;if(i.every(Me=>Y[Me]||Y.code===Me)){var we;Q(!0),(we=ie.current)==null||we.focus()}Y.code==="Escape"&&(document.activeElement===ie.current||(re=ie.current)!=null&&re.contains(document.activeElement))&&Q(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[i]),vt.useEffect(()=>{if(ie.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,se.current=!1)}},[ie.current]),vt.createElement("section",{ref:n,"aria-label":`${C} ${ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((X,Y)=>{var re;const[be,we]=X.split("-");return k.length?vt.createElement("ol",{key:X,dir:x==="auto"?JR():x,tabIndex:-1,ref:ie,className:u,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":be,"data-lifted":W&&k.length>1&&!o,"data-x-position":we,style:{"--front-toast-height":`${((re=D[0])==null?void 0:re.height)||0}px`,"--width":`${sH}px`,"--gap":`${S}px`,...v,...hH(c,f)},onBlur:Me=>{se.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(se.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||se.current||(se.current=!0,ee.current=Me.relatedTarget)},onMouseEnter:()=>Q(!0),onMouseMove:()=>Q(!0),onMouseLeave:()=>{F||Q(!1)},onDragEnd:()=>Q(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},k.filter(Me=>!Me.position&&Y===0||Me.position===X).map((Me,Pe)=>{var Ae,Te;return vt.createElement(fH,{key:Me.id,icons:E,index:Pe,toast:Me,defaultRichColors:p,duration:(Ae=_==null?void 0:_.duration)!=null?Ae:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Te=_==null?void 0:_.closeButton)!=null?Te:s,interacting:F,position:X,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:G,toasts:k.filter(qe=>qe.position==Me.position),heights:D.filter(qe=>qe.position==Me.position),setHeights:U,expandByDefault:o,gap:S,expanded:W,swipeDirections:t.swipeDirections})})):null}))});async function mH(e,t){const n=Na.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}const gH=({InputAreaRenderer:e,onSubmit:t,className:n})=>{const r=R.useRef(null),{attachedFilesMetadata:a,clearAttachedFiles:i,removeAttachedFile:o}=Tb(),[s,u]=R.useState(!1),c=Na(S=>S.promptControls),f=yr(S=>S.status==="streaming"),h=R.useMemo(()=>Object.values(c).filter(S=>S.show?S.show():!0).sort((S,E)=>(S.order??1/0)-(E.order??1/0)),[c]),p=R.useCallback(()=>{i(),h.forEach(S=>{S.clearOnSubmit&&S.clearOnSubmit()})},[h,i]),g=R.useCallback(async S=>{var Q;S==null||S.preventDefault();const C=(((Q=r.current)==null?void 0:Q.getValue())??"").trim();if(f){console.warn("Submit prevented: AI is currently streaming.");return}const k=Tb.getState().attachedFilesMetadata;if(!(C||k.length>0)){console.warn("Submit prevented: No content provided.");return}u(!0);const N=JSON.parse(JSON.stringify(k));let D={id:Lo(),content:C,parameters:{},metadata:{attachedFiles:N}};for(const F of h){if(F.getParameters)try{const Z=await F.getParameters();Z&&typeof Z=="object"&&(D.parameters={...D.parameters,...Z})}catch(Z){console.error(`Error getting parameters from control ${F.id}:`,Z)}if(F.getMetadata)try{const Z=await F.getMetadata();if(Z&&typeof Z=="object"){const{attachedFiles:L,...he}=Z;L&&console.warn(`Control ${F.id} tried to overwrite attachedFiles metadata. Ignoring.`),D.metadata={...D.metadata,...he,attachedFiles:D.metadata.attachedFiles}}}catch(Z){console.error(`Error getting metadata from control ${F.id}:`,Z)}}Ei.emit("prompt:submitted",{turnData:D});const U=await mH("middleware:prompt:turnFinalize",{turnData:D});if(U===!1){console.log("Submission cancelled by middleware:prompt:turnFinalize."),u(!1);return}const W=U&&typeof U=="object"?U.turnData:D;try{await t(W),p()}catch(F){console.error("Error during final prompt submission:",F),dt.error(`Submission failed: ${F instanceof Error?F.message:String(F)}`)}finally{u(!1)}},[t,f,p,h]),v=R.useCallback(()=>{g()},[g]),b=h.some(S=>!!S.renderer),_=h.some(S=>!!S.triggerRenderer);R.useEffect(()=>()=>{i()},[i]);const x=s||f||a.length===0;return y.jsxs("form",{onSubmit:g,className:$t("flex flex-col border-t border-[--border] bg-background",n),children:[b&&y.jsx("div",{className:"p-2 border-b border-[--border] bg-muted/30",children:y.jsx(PR,{controls:h,area:"panel"})}),a.length>0&&y.jsx("div",{className:"px-3 md:px-4 pt-2 border-b border-border/50 max-h-24 overflow-y-auto",children:y.jsx("div",{className:"flex flex-wrap gap-1.5 pb-1.5",children:a.map(S=>y.jsxs(zq,{variant:"secondary",className:"flex items-center gap-1.5 pl-1.5 pr-0.5 py-0.5 text-xs",children:[y.jsx("span",{className:"truncate max-w-[150px]",title:S.name,children:S.name}),y.jsxs("span",{className:"text-muted-foreground/80",children:["(",qv(S.size),")"]}),y.jsx(Lt,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>o(S.id),"aria-label":`Remove ${S.name}`,disabled:s||f,children:y.jsx(Ul,{className:"h-3 w-3"})})]},S.id))})}),y.jsxs("div",{className:"p-3 md:p-4 flex items-end gap-2",children:[y.jsx("div",{className:"flex-grow",children:y.jsx(e,{ref:r,onSubmit:v,disabled:s||f,initialValue:""})}),y.jsx("div",{className:"flex-shrink-0",children:y.jsx(Lt,{type:"submit",disabled:x,size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Send message",children:y.jsx(vq,{className:"h-5 w-5"})})})]}),_&&y.jsx("div",{className:"px-3 md:px-4 pb-2 pt-1 flex-grow",children:y.jsx(PR,{controls:h,area:"trigger",className:"flex flex-wrap items-center gap-1 [&>*]:flex-shrink-0"})})]})};function Bt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function yH(e,t){const n=R.createContext(t),r=i=>{const{children:o,...s}=i,u=R.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:u,children:o})};r.displayName=e+"Provider";function a(i){const o=R.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Ni(e,t=[]){let n=[];function r(i,o){const s=R.createContext(o),u=n.length;n=[...n,o];const c=h=>{var x;const{scope:p,children:g,...v}=h,b=((x=p==null?void 0:p[e])==null?void 0:x[u])||s,_=R.useMemo(()=>v,Object.values(v));return y.jsx(b.Provider,{value:_,children:g})};c.displayName=i+"Provider";function f(h,p){var b;const g=((b=p==null?void 0:p[e])==null?void 0:b[u])||s,v=R.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const a=()=>{const i=n.map(o=>R.createContext(o));return function(s){const u=(s==null?void 0:s[e])||i;return R.useMemo(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return a.scopeName=e,[r,bH(a,...t)]}function bH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...s,...h}},{});return R.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var vH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jt=vH.reduce((e,t)=>{const n=zu(`Primitive.${t}`),r=R.forwardRef((a,i)=>{const{asChild:o,...s}=a,u=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function HO(e,t){e&&Rs.flushSync(()=>e.dispatchEvent(t))}function ka(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),R.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function wH(e,t=globalThis==null?void 0:globalThis.document){const n=ka(e);R.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var _H="DismissableLayer",q2="dismissableLayer.update",xH="dismissableLayer.pointerDownOutside",SH="dismissableLayer.focusOutside",QR,VO=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vh=R.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...u}=e,c=R.useContext(VO),[f,h]=R.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=R.useState({}),v=_n(t,N=>h(N)),b=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(_),S=f?b.indexOf(f):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=S>=x,k=kH(N=>{const D=N.target,U=[...c.branches].some(W=>W.contains(D));!C||U||(a==null||a(N),o==null||o(N),N.defaultPrevented||s==null||s())},p),O=AH(N=>{const D=N.target;[...c.branches].some(W=>W.contains(D))||(i==null||i(N),o==null||o(N),N.defaultPrevented||s==null||s())},p);return wH(N=>{S===c.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&s&&(N.preventDefault(),s()))},p),R.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(QR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),eN(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=QR)}},[f,p,n,c]),R.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),eN())},[f,c]),R.useEffect(()=>{const N=()=>g({});return document.addEventListener(q2,N),()=>document.removeEventListener(q2,N)},[]),y.jsx(Jt.div,{...u,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:Bt(e.onFocusCapture,O.onFocusCapture),onBlurCapture:Bt(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Bt(e.onPointerDownCapture,k.onPointerDownCapture)})});vh.displayName=_H;var EH="DismissableLayerBranch",CH=R.forwardRef((e,t)=>{const n=R.useContext(VO),r=R.useRef(null),a=_n(t,r);return R.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(Jt.div,{...e,ref:a})});CH.displayName=EH;function kH(e,t=globalThis==null?void 0:globalThis.document){const n=ka(e),r=R.useRef(!1),a=R.useRef(()=>{});return R.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let u=function(){GO(xH,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function AH(e,t=globalThis==null?void 0:globalThis.document){const n=ka(e),r=R.useRef(!1);return R.useEffect(()=>{const a=i=>{i.target&&!r.current&&GO(SH,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function eN(){const e=new CustomEvent(q2);document.dispatchEvent(e)}function GO(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?HO(a,i):a.dispatchEvent(i)}var $a=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},TH=gO[" useId ".trim().toString()]||(()=>{}),RH=0;function Za(e){const[t,n]=R.useState(TH());return $a(()=>{n(r=>r??String(RH++))},[e]),t?`radix-${t}`:""}const NH=["top","right","bottom","left"],qu=Math.min,Vi=Math.max,Rb=Math.round,Oy=Math.floor,Ds=e=>({x:e,y:e}),IH={left:"right",right:"left",bottom:"top",top:"bottom"},OH={start:"end",end:"start"};function H2(e,t,n){return Vi(e,qu(t,n))}function Ol(e,t){return typeof e=="function"?e(t):e}function Dl(e){return e.split("-")[0]}function wh(e){return e.split("-")[1]}function fC(e){return e==="x"?"y":"x"}function hC(e){return e==="y"?"height":"width"}function Hu(e){return["top","bottom"].includes(Dl(e))?"y":"x"}function pC(e){return fC(Hu(e))}function DH(e,t,n){n===void 0&&(n=!1);const r=wh(e),a=pC(e),i=hC(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Nb(o)),[o,Nb(o)]}function jH(e){const t=Nb(e);return[V2(e),t,V2(t)]}function V2(e){return e.replace(/start|end/g,t=>OH[t])}function MH(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function PH(e,t,n,r){const a=wh(e);let i=MH(Dl(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(V2)))),i}function Nb(e){return e.replace(/left|right|bottom|top/g,t=>IH[t])}function FH(e){return{top:0,right:0,bottom:0,left:0,...e}}function WO(e){return typeof e!="number"?FH(e):{top:e,right:e,bottom:e,left:e}}function Ib(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function tN(e,t,n){let{reference:r,floating:a}=e;const i=Hu(t),o=pC(t),s=hC(o),u=Dl(t),c=i==="y",f=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,p=r[s]/2-a[s]/2;let g;switch(u){case"top":g={x:f,y:r.y-a.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(wh(t)){case"start":g[o]-=p*(n&&c?-1:1);break;case"end":g[o]+=p*(n&&c?-1:1);break}return g}const LH=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=tN(c,r,u),p=r,g={},v=0;for(let b=0;b<s.length;b++){const{name:_,fn:x}=s[b],{x:S,y:E,data:C,reset:k}=await x({x:f,y:h,initialPlacement:r,placement:p,strategy:a,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});f=S??f,h=E??h,g={...g,[_]:{...g[_],...C}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:f,y:h}=tN(c,p,u)),b=-1)}return{x:f,y:h,placement:p,strategy:a,middlewareData:g}};async function km(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=Ol(t,e),v=WO(g),_=s[p?h==="floating"?"reference":"floating":h],x=Ib(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:u})),S=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=Ib(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:u}):S);return{top:(x.top-k.top+v.top)/C.y,bottom:(k.bottom-x.bottom+v.bottom)/C.y,left:(x.left-k.left+v.left)/C.x,right:(k.right-x.right+v.right)/C.x}}const $H=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:u}=t,{element:c,padding:f=0}=Ol(e,t)||{};if(c==null)return{};const h=WO(f),p={x:n,y:r},g=pC(a),v=hC(g),b=await o.getDimensions(c),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",E=_?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[g]-p[g]-i.floating[v],k=p[g]-i.reference[g],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let N=O?O[E]:0;(!N||!await(o.isElement==null?void 0:o.isElement(O)))&&(N=s.floating[E]||i.floating[v]);const D=C/2-k/2,U=N/2-b[v]/2-1,W=qu(h[x],U),Q=qu(h[S],U),F=W,Z=N-b[v]-Q,L=N/2-b[v]/2+D,he=H2(F,L,Z),ie=!u.arrow&&wh(a)!=null&&L!==he&&i.reference[v]/2-(L<F?W:Q)-b[v]/2<0,ne=ie?L<F?L-F:L-Z:0;return{[g]:p[g]+ne,data:{[g]:he,centerOffset:L-he-ne,...ie&&{alignmentOffset:ne}},reset:ie}}}),BH=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:u,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,..._}=Ol(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Dl(a),S=Hu(s),E=Dl(s)===s,C=await(u.isRTL==null?void 0:u.isRTL(c.floating)),k=p||(E||!b?[Nb(s)]:jH(s)),O=v!=="none";!p&&O&&k.push(...PH(s,b,v,C));const N=[s,...k],D=await km(t,_),U=[];let W=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&U.push(D[x]),h){const L=DH(a,o,C);U.push(D[L[0]],D[L[1]])}if(W=[...W,{placement:a,overflows:U}],!U.every(L=>L<=0)){var Q,F;const L=(((Q=i.flip)==null?void 0:Q.index)||0)+1,he=N[L];if(he)return{data:{index:L,overflows:W},reset:{placement:he}};let ie=(F=W.filter(ne=>ne.overflows[0]<=0).sort((ne,ee)=>ne.overflows[1]-ee.overflows[1])[0])==null?void 0:F.placement;if(!ie)switch(g){case"bestFit":{var Z;const ne=(Z=W.filter(ee=>{if(O){const se=Hu(ee.placement);return se===S||se==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(se=>se>0).reduce((se,G)=>se+G,0)]).sort((ee,se)=>ee[1]-se[1])[0])==null?void 0:Z[0];ne&&(ie=ne);break}case"initialPlacement":ie=s;break}if(a!==ie)return{reset:{placement:ie}}}return{}}}};function nN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function rN(e){return NH.some(t=>e[t]>=0)}const zH=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Ol(e,t);switch(r){case"referenceHidden":{const i=await km(t,{...a,elementContext:"reference"}),o=nN(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:rN(o)}}}case"escaped":{const i=await km(t,{...a,altBoundary:!0}),o=nN(i,n.floating);return{data:{escapedOffsets:o,escaped:rN(o)}}}default:return{}}}}};async function UH(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Dl(n),s=wh(n),u=Hu(n)==="y",c=["left","top"].includes(o)?-1:1,f=i&&u?-1:1,h=Ol(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof v=="number"&&(g=s==="end"?v*-1:v),u?{x:g*f,y:p*c}:{x:p*c,y:g*f}}const qH=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,u=await UH(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:o}}}}},HH=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...u}=Ol(e,t),c={x:n,y:r},f=await km(t,u),h=Hu(Dl(a)),p=fC(h);let g=c[p],v=c[h];if(i){const _=p==="y"?"top":"left",x=p==="y"?"bottom":"right",S=g+f[_],E=g-f[x];g=H2(S,g,E)}if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=v+f[_],E=v-f[x];v=H2(S,v,E)}const b=s.fn({...t,[p]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[h]:o}}}}}},VH=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:u=!0,crossAxis:c=!0}=Ol(e,t),f={x:n,y:r},h=Hu(a),p=fC(h);let g=f[p],v=f[h];const b=Ol(s,t),_=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const E=p==="y"?"height":"width",C=i.reference[p]-i.floating[E]+_.mainAxis,k=i.reference[p]+i.reference[E]-_.mainAxis;g<C?g=C:g>k&&(g=k)}if(c){var x,S;const E=p==="y"?"width":"height",C=["top","left"].includes(Dl(a)),k=i.reference[h]-i.floating[E]+(C&&((x=o.offset)==null?void 0:x[h])||0)+(C?0:_.crossAxis),O=i.reference[h]+i.reference[E]+(C?0:((S=o.offset)==null?void 0:S[h])||0)-(C?_.crossAxis:0);v<k?v=k:v>O&&(v=O)}return{[p]:g,[h]:v}}}},GH=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:u=()=>{},...c}=Ol(e,t),f=await km(t,c),h=Dl(a),p=wh(a),g=Hu(a)==="y",{width:v,height:b}=i.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=p===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,_=p==="end"?"top":"bottom");const S=b-f.top-f.bottom,E=v-f.left-f.right,C=qu(b-f[_],S),k=qu(v-f[x],E),O=!t.middlewareData.shift;let N=C,D=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(D=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=S),O&&!p){const W=Vi(f.left,0),Q=Vi(f.right,0),F=Vi(f.top,0),Z=Vi(f.bottom,0);g?D=v-2*(W!==0||Q!==0?W+Q:Vi(f.left,f.right)):N=b-2*(F!==0||Z!==0?F+Z:Vi(f.top,f.bottom))}await u({...t,availableWidth:D,availableHeight:N});const U=await o.getDimensions(s.floating);return v!==U.width||b!==U.height?{reset:{rects:!0}}:{}}}};function Xv(){return typeof window<"u"}function _h(e){return KO(e)?(e.nodeName||"").toLowerCase():"#document"}function Ki(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function zs(e){var t;return(t=(KO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function KO(e){return Xv()?e instanceof Node||e instanceof Ki(e).Node:!1}function Vo(e){return Xv()?e instanceof Element||e instanceof Ki(e).Element:!1}function Ms(e){return Xv()?e instanceof HTMLElement||e instanceof Ki(e).HTMLElement:!1}function aN(e){return!Xv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ki(e).ShadowRoot}function _0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Go(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function WH(e){return["table","td","th"].includes(_h(e))}function Jv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function mC(e){const t=gC(),n=Vo(e)?Go(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function KH(e){let t=Vu(e);for(;Ms(t)&&!Kf(t);){if(mC(t))return t;if(Jv(t))return null;t=Vu(t)}return null}function gC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Kf(e){return["html","body","#document"].includes(_h(e))}function Go(e){return Ki(e).getComputedStyle(e)}function Qv(e){return Vo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vu(e){if(_h(e)==="html")return e;const t=e.assignedSlot||e.parentNode||aN(e)&&e.host||zs(e);return aN(t)?t.host:t}function ZO(e){const t=Vu(e);return Kf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ms(t)&&_0(t)?t:ZO(t)}function Am(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=ZO(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Ki(a);if(i){const s=G2(o);return t.concat(o,o.visualViewport||[],_0(a)?a:[],s&&n?Am(s):[])}return t.concat(a,Am(a,[],n))}function G2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function YO(e){const t=Go(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Ms(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Rb(n)!==i||Rb(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function yC(e){return Vo(e)?e:e.contextElement}function Bf(e){const t=yC(e);if(!Ms(t))return Ds(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=YO(t);let o=(i?Rb(n.width):n.width)/r,s=(i?Rb(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const ZH=Ds(0);function XO(e){const t=Ki(e);return!gC()||!t.visualViewport?ZH:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function YH(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ki(e)?!1:t}function od(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=yC(e);let o=Ds(1);t&&(r?Vo(r)&&(o=Bf(r)):o=Bf(e));const s=YH(i,n,r)?XO(i):Ds(0);let u=(a.left+s.x)/o.x,c=(a.top+s.y)/o.y,f=a.width/o.x,h=a.height/o.y;if(i){const p=Ki(i),g=r&&Vo(r)?Ki(r):r;let v=p,b=G2(v);for(;b&&r&&g!==v;){const _=Bf(b),x=b.getBoundingClientRect(),S=Go(b),E=x.left+(b.clientLeft+parseFloat(S.paddingLeft))*_.x,C=x.top+(b.clientTop+parseFloat(S.paddingTop))*_.y;u*=_.x,c*=_.y,f*=_.x,h*=_.y,u+=E,c+=C,v=Ki(b),b=G2(v)}}return Ib({width:f,height:h,x:u,y:c})}function bC(e,t){const n=Qv(e).scrollLeft;return t?t.left+n:od(zs(e)).left+n}function JO(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:bC(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function XH(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=zs(r),s=t?Jv(t.floating):!1;if(r===o||s&&i)return n;let u={scrollLeft:0,scrollTop:0},c=Ds(1);const f=Ds(0),h=Ms(r);if((h||!h&&!i)&&((_h(r)!=="body"||_0(o))&&(u=Qv(r)),Ms(r))){const g=od(r);c=Bf(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const p=o&&!h&&!i?JO(o,u,!0):Ds(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+f.x+p.x,y:n.y*c.y-u.scrollTop*c.y+f.y+p.y}}function JH(e){return Array.from(e.getClientRects())}function QH(e){const t=zs(e),n=Qv(e),r=e.ownerDocument.body,a=Vi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Vi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+bC(e);const s=-n.scrollTop;return Go(r).direction==="rtl"&&(o+=Vi(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function eV(e,t){const n=Ki(e),r=zs(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,u=0;if(a){i=a.width,o=a.height;const c=gC();(!c||c&&t==="fixed")&&(s=a.offsetLeft,u=a.offsetTop)}return{width:i,height:o,x:s,y:u}}function tV(e,t){const n=od(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Ms(e)?Bf(e):Ds(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,u=a*i.x,c=r*i.y;return{width:o,height:s,x:u,y:c}}function iN(e,t,n){let r;if(t==="viewport")r=eV(e,n);else if(t==="document")r=QH(zs(e));else if(Vo(t))r=tV(t,n);else{const a=XO(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Ib(r)}function QO(e,t){const n=Vu(e);return n===t||!Vo(n)||Kf(n)?!1:Go(n).position==="fixed"||QO(n,t)}function nV(e,t){const n=t.get(e);if(n)return n;let r=Am(e,[],!1).filter(s=>Vo(s)&&_h(s)!=="body"),a=null;const i=Go(e).position==="fixed";let o=i?Vu(e):e;for(;Vo(o)&&!Kf(o);){const s=Go(o),u=mC(o);!u&&s.position==="fixed"&&(a=null),(i?!u&&!a:!u&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||_0(o)&&!u&&QO(e,o))?r=r.filter(f=>f!==o):a=s,o=Vu(o)}return t.set(e,r),r}function rV(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Jv(t)?[]:nV(t,this._c):[].concat(n),r],s=o[0],u=o.reduce((c,f)=>{const h=iN(t,f,a);return c.top=Vi(h.top,c.top),c.right=qu(h.right,c.right),c.bottom=qu(h.bottom,c.bottom),c.left=Vi(h.left,c.left),c},iN(t,s,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function aV(e){const{width:t,height:n}=YO(e);return{width:t,height:n}}function iV(e,t,n){const r=Ms(t),a=zs(t),i=n==="fixed",o=od(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=Ds(0);if(r||!r&&!i)if((_h(t)!=="body"||_0(a))&&(s=Qv(t)),r){const p=od(t,!0,i,t);u.x=p.x+t.clientLeft,u.y=p.y+t.clientTop}else a&&(u.x=bC(a));const c=a&&!r&&!i?JO(a,s):Ds(0),f=o.left+s.scrollLeft-u.x-c.x,h=o.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:o.width,height:o.height}}function _x(e){return Go(e).position==="static"}function oN(e,t){if(!Ms(e)||Go(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return zs(e)===n&&(n=n.ownerDocument.body),n}function eD(e,t){const n=Ki(e);if(Jv(e))return n;if(!Ms(e)){let a=Vu(e);for(;a&&!Kf(a);){if(Vo(a)&&!_x(a))return a;a=Vu(a)}return n}let r=oN(e,t);for(;r&&WH(r)&&_x(r);)r=oN(r,t);return r&&Kf(r)&&_x(r)&&!mC(r)?n:r||KH(e)||n}const oV=async function(e){const t=this.getOffsetParent||eD,n=this.getDimensions,r=await n(e.floating);return{reference:iV(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sV(e){return Go(e).direction==="rtl"}const lV={convertOffsetParentRelativeRectToViewportRelativeRect:XH,getDocumentElement:zs,getClippingRect:rV,getOffsetParent:eD,getElementRects:oV,getClientRects:JH,getDimensions:aV,getScale:Bf,isElement:Vo,isRTL:sV};function tD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function uV(e,t){let n=null,r;const a=zs(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),i();const c=e.getBoundingClientRect(),{left:f,top:h,width:p,height:g}=c;if(s||t(),!p||!g)return;const v=Oy(h),b=Oy(a.clientWidth-(f+p)),_=Oy(a.clientHeight-(h+g)),x=Oy(f),E={rootMargin:-v+"px "+-b+"px "+-_+"px "+-x+"px",threshold:Vi(0,qu(1,u))||1};let C=!0;function k(O){const N=O[0].intersectionRatio;if(N!==u){if(!C)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!tD(c,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return o(!0),i}function cV(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=yC(e),f=a||i?[...c?Am(c):[],...Am(t)]:[];f.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&s?uV(c,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!u&&g.observe(c),g.observe(t));let v,b=u?od(e):null;u&&_();function _(){const x=od(e);b&&!tD(b,x)&&n(),b=x,v=requestAnimationFrame(_)}return n(),()=>{var x;f.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,u&&cancelAnimationFrame(v)}}const dV=qH,fV=HH,hV=BH,pV=GH,mV=zH,sN=$H,gV=VH,yV=(e,t,n)=>{const r=new Map,a={platform:lV,...n},i={...a.platform,_c:r};return LH(e,t,{...a,platform:i})};var db=typeof document<"u"?R.useLayoutEffect:R.useEffect;function Ob(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ob(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Ob(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function nD(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function lN(e,t){const n=nD(e);return Math.round(t*n)/n}function xx(e){const t=R.useRef(e);return db(()=>{t.current=e}),t}function bV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:u,open:c}=e,[f,h]=R.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=R.useState(r);Ob(p,r)||g(r);const[v,b]=R.useState(null),[_,x]=R.useState(null),S=R.useCallback(ee=>{ee!==O.current&&(O.current=ee,b(ee))},[]),E=R.useCallback(ee=>{ee!==N.current&&(N.current=ee,x(ee))},[]),C=i||v,k=o||_,O=R.useRef(null),N=R.useRef(null),D=R.useRef(f),U=u!=null,W=xx(u),Q=xx(a),F=xx(c),Z=R.useCallback(()=>{if(!O.current||!N.current)return;const ee={placement:t,strategy:n,middleware:p};Q.current&&(ee.platform=Q.current),yV(O.current,N.current,ee).then(se=>{const G={...se,isPositioned:F.current!==!1};L.current&&!Ob(D.current,G)&&(D.current=G,Rs.flushSync(()=>{h(G)}))})},[p,t,n,Q,F]);db(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,h(ee=>({...ee,isPositioned:!1})))},[c]);const L=R.useRef(!1);db(()=>(L.current=!0,()=>{L.current=!1}),[]),db(()=>{if(C&&(O.current=C),k&&(N.current=k),C&&k){if(W.current)return W.current(C,k,Z);Z()}},[C,k,Z,W,U]);const he=R.useMemo(()=>({reference:O,floating:N,setReference:S,setFloating:E}),[S,E]),ie=R.useMemo(()=>({reference:C,floating:k}),[C,k]),ne=R.useMemo(()=>{const ee={position:n,left:0,top:0};if(!ie.floating)return ee;const se=lN(ie.floating,f.x),G=lN(ie.floating,f.y);return s?{...ee,transform:"translate("+se+"px, "+G+"px)",...nD(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:se,top:G}},[n,s,ie.floating,f.x,f.y]);return R.useMemo(()=>({...f,update:Z,refs:he,elements:ie,floatingStyles:ne}),[f,Z,he,ie,ne])}const vV=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?sN({element:r.current,padding:a}).fn(n):{}:r?sN({element:r,padding:a}).fn(n):{}}}},wV=(e,t)=>({...dV(e),options:[e,t]}),_V=(e,t)=>({...fV(e),options:[e,t]}),xV=(e,t)=>({...gV(e),options:[e,t]}),SV=(e,t)=>({...hV(e),options:[e,t]}),EV=(e,t)=>({...pV(e),options:[e,t]}),CV=(e,t)=>({...mV(e),options:[e,t]}),kV=(e,t)=>({...vV(e),options:[e,t]});var AV="Arrow",rD=R.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(Jt.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});rD.displayName=AV;var TV=rD;function ew(e){const[t,n]=R.useState(void 0);return $a(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const u=i.borderBoxSize,c=Array.isArray(u)?u[0]:u;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var vC="Popper",[aD,uc]=Ni(vC),[RV,iD]=aD(vC),oD=e=>{const{__scopePopper:t,children:n}=e,[r,a]=R.useState(null);return y.jsx(RV,{scope:t,anchor:r,onAnchorChange:a,children:n})};oD.displayName=vC;var sD="PopperAnchor",lD=R.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=iD(sD,n),o=R.useRef(null),s=_n(t,o);return R.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(Jt.div,{...a,ref:s})});lD.displayName=sD;var wC="PopperContent",[NV,IV]=aD(wC),uD=R.forwardRef((e,t)=>{var Pe,Ae,Te,qe,it,Ie;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,_=iD(wC,n),[x,S]=R.useState(null),E=_n(t,Re=>S(Re)),[C,k]=R.useState(null),O=ew(C),N=(O==null?void 0:O.width)??0,D=(O==null?void 0:O.height)??0,U=r+(i!=="center"?"-"+i:""),W=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},Q=Array.isArray(c)?c:[c],F=Q.length>0,Z={padding:W,boundary:Q.filter(DV),altBoundary:F},{refs:L,floatingStyles:he,placement:ie,isPositioned:ne,middlewareData:ee}=bV({strategy:"fixed",placement:U,whileElementsMounted:(...Re)=>cV(...Re,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[wV({mainAxis:a+D,alignmentAxis:o}),u&&_V({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?xV():void 0,...Z}),u&&SV({...Z}),EV({...Z,apply:({elements:Re,rects:z,availableWidth:Ce,availableHeight:Ne})=>{const{width:ce,height:ae}=z.reference,J=Re.floating.style;J.setProperty("--radix-popper-available-width",`${Ce}px`),J.setProperty("--radix-popper-available-height",`${Ne}px`),J.setProperty("--radix-popper-anchor-width",`${ce}px`),J.setProperty("--radix-popper-anchor-height",`${ae}px`)}}),C&&kV({element:C,padding:s}),jV({arrowWidth:N,arrowHeight:D}),p&&CV({strategy:"referenceHidden",...Z})]}),[se,G]=fD(ie),X=ka(v);$a(()=>{ne&&(X==null||X())},[ne,X]);const Y=(Pe=ee.arrow)==null?void 0:Pe.x,re=(Ae=ee.arrow)==null?void 0:Ae.y,be=((Te=ee.arrow)==null?void 0:Te.centerOffset)!==0,[we,Me]=R.useState();return $a(()=>{x&&Me(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...he,transform:ne?he.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(qe=ee.transformOrigin)==null?void 0:qe.x,(it=ee.transformOrigin)==null?void 0:it.y].join(" "),...((Ie=ee.hide)==null?void 0:Ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(NV,{scope:n,placedSide:se,onArrowChange:k,arrowX:Y,arrowY:re,shouldHideArrow:be,children:y.jsx(Jt.div,{"data-side":se,"data-align":G,...b,ref:E,style:{...b.style,animation:ne?void 0:"none"}})})})});uD.displayName=wC;var cD="PopperArrow",OV={top:"bottom",right:"left",bottom:"top",left:"right"},dD=R.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=IV(cD,r),o=OV[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(TV,{...a,ref:n,style:{...a.style,display:"block"}})})});dD.displayName=cD;function DV(e){return e!==null}var jV=e=>({name:"transformOrigin",options:e,fn(t){var _,x,S;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[c,f]=fD(n),h={start:"0%",center:"50%",end:"100%"}[f],p=(((x=a.arrow)==null?void 0:x.x)??0)+s/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+u/2;let v="",b="";return c==="bottom"?(v=o?h:`${p}px`,b=`${-u}px`):c==="top"?(v=o?h:`${p}px`,b=`${r.floating.height+u}px`):c==="right"?(v=`${-u}px`,b=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+u}px`,b=o?h:`${g}px`),{data:{x:v,y:b}}}});function fD(e){const[t,n="center"]=e.split("-");return[t,n]}var tw=oD,x0=lD,nw=uD,rw=dD,MV="Portal",xh=R.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=R.useState(!1);$a(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?qO.createPortal(y.jsx(Jt.div,{...r,ref:t}),o):null});xh.displayName=MV;function PV(e,t){return R.useReducer((n,r)=>t[n][r]??n,e)}var Ia=e=>{const{present:t,children:n}=e,r=FV(t),a=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),i=_n(r.ref,LV(a));return typeof n=="function"||r.isPresent?R.cloneElement(a,{ref:i}):null};Ia.displayName="Presence";function FV(e){const[t,n]=R.useState(),r=R.useRef(null),a=R.useRef(e),i=R.useRef("none"),o=e?"mounted":"unmounted",[s,u]=PV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const c=Dy(r.current);i.current=s==="mounted"?c:"none"},[s]),$a(()=>{const c=r.current,f=a.current;if(f!==e){const p=i.current,g=Dy(c);e?u("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(f&&p!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),$a(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=g=>{const b=Dy(r.current).includes(g.animationName);if(g.target===t&&b&&(u("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},p=g=>{g.target===t&&(i.current=Dy(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:R.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Dy(e){return(e==null?void 0:e.animationName)||"none"}function LV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var $V=gO[" useInsertionEffect ".trim().toString()]||$a;function Ps({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=BV({defaultProp:t,onChange:n}),s=e!==void 0,u=s?e:a;{const f=R.useRef(e!==void 0);R.useEffect(()=>{const h=f.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=s},[s,r])}const c=R.useCallback(f=>{var h;if(s){const p=zV(f)?f(e):f;p!==e&&((h=o.current)==null||h.call(o,p))}else i(f)},[s,e,i,o]);return[u,c]}function BV({defaultProp:e,onChange:t}){const[n,r]=R.useState(e),a=R.useRef(n),i=R.useRef(t);return $V(()=>{i.current=t},[t]),R.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function zV(e){return typeof e=="function"}var hD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),UV="VisuallyHidden",pD=R.forwardRef((e,t)=>y.jsx(Jt.span,{...e,ref:t,style:{...hD,...e.style}}));pD.displayName=UV;var qV=pD,[aw,Dwe]=Ni("Tooltip",[uc]),iw=uc(),mD="TooltipProvider",HV=700,W2="tooltip.open",[VV,_C]=aw(mD),gD=e=>{const{__scopeTooltip:t,delayDuration:n=HV,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=R.useRef(!0),s=R.useRef(!1),u=R.useRef(0);return R.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),y.jsx(VV,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:R.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:R.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:R.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:i})};gD.displayName=mD;var Tm="Tooltip",[GV,S0]=aw(Tm),yD=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,u=_C(Tm,e.__scopeTooltip),c=iw(t),[f,h]=R.useState(null),p=Za(),g=R.useRef(0),v=o??u.disableHoverableContent,b=s??u.delayDuration,_=R.useRef(!1),[x,S]=Ps({prop:r,defaultProp:a??!1,onChange:N=>{N?(u.onOpen(),document.dispatchEvent(new CustomEvent(W2))):u.onClose(),i==null||i(N)},caller:Tm}),E=R.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),C=R.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,S(!0)},[S]),k=R.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),O=R.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,S(!0),g.current=0},b)},[b,S]);return R.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(tw,{...c,children:y.jsx(GV,{scope:t,contentId:p,open:x,stateAttribute:E,trigger:f,onTriggerChange:h,onTriggerEnter:R.useCallback(()=>{u.isOpenDelayedRef.current?O():C()},[u.isOpenDelayedRef,O,C]),onTriggerLeave:R.useCallback(()=>{v?k():(window.clearTimeout(g.current),g.current=0)},[k,v]),onOpen:C,onClose:k,disableHoverableContent:v,children:n})})};yD.displayName=Tm;var K2="TooltipTrigger",bD=R.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=S0(K2,n),i=_C(K2,n),o=iw(n),s=R.useRef(null),u=_n(t,s,a.onTriggerChange),c=R.useRef(!1),f=R.useRef(!1),h=R.useCallback(()=>c.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(x0,{asChild:!0,...o,children:y.jsx(Jt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:u,onPointerMove:Bt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Bt(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Bt(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Bt(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:Bt(e.onBlur,a.onClose),onClick:Bt(e.onClick,a.onClose)})})});bD.displayName=K2;var xC="TooltipPortal",[WV,KV]=aw(xC,{forceMount:void 0}),vD=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=S0(xC,t);return y.jsx(WV,{scope:t,forceMount:n,children:y.jsx(Ia,{present:n||i.open,children:y.jsx(xh,{asChild:!0,container:a,children:r})})})};vD.displayName=xC;var Zf="TooltipContent",wD=R.forwardRef((e,t)=>{const n=KV(Zf,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=S0(Zf,e.__scopeTooltip);return y.jsx(Ia,{present:r||o.open,children:o.disableHoverableContent?y.jsx(_D,{side:a,...i,ref:t}):y.jsx(ZV,{side:a,...i,ref:t})})}),ZV=R.forwardRef((e,t)=>{const n=S0(Zf,e.__scopeTooltip),r=_C(Zf,e.__scopeTooltip),a=R.useRef(null),i=_n(t,a),[o,s]=R.useState(null),{trigger:u,onClose:c}=n,f=a.current,{onPointerInTransitChange:h}=r,p=R.useCallback(()=>{s(null),h(!1)},[h]),g=R.useCallback((v,b)=>{const _=v.currentTarget,x={x:v.clientX,y:v.clientY},S=QV(x,_.getBoundingClientRect()),E=eG(x,S),C=tG(b.getBoundingClientRect()),k=rG([...E,...C]);s(k),h(!0)},[h]);return R.useEffect(()=>()=>p(),[p]),R.useEffect(()=>{if(u&&f){const v=_=>g(_,f),b=_=>g(_,u);return u.addEventListener("pointerleave",v),f.addEventListener("pointerleave",b),()=>{u.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",b)}}},[u,f,g,p]),R.useEffect(()=>{if(o){const v=b=>{const _=b.target,x={x:b.clientX,y:b.clientY},S=(u==null?void 0:u.contains(_))||(f==null?void 0:f.contains(_)),E=!nG(x,o);S?p():E&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,f,o,c,p]),y.jsx(_D,{...e,ref:i})}),[YV,XV]=aw(Tm,{isInside:!1}),JV=Sz("TooltipContent"),_D=R.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,u=S0(Zf,n),c=iw(n),{onClose:f}=u;return R.useEffect(()=>(document.addEventListener(W2,f),()=>document.removeEventListener(W2,f)),[f]),R.useEffect(()=>{if(u.trigger){const h=p=>{const g=p.target;g!=null&&g.contains(u.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[u.trigger,f]),y.jsx(vh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:y.jsxs(nw,{"data-state":u.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(JV,{children:r}),y.jsx(YV,{scope:n,isInside:!0,children:y.jsx(qV,{id:u.contentId,role:"tooltip",children:a||r})})]})})});wD.displayName=Zf;var xD="TooltipArrow",SD=R.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=iw(n);return XV(xD,n).isInside?null:y.jsx(rw,{...a,...r,ref:t})});SD.displayName=xD;function QV(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function eG(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function tG(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function nG(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,p=u.y;f>r!=p>r&&n<(h-c)*(r-f)/(p-f)+c&&(a=!a)}return a}function rG(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),aG(t)}function aG(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var iG=gD,oG=yD,sG=bD,lG=vD,uG=wD,cG=SD;function kn({delayDuration:e=0,...t}){return y.jsx(iG,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function In({...e}){return y.jsx(kn,{children:y.jsx(oG,{"data-slot":"tooltip",...e})})}function On({...e}){return y.jsx(sG,{"data-slot":"tooltip-trigger",...e})}function Dn({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(lG,{children:y.jsxs(uG,{"data-slot":"tooltip-content",sideOffset:t,className:$t("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx(cG,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const uN={};function dG(e){let t=uN[e];if(t)return t;t=uN[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Yf(e,t){typeof t!="string"&&(t=Yf.defaultChars);const n=dG(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const u=parseInt(r.slice(i+4,i+6),16);if((u&192)===128){const c=s<<6&1984|u&63;c<128?a+="":a+=String.fromCharCode(c),i+=3;continue}}if((s&240)===224&&i+6<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const f=s<<12&61440|u<<6&4032|c&63;f<2048||f>=55296&&f<=57343?a+="":a+=String.fromCharCode(f),i+=6;continue}}if((s&248)===240&&i+9<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),f=parseInt(r.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(f&192)===128){let h=s<<18&1835008|u<<12&258048|c<<6&4032|f&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Yf.defaultChars=";/?:@&=+$,#";Yf.componentChars="";const cN={};function fG(e){let t=cN[e];if(t)return t;t=cN[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function E0(e,t,n){typeof t!="string"&&(n=t,t=E0.defaultChars),typeof n>"u"&&(n=!0);const r=fG(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const u=e.charCodeAt(i+1);if(u>=56320&&u<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}E0.defaultChars=";/?:@&=+$,-_.!~*'()#";E0.componentChars="-_.!~*'()";function SC(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Db(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const hG=/^([a-z0-9.+-]+:)/i,pG=/:[0-9]*$/,mG=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,gG=["<",">",'"',"`"," ","\r",`
`,"	"],yG=["{","}","|","\\","^","`"].concat(gG),bG=["'"].concat(yG),dN=["%","/","?",";","#"].concat(bG),fN=["/","?","#"],vG=255,hN=/^[+a-z0-9A-Z_-]{0,63}$/,wG=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,pN={javascript:!0,"javascript:":!0},mN={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function EC(e,t){if(e&&e instanceof Db)return e;const n=new Db;return n.parse(e,t),n}Db.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=mG.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=hG.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&pN[o])&&(i=i.substr(2),this.slashes=!0)),!pN[o]&&(a||o&&!mN[o])){let c=-1;for(let v=0;v<fN.length;v++)r=i.indexOf(fN[v]),r!==-1&&(c===-1||r<c)&&(c=r);let f,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(f=i.slice(0,h),i=i.slice(h+1),this.auth=f),c=-1;for(let v=0;v<dN.length;v++)r=i.indexOf(dN[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const p=i.slice(0,c);i=i.slice(c),this.parseHost(p),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let b=0,_=v.length;b<_;b++){const x=v[b];if(x&&!x.match(hN)){let S="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(hN)){const E=v.slice(0,b),C=v.slice(b+1),k=x.match(wG);k&&(E.push(k[1]),C.unshift(k[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>vG&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),mN[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Db.prototype.parseHost=function(e){let t=pG.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const _G=Object.freeze(Object.defineProperty({__proto__:null,decode:Yf,encode:E0,format:SC,parse:EC},Symbol.toStringTag,{value:"Module"})),ED=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,CD=/[\0-\x1F\x7F-\x9F]/,xG=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,CC=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,kD=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,AD=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,SG=Object.freeze(Object.defineProperty({__proto__:null,Any:ED,Cc:CD,Cf:xG,P:CC,S:kD,Z:AD},Symbol.toStringTag,{value:"Module"})),EG=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),CG=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Sx;const kG=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),AG=(Sx=String.fromCodePoint)!==null&&Sx!==void 0?Sx:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function TG(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=kG.get(e))!==null&&t!==void 0?t:e}var Aa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Aa||(Aa={}));const RG=32;var Mu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Mu||(Mu={}));function Z2(e){return e>=Aa.ZERO&&e<=Aa.NINE}function NG(e){return e>=Aa.UPPER_A&&e<=Aa.UPPER_F||e>=Aa.LOWER_A&&e<=Aa.LOWER_F}function IG(e){return e>=Aa.UPPER_A&&e<=Aa.UPPER_Z||e>=Aa.LOWER_A&&e<=Aa.LOWER_Z||Z2(e)}function OG(e){return e===Aa.EQUALS||IG(e)}var Sa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Sa||(Sa={}));var ju;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(ju||(ju={}));class DG{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Sa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ju.Strict}startEntity(t){this.decodeMode=t,this.state=Sa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Sa.EntityStart:return t.charCodeAt(n)===Aa.NUM?(this.state=Sa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Sa.NamedEntity,this.stateNamedEntity(t,n));case Sa.NumericStart:return this.stateNumericStart(t,n);case Sa.NumericDecimal:return this.stateNumericDecimal(t,n);case Sa.NumericHex:return this.stateNumericHex(t,n);case Sa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|RG)===Aa.LOWER_X?(this.state=Sa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Sa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(Z2(a)||NG(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(Z2(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Aa.SEMI)this.consumed+=1;else if(this.decodeMode===ju.Strict)return 0;return this.emitCodePoint(TG(this.result),this.consumed),this.errors&&(t!==Aa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Mu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=jG(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===ju.Attribute&&(i===0||OG(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Mu.VALUE_LENGTH)>>14,i!==0){if(o===Aa.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==ju.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Mu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Mu.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Sa.NamedEntity:return this.result!==0&&(this.decodeMode!==ju.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Sa.NumericDecimal:return this.emitNumericEntity(0,2);case Sa.NumericHex:return this.emitNumericEntity(0,3);case Sa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Sa.EntityStart:return 0}}}function TD(e){let t="";const n=new DG(e,r=>t+=AG(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const c=n.write(a,s+1);if(c<0){o=s+n.end();break}o=s+c,s=c===0?o+1:o}const u=t+a.slice(o);return t="",u}}function jG(e,t,n,r){const a=(t&Mu.BRANCH_LENGTH)>>7,i=t&Mu.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=a?-1:e[n+u]-1}let o=n,s=o+a-1;for(;o<=s;){const u=o+s>>>1,c=e[u];if(c<r)o=u+1;else if(c>r)s=u-1;else return e[u+a]}return-1}const MG=TD(EG);TD(CG);function RD(e,t=ju.Legacy){return MG(e,t)}function PG(e){return Object.prototype.toString.call(e)}function kC(e){return PG(e)==="[object String]"}const FG=Object.prototype.hasOwnProperty;function LG(e,t){return FG.call(e,t)}function ow(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function ND(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function AC(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function jb(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const ID=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,$G=/&([a-z#][a-z0-9]{1,31});/gi,BG=new RegExp(ID.source+"|"+$G.source,"gi"),zG=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function UG(e,t){if(t.charCodeAt(0)===35&&zG.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return AC(r)?jb(r):e}const n=RD(e);return n!==e?n:e}function qG(e){return e.indexOf("\\")<0?e:e.replace(ID,"$1")}function Xf(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(BG,function(t,n,r){return n||UG(t,r)})}const HG=/[&<>"]/,VG=/[&<>"]/g,GG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function WG(e){return GG[e]}function Gu(e){return HG.test(e)?e.replace(VG,WG):e}const KG=/[.?*+^$[\]\\(){}|-]/g;function ZG(e){return e.replace(KG,"\\$&")}function Tr(e){switch(e){case 9:case 32:return!0}return!1}function Rm(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Nm(e){return CC.test(e)||kD.test(e)}function Im(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function sw(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const YG={mdurl:_G,ucmicro:SG},XG=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:ND,assign:ow,escapeHtml:Gu,escapeRE:ZG,fromCodePoint:jb,has:LG,isMdAsciiPunct:Im,isPunctChar:Nm,isSpace:Tr,isString:kC,isValidEntityCode:AC,isWhiteSpace:Rm,lib:YG,normalizeReference:sw,unescapeAll:Xf,unescapeMd:qG},Symbol.toStringTag,{value:"Module"}));function JG(e,t,n){let r,a,i,o;const s=e.posMax,u=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=u,-1}}let c=-1;return a&&(c=e.pos),e.pos=u,c}function QG(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Xf(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=Xf(e.slice(t,a)),i.pos=a,i.ok=!0),i}function eW(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=Xf(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=Xf(e.slice(t,i)),o}const tW=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:QG,parseLinkLabel:JG,parseLinkTitle:eW},Symbol.toStringTag,{value:"Module"})),Us={};Us.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Gu(i.content)+"</code>"};Us.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Gu(e[t].content)+`</code></pre>
`};Us.fence=function(e,t,n,r,a){const i=e[t],o=i.info?Xf(i.info).trim():"";let s="",u="";if(o){const f=o.split(/(\s+)/g);s=f[0],u=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,s,u)||Gu(i.content):c=Gu(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];f<0?h.push(["class",n.langPrefix+s]):(h[f]=h[f].slice(),h[f][1]+=" "+n.langPrefix+s);const p={attrs:h};return`<pre><code${a.renderAttrs(p)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${c}</code></pre>
`};Us.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};Us.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Us.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Us.text=function(e,t){return Gu(e[t].content)};Us.html_block=function(e,t){return e[t].content};Us.html_inline=function(e,t){return e[t].content};function Sh(){this.rules=ow({},Us)}Sh.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Gu(t.attrs[n][0])+'="'+Gu(t.attrs[n][1])+'"';return a};Sh.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};Sh.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};Sh.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Sh.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Ti(){this.__rules__=[],this.__cache__=null}Ti.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ti.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ti.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Ti.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ti.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ti.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ti.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ti.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Jo(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Jo.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};Jo.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Jo.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};Jo.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Jo.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function OD(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}OD.prototype.Token=Jo;const nW=/\r\n?|\n/g,rW=/\0/g;function aW(e){let t;t=e.src.replace(nW,`
`),t=t.replace(rW,""),e.src=t}function iW(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function oW(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function sW(e){return/^<a[>\s]/i.test(e)}function lW(e){return/^<\/a\s*>/i.test(e)}function uW(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(sW(s.content)&&i>0&&i--,lW(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const u=s.content;let c=e.md.linkify.match(u);const f=[];let h=s.level,p=0;c.length>0&&c[0].index===0&&o>0&&a[o-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const v=c[g].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let _=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const x=c[g].index;if(x>p){const k=new e.Token("text","",0);k.content=u.slice(p,x),k.level=h,f.push(k)}const S=new e.Token("link_open","a",1);S.attrs=[["href",b]],S.level=h++,S.markup="linkify",S.info="auto",f.push(S);const E=new e.Token("text","",0);E.content=_,E.level=h,f.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",f.push(C),p=c[g].lastIndex}if(p<u.length){const g=new e.Token("text","",0);g.content=u.slice(p),g.level=h,f.push(g)}t[n].children=a=ND(a,o,f)}}}}const DD=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,cW=/\((c|tm|r)\)/i,dW=/\((c|tm|r)\)/ig,fW={c:"",r:"",tm:""};function hW(e,t){return fW[t.toLowerCase()]}function pW(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(dW,hW)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function mW(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&DD.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function gW(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(cW.test(e.tokens[t].content)&&pW(e.tokens[t].children),DD.test(e.tokens[t].content)&&mW(e.tokens[t].children))}const yW=/['"]/,gN=/['"]/g,yN="";function jy(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function bW(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,u=0,c=s.length;e:for(;u<c;){gN.lastIndex=u;const f=gN.exec(s);if(!f)break;let h=!0,p=!0;u=f.index+1;const g=f[0]==="'";let v=32;if(f.index-1>=0)v=s.charCodeAt(f.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(u<c)b=s.charCodeAt(u);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const _=Im(v)||Nm(String.fromCharCode(v)),x=Im(b)||Nm(String.fromCharCode(b)),S=Rm(v),E=Rm(b);if(E?h=!1:x&&(S||_||(h=!1)),S?p=!1:_&&(E||x||(p=!1)),b===34&&f[0]==='"'&&v>=48&&v<=57&&(p=h=!1),h&&p&&(h=_,p=x),!h&&!p){g&&(i.content=jy(i.content,f.index,yN));continue}if(p)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<o)break;if(C.single===g&&r[n].level===o){C=r[n];let k,O;g?(k=t.md.options.quotes[2],O=t.md.options.quotes[3]):(k=t.md.options.quotes[0],O=t.md.options.quotes[1]),i.content=jy(i.content,f.index,O),e[C.token].content=jy(e[C.token].content,C.pos,k),u+=O.length-1,C.token===a&&(u+=k.length-1),s=i.content,c=s.length,r.length=n;continue e}}h?r.push({token:a,pos:f.index,single:g,level:o}):p&&g&&(i.content=jy(i.content,f.index,yN))}}}function vW(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!yW.test(e.tokens[t].content)||bW(e.tokens[t].children,e)}function wW(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const Ex=[["normalize",aW],["block",iW],["inline",oW],["linkify",uW],["replacements",gW],["smartquotes",vW],["text_join",wW]];function TC(){this.ruler=new Ti;for(let e=0;e<Ex.length;e++)this.ruler.push(Ex[e][0],Ex[e][1])}TC.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};TC.prototype.State=OD;function qs(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,u=0,c=a.length,f=!1;o<c;o++){const h=a.charCodeAt(o);if(!f)if(Tr(h)){s++,h===9?u+=4-u%4:u++;continue}else f=!0;(h===10||o===c-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(u),this.bsCount.push(0),f=!1,s=0,u=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}qs.prototype.push=function(e,t,n){const r=new Jo(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};qs.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};qs.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};qs.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Tr(r))break}return t};qs.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Tr(this.src.charCodeAt(--t)))return t+1;return t};qs.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};qs.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};qs.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let u=0;const c=this.bMarks[s];let f=c,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];f<h&&u<r;){const p=this.src.charCodeAt(f);if(Tr(p))p===9?u+=4-(u+this.bsCount[s])%4:u++;else if(f-c<this.tShift[s])u++;else break;f++}u>r?i[o]=new Array(u-r+1).join(" ")+this.src.slice(f,h):i[o]=this.src.slice(f,h)}return i.join("")};qs.prototype.Token=Jo;const _W=65536;function Cx(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function bN(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function xW(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!Tr(s)||o===45&&Tr(s))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Tr(C))return!1;i++}let u=Cx(e,t+1),c=u.split("|");const f=[];for(let C=0;C<c.length;C++){const k=c[C].trim();if(!k){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?f.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?f.push("left"):f.push("")}if(u=Cx(e,t).trim(),u.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=bN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==f.length)return!1;if(r)return!0;const p=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<c.length;C++){const k=e.push("th_open","th",1);f[C]&&(k.attrs=[["style","text-align:"+f[C]]]);const O=e.push("inline","",0);O.content=c[C].trim(),O.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let O=0,N=g.length;O<N;O++)if(g[O](e,a,n,!0)){C=!0;break}if(C||(u=Cx(e,a).trim(),!u)||e.sCount[a]-e.blkIndent>=4||(c=bN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>_W))break;if(a===t+2){const O=e.push("tbody_open","tbody",1);O.map=S=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let O=0;O<h;O++){const N=e.push("td_open","td",1);f[O]&&(N.attrs=[["style","text-align:"+f[O]]]);const D=e.push("inline","",0);D.content=c[O]?c[O].trim():"",D.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=p,e.line=a,!0}function SW(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function EW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let u=a-s;if(u<3)return!1;const c=e.src.slice(s,a),f=e.src.slice(a,i);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,p=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<u)&&(a=e.skipSpaces(a),!(a<i)))){p=!0;break}u=e.sCount[t],e.line=h+(p?1:0);const g=e.push("fence","code",0);return g.info=f,g.content=e.getLines(t+1,h,u,!0),g.markup=c,g.map=[t,e.line],!0}function CW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],u=[],c=[],f=[],h=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,O,N;e.src.charCodeAt(a)===32?(a++,k++,N=!1,O=!0):e.src.charCodeAt(a)===9?(O=!0,(e.bsCount[v]+k)%4===3?(a++,k++,N=!1):N=!0):O=!1;let D=k;for(s.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const U=e.src.charCodeAt(a);if(Tr(U))U===9?D+=4-(D+e.bsCount[v]+(N?1:0))%4:D++;else break;a++}g=a>=i,u.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(O?1:0),c.push(e.sCount[v]),e.sCount[v]=D-k,f.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let C=!1;for(let k=0,O=h.length;k<O;k++)if(h[k](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const x=[t,0];_.map=x,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=o,e.parentType=p,x[1]=e.line;for(let E=0;E<f.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=f[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=u[E];return e.blkIndent=b,!0}function kW(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const c=e.src.charCodeAt(i++);if(c!==o&&!Tr(c))return!1;c===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const u=e.push("hr","hr",0);return u.map=[t,e.line],u.markup=Array(s+1).join(String.fromCharCode(o)),!0}function vN(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Tr(i))return-1}return r}function wN(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Tr(i))?-1:a}function AW(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function TW(e,t,n,r){let a,i,o,s,u=t,c=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[u]>=e.blkIndent&&(f=!0);let h,p,g;if((g=wN(e,u))>=0){if(h=!0,o=e.bMarks[u]+e.tShift[u],p=Number(e.src.slice(o,g-1)),f&&p!==1)return!1}else if((g=vN(e,u))>=0)h=!1;else return!1;if(f&&e.skipSpaces(g)>=e.eMarks[u])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),b=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),p!==1&&(s.attrs=[["start",p]])):s=e.push("bullet_list_open","ul",1);const _=[u,0];s.map=_,s.markup=String.fromCharCode(v);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";u<n;){i=g,a=e.eMarks[u];const C=e.sCount[u]+g-(e.bMarks[u]+e.tShift[u]);let k=C;for(;i<a;){const he=e.src.charCodeAt(i);if(he===9)k+=4-(k+e.bsCount[u])%4;else if(he===32)k++;else break;i++}const O=i;let N;O>=a?N=1:N=k-C,N>4&&(N=1);const D=C+N;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(v);const U=[u,0];s.map=U,h&&(s.info=e.src.slice(o,g-1));const W=e.tight,Q=e.tShift[u],F=e.sCount[u],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=D,e.tight=!0,e.tShift[u]=O-e.bMarks[u],e.sCount[u]=k,O>=a&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,u,n,!0),(!e.tight||x)&&(c=!1),x=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[u]=Q,e.sCount[u]=F,e.tight=W,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(v),u=e.line,U[1]=u,u>=n||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let L=!1;for(let he=0,ie=S.length;he<ie;he++)if(S[he](e,u,n,!0)){L=!0;break}if(L)break;if(h){if(g=wN(e,u),g<0)break;o=e.bMarks[u]+e.tShift[u]}else if(g=vN(e,u),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(v),_[1]=u,e.line=u,e.parentType=E,c&&AW(e,b),!0}function RW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const N=e.md.block.ruler.getRules("reference"),D=e.parentType;e.parentType="reference";let U=!1;for(let W=0,Q=N.length;W<Q;W++)if(N[W](e,S,E,!0)){U=!0;break}if(e.parentType=D,U)return null}const k=e.bMarks[S]+e.tShift[S],O=e.eMarks[S];return e.src.slice(k,O+1)}let u=e.src.slice(a,i+1);i=u.length;let c=-1;for(a=1;a<i;a++){const S=u.charCodeAt(a);if(S===91)return!1;if(S===93){c=a;break}else if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(S===92&&(a++,a<i&&u.charCodeAt(a)===10)){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}const f=e.md.helpers.parseLinkDestination(u,a,i);if(!f.ok)return!1;const h=e.md.normalizeLink(f.str);if(!e.md.validateLink(h))return!1;a=f.pos;const p=a,g=o,v=a;for(;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}let b=e.md.helpers.parseLinkTitle(u,a,i);for(;b.can_continue;){const S=s(o);if(S===null)break;u+=S,a=i,i=u.length,o++,b=e.md.helpers.parseLinkTitle(u,a,i,b)}let _;for(a<i&&v!==a&&b.ok?(_=b.str,a=b.pos):(_="",a=p,o=g);a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10&&_)for(_="",a=p,o=g;a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10)return!1;const x=sw(u.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:_,href:h}),e.line=o),!0):!1}const NW=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],IW="[a-zA-Z_:][a-zA-Z0-9:._-]*",OW="[^\"'=<>`\\x00-\\x20]+",DW="'[^']*'",jW='"[^"]*"',MW="(?:"+OW+"|"+DW+"|"+jW+")",PW="(?:\\s+"+IW+"(?:\\s*=\\s*"+MW+")?)",jD="<[A-Za-z][A-Za-z0-9\\-]*"+PW+"*\\s*\\/?>",MD="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",FW="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",LW="<[?][\\s\\S]*?[?]>",$W="<![A-Za-z][^>]*>",BW="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",zW=new RegExp("^(?:"+jD+"|"+MD+"|"+FW+"|"+LW+"|"+$W+"|"+BW+")"),UW=new RegExp("^(?:"+jD+"|"+MD+")"),_f=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+NW.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(UW.source+"\\s*$"),/^$/,!1]];function qW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<_f.length&&!_f[s][0].test(o);s++);if(s===_f.length)return!1;if(r)return _f[s][2];let u=t+1;if(!_f[s][1].test(o)){for(;u<n&&!(e.sCount[u]<e.blkIndent);u++)if(a=e.bMarks[u]+e.tShift[u],i=e.eMarks[u],o=e.src.slice(a,i),_f[s][1].test(o)){o.length!==0&&u++;break}}e.line=u;const c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}function HW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!Tr(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const u=e.skipCharsBack(i,35,a);u>a&&Tr(e.src.charCodeAt(u-1))&&(i=u),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(a,i).trim(),f.map=[t,e.line],f.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function VW(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const v=e.eMarks[s];if(g<v&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=v))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let p=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,s,n,!0)){p=!0;break}if(p)break}if(!i)return!1;const u=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=u,f.map=[t,e.line-1],f.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function GW(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](e,i,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const u=e.push("inline","",0);return u.content=o,u.map=[t,e.line],u.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const My=[["table",xW,["paragraph","reference"]],["code",SW],["fence",EW,["paragraph","reference","blockquote","list"]],["blockquote",CW,["paragraph","reference","blockquote","list"]],["hr",kW,["paragraph","reference","blockquote","list"]],["list",TW,["paragraph","reference","blockquote"]],["reference",RW],["html_block",qW,["paragraph","reference","blockquote"]],["heading",HW,["paragraph","reference","blockquote"]],["lheading",VW],["paragraph",GW]];function lw(){this.ruler=new Ti;for(let e=0;e<My.length;e++)this.ruler.push(My[e][0],My[e][1],{alt:(My[e][2]||[]).slice()})}lw.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const u=e.line;let c=!1;for(let f=0;f<a;f++)if(c=r[f](e,o,n,!1),c){if(u>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};lw.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};lw.prototype.State=qs;function C0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}C0.prototype.pushPending=function(){const e=new Jo("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};C0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Jo(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};C0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,u=Im(a)||Nm(String.fromCharCode(a)),c=Im(s)||Nm(String.fromCharCode(s)),f=Rm(a),h=Rm(s),p=!h&&(!c||f||u),g=!f&&(!u||h||c);return{can_open:p&&(t||!g||u),can_close:g&&(t||!p||c),length:o}};C0.prototype.Token=Jo;function WW(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function KW(e,t){let n=e.pos;for(;n<e.posMax&&!WW(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const ZW=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function YW(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(ZW);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const u=e.md.normalizeLink(s);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function XW(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Tr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const RC=[];for(let e=0;e<256;e++)RC.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){RC[e.charCodeAt(0)]=1});function JW(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Tr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&RC[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function QW(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let u=n,c;for(;(c=e.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&e.src.charCodeAt(u)===96;)u++;const f=u-c;if(f===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=u,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function eK(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let u=0;u<i;u+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function _N(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function tK(e){const t=e.tokens_meta,n=e.tokens_meta.length;_N(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&_N(e,t[r].delimiters)}const PD={tokenize:eK,postProcess:tK};function nK(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function xN(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),u=e.tokens[a.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?s+s:s,u.content="";const c=e.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?s+s:s,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function rK(e){const t=e.tokens_meta,n=e.tokens_meta.length;xN(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&xN(e,t[r].delimiters)}const FD={tokenize:nK,postProcess:rK};function aK(e,t){let n,r,a,i,o="",s="",u=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,h=e.posMax,p=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(c=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(v>=h)return!1;if(u=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?v=a.pos:o="",u=v;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&u!==v&&a.ok)for(s=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(u=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(u,v++):v=g+1):v=g+1,r||(r=e.src.slice(p,g)),i=e.env.references[sw(r)],!i)return e.pos=f,!1;o=i.href,s=i.title}if(!t){e.pos=p,e.posMax=g;const b=e.push("link_open","a",1),_=[["href",o]];b.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function iK(e,t){let n,r,a,i,o,s,u,c,f="";const h=e.pos,p=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<p&&e.src.charCodeAt(i)===40){for(i++;i<p&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(i>=p)return!1;for(c=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(f=e.md.normalizeLink(s.str),e.md.validateLink(f)?i=s.pos:f=""),c=i;i<p&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<p&&c!==i&&s.ok)for(u=s.str,i=s.pos;i<p&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);else u="";if(i>=p||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<p&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(c,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),o=e.env.references[sw(a)],!o)return e.pos=h,!1;f=o.href,u=o.title}if(!t){r=e.src.slice(g,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const _=e.push("image","img",0),x=[["src",f],["alt",""]];_.attrs=x,_.children=b,_.content=r,u&&x.push(["title",u])}return e.pos=i,e.posMax=p,!0}const oK=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,sK=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function lK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(sK.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(oK.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function uK(e){return/^<a[>\s]/i.test(e)}function cK(e){return/^<\/a\s*>/i.test(e)}function dK(e){const t=e|32;return t>=97&&t<=122}function fK(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!dK(a))return!1;const i=e.src.slice(r).match(zW);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],uK(o.content)&&e.linkLevel++,cK(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const hK=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,pK=/^&([a-z][a-z0-9]{1,31});/i;function mK(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(hK);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=AC(o)?jb(o):jb(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(pK);if(i){const o=RD(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function SN(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[s.marker][(s.open?3:0)+s.length%3];let c=r-i[r]-1,f=c;for(;c>u;c-=i[c]+1){const h=e[c];if(h.marker===s.marker&&h.open&&h.end<0){let p=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(p=!0),!p){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[o]=o-c+g,i[c]=g,s.open=!1,h.end=o,h.close=!1,f=-1,a=-2;break}}}f!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=f)}}function gK(e){const t=e.tokens_meta,n=e.tokens_meta.length;SN(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&SN(t[r].delimiters)}function yK(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const kx=[["text",KW],["linkify",YW],["newline",XW],["escape",JW],["backticks",QW],["strikethrough",PD.tokenize],["emphasis",FD.tokenize],["link",aK],["image",iK],["autolink",lK],["html_inline",fK],["entity",mK]],Ax=[["balance_pairs",gK],["strikethrough",PD.postProcess],["emphasis",FD.postProcess],["fragments_join",yK]];function k0(){this.ruler=new Ti;for(let e=0;e<kx.length;e++)this.ruler.push(kx[e][0],kx[e][1]);this.ruler2=new Ti;for(let e=0;e<Ax.length;e++)this.ruler2.push(Ax[e][0],Ax[e][1])}k0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};k0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};k0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};k0.prototype.State=C0;function bK(e){const t={};e=e||{},t.src_Any=ED.source,t.src_Cc=CD.source,t.src_Z=AD.source,t.src_P=CC.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Y2(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function uw(e){return Object.prototype.toString.call(e)}function vK(e){return uw(e)==="[object String]"}function wK(e){return uw(e)==="[object Object]"}function _K(e){return uw(e)==="[object RegExp]"}function EN(e){return uw(e)==="[object Function]"}function xK(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const LD={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function SK(e){return Object.keys(e||{}).reduce(function(t,n){return t||LD.hasOwnProperty(n)},!1)}const EK={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},CK="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",kK="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function AK(e){e.__index__=-1,e.__text_cache__=""}function TK(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function CN(){return function(e,t){t.normalize(e)}}function Mb(e){const t=e.re=bK(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(CK),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,u){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+u)}Object.keys(e.__schemas__).forEach(function(s){const u=e.__schemas__[s];if(u===null)return;const c={validate:null,link:null};if(e.__compiled__[s]=c,wK(u)){_K(u.validate)?c.validate=TK(u.validate):EN(u.validate)?c.validate=u.validate:i(s,u),EN(u.normalize)?c.normalize=u.normalize:u.normalize?i(s,u):c.normalize=CN();return}if(vK(u)){a.push(s);return}i(s,u)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:CN()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(xK).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),AK(e)}function RK(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function X2(e,t){const n=new RK(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Xi(e,t){if(!(this instanceof Xi))return new Xi(e,t);t||SK(e)&&(t=e,e={}),this.__opts__=Y2({},LD,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Y2({},EK,e),this.__compiled__={},this.__tlds__=kK,this.__tlds_replaced__=!1,this.re={},Mb(this)}Xi.prototype.add=function(t,n){return this.__schemas__[t]=n,Mb(this),this};Xi.prototype.set=function(t){return this.__opts__=Y2(this.__opts__,t),this};Xi.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,u,c,f;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],u.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};Xi.prototype.pretest=function(t){return this.re.pretest.test(t)};Xi.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Xi.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(X2(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(X2(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Xi.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,X2(this,0)):null};Xi.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Mb(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Mb(this),this)};Xi.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Xi.prototype.onCompile=function(){};const zf=2147483647,Ns=36,NC=1,Om=26,NK=38,IK=700,$D=72,BD=128,zD="-",OK=/^xn--/,DK=/[^\0-\x7F]/,jK=/[\x2E\u3002\uFF0E\uFF61]/g,MK={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Tx=Ns-NC,Is=Math.floor,Rx=String.fromCharCode;function Ou(e){throw new RangeError(MK[e])}function PK(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function UD(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(jK,".");const a=e.split("."),i=PK(a,t).join(".");return r+i}function qD(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const FK=e=>String.fromCodePoint(...e),LK=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Ns},kN=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},HD=function(e,t,n){let r=0;for(e=n?Is(e/IK):e>>1,e+=Is(e/t);e>Tx*Om>>1;r+=Ns)e=Is(e/Tx);return Is(r+(Tx+1)*e/(e+NK))},VD=function(e){const t=[],n=e.length;let r=0,a=BD,i=$D,o=e.lastIndexOf(zD);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&Ou("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const u=r;for(let f=1,h=Ns;;h+=Ns){s>=n&&Ou("invalid-input");const p=LK(e.charCodeAt(s++));p>=Ns&&Ou("invalid-input"),p>Is((zf-r)/f)&&Ou("overflow"),r+=p*f;const g=h<=i?NC:h>=i+Om?Om:h-i;if(p<g)break;const v=Ns-g;f>Is(zf/v)&&Ou("overflow"),f*=v}const c=t.length+1;i=HD(r-u,c,u==0),Is(r/c)>zf-a&&Ou("overflow"),a+=Is(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},GD=function(e){const t=[];e=qD(e);const n=e.length;let r=BD,a=0,i=$D;for(const u of e)u<128&&t.push(Rx(u));const o=t.length;let s=o;for(o&&t.push(zD);s<n;){let u=zf;for(const f of e)f>=r&&f<u&&(u=f);const c=s+1;u-r>Is((zf-a)/c)&&Ou("overflow"),a+=(u-r)*c,r=u;for(const f of e)if(f<r&&++a>zf&&Ou("overflow"),f===r){let h=a;for(let p=Ns;;p+=Ns){const g=p<=i?NC:p>=i+Om?Om:p-i;if(h<g)break;const v=h-g,b=Ns-g;t.push(Rx(kN(g+v%b,0))),h=Is(v/b)}t.push(Rx(kN(h,0))),i=HD(a,c,s===o),a=0,++s}++a,++r}return t.join("")},$K=function(e){return UD(e,function(t){return OK.test(t)?VD(t.slice(4).toLowerCase()):t})},BK=function(e){return UD(e,function(t){return DK.test(t)?"xn--"+GD(t):t})},WD={version:"2.3.1",ucs2:{decode:qD,encode:FK},decode:VD,encode:GD,toASCII:BK,toUnicode:$K},zK={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},UK={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},qK={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},HK={default:zK,zero:UK,commonmark:qK},VK=/^(vbscript|javascript|file|data):/,GK=/^data:image\/(gif|png|jpeg|webp);/;function WK(e){const t=e.trim().toLowerCase();return VK.test(t)?GK.test(t):!0}const KD=["http:","https:","mailto:"];function KK(e){const t=EC(e,!0);if(t.hostname&&(!t.protocol||KD.indexOf(t.protocol)>=0))try{t.hostname=WD.toASCII(t.hostname)}catch{}return E0(SC(t))}function ZK(e){const t=EC(e,!0);if(t.hostname&&(!t.protocol||KD.indexOf(t.protocol)>=0))try{t.hostname=WD.toUnicode(t.hostname)}catch{}return Yf(SC(t),Yf.defaultChars+"%")}function xo(e,t){if(!(this instanceof xo))return new xo(e,t);t||kC(e)||(t=e||{},e="default"),this.inline=new k0,this.block=new lw,this.core=new TC,this.renderer=new Sh,this.linkify=new Xi,this.validateLink=WK,this.normalizeLink=KK,this.normalizeLinkText=ZK,this.utils=XG,this.helpers=ow({},tW),this.options={},this.configure(e),t&&this.set(t)}xo.prototype.set=function(e){return ow(this.options,e),this};xo.prototype.configure=function(e){const t=this;if(kC(e)){const n=e;if(e=HK[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};xo.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};xo.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};xo.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};xo.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};xo.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};xo.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};xo.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const Nx=new xo({html:!1,linkify:!0,breaks:!0});function IC(e){return R.useMemo(()=>{var n;if(!e)return[];try{const r=Nx.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const u=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:u,code:s.content}),o++}else{const u=[];for(;o<r.length&&r[o].type!=="fence";)u.push(r[o]),o++;u.length>0&&(i+=Nx.renderer.render(u,Nx.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}var Ix={exports:{}},AN;function YK(){return AN||(AN=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof u?new u(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var k,O;switch(s.util.type(E)){case"Object":if(O=s.util.objId(E),C[O])return C[O];k={},C[O]=k;for(var N in E)E.hasOwnProperty(N)&&(k[N]=S(E[N],C));return k;case"Array":return O=s.util.objId(E),C[O]?C[O]:(k=[],C[O]=k,E.forEach(function(D,U){k[U]=S(D,C)}),k);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var k="no-"+E;S;){var O=S.classList;if(O.contains(E))return!0;if(O.contains(k))return!1;S=S.parentElement}return!!C}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(S,E){var C=s.util.clone(s.languages[S]);for(var k in E)C[k]=E[k];return C},insertBefore:function(S,E,C,k){k=k||s.languages;var O=k[S],N={};for(var D in O)if(O.hasOwnProperty(D)){if(D==E)for(var U in C)C.hasOwnProperty(U)&&(N[U]=C[U]);C.hasOwnProperty(D)||(N[D]=O[D])}var W=k[S];return k[S]=N,s.languages.DFS(s.languages,function(Q,F){F===W&&Q!=S&&(this[Q]=N)}),N},DFS:function S(E,C,k,O){O=O||{};var N=s.util.objId;for(var D in E)if(E.hasOwnProperty(D)){C.call(E,D,E[D],k||D);var U=E[D],W=s.util.type(U);W==="Object"&&!O[N(U)]?(O[N(U)]=!0,S(U,C,null,O)):W==="Array"&&!O[N(U)]&&(O[N(U)]=!0,S(U,C,D,O))}}},plugins:{},highlightAll:function(S,E){s.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var k={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),s.hooks.run("before-all-elements-highlight",k);for(var O=0,N;N=k.elements[O++];)s.highlightElement(N,E===!0,k.callback)},highlightElement:function(S,E,C){var k=s.util.getLanguage(S),O=s.languages[k];s.util.setLanguage(S,k);var N=S.parentElement;N&&N.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(N,k);var D=S.textContent,U={element:S,language:k,grammar:O,code:D};function W(F){U.highlightedCode=F,s.hooks.run("before-insert",U),U.element.innerHTML=U.highlightedCode,s.hooks.run("after-highlight",U),s.hooks.run("complete",U),C&&C.call(U.element)}if(s.hooks.run("before-sanity-check",U),N=U.element.parentElement,N&&N.nodeName.toLowerCase()==="pre"&&!N.hasAttribute("tabindex")&&N.setAttribute("tabindex","0"),!U.code){s.hooks.run("complete",U),C&&C.call(U.element);return}if(s.hooks.run("before-highlight",U),!U.grammar){W(s.util.encode(U.code));return}if(E&&r.Worker){var Q=new Worker(s.filename);Q.onmessage=function(F){W(F.data)},Q.postMessage(JSON.stringify({language:U.language,code:U.code,immediateClose:!0}))}else W(s.highlight(U.code,U.grammar,U.language))},highlight:function(S,E,C){var k={code:S,grammar:E,language:C};if(s.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=s.tokenize(k.code,k.grammar),s.hooks.run("after-tokenize",k),u.stringify(s.util.encode(k.tokens),k.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var k in C)E[k]=C[k];delete E.rest}var O=new h;return p(O,O.head,S),f(S,O,E,O.head,0),v(O)},hooks:{all:{},add:function(S,E){var C=s.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=s.hooks.all[S];if(!(!C||!C.length))for(var k=0,O;O=C[k++];)O(E)}},Token:u};r.Prism=s;function u(S,E,C,k){this.type=S,this.content=E,this.alias=C,this.length=(k||"").length|0}u.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(W){k+=S(W,C)}),k}var O={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},N=E.alias;N&&(Array.isArray(N)?Array.prototype.push.apply(O.classes,N):O.classes.push(N)),s.hooks.run("wrap",O);var D="";for(var U in O.attributes)D+=" "+U+'="'+(O.attributes[U]||"").replace(/"/g,"&quot;")+'"';return"<"+O.tag+' class="'+O.classes.join(" ")+'"'+D+">"+O.content+"</"+O.tag+">"};function c(S,E,C,k){S.lastIndex=E;var O=S.exec(C);if(O&&k&&O[1]){var N=O[1].length;O.index+=N,O[0]=O[0].slice(N)}return O}function f(S,E,C,k,O,N){for(var D in C)if(!(!C.hasOwnProperty(D)||!C[D])){var U=C[D];U=Array.isArray(U)?U:[U];for(var W=0;W<U.length;++W){if(N&&N.cause==D+","+W)return;var Q=U[W],F=Q.inside,Z=!!Q.lookbehind,L=!!Q.greedy,he=Q.alias;if(L&&!Q.pattern.global){var ie=Q.pattern.toString().match(/[imsuy]*$/)[0];Q.pattern=RegExp(Q.pattern.source,ie+"g")}for(var ne=Q.pattern||Q,ee=k.next,se=O;ee!==E.tail&&!(N&&se>=N.reach);se+=ee.value.length,ee=ee.next){var G=ee.value;if(E.length>S.length)return;if(!(G instanceof u)){var X=1,Y;if(L){if(Y=c(ne,se,S,Z),!Y||Y.index>=S.length)break;var Me=Y.index,re=Y.index+Y[0].length,be=se;for(be+=ee.value.length;Me>=be;)ee=ee.next,be+=ee.value.length;if(be-=ee.value.length,se=be,ee.value instanceof u)continue;for(var we=ee;we!==E.tail&&(be<re||typeof we.value=="string");we=we.next)X++,be+=we.value.length;X--,G=S.slice(se,be),Y.index-=se}else if(Y=c(ne,0,G,Z),!Y)continue;var Me=Y.index,Pe=Y[0],Ae=G.slice(0,Me),Te=G.slice(Me+Pe.length),qe=se+G.length;N&&qe>N.reach&&(N.reach=qe);var it=ee.prev;Ae&&(it=p(E,it,Ae),se+=Ae.length),g(E,it,X);var Ie=new u(D,F?s.tokenize(Pe,F):Pe,he,Pe);if(ee=p(E,it,Ie),Te&&p(E,ee,Te),X>1){var Re={cause:D+","+W,reach:qe};f(S,E,C,ee.prev,se,Re),N&&Re.reach>N.reach&&(N.reach=Re.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function p(S,E,C){var k=E.next,O={value:C,prev:E,next:k};return E.next=O,k.prev=O,S.length++,O}function g(S,E,C){for(var k=E.next,O=0;O<C&&k!==S.tail;O++)k=k.next;E.next=k,k.prev=E,S.length-=O}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,k=E.code,O=E.immediateClose;r.postMessage(s.highlight(k,s.languages[C],C)),O&&r.close()},!1)),s;var b=s.util.currentScript();b&&(s.filename=b.src,b.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof ed<"u"&&(ed.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,_){return" Error "+b+" while fetching file: "+_},i=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",c="loaded",f="failed",h="pre[data-src]:not(["+s+'="'+c+'"]):not(['+s+'="'+u+'"])';function p(b,_,x){var S=new XMLHttpRequest;S.open("GET",b,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?_(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function g(b){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(_){var x=Number(_[1]),S=_[2],E=_[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var _=b.element;if(_.matches(h)){b.code="",_.setAttribute(s,u);var x=_.appendChild(document.createElement("CODE"));x.textContent=r;var S=_.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=o[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(_,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),p(S,function(O){_.setAttribute(s,c);var N=g(_.getAttribute("data-range"));if(N){var D=O.split(/\r\n?|\n/g),U=N[0],W=N[1]==null?D.length:N[1];U<0&&(U+=D.length),U=Math.max(0,Math.min(U-1,D.length)),W<0&&(W+=D.length),W=Math.max(0,Math.min(W,D.length)),O=D.slice(U,W).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(U+1))}x.textContent=O,n.highlightElement(x)},function(O){_.setAttribute(s,f),x.textContent=O})}}),n.plugins.fileHighlight={highlight:function(_){for(var x=(_||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(Ix)),Ix.exports}var XK=YK();const JK=ei(XK);var TN={},RN;function QK(){return RN||(RN=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),TN}QK();var NN={},IN;function eZ(){return IN||(IN=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),NN}eZ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(f){return f=f.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+f+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(f){["url","bold","italic","strike","code-snippet"].forEach(function(h){f!==h&&(e.languages.markdown[f].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(f){if(f.language!=="markdown"&&f.language!=="md")return;function h(p){if(!(!p||typeof p=="string"))for(var g=0,v=p.length;g<v;g++){var b=p[g];if(b.type!=="code"){h(b.content);continue}var _=b.content[1],x=b.content[3];if(_&&x&&_.type==="code-language"&&x.type==="code-block"&&typeof _.content=="string"){var S=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(f.tokens)}),e.hooks.add("wrap",function(f){if(f.type==="code-block"){for(var h="",p=0,g=f.classes.length;p<g;p++){var v=f.classes[p],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var _=e.languages[h];if(_)f.content=e.highlight(c(f.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);f.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(f){var h=f.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),u(v)}else{var b=s[g];return b||p}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,u){u=(u||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(c,u)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var ON={},DN;function tZ(){return DN||(DN=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),ON}tZ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const cw=({lang:e,code:t})=>{const[n,r]=R.useState(!1),[a,i]=R.useState(!1),o=R.useRef(null),s=R.useCallback(()=>{if(o.current&&t)try{o.current.textContent=t,JK.highlightElement(o.current)}catch(p){console.error("Prism highlight error:",p),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);R.useEffect(()=>{a||s()},[t,e,a,s]);const u=async()=>{try{await navigator.clipboard.writeText(t),r(!0),dt.success("Code copied to clipboard!"),setTimeout(()=>r(!1),1500)}catch(p){dt.error("Failed to copy code."),console.error("Clipboard copy failed:",p)}},c=()=>{const p=a;i(g=>!g),p&&setTimeout(s,0)},f=e?`language-${e}`:"language-plaintext",h=R.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container my-4",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("span",{className:"text-xs text-muted-foreground",children:e||"code"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:c,"aria-label":a?"Unfold code":"Fold code",children:y.jsx(Gv,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:a?"Unfold":"Fold"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:u,"aria-label":"Copy code",children:n?y.jsx(_o,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(oC,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:"Copy"})]})})]})]}),!a&&y.jsx("pre",{className:$t("code-block-content"),children:y.jsx("code",{ref:o,className:$t(f),children:t})}),a&&y.jsx("div",{className:"folded-content-preview p-4 pt-0",onClick:c,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:h})})]})},nZ=({toolCallStrings:e,toolResultStrings:t})=>{const[n,r]=R.useState(new Set),[a,i]=R.useState([]),[o,s]=R.useState([]),[u,c]=R.useState(new Map);R.useEffect(()=>{const h=[],p=[],g=new Set;(e??[]).forEach(v=>{try{const b=JSON.parse(v);b&&b.type==="tool-call"&&b.toolCallId&&b.toolName&&b.args!==void 0?(h.push(b),g.add(b.toolCallId)):console.warn("Skipping invalid tool call string:",v)}catch(b){console.error("Failed to parse tool call string for display:",v,b)}}),(t??[]).forEach(v=>{try{const b=JSON.parse(v);b&&b.type==="tool-result"&&b.toolCallId&&b.toolName&&b.result!==void 0?p.push(b):console.warn("Skipping invalid tool result string:",v)}catch(b){console.error("Failed to parse tool result string for display:",v,b)}}),i(h),s(p),c(new Map(p.map(v=>[v.toolCallId,v]))),r(g)},[e,t]);const f=h=>{r(p=>{const g=new Set(p);return g.has(h)?g.delete(h):g.add(h),g})};return a.length===0?null:y.jsxs("div",{className:"mt-2 space-y-2 border-t border-border/50 pt-2",children:[y.jsx("div",{className:"flex items-center justify-between mb-1",children:y.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground",children:[y.jsx(Ab,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Tool Activity (",a.length," calls)"]})]})}),a.map((h,p)=>{const g=n.has(h.toolCallId),v=u.get(h.toolCallId),b=v&&typeof v.result=="object"&&v.result!==null&&v.result._isError===!0,_=b?String(v.result.error):null,x=v?b?"error":"completed":"pending",S=v?b?`Error: ${_}`:JSON.stringify(v.result,null,2):"Waiting for result...";return y.jsxs("div",{className:"p-2 border rounded bg-muted/30 text-xs",children:[y.jsxs("div",{className:"flex items-center justify-between gap-1.5 font-medium mb-1",children:[y.jsxs("div",{className:"flex items-center gap-1.5",children:[x==="pending"&&y.jsx(Zn,{className:"h-3.5 w-3.5 animate-spin text-blue-500"}),x==="completed"&&y.jsx(iC,{className:"h-3.5 w-3.5 text-green-500"}),x==="error"&&y.jsx(js,{className:"h-3.5 w-3.5 text-destructive"}),y.jsx(Ab,{className:"h-3.5 w-3.5 text-muted-foreground"}),y.jsxs("span",{children:["Tool Call #",p+1,": ",h.toolName]})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>f(h.toolCallId),"aria-label":g?"Expand tool call":"Collapse tool call",children:g?y.jsx(aC,{className:"h-3.5 w-3.5"}):y.jsx(Vv,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:g?"Expand":"Collapse"})]})})]}),!g&&y.jsxs("div",{className:"pl-5 space-y-1 mt-1",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"Args:"}),y.jsx("pre",{className:"text-[11px] bg-background/50 p-1 rounded mt-0.5 whitespace-pre-wrap break-words",children:JSON.stringify(h.args,null,2)})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"Result:"}),y.jsx("pre",{className:$t("text-[11px] p-1 rounded mt-0.5 whitespace-pre-wrap break-words",b?"bg-destructive/10 text-destructive":"bg-background/50"),children:S})]})]})]},h.toolCallId)})]})},rZ=({interaction:e,allInteractionsInGroup:t,onRegenerate:n,className:r})=>{var F,Z,L,he,ie,ne,ee,se,G,X,Y,re,be;const[a,i]=R.useState(0),[o,s]=R.useState(!1),[u,c]=R.useState(!1),[f,h]=R.useState(!1),p=R.useMemo(()=>t.filter(we=>we.type==="message.user_assistant"&&we.status==="COMPLETED"&&we.prompt===null).sort((we,Me)=>{var Pe,Ae;return(((Pe=Me.startedAt)==null?void 0:Pe.getTime())??0)-(((Ae=we.startedAt)==null?void 0:Ae.getTime())??0)}),[t]),g=p.length>0?p[a]:e,v=typeof g.response=="string"?g.response:null,b=IC(v),_=e.prompt&&g.status==="COMPLETED"&&typeof n=="function"&&a===0,x=we=>{we.stopPropagation(),n&&e.prompt?n(e.id):console.error("Could not regenerate: No callback or prompt data found in the original interaction.",e)},S=we=>{i(Me=>we==="prev"?Math.min(Me+1,p.length-1):Math.max(Me-1,0))},E=R.useCallback(async()=>{if(v)try{await navigator.clipboard.writeText(v),c(!0),dt.success("Response copied to clipboard!"),setTimeout(()=>c(!1),1500)}catch(we){dt.error("Failed to copy response."),console.error("Clipboard copy failed:",we)}},[v]),C=R.useCallback(async()=>{try{await navigator.clipboard.writeText(g.id),h(!0),dt.success("Interaction ID copied to clipboard!"),setTimeout(()=>h(!1),1500)}catch(we){dt.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",we)}},[g.id]),k=()=>s(we=>!we),O=p.length>1,N=a<p.length-1,D=a>0,U=R.useMemo(()=>v?v.split(`
`).slice(0,3).join(`
`):"",[v]),W=R.useMemo(()=>g.startedAt&&g.endedAt?((g.endedAt.getTime()-g.startedAt.getTime())/1e3).toFixed(2):null,[g.startedAt,g.endedAt]),Q=(((Z=(F=g.metadata)==null?void 0:F.toolCalls)==null?void 0:Z.length)??0)>0;return y.jsxs("div",{className:$t("p-3 my-2 border rounded-md shadow-sm bg-card relative group",r),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{children:["Assistant | ",g.status,((L=g.metadata)==null?void 0:L.modelId)&&y.jsxs("span",{className:"ml-2 text-blue-400",children:["(",g.metadata.modelId,")"]})]}),y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":o?"Unfold response":"Fold response",children:y.jsx(Gv,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:o?"Unfold":"Fold"})]})}),O&&y.jsxs("div",{className:"flex items-center border border-border rounded bg-background/50",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>S("prev"),disabled:!N,"aria-label":"Previous revision",children:y.jsx(iU,{className:"h-3 w-3"})})}),y.jsx(Dn,{side:"top",children:"Previous Revision"})]})}),y.jsxs("span",{className:"text-[10px] px-1 text-muted-foreground select-none",children:[a+1,"/",p.length]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>S("next"),disabled:!D,"aria-label":"Next revision",children:y.jsx(aC,{className:"h-3 w-3"})})}),y.jsx(Dn,{side:"top",children:"Next Revision"})]})})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:C,"aria-label":"Copy interaction ID",children:f?y.jsx(_o,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx($O,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:"Copy ID"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:E,"aria-label":"Copy response",disabled:!v,children:u?y.jsx(_o,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(oC,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:"Copy"})]})}),_&&y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:x,"aria-label":"Regenerate response",children:y.jsx(uC,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:"Regenerate"})]})})]})]}),y.jsx("div",{className:"text-sm markdown-content",children:o?y.jsx("div",{className:"folded-content-preview cursor-pointer",onClick:k,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:U||(Q?"[Tool Activity]":"")})}):y.jsxs(y.Fragment,{children:[b.map((we,Me)=>typeof we=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:we}},Me):we.type==="code"?y.jsx(cw,{lang:we.lang,code:we.code},Me):null),y.jsx(nZ,{toolCallStrings:(he=g.metadata)==null?void 0:he.toolCalls,toolResultStrings:(ie=g.metadata)==null?void 0:ie.toolResults})]})}),!o&&(((ne=g.metadata)==null?void 0:ne.promptTokens)||((ee=g.metadata)==null?void 0:ee.completionTokens)||W)&&y.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50 text-xs text-muted-foreground flex justify-start gap-3",children:[W&&y.jsxs("span",{children:["Time: ",W,"s"]}),(((se=g.metadata)==null?void 0:se.promptTokens)||((G=g.metadata)==null?void 0:G.completionTokens))&&y.jsxs("span",{children:["Tokens: ",((X=g.metadata)==null?void 0:X.promptTokens)??"?"," ","(in) / ",((Y=g.metadata)==null?void 0:Y.completionTokens)??"?"," ","(out)"]})]}),g.status==="ERROR"&&((re=g.metadata)==null?void 0:re.error)&&y.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-destructive",children:[y.jsx(js,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Error: ",g.metadata.error]})]}),g.status==="WARNING"&&((be=g.metadata)==null?void 0:be.error)&&y.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-accent",children:[y.jsx(js,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Error: ",g.metadata.error]})]})]})},aZ=R.memo(rZ);var st;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(st||(st={}));const jN={[st.EPERM]:"Operation not permitted",[st.ENOENT]:"No such file or directory",[st.EINTR]:"Interrupted system call",[st.EIO]:"Input/output error",[st.ENXIO]:"No such device or address",[st.EBADF]:"Bad file descriptor",[st.EAGAIN]:"Resource temporarily unavailable",[st.ENOMEM]:"Cannot allocate memory",[st.EACCES]:"Permission denied",[st.EFAULT]:"Bad address",[st.ENOTBLK]:"Block device required",[st.EBUSY]:"Resource busy or locked",[st.EEXIST]:"File exists",[st.EXDEV]:"Invalid cross-device link",[st.ENODEV]:"No such device",[st.ENOTDIR]:"File is not a directory",[st.EISDIR]:"File is a directory",[st.EINVAL]:"Invalid argument",[st.ENFILE]:"Too many open files in system",[st.EMFILE]:"Too many open files",[st.ETXTBSY]:"Text file busy",[st.EFBIG]:"File is too big",[st.ENOSPC]:"No space left on disk",[st.ESPIPE]:"Illegal seek",[st.EROFS]:"Cannot modify a read-only file system",[st.EMLINK]:"Too many links",[st.EPIPE]:"Broken pipe",[st.EDOM]:"Numerical argument out of domain",[st.ERANGE]:"Numerical result out of range",[st.EDEADLK]:"Resource deadlock would occur",[st.ENAMETOOLONG]:"File name too long",[st.ENOLCK]:"No locks available",[st.ENOSYS]:"Function not implemented",[st.ENOTEMPTY]:"Directory is not empty",[st.ELOOP]:"Too many levels of symbolic links",[st.ENOMSG]:"No message of desired type",[st.EBADE]:"Invalid exchange",[st.EBADR]:"Invalid request descriptor",[st.EXFULL]:"Exchange full",[st.ENOANO]:"No anode",[st.EBADRQC]:"Invalid request code",[st.ENOSTR]:"Device not a stream",[st.ENODATA]:"No data available",[st.ETIME]:"Timer expired",[st.ENOSR]:"Out of streams resources",[st.ENONET]:"Machine is not on the network",[st.EREMOTE]:"Object is remote",[st.ENOLINK]:"Link has been severed",[st.ECOMM]:"Communication error on send",[st.EPROTO]:"Protocol error",[st.EBADMSG]:"Bad message",[st.EOVERFLOW]:"Value too large for defined data type",[st.EBADFD]:"File descriptor in bad state",[st.ESTRPIPE]:"Streams pipe error",[st.ENOTSOCK]:"Socket operation on non-socket",[st.EDESTADDRREQ]:"Destination address required",[st.EMSGSIZE]:"Message too long",[st.EPROTOTYPE]:"Protocol wrong type for socket",[st.ENOPROTOOPT]:"Protocol not available",[st.EPROTONOSUPPORT]:"Protocol not supported",[st.ESOCKTNOSUPPORT]:"Socket type not supported",[st.ENOTSUP]:"Operation is not supported",[st.ENETDOWN]:"Network is down",[st.ENETUNREACH]:"Network is unreachable",[st.ENETRESET]:"Network dropped connection on reset",[st.ETIMEDOUT]:"Connection timed out",[st.ECONNREFUSED]:"Connection refused",[st.EHOSTDOWN]:"Host is down",[st.EHOSTUNREACH]:"No route to host",[st.EALREADY]:"Operation already in progress",[st.EINPROGRESS]:"Operation now in progress",[st.ESTALE]:"Stale file handle",[st.EREMOTEIO]:"Remote I/O error",[st.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(st[t],jN[st[t]],n,r)}constructor(t,n=jN[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=st[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var Ox={exports:{}},MN;function iZ(){return MN||(MN=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function i(u,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,h||u,p),v=n?n+c:c;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],g]:u._events[v].push(g):(u._events[v]=g,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)t.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},s.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,v=new Array(g);p<g;p++)v[p]=h[p].fn;return v},s.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},s.prototype.emit=function(c,f,h,p,g,v){var b=n?n+c:c;if(!this._events[b])return!1;var _=this._events[b],x=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,h),!0;case 4:return _.fn.call(_.context,f,h,p),!0;case 5:return _.fn.call(_.context,f,h,p,g),!0;case 6:return _.fn.call(_.context,f,h,p,g,v),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var C=_.length,k;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),x){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,f);break;case 3:_[E].fn.call(_[E].context,f,h);break;case 4:_[E].fn.call(_[E].context,f,h,p);break;default:if(!S)for(k=1,S=new Array(x-1);k<x;k++)S[k-1]=arguments[k];_[E].fn.apply(_[E].context,S)}}return!0},s.prototype.on=function(c,f,h){return i(this,c,f,h,!1)},s.prototype.once=function(c,f,h){return i(this,c,f,h,!0)},s.prototype.removeListener=function(c,f,h,p){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===f&&(!p||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var b=0,_=[],x=v.length;b<x;b++)(v[b].fn!==f||p&&!v[b].once||h&&v[b].context!==h)&&_.push(v[b]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Ox)),Ox.exports}var oZ=iZ();const OC=ei(oZ);var dO;let sZ=class extends OC{constructor(n){super();Ha(this,dO,"List");Ha(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(dO=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function PN(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function lr(e){throw e}const FN=Intl.NumberFormat("en",{notation:"compact"});FN.format.bind(FN);function gd(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function lZ(e){try{return JSON.parse(e),!0}catch{return!1}}function J2(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function DC(e){return e.at(0).toUpperCase()+e.slice(1)}const uZ=new TextEncoder;function Jc(e){return uZ.encode(e)}const LN=new TextDecoder;function jC(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return LN.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),LN.decode(t)}function Dm(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Dm(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function cZ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var dZ={};let fZ="process"in globalThis&&"env"in globalThis.process&&dZ.U_DEBUG=="true";function jm(...e){fZ&&console.debug("[U]",...e)}const $N=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],hZ=[...$N,...$N.map(e=>DC(e)),"char"],MC=/^(u?int|float)(8|16|32|64|128)$/i;function ZD(e){return e=="char"?"uint8":e.toLowerCase()}function PC(e){return MC.test(e.toString())}function Q2(e){return e=="char"||MC.test(e.toString().toLowerCase())}function pZ(e){if(!Q2(e))throw new TypeError("Not a valid primitive type: "+e)}const BN=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function YD(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function mZ(e){return e!=null&&typeof e=="object"&&"struct"in e}function dw(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function zo(e){return typeof e=="function"&&Symbol.metadata in e&&mZ(e[Symbol.metadata])}function A0(e){return e!=null&&typeof e=="object"&&zo(e.constructor)}function XD(e){if(!A0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function FC(e){return A0(e)||zo(e)}function JD(e){if(!FC(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function LC(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function jr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=jr(e[i]);return a}if(typeof e=="string")return pZ(e),+ZD(e).match(MC)[2]/8;if(LC(e))return e[Symbol.size];JD(e);const t=zo(e)?e:e.constructor;dw(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(zo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(A0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,jr(i)):r+=jr(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=jr(FC(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function gZ(e,t){var i;JD(e);const n=zo(e)?e:e.constructor;dw(n);const{struct:r}=n[Symbol.metadata];if(zo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??lr(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=jr(FC(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function yZ(e,t){return Math.ceil(e/t)*t}function yd(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:u,length:c}of YD(r)){if(!Q2(u)&&!zo(u))throw new TypeError("Not a valid type: "+u);if(typeof c=="string"){const p=a.get(c);if(!p)throw new Error(`"${c}" is undefined or declared after "${s}"`);if(!PC(p.type))throw new Error(`"${c}" is not a number and cannot be used to count "${s}"`)}let f=`${typeof u=="string"?u:u.name} ${s}`;c!==void 0&&(f+=`[${c}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:Q2(u)?ZD(u):u,length:c,decl:f});const h=typeof c=="string"||zo(u)&&u[Symbol.metadata].struct.isDynamic?0:jr(u)*(c||1);o||(o=zo(u)?u[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=yZ(i,e.align||1),jm("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function Mm(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return YD(r).push({name:a,type:e,length:t}),n}}function QD(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:lr(new Error("Array lengths must be natural numbers"))}function Pa(e){if(LC(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();XD(e),dw(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=jr(e),a=new Uint8Array(r),i=new DataView(a.buffer);jm("serialize",e.constructor.name);let o=0,s=0;for(const u of n.values()){const c=QD(e,u);jm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name][f]:e[u.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=A0(h)?jr(h):jr(u.type),!PC(u.type)){a.set(h?Pa(h):new Uint8Array(jr(u.type)),o);continue}const p=`set${DC(u.type)}`;if(p=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(p=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(p=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&BN,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&BN,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[p](o,Number(h),!t.bigEndian)}}return a}function fw(e,t){const n=cZ(t);if(LC(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);XD(e),dw(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);jm("deserialize",e.constructor.name);let o=0,s=0;for(const u of a.values()){const c=QD(e,u);jm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name]:e;const p=c!=-1?f:u.name,g=h[p]===null||h[p]===void 0,v=g&&zo(u.type)&&u.type[Symbol.metadata].struct.isDynamic;if(o=s,!A0(h[p])&&!v&&(s+=jr(u.type)),typeof e[u.name]=="string"){e[u.name]=e[u.name].slice(0,f)+String.fromCharCode(i.getUint8(o))+e[u.name].slice(f+1);continue}if(!PC(u.type)){if(v&&zo(u.type))h[p]??(h[p]=new u.type);else if(g)continue;fw(h[p],new Uint8Array(n.subarray(o))),s+=jr(h[p]);continue}c&&c!=-1&&(h||(h=[]));const b=`get${DC(u.type)}`;if(b=="getInt64"){h[p]=i.getBigInt64(o,!r.bigEndian);continue}if(b=="getUint64"){h[p]=i.getBigUint64(o,!r.bigEndian);continue}if(b=="getInt128"){h[p]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[p]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[p]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[p]=i[b](o,!r.bigEndian)}}}function bZ(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Mm(e,n):Mm(e)(n,r)}return t}const gn=Object.fromEntries(hZ.map(e=>[e,bZ(e)]));function vZ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const Qo={root:"/",pwd:"/",credentials:vZ({uid:0,gid:0}),descriptors:new Map};function ej(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const u=n.lastIndexOf("/");u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function jl(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:Qo.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=ej(n,!r),r?`/${n}`:n.length?n:"/"}function wZ(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=ej(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function tr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?wZ(t):"."}function tj(e,t){if(e===t||(e=jl.call(this,e),t=jl.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let u=-1,c=0;for(;c<s;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(u=c)}if(c===s)if(o>s){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else a>s&&(e[n+c]==="/"?u=c:c===0&&(u=0));let f="";for(c=n+u+1;c<=r;++c)(c===r||e[c]==="/")&&(f+=f.length===0?"..":"/..");return`${f}${t.slice(i+u)}`}function Xn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function Jf(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function xs(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,u=e.length-1,c=0;for(;u>=r;--u){if(e[u]==="/"){if(!s){i=u+1;break}continue}o===-1&&(s=!1,o=u+1),e[u]==="."?a===-1?a=u:c!==1&&(c=1):a!==-1&&(c=-1)}if(o!==-1){const f=i===0&&t?1:i;a===-1||c===0||c===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(f,o):(n.name=e.slice(f,a),n.base=e.slice(f,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var pn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(pn||(pn={}));pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";const _Z=new sZ;function xZ(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};_Z.add(n),NZ(n)}function SZ(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+tr(i,e.path)}function cc(e){return function(t,n={}){return xZ(e,SZ(t,n)),t}}cc(pn.EMERG);const EZ=cc(pn.ALERT),hw=cc(pn.CRIT),_i=cc(pn.ERR),Ka=cc(pn.WARN),$C=cc(pn.NOTICE),nj=cc(pn.INFO),gm=cc(pn.DEBUG);function CZ(e,t){return`\x1B[${t}m${e}\x1B[0m`}function kZ(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[CZ(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";let AZ=e=>[...kZ(e),e.message];function TZ(e){const t=AZ(e);return typeof t=="string"?[t]:Array.from(t)}let RZ=console.error;function NZ(e){e.level>IZ||RZ(...TZ(e))}let IZ=pn.ALERT;function BC(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function OZ(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function DZ(e,t){if(typeof t!="object"||t===null)throw _i(new Ue(st.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){gm("Using default for option: "+n);continue}throw _i(new Ue(st.EINVAL,"Missing required option: "+n))}const i=(c,f=a)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?a instanceof c:c(a):typeof a===c||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,u=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw _i(new Ue(st.EINVAL,`Incorrect type for "${n}": ${o} (expected ${u})`))}}function rj(e){return e!=null&&typeof e=="object"&&"backend"in e&&BC(e.backend)}const zC=0,ma=4,Kr=2,fb=1,UC=1,jZ=2,MZ=4,aj=0,Wa=1,Al=2,pw=64,mw=128,PZ=256,gw=512,sd=1024,FZ=65536,LZ=262144,$Z=131072,yw=1052672,BZ=4096,zZ=32768,UZ=16384,qZ=2048,br=61440,bd=49152,ql=40960,Uo=32768,vd=24576,oa=16384,wd=8192,_d=4096,T0=2048,R0=1024,HZ=512,VZ=448,ij=256,oj=128,sj=64,GZ=56,lj=32,uj=16,cj=8,WZ=7,dj=4,fj=2,hj=1,KZ=0,di=4294967295,pj=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:UC,COPYFILE_FICLONE:jZ,COPYFILE_FICLONE_FORCE:MZ,F_OK:zC,O_APPEND:sd,O_CREAT:pw,O_DIRECT:UZ,O_DIRECTORY:FZ,O_DSYNC:BZ,O_EXCL:mw,O_NOATIME:LZ,O_NOCTTY:PZ,O_NOFOLLOW:$Z,O_NONBLOCK:qZ,O_RDONLY:aj,O_RDWR:Al,O_SYMLINK:zZ,O_SYNC:yw,O_TRUNC:gw,O_WRONLY:Wa,R_OK:ma,S_IFBLK:vd,S_IFCHR:wd,S_IFDIR:oa,S_IFIFO:_d,S_IFLNK:ql,S_IFMT:br,S_IFREG:Uo,S_IFSOCK:bd,S_IRGRP:lj,S_IROTH:dj,S_IRUSR:ij,S_IRWXG:GZ,S_IRWXO:WZ,S_IRWXU:VZ,S_ISGID:R0,S_ISUID:T0,S_ISVTX:HZ,S_IWGRP:uj,S_IWOTH:fj,S_IWUSR:oj,S_IXGRP:cj,S_IXOTH:hj,S_IXUSR:sj,UV_FS_O_FILEMAP:KZ,W_OK:Kr,X_OK:fb,size_max:di},Symbol.toStringTag,{value:"Module"})),Py=BigInt(1e3);class mj{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:u,ino:c,...f}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(c??0),this.mode=this._convert(u??420&Uo),(this.mode&br)==0&&(this.mode=this.mode|this._convert(Uo)),Object.assign(this,f)}isFile(){return(this.mode&br)===Uo}isDirectory(){return(this.mode&br)===oa}isSymbolicLink(){return(this.mode&br)===ql}isSocket(){return(this.mode&br)===bd}isBlockDevice(){return(this.mode&br)===vd}isCharacterDevice(){return(this.mode&br)===wd}isFIFO(){return(this.mode&br)===_d}toJSON(){return gd(this,eE)}hasAccess(t,n){return ar(n,this._isBigint?new Hl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*Py}get mtimeNs(){return BigInt(this.mtimeMs)*Py}get ctimeNs(){return BigInt(this.ctimeMs)*Py}get birthtimeNs(){return BigInt(this.birthtimeMs)*Py}}function gj(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<di?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<di?e.gid=n:r=!1,r}class Hl extends mj{constructor(){super(...arguments),this._isBigint=!1}}class xd extends mj{constructor(){super(...arguments),this._isBigint=!0}}function ZZ(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class YZ{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=di,this.ffree=di}}class XZ{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(di),this.ffree=BigInt(di)}}var kr=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),p=!0},hn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},qC=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const zi=0,JZ=1024;let zN=(()=>{var e,t;let n=[yd()],r,a=[],i,o,s=[],u=[],c,f=[],h=[],p,g=[],v=[],b,_=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=hn(this,s,0),this.valueSize=(hn(this,u),hn(this,f,0)),this._key=(hn(this,h),hn(this,g,"")),this._value=(hn(this,v),hn(this,_,new Uint8Array(JZ))),hn(this,x),S&&(this.key=S),E&&(this.value=E)}},qC(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=gn).uint32.bind(e)],c=[(t=gn).uint32.bind(t)],p=[gn.char("keySize")],b=[gn.uint8("valueSize")],kr(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},s,u),kr(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},f,h),kr(null,null,p,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},g,v),kr(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},_,x),kr(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),hn(i,a)})(),i})(),Wu=(()=>{var e;let t=[yd()],n,r=[],a,i,o=[],s=[],u,c=[],f=[];return a=class{has(h){return this.data.some(p=>p.key==h)}get(h){return this.data.find(p=>p.key==h)}set(h,p){const g=this.get(h);if(g){g.value=p;return}this.data.push(new zN(h,p)),this.size++}remove(h){const p=this.data.findIndex(g=>g.key==h);return p===-1?!1:(this.data.splice(p,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=hn(this,o,0),this.data=(hn(this,s),hn(this,c,[])),hn(this,f)}},qC(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=gn).uint32.bind(e)],u=[Mm(zN,"size")],kr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:p=>"size"in p,get:p=>p.size,set:(p,g)=>{p.size=g}},metadata:h},o,s),kr(null,null,u,{kind:"field",name:"data",static:!1,private:!1,access:{has:p=>"data"in p,get:p=>p.data,set:(p,g)=>{p.data=g}},metadata:h},c,f),kr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),hn(a,r)})(),a})();const eE=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],QZ=4;var xi;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(xi||(xi={}));let ia=(()=>{var e,t,n,r,a,i,o,s,u,c,f,h,p,g,v,b;let _=[yd()],x,S=[],E,C,k=[],O=[],N,D=[],U=[],W,Q=[],F=[],Z,L=[],he=[],ie,ne=[],ee=[],se,G=[],X=[],Y,re=[],be=[],we,Me=[],Pe=[],Ae,Te=[],qe=[],it,Ie=[],Re=[],z,Ce=[],Ne=[],ce,ae=[],J=[],xe,Le=[],Se=[],Ve,xt=[],ht=[],Et,Pt=[],Tt=[],Ut,ge=[],I=[],H,fe=[],Oe=[],ve,ke=[],le=[];var ct=E=class{constructor(yt){if(this.data=hn(this,k,J2(0,di)),this.__data_old=(hn(this,O),hn(this,D,0)),this.size=(hn(this,U),hn(this,Q,0)),this.mode=(hn(this,F),hn(this,L,0)),this.nlink=(hn(this,he),hn(this,ne,1)),this.uid=(hn(this,ee),hn(this,G,0)),this.gid=(hn(this,X),hn(this,re,0)),this.atimeMs=(hn(this,be),hn(this,Me,Date.now())),this.birthtimeMs=(hn(this,Pe),hn(this,Te,Date.now())),this.mtimeMs=(hn(this,qe),hn(this,Ie,Date.now())),this.ctimeMs=(hn(this,Re),hn(this,Ce,Date.now())),this.ino=(hn(this,Ne),hn(this,ae,J2(0,di))),this.__ino_old=(hn(this,J),hn(this,Le,0)),this.flags=(hn(this,Se),hn(this,xt,0)),this.__after_flags=(hn(this,ht),hn(this,Pt,0)),this.version=(hn(this,Tt),hn(this,ge,0)),this.__padding=(hn(this,I),hn(this,fe,[])),this.attributes=(hn(this,Oe),hn(this,ke,new Wu)),hn(this,le),!!yt){if(!("byteLength"in yt)){Object.assign(this,yt);return}if(yt.byteLength<jr(ct))throw hw(new Ue(st.EIO,"Buffer is too small to create an inode"));fw(this,yt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...gd(this,eE),attributes:this.attributes}}toStats(){return new Hl(this)}update(yt){if(!yt)return!1;let M=!1;for(const Be of eE)yt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==yt[Be]&&(Be=="atimeMs"&&this.flags&xi.NoAtime||(this[Be]=yt[Be],M=!0)));return yt.attributes&&(this.attributes=yt.attributes,M=!0),M&&(this.ctimeMs=Date.now()),M}};return qC(E,"Inode"),(()=>{const yt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=gn).uint32.bind(e)],N=[(t=gn).uint32.bind(t)],W=[(n=gn).uint32.bind(n)],Z=[(r=gn).uint16.bind(r)],ie=[(a=gn).uint32.bind(a)],se=[(i=gn).uint32.bind(i)],Y=[(o=gn).uint32.bind(o)],we=[(s=gn).float64.bind(s)],Ae=[(u=gn).float64.bind(u)],it=[(c=gn).float64.bind(c)],z=[(f=gn).float64.bind(f)],ce=[(h=gn).uint32.bind(h)],xe=[(p=gn).uint32.bind(p)],Ve=[(g=gn).uint32.bind(g)],Et=[(v=gn).uint16.bind(v)],Ut=[(b=gn).uint32.bind(b)],H=[gn.uint8(48)],ve=[Mm(Wu)],kr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:M=>"data"in M,get:M=>M.data,set:(M,Be)=>{M.data=Be}},metadata:yt},k,O),kr(null,null,N,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:M=>"__data_old"in M,get:M=>M.__data_old,set:(M,Be)=>{M.__data_old=Be}},metadata:yt},D,U),kr(null,null,W,{kind:"field",name:"size",static:!1,private:!1,access:{has:M=>"size"in M,get:M=>M.size,set:(M,Be)=>{M.size=Be}},metadata:yt},Q,F),kr(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:M=>"mode"in M,get:M=>M.mode,set:(M,Be)=>{M.mode=Be}},metadata:yt},L,he),kr(null,null,ie,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:M=>"nlink"in M,get:M=>M.nlink,set:(M,Be)=>{M.nlink=Be}},metadata:yt},ne,ee),kr(null,null,se,{kind:"field",name:"uid",static:!1,private:!1,access:{has:M=>"uid"in M,get:M=>M.uid,set:(M,Be)=>{M.uid=Be}},metadata:yt},G,X),kr(null,null,Y,{kind:"field",name:"gid",static:!1,private:!1,access:{has:M=>"gid"in M,get:M=>M.gid,set:(M,Be)=>{M.gid=Be}},metadata:yt},re,be),kr(null,null,we,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:M=>"atimeMs"in M,get:M=>M.atimeMs,set:(M,Be)=>{M.atimeMs=Be}},metadata:yt},Me,Pe),kr(null,null,Ae,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:M=>"birthtimeMs"in M,get:M=>M.birthtimeMs,set:(M,Be)=>{M.birthtimeMs=Be}},metadata:yt},Te,qe),kr(null,null,it,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:M=>"mtimeMs"in M,get:M=>M.mtimeMs,set:(M,Be)=>{M.mtimeMs=Be}},metadata:yt},Ie,Re),kr(null,null,z,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:M=>"ctimeMs"in M,get:M=>M.ctimeMs,set:(M,Be)=>{M.ctimeMs=Be}},metadata:yt},Ce,Ne),kr(null,null,ce,{kind:"field",name:"ino",static:!1,private:!1,access:{has:M=>"ino"in M,get:M=>M.ino,set:(M,Be)=>{M.ino=Be}},metadata:yt},ae,J),kr(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:M=>"__ino_old"in M,get:M=>M.__ino_old,set:(M,Be)=>{M.__ino_old=Be}},metadata:yt},Le,Se),kr(null,null,Ve,{kind:"field",name:"flags",static:!1,private:!1,access:{has:M=>"flags"in M,get:M=>M.flags,set:(M,Be)=>{M.flags=Be}},metadata:yt},xt,ht),kr(null,null,Et,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:M=>"__after_flags"in M,get:M=>M.__after_flags,set:(M,Be)=>{M.__after_flags=Be}},metadata:yt},Pt,Tt),kr(null,null,Ut,{kind:"field",name:"version",static:!1,private:!1,access:{has:M=>"version"in M,get:M=>M.version,set:(M,Be)=>{M.version=Be}},metadata:yt},ge,I),kr(null,null,H,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:M=>"__padding"in M,get:M=>M.__padding,set:(M,Be)=>{M.__padding=Be}},metadata:yt},fe,Oe),kr(null,null,ve,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:M=>"attributes"in M,get:M=>M.attributes,set:(M,Be)=>{M.attributes=Be}},metadata:yt},ke,le),kr(null,x={value:E},_,{kind:"class",name:E.name,metadata:yt},null,S),ct=E=x.value,yt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:yt}),hn(E,S)})(),ct=E})();function eY(e){return(e.mode&br)===Uo}function Wo(e){return(e.mode&br)===oa}function Qf(e){return(e.mode&br)===ql}function tY(e){return(e.mode&br)===bd}function Pm(e){return(e.mode&br)===vd}function Fm(e){return(e.mode&br)===wd}function nY(e){return(e.mode&br)===_d}function ar(e,t,n){const r=(e==null?void 0:e.credentials)||Qo.credentials;if(Qf(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&ij&&(a|=ma),t.mode&oj&&(a|=Kr),t.mode&sj&&(a|=fb)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&lj&&(a|=ma),t.mode&uj&&(a|=Kr),t.mode&cj&&(a|=fb)),t.mode&dj&&(a|=ma),t.mode&fj&&(a|=Kr),t.mode&hj&&(a|=fb),(a&n)===n}const UN=1;class Pb extends Map{constructor(){super(...arguments),this.maxSize=di}toJSON(){return{version:UN,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*jr(ia);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&br)!=oa)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())Xn(a)==t&&a!=t&&(r[Jf(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&br)!=oa)continue;const a={};for(const i of this.keys())Xn(i)==n&&i!=n&&(a[Jf(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=UN)throw new Ue(st.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=J2(1,di)),r=="/"&&(a.ino=0),this.set(r,new ia(a));return this}static parse(t){if(!lZ(t))throw new Ue(st.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Pb;return r.fromJSON(n),r}}const Dx=4096;let HC=class tE{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===tE.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===tE.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=Dx){const u=s+Dx>o?o-s:Dx,c=new Uint8Array(u);await this.read(t,c,s,s+u).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const u=f=>{s=!0,o.error(f)},{size:c}=await this.stat(t);await this.write(t,i,a).catch(u),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,a)}).catch(u))}})}};function si(e){return JSON.parse(jC(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function lo(e){return Jc(JSON.stringify(e))}function dc(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(st.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Fb(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(st.EINVAL,"Invalid time.")}}function ln(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(st.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(st.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(st.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:jl(e)}function Tl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:dc("mode"in e?e==null?void 0:e.mode:null,r)}}class rY{constructor(t,n,r,a){Ha(this,"id");Ha(this,"_size");Ha(this,"options");Ha(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=Dm(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=Dm(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,u)=>s.start-u.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var jx,Mx,Px;(jx=Promise.withResolvers)!==null&&jx!==void 0||(Promise.withResolvers=(Ka("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(Mx=Symbol.dispose)!==null&&Mx!==void 0||(Symbol.dispose=(Ka("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(Px=Symbol.asyncDispose)!==null&&Px!==void 0||(Symbol.asyncDispose=(Ka("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class yj{constructor(t){this.store=t}}class aY extends yj{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class nE extends yj{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new rY(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:u,end:c}of o)this.async(this.get(t,u,c));if(o.length)throw _i(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){Ka("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class iY{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof nE))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,await this.raw.get(t,u.start,u.end),u.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof nE))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,u.start,u.end),u.start)}}}var Er=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Cr=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class bj extends HC{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=tj(t,a);if(o.startsWith(".."))continue;let s=tr(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){Ka("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,gm(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Er(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,Pa(o)),a.has(i)&&await r.set(o.data,lo(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Cr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Er(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,Pa(o)),a.has(i)&&r.setSync(o.data,lo(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Cr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Pb,a=Er(n,this.transaction(),!0),i=[["/",0]],o=PN(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new ia(await a.get(u));if(r.set(s,c),c.mode&oa){const f=si((t=await a.get(c.data))!==null&&t!==void 0?t:lr(Ue.With("ENODATA",s)));for(const[h,p]of Object.entries(f))i.push([tr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Cr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Pb,a=Er(n,this.transaction(),!1),i=[["/",0]],o=PN(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new ia(a.getSync(u));if(r.set(s,c),c.mode&oa){const f=si((t=a.getSync(c.data))!==null&&t!==void 0?t:lr(Ue.With("ENODATA",s)));for(const[h,p]of Object.entries(f))i.push([tr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Cr(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Er(o,this.transaction(),!0),u=xs(t),c=xs(n),f=await this.findInode(s,u.dir,"rename"),h=si((r=await s.get(f.data))!==null&&r!==void 0?r:lr(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const p=h[u.base];if(p!=this._ids.get(t)&&_i(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(st.EBUSY,u.dir);const g=c.dir==u.dir,v=g?f:await this.findInode(s,c.dir,"rename"),b=g?h:si((a=await s.get(v.data))!==null&&a!==void 0?a:lr(Ue.With("ENODATA",c.dir,"rename")));if(b[c.base]){const _=new ia((i=await s.get(b[c.base]))!==null&&i!==void 0?i:lr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(b[c.base])}b[c.base]=p,await s.set(f.data,lo(h)),await s.set(v.data,lo(b)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Cr(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Er(o,this.transaction(),!1),u=xs(t),c=xs(n),f=this.findInodeSync(s,u.dir,"rename"),h=si((r=s.getSync(f.data))!==null&&r!==void 0?r:lr(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const p=h[u.base];if(p!=this._ids.get(t)&&_i(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(st.EBUSY,u.dir);const g=c.dir===u.dir,v=g?f:this.findInodeSync(s,c.dir,"rename"),b=g?h:si((a=s.getSync(v.data))!==null&&a!==void 0?a:lr(Ue.With("ENODATA",c.dir,"rename")));if(b[c.base]){const _=new ia((i=s.getSync(b[c.base]))!==null&&i!==void 0?i:lr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(b[c.base])}b[c.base]=p,s.setSync(f.data,lo(h)),s.setSync(v.data,lo(b)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Cr(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Er(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Cr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Er(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Cr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Er(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Pa(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Cr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Er(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Pa(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Cr(r)}}async createFile(t,n){return n.mode|=Uo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=Uo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=oa,await this.commitNew(t,n,Jc("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=oa,this.commitNewSync(t,n,Jc("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Er(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(si((n=await a.get(i.data))!==null&&n!==void 0?n:lr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Cr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Er(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(si((n=a.getSync(i.data))!==null&&n!==void 0?n:lr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Cr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Er(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,Pa(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Cr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Er(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,Pa(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Cr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Er(a,this.transaction(),!0),o=Xn(n),s=await this.findInode(i,o,"link"),u=si((r=await i.get(s.data))!==null&&r!==void 0?r:lr(Ue.With("ENOENT",o,"link"))),c=await this.findInode(i,t,"link");c.nlink++,u[Jf(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,Pa(c)),await i.set(s.data,lo(u)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Cr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Er(a,this.transaction(),!1),o=Xn(n),s=this.findInodeSync(i,o,"link"),u=si((r=i.getSync(s.data))!==null&&r!==void 0?r:lr(Ue.With("ENOENT",o,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,u[Jf(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,Pa(c)),i.setSync(s.data,lo(u)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Cr(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Er(o,this.transaction(),!0),u=await this.findInode(s,t,"read");if(u.size==0)return;const c=(i=await s.get(u.data,r,a))!==null&&i!==void 0?i:lr(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&_i(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{const s=Cr(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Er(o,this.transaction(),!1),u=this.findInodeSync(s,t,"read");if(u.size==0)return;const c=(i=s.getSync(u.data,r,a))!==null&&i!==void 0?i:lr(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&_i(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{Cr(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Er(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let u=n;o.flag("partial")||(u=Dm((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),await o.set(s.data,u,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Cr(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Er(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let u=n;o.flag("partial")||(u=Dm((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),o.setSync(s.data,u,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Cr(i)}}transaction(){return new iY(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Er(t,this.transaction(),!0);if(await n.get(zi))return;const r=new ia({ino:zi,data:1,mode:511|oa});await n.set(r.data,Jc("{}")),this._add(zi,"/"),await n.set(zi,Pa(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Cr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Er(t,this.transaction(),!1);if(n.getSync(zi))return;const r=new ia({ino:zi,data:1,mode:511|oa});n.setSync(r.data,Jc("{}")),this._add(zi,"/"),n.setSync(zi,Pa(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Cr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Ka("Attempted to populate tables after initialization");return}gm("Populating tables with existing store metadata");const n=Er(t,this.transaction(),!0),r=await n.get(zi);if(!r){$C("Store does not have a root inode");const s=new ia({ino:zi,data:1,mode:511|oa});await n.set(s.data,Jc("{}")),this._add(zi,"/"),await n.set(zi,Pa(s)),await n.commit();return}if(r.length<jr(ia)){hw("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",zi]];for(;o.length>0;){i++;const[s,u]=o.shift();this._add(u,s);const c=await n.get(u);if(!c){Ka("Store is missing data for inode: "+u);continue}if(c.length<jr(ia)){Ka(`Invalid inode size for ino ${u}: ${c.length}`);continue}const f=new ia(c);if((f.mode&oa)!=oa||a.has(u))continue;a.add(u);const h=await n.get(f.data);if(!h){Ka("Store is missing directory data: "+f.data);continue}const p=si(h);for(const[g,v]of Object.entries(p))o.push([tr(s,g),v])}gm(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Cr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ia((a=await t.get(i))!==null&&a!==void 0?a:lr(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ia((a=t.getSync(i))!==null&&a!==void 0?a:lr(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>di)throw _i(new Ue(st.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Er(o,this.transaction(),!0),{dir:u,base:c}=xs(t),f=await this.findInode(s,u,a),h=si((i=await s.get(f.data))!==null&&i!==void 0?i:lr(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new ia({...n,ino:p,data:p+1,size:r.byteLength});return await s.set(g.ino,Pa(g)),await s.set(g.data,r),h[c]=g.ino,await s.set(f.data,lo(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Cr(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Er(o,this.transaction(),!1),{dir:u,base:c}=xs(t),f=this.findInodeSync(s,u,a),h=si((i=s.getSync(f.data))!==null&&i!==void 0?i:lr(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new ia({...n,ino:p,data:p+1,size:r.byteLength});return s.setSync(g.ino,Pa(g)),s.setSync(g.data,r),h[c]=g.ino,s.setSync(f.data,lo(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Cr(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Er(i,this.transaction(),!0),{dir:u,base:c}=xs(t),f=await this.findInode(s,u,o),h=si((r=await s.get(f.data))!==null&&r!==void 0?r:lr(Ue.With("ENOENT",u,o)));if(!h[c])throw Ue.With("ENOENT",t,o);const p=h[c],g=new ia((a=await s.get(p))!==null&&a!==void 0?a:lr(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Wo(g))throw Ue.With("EISDIR",t,o);await s.set(f.data,lo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,Pa(g))):(await s.remove(g.data),await s.remove(p),this._remove(p)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Cr(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Er(i,this.transaction(),!1),{dir:u,base:c}=xs(t),f=this.findInodeSync(s,u,o),h=si((r=s.getSync(f.data))!==null&&r!==void 0?r:lr(Ue.With("ENOENT",u,o))),p=h[c];if(!p)throw Ue.With("ENOENT",t,o);const g=new ia((a=s.getSync(p))!==null&&a!==void 0?a:lr(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Wo(g))throw Ue.With("EISDIR",t,o);s.setSync(f.data,lo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,Pa(g))):(s.removeSync(g.data),s.removeSync(p),this._remove(p)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Cr(i)}}}class oY extends aY{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class sY extends Map{constructor(t=di,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new oY(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const lY={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new bj(new sY(e,t));return n.checkRootSync(),n}},uY=lY;let ga=!0;var VC={},bw={};bw.byteLength=fY;bw.toByteArray=pY;bw.fromByteArray=yY;var Cs=[],po=[],cY=typeof Uint8Array<"u"?Uint8Array:Array,Fx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var xf=0,dY=Fx.length;xf<dY;++xf)Cs[xf]=Fx[xf],po[Fx.charCodeAt(xf)]=xf;po[45]=62;po[95]=63;function vj(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function fY(e){var t=vj(e),n=t[0],r=t[1];return(n+r)*3/4-r}function hY(e,t,n){return(t+n)*3/4-n}function pY(e){var t,n=vj(e),r=n[0],a=n[1],i=new cY(hY(e,r,a)),o=0,s=a>0?r-4:r,u;for(u=0;u<s;u+=4)t=po[e.charCodeAt(u)]<<18|po[e.charCodeAt(u+1)]<<12|po[e.charCodeAt(u+2)]<<6|po[e.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=po[e.charCodeAt(u)]<<2|po[e.charCodeAt(u+1)]>>4,i[o++]=t&255),a===1&&(t=po[e.charCodeAt(u)]<<10|po[e.charCodeAt(u+1)]<<4|po[e.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function mY(e){return Cs[e>>18&63]+Cs[e>>12&63]+Cs[e>>6&63]+Cs[e&63]}function gY(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(mY(r));return a.join("")}function yY(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(gY(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(Cs[t>>2]+Cs[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(Cs[t>>10]+Cs[t>>4&63]+Cs[t<<2&63]+"=")),a.join("")}var GC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */GC.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,u=(1<<s)-1,c=u>>1,f=-7,h=n?a-1:0,p=n?-1:1,g=e[t+h];for(h+=p,i=g&(1<<-f)-1,g>>=-f,f+=s;f>0;i=i*256+e[t+h],h+=p,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+e[t+h],h+=p,f-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(g?-1:1)*o*Math.pow(2,i-r)};GC.write=function(e,t,n,r,a,i){var o,s,u,c=i*8-a-1,f=(1<<c)-1,h=f>>1,p=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=p/u:t+=p*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=v,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[n+g]=o&255,g+=v,o/=256,c-=8);e[n+g-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=bw,n=GC,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;f.TYPED_ARRAY_SUPPORT=u(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const ge=new i(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,i.prototype),Object.setPrototypeOf(ge,I),ge.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(ge){if(ge>a)throw new RangeError('The value "'+ge+'" is invalid for option "size"');const I=new i(ge);return Object.setPrototypeOf(I,f.prototype),I}function f(ge,I,H){if(typeof ge=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ge)}return h(ge,I,H)}f.poolSize=8192;function h(ge,I,H){if(typeof ge=="string")return b(ge,I);if(o.isView(ge))return x(ge);if(ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge);if(ht(ge,o)||ge&&ht(ge.buffer,o)||typeof s<"u"&&(ht(ge,s)||ge&&ht(ge.buffer,s)))return S(ge,I,H);if(typeof ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=ge.valueOf&&ge.valueOf();if(fe!=null&&fe!==ge)return f.from(fe,I,H);const Oe=E(ge);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ge[Symbol.toPrimitive]=="function")return f.from(ge[Symbol.toPrimitive]("string"),I,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge)}f.from=function(ge,I,H){return h(ge,I,H)},Object.setPrototypeOf(f.prototype,i.prototype),Object.setPrototypeOf(f,i);function p(ge){if(typeof ge!="number")throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function g(ge,I,H){return p(ge),ge<=0?c(ge):I!==void 0?typeof H=="string"?c(ge).fill(I,H):c(ge).fill(I):c(ge)}f.alloc=function(ge,I,H){return g(ge,I,H)};function v(ge){return p(ge),c(ge<0?0:C(ge)|0)}f.allocUnsafe=function(ge){return v(ge)},f.allocUnsafeSlow=function(ge){return v(ge)};function b(ge,I){if((typeof I!="string"||I==="")&&(I="utf8"),!f.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const H=O(ge,I)|0;let fe=c(H);const Oe=fe.write(ge,I);return Oe!==H&&(fe=fe.slice(0,Oe)),fe}function _(ge){const I=ge.length<0?0:C(ge.length)|0,H=c(I);for(let fe=0;fe<I;fe+=1)H[fe]=ge[fe]&255;return H}function x(ge){if(ht(ge,i)){const I=new i(ge);return S(I.buffer,I.byteOffset,I.byteLength)}return _(ge)}function S(ge,I,H){if(I<0||ge.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<I+(H||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return I===void 0&&H===void 0?fe=new i(ge):H===void 0?fe=new i(ge,I):fe=new i(ge,I,H),Object.setPrototypeOf(fe,f.prototype),fe}function E(ge){if(f.isBuffer(ge)){const I=C(ge.length)|0,H=c(I);return H.length===0||ge.copy(H,0,0,I),H}if(ge.length!==void 0)return typeof ge.length!="number"||Et(ge.length)?c(0):_(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return _(ge.data)}function C(ge){if(ge>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ge|0}function k(ge){return+ge!=ge&&(ge=0),f.alloc(+ge)}f.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==f.prototype},f.compare=function(I,H){if(ht(I,i)&&(I=f.from(I,I.offset,I.byteLength)),ht(H,i)&&(H=f.from(H,H.offset,H.byteLength)),!f.isBuffer(I)||!f.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===H)return 0;let fe=I.length,Oe=H.length;for(let ve=0,ke=Math.min(fe,Oe);ve<ke;++ve)if(I[ve]!==H[ve]){fe=I[ve],Oe=H[ve];break}return fe<Oe?-1:Oe<fe?1:0},f.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(I,H){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return f.alloc(0);let fe;if(H===void 0)for(H=0,fe=0;fe<I.length;++fe)H+=I[fe].length;const Oe=f.allocUnsafe(H);let ve=0;for(fe=0;fe<I.length;++fe){let ke=I[fe];if(ht(ke,i))ve+ke.length>Oe.length?(f.isBuffer(ke)||(ke=f.from(ke)),ke.copy(Oe,ve)):i.prototype.set.call(Oe,ke,ve);else if(f.isBuffer(ke))ke.copy(Oe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=ke.length}return Oe};function O(ge,I){if(f.isBuffer(ge))return ge.length;if(o.isView(ge)||ht(ge,o))return ge.byteLength;if(typeof ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ge);const H=ge.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&H===0)return 0;let Oe=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return xe(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H*2;case"hex":return H>>>1;case"base64":return Ve(ge).length;default:if(Oe)return fe?-1:xe(ge).length;I=(""+I).toLowerCase(),Oe=!0}}f.byteLength=O;function N(ge,I,H){let fe=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((H===void 0||H>this.length)&&(H=this.length),H<=0)||(H>>>=0,I>>>=0,H<=I))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return Y(this,I,H);case"utf8":case"utf-8":return ne(this,I,H);case"ascii":return G(this,I,H);case"latin1":case"binary":return X(this,I,H);case"base64":return ie(this,I,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,I,H);default:if(fe)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),fe=!0}}f.prototype._isBuffer=!0;function D(ge,I,H){const fe=ge[I];ge[I]=ge[H],ge[H]=fe}f.prototype.swap16=function(){const I=this.length;if(I%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let H=0;H<I;H+=2)D(this,H,H+1);return this},f.prototype.swap32=function(){const I=this.length;if(I%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let H=0;H<I;H+=4)D(this,H,H+3),D(this,H+1,H+2);return this},f.prototype.swap64=function(){const I=this.length;if(I%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let H=0;H<I;H+=8)D(this,H,H+7),D(this,H+1,H+6),D(this,H+2,H+5),D(this,H+3,H+4);return this},f.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?ne(this,0,I):N.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(I){if(!f.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:f.compare(this,I)===0},f.prototype.inspect=function(){let I="";const H=e.INSPECT_MAX_BYTES;return I=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(I+=" ... "),"<Buffer "+I+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(I,H,fe,Oe,ve){if(ht(I,i)&&(I=f.from(I,I.offset,I.byteLength)),!f.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(H===void 0&&(H=0),fe===void 0&&(fe=I?I.length:0),Oe===void 0&&(Oe=0),ve===void 0&&(ve=this.length),H<0||fe>I.length||Oe<0||ve>this.length)throw new RangeError("out of range index");if(Oe>=ve&&H>=fe)return 0;if(Oe>=ve)return-1;if(H>=fe)return 1;if(H>>>=0,fe>>>=0,Oe>>>=0,ve>>>=0,this===I)return 0;let ke=ve-Oe,le=fe-H;const ct=Math.min(ke,le),yt=this.slice(Oe,ve),M=I.slice(H,fe);for(let Be=0;Be<ct;++Be)if(yt[Be]!==M[Be]){ke=yt[Be],le=M[Be];break}return ke<le?-1:le<ke?1:0};function U(ge,I,H,fe,Oe){if(ge.length===0)return-1;if(typeof H=="string"?(fe=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),H=+H,Et(H)&&(H=Oe?0:ge.length-1),H<0&&(H=ge.length+H),H>=ge.length){if(Oe)return-1;H=ge.length-1}else if(H<0)if(Oe)H=0;else return-1;if(typeof I=="string"&&(I=f.from(I,fe)),f.isBuffer(I))return I.length===0?-1:W(ge,I,H,fe,Oe);if(typeof I=="number")return I=I&255,typeof i.prototype.indexOf=="function"?Oe?i.prototype.indexOf.call(ge,I,H):i.prototype.lastIndexOf.call(ge,I,H):W(ge,[I],H,fe,Oe);throw new TypeError("val must be string, number or Buffer")}function W(ge,I,H,fe,Oe){let ve=1,ke=ge.length,le=I.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(ge.length<2||I.length<2)return-1;ve=2,ke/=2,le/=2,H/=2}function ct(M,Be){return ve===1?M[Be]:M.readUInt16BE(Be*ve)}let yt;if(Oe){let M=-1;for(yt=H;yt<ke;yt++)if(ct(ge,yt)===ct(I,M===-1?0:yt-M)){if(M===-1&&(M=yt),yt-M+1===le)return M*ve}else M!==-1&&(yt-=yt-M),M=-1}else for(H+le>ke&&(H=ke-le),yt=H;yt>=0;yt--){let M=!0;for(let Be=0;Be<le;Be++)if(ct(ge,yt+Be)!==ct(I,Be)){M=!1;break}if(M)return yt}return-1}f.prototype.includes=function(I,H,fe){return this.indexOf(I,H,fe)!==-1},f.prototype.indexOf=function(I,H,fe){return U(this,I,H,fe,!0)},f.prototype.lastIndexOf=function(I,H,fe){return U(this,I,H,fe,!1)};function Q(ge,I,H,fe){H=Number(H)||0;const Oe=ge.length-H;fe?(fe=Number(fe),fe>Oe&&(fe=Oe)):fe=Oe;const ve=I.length;fe>ve/2&&(fe=ve/2);let ke;for(ke=0;ke<fe;++ke){const le=parseInt(I.substr(ke*2,2),16);if(Et(le))return ke;ge[H+ke]=le}return ke}function F(ge,I,H,fe){return xt(xe(I,ge.length-H),ge,H,fe)}function Z(ge,I,H,fe){return xt(Le(I),ge,H,fe)}function L(ge,I,H,fe){return xt(Ve(I),ge,H,fe)}function he(ge,I,H,fe){return xt(Se(I,ge.length-H),ge,H,fe)}f.prototype.write=function(I,H,fe,Oe){if(H===void 0)Oe="utf8",fe=this.length,H=0;else if(fe===void 0&&typeof H=="string")Oe=H,fe=this.length,H=0;else if(isFinite(H))H=H>>>0,isFinite(fe)?(fe=fe>>>0,Oe===void 0&&(Oe="utf8")):(Oe=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ve=this.length-H;if((fe===void 0||fe>ve)&&(fe=ve),I.length>0&&(fe<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let ke=!1;for(;;)switch(Oe){case"hex":return Q(this,I,H,fe);case"utf8":case"utf-8":return F(this,I,H,fe);case"ascii":case"latin1":case"binary":return Z(this,I,H,fe);case"base64":return L(this,I,H,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,I,H,fe);default:if(ke)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),ke=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(ge,I,H){return I===0&&H===ge.length?t.fromByteArray(ge):t.fromByteArray(ge.slice(I,H))}function ne(ge,I,H){H=Math.min(ge.length,H);const fe=[];let Oe=I;for(;Oe<H;){const ve=ge[Oe];let ke=null,le=ve>239?4:ve>223?3:ve>191?2:1;if(Oe+le<=H){let ct,yt,M,Be;switch(le){case 1:ve<128&&(ke=ve);break;case 2:ct=ge[Oe+1],(ct&192)===128&&(Be=(ve&31)<<6|ct&63,Be>127&&(ke=Be));break;case 3:ct=ge[Oe+1],yt=ge[Oe+2],(ct&192)===128&&(yt&192)===128&&(Be=(ve&15)<<12|(ct&63)<<6|yt&63,Be>2047&&(Be<55296||Be>57343)&&(ke=Be));break;case 4:ct=ge[Oe+1],yt=ge[Oe+2],M=ge[Oe+3],(ct&192)===128&&(yt&192)===128&&(M&192)===128&&(Be=(ve&15)<<18|(ct&63)<<12|(yt&63)<<6|M&63,Be>65535&&Be<1114112&&(ke=Be))}}ke===null?(ke=65533,le=1):ke>65535&&(ke-=65536,fe.push(ke>>>10&1023|55296),ke=56320|ke&1023),fe.push(ke),Oe+=le}return se(fe)}const ee=4096;function se(ge){const I=ge.length;if(I<=ee)return String.fromCharCode.apply(String,ge);let H="",fe=0;for(;fe<I;)H+=String.fromCharCode.apply(String,ge.slice(fe,fe+=ee));return H}function G(ge,I,H){let fe="";H=Math.min(ge.length,H);for(let Oe=I;Oe<H;++Oe)fe+=String.fromCharCode(ge[Oe]&127);return fe}function X(ge,I,H){let fe="";H=Math.min(ge.length,H);for(let Oe=I;Oe<H;++Oe)fe+=String.fromCharCode(ge[Oe]);return fe}function Y(ge,I,H){const fe=ge.length;(!I||I<0)&&(I=0),(!H||H<0||H>fe)&&(H=fe);let Oe="";for(let ve=I;ve<H;++ve)Oe+=Pt[ge[ve]];return Oe}function re(ge,I,H){const fe=ge.slice(I,H);let Oe="";for(let ve=0;ve<fe.length-1;ve+=2)Oe+=String.fromCharCode(fe[ve]+fe[ve+1]*256);return Oe}f.prototype.slice=function(I,H){const fe=this.length;I=~~I,H=H===void 0?fe:~~H,I<0?(I+=fe,I<0&&(I=0)):I>fe&&(I=fe),H<0?(H+=fe,H<0&&(H=0)):H>fe&&(H=fe),H<I&&(H=I);const Oe=this.subarray(I,H);return Object.setPrototypeOf(Oe,f.prototype),Oe};function be(ge,I,H){if(ge%1!==0||ge<0)throw new RangeError("offset is not uint");if(ge+I>H)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(I,H,fe){I=I>>>0,H=H>>>0,fe||be(I,H,this.length);let Oe=this[I],ve=1,ke=0;for(;++ke<H&&(ve*=256);)Oe+=this[I+ke]*ve;return Oe},f.prototype.readUintBE=f.prototype.readUIntBE=function(I,H,fe){I=I>>>0,H=H>>>0,fe||be(I,H,this.length);let Oe=this[I+--H],ve=1;for(;H>0&&(ve*=256);)Oe+=this[I+--H]*ve;return Oe},f.prototype.readUint8=f.prototype.readUInt8=function(I,H){return I=I>>>0,H||be(I,1,this.length),this[I]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(I,H){return I=I>>>0,H||be(I,2,this.length),this[I]|this[I+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(I,H){return I=I>>>0,H||be(I,2,this.length),this[I]<<8|this[I+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(I,H){return I=I>>>0,H||be(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+this[I+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(I,H){return I=I>>>0,H||be(I,4,this.length),this[I]*16777216+(this[I+1]<<16|this[I+2]<<8|this[I+3])},f.prototype.readBigUInt64LE=Tt(function(I){I=I>>>0,Ne(I,"offset");const H=this[I],fe=this[I+7];(H===void 0||fe===void 0)&&ce(I,this.length-8);const Oe=H+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24,ve=this[++I]+this[++I]*2**8+this[++I]*2**16+fe*2**24;return BigInt(Oe)+(BigInt(ve)<<BigInt(32))}),f.prototype.readBigUInt64BE=Tt(function(I){I=I>>>0,Ne(I,"offset");const H=this[I],fe=this[I+7];(H===void 0||fe===void 0)&&ce(I,this.length-8);const Oe=H*2**24+this[++I]*2**16+this[++I]*2**8+this[++I],ve=this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+fe;return(BigInt(Oe)<<BigInt(32))+BigInt(ve)}),f.prototype.readIntLE=function(I,H,fe){I=I>>>0,H=H>>>0,fe||be(I,H,this.length);let Oe=this[I],ve=1,ke=0;for(;++ke<H&&(ve*=256);)Oe+=this[I+ke]*ve;return ve*=128,Oe>=ve&&(Oe-=Math.pow(2,8*H)),Oe},f.prototype.readIntBE=function(I,H,fe){I=I>>>0,H=H>>>0,fe||be(I,H,this.length);let Oe=H,ve=1,ke=this[I+--Oe];for(;Oe>0&&(ve*=256);)ke+=this[I+--Oe]*ve;return ve*=128,ke>=ve&&(ke-=Math.pow(2,8*H)),ke},f.prototype.readInt8=function(I,H){return I=I>>>0,H||be(I,1,this.length),this[I]&128?(255-this[I]+1)*-1:this[I]},f.prototype.readInt16LE=function(I,H){I=I>>>0,H||be(I,2,this.length);const fe=this[I]|this[I+1]<<8;return fe&32768?fe|4294901760:fe},f.prototype.readInt16BE=function(I,H){I=I>>>0,H||be(I,2,this.length);const fe=this[I+1]|this[I]<<8;return fe&32768?fe|4294901760:fe},f.prototype.readInt32LE=function(I,H){return I=I>>>0,H||be(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},f.prototype.readInt32BE=function(I,H){return I=I>>>0,H||be(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},f.prototype.readBigInt64LE=Tt(function(I){I=I>>>0,Ne(I,"offset");const H=this[I],fe=this[I+7];(H===void 0||fe===void 0)&&ce(I,this.length-8);const Oe=this[I+4]+this[I+5]*2**8+this[I+6]*2**16+(fe<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(H+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24)}),f.prototype.readBigInt64BE=Tt(function(I){I=I>>>0,Ne(I,"offset");const H=this[I],fe=this[I+7];(H===void 0||fe===void 0)&&ce(I,this.length-8);const Oe=(H<<24)+this[++I]*2**16+this[++I]*2**8+this[++I];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+fe)}),f.prototype.readFloatLE=function(I,H){return I=I>>>0,H||be(I,4,this.length),n.read(this,I,!0,23,4)},f.prototype.readFloatBE=function(I,H){return I=I>>>0,H||be(I,4,this.length),n.read(this,I,!1,23,4)},f.prototype.readDoubleLE=function(I,H){return I=I>>>0,H||be(I,8,this.length),n.read(this,I,!0,52,8)},f.prototype.readDoubleBE=function(I,H){return I=I>>>0,H||be(I,8,this.length),n.read(this,I,!1,52,8)};function we(ge,I,H,fe,Oe,ve){if(!f.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>Oe||I<ve)throw new RangeError('"value" argument is out of bounds');if(H+fe>ge.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(I,H,fe,Oe){if(I=+I,H=H>>>0,fe=fe>>>0,!Oe){const le=Math.pow(2,8*fe)-1;we(this,I,H,fe,le,0)}let ve=1,ke=0;for(this[H]=I&255;++ke<fe&&(ve*=256);)this[H+ke]=I/ve&255;return H+fe},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(I,H,fe,Oe){if(I=+I,H=H>>>0,fe=fe>>>0,!Oe){const le=Math.pow(2,8*fe)-1;we(this,I,H,fe,le,0)}let ve=fe-1,ke=1;for(this[H+ve]=I&255;--ve>=0&&(ke*=256);)this[H+ve]=I/ke&255;return H+fe},f.prototype.writeUint8=f.prototype.writeUInt8=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,1,255,0),this[H]=I&255,H+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,2,65535,0),this[H]=I&255,this[H+1]=I>>>8,H+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,2,65535,0),this[H]=I>>>8,this[H+1]=I&255,H+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,4,4294967295,0),this[H+3]=I>>>24,this[H+2]=I>>>16,this[H+1]=I>>>8,this[H]=I&255,H+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,4,4294967295,0),this[H]=I>>>24,this[H+1]=I>>>16,this[H+2]=I>>>8,this[H+3]=I&255,H+4};function Me(ge,I,H,fe,Oe){Ce(I,fe,Oe,ge,H,7);let ve=Number(I&BigInt(4294967295));ge[H++]=ve,ve=ve>>8,ge[H++]=ve,ve=ve>>8,ge[H++]=ve,ve=ve>>8,ge[H++]=ve;let ke=Number(I>>BigInt(32)&BigInt(4294967295));return ge[H++]=ke,ke=ke>>8,ge[H++]=ke,ke=ke>>8,ge[H++]=ke,ke=ke>>8,ge[H++]=ke,H}function Pe(ge,I,H,fe,Oe){Ce(I,fe,Oe,ge,H,7);let ve=Number(I&BigInt(4294967295));ge[H+7]=ve,ve=ve>>8,ge[H+6]=ve,ve=ve>>8,ge[H+5]=ve,ve=ve>>8,ge[H+4]=ve;let ke=Number(I>>BigInt(32)&BigInt(4294967295));return ge[H+3]=ke,ke=ke>>8,ge[H+2]=ke,ke=ke>>8,ge[H+1]=ke,ke=ke>>8,ge[H]=ke,H+8}f.prototype.writeBigUInt64LE=Tt(function(I,H=0){return Me(this,I,H,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Tt(function(I,H=0){return Pe(this,I,H,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(I,H,fe,Oe){if(I=+I,H=H>>>0,!Oe){const ct=Math.pow(2,8*fe-1);we(this,I,H,fe,ct-1,-ct)}let ve=0,ke=1,le=0;for(this[H]=I&255;++ve<fe&&(ke*=256);)I<0&&le===0&&this[H+ve-1]!==0&&(le=1),this[H+ve]=(I/ke>>0)-le&255;return H+fe},f.prototype.writeIntBE=function(I,H,fe,Oe){if(I=+I,H=H>>>0,!Oe){const ct=Math.pow(2,8*fe-1);we(this,I,H,fe,ct-1,-ct)}let ve=fe-1,ke=1,le=0;for(this[H+ve]=I&255;--ve>=0&&(ke*=256);)I<0&&le===0&&this[H+ve+1]!==0&&(le=1),this[H+ve]=(I/ke>>0)-le&255;return H+fe},f.prototype.writeInt8=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,1,127,-128),I<0&&(I=255+I+1),this[H]=I&255,H+1},f.prototype.writeInt16LE=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,2,32767,-32768),this[H]=I&255,this[H+1]=I>>>8,H+2},f.prototype.writeInt16BE=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,2,32767,-32768),this[H]=I>>>8,this[H+1]=I&255,H+2},f.prototype.writeInt32LE=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,4,2147483647,-2147483648),this[H]=I&255,this[H+1]=I>>>8,this[H+2]=I>>>16,this[H+3]=I>>>24,H+4},f.prototype.writeInt32BE=function(I,H,fe){return I=+I,H=H>>>0,fe||we(this,I,H,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[H]=I>>>24,this[H+1]=I>>>16,this[H+2]=I>>>8,this[H+3]=I&255,H+4},f.prototype.writeBigInt64LE=Tt(function(I,H=0){return Me(this,I,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Tt(function(I,H=0){return Pe(this,I,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(ge,I,H,fe,Oe,ve){if(H+fe>ge.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function Te(ge,I,H,fe,Oe){return I=+I,H=H>>>0,Oe||Ae(ge,I,H,4),n.write(ge,I,H,fe,23,4),H+4}f.prototype.writeFloatLE=function(I,H,fe){return Te(this,I,H,!0,fe)},f.prototype.writeFloatBE=function(I,H,fe){return Te(this,I,H,!1,fe)};function qe(ge,I,H,fe,Oe){return I=+I,H=H>>>0,Oe||Ae(ge,I,H,8),n.write(ge,I,H,fe,52,8),H+8}f.prototype.writeDoubleLE=function(I,H,fe){return qe(this,I,H,!0,fe)},f.prototype.writeDoubleBE=function(I,H,fe){return qe(this,I,H,!1,fe)},f.prototype.copy=function(I,H,fe,Oe){if(!f.isBuffer(I))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!Oe&&Oe!==0&&(Oe=this.length),H>=I.length&&(H=I.length),H||(H=0),Oe>0&&Oe<fe&&(Oe=fe),Oe===fe||I.length===0||this.length===0)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),I.length-H<Oe-fe&&(Oe=I.length-H+fe);const ve=Oe-fe;return this===I&&typeof i.prototype.copyWithin=="function"?this.copyWithin(H,fe,Oe):i.prototype.set.call(I,this.subarray(fe,Oe),H),ve},f.prototype.fill=function(I,H,fe,Oe){if(typeof I=="string"){if(typeof H=="string"?(Oe=H,H=0,fe=this.length):typeof fe=="string"&&(Oe=fe,fe=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!f.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(I.length===1){const ke=I.charCodeAt(0);(Oe==="utf8"&&ke<128||Oe==="latin1")&&(I=ke)}}else typeof I=="number"?I=I&255:typeof I=="boolean"&&(I=Number(I));if(H<0||this.length<H||this.length<fe)throw new RangeError("Out of range index");if(fe<=H)return this;H=H>>>0,fe=fe===void 0?this.length:fe>>>0,I||(I=0);let ve;if(typeof I=="number")for(ve=H;ve<fe;++ve)this[ve]=I;else{const ke=f.isBuffer(I)?I:f.from(I,Oe),le=ke.length;if(le===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(ve=0;ve<fe-H;++ve)this[ve+H]=ke[ve%le]}return this};const it={};function Ie(ge,I,H){it[ge]=class extends H{constructor(){super(),Object.defineProperty(this,"message",{value:I.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ge}]`,this.stack,delete this.name}get code(){return ge}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${ge}]: ${this.message}`}}}Ie("ERR_BUFFER_OUT_OF_BOUNDS",function(ge){return ge?`${ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ie("ERR_INVALID_ARG_TYPE",function(ge,I){return`The "${ge}" argument must be of type number. Received type ${typeof I}`},TypeError),Ie("ERR_OUT_OF_RANGE",function(ge,I,H){let fe=`The value of "${ge}" is out of range.`,Oe=H;return Number.isInteger(H)&&Math.abs(H)>2**32?Oe=Re(String(H)):typeof H=="bigint"&&(Oe=String(H),(H>BigInt(2)**BigInt(32)||H<-(BigInt(2)**BigInt(32)))&&(Oe=Re(Oe)),Oe+="n"),fe+=` It must be ${I}. Received ${Oe}`,fe},RangeError);function Re(ge){let I="",H=ge.length;const fe=ge[0]==="-"?1:0;for(;H>=fe+4;H-=3)I=`_${ge.slice(H-3,H)}${I}`;return`${ge.slice(0,H)}${I}`}function z(ge,I,H){Ne(I,"offset"),(ge[I]===void 0||ge[I+H]===void 0)&&ce(I,ge.length-(H+1))}function Ce(ge,I,H,fe,Oe,ve){if(ge>H||ge<I){const ke=typeof I=="bigint"?"n":"";let le;throw I===0||I===BigInt(0)?le=`>= 0${ke} and < 2${ke} ** ${(ve+1)*8}${ke}`:le=`>= -(2${ke} ** ${(ve+1)*8-1}${ke}) and < 2 ** ${(ve+1)*8-1}${ke}`,new it.ERR_OUT_OF_RANGE("value",le,ge)}z(fe,Oe,ve)}function Ne(ge,I){if(typeof ge!="number")throw new it.ERR_INVALID_ARG_TYPE(I,"number",ge)}function ce(ge,I,H){throw Math.floor(ge)!==ge?(Ne(ge,H),new it.ERR_OUT_OF_RANGE("offset","an integer",ge)):I<0?new it.ERR_BUFFER_OUT_OF_BOUNDS:new it.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${I}`,ge)}const ae=/[^+/0-9A-Za-z-_]/g;function J(ge){if(ge=ge.split("=")[0],ge=ge.trim().replace(ae,""),ge.length<2)return"";for(;ge.length%4!==0;)ge=ge+"=";return ge}function xe(ge,I){I=I||1/0;let H;const fe=ge.length;let Oe=null;const ve=[];for(let ke=0;ke<fe;++ke){if(H=ge.charCodeAt(ke),H>55295&&H<57344){if(!Oe){if(H>56319){(I-=3)>-1&&ve.push(239,191,189);continue}else if(ke+1===fe){(I-=3)>-1&&ve.push(239,191,189);continue}Oe=H;continue}if(H<56320){(I-=3)>-1&&ve.push(239,191,189),Oe=H;continue}H=(Oe-55296<<10|H-56320)+65536}else Oe&&(I-=3)>-1&&ve.push(239,191,189);if(Oe=null,H<128){if((I-=1)<0)break;ve.push(H)}else if(H<2048){if((I-=2)<0)break;ve.push(H>>6|192,H&63|128)}else if(H<65536){if((I-=3)<0)break;ve.push(H>>12|224,H>>6&63|128,H&63|128)}else if(H<1114112){if((I-=4)<0)break;ve.push(H>>18|240,H>>12&63|128,H>>6&63|128,H&63|128)}else throw new Error("Invalid code point")}return ve}function Le(ge){const I=[];for(let H=0;H<ge.length;++H)I.push(ge.charCodeAt(H)&255);return I}function Se(ge,I){let H,fe,Oe;const ve=[];for(let ke=0;ke<ge.length&&!((I-=2)<0);++ke)H=ge.charCodeAt(ke),fe=H>>8,Oe=H%256,ve.push(Oe),ve.push(fe);return ve}function Ve(ge){return t.toByteArray(J(ge))}function xt(ge,I,H,fe){let Oe;for(Oe=0;Oe<fe&&!(Oe+H>=I.length||Oe>=ge.length);++Oe)I[Oe+H]=ge[Oe];return Oe}function ht(ge,I){return ge instanceof I||ge!=null&&ge.constructor!=null&&ge.constructor.name!=null&&ge.constructor.name===I.name}function Et(ge){return ge!==ge}const Pt=function(){const ge="0123456789abcdef",I=new Array(256);for(let H=0;H<16;++H){const fe=H*16;for(let Oe=0;Oe<16;++Oe)I[fe+Oe]=ge[H]+ge[Oe]}return I}();function Tt(ge){return typeof BigInt>"u"?Ut:ge}function Ut(){throw new Error("BigInt not supported")}})(VC);const Wt=VC.Buffer,Rr=VC.Buffer;class qN extends OC{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;uo(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;uo(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);Fy(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);Fy(this.output,0),uo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,uo(this.output,-a.length,0),uo(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;uo(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(uo(this.output,-this._cursor,0),uo(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);Fy(this.output,0),uo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,uo(this.output,-r.length,0),uo(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(Fy(this.output,0),uo(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Ka("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Ka("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function bY(e,t,n,r){return"input"in e?new qN(e.input,e.output,e.completer,e.terminal):new qN(e,t,n,r)}function Fy(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function uo(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Lb{get position(){return this.flag&sd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&yw||this.inode.flags&xi.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Wa||this.flag&Al))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&Wa||this.flag&Al))throw new Ue(st.EPERM,"File not opened with a writeable mode");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Fm(this.inode)&&!Pm(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Wa)throw new Ue(st.EPERM,"File not opened with a readable mode");this.inode.flags&xi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Fm(this.inode)&&!Pm(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>br?-61441:br)|t,(this._isSync||t>br)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,gj(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function $b(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:Qo.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function ti(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Qo.descriptors).get(t);if(!a)throw new Ue(st.EBADF);return a}function wj(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Qo.descriptors).delete(t)}const vY=/[rwasx]{1,2}\+?/;function Rl(e){if(typeof e=="number")return e;if(!vY.test(e))throw new Ue(st.EINVAL,"Invalid flag string: "+e);return wY(e)}function wY(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(st.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?aj:pw;return e.includes("w")&&(t|=gw),e.includes("a")&&(t|=sd),e.includes("+")?t|=Al:e.includes("r")||(t|=Wa),e.includes("s")&&(t|=yw),e.includes("x")&&(t|=mw),t}function _j(e){let t=0;return e&Wa||(t|=ma),(e&Wa||e&Al)&&(t|=Kr),t}const Lm=new Map;WC("/",uY.create({label:"root"}));function WC(e,t){if(e[0]!="/"&&(e="/"+e),e=jl.call(this,e),Lm.has(e))throw _i(new Ue(st.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Lm.set(e,t),nj(`Mounted ${t.name} on ${e}`),gm(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function xj(e){if(e[0]!="/"&&(e="/"+e),e=jl.call(this,e),!Lm.has(e)){Ka(e+" is already unmounted");return}Lm.delete(e),$C("Unmounted "+e)}function Pn(e,t){const n=(t==null?void 0:t.root)||Qo.root;e=ln(tr(n,e));const r=[...Lm].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(xY(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw EZ(new Ue(st.EIO,"No file system",e))}function Lx(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function ir(e,t){typeof e.stack=="string"&&(e.stack=Lx(e.stack,t));try{e.message=Lx(e.message,t)}catch{}return e.path&&(e.path=Lx(e.path,t)),e}function Sj(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||di),files:(t?BigInt:Number)(n.totalNodes||di),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function _Y(e){var t,n,r,a,i,o,s;const u=this!==null&&this!==void 0?this:Qo;if(((t=u.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=u.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=u.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=u.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(st.EPERM,"Can not chroot() as non-root user");(i=u.root)!==null&&i!==void 0||(u.root="/");const c=tr(u.root,e);for(const f of(s=(o=u.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!f.path.startsWith(u.root))throw Ue.With("EBUSY",f.path,"chroot");f.path=f.path.slice(u.root.length)}if(c.length>u.root.length)throw new Ue(st.EPERM,"Can not chroot() outside of current root");u.root=c}function xY(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class Ej extends OC{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class Cj extends Ej{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?tr(t.root,n):n,EY(this.realpath,this)}close(){super.emit("close"),CY(this.realpath,this)}[Symbol.dispose](){this.close()}}class SY extends Ej{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Ku(this.path);ZZ(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Ku(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Pu=new Map;function EY(e,t){const n=ln(e);Pu.has(n)||Pu.set(n,new Set),Pu.get(n).add(t)}function CY(e,t){const n=ln(e);Pu.has(n)&&(Pu.get(n).delete(t),Pu.get(n).size===0&&Pu.delete(n))}function La(e,t,n){var r;e&&(n=tr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=ln(n);for(let a=n;a!="/";a=Xn(a)){const i=Pu.get(a);if(i)for(const o of i)o.emit("change",t,tj.call(o._context,a,n)||Jf(n))}}var N0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},I0=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function kY(e,t){e=ln(e),t=ln(t);const n=Pn(e,this),r=Pn(t,this);if(!Ku.call(this,Xn(e)).hasAccess(Kr,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),La(this,"rename",e.toString()),La(this,"change",t.toString());return}JC.call(this,t,XC(e)),YC.call(this,e),La(this,"rename",e.toString())}catch(a){throw ir(a,{[n.path]:e,[r.path]:t})}}function KC(e){e=ln(e);try{const{fs:t,path:n}=Pn(fc.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==st.ENOENT)return!1;throw t}}function Ku(e,t){e=ln(e);const{fs:n,path:r}=Pn(fc.call(this,e),this);try{const a=n.statSync(r);if(ga&&!ar(this,a,ma))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new xd(a):new Hl(a)}catch(a){throw ir(a,{[r]:e})}}function ZC(e,t){e=ln(e);const{fs:n,path:r}=Pn(e,this);try{const a=n.statSync(r);if(ga&&!ar(this,a,ma))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new xd(a):new Hl(a)}catch(a){throw ir(a,{[r]:e})}}function AY(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=N0(n,Sd.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(st.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{I0(n)}}function YC(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{if(ga&&!ar(this,t.statSync(n),Kr))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),La(this,"rename",e.toString())}catch(r){throw ir(r,{[n]:e})}}function Sd(e,t){var n;e=ln(e);const r=dc(t.mode,420),a=Rl(t.flag);e=t.preserveSymlinks?e:fc.call(this,e);const{fs:i,path:o}=Pn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&pw))throw Ue.With("ENOENT",e,"_open");const c=i.statSync(Xn(o));if(!ar(this,c,Kr))throw Ue.With("EACCES",Xn(e),"_open");if(!Wo(c))throw Ue.With("ENOTDIR",Xn(e),"_open");if(!t.allowDirectory&&r&oa)throw Ue.With("EISDIR",e,"_open");if(!ar(this,c,Kr))throw Ue.With("EACCES",Xn(o),"_open");const{euid:f,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Qo.credentials,p=i.createFileSync(o,{mode:r,uid:c.mode&T0?c.uid:f,gid:c.mode&R0?c.gid:h});return new Lb(this,e,i,o,a,p)}if(!ar(this,s,r)||!ar(this,s,_j(a)))throw Ue.With("EACCES",e,"_open");if(a&mw)throw Ue.With("EEXIST",e,"_open");const u=new Lb(this,e,i,o,a,s);if(a&gw&&u.truncate(0),!t.allowDirectory&&s.mode&oa)throw Ue.With("EISDIR",e,"_open");return u}function vw(e,t,n=zC){return $b(Sd.call(this,e,{flag:t,mode:n}))}function ww(e,t,n){return $b(Sd.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function kj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=N0(r,typeof e=="number"?ti(this,e):Sd.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{I0(r)}}function XC(e,t={}){const n=Tl(t,null,"r",420);if(Rl(n.flag)&Wa)throw new Ue(st.EINVAL,"Flag passed to readFile must allow for reading");const a=Rr.from(kj.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function JC(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","w+",420),i=Rl(a.flag);if(!(i&Wa||i&Al))throw new Ue(st.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new Ue(st.EINVAL,"Data not specified");N0(r,typeof e=="number"?ti(this,e):Sd.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),La(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{I0(r)}}function TY(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","a+",420),i=Rl(a.flag);if(!(i&sd))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);N0(r,Sd.call(this,typeof e=="number"?ti(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{I0(r)}}function RY(e,t){const n=ti(this,e).stat();return t!=null&&t.bigint?new xd(n):new Hl(n)}function Ed(e){ti(this,e).close(),wj(this,e)}function NY(e,t=0){if(t||(t=0),t<0)throw new Ue(st.EINVAL);ti(this,e).truncate(t)}function IY(e){ti(this,e).sync()}function OY(e){ti(this,e).datasync()}function DY(e,t,n,r,a){let i,o,s,u;if(typeof t=="string"){u=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Rr.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,u=typeof a=="number"?a:null;const c=ti(this,e);u??(u=c.position);const f=c.write(i,o,s,u);return La(this,"change",c.path),f}function jY(e,t,n,r,a){const i=ti(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function QC(e,t,n){ti(this,e).chown(t,n)}function ek(e,t){const n=dc(t,-1);if(n<0)throw new Ue(st.EINVAL,"Invalid mode.");ti(this,e).chmod(n)}function tk(e,t,n){ti(this,e).utimes(Fb(t),Fb(n))}function Aj(e){e=ln(e);const{fs:t,path:n}=Pn(fc.call(this,e),this);try{const r=t.statSync(n);if(!Wo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ga&&!ar(this,r,Kr))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),La(this,"rename",e.toString())}catch(r){throw ir(r,{[n]:e})}}function nk(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Qo.credentials;t=typeof t=="object"?t:{mode:t};const o=dc(t==null?void 0:t.mode,511);e=fc.call(this,e);const{fs:s,path:u,root:c}=Pn(e,this),f={[u]:e},h=(p,g)=>{if(!ar(this,g,Kr))throw Ue.With("EACCES",Xn(p),"mkdir");const v=s.mkdirSync(p,{mode:o,uid:g.mode&T0?g.uid:a,gid:g.mode&R0?g.gid:i});return La(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){h(u,s.statSync(Xn(u)));return}const p=[];for(let v=u,b=e;!s.existsSync(v);v=Xn(v),b=Xn(b))p.unshift(v),f[v]=b;if(!p.length)return;const g=[s.statSync(Xn(p[0]))];for(const[v,b]of p.entries())g.push(h(b,g[v]));return c.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(c.length)}catch(p){throw ir(p,f)}}function Eh(e,t){t=typeof t=="object"?t:{encoding:t},e=ln(e);const{fs:n,path:r}=Pn(fc.call(this,e),this);let a;try{const o=n.statSync(r);if(ga&&!ar(this,o,ma))throw Ue.With("EACCES",r,"readdir");if(!Wo(o))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw ir(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(tr(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new $m(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Rr.from(o)):i.push(o),!(!Wo(s)||!(t!=null&&t.recursive)))for(const u of Eh.call(this,tr(e,o),t))u instanceof $m?(u.path=tr(o,u.path),i.push(u)):Rr.isBuffer(u)?i.push(Rr.from(tr(o,jC(u)))):i.push(tr(o,u))}return i}function MY(e,t){if(e=ln(e),!Ku(Xn(e)).hasAccess(ma,this))throw Ue.With("EACCES",Xn(e),"link");if(t=ln(t),!Ku(Xn(t)).hasAccess(Kr,this))throw Ue.With("EACCES",Xn(t),"link");const{fs:n,path:r}=Pn(e,this),a=Pn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ga&&!ar(this,n.statSync(r),ma))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw ir(i,{[r]:e,[a.path]:t})}}function PY(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(st.EINVAL,"Invalid type: "+n);t=ln(t);const a=N0(r,Sd.call(this,t,{flag:"wx",mode:420}),!1);a.write(Jc(ln(e,!0))),a.chmod(ql)}catch(a){r.error=a,r.hasError=!0}finally{I0(r)}}function rE(e,t){const n=Rr.from(kj.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function FY(e,t,n){const r=vw.call(this,e,"r+");QC.call(this,r,t,n),Ed.call(this,r)}function LY(e,t,n){const r=ww.call(this,e,"r+");QC.call(this,r,t,n),Ed.call(this,r)}function $Y(e,t){const n=vw.call(this,e,"r+");ek.call(this,n,t),Ed.call(this,n)}function BY(e,t){const n=ww.call(this,e,"r+");ek.call(this,n,t),Ed.call(this,n)}function Tj(e,t,n){const r=vw.call(this,e,"r+");tk.call(this,r,t,n),Ed.call(this,r)}function zY(e,t,n){const r=ww.call(this,e,"r+");tk.call(this,r,t,n),Ed.call(this,r)}function aE(e,t,n){try{const u=Pn(t,e),c=u.fs.statSync(u.path);if(!Qf(c))return{...u,fullPath:t,stats:c};const f=jl.call(e,Xn(t),rE.call(e,t).toString());return aE(e,f)}catch{}const{base:r,dir:a}=xs(t),i=a=="/"?"/":fc.call(e,a),o=tr(i,r),s=Pn(o,e);try{const u=s.fs.statSync(s.path);if(!Qf(u))return{...s,fullPath:o,stats:u};const c=jl.call(e,i,rE.call(e,o).toString());return aE(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw ir(u,{[s.path]:o})}}function fc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=aE(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Rr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function UY(e,t=384){if(!ar(this,Ku.call(this,e),t))throw new Ue(st.EACCES)}function Rj(e,t){e=ln(e);let n;try{n=ZC.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&br){case oa:if(t!=null&&t.recursive)for(const r of Eh.call(this,e))Rj.call(this,tr(e,r),t);Aj.call(this,e);break;case Uo:case ql:case vd:case wd:YC.call(this,e);break;case _d:case bd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}}function qY(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return nk.call(this,a),n=="buffer"?Rr.from(a):a}function Nj(e,t,n){if(e=ln(e),t=ln(t),n&&n&UC&&KC(t))throw new Ue(st.EEXIST,"Destination file already exists",t,"copyFile");JC.call(this,t,XC(e)),La(this,"rename",t.toString())}function HY(e,t,n){const r=ti(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function VY(e,t,n){const r=ti(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function GY(e,t){return e=ln(e),new rk(e,this)}function Ij(e,t,n){e=ln(e),t=ln(t);const r=ZC.call(this,e);if(n!=null&&n.errorOnExist&&KC.call(this,t))throw new Ue(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&br){case oa:if(!(n!=null&&n.recursive))throw new Ue(st.EISDIR,e+" is a directory (not copied)",e,"cp");nk.call(this,t,{recursive:!0});for(const a of Eh.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(tr(e,a.name),tr(t,a.name))||Ij.call(this,tr(e,a.name),tr(t,a.name),n);break;case Uo:case ql:Nj.call(this,e,t);break;case vd:case wd:case _d:case bd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&Tj.call(this,t,r.atime,r.mtime)}function WY(e,t){e=ln(e);const{fs:n}=Pn(e,this);return Sj(n,t==null?void 0:t.bigint)}function KY(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(u=>(u=u.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${u}$`))),o=[];function s(u){const c=Eh(u,{withFileTypes:r,encoding:"utf8"});for(const f of c){const h=r?f.path:u+"/"+f;a(r?f:h)||(Ku(h).isDirectory()&&i.some(p=>p.source.includes(".*"))&&s(h),i.some(p=>p.test(h.replace(/^\/+/g,"")))&&o.push(r?f.path:h.replace(/^\/+/g,"")))}}return s(n),o}class $m{get name(){return Jf(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return eY(this.stats)}isDirectory(){return Wo(this.stats)}isBlockDevice(){return Pm(this.stats)}isCharacterDevice(){return Fm(this.stats)}isSymbolicLink(){return Qf(this.stats)}isFIFO(){return nY(this.stats)}isSocket(){return tY(this.stats)}}class rk{checkClosed(){if(this.closed)throw new Ue(st.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await mc.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Eh.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var $x={exports:{}},Bx={exports:{}},zx={},HN;function hc(){return HN||(HN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=f,n.toByteArray=p,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function c(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var k=C===E?0:4-C%4;return[C,k]}function f(S){var E=c(S),C=E[0],k=E[1];return(C+k)*3/4-k}function h(S,E,C){return(E+C)*3/4-C}function p(S){var E,C=c(S),k=C[0],O=C[1],N=new i(h(S,k,O)),D=0,U=O>0?k-4:k,W;for(W=0;W<U;W+=4)E=a[S.charCodeAt(W)]<<18|a[S.charCodeAt(W+1)]<<12|a[S.charCodeAt(W+2)]<<6|a[S.charCodeAt(W+3)],N[D++]=E>>16&255,N[D++]=E>>8&255,N[D++]=E&255;return O===2&&(E=a[S.charCodeAt(W)]<<2|a[S.charCodeAt(W+1)]>>4,N[D++]=E&255),O===1&&(E=a[S.charCodeAt(W)]<<10|a[S.charCodeAt(W+1)]<<4|a[S.charCodeAt(W+2)]>>2,N[D++]=E>>8&255,N[D++]=E&255),N}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var k,O=[],N=E;N<C;N+=3)k=(S[N]<<16&16711680)+(S[N+1]<<8&65280)+(S[N+2]&255),O.push(g(k));return O.join("")}function b(S){for(var E,C=S.length,k=C%3,O=[],N=16383,D=0,U=C-k;D<U;D+=N)O.push(v(S,D,D+N>U?U:D+N));return k===1?(E=S[C-1],O.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(S[C-2]<<8)+S[C-1],O.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),O.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(S,E,C,k,O){var N,D,U=O*8-k-1,W=(1<<U)-1,Q=W>>1,F=-7,Z=C?O-1:0,L=C?-1:1,he=S[E+Z];for(Z+=L,N=he&(1<<-F)-1,he>>=-F,F+=U;F>0;N=N*256+S[E+Z],Z+=L,F-=8);for(D=N&(1<<-F)-1,N>>=-F,F+=k;F>0;D=D*256+S[E+Z],Z+=L,F-=8);if(N===0)N=1-Q;else{if(N===W)return D?NaN:(he?-1:1)*(1/0);D=D+Math.pow(2,k),N=N-Q}return(he?-1:1)*D*Math.pow(2,N-k)},_.write=function(S,E,C,k,O,N){var D,U,W,Q=N*8-O-1,F=(1<<Q)-1,Z=F>>1,L=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,he=k?0:N-1,ie=k?1:-1,ne=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(U=isNaN(E)?1:0,D=F):(D=Math.floor(Math.log(E)/Math.LN2),E*(W=Math.pow(2,-D))<1&&(D--,W*=2),D+Z>=1?E+=L/W:E+=L*Math.pow(2,1-Z),E*W>=2&&(D++,W/=2),D+Z>=F?(U=0,D=F):D+Z>=1?(U=(E*W-1)*Math.pow(2,O),D=D+Z):(U=E*Math.pow(2,Z-1)*Math.pow(2,O),D=0));O>=8;S[C+he]=U&255,he+=ie,U/=256,O-=8);for(D=D<<O|U,Q+=O;Q>0;S[C+he]=D&255,he+=ie,D/=256,Q-=8);S[C+he-ie]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=_,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=F,S.SlowBuffer=re,S.INSPECT_MAX_BYTES=50;const O=2147483647;S.kMaxLength=O;const{Uint8Array:N,ArrayBuffer:D,SharedArrayBuffer:U}=globalThis;F.TYPED_ARRAY_SUPPORT=W(),!F.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function W(){try{const q=new N(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,N.prototype),Object.setPrototypeOf(q,B),q.foo()===42}catch{return!1}}Object.defineProperty(F.prototype,"parent",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.buffer}}),Object.defineProperty(F.prototype,"offset",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.byteOffset}});function Q(q){if(q>O)throw new RangeError('The value "'+q+'" is invalid for option "size"');const B=new N(q);return Object.setPrototypeOf(B,F.prototype),B}function F(q,B,V){if(typeof q=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ie(q)}return Z(q,B,V)}F.poolSize=8192;function Z(q,B,V){if(typeof q=="string")return ne(q,B);if(D.isView(q))return se(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(me(q,D)||q&&me(q.buffer,D)||typeof U<"u"&&(me(q,U)||q&&me(q.buffer,U)))return G(q,B,V);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=q.valueOf&&q.valueOf();if(pe!=null&&pe!==q)return F.from(pe,B,V);const de=X(q);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return F.from(q[Symbol.toPrimitive]("string"),B,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}F.from=function(q,B,V){return Z(q,B,V)},Object.setPrototypeOf(F.prototype,N.prototype),Object.setPrototypeOf(F,N);function L(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function he(q,B,V){return L(q),q<=0?Q(q):B!==void 0?typeof V=="string"?Q(q).fill(B,V):Q(q).fill(B):Q(q)}F.alloc=function(q,B,V){return he(q,B,V)};function ie(q){return L(q),Q(q<0?0:Y(q)|0)}F.allocUnsafe=function(q){return ie(q)},F.allocUnsafeSlow=function(q){return ie(q)};function ne(q,B){if((typeof B!="string"||B==="")&&(B="utf8"),!F.isEncoding(B))throw new TypeError("Unknown encoding: "+B);const V=be(q,B)|0;let pe=Q(V);const de=pe.write(q,B);return de!==V&&(pe=pe.slice(0,de)),pe}function ee(q){const B=q.length<0?0:Y(q.length)|0,V=Q(B);for(let pe=0;pe<B;pe+=1)V[pe]=q[pe]&255;return V}function se(q){if(me(q,N)){const B=new N(q);return G(B.buffer,B.byteOffset,B.byteLength)}return ee(q)}function G(q,B,V){if(B<0||q.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<B+(V||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return B===void 0&&V===void 0?pe=new N(q):V===void 0?pe=new N(q,B):pe=new N(q,B,V),Object.setPrototypeOf(pe,F.prototype),pe}function X(q){if(F.isBuffer(q)){const B=Y(q.length)|0,V=Q(B);return V.length===0||q.copy(V,0,0,B),V}if(q.length!==void 0)return typeof q.length!="number"||De(q.length)?Q(0):ee(q);if(q.type==="Buffer"&&Array.isArray(q.data))return ee(q.data)}function Y(q){if(q>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return q|0}function re(q){return+q!=q&&(q=0),F.alloc(+q)}F.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==F.prototype},F.compare=function(B,V){if(me(B,N)&&(B=F.from(B,B.offset,B.byteLength)),me(V,N)&&(V=F.from(V,V.offset,V.byteLength)),!F.isBuffer(B)||!F.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===V)return 0;let pe=B.length,de=V.length;for(let Fe=0,ot=Math.min(pe,de);Fe<ot;++Fe)if(B[Fe]!==V[Fe]){pe=B[Fe],de=V[Fe];break}return pe<de?-1:de<pe?1:0},F.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},F.concat=function(B,V){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return F.alloc(0);let pe;if(V===void 0)for(V=0,pe=0;pe<B.length;++pe)V+=B[pe].length;const de=F.allocUnsafe(V);let Fe=0;for(pe=0;pe<B.length;++pe){let ot=B[pe];if(me(ot,N))Fe+ot.length>de.length?(F.isBuffer(ot)||(ot=F.from(ot)),ot.copy(de,Fe)):N.prototype.set.call(de,ot,Fe);else if(F.isBuffer(ot))ot.copy(de,Fe);else throw new TypeError('"list" argument must be an Array of Buffers');Fe+=ot.length}return de};function be(q,B){if(F.isBuffer(q))return q.length;if(D.isView(q)||me(q,D))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);const V=q.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&V===0)return 0;let de=!1;for(;;)switch(B){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return ct(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V*2;case"hex":return V>>>1;case"base64":return Be(q).length;default:if(de)return pe?-1:ct(q).length;B=(""+B).toLowerCase(),de=!0}}F.byteLength=be;function we(q,B,V){let pe=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0,B>>>=0,V<=B))return"";for(q||(q="utf8");;)switch(q){case"hex":return xe(this,B,V);case"utf8":case"utf-8":return Ce(this,B,V);case"ascii":return ae(this,B,V);case"latin1":case"binary":return J(this,B,V);case"base64":return z(this,B,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,B,V);default:if(pe)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),pe=!0}}F.prototype._isBuffer=!0;function Me(q,B,V){const pe=q[B];q[B]=q[V],q[V]=pe}F.prototype.swap16=function(){const B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let V=0;V<B;V+=2)Me(this,V,V+1);return this},F.prototype.swap32=function(){const B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let V=0;V<B;V+=4)Me(this,V,V+3),Me(this,V+1,V+2);return this},F.prototype.swap64=function(){const B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let V=0;V<B;V+=8)Me(this,V,V+7),Me(this,V+1,V+6),Me(this,V+2,V+5),Me(this,V+3,V+4);return this},F.prototype.toString=function(){const B=this.length;return B===0?"":arguments.length===0?Ce(this,0,B):we.apply(this,arguments)},F.prototype.toLocaleString=F.prototype.toString,F.prototype.equals=function(B){if(!F.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:F.compare(this,B)===0},F.prototype.inspect=function(){let B="";const V=S.INSPECT_MAX_BYTES;return B=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(B+=" ... "),"<Buffer "+B+">"},k&&(F.prototype[k]=F.prototype.inspect),F.prototype.compare=function(B,V,pe,de,Fe){if(me(B,N)&&(B=F.from(B,B.offset,B.byteLength)),!F.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(V===void 0&&(V=0),pe===void 0&&(pe=B?B.length:0),de===void 0&&(de=0),Fe===void 0&&(Fe=this.length),V<0||pe>B.length||de<0||Fe>this.length)throw new RangeError("out of range index");if(de>=Fe&&V>=pe)return 0;if(de>=Fe)return-1;if(V>=pe)return 1;if(V>>>=0,pe>>>=0,de>>>=0,Fe>>>=0,this===B)return 0;let ot=Fe-de,Dt=pe-V;const un=Math.min(ot,Dt),zt=this.slice(de,Fe),Vt=B.slice(V,pe);for(let Xt=0;Xt<un;++Xt)if(zt[Xt]!==Vt[Xt]){ot=zt[Xt],Dt=Vt[Xt];break}return ot<Dt?-1:Dt<ot?1:0};function Pe(q,B,V,pe,de){if(q.length===0)return-1;if(typeof V=="string"?(pe=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,De(V)&&(V=de?0:q.length-1),V<0&&(V=q.length+V),V>=q.length){if(de)return-1;V=q.length-1}else if(V<0)if(de)V=0;else return-1;if(typeof B=="string"&&(B=F.from(B,pe)),F.isBuffer(B))return B.length===0?-1:Ae(q,B,V,pe,de);if(typeof B=="number")return B=B&255,typeof N.prototype.indexOf=="function"?de?N.prototype.indexOf.call(q,B,V):N.prototype.lastIndexOf.call(q,B,V):Ae(q,[B],V,pe,de);throw new TypeError("val must be string, number or Buffer")}function Ae(q,B,V,pe,de){let Fe=1,ot=q.length,Dt=B.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(q.length<2||B.length<2)return-1;Fe=2,ot/=2,Dt/=2,V/=2}function un(Vt,Xt){return Fe===1?Vt[Xt]:Vt.readUInt16BE(Xt*Fe)}let zt;if(de){let Vt=-1;for(zt=V;zt<ot;zt++)if(un(q,zt)===un(B,Vt===-1?0:zt-Vt)){if(Vt===-1&&(Vt=zt),zt-Vt+1===Dt)return Vt*Fe}else Vt!==-1&&(zt-=zt-Vt),Vt=-1}else for(V+Dt>ot&&(V=ot-Dt),zt=V;zt>=0;zt--){let Vt=!0;for(let Xt=0;Xt<Dt;Xt++)if(un(q,zt+Xt)!==un(B,Xt)){Vt=!1;break}if(Vt)return zt}return-1}F.prototype.includes=function(B,V,pe){return this.indexOf(B,V,pe)!==-1},F.prototype.indexOf=function(B,V,pe){return Pe(this,B,V,pe,!0)},F.prototype.lastIndexOf=function(B,V,pe){return Pe(this,B,V,pe,!1)};function Te(q,B,V,pe){V=Number(V)||0;const de=q.length-V;pe?(pe=Number(pe),pe>de&&(pe=de)):pe=de;const Fe=B.length;pe>Fe/2&&(pe=Fe/2);let ot;for(ot=0;ot<pe;++ot){const Dt=parseInt(B.substr(ot*2,2),16);if(De(Dt))return ot;q[V+ot]=Dt}return ot}function qe(q,B,V,pe){return et(ct(B,q.length-V),q,V,pe)}function it(q,B,V,pe){return et(yt(B),q,V,pe)}function Ie(q,B,V,pe){return et(Be(B),q,V,pe)}function Re(q,B,V,pe){return et(M(B,q.length-V),q,V,pe)}F.prototype.write=function(B,V,pe,de){if(V===void 0)de="utf8",pe=this.length,V=0;else if(pe===void 0&&typeof V=="string")de=V,pe=this.length,V=0;else if(isFinite(V))V=V>>>0,isFinite(pe)?(pe=pe>>>0,de===void 0&&(de="utf8")):(de=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Fe=this.length-V;if((pe===void 0||pe>Fe)&&(pe=Fe),B.length>0&&(pe<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let ot=!1;for(;;)switch(de){case"hex":return Te(this,B,V,pe);case"utf8":case"utf-8":return qe(this,B,V,pe);case"ascii":case"latin1":case"binary":return it(this,B,V,pe);case"base64":return Ie(this,B,V,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,B,V,pe);default:if(ot)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),ot=!0}},F.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(q,B,V){return B===0&&V===q.length?E.fromByteArray(q):E.fromByteArray(q.slice(B,V))}function Ce(q,B,V){V=Math.min(q.length,V);const pe=[];let de=B;for(;de<V;){const Fe=q[de];let ot=null,Dt=Fe>239?4:Fe>223?3:Fe>191?2:1;if(de+Dt<=V){let un,zt,Vt,Xt;switch(Dt){case 1:Fe<128&&(ot=Fe);break;case 2:un=q[de+1],(un&192)===128&&(Xt=(Fe&31)<<6|un&63,Xt>127&&(ot=Xt));break;case 3:un=q[de+1],zt=q[de+2],(un&192)===128&&(zt&192)===128&&(Xt=(Fe&15)<<12|(un&63)<<6|zt&63,Xt>2047&&(Xt<55296||Xt>57343)&&(ot=Xt));break;case 4:un=q[de+1],zt=q[de+2],Vt=q[de+3],(un&192)===128&&(zt&192)===128&&(Vt&192)===128&&(Xt=(Fe&15)<<18|(un&63)<<12|(zt&63)<<6|Vt&63,Xt>65535&&Xt<1114112&&(ot=Xt))}}ot===null?(ot=65533,Dt=1):ot>65535&&(ot-=65536,pe.push(ot>>>10&1023|55296),ot=56320|ot&1023),pe.push(ot),de+=Dt}return ce(pe)}const Ne=4096;function ce(q){const B=q.length;if(B<=Ne)return String.fromCharCode.apply(String,q);let V="",pe=0;for(;pe<B;)V+=String.fromCharCode.apply(String,q.slice(pe,pe+=Ne));return V}function ae(q,B,V){let pe="";V=Math.min(q.length,V);for(let de=B;de<V;++de)pe+=String.fromCharCode(q[de]&127);return pe}function J(q,B,V){let pe="";V=Math.min(q.length,V);for(let de=B;de<V;++de)pe+=String.fromCharCode(q[de]);return pe}function xe(q,B,V){const pe=q.length;(!B||B<0)&&(B=0),(!V||V<0||V>pe)&&(V=pe);let de="";for(let Fe=B;Fe<V;++Fe)de+=Ke[q[Fe]];return de}function Le(q,B,V){const pe=q.slice(B,V);let de="";for(let Fe=0;Fe<pe.length-1;Fe+=2)de+=String.fromCharCode(pe[Fe]+pe[Fe+1]*256);return de}F.prototype.slice=function(B,V){const pe=this.length;B=~~B,V=V===void 0?pe:~~V,B<0?(B+=pe,B<0&&(B=0)):B>pe&&(B=pe),V<0?(V+=pe,V<0&&(V=0)):V>pe&&(V=pe),V<B&&(V=B);const de=this.subarray(B,V);return Object.setPrototypeOf(de,F.prototype),de};function Se(q,B,V){if(q%1!==0||q<0)throw new RangeError("offset is not uint");if(q+B>V)throw new RangeError("Trying to access beyond buffer length")}F.prototype.readUintLE=F.prototype.readUIntLE=function(B,V,pe){B=B>>>0,V=V>>>0,pe||Se(B,V,this.length);let de=this[B],Fe=1,ot=0;for(;++ot<V&&(Fe*=256);)de+=this[B+ot]*Fe;return de},F.prototype.readUintBE=F.prototype.readUIntBE=function(B,V,pe){B=B>>>0,V=V>>>0,pe||Se(B,V,this.length);let de=this[B+--V],Fe=1;for(;V>0&&(Fe*=256);)de+=this[B+--V]*Fe;return de},F.prototype.readUint8=F.prototype.readUInt8=function(B,V){return B=B>>>0,V||Se(B,1,this.length),this[B]},F.prototype.readUint16LE=F.prototype.readUInt16LE=function(B,V){return B=B>>>0,V||Se(B,2,this.length),this[B]|this[B+1]<<8},F.prototype.readUint16BE=F.prototype.readUInt16BE=function(B,V){return B=B>>>0,V||Se(B,2,this.length),this[B]<<8|this[B+1]},F.prototype.readUint32LE=F.prototype.readUInt32LE=function(B,V){return B=B>>>0,V||Se(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},F.prototype.readUint32BE=F.prototype.readUInt32BE=function(B,V){return B=B>>>0,V||Se(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},F.prototype.readBigUInt64LE=Ct(function(B){B=B>>>0,Oe(B,"offset");const V=this[B],pe=this[B+7];(V===void 0||pe===void 0)&&ve(B,this.length-8);const de=V+this[++B]*2**8+this[++B]*2**16+this[++B]*2**24,Fe=this[++B]+this[++B]*2**8+this[++B]*2**16+pe*2**24;return BigInt(de)+(BigInt(Fe)<<BigInt(32))}),F.prototype.readBigUInt64BE=Ct(function(B){B=B>>>0,Oe(B,"offset");const V=this[B],pe=this[B+7];(V===void 0||pe===void 0)&&ve(B,this.length-8);const de=V*2**24+this[++B]*2**16+this[++B]*2**8+this[++B],Fe=this[++B]*2**24+this[++B]*2**16+this[++B]*2**8+pe;return(BigInt(de)<<BigInt(32))+BigInt(Fe)}),F.prototype.readIntLE=function(B,V,pe){B=B>>>0,V=V>>>0,pe||Se(B,V,this.length);let de=this[B],Fe=1,ot=0;for(;++ot<V&&(Fe*=256);)de+=this[B+ot]*Fe;return Fe*=128,de>=Fe&&(de-=Math.pow(2,8*V)),de},F.prototype.readIntBE=function(B,V,pe){B=B>>>0,V=V>>>0,pe||Se(B,V,this.length);let de=V,Fe=1,ot=this[B+--de];for(;de>0&&(Fe*=256);)ot+=this[B+--de]*Fe;return Fe*=128,ot>=Fe&&(ot-=Math.pow(2,8*V)),ot},F.prototype.readInt8=function(B,V){return B=B>>>0,V||Se(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},F.prototype.readInt16LE=function(B,V){B=B>>>0,V||Se(B,2,this.length);const pe=this[B]|this[B+1]<<8;return pe&32768?pe|4294901760:pe},F.prototype.readInt16BE=function(B,V){B=B>>>0,V||Se(B,2,this.length);const pe=this[B+1]|this[B]<<8;return pe&32768?pe|4294901760:pe},F.prototype.readInt32LE=function(B,V){return B=B>>>0,V||Se(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},F.prototype.readInt32BE=function(B,V){return B=B>>>0,V||Se(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},F.prototype.readBigInt64LE=Ct(function(B){B=B>>>0,Oe(B,"offset");const V=this[B],pe=this[B+7];(V===void 0||pe===void 0)&&ve(B,this.length-8);const de=this[B+4]+this[B+5]*2**8+this[B+6]*2**16+(pe<<24);return(BigInt(de)<<BigInt(32))+BigInt(V+this[++B]*2**8+this[++B]*2**16+this[++B]*2**24)}),F.prototype.readBigInt64BE=Ct(function(B){B=B>>>0,Oe(B,"offset");const V=this[B],pe=this[B+7];(V===void 0||pe===void 0)&&ve(B,this.length-8);const de=(V<<24)+this[++B]*2**16+this[++B]*2**8+this[++B];return(BigInt(de)<<BigInt(32))+BigInt(this[++B]*2**24+this[++B]*2**16+this[++B]*2**8+pe)}),F.prototype.readFloatLE=function(B,V){return B=B>>>0,V||Se(B,4,this.length),C.read(this,B,!0,23,4)},F.prototype.readFloatBE=function(B,V){return B=B>>>0,V||Se(B,4,this.length),C.read(this,B,!1,23,4)},F.prototype.readDoubleLE=function(B,V){return B=B>>>0,V||Se(B,8,this.length),C.read(this,B,!0,52,8)},F.prototype.readDoubleBE=function(B,V){return B=B>>>0,V||Se(B,8,this.length),C.read(this,B,!1,52,8)};function Ve(q,B,V,pe,de,Fe){if(!F.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>de||B<Fe)throw new RangeError('"value" argument is out of bounds');if(V+pe>q.length)throw new RangeError("Index out of range")}F.prototype.writeUintLE=F.prototype.writeUIntLE=function(B,V,pe,de){if(B=+B,V=V>>>0,pe=pe>>>0,!de){const Dt=Math.pow(2,8*pe)-1;Ve(this,B,V,pe,Dt,0)}let Fe=1,ot=0;for(this[V]=B&255;++ot<pe&&(Fe*=256);)this[V+ot]=B/Fe&255;return V+pe},F.prototype.writeUintBE=F.prototype.writeUIntBE=function(B,V,pe,de){if(B=+B,V=V>>>0,pe=pe>>>0,!de){const Dt=Math.pow(2,8*pe)-1;Ve(this,B,V,pe,Dt,0)}let Fe=pe-1,ot=1;for(this[V+Fe]=B&255;--Fe>=0&&(ot*=256);)this[V+Fe]=B/ot&255;return V+pe},F.prototype.writeUint8=F.prototype.writeUInt8=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,1,255,0),this[V]=B&255,V+1},F.prototype.writeUint16LE=F.prototype.writeUInt16LE=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,2,65535,0),this[V]=B&255,this[V+1]=B>>>8,V+2},F.prototype.writeUint16BE=F.prototype.writeUInt16BE=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,2,65535,0),this[V]=B>>>8,this[V+1]=B&255,V+2},F.prototype.writeUint32LE=F.prototype.writeUInt32LE=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,4,4294967295,0),this[V+3]=B>>>24,this[V+2]=B>>>16,this[V+1]=B>>>8,this[V]=B&255,V+4},F.prototype.writeUint32BE=F.prototype.writeUInt32BE=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,4,4294967295,0),this[V]=B>>>24,this[V+1]=B>>>16,this[V+2]=B>>>8,this[V+3]=B&255,V+4};function xt(q,B,V,pe,de){fe(B,pe,de,q,V,7);let Fe=Number(B&BigInt(4294967295));q[V++]=Fe,Fe=Fe>>8,q[V++]=Fe,Fe=Fe>>8,q[V++]=Fe,Fe=Fe>>8,q[V++]=Fe;let ot=Number(B>>BigInt(32)&BigInt(4294967295));return q[V++]=ot,ot=ot>>8,q[V++]=ot,ot=ot>>8,q[V++]=ot,ot=ot>>8,q[V++]=ot,V}function ht(q,B,V,pe,de){fe(B,pe,de,q,V,7);let Fe=Number(B&BigInt(4294967295));q[V+7]=Fe,Fe=Fe>>8,q[V+6]=Fe,Fe=Fe>>8,q[V+5]=Fe,Fe=Fe>>8,q[V+4]=Fe;let ot=Number(B>>BigInt(32)&BigInt(4294967295));return q[V+3]=ot,ot=ot>>8,q[V+2]=ot,ot=ot>>8,q[V+1]=ot,ot=ot>>8,q[V]=ot,V+8}F.prototype.writeBigUInt64LE=Ct(function(B,V=0){return xt(this,B,V,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeBigUInt64BE=Ct(function(B,V=0){return ht(this,B,V,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeIntLE=function(B,V,pe,de){if(B=+B,V=V>>>0,!de){const un=Math.pow(2,8*pe-1);Ve(this,B,V,pe,un-1,-un)}let Fe=0,ot=1,Dt=0;for(this[V]=B&255;++Fe<pe&&(ot*=256);)B<0&&Dt===0&&this[V+Fe-1]!==0&&(Dt=1),this[V+Fe]=(B/ot>>0)-Dt&255;return V+pe},F.prototype.writeIntBE=function(B,V,pe,de){if(B=+B,V=V>>>0,!de){const un=Math.pow(2,8*pe-1);Ve(this,B,V,pe,un-1,-un)}let Fe=pe-1,ot=1,Dt=0;for(this[V+Fe]=B&255;--Fe>=0&&(ot*=256);)B<0&&Dt===0&&this[V+Fe+1]!==0&&(Dt=1),this[V+Fe]=(B/ot>>0)-Dt&255;return V+pe},F.prototype.writeInt8=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,1,127,-128),B<0&&(B=255+B+1),this[V]=B&255,V+1},F.prototype.writeInt16LE=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,2,32767,-32768),this[V]=B&255,this[V+1]=B>>>8,V+2},F.prototype.writeInt16BE=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,2,32767,-32768),this[V]=B>>>8,this[V+1]=B&255,V+2},F.prototype.writeInt32LE=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,4,2147483647,-2147483648),this[V]=B&255,this[V+1]=B>>>8,this[V+2]=B>>>16,this[V+3]=B>>>24,V+4},F.prototype.writeInt32BE=function(B,V,pe){return B=+B,V=V>>>0,pe||Ve(this,B,V,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[V]=B>>>24,this[V+1]=B>>>16,this[V+2]=B>>>8,this[V+3]=B&255,V+4},F.prototype.writeBigInt64LE=Ct(function(B,V=0){return xt(this,B,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),F.prototype.writeBigInt64BE=Ct(function(B,V=0){return ht(this,B,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(q,B,V,pe,de,Fe){if(V+pe>q.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function Pt(q,B,V,pe,de){return B=+B,V=V>>>0,de||Et(q,B,V,4),C.write(q,B,V,pe,23,4),V+4}F.prototype.writeFloatLE=function(B,V,pe){return Pt(this,B,V,!0,pe)},F.prototype.writeFloatBE=function(B,V,pe){return Pt(this,B,V,!1,pe)};function Tt(q,B,V,pe,de){return B=+B,V=V>>>0,de||Et(q,B,V,8),C.write(q,B,V,pe,52,8),V+8}F.prototype.writeDoubleLE=function(B,V,pe){return Tt(this,B,V,!0,pe)},F.prototype.writeDoubleBE=function(B,V,pe){return Tt(this,B,V,!1,pe)},F.prototype.copy=function(B,V,pe,de){if(!F.isBuffer(B))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!de&&de!==0&&(de=this.length),V>=B.length&&(V=B.length),V||(V=0),de>0&&de<pe&&(de=pe),de===pe||B.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),B.length-V<de-pe&&(de=B.length-V+pe);const Fe=de-pe;return this===B&&typeof N.prototype.copyWithin=="function"?this.copyWithin(V,pe,de):N.prototype.set.call(B,this.subarray(pe,de),V),Fe},F.prototype.fill=function(B,V,pe,de){if(typeof B=="string"){if(typeof V=="string"?(de=V,V=0,pe=this.length):typeof pe=="string"&&(de=pe,pe=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!F.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(B.length===1){const ot=B.charCodeAt(0);(de==="utf8"&&ot<128||de==="latin1")&&(B=ot)}}else typeof B=="number"?B=B&255:typeof B=="boolean"&&(B=Number(B));if(V<0||this.length<V||this.length<pe)throw new RangeError("Out of range index");if(pe<=V)return this;V=V>>>0,pe=pe===void 0?this.length:pe>>>0,B||(B=0);let Fe;if(typeof B=="number")for(Fe=V;Fe<pe;++Fe)this[Fe]=B;else{const ot=F.isBuffer(B)?B:F.from(B,de),Dt=ot.length;if(Dt===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(Fe=0;Fe<pe-V;++Fe)this[Fe+V]=ot[Fe%Dt]}return this};const Ut={};function ge(q,B,V){Ut[q]=class extends V{constructor(){super(),Object.defineProperty(this,"message",{value:B.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${q}]`,this.stack,delete this.name}get code(){return q}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return`${this.name} [${q}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(q){return q?`${q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(q,B){return`The "${q}" argument must be of type number. Received type ${typeof B}`},TypeError),ge("ERR_OUT_OF_RANGE",function(q,B,V){let pe=`The value of "${q}" is out of range.`,de=V;return Number.isInteger(V)&&Math.abs(V)>2**32?de=I(String(V)):typeof V=="bigint"&&(de=String(V),(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))&&(de=I(de)),de+="n"),pe+=` It must be ${B}. Received ${de}`,pe},RangeError);function I(q){let B="",V=q.length;const pe=q[0]==="-"?1:0;for(;V>=pe+4;V-=3)B=`_${q.slice(V-3,V)}${B}`;return`${q.slice(0,V)}${B}`}function H(q,B,V){Oe(B,"offset"),(q[B]===void 0||q[B+V]===void 0)&&ve(B,q.length-(V+1))}function fe(q,B,V,pe,de,Fe){if(q>V||q<B){const ot=typeof B=="bigint"?"n":"";let Dt;throw B===0||B===BigInt(0)?Dt=`>= 0${ot} and < 2${ot} ** ${(Fe+1)*8}${ot}`:Dt=`>= -(2${ot} ** ${(Fe+1)*8-1}${ot}) and < 2 ** ${(Fe+1)*8-1}${ot}`,new Ut.ERR_OUT_OF_RANGE("value",Dt,q)}H(pe,de,Fe)}function Oe(q,B){if(typeof q!="number")throw new Ut.ERR_INVALID_ARG_TYPE(B,"number",q)}function ve(q,B,V){throw Math.floor(q)!==q?(Oe(q,V),new Ut.ERR_OUT_OF_RANGE("offset","an integer",q)):B<0?new Ut.ERR_BUFFER_OUT_OF_BOUNDS:new Ut.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${B}`,q)}const ke=/[^+/0-9A-Za-z-_]/g;function le(q){if(q=q.split("=")[0],q=q.trim().replace(ke,""),q.length<2)return"";for(;q.length%4!==0;)q=q+"=";return q}function ct(q,B){B=B||1/0;let V;const pe=q.length;let de=null;const Fe=[];for(let ot=0;ot<pe;++ot){if(V=q.charCodeAt(ot),V>55295&&V<57344){if(!de){if(V>56319){(B-=3)>-1&&Fe.push(239,191,189);continue}else if(ot+1===pe){(B-=3)>-1&&Fe.push(239,191,189);continue}de=V;continue}if(V<56320){(B-=3)>-1&&Fe.push(239,191,189),de=V;continue}V=(de-55296<<10|V-56320)+65536}else de&&(B-=3)>-1&&Fe.push(239,191,189);if(de=null,V<128){if((B-=1)<0)break;Fe.push(V)}else if(V<2048){if((B-=2)<0)break;Fe.push(V>>6|192,V&63|128)}else if(V<65536){if((B-=3)<0)break;Fe.push(V>>12|224,V>>6&63|128,V&63|128)}else if(V<1114112){if((B-=4)<0)break;Fe.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw new Error("Invalid code point")}return Fe}function yt(q){const B=[];for(let V=0;V<q.length;++V)B.push(q.charCodeAt(V)&255);return B}function M(q,B){let V,pe,de;const Fe=[];for(let ot=0;ot<q.length&&!((B-=2)<0);++ot)V=q.charCodeAt(ot),pe=V>>8,de=V%256,Fe.push(de),Fe.push(pe);return Fe}function Be(q){return E.toByteArray(le(q))}function et(q,B,V,pe){let de;for(de=0;de<pe&&!(de+V>=B.length||de>=q.length);++de)B[de+V]=q[de];return de}function me(q,B){return q instanceof B||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===B.name}function De(q){return q!==q}const Ke=function(){const q="0123456789abcdef",B=new Array(256);for(let V=0;V<16;++V){const pe=V*16;for(let de=0;de<16;++de)B[pe+de]=q[V]+q[de]}return B}();function Ct(q){return typeof BigInt>"u"?ye:q}function ye(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(zx)),zx}var Ux,VN;function Ur(){if(VN)return Ux;VN=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return Ux={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},Ux}var qx={exports:{}},Hx,GN;function Oj(){return GN||(GN=1,Hx={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),Hx}var Vx,WN;function hi(){if(WN)return Vx;WN=1;const{format:e,inspect:t}=Oj(),{AggregateError:n}=Ur(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function c(_,x){if(!_)throw new u.ERR_INTERNAL_ASSERTION(x)}function f(_){let x="",S=_.length;const E=_[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${_.slice(S-3,S)}${x}`;return`${_.slice(0,S)}${x}`}function h(_,x,S){if(typeof x=="function")return c(x.length<=S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return c(E===S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function p(_,x,S){S||(S=Error);class E extends S{constructor(...k){super(h(_,x,k))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,u[_]=E}function g(_){const x=s+_.name;return Object.defineProperty(_,"name",{value:x}),_}function v(_,x){if(_&&x&&_!==x){if(Array.isArray(x.errors))return x.errors.push(_),x;const S=new r([x,_],x.message);return S.code=x.code,S}return _||x}class b extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(_,x,S)=>{c(typeof _=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const C=[],k=[],O=[];for(const D of x)c(typeof D=="string","All expected entries have to be of type string"),i.includes(D)?C.push(D.toLowerCase()):o.test(D)?k.push(D):(c(D!=="object",'The value "object" should be written as "Object"'),O.push(D));if(k.length>0){const D=C.indexOf("object");D!==-1&&(C.splice(C,D,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const D=C.pop();E+=`one of type ${C.join(", ")}, or ${D}`}}(k.length>0||O.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const D=k.pop();E+=`an instance of ${k.join(", ")}, or ${D}`}}O.length>0&&(E+=" or ")}switch(O.length){case 0:break;case 1:O[0].toLowerCase()!==O[0]&&(E+="an "),E+=`${O[0]}`;break;case 2:E+=`one of ${O[0]} or ${O[1]}`;break;default:{const D=O.pop();E+=`one of ${O.join(", ")}, or ${D}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var N;if((N=S.constructor)!==null&&N!==void 0&&N.name)E+=`. Received an instance of ${S.constructor.name}`;else{const D=t(S,{depth:-1});E+=`. Received ${D}`}}else{let D=t(S,{colors:!1});D.length>25&&(D=`${D.slice(0,25)}...`),E+=`. Received type ${typeof S} (${D})`}return E},TypeError),p("ERR_INVALID_ARG_VALUE",(_,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${S}. Received ${E}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(_,x,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${_} to be returned from the "${x}" function but got ${C}.`},TypeError),p("ERR_MISSING_ARGS",(..._)=>{c(_.length>0,"At least one arg needs to be specified");let x;const S=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${_[0]} argument`;break;case 2:x+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();x+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(_,x,S)=>{c(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=f(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=f(E)),E+="n"}else E=t(S);return`The value of "${_}" is out of range. It must be ${x}. Received ${E}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Vx={AbortError:b,aggregateTwoErrors:g(v),hideStackFrames:g,codes:u},Vx}var rm={exports:{}},KN;function Bm(){if(KN)return rm.exports;KN=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return rm.exports=e,rm.exports.AbortSignal=t,rm.exports.default=e,rm.exports}var Ly={exports:{}},ZN;function _w(){if(ZN)return Ly.exports;ZN=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,O,N){return Function.prototype.apply.call(k,O,N)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}Ly.exports=i,Ly.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function u(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(k){for(var O=[],N=1;N<arguments.length;N++)O.push(arguments[N]);var D=k==="error",U=this._events;if(U!==void 0)D=D&&U.error===void 0;else if(!D)return!1;if(D){var W;if(O.length>0&&(W=O[0]),W instanceof Error)throw W;var Q=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw Q.context=W,Q}var F=U[k];if(F===void 0)return!1;if(typeof F=="function")t(F,this,O);else for(var Z=F.length,L=v(F,Z),N=0;N<Z;++N)t(L[N],this,O);return!0};function c(C,k,O,N){var D,U,W;if(s(O),U=C._events,U===void 0?(U=C._events=Object.create(null),C._eventsCount=0):(U.newListener!==void 0&&(C.emit("newListener",k,O.listener?O.listener:O),U=C._events),W=U[k]),W===void 0)W=U[k]=O,++C._eventsCount;else if(typeof W=="function"?W=U[k]=N?[O,W]:[W,O]:N?W.unshift(O):W.push(O),D=u(C),D>0&&W.length>D&&!W.warned){W.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=C,Q.type=k,Q.count=W.length,r(Q)}return C}i.prototype.addListener=function(k,O){return c(this,k,O,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,O){return c(this,k,O,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,k,O){var N={fired:!1,wrapFn:void 0,target:C,type:k,listener:O},D=f.bind(N);return D.listener=O,N.wrapFn=D,D}i.prototype.once=function(k,O){return s(O),this.on(k,h(this,k,O)),this},i.prototype.prependOnceListener=function(k,O){return s(O),this.prependListener(k,h(this,k,O)),this},i.prototype.removeListener=function(k,O){var N,D,U,W,Q;if(s(O),D=this._events,D===void 0)return this;if(N=D[k],N===void 0)return this;if(N===O||N.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete D[k],D.removeListener&&this.emit("removeListener",k,N.listener||O));else if(typeof N!="function"){for(U=-1,W=N.length-1;W>=0;W--)if(N[W]===O||N[W].listener===O){Q=N[W].listener,U=W;break}if(U<0)return this;U===0?N.shift():b(N,U),N.length===1&&(D[k]=N[0]),D.removeListener!==void 0&&this.emit("removeListener",k,Q||O)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var O,N,D;if(N=this._events,N===void 0)return this;if(N.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):N[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete N[k]),this;if(arguments.length===0){var U=Object.keys(N),W;for(D=0;D<U.length;++D)W=U[D],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=N[k],typeof O=="function")this.removeListener(k,O);else if(O!==void 0)for(D=O.length-1;D>=0;D--)this.removeListener(k,O[D]);return this};function p(C,k,O){var N=C._events;if(N===void 0)return[];var D=N[k];return D===void 0?[]:typeof D=="function"?O?[D.listener||D]:[D]:O?_(D):v(D,D.length)}i.prototype.listeners=function(k){return p(this,k,!0)},i.prototype.rawListeners=function(k){return p(this,k,!1)},i.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):g.call(C,k)},i.prototype.listenerCount=g;function g(C){var k=this._events;if(k!==void 0){var O=k[C];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,k){for(var O=new Array(k),N=0;N<k;++N)O[N]=C[N];return O}function b(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function _(C){for(var k=new Array(C.length),O=0;O<k.length;++O)k[O]=C[O].listener||C[O];return k}function x(C,k){return new Promise(function(O,N){function D(W){C.removeListener(k,U),N(W)}function U(){typeof C.removeListener=="function"&&C.removeListener("error",D),O([].slice.call(arguments))}E(C,k,U,{once:!0}),k!=="error"&&S(C,D,{once:!0})})}function S(C,k,O){typeof C.on=="function"&&E(C,"error",k,O)}function E(C,k,O,N){if(typeof C.on=="function")N.once?C.once(k,O):C.on(k,O);else if(typeof C.addEventListener=="function")C.addEventListener(k,function D(U){N.once&&C.removeEventListener(k,D),O(U)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return Ly.exports}var YN;function Ci(){return YN||(YN=1,function(e){const t=hc(),{format:n,inspect:r}=Oj(),{codes:{ERR_INVALID_ARG_TYPE:a}}=hi(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Ur(),u=globalThis.AbortSignal||Bm().AbortSignal,c=globalThis.AbortController||Bm().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,p=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(b,_)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(_,"AbortSignal",b)},v=(b,_)=>{if(typeof b!="function")throw new a(_,"Function",b)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(b){let _=!1;return function(...x){_||(_=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,_;return{promise:new Promise((S,E)=>{b=S,_=E}),resolve:b,reject:_}},promisify(b){return new Promise((_,x)=>{b((S,...E)=>S?x(S):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof f},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:p,deprecate(b,_){return b},addAbortListener:_w().addAbortListener||function(_,x){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),v(x,"listener");let S;return _.aborted?queueMicrotask(()=>x()):(_.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{_.removeEventListener("abort",x)}),{__proto__:null,[s](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:u.any||function(_){if(_.length===1)return _[0];const x=new c,S=()=>x.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(qx)),qx.exports}var $y={},Gx,XN;function O0(){if(XN)return Gx;XN=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:p,StringPrototypeTrim:g}=Ur(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=hi(),{normalizeEncoding:C}=Ci(),{isAsyncFunction:k,isArrayBufferView:O}=Ci().types,N={};function D(J){return J===(J|0)}function U(J){return J===J>>>0}const W=/^[0-7]+$/,Q="must be a 32-bit unsigned integer or an octal string";function F(J,xe,Le){if(typeof J>"u"&&(J=Le),typeof J=="string"){if(f(W,J)===null)throw new x(xe,J,Q);J=u(J,8)}return he(J,xe),J}const Z=v((J,xe,Le=s,Se=o)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);if(J<Le||J>Se)throw new S(xe,`>= ${Le} && <= ${Se}`,J)}),L=v((J,xe,Le=-2147483648,Se=2147483647)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);if(J<Le||J>Se)throw new S(xe,`>= ${Le} && <= ${Se}`,J)}),he=v((J,xe,Le=!1)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);const Se=Le?1:0,Ve=4294967295;if(J<Se||J>Ve)throw new S(xe,`>= ${Se} && <= ${Ve}`,J)});function ie(J,xe){if(typeof J!="string")throw new _(xe,"string",J)}function ne(J,xe,Le=void 0,Se){if(typeof J!="number")throw new _(xe,"number",J);if(Le!=null&&J<Le||Se!=null&&J>Se||(Le!=null||Se!=null)&&i(J))throw new S(xe,`${Le!=null?`>= ${Le}`:""}${Le!=null&&Se!=null?" && ":""}${Se!=null?`<= ${Se}`:""}`,J)}const ee=v((J,xe,Le)=>{if(!t(Le,J)){const Ve="must be one of: "+n(r(Le,xt=>typeof xt=="string"?`'${xt}'`:h(xt)),", ");throw new x(xe,J,Ve)}});function se(J,xe){if(typeof J!="boolean")throw new _(xe,"boolean",J)}function G(J,xe,Le){return J==null||!c(J,xe)?Le:J[xe]}const X=v((J,xe,Le=null)=>{const Se=G(Le,"allowArray",!1),Ve=G(Le,"allowFunction",!1);if(!G(Le,"nullable",!1)&&J===null||!Se&&e(J)||typeof J!="object"&&(!Ve||typeof J!="function"))throw new _(xe,"Object",J)}),Y=v((J,xe)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new _(xe,"a dictionary",J)}),re=v((J,xe,Le=0)=>{if(!e(J))throw new _(xe,"Array",J);if(J.length<Le){const Se=`must be longer than ${Le}`;throw new x(xe,J,Se)}});function be(J,xe){re(J,xe);for(let Le=0;Le<J.length;Le++)ie(J[Le],`${xe}[${Le}]`)}function we(J,xe){re(J,xe);for(let Le=0;Le<J.length;Le++)se(J[Le],`${xe}[${Le}]`)}function Me(J,xe){re(J,xe);for(let Le=0;Le<J.length;Le++){const Se=J[Le],Ve=`${xe}[${Le}]`;if(Se==null)throw new _(Ve,"AbortSignal",Se);it(Se,Ve)}}function Pe(J,xe="signal"){if(ie(J,xe),N[J]===void 0)throw N[p(J)]!==void 0?new E(J+" (signals must use all capital letters)"):new E(J)}const Ae=v((J,xe="buffer")=>{if(!O(J))throw new _(xe,["Buffer","TypedArray","DataView"],J)});function Te(J,xe){const Le=C(xe),Se=J.length;if(Le==="hex"&&Se%2!==0)throw new x("encoding",xe,`is invalid for data of length ${Se}`)}function qe(J,xe="Port",Le=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&g(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Le)throw new b(xe,J,Le);return J|0}const it=v((J,xe)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new _(xe,"AbortSignal",J)}),Ie=v((J,xe)=>{if(typeof J!="function")throw new _(xe,"Function",J)}),Re=v((J,xe)=>{if(typeof J!="function"||k(J))throw new _(xe,"Function",J)}),z=v((J,xe)=>{if(J!==void 0)throw new _(xe,"undefined",J)});function Ce(J,xe,Le){if(!t(Le,J))throw new _(xe,`('${n(Le,"|")}')`,J)}const Ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ce(J,xe){if(typeof J>"u"||!f(Ne,J))throw new x(xe,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ae(J){if(typeof J=="string")return ce(J,"hints"),J;if(e(J)){const xe=J.length;let Le="";if(xe===0)return Le;for(let Se=0;Se<xe;Se++){const Ve=J[Se];ce(Ve,"hints"),Le+=Ve,Se!==xe-1&&(Le+=", ")}return Le}throw new x("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Gx={isInt32:D,isUint32:U,parseFileMode:F,validateArray:re,validateStringArray:be,validateBooleanArray:we,validateAbortSignalArray:Me,validateBoolean:se,validateBuffer:Ae,validateDictionary:Y,validateEncoding:Te,validateFunction:Ie,validateInt32:L,validateInteger:Z,validateNumber:ne,validateObject:X,validateOneOf:ee,validatePlainFunction:Re,validatePort:qe,validateSignalName:Pe,validateString:ie,validateUint32:he,validateUndefined:z,validateUnion:Ce,validateAbortSignal:it,validateLinkHeaderValue:ae},Gx}var By={exports:{}},Wx={},JN;function Cd(){return JN||(JN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function u(C){if(a===setTimeout)return setTimeout(C,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(i===clearTimeout)return clearTimeout(C);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var f=[],h=!1,p,g=-1;function v(){!h||!p||(h=!1,p.length?f=p.concat(f):g=-1,f.length&&b())}function b(){if(!h){var C=u(v);h=!0;for(var k=f.length;k;){for(p=f,f=[];++g<k;)p&&p[g].run();g=-1,k=f.length}p=null,h=!1,c(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)k[O-1]=arguments[O];f.push(new _(C,k)),f.length===1&&!h&&u(b)};function _(C,k){this.fun=C,this.array=k}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(Wx)),Wx}var Kx,QN;function Vl(){if(QN)return Kx;QN=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Ur(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),u=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function f(G,X=!1){var Y;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!X||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((Y=G._readableState)===null||Y===void 0?void 0:Y.readable)!==!1)&&(!G._writableState||G._readableState))}function h(G){var X;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((X=G._writableState)===null||X===void 0?void 0:X.writable)!==!1))}function p(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function g(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function v(G){return!!(G&&!g(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function b(G){return!!(G&&!g(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function _(G){return!!(G&&!g(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function x(G){return v(G)||b(G)||_(G)}function S(G,X){return G==null?!1:X===!0?typeof G[e]=="function":X===!1?typeof G[t]=="function":typeof G[e]=="function"||typeof G[t]=="function"}function E(G){if(!g(G))return null;const X=G._writableState,Y=G._readableState,re=X||Y;return!!(G.destroyed||G[r]||re!=null&&re.destroyed)}function C(G){if(!h(G))return null;if(G.writableEnded===!0)return!0;const X=G._writableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function k(G,X){if(!h(G))return null;if(G.writableFinished===!0)return!0;const Y=G._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.finished)!="boolean"?null:!!(Y.finished||X===!1&&Y.ended===!0&&Y.length===0)}function O(G){if(!f(G))return null;if(G.readableEnded===!0)return!0;const X=G._readableState;return!X||X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function N(G,X){if(!f(G))return null;const Y=G._readableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.endEmitted)!="boolean"?null:!!(Y.endEmitted||X===!1&&Y.ended===!0&&Y.length===0)}function D(G){return G&&G[i]!=null?G[i]:typeof(G==null?void 0:G.readable)!="boolean"?null:E(G)?!1:f(G)&&G.readable&&!N(G)}function U(G){return G&&G[o]!=null?G[o]:typeof(G==null?void 0:G.writable)!="boolean"?null:E(G)?!1:h(G)&&G.writable&&!C(G)}function W(G,X){return g(G)?E(G)?!0:!((X==null?void 0:X.readable)!==!1&&D(G)||(X==null?void 0:X.writable)!==!1&&U(G)):null}function Q(G){var X,Y;return g(G)?G.writableErrored?G.writableErrored:(X=(Y=G._writableState)===null||Y===void 0?void 0:Y.errored)!==null&&X!==void 0?X:null:null}function F(G){var X,Y;return g(G)?G.readableErrored?G.readableErrored:(X=(Y=G._readableState)===null||Y===void 0?void 0:Y.errored)!==null&&X!==void 0?X:null:null}function Z(G){if(!g(G))return null;if(typeof G.closed=="boolean")return G.closed;const X=G._writableState,Y=G._readableState;return typeof(X==null?void 0:X.closed)=="boolean"||typeof(Y==null?void 0:Y.closed)=="boolean"?(X==null?void 0:X.closed)||(Y==null?void 0:Y.closed):typeof G._closed=="boolean"&&L(G)?G._closed:null}function L(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function he(G){return typeof G._sent100=="boolean"&&L(G)}function ie(G){var X;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((X=G.req)===null||X===void 0?void 0:X.upgradeOrConnect)===void 0}function ne(G){if(!g(G))return null;const X=G._writableState,Y=G._readableState,re=X||Y;return!re&&he(G)||!!(re&&re.autoDestroy&&re.emitClose&&re.closed===!1)}function ee(G){var X;return!!(G&&((X=G[s])!==null&&X!==void 0?X:G.readableDidRead||G.readableAborted))}function se(G){var X,Y,re,be,we,Me,Pe,Ae,Te,qe;return!!(G&&((X=(Y=(re=(be=(we=(Me=G[a])!==null&&Me!==void 0?Me:G.readableErrored)!==null&&we!==void 0?we:G.writableErrored)!==null&&be!==void 0?be:(Pe=G._readableState)===null||Pe===void 0?void 0:Pe.errorEmitted)!==null&&re!==void 0?re:(Ae=G._writableState)===null||Ae===void 0?void 0:Ae.errorEmitted)!==null&&Y!==void 0?Y:(Te=G._readableState)===null||Te===void 0?void 0:Te.errored)!==null&&X!==void 0?X:!((qe=G._writableState)===null||qe===void 0)&&qe.errored))}return Kx={isDestroyed:E,kIsDestroyed:r,isDisturbed:ee,kIsDisturbed:s,isErrored:se,kIsErrored:a,isReadable:D,kIsReadable:i,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:o,isClosed:Z,isDuplexNodeStream:p,isFinished:W,isIterable:S,isReadableNodeStream:f,isReadableStream:v,isReadableEnded:O,isReadableFinished:N,isReadableErrored:F,isNodeStream:g,isWebStream:x,isWritable:U,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:k,isWritableErrored:Q,isServerRequest:ie,isServerResponse:he,willEmitClose:ne,isTransformStream:_},Kx}var eI;function pc(){if(eI)return By.exports;eI=1;const e=Cd(),{AbortError:t,codes:n}=hi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=Ci(),{validateAbortSignal:s,validateFunction:u,validateObject:c,validateBoolean:f}=O0(),{Promise:h,PromisePrototypeThen:p,SymbolDispose:g}=Ur(),{isClosed:v,isReadable:b,isReadableNodeStream:_,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:k,isWritableStream:O,isWritableFinished:N,isWritableErrored:D,isNodeStream:U,willEmitClose:W,kIsClosedPromise:Q}=Vl();let F;function Z(ee){return ee.setHeader&&typeof ee.abort=="function"}const L=()=>{};function he(ee,se,G){var X,Y;if(arguments.length===2?(G=se,se=i):se==null?se=i:c(se,"options"),u(G,"callback"),s(se.signal,"options.signal"),G=o(G),x(ee)||O(ee))return ie(ee,se,G);if(!U(ee))throw new r("stream",["ReadableStream","WritableStream","Stream"],ee);const re=(X=se.readable)!==null&&X!==void 0?X:_(ee),be=(Y=se.writable)!==null&&Y!==void 0?Y:k(ee),we=ee._writableState,Me=ee._readableState,Pe=()=>{ee.writable||qe()};let Ae=W(ee)&&_(ee)===re&&k(ee)===be,Te=N(ee,!1);const qe=()=>{Te=!0,ee.destroyed&&(Ae=!1),!(Ae&&(!ee.readable||re))&&(!re||it)&&G.call(ee)};let it=S(ee,!1);const Ie=()=>{it=!0,ee.destroyed&&(Ae=!1),!(Ae&&(!ee.writable||be))&&(!be||Te)&&G.call(ee)},Re=J=>{G.call(ee,J)};let z=v(ee);const Ce=()=>{z=!0;const J=D(ee)||E(ee);if(J&&typeof J!="boolean")return G.call(ee,J);if(re&&!it&&_(ee,!0)&&!S(ee,!1))return G.call(ee,new a);if(be&&!Te&&!N(ee,!1))return G.call(ee,new a);G.call(ee)},Ne=()=>{z=!0;const J=D(ee)||E(ee);if(J&&typeof J!="boolean")return G.call(ee,J);G.call(ee)},ce=()=>{ee.req.on("finish",qe)};Z(ee)?(ee.on("complete",qe),Ae||ee.on("abort",Ce),ee.req?ce():ee.on("request",ce)):be&&!we&&(ee.on("end",Pe),ee.on("close",Pe)),!Ae&&typeof ee.aborted=="boolean"&&ee.on("aborted",Ce),ee.on("end",Ie),ee.on("finish",qe),se.error!==!1&&ee.on("error",Re),ee.on("close",Ce),z?e.nextTick(Ce):we!=null&&we.errorEmitted||Me!=null&&Me.errorEmitted?Ae||e.nextTick(Ne):(!re&&(!Ae||b(ee))&&(Te||C(ee)===!1)||!be&&(!Ae||C(ee))&&(it||b(ee)===!1)||Me&&ee.req&&ee.aborted)&&e.nextTick(Ne);const ae=()=>{G=L,ee.removeListener("aborted",Ce),ee.removeListener("complete",qe),ee.removeListener("abort",Ce),ee.removeListener("request",ce),ee.req&&ee.req.removeListener("finish",qe),ee.removeListener("end",Pe),ee.removeListener("close",Pe),ee.removeListener("finish",qe),ee.removeListener("end",Ie),ee.removeListener("error",Re),ee.removeListener("close",Ce)};if(se.signal&&!z){const J=()=>{const xe=G;ae(),xe.call(ee,new t(void 0,{cause:se.signal.reason}))};if(se.signal.aborted)e.nextTick(J);else{F=F||Ci().addAbortListener;const xe=F(se.signal,J),Le=G;G=o((...Se)=>{xe[g](),Le.apply(ee,Se)})}}return ae}function ie(ee,se,G){let X=!1,Y=L;if(se.signal)if(Y=()=>{X=!0,G.call(ee,new t(void 0,{cause:se.signal.reason}))},se.signal.aborted)e.nextTick(Y);else{F=F||Ci().addAbortListener;const be=F(se.signal,Y),we=G;G=o((...Me)=>{be[g](),we.apply(ee,Me)})}const re=(...be)=>{X||e.nextTick(()=>G.apply(ee,be))};return p(ee[Q].promise,re,re),L}function ne(ee,se){var G;let X=!1;return se===null&&(se=i),(G=se)!==null&&G!==void 0&&G.cleanup&&(f(se.cleanup,"cleanup"),X=se.cleanup),new h((Y,re)=>{const be=he(ee,se,we=>{X&&be(),we?re(we):Y()})})}return By.exports=he,By.exports.finished=ne,By.exports}var Zx,tI;function Ch(){if(tI)return Zx;tI=1;const e=Cd(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=hi(),{Symbol:a}=Ur(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:u}=Vl(),c=a("kDestroy"),f=a("kConstruct");function h(W,Q,F){W&&(W.stack,Q&&!Q.errored&&(Q.errored=W),F&&!F.errored&&(F.errored=W))}function p(W,Q){const F=this._readableState,Z=this._writableState,L=Z||F;return Z!=null&&Z.destroyed||F!=null&&F.destroyed?(typeof Q=="function"&&Q(),this):(h(W,Z,F),Z&&(Z.destroyed=!0),F&&(F.destroyed=!0),L.constructed?g(this,W,Q):this.once(c,function(he){g(this,t(he,W),Q)}),this)}function g(W,Q,F){let Z=!1;function L(he){if(Z)return;Z=!0;const ie=W._readableState,ne=W._writableState;h(he,ne,ie),ne&&(ne.closed=!0),ie&&(ie.closed=!0),typeof F=="function"&&F(he),he?e.nextTick(v,W,he):e.nextTick(b,W)}try{W._destroy(Q||null,L)}catch(he){L(he)}}function v(W,Q){_(W,Q),b(W)}function b(W){const Q=W._readableState,F=W._writableState;F&&(F.closeEmitted=!0),Q&&(Q.closeEmitted=!0),(F!=null&&F.emitClose||Q!=null&&Q.emitClose)&&W.emit("close")}function _(W,Q){const F=W._readableState,Z=W._writableState;Z!=null&&Z.errorEmitted||F!=null&&F.errorEmitted||(Z&&(Z.errorEmitted=!0),F&&(F.errorEmitted=!0),W.emit("error",Q))}function x(){const W=this._readableState,Q=this._writableState;W&&(W.constructed=!0,W.closed=!1,W.closeEmitted=!1,W.destroyed=!1,W.errored=null,W.errorEmitted=!1,W.reading=!1,W.ended=W.readable===!1,W.endEmitted=W.readable===!1),Q&&(Q.constructed=!0,Q.destroyed=!1,Q.closed=!1,Q.closeEmitted=!1,Q.errored=null,Q.errorEmitted=!1,Q.finalCalled=!1,Q.prefinished=!1,Q.ended=Q.writable===!1,Q.ending=Q.writable===!1,Q.finished=Q.writable===!1)}function S(W,Q,F){const Z=W._readableState,L=W._writableState;if(L!=null&&L.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||L!=null&&L.autoDestroy?W.destroy(Q):Q&&(Q.stack,L&&!L.errored&&(L.errored=Q),Z&&!Z.errored&&(Z.errored=Q),F?e.nextTick(_,W,Q):_(W,Q))}function E(W,Q){if(typeof W._construct!="function")return;const F=W._readableState,Z=W._writableState;F&&(F.constructed=!1),Z&&(Z.constructed=!1),W.once(f,Q),!(W.listenerCount(f)>1)&&e.nextTick(C,W)}function C(W){let Q=!1;function F(Z){if(Q){S(W,Z??new n);return}Q=!0;const L=W._readableState,he=W._writableState,ie=he||L;L&&(L.constructed=!0),he&&(he.constructed=!0),ie.destroyed?W.emit(c,Z):Z?S(W,Z,!0):e.nextTick(k,W)}try{W._construct(Z=>{e.nextTick(F,Z)})}catch(Z){e.nextTick(F,Z)}}function k(W){W.emit(f)}function O(W){return(W==null?void 0:W.setHeader)&&typeof W.abort=="function"}function N(W){W.emit("close")}function D(W,Q){W.emit("error",Q),e.nextTick(N,W)}function U(W,Q){!W||o(W)||(!Q&&!s(W)&&(Q=new r),u(W)?(W.socket=null,W.destroy(Q)):O(W)?W.abort():O(W.req)?W.req.abort():typeof W.destroy=="function"?W.destroy(Q):typeof W.close=="function"?W.close():Q?e.nextTick(D,W,Q):e.nextTick(N,W),W.destroyed||(W[i]=!0))}return Zx={construct:E,destroyer:U,destroy:p,undestroy:x,errorOrDestroy:S},Zx}var Yx,nI;function ak(){if(nI)return Yx;nI=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Ur(),{EventEmitter:n}=_w();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function u(b){i.writable&&i.write(b)===!1&&s.pause&&s.pause()}s.on("data",u);function c(){s.readable&&s.resume&&s.resume()}i.on("drain",c),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",p));let f=!1;function h(){f||(f=!0,i.end())}function p(){f||(f=!0,typeof i.destroy=="function"&&i.destroy())}function g(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(s,"error",g),a(i,"error",g);function v(){s.removeListener("data",u),i.removeListener("drain",c),s.removeListener("end",h),s.removeListener("close",p),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",v),s.removeListener("close",v),i.removeListener("close",v)}return s.on("end",v),s.on("close",v),i.on("close",v),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return Yx={Stream:r,prependListener:a},Yx}var Xx={exports:{}},rI;function xw(){return rI||(rI=1,function(e){const{SymbolDispose:t}=Ur(),{AbortError:n,codes:r}=hi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Vl(),s=pc(),{ERR_INVALID_ARG_TYPE:u}=r;let c;const f=(h,p)=>{if(typeof h!="object"||!("aborted"in h))throw new u(p,"AbortSignal",h)};e.exports.addAbortSignal=function(p,g){if(f(p,"signal"),!a(g)&&!i(g))throw new u("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(p,g)},e.exports.addAbortSignalNoValidate=function(h,p){if(typeof h!="object"||!("aborted"in h))return p;const g=a(p)?()=>{p.destroy(new n(void 0,{cause:h.reason}))}:()=>{p[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||Ci().addAbortListener;const v=c(h,g);s(p,v[t])}return p}}(Xx)),Xx.exports}var Jx,aI;function ZY(){if(aI)return Jx;aI=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Ur(),{Buffer:a}=hc(),{inspect:i}=Ci();return Jx=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=s+u.data;return c}concat(s){if(this.length===0)return a.alloc(0);const u=a.allocUnsafe(s>>>0);let c=this.head,f=0;for(;c;)n(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(s,u){const c=this.head.data;if(s<c.length){const f=c.slice(0,s);return this.head.data=c.slice(s),f}return s===c.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",c=this.head,f=0;do{const h=c.data;if(s>h.length)u+=h,s-=h.length;else{s===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=e(h,0,s),this.head=c,c.data=e(h,s));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(s){const u=a.allocUnsafe(s),c=s;let f=this.head,h=0;do{const p=f.data;if(s>p.length)n(u,p,c-s),s-=p.length;else{s===p.length?(n(u,p,c-s),++h,f.next?this.head=f.next:this.head=this.tail=null):(n(u,new r(p.buffer,p.byteOffset,s),c-s),this.head=f,f.data=p.slice(s));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return i(this,{...u,depth:0,customInspect:!1})}},Jx}var Qx,iI;function Sw(){if(iI)return Qx;iI=1;const{MathFloor:e,NumberIsInteger:t}=Ur(),{validateInteger:n}=O0(),{ERR_INVALID_ARG_VALUE:r}=hi().codes;let a=16*1024,i=16;function o(f,h,p){return f.highWaterMark!=null?f.highWaterMark:h?f[p]:null}function s(f){return f?i:a}function u(f,h){n(h,"value",0),f?i=h:a=h}function c(f,h,p,g){const v=o(h,g,p);if(v!=null){if(!t(v)||v<0){const b=g?`options.${p}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return s(f.objectMode)}return Qx={getHighWaterMark:c,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},Qx}var eS={},zy={exports:{}},oI;function ik(){return oI||(oI=1,function(e,t){var n=hc(),r=n.Buffer;function a(o,s){for(var u in o)s[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,u){return r(o,s,u)}a(r,i),i.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,u)},i.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(zy,zy.exports)),zy.exports}var sI;function YY(){if(sI)return eS;sI=1;var e=ik().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}eS.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=p,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=g,this.end=v,S=3;break;default:this.write=b,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=f,a.prototype.text=c,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,S,E){var C=S.length-1;if(C<E)return 0;var k=i(S[C]);return k>=0?(k>0&&(x.lastNeed=k-1),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(x.lastNeed=k-2),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(k===2?k=0:x.lastNeed=k-3),k):0))}function s(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function u(x){var S=this.lastTotal-this.lastNeed,E=s(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function c(x,S){var E=o(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",S,C)}function f(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function p(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function v(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function b(x){return x.toString(this.encoding)}function _(x){return x&&x.length?this.write(x):""}return eS}var tS,lI;function Dj(){if(lI)return tS;lI=1;const e=Cd(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Ur(),{Buffer:a}=hc(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=hi().codes;function s(u,c,f){let h;if(typeof c=="string"||c instanceof a)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let p;if(c&&c[n])p=!0,h=c[n]();else if(c&&c[r])p=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new u({objectMode:!0,highWaterMark:1,...f});let v=!1;g._read=function(){v||(v=!0,_())},g._destroy=function(x,S){t(b(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function b(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:k}=await h.throw(x);if(await C,k)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function _(){for(;;){try{const{value:x,done:S}=p?await h.next():h.next();if(S)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new o;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return tS=s,tS}var nS,uI;function Ew(){if(uI)return nS;uI=1;const e=Cd(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:p}=Ur();nS=Se,Se.ReadableState=Le;const{EventEmitter:g}=_w(),{Stream:v,prependListener:b}=ak(),{Buffer:_}=hc(),{addAbortSignal:x}=xw(),S=pc();let E=Ci().debuglog("stream",ye=>{E=ye});const C=ZY(),k=Ch(),{getHighWaterMark:O,getDefaultHighWaterMark:N}=Sw(),{aggregateTwoErrors:D,codes:{ERR_INVALID_ARG_TYPE:U,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_OUT_OF_RANGE:Q,ERR_STREAM_PUSH_AFTER_EOF:F,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:L}=hi(),{validateObject:he}=O0(),ie=p("kPaused"),{StringDecoder:ne}=YY(),ee=Dj();s(Se.prototype,v.prototype),s(Se,v);const se=()=>{},{errorOrDestroy:G}=k,X=1,Y=2,re=4,be=8,we=16,Me=32,Pe=64,Ae=128,Te=256,qe=512,it=1024,Ie=2048,Re=4096,z=8192,Ce=16384,Ne=32768,ce=65536,ae=1<<17,J=1<<18;function xe(ye){return{enumerable:!1,get(){return(this.state&ye)!==0},set(q){q?this.state|=ye:this.state&=~ye}}}i(Le.prototype,{objectMode:xe(X),ended:xe(Y),endEmitted:xe(re),reading:xe(be),constructed:xe(we),sync:xe(Me),needReadable:xe(Pe),emittedReadable:xe(Ae),readableListening:xe(Te),resumeScheduled:xe(qe),errorEmitted:xe(it),emitClose:xe(Ie),autoDestroy:xe(Re),destroyed:xe(z),closed:xe(Ce),closeEmitted:xe(Ne),multiAwaitDrain:xe(ce),readingMore:xe(ae),dataEmitted:xe(J)});function Le(ye,q,B){typeof B!="boolean"&&(B=q instanceof Ml()),this.state=Ie|Re|we|Me,ye&&ye.objectMode&&(this.state|=X),B&&ye&&ye.readableObjectMode&&(this.state|=X),this.highWaterMark=ye?O(this,ye,"readableHighWaterMark",B):N(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ie]=null,ye&&ye.emitClose===!1&&(this.state&=-2049),ye&&ye.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=ye&&ye.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ye&&ye.encoding&&(this.decoder=new ne(ye.encoding),this.encoding=ye.encoding)}function Se(ye){if(!(this instanceof Se))return new Se(ye);const q=this instanceof Ml();this._readableState=new Le(ye,this,q),ye&&(typeof ye.read=="function"&&(this._read=ye.read),typeof ye.destroy=="function"&&(this._destroy=ye.destroy),typeof ye.construct=="function"&&(this._construct=ye.construct),ye.signal&&!q&&x(ye.signal,this)),v.call(this,ye),k.construct(this,()=>{this._readableState.needReadable&&I(this,this._readableState)})}Se.prototype.destroy=k.destroy,Se.prototype._undestroy=k.undestroy,Se.prototype._destroy=function(ye,q){q(ye)},Se.prototype[g.captureRejectionSymbol]=function(ye){this.destroy(ye)},Se.prototype[f]=function(){let ye;return this.destroyed||(ye=this.readableEnded?null:new L,this.destroy(ye)),new u((q,B)=>S(this,V=>V&&V!==ye?B(V):q(null)))},Se.prototype.push=function(ye,q){return Ve(this,ye,q,!1)},Se.prototype.unshift=function(ye,q){return Ve(this,ye,q,!0)};function Ve(ye,q,B,V){E("readableAddChunk",q);const pe=ye._readableState;let de;if((pe.state&X)===0&&(typeof q=="string"?(B=B||pe.defaultEncoding,pe.encoding!==B&&(V&&pe.encoding?q=_.from(q,B).toString(pe.encoding):(q=_.from(q,B),B=""))):q instanceof _?B="":v._isUint8Array(q)?(q=v._uint8ArrayToBuffer(q),B=""):q!=null&&(de=new U("chunk",["string","Buffer","Uint8Array"],q))),de)G(ye,de);else if(q===null)pe.state&=-9,Tt(ye,pe);else if((pe.state&X)!==0||q&&q.length>0)if(V)if((pe.state&re)!==0)G(ye,new Z);else{if(pe.destroyed||pe.errored)return!1;xt(ye,pe,q,!0)}else if(pe.ended)G(ye,new F);else{if(pe.destroyed||pe.errored)return!1;pe.state&=-9,pe.decoder&&!B?(q=pe.decoder.write(q),pe.objectMode||q.length!==0?xt(ye,pe,q,!1):I(ye,pe)):xt(ye,pe,q,!1)}else V||(pe.state&=-9,I(ye,pe));return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function xt(ye,q,B,V){q.flowing&&q.length===0&&!q.sync&&ye.listenerCount("data")>0?((q.state&ce)!==0?q.awaitDrainWriters.clear():q.awaitDrainWriters=null,q.dataEmitted=!0,ye.emit("data",B)):(q.length+=q.objectMode?1:B.length,V?q.buffer.unshift(B):q.buffer.push(B),(q.state&Pe)!==0&&Ut(ye)),I(ye,q)}Se.prototype.isPaused=function(){const ye=this._readableState;return ye[ie]===!0||ye.flowing===!1},Se.prototype.setEncoding=function(ye){const q=new ne(ye);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;const B=this._readableState.buffer;let V="";for(const pe of B)V+=q.write(pe);return B.clear(),V!==""&&B.push(V),this._readableState.length=V.length,this};const ht=1073741824;function Et(ye){if(ye>ht)throw new Q("size","<= 1GiB",ye);return ye--,ye|=ye>>>1,ye|=ye>>>2,ye|=ye>>>4,ye|=ye>>>8,ye|=ye>>>16,ye++,ye}function Pt(ye,q){return ye<=0||q.length===0&&q.ended?0:(q.state&X)!==0?1:r(ye)?q.flowing&&q.length?q.buffer.first().length:q.length:ye<=q.length?ye:q.ended?q.length:0}Se.prototype.read=function(ye){E("read",ye),ye===void 0?ye=NaN:n(ye)||(ye=a(ye,10));const q=this._readableState,B=ye;if(ye>q.highWaterMark&&(q.highWaterMark=Et(ye)),ye!==0&&(q.state&=-129),ye===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended))return E("read: emitReadable",q.length,q.ended),q.length===0&&q.ended?et(this):Ut(this),null;if(ye=Pt(ye,q),ye===0&&q.ended)return q.length===0&&et(this),null;let V=(q.state&Pe)!==0;if(E("need readable",V),(q.length===0||q.length-ye<q.highWaterMark)&&(V=!0,E("length less than watermark",V)),q.ended||q.reading||q.destroyed||q.errored||!q.constructed)V=!1,E("reading, ended or constructing",V);else if(V){E("do read"),q.state|=be|Me,q.length===0&&(q.state|=Pe);try{this._read(q.highWaterMark)}catch(de){G(this,de)}q.state&=-33,q.reading||(ye=Pt(B,q))}let pe;return ye>0?pe=Be(ye,q):pe=null,pe===null?(q.needReadable=q.length<=q.highWaterMark,ye=0):(q.length-=ye,q.multiAwaitDrain?q.awaitDrainWriters.clear():q.awaitDrainWriters=null),q.length===0&&(q.ended||(q.needReadable=!0),B!==ye&&q.ended&&et(this)),pe!==null&&!q.errorEmitted&&!q.closeEmitted&&(q.dataEmitted=!0,this.emit("data",pe)),pe};function Tt(ye,q){if(E("onEofChunk"),!q.ended){if(q.decoder){const B=q.decoder.end();B&&B.length&&(q.buffer.push(B),q.length+=q.objectMode?1:B.length)}q.ended=!0,q.sync?Ut(ye):(q.needReadable=!1,q.emittedReadable=!0,ge(ye))}}function Ut(ye){const q=ye._readableState;E("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(E("emitReadable",q.flowing),q.emittedReadable=!0,e.nextTick(ge,ye))}function ge(ye){const q=ye._readableState;E("emitReadable_",q.destroyed,q.length,q.ended),!q.destroyed&&!q.errored&&(q.length||q.ended)&&(ye.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,ct(ye)}function I(ye,q){!q.readingMore&&q.constructed&&(q.readingMore=!0,e.nextTick(H,ye,q))}function H(ye,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0);){const B=q.length;if(E("maybeReadMore read 0"),ye.read(0),B===q.length)break}q.readingMore=!1}Se.prototype._read=function(ye){throw new W("_read()")},Se.prototype.pipe=function(ye,q){const B=this,V=this._readableState;V.pipes.length===1&&(V.multiAwaitDrain||(V.multiAwaitDrain=!0,V.awaitDrainWriters=new c(V.awaitDrainWriters?[V.awaitDrainWriters]:[]))),V.pipes.push(ye),E("pipe count=%d opts=%j",V.pipes.length,q);const de=(!q||q.end!==!1)&&ye!==e.stdout&&ye!==e.stderr?ot:hr;V.endEmitted?e.nextTick(de):B.once("end",de),ye.on("unpipe",Fe);function Fe(jn,ni){E("onunpipe"),jn===B&&ni&&ni.hasUnpiped===!1&&(ni.hasUnpiped=!0,zt())}function ot(){E("onend"),ye.end()}let Dt,un=!1;function zt(){E("cleanup"),ye.removeListener("close",zn),ye.removeListener("finish",fr),Dt&&ye.removeListener("drain",Dt),ye.removeListener("error",Rn),ye.removeListener("unpipe",Fe),B.removeListener("end",ot),B.removeListener("end",hr),B.removeListener("data",Xt),un=!0,Dt&&V.awaitDrainWriters&&(!ye._writableState||ye._writableState.needDrain)&&Dt()}function Vt(){un||(V.pipes.length===1&&V.pipes[0]===ye?(E("false write response, pause",0),V.awaitDrainWriters=ye,V.multiAwaitDrain=!1):V.pipes.length>1&&V.pipes.includes(ye)&&(E("false write response, pause",V.awaitDrainWriters.size),V.awaitDrainWriters.add(ye)),B.pause()),Dt||(Dt=fe(B,ye),ye.on("drain",Dt))}B.on("data",Xt);function Xt(jn){E("ondata");const ni=ye.write(jn);E("dest.write",ni),ni===!1&&Vt()}function Rn(jn){if(E("onerror",jn),hr(),ye.removeListener("error",Rn),ye.listenerCount("error")===0){const ni=ye._writableState||ye._readableState;ni&&!ni.errorEmitted?G(ye,jn):ye.emit("error",jn)}}b(ye,"error",Rn);function zn(){ye.removeListener("finish",fr),hr()}ye.once("close",zn);function fr(){E("onfinish"),ye.removeListener("close",zn),hr()}ye.once("finish",fr);function hr(){E("unpipe"),B.unpipe(ye)}return ye.emit("pipe",B),ye.writableNeedDrain===!0?Vt():V.flowing||(E("pipe resume"),B.resume()),ye};function fe(ye,q){return function(){const V=ye._readableState;V.awaitDrainWriters===q?(E("pipeOnDrain",1),V.awaitDrainWriters=null):V.multiAwaitDrain&&(E("pipeOnDrain",V.awaitDrainWriters.size),V.awaitDrainWriters.delete(q)),(!V.awaitDrainWriters||V.awaitDrainWriters.size===0)&&ye.listenerCount("data")&&ye.resume()}}Se.prototype.unpipe=function(ye){const q=this._readableState,B={hasUnpiped:!1};if(q.pipes.length===0)return this;if(!ye){const pe=q.pipes;q.pipes=[],this.pause();for(let de=0;de<pe.length;de++)pe[de].emit("unpipe",this,{hasUnpiped:!1});return this}const V=t(q.pipes,ye);return V===-1?this:(q.pipes.splice(V,1),q.pipes.length===0&&this.pause(),ye.emit("unpipe",this,B),this)},Se.prototype.on=function(ye,q){const B=v.prototype.on.call(this,ye,q),V=this._readableState;return ye==="data"?(V.readableListening=this.listenerCount("readable")>0,V.flowing!==!1&&this.resume()):ye==="readable"&&!V.endEmitted&&!V.readableListening&&(V.readableListening=V.needReadable=!0,V.flowing=!1,V.emittedReadable=!1,E("on readable",V.length,V.reading),V.length?Ut(this):V.reading||e.nextTick(ve,this)),B},Se.prototype.addListener=Se.prototype.on,Se.prototype.removeListener=function(ye,q){const B=v.prototype.removeListener.call(this,ye,q);return ye==="readable"&&e.nextTick(Oe,this),B},Se.prototype.off=Se.prototype.removeListener,Se.prototype.removeAllListeners=function(ye){const q=v.prototype.removeAllListeners.apply(this,arguments);return(ye==="readable"||ye===void 0)&&e.nextTick(Oe,this),q};function Oe(ye){const q=ye._readableState;q.readableListening=ye.listenerCount("readable")>0,q.resumeScheduled&&q[ie]===!1?q.flowing=!0:ye.listenerCount("data")>0?ye.resume():q.readableListening||(q.flowing=null)}function ve(ye){E("readable nexttick read 0"),ye.read(0)}Se.prototype.resume=function(){const ye=this._readableState;return ye.flowing||(E("resume"),ye.flowing=!ye.readableListening,ke(this,ye)),ye[ie]=!1,this};function ke(ye,q){q.resumeScheduled||(q.resumeScheduled=!0,e.nextTick(le,ye,q))}function le(ye,q){E("resume",q.reading),q.reading||ye.read(0),q.resumeScheduled=!1,ye.emit("resume"),ct(ye),q.flowing&&!q.reading&&ye.read(0)}Se.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ie]=!0,this};function ct(ye){const q=ye._readableState;for(E("flow",q.flowing);q.flowing&&ye.read()!==null;);}Se.prototype.wrap=function(ye){let q=!1;ye.on("data",V=>{!this.push(V)&&ye.pause&&(q=!0,ye.pause())}),ye.on("end",()=>{this.push(null)}),ye.on("error",V=>{G(this,V)}),ye.on("close",()=>{this.destroy()}),ye.on("destroy",()=>{this.destroy()}),this._read=()=>{q&&ye.resume&&(q=!1,ye.resume())};const B=o(ye);for(let V=1;V<B.length;V++){const pe=B[V];this[pe]===void 0&&typeof ye[pe]=="function"&&(this[pe]=ye[pe].bind(ye))}return this},Se.prototype[h]=function(){return yt(this)},Se.prototype.iterator=function(ye){return ye!==void 0&&he(ye,"options"),yt(this,ye)};function yt(ye,q){typeof ye.read!="function"&&(ye=Se.wrap(ye,{objectMode:!0}));const B=M(ye,q);return B.stream=ye,B}async function*M(ye,q){let B=se;function V(Fe){this===ye?(B(),B=se):B=Fe}ye.on("readable",V);let pe;const de=S(ye,{writable:!1},Fe=>{pe=Fe?D(pe,Fe):null,B(),B=se});try{for(;;){const Fe=ye.destroyed?null:ye.read();if(Fe!==null)yield Fe;else{if(pe)throw pe;if(pe===null)return;await new u(V)}}}catch(Fe){throw pe=D(pe,Fe),pe}finally{(pe||(q==null?void 0:q.destroyOnReturn)!==!1)&&(pe===void 0||ye._readableState.autoDestroy)?k.destroyer(ye,null):(ye.off("readable",V),de())}}i(Se.prototype,{readable:{__proto__:null,get(){const ye=this._readableState;return!!ye&&ye.readable!==!1&&!ye.destroyed&&!ye.errorEmitted&&!ye.endEmitted},set(ye){this._readableState&&(this._readableState.readable=!!ye)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ye){this._readableState&&(this._readableState.flowing=ye)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ye){this._readableState&&(this._readableState.destroyed=ye)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Le.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ie]!==!1},set(ye){this[ie]=!!ye}}}),Se._fromList=Be;function Be(ye,q){if(q.length===0)return null;let B;return q.objectMode?B=q.buffer.shift():!ye||ye>=q.length?(q.decoder?B=q.buffer.join(""):q.buffer.length===1?B=q.buffer.first():B=q.buffer.concat(q.length),q.buffer.clear()):B=q.buffer.consume(ye,q.decoder),B}function et(ye){const q=ye._readableState;E("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,e.nextTick(me,q,ye))}function me(ye,q){if(E("endReadableNT",ye.endEmitted,ye.length),!ye.errored&&!ye.closeEmitted&&!ye.endEmitted&&ye.length===0){if(ye.endEmitted=!0,q.emit("end"),q.writable&&q.allowHalfOpen===!1)e.nextTick(De,q);else if(ye.autoDestroy){const B=q._writableState;(!B||B.autoDestroy&&(B.finished||B.writable===!1))&&q.destroy()}}}function De(ye){ye.writable&&!ye.writableEnded&&!ye.destroyed&&ye.end()}Se.from=function(ye,q){return ee(Se,ye,q)};let Ke;function Ct(){return Ke===void 0&&(Ke={}),Ke}return Se.fromWeb=function(ye,q){return Ct().newStreamReadableFromReadableStream(ye,q)},Se.toWeb=function(ye,q){return Ct().newReadableStreamFromStreamReadable(ye,q)},Se.wrap=function(ye,q){var B,V;return new Se({objectMode:(B=(V=ye.readableObjectMode)!==null&&V!==void 0?V:ye.objectMode)!==null&&B!==void 0?B:!0,...q,destroy(pe,de){k.destroyer(ye,pe),de(pe)}}).wrap(ye)},nS}var rS,cI;function ok(){if(cI)return rS;cI=1;const e=Cd(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:c}=Ur();rS=he,he.WritableState=Z;const{EventEmitter:f}=_w(),h=ak().Stream,{Buffer:p}=hc(),g=Ch(),{addAbortSignal:v}=xw(),{getHighWaterMark:b,getDefaultHighWaterMark:_}=Sw(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:O,ERR_STREAM_NULL_VALUES:N,ERR_STREAM_WRITE_AFTER_END:D,ERR_UNKNOWN_ENCODING:U}=hi().codes,{errorOrDestroy:W}=g;o(he.prototype,h.prototype),o(he,h);function Q(){}const F=u("kOnFinished");function Z(Re,z,Ce){typeof Ce!="boolean"&&(Ce=z instanceof Ml()),this.objectMode=!!(Re&&Re.objectMode),Ce&&(this.objectMode=this.objectMode||!!(Re&&Re.writableObjectMode)),this.highWaterMark=Re?b(this,Re,"writableHighWaterMark",Ce):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ne=!!(Re&&Re.decodeStrings===!1);this.decodeStrings=!Ne,this.defaultEncoding=Re&&Re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Re||Re.emitClose!==!1,this.autoDestroy=!Re||Re.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[F]=[]}function L(Re){Re.buffered=[],Re.bufferedIndex=0,Re.allBuffers=!0,Re.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function he(Re){const z=this instanceof Ml();if(!z&&!r(he,this))return new he(Re);this._writableState=new Z(Re,this,z),Re&&(typeof Re.write=="function"&&(this._write=Re.write),typeof Re.writev=="function"&&(this._writev=Re.writev),typeof Re.destroy=="function"&&(this._destroy=Re.destroy),typeof Re.final=="function"&&(this._final=Re.final),typeof Re.construct=="function"&&(this._construct=Re.construct),Re.signal&&v(Re.signal,this)),h.call(this,Re),g.construct(this,()=>{const Ce=this._writableState;Ce.writing||be(this,Ce),Ae(this,Ce)})}a(he,c,{__proto__:null,value:function(Re){return r(this,Re)?!0:this!==he?!1:Re&&Re._writableState instanceof Z}}),he.prototype.pipe=function(){W(this,new C)};function ie(Re,z,Ce,Ne){const ce=Re._writableState;if(typeof Ce=="function")Ne=Ce,Ce=ce.defaultEncoding;else{if(!Ce)Ce=ce.defaultEncoding;else if(Ce!=="buffer"&&!p.isEncoding(Ce))throw new U(Ce);typeof Ne!="function"&&(Ne=Q)}if(z===null)throw new N;if(!ce.objectMode)if(typeof z=="string")ce.decodeStrings!==!1&&(z=p.from(z,Ce),Ce="buffer");else if(z instanceof p)Ce="buffer";else if(h._isUint8Array(z))z=h._uint8ArrayToBuffer(z),Ce="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],z);let ae;return ce.ending?ae=new D:ce.destroyed&&(ae=new k("write")),ae?(e.nextTick(Ne,ae),W(Re,ae,!0),ae):(ce.pendingcb++,ne(Re,ce,z,Ce,Ne))}he.prototype.write=function(Re,z,Ce){return ie(this,Re,z,Ce)===!0},he.prototype.cork=function(){this._writableState.corked++},he.prototype.uncork=function(){const Re=this._writableState;Re.corked&&(Re.corked--,Re.writing||be(this,Re))},he.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=s(z)),!p.isEncoding(z))throw new U(z);return this._writableState.defaultEncoding=z,this};function ne(Re,z,Ce,Ne,ce){const ae=z.objectMode?1:Ce.length;z.length+=ae;const J=z.length<z.highWaterMark;return J||(z.needDrain=!0),z.writing||z.corked||z.errored||!z.constructed?(z.buffered.push({chunk:Ce,encoding:Ne,callback:ce}),z.allBuffers&&Ne!=="buffer"&&(z.allBuffers=!1),z.allNoop&&ce!==Q&&(z.allNoop=!1)):(z.writelen=ae,z.writecb=ce,z.writing=!0,z.sync=!0,Re._write(Ce,Ne,z.onwrite),z.sync=!1),J&&!z.errored&&!z.destroyed}function ee(Re,z,Ce,Ne,ce,ae,J){z.writelen=Ne,z.writecb=J,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new k("write")):Ce?Re._writev(ce,z.onwrite):Re._write(ce,ae,z.onwrite),z.sync=!1}function se(Re,z,Ce,Ne){--z.pendingcb,Ne(Ce),re(z),W(Re,Ce)}function G(Re,z){const Ce=Re._writableState,Ne=Ce.sync,ce=Ce.writecb;if(typeof ce!="function"){W(Re,new E);return}Ce.writing=!1,Ce.writecb=null,Ce.length-=Ce.writelen,Ce.writelen=0,z?(z.stack,Ce.errored||(Ce.errored=z),Re._readableState&&!Re._readableState.errored&&(Re._readableState.errored=z),Ne?e.nextTick(se,Re,Ce,z,ce):se(Re,Ce,z,ce)):(Ce.buffered.length>Ce.bufferedIndex&&be(Re,Ce),Ne?Ce.afterWriteTickInfo!==null&&Ce.afterWriteTickInfo.cb===ce?Ce.afterWriteTickInfo.count++:(Ce.afterWriteTickInfo={count:1,cb:ce,stream:Re,state:Ce},e.nextTick(X,Ce.afterWriteTickInfo)):Y(Re,Ce,1,ce))}function X({stream:Re,state:z,count:Ce,cb:Ne}){return z.afterWriteTickInfo=null,Y(Re,z,Ce,Ne)}function Y(Re,z,Ce,Ne){for(!z.ending&&!Re.destroyed&&z.length===0&&z.needDrain&&(z.needDrain=!1,Re.emit("drain"));Ce-- >0;)z.pendingcb--,Ne();z.destroyed&&re(z),Ae(Re,z)}function re(Re){if(Re.writing)return;for(let ce=Re.bufferedIndex;ce<Re.buffered.length;++ce){var z;const{chunk:ae,callback:J}=Re.buffered[ce],xe=Re.objectMode?1:ae.length;Re.length-=xe,J((z=Re.errored)!==null&&z!==void 0?z:new k("write"))}const Ce=Re[F].splice(0);for(let ce=0;ce<Ce.length;ce++){var Ne;Ce[ce]((Ne=Re.errored)!==null&&Ne!==void 0?Ne:new k("end"))}L(Re)}function be(Re,z){if(z.corked||z.bufferProcessing||z.destroyed||!z.constructed)return;const{buffered:Ce,bufferedIndex:Ne,objectMode:ce}=z,ae=Ce.length-Ne;if(!ae)return;let J=Ne;if(z.bufferProcessing=!0,ae>1&&Re._writev){z.pendingcb-=ae-1;const xe=z.allNoop?Q:Se=>{for(let Ve=J;Ve<Ce.length;++Ve)Ce[Ve].callback(Se)},Le=z.allNoop&&J===0?Ce:t(Ce,J);Le.allBuffers=z.allBuffers,ee(Re,z,!0,z.length,Le,"",xe),L(z)}else{do{const{chunk:xe,encoding:Le,callback:Se}=Ce[J];Ce[J++]=null;const Ve=ce?1:xe.length;ee(Re,z,!1,Ve,xe,Le,Se)}while(J<Ce.length&&!z.writing);J===Ce.length?L(z):J>256?(Ce.splice(0,J),z.bufferedIndex=0):z.bufferedIndex=J}z.bufferProcessing=!1}he.prototype._write=function(Re,z,Ce){if(this._writev)this._writev([{chunk:Re,encoding:z}],Ce);else throw new S("_write()")},he.prototype._writev=null,he.prototype.end=function(Re,z,Ce){const Ne=this._writableState;typeof Re=="function"?(Ce=Re,Re=null,z=null):typeof z=="function"&&(Ce=z,z=null);let ce;if(Re!=null){const ae=ie(this,Re,z);ae instanceof n&&(ce=ae)}return Ne.corked&&(Ne.corked=1,this.uncork()),ce||(!Ne.errored&&!Ne.ending?(Ne.ending=!0,Ae(this,Ne,!0),Ne.ended=!0):Ne.finished?ce=new O("end"):Ne.destroyed&&(ce=new k("end"))),typeof Ce=="function"&&(ce||Ne.finished?e.nextTick(Ce,ce):Ne[F].push(Ce)),this};function we(Re){return Re.ending&&!Re.destroyed&&Re.constructed&&Re.length===0&&!Re.errored&&Re.buffered.length===0&&!Re.finished&&!Re.writing&&!Re.errorEmitted&&!Re.closeEmitted}function Me(Re,z){let Ce=!1;function Ne(ce){if(Ce){W(Re,ce??E());return}if(Ce=!0,z.pendingcb--,ce){const ae=z[F].splice(0);for(let J=0;J<ae.length;J++)ae[J](ce);W(Re,ce,z.sync)}else we(z)&&(z.prefinished=!0,Re.emit("prefinish"),z.pendingcb++,e.nextTick(Te,Re,z))}z.sync=!0,z.pendingcb++;try{Re._final(Ne)}catch(ce){Ne(ce)}z.sync=!1}function Pe(Re,z){!z.prefinished&&!z.finalCalled&&(typeof Re._final=="function"&&!z.destroyed?(z.finalCalled=!0,Me(Re,z)):(z.prefinished=!0,Re.emit("prefinish")))}function Ae(Re,z,Ce){we(z)&&(Pe(Re,z),z.pendingcb===0&&(Ce?(z.pendingcb++,e.nextTick((Ne,ce)=>{we(ce)?Te(Ne,ce):ce.pendingcb--},Re,z)):we(z)&&(z.pendingcb++,Te(Re,z))))}function Te(Re,z){z.pendingcb--,z.finished=!0;const Ce=z[F].splice(0);for(let Ne=0;Ne<Ce.length;Ne++)Ce[Ne]();if(Re.emit("finish"),z.autoDestroy){const Ne=Re._readableState;(!Ne||Ne.autoDestroy&&(Ne.endEmitted||Ne.readable===!1))&&Re.destroy()}}i(he.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Re){this._writableState&&(this._writableState.destroyed=Re)}},writable:{__proto__:null,get(){const Re=this._writableState;return!!Re&&Re.writable!==!1&&!Re.destroyed&&!Re.errored&&!Re.ending&&!Re.ended},set(Re){this._writableState&&(this._writableState.writable=!!Re)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Re=this._writableState;return Re?!Re.destroyed&&!Re.ending&&Re.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const qe=g.destroy;he.prototype.destroy=function(Re,z){const Ce=this._writableState;return!Ce.destroyed&&(Ce.bufferedIndex<Ce.buffered.length||Ce[F].length)&&e.nextTick(re,Ce),qe.call(this,Re,z),this},he.prototype._undestroy=g.undestroy,he.prototype._destroy=function(Re,z){z(Re)},he.prototype[f.captureRejectionSymbol]=function(Re){this.destroy(Re)};let it;function Ie(){return it===void 0&&(it={}),it}return he.fromWeb=function(Re,z){return Ie().newStreamWritableFromWritableStream(Re,z)},he.toWeb=function(Re){return Ie().newWritableStreamFromStreamWritable(Re)},rS}var aS,dI;function XY(){if(dI)return aS;dI=1;const e=Cd(),t=hc(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=Vl(),h=pc(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=hi(),{destroyer:b}=Ch(),_=Ml(),x=Ew(),S=ok(),{createDeferredPromise:E}=Ci(),C=Dj(),k=globalThis.Blob||t.Blob,O=typeof k<"u"?function(Z){return Z instanceof k}:function(Z){return!1},N=globalThis.AbortController||Bm().AbortController,{FunctionPrototypeCall:D}=Ur();class U extends _{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}aS=function F(Z,L){if(u(Z))return Z;if(o(Z))return Q({readable:Z});if(s(Z))return Q({writable:Z});if(i(Z))return Q({writable:!1,readable:!1});if(c(Z))return Q({readable:x.fromWeb(Z)});if(f(Z))return Q({writable:S.fromWeb(Z)});if(typeof Z=="function"){const{value:ie,write:ne,final:ee,destroy:se}=W(Z);if(a(ie))return C(U,ie,{objectMode:!0,write:ne,final:ee,destroy:se});const G=ie==null?void 0:ie.then;if(typeof G=="function"){let X;const Y=D(G,ie,re=>{if(re!=null)throw new v("nully","body",re)},re=>{b(X,re)});return X=new U({objectMode:!0,readable:!1,write:ne,final(re){ee(async()=>{try{await Y,e.nextTick(re,null)}catch(be){e.nextTick(re,be)}})},destroy:se})}throw new v("Iterable, AsyncIterable or AsyncFunction",L,ie)}if(O(Z))return F(Z.arrayBuffer());if(a(Z))return C(U,Z,{objectMode:!0,writable:!1});if(c(Z==null?void 0:Z.readable)&&f(Z==null?void 0:Z.writable))return U.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const ie=Z!=null&&Z.readable?o(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:F(Z.readable):void 0,ne=Z!=null&&Z.writable?s(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:F(Z.writable):void 0;return Q({readable:ie,writable:ne})}const he=Z==null?void 0:Z.then;if(typeof he=="function"){let ie;return D(he,Z,ne=>{ne!=null&&ie.push(ne),ie.push(null)},ne=>{b(ie,ne)}),ie=new U({objectMode:!0,writable:!1,read(){}})}throw new g(L,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function W(F){let{promise:Z,resolve:L}=E();const he=new N,ie=he.signal;return{value:F(async function*(){for(;;){const ee=Z;Z=null;const{chunk:se,done:G,cb:X}=await ee;if(e.nextTick(X),G)return;if(ie.aborted)throw new p(void 0,{cause:ie.reason});({promise:Z,resolve:L}=E()),yield se}}(),{signal:ie}),write(ee,se,G){const X=L;L=null,X({chunk:ee,done:!1,cb:G})},final(ee){const se=L;L=null,se({done:!0,cb:ee})},destroy(ee,se){he.abort(),se(ee)}}}function Q(F){const Z=F.readable&&typeof F.readable.read!="function"?x.wrap(F.readable):F.readable,L=F.writable;let he=!!n(Z),ie=!!r(L),ne,ee,se,G,X;function Y(re){const be=G;G=null,be?be(re):re&&X.destroy(re)}return X=new U({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(L!=null&&L.writableObjectMode),readable:he,writable:ie}),ie&&(h(L,re=>{ie=!1,re&&b(Z,re),Y(re)}),X._write=function(re,be,we){L.write(re,be)?we():ne=we},X._final=function(re){L.end(),ee=re},L.on("drain",function(){if(ne){const re=ne;ne=null,re()}}),L.on("finish",function(){if(ee){const re=ee;ee=null,re()}})),he&&(h(Z,re=>{he=!1,re&&b(Z,re),Y(re)}),Z.on("readable",function(){if(se){const re=se;se=null,re()}}),Z.on("end",function(){X.push(null)}),X._read=function(){for(;;){const re=Z.read();if(re===null){se=X._read;return}if(!X.push(re))return}}),X._destroy=function(re,be){!re&&G!==null&&(re=new p),se=null,ne=null,ee=null,G===null?be(re):(G=be,b(L,re),b(Z,re))},X}return aS}var iS,fI;function Ml(){if(fI)return iS;fI=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Ur();iS=o;const a=Ew(),i=ok();r(o.prototype,a.prototype),r(o,a);{const f=n(i.prototype);for(let h=0;h<f.length;h++){const p=f[h];o.prototype[p]||(o.prototype[p]=i.prototype[p])}}function o(f){if(!(this instanceof o))return new o(f);a.call(this,f),i.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let s;function u(){return s===void 0&&(s={}),s}o.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},o.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return o.from=function(f){return c||(c=XY()),c(f,"body")},iS}var oS,hI;function jj(){if(hI)return oS;hI=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Ur();oS=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=hi().codes,r=Ml(),{getHighWaterMark:a}=Sw();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(c){if(!(this instanceof o))return new o(c);const f=c?a(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function s(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(c,f,h){throw new n("_transform()")},o.prototype._write=function(c,f,h){const p=this._readableState,g=this._writableState,v=p.length;this._transform(c,f,(b,_)=>{if(b){h(b);return}_!=null&&this.push(_),g.ended||v===p.length||p.length<p.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},oS}var sS,pI;function Mj(){if(pI)return sS;pI=1;const{ObjectSetPrototypeOf:e}=Ur();sS=n;const t=jj();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},sS}var lS,mI;function sk(){if(mI)return lS;mI=1;const e=Cd(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Ur(),i=pc(),{once:o}=Ci(),s=Ch(),u=Ml(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=hi(),{validateFunction:_,validateAbortSignal:x}=O0(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:k,isTransformStream:O,isWebStream:N,isReadableStream:D,isReadableFinished:U}=Vl(),W=globalThis.AbortController||Bm().AbortController;let Q,F,Z;function L(re,be,we){let Me=!1;re.on("close",()=>{Me=!0});const Pe=i(re,{readable:be,writable:we},Ae=>{Me=!Ae});return{destroy:Ae=>{Me||(Me=!0,s.destroyer(re,Ae||new g("pipe")))},cleanup:Pe}}function he(re){return _(re[re.length-1],"streams[stream.length - 1]"),re.pop()}function ie(re){if(S(re))return re;if(C(re))return ne(re);throw new f("val",["Readable","Iterable","AsyncIterable"],re)}async function*ne(re){F||(F=Ew()),yield*F.prototype[r].call(re)}async function ee(re,be,we,{end:Me}){let Pe,Ae=null;const Te=Ie=>{if(Ie&&(Pe=Ie),Ae){const Re=Ae;Ae=null,Re()}},qe=()=>new n((Ie,Re)=>{Pe?Re(Pe):Ae=()=>{Pe?Re(Pe):Ie()}});be.on("drain",Te);const it=i(be,{readable:!1},Te);try{be.writableNeedDrain&&await qe();for await(const Ie of re)be.write(Ie)||await qe();Me&&(be.end(),await qe()),we()}catch(Ie){we(Pe!==Ie?c(Pe,Ie):Ie)}finally{it(),be.off("drain",Te)}}async function se(re,be,we,{end:Me}){O(be)&&(be=be.writable);const Pe=be.getWriter();try{for await(const Ae of re)await Pe.ready,Pe.write(Ae).catch(()=>{});await Pe.ready,Me&&await Pe.close(),we()}catch(Ae){try{await Pe.abort(Ae),we(Ae)}catch(Te){we(Te)}}}function G(...re){return X(re,o(he(re)))}function X(re,be,we){if(re.length===1&&t(re[0])&&(re=re[0]),re.length<2)throw new p("streams");const Me=new W,Pe=Me.signal,Ae=we==null?void 0:we.signal,Te=[];x(Ae,"options.signal");function qe(){ce(new b)}Z=Z||Ci().addAbortListener;let it;Ae&&(it=Z(Ae,qe));let Ie,Re;const z=[];let Ce=0;function Ne(Se){ce(Se,--Ce===0)}function ce(Se,Ve){var xt;if(Se&&(!Ie||Ie.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Ie=Se),!(!Ie&&!Ve)){for(;z.length;)z.shift()(Ie);(xt=it)===null||xt===void 0||xt[a](),Me.abort(),Ve&&(Ie||Te.forEach(ht=>ht()),e.nextTick(be,Ie,Re))}}let ae;for(let Se=0;Se<re.length;Se++){const Ve=re[Se],xt=Se<re.length-1,ht=Se>0,Et=xt||(we==null?void 0:we.end)!==!1,Pt=Se===re.length-1;if(k(Ve)){let Tt=function(Ut){Ut&&Ut.name!=="AbortError"&&Ut.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ne(Ut)};var Le=Tt;if(Et){const{destroy:Ut,cleanup:ge}=L(Ve,xt,ht);z.push(Ut),E(Ve)&&Pt&&Te.push(ge)}Ve.on("error",Tt),E(Ve)&&Pt&&Te.push(()=>{Ve.removeListener("error",Tt)})}if(Se===0)if(typeof Ve=="function"){if(ae=Ve({signal:Pe}),!S(ae))throw new h("Iterable, AsyncIterable or Stream","source",ae)}else S(Ve)||C(Ve)||O(Ve)?ae=Ve:ae=u.from(Ve);else if(typeof Ve=="function"){if(O(ae)){var J;ae=ie((J=ae)===null||J===void 0?void 0:J.readable)}else ae=ie(ae);if(ae=Ve(ae,{signal:Pe}),xt){if(!S(ae,!0))throw new h("AsyncIterable",`transform[${Se-1}]`,ae)}else{var xe;Q||(Q=Mj());const Tt=new Q({objectMode:!0}),Ut=(xe=ae)===null||xe===void 0?void 0:xe.then;if(typeof Ut=="function")Ce++,Ut.call(ae,H=>{Re=H,H!=null&&Tt.write(H),Et&&Tt.end(),e.nextTick(Ne)},H=>{Tt.destroy(H),e.nextTick(Ne,H)});else if(S(ae,!0))Ce++,ee(ae,Tt,Ne,{end:Et});else if(D(ae)||O(ae)){const H=ae.readable||ae;Ce++,ee(H,Tt,Ne,{end:Et})}else throw new h("AsyncIterable or Promise","destination",ae);ae=Tt;const{destroy:ge,cleanup:I}=L(ae,!1,!0);z.push(ge),Pt&&Te.push(I)}}else if(k(Ve)){if(C(ae)){Ce+=2;const Tt=Y(ae,Ve,Ne,{end:Et});E(Ve)&&Pt&&Te.push(Tt)}else if(O(ae)||D(ae)){const Tt=ae.readable||ae;Ce++,ee(Tt,Ve,Ne,{end:Et})}else if(S(ae))Ce++,ee(ae,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ae);ae=Ve}else if(N(Ve)){if(C(ae))Ce++,se(ie(ae),Ve,Ne,{end:Et});else if(D(ae)||S(ae))Ce++,se(ae,Ve,Ne,{end:Et});else if(O(ae))Ce++,se(ae.readable,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ae);ae=Ve}else ae=u.from(Ve)}return(Pe!=null&&Pe.aborted||Ae!=null&&Ae.aborted)&&e.nextTick(qe),ae}function Y(re,be,we,{end:Me}){let Pe=!1;if(be.on("close",()=>{Pe||we(new v)}),re.pipe(be,{end:!1}),Me){let Te=function(){Pe=!0,be.end()};var Ae=Te;U(re)?e.nextTick(Te):re.once("end",Te)}else we();return i(re,{readable:!0,writable:!1},Te=>{const qe=re._readableState;Te&&Te.code==="ERR_STREAM_PREMATURE_CLOSE"&&qe&&qe.ended&&!qe.errored&&!qe.errorEmitted?re.once("end",we).once("error",we):we(Te)}),i(be,{readable:!1,writable:!0},we)}return lS={pipelineImpl:X,pipeline:G},lS}var uS,gI;function Pj(){if(gI)return uS;gI=1;const{pipeline:e}=sk(),t=Ml(),{destroyer:n}=Ch(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:u,isReadableStream:c}=Vl(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:p}}=hi(),g=pc();return uS=function(...b){if(b.length===0)throw new p("streams");if(b.length===1)return t.from(b[0]);const _=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const Q=b.length-1;b[Q]=t.from(b[Q])}for(let Q=0;Q<b.length;++Q)if(!(!r(b[Q])&&!o(b[Q]))){if(Q<b.length-1&&!(a(b[Q])||c(b[Q])||s(b[Q])))throw new h(`streams[${Q}]`,_[Q],"must be readable");if(Q>0&&!(i(b[Q])||u(b[Q])||s(b[Q])))throw new h(`streams[${Q}]`,_[Q],"must be writable")}let x,S,E,C,k;function O(Q){const F=C;C=null,F?F(Q):Q?k.destroy(Q):!W&&!U&&k.destroy()}const N=b[0],D=e(b,O),U=!!(i(N)||u(N)||s(N)),W=!!(a(D)||c(D)||s(D));if(k=new t({writableObjectMode:!!(N!=null&&N.writableObjectMode),readableObjectMode:!!(D!=null&&D.readableObjectMode),writable:U,readable:W}),U){if(r(N))k._write=function(F,Z,L){N.write(F,Z)?L():x=L},k._final=function(F){N.end(),S=F},N.on("drain",function(){if(x){const F=x;x=null,F()}});else if(o(N)){const Z=(s(N)?N.writable:N).getWriter();k._write=async function(L,he,ie){try{await Z.ready,Z.write(L).catch(()=>{}),ie()}catch(ne){ie(ne)}},k._final=async function(L){try{await Z.ready,Z.close().catch(()=>{}),S=L}catch(he){L(he)}}}const Q=s(D)?D.readable:D;g(Q,()=>{if(S){const F=S;S=null,F()}})}if(W){if(r(D))D.on("readable",function(){if(E){const Q=E;E=null,Q()}}),D.on("end",function(){k.push(null)}),k._read=function(){for(;;){const Q=D.read();if(Q===null){E=k._read;return}if(!k.push(Q))return}};else if(o(D)){const F=(s(D)?D.readable:D).getReader();k._read=async function(){for(;;)try{const{value:Z,done:L}=await F.read();if(!k.push(Z))return;if(L){k.push(null);return}}catch{return}}}}return k._destroy=function(Q,F){!Q&&C!==null&&(Q=new f),E=null,x=null,S=null,C===null?F(Q):(C=F,r(D)&&n(D,Q))},k},uS}var yI;function JY(){if(yI)return $y;yI=1;const e=globalThis.AbortController||Bm().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=hi(),{validateAbortSignal:o,validateInteger:s,validateObject:u}=O0(),c=Ur().Symbol("kWeak"),f=Ur().Symbol("kResistStopPropagation"),{finished:h}=pc(),p=Pj(),{addAbortSignalNoValidate:g}=xw(),{isWritable:v,isNodeStream:b}=Vl(),{deprecate:_}=Ci(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:k,Promise:O,PromiseReject:N,PromiseResolve:D,PromisePrototypeThen:U,Symbol:W}=Ur(),Q=W("kEmpty"),F=W("kEof");function Z(Ae,Te){if(Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),b(Ae)&&!v(Ae))throw new t("stream",Ae,"must be writable");const qe=p(this,Ae);return Te!=null&&Te.signal&&g(Te.signal,qe),qe}function L(Ae,Te){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal");let qe=1;(Te==null?void 0:Te.concurrency)!=null&&(qe=E(Te.concurrency));let it=qe-1;return(Te==null?void 0:Te.highWaterMark)!=null&&(it=E(Te.highWaterMark)),s(qe,"options.concurrency",1),s(it,"options.highWaterMark",0),it+=qe,(async function*(){const Re=Ci().AbortSignalAny([Te==null?void 0:Te.signal].filter(S)),z=this,Ce=[],Ne={signal:Re};let ce,ae,J=!1,xe=0;function Le(){J=!0,Se()}function Se(){xe-=1,Ve()}function Ve(){ae&&!J&&xe<qe&&Ce.length<it&&(ae(),ae=null)}async function xt(){try{for await(let ht of z){if(J)return;if(Re.aborted)throw new i;try{if(ht=Ae(ht,Ne),ht===Q)continue;ht=D(ht)}catch(Et){ht=N(Et)}xe+=1,U(ht,Se,Le),Ce.push(ht),ce&&(ce(),ce=null),!J&&(Ce.length>=it||xe>=qe)&&await new O(Et=>{ae=Et})}Ce.push(F)}catch(ht){const Et=N(ht);U(Et,Se,Le),Ce.push(Et)}finally{J=!0,ce&&(ce(),ce=null)}}xt();try{for(;;){for(;Ce.length>0;){const ht=await Ce[0];if(ht===F)return;if(Re.aborted)throw new i;ht!==Q&&(yield ht),Ce.shift(),Ve()}await new O(ht=>{ce=ht})}}finally{J=!0,ae&&(ae(),ae=null)}}).call(this)}function he(Ae=void 0){return Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal"),(async function*(){let qe=0;for await(const Ie of this){var it;if(Ae!=null&&(it=Ae.signal)!==null&&it!==void 0&&it.aborted)throw new i({cause:Ae.signal.reason});yield[qe++,Ie]}}).call(this)}async function ie(Ae,Te=void 0){for await(const qe of G.call(this,Ae,Te))return!0;return!1}async function ne(Ae,Te=void 0){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);return!await ie.call(this,async(...qe)=>!await Ae(...qe),Te)}async function ee(Ae,Te){for await(const qe of G.call(this,Ae,Te))return qe}async function se(Ae,Te){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);async function qe(it,Ie){return await Ae(it,Ie),Q}for await(const it of L.call(this,qe,Te));}function G(Ae,Te){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);async function qe(it,Ie){return await Ae(it,Ie)?it:Q}return L.call(this,qe,Te)}class X extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Y(Ae,Te,qe){var it;if(typeof Ae!="function")throw new n("reducer",["Function","AsyncFunction"],Ae);qe!=null&&u(qe,"options"),(qe==null?void 0:qe.signal)!=null&&o(qe.signal,"options.signal");let Ie=arguments.length>1;if(qe!=null&&(it=qe.signal)!==null&&it!==void 0&&it.aborted){const ce=new i(void 0,{cause:qe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(ce)),ce}const Re=new e,z=Re.signal;if(qe!=null&&qe.signal){const ce={once:!0,[c]:this,[f]:!0};qe.signal.addEventListener("abort",()=>Re.abort(),ce)}let Ce=!1;try{for await(const ce of this){var Ne;if(Ce=!0,qe!=null&&(Ne=qe.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new i;Ie?Te=await Ae(Te,ce,{signal:z}):(Te=ce,Ie=!0)}if(!Ce&&!Ie)throw new X}finally{Re.abort()}return Te}async function re(Ae){Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal");const Te=[];for await(const it of this){var qe;if(Ae!=null&&(qe=Ae.signal)!==null&&qe!==void 0&&qe.aborted)throw new i(void 0,{cause:Ae.signal.reason});x(Te,it)}return Te}function be(Ae,Te){const qe=L.call(this,Ae,Te);return(async function*(){for await(const Ie of qe)yield*Ie}).call(this)}function we(Ae){if(Ae=C(Ae),k(Ae))return 0;if(Ae<0)throw new a("number",">= 0",Ae);return Ae}function Me(Ae,Te=void 0){return Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),Ae=we(Ae),(async function*(){var it;if(Te!=null&&(it=Te.signal)!==null&&it!==void 0&&it.aborted)throw new i;for await(const Re of this){var Ie;if(Te!=null&&(Ie=Te.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new i;Ae--<=0&&(yield Re)}}).call(this)}function Pe(Ae,Te=void 0){return Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),Ae=we(Ae),(async function*(){var it;if(Te!=null&&(it=Te.signal)!==null&&it!==void 0&&it.aborted)throw new i;for await(const Re of this){var Ie;if(Te!=null&&(Ie=Te.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new i;if(Ae-- >0&&(yield Re),Ae<=0)return}}).call(this)}return $y.streamReturningOperators={asIndexedPairs:_(he,"readable.asIndexedPairs will be removed in a future version."),drop:Me,filter:G,flatMap:be,map:L,take:Pe,compose:Z},$y.promiseReturningOperators={every:ne,forEach:se,reduce:Y,toArray:re,some:ie,find:ee},$y}var cS,bI;function Fj(){if(bI)return cS;bI=1;const{ArrayPrototypePop:e,Promise:t}=Ur(),{isIterable:n,isNodeStream:r,isWebStream:a}=Vl(),{pipelineImpl:i}=sk(),{finished:o}=pc();Lj();function s(...u){return new t((c,f)=>{let h,p;const g=u[u.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(u);h=v.signal,p=v.end}i(u,(v,b)=>{v?f(v):c(b)},{signal:h,end:p})})}return cS={finished:o,pipeline:s},cS}var vI;function Lj(){if(vI)return Bx.exports;vI=1;const{Buffer:e}=hc(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Ur(),{promisify:{custom:a}}=Ci(),{streamReturningOperators:i,promiseReturningOperators:o}=JY(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=hi(),u=Pj(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=Sw(),{pipeline:h}=sk(),{destroyer:p}=Ch(),g=pc(),v=Fj(),b=Vl(),_=Bx.exports=ak().Stream;_.isDestroyed=b.isDestroyed,_.isDisturbed=b.isDisturbed,_.isErrored=b.isErrored,_.isReadable=b.isReadable,_.isWritable=b.isWritable,_.Readable=Ew();for(const E of n(i)){let k=function(...O){if(new.target)throw s();return _.Readable.from(r(C,this,O))};var S=k;const C=i[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let k=function(...N){if(new.target)throw s();return r(C,this,N)};var S=k;const C=o[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}_.Writable=ok(),_.Duplex=Ml(),_.Transform=jj(),_.PassThrough=Mj(),_.pipeline=h;const{addAbortSignal:x}=xw();return _.addAbortSignal=x,_.finished=g,_.destroy=p,_.compose=u,_.setDefaultHighWaterMark=c,_.getDefaultHighWaterMark=f,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),_.Stream=_,_._isUint8Array=function(C){return C instanceof Uint8Array},_._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},Bx.exports}var wI;function QY(){return wI||(wI=1,function(e){const t=Lj(),n=Fj(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}($x)),$x.exports}var $j=QY();class lk extends $j.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(st.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(st.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class uk extends $j.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Ka(new Ue(st.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Ka(new Ue(st.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(st.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(st.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(st.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Eo=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Co=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Ya{get position(){return this.flag&sd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=ti(t,n);Object.assign(this,gd(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&yw||this.inode.flags&xi.Sync)}_emitChange(){La(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,gj(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=dc(t,-1);if(n<0)throw new Ue(st.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>br?-61441:br)|n,(this._isSync||n>br)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(st.EINVAL);if(this.dirty=!0,!(this.flag&Wa||this.flag&Al))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Fb(t),this.inode.mtimeMs=Fb(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Tl(n,"utf8","a",420);if(!(Rl(r.flag)&sd))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Rr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Wa)throw new Ue(st.EPERM,"File not opened with a readable mode");this.inode.flags&xi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Fm(this.inode)&&!Pm(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Tl(t,null,"r",292);if(Rl(n.flag)&Wa)throw new Ue(st.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Rr.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Wa)throw Ue.With("EBADF",this.path,"readLines");return bY({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!ar(this.context,this.inode,ma))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new xd(this.inode):new Hl(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Wa||this.flag&Al))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Fm(this.inode)&&!Pm(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Rr.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const u=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:u}}async writeFile(t,n={}){const r=Tl(n,"utf8","w",420),a=Rl(r.flag);if(!(a&Wa||a&Al))throw new Ue(st.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Rr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),wj(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Wa)throw Ue.With("EBADF",this.path,"createReadStream");return new lk(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"createWriteStream");return new uk(t,this)}}async function ck(e,t){e=ln(e),t=ln(t);const n=Pn(e,this),r=Pn(t,this);if(!(await So.call(this,Xn(e))).hasAccess(Kr,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),La(this,"rename",e.toString()),La(this,"change",t.toString());return}await P0.call(this,t,await M0(e)),await j0.call(this,e),La(this,"rename",e.toString())}catch(a){throw ir(a,{[n.path]:e,[r.path]:t})}}async function D0(e){try{const{fs:t,path:n}=Pn(await gc.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function So(e,t){e=ln(e);const{fs:n,path:r}=Pn(await gc.call(this,e),this);try{const a=await n.stat(r);if(ga&&!ar(this,a,ma))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new xd(a):new Hl(a)}catch(a){throw ir(a,{[r]:e})}}async function Cw(e,t){e=ln(e);const{fs:n,path:r}=Pn(e,this);try{const a=await n.stat(r);if(ga&&!ar(this,a,ma))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new xd(a):new Hl(a)}catch(a){throw ir(a,{[r]:e})}}async function Bj(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Eo(n,await ko.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function j0(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{if(ga&&!ar(this,await t.stat(n),Kr))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),La(this,"rename",e.toString())}catch(r){throw ir(r,{[n]:e})}}async function kh(e,t,n){var r;t=ln(t);const a=dc(n.mode,420),i=Rl(n.flag),{fullPath:o,fs:s,path:u,stats:c}=await zb(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&pw))throw Ue.With("ENOENT",o,"_open");const h=await s.stat(Xn(u));if(!ar(e,h,Kr))throw Ue.With("EACCES",Xn(o),"_open");if(!Wo(h))throw Ue.With("ENOTDIR",Xn(o),"_open");const{euid:p,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:Qo.credentials,v=await s.createFile(u,{mode:a,uid:h.mode&T0?h.uid:p,gid:h.mode&R0?h.gid:g});return new Ya(e,$b(new Lb(e,t,s,u,i,v)))}if(!ar(e,c,_j(i)))throw Ue.With("EACCES",o,"_open");if(i&mw)throw Ue.With("EEXIST",o,"_open");const f=new Ya(e,$b(new Lb(e,t,s,u,i,c)));return i&gw&&await f.truncate(0),f}async function ko(e,t="r",n=420){return await kh(this,e,{flag:t,mode:n})}async function M0(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Tl(t,null,"r",292);return await Eo(n,typeof e=="object"&&"fd"in e?e:await ko.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function P0(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","w+",420),i=Eo(r,e instanceof Ya?e:await ko.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new Ue(st.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function zj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","a",420);if(!(Rl(a.flag)&sd))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Eo(r,typeof e=="object"&&"fd"in e?e:await ko.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function dk(e){e=await gc.call(this,e);const{fs:t,path:n}=Pn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!Wo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ga&&!ar(this,r,Kr))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),La(this,"rename",e.toString())}catch(r){throw ir(r,{[n]:e})}}async function F0(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Qo.credentials;t=typeof t=="object"?t:{mode:t};const o=dc(t==null?void 0:t.mode,511);e=await gc.call(this,e);const{fs:s,path:u,root:c}=Pn(e,this),f={[u]:e},h=async(p,g)=>{if(!ar(this,g,Kr))throw Ue.With("EACCES",Xn(p),"mkdir");const v=await s.mkdir(p,{mode:o,uid:g.mode&T0?g.uid:a,gid:g.mode&R0?g.gid:i});return La(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){await h(u,await s.stat(Xn(u)));return}const p=[];for(let v=u,b=e;!await s.exists(v);v=Xn(v),b=Xn(b))p.unshift(v),f[v]=b;if(!p.length)return;const g=[await s.stat(Xn(p[0]))];for(const[v,b]of p.entries())g.push(await h(b,g[v]));return c.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(c.length)}catch(p){throw ir(p,f)}}async function mc(e,t){t=typeof t=="object"?t:{encoding:t},e=await gc.call(this,e);const{fs:n,path:r}=Pn(e,this),a=await n.stat(r).catch(u=>lr(ir(u,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!ar(this,a,ma))throw Ue.With("EACCES",e,"readdir");if(!Wo(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(u=>lr(ir(u,{[r]:e}))),o=[],s=async u=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(tr(r,u)).catch(f=>{if(f.code!="ENOENT")throw ir(f,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?o.push(new $m(u,c)):(t==null?void 0:t.encoding)=="buffer"?o.push(Rr.from(u)):o.push(u),!(!(t!=null&&t.recursive)||!Wo(c))))for(const f of await mc.call(this,tr(e,u),t))f instanceof $m?(f.path=tr(u,f.path),o.push(f)):Rr.isBuffer(f)?o.push(Rr.from(tr(u,jC(f)))):o.push(tr(u,f))};return await Promise.all(i.map(s)),o}async function Uj(e,t){e=ln(e),t=ln(t);const{fs:n,path:r}=Pn(e,this),a=Pn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ga&&!ar(this,await n.stat(Xn(r)),ma))throw Ue.With("EACCES",Xn(r),"link");if(ga&&!(await So.call(this,Xn(t))).hasAccess(Kr,this))throw Ue.With("EACCES",Xn(t),"link");if(ga&&!ar(this,await n.stat(r),ma))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw ir(i,{[a.path]:t,[r]:e})}}async function qj(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(st.EINVAL,"Invalid symlink type: "+n);if(t=ln(t),await D0.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=Eo(r,await kh(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(ln(e,!0)),await a.chmod(ql)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function Bb(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Eo(n,await kh(this,ln(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function Hj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await ko.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function Vj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await kh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function Gj(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Eo(n,await ko.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function Wj(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Eo(n,await kh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function fk(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await ko.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function Kj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await kh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function zb(e,t,n){if(n){const u=Pn(t,e),c=await u.fs.stat(u.path).catch(()=>{});return{...u,fullPath:t,stats:c}}try{const u=Pn(t,e),c=await u.fs.stat(u.path);if(!Qf(c))return{...u,fullPath:t,stats:c};const f=jl.call(e,Xn(t),(await Bb.call(e,t)).toString());return await zb(e,f)}catch{}const{base:r,dir:a}=xs(t),i=a=="/"?"/":await gc.call(e,a),o=tr(i,r),s=Pn(o,e);try{const u=await s.fs.stat(s.path);if(!Qf(u))return{...s,fullPath:o,stats:u};const c=jl.call(e,i,(await Bb.call(e,o)).toString());return await zb(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw ir(u,{[s.path]:o})}}async function gc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=await zb(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Rr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function eX(e,t={}){const n=new Cj(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var u;(u=r.shift())===null||u===void 0||u({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function Zj(e,t=zC){if(!(await So.call(this,e)).hasAccess(t,this))throw new Ue(st.EACCES)}async function L0(e,t){e=ln(e);const n=await Cw.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&br){case oa:if(t!=null&&t.recursive)for(const r of await mc.call(this,e))await L0.call(this,tr(e,r),t);await dk.call(this,e);break;case Uo:case ql:case vd:case wd:await j0.call(this,e);break;case _d:case bd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}}async function Yj(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await F0.call(this,a),n=="buffer"?Rr.from(a):a}async function hk(e,t,n){if(e=ln(e),t=ln(t),n&&n&UC&&await D0.call(this,t))throw new Ue(st.EEXIST,"Destination file already exists",t,"copyFile");await P0.call(this,t,await M0.call(this,e)),La(this,"rename",t.toString())}function Xj(e,t){return e=ln(e),Promise.resolve(new rk(e,this))}async function pk(e,t,n){e=ln(e),t=ln(t);const r=await Cw.call(this,e);if(n!=null&&n.errorOnExist&&await D0.call(this,t))throw new Ue(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&br){case oa:{if(!(n!=null&&n.recursive))throw new Ue(st.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([mc.call(this,e,{withFileTypes:!0}),F0.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(tr(e,o.name),tr(t,o.name))||await pk.call(this,tr(e,o.name),tr(t,o.name),n)};await Promise.all(a.map(i));break}case Uo:case ql:await hk.call(this,e,t);break;case vd:case wd:case _d:case bd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await fk.call(this,t,r.atime,r.mtime)}async function Jj(e,t){e=ln(e);const{fs:n}=Pn(e,this);return Promise.resolve(Sj(n,t==null?void 0:t.bigint))}function Qj(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const u=await mc(s,{withFileTypes:r,encoding:"utf8"});for(const c of u){const f=r?c.path:s+"/"+c;a(r?c:f)||((await So(f)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(f)),i.some(h=>h.test(f.replace(/^\/+/g,"")))&&(yield r?c:f.replace(/^\/+/g,"")))}}return o(n)}const tX=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Ya,access:Zj,appendFile:zj,chmod:Gj,chown:Hj,constants:pj,copyFile:hk,cp:pk,exists:D0,glob:Qj,lchmod:Wj,lchown:Vj,link:Uj,lstat:Cw,lutimes:Kj,mkdir:F0,mkdtemp:Yj,open:ko,opendir:Xj,readFile:M0,readdir:mc,readlink:Bb,realpath:gc,rename:ck,rm:L0,rmdir:dk,stat:So,statfs:Jj,symlink:qj,truncate:Bj,unlink:j0,utimes:fk,watch:eX,writeFile:P0},Symbol.toStringTag,{value:"Module"})),En=()=>{};async function nX(e){const t=[];for await(const n of e)t.push(n);return t}function rX(e,t,n=En){ck.call(this,e,t).then(()=>n()).catch(n)}function aX(e,t=En){D0.call(this,e).then(t).catch(()=>t(!1))}function iX(e,t,n=En){n=typeof t=="function"?t:n,So.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function oX(e,t,n=En){n=typeof t=="function"?t:n,Cw.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function sX(e,t=0,n=En){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;Bj.call(this,e,r).then(()=>n()).catch(n)}function lX(e,t=En){j0.call(this,e).then(()=>t()).catch(t)}function uX(e,t,n,r=En){const a=dc(n,420);r=typeof n=="function"?n:r,ko.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function cX(e,t,n=En){n=typeof t=="function"?t:n,M0.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function dX(e,t,n,r=En){r=typeof n=="function"?n:r,P0.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function fX(e,t,n,r=En){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,zj.call(this,e,t,a).then(()=>r()).catch(r)}function hX(e,t,n=En){n=typeof t=="function"?t:n,new Ya(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new xd(r):r)).catch(n)}function pX(e,t=En){new Ya(this,e).close().then(()=>t()).catch(t)}function mX(e,t,n=En){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new Ya(this,e);if(r<0)throw new Ue(st.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function gX(e,t=En){new Ya(this,e).sync().then(()=>t()).catch(t)}function yX(e,t=En){new Ya(this,e).datasync().then(()=>t()).catch(t)}function bX(e,t,n,r,a,i=En){let o,s,u,c,f;const h=new Ya(this,e);if(typeof t=="string"){switch(f="utf8",typeof n){case"function":i=n;break;case"number":c=n,f=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(st.EINVAL,"Invalid arguments"));return}o=Rr.from(t),s=0,u=o.length;const p=i;h.write(o,s,u,c).then(({bytesWritten:g})=>p(void 0,g,o.toString(f))).catch(p)}else{o=Rr.from(t.buffer),s=n,u=r,c=typeof a=="number"?a:null;const p=typeof a=="function"?a:i;h.write(o,s,u,c).then(({bytesWritten:g})=>p(void 0,g,o)).catch(p)}}function vX(e,t,n,r,a,i=En){new Ya(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function wX(e,t,n,r=En){new Ya(this,e).chown(t,n).then(()=>r()).catch(r)}function _X(e,t,n){new Ya(this,e).chmod(t).then(()=>n()).catch(n)}function xX(e,t,n,r=En){new Ya(this,e).utimes(t,n).then(()=>r()).catch(r)}function SX(e,t=En){dk.call(this,e).then(()=>t()).catch(t)}function EX(e,t,n=En){F0.call(this,e,t).then(()=>n()).catch(n)}function CX(e,t,n=En){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};mc.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function kX(e,t,n=En){Uj.call(this,e,t).then(()=>n()).catch(n)}function AX(e,t,n,r=En){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,qj.call(this,e,t,a).then(()=>r()).catch(r)}function TX(e,t,n=En){n=typeof t=="function"?t:n,Bb.call(this,e).then(r=>n(void 0,r)).catch(n)}function RX(e,t,n,r=En){Hj.call(this,e,t,n).then(()=>r()).catch(r)}function NX(e,t,n,r=En){Vj.call(this,e,t,n).then(()=>r()).catch(r)}function IX(e,t,n=En){Gj.call(this,e,t).then(()=>n()).catch(n)}function OX(e,t,n=En){Wj.call(this,e,t).then(()=>n()).catch(n)}function DX(e,t,n,r=En){fk.call(this,e,t,n).then(()=>r()).catch(r)}function jX(e,t,n,r=En){Kj.call(this,e,t,n).then(()=>r()).catch(r)}function MX(e,t,n=En){n=typeof t=="function"?t:n,gc.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function PX(e,t,n=En){const r=typeof t=="number"?t:ma;n=typeof t=="function"?t:n,Zj.call(this,e,r).then(()=>n()).catch(n)}const jf=new Map;function FX(e,t,n){const r=ln(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(st.EINVAL,"No listener specified",e.toString(),"watchFile");if(jf.has(r)){const o=jf.get(r);o&&o.listeners.add(n);return}const i=new SY(this,r,a);i.on("change",(o,s)=>{const u=jf.get(r);if(u)for(const c of u.listeners)c(o,s)}),jf.set(r,{watcher:i,listeners:new Set})}function LX(e,t=En){const n=ln(e),r=jf.get(n);r&&(t&&t!==En?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),jf.delete(n)))}function $X(e,t,n){const r=new Cj(this,ln(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||En),r}function BX(e,t){t=typeof t=="object"?t:{encoding:t};const n=ko.call(this,e,"r",t==null?void 0:t.mode);return new lk({...t,autoClose:!0},n)}function zX(e,t){t=typeof t=="object"?t:{encoding:t};const n=ko.call(this,e,"w",t==null?void 0:t.mode);return new uk(t,n)}function UX(e,t,n=En){n=typeof t=="function"?t:n,L0.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function qX(e,t,n=En){n=typeof t=="function"?t:n,Yj.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function HX(e,t,n,r=En){r=typeof n=="function"?n:r,hk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function VX(e,t,n,r=En){r=typeof n=="function"?n:r,new Ya(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function GX(e,t,n,r=En){r=typeof n=="function"?n:r,new Ya(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function WX(e,t,n=En){n=typeof t=="function"?t:n,Xj.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function KX(e,t,n,r=En){r=typeof n=="function"?n:r,pk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function ZX(e,t,n=En){n=typeof t=="function"?t:n,Jj.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function YX(e,t){const n=await ko.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function XX(e,t,n=En){n=typeof t=="function"?t:n;const r=Qj.call(this,e,typeof t=="function"?void 0:t);nX(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Hc=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),p=!0},Ui=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},JX=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},Ub;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(Ub||(Ub={}));let e8=(()=>{var e,t,n,r,a;let i=[yd()],o,s=[],u,c,f=[],h=[],p,g=[],v=[],b,_=[],x=[],S,E=[],C=[],k,O=[],N=[],D,U=[],W=[];return u=class{constructor(Q=lr(new Ue(st.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Ui(this,f,0),this.extsize=(Ui(this,h),Ui(this,g,0)),this.nextents=(Ui(this,v),Ui(this,_,0)),this.projid=(Ui(this,x),Ui(this,E,0)),this.cowextsize=(Ui(this,C),Ui(this,O,0)),this.pad=(Ui(this,N),Ui(this,U,[])),Ui(this,W),this.extsize=Q.size,this.nextents=1,this.projid=Q.uid,this.cowextsize=Q.size;for(const F of Object.keys(xi))Q.flags&xi[F]&&F in Ub&&(this.xflags|=Ub[F])}},JX(u,"fsxattr"),(()=>{const Q=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=gn).uint32.bind(e)],p=[(t=gn).uint32.bind(t)],b=[(n=gn).uint32.bind(n)],S=[(r=gn).uint32.bind(r)],k=[(a=gn).uint32.bind(a)],D=[gn.char(8)],Hc(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:F=>"xflags"in F,get:F=>F.xflags,set:(F,Z)=>{F.xflags=Z}},metadata:Q},f,h),Hc(null,null,p,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:F=>"extsize"in F,get:F=>F.extsize,set:(F,Z)=>{F.extsize=Z}},metadata:Q},g,v),Hc(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:F=>"nextents"in F,get:F=>F.nextents,set:(F,Z)=>{F.nextents=Z}},metadata:Q},_,x),Hc(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:F=>"projid"in F,get:F=>F.projid,set:(F,Z)=>{F.projid=Z}},metadata:Q},E,C),Hc(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:F=>"cowextsize"in F,get:F=>F.cowextsize,set:(F,Z)=>{F.cowextsize=Z}},metadata:Q},O,N),Hc(null,null,D,{kind:"field",name:"pad",static:!1,private:!1,access:{has:F=>"pad"in F,get:F=>F.pad,set:(F,Z)=>{F.pad=Z}},metadata:Q},U,W),Hc(null,o={value:u},i,{kind:"class",name:u.name,metadata:Q},null,s),u=o.value,Q&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q}),Ui(u,s)})(),u})();var Dr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Dr||(Dr={}));var $o;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})($o||($o={}));async function QX(e,t,...n){e=ln(e);const{fs:r,path:a}=Pn(e,this);try{const i=new ia(await r.stat(a));switch(t){case Dr.GetFlags:case $o.GetFlags:return i.flags;case Dr.SetFlags:case $o.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Dr.GetVersion:case $o.GetVersion:return i.version;case Dr.SetVersion:case $o.SetVersion:i.version=n[0],await r.touch(a,i);return;case Dr.Fiemap:break;case Dr.GetXattr:return new e8(i);case Dr.SetXattr:break;case Dr.GetLabel:return r.label;case Dr.SetLabel:r.label=n[0];return;case Dr.GetUUID:return r.uuid;case Dr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw ir(i,{[a]:e})}throw new Ue(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function eJ(e,t,...n){e=ln(e);const{fs:r,path:a}=Pn(e,this);try{const i=new ia(r.statSync(a));switch(t){case Dr.GetFlags:case $o.GetFlags:return i.flags;case Dr.SetFlags:case $o.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Dr.GetVersion:case $o.GetVersion:return i.version;case Dr.SetVersion:case $o.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Dr.Fiemap:break;case Dr.GetXattr:return new e8(i);case Dr.SetXattr:break;case Dr.GetLabel:return r.label;case Dr.SetLabel:r.label=n[0];return;case Dr.GetUUID:return r.uuid;case Dr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw ir(i,{[a]:e})}throw new Ue(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const tJ=[];function Ah(e,t,n,r){if(!t.startsWith("user.")&&!tJ.includes(t))throw new Ue(st.EPERM,"Only attributes in the user namespace are supported",n,r)}async function nJ(e,t,n={}){var r;e=ln(e);const{fs:a,path:i}=Pn(e,this);Ah(this,t,e,"xattr.get");try{const o=await a.stat(i);if(ga&&!ar(this,o,ma))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Wu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Rr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw ir(o,{[i]:e})}}function rJ(e,t,n={}){var r;e=ln(e),Ah(this,t,e,"xattr.get");const{fs:a,path:i}=Pn(e,this);try{const o=a.statSync(i);if(ga&&!ar(this,o,ma))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Wu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Rr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw ir(o,{[i]:e})}}async function aJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Pn(e,this);Ah(this,t,e,"xattr.set");try{const s=await i.stat(o);if(ga&&!ar(this,s,Kr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Wu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Rr.from(n)),await i.touch(o,gd(s,"attributes"))}catch(s){throw ir(s,{[o]:e})}}function iJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Pn(e,this);Ah(this,t,e,"xattr.set");try{const s=i.statSync(o);if(ga&&!ar(this,s,Kr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Wu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Rr.from(n)),i.touchSync(o,gd(s,"attributes"))}catch(s){throw ir(s,{[o]:e})}}async function oJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Pn(e,this);Ah(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(ga&&!ar(this,i,Kr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Wu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,gd(i,"attributes"))}catch(i){throw ir(i,{[a]:e})}}function sJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Pn(e,this);Ah(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(ga&&!ar(this,i,Kr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Wu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,gd(i,"attributes"))}catch(i){throw ir(i,{[a]:e})}}async function lJ(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw ir(r,{[n]:e})}}function uJ(e){e=ln(e);const{fs:t,path:n}=Pn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw ir(r,{[n]:e})}}const cJ=Object.freeze(Object.defineProperty({__proto__:null,get:nJ,getSync:rJ,list:lJ,listSync:uJ,remove:oJ,removeSync:sJ,set:aJ,setSync:iJ},Symbol.toStringTag,{value:"Module"})),Fa=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:XZ,Dir:rk,Dirent:$m,get IOC(){return Dr},get IOC32(){return $o},ReadStream:lk,Stats:Hl,StatsFs:YZ,WriteStream:uk,access:PX,accessSync:UY,appendFile:fX,appendFileSync:TY,chmod:IX,chmodSync:$Y,chown:RX,chownSync:FY,chroot:_Y,close:pX,closeSync:Ed,constants:pj,copyFile:HX,copyFileSync:Nj,cp:KX,cpSync:Ij,createReadStream:BX,createWriteStream:zX,exists:aX,existsSync:KC,fchmod:_X,fchmodSync:ek,fchown:wX,fchownSync:QC,fdatasync:yX,fdatasyncSync:OY,fstat:hX,fstatSync:RY,fsync:gX,fsyncSync:IY,ftruncate:mX,ftruncateSync:NY,futimes:xX,futimesSync:tk,glob:XX,globSync:KY,ioctl:QX,ioctlSync:eJ,lchmod:OX,lchmodSync:BY,lchown:NX,lchownSync:LY,link:kX,linkSync:MY,lopenSync:ww,lstat:oX,lstatSync:ZC,lutimes:jX,lutimesSync:zY,mkdir:EX,mkdirSync:nk,mkdtemp:qX,mkdtempSync:qY,mount:WC,open:uX,openAsBlob:YX,openSync:vw,opendir:WX,opendirSync:GY,promises:tX,read:vX,readFile:cX,readFileSync:XC,readSync:jY,readdir:CX,readdirSync:Eh,readlink:TX,readlinkSync:rE,readv:VX,readvSync:HY,realpath:MX,realpathSync:fc,rename:rX,renameSync:kY,rm:UX,rmSync:Rj,rmdir:SX,rmdirSync:Aj,stat:iX,statSync:Ku,statfs:ZX,statfsSync:WY,symlink:AX,symlinkSync:PY,truncate:sX,truncateSync:AY,umount:xj,unlink:lX,unlinkSync:YC,unwatchFile:LX,utimes:DX,utimesSync:Tj,watch:$X,watchFile:FX,write:bX,writeFile:dX,writeFileSync:JC,writeSync:DY,writev:GX,writevSync:VY,xattr:cJ},Symbol.toStringTag,{value:"Module"}));function _I(e){return rj(e)||BC(e)||e instanceof HC}async function t8(e,t=0){if(typeof e!="object"||e==null)throw _i(new Ue(st.EINVAL,"Invalid options on mount configuration"));if(!_I(e))throw _i(new Ue(st.EINVAL,"Invalid mount configuration"));if(e instanceof HC)return await e.ready(),e;BC(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&_I(i)){if(nj("Resolving nested mount configuration: "+a),t>10)throw _i(new Ue(st.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await t8(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw _i(new Ue(st.EPERM,"Backend not available: "+n.name));DZ(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function dJ(e){if(!rj(e))throw new TypeError("Invalid single mount point configuration");const t=await t8(e);xj("/"),WC("/",t)}const fJ=["delete"];Math.max(...fJ.map(e=>e.length));OZ("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const n8=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;n8[e]=t}function hJ(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^n8[(t^e[n])&255];return(t^4294967295)>>>0}var Or=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),p=!0},wn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},mk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let xI=(()=>{var e,t,n,r;let a=[yd()],i,o=[],s,u,c=[],f=[],h,p=[],g=[],v,b=[],_=[],x,S=[],E=[];return s=class{constructor(){this.id=wn(this,c,0),this.offset_=(wn(this,f),wn(this,p,0)),this.offset=(wn(this,g),wn(this,b,0)),this.size=(wn(this,_),wn(this,S,0)),wn(this,E)}},mk(s,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],v=[(n=gn).uint32.bind(n)],x=[(r=gn).uint32.bind(r)],Or(null,null,u,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,O)=>{k.id=O}},metadata:C},c,f),Or(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,O)=>{k.offset_=O}},metadata:C},p,g),Or(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,O)=>{k.offset=O}},metadata:C},b,_),Or(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,O)=>{k.size=O}},metadata:C},S,E),Or(null,i={value:s},a,{kind:"class",name:s.name,metadata:C},null,o),s=i.value,C&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),wn(s,o)})(),s})();const SI=255;let Vc=(()=>{var e,t,n,r;let a=[yd()],i,o=[],s,u,c=[],f=[],h,p=[],g=[],v,b=[],_=[],x,S=[],E=[],C,k=[],O=[];var N=s=class{constructor(D=lr(new Ue(st.EINVAL,"Metadata block must be initialized with a superblock")),U=0){if(this.superblock=D,this.offset=U,this.checksum=wn(this,c,0),this.timestamp=(wn(this,f),wn(this,p,Date.now())),this.previous_offset_=(wn(this,g),wn(this,b,0)),this.previous_offset=(wn(this,_),wn(this,S,0)),this._previous=wn(this,E),this.entries=wn(this,k,Array.from({length:SI},()=>new xI)),wn(this,O),this.superblock=D,this.offset=U,!!U&&(fw(this,D.store._buffer.subarray(U,U+jr(N))),!r8(this)))throw hw(new Ue(st.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+U.toString(16)))}get previous(){var D;if(this.previous_offset)return(D=this._previous)!==null&&D!==void 0||(this._previous=new N(this.superblock,this.previous_offset)),this._previous}};return mk(s,"MetadataBlock"),(()=>{const D=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],v=[(n=gn).uint32.bind(n)],x=[(r=gn).uint32.bind(r)],C=[Mm(xI,SI)],Or(null,null,u,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:U=>"checksum"in U,get:U=>U.checksum,set:(U,W)=>{U.checksum=W}},metadata:D},c,f),Or(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:U=>"timestamp"in U,get:U=>U.timestamp,set:(U,W)=>{U.timestamp=W}},metadata:D},p,g),Or(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:U=>"previous_offset_"in U,get:U=>U.previous_offset_,set:(U,W)=>{U.previous_offset_=W}},metadata:D},b,_),Or(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:U=>"previous_offset"in U,get:U=>U.previous_offset,set:(U,W)=>{U.previous_offset=W}},metadata:D},S,E),Or(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:U=>"entries"in U,get:U=>U.entries,set:(U,W)=>{U.entries=W}},metadata:D},k,O),Or(null,i={value:s},a,{kind:"class",name:s.name,metadata:D},null,o),N=s=i.value,D&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:D}),wn(s,o)})(),N=s})();const EI=2049864546;(()=>{var e,t,n,r,a,i,o,s,u,c,f;let h=[yd()],p,g=[],v,b,_=[],x=[],S,E=[],C=[],k,O=[],N=[],D,U=[],W=[],Q,F=[],Z=[],L,he=[],ie=[],ne,ee=[],se=[],G,X=[],Y=[],re,be=[],we=[],Me,Pe=[],Ae=[],Te,qe=[],it=[],Ie,Re=[],z=[],Ce,Ne=[],ce=[];var ae=v=class{constructor(J=lr(new Ue(st.EINVAL,"Super block must be initialized with a store"))){if(this.store=J,this.checksum=wn(this,_,0),this.magic=(wn(this,x),wn(this,E,EI)),this.version=(wn(this,C),wn(this,O,1)),this.inode_format=(wn(this,N),wn(this,U,QZ)),this.flags=(wn(this,W),wn(this,F,0)),this.used_bytes=(wn(this,Z),wn(this,he,BigInt(0))),this.total_bytes=(wn(this,ie),wn(this,ee,BigInt(0))),this.uuid=(wn(this,se),wn(this,X,BigInt(0))),this.metadata_block_size=(wn(this,Y),wn(this,be,jr(Vc))),this.metadata_offset_=(wn(this,we),wn(this,Pe,0)),this.metadata_offset=(wn(this,Ae),wn(this,qe,0)),this.metadata=wn(this,it),this.label=wn(this,Re,""),this._padding=(wn(this,z),wn(this,Ne,new Array(132).fill(0))),wn(this,ce),this.store=J,J._view.getUint32(gZ(ae,"magic"),!0)!=EI){Ka("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Vc(this),this.metadata.offset=jr(ae),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(jr(ae)+jr(Vc)),this.total_bytes=BigInt(J._buffer.byteLength),J._write(this),J._write(this.metadata);return}if(fw(this,J._buffer.subarray(0,jr(ae))),!r8(this))throw hw(new Ue(st.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Vc(this,this.metadata_offset)}rotateMetadata(){const J=new Vc(this);return J.offset=Number(this.used_bytes),J.previous_offset=this.metadata_offset,this.metadata=J,this.metadata_offset=J.offset,this.store._write(J),this.used_bytes+=BigInt(jr(Vc)),this.store._write(this),J}isUnused(J,xe){if(!xe)return!0;if(J+xe>this.total_bytes||J<jr(ae))return!1;for(let Le=this.metadata;Le;Le=Le.previous){if(J<Le.offset+jr(Vc)&&J+xe>Le.offset)return!1;for(const Se of Le.entries)if(Se.offset&&(J>=Se.offset&&J<Se.offset+Se.size||J+xe>Se.offset&&J+xe<=Se.offset+Se.size||J<=Se.offset&&J+xe>=Se.offset+Se.size))return!1}return!0}};return mk(v,"SuperBlock"),(()=>{const J=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=gn).uint32.bind(e)],S=[(t=gn).uint32.bind(t)],k=[(n=gn).uint16.bind(n)],D=[(r=gn).uint16.bind(r)],Q=[(a=gn).uint32.bind(a)],L=[(i=gn).uint64.bind(i)],ne=[(o=gn).uint64.bind(o)],G=[(s=gn).uint128.bind(s)],re=[(u=gn).uint32.bind(u)],Me=[(c=gn).uint32.bind(c)],Te=[(f=gn).uint32.bind(f)],Ie=[gn.char(64)],Ce=[gn.char(132)],Or(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Le)=>{xe.checksum=Le}},metadata:J},_,x),Or(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Le)=>{xe.magic=Le}},metadata:J},E,C),Or(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Le)=>{xe.version=Le}},metadata:J},O,N),Or(null,null,D,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Le)=>{xe.inode_format=Le}},metadata:J},U,W),Or(null,null,Q,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Le)=>{xe.flags=Le}},metadata:J},F,Z),Or(null,null,L,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Le)=>{xe.used_bytes=Le}},metadata:J},he,ie),Or(null,null,ne,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Le)=>{xe.total_bytes=Le}},metadata:J},ee,se),Or(null,null,G,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Le)=>{xe.uuid=Le}},metadata:J},X,Y),Or(null,null,re,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Le)=>{xe.metadata_block_size=Le}},metadata:J},be,we),Or(null,null,Me,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Le)=>{xe.metadata_offset_=Le}},metadata:J},Pe,Ae),Or(null,null,Te,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Le)=>{xe.metadata_offset=Le}},metadata:J},qe,it),Or(null,null,Ie,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Le)=>{xe.label=Le}},metadata:J},Re,z),Or(null,null,Ce,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Le)=>{xe._padding=Le}},metadata:J},Ne,ce),Or(null,p={value:v},h,{kind:"class",name:v.name,metadata:J},null,g),ae=v=p.value,J&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:J}),wn(v,g)})(),ae=v})();function r8(e){const t=Pa(e),n=hJ(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Fa;function pJ(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function iE(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?st[pJ(e)]:st.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Mf(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(iE(e.error))}})}class mJ extends nE{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Mf(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Mf(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Mf(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Mf(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(iE(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(iE(this.tx.error)),this.tx.abort(),t}}async function gJ(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Ka("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Mf(n)}class yJ{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new mJ(t,this)}}const bJ={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Mf(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await gJ(e.storeName||"zenfs",e.idbFactory),n=new yJ(t),r=new bj(n);if(e!=null&&e.disableAsyncCache)return $C("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},vJ=bJ,qb={APP_LOADED:"app:loaded",APP_ERROR:"app:error",CONVERSATION_SELECTED:"conversation:selected",CONVERSATION_CREATED:"conversation:created",CONVERSATION_DELETED:"conversation:deleted",CONVERSATION_RENAMED:"conversation:renamed",INTERACTION_STARTED:"interaction:started",INTERACTION_STREAM_CHUNK:"interaction:stream_chunk",INTERACTION_COMPLETED:"interaction:completed",PROMPT_SUBMITTED:"prompt:submitted",PROMPT_FINALISED:"prompt:finalised",SETTINGS_OPENED:"settings:opened",SETTINGS_CLOSED:"settings:closed",MOD_LOADED:"mod:loaded",MOD_ERROR:"mod:error",VFS_FILE_READ:"vfs:file:read",VFS_FILE_WRITTEN:"vfs:file:written",VFS_FILE_DELETED:"vfs:file:deleted"};function Uy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dS={exports:{}},CI;function wJ(){return CI||(CI=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(c,f){if(!a[c]){if(!r[c]){var h=typeof Uy=="function"&&Uy;if(!f&&h)return h(c,!0);if(s)return s(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var g=a[c]={exports:{}};r[c][0].call(g.exports,function(v){var b=r[c][1][v];return o(b||v)},g,g.exports,n,r,a,i)}return a[c].exports}for(var s=typeof Uy=="function"&&Uy,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,f,h,p,g,v,b,_=[],x=0,S=u.length,E=S,C=i.getTypeOf(u)!=="string";x<u.length;)E=S-x,h=C?(c=u[x++],f=x<S?u[x++]:0,x<S?u[x++]:0):(c=u.charCodeAt(x++),f=x<S?u.charCodeAt(x++):0,x<S?u.charCodeAt(x++):0),p=c>>2,g=(3&c)<<4|f>>4,v=1<E?(15&f)<<2|h>>6:64,b=2<E?63&h:64,_.push(s.charAt(p)+s.charAt(g)+s.charAt(v)+s.charAt(b));return _.join("")},a.decode=function(u){var c,f,h,p,g,v,b=0,_=0,x="data:";if(u.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&E--,u.charAt(u.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|E):new Array(0|E);b<u.length;)c=s.indexOf(u.charAt(b++))<<2|(p=s.indexOf(u.charAt(b++)))>>4,f=(15&p)<<4|(g=s.indexOf(u.charAt(b++)))>>2,h=(3&g)<<6|(v=s.indexOf(u.charAt(b++))),S[_++]=c,g!==64&&(S[_++]=f),v!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(f,h,p,g,v){this.compressedSize=f,this.uncompressedSize=h,this.crc32=p,this.compression=g,this.compressedContent=v}c.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,h,p){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,u=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[c]=s}return u}();r.exports=function(s,u){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(c,f,h,p){var g=o,v=p+h;c^=-1;for(var b=p;b<v;b++)c=c>>>8^g[255&(c^f[b])];return-1^c}(0|u,s,s.length,0):function(c,f,h,p){var g=o,v=p+h;c^=-1;for(var b=p;b<v;b++)c=c>>>8^g[255&(c^f.charCodeAt(b))];return-1^c}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),u=n("./stream/GenericWorker"),c=i?"uint8array":"array";function f(h,p){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}a.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,h.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},a.compressWorker=function(h){return new f("Deflate",h)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var b,_="";for(b=0;b<v;b++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,v,b,_,x,S){var E,C,k=g.file,O=g.compression,N=S!==c.utf8encode,D=s.transformTo("string",S(k.name)),U=s.transformTo("string",c.utf8encode(k.name)),W=k.comment,Q=s.transformTo("string",S(W)),F=s.transformTo("string",c.utf8encode(W)),Z=U.length!==k.name.length,L=F.length!==W.length,he="",ie="",ne="",ee=k.dir,se=k.date,G={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(G.crc32=g.crc32,G.compressedSize=g.compressedSize,G.uncompressedSize=g.uncompressedSize);var X=0;v&&(X|=8),N||!Z&&!L||(X|=2048);var Y=0,re=0;ee&&(Y|=16),x==="UNIX"?(re=798,Y|=function(we,Me){var Pe=we;return we||(Pe=Me?16893:33204),(65535&Pe)<<16}(k.unixPermissions,ee)):(re=20,Y|=function(we){return 63&(we||0)}(k.dosPermissions)),E=se.getUTCHours(),E<<=6,E|=se.getUTCMinutes(),E<<=5,E|=se.getUTCSeconds()/2,C=se.getUTCFullYear()-1980,C<<=4,C|=se.getUTCMonth()+1,C<<=5,C|=se.getUTCDate(),Z&&(ie=i(1,1)+i(f(D),4)+U,he+="up"+i(ie.length,2)+ie),L&&(ne=i(1,1)+i(f(Q),4)+F,he+="uc"+i(ne.length,2)+ne);var be="";return be+=`
\0`,be+=i(X,2),be+=O.magic,be+=i(E,2),be+=i(C,2),be+=i(G.crc32,4),be+=i(G.compressedSize,4),be+=i(G.uncompressedSize,4),be+=i(D.length,2),be+=i(he.length,2),{fileRecord:h.LOCAL_FILE_HEADER+be+D+he,dirRecord:h.CENTRAL_FILE_HEADER+i(re,2)+be+i(Q.length,2)+"\0\0\0\0"+i(Y,4)+i(_,4)+D+he+Q}}var s=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),f=n("../crc32"),h=n("../signature");function p(g,v,b,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(p,u),p.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-_-1))/b:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=o(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=o(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,_=function(x,S,E,C,k){var O=s.transformTo("string",k(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(O.length,2)+O}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},p.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var v=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},p.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,u,c){var f=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{s.forEach(function(p,g){h++;var v=function(S,E){var C=S||E,k=i[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(g.options.compression,u.compression),b=g.options.compressionOptions||u.compressionOptions||{},_=g.dir,x=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:p,dir:_,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(p){f.error(p)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(p){return new o.Promise(function(g,v){var b=p.decompressed.getContentWorker().pipe(new c);b.on("error",function(_){v(_)}).on("end",function(){b.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(p,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(b){var _=new u(g);return _.load(b),_}).then(function(b){var _=[o.Promise.resolve(b)],x=b.files;if(g.checkCRC32)for(var S=0;S<x.length;S++)_.push(h(x[S]));return o.Promise.all(_)}).then(function(b){for(var _=b.shift(),x=_.files,S=0;S<x.length;S++){var E=x[S],C=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(k).unsafeOriginalName=C)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(s,o),s.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,u,c){i.call(this,u),this._helper=s;var f=this;s.on("data",function(h,p){f.push(h)||f._helper.pause(),c&&c(p)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Wt<"u",newBufferFrom:function(i,o){if(Wt.from&&Wt.from!==Uint8Array.from)return Wt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Wt(i,o)},allocBuffer:function(i){if(Wt.alloc)return Wt.alloc(i);var o=new Wt(i);return o.fill(0),o},isBuffer:function(i){return Wt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,O,N){var D,U=s.getTypeOf(O),W=s.extend(N||{},f);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(k=x(k)),W.createFolders&&(D=_(k))&&S.call(this,D,!0);var Q=U==="string"&&W.binary===!1&&W.base64===!1;N&&N.binary!==void 0||(W.binary=!Q),(O instanceof h&&O.uncompressedSize===0||W.dir||!O||O.length===0)&&(W.base64=!1,W.binary=!0,O="",W.compression="STORE",U="string");var F=null;F=O instanceof h||O instanceof u?O:v.isNode&&v.isStream(O)?new b(k,O):s.prepareContent(k,O,W.binary,W.optimizedBinaryString,W.base64);var Z=new p(k,F,W);this.files[k]=Z}var o=n("./utf8"),s=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),_=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var O=k.lastIndexOf("/");return 0<O?k.substring(0,O):""},x=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},S=function(k,O){return O=O!==void 0?O:f.createFolders,k=x(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:O}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var O,N,D;for(O in this.files)D=this.files[O],(N=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&k(N,D)},filter:function(k){var O=[];return this.forEach(function(N,D){k(N,D)&&O.push(D)}),O},file:function(k,O,N){if(arguments.length!==1)return k=this.root+k,i.call(this,k,O,N),this;if(E(k)){var D=k;return this.filter(function(W,Q){return!Q.dir&&D.test(W)})}var U=this.files[this.root+k];return U&&!U.dir?U:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(U,W){return W.dir&&k.test(U)});var O=this.root+k,N=S.call(this,O),D=this.clone();return D.root=N.name,D},remove:function(k){k=this.root+k;var O=this.files[k];if(O||(k.slice(-1)!=="/"&&(k+="/"),O=this.files[k]),O&&!O.dir)delete this.files[k];else for(var N=this.filter(function(U,W){return W.name.slice(0,k.length)===k}),D=0;D<N.length;D++)delete this.files[N[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var O,N={};try{if((N=s.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");s.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var D=N.comment||this.comment||"";O=g.generateWorker(this,N,D)}catch(U){(O=new u("error")).error(U)}return new c(O,N.type||"string",N.mimeType)},generateAsync:function(k,O){return this.generateInternalStream(k).accumulate(O)},generateNodeStream:function(k,O){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(O)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===u&&this.data[p+1]===c&&this.data[p+2]===f&&this.data[p+3]===h)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),p=this.readData(4);return u===p[0]&&c===p[1]&&f===p[2]&&h===p[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,c=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=s,c},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var p=i.getTypeOf(h);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new c(h):o.uint8array?new f(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,i),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(s,o),s.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=i.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),u=n("../base64"),c=n("../support"),f=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,b){return new f.Promise(function(_,x){var S=[],E=v._internalType,C=v._outputType,k=v._mimeType;v.on("data",function(O,N){S.push(O),b&&b(N)}).on("error",function(O){S=[],x(O)}).on("end",function(){try{var O=function(N,D,U){switch(N){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),U);case"base64":return u.encode(D);default:return i.transformTo(N,D)}}(C,function(N,D){var U,W=0,Q=null,F=0;for(U=0;U<D.length;U++)F+=D[U].length;switch(N){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(Q=new Uint8Array(F),U=0;U<D.length;U++)Q.set(D[U],W),W+=D[U].length;return Q;case"nodebuffer":return Wt.concat(D);default:throw new Error("concat : unsupported type '"+N+"'")}}(E,S),k);_(O)}catch(N){x(N)}S=[]}).resume()})}function g(v,b,_){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=_,i.checkSupport(x),this._worker=v.pipe(new o(x)),v.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}g.prototype={accumulate:function(v){return p(this,v)},on:function(v,b){var _=this;return v==="data"?this._worker.on(v,function(x){b.call(_,x.data,x.meta)}):this._worker.on(v,function(){i.delay(b,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Wt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function p(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(v){var b,_,x,S,E,C=v.length,k=0;for(S=0;S<C;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),k+=_<128?1:_<2048?2:_<65536?3:4;for(b=o.uint8array?new Uint8Array(k):new Array(k),S=E=0;E<k;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),_<128?b[E++]=_:(_<2048?b[E++]=192|_>>>6:(_<65536?b[E++]=224|_>>>12:(b[E++]=240|_>>>18,b[E++]=128|_>>>12&63),b[E++]=128|_>>>6&63),b[E++]=128|63&_);return b}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var b,_,x,S,E=v.length,C=new Array(2*E);for(b=_=0;b<E;)if((x=v[b++])<128)C[_++]=x;else if(4<(S=c[x]))C[_++]=65533,b+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&b<E;)x=x<<6|63&v[b++],S--;1<S?C[_++]=65533:x<65536?C[_++]=x:(x-=65536,C[_++]=55296|x>>10&1023,C[_++]=56320|1023&x)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,u),h.prototype.processChunk=function(g){var v=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+c[S[C]]>E?C:E}(v),x=v;_!==v.length&&(o.uint8array?(x=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(x=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(p,u),p.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),u=n("./external");function c(b){return b}function f(b,_){for(var x=0;x<b.length;++x)_[x]=255&b.charCodeAt(x);return _}n("setimmediate"),a.newBlob=function(b,_){a.checkSupport("blob");try{return new Blob([b],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,_,x){var S=[],E=0,C=b.length;if(C<=x)return String.fromCharCode.apply(null,b);for(;E<C;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+x,C)))):S.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+x,C)))),E+=x;return S.join("")},stringifyByChar:function(b){for(var _="",x=0;x<b.length;x++)_+=String.fromCharCode(b[x]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function p(b){var _=65536,x=a.getTypeOf(b),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(b,x,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(b)}function g(b,_){for(var x=0;x<b.length;x++)_[x]=b[x];return _}a.applyFromCharCode=p;var v={};v.string={string:c,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return f(b,new Uint8Array(b.length))},nodebuffer:function(b){return f(b,s.allocBuffer(b.length))}},v.array={string:p,array:c,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(b)}},v.arraybuffer={string:function(b){return p(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:c,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:c,nodebuffer:function(b){return s.newBufferFrom(b)}},v.nodebuffer={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:c},a.transformTo=function(b,_){if(_=_||"",!b)return _;a.checkSupport(b);var x=a.getTypeOf(_);return v[x][b](_)},a.resolve=function(b){for(var _=b.split("/"),x=[],S=0;S<_.length;S++){var E=_[S];E==="."||E===""&&S!==0&&S!==_.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var _,x,S="";for(x=0;x<(b||"").length;x++)S+="\\x"+((_=b.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return S},a.delay=function(b,_,x){setImmediate(function(){b.apply(x||null,_||[])})},a.inherits=function(b,_){function x(){}x.prototype=_.prototype,b.prototype=new x},a.extend=function(){var b,_,x={};for(b=0;b<arguments.length;b++)for(_ in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],_)&&x[_]===void 0&&(x[_]=arguments[b][_]);return x},a.prepareContent=function(b,_,x,S,E){return u.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(k,O){var N=new FileReader;N.onload=function(D){k(D.target.result)},N.onerror=function(D){O(D.target.error)},N.readAsArrayBuffer(C)}):C}).then(function(C){var k=a.getTypeOf(C);return k?(k==="arraybuffer"?C=a.transformTo("uint8array",C):k==="string"&&(E?C=o.decode(C):x&&S!==!0&&(C=function(O){return f(O,i.uint8array?new Uint8Array(O.length):new Array(O.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),u=n("./zipEntry"),c=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(h)+")")}},isSignature:function(h,p){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===p;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=c.uint8array?"uint8array":"array",g=o.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=p-g;if(0<v)this.isSignature(p,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),f=n("./compressions"),h=n("./support");function p(g,v){this.options=g,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)&&f[x].magic===_)return f[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,_,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),b=g.readInt(2),_=g.readData(b),this.extraFields[v]={id:v,length:b,value:_};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=b,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,_="string";try{if(!v)throw new Error("No output type specified.");var x=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(b=b.pipe(new u.Utf8EncodeWorker)),!S&&x&&(b=b.pipe(new u.Utf8DecodeWorker))}catch(E){(b=new f("error")).error(E)}return new o(b,_,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,v,b)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,f=new u(v),h=i.document.createTextNode("");f.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var p=new i.MessageChannel;p.port1.onmessage=v,o=function(){p.port2.postMessage(0)}}var g=[];function v(){var b,_;s=!0;for(var x=g.length;x;){for(_=g,g=[],b=-1;++b<x;)_[b]();x=g.length}s=!1}r.exports=function(b){g.push(b)!==1||s||o()}}).call(this,typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},u=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,x!==o&&b(this,x)}function p(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,S,E){i(function(){var C;try{C=S(E)}catch(k){return s.reject(x,k)}C===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,C)})}function v(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function b(x,S){var E=!1;function C(N){E||(E=!0,s.reject(x,N))}function k(N){E||(E=!0,s.resolve(x,N))}var O=_(function(){S(k,C)});O.status==="error"&&C(O.value)}function _(x,S){var E={};try{E.value=x(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===c||typeof S!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==f?g(E,this.state===c?x:S,this.outcome):this.queue.push(new p(E,x,S)),E},p.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},p.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},p.prototype.callRejected=function(x){s.reject(this.promise,x)},p.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},s.resolve=function(x,S){var E=_(v,S);if(E.status==="error")return s.reject(x,E.value);var C=E.value;if(C)b(x,C);else{x.state=c,x.outcome=S;for(var k=-1,O=x.queue.length;++k<O;)x.queue[k].callFulfilled(S)}return x},s.reject=function(x,S){x.state=u,x.outcome=S;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var S=new this(o);return s.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=new Array(E),O=0,N=-1,D=new this(o);++N<E;)U(x[N],N);return D;function U(W,Q){S.resolve(W).then(function(F){k[Q]=F,++O!==E||C||(C=!0,s.resolve(D,k))},function(F){C||(C=!0,s.reject(D,F))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=-1,O=new this(o);++k<E;)N=x[k],S.resolve(N).then(function(D){C||(C=!0,s.resolve(O,D))},function(D){C||(C=!0,s.reject(O,D))});var N;return O}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=Object.prototype.toString,h=0,p=-1,g=0,v=8;function b(x){if(!(this instanceof b))return new b(x);this.options=o.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(u[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?s.string2buf(S.dictionary):f.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(u[E]);this._dict_set=!0}}function _(x,S){var E=new b(S);if(E.push(x,!0),E.err)throw E.msg||u[E.err];return E.result}b.prototype.push=function(x,S){var E,C,k=this.strm,O=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof x=="string"?k.input=s.string2buf(x):f.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(O),k.next_out=0,k.avail_out=O),(E=i.deflate(k,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(k.output,k.next_out))):this.onData(o.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(k.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=b,a.deflate=_,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,_(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,_(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},b||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||b&&b.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,_.windowBits);if(x!==u.Z_OK)throw new Error(c[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,_){var x=new g(_);if(x.push(b,!0),x.err)throw x.msg||c[x.err];return x.result}g.prototype.push=function(b,_){var x,S,E,C,k,O,N=this.strm,D=this.options.chunkSize,U=this.options.dictionary,W=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof b=="string"?N.input=s.binstring2buf(b):p.call(b)==="[object ArrayBuffer]"?N.input=new Uint8Array(b):N.input=b,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new o.Buf8(D),N.next_out=0,N.avail_out=D),(x=i.inflate(N,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&U&&(O=typeof U=="string"?s.string2buf(U):p.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,x=i.inflateSetDictionary(this.strm,O)),x===u.Z_BUF_ERROR&&W===!0&&(x=u.Z_OK,W=!1),x!==u.Z_STREAM_END&&x!==u.Z_OK)return this.onEnd(x),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&x!==u.Z_STREAM_END&&(N.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(N.output,N.next_out),C=N.next_out-E,k=s.buf2string(N.output,E),N.next_out=C,N.avail_out=D-C,C&&o.arraySet(N.output,N.output,E,C,0),this.onData(k)):this.onData(o.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(W=!0)}while((0<N.avail_in||N.avail_out===0)&&x!==u.Z_STREAM_END);return x===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(N.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(b,_){return(_=_||{}).raw=!0,v(b,_)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,f,h,p){if(c.subarray&&u.subarray)u.set(c.subarray(f,f+h),p);else for(var g=0;g<h;g++)u[p+g]=c[f+g]},flattenChunks:function(u){var c,f,h,p,g,v;for(c=h=0,f=u.length;c<f;c++)h+=u[c].length;for(v=new Uint8Array(h),c=p=0,f=u.length;c<f;c++)g=u[c],v.set(g,p),p+=g.length;return v}},s={arraySet:function(u,c,f,h,p){for(var g=0;g<h;g++)u[p+g]=c[f+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(h,p){if(p<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,p));for(var g="",v=0;v<p;v++)g+=String.fromCharCode(h[v]);return g}u[254]=u[254]=1,a.string2buf=function(h){var p,g,v,b,_,x=h.length,S=0;for(b=0;b<x;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),S+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(S),b=_=0;_<S;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?p[_++]=g:(g<2048?p[_++]=192|g>>>6:(g<65536?p[_++]=224|g>>>12:(p[_++]=240|g>>>18,p[_++]=128|g>>>12&63),p[_++]=128|g>>>6&63),p[_++]=128|63&g);return p},a.buf2binstring=function(h){return f(h,h.length)},a.binstring2buf=function(h){for(var p=new i.Buf8(h.length),g=0,v=p.length;g<v;g++)p[g]=h.charCodeAt(g);return p},a.buf2string=function(h,p){var g,v,b,_,x=p||h.length,S=new Array(2*x);for(g=v=0;g<x;)if((b=h[g++])<128)S[v++]=b;else if(4<(_=u[b]))S[v++]=65533,g+=_-1;else{for(b&=_===2?31:_===3?15:7;1<_&&g<x;)b=b<<6|63&h[g++],_--;1<_?S[v++]=65533:b<65536?S[v++]=b:(b-=65536,S[v++]=55296|b>>10&1023,S[v++]=56320|1023&b)}return f(S,v)},a.utf8border=function(h,p){var g;for((p=p||h.length)>h.length&&(p=h.length),g=p-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?p:g+u[h[g]]>p?g:p}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,u){for(var c=65535&i|0,f=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;f=f+(c=c+o[u++]|0)|0,--h;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();r.exports=function(o,s,u,c){var f=i,h=c+u;o^=-1;for(var p=c;p<h;p++)o=o>>>8^f[255&(o^s[p])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),u=n("./adler32"),c=n("./crc32"),f=n("./messages"),h=0,p=4,g=0,v=-2,b=-1,_=4,x=2,S=8,E=9,C=286,k=30,O=19,N=2*C+1,D=15,U=3,W=258,Q=W+U+1,F=42,Z=113,L=1,he=2,ie=3,ne=4;function ee(z,Ce){return z.msg=f[Ce],Ce}function se(z){return(z<<1)-(4<z?9:0)}function G(z){for(var Ce=z.length;0<=--Ce;)z[Ce]=0}function X(z){var Ce=z.state,Ne=Ce.pending;Ne>z.avail_out&&(Ne=z.avail_out),Ne!==0&&(o.arraySet(z.output,Ce.pending_buf,Ce.pending_out,Ne,z.next_out),z.next_out+=Ne,Ce.pending_out+=Ne,z.total_out+=Ne,z.avail_out-=Ne,Ce.pending-=Ne,Ce.pending===0&&(Ce.pending_out=0))}function Y(z,Ce){s._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,Ce),z.block_start=z.strstart,X(z.strm)}function re(z,Ce){z.pending_buf[z.pending++]=Ce}function be(z,Ce){z.pending_buf[z.pending++]=Ce>>>8&255,z.pending_buf[z.pending++]=255&Ce}function we(z,Ce){var Ne,ce,ae=z.max_chain_length,J=z.strstart,xe=z.prev_length,Le=z.nice_match,Se=z.strstart>z.w_size-Q?z.strstart-(z.w_size-Q):0,Ve=z.window,xt=z.w_mask,ht=z.prev,Et=z.strstart+W,Pt=Ve[J+xe-1],Tt=Ve[J+xe];z.prev_length>=z.good_match&&(ae>>=2),Le>z.lookahead&&(Le=z.lookahead);do if(Ve[(Ne=Ce)+xe]===Tt&&Ve[Ne+xe-1]===Pt&&Ve[Ne]===Ve[J]&&Ve[++Ne]===Ve[J+1]){J+=2,Ne++;do;while(Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&J<Et);if(ce=W-(Et-J),J=Et-W,xe<ce){if(z.match_start=Ce,Le<=(xe=ce))break;Pt=Ve[J+xe-1],Tt=Ve[J+xe]}}while((Ce=ht[Ce&xt])>Se&&--ae!=0);return xe<=z.lookahead?xe:z.lookahead}function Me(z){var Ce,Ne,ce,ae,J,xe,Le,Se,Ve,xt,ht=z.w_size;do{if(ae=z.window_size-z.lookahead-z.strstart,z.strstart>=ht+(ht-Q)){for(o.arraySet(z.window,z.window,ht,ht,0),z.match_start-=ht,z.strstart-=ht,z.block_start-=ht,Ce=Ne=z.hash_size;ce=z.head[--Ce],z.head[Ce]=ht<=ce?ce-ht:0,--Ne;);for(Ce=Ne=ht;ce=z.prev[--Ce],z.prev[Ce]=ht<=ce?ce-ht:0,--Ne;);ae+=ht}if(z.strm.avail_in===0)break;if(xe=z.strm,Le=z.window,Se=z.strstart+z.lookahead,Ve=ae,xt=void 0,xt=xe.avail_in,Ve<xt&&(xt=Ve),Ne=xt===0?0:(xe.avail_in-=xt,o.arraySet(Le,xe.input,xe.next_in,xt,Se),xe.state.wrap===1?xe.adler=u(xe.adler,Le,xt,Se):xe.state.wrap===2&&(xe.adler=c(xe.adler,Le,xt,Se)),xe.next_in+=xt,xe.total_in+=xt,xt),z.lookahead+=Ne,z.lookahead+z.insert>=U)for(J=z.strstart-z.insert,z.ins_h=z.window[J],z.ins_h=(z.ins_h<<z.hash_shift^z.window[J+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[J+U-1])&z.hash_mask,z.prev[J&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=J,J++,z.insert--,!(z.lookahead+z.insert<U)););}while(z.lookahead<Q&&z.strm.avail_in!==0)}function Pe(z,Ce){for(var Ne,ce;;){if(z.lookahead<Q){if(Me(z),z.lookahead<Q&&Ce===h)return L;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=U&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+U-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Ne!==0&&z.strstart-Ne<=z.w_size-Q&&(z.match_length=we(z,Ne)),z.match_length>=U)if(ce=s._tr_tally(z,z.strstart-z.match_start,z.match_length-U),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=U){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+U-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else ce=s._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(ce&&(Y(z,!1),z.strm.avail_out===0))return L}return z.insert=z.strstart<U-1?z.strstart:U-1,Ce===p?(Y(z,!0),z.strm.avail_out===0?ie:ne):z.last_lit&&(Y(z,!1),z.strm.avail_out===0)?L:he}function Ae(z,Ce){for(var Ne,ce,ae;;){if(z.lookahead<Q){if(Me(z),z.lookahead<Q&&Ce===h)return L;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=U&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+U-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=U-1,Ne!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Ne<=z.w_size-Q&&(z.match_length=we(z,Ne),z.match_length<=5&&(z.strategy===1||z.match_length===U&&4096<z.strstart-z.match_start)&&(z.match_length=U-1)),z.prev_length>=U&&z.match_length<=z.prev_length){for(ae=z.strstart+z.lookahead-U,ce=s._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-U),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=ae&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+U-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=U-1,z.strstart++,ce&&(Y(z,!1),z.strm.avail_out===0))return L}else if(z.match_available){if((ce=s._tr_tally(z,0,z.window[z.strstart-1]))&&Y(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return L}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(ce=s._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<U-1?z.strstart:U-1,Ce===p?(Y(z,!0),z.strm.avail_out===0?ie:ne):z.last_lit&&(Y(z,!1),z.strm.avail_out===0)?L:he}function Te(z,Ce,Ne,ce,ae){this.good_length=z,this.max_lazy=Ce,this.nice_length=Ne,this.max_chain=ce,this.func=ae}function qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*N),this.dyn_dtree=new o.Buf16(2*(2*k+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(D+1),this.heap=new o.Buf16(2*C+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it(z){var Ce;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=x,(Ce=z.state).pending=0,Ce.pending_out=0,Ce.wrap<0&&(Ce.wrap=-Ce.wrap),Ce.status=Ce.wrap?F:Z,z.adler=Ce.wrap===2?0:1,Ce.last_flush=h,s._tr_init(Ce),g):ee(z,v)}function Ie(z){var Ce=it(z);return Ce===g&&function(Ne){Ne.window_size=2*Ne.w_size,G(Ne.head),Ne.max_lazy_match=i[Ne.level].max_lazy,Ne.good_match=i[Ne.level].good_length,Ne.nice_match=i[Ne.level].nice_length,Ne.max_chain_length=i[Ne.level].max_chain,Ne.strstart=0,Ne.block_start=0,Ne.lookahead=0,Ne.insert=0,Ne.match_length=Ne.prev_length=U-1,Ne.match_available=0,Ne.ins_h=0}(z.state),Ce}function Re(z,Ce,Ne,ce,ae,J){if(!z)return v;var xe=1;if(Ce===b&&(Ce=6),ce<0?(xe=0,ce=-ce):15<ce&&(xe=2,ce-=16),ae<1||E<ae||Ne!==S||ce<8||15<ce||Ce<0||9<Ce||J<0||_<J)return ee(z,v);ce===8&&(ce=9);var Le=new qe;return(z.state=Le).strm=z,Le.wrap=xe,Le.gzhead=null,Le.w_bits=ce,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=ae+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+U-1)/U),Le.window=new o.Buf8(2*Le.w_size),Le.head=new o.Buf16(Le.hash_size),Le.prev=new o.Buf16(Le.w_size),Le.lit_bufsize=1<<ae+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new o.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=Ce,Le.strategy=J,Le.method=Ne,Ie(z)}i=[new Te(0,0,0,0,function(z,Ce){var Ne=65535;for(Ne>z.pending_buf_size-5&&(Ne=z.pending_buf_size-5);;){if(z.lookahead<=1){if(Me(z),z.lookahead===0&&Ce===h)return L;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var ce=z.block_start+Ne;if((z.strstart===0||z.strstart>=ce)&&(z.lookahead=z.strstart-ce,z.strstart=ce,Y(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-Q&&(Y(z,!1),z.strm.avail_out===0))return L}return z.insert=0,Ce===p?(Y(z,!0),z.strm.avail_out===0?ie:ne):(z.strstart>z.block_start&&(Y(z,!1),z.strm.avail_out),L)}),new Te(4,4,8,4,Pe),new Te(4,5,16,8,Pe),new Te(4,6,32,32,Pe),new Te(4,4,16,16,Ae),new Te(8,16,32,32,Ae),new Te(8,16,128,128,Ae),new Te(8,32,128,256,Ae),new Te(32,128,258,1024,Ae),new Te(32,258,258,4096,Ae)],a.deflateInit=function(z,Ce){return Re(z,Ce,S,15,8,0)},a.deflateInit2=Re,a.deflateReset=Ie,a.deflateResetKeep=it,a.deflateSetHeader=function(z,Ce){return z&&z.state?z.state.wrap!==2?v:(z.state.gzhead=Ce,g):v},a.deflate=function(z,Ce){var Ne,ce,ae,J;if(!z||!z.state||5<Ce||Ce<0)return z?ee(z,v):v;if(ce=z.state,!z.output||!z.input&&z.avail_in!==0||ce.status===666&&Ce!==p)return ee(z,z.avail_out===0?-5:v);if(ce.strm=z,Ne=ce.last_flush,ce.last_flush=Ce,ce.status===F)if(ce.wrap===2)z.adler=0,re(ce,31),re(ce,139),re(ce,8),ce.gzhead?(re(ce,(ce.gzhead.text?1:0)+(ce.gzhead.hcrc?2:0)+(ce.gzhead.extra?4:0)+(ce.gzhead.name?8:0)+(ce.gzhead.comment?16:0)),re(ce,255&ce.gzhead.time),re(ce,ce.gzhead.time>>8&255),re(ce,ce.gzhead.time>>16&255),re(ce,ce.gzhead.time>>24&255),re(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),re(ce,255&ce.gzhead.os),ce.gzhead.extra&&ce.gzhead.extra.length&&(re(ce,255&ce.gzhead.extra.length),re(ce,ce.gzhead.extra.length>>8&255)),ce.gzhead.hcrc&&(z.adler=c(z.adler,ce.pending_buf,ce.pending,0)),ce.gzindex=0,ce.status=69):(re(ce,0),re(ce,0),re(ce,0),re(ce,0),re(ce,0),re(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),re(ce,3),ce.status=Z);else{var xe=S+(ce.w_bits-8<<4)<<8;xe|=(2<=ce.strategy||ce.level<2?0:ce.level<6?1:ce.level===6?2:3)<<6,ce.strstart!==0&&(xe|=32),xe+=31-xe%31,ce.status=Z,be(ce,xe),ce.strstart!==0&&(be(ce,z.adler>>>16),be(ce,65535&z.adler)),z.adler=1}if(ce.status===69)if(ce.gzhead.extra){for(ae=ce.pending;ce.gzindex<(65535&ce.gzhead.extra.length)&&(ce.pending!==ce.pending_buf_size||(ce.gzhead.hcrc&&ce.pending>ae&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ae,ae)),X(z),ae=ce.pending,ce.pending!==ce.pending_buf_size));)re(ce,255&ce.gzhead.extra[ce.gzindex]),ce.gzindex++;ce.gzhead.hcrc&&ce.pending>ae&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ae,ae)),ce.gzindex===ce.gzhead.extra.length&&(ce.gzindex=0,ce.status=73)}else ce.status=73;if(ce.status===73)if(ce.gzhead.name){ae=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ae&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ae,ae)),X(z),ae=ce.pending,ce.pending===ce.pending_buf_size)){J=1;break}J=ce.gzindex<ce.gzhead.name.length?255&ce.gzhead.name.charCodeAt(ce.gzindex++):0,re(ce,J)}while(J!==0);ce.gzhead.hcrc&&ce.pending>ae&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ae,ae)),J===0&&(ce.gzindex=0,ce.status=91)}else ce.status=91;if(ce.status===91)if(ce.gzhead.comment){ae=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ae&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ae,ae)),X(z),ae=ce.pending,ce.pending===ce.pending_buf_size)){J=1;break}J=ce.gzindex<ce.gzhead.comment.length?255&ce.gzhead.comment.charCodeAt(ce.gzindex++):0,re(ce,J)}while(J!==0);ce.gzhead.hcrc&&ce.pending>ae&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ae,ae)),J===0&&(ce.status=103)}else ce.status=103;if(ce.status===103&&(ce.gzhead.hcrc?(ce.pending+2>ce.pending_buf_size&&X(z),ce.pending+2<=ce.pending_buf_size&&(re(ce,255&z.adler),re(ce,z.adler>>8&255),z.adler=0,ce.status=Z)):ce.status=Z),ce.pending!==0){if(X(z),z.avail_out===0)return ce.last_flush=-1,g}else if(z.avail_in===0&&se(Ce)<=se(Ne)&&Ce!==p)return ee(z,-5);if(ce.status===666&&z.avail_in!==0)return ee(z,-5);if(z.avail_in!==0||ce.lookahead!==0||Ce!==h&&ce.status!==666){var Le=ce.strategy===2?function(Se,Ve){for(var xt;;){if(Se.lookahead===0&&(Me(Se),Se.lookahead===0)){if(Ve===h)return L;break}if(Se.match_length=0,xt=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++,xt&&(Y(Se,!1),Se.strm.avail_out===0))return L}return Se.insert=0,Ve===p?(Y(Se,!0),Se.strm.avail_out===0?ie:ne):Se.last_lit&&(Y(Se,!1),Se.strm.avail_out===0)?L:he}(ce,Ce):ce.strategy===3?function(Se,Ve){for(var xt,ht,Et,Pt,Tt=Se.window;;){if(Se.lookahead<=W){if(Me(Se),Se.lookahead<=W&&Ve===h)return L;if(Se.lookahead===0)break}if(Se.match_length=0,Se.lookahead>=U&&0<Se.strstart&&(ht=Tt[Et=Se.strstart-1])===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]){Pt=Se.strstart+W;do;while(ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&Et<Pt);Se.match_length=W-(Pt-Et),Se.match_length>Se.lookahead&&(Se.match_length=Se.lookahead)}if(Se.match_length>=U?(xt=s._tr_tally(Se,1,Se.match_length-U),Se.lookahead-=Se.match_length,Se.strstart+=Se.match_length,Se.match_length=0):(xt=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++),xt&&(Y(Se,!1),Se.strm.avail_out===0))return L}return Se.insert=0,Ve===p?(Y(Se,!0),Se.strm.avail_out===0?ie:ne):Se.last_lit&&(Y(Se,!1),Se.strm.avail_out===0)?L:he}(ce,Ce):i[ce.level].func(ce,Ce);if(Le!==ie&&Le!==ne||(ce.status=666),Le===L||Le===ie)return z.avail_out===0&&(ce.last_flush=-1),g;if(Le===he&&(Ce===1?s._tr_align(ce):Ce!==5&&(s._tr_stored_block(ce,0,0,!1),Ce===3&&(G(ce.head),ce.lookahead===0&&(ce.strstart=0,ce.block_start=0,ce.insert=0))),X(z),z.avail_out===0))return ce.last_flush=-1,g}return Ce!==p?g:ce.wrap<=0?1:(ce.wrap===2?(re(ce,255&z.adler),re(ce,z.adler>>8&255),re(ce,z.adler>>16&255),re(ce,z.adler>>24&255),re(ce,255&z.total_in),re(ce,z.total_in>>8&255),re(ce,z.total_in>>16&255),re(ce,z.total_in>>24&255)):(be(ce,z.adler>>>16),be(ce,65535&z.adler)),X(z),0<ce.wrap&&(ce.wrap=-ce.wrap),ce.pending!==0?g:1)},a.deflateEnd=function(z){var Ce;return z&&z.state?(Ce=z.state.status)!==F&&Ce!==69&&Ce!==73&&Ce!==91&&Ce!==103&&Ce!==Z&&Ce!==666?ee(z,v):(z.state=null,Ce===Z?ee(z,-3):g):v},a.deflateSetDictionary=function(z,Ce){var Ne,ce,ae,J,xe,Le,Se,Ve,xt=Ce.length;if(!z||!z.state||(J=(Ne=z.state).wrap)===2||J===1&&Ne.status!==F||Ne.lookahead)return v;for(J===1&&(z.adler=u(z.adler,Ce,xt,0)),Ne.wrap=0,xt>=Ne.w_size&&(J===0&&(G(Ne.head),Ne.strstart=0,Ne.block_start=0,Ne.insert=0),Ve=new o.Buf8(Ne.w_size),o.arraySet(Ve,Ce,xt-Ne.w_size,Ne.w_size,0),Ce=Ve,xt=Ne.w_size),xe=z.avail_in,Le=z.next_in,Se=z.input,z.avail_in=xt,z.next_in=0,z.input=Ce,Me(Ne);Ne.lookahead>=U;){for(ce=Ne.strstart,ae=Ne.lookahead-(U-1);Ne.ins_h=(Ne.ins_h<<Ne.hash_shift^Ne.window[ce+U-1])&Ne.hash_mask,Ne.prev[ce&Ne.w_mask]=Ne.head[Ne.ins_h],Ne.head[Ne.ins_h]=ce,ce++,--ae;);Ne.strstart=ce,Ne.lookahead=U-1,Me(Ne)}return Ne.strstart+=Ne.lookahead,Ne.block_start=Ne.strstart,Ne.insert=Ne.lookahead,Ne.lookahead=0,Ne.match_length=Ne.prev_length=U-1,Ne.match_available=0,z.next_in=Le,z.input=Se,z.avail_in=xe,Ne.wrap=J,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,u,c,f,h,p,g,v,b,_,x,S,E,C,k,O,N,D,U,W,Q,F,Z,L,he;s=i.state,u=i.next_in,L=i.input,c=u+(i.avail_in-5),f=i.next_out,he=i.output,h=f-(o-i.avail_out),p=f+(i.avail_out-257),g=s.dmax,v=s.wsize,b=s.whave,_=s.wnext,x=s.window,S=s.hold,E=s.bits,C=s.lencode,k=s.distcode,O=(1<<s.lenbits)-1,N=(1<<s.distbits)-1;e:do{E<15&&(S+=L[u++]<<E,E+=8,S+=L[u++]<<E,E+=8),D=C[S&O];t:for(;;){if(S>>>=U=D>>>24,E-=U,(U=D>>>16&255)===0)he[f++]=65535&D;else{if(!(16&U)){if((64&U)==0){D=C[(65535&D)+(S&(1<<U)-1)];continue t}if(32&U){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}W=65535&D,(U&=15)&&(E<U&&(S+=L[u++]<<E,E+=8),W+=S&(1<<U)-1,S>>>=U,E-=U),E<15&&(S+=L[u++]<<E,E+=8,S+=L[u++]<<E,E+=8),D=k[S&N];n:for(;;){if(S>>>=U=D>>>24,E-=U,!(16&(U=D>>>16&255))){if((64&U)==0){D=k[(65535&D)+(S&(1<<U)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(Q=65535&D,E<(U&=15)&&(S+=L[u++]<<E,(E+=8)<U&&(S+=L[u++]<<E,E+=8)),g<(Q+=S&(1<<U)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=U,E-=U,(U=f-h)<Q){if(b<(U=Q-U)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(Z=x,(F=0)===_){if(F+=v-U,U<W){for(W-=U;he[f++]=x[F++],--U;);F=f-Q,Z=he}}else if(_<U){if(F+=v+_-U,(U-=_)<W){for(W-=U;he[f++]=x[F++],--U;);if(F=0,_<W){for(W-=U=_;he[f++]=x[F++],--U;);F=f-Q,Z=he}}}else if(F+=_-U,U<W){for(W-=U;he[f++]=x[F++],--U;);F=f-Q,Z=he}for(;2<W;)he[f++]=Z[F++],he[f++]=Z[F++],he[f++]=Z[F++],W-=3;W&&(he[f++]=Z[F++],1<W&&(he[f++]=Z[F++]))}else{for(F=f-Q;he[f++]=he[F++],he[f++]=he[F++],he[f++]=he[F++],2<(W-=3););W&&(he[f++]=he[F++],1<W&&(he[f++]=he[F++]))}break}}break}}while(u<c&&f<p);u-=W=E>>3,S&=(1<<(E-=W<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=f<p?p-f+257:257-(f-p),s.hold=S,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),f=1,h=2,p=0,g=-2,v=1,b=852,_=592;function x(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(F){var Z;return F&&F.state?(Z=F.state,F.total_in=F.total_out=Z.total=0,F.msg="",Z.wrap&&(F.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(b),Z.distcode=Z.distdyn=new i.Buf32(_),Z.sane=1,Z.back=-1,p):g}function C(F){var Z;return F&&F.state?((Z=F.state).wsize=0,Z.whave=0,Z.wnext=0,E(F)):g}function k(F,Z){var L,he;return F&&F.state?(he=F.state,Z<0?(L=0,Z=-Z):(L=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?g:(he.window!==null&&he.wbits!==Z&&(he.window=null),he.wrap=L,he.wbits=Z,C(F))):g}function O(F,Z){var L,he;return F?(he=new S,(F.state=he).window=null,(L=k(F,Z))!==p&&(F.state=null),L):g}var N,D,U=!0;function W(F){if(U){var Z;for(N=new i.Buf32(512),D=new i.Buf32(32),Z=0;Z<144;)F.lens[Z++]=8;for(;Z<256;)F.lens[Z++]=9;for(;Z<280;)F.lens[Z++]=7;for(;Z<288;)F.lens[Z++]=8;for(c(f,F.lens,0,288,N,0,F.work,{bits:9}),Z=0;Z<32;)F.lens[Z++]=5;c(h,F.lens,0,32,D,0,F.work,{bits:5}),U=!1}F.lencode=N,F.lenbits=9,F.distcode=D,F.distbits=5}function Q(F,Z,L,he){var ie,ne=F.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new i.Buf8(ne.wsize)),he>=ne.wsize?(i.arraySet(ne.window,Z,L-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(he<(ie=ne.wsize-ne.wnext)&&(ie=he),i.arraySet(ne.window,Z,L-he,ie,ne.wnext),(he-=ie)?(i.arraySet(ne.window,Z,L-he,he,0),ne.wnext=he,ne.whave=ne.wsize):(ne.wnext+=ie,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=ie))),0}a.inflateReset=C,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(F){return O(F,15)},a.inflateInit2=O,a.inflate=function(F,Z){var L,he,ie,ne,ee,se,G,X,Y,re,be,we,Me,Pe,Ae,Te,qe,it,Ie,Re,z,Ce,Ne,ce,ae=0,J=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return g;(L=F.state).mode===12&&(L.mode=13),ee=F.next_out,ie=F.output,G=F.avail_out,ne=F.next_in,he=F.input,se=F.avail_in,X=L.hold,Y=L.bits,re=se,be=G,Ce=p;e:for(;;)switch(L.mode){case v:if(L.wrap===0){L.mode=13;break}for(;Y<16;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if(2&L.wrap&&X===35615){J[L.check=0]=255&X,J[1]=X>>>8&255,L.check=s(L.check,J,2,0),Y=X=0,L.mode=2;break}if(L.flags=0,L.head&&(L.head.done=!1),!(1&L.wrap)||(((255&X)<<8)+(X>>8))%31){F.msg="incorrect header check",L.mode=30;break}if((15&X)!=8){F.msg="unknown compression method",L.mode=30;break}if(Y-=4,z=8+(15&(X>>>=4)),L.wbits===0)L.wbits=z;else if(z>L.wbits){F.msg="invalid window size",L.mode=30;break}L.dmax=1<<z,F.adler=L.check=1,L.mode=512&X?10:12,Y=X=0;break;case 2:for(;Y<16;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if(L.flags=X,(255&L.flags)!=8){F.msg="unknown compression method",L.mode=30;break}if(57344&L.flags){F.msg="unknown header flags set",L.mode=30;break}L.head&&(L.head.text=X>>8&1),512&L.flags&&(J[0]=255&X,J[1]=X>>>8&255,L.check=s(L.check,J,2,0)),Y=X=0,L.mode=3;case 3:for(;Y<32;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}L.head&&(L.head.time=X),512&L.flags&&(J[0]=255&X,J[1]=X>>>8&255,J[2]=X>>>16&255,J[3]=X>>>24&255,L.check=s(L.check,J,4,0)),Y=X=0,L.mode=4;case 4:for(;Y<16;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}L.head&&(L.head.xflags=255&X,L.head.os=X>>8),512&L.flags&&(J[0]=255&X,J[1]=X>>>8&255,L.check=s(L.check,J,2,0)),Y=X=0,L.mode=5;case 5:if(1024&L.flags){for(;Y<16;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}L.length=X,L.head&&(L.head.extra_len=X),512&L.flags&&(J[0]=255&X,J[1]=X>>>8&255,L.check=s(L.check,J,2,0)),Y=X=0}else L.head&&(L.head.extra=null);L.mode=6;case 6:if(1024&L.flags&&(se<(we=L.length)&&(we=se),we&&(L.head&&(z=L.head.extra_len-L.length,L.head.extra||(L.head.extra=new Array(L.head.extra_len)),i.arraySet(L.head.extra,he,ne,we,z)),512&L.flags&&(L.check=s(L.check,he,we,ne)),se-=we,ne+=we,L.length-=we),L.length))break e;L.length=0,L.mode=7;case 7:if(2048&L.flags){if(se===0)break e;for(we=0;z=he[ne+we++],L.head&&z&&L.length<65536&&(L.head.name+=String.fromCharCode(z)),z&&we<se;);if(512&L.flags&&(L.check=s(L.check,he,we,ne)),se-=we,ne+=we,z)break e}else L.head&&(L.head.name=null);L.length=0,L.mode=8;case 8:if(4096&L.flags){if(se===0)break e;for(we=0;z=he[ne+we++],L.head&&z&&L.length<65536&&(L.head.comment+=String.fromCharCode(z)),z&&we<se;);if(512&L.flags&&(L.check=s(L.check,he,we,ne)),se-=we,ne+=we,z)break e}else L.head&&(L.head.comment=null);L.mode=9;case 9:if(512&L.flags){for(;Y<16;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if(X!==(65535&L.check)){F.msg="header crc mismatch",L.mode=30;break}Y=X=0}L.head&&(L.head.hcrc=L.flags>>9&1,L.head.done=!0),F.adler=L.check=0,L.mode=12;break;case 10:for(;Y<32;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}F.adler=L.check=x(X),Y=X=0,L.mode=11;case 11:if(L.havedict===0)return F.next_out=ee,F.avail_out=G,F.next_in=ne,F.avail_in=se,L.hold=X,L.bits=Y,2;F.adler=L.check=1,L.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(L.last){X>>>=7&Y,Y-=7&Y,L.mode=27;break}for(;Y<3;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}switch(L.last=1&X,Y-=1,3&(X>>>=1)){case 0:L.mode=14;break;case 1:if(W(L),L.mode=20,Z!==6)break;X>>>=2,Y-=2;break e;case 2:L.mode=17;break;case 3:F.msg="invalid block type",L.mode=30}X>>>=2,Y-=2;break;case 14:for(X>>>=7&Y,Y-=7&Y;Y<32;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if((65535&X)!=(X>>>16^65535)){F.msg="invalid stored block lengths",L.mode=30;break}if(L.length=65535&X,Y=X=0,L.mode=15,Z===6)break e;case 15:L.mode=16;case 16:if(we=L.length){if(se<we&&(we=se),G<we&&(we=G),we===0)break e;i.arraySet(ie,he,ne,we,ee),se-=we,ne+=we,G-=we,ee+=we,L.length-=we;break}L.mode=12;break;case 17:for(;Y<14;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if(L.nlen=257+(31&X),X>>>=5,Y-=5,L.ndist=1+(31&X),X>>>=5,Y-=5,L.ncode=4+(15&X),X>>>=4,Y-=4,286<L.nlen||30<L.ndist){F.msg="too many length or distance symbols",L.mode=30;break}L.have=0,L.mode=18;case 18:for(;L.have<L.ncode;){for(;Y<3;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}L.lens[xe[L.have++]]=7&X,X>>>=3,Y-=3}for(;L.have<19;)L.lens[xe[L.have++]]=0;if(L.lencode=L.lendyn,L.lenbits=7,Ne={bits:L.lenbits},Ce=c(0,L.lens,0,19,L.lencode,0,L.work,Ne),L.lenbits=Ne.bits,Ce){F.msg="invalid code lengths set",L.mode=30;break}L.have=0,L.mode=19;case 19:for(;L.have<L.nlen+L.ndist;){for(;Te=(ae=L.lencode[X&(1<<L.lenbits)-1])>>>16&255,qe=65535&ae,!((Ae=ae>>>24)<=Y);){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if(qe<16)X>>>=Ae,Y-=Ae,L.lens[L.have++]=qe;else{if(qe===16){for(ce=Ae+2;Y<ce;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if(X>>>=Ae,Y-=Ae,L.have===0){F.msg="invalid bit length repeat",L.mode=30;break}z=L.lens[L.have-1],we=3+(3&X),X>>>=2,Y-=2}else if(qe===17){for(ce=Ae+3;Y<ce;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}Y-=Ae,z=0,we=3+(7&(X>>>=Ae)),X>>>=3,Y-=3}else{for(ce=Ae+7;Y<ce;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}Y-=Ae,z=0,we=11+(127&(X>>>=Ae)),X>>>=7,Y-=7}if(L.have+we>L.nlen+L.ndist){F.msg="invalid bit length repeat",L.mode=30;break}for(;we--;)L.lens[L.have++]=z}}if(L.mode===30)break;if(L.lens[256]===0){F.msg="invalid code -- missing end-of-block",L.mode=30;break}if(L.lenbits=9,Ne={bits:L.lenbits},Ce=c(f,L.lens,0,L.nlen,L.lencode,0,L.work,Ne),L.lenbits=Ne.bits,Ce){F.msg="invalid literal/lengths set",L.mode=30;break}if(L.distbits=6,L.distcode=L.distdyn,Ne={bits:L.distbits},Ce=c(h,L.lens,L.nlen,L.ndist,L.distcode,0,L.work,Ne),L.distbits=Ne.bits,Ce){F.msg="invalid distances set",L.mode=30;break}if(L.mode=20,Z===6)break e;case 20:L.mode=21;case 21:if(6<=se&&258<=G){F.next_out=ee,F.avail_out=G,F.next_in=ne,F.avail_in=se,L.hold=X,L.bits=Y,u(F,be),ee=F.next_out,ie=F.output,G=F.avail_out,ne=F.next_in,he=F.input,se=F.avail_in,X=L.hold,Y=L.bits,L.mode===12&&(L.back=-1);break}for(L.back=0;Te=(ae=L.lencode[X&(1<<L.lenbits)-1])>>>16&255,qe=65535&ae,!((Ae=ae>>>24)<=Y);){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if(Te&&(240&Te)==0){for(it=Ae,Ie=Te,Re=qe;Te=(ae=L.lencode[Re+((X&(1<<it+Ie)-1)>>it)])>>>16&255,qe=65535&ae,!(it+(Ae=ae>>>24)<=Y);){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}X>>>=it,Y-=it,L.back+=it}if(X>>>=Ae,Y-=Ae,L.back+=Ae,L.length=qe,Te===0){L.mode=26;break}if(32&Te){L.back=-1,L.mode=12;break}if(64&Te){F.msg="invalid literal/length code",L.mode=30;break}L.extra=15&Te,L.mode=22;case 22:if(L.extra){for(ce=L.extra;Y<ce;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}L.length+=X&(1<<L.extra)-1,X>>>=L.extra,Y-=L.extra,L.back+=L.extra}L.was=L.length,L.mode=23;case 23:for(;Te=(ae=L.distcode[X&(1<<L.distbits)-1])>>>16&255,qe=65535&ae,!((Ae=ae>>>24)<=Y);){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if((240&Te)==0){for(it=Ae,Ie=Te,Re=qe;Te=(ae=L.distcode[Re+((X&(1<<it+Ie)-1)>>it)])>>>16&255,qe=65535&ae,!(it+(Ae=ae>>>24)<=Y);){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}X>>>=it,Y-=it,L.back+=it}if(X>>>=Ae,Y-=Ae,L.back+=Ae,64&Te){F.msg="invalid distance code",L.mode=30;break}L.offset=qe,L.extra=15&Te,L.mode=24;case 24:if(L.extra){for(ce=L.extra;Y<ce;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}L.offset+=X&(1<<L.extra)-1,X>>>=L.extra,Y-=L.extra,L.back+=L.extra}if(L.offset>L.dmax){F.msg="invalid distance too far back",L.mode=30;break}L.mode=25;case 25:if(G===0)break e;if(we=be-G,L.offset>we){if((we=L.offset-we)>L.whave&&L.sane){F.msg="invalid distance too far back",L.mode=30;break}Me=we>L.wnext?(we-=L.wnext,L.wsize-we):L.wnext-we,we>L.length&&(we=L.length),Pe=L.window}else Pe=ie,Me=ee-L.offset,we=L.length;for(G<we&&(we=G),G-=we,L.length-=we;ie[ee++]=Pe[Me++],--we;);L.length===0&&(L.mode=21);break;case 26:if(G===0)break e;ie[ee++]=L.length,G--,L.mode=21;break;case 27:if(L.wrap){for(;Y<32;){if(se===0)break e;se--,X|=he[ne++]<<Y,Y+=8}if(be-=G,F.total_out+=be,L.total+=be,be&&(F.adler=L.check=L.flags?s(L.check,ie,be,ee-be):o(L.check,ie,be,ee-be)),be=G,(L.flags?X:x(X))!==L.check){F.msg="incorrect data check",L.mode=30;break}Y=X=0}L.mode=28;case 28:if(L.wrap&&L.flags){for(;Y<32;){if(se===0)break e;se--,X+=he[ne++]<<Y,Y+=8}if(X!==(4294967295&L.total)){F.msg="incorrect length check",L.mode=30;break}Y=X=0}L.mode=29;case 29:Ce=1;break e;case 30:Ce=-3;break e;case 31:return-4;case 32:default:return g}return F.next_out=ee,F.avail_out=G,F.next_in=ne,F.avail_in=se,L.hold=X,L.bits=Y,(L.wsize||be!==F.avail_out&&L.mode<30&&(L.mode<27||Z!==4))&&Q(F,F.output,F.next_out,be-F.avail_out)?(L.mode=31,-4):(re-=F.avail_in,be-=F.avail_out,F.total_in+=re,F.total_out+=be,L.total+=be,L.wrap&&be&&(F.adler=L.check=L.flags?s(L.check,ie,be,F.next_out-be):o(L.check,ie,be,F.next_out-be)),F.data_type=L.bits+(L.last?64:0)+(L.mode===12?128:0)+(L.mode===20||L.mode===15?256:0),(re==0&&be===0||Z===4)&&Ce===p&&(Ce=-5),Ce)},a.inflateEnd=function(F){if(!F||!F.state)return g;var Z=F.state;return Z.window&&(Z.window=null),F.state=null,p},a.inflateGetHeader=function(F,Z){var L;return F&&F.state?(2&(L=F.state).wrap)==0?g:((L.head=Z).done=!1,p):g},a.inflateSetDictionary=function(F,Z){var L,he=Z.length;return F&&F.state?(L=F.state).wrap!==0&&L.mode!==11?g:L.mode===11&&o(1,Z,he,0)!==L.check?-3:Q(F,Z,he,he)?(L.mode=31,-4):(L.havedict=1,p):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,p,g,v,b,_,x){var S,E,C,k,O,N,D,U,W,Q=x.bits,F=0,Z=0,L=0,he=0,ie=0,ne=0,ee=0,se=0,G=0,X=0,Y=null,re=0,be=new i.Buf16(16),we=new i.Buf16(16),Me=null,Pe=0;for(F=0;F<=15;F++)be[F]=0;for(Z=0;Z<g;Z++)be[h[p+Z]]++;for(ie=Q,he=15;1<=he&&be[he]===0;he--);if(he<ie&&(ie=he),he===0)return v[b++]=20971520,v[b++]=20971520,x.bits=1,0;for(L=1;L<he&&be[L]===0;L++);for(ie<L&&(ie=L),F=se=1;F<=15;F++)if(se<<=1,(se-=be[F])<0)return-1;if(0<se&&(f===0||he!==1))return-1;for(we[1]=0,F=1;F<15;F++)we[F+1]=we[F]+be[F];for(Z=0;Z<g;Z++)h[p+Z]!==0&&(_[we[h[p+Z]]++]=Z);if(N=f===0?(Y=Me=_,19):f===1?(Y=o,re-=257,Me=s,Pe-=257,256):(Y=u,Me=c,-1),F=L,O=b,ee=Z=X=0,C=-1,k=(G=1<<(ne=ie))-1,f===1&&852<G||f===2&&592<G)return 1;for(;;){for(D=F-ee,W=_[Z]<N?(U=0,_[Z]):_[Z]>N?(U=Me[Pe+_[Z]],Y[re+_[Z]]):(U=96,0),S=1<<F-ee,L=E=1<<ne;v[O+(X>>ee)+(E-=S)]=D<<24|U<<16|W|0,E!==0;);for(S=1<<F-1;X&S;)S>>=1;if(S!==0?(X&=S-1,X+=S):X=0,Z++,--be[F]==0){if(F===he)break;F=h[p+_[Z]]}if(ie<F&&(X&k)!==C){for(ee===0&&(ee=ie),O+=L,se=1<<(ne=F-ee);ne+ee<he&&!((se-=be[ne+ee])<=0);)ne++,se<<=1;if(G+=1<<ne,f===1&&852<G||f===2&&592<G)return 1;v[C=X&k]=ie<<24|ne<<16|O-b|0}}return X!==0&&(v[O+X]=F-ee<<24|64<<16|0),x.bits=ie,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function u(ae){for(var J=ae.length;0<=--J;)ae[J]=0}var c=0,f=29,h=256,p=h+1+f,g=30,v=19,b=2*p+1,_=15,x=16,S=7,E=256,C=16,k=17,O=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(p+2));u(Q);var F=new Array(2*g);u(F);var Z=new Array(512);u(Z);var L=new Array(256);u(L);var he=new Array(f);u(he);var ie,ne,ee,se=new Array(g);function G(ae,J,xe,Le,Se){this.static_tree=ae,this.extra_bits=J,this.extra_base=xe,this.elems=Le,this.max_length=Se,this.has_stree=ae&&ae.length}function X(ae,J){this.dyn_tree=ae,this.max_code=0,this.stat_desc=J}function Y(ae){return ae<256?Z[ae]:Z[256+(ae>>>7)]}function re(ae,J){ae.pending_buf[ae.pending++]=255&J,ae.pending_buf[ae.pending++]=J>>>8&255}function be(ae,J,xe){ae.bi_valid>x-xe?(ae.bi_buf|=J<<ae.bi_valid&65535,re(ae,ae.bi_buf),ae.bi_buf=J>>x-ae.bi_valid,ae.bi_valid+=xe-x):(ae.bi_buf|=J<<ae.bi_valid&65535,ae.bi_valid+=xe)}function we(ae,J,xe){be(ae,xe[2*J],xe[2*J+1])}function Me(ae,J){for(var xe=0;xe|=1&ae,ae>>>=1,xe<<=1,0<--J;);return xe>>>1}function Pe(ae,J,xe){var Le,Se,Ve=new Array(_+1),xt=0;for(Le=1;Le<=_;Le++)Ve[Le]=xt=xt+xe[Le-1]<<1;for(Se=0;Se<=J;Se++){var ht=ae[2*Se+1];ht!==0&&(ae[2*Se]=Me(Ve[ht]++,ht))}}function Ae(ae){var J;for(J=0;J<p;J++)ae.dyn_ltree[2*J]=0;for(J=0;J<g;J++)ae.dyn_dtree[2*J]=0;for(J=0;J<v;J++)ae.bl_tree[2*J]=0;ae.dyn_ltree[2*E]=1,ae.opt_len=ae.static_len=0,ae.last_lit=ae.matches=0}function Te(ae){8<ae.bi_valid?re(ae,ae.bi_buf):0<ae.bi_valid&&(ae.pending_buf[ae.pending++]=ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0}function qe(ae,J,xe,Le){var Se=2*J,Ve=2*xe;return ae[Se]<ae[Ve]||ae[Se]===ae[Ve]&&Le[J]<=Le[xe]}function it(ae,J,xe){for(var Le=ae.heap[xe],Se=xe<<1;Se<=ae.heap_len&&(Se<ae.heap_len&&qe(J,ae.heap[Se+1],ae.heap[Se],ae.depth)&&Se++,!qe(J,Le,ae.heap[Se],ae.depth));)ae.heap[xe]=ae.heap[Se],xe=Se,Se<<=1;ae.heap[xe]=Le}function Ie(ae,J,xe){var Le,Se,Ve,xt,ht=0;if(ae.last_lit!==0)for(;Le=ae.pending_buf[ae.d_buf+2*ht]<<8|ae.pending_buf[ae.d_buf+2*ht+1],Se=ae.pending_buf[ae.l_buf+ht],ht++,Le===0?we(ae,Se,J):(we(ae,(Ve=L[Se])+h+1,J),(xt=N[Ve])!==0&&be(ae,Se-=he[Ve],xt),we(ae,Ve=Y(--Le),xe),(xt=D[Ve])!==0&&be(ae,Le-=se[Ve],xt)),ht<ae.last_lit;);we(ae,E,J)}function Re(ae,J){var xe,Le,Se,Ve=J.dyn_tree,xt=J.stat_desc.static_tree,ht=J.stat_desc.has_stree,Et=J.stat_desc.elems,Pt=-1;for(ae.heap_len=0,ae.heap_max=b,xe=0;xe<Et;xe++)Ve[2*xe]!==0?(ae.heap[++ae.heap_len]=Pt=xe,ae.depth[xe]=0):Ve[2*xe+1]=0;for(;ae.heap_len<2;)Ve[2*(Se=ae.heap[++ae.heap_len]=Pt<2?++Pt:0)]=1,ae.depth[Se]=0,ae.opt_len--,ht&&(ae.static_len-=xt[2*Se+1]);for(J.max_code=Pt,xe=ae.heap_len>>1;1<=xe;xe--)it(ae,Ve,xe);for(Se=Et;xe=ae.heap[1],ae.heap[1]=ae.heap[ae.heap_len--],it(ae,Ve,1),Le=ae.heap[1],ae.heap[--ae.heap_max]=xe,ae.heap[--ae.heap_max]=Le,Ve[2*Se]=Ve[2*xe]+Ve[2*Le],ae.depth[Se]=(ae.depth[xe]>=ae.depth[Le]?ae.depth[xe]:ae.depth[Le])+1,Ve[2*xe+1]=Ve[2*Le+1]=Se,ae.heap[1]=Se++,it(ae,Ve,1),2<=ae.heap_len;);ae.heap[--ae.heap_max]=ae.heap[1],function(Tt,Ut){var ge,I,H,fe,Oe,ve,ke=Ut.dyn_tree,le=Ut.max_code,ct=Ut.stat_desc.static_tree,yt=Ut.stat_desc.has_stree,M=Ut.stat_desc.extra_bits,Be=Ut.stat_desc.extra_base,et=Ut.stat_desc.max_length,me=0;for(fe=0;fe<=_;fe++)Tt.bl_count[fe]=0;for(ke[2*Tt.heap[Tt.heap_max]+1]=0,ge=Tt.heap_max+1;ge<b;ge++)et<(fe=ke[2*ke[2*(I=Tt.heap[ge])+1]+1]+1)&&(fe=et,me++),ke[2*I+1]=fe,le<I||(Tt.bl_count[fe]++,Oe=0,Be<=I&&(Oe=M[I-Be]),ve=ke[2*I],Tt.opt_len+=ve*(fe+Oe),yt&&(Tt.static_len+=ve*(ct[2*I+1]+Oe)));if(me!==0){do{for(fe=et-1;Tt.bl_count[fe]===0;)fe--;Tt.bl_count[fe]--,Tt.bl_count[fe+1]+=2,Tt.bl_count[et]--,me-=2}while(0<me);for(fe=et;fe!==0;fe--)for(I=Tt.bl_count[fe];I!==0;)le<(H=Tt.heap[--ge])||(ke[2*H+1]!==fe&&(Tt.opt_len+=(fe-ke[2*H+1])*ke[2*H],ke[2*H+1]=fe),I--)}}(ae,J),Pe(Ve,Pt,ae.bl_count)}function z(ae,J,xe){var Le,Se,Ve=-1,xt=J[1],ht=0,Et=7,Pt=4;for(xt===0&&(Et=138,Pt=3),J[2*(xe+1)+1]=65535,Le=0;Le<=xe;Le++)Se=xt,xt=J[2*(Le+1)+1],++ht<Et&&Se===xt||(ht<Pt?ae.bl_tree[2*Se]+=ht:Se!==0?(Se!==Ve&&ae.bl_tree[2*Se]++,ae.bl_tree[2*C]++):ht<=10?ae.bl_tree[2*k]++:ae.bl_tree[2*O]++,Ve=Se,Pt=(ht=0)===xt?(Et=138,3):Se===xt?(Et=6,3):(Et=7,4))}function Ce(ae,J,xe){var Le,Se,Ve=-1,xt=J[1],ht=0,Et=7,Pt=4;for(xt===0&&(Et=138,Pt=3),Le=0;Le<=xe;Le++)if(Se=xt,xt=J[2*(Le+1)+1],!(++ht<Et&&Se===xt)){if(ht<Pt)for(;we(ae,Se,ae.bl_tree),--ht!=0;);else Se!==0?(Se!==Ve&&(we(ae,Se,ae.bl_tree),ht--),we(ae,C,ae.bl_tree),be(ae,ht-3,2)):ht<=10?(we(ae,k,ae.bl_tree),be(ae,ht-3,3)):(we(ae,O,ae.bl_tree),be(ae,ht-11,7));Ve=Se,Pt=(ht=0)===xt?(Et=138,3):Se===xt?(Et=6,3):(Et=7,4)}}u(se);var Ne=!1;function ce(ae,J,xe,Le){be(ae,(c<<1)+(Le?1:0),3),function(Se,Ve,xt,ht){Te(Se),re(Se,xt),re(Se,~xt),i.arraySet(Se.pending_buf,Se.window,Ve,xt,Se.pending),Se.pending+=xt}(ae,J,xe)}a._tr_init=function(ae){Ne||(function(){var J,xe,Le,Se,Ve,xt=new Array(_+1);for(Se=Le=0;Se<f-1;Se++)for(he[Se]=Le,J=0;J<1<<N[Se];J++)L[Le++]=Se;for(L[Le-1]=Se,Se=Ve=0;Se<16;Se++)for(se[Se]=Ve,J=0;J<1<<D[Se];J++)Z[Ve++]=Se;for(Ve>>=7;Se<g;Se++)for(se[Se]=Ve<<7,J=0;J<1<<D[Se]-7;J++)Z[256+Ve++]=Se;for(xe=0;xe<=_;xe++)xt[xe]=0;for(J=0;J<=143;)Q[2*J+1]=8,J++,xt[8]++;for(;J<=255;)Q[2*J+1]=9,J++,xt[9]++;for(;J<=279;)Q[2*J+1]=7,J++,xt[7]++;for(;J<=287;)Q[2*J+1]=8,J++,xt[8]++;for(Pe(Q,p+1,xt),J=0;J<g;J++)F[2*J+1]=5,F[2*J]=Me(J,5);ie=new G(Q,N,h+1,p,_),ne=new G(F,D,0,g,_),ee=new G(new Array(0),U,0,v,S)}(),Ne=!0),ae.l_desc=new X(ae.dyn_ltree,ie),ae.d_desc=new X(ae.dyn_dtree,ne),ae.bl_desc=new X(ae.bl_tree,ee),ae.bi_buf=0,ae.bi_valid=0,Ae(ae)},a._tr_stored_block=ce,a._tr_flush_block=function(ae,J,xe,Le){var Se,Ve,xt=0;0<ae.level?(ae.strm.data_type===2&&(ae.strm.data_type=function(ht){var Et,Pt=4093624447;for(Et=0;Et<=31;Et++,Pt>>>=1)if(1&Pt&&ht.dyn_ltree[2*Et]!==0)return o;if(ht.dyn_ltree[18]!==0||ht.dyn_ltree[20]!==0||ht.dyn_ltree[26]!==0)return s;for(Et=32;Et<h;Et++)if(ht.dyn_ltree[2*Et]!==0)return s;return o}(ae)),Re(ae,ae.l_desc),Re(ae,ae.d_desc),xt=function(ht){var Et;for(z(ht,ht.dyn_ltree,ht.l_desc.max_code),z(ht,ht.dyn_dtree,ht.d_desc.max_code),Re(ht,ht.bl_desc),Et=v-1;3<=Et&&ht.bl_tree[2*W[Et]+1]===0;Et--);return ht.opt_len+=3*(Et+1)+5+5+4,Et}(ae),Se=ae.opt_len+3+7>>>3,(Ve=ae.static_len+3+7>>>3)<=Se&&(Se=Ve)):Se=Ve=xe+5,xe+4<=Se&&J!==-1?ce(ae,J,xe,Le):ae.strategy===4||Ve===Se?(be(ae,2+(Le?1:0),3),Ie(ae,Q,F)):(be(ae,4+(Le?1:0),3),function(ht,Et,Pt,Tt){var Ut;for(be(ht,Et-257,5),be(ht,Pt-1,5),be(ht,Tt-4,4),Ut=0;Ut<Tt;Ut++)be(ht,ht.bl_tree[2*W[Ut]+1],3);Ce(ht,ht.dyn_ltree,Et-1),Ce(ht,ht.dyn_dtree,Pt-1)}(ae,ae.l_desc.max_code+1,ae.d_desc.max_code+1,xt+1),Ie(ae,ae.dyn_ltree,ae.dyn_dtree)),Ae(ae),Le&&Te(ae)},a._tr_tally=function(ae,J,xe){return ae.pending_buf[ae.d_buf+2*ae.last_lit]=J>>>8&255,ae.pending_buf[ae.d_buf+2*ae.last_lit+1]=255&J,ae.pending_buf[ae.l_buf+ae.last_lit]=255&xe,ae.last_lit++,J===0?ae.dyn_ltree[2*xe]++:(ae.matches++,J--,ae.dyn_ltree[2*(L[xe]+h+1)]++,ae.dyn_dtree[2*Y(J)]++),ae.last_lit===ae.lit_bufsize-1},a._tr_align=function(ae){be(ae,2,3),we(ae,E,Q),function(J){J.bi_valid===16?(re(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}(ae)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var u,c,f,h,p=1,g={},v=!1,b=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(C){Wr.nextTick(function(){S(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,k=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=k,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){f.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(c=b.documentElement,function(C){var k=b.createElement("script");k.onreadystatechange=function(){S(C),k.onreadystatechange=null,c.removeChild(k),k=null},c.appendChild(k)}):function(C){setTimeout(S,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),O=0;O<k.length;O++)k[O]=arguments[O+1];var N={callback:C,args:k};return g[p]=N,u(p),p++},_.clearImmediate=x}function x(C){delete g[C]}function S(C){if(v)setTimeout(S,0,C);else{var k=g[C];if(k){v=!0;try{(function(O){var N=O.callback,D=O.args;switch(D.length){case 0:N();break;case 1:N(D[0]);break;case 2:N(D[0],D[1]);break;case 3:N(D[0],D[1],D[2]);break;default:N.apply(s,D)}})(k)}finally{x(C),v=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(dS)),dS.exports}var _J=wJ();const a8=ei(_J);var fS,kI;function xJ(){if(kI)return fS;kI=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Wr>"u"||typeof Wr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,C){i=E,o=C})),a=a||{};var u=!1,c=null,f=null,h=null,p=this,g=function(E,C,k){f&&(clearTimeout(f),f=null),h&&(clearTimeout(h),h=null),E&&(p.queues[t]&&p.queues[t].length===0&&delete p.queues[t],p.domainReentrant&&delete p.domains[t]),u||(s?C?o(C):i(k):typeof r=="function"&&r(C,k),u=!0),E&&p.queues[t]&&p.queues[t].length>0&&p.queues[t].shift()()},v=function(E){if(u)return g(E);c&&(clearTimeout(c),c=null),p.domainReentrant&&E&&(p.domains[t]=Wr.domain);var C=a.maxExecutionTime||p.maxExecutionTime;if(C&&(h=setTimeout(function(){p.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(O,N){k||(k=!0,g(E,O,N))})}catch(O){k||(k=!0,g(E,O))}}else p._promiseTry(function(){return n()}).then(function(O){g(E,void 0,O)},function(O){g(E,O)})};p.domainReentrant&&Wr.domain&&(v=Wr.domain.bind(v));var b=a.maxPending||p.maxPending;if(!p.queues[t])p.queues[t]=[],v(!0);else if(p.domainReentrant&&Wr.domain&&Wr.domain===p.domains[t])v(!1);else if(p.queues[t].length>=b)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){v(!0)};a.skipQueue?p.queues[t].unshift(_):p.queues[t].push(_);var x=a.timeout||p.timeout;x&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||p.maxOccupationTime;if(S&&(f=setTimeout(function(){p.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(u,c){return function(f){i.acquire(u,c,f,a)}},s=t.reduceRight(function(u,c){return o(c,u)},n);if(typeof r=="function")s(r);else return new this.Promise(function(u,c){s.length===1?s(function(f,h){f?c(f):u(h)}):u(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},fS=e,fS}var hS,AI;function SJ(){return AI||(AI=1,hS=xJ()),hS}var EJ=SJ();const zm=ei(EJ);var qy={exports:{}},TI;function CJ(){return TI||(TI=1,typeof Object.create=="function"?qy.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:qy.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),qy.exports}var pS,RI;function kJ(){if(RI)return pS;RI=1;var e=ik().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,u=0;u<o;){for(var c=s%i,f=Math.min(o-u,i-c),h=0;h<f;h++)a[c+h]=n[u+h];s+=f,u+=f,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},pS=t,pS}var mS,NI;function AJ(){if(NI)return mS;NI=1;var e=CJ(),t=kJ(),n=ik().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(f){return f<<1|f>>>31}function s(f){return f<<5|f>>>27}function u(f){return f<<30|f>>>2}function c(f,h,p,g){return f===0?h&p|~h&g:f===2?h&p|h&g|p&g:h^p^g}return i.prototype._update=function(f){for(var h=this._w,p=this._a|0,g=this._b|0,v=this._c|0,b=this._d|0,_=this._e|0,x=0;x<16;++x)h[x]=f.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=s(p)+c(E,g,v,b)+_+h[S]+r[E]|0;_=b,b=v,v=u(g),g=p,p=C}this._a=p+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var f=n.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},mS=i,mS}var TJ=AJ();const i8=ei(TJ);var gS,II;function RJ(){if(II)return gS;II=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,u=-1,c=0,f,h=0;h<=a.length;++h){if(h<a.length)f=a.charCodeAt(h);else{if(f===47)break;f=47}if(f===47){if(!(u===h-1||c===1))if(u!==h-1&&c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var p=o.lastIndexOf("/");if(p!==o.length-1){p===-1?(o="",s=0):(o=o.slice(0,p),s=o.length-1-o.lastIndexOf("/")),u=h,c=0;continue}}else if(o.length===2||o.length===1){o="",s=0,u=h,c=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(u+1,h):o=a.slice(u+1,h),s=h-u-1;u=h,c=0}else f===46&&c!==-1?++c:c=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,u=arguments.length-1;u>=-1&&!o;u--){var c;u>=0?c=arguments[u]:(s===void 0&&(s=Wr.cwd()),c=s),e(c),c.length!==0&&(i=c+"/"+i,o=c.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var u=i.length,c=u-s,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var h=o.length,p=h-f,g=c<p?c:p,v=-1,b=0;b<=g;++b){if(b===g){if(p>g){if(o.charCodeAt(f+b)===47)return o.slice(f+b+1);if(b===0)return o.slice(f+b)}else c>g&&(i.charCodeAt(s+b)===47?v=b:b===0&&(v=0));break}var _=i.charCodeAt(s+b),x=o.charCodeAt(f+b);if(_!==x)break;_===47&&(v=b)}var S="";for(b=s+v+1;b<=u;++b)(b===u||i.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+o.slice(f+v):(f+=v,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,u=-1,c=!0,f=i.length-1;f>=1;--f)if(o=i.charCodeAt(f),o===47){if(!c){u=f;break}}else c=!1;return u===-1?s?"/":".":s&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,u=-1,c=!0,f;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,p=-1;for(f=i.length-1;f>=0;--f){var g=i.charCodeAt(f);if(g===47){if(!c){s=f+1;break}}else p===-1&&(c=!1,p=f+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(u=f):(h=-1,u=p))}return s===u?u=p:u===-1&&(u=i.length),i.slice(s,u)}else{for(f=i.length-1;f>=0;--f)if(i.charCodeAt(f)===47){if(!c){s=f+1;break}}else u===-1&&(c=!1,u=f+1);return u===-1?"":i.slice(s,u)}},extname:function(i){e(i);for(var o=-1,s=0,u=-1,c=!0,f=0,h=i.length-1;h>=0;--h){var p=i.charCodeAt(h);if(p===47){if(!c){s=h+1;break}continue}u===-1&&(c=!1,u=h+1),p===46?o===-1?o=h:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||u===-1||f===0||f===1&&o===u-1&&o===s+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),u=s===47,c;u?(o.root="/",c=1):c=0;for(var f=-1,h=0,p=-1,g=!0,v=i.length-1,b=0;v>=c;--v){if(s=i.charCodeAt(v),s===47){if(!g){h=v+1;break}continue}p===-1&&(g=!1,p=v+1),s===46?f===-1?f=v:b!==1&&(b=1):f!==-1&&(b=-1)}return f===-1||p===-1||b===0||b===1&&f===p-1&&f===h+1?p!==-1&&(h===0&&u?o.base=o.name=i.slice(1,p):o.base=o.name=i.slice(h,p)):(h===0&&u?(o.name=i.slice(1,f),o.base=i.slice(1,p)):(o.name=i.slice(h,f),o.base=i.slice(h,p)),o.ext=i.slice(f,p)),h>0?o.dir=i.slice(0,h-1):u&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,gS=r,gS}var At=RJ(),yS={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var OI;function NJ(){return OI||(OI=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var D=0,U=new Array(256),W=0;W!=256;++W)D=W,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,U[W]=D;return typeof Int32Array<"u"?new Int32Array(U):U}var r=n();function a(D){var U=0,W=0,Q=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Q=0;Q!=256;++Q)F[Q]=D[Q];for(Q=0;Q!=256;++Q)for(W=D[Q],U=256+Q;U<4096;U+=256)W=F[U]=W>>>8^D[W&255];var Z=[];for(Q=1;Q!=16;++Q)Z[Q-1]=typeof Int32Array<"u"?F.subarray(Q*256,Q*256+256):F.slice(Q*256,Q*256+256);return Z}var i=a(r),o=i[0],s=i[1],u=i[2],c=i[3],f=i[4],h=i[5],p=i[6],g=i[7],v=i[8],b=i[9],_=i[10],x=i[11],S=i[12],E=i[13],C=i[14];function k(D,U){for(var W=U^-1,Q=0,F=D.length;Q<F;)W=W>>>8^r[(W^D.charCodeAt(Q++))&255];return~W}function O(D,U){for(var W=U^-1,Q=D.length-15,F=0;F<Q;)W=C[D[F++]^W&255]^E[D[F++]^W>>8&255]^S[D[F++]^W>>16&255]^x[D[F++]^W>>>24]^_[D[F++]]^b[D[F++]]^v[D[F++]]^g[D[F++]]^p[D[F++]]^h[D[F++]]^f[D[F++]]^c[D[F++]]^u[D[F++]]^s[D[F++]]^o[D[F++]]^r[D[F++]];for(Q+=15;F<Q;)W=W>>>8^r[(W^D[F++])&255];return~W}function N(D,U){for(var W=U^-1,Q=0,F=D.length,Z=0,L=0;Q<F;)Z=D.charCodeAt(Q++),Z<128?W=W>>>8^r[(W^Z)&255]:Z<2048?(W=W>>>8^r[(W^(192|Z>>6&31))&255],W=W>>>8^r[(W^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,L=D.charCodeAt(Q++)&1023,W=W>>>8^r[(W^(240|Z>>8&7))&255],W=W>>>8^r[(W^(128|Z>>2&63))&255],W=W>>>8^r[(W^(128|L>>6&15|(Z&3)<<4))&255],W=W>>>8^r[(W^(128|L&63))&255]):(W=W>>>8^r[(W^(224|Z>>12&15))&255],W=W>>>8^r[(W^(128|Z>>6&63))&255],W=W>>>8^r[(W^(128|Z&63))&255]);return~W}t.table=r,t.bstr=k,t.buf=O,t.str=N})}(yS)),yS}var IJ=NJ();const OJ=ei(IJ);var bS={},DI;function yc(){return DI||(DI=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(i[u]=s[u])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,u,c){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+u),c);return}for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){var o,s,u,c,f,h;for(u=0,o=0,s=i.length;o<s;o++)u+=i[o].length;for(h=new Uint8Array(u),c=0,o=0,s=i.length;o<s;o++)f=i[o],h.set(f,c),c+=f.length;return h}},a={arraySet:function(i,o,s,u,c){for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(bS)),bS}var Sf={},Do={},Gc={},jI;function DJ(){if(jI)return Gc;jI=1;var e=yc(),t=4,n=0,r=1,a=2;function i(I){for(var H=I.length;--H>=0;)I[H]=0}var o=0,s=1,u=2,c=3,f=258,h=29,p=256,g=p+1+h,v=30,b=19,_=2*g+1,x=15,S=16,E=7,C=256,k=16,O=17,N=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=512,Z=new Array((g+2)*2);i(Z);var L=new Array(v*2);i(L);var he=new Array(F);i(he);var ie=new Array(f-c+1);i(ie);var ne=new Array(h);i(ne);var ee=new Array(v);i(ee);function se(I,H,fe,Oe,ve){this.static_tree=I,this.extra_bits=H,this.extra_base=fe,this.elems=Oe,this.max_length=ve,this.has_stree=I&&I.length}var G,X,Y;function re(I,H){this.dyn_tree=I,this.max_code=0,this.stat_desc=H}function be(I){return I<256?he[I]:he[256+(I>>>7)]}function we(I,H){I.pending_buf[I.pending++]=H&255,I.pending_buf[I.pending++]=H>>>8&255}function Me(I,H,fe){I.bi_valid>S-fe?(I.bi_buf|=H<<I.bi_valid&65535,we(I,I.bi_buf),I.bi_buf=H>>S-I.bi_valid,I.bi_valid+=fe-S):(I.bi_buf|=H<<I.bi_valid&65535,I.bi_valid+=fe)}function Pe(I,H,fe){Me(I,fe[H*2],fe[H*2+1])}function Ae(I,H){var fe=0;do fe|=I&1,I>>>=1,fe<<=1;while(--H>0);return fe>>>1}function Te(I){I.bi_valid===16?(we(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):I.bi_valid>=8&&(I.pending_buf[I.pending++]=I.bi_buf&255,I.bi_buf>>=8,I.bi_valid-=8)}function qe(I,H){var fe=H.dyn_tree,Oe=H.max_code,ve=H.stat_desc.static_tree,ke=H.stat_desc.has_stree,le=H.stat_desc.extra_bits,ct=H.stat_desc.extra_base,yt=H.stat_desc.max_length,M,Be,et,me,De,Ke,Ct=0;for(me=0;me<=x;me++)I.bl_count[me]=0;for(fe[I.heap[I.heap_max]*2+1]=0,M=I.heap_max+1;M<_;M++)Be=I.heap[M],me=fe[fe[Be*2+1]*2+1]+1,me>yt&&(me=yt,Ct++),fe[Be*2+1]=me,!(Be>Oe)&&(I.bl_count[me]++,De=0,Be>=ct&&(De=le[Be-ct]),Ke=fe[Be*2],I.opt_len+=Ke*(me+De),ke&&(I.static_len+=Ke*(ve[Be*2+1]+De)));if(Ct!==0){do{for(me=yt-1;I.bl_count[me]===0;)me--;I.bl_count[me]--,I.bl_count[me+1]+=2,I.bl_count[yt]--,Ct-=2}while(Ct>0);for(me=yt;me!==0;me--)for(Be=I.bl_count[me];Be!==0;)et=I.heap[--M],!(et>Oe)&&(fe[et*2+1]!==me&&(I.opt_len+=(me-fe[et*2+1])*fe[et*2],fe[et*2+1]=me),Be--)}}function it(I,H,fe){var Oe=new Array(x+1),ve=0,ke,le;for(ke=1;ke<=x;ke++)Oe[ke]=ve=ve+fe[ke-1]<<1;for(le=0;le<=H;le++){var ct=I[le*2+1];ct!==0&&(I[le*2]=Ae(Oe[ct]++,ct))}}function Ie(){var I,H,fe,Oe,ve,ke=new Array(x+1);for(fe=0,Oe=0;Oe<h-1;Oe++)for(ne[Oe]=fe,I=0;I<1<<D[Oe];I++)ie[fe++]=Oe;for(ie[fe-1]=Oe,ve=0,Oe=0;Oe<16;Oe++)for(ee[Oe]=ve,I=0;I<1<<U[Oe];I++)he[ve++]=Oe;for(ve>>=7;Oe<v;Oe++)for(ee[Oe]=ve<<7,I=0;I<1<<U[Oe]-7;I++)he[256+ve++]=Oe;for(H=0;H<=x;H++)ke[H]=0;for(I=0;I<=143;)Z[I*2+1]=8,I++,ke[8]++;for(;I<=255;)Z[I*2+1]=9,I++,ke[9]++;for(;I<=279;)Z[I*2+1]=7,I++,ke[7]++;for(;I<=287;)Z[I*2+1]=8,I++,ke[8]++;for(it(Z,g+1,ke),I=0;I<v;I++)L[I*2+1]=5,L[I*2]=Ae(I,5);G=new se(Z,D,p+1,g,x),X=new se(L,U,0,v,x),Y=new se(new Array(0),W,0,b,E)}function Re(I){var H;for(H=0;H<g;H++)I.dyn_ltree[H*2]=0;for(H=0;H<v;H++)I.dyn_dtree[H*2]=0;for(H=0;H<b;H++)I.bl_tree[H*2]=0;I.dyn_ltree[C*2]=1,I.opt_len=I.static_len=0,I.last_lit=I.matches=0}function z(I){I.bi_valid>8?we(I,I.bi_buf):I.bi_valid>0&&(I.pending_buf[I.pending++]=I.bi_buf),I.bi_buf=0,I.bi_valid=0}function Ce(I,H,fe,Oe){z(I),we(I,fe),we(I,~fe),e.arraySet(I.pending_buf,I.window,H,fe,I.pending),I.pending+=fe}function Ne(I,H,fe,Oe){var ve=H*2,ke=fe*2;return I[ve]<I[ke]||I[ve]===I[ke]&&Oe[H]<=Oe[fe]}function ce(I,H,fe){for(var Oe=I.heap[fe],ve=fe<<1;ve<=I.heap_len&&(ve<I.heap_len&&Ne(H,I.heap[ve+1],I.heap[ve],I.depth)&&ve++,!Ne(H,Oe,I.heap[ve],I.depth));)I.heap[fe]=I.heap[ve],fe=ve,ve<<=1;I.heap[fe]=Oe}function ae(I,H,fe){var Oe,ve,ke=0,le,ct;if(I.last_lit!==0)do Oe=I.pending_buf[I.d_buf+ke*2]<<8|I.pending_buf[I.d_buf+ke*2+1],ve=I.pending_buf[I.l_buf+ke],ke++,Oe===0?Pe(I,ve,H):(le=ie[ve],Pe(I,le+p+1,H),ct=D[le],ct!==0&&(ve-=ne[le],Me(I,ve,ct)),Oe--,le=be(Oe),Pe(I,le,fe),ct=U[le],ct!==0&&(Oe-=ee[le],Me(I,Oe,ct)));while(ke<I.last_lit);Pe(I,C,H)}function J(I,H){var fe=H.dyn_tree,Oe=H.stat_desc.static_tree,ve=H.stat_desc.has_stree,ke=H.stat_desc.elems,le,ct,yt=-1,M;for(I.heap_len=0,I.heap_max=_,le=0;le<ke;le++)fe[le*2]!==0?(I.heap[++I.heap_len]=yt=le,I.depth[le]=0):fe[le*2+1]=0;for(;I.heap_len<2;)M=I.heap[++I.heap_len]=yt<2?++yt:0,fe[M*2]=1,I.depth[M]=0,I.opt_len--,ve&&(I.static_len-=Oe[M*2+1]);for(H.max_code=yt,le=I.heap_len>>1;le>=1;le--)ce(I,fe,le);M=ke;do le=I.heap[1],I.heap[1]=I.heap[I.heap_len--],ce(I,fe,1),ct=I.heap[1],I.heap[--I.heap_max]=le,I.heap[--I.heap_max]=ct,fe[M*2]=fe[le*2]+fe[ct*2],I.depth[M]=(I.depth[le]>=I.depth[ct]?I.depth[le]:I.depth[ct])+1,fe[le*2+1]=fe[ct*2+1]=M,I.heap[1]=M++,ce(I,fe,1);while(I.heap_len>=2);I.heap[--I.heap_max]=I.heap[1],qe(I,H),it(fe,yt,I.bl_count)}function xe(I,H,fe){var Oe,ve=-1,ke,le=H[0*2+1],ct=0,yt=7,M=4;for(le===0&&(yt=138,M=3),H[(fe+1)*2+1]=65535,Oe=0;Oe<=fe;Oe++)ke=le,le=H[(Oe+1)*2+1],!(++ct<yt&&ke===le)&&(ct<M?I.bl_tree[ke*2]+=ct:ke!==0?(ke!==ve&&I.bl_tree[ke*2]++,I.bl_tree[k*2]++):ct<=10?I.bl_tree[O*2]++:I.bl_tree[N*2]++,ct=0,ve=ke,le===0?(yt=138,M=3):ke===le?(yt=6,M=3):(yt=7,M=4))}function Le(I,H,fe){var Oe,ve=-1,ke,le=H[0*2+1],ct=0,yt=7,M=4;for(le===0&&(yt=138,M=3),Oe=0;Oe<=fe;Oe++)if(ke=le,le=H[(Oe+1)*2+1],!(++ct<yt&&ke===le)){if(ct<M)do Pe(I,ke,I.bl_tree);while(--ct!==0);else ke!==0?(ke!==ve&&(Pe(I,ke,I.bl_tree),ct--),Pe(I,k,I.bl_tree),Me(I,ct-3,2)):ct<=10?(Pe(I,O,I.bl_tree),Me(I,ct-3,3)):(Pe(I,N,I.bl_tree),Me(I,ct-11,7));ct=0,ve=ke,le===0?(yt=138,M=3):ke===le?(yt=6,M=3):(yt=7,M=4)}}function Se(I){var H;for(xe(I,I.dyn_ltree,I.l_desc.max_code),xe(I,I.dyn_dtree,I.d_desc.max_code),J(I,I.bl_desc),H=b-1;H>=3&&I.bl_tree[Q[H]*2+1]===0;H--);return I.opt_len+=3*(H+1)+5+5+4,H}function Ve(I,H,fe,Oe){var ve;for(Me(I,H-257,5),Me(I,fe-1,5),Me(I,Oe-4,4),ve=0;ve<Oe;ve++)Me(I,I.bl_tree[Q[ve]*2+1],3);Le(I,I.dyn_ltree,H-1),Le(I,I.dyn_dtree,fe-1)}function xt(I){var H=4093624447,fe;for(fe=0;fe<=31;fe++,H>>>=1)if(H&1&&I.dyn_ltree[fe*2]!==0)return n;if(I.dyn_ltree[9*2]!==0||I.dyn_ltree[10*2]!==0||I.dyn_ltree[13*2]!==0)return r;for(fe=32;fe<p;fe++)if(I.dyn_ltree[fe*2]!==0)return r;return n}var ht=!1;function Et(I){ht||(Ie(),ht=!0),I.l_desc=new re(I.dyn_ltree,G),I.d_desc=new re(I.dyn_dtree,X),I.bl_desc=new re(I.bl_tree,Y),I.bi_buf=0,I.bi_valid=0,Re(I)}function Pt(I,H,fe,Oe){Me(I,(o<<1)+(Oe?1:0),3),Ce(I,H,fe)}function Tt(I){Me(I,s<<1,3),Pe(I,C,Z),Te(I)}function Ut(I,H,fe,Oe){var ve,ke,le=0;I.level>0?(I.strm.data_type===a&&(I.strm.data_type=xt(I)),J(I,I.l_desc),J(I,I.d_desc),le=Se(I),ve=I.opt_len+3+7>>>3,ke=I.static_len+3+7>>>3,ke<=ve&&(ve=ke)):ve=ke=fe+5,fe+4<=ve&&H!==-1?Pt(I,H,fe,Oe):I.strategy===t||ke===ve?(Me(I,(s<<1)+(Oe?1:0),3),ae(I,Z,L)):(Me(I,(u<<1)+(Oe?1:0),3),Ve(I,I.l_desc.max_code+1,I.d_desc.max_code+1,le+1),ae(I,I.dyn_ltree,I.dyn_dtree)),Re(I),Oe&&z(I)}function ge(I,H,fe){return I.pending_buf[I.d_buf+I.last_lit*2]=H>>>8&255,I.pending_buf[I.d_buf+I.last_lit*2+1]=H&255,I.pending_buf[I.l_buf+I.last_lit]=fe&255,I.last_lit++,H===0?I.dyn_ltree[fe*2]++:(I.matches++,H--,I.dyn_ltree[(ie[fe]+p+1)*2]++,I.dyn_dtree[be(H)*2]++),I.last_lit===I.lit_bufsize-1}return Gc._tr_init=Et,Gc._tr_stored_block=Pt,Gc._tr_flush_block=Ut,Gc._tr_tally=ge,Gc._tr_align=Tt,Gc}var vS,MI;function o8(){if(MI)return vS;MI=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return vS=e,vS}var wS,PI;function s8(){if(PI)return wS;PI=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,u=o+i;r^=-1;for(var c=o;c<u;c++)r=r>>>8^s[(r^a[c])&255];return r^-1}return wS=n,wS}var _S,FI;function gk(){return FI||(FI=1,_S={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),_S}var LI;function jJ(){if(LI)return Do;LI=1;var e=yc(),t=DJ(),n=o8(),r=s8(),a=gk(),i=0,o=1,s=3,u=4,c=5,f=0,h=1,p=-2,g=-3,v=-5,b=-1,_=1,x=2,S=3,E=4,C=0,k=2,O=8,N=9,D=15,U=8,W=29,Q=256,F=Q+1+W,Z=30,L=19,he=2*F+1,ie=15,ne=3,ee=258,se=ee+ne+1,G=32,X=42,Y=69,re=73,be=91,we=103,Me=113,Pe=666,Ae=1,Te=2,qe=3,it=4,Ie=3;function Re(M,Be){return M.msg=a[Be],Be}function z(M){return(M<<1)-(M>4?9:0)}function Ce(M){for(var Be=M.length;--Be>=0;)M[Be]=0}function Ne(M){var Be=M.state,et=Be.pending;et>M.avail_out&&(et=M.avail_out),et!==0&&(e.arraySet(M.output,Be.pending_buf,Be.pending_out,et,M.next_out),M.next_out+=et,Be.pending_out+=et,M.total_out+=et,M.avail_out-=et,Be.pending-=et,Be.pending===0&&(Be.pending_out=0))}function ce(M,Be){t._tr_flush_block(M,M.block_start>=0?M.block_start:-1,M.strstart-M.block_start,Be),M.block_start=M.strstart,Ne(M.strm)}function ae(M,Be){M.pending_buf[M.pending++]=Be}function J(M,Be){M.pending_buf[M.pending++]=Be>>>8&255,M.pending_buf[M.pending++]=Be&255}function xe(M,Be,et,me){var De=M.avail_in;return De>me&&(De=me),De===0?0:(M.avail_in-=De,e.arraySet(Be,M.input,M.next_in,De,et),M.state.wrap===1?M.adler=n(M.adler,Be,De,et):M.state.wrap===2&&(M.adler=r(M.adler,Be,De,et)),M.next_in+=De,M.total_in+=De,De)}function Le(M,Be){var et=M.max_chain_length,me=M.strstart,De,Ke,Ct=M.prev_length,ye=M.nice_match,q=M.strstart>M.w_size-se?M.strstart-(M.w_size-se):0,B=M.window,V=M.w_mask,pe=M.prev,de=M.strstart+ee,Fe=B[me+Ct-1],ot=B[me+Ct];M.prev_length>=M.good_match&&(et>>=2),ye>M.lookahead&&(ye=M.lookahead);do if(De=Be,!(B[De+Ct]!==ot||B[De+Ct-1]!==Fe||B[De]!==B[me]||B[++De]!==B[me+1])){me+=2,De++;do;while(B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&me<de);if(Ke=ee-(de-me),me=de-ee,Ke>Ct){if(M.match_start=Be,Ct=Ke,Ke>=ye)break;Fe=B[me+Ct-1],ot=B[me+Ct]}}while((Be=pe[Be&V])>q&&--et!==0);return Ct<=M.lookahead?Ct:M.lookahead}function Se(M){var Be=M.w_size,et,me,De,Ke,Ct;do{if(Ke=M.window_size-M.lookahead-M.strstart,M.strstart>=Be+(Be-se)){e.arraySet(M.window,M.window,Be,Be,0),M.match_start-=Be,M.strstart-=Be,M.block_start-=Be,me=M.hash_size,et=me;do De=M.head[--et],M.head[et]=De>=Be?De-Be:0;while(--me);me=Be,et=me;do De=M.prev[--et],M.prev[et]=De>=Be?De-Be:0;while(--me);Ke+=Be}if(M.strm.avail_in===0)break;if(me=xe(M.strm,M.window,M.strstart+M.lookahead,Ke),M.lookahead+=me,M.lookahead+M.insert>=ne)for(Ct=M.strstart-M.insert,M.ins_h=M.window[Ct],M.ins_h=(M.ins_h<<M.hash_shift^M.window[Ct+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[Ct+ne-1])&M.hash_mask,M.prev[Ct&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=Ct,Ct++,M.insert--,!(M.lookahead+M.insert<ne)););}while(M.lookahead<se&&M.strm.avail_in!==0)}function Ve(M,Be){var et=65535;for(et>M.pending_buf_size-5&&(et=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Se(M),M.lookahead===0&&Be===i)return Ae;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var me=M.block_start+et;if((M.strstart===0||M.strstart>=me)&&(M.lookahead=M.strstart-me,M.strstart=me,ce(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-se&&(ce(M,!1),M.strm.avail_out===0))return Ae}return M.insert=0,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):(M.strstart>M.block_start&&(ce(M,!1),M.strm.avail_out===0),Ae)}function xt(M,Be){for(var et,me;;){if(M.lookahead<se){if(Se(M),M.lookahead<se&&Be===i)return Ae;if(M.lookahead===0)break}if(et=0,M.lookahead>=ne&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ne-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),et!==0&&M.strstart-et<=M.w_size-se&&(M.match_length=Le(M,et)),M.match_length>=ne)if(me=t._tr_tally(M,M.strstart-M.match_start,M.match_length-ne),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=ne){M.match_length--;do M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ne-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart;while(--M.match_length!==0);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else me=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(me&&(ce(M,!1),M.strm.avail_out===0))return Ae}return M.insert=M.strstart<ne-1?M.strstart:ne-1,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Ae:Te}function ht(M,Be){for(var et,me,De;;){if(M.lookahead<se){if(Se(M),M.lookahead<se&&Be===i)return Ae;if(M.lookahead===0)break}if(et=0,M.lookahead>=ne&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ne-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=ne-1,et!==0&&M.prev_length<M.max_lazy_match&&M.strstart-et<=M.w_size-se&&(M.match_length=Le(M,et),M.match_length<=5&&(M.strategy===_||M.match_length===ne&&M.strstart-M.match_start>4096)&&(M.match_length=ne-1)),M.prev_length>=ne&&M.match_length<=M.prev_length){De=M.strstart+M.lookahead-ne,me=t._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-ne),M.lookahead-=M.prev_length-1,M.prev_length-=2;do++M.strstart<=De&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ne-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart);while(--M.prev_length!==0);if(M.match_available=0,M.match_length=ne-1,M.strstart++,me&&(ce(M,!1),M.strm.avail_out===0))return Ae}else if(M.match_available){if(me=t._tr_tally(M,0,M.window[M.strstart-1]),me&&ce(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return Ae}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(me=t._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<ne-1?M.strstart:ne-1,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Ae:Te}function Et(M,Be){for(var et,me,De,Ke,Ct=M.window;;){if(M.lookahead<=ee){if(Se(M),M.lookahead<=ee&&Be===i)return Ae;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=ne&&M.strstart>0&&(De=M.strstart-1,me=Ct[De],me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De])){Ke=M.strstart+ee;do;while(me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&De<Ke);M.match_length=ee-(Ke-De),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=ne?(et=t._tr_tally(M,1,M.match_length-ne),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(et=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),et&&(ce(M,!1),M.strm.avail_out===0))return Ae}return M.insert=0,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Ae:Te}function Pt(M,Be){for(var et;;){if(M.lookahead===0&&(Se(M),M.lookahead===0)){if(Be===i)return Ae;break}if(M.match_length=0,et=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,et&&(ce(M,!1),M.strm.avail_out===0))return Ae}return M.insert=0,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Ae:Te}function Tt(M,Be,et,me,De){this.good_length=M,this.max_lazy=Be,this.nice_length=et,this.max_chain=me,this.func=De}var Ut;Ut=[new Tt(0,0,0,0,Ve),new Tt(4,4,8,4,xt),new Tt(4,5,16,8,xt),new Tt(4,6,32,32,xt),new Tt(4,4,16,16,ht),new Tt(8,16,32,32,ht),new Tt(8,16,128,128,ht),new Tt(8,32,128,256,ht),new Tt(32,128,258,1024,ht),new Tt(32,258,258,4096,ht)];function ge(M){M.window_size=2*M.w_size,Ce(M.head),M.max_lazy_match=Ut[M.level].max_lazy,M.good_match=Ut[M.level].good_length,M.nice_match=Ut[M.level].nice_length,M.max_chain_length=Ut[M.level].max_chain,M.strstart=0,M.block_start=0,M.lookahead=0,M.insert=0,M.match_length=M.prev_length=ne-1,M.match_available=0,M.ins_h=0}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(he*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*L+1)*2),Ce(this.dyn_ltree),Ce(this.dyn_dtree),Ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ie+1),this.heap=new e.Buf16(2*F+1),Ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*F+1),Ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(M){var Be;return!M||!M.state?Re(M,p):(M.total_in=M.total_out=0,M.data_type=k,Be=M.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?X:Me,M.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),f)}function fe(M){var Be=H(M);return Be===f&&ge(M.state),Be}function Oe(M,Be){return!M||!M.state||M.state.wrap!==2?p:(M.state.gzhead=Be,f)}function ve(M,Be,et,me,De,Ke){if(!M)return p;var Ct=1;if(Be===b&&(Be=6),me<0?(Ct=0,me=-me):me>15&&(Ct=2,me-=16),De<1||De>N||et!==O||me<8||me>15||Be<0||Be>9||Ke<0||Ke>E)return Re(M,p);me===8&&(me=9);var ye=new I;return M.state=ye,ye.strm=M,ye.wrap=Ct,ye.gzhead=null,ye.w_bits=me,ye.w_size=1<<ye.w_bits,ye.w_mask=ye.w_size-1,ye.hash_bits=De+7,ye.hash_size=1<<ye.hash_bits,ye.hash_mask=ye.hash_size-1,ye.hash_shift=~~((ye.hash_bits+ne-1)/ne),ye.window=new e.Buf8(ye.w_size*2),ye.head=new e.Buf16(ye.hash_size),ye.prev=new e.Buf16(ye.w_size),ye.lit_bufsize=1<<De+6,ye.pending_buf_size=ye.lit_bufsize*4,ye.pending_buf=new e.Buf8(ye.pending_buf_size),ye.d_buf=1*ye.lit_bufsize,ye.l_buf=3*ye.lit_bufsize,ye.level=Be,ye.strategy=Ke,ye.method=et,fe(M)}function ke(M,Be){return ve(M,Be,O,D,U,C)}function le(M,Be){var et,me,De,Ke;if(!M||!M.state||Be>c||Be<0)return M?Re(M,p):p;if(me=M.state,!M.output||!M.input&&M.avail_in!==0||me.status===Pe&&Be!==u)return Re(M,M.avail_out===0?v:p);if(me.strm=M,et=me.last_flush,me.last_flush=Be,me.status===X)if(me.wrap===2)M.adler=0,ae(me,31),ae(me,139),ae(me,8),me.gzhead?(ae(me,(me.gzhead.text?1:0)+(me.gzhead.hcrc?2:0)+(me.gzhead.extra?4:0)+(me.gzhead.name?8:0)+(me.gzhead.comment?16:0)),ae(me,me.gzhead.time&255),ae(me,me.gzhead.time>>8&255),ae(me,me.gzhead.time>>16&255),ae(me,me.gzhead.time>>24&255),ae(me,me.level===9?2:me.strategy>=x||me.level<2?4:0),ae(me,me.gzhead.os&255),me.gzhead.extra&&me.gzhead.extra.length&&(ae(me,me.gzhead.extra.length&255),ae(me,me.gzhead.extra.length>>8&255)),me.gzhead.hcrc&&(M.adler=r(M.adler,me.pending_buf,me.pending,0)),me.gzindex=0,me.status=Y):(ae(me,0),ae(me,0),ae(me,0),ae(me,0),ae(me,0),ae(me,me.level===9?2:me.strategy>=x||me.level<2?4:0),ae(me,Ie),me.status=Me);else{var Ct=O+(me.w_bits-8<<4)<<8,ye=-1;me.strategy>=x||me.level<2?ye=0:me.level<6?ye=1:me.level===6?ye=2:ye=3,Ct|=ye<<6,me.strstart!==0&&(Ct|=G),Ct+=31-Ct%31,me.status=Me,J(me,Ct),me.strstart!==0&&(J(me,M.adler>>>16),J(me,M.adler&65535)),M.adler=1}if(me.status===Y)if(me.gzhead.extra){for(De=me.pending;me.gzindex<(me.gzhead.extra.length&65535)&&!(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ne(M),De=me.pending,me.pending===me.pending_buf_size));)ae(me,me.gzhead.extra[me.gzindex]&255),me.gzindex++;me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),me.gzindex===me.gzhead.extra.length&&(me.gzindex=0,me.status=re)}else me.status=re;if(me.status===re)if(me.gzhead.name){De=me.pending;do{if(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ne(M),De=me.pending,me.pending===me.pending_buf_size)){Ke=1;break}me.gzindex<me.gzhead.name.length?Ke=me.gzhead.name.charCodeAt(me.gzindex++)&255:Ke=0,ae(me,Ke)}while(Ke!==0);me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ke===0&&(me.gzindex=0,me.status=be)}else me.status=be;if(me.status===be)if(me.gzhead.comment){De=me.pending;do{if(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ne(M),De=me.pending,me.pending===me.pending_buf_size)){Ke=1;break}me.gzindex<me.gzhead.comment.length?Ke=me.gzhead.comment.charCodeAt(me.gzindex++)&255:Ke=0,ae(me,Ke)}while(Ke!==0);me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ke===0&&(me.status=we)}else me.status=we;if(me.status===we&&(me.gzhead.hcrc?(me.pending+2>me.pending_buf_size&&Ne(M),me.pending+2<=me.pending_buf_size&&(ae(me,M.adler&255),ae(me,M.adler>>8&255),M.adler=0,me.status=Me)):me.status=Me),me.pending!==0){if(Ne(M),M.avail_out===0)return me.last_flush=-1,f}else if(M.avail_in===0&&z(Be)<=z(et)&&Be!==u)return Re(M,v);if(me.status===Pe&&M.avail_in!==0)return Re(M,v);if(M.avail_in!==0||me.lookahead!==0||Be!==i&&me.status!==Pe){var q=me.strategy===x?Pt(me,Be):me.strategy===S?Et(me,Be):Ut[me.level].func(me,Be);if((q===qe||q===it)&&(me.status=Pe),q===Ae||q===qe)return M.avail_out===0&&(me.last_flush=-1),f;if(q===Te&&(Be===o?t._tr_align(me):Be!==c&&(t._tr_stored_block(me,0,0,!1),Be===s&&(Ce(me.head),me.lookahead===0&&(me.strstart=0,me.block_start=0,me.insert=0))),Ne(M),M.avail_out===0))return me.last_flush=-1,f}return Be!==u?f:me.wrap<=0?h:(me.wrap===2?(ae(me,M.adler&255),ae(me,M.adler>>8&255),ae(me,M.adler>>16&255),ae(me,M.adler>>24&255),ae(me,M.total_in&255),ae(me,M.total_in>>8&255),ae(me,M.total_in>>16&255),ae(me,M.total_in>>24&255)):(J(me,M.adler>>>16),J(me,M.adler&65535)),Ne(M),me.wrap>0&&(me.wrap=-me.wrap),me.pending!==0?f:h)}function ct(M){var Be;return!M||!M.state?p:(Be=M.state.status,Be!==X&&Be!==Y&&Be!==re&&Be!==be&&Be!==we&&Be!==Me&&Be!==Pe?Re(M,p):(M.state=null,Be===Me?Re(M,g):f))}function yt(M,Be){var et=Be.length,me,De,Ke,Ct,ye,q,B,V;if(!M||!M.state||(me=M.state,Ct=me.wrap,Ct===2||Ct===1&&me.status!==X||me.lookahead))return p;for(Ct===1&&(M.adler=n(M.adler,Be,et,0)),me.wrap=0,et>=me.w_size&&(Ct===0&&(Ce(me.head),me.strstart=0,me.block_start=0,me.insert=0),V=new e.Buf8(me.w_size),e.arraySet(V,Be,et-me.w_size,me.w_size,0),Be=V,et=me.w_size),ye=M.avail_in,q=M.next_in,B=M.input,M.avail_in=et,M.next_in=0,M.input=Be,Se(me);me.lookahead>=ne;){De=me.strstart,Ke=me.lookahead-(ne-1);do me.ins_h=(me.ins_h<<me.hash_shift^me.window[De+ne-1])&me.hash_mask,me.prev[De&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=De,De++;while(--Ke);me.strstart=De,me.lookahead=ne-1,Se(me)}return me.strstart+=me.lookahead,me.block_start=me.strstart,me.insert=me.lookahead,me.lookahead=0,me.match_length=me.prev_length=ne-1,me.match_available=0,M.next_in=q,M.input=B,M.avail_in=ye,me.wrap=Ct,f}return Do.deflateInit=ke,Do.deflateInit2=ve,Do.deflateReset=fe,Do.deflateResetKeep=H,Do.deflateSetHeader=Oe,Do.deflate=le,Do.deflateEnd=ct,Do.deflateSetDictionary=yt,Do.deflateInfo="pako deflate (from Nodeca project)",Do}var Wc={},$I;function l8(){if($I)return Wc;$I=1;var e=yc(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Wc.string2buf=function(o){var s,u,c,f,h,p=o.length,g=0;for(f=0;f<p;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<p&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(s=new e.Buf8(g),h=0,f=0;h<g;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<p&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),u<128?s[h++]=u:u<2048?(s[h++]=192|u>>>6,s[h++]=128|u&63):u<65536?(s[h++]=224|u>>>12,s[h++]=128|u>>>6&63,s[h++]=128|u&63):(s[h++]=240|u>>>18,s[h++]=128|u>>>12&63,s[h++]=128|u>>>6&63,s[h++]=128|u&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var u="",c=0;c<s;c++)u+=String.fromCharCode(o[c]);return u}return Wc.buf2binstring=function(o){return i(o,o.length)},Wc.binstring2buf=function(o){for(var s=new e.Buf8(o.length),u=0,c=s.length;u<c;u++)s[u]=o.charCodeAt(u);return s},Wc.buf2string=function(o,s){var u,c,f,h,p=s||o.length,g=new Array(p*2);for(c=0,u=0;u<p;){if(f=o[u++],f<128){g[c++]=f;continue}if(h=r[f],h>4){g[c++]=65533,u+=h-1;continue}for(f&=h===2?31:h===3?15:7;h>1&&u<p;)f=f<<6|o[u++]&63,h--;if(h>1){g[c++]=65533;continue}f<65536?g[c++]=f:(f-=65536,g[c++]=55296|f>>10&1023,g[c++]=56320|f&1023)}return i(g,c)},Wc.utf8border=function(o,s){var u;for(s=s||o.length,s>o.length&&(s=o.length),u=s-1;u>=0&&(o[u]&192)===128;)u--;return u<0||u===0?s:u+r[o[u]]>s?u:s},Wc}var xS,BI;function u8(){if(BI)return xS;BI=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return xS=e,xS}var zI;function MJ(){if(zI)return Sf;zI=1;var e=jJ(),t=yc(),n=l8(),r=gk(),a=u8(),i=Object.prototype.toString,o=0,s=4,u=0,c=1,f=2,h=-1,p=0,g=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==u)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==u)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,k=this.options.chunkSize,O,N;if(this.ended)return!1;N=E===~~E?E:E===!0?s:o,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),O=e.deflate(C,N),O!==c&&O!==u)return this.onEnd(O),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(N===s||N===f))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&O!==c);return N===s?(O=e.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===u):(N===f&&(this.onEnd(u),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function b(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function _(S,E){return E=E||{},E.raw=!0,b(S,E)}function x(S,E){return E=E||{},E.gzip=!0,b(S,E)}return Sf.Deflate=v,Sf.deflate=b,Sf.deflateRaw=_,Sf.gzip=x,Sf}var Ef={},co={},SS,UI;function PJ(){if(UI)return SS;UI=1;var e=30,t=12;return SS=function(r,a){var i,o,s,u,c,f,h,p,g,v,b,_,x,S,E,C,k,O,N,D,U,W,Q,F,Z;i=r.state,o=r.next_in,F=r.input,s=o+(r.avail_in-5),u=r.next_out,Z=r.output,c=u-(a-r.avail_out),f=u+(r.avail_out-257),h=i.dmax,p=i.wsize,g=i.whave,v=i.wnext,b=i.window,_=i.hold,x=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),O=S[_&C];t:for(;;){if(N=O>>>24,_>>>=N,x-=N,N=O>>>16&255,N===0)Z[u++]=O&65535;else if(N&16){D=O&65535,N&=15,N&&(x<N&&(_+=F[o++]<<x,x+=8),D+=_&(1<<N)-1,_>>>=N,x-=N),x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),O=E[_&k];n:for(;;){if(N=O>>>24,_>>>=N,x-=N,N=O>>>16&255,N&16){if(U=O&65535,N&=15,x<N&&(_+=F[o++]<<x,x+=8,x<N&&(_+=F[o++]<<x,x+=8)),U+=_&(1<<N)-1,U>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=N,x-=N,N=u-c,U>N){if(N=U-N,N>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(W=0,Q=b,v===0){if(W+=p-N,N<D){D-=N;do Z[u++]=b[W++];while(--N);W=u-U,Q=Z}}else if(v<N){if(W+=p+v-N,N-=v,N<D){D-=N;do Z[u++]=b[W++];while(--N);if(W=0,v<D){N=v,D-=N;do Z[u++]=b[W++];while(--N);W=u-U,Q=Z}}}else if(W+=v-N,N<D){D-=N;do Z[u++]=b[W++];while(--N);W=u-U,Q=Z}for(;D>2;)Z[u++]=Q[W++],Z[u++]=Q[W++],Z[u++]=Q[W++],D-=3;D&&(Z[u++]=Q[W++],D>1&&(Z[u++]=Q[W++]))}else{W=u-U;do Z[u++]=Z[W++],Z[u++]=Z[W++],Z[u++]=Z[W++],D-=3;while(D>2);D&&(Z[u++]=Z[W++],D>1&&(Z[u++]=Z[W++]))}}else if((N&64)===0){O=E[(O&65535)+(_&(1<<N)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((N&64)===0){O=S[(O&65535)+(_&(1<<N)-1)];continue t}else if(N&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&u<f);D=x>>3,o-=D,x-=D<<3,_&=(1<<x)-1,r.next_in=o,r.next_out=u,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=u<f?257+(f-u):257-(u-f),i.hold=_,i.bits=x},SS}var ES,qI;function FJ(){if(qI)return ES;qI=1;var e=yc(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return ES=function(p,g,v,b,_,x,S,E){var C=E.bits,k=0,O=0,N=0,D=0,U=0,W=0,Q=0,F=0,Z=0,L=0,he,ie,ne,ee,se,G=null,X=0,Y,re=new e.Buf16(t+1),be=new e.Buf16(t+1),we=null,Me=0,Pe,Ae,Te;for(k=0;k<=t;k++)re[k]=0;for(O=0;O<b;O++)re[g[v+O]]++;for(U=C,D=t;D>=1&&re[D]===0;D--);if(U>D&&(U=D),D===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,E.bits=1,0;for(N=1;N<D&&re[N]===0;N++);for(U<N&&(U=N),F=1,k=1;k<=t;k++)if(F<<=1,F-=re[k],F<0)return-1;if(F>0&&(p===a||D!==1))return-1;for(be[1]=0,k=1;k<t;k++)be[k+1]=be[k]+re[k];for(O=0;O<b;O++)g[v+O]!==0&&(S[be[g[v+O]]++]=O);if(p===a?(G=we=S,Y=19):p===i?(G=s,X-=257,we=u,Me-=257,Y=256):(G=c,we=f,Y=-1),L=0,O=0,k=N,se=x,W=U,Q=0,ne=-1,Z=1<<U,ee=Z-1,p===i&&Z>n||p===o&&Z>r)return 1;for(;;){Pe=k-Q,S[O]<Y?(Ae=0,Te=S[O]):S[O]>Y?(Ae=we[Me+S[O]],Te=G[X+S[O]]):(Ae=96,Te=0),he=1<<k-Q,ie=1<<W,N=ie;do ie-=he,_[se+(L>>Q)+ie]=Pe<<24|Ae<<16|Te|0;while(ie!==0);for(he=1<<k-1;L&he;)he>>=1;if(he!==0?(L&=he-1,L+=he):L=0,O++,--re[k]===0){if(k===D)break;k=g[v+S[O]]}if(k>U&&(L&ee)!==ne){for(Q===0&&(Q=U),se+=N,W=k-Q,F=1<<W;W+Q<D&&(F-=re[W+Q],!(F<=0));)W++,F<<=1;if(Z+=1<<W,p===i&&Z>n||p===o&&Z>r)return 1;ne=L&ee,_[ne]=U<<24|W<<16|se-x|0}}return L!==0&&(_[se+L]=k-Q<<24|64<<16|0),E.bits=U,0},ES}var HI;function LJ(){if(HI)return co;HI=1;var e=yc(),t=o8(),n=s8(),r=PJ(),a=FJ(),i=0,o=1,s=2,u=4,c=5,f=6,h=0,p=1,g=2,v=-2,b=-3,_=-4,x=-5,S=8,E=1,C=2,k=3,O=4,N=5,D=6,U=7,W=8,Q=9,F=10,Z=11,L=12,he=13,ie=14,ne=15,ee=16,se=17,G=18,X=19,Y=20,re=21,be=22,we=23,Me=24,Pe=25,Ae=26,Te=27,qe=28,it=29,Ie=30,Re=31,z=32,Ce=852,Ne=592,ce=15,ae=ce;function J(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Le(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ve.total_in=ve.total_out=ke.total=0,ve.msg="",ke.wrap&&(ve.adler=ke.wrap&1),ke.mode=E,ke.last=0,ke.havedict=0,ke.dmax=32768,ke.head=null,ke.hold=0,ke.bits=0,ke.lencode=ke.lendyn=new e.Buf32(Ce),ke.distcode=ke.distdyn=new e.Buf32(Ne),ke.sane=1,ke.back=-1,h)}function Se(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ke.wsize=0,ke.whave=0,ke.wnext=0,Le(ve))}function Ve(ve,ke){var le,ct;return!ve||!ve.state||(ct=ve.state,ke<0?(le=0,ke=-ke):(le=(ke>>4)+1,ke<48&&(ke&=15)),ke&&(ke<8||ke>15))?v:(ct.window!==null&&ct.wbits!==ke&&(ct.window=null),ct.wrap=le,ct.wbits=ke,Se(ve))}function xt(ve,ke){var le,ct;return ve?(ct=new xe,ve.state=ct,ct.window=null,le=Ve(ve,ke),le!==h&&(ve.state=null),le):v}function ht(ve){return xt(ve,ae)}var Et=!0,Pt,Tt;function Ut(ve){if(Et){var ke;for(Pt=new e.Buf32(512),Tt=new e.Buf32(32),ke=0;ke<144;)ve.lens[ke++]=8;for(;ke<256;)ve.lens[ke++]=9;for(;ke<280;)ve.lens[ke++]=7;for(;ke<288;)ve.lens[ke++]=8;for(a(o,ve.lens,0,288,Pt,0,ve.work,{bits:9}),ke=0;ke<32;)ve.lens[ke++]=5;a(s,ve.lens,0,32,Tt,0,ve.work,{bits:5}),Et=!1}ve.lencode=Pt,ve.lenbits=9,ve.distcode=Tt,ve.distbits=5}function ge(ve,ke,le,ct){var yt,M=ve.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new e.Buf8(M.wsize)),ct>=M.wsize?(e.arraySet(M.window,ke,le-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(yt=M.wsize-M.wnext,yt>ct&&(yt=ct),e.arraySet(M.window,ke,le-ct,yt,M.wnext),ct-=yt,ct?(e.arraySet(M.window,ke,le-ct,ct,0),M.wnext=ct,M.whave=M.wsize):(M.wnext+=yt,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=yt))),0}function I(ve,ke){var le,ct,yt,M,Be,et,me,De,Ke,Ct,ye,q,B,V,pe=0,de,Fe,ot,Dt,un,zt,Vt,Xt,Rn=new e.Buf8(4),zn,fr,hr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return v;le=ve.state,le.mode===L&&(le.mode=he),Be=ve.next_out,yt=ve.output,me=ve.avail_out,M=ve.next_in,ct=ve.input,et=ve.avail_in,De=le.hold,Ke=le.bits,Ct=et,ye=me,Xt=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=he;break}for(;Ke<16;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if(le.wrap&2&&De===35615){le.check=0,Rn[0]=De&255,Rn[1]=De>>>8&255,le.check=n(le.check,Rn,2,0),De=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((De&255)<<8)+(De>>8))%31){ve.msg="incorrect header check",le.mode=Ie;break}if((De&15)!==S){ve.msg="unknown compression method",le.mode=Ie;break}if(De>>>=4,Ke-=4,Vt=(De&15)+8,le.wbits===0)le.wbits=Vt;else if(Vt>le.wbits){ve.msg="invalid window size",le.mode=Ie;break}le.dmax=1<<Vt,ve.adler=le.check=1,le.mode=De&512?F:L,De=0,Ke=0;break;case C:for(;Ke<16;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if(le.flags=De,(le.flags&255)!==S){ve.msg="unknown compression method",le.mode=Ie;break}if(le.flags&57344){ve.msg="unknown header flags set",le.mode=Ie;break}le.head&&(le.head.text=De>>8&1),le.flags&512&&(Rn[0]=De&255,Rn[1]=De>>>8&255,le.check=n(le.check,Rn,2,0)),De=0,Ke=0,le.mode=k;case k:for(;Ke<32;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}le.head&&(le.head.time=De),le.flags&512&&(Rn[0]=De&255,Rn[1]=De>>>8&255,Rn[2]=De>>>16&255,Rn[3]=De>>>24&255,le.check=n(le.check,Rn,4,0)),De=0,Ke=0,le.mode=O;case O:for(;Ke<16;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}le.head&&(le.head.xflags=De&255,le.head.os=De>>8),le.flags&512&&(Rn[0]=De&255,Rn[1]=De>>>8&255,le.check=n(le.check,Rn,2,0)),De=0,Ke=0,le.mode=N;case N:if(le.flags&1024){for(;Ke<16;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}le.length=De,le.head&&(le.head.extra_len=De),le.flags&512&&(Rn[0]=De&255,Rn[1]=De>>>8&255,le.check=n(le.check,Rn,2,0)),De=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=D;case D:if(le.flags&1024&&(q=le.length,q>et&&(q=et),q&&(le.head&&(Vt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ct,M,q,Vt)),le.flags&512&&(le.check=n(le.check,ct,q,M)),et-=q,M+=q,le.length-=q),le.length))break e;le.length=0,le.mode=U;case U:if(le.flags&2048){if(et===0)break e;q=0;do Vt=ct[M+q++],le.head&&Vt&&le.length<65536&&(le.head.name+=String.fromCharCode(Vt));while(Vt&&q<et);if(le.flags&512&&(le.check=n(le.check,ct,q,M)),et-=q,M+=q,Vt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=W;case W:if(le.flags&4096){if(et===0)break e;q=0;do Vt=ct[M+q++],le.head&&Vt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Vt));while(Vt&&q<et);if(le.flags&512&&(le.check=n(le.check,ct,q,M)),et-=q,M+=q,Vt)break e}else le.head&&(le.head.comment=null);le.mode=Q;case Q:if(le.flags&512){for(;Ke<16;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if(De!==(le.check&65535)){ve.msg="header crc mismatch",le.mode=Ie;break}De=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),ve.adler=le.check=0,le.mode=L;break;case F:for(;Ke<32;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}ve.adler=le.check=J(De),De=0,Ke=0,le.mode=Z;case Z:if(le.havedict===0)return ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=De,le.bits=Ke,g;ve.adler=le.check=1,le.mode=L;case L:if(ke===c||ke===f)break e;case he:if(le.last){De>>>=Ke&7,Ke-=Ke&7,le.mode=Te;break}for(;Ke<3;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}switch(le.last=De&1,De>>>=1,Ke-=1,De&3){case 0:le.mode=ie;break;case 1:if(Ut(le),le.mode=Y,ke===f){De>>>=2,Ke-=2;break e}break;case 2:le.mode=se;break;case 3:ve.msg="invalid block type",le.mode=Ie}De>>>=2,Ke-=2;break;case ie:for(De>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if((De&65535)!==(De>>>16^65535)){ve.msg="invalid stored block lengths",le.mode=Ie;break}if(le.length=De&65535,De=0,Ke=0,le.mode=ne,ke===f)break e;case ne:le.mode=ee;case ee:if(q=le.length,q){if(q>et&&(q=et),q>me&&(q=me),q===0)break e;e.arraySet(yt,ct,M,q,Be),et-=q,M+=q,me-=q,Be+=q,le.length-=q;break}le.mode=L;break;case se:for(;Ke<14;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if(le.nlen=(De&31)+257,De>>>=5,Ke-=5,le.ndist=(De&31)+1,De>>>=5,Ke-=5,le.ncode=(De&15)+4,De>>>=4,Ke-=4,le.nlen>286||le.ndist>30){ve.msg="too many length or distance symbols",le.mode=Ie;break}le.have=0,le.mode=G;case G:for(;le.have<le.ncode;){for(;Ke<3;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}le.lens[hr[le.have++]]=De&7,De>>>=3,Ke-=3}for(;le.have<19;)le.lens[hr[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,zn={bits:le.lenbits},Xt=a(i,le.lens,0,19,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Xt){ve.msg="invalid code lengths set",le.mode=Ie;break}le.have=0,le.mode=X;case X:for(;le.have<le.nlen+le.ndist;){for(;pe=le.lencode[De&(1<<le.lenbits)-1],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(de<=Ke);){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if(ot<16)De>>>=de,Ke-=de,le.lens[le.have++]=ot;else{if(ot===16){for(fr=de+2;Ke<fr;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if(De>>>=de,Ke-=de,le.have===0){ve.msg="invalid bit length repeat",le.mode=Ie;break}Vt=le.lens[le.have-1],q=3+(De&3),De>>>=2,Ke-=2}else if(ot===17){for(fr=de+3;Ke<fr;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}De>>>=de,Ke-=de,Vt=0,q=3+(De&7),De>>>=3,Ke-=3}else{for(fr=de+7;Ke<fr;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}De>>>=de,Ke-=de,Vt=0,q=11+(De&127),De>>>=7,Ke-=7}if(le.have+q>le.nlen+le.ndist){ve.msg="invalid bit length repeat",le.mode=Ie;break}for(;q--;)le.lens[le.have++]=Vt}}if(le.mode===Ie)break;if(le.lens[256]===0){ve.msg="invalid code -- missing end-of-block",le.mode=Ie;break}if(le.lenbits=9,zn={bits:le.lenbits},Xt=a(o,le.lens,0,le.nlen,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Xt){ve.msg="invalid literal/lengths set",le.mode=Ie;break}if(le.distbits=6,le.distcode=le.distdyn,zn={bits:le.distbits},Xt=a(s,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,zn),le.distbits=zn.bits,Xt){ve.msg="invalid distances set",le.mode=Ie;break}if(le.mode=Y,ke===f)break e;case Y:le.mode=re;case re:if(et>=6&&me>=258){ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=De,le.bits=Ke,r(ve,ye),Be=ve.next_out,yt=ve.output,me=ve.avail_out,M=ve.next_in,ct=ve.input,et=ve.avail_in,De=le.hold,Ke=le.bits,le.mode===L&&(le.back=-1);break}for(le.back=0;pe=le.lencode[De&(1<<le.lenbits)-1],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(de<=Ke);){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if(Fe&&(Fe&240)===0){for(Dt=de,un=Fe,zt=ot;pe=le.lencode[zt+((De&(1<<Dt+un)-1)>>Dt)],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(Dt+de<=Ke);){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}De>>>=Dt,Ke-=Dt,le.back+=Dt}if(De>>>=de,Ke-=de,le.back+=de,le.length=ot,Fe===0){le.mode=Ae;break}if(Fe&32){le.back=-1,le.mode=L;break}if(Fe&64){ve.msg="invalid literal/length code",le.mode=Ie;break}le.extra=Fe&15,le.mode=be;case be:if(le.extra){for(fr=le.extra;Ke<fr;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}le.length+=De&(1<<le.extra)-1,De>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=we;case we:for(;pe=le.distcode[De&(1<<le.distbits)-1],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(de<=Ke);){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if((Fe&240)===0){for(Dt=de,un=Fe,zt=ot;pe=le.distcode[zt+((De&(1<<Dt+un)-1)>>Dt)],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(Dt+de<=Ke);){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}De>>>=Dt,Ke-=Dt,le.back+=Dt}if(De>>>=de,Ke-=de,le.back+=de,Fe&64){ve.msg="invalid distance code",le.mode=Ie;break}le.offset=ot,le.extra=Fe&15,le.mode=Me;case Me:if(le.extra){for(fr=le.extra;Ke<fr;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}le.offset+=De&(1<<le.extra)-1,De>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){ve.msg="invalid distance too far back",le.mode=Ie;break}le.mode=Pe;case Pe:if(me===0)break e;if(q=ye-me,le.offset>q){if(q=le.offset-q,q>le.whave&&le.sane){ve.msg="invalid distance too far back",le.mode=Ie;break}q>le.wnext?(q-=le.wnext,B=le.wsize-q):B=le.wnext-q,q>le.length&&(q=le.length),V=le.window}else V=yt,B=Be-le.offset,q=le.length;q>me&&(q=me),me-=q,le.length-=q;do yt[Be++]=V[B++];while(--q);le.length===0&&(le.mode=re);break;case Ae:if(me===0)break e;yt[Be++]=le.length,me--,le.mode=re;break;case Te:if(le.wrap){for(;Ke<32;){if(et===0)break e;et--,De|=ct[M++]<<Ke,Ke+=8}if(ye-=me,ve.total_out+=ye,le.total+=ye,ye&&(ve.adler=le.check=le.flags?n(le.check,yt,ye,Be-ye):t(le.check,yt,ye,Be-ye)),ye=me,(le.flags?De:J(De))!==le.check){ve.msg="incorrect data check",le.mode=Ie;break}De=0,Ke=0}le.mode=qe;case qe:if(le.wrap&&le.flags){for(;Ke<32;){if(et===0)break e;et--,De+=ct[M++]<<Ke,Ke+=8}if(De!==(le.total&4294967295)){ve.msg="incorrect length check",le.mode=Ie;break}De=0,Ke=0}le.mode=it;case it:Xt=p;break e;case Ie:Xt=b;break e;case Re:return _;case z:default:return v}return ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=De,le.bits=Ke,(le.wsize||ye!==ve.avail_out&&le.mode<Ie&&(le.mode<Te||ke!==u))&&ge(ve,ve.output,ve.next_out,ye-ve.avail_out),Ct-=ve.avail_in,ye-=ve.avail_out,ve.total_in+=Ct,ve.total_out+=ye,le.total+=ye,le.wrap&&ye&&(ve.adler=le.check=le.flags?n(le.check,yt,ye,ve.next_out-ye):t(le.check,yt,ye,ve.next_out-ye)),ve.data_type=le.bits+(le.last?64:0)+(le.mode===L?128:0)+(le.mode===Y||le.mode===ne?256:0),(Ct===0&&ye===0||ke===u)&&Xt===h&&(Xt=x),Xt}function H(ve){if(!ve||!ve.state)return v;var ke=ve.state;return ke.window&&(ke.window=null),ve.state=null,h}function fe(ve,ke){var le;return!ve||!ve.state||(le=ve.state,(le.wrap&2)===0)?v:(le.head=ke,ke.done=!1,h)}function Oe(ve,ke){var le=ke.length,ct,yt,M;return!ve||!ve.state||(ct=ve.state,ct.wrap!==0&&ct.mode!==Z)?v:ct.mode===Z&&(yt=1,yt=t(yt,ke,le,0),yt!==ct.check)?b:(M=ge(ve,ke,le,le),M?(ct.mode=Re,_):(ct.havedict=1,h))}return co.inflateReset=Se,co.inflateReset2=Ve,co.inflateResetKeep=Le,co.inflateInit=ht,co.inflateInit2=xt,co.inflate=I,co.inflateEnd=H,co.inflateGetHeader=fe,co.inflateSetDictionary=Oe,co.inflateInfo="pako inflate (from Nodeca project)",co}var CS,VI;function c8(){return VI||(VI=1,CS={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),CS}var kS,GI;function $J(){if(GI)return kS;GI=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return kS=e,kS}var WI;function BJ(){if(WI)return Ef;WI=1;var e=LJ(),t=yc(),n=l8(),r=c8(),a=gk(),i=u8(),o=$J(),s=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(h&&h.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15)===0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,p.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=n.string2buf(p.dictionary):s.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(g=e.inflateSetDictionary(this.strm,p.dictionary),g!==r.Z_OK)))throw new Error(a[g])}u.prototype.push=function(h,p){var g=this.strm,v=this.options.chunkSize,b=this.options.dictionary,_,x,S,E,C,k=!1;if(this.ended)return!1;x=p===~~p?p:p===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&b&&(_=e.inflateSetDictionary(this.strm,b)),_===r.Z_BUF_ERROR&&k===!0&&(_=r.Z_OK,k=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,C=n.buf2string(g.output,S),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,p){var g=new u(p);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function f(h,p){return p=p||{},p.raw=!0,c(h,p)}return Ef.Inflate=u,Ef.inflate=c,Ef.inflateRaw=f,Ef.ungzip=c,Ef}var AS,KI;function zJ(){if(KI)return AS;KI=1;var e=yc().assign,t=MJ(),n=BJ(),r=c8(),a={};return e(a,t,n,r),AS=a,AS}var UJ=zJ();const yk=ei(UJ);var TS,ZI;function qJ(){if(ZI)return TS;ZI=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,u)=>{s?o(s):i(u)}):r.push(i),t.apply(this,r)})};return TS=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=u=>typeof u=="string"?o===u:u.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},TS}var HJ=qJ();const RS=ei(HJ);var NS,YI;function VJ(){if(YI)return NS;YI=1;var e={};function t(ne){return Array.isArray(ne)?ne:[ne]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,u=/^\\#/,c=/\r?\n/g,f=/^\.*\/|^\.+$/,h="/";let p="node-ignore";typeof Symbol<"u"&&(p=Symbol.for("node-ignore"));const g=p,v=(ne,ee,se)=>Object.defineProperty(ne,ee,{value:se}),b=/([0-z])-([0-z])/g,_=()=>!1,x=ne=>ne.replace(b,(ee,se,G)=>se.charCodeAt(0)<=G.charCodeAt(0)?ee:n),S=ne=>{const{length:ee}=ne;return ne.slice(0,ee-ee%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(ne,ee,se)=>ee+(se.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(ne,ee)=>{const{length:se}=ee;return ee.slice(0,se-se%2)+r}],[/[\\$.|*+(){^]/g,ne=>`\\${ne}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(ne,ee,se)=>ee+6<se.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(ne,ee,se)=>{const G=se.replace(/\\\*/g,"[^\\/]*");return ee+G}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(ne,ee,se,G,X)=>ee===a?`\\[${se}${S(G)}${X}`:X==="]"&&G.length%2===0?`[${x(se)}${G}]`:"[]"],[/(?:[^*])$/,ne=>/\/$/.test(ne)?`${ne}$`:`${ne}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(ne,ee)=>`${ee?`${ee}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(ne,ee)=>{let se=C[ne];return se||(se=E.reduce((G,[X,Y])=>G.replace(X,Y.bind(ne)),ne),C[ne]=se),ee?new RegExp(se,"i"):new RegExp(se)},O=ne=>typeof ne=="string",N=ne=>ne&&O(ne)&&!i.test(ne)&&!o.test(ne)&&ne.indexOf("#")!==0,D=ne=>ne.split(c);class U{constructor(ee,se,G,X){this.origin=ee,this.pattern=se,this.negative=G,this.regex=X}}const W=(ne,ee)=>{const se=ne;let G=!1;ne.indexOf("!")===0&&(G=!0,ne=ne.substr(1)),ne=ne.replace(s,"!").replace(u,"#");const X=k(ne,ee);return new U(se,ne,G,X)},Q=(ne,ee)=>{throw new ee(ne)},F=(ne,ee,se)=>O(ne)?ne?F.isNotRelative(ne)?se(`path should be a \`path.relative()\`d string, but got "${ee}"`,RangeError):!0:se("path must not be empty",TypeError):se(`path must be a string, but got \`${ee}\``,TypeError),Z=ne=>f.test(ne);F.isNotRelative=Z,F.convert=ne=>ne;class L{constructor({ignorecase:ee=!0,ignoreCase:se=ee,allowRelativePaths:G=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=se,this._allowRelativePaths=G,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(ee){if(ee&&ee[g]){this._rules=this._rules.concat(ee._rules),this._added=!0;return}if(N(ee)){const se=W(ee,this._ignoreCase);this._added=!0,this._rules.push(se)}}add(ee){return this._added=!1,t(O(ee)?D(ee):ee).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(ee){return this.add(ee)}_testOne(ee,se){let G=!1,X=!1;return this._rules.forEach(Y=>{const{negative:re}=Y;if(X===re&&G!==X||re&&!G&&!X&&!se)return;Y.regex.test(ee)&&(G=!re,X=re)}),{ignored:G,unignored:X}}_test(ee,se,G,X){const Y=ee&&F.convert(ee);return F(Y,ee,this._allowRelativePaths?_:Q),this._t(Y,se,G,X)}_t(ee,se,G,X){if(ee in se)return se[ee];if(X||(X=ee.split(h)),X.pop(),!X.length)return se[ee]=this._testOne(ee,G);const Y=this._t(X.join(h)+h,se,G,X);return se[ee]=Y.ignored?Y:this._testOne(ee,G)}ignores(ee){return this._test(ee,this._ignoreCache,!1).ignored}createFilter(){return ee=>!this.ignores(ee)}filter(ee){return t(ee).filter(this.createFilter())}test(ee){return this._test(ee,this._testCache,!0)}}const he=ne=>new L(ne),ie=ne=>F(ne&&F.convert(ne),ne,_);if(he.isPathValid=ie,he.default=he,NS=he,typeof Wr<"u"&&(e&&e.IGNORE_TEST_WIN32||Wr.platform==="win32")){const ne=se=>/^\\\\\?\\/.test(se)||/["<>|\u0000-\u001F]+/u.test(se)?se:se.replace(/\\/g,"/");F.convert=ne;const ee=/^[a-z]:\//i;F.isNotRelative=se=>ee.test(se)||Z(se)}return NS}var GJ=VJ();const WJ=ei(GJ);var IS,XI;function KJ(){if(XI)return IS;XI=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return IS=n,IS}var ZJ=KJ();const Os=ei(ZJ);var OS,JI;function YJ(){return JI||(JI=1,OS=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,u=a+1,c=[],f=[],h=[],p="",g=-1,v=0,b=1,_,x,S=function(){a>=i&&(_=n,x=a,n=r,r=_,a=i,i=x,o=!0,u=a+1)},E=function(N,D,U){return{x:N,y:D,k:U}},C=function(N,D){return{elem:N,t:D}},k=function(N,D,U){var W,Q,F;for(D>U?W=c[N-1+u]:W=c[N+1+u],F=Math.max(D,U),Q=F-N;Q<a&&F<i&&n[Q]===r[F];)++Q,++F;return c[N+u]=f.length,f[f.length]=new E(Q,F,W),F},O=function(N){var D,U,W;for(D=U=0,W=N.length-1;W>=0;--W)for(;D<N[W].x||U<N[W].y;)N[W].y-N[W].x>U-D?(o?h[h.length]=new C(r[U],g):h[h.length]=new C(r[U],b),++U):N[W].y-N[W].x<U-D?(o?h[h.length]=new C(n[D],b):h[h.length]=new C(n[D],g),++D):(h[h.length]=new C(n[D],v),p+=n[D],++D,++U)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return p},getses:function(){return h},compose:function(){var N,D,U,W,Q,F,Z,L;for(N=i-a,D=a+i+3,U={},Z=0;Z<D;++Z)U[Z]=-1,c[Z]=-1;W=-1;do{for(++W,L=-W;L<=N-1;++L)U[L+u]=k(L,U[L-1+u]+1,U[L+1+u]);for(L=N+W;L>=N+1;--L)U[L+u]=k(L,U[L-1+u]+1,U[L+1+u]);U[N+u]=k(N,U[N-1+u]+1,U[N+1+u])}while(U[N+u]!==i);for(s=N+2*W,Q=c[N+u],F=[];Q!==-1;)F[F.length]=new E(f[Q].x,f[Q].y,null),Q=f[Q].k;O(F)}}}),OS}var DS,QI;function XJ(){if(QI)return DS;QI=1;var e=YJ();function t(i,o){var s=new e(i,o);s.compose();for(var u=s.getses(),c,f,h=i.length-1,p=o.length-1,g=u.length-1;g>=0;--g)u[g].t===s.SES_COMMON?(f?(f.chain={file1index:h,file2index:p,chain:null},f=f.chain):(c={file1index:h,file2index:p,chain:null},f=c),h--,p--):u[g].t===s.SES_DELETE?h--:u[g].t===s.SES_ADD&&p--;var v={file1index:-1,file2index:-1,chain:null};return f?(f.chain=v,c):v}function n(i,o){for(var s=[],u=i.length,c=o.length,f=t(i,o);f!==null;f=f.chain){var h=u-f.file1index-1,p=c-f.file2index-1;u=f.file1index,c=f.file2index,(h||p)&&s.push({file1:[u+1,h],file2:[c+1,p]})}return s.reverse(),s}function r(i,o,s){var u,c=n(o,i),f=n(o,s),h=[];function p(ee,se){h.push([ee.file1[0],se,ee.file1[1],ee.file2[0],ee.file2[1]])}for(u=0;u<c.length;u++)p(c[u],0);for(u=0;u<f.length;u++)p(f[u],2);h.sort(function(ee,se){return ee[0]-se[0]});var g=[],v=0;function b(ee){ee>v&&(g.push([1,v,ee-v]),v=ee)}for(var _=0;_<h.length;_++){for(var x=_,S=h[_],E=S[0],C=E+S[2];_<h.length-1;){var k=h[_+1],O=k[0];if(O>C)break;C=Math.max(C,O+k[2]),_++}if(b(E),x==_)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var N={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(u=x;u<=_;u++){S=h[u];var D=S[1],U=N[D],W=S[0],Q=W+S[2],F=S[3],Z=F+S[4];U[0]=Math.min(F,U[0]),U[1]=Math.max(Z,U[1]),U[2]=Math.min(W,U[2]),U[3]=Math.max(Q,U[3])}var L=N[0][0]+(E-N[0][2]),he=N[0][1]+(C-N[0][3]),ie=N[2][0]+(E-N[2][2]),ne=N[2][1]+(C-N[2][3]);g.push([-1,L,he-L,E,C-E,ie,ne-ie])}v=C}return b(o.length),g}function a(i,o,s){var u=[],c=[i,o,s],f=r(i,o,s),h=[];function p(){h.length&&u.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],k=0;k<S[2];k++)if(i[k+E]!=s[k+C])return!0;return!1}for(var b=0;b<f.length;b++){var _=f[b],x=_[0];x==-1?v(_)?(p(),u.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(c[0].slice(_[1],_[1]+_[2])):g(c[x].slice(_[1],_[1]+_[2]))}return p(),u}return DS=a,DS}var JJ=XJ();const QJ=ei(JJ);class Jn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Jn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class $0 extends Jn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=$0.code,this.data={filepaths:t}}}$0.code="UnmergedPathsError";class Cn extends Jn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=Cn.code,this.data={message:t}}}Cn.code="InternalError";class Th extends Jn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Th.code,this.data={filepath:t}}}Th.code="UnsafeFilepathError";class ks{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function kw(e,t){return-(e<t)||+(e>t)}function d8(e,t){return kw(e.path,t.path)}function f8(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const ws=2**32;function e4(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function eh(e){const[t,n]=e4(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=e4(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%ws,ctimeNanoseconds:n%ws,mtimeSeconds:r%ws,mtimeNanoseconds:a%ws,dev:e.dev%ws,ino:e.ino%ws,mode:f8(e.mode%ws),uid:e.uid%ws,gid:e.gid%ws,size:e.size>-1?e.size%ws:0}}function eQ(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let jS=null;async function Pl(e){return jS===null&&(jS=await nQ()),jS?h8(e):tQ(e)}function tQ(e){return new i8().update(e).digest("hex")}async function h8(e){const t=await crypto.subtle.digest("SHA-1",e);return eQ(t)}async function nQ(){try{if(await h8(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function rQ(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function aQ(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Wt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Qc{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Wt.isBuffer(t))return Qc.fromBuffer(t);if(t===null)return new Qc(null);throw new Cn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new Cn("Index file is empty (.git/index)");const n=new Qc,r=new ks(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new Cn(`Invalid dircache magic file number: ${a}`);const i=await Pl(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new Cn(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new Cn(`Unsupported dircache version: ${s}`);const u=r.readUInt32BE();let c=0;for(;!r.eof()&&c<u;){const f={};f.ctimeSeconds=r.readUInt32BE(),f.ctimeNanoseconds=r.readUInt32BE(),f.mtimeSeconds=r.readUInt32BE(),f.mtimeNanoseconds=r.readUInt32BE(),f.dev=r.readUInt32BE(),f.ino=r.readUInt32BE(),f.mode=r.readUInt32BE(),f.uid=r.readUInt32BE(),f.gid=r.readUInt32BE(),f.size=r.readUInt32BE(),f.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();f.flags=rQ(h);const p=t.indexOf(0,r.tell()+1)-r.tell();if(p<1)throw new Cn(`Got a path length of: ${p}`);if(f.path=r.toString("utf8",p),f.path.includes("..\\")||f.path.includes("../"))throw new Th(f.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new Cn(`Expected 1-8 null characters but got '${v}' after ${f.path}`);if(r.eof())throw new Cn("Unexpected end of file")}f.stages=[],n._addEntry(f),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(d8)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=eh(n);const i=Wt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Wt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Wt.alloc(r),i=new ks(a),o=eh(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(aQ(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Wt.alloc(12),n=new ks(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(Qc._entryToBuffer(s)),s.stages.length>1)for(const u of s.stages)u&&u!==s&&r.push(Qc._entryToBuffer(u));r=await Promise.all(r);const a=Wt.concat(r),i=Wt.concat([t,a]),o=await Pl(i);return Wt.concat([i,Wt.from(o,"hex")])}}function Hb(e,t,n=!0,r=!0){const a=eh(e),i=eh(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let MS=null;const PS=Symbol("IndexCache");function iQ(){return{map:new Map,stats:new Map}}async function oQ(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Qc.from(a);n.map.set(t,i),n.stats.set(t,r)}async function sQ(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Hb(r,a)}class Ta{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[PS]||(r[PS]=iQ());const o=`${n}/index`;MS===null&&(MS=new zm({maxPending:1/0}));let s,u=[];return await MS.acquire(o,async()=>{const c=r[PS];await sQ(t,o,c)&&await oQ(t,o,c);const f=c.map.get(o);if(u=f.unmergedPaths,u.length&&!a)throw new $0(u);if(s=await i(f),f._dirty){const h=await f.toObject();await t.write(o,h),c.stats.set(o,await t.lstat(o)),f._dirty=!1}}),s}}function Vb(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function th(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function p8(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Vb(a),metadata:{},children:[]};t.set(a,i),i.parent=n(th(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:Vb(a),metadata:i,parent:n(th(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function lQ(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Cn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class uQ{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ta.acquire({fs:t,gitdir:n,cache:r},async function(i){return p8(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(kw),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:eh(r.metadata);t._type=r.type==="tree"?"tree":lQ(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const Aw=Symbol("GitWalkSymbol");function Rh(){const e=Object.create(null);return Object.defineProperty(e,Aw,{value:function({fs:t,gitdir:n,cache:r}){return new uQ({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class wr extends Jn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=wr.code,this.data={what:t}}}wr.code="NotFoundError";class pi extends Jn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=pi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}pi.code="ObjectTypeError";class Zu extends Jn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Zu.code,this.data={value:t}}}Zu.code="InvalidOidError";class B0 extends Jn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=B0.code,this.data={remote:t}}}B0.code="NoRefspecError";class Gb{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Gb(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Wb{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",u=a==="*";if(u!==(o==="*"))throw new Cn("Invalid refspec");return new Wb({remotePath:r,localPath:i,force:s,matchPrefix:u})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class bk{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Wb.from(r));return new bk(n)}add(t){const n=Wb.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function cQ(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const dQ=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},am=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},t4={core:{filemode:am,bare:am,logallrefupdates:am,symlinks:am,ignorecase:am,bigFileThreshold:dQ}},fQ=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,hQ=/^[A-Za-z0-9-.]+$/,pQ=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,mQ=/^[A-Za-z][A-Za-z-]*$/,gQ=/^(.*?)( *[#;].*)$/,yQ=e=>{const t=fQ.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},bQ=e=>{const t=pQ.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=vQ(r),i=wQ(a);return[n,i]}return null},vQ=e=>{const t=gQ.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return n4(n)&&n4(r)?`${n}${r}`:n},n4=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,wQ=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),r4=e=>e!=null?e.toLowerCase():null,oE=(e,t,n)=>[r4(e),t,r4(n)].filter(r=>r!=null).join("."),a4=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:oE(n,a,r),sectionPath:oE(n,a,null),isSection:!!n}},_Q=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class vk{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),u=yQ(s),c=u!=null;if(c)[n,r]=u;else{const h=bQ(s);h!=null&&([i,o]=h)}const f=oE(n,r,i);return{line:a,isSection:c,section:n,subsection:r,name:i,value:o,path:f}}):[]}static from(t){return new vk(t)}async get(t,n=!1){const r=a4(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const u=t4[i]&&t4[i][o];return u?u(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:u,isSection:c}=a4(t),f=_Q(this.parsedConfig,h=>h.path===s);if(n==null)f!==-1&&this.parsedConfig.splice(f,1);else if(f!==-1){const h=this.parsedConfig[f],p=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(f+1,0,p):this.parsedConfig[f]=p}else{const h=this.parsedConfig.findIndex(g=>g.path===u),p={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(hQ.test(a)&&mQ.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,p);else{const g={isSection:c,section:a,subsection:i,modified:!0,path:u};this.parsedConfig.push(g,p)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class ua{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return vk.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const Hy=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],xQ=["config","description","index","shallow","commondir"];let FS;async function Ru(e,t){return FS===void 0&&(FS=new zm),FS.acquire(e,t)}class Ot{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:u=!1,pruneTags:c=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new Zu(_);const f=await ua.get({fs:t,gitdir:n});if(!s){if(s=await f.getall(`remote.${r}.fetch`),s.length===0)throw new B0(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=bk.from(s),p=new Map;if(c){const _=await Ot.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ot.deleteRefs({fs:t,gitdir:n,refs:_.map(x=>`refs/tags/${x}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await Ot.exists({fs:t,gitdir:n,ref:_})){const x=a.get(_);p.set(_,x)}}const g=h.translate([...a.keys()]);for(const[_,x]of g){const S=a.get(_);p.set(x,S)}const v=h.translate([...i.keys()]);for(const[_,x]of v){const S=i.get(_),E=h.translateOne(S);E&&p.set(x,`ref: ${E}`)}const b=[];if(u){for(const _ of h.localNamespaces()){const x=(await Ot.listRefs({fs:t,gitdir:n,filepath:_})).map(S=>`${_}/${S}`);for(const S of x)p.has(S)||b.push(S)}b.length>0&&await Ot.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[_,x]of p)await Ru(_,async()=>t.write(At.join(n,_),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Zu(a);await Ru(r,async()=>t.write(At.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Ru(r,async()=>t.write(At.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ot.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(At.join(n,s))));let a=await Ru("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Gb.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await Ru("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ot.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ot.packedRefs({fs:t,gitdir:n}),o=Hy(r).filter(s=>!xQ.includes(s));for(const s of o){const u=await Ru(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(u)return Ot.resolve({fs:t,gitdir:n,ref:u.trim(),depth:a})}throw new wr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ot.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ot.packedRefs({fs:t,gitdir:n}),i=Hy(r);for(const o of i)if(await Ru(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new wr(r)}static async expandAgainstMap({ref:t,map:n}){const r=Hy(t);for(const a of r)if(await n.has(a))return a;throw new wr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ot.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=Hy(t);for(const o of i){const s=a.get(o);if(s)return Ot.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new wr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Ru("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Gb.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ot.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(cQ),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ot.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ot.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ot.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function SQ(e,t){return kw(i4(e),i4(t))}function i4(e){return e.mode==="040000"?e.path+"/":e.path}function m8(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Cn(`Unexpected GitTree entry mode: ${e}`)}function EQ(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new Cn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new Cn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=m8(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new Th(s);const u=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:u,type:o})}return t}function CQ(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new Cn(`Could not understand file mode: ${e}`)}function kQ(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=CQ(e.mode),e.type||(e.type=m8(e.mode)),e}class Ri{constructor(t){if(Wt.isBuffer(t))this._entries=EQ(t);else if(Array.isArray(t))this._entries=t.map(kQ);else throw new Cn("invalid type passed to GitTree constructor");this._entries.sort(d8)}static from(t){return new Ri(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(SQ),Wt.concat(t.map(n=>{const r=Wt.from(n.mode.replace(/^0/,"")),a=Wt.from(" "),i=Wt.from(n.path,"utf8"),o=Wt.from([0]),s=Wt.from(n.oid,"hex");return Wt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Nh{static wrap({type:t,object:n}){return Wt.concat([Wt.from(`${t} ${n.byteLength.toString()}\0`),Wt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new Cn(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Wt.from(t.slice(r+1))}}}async function g8({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function AQ(e,t){const n=new ks(e),r=o4(n);if(r!==t.byteLength)throw new Cn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=o4(n);let i;const o=l4(n,t);if(o.byteLength===a)i=o;else{i=Wt.alloc(a);const s=new ks(i);for(s.copy(o);!n.eof();)s.copy(l4(n,t));const u=s.tell();if(a!==u)throw new Cn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${u} bytes`)}return i}function o4(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function s4(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function l4(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=s4(e,n&a,4);let s=s4(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function TQ(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function y8(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:TQ(e)}class b8{constructor(t){if(typeof Wt>"u")throw new Error("Missing Buffer dependency");this.stream=y8(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Wt.alloc(0):(n&&(n=Wt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>RQ(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Wt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function RQ(e){return e.reduce((t,n)=>t+n.length,0)}async function NQ(e,t){const n=new b8(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Cn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new Cn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:u,ofs:c,reference:f}=await IQ(n),h=new yk.Inflate;for(;!h.result;){const p=await n.chunk();if(!p)break;if(h.push(p,!1),h.err)throw new Cn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==u)throw new Cn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(p.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:f,ofs:c})}}}}async function IQ(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Wt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function v8(e){return yk.inflate(e)}function OQ(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function DQ(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class nh{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new ks(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Cn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new Cn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let f=0;f<o;f++){const h=r.slice(20).toString("hex");s[f]=h}r.seek(r.tell()+4*o);const u=new Map;for(let f=0;f<o;f++)u.set(s[f],r.readUInt32BE());const c=r.slice(20).toString("hex");return new nh({hashes:s,crcs:{},offsets:u,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],u={},c=new Map;let f=null,h=null;await NQ([t],async({data:_,type:x,reference:S,offset:E,num:C})=>{f===null&&(f=C);const k=Math.floor((f-C)*100/f);k!==h&&r&&await r({phase:"Receiving objects",loaded:f-C,total:f}),h=k,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const p=Object.keys(i).map(Number);for(const[_,x]of p.entries()){const S=_+1===p.length?t.byteLength-20:p[_+1],E=i[x],C=OJ.buf(t.slice(x,S))>>>0;E.end=S,E.crc=C}const g=new nh({pack:Promise.resolve(t),packfileSha:o,crcs:u,hashes:s,offsets:c,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const x=Math.floor(v*100/f);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:f}),v++,h=x;const S=i[_];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:_});b[g.readDepth]+=1;const k=await Pl(Nh.wrap({type:E,object:C}));S.oid=k,s.push(k),c.set(k,_),u[k]=S.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(c,f)=>{t.push(Wt.from(c,f))};n("ff744f63","hex"),n("00000002","hex");const r=new ks(Wt.alloc(256*4));for(let c=0;c<256;c++){let f=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&f++;r.writeUInt32BE(f)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const a=new ks(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)a.writeUInt32BE(this.crcs[c]);t.push(a.buffer);const i=new ks(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const o=Wt.concat(t),s=await Pl(o),u=Wt.alloc(20);return u.write(s,"hex"),Wt.concat([o,u])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new Cn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Cn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new ks(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new Cn("Unrecognized type: 0b"+o.toString(2));const u=i&15;let c=u;i&128&&(c=DQ(a,u));let h=null,p=null;if(s==="ofs_delta"){const v=OQ(a),b=t-v;({object:h,type:s}=await this.readSlice({start:b}))}if(s==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:v}))}const g=r.slice(a.tell());if(p=Wt.from(await v8(g)),p.byteLength!==c)throw new Cn(`Packfile told us object would have length ${c} but it had length ${p.byteLength}`);return h&&(p=Wt.from(AQ(p,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:p}),{type:s,format:"content",object:p}}}const Vy=Symbol("PackfileCache");async function jQ({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return nh.fromIdx({idx:i,getExternalRefDelta:n})}function wk({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[Vy]||(t[Vy]=new Map);let o=t[Vy].get(n);return o||(o=jQ({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[Vy].set(n,o)),o}async function MQ({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await wk({fs:e,cache:t,filename:u,getExternalRefDelta:i});if(c.error)throw new Cn(c.error);if(c.offsets.has(r)){if(!c.pack){const h=u.replace(/idx$/,"pack");c.pack=e.read(h)}const f=await c.read({oid:r,getExternalRefDelta:i});return f.format="content",f.source=`objects/pack/${s.replace(/idx$/,"pack")}`,f}}return null}async function Lr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=f=>Lr({fs:e,cache:t,gitdir:n,oid:f});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Wt.from("tree 0\0")}),o||(o=await g8({fs:e,gitdir:n,oid:r})),!o){if(o=await MQ({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new wr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Wt.from(await v8(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await Pl(o.object);if(s!==r)throw new Cn(`SHA check failed! Expected ${r}, computed ${s}`);const{object:u,type:c}=Nh.unwrap(o.object);if(o.type=c,o.object=u,o.format="content",a==="content")return o;throw new Cn(`invalid requested format "${a}"`)}class es extends Jn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=es.code,this.data={noun:t,where:n,canForce:r}}}es.code="AlreadyExistsError";class z0 extends Jn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=z0.code,this.data={nouns:t,short:n,matches:r}}}z0.code="AmbiguousError";class U0 extends Jn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=U0.code,this.data={filepaths:t}}}U0.code="CheckoutConflictError";class q0 extends Jn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=q0.code,this.data={ref:t,oid:n}}}q0.code="CommitNotFetchedError";class H0 extends Jn{constructor(){super("Empty response from git server."),this.code=this.name=H0.code,this.data={}}}H0.code="EmptyServerResponseError";class V0 extends Jn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=V0.code,this.data={}}}V0.code="FastForwardError";class G0 extends Jn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=G0.code,this.data={prettyDetails:t,result:n}}}G0.code="GitPushError";class rh extends Jn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=rh.code,this.data={statusCode:t,statusMessage:n,response:r}}}rh.code="HttpError";class Yu extends Jn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Yu.code,this.data={reason:t}}}Yu.code="InvalidFilepathError";class Ko extends Jn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Ko.code,this.data={ref:t,suggestion:n}}}Ko.code="InvalidRefNameError";class W0 extends Jn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=W0.code,this.data={depth:t}}}W0.code="MaxDepthError";class Ih extends Jn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Ih.code,this.data={}}}Ih.code="MergeNotSupportedError";class Oh extends Jn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Oh.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}Oh.code="MergeConflictError";class Xa extends Jn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Xa.code,this.data={role:t}}}Xa.code="MissingNameError";class ki extends Jn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=ki.code,this.data={parameter:t}}}ki.code="MissingParameterError";class K0 extends Jn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=K0.code,this.data={errors:t},this.errors=t}}K0.code="MultipleGitError";let Z0=class w8 extends Jn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=w8.code,this.data={expected:t,actual:n}}};Z0.code="ParseError";class ah extends Jn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=ah.code,this.data={reason:t}}}ah.code="PushRejectedError";class Fu extends Jn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Fu.code,this.data={capability:t,parameter:n}}}Fu.code="RemoteCapabilityError";class Y0 extends Jn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=Y0.code,this.data={preview:t,response:n}}}Y0.code="SmartHttpError";class X0 extends Jn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=X0.code,this.data={url:t,transport:n,suggestion:r}}}X0.code="UnknownTransportError";class J0 extends Jn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=J0.code,this.data={url:t}}}J0.code="UrlParseError";class Dh extends Jn{constructor(){super("The operation was canceled."),this.code=this.name=Dh.code,this.data={}}}Dh.code="UserCanceledError";class Q0 extends Jn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Q0.code,this.data={filepath:t}}}Q0.code="IndexResetError";class eg extends Jn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=eg.code,this.data={ref:t}}}eg.code="NoCommitError";var PQ=Object.freeze({__proto__:null,AlreadyExistsError:es,AmbiguousError:z0,CheckoutConflictError:U0,CommitNotFetchedError:q0,EmptyServerResponseError:H0,FastForwardError:V0,GitPushError:G0,HttpError:rh,InternalError:Cn,InvalidFilepathError:Yu,InvalidOidError:Zu,InvalidRefNameError:Ko,MaxDepthError:W0,MergeNotSupportedError:Ih,MergeConflictError:Oh,MissingNameError:Xa,MissingParameterError:ki,MultipleGitError:K0,NoRefspecError:B0,NotFoundError:wr,ObjectTypeError:pi,ParseError:Z0,PushRejectedError:ah,RemoteCapabilityError:Fu,SmartHttpError:Y0,UnknownTransportError:X0,UnsafeFilepathError:Th,UrlParseError:J0,UserCanceledError:Dh,UnmergedPathsError:$0,IndexResetError:Q0,NoCommitError:eg});function sE({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=FQ(r),`${e} <${t}> ${n} ${r}`}function FQ(e){const t=LQ($Q(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function LQ(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function $Q(e){return e===0?e:-e}function _l(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Kb(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:BQ(a)}}function BQ(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),zQ(r)}function zQ(e){return e===0?e:-e}class ui{constructor(t){if(typeof t=="string")this._tag=t;else if(Wt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=ui.render(t);else throw new Cn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new ui(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${sE(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=Kb(r.tagger)),r.committer&&(r.committer=Kb(r.committer)),r}withoutSignature(){const t=_l(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return _l(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Wt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=_l(i);const o=a+i;return ui.from(o)}}function LS(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function UQ(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Fr{constructor(t){if(typeof t=="string")this._commit=t;else if(Wt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Fr.render(t);else throw new Cn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Fr.justHeaders(t),a=Fr.justMessage(t),i=_l(r+`
gpgsig`+LS(n)+`
`+a);return new Fr(i)}static from(t){return new Fr(t)}toObject(){return Wt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Fr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return _l(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Fr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=Kb(r.author)),r.committer&&(r.committer=Kb(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new Cn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${sE(r)}
`;const a=t.committer||t.author;return n+=`committer ${sE(a)}
`,t.gpgsig&&(n+="gpgsig"+LS(t.gpgsig)),n}static render(t){return Fr.renderHeaders(t)+`
`+_l(t.message)}render(){return this._commit}withoutSignature(){const t=_l(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return _l(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return UQ(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Fr.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=_l(o);const u=Fr.justHeaders(t._commit)+`
gpgsig`+LS(o)+`
`+i;return Fr.from(u)}}async function ih({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ri.from([]),oid:r};const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ui.from(i).parse().object,ih({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Fr.from(i).parse().tree,ih({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new pi(r,a,"tree");return{tree:Ri.from(i),oid:r}}class qQ{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await Ot.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof wr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const u=await ih({fs:t,cache:this.cache,gitdir:n,oid:s});return u.type="tree",u.mode="40000",o.set(".",u),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const u=s.oid;if(!u)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:c,object:f}=await Lr({fs:r,cache:a,gitdir:i,oid:u});if(c!==s.type)throw new pi(u,c,s.type);const h=Ri.from(f);for(const p of h)o.set(At.join(n,p.path),p);return h.entries().map(p=>At.join(n,p.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=f8(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:u,object:c}=await Lr({fs:r,cache:a,gitdir:i,oid:s});u!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function vo({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,Aw,{value:function({fs:n,gitdir:r,cache:a}){return new qQ({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class HQ{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(At.join(a,n));return i===null?null:i.map(o=>At.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=eh(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Ta.acquire({fs:r,gitdir:a,cache:i},async function(s){const u=s.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),p=typeof Wr<"u"?Wr.platform!=="win32":!0;if(!u||Hb(c,u,h,p)){const g=await t.content();g===void 0?o=void 0:(o=await Pl(Nh.wrap({type:"blob",object:g})),u&&o===u.oid&&(!h||c.mode===u.mode)&&Hb(c,u,h,p)&&s.insert({filepath:t._fullpath,stats:c,oid:o}))}else o=u.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await ua.get({fs:t,gitdir:n}),this.config)}}function tg(){const e=Object.create(null);return Object.defineProperty(e,Aw,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new HQ({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function VQ(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const _8=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class GQ{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*WQ(e){const t=new GQ;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function Xu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(u,c)=>c,reduce:o=async(u,c)=>{const f=_8(c);return u!==void 0&&f.unshift(u),f},iterate:s=(u,c)=>Promise.all([...c].map(u))}){const u=a.map(g=>g[Aw]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(u.length).fill("."),f=VQ(0,u.length),h=async g=>{f.map(_=>{const x=g[_];g[_]=x&&new u[_].ConstructEntry(x)});const b=(await Promise.all(f.map(_=>{const x=g[_];return x?u[_].readdir(x):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:WQ(b)}},p=async g=>{const{entries:v,children:b}=await h(g),_=v.find(S=>S&&S._fullpath)._fullpath,x=await i(_,v);if(x!==null){let S=await s(p,b);return S=S.filter(E=>E!==void 0),o(x,S)}};return p(c)}async function lE(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=At.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?lE(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function KQ(e){return ZQ(e)&&u4(e.then)&&u4(e.catch)}function ZQ(e){return e&&typeof e=="object"}function u4(e){return typeof e=="function"}function c4(e){return KQ((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const d4=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function f4(e,t){if(c4(t))for(const n of d4)e[`_${n}`]=t[n].bind(t);else for(const n of d4)e[`_${n}`]=RS(t[n].bind(t));c4(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=lE.bind(null,e):t.rm?e._rm=RS(t.rm.bind(t)):t.rmdir.length>2?e._rm=RS(t.rmdir.bind(t)):e._rm=lE.bind(null,e)}class nn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?f4(this,t.promises):f4(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Wt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(th(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=th(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(kw),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Wt.isBuffer(r)?r:Wt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Je(e,t){if(t===void 0)throw new ki(e)}async function Zb(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function YQ({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Je("fs",e),Je("dir",t),Je("gitdir",n);const i=new nn(e),o=[vo({ref:r}),tg(),Rh()];let s=[];await Ta.acquire({fs:i,gitdir:n,cache:a},async function(c){s=c.unmergedPaths});const u=await Xu({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(c,[f,h,p]){const g=!await Zb(h,p),v=s.includes(c),b=!await Zb(p,f);if(g||v)return f?{path:c,mode:await f.mode(),oid:await f.oid(),type:await f.type(),content:await f.content()}:void 0;if(b)return!1;throw new Q0(c)}});await Ta.acquire({fs:i,gitdir:n,cache:a},async function(c){for(const f of u)if(f!==!1){if(!f){await i.rmdir(`${t}/${f.path}`,{recursive:!0}),c.delete({filepath:f.path});continue}if(f.type==="blob"){const h=new TextDecoder().decode(f.content);await i.write(`${t}/${f.path}`,h,{mode:f.mode}),c.insert({filepath:f.path,oid:f.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class jh{static async isIgnored({fs:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a}){if(Vb(a)===".git")return!0;if(a===".")return!1;let i="";const o=At.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:At.join(n,".gitignore"),filepath:a}],u=a.split("/").filter(Boolean);for(let f=1;f<u.length;f++){const h=u.slice(0,f).join("/"),p=u.slice(f).join("/");s.push({gitignore:At.join(n,h,".gitignore"),filepath:p})}let c=!1;for(const f of s){let h;try{h=await t.read(f.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const p=WJ().add(i);p.add(h);const g=th(f.filepath);if(g!=="."&&p.ignores(g))return!0;c?c=!p.test(f.filepath).unignored:c=p.test(f.filepath).ignored}return c}}async function XQ({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let $S=null;async function x8(e){return $S===null&&($S=QQ()),$S?JQ(e):yk.deflate(e)}async function JQ(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function QQ(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Ii({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Nh.wrap({type:n,object:r})),i=await Pl(r),r=Wt.from(await x8(r))),o||await XQ({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function S8(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function eee({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r);const s=new nn(e);await Ta.acquire({fs:s,gitdir:n,cache:a},async u=>{const f=await(await ua.get({fs:s,gitdir:n})).get("core.autocrlf");return uE({dir:t,gitdir:n,fs:s,filepath:r,index:u,force:i,parallel:o,autocrlf:f})})}catch(s){throw s.caller="git.add",s}}async function uE({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const u=r.map(async p=>{if(!i&&await jh.isIgnored({fs:n,dir:e,gitdir:t,filepath:p}))return;const g=await n.lstat(At.join(e,p));if(!g)throw new wr(p);if(g.isDirectory()){const v=await n.readdir(At.join(e,p));if(o){const b=v.map(_=>uE({dir:e,gitdir:t,fs:n,filepath:[At.join(p,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(b)}else for(const b of v)await uE({dir:e,gitdir:t,fs:n,filepath:[At.join(p,b)],index:a,force:i,parallel:o,autocrlf:s})}else{const v=g.isSymbolicLink()?await n.readlink(At.join(e,p)).then(S8):await n.read(At.join(e,p),{autocrlf:s});if(v===null)throw new wr(p);const b=await Ii({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:p,stats:g,oid:b})}}),c=await Promise.allSettled(u),f=c.filter(p=>p.status==="rejected").map(p=>p.reason);if(f.length>1)throw new K0(f);if(f.length===1)throw f[0];return c.filter(p=>p.status==="fulfilled"&&p.value).map(p=>p.value)}async function Um({fs:e,gitdir:t,path:n}){return(await ua.get({fs:e,gitdir:t})).get(n)}function E8(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Ju({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await Um({fs:e,gitdir:t,path:"user.name"}),email:await Um({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=E8({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function oh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await Um({fs:e,gitdir:t,path:"user.name"}),email:await Um({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=E8({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function C8({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ui.from(i).parse().object,C8({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new pi(r,a,"commit");return{commit:Fr.from(i),oid:r}}async function sh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await C8({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function Tw({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:p,tree:g}){let v=!1;h||(h=await Ot.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,_;try{b=await Ot.resolve({fs:e,gitdir:r,ref:h}),_=await sh({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(u&&v)throw new eg(h);const x=u?await Ju({fs:e,gitdir:r,author:i,commit:_.commit}):await Ju({fs:e,gitdir:r,author:i});if(!x)throw new Xa("author");const S=u?await oh({fs:e,gitdir:r,author:x,committer:o,commit:_.commit}):await oh({fs:e,gitdir:r,author:x,committer:o});if(!S)throw new Xa("committer");return Ta.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=p8(E.entries).get(".");if(g||(g=await k8({fs:e,gitdir:r,inode:k,dryRun:c})),p?p=await Promise.all(p.map(D=>Ot.resolve({fs:e,gitdir:r,ref:D}))):u?p=_.commit.parent:p=b?[b]:[],!a)if(u)a=_.commit.message;else throw new ki("message");let O=Fr.from({tree:g,parent:p,author:x,committer:S,message:a});s&&(O=await Fr.sign(O,n,s));const N=await Ii({fs:e,gitdir:r,type:"commit",object:O.toObject(),dryRun:c});return!f&&!c&&await Ot.writeRef({fs:e,gitdir:r,ref:h,value:N}),N})}async function k8({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const u of a)u.type==="tree"&&(u.metadata.mode="040000",u.metadata.oid=await k8({fs:e,gitdir:t,inode:u,dryRun:r}));const i=a.map(u=>({mode:u.metadata.mode,path:u.basename,oid:u.metadata.oid,type:u.type})),o=Ri.from(i);return await Ii({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function ng({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Yu("leading-slash");if(a.endsWith("/"))throw new Yu("trailing-slash");const i=r,o=await ih({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const u=a.split("/");r=await A8({fs:e,cache:t,gitdir:n,tree:s,pathArray:u,oid:i,filepath:a})}return r}async function A8({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const u of r)if(u.path===s){if(a.length===0)return u.oid;{const{type:c,object:f}=await Lr({fs:e,cache:t,gitdir:n,oid:u.oid});if(c!=="tree")throw new pi(i,c,"tree",o);return r=Ri.from(f),A8({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new wr(`file or directory found at "${i}:${o}"`)}async function Mh({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await ng({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await ih({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function rg({fs:e,gitdir:t,tree:n}){const r=Ri.from(n).toObject();return await Ii({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function tee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:u,committer:c,signingKey:f}){let h;try{h=await Ot.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof wr))throw x}let g=(await Mh({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new es("note",i);typeof o=="string"&&(o=Wt.from(o,"utf8"));const v=await Ii({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await rg({fs:e,gitdir:r,tree:g});return await Tw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:u,committer:c,signingKey:f})}async function nee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:u,committer:c,signingKey:f,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i),Je("note",o),f&&Je("onSign",t);const p=new nn(e),g=await Ju({fs:p,gitdir:r,author:u});if(!g)throw new Xa("author");const v=await oh({fs:p,gitdir:r,author:g,committer:c});if(!v)throw new Xa("committer");return await tee({fs:new nn(p),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:v,signingKey:f})}catch(p){throw p.caller="git.addNote",p}}async function T8({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==Os.clean(n))throw new Ko(n,Os.clean(n));const i=await ua.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new es("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await ua.save({fs:e,gitdir:t,config:i})}async function ree({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("remote",r),Je("url",a),await T8({fs:new nn(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function aee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!f&&await Ot.exists({fs:e,gitdir:r,ref:a}))throw new es("tag",a);const h=await Ot.resolve({fs:e,gitdir:r,ref:u||"HEAD"}),{type:p}=await Lr({fs:e,cache:t,gitdir:r,oid:h});let g=ui.from({object:h,type:p,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});c&&(g=await ui.sign(g,n,c));const v=await Ii({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Ot.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function iee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("ref",a),c&&Je("onSign",t);const p=new nn(e),g=await Ju({fs:p,gitdir:r,author:i});if(!g)throw new Xa("tagger");return await aee({fs:p,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:u,signingKey:c,force:f})}catch(p){throw p.caller="git.annotatedTag",p}}async function oee({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==Os.clean(n))throw new Ko(n,Os.clean(n));const o=`refs/heads/${n}`;if(!i&&await Ot.exists({fs:e,gitdir:t,ref:o}))throw new es("branch",n,!1);let s;try{s=await Ot.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await Ot.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await Ot.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function see({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await oee({fs:new nn(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const R8=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function _k({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:u,noCheckout:c,noUpdateHead:f,dryRun:h,force:p,track:g=!0}){let v;if(r)try{v=await Ot.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await Ot.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const x=`${o}/${s}`;if(b=await Ot.resolve({fs:e,gitdir:i,ref:x}),g){const S=await ua.get({fs:e,gitdir:i});await S.set(`branch.${s}.remote`,o),await S.set(`branch.${s}.merge`,`refs/heads/${s}`),await ua.save({fs:e,gitdir:i,config:S})}await Ot.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:b})}if(!c){let _;try{_=await lee({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:p,filepaths:u})}catch(k){throw k instanceof wr&&k.data.what===b?new q0(s,b):k}const x=_.filter(([k])=>k==="conflict").map(([k,O])=>O);if(x.length>0)throw new U0(x);const S=_.filter(([k])=>k==="error").map(([k,O])=>O);if(S.length>0)throw new Cn(S.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:u!=null&&u.length>0?"file":"branch"});return}let E=0;const C=_.length;await Ta.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([O])=>O==="delete"||O==="delete-index").map(async function([O,N]){const D=`${a}/${N}`;O==="delete"&&await e.rm(D),k.delete({filepath:N}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Ta.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[O,N]of _)if(O==="rmdir"||O==="rmdir-index"){const D=`${a}/${N}`;try{O==="rmdir-index"&&k.delete({filepath:N}),await e.rmdir(D),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(U){if(U.code==="ENOTEMPTY")console.log(`Did not delete ${N} because directory is not empty`);else throw U}}}),await Promise.all(_.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,O]){const N=`${a}/${O}`;await e.mkdir(N),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Ta.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([O])=>O==="create"||O==="create-index"||O==="update"||O==="mkdir-index").map(async function([O,N,D,U,W]){const Q=`${a}/${N}`;try{if(O!=="create-index"&&O!=="mkdir-index"){const{object:Z}=await Lr({fs:e,cache:t,gitdir:i,oid:D});if(W&&await e.rm(Q),U===33188)await e.write(Q,Z);else if(U===33261)await e.write(Q,Z,{mode:511});else if(U===40960)await e.writelink(Q,Z);else throw new Cn(`Invalid mode 0o${U.toString(8)} detected in blob ${D}`)}const F=await e.lstat(Q);U===33261&&(F.mode=493),O==="mkdir-index"&&(F.mode=57344),k.insert({filepath:N,stats:F,oid:D}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(F){console.log(F)}}))}),r&&await r({previousHead:v,newHead:b,type:u!=null&&u.length>0?"file":"branch"})}if(!f){const _=await Ot.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await Ot.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await Ot.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function lee({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let u=0;return Xu({fs:e,cache:t,dir:r,gitdir:a,trees:[vo({ref:i}),tg(),Rh()],map:async function(c,[f,h,p]){if(c===".")return;if(s&&!s.some(v=>R8(c,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++u}),[!!p,!!f,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(c)?["delete",c]:void 0;case"010":switch(await f.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await f.oid(),await f.mode()];case"commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`new entry Unhandled type ${await f.type()}`]}case"011":switch(`${await f.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await f.oid()!==await h.oid()?o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]:await f.mode()!==await h.mode()?o?["update",c,await f.oid(),await f.mode(),!0]:["conflict",c]:["create-index",c,await f.oid(),await f.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${f.type}`]}case"100":return["delete-index",c];case"101":switch(await p.type()){case"tree":return["rmdir",c];case"blob":return await p.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await p.type()}`]}case"110":case"111":switch(`${await p.type()}-${await f.type()}`){case"tree-tree":return;case"blob-blob":{if(await p.oid()===await f.oid()&&await p.mode()===await f.mode()&&!o)return;if(h){if(await h.oid()!==await p.oid()&&await h.oid()!==await f.oid())return o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await f.oid(),await f.mode(),await f.mode()!==await p.mode()];return await f.mode()!==await p.mode()?["update",c,await f.oid(),await f.mode(),!0]:await f.oid()!==await p.oid()?["update",c,await f.oid(),await f.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await f.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`update entry Unhandled type ${await p.type()}-${await f.type()}`]}}},reduce:async function(c,f){return f=_8(f),c?c&&c[0]==="rmdir"?(f.push(c),f):(f.unshift(c),f):f}})}async function N8({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=At.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:u=!1,noUpdateHead:c=o===void 0,dryRun:f=!1,force:h=!1,track:p=!0,cache:g={}}){try{Je("fs",e),Je("dir",r),Je("gitdir",a);const v=o||"HEAD";return await _k({fs:new nn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:s,noCheckout:u,noUpdateHead:c,dryRun:f,force:h,track:p})}catch(v){throw v.caller="git.checkout",v}}const uee=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function nd(e){const t=uee.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function bc({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ot.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ot.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:nd(a)}function cee(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function I8({username:e="",password:t=""}){return`Basic ${Wt.from(`${e}:${t}`).toString("base64")}`}async function ag(e,t){const n=y8(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Yb(e){let t=0;const n=[];await ag(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function h4(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function cE(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class Qr{static flush(){return Wt.from("0000","utf8")}static delim(){return Wt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Wt.from(t));const n=t.length+4,r=cE(4,n);return Wt.concat([Wt.from(r,"utf8"),t])}static streamReader(t){const n=new b8(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function p4(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function m4(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=Qr.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new H0;if(o.includes("version 2"))return p4(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new Z0(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return p4(i);const[u,c]=BS(s,"\0","\\x00");if(c.split(" ").map(f=>n.add(f)),u!=="0000000000000000000000000000000000000000 capabilities^{}"){const[f,h]=BS(u," "," ");for(r.set(h,f);;){const p=await i();if(p===!0)break;if(p!==null){const[g,v]=BS(p.toString("utf8")," "," ");r.set(v,g)}}}for(const f of n)if(f.startsWith("symref=")){const h=f.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function BS(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new Z0(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const g4=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,y4=(e,t)=>{(t.username||t.password)&&(e.Authorization=I8(t)),t.headers&&Object.assign(e,t.headers)},zS=async e=>{try{const t=Wt.from(await Yb(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Xb{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:u,headers:c,protocolVersion:f}){let{url:h,auth:p}=h4(u);const g=o?g4(o,h):h;(p.username||p.password)&&(c.Authorization=I8(p)),f===2&&(c["Git-Protocol"]="version=2");let v,b,_=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:c}),b=!1,v.statusCode===401||v.statusCode===203){const x=_?i:r;if(x){if(p=await x(h,{...p,headers:{...c}}),p&&p.cancel)throw new Dh;p&&(y4(c,p),_=!0,b=!0)}}else v.statusCode===200&&_&&a&&await a(h,p);while(b);if(v.statusCode!==200){const{response:x}=await zS(v);throw new rh(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${s}-advertisement`){const x=await m4(v.body,{service:s});return x.auth=p,x}else{const{preview:x,response:S,data:E}=await zS(v);try{const C=await m4([E],{service:s});return C.auth=p,C}catch{throw new Y0(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:u}){const c=h4(i);c&&(i=c.url),r&&(i=g4(r,i)),u["content-type"]=`application/x-${a}-request`,u.accept=`application/x-${a}-result`,y4(u,o);const f=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:u});if(f.statusCode!==200){const{response:h}=zS(f);throw new rh(f.statusCode,f.statusMessage,h)}return f}}function dee({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class Rw{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Xb),n.set("https",Xb);const r=dee({url:t});if(!r)throw new J0(t);if(n.has(r.transport))return n.get(r.transport);throw new X0(t,r.transport,r.transport==="ssh"?cee(t):void 0)}}let Kc=null;class qm{static async read({fs:t,gitdir:n}){Kc===null&&(Kc=new zm);const r=At.join(n,"shallow"),a=new Set;return await Kc.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){Kc===null&&(Kc=new zm);const a=At.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Kc.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Kc.acquire(a,async function(){await t.rm(a)})}}async function fee({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function hee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(At.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,u=await wk({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(u.error)throw new Cn(u.error);if(u.offsets.has(r))return!0}return!1}async function b4({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>Lr({fs:e,cache:t,gitdir:n,oid:s});let o=await fee({fs:e,gitdir:n,oid:r});return o||(o=await hee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function pee(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function O8(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const Nw={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class hb{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function mee(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function D8(e){const t=new hb;let n="";return(async()=>(await ag(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=mee(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class j8{static demux(t){const n=Qr.streamReader(t),r=new hb,a=new hb,i=new hb,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const u=s.slice(1);i.write(u),r.end(),i.end(),a.destroy(new Error(u.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function gee(e){const{packetlines:t,packfile:n,progress:r}=j8.demux(e),a=[],i=[],o=[];let s=!1,u=!1;return new Promise((c,f)=>{ag(t,h=>{const p=h.toString("utf8").trim();if(p.startsWith("shallow")){const g=p.slice(-41).trim();g.length!==40&&f(new Zu(g)),a.push(g)}else if(p.startsWith("unshallow")){const g=p.slice(-41).trim();g.length!==40&&f(new Zu(g)),i.push(g)}else if(p.startsWith("ACK")){const[,g,v]=p.split(" ");o.push({oid:g,status:v}),v||(u=!0)}else p.startsWith("NAK")?(s=!0,u=!0):(u=!0,s=!0);u&&(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{u||(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function yee({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let u=` ${e.join(" ")}`;for(const c of t)s.push(Qr.encode(`want ${c}${u}
`)),u="";for(const c of r)s.push(Qr.encode(`shallow ${c}
`));a!==null&&s.push(Qr.encode(`deepen ${a}
`)),i!==null&&s.push(Qr.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)s.push(Qr.encode(`deepen-not ${c}
`));s.push(Qr.flush());for(const c of n)s.push(Qr.encode(`have ${c}
`));return s.push(Qr.encode(`done
`)),s}async function xk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,ref:c,remoteRef:f,remote:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:O=!1}){const N=c||await bc({fs:e,gitdir:u,test:!0}),D=await ua.get({fs:e,gitdir:u}),U=h||N&&await D.get(`branch.${N}.remote`)||"origin",W=p||await D.get(`remote.${U}.url`);if(typeof W>"u")throw new ki("remote OR url");const Q=f||N&&await D.get(`branch.${N}.merge`)||c||"HEAD";g===void 0&&(g=await D.get("http.corsProxy"));const F=Rw.getRemoteHelperFor({url:W}),Z=await F.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:W,headers:C,protocolVersion:1}),L=Z.auth,he=Z.refs;if(he.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new Fu("shallow","depth");if(b!==null&&!Z.capabilities.has("deepen-since"))throw new Fu("deepen-since","since");if(_.length>0&&!Z.capabilities.has("deepen-not"))throw new Fu("deepen-not","exclude");if(x===!0&&!Z.capabilities.has("deepen-relative"))throw new Fu("deepen-relative","relative");const{oid:ie,fullref:ne}=Ot.resolveAgainstMap({ref:Q,map:he});for(const Ie of he.keys())Ie===ne||Ie==="HEAD"||Ie.startsWith("refs/heads/")||S&&Ie.startsWith("refs/tags/")||he.delete(Ie);const ee=O8([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Nw.agent}`]);x&&ee.push("deepen-relative");const se=E?[ie]:he.values(),G=E?[N]:await Ot.listRefs({fs:e,gitdir:u,filepath:"refs"});let X=[];for(let Ie of G)try{Ie=await Ot.expand({fs:e,gitdir:u,ref:Ie});const Re=await Ot.resolve({fs:e,gitdir:u,ref:Ie});await b4({fs:e,cache:t,gitdir:u,oid:Re})&&X.push(Re)}catch{}X=[...new Set(X)];const Y=await qm.read({fs:e,gitdir:u}),re=Z.capabilities.has("shallow")?[...Y]:[],be=yee({capabilities:ee,wants:se,haves:X,shallows:re,depth:v,since:b,exclude:_}),we=Wt.from(await Yb(be)),Me=await F.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:W,auth:L,body:[we],headers:C}),Pe=await gee(Me.body);Me.headers&&(Pe.headers=Me.headers);for(const Ie of Pe.shallows)if(!Y.has(Ie))try{const{object:Re}=await Lr({fs:e,cache:t,gitdir:u,oid:Ie}),z=new Fr(Re),Ce=await Promise.all(z.headers().parent.map(ce=>b4({fs:e,cache:t,gitdir:u,oid:ce})));Ce.length===0||Ce.every(ce=>ce)||Y.add(Ie)}catch{Y.add(Ie)}for(const Ie of Pe.unshallows)Y.delete(Ie);if(await qm.write({fs:e,gitdir:u,oids:Y}),E){const Ie=new Map([[ne,ie]]),Re=new Map;let z=10,Ce=ne;for(;z--;){const ae=Z.symrefs.get(Ce);if(ae===void 0)break;Re.set(Ce,ae),Ce=ae}const Ne=he.get(Ce);Ne&&Ie.set(Ce,Ne);const{pruned:ce}=await Ot.updateRemoteRefs({fs:e,gitdir:u,remote:U,refs:Ie,symrefs:Re,tags:S,prune:k});k&&(Pe.pruned=ce)}else{const{pruned:Ie}=await Ot.updateRemoteRefs({fs:e,gitdir:u,remote:U,refs:he,symrefs:Z.symrefs,tags:S,prune:k,pruneTags:O});k&&(Pe.pruned=Ie)}if(Pe.HEAD=Z.symrefs.get("HEAD"),Pe.HEAD===void 0){const{oid:Ie}=Ot.resolveAgainstMap({ref:"HEAD",map:he});for(const[Re,z]of he.entries())if(Re!=="HEAD"&&z===Ie){Pe.HEAD=Re;break}}const Ae=ne.startsWith("refs/tags")?"tag":"branch";if(Pe.FETCH_HEAD={oid:ie,description:`${Ae} '${nd(ne)}' of ${W}`},r||a){const Ie=D8(Pe.progress);ag(Ie,async Re=>{if(a&&await a(Re),r){const z=Re.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);z&&await r({phase:z[1].trim(),loaded:parseInt(z[2],10),total:parseInt(z[3],10)})}})}const Te=Wt.from(await Yb(Pe.packfile));if(Me.body.error)throw Me.body.error;const qe=Te.slice(-20).toString("hex"),it={defaultBranch:Pe.HEAD,fetchHead:Pe.FETCH_HEAD.oid,fetchHeadDescription:Pe.FETCH_HEAD.description};if(Pe.headers&&(it.headers=Pe.headers),k&&(it.pruned=Pe.pruned),qe!==""&&!pee(Te)){it.packfile=`objects/pack/pack-${qe}.pack`;const Ie=At.join(u,it.packfile);await e.write(Ie,Te);const Re=Ce=>Lr({fs:e,cache:t,gitdir:u,oid:Ce}),z=await nh.fromPack({pack:Te,getExternalRefDelta:Re,onProgress:r});await e.write(Ie.replace(/\.pack$/,".idx"),await z.toBuffer())}return it}async function M8({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function bee({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:u,dir:c,gitdir:f,url:h,corsProxy:p,ref:g,remote:v,depth:b,since:_,exclude:x,relative:S,singleBranch:E,noCheckout:C,noTags:k,headers:O}){try{if(await M8({fs:e,gitdir:f}),await T8({fs:e,gitdir:f,remote:v,url:h,force:!1}),p){const U=await ua.get({fs:e,gitdir:f});await U.set("http.corsProxy",p),await ua.save({fs:e,gitdir:f,config:U})}const{defaultBranch:N,fetchHead:D}=await xk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:f,ref:g,remote:v,corsProxy:p,depth:b,since:_,exclude:x,relative:S,singleBranch:E,headers:O,tags:!k});if(D===null)return;g=g||N,g=g.replace("refs/heads/",""),await _k({fs:e,cache:t,onProgress:r,onPostCheckout:u,dir:c,gitdir:f,ref:g,remote:v,noCheckout:C})}catch(N){throw await e.rmdir(f,{recursive:!0,maxRetries:10}).catch(()=>{}),N}}async function vee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c=At.join(u,".git"),url:f,corsProxy:h=void 0,ref:p=void 0,remote:g="origin",depth:v=void 0,since:b=void 0,exclude:_=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:k={},cache:O={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),E||Je("dir",u),Je("url",f),await bee({fs:new nn(e),cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c,url:f,corsProxy:h,ref:p,remote:g,depth:v,since:b,exclude:_,relative:x,singleBranch:S,noCheckout:E,noTags:C,headers:k})}catch(N){throw N.caller="git.clone",N}}async function wee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:p,tree:g,cache:v={}}){try{Je("fs",e),u||Je("message",a),s&&Je("onSign",t);const b=new nn(e);return await Tw({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u,dryRun:c,noUpdateBranch:f,ref:h,parent:p,tree:g})}catch(b){throw b.caller="git.commit",b}}async function _ee({fs:e,dir:t,gitdir:n=At.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Je("fs",e),Je("gitdir",n),await bc({fs:new nn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function xee({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ot.exists({fs:e,gitdir:t,ref:n}))throw new wr(n);const a=await Ot.expand({fs:e,gitdir:t,ref:n}),i=await bc({fs:e,gitdir:t,fullname:!0});if(a===i){const u=await Ot.resolve({fs:e,gitdir:t,ref:a});await Ot.writeRef({fs:e,gitdir:t,ref:"HEAD",value:u})}await Ot.deleteRef({fs:e,gitdir:t,ref:a});const o=nd(n),s=await ua.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await ua.save({fs:e,gitdir:t,config:s})}async function See({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await xee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Eee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{Je("fs",e),Je("ref",r),await Ot.deleteRef({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Cee({fs:e,gitdir:t,remote:n}){const r=await ua.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await ua.save({fs:e,gitdir:t,config:r})}async function kee({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("remote",r),await Cee({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Aee({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ot.deleteRef({fs:e,gitdir:t,ref:n})}async function Tee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Aee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Ree({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Nee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await wk({fs:e,cache:t,filename:u,getExternalRefDelta:a});if(c.error)throw new Cn(c.error);for(const f of c.offsets.keys())f.startsWith(r)&&i.push(f)}return i}async function Iee({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>Lr({fs:e,cache:t,gitdir:n,oid:s}),i=await Ree({fs:e,gitdir:n,oid:r}),o=await Nee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new z0("oids",r,i):new wr(`an object matching "${r}"`)}async function Oee({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Iee({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function Dee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ot.expand({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function Sk({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,u)=>({index:u,oid:s}));for(;o.length;){const s=new Set;for(const{oid:c,index:f}of o)a[c]||(a[c]=new Set),a[c].add(f),a[c].size===i&&s.add(c);if(s.size>0)return[...s];const u=new Map;for(const{oid:c,index:f}of o)try{const{object:h}=await Lr({fs:e,cache:t,gitdir:n,oid:c}),p=Fr.from(h),{parent:g}=p.parseHeaders();for(const v of g)(!a[v]||!a[v].has(f))&&u.set(v+":"+f,{oid:v,index:f})}catch{}o=Array.from(u.values())}return[]}const US=/^.*(\r?\n|$)/gm;function jee({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(US),u=a.match(US),c=o.match(US),f=QJ(s,u,c),h=7;let p="",g=!0;for(const v of f)v.ok&&(p+=v.ok.join("")),v.conflict&&(g=!1,p+=`${"<".repeat(h)} ${n}
`,p+=v.conflict.a.join(""),p+=`${"=".repeat(h)}
`,p+=v.conflict.b.join(""),p+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:p}}async function Mee({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:u="ours",baseName:c="base",theirName:f="theirs",dryRun:h=!1,abortOnConflict:p=!0,mergeDriver:g}){const v=vo({ref:i}),b=vo({ref:o}),_=vo({ref:s}),x=[],S=[],E=[],C=[],k=await Xu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,_],map:async function(O,[N,D,U]){const W=Vb(O),Q=await Zb(N,D),F=await Zb(U,D);switch(`${Q}-${F}`){case"false-false":return{mode:await D.mode(),path:W,oid:await D.oid(),type:await D.type()};case"false-true":return U?{mode:await U.mode(),path:W,oid:await U.oid(),type:await U.type()}:void 0;case"true-false":return N?{mode:await N.mode(),path:W,oid:await N.oid(),type:await N.type()}:void 0;case"true-true":{if(N&&D&&U&&await N.type()==="blob"&&await D.type()==="blob"&&await U.type()==="blob")return Pee({fs:e,gitdir:r,path:W,ours:N,base:D,theirs:U,ourName:u,baseName:c,theirName:f,mergeDriver:g}).then(async Z=>{if(Z.cleanMerge)p||a.insert({filepath:O,oid:Z.mergeResult.oid,stage:0});else if(x.push(O),S.push(O),!p){const L=await D.oid(),he=await N.oid(),ie=await U.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:L,stage:1}),a.insert({filepath:O,oid:he,stage:2}),a.insert({filepath:O,oid:ie,stage:3})}return Z.mergeResult});if(D&&!N&&U&&await D.type()==="blob"&&await U.type()==="blob"){if(x.push(O),E.push(O),!p){const Z=await D.oid(),L=await U.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:Z,stage:1}),a.insert({filepath:O,oid:L,stage:3})}return{mode:await U.mode(),oid:await U.oid(),type:"blob",path:W}}if(D&&N&&!U&&await D.type()==="blob"&&await N.type()==="blob"){if(x.push(O),C.push(O),!p){const Z=await D.oid(),L=await N.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:Z,stage:1}),a.insert({filepath:O,oid:L,stage:2})}return{mode:await N.mode(),oid:await N.oid(),type:"blob",path:W}}if(D&&!N&&!U&&await D.type()==="blob")return;throw new Ih}}},reduce:x.length!==0&&(!n||p)?void 0:async(O,N)=>{const D=N.filter(Boolean);if(O&&!(O&&O.type==="tree"&&D.length===0)){if(D.length>0){const W=new Ri(D).toObject(),Q=await Ii({fs:e,gitdir:r,type:"tree",object:W,dryRun:h});O.oid=Q}return O}}});return x.length!==0?(n&&!p&&await Xu({fs:e,cache:t,dir:n,gitdir:r,trees:[vo({ref:k.oid})],map:async function(O,[N]){const D=`${n}/${O}`;if(await N.type()==="blob"){const U=await N.mode(),W=new TextDecoder().decode(await N.content());await e.write(D,W,{mode:U})}return!0}}),new Oh(x,S,E,C)):k.oid}async function Pee({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:u,dryRun:c,mergeDriver:f=jee}){const h="blob",p=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};const g=Wt.from(await r.content()).toString("utf8"),v=Wt.from(await a.content()).toString("utf8"),b=Wt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:x}=await f({branches:[u,o,s],contents:[v,g,b],path:n}),S=await Ii({fs:e,gitdir:t,type:"blob",object:Wt.from(_,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:p,path:n,oid:S,type:h}}}async function P8({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:p,committer:g,signingKey:v,onSign:b,mergeDriver:_}){a===void 0&&(a=await bc({fs:e,gitdir:r,fullname:!0})),a=await Ot.expand({fs:e,gitdir:r,ref:a}),i=await Ot.expand({fs:e,gitdir:r,ref:i});const x=await Ot.resolve({fs:e,gitdir:r,ref:a}),S=await Ot.resolve({fs:e,gitdir:r,ref:i}),E=await Sk({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new Ih;const C=E[0];if(C===S)return{oid:x,alreadyMerged:!0};if(o&&C===x)return!u&&!c&&await Ot.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(s)throw new V0;const k=await Ta.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async N=>Mee({fs:e,cache:t,dir:n,gitdir:r,index:N,ourOid:x,theirOid:S,baseOid:C,ourName:nd(a),baseName:"base",theirName:nd(i),dryRun:u,abortOnConflict:f,mergeDriver:_}));if(k instanceof Oh)throw k;return h||(h=`Merge branch '${nd(i)}' into ${nd(a)}`),{oid:await Tw({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[x,S],author:p,committer:g,signingKey:v,onSign:b,dryRun:u,noUpdateBranch:c}),tree:k,mergeCommit:!0}}}async function F8({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:u,gitdir:c,ref:f,url:h,remote:p,remoteRef:g,prune:v,pruneTags:b,fastForward:_,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:C,author:k,committer:O,signingKey:N}){try{if(!f){const W=await bc({fs:e,gitdir:c});if(!W)throw new ki("ref");f=W}const{fetchHead:D,fetchHeadDescription:U}=await xk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:c,corsProxy:S,ref:f,url:h,remote:p,remoteRef:g,singleBranch:E,headers:C,prune:v,pruneTags:b});await P8({fs:e,cache:t,gitdir:c,ours:f,theirs:D,fastForward:_,fastForwardOnly:x,message:`Merge ${U}`,author:k,committer:O,signingKey:N,dryRun:!1,noUpdateBranch:!1}),await _k({fs:e,cache:t,onProgress:r,dir:u,gitdir:c,ref:f,remote:p,noCheckout:!1})}catch(D){throw D.caller="git.pull",D}}async function Fee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:p,corsProxy:g,singleBranch:v,headers:b={},cache:_={}}){try{Je("fs",e),Je("http",t),Je("gitdir",u);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await F8({fs:new nn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:p,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function Lee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,remote:f,remoteRef:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:O=!1,cache:N={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",u),await xk({fs:new nn(e),cache:N,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:u,ref:c,remote:f,remoteRef:h,url:p,corsProxy:g,depth:v,since:b,exclude:_,relative:x,tags:S,singleBranch:E,headers:C,prune:k,pruneTags:O})}catch(D){throw D.caller="git.fetch",D}}async function $ee({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await Sk({fs:new nn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function L8({fs:e,filepath:t}){if(await e.exists(At.join(t,".git")))return t;{const n=th(t);if(n===t)throw new wr(`git root for ${t}`);return L8({fs:e,filepath:n})}}async function Bee({fs:e,filepath:t}){try{return Je("fs",e),Je("filepath",t),await L8({fs:new nn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function zee({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await Um({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function Uee({fs:e,gitdir:t,path:n}){return(await ua.get({fs:e,gitdir:t})).getall(n)}async function qee({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await Uee({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function Hee({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Je("http",e),Je("url",i);const c=await Rw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),f={capabilities:[...c.capabilities]};for(const[h,p]of c.refs){const g=h.split("/"),v=g.pop();let b=f;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}for(const[h,p]of c.symrefs){const g=h.split("/"),v=g.pop();let b=f;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}return f}catch(u){throw u.caller="git.getRemoteInfo",u}}function $8(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const u=i.replace("^{}",""),c=a[a.length-1],f=c.ref===u?c:a.find(h=>h.ref===u);if(f===void 0)throw new Error("I did not expect this to happen");f.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function Vee({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2}){try{Je("http",e),Je("url",i);const f=await Rw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(f.protocolVersion===2)return{protocolVersion:f.protocolVersion,capabilities:f.capabilities2};const h={};for(const p of f.capabilities){const[g,v]=p.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:$8(f,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function Gee({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Nh.wrap({type:e,object:t})),r=await Pl(t)),{oid:r,object:t}}async function Wee({object:e}){try{Je("object",e),typeof e=="string"?e=Wt.from(e,"utf8"):e=Wt.from(e);const t="blob",{oid:n,object:r}=await Gee({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function Kee({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=At.join(r,i);const o=await e.read(i),s=c=>Lr({fs:e,cache:t,gitdir:a,oid:c}),u=await nh.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await u.toBuffer()),{oids:[...u.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function Zee({fs:e,onProgress:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a,cache:i={}}){try{return Je("fs",e),Je("dir",n),Je("gitdir",n),Je("filepath",a),await Kee({fs:new nn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function Yee({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){try{return Je("fs",e),Je("gitdir",r),t||Je("dir",n),await M8({fs:new nn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function B8({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await qm.read({fs:e,gitdir:n});if(!r)throw new ki("oid");if(!a)throw new ki("ancestor");if(r===a)return!1;const s=[r],u=new Set;let c=0;for(;s.length;){if(c++===i)throw new W0(i);const f=s.shift(),{type:h,object:p}=await Lr({fs:e,cache:t,gitdir:n,oid:f});if(h!=="commit")throw new pi(f,h,"commit");const g=Fr.from(p).parse();for(const v of g.parent)if(v===a)return!0;if(!o.has(f))for(const v of g.parent)u.has(v)||(s.push(v),u.add(v))}return!1}async function Xee({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),Je("ancestor",a),await B8({fs:new nn(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function Jee({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r),jh.isIgnored({fs:new nn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function Qee({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("gitdir",n),Ot.listBranches({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function ete({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ot.resolve({gitdir:t,fs:e,ref:n}),i=[];return await z8({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ta.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function z8({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await Mh({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await z8({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:At.join(i,s.path)}):a.push(At.join(i,s.path))}async function tte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),await ete({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function nte({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ot.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof wr)return[]}return(await Mh({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function rte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await nte({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function ate({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("gitdir",n),Ot.listRefs({fs:new nn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function ite({fs:e,gitdir:t}){const n=await ua.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function ote({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),await ite({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function ste(e){const t=Qr.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const u of o){const[c,f]=u.split(":");c==="symref-target"?s.target=f:c==="peeled"&&(s.peeled=f)}n.push(s)}return n}async function lte({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(Qr.encode(`command=ls-refs
`)),r.push(Qr.encode(`agent=${Nw.agent}
`)),(n||t||e)&&r.push(Qr.delim()),n&&r.push(Qr.encode("peel")),t&&r.push(Qr.encode("symrefs")),e&&r.push(Qr.encode(`ref-prefix ${e}`)),r.push(Qr.flush()),r}async function ute({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2,prefix:c,symrefs:f,peelTags:h}){try{Je("http",e),Je("url",i);const p=await Xb.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(p.protocolVersion===1)return $8(p,c,f,h);const g=await lte({prefix:c,symrefs:f,peelTags:h}),v=await Xb.connect({http:e,auth:p.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return ste(v.body)}catch(p){throw p.caller="git.listServerRefs",p}}async function cte({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),Ot.listTags({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function dte(e,t){return e.committer.timestamp-t.committer.timestamp}const fte="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function v4({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===fte)return;const i=r;let o;const s=await ih({fs:e,cache:t,gitdir:n,oid:r}),u=s.tree;return a===s.oid?o=s.path:(o=await U8({fs:e,cache:t,gitdir:n,tree:u,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function U8({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const u=r.entries().map(function(c){let f;return c.oid===a?(f=At.join(s,c.path),o.push(f)):c.type==="tree"&&(f=Lr({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return U8({fs:e,cache:t,gitdir:n,tree:Ri.from(h),fileId:a,oid:i,filepaths:o,parentPath:At.join(s,c.path)})})),f});return await Promise.all(u),o}async function hte({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),f=[],h=await qm.read({fs:e,gitdir:n}),p=await Ot.resolve({fs:e,gitdir:n,ref:a}),g=[await sh({fs:e,cache:t,gitdir:n,oid:p})];let v,b,_;function x(S){_&&r&&f.push(S)}for(;g.length>0;){const S=g.pop();if(c!==void 0&&S.commit.committer.timestamp<=c)break;if(r){let E;try{E=await ng({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),b&&v!==E&&f.push(b),v=E,b=S,_=!0}catch(C){if(C instanceof wr){let k=u&&v;if(k&&(k=await v4({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(b){const O=await v4({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(O))if(k=k.filter(N=>O.indexOf(N)===-1),k.length===1)k=k[0],r=k,b&&f.push(b);else{k=!1,b&&f.push(b);break}}}else r=k,b&&f.push(b);if(!k){if(_&&v&&(f.push(b),!s))break;if(!s&&!u)throw C}b=S,_=!1}else throw C}}else f.push(S);if(i!==void 0&&f.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await sh({fs:e,cache:t,gitdir:n,oid:E});g.map(k=>k.oid).includes(C.oid)||g.push(C)}g.length===0&&x(S),g.sort((E,C)=>dte(E.commit,C.commit))}return f}async function pte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:u,cache:c={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",a),await hte({fs:new nn(e),cache:c,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u})}catch(f){throw f.caller="git.log",f}}async function mte({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:p,committer:g,signingKey:v,cache:b={},mergeDriver:_}){try{Je("fs",e),v&&Je("onSign",t);const x=new nn(e),S=await Ju({fs:x,gitdir:r,author:p});if(!S&&(!s||!o))throw new Xa("author");const E=await oh({fs:x,gitdir:r,author:S,committer:g});if(!E&&(!s||!o))throw new Xa("committer");return await P8({fs:x,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:u,noUpdateBranch:c,abortOnConflict:f,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:_})}catch(x){throw x.caller="git.merge",x}}const gte={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function q8({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new i8,o=[];function s(f,h){const p=Wt.from(f,h);o.push(p),i.update(p)}async function u({stype:f,object:h}){const p=gte[f];let g=h.length,v=g>15?128:0;const b=g&15;g=g>>>4;let _=(v|p|b).toString(16);for(s(_,"hex");v;)v=g>127?128:0,_=v|g&127,s(cE(2,_),"hex"),g=g>>>7;s(Wt.from(await x8(h)))}s("PACK"),s("00000002","hex"),s(cE(8,a.length),"hex");for(const f of a){const{type:h,object:p}=await Lr({fs:e,cache:t,gitdir:r,oid:f});await u({object:p,stype:h})}const c=i.digest();return o.push(c),o}async function yte({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await q8({fs:e,cache:t,gitdir:n,oids:r}),o=Wt.from(await Yb(i)),u=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(At.join(n,`objects/pack/${u}`),o),{filename:u}):{filename:u,packfile:new Uint8Array(o)}}async function bte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await yte({fs:new nn(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function vte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:p,prune:g=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:_=!1,corsProxy:x,singleBranch:S,headers:E={},author:C,committer:k,signingKey:O,cache:N={}}){try{Je("fs",e),Je("gitdir",u);const D=new nn(e),U=await Ju({fs:D,gitdir:u,author:C});if(!U)throw new Xa("author");const W=await oh({fs:D,gitdir:u,author:U,committer:k});if(!W)throw new Xa("committer");return await F8({fs:D,cache:N,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:p,fastForward:b,fastForwardOnly:_,corsProxy:x,singleBranch:S,headers:E,author:U,committer:W,signingKey:O,prune:g,pruneTags:v})}catch(D){throw D.caller="git.pull",D}}async function wte({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),start:a,finish:i}){const o=await qm.read({fs:e,gitdir:r}),s=new Set,u=new Set;for(const h of a)s.add(await Ot.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const p=await Ot.resolve({fs:e,gitdir:r,ref:h});u.add(p)}catch{}const c=new Set;async function f(h){c.add(h);const{type:p,object:g}=await Lr({fs:e,cache:t,gitdir:r,oid:h});if(p==="tag"){const b=ui.from(g).headers().object;return f(b)}if(p!=="commit")throw new pi(h,p,"commit");if(!o.has(h)){const b=Fr.from(g).headers().parent;for(h of b)!u.has(h)&&!c.has(h)&&await f(h)}}for(const h of s)await f(h);return c}async function qS({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:u,object:c}=await Lr({fs:e,cache:t,gitdir:r,oid:s});if(u==="tag"){const h=ui.from(c).headers().object;await o(h)}else if(u==="commit"){const h=Fr.from(c).headers().tree;await o(h)}else if(u==="tree"){const f=Ri.from(c);for(const h of f)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function _te(e){const t={};let n="";const r=Qr.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new Z0('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),u=o.slice(3);let c=u.indexOf(" ");c===-1&&(c=u.length);const f=u.slice(0,c),h=u.slice(c+1);t.refs[f]={ok:s==="ok",error:h}}return t}async function xte({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(Qr.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(Qr.flush()),n}async function Ste({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:u,gitdir:c,ref:f,remoteRef:h,remote:p,url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:x={}}){const S=f||await bc({fs:e,gitdir:c});if(typeof S>"u")throw new ki("ref");const E=await ua.get({fs:e,gitdir:c});p=p||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=g||await E.get(`remote.${p}.pushurl`)||await E.get(`remote.${p}.url`);if(typeof C>"u")throw new ki("remote OR url");const k=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new ki("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const O=await Ot.expand({fs:e,gitdir:c,ref:S}),N=b?"0000000000000000000000000000000000000000":await Ot.resolve({fs:e,gitdir:c,ref:O}),D=Rw.getRemoteHelperFor({url:C}),U=await D.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),W=U.auth;let Q;if(!k)Q=O;else try{Q=await Ot.expandAgainstMap({ref:k,map:U.refs})}catch(Y){if(Y instanceof wr)Q=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw Y}const F=U.refs.get(Q)||"0000000000000000000000000000000000000000";if(u&&!await u({remote:p,url:C,localRef:{ref:b?"(delete)":O,oid:N},remoteRef:{ref:Q,oid:F}}))throw new Dh;const Z=!U.capabilities.has("no-thin");let L=new Set;if(!b){const Y=[...U.refs.values()];let re=new Set;if(F!=="0000000000000000000000000000000000000000"){const be=await Sk({fs:e,cache:t,gitdir:c,oids:[N,F]});for(const we of be)Y.push(we);Z&&(re=await qS({fs:e,cache:t,gitdir:c,oids:be}))}if(!Y.includes(N)){const be=await wte({fs:e,cache:t,gitdir:c,start:[N],finish:Y});L=await qS({fs:e,cache:t,gitdir:c,oids:be})}if(Z){try{const be=await Ot.resolve({fs:e,gitdir:c,ref:`refs/remotes/${p}/HEAD`,depth:2}),{oid:we}=await Ot.resolveAgainstMap({ref:be.replace(`refs/remotes/${p}/`,""),fullref:be,map:U.refs}),Me=[we];for(const Pe of await qS({fs:e,cache:t,gitdir:c,oids:Me}))re.add(Pe)}catch{}for(const be of re)L.delete(be)}if(N===F&&(v=!0),!v){if(O.startsWith("refs/tags")&&F!=="0000000000000000000000000000000000000000")throw new ah("tag-exists");if(N!=="0000000000000000000000000000000000000000"&&F!=="0000000000000000000000000000000000000000"&&!await B8({fs:e,cache:t,gitdir:c,oid:N,ancestor:F,depth:-1}))throw new ah("not-fast-forward")}}const he=O8([...U.capabilities],["report-status","side-band-64k",`agent=${Nw.agent}`]),ie=await xte({capabilities:he,triplets:[{oldoid:F,oid:N,fullRef:Q}]}),ne=b?[]:await q8({fs:e,cache:t,gitdir:c,oids:[...L]}),ee=await D.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:C,auth:W,headers:x,body:[...ie,...ne]}),{packfile:se,progress:G}=await j8.demux(ee.body);if(a){const Y=D8(G);ag(Y,async re=>{await a(re)})}const X=await _te(se);if(ee.headers&&(X.headers=ee.headers),p&&X.ok&&X.refs[Q].ok&&!O.startsWith("refs/tags")){const Y=`refs/remotes/${p}/${Q.replace("refs/heads","")}`;b?await Ot.deleteRef({fs:e,gitdir:c,ref:Y}):await Ot.writeRef({fs:e,gitdir:c,ref:Y,value:N})}if(X.ok&&Object.values(X.refs).every(Y=>Y.ok))return X;{const Y=Object.entries(X.refs).filter(([re,be])=>!be.ok).map(([re,be])=>`
  - ${re}: ${be.error}`).join("");throw new G0(Y,X)}}async function Ete({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:u,gitdir:c=At.join(u,".git"),ref:f,remoteRef:h,remote:p="origin",url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:x={},cache:S={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),await Ste({fs:new nn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:c,ref:f,remoteRef:h,remote:p,url:g,force:v,delete:b,corsProxy:_,headers:x})}catch(E){throw E.caller="git.push",E}}async function H8({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ui.from(i).parse().object,H8({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new pi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function V8({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await ng({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await H8({fs:e,cache:t,gitdir:n,oid:r})}async function Cte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await V8({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function G8({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await sh({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function kte({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ot.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await V8({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function Ate({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oid",a),await kte({fs:new nn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function Tte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Je("fs",e),Je("gitdir",n),Je("oid",r);const u=new nn(e);i!==void 0&&(r=await ng({fs:u,cache:s,gitdir:n,oid:r,filepath:i}));const f=await Lr({fs:u,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(f.oid=r,a==="parsed")switch(f.format="parsed",f.type){case"commit":f.object=Fr.from(f.object).parse();break;case"tree":f.object=Ri.from(f.object).entries();break;case"blob":o?f.object=f.object.toString(o):(f.object=new Uint8Array(f.object),f.format="content");break;case"tag":f.object=ui.from(f.object).parse();break;default:throw new pi(f.oid,f.type,"blob|commit|tag|tree")}else(f.format==="deflated"||f.format==="wrapped")&&(f.type=f.format);return f}catch(u){throw u.caller="git.readObject",u}}async function Rte({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new pi(r,a,"tag");const o=ui.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function Nte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Rte({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function Ite({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Mh({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function Ote({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r),await Ta.acquire({fs:new nn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function Dte({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u}){let c;try{c=await Ot.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof wr))throw v}let h=(await Mh({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const p=await rg({fs:e,gitdir:r,tree:h});return await Tw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:p,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:u})}async function jte({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u,cache:c={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i);const f=new nn(e),h=await Ju({fs:f,gitdir:r,author:o});if(!h)throw new Xa("author");const p=await oh({fs:f,gitdir:r,author:h,committer:s});if(!p)throw new Xa("committer");return await Dte({fs:f,cache:c,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:p,signingKey:u})}catch(f){throw f.caller="git.removeNote",f}}async function Mte({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==Os.clean(r))throw new Ko(r,Os.clean(r));if(n!==Os.clean(n))throw new Ko(n,Os.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await Ot.exists({fs:e,gitdir:t,ref:o}))throw new es("branch",r,!1);const u=await Ot.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ot.writeRef({fs:e,gitdir:t,ref:o,value:u}),await Ot.deleteRef({fs:e,gitdir:t,ref:i});const f=await bc({fs:e,gitdir:t,fullname:!0})===i;(a||f)&&await Ot.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Pte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oldref",a),await Mte({fs:new nn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function W8({gitdir:e,type:t,object:n}){return Pl(Nh.wrap({type:t,object:n}))}async function Fte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const o=new nn(e);let s,u;try{s=await Ot.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await ng({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const f=t&&await o.read(At.join(t,r));f&&(u=await W8({gitdir:n,type:"blob",object:f}),s===u&&(c=await o.lstat(At.join(t,r)))),await Ta.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:c,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function Lte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,depth:a}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ot.resolve({fs:new nn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function $te({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r,value:a,append:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("path",r);const o=new nn(e),s=await ua.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await ua.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function K8({fs:e,gitdir:t,commit:n}){const r=Fr.from(n).toObject();return await Ii({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Jb{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=Jb.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const Bte={stage:Rh,workdir:tg};let HS;async function lh(e,t){return HS===void 0&&(HS=new zm),HS.acquire(e,t)}async function zte(e,t,n,r,a=null){const i=At.join(n,r),o=await e.lstat(i);if(!o)throw new wr(i);if(o.isDirectory())throw new Cn(`${i}: file expected, but found directory`);const s=a?await g8({fs:e,gitdir:t,oid:a}):void 0;let u=s?a:void 0;return s||await lh({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await e.readlink(i).then(S8):await e.read(i);if(c===null)throw new wr(i);u=await Ii({fs:e,gitdir:t,type:"blob",object:c})}),u}async function Ute({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await rg({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await zte(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function w4({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?Bte[g]():g),o=[],f=await Xu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,b])=>{if(!(g==="."||await jh.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&o.push([v,b]),{mode:await b.mode(),path:g,oid:await b.oid(),type:await b.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const b=[];for(const _ of v){const[x,S]=_;a?S&&(await e.exists(`${t}/${S.toString()}`)?b.push(_):o.push([null,S])):x&&(S?b.push(_):o.push([x,null]))}return b.length?Promise.all(b.map(g)):[]}});if(o.length===0||f.length===0)return null;const p=(await Ute({fs:e,dir:t,gitdir:n,entries:f})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return rg({fs:e,gitdir:n,tree:p})}async function qte({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],u=await Xu({fs:e,cache:{},dir:t,gitdir:n,trees:[vo({ref:a}),vo({ref:r})],map:async(c,[f,h])=>{if(c==="."||await jh.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const p=h?await h.type():await f.type();if(p!=="tree"&&p!=="blob")return;if(!h&&f){const v=p==="tree"?"rmdir":"rm";return p==="tree"&&o.push(c),p==="blob"&&i&&s.push({filepath:c,oid:await f.oid()}),{method:v,filepath:c}}const g=await h.oid();if(!f||await f.oid()!==g)return p==="tree"?{method:"mkdir",filepath:c}:(i&&s.push({filepath:c,oid:g,stats:await e.lstat(At.join(t,c))}),{method:"write",filepath:c,oid:g})}});await lh({fs:e,gitdir:n,dirRemoved:o,ops:u},async()=>{for(const c of u){const f=At.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(f);break;case"mkdir":await e.mkdir(f);break;case"rm":await e.rm(f);break;case"write":if(!o.some(h=>f.startsWith(h))){const{object:h}=await Lr({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(f)&&await e.rm(f),await e.write(f,h)}break}}}),await Ta.acquire({fs:e,gitdir:n,cache:{}},async c=>{s.forEach(({filepath:f,stats:h,oid:p})=>{c.insert({filepath:f,stats:h,oid:p})})})}class Nl{constructor({fs:t,dir:n,gitdir:r=At.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return At.join(this.gitdir,Nl.refStash)}get refLogsStashPath(){return At.join(this.gitdir,Nl.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Ju({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Xa("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return K8({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Ko(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?sh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ot.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Nl.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Jb.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await lh({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Jb.getStashReflogEntry(r,t)}}async function Hte({fs:e,dir:t,gitdir:n,message:r=""}){const a=new Nl({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await bc({fs:e,gitdir:n,fullname:!1}),o=await Ot.resolve({fs:e,gitdir:n,ref:"HEAD"}),u=(await G8({fs:e,dir:t,gitdir:n,oid:o})).commit.message,c=[o];let f=null,h=vo({ref:"HEAD"});const p=await w4({fs:e,dir:t,gitdir:n,treePair:[vo({ref:"HEAD"}),"stage"]});if(p){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:p,parent:c});c.push(_),f=p,h=Rh()}const g=await w4({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(_),f=g}if(!f||!p&&!g)throw new wr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${u}`,b=await a.writeStashCommit({message:v,tree:f,parent:c});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await N8({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function Z8({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Nl({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const c=(await sh({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await qte({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:c})}}async function Y8({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new Nl({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await lh(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const u=a.refLogsStashPath;await lh({reflogEntries:s,stashReflogPath:u,stashMgr:a},async()=>{if(s.length){await e.write(u,s.join(`
`),"utf8");const c=s[s.length-1].split(" ")[1];await a.writeStashRef(c)}else await e.rm(u)})}async function Vte({fs:e,dir:t,gitdir:n}){return new Nl({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function Gte({fs:e,dir:t,gitdir:n}){const r=new Nl({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await lh(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function Wte({fs:e,dir:t,gitdir:n,refIdx:r=0}){await Z8({fs:e,dir:t,gitdir:n,refIdx:r}),await Y8({fs:e,dir:t,gitdir:n,refIdx:r})}async function Kte({fs:e,dir:t,gitdir:n=At.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Je("fs",e),Je("dir",t),Je("gitdir",n),Je("op",r);const o={push:Hte,apply:Z8,drop:Y8,list:Vte,clear:Gte,pop:Wte},s=["apply","drop","pop"];try{const u=new nn(e);["refs","logs","logs/refs"].map(h=>At.join(n,h)).forEach(async h=>{await u.exists(h)||await u.mkdir(h)});const f=o[r];if(f){if(s.includes(r)&&i<0)throw new Ko(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await f({fs:u,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(u){throw u.caller="git.stash",u}}async function Zte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const i=new nn(e);if(await jh.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await Yte({fs:i,cache:a,gitdir:n}),u=await X8({fs:i,cache:a,gitdir:n,tree:s,path:r}),c=await Ta.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const _ of b)if(_.path===r)return _;return null}),f=await i.lstat(At.join(t,r)),h=u!==null,p=c!==null,g=f!==null,v=async()=>{if(p&&!Hb(c,f))return c.oid;{const b=await i.read(At.join(t,r)),_=await W8({gitdir:n,type:"blob",object:b});return p&&c.oid===_&&f.size!==-1&&Ta.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:f,oid:_})}),_}};if(!h&&!g&&!p)return"absent";if(!h&&!g&&p)return"*absent";if(!h&&g&&!p)return"*added";if(!h&&g&&p)return await v()===c.oid?"added":"*added";if(h&&!g&&!p)return"deleted";if(h&&!g&&p)return u===c.oid,"*deleted";if(h&&g&&!p)return await v()===u?"*undeleted":"*undeletemodified";if(h&&g&&p){const b=await v();return b===u?b===c.oid?"unmodified":"*unmodified":b===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function X8({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:u}=await Lr({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const c=Ri.from(u);return X8({fs:e,cache:t,gitdir:n,tree:c,path:a})}if(s==="blob")throw new pi(o.oid,s,"blob",a.join("/"))}return null}async function Yte({fs:e,cache:t,gitdir:n}){let r;try{r=await Ot.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof wr)return[]}const{tree:a}=await Mh({fs:e,cache:t,gitdir:n,oid:r});return a}async function Xte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const u=new nn(e);return await Xu({fs:u,cache:o,dir:t,gitdir:n,trees:[vo({ref:r}),tg(),Rh()],map:async function(c,[f,h,p]){if(!f&&!p&&h&&!s&&await jh.isIgnored({fs:u,dir:t,filepath:c})||!a.some(O=>R8(c,O)))return null;if(i&&!i(c))return;const[g,v,b]=await Promise.all([f&&f.type(),h&&h.type(),p&&p.type()]),_=[g,v,b].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!_)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!_)return;const x=g==="blob"?await f.oid():void 0,S=b==="blob"?await p.oid():void 0;let E;g!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,x,E,S],k=C.map(O=>C.indexOf(O));return k.shift(),[c,...k]}})}catch(u){throw u.caller="git.statusMatrix",u}}async function Jte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,force:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const o=new nn(e);if(r===void 0)throw new ki("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await Ot.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await Ot.exists({fs:o,gitdir:n,ref:r}))throw new es("tag",r);await Ot.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function Qte({fs:e,dir:t,gitdir:n=At.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:u,force:c}){try{Je("fs",e),Je("gitdir",n),Je("filepath",a);const f=new nn(e);if(u)return await Ta.acquire({fs:f,gitdir:n,cache:r},async function(p){if(!c){const g=await f.lstat(At.join(t,a));if(g){if(g.isDirectory())throw new Yu("directory");return}}p.has({filepath:a})&&p.delete({filepath:a})});let h;if(!i){if(h=await f.lstat(At.join(t,a)),!h)throw new wr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Yu("directory")}return await Ta.acquire({fs:f,gitdir:n,cache:r},async function(p){if(!s&&!p.has({filepath:a}))throw new wr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await f.readlink(At.join(t,a)):await f.read(At.join(t,a));i=await Ii({fs:f,gitdir:n,type:"blob",format:"content",object:v})}return p.insert({filepath:a,oid:i,stats:g}),i})}catch(f){throw f.caller="git.updateIndex",f}}function ene(){try{return Nw.version}catch(e){throw e.caller="git.version",e}}async function tne({fs:e,dir:t,gitdir:n=At.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Je("fs",e),Je("gitdir",n),Je("trees",r),await Xu({fs:new nn(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(u){throw u.caller="git.walk",u}}async function nne({fs:e,dir:t,gitdir:n=At.join(t,".git"),blob:r}){try{return Je("fs",e),Je("gitdir",n),Je("blob",r),await Ii({fs:new nn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function rne({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r}){try{return Je("fs",e),Je("gitdir",n),Je("commit",r),await K8({fs:new nn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function ane({fs:e,dir:t,gitdir:n=At.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const u=new nn(e);if(i==="parsed"){switch(r){case"commit":a=Fr.from(a).toObject();break;case"tree":a=Ri.from(a).toObject();break;case"blob":a=Wt.from(a,s);break;case"tag":a=ui.from(a).toObject();break;default:throw new pi(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Ii({fs:u,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(u){throw u.caller="git.writeObject",u}}async function ine({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r),Je("value",a);const s=new nn(e);if(r!==Os.clean(r))throw new Ko(r,Os.clean(r));if(!i&&await Ot.exists({fs:s,gitdir:n,ref:r}))throw new es("ref",r);o?await Ot.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await Ot.resolve({fs:s,gitdir:n,ref:a}),await Ot.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function one({fs:e,gitdir:t,tag:n}){const r=ui.from(n).toObject();return await Ii({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function sne({fs:e,dir:t,gitdir:n=At.join(t,".git"),tag:r}){try{return Je("fs",e),Je("gitdir",n),Je("tag",r),await one({fs:new nn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function lne({fs:e,dir:t,gitdir:n=At.join(t,".git"),tree:r}){try{return Je("fs",e),Je("gitdir",n),Je("tree",r),await rg({fs:new nn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Si={Errors:PQ,STAGE:Rh,TREE:vo,WORKDIR:tg,add:eee,abortMerge:YQ,addNote:nee,addRemote:ree,annotatedTag:iee,branch:see,checkout:N8,clone:vee,commit:wee,getConfig:zee,getConfigAll:qee,setConfig:$te,currentBranch:_ee,deleteBranch:See,deleteRef:Eee,deleteRemote:kee,deleteTag:Tee,expandOid:Oee,expandRef:Dee,fastForward:Fee,fetch:Lee,findMergeBase:$ee,findRoot:Bee,getRemoteInfo:Hee,getRemoteInfo2:Vee,hashBlob:Wee,indexPack:Zee,init:Yee,isDescendent:Xee,isIgnored:Jee,listBranches:Qee,listFiles:tte,listNotes:rte,listRefs:ate,listRemotes:ote,listServerRefs:ute,listTags:cte,log:pte,merge:mte,packObjects:bte,pull:vte,push:Ete,readBlob:Cte,readCommit:G8,readNote:Ate,readObject:Tte,readTag:Nte,readTree:Ite,remove:Ote,removeNote:jte,renameBranch:Pte,resetIndex:Fte,updateIndex:Qte,resolveRef:Lte,status:Zte,statusMatrix:Xte,tag:Jte,version:ene,walk:tne,writeBlob:nne,writeCommit:rne,writeObject:ane,writeRef:ine,writeTag:sne,writeTree:lne,stash:Kte};function une(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function cne(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:une(e)}async function dne(e,t){const n=cne(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function fne(e){let t=0;const n=[];await dne(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function hne(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function pne({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await fne(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?hne(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,u]of i.headers.entries())r[s]=u;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var Ek={request:pne};const Gy="system",_4="You are a helpful AI assistant.",x4=.7,S4=null,E4=null,C4=null,k4=0,A4=0,T4=!0,Wy=!0,Ky=30,Zy=10,R4=null,N4=null,I4=5,qr=Bl(zl(e=>({theme:Gy,globalSystemPrompt:_4,temperature:x4,maxTokens:S4,topP:E4,topK:C4,presencePenalty:k4,frequencyPenalty:A4,enableAdvancedSettings:T4,enableStreamingMarkdown:Wy,streamingRenderFPS:Ky,streamingCodeRenderFPS:Zy,gitUserName:R4,gitUserEmail:N4,toolMaxSteps:I4,setTheme:t=>{e({theme:t}),Gt.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),Gt.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),Gt.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),Gt.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),Gt.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),Gt.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),Gt.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),Gt.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),Gt.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),Gt.saveSetting("enableStreamingMarkdown",t)},setStreamingRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingRenderFPS:n}),Gt.saveSetting("streamingRenderFPS",n)},setStreamingCodeRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingCodeRenderFPS:n}),Gt.saveSetting("streamingCodeRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),Gt.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),Gt.saveSetting("gitUserEmail",n)},setToolMaxSteps:t=>{const n=Math.max(1,Math.min(20,t));e({toolMaxSteps:n}),Gt.saveSetting("toolMaxSteps",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,u,c,f,h,p,g,v,b]=await Promise.all([Gt.loadSetting("theme",Gy),Gt.loadSetting("temperature",x4),Gt.loadSetting("maxTokens",S4),Gt.loadSetting("topP",E4),Gt.loadSetting("topK",C4),Gt.loadSetting("presencePenalty",k4),Gt.loadSetting("frequencyPenalty",A4),Gt.loadSetting("globalSystemPrompt",_4),Gt.loadSetting("enableAdvancedSettings",T4),Gt.loadSetting("enableStreamingMarkdown",Wy),Gt.loadSetting("streamingRenderFPS",Ky),Gt.loadSetting("streamingCodeRenderFPS",Zy),Gt.loadSetting("gitUserName",R4),Gt.loadSetting("gitUserEmail",N4),Gt.loadSetting("toolMaxSteps",I4)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:u,enableAdvancedSettings:c,enableStreamingMarkdown:f,streamingRenderFPS:h,streamingCodeRenderFPS:p,gitUserName:g,gitUserEmail:v,toolMaxSteps:b})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:Gy,enableStreamingMarkdown:Wy,streamingRenderFPS:Ky,streamingCodeRenderFPS:Zy}),await Promise.all([Gt.saveSetting("theme",Gy),Gt.saveSetting("enableStreamingMarkdown",Wy),Gt.saveSetting("streamingRenderFPS",Ky),Gt.saveSetting("streamingCodeRenderFPS",Zy)]),dt.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),dt.error("Failed to reset general settings.")}}}))),Ck="https://cors.isomorphic-git.org",Qu=async e=>{const t=Gn(e);if(t!=="/")try{await F0(t,{recursive:!0})}catch(n){if(n instanceof Error&&n.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${t}`);return}throw console.error(`[VFS Op] Failed to create directory ${t}:`,n),dt.error(`Error creating directory "${la(t)}": ${n instanceof Error?n.message:String(n)}`),n}},J8=async e=>{const{gitUserName:t,gitUserEmail:n}=qr.getState();if(!t||!n)return dt.error("Git user name and email must be configured in Settings before committing."),!1;try{const r=await Si.getConfig({fs:Fa,dir:e,path:"user.name"}),a=await Si.getConfig({fs:Fa,dir:e,path:"user.email"});return r!==t&&await Si.setConfig({fs:Fa,dir:e,path:"user.name",value:t}),a!==n&&await Si.setConfig({fs:Fa,dir:e,path:"user.email",value:n}),!0}catch(r){return console.error("[VFS Op] Error checking/setting Git config:",r),dt.error(`Failed to configure Git user: ${r instanceof Error?r.message:String(r)}`),!1}},kk=e=>(console.warn(`[VFS Op] Git Auth requested for ${e}. No credentials configured.`),null),Ak=(e,t)=>(console.error(`[VFS Op] Git Auth FAILED for ${e}`,t),dt.error(`Authentication failed for ${e}`),null),Tk=(e,t)=>{console.log(`[VFS Op] Git Auth SUCCESS for ${e}`,t)},mne=async e=>{try{const t={backend:vJ,name:`litechat_vfs_${e}`};return await dJ(t),Fa}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),dt.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},Rk=async e=>{const t=Gn(e);try{try{await So(t)}catch(o){if(o.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${t}`),await Qu(t),[];throw o}const r=(await mc(t)).map(async o=>{const s=Lu(t,o);try{const u=await So(s);return{name:o,path:s,isDirectory:u.isDirectory(),size:u.size,lastModified:u.mtime}}catch(u){return console.error(`[VFS Op] Failed to stat ${s}:`,u),null}});return(await Promise.all(r)).filter(o=>o!==null)}catch(n){throw console.error(`[VFS Op] Failed to list directory ${t}:`,n),dt.error(`Error listing files: ${n instanceof Error?n.message:String(n)}`),n}},Ph=async e=>{const t=Gn(e);try{const n=await M0(t);return Ei.emit(qb.VFS_FILE_READ,{path:t}),n}catch(n){throw console.error(`[VFS Op] Failed to read file ${t}:`,n),dt.error(`Error reading file "${la(t)}": ${n instanceof Error?n.message:String(n)}`),n}},Iw=async(e,t)=>{const n=Gn(e),r=Hv(n);try{r!=="/"&&await Qu(r),await P0(n,t),Ei.emit(qb.VFS_FILE_WRITTEN,{path:n})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${n}:`,a),dt.error(`Error writing file "${la(n)}": ${a instanceof Error?a.message:String(a)}`)),a}},Nk=async(e,t=!1)=>{const n=Gn(e);if(n==="/")throw dt.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await So(n)).isDirectory()?(await L0(n,{recursive:t}),Ei.emit(qb.VFS_FILE_DELETED,{path:n})):(await j0(n),Ei.emit(qb.VFS_FILE_DELETED,{path:n})),dt.success(`"${la(n)}" deleted.`)}catch(r){if(r instanceof Error&&r.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${n}`);return}throw console.error(`[VFS Op] Failed to delete ${n}:`,r),dt.error(`Error deleting "${la(n)}": ${r instanceof Error?r.message:String(r)}`),r}},Q8=async e=>{await Qu(e)},gne=async(e,t)=>{try{const n=await Ph(e),r=new Blob([n]),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a;const o=Gn(e);i.download=t||la(o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(n){console.error(`[VFS Op] Failed to initiate download for ${e}:`,n),n instanceof Error&&n.message.includes("Error reading file")||dt.error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}},eM=async(e,t)=>{const n=Gn(t);let r=0,a=0;const i=Array.from(e);try{await Qu(n);for(const o of i){const s=Lu(n,o.name);try{const u=await o.arrayBuffer();await Iw(s,new Uint8Array(u)),r++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${o.name}:`,u)}}}catch(o){a=i.length,console.error(`[VFS Op] Failed to prepare target directory ${n} for upload:`,o)}finally{a>0&&r>0?dt.warning(`Upload complete with issues. ${r} succeeded, ${a} failed.`):a===0&&r>0?dt.success(`Successfully uploaded ${r} file(s) to ${n==="/"?"root":la(n)}.`):a>0&&r===0&&dt.error("Upload failed. Could not upload any files.")}},yne=async(e,t)=>{if(!e.name.toLowerCase().endsWith(".zip")){dt.error("Please select a valid ZIP file.");return}const n=Gn(t);let r;try{await Qu(n),r=await a8.loadAsync(e);const a=Object.values(r.files),i=await Promise.allSettled(a.map(async c=>{const f=Lu(n,c.name);if(c.dir)await Qu(f);else{const h=await c.async("uint8array");await Iw(f,h)}return{name:c.name,isDir:c.dir}}));let o=0,s=0,u=0;i.forEach(c=>{c.status==="fulfilled"&&c.value?c.value.isDir?s++:o++:c.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",c.reason))}),u>0?dt.warning(`Finished extracting "${e.name}". ${o+s} items succeeded, ${u} failed.`):dt.success(`Successfully extracted ${o} files and ${s} folders from "${e.name}" to ${n==="/"?"root":la(n)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),dt.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},O4=async(e,t="/")=>{const n=new a8,r=Gn(t),a=la(r)||"root";try{try{if(!(await So(r)).isDirectory()){dt.error(`Cannot export: "${a}" is not a directory.`);return}}catch(f){f instanceof Error&&f.code==="ENOENT"?dt.error(`Cannot export: Path "${a}" not found.`):dt.error(`Cannot export: Error accessing path "${a}". ${f instanceof Error?f.message:String(f)}`);return}const i=async(f,h)=>{const p=await Rk(f);for(const g of p)if(g.isDirectory){if(g.name===".git")continue;const v=h.folder(g.name);if(v)await i(g.path,v);else throw new Error(`Failed to create subfolder ${g.name} in zip.`)}else{const v=await Ph(g.path);h.file(g.name,v)}};await i(r,n);const o=await n.generateAsync({type:"blob"}),s=URL.createObjectURL(o),u=document.createElement("a");u.href=s;const c=`vfs_${a}_export.zip`;u.download=e||c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s),dt.success(`"${a}" exported as ${u.download}.`)}catch(i){console.error("[VFS Op] Failed to download all as zip:",i),i instanceof Error&&(i.message.includes("Error listing files")||i.message.includes("Error reading file")||i.message.includes("Cannot export"))||dt.error(`ZIP export failed: ${i instanceof Error?i.message:String(i)}`)}},bne=async(e,t)=>{const n=Gn(e),r=Gn(t);if(n==="/"||r==="/")throw dt.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(n!==r)try{const a=Hv(r);a!=="/"&&await Qu(a),await ck(n,r),dt.success(`Renamed "${la(n)}" to "${la(r)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||dt.error(`Rename failed: Original item "${la(n)}" not found.`):a instanceof Error&&a.code==="EEXIST"?dt.error(`Rename failed: An item named "${la(r)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||dt.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${n} to ${r}:`,a),a}},vne=async e=>{const t=Gn(e),n=Lu(t,".git");try{return(await So(n)).isDirectory()}catch(r){return r instanceof Error&&r.code==="ENOENT"||console.error(`[VFS Op] Error checking for .git in ${t}:`,r),!1}},Ik=async(e,t,n)=>{const r=Gn(e),a=la(t.replace(/\/$/,"").replace(/\.git$/,"")),i=Lu(r,a);try{try{await So(i),dt.error(`Directory "${a}" already exists in target location.`);return}catch(o){if(o.code!=="ENOENT")throw o}await Qu(r),await Si.clone({fs:Fa,http:Ek,dir:i,corsProxy:Ck,url:t,ref:n||void 0,singleBranch:!!n,depth:10,onAuth:kk,onAuthFailure:Ak,onAuthSuccess:Tk,onProgress:o=>{o.phase==="counting objects"&&o.total?console.log(`Clone progress: ${o.phase} ${o.loaded}/${o.total}`):o.phase==="receiving objects"&&o.total?console.log(`Clone progress: ${o.phase} ${o.loaded}/${o.total}`):console.log(`Clone progress: ${o.phase}`)}}),dt.success(`Repository "${a}" cloned successfully into ${i}.`)}catch(o){console.error(`[VFS Op] Git clone failed for ${t}:`,o),dt.error(`Git clone failed: ${o instanceof Error?o.message:String(o)}`);try{await L0(i,{recursive:!0,force:!0})}catch(s){console.warn(`[VFS Op] Failed cleanup ${i}:`,s)}throw o}},tM=async e=>{const t=Gn(e);try{await Si.init({fs:Fa,dir:t}),dt.success(`Initialized empty Git repository in "${la(t)}"`)}catch(n){throw console.error(`[VFS Op] Git init failed for ${t}:`,n),dt.error(`Git init failed: ${n instanceof Error?n.message:String(n)}`),n}},Ok=async(e,t)=>{const n=Gn(e);try{if(!await J8(n))throw new Error("Git user configuration is missing or invalid.");const a=await Si.statusMatrix({fs:Fa,dir:n});let i=!1;for(const[s,u,c]of a)c===2&&(await Si.add({fs:Fa,dir:n,filepath:s}),i=!0),u!==0&&c===0&&(await Si.remove({fs:Fa,dir:n,filepath:s}),i=!0);if(!i){dt.info("No changes detected to commit.");return}const o=await Si.commit({fs:Fa,dir:n,message:t,author:{name:qr.getState().gitUserName,email:qr.getState().gitUserEmail}});dt.success(`Changes committed: ${o.substring(0,7)}`)}catch(r){throw console.error(`[VFS Op] Git commit failed for ${n}:`,r),dt.error(`Git commit failed: ${r instanceof Error?r.message:String(r)}`),r}},Dk=async e=>{const t=Gn(e);try{if(!await J8(t))throw new Error("Git user configuration is missing or invalid.");const r=await Si.currentBranch({fs:Fa,dir:t});if(!r)throw new Error("Current branch not found.");await Si.pull({fs:Fa,http:Ek,dir:t,corsProxy:Ck,ref:r,singleBranch:!0,author:{name:qr.getState().gitUserName,email:qr.getState().gitUserEmail},onAuth:kk,onAuthFailure:Ak,onAuthSuccess:Tk}),dt.success(`Pulled latest changes for "${la(t)}"`)}catch(n){throw console.error(`[VFS Op] Git pull failed for ${t}:`,n),dt.error(`Git pull failed: ${n instanceof Error?n.message:String(n)}`),n}},jk=async e=>{const t=Gn(e);try{const n=await Si.push({fs:Fa,http:Ek,dir:t,corsProxy:Ck,onAuth:kk,onAuthFailure:Ak,onAuthSuccess:Tk});if(n.ok)dt.success(`Pushed changes successfully for "${la(t)}"`);else throw new Error(n.error||"Push failed")}catch(n){throw console.error(`[VFS Op] Git push failed for ${t}:`,n),dt.error(`Git push failed: ${n instanceof Error?n.message:String(n)}`),n}},nM=async e=>{const t=Gn(e);console.log(`[VFS Op] Git Status on ${t}`);try{const n=await Si.statusMatrix({fs:Fa,dir:t});console.log("Git Status:",n);const r=n.map(([a,i,o,s])=>{let u="";return o===0?u="deleted":i===0&&o===2?u="new file":i===1&&o===2?u="modified":i===1&&o===1?u="unmodified":u=`h:${i} w:${o} s:${s}`,`${a}: ${u}`}).join(`
`);dt.info(`Git Status for "${la(t)}":
${r||"No changes"}`,{duration:15e3})}catch(n){throw console.error(`[VFS Op] Git status failed for ${t}:`,n),dt.error(`Git status failed: ${n instanceof Error?n.message:String(n)}`),n}},dE=Fa,wne=1024*5,_ne=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},xne=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},Sne=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],Ene=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:Sne.some(r=>n.endsWith(r))},Cne=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=R.useState(null),[i,o]=R.useState(null),[s,u]=R.useState(!1),c=e.type||"application/octet-stream",f=Ene(e.name,c),h=c.startsWith("image/"),p=c.startsWith("audio/"),g=c.startsWith("video/");R.useEffect(()=>{let x=null;return o(null),!f&&e.contentBase64?(x=_ne(e.contentBase64,c),x||o("Failed to decode file content for preview."),a(x)):a(null),()=>{x&&(URL.revokeObjectURL(x),a(null))}},[e.contentBase64,c,f]),R.useEffect(()=>{f&&e.contentText&&e.contentText.length>wne?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):f&&e.contentText===void 0&&o("Text content missing from metadata.")},[e.contentText,e.size,f]);const v=async()=>{if(e.source==="vfs"){dt.info("File is already in VFS.");return}const x=xne(e);if(!x){dt.error("Cannot add to VFS: Failed to reconstruct file data.");return}u(!0);try{await eM([x],"/"),dt.success(`"${e.name}" added to VFS root.`)}catch(S){console.error("Failed to add file to VFS:",S),dt.error(`Failed to add "${e.name}" to VFS.`)}finally{u(!1)}},b=()=>f?y.jsx(AU,{className:"h-5 w-5 text-blue-500"}):h?y.jsx(KU,{className:"h-5 w-5 text-purple-500"}):p?y.jsx(aq,{className:"h-5 w-5 text-green-500"}):g?y.jsx(Mq,{className:"h-5 w-5 text-orange-500"}):y.jsx(CU,{className:"h-5 w-5 text-muted-foreground"}),_=()=>i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(js,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):f&&e.contentText!==void 0?y.jsx(cw,{lang:c==="text/markdown"?"markdown":"text",code:e.contentText}):h&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):p&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):g&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."});return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-2",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[b(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",qv(e.size),")"]}),e.source==="vfs"&&e.path&&y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-blue-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(Dn,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),!n&&t&&y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.source==="direct"&&y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:v,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Zn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(LO,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{children:"Add to VFS"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(Ul,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{children:"Remove from Prompt"})]})})]})]}),y.jsx("div",{className:$t("p-2 max-h-80 overflow-y-auto"),children:_()})]})},kne=({interaction:e,className:t})=>{var _,x,S;const[n,r]=R.useState(!1),[a,i]=R.useState(!1),[o,s]=R.useState(!1),u=(_=e.prompt)!=null&&_.content&&typeof e.prompt.content=="string"?e.prompt.content:"",c=IC(u),f=((S=(x=e.prompt)==null?void 0:x.metadata)==null?void 0:S.attachedFiles)||[],h=u||f.length>0,p=R.useCallback(async()=>{if(u)try{await navigator.clipboard.writeText(u),i(!0),dt.success("Prompt text copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(E){dt.error("Failed to copy prompt text."),console.error("Clipboard copy failed:",E)}},[u]),g=R.useCallback(async()=>{try{await navigator.clipboard.writeText(e.id),s(!0),dt.success("Interaction ID copied to clipboard!"),setTimeout(()=>s(!1),1500)}catch(E){dt.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",E)}},[e.id]),v=()=>r(E=>!E),b=R.useMemo(()=>u?u.split(`
`).slice(0,3).join(`
`):"",[u]);return y.jsxs("div",{className:$t("flex items-start gap-3 my-2 group",t),children:[y.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary/20 text-primary flex items-center justify-center mt-1",children:y.jsx(Dq,{className:"h-5 w-5"})}),y.jsxs("div",{className:"p-3 border rounded-md shadow-sm bg-muted/50 flex-grow min-w-0 relative",children:[y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:v,"aria-label":n?"Unfold prompt":"Fold prompt",disabled:!h,children:y.jsx(Gv,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:n?"Unfold":"Fold"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:g,"aria-label":"Copy interaction ID",children:o?y.jsx(_o,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx($O,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:"Copy ID"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:p,"aria-label":"Copy prompt text",disabled:!u,children:a?y.jsx(_o,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(oC,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:"Copy Text"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:()=>dt.info("Edit functionality coming soon!"),"aria-label":"Edit prompt (coming soon)",children:y.jsx(z2,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:"Edit (Soon)"})]})})]}),y.jsx("div",{className:"text-sm markdown-content",children:n?y.jsxs("div",{className:"folded-content-preview cursor-pointer",onClick:v,children:[u?y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:b}):y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),f.length>0&&y.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(+",f.length," file(s))"]})]}):y.jsxs(y.Fragment,{children:[u?c.map((E,C)=>typeof E=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:E}},C):E.type==="code"?y.jsx(cw,{lang:E.lang,code:E.code},C):null):!f.length&&y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),f.length>0&&y.jsx("div",{className:"mt-2 space-y-2",children:f.map(E=>y.jsx(Cne,{fileMeta:E,isReadOnly:!0},E.id))})]})})]})]})},D4=e=>Symbol.iterator in e,j4=e=>"entries"in e,M4=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},Ane=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function Tne(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!D4(e)||!D4(t)?M4({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):j4(e)&&j4(t)?M4(e,t):Ane(e,t)}function Mn(e){const t=vt.useRef(void 0);return n=>{const r=e(n);return Tne(t.current,r)?t.current:t.current=r}}const Rne=({interactionId:e,onStop:t,className:n})=>{const r=a=>{a.stopPropagation(),t(e)};return y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"destructive",size:"icon",className:$t("h-6 w-6",n),onClick:r,"aria-label":"Stop generation",children:y.jsx(Cq,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:y.jsx("p",{children:"Stop Generation"})})]})})};function P4(e,t){let n,r,a;return function(){n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-a>=t&&(e(),a=Date.now())},t-(Date.now()-a))):(e(),a=Date.now(),n=!0)}}const F4=e=>/```/.test(e),rM=R.memo(({interactionId:e})=>{const t=yr(p=>p.activeStreamBuffers[e]),{enableStreamingMarkdown:n,streamingRenderFPS:r,streamingCodeRenderFPS:a}=qr(Mn(p=>({enableStreamingMarkdown:p.enableStreamingMarkdown,streamingRenderFPS:p.streamingRenderFPS,streamingCodeRenderFPS:p.streamingCodeRenderFPS}))),[i,o]=R.useState(""),s=R.useRef(""),u=R.useRef(void 0),c=R.useRef(100),f=R.useRef(!1);R.useEffect(()=>{s.current=t??"",f.current=!0},[t]),R.useEffect(()=>{var b;const g=F4(s.current)?a:r,v=g>0?1e3/g:100;v!==c.current&&(c.current=v,u.current=P4(()=>{i!==s.current&&o(s.current),f.current=!1},v)),f.current&&((b=u.current)==null||b.call(u))},[t,r,a,i]),R.useEffect(()=>{const p=yr.getState().activeStreamBuffers[e]??"";s.current=p;const v=F4(p)?a:r,b=v>0?1e3/v:100;c.current=b,u.current=P4(()=>{i!==s.current&&o(s.current),f.current=!1},b),o(p),f.current=!1},[e,r,a]);const h=IC(n?i:null);return n?y.jsx("div",{className:"text-sm markdown-content",children:h.map((p,g)=>typeof p=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:p}},g):p.type==="code"?y.jsx(cw,{lang:p.lang,code:p.code},g):null)}):y.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:i})});rM.displayName="StreamingContentView";const aM=R.memo(({interactionId:e,onStop:t})=>{const n=yr(Mn(u=>{var p,g,v;const c=u.interactions.find(b=>b.id===e),f=(((g=(p=c==null?void 0:c.metadata)==null?void 0:p.toolCalls)==null?void 0:g.length)??0)>0,h=!u.activeStreamBuffers[e];return c&&c.status==="STREAMING"?{index:c.index,type:c.type,modelId:(v=c.metadata)==null?void 0:v.modelId,hasToolCalls:f,showToolPlaceholder:f&&h}:null}));if(!n)return console.log(`[StreamingInteractionCard] Shell data not found or not streaming for ${e}, rendering null.`),null;const{index:r,type:a,modelId:i,hasToolCalls:o,showToolPlaceholder:s}=n;return y.jsxs("div",{className:$t("p-3 my-2 border rounded-md shadow-sm bg-card border-dashed relative group"),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{className:"flex items-center gap-1.5",children:["Idx:",r," | ",a," | Streaming",y.jsxs("span",{className:"relative flex h-2 w-2",children:[y.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),y.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-sky-500"})]}),i&&y.jsxs("span",{className:"ml-1 text-blue-400",children:["(",i,")"]}),o&&y.jsxs("span",{className:"ml-2 flex items-center gap-1 text-orange-400",children:[y.jsx(Ab,{className:"h-3 w-3"}),"(Using Tools...)"]})]}),y.jsx("div",{className:"interaction-card-actions-sticky",children:y.jsx(Rne,{interactionId:e,onStop:t})})]}),y.jsx(rM,{interactionId:e}),s&&y.jsxs("div",{className:"mt-2 text-xs text-muted-foreground italic flex items-center gap-1",children:[y.jsx(Zn,{className:"h-3 w-3 animate-spin"}),"Executing tools..."]})]},e)});aM.displayName="StreamingInteractionCard";function Mr({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:$t("bg-accent animate-pulse rounded-md",e),...t})}const Nne=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onStopInteraction:i})=>{const o=R.useRef(null),[s,u]=R.useState(!1),c=yr(Mn(g=>new Set(g.streamingInteractionIds))),f=t.reduce((g,v)=>{if(v.type==="message.user_assistant"){const b=v.index??-1;(g[b]=g[b]||[]).push(v)}return g},{}),h=Object.keys(f).map(Number).filter(g=>!isNaN(g)&&g>=0).sort((g,v)=>g-v),p=R.useCallback((g="smooth")=>{o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:g})},[]);return R.useEffect(()=>{const g=o.current;g&&g.scrollHeight-g.scrollTop-g.clientHeight<150&&p("smooth")},[t.length,n,p]),R.useEffect(()=>{const g=o.current;if(!g)return;const v=()=>{const b=g.scrollHeight-g.scrollTop-g.clientHeight<150;u(!b)};return g.addEventListener("scroll",v),v(),()=>g.removeEventListener("scroll",v)},[]),y.jsxs("div",{className:$t("relative",r),children:[y.jsxs("div",{ref:o,className:"h-full overflow-y-auto pr-2",children:[h.map(g=>{const v=f[g]||[],b=v.sort((_,x)=>{var S,E;return(((S=x.startedAt)==null?void 0:S.getTime())??0)-(((E=_.startedAt)==null?void 0:E.getTime())??0)})[0];return b?y.jsxs(vt.Fragment,{children:[b.prompt&&y.jsx(kne,{interaction:b}),(b.response!==null||b.status==="STREAMING")&&(c.has(b.id)?y.jsx(aM,{interactionId:b.id,onStop:i}):y.jsx(aZ,{interaction:b,allInteractionsInGroup:v,onRegenerate:a}))]},`${g}-${b.id}`):null}),n==="loading"&&y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsx(Mr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Mr,{className:"h-12 w-3/4 mr-auto rounded-md"}),y.jsx(Mr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Mr,{className:"h-12 w-3/4 mr-auto rounded-md"})]}),t.length===0&&n==="idle"&&!e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select or start a new conversation."}),t.length===0&&n==="idle"&&e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Send a message to start chatting."})]}),s&&y.jsx(Lt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 h-10 w-10 rounded-full shadow-lg bg-card/80 backdrop-blur-sm hover:bg-muted",onClick:()=>p("smooth"),"aria-label":"Scroll to bottom",children:y.jsx(tU,{className:"h-5 w-5"})})]})},Yy=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0)).sort((i,o)=>(i.order??1/0)-(o.order??1/0));return a.length===0?null:y.jsx("div",{className:$t(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(vt.Fragment,{children:o?o():null},i.id)})})},iM=6048e5,Ine=864e5,L4=Symbol.for("constructDateFrom");function ec(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&L4 in e?e[L4](t):e instanceof Date?new e.constructor(t):new Date(t)}function ts(e,t){return ec(t||e,e)}let One={};function Ow(){return One}function Hm(e,t){var s,u,c,f;const n=Ow(),r=(t==null?void 0:t.weekStartsOn)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,a=ts(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Qb(e,t){return Hm(e,{...t,weekStartsOn:1})}function oM(e,t){const n=ts(e,t==null?void 0:t.in),r=n.getFullYear(),a=ec(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Qb(a),o=ec(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=Qb(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function $4(e){const t=ts(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Dne(e,...t){const n=ec.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function B4(e,t){const n=ts(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function jne(e,t,n){const[r,a]=Dne(n==null?void 0:n.in,e,t),i=B4(r),o=B4(a),s=+i-$4(i),u=+o-$4(o);return Math.round((s-u)/Ine)}function Mne(e,t){const n=oM(e,t),r=ec(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Qb(r)}function Pne(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Fne(e){return!(!Pne(e)&&typeof e!="number"||isNaN(+ts(e)))}function Lne(e,t){const n=ts(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const $ne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Bne=(e,t,n)=>{let r;const a=$ne[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function VS(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const zne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Une={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hne={date:VS({formats:zne,defaultWidth:"full"}),time:VS({formats:Une,defaultWidth:"full"}),dateTime:VS({formats:qne,defaultWidth:"full"})},Vne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Gne=(e,t,n,r)=>Vne[e];function im(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Wne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Kne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Zne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qne=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ere={ordinalNumber:Qne,era:im({values:Wne,defaultWidth:"wide"}),quarter:im({values:Kne,defaultWidth:"wide",argumentCallback:e=>e-1}),month:im({values:Zne,defaultWidth:"wide"}),day:im({values:Yne,defaultWidth:"wide"}),dayPeriod:im({values:Xne,defaultWidth:"wide",formattingValues:Jne,defaultFormattingWidth:"wide"})};function om(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?nre(s,h=>h.test(o)):tre(s,h=>h.test(o));let c;c=e.valueCallback?e.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(o.length);return{value:c,rest:f}}}function tre(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function nre(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function rre(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const are=/^(\d+)(th|st|nd|rd)?/i,ire=/\d+/i,ore={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sre={any:[/^b/i,/^(a|c)/i]},lre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ure={any:[/1/i,/2/i,/3/i,/4/i]},cre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gre={ordinalNumber:rre({matchPattern:are,parsePattern:ire,valueCallback:e=>parseInt(e,10)}),era:om({matchPatterns:ore,defaultMatchWidth:"wide",parsePatterns:sre,defaultParseWidth:"any"}),quarter:om({matchPatterns:lre,defaultMatchWidth:"wide",parsePatterns:ure,defaultParseWidth:"any",valueCallback:e=>e+1}),month:om({matchPatterns:cre,defaultMatchWidth:"wide",parsePatterns:dre,defaultParseWidth:"any"}),day:om({matchPatterns:fre,defaultMatchWidth:"wide",parsePatterns:hre,defaultParseWidth:"any"}),dayPeriod:om({matchPatterns:pre,defaultMatchWidth:"any",parsePatterns:mre,defaultParseWidth:"any"})},yre={code:"en-US",formatDistance:Bne,formatLong:Hne,formatRelative:Gne,localize:ere,match:gre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bre(e,t){const n=ts(e,t==null?void 0:t.in);return jne(n,Lne(n))+1}function vre(e,t){const n=ts(e,t==null?void 0:t.in),r=+Qb(n)-+Mne(n);return Math.round(r/iM)+1}function sM(e,t){var f,h,p,g;const n=ts(e,t==null?void 0:t.in),r=n.getFullYear(),a=Ow(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(p=a.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=ec((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=Hm(o,t),u=ec((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=Hm(u,t);return+n>=+s?r+1:+n>=+c?r:r-1}function wre(e,t){var s,u,c,f;const n=Ow(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,a=sM(e,t),i=ec((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Hm(i,t)}function _re(e,t){const n=ts(e,t==null?void 0:t.in),r=+Hm(n,t)-+wre(n,t);return Math.round(r/iM)+1}function ur(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Nu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return ur(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ur(n+1,2)},d(e,t){return ur(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ur(e.getHours()%12||12,t.length)},H(e,t){return ur(e.getHours(),t.length)},m(e,t){return ur(e.getMinutes(),t.length)},s(e,t){return ur(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return ur(a,t.length)}},Cf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},z4={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Nu.y(e,t)},Y:function(e,t,n,r){const a=sM(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return ur(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):ur(i,t.length)},R:function(e,t){const n=oM(e);return ur(n,t.length)},u:function(e,t){const n=e.getFullYear();return ur(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ur(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ur(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Nu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return ur(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=_re(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):ur(a,t.length)},I:function(e,t,n){const r=vre(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):ur(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Nu.d(e,t)},D:function(e,t,n){const r=bre(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ur(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ur(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ur(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return ur(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Cf.noon:r===0?a=Cf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Cf.evening:r>=12?a=Cf.afternoon:r>=4?a=Cf.morning:a=Cf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Nu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Nu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ur(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):ur(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Nu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Nu.s(e,t)},S:function(e,t){return Nu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return q4(r);case"XXXX":case"XX":return Xc(r);case"XXXXX":case"XXX":default:return Xc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return q4(r);case"xxxx":case"xx":return Xc(r);case"xxxxx":case"xxx":default:return Xc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+U4(r,":");case"OOOO":default:return"GMT"+Xc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+U4(r,":");case"zzzz":default:return"GMT"+Xc(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return ur(r,t.length)},T:function(e,t,n){return ur(+e,t.length)}};function U4(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+ur(i,2)}function q4(e,t){return e%60===0?(e>0?"-":"+")+ur(Math.abs(e)/60,2):Xc(e,t)}function Xc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=ur(Math.trunc(r/60),2),i=ur(r%60,2);return n+a+t+i}const H4=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},lM=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},xre=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return H4(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",H4(r,t)).replace("{{time}}",lM(a,t))},Sre={p:lM,P:xre},Ere=/^D+$/,Cre=/^Y+$/,kre=["D","DD","YY","YYYY"];function Are(e){return Ere.test(e)}function Tre(e){return Cre.test(e)}function Rre(e,t,n){const r=Nre(e,t,n);if(console.warn(r),kre.includes(e))throw new RangeError(r)}function Nre(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ire=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ore=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Dre=/^'([^]*?)'?$/,jre=/''/g,Mre=/[a-zA-Z]/;function V4(e,t,n){var f,h,p,g;const r=Ow(),a=r.locale??yre,i=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,s=ts(e,n==null?void 0:n.in);if(!Fne(s))throw new RangeError("Invalid time value");let u=t.match(Ore).map(v=>{const b=v[0];if(b==="p"||b==="P"){const _=Sre[b];return _(v,a.formatLong)}return v}).join("").match(Ire).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:Pre(v)};if(z4[b])return{isToken:!0,value:v};if(b.match(Mre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(u=a.localize.preprocessor(s,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Tre(b)||Are(b))&&Rre(b,t,String(e));const _=z4[b[0]];return _(s,b,a.localize,c)}).join("")}function Pre(e){const t=e.match(Dre);return t?t[1].replace(jre,"'"):e}const Fre=".litechat/conversations",Lre=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${V4(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${V4(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,u,c,f,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(u=r.prompt.metadata)!=null&&u.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(p=>{n+=`- ${p.name} (${p.type}, ${qv(p.size)}) ${p.source==="vfs"?`(VFS: ${p.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((f=r.metadata)!=null&&f.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n},GS=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},Gr=Bl(zl((e,t)=>({conversations:[],projects:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},isLoading:!1,error:null,loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([Gt.loadConversations(),Gt.loadProjects(),Gt.loadSyncRepos()]),i={};n.forEach(o=>{i[o.id]="idle"}),e({conversations:n,projects:r,syncRepos:a,conversationSyncStatus:i,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=Lo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]="idle")});try{const o=t().getConversationById(r);if(o)await Gt.saveConversation(o);else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(u=>u.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([u])=>u!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){const u=o.conversations[s].metadata??{},c=r.metadata??{},f={...u,...c};Object.assign(o.conversations[s],{...r,metadata:f,updatedAt:new Date}),["title","metadata","syncRepoId","projectId"].some(p=>p in r)&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(o.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Gt.saveConversation(o)}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const u=s.conversations.findIndex(c=>c.id===n);u!==-1&&(s.conversations[u]=a),s.conversationSyncStatus[n]==="needs-sync"&&(s.conversationSyncStatus[n]="idle"),s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(u=>u.id===n);s!==-1&&(o.conversations[s]=a),o.conversationSyncStatus[n]==="needs-sync"&&(o.conversationSyncStatus[n]="idle"),o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await Gt.deleteConversation(n),await Gt.deleteInteractionsForConversation(n),r===n&&a==="conversation"&&await yr.getState().setCurrentConversationId(null)}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{i&&(s.conversations.push(i),s.conversationSyncStatus[n]="idle"),r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},addProject:async n=>{const r=n.parentId??null,a=t().getProjectById(r),i=a?a.path:"/",o=n.name.trim(),s=Cb(i,o),u=Lo(),c=new Date,f={id:u,path:s,createdAt:c,updatedAt:c,name:o,parentId:r,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,metadata:n.metadata??{}};e(h=>{h.projects.push(f)});try{const h=t().getProjectById(u);if(h){const p=JSON.parse(JSON.stringify(h));await Gt.saveProject(p)}else throw new Error("Failed to retrieve newly added project state");return u}catch(h){throw console.error("ConversationStore: Error adding project",h),h.name==="ConstraintError"?dt.error(`A project or folder named "${o}" already exists in this location.`):dt.error("Failed to save new project."),e(p=>({error:"Failed to save new project",projects:p.projects.filter(g=>g.id!==u)})),h}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ConversationStore: Project ${n} not found.`);return}let i=a.path,o=a.name;if(r.name!==void 0&&r.name!==a.name){o=r.name.trim();const u=t().getProjectById(a.parentId),c=u?u.path:"/";i=Cb(c,o)}e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&Object.assign(u.projects[c],{...r,name:o,path:i,updatedAt:new Date})});const s=t().getProjectById(n);if(s)try{const u=JSON.parse(JSON.stringify(s));await Gt.saveProject(u)}catch(u){throw console.error("ConversationStore: Error updating project",u),u.name==="ConstraintError"?dt.error(`A project or folder named "${o}" already exists in this location.`):dt.error("Failed to save project update."),e(c=>{const f=c.projects.findIndex(h=>h.id===n);f!==-1&&(c.projects[f]=a),c.error="Failed to save project update"}),u}else console.error("ConversationStore: Failed to retrieve updated project state after update."),e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&(u.projects[c]=a),u.error="Failed to save project update (state error)"})},deleteProject:async n=>{const r=t().selectedItemId,a=t().selectedItemType;if(!t().projects.find(c=>c.id===n))return;const o=new Set,s=new Set,u=c=>{o.add(c),t().projects.filter(f=>f.parentId===c).forEach(f=>u(f.id)),t().conversations.filter(f=>f.projectId===c).forEach(f=>s.add(f.id))};u(n),e(c=>({projects:c.projects.filter(f=>!o.has(f.id)),conversations:c.conversations.map(f=>s.has(f.id)?{...f,projectId:null}:f),selectedItemId:o.has(r??"")?null:r,selectedItemType:o.has(r??"")?null:a}));try{await Gt.deleteProject(n),o.has(r??"")&&await yr.getState().setCurrentConversationId(null)}catch(c){throw console.error("ConversationStore: Error deleting project",c),e({error:"Failed to delete project. Please reload."}),c}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await yr.getState().setCurrentConversationId(r==="conversation"?n:null)):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{try{const r=await n.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.conversation||!Array.isArray(a.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const i=a.conversation,o=a.interactions;if(!i.id||!i.title||!i.createdAt||!i.updatedAt)throw new Error("Invalid conversation data in import file.");const s=await t().addConversation({title:i.title||"Imported Chat",metadata:i.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(c=>Gt.saveInteraction({...c,conversationId:s,id:Lo()}));await Promise.all(u),await t().selectItem(s,"conversation"),dt.success("Conversation imported successfully.")}catch(r){throw console.error("ConversationStore: Error importing conversation",r),dt.error(`Import failed: ${r instanceof Error?r.message:String(r)}`),r}},exportConversation:async(n,r)=>{try{const a=t().conversations.find(c=>c.id===n);if(!a)throw new Error("Conversation not found.");const i=await Gt.loadInteractionsForConversation(n);let o,s;const u=a.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(r==="json"){const f=JSON.stringify({conversation:a,interactions:i},null,2);o=new Blob([f],{type:"application/json"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.json`}else if(r==="md"){const c=Lre(a,i);o=new Blob([c],{type:"text/markdown"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");GS(o,s),dt.success(`Conversation exported as ${r.toUpperCase()}.`)}catch(a){throw console.error("ConversationStore: Error exporting conversation",a),dt.error(`Export failed: ${a instanceof Error?a.message:String(a)}`),a}},exportProject:async n=>{try{const r=t().getProjectById(n);if(!r)throw new Error("Project not found.");const a=t().projects,i=t().conversations,o=async p=>{const g=a.find(x=>x.id===p);if(!g)throw new Error(`Project ${p} not found in state.`);const v=a.filter(x=>x.parentId===p),b=i.filter(x=>x.projectId===p),_=[];for(const x of v)_.push(await o(x.id));for(const x of b){const S=await Gt.loadInteractionsForConversation(x.id);_.push({conversation:x,interactions:S})}return{project:g,children:_}},s=await o(n),u=JSON.stringify(s,null,2),c=new Blob([u],{type:"application/json"}),h=`litechat_project_${r.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${n.substring(0,6)}.json`;GS(c,h),dt.success(`Project "${r.name}" exported.`)}catch(r){throw console.error("ConversationStore: Error exporting project",r),dt.error(`Project export failed: ${r instanceof Error?r.message:String(r)}`),r}},exportAllConversations:async()=>{try{const n=t().conversations,r=[];for(const s of n){const u=await Gt.loadInteractionsForConversation(s.id);r.push({conversation:s,interactions:u})}const a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/json"}),o=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;GS(i,o),dt.success("All conversations exported.")}catch(n){throw console.error("ConversationStore: Error exporting conversations",n),dt.error(`Export failed: ${n instanceof Error?n.message:String(n)}`),n}},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Gt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=Lo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await Gt.saveSyncRepo(s)}else throw new Error("Failed to retrieve newly added sync repo state");return dt.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(u=>u.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Gt.saveSyncRepo(o),dt.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const u=s.syncRepos.findIndex(c=>c.id===n);u!==-1&&(s.syncRepos[u]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(a=>a.id===n);if(r){e(a=>({syncRepos:a.syncRepos.filter(i=>i.id!==n)}));try{await Gt.deleteSyncRepo(n),dt.success(`Sync repository "${r.name}" deleted.`)}catch(a){throw console.error("ConversationStore: Error deleting sync repo",a),e(i=>{r&&i.syncRepos.push(r),i.error="Failed to delete sync repository"}),a}}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,"idle"),dt.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)})},syncConversation:async n=>{var h,p;const{conversations:r,syncRepos:a,_setConversationSyncStatus:i,updateConversation:o}=t(),s=r.find(g=>g.id===n);if(!s){dt.error("Conversation not found for syncing.");return}if(!s.syncRepoId){dt.info("Conversation not linked to a sync repository.");return}const u=a.find(g=>g.id===s.syncRepoId);if(!u){dt.error("Sync repository configuration not found."),i(n,"error","Repo not found");return}i(n,"syncing");const c=Gn(`/synced_convos/${u.id}`),f=Lu(c,Fre,`${n}.json`);try{let g=!1;try{await dE.promises.stat(Lu(c,".git")),g=!0}catch(S){if(S.code!=="ENOENT")throw S}if(g)dt.info(`Pulling latest changes for "${u.name}"...`),await Dk(c);else{dt.info(`Cloning repository "${u.name}" for first sync...`),await Ik(Hv(c),u.remoteUrl,u.branch);try{await dE.promises.stat(Lu(c,".git"))}catch{throw new Error(`Clone seemed successful but repo dir "${c}" not found.`)}}let v=null,b=null;try{const S=await Ph(f),E=new TextDecoder().decode(S);v=JSON.parse(E),b=(h=v==null?void 0:v.conversation)!=null&&h.updatedAt?new Date(v.conversation.updatedAt).getTime():null}catch(S){if(S.code==="ENOENT")console.log(`Conversation file ${f} not found in repo. Will push local version.`);else throw new Error(`Failed to read remote conversation file: ${S.message}`)}const _=s.updatedAt.getTime(),x=((p=s.lastSyncedAt)==null?void 0:p.getTime())??0;if(!v||_>(b??0)||_>x){dt.info("Local changes detected. Pushing to remote...");const S=await Gt.loadInteractionsForConversation(n),E={...s,lastSyncedAt:null},C=JSON.stringify({conversation:E,interactions:S},null,2);await Iw(f,C),await Ok(c,`Sync conversation: ${s.title} (${n})`),await jk(c),await o(n,{lastSyncedAt:new Date}),i(n,"idle"),dt.success("Conversation synced successfully (pushed).")}else if(b&&b>_){dt.info("Remote changes detected. Updating local conversation...");const S={...v.conversation,lastSyncedAt:new Date};await Gt.saveConversation(S),await Gt.deleteInteractionsForConversation(n);const E=v.interactions.map(C=>Gt.saveInteraction({...C,conversationId:n}));await Promise.all(E),e(C=>{const k=C.conversations.findIndex(O=>O.id===n);k!==-1&&(C.conversations[k]=S)}),t().selectedItemId===n&&t().selectedItemType==="conversation"&&await yr.getState().loadInteractions(n),i(n,"idle"),dt.success("Conversation synced successfully (pulled).")}else dt.info("Conversation already up-to-date."),await o(n,{lastSyncedAt:new Date}),i(n,"idle")}catch(g){console.error(`Sync failed for conversation ${n}:`,g);const v=g instanceof Error?g.message:String(g);dt.error(`Sync failed: ${v}`),i(n,"error",v)}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},getTopLevelProjectId:(n,r)=>{if(!n||!r)return null;if(r==="conversation"){const i=t().getConversationById(n);n=(i==null?void 0:i.projectId)??null,r="project"}if(r!=="project"||!n)return null;let a=t().getProjectById(n);for(;a!=null&&a.parentId;){const i=t().getProjectById(a.parentId);if(!i)return a.id;a=i}return(a==null?void 0:a.id)??null},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const o=t().getConversationById(r);if(!o){console.warn("Cannot update tool settings: Selected conversation not found.");return}const s=o.metadata??{},u={...s};n.enabledTools!==void 0&&(u.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(u.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(u)!==JSON.stringify(s)||!o.metadata)&&await i(r,{metadata:u})}}))),ci=Bl(zl(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})}})));var uM="vercel.ai.error",$re=Symbol.for(uM),cM,Bre=class dM extends Error{constructor({name:t,message:n,cause:r}){super(n),this[cM]=!0,this.name=t,this.cause=r}static isInstance(t){return dM.hasMarker(t,uM)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};cM=$re;var xn=Bre,fM="AI_APICallError",hM=`vercel.ai.error.${fM}`,zre=Symbol.for(hM),pM,pa=class extends xn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:fM,message:t,cause:s}),this[pM]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return xn.hasMarker(t,hM)}};pM=zre;var mM="AI_EmptyResponseBodyError",gM=`vercel.ai.error.${mM}`,Ure=Symbol.for(gM),yM,Mk=class extends xn{constructor({message:t="Empty response body"}={}){super({name:mM,message:t}),this[yM]=!0}static isInstance(t){return xn.hasMarker(t,gM)}};yM=Ure;function ig(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var bM="AI_InvalidArgumentError",vM=`vercel.ai.error.${bM}`,qre=Symbol.for(vM),wM,Pk=class extends xn{constructor({message:t,cause:n,argument:r}){super({name:bM,message:t,cause:n}),this[wM]=!0,this.argument=r}static isInstance(t){return xn.hasMarker(t,vM)}};wM=qre;var _M="AI_InvalidPromptError",xM=`vercel.ai.error.${_M}`,Hre=Symbol.for(xM),SM,vl=class extends xn{constructor({prompt:t,message:n,cause:r}){super({name:_M,message:`Invalid prompt: ${n}`,cause:r}),this[SM]=!0,this.prompt=t}static isInstance(t){return xn.hasMarker(t,xM)}};SM=Hre;var EM="AI_InvalidResponseDataError",CM=`vercel.ai.error.${EM}`,Vre=Symbol.for(CM),kM,Uf=class extends xn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:EM,message:n}),this[kM]=!0,this.data=t}static isInstance(t){return xn.hasMarker(t,CM)}};kM=Vre;var AM="AI_JSONParseError",TM=`vercel.ai.error.${AM}`,Gre=Symbol.for(TM),RM,tc=class extends xn{constructor({text:t,cause:n}){super({name:AM,message:`JSON parsing failed: Text: ${t}.
Error message: ${ig(n)}`,cause:n}),this[RM]=!0,this.text=t}static isInstance(t){return xn.hasMarker(t,TM)}};RM=Gre;var NM="AI_LoadAPIKeyError",IM=`vercel.ai.error.${NM}`,Wre=Symbol.for(IM),OM,Xy=class extends xn{constructor({message:t}){super({name:NM,message:t}),this[OM]=!0}static isInstance(t){return xn.hasMarker(t,IM)}};OM=Wre;var DM="AI_TooManyEmbeddingValuesForCallError",jM=`vercel.ai.error.${DM}`,Kre=Symbol.for(jM),MM,Fk=class extends xn{constructor(t){super({name:DM,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[MM]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return xn.hasMarker(t,jM)}};MM=Kre;var PM="AI_TypeValidationError",FM=`vercel.ai.error.${PM}`,Zre=Symbol.for(FM),LM,Yre=class fE extends xn{constructor({value:t,cause:n}){super({name:PM,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${ig(n)}`,cause:n}),this[LM]=!0,this.value=t}static isInstance(t){return xn.hasMarker(t,FM)}static wrap({value:t,cause:n}){return fE.isInstance(n)&&n.value===t?n:new fE({value:t,cause:n})}};LM=Zre;var nc=Yre,$M="AI_UnsupportedFunctionalityError",BM=`vercel.ai.error.${$M}`,Xre=Symbol.for(BM),zM,_r=class extends xn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:$M,message:n}),this[zM]=!0,this.functionality=t}static isInstance(t){return xn.hasMarker(t,BM)}};zM=Xre;let Jre=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Zc={exports:{}},G4;function Qre(){if(G4)return Zc.exports;G4=1;const e=typeof Wt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,u,c){c==null&&u!==null&&typeof u=="object"&&(c=u,u=void 0),e&&Wt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const f=JSON.parse(s,u);if(f===null||typeof f!="object")return f;const h=c&&c.protoAction||"error",p=c&&c.constructorAction||"error";if(h==="ignore"&&p==="ignore")return f;if(h!=="ignore"&&p!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return f}else if(h!=="ignore"&&p==="ignore"){if(t.test(s)===!1)return f}else if(n.test(s)===!1)return f;return a(f,{protoAction:h,constructorAction:p,safe:c&&c.safe})}function a(s,{protoAction:u="error",constructorAction:c="error",safe:f}={}){let h=[s];for(;h.length;){const p=h;h=[];for(const g of p){if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(f===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const b=g[v];b&&typeof b=="object"&&h.push(b)}}}return s}function i(s,u,c){const f=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,c)}finally{Error.stackTraceLimit=f}}function o(s,u){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Zc.exports=i,Zc.exports.default=i,Zc.exports.parse=i,Zc.exports.safeParse=o,Zc.exports.scan=a,Zc.exports}var eae=Qre();const ns=ei(eae);var tae={};function Fs(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function nae(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function rae(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function aae(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),p=f+1,g=p<u.length&&u[p]===" "?u.slice(p+1):u.slice(p);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=iae(e,u);e=h;for(let p=0;p<f.length;p++)i(f[p],c)},flush(u){i(e,u),o(u)}})}function iae(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function og(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var kd=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Jre(n,t);if(e==null)return a;if(n.includes(r))throw new Pk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},As=kd();function oae(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function sae(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function pb(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function lae({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Xy({message:`${r} API key must be a string.`});if(typeof Wr>"u")throw new Xy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=tae[t],e==null)throw new Xy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Xy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var ev=Symbol.for("vercel.ai.validator");function uae(e){return{[ev]:!0,validate:e}}function cae(e){return typeof e=="object"&&e!==null&&ev in e&&e[ev]===!0&&"validate"in e}function dae(e){return cae(e)?e:fae(e)}function fae(e){return uae(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function hae({value:e,schema:t}){const n=Fh({value:e,schema:t});if(!n.success)throw nc.wrap({value:e,cause:n.error});return n.value}function Fh({value:e,schema:t}){const n=dae(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:nc.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:nc.wrap({value:e,cause:r})}}}function pae({text:e,schema:t}){try{const n=ns.parse(e);return t==null?n:hae({value:n,schema:t})}catch(n){throw tc.isInstance(n)||nc.isInstance(n)?n:new tc({text:e,cause:n})}}function ld({text:e,schema:t}){try{const n=ns.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Fh({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:tc.isInstance(n)?n:new tc({text:e,cause:n})}}}function W4(e){try{return ns.parse(e),!0}catch{return!1}}function mae({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Fh({value:t[e],schema:n});if(!r.success)throw new Pk({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var gae=()=>globalThis.fetch,Zo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>yae({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),yae=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=gae()})=>{try{const s=await o(e,{method:"POST",headers:sae(t),body:n.content,signal:i}),u=og(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw pb(f)||pa.isInstance(f)?f:new pa({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(pb(c)||pa.isInstance(c))?c:new pa({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(pb(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new pa({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},UM=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=og(r);if(o.trim()==="")return{responseHeaders:s,value:new pa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=pae({text:o,schema:e});return{responseHeaders:s,value:new pa({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new pa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Lk=e=>async({response:t})=>{const n=og(t);if(t.body==null)throw new Mk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(aae()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(ld({text:r,schema:e}))}}))}},Ad=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=ld({text:a,schema:e}),o=og(t);if(!i.success)throw new pa({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:bae,atob:vae}=globalThis;function qM(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=vae(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function uh(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return bae(t)}function HM(e){return e==null?void 0:e.replace(/\/$/,"")}const wae=Symbol("Let zodToJsonSchema decide on which parser to use"),K4={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},_ae=e=>typeof e=="string"?{...K4,name:e}:{...K4,...e},xae=e=>{const t=_ae(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function VM(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function cr(e,t,n,r,a){e[t]=n,VM(e,t,r,a)}var Yn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Yn||(Yn={}));var hE;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(hE||(hE={}));const Yt=Yn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xl=e=>{switch(typeof e){case"undefined":return Yt.undefined;case"string":return Yt.string;case"number":return isNaN(e)?Yt.nan:Yt.number;case"boolean":return Yt.boolean;case"function":return Yt.function;case"bigint":return Yt.bigint;case"symbol":return Yt.symbol;case"object":return Array.isArray(e)?Yt.array:e===null?Yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Yt.promise:typeof Map<"u"&&e instanceof Map?Yt.map:typeof Set<"u"&&e instanceof Set?Yt.set:typeof Date<"u"&&e instanceof Date?Yt.date:Yt.object;default:return Yt.unknown}},Rt=Yn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Sae=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Zi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(n(o))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}};return a(this),r}static assert(t){if(!(t instanceof Zi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Yn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Zi.create=e=>new Zi(e);const ch=(e,t)=>{let n;switch(e.code){case Rt.invalid_type:e.received===Yt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Rt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Yn.jsonStringifyReplacer)}`;break;case Rt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Yn.joinValues(e.keys,", ")}`;break;case Rt.invalid_union:n="Invalid input";break;case Rt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Yn.joinValues(e.options)}`;break;case Rt.invalid_enum_value:n=`Invalid enum value. Expected ${Yn.joinValues(e.options)}, received '${e.received}'`;break;case Rt.invalid_arguments:n="Invalid function arguments";break;case Rt.invalid_return_type:n="Invalid function return type";break;case Rt.invalid_date:n="Invalid date";break;case Rt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Yn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Rt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Rt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Rt.custom:n="Invalid input";break;case Rt.invalid_intersection_types:n="Intersection results could not be merged";break;case Rt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Rt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Yn.assertNever(e)}return{message:n}};let GM=ch;function Eae(e){GM=e}function tv(){return GM}const nv=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)s=c(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},Cae=[];function Kt(e,t){const n=tv(),r=nv({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===ch?void 0:ch].filter(a=>!!a)});e.common.issues.push(r)}class Ja{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return vn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Ja.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return vn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const vn=Object.freeze({status:"aborted"}),Pf=e=>({status:"dirty",value:e}),fi=e=>({status:"valid",value:e}),pE=e=>e.status==="aborted",mE=e=>e.status==="dirty",ud=e=>e.status==="valid",Vm=e=>typeof Promise<"u"&&e instanceof Promise;function rv(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function WM(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var an;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(an||(an={}));var fm,hm;class Ls{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Z4=(e,t)=>{if(ud(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Zi(e.common.issues);return this._error=n,this._error}}};function Tn(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var u,c;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??s.defaultError}:typeof s.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:s.defaultError}},description:a}}class Fn{get description(){return this._def.description}_getType(t){return xl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:xl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ja,ctx:{common:t.parent.common,data:t.data,parsedType:xl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Vm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return Z4(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return ud(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>ud(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(Vm(a)?a:Promise.resolve(a));return Z4(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:Rt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Yo({schema:this,typeName:Mt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ho.create(this,this._def)}nullable(){return oc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qo.create(this)}promise(){return fh.create(this,this._def)}or(t){return Zm.create([this,t],this._def)}and(t){return Ym.create(this,t,this._def)}transform(t){return new Yo({...Tn(this._def),schema:this,typeName:Mt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new t0({...Tn(this._def),innerType:this,defaultValue:n,typeName:Mt.ZodDefault})}brand(){return new $k({typeName:Mt.ZodBranded,type:this,...Tn(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new n0({...Tn(this._def),innerType:this,catchValue:n,typeName:Mt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return sg.create(this,t)}readonly(){return r0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const kae=/^c[^\s-]{8,}$/i,Aae=/^[0-9a-z]+$/,Tae=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Rae=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Nae=/^[a-z0-9_-]{21}$/i,Iae=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Oae=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Dae=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jae="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let WS;const Mae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Pae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Fae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Lae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$ae=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Bae=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,KM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zae=new RegExp(`^${KM}$`);function ZM(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Uae(e){return new RegExp(`^${ZM(e)}$`)}function YM(e){let t=`${KM}T${ZM(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function qae(e,t){return!!((t==="v4"||!t)&&Mae.test(e)||(t==="v6"||!t)&&Fae.test(e))}function Hae(e,t){if(!Iae.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function Vae(e,t){return!!((t==="v4"||!t)&&Pae.test(e)||(t==="v6"||!t)&&Lae.test(e))}class Bo extends Fn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Yt.string){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.string,received:i.parsedType}),vn}const r=new Ja;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Dae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"email",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")WS||(WS=new RegExp(jae,"u")),WS.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"emoji",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Rae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"uuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Nae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"nanoid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")kae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Aae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid2",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Tae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ulid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Kt(a,{validation:"url",code:Rt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"regex",code:Rt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?YM(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?zae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?Uae(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?Oae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"duration",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?qae(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ip",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?Hae(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"jwt",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?Vae(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cidr",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?$ae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?Bae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64url",code:Rt.invalid_string,message:i.message}),r.dirty()):Yn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Rt.invalid_string,...an.errToObj(r)})}_addCheck(t){return new Bo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...an.errToObj(t)})}url(t){return this._addCheck({kind:"url",...an.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...an.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...an.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...an.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...an.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...an.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...an.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...an.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...an.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...an.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...an.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...an.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...an.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...an.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...an.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...an.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...an.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...an.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...an.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...an.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...an.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...an.errToObj(n)})}nonempty(t){return this.min(1,an.errToObj(t))}trim(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Bo.create=e=>{var t;return new Bo({checks:[],typeName:Mt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Tn(e)})};function Gae(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class rc extends Fn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Yt.number){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.number,received:i.parsedType}),vn}let r;const a=new Ja;for(const i of this._def.checks)i.kind==="int"?Yn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?Gae(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_finite,message:i.message}),a.dirty()):Yn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,an.toString(n))}gt(t,n){return this.setLimit("min",t,!1,an.toString(n))}lte(t,n){return this.setLimit("max",t,!0,an.toString(n))}lt(t,n){return this.setLimit("max",t,!1,an.toString(n))}setLimit(t,n,r,a){return new rc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:an.toString(a)}]})}_addCheck(t){return new rc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:an.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:an.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:an.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:an.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:an.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:an.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:an.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:an.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:an.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Yn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}rc.create=e=>new rc({checks:[],typeName:Mt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Tn(e)});class ac extends Fn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Yt.bigint)return this._getInvalidInput(t);let r;const a=new Ja;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Yn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.bigint,received:n.parsedType}),vn}gte(t,n){return this.setLimit("min",t,!0,an.toString(n))}gt(t,n){return this.setLimit("min",t,!1,an.toString(n))}lte(t,n){return this.setLimit("max",t,!0,an.toString(n))}lt(t,n){return this.setLimit("max",t,!1,an.toString(n))}setLimit(t,n,r,a){return new ac({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:an.toString(a)}]})}_addCheck(t){return new ac({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:an.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:an.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:an.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:an.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:an.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ac.create=e=>{var t;return new ac({checks:[],typeName:Mt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Tn(e)})};class Gm extends Fn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Yt.boolean){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.boolean,received:r.parsedType}),vn}return fi(t.data)}}Gm.create=e=>new Gm({typeName:Mt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Tn(e)});class cd extends Fn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Yt.date){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.date,received:i.parsedType}),vn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_date}),vn}const r=new Ja;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Yn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new cd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:an.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:an.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}cd.create=e=>new cd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Mt.ZodDate,...Tn(e)});class av extends Fn{_parse(t){if(this._getType(t)!==Yt.symbol){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.symbol,received:r.parsedType}),vn}return fi(t.data)}}av.create=e=>new av({typeName:Mt.ZodSymbol,...Tn(e)});class Wm extends Fn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.undefined,received:r.parsedType}),vn}return fi(t.data)}}Wm.create=e=>new Wm({typeName:Mt.ZodUndefined,...Tn(e)});class Km extends Fn{_parse(t){if(this._getType(t)!==Yt.null){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.null,received:r.parsedType}),vn}return fi(t.data)}}Km.create=e=>new Km({typeName:Mt.ZodNull,...Tn(e)});class dh extends Fn{constructor(){super(...arguments),this._any=!0}_parse(t){return fi(t.data)}}dh.create=e=>new dh({typeName:Mt.ZodAny,...Tn(e)});class ad extends Fn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return fi(t.data)}}ad.create=e=>new ad({typeName:Mt.ZodUnknown,...Tn(e)});class Fl extends Fn{_parse(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.never,received:n.parsedType}),vn}}Fl.create=e=>new Fl({typeName:Mt.ZodNever,...Tn(e)});class iv extends Fn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.void,received:r.parsedType}),vn}return fi(t.data)}}iv.create=e=>new iv({typeName:Mt.ZodVoid,...Tn(e)});class qo extends Fn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==Yt.array)return Kt(n,{code:Rt.invalid_type,expected:Yt.array,received:n.parsedType}),vn;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Kt(n,{code:o?Rt.too_big:Rt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Kt(n,{code:Rt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Kt(n,{code:Rt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new Ls(n,o,n.path,s)))).then(o=>Ja.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new Ls(n,o,n.path,s)));return Ja.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new qo({...this._def,minLength:{value:t,message:an.toString(n)}})}max(t,n){return new qo({...this._def,maxLength:{value:t,message:an.toString(n)}})}length(t,n){return new qo({...this._def,exactLength:{value:t,message:an.toString(n)}})}nonempty(t){return this.min(1,t)}}qo.create=(e,t)=>new qo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Mt.ZodArray,...Tn(t)});function Nf(e){if(e instanceof zr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ho.create(Nf(r))}return new zr({...e._def,shape:()=>t})}else return e instanceof qo?new qo({...e._def,type:Nf(e.element)}):e instanceof Ho?Ho.create(Nf(e.unwrap())):e instanceof oc?oc.create(Nf(e.unwrap())):e instanceof $s?$s.create(e.items.map(t=>Nf(t))):e}class zr extends Fn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Yn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==Yt.object){const c=this._getOrReturnCtx(t);return Kt(c,{code:Rt.invalid_type,expected:Yt.object,received:c.parsedType}),vn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Fl&&this._def.unknownKeys==="strip"))for(const c in a.data)o.includes(c)||s.push(c);const u=[];for(const c of o){const f=i[c],h=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new Ls(a,h,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Fl){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of s)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")s.length>0&&(Kt(a,{code:Rt.unrecognized_keys,keys:s}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of s){const h=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new Ls(a,h,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const h=await f.key,p=await f.value;c.push({key:h,value:p,alwaysSet:f.alwaysSet})}return c}).then(c=>Ja.mergeObjectSync(r,c)):Ja.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return an.errToObj,new zr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const u=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=an.errToObj(t).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new zr({...this._def,unknownKeys:"strip"})}passthrough(){return new zr({...this._def,unknownKeys:"passthrough"})}extend(t){return new zr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new zr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Mt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new zr({...this._def,catchall:t})}pick(t){const n={};return Yn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}omit(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}deepPartial(){return Nf(this)}partial(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new zr({...this._def,shape:()=>n})}required(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ho;)i=i._def.innerType;n[r]=i}}),new zr({...this._def,shape:()=>n})}keyof(){return XM(Yn.objectKeys(this.shape))}}zr.create=(e,t)=>new zr({shape:()=>e,unknownKeys:"strip",catchall:Fl.create(),typeName:Mt.ZodObject,...Tn(t)});zr.strictCreate=(e,t)=>new zr({shape:()=>e,unknownKeys:"strict",catchall:Fl.create(),typeName:Mt.ZodObject,...Tn(t)});zr.lazycreate=(e,t)=>new zr({shape:e,unknownKeys:"strip",catchall:Fl.create(),typeName:Mt.ZodObject,...Tn(t)});class Zm extends Fn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new Zi(s.ctx.common.issues));return Kt(n,{code:Rt.invalid_union,unionErrors:o}),vn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(u=>new Zi(u));return Kt(n,{code:Rt.invalid_union,unionErrors:s}),vn}}get options(){return this._def.options}}Zm.create=(e,t)=>new Zm({options:e,typeName:Mt.ZodUnion,...Tn(t)});const bl=e=>e instanceof Jm?bl(e.schema):e instanceof Yo?bl(e.innerType()):e instanceof Qm?[e.value]:e instanceof ic?e.options:e instanceof e0?Yn.objectValues(e.enum):e instanceof t0?bl(e._def.innerType):e instanceof Wm?[void 0]:e instanceof Km?[null]:e instanceof Ho?[void 0,...bl(e.unwrap())]:e instanceof oc?[null,...bl(e.unwrap())]:e instanceof $k||e instanceof r0?bl(e.unwrap()):e instanceof n0?bl(e._def.innerType):[];class Dw extends Fn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.object)return Kt(n,{code:Rt.invalid_type,expected:Yt.object,received:n.parsedType}),vn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Kt(n,{code:Rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),vn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=bl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new Dw({typeName:Mt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Tn(r)})}}function gE(e,t){const n=xl(e),r=xl(t);if(e===t)return{valid:!0,data:e};if(n===Yt.object&&r===Yt.object){const a=Yn.objectKeys(t),i=Yn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const u=gE(e[s],t[s]);if(!u.valid)return{valid:!1};o[s]=u.data}return{valid:!0,data:o}}else if(n===Yt.array&&r===Yt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],u=gE(o,s);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return n===Yt.date&&r===Yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ym extends Fn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(pE(i)||pE(o))return vn;const s=gE(i.value,o.value);return s.valid?((mE(i)||mE(o))&&n.dirty(),{status:n.value,value:s.data}):(Kt(r,{code:Rt.invalid_intersection_types}),vn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ym.create=(e,t,n)=>new Ym({left:e,right:t,typeName:Mt.ZodIntersection,...Tn(n)});class $s extends Fn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.array)return Kt(r,{code:Rt.invalid_type,expected:Yt.array,received:r.parsedType}),vn;if(r.data.length<this._def.items.length)return Kt(r,{code:Rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),vn;!this._def.rest&&r.data.length>this._def.items.length&&(Kt(r,{code:Rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new Ls(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Ja.mergeArray(n,o)):Ja.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new $s({...this._def,rest:t})}}$s.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $s({items:e,typeName:Mt.ZodTuple,rest:null,...Tn(t)})};class Xm extends Fn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.object)return Kt(r,{code:Rt.invalid_type,expected:Yt.object,received:r.parsedType}),vn;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new Ls(r,s,r.path,s)),value:o._parse(new Ls(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Ja.mergeObjectAsync(n,a):Ja.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Fn?new Xm({keyType:t,valueType:n,typeName:Mt.ZodRecord,...Tn(r)}):new Xm({keyType:Bo.create(),valueType:t,typeName:Mt.ZodRecord,...Tn(n)})}}class ov extends Fn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.map)return Kt(r,{code:Rt.invalid_type,expected:Yt.map,received:r.parsedType}),vn;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,u],c)=>({key:a._parse(new Ls(r,s,r.path,[c,"key"])),value:i._parse(new Ls(r,u,r.path,[c,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of o){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const u of o){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}}}}ov.create=(e,t,n)=>new ov({valueType:t,keyType:e,typeName:Mt.ZodMap,...Tn(n)});class dd extends Fn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.set)return Kt(r,{code:Rt.invalid_type,expected:Yt.set,received:r.parsedType}),vn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Kt(r,{code:Rt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Kt(r,{code:Rt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const c=new Set;for(const f of u){if(f.status==="aborted")return vn;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const s=[...r.data.values()].map((u,c)=>i._parse(new Ls(r,u,r.path,c)));return r.common.async?Promise.all(s).then(u=>o(u)):o(s)}min(t,n){return new dd({...this._def,minSize:{value:t,message:an.toString(n)}})}max(t,n){return new dd({...this._def,maxSize:{value:t,message:an.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}dd.create=(e,t)=>new dd({valueType:e,minSize:null,maxSize:null,typeName:Mt.ZodSet,...Tn(t)});class qf extends Fn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.function)return Kt(n,{code:Rt.invalid_type,expected:Yt.function,received:n.parsedType}),vn;function r(s,u){return nv({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,tv(),ch].filter(c=>!!c),issueData:{code:Rt.invalid_arguments,argumentsError:u}})}function a(s,u){return nv({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,tv(),ch].filter(c=>!!c),issueData:{code:Rt.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof fh){const s=this;return fi(async function(...u){const c=new Zi([]),f=await s._def.args.parseAsync(u,i).catch(g=>{throw c.addIssue(r(u,g)),c}),h=await Reflect.apply(o,this,f);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(a(h,g)),c})})}else{const s=this;return fi(function(...u){const c=s._def.args.safeParse(u,i);if(!c.success)throw new Zi([r(u,c.error)]);const f=Reflect.apply(o,this,c.data),h=s._def.returns.safeParse(f,i);if(!h.success)throw new Zi([a(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new qf({...this._def,args:$s.create(t).rest(ad.create())})}returns(t){return new qf({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new qf({args:t||$s.create([]).rest(ad.create()),returns:n||ad.create(),typeName:Mt.ZodFunction,...Tn(r)})}}class Jm extends Fn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Jm.create=(e,t)=>new Jm({getter:e,typeName:Mt.ZodLazy,...Tn(t)});class Qm extends Fn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Kt(n,{received:n.data,code:Rt.invalid_literal,expected:this._def.value}),vn}return{status:"valid",value:t.data}}get value(){return this._def.value}}Qm.create=(e,t)=>new Qm({value:e,typeName:Mt.ZodLiteral,...Tn(t)});function XM(e,t){return new ic({values:e,typeName:Mt.ZodEnum,...Tn(t)})}class ic extends Fn{constructor(){super(...arguments),fm.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{expected:Yn.joinValues(r),received:n.parsedType,code:Rt.invalid_type}),vn}if(rv(this,fm)||WM(this,fm,new Set(this._def.values)),!rv(this,fm).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{received:n.data,code:Rt.invalid_enum_value,options:r}),vn}return fi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ic.create(t,{...this._def,...n})}exclude(t,n=this._def){return ic.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}fm=new WeakMap;ic.create=XM;class e0 extends Fn{constructor(){super(...arguments),hm.set(this,void 0)}_parse(t){const n=Yn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Yt.string&&r.parsedType!==Yt.number){const a=Yn.objectValues(n);return Kt(r,{expected:Yn.joinValues(a),received:r.parsedType,code:Rt.invalid_type}),vn}if(rv(this,hm)||WM(this,hm,new Set(Yn.getValidEnumValues(this._def.values))),!rv(this,hm).has(t.data)){const a=Yn.objectValues(n);return Kt(r,{received:r.data,code:Rt.invalid_enum_value,options:a}),vn}return fi(t.data)}get enum(){return this._def.values}}hm=new WeakMap;e0.create=(e,t)=>new e0({values:e,typeName:Mt.ZodNativeEnum,...Tn(t)});class fh extends Fn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.promise&&n.common.async===!1)return Kt(n,{code:Rt.invalid_type,expected:Yt.promise,received:n.parsedType}),vn;const r=n.parsedType===Yt.promise?n.data:Promise.resolve(n.data);return fi(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}fh.create=(e,t)=>new fh({type:e,typeName:Mt.ZodPromise,...Tn(t)});class Yo extends Fn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Kt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return vn;const u=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return u.status==="aborted"?vn:u.status==="dirty"||n.value==="dirty"?Pf(u.value):u});{if(n.value==="aborted")return vn;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?vn:s.status==="dirty"||n.value==="dirty"?Pf(s.value):s}}if(a.type==="refinement"){const o=s=>{const u=a.refinement(s,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ud(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ud(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Yn.assertNever(a)}}Yo.create=(e,t,n)=>new Yo({schema:e,typeName:Mt.ZodEffects,effect:t,...Tn(n)});Yo.createWithPreprocess=(e,t,n)=>new Yo({schema:t,effect:{type:"preprocess",transform:e},typeName:Mt.ZodEffects,...Tn(n)});class Ho extends Fn{_parse(t){return this._getType(t)===Yt.undefined?fi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ho.create=(e,t)=>new Ho({innerType:e,typeName:Mt.ZodOptional,...Tn(t)});class oc extends Fn{_parse(t){return this._getType(t)===Yt.null?fi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}oc.create=(e,t)=>new oc({innerType:e,typeName:Mt.ZodNullable,...Tn(t)});class t0 extends Fn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Yt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}t0.create=(e,t)=>new t0({innerType:e,typeName:Mt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Tn(t)});class n0 extends Fn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Vm(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Zi(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Zi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}n0.create=(e,t)=>new n0({innerType:e,typeName:Mt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Tn(t)});class sv extends Fn{_parse(t){if(this._getType(t)!==Yt.nan){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.nan,received:r.parsedType}),vn}return{status:"valid",value:t.data}}}sv.create=e=>new sv({typeName:Mt.ZodNaN,...Tn(e)});const Wae=Symbol("zod_brand");class $k extends Fn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class sg extends Fn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?vn:i.status==="dirty"?(n.dirty(),Pf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?vn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new sg({in:t,out:n,typeName:Mt.ZodPipeline})}}class r0 extends Fn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(ud(a)&&(a.value=Object.freeze(a.value)),a);return Vm(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}r0.create=(e,t)=>new r0({innerType:e,typeName:Mt.ZodReadonly,...Tn(t)});function Y4(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function JM(e,t={},n){return e?dh.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(u=>{var c,f;if(!u){const h=Y4(t,r),p=(f=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&f!==void 0?f:!0;a.addIssue({code:"custom",...h,fatal:p})}});if(!s){const u=Y4(t,r),c=(o=(i=u.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...u,fatal:c})}}):dh.create()}const Kae={object:zr.lazycreate};var Mt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Mt||(Mt={}));const Zae=(e,t={message:`Input not instance of ${e.name}`})=>JM(n=>n instanceof e,t),QM=Bo.create,e5=rc.create,Yae=sv.create,Xae=ac.create,t5=Gm.create,Jae=cd.create,Qae=av.create,eie=Wm.create,tie=Km.create,nie=dh.create,rie=ad.create,aie=Fl.create,iie=iv.create,oie=qo.create,sie=zr.create,lie=zr.strictCreate,uie=Zm.create,cie=Dw.create,die=Ym.create,fie=$s.create,hie=Xm.create,pie=ov.create,mie=dd.create,gie=qf.create,yie=Jm.create,bie=Qm.create,vie=ic.create,wie=e0.create,_ie=fh.create,X4=Yo.create,xie=Ho.create,Sie=oc.create,Eie=Yo.createWithPreprocess,Cie=sg.create,kie=()=>QM().optional(),Aie=()=>e5().optional(),Tie=()=>t5().optional(),Rie={string:e=>Bo.create({...e,coerce:!0}),number:e=>rc.create({...e,coerce:!0}),boolean:e=>Gm.create({...e,coerce:!0}),bigint:e=>ac.create({...e,coerce:!0}),date:e=>cd.create({...e,coerce:!0})},Nie=vn;var $=Object.freeze({__proto__:null,defaultErrorMap:ch,setErrorMap:Eae,getErrorMap:tv,makeIssue:nv,EMPTY_PATH:Cae,addIssueToContext:Kt,ParseStatus:Ja,INVALID:vn,DIRTY:Pf,OK:fi,isAborted:pE,isDirty:mE,isValid:ud,isAsync:Vm,get util(){return Yn},get objectUtil(){return hE},ZodParsedType:Yt,getParsedType:xl,ZodType:Fn,datetimeRegex:YM,ZodString:Bo,ZodNumber:rc,ZodBigInt:ac,ZodBoolean:Gm,ZodDate:cd,ZodSymbol:av,ZodUndefined:Wm,ZodNull:Km,ZodAny:dh,ZodUnknown:ad,ZodNever:Fl,ZodVoid:iv,ZodArray:qo,ZodObject:zr,ZodUnion:Zm,ZodDiscriminatedUnion:Dw,ZodIntersection:Ym,ZodTuple:$s,ZodRecord:Xm,ZodMap:ov,ZodSet:dd,ZodFunction:qf,ZodLazy:Jm,ZodLiteral:Qm,ZodEnum:ic,ZodNativeEnum:e0,ZodPromise:fh,ZodEffects:Yo,ZodTransformer:Yo,ZodOptional:Ho,ZodNullable:oc,ZodDefault:t0,ZodCatch:n0,ZodNaN:sv,BRAND:Wae,ZodBranded:$k,ZodPipeline:sg,ZodReadonly:r0,custom:JM,Schema:Fn,ZodSchema:Fn,late:Kae,get ZodFirstPartyTypeKind(){return Mt},coerce:Rie,any:nie,array:oie,bigint:Xae,boolean:t5,date:Jae,discriminatedUnion:cie,effect:X4,enum:vie,function:gie,instanceof:Zae,intersection:die,lazy:yie,literal:bie,map:pie,nan:Yae,nativeEnum:wie,never:aie,null:tie,nullable:Sie,number:e5,object:sie,oboolean:Tie,onumber:Aie,optional:xie,ostring:kie,pipeline:Cie,preprocess:Eie,promise:_ie,record:hie,set:mie,strictObject:lie,string:QM,symbol:Qae,transformer:X4,tuple:fie,undefined:eie,union:uie,unknown:rie,void:iie,NEVER:Nie,ZodIssueCode:Rt,quotelessJson:Sae,ZodError:Zi});function Iie(){return{}}function Oie(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Mt.ZodAny&&(n.items=nr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&cr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&cr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(cr(n,"minItems",e.exactLength.value,e.exactLength.message,t),cr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function Die(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?cr(n,"minimum",r.value,r.message,t):cr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),cr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?cr(n,"maximum",r.value,r.message,t):cr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),cr(n,"maximum",r.value,r.message,t));break;case"multipleOf":cr(n,"multipleOf",r.value,r.message,t);break}return n}function jie(){return{type:"boolean"}}function n5(e,t){return nr(e.type._def,t)}const Mie=(e,t)=>nr(e.innerType._def,t);function r5(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>r5(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Pie(e,t)}}const Pie=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":cr(n,"minimum",r.value,r.message,t);break;case"max":cr(n,"maximum",r.value,r.message,t);break}return n};function Fie(e,t){return{...nr(e.innerType._def,t),default:e.defaultValue()}}function Lie(e,t){return t.effectStrategy==="input"?nr(e.schema._def,t):{}}function $ie(e){return{type:"string",enum:Array.from(e.values)}}const Bie=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function zie(e,t){const n=[nr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),nr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(Bie(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...u}=i;o=u}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function Uie(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let KS;const jo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(KS===void 0&&(KS=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),KS),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function a5(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":cr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":cr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Mo(n,"email",r.message,t);break;case"format:idn-email":Mo(n,"idn-email",r.message,t);break;case"pattern:zod":li(n,jo.email,r.message,t);break}break;case"url":Mo(n,"uri",r.message,t);break;case"uuid":Mo(n,"uuid",r.message,t);break;case"regex":li(n,r.regex,r.message,t);break;case"cuid":li(n,jo.cuid,r.message,t);break;case"cuid2":li(n,jo.cuid2,r.message,t);break;case"startsWith":li(n,RegExp(`^${ZS(r.value,t)}`),r.message,t);break;case"endsWith":li(n,RegExp(`${ZS(r.value,t)}$`),r.message,t);break;case"datetime":Mo(n,"date-time",r.message,t);break;case"date":Mo(n,"date",r.message,t);break;case"time":Mo(n,"time",r.message,t);break;case"duration":Mo(n,"duration",r.message,t);break;case"length":cr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),cr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{li(n,RegExp(ZS(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Mo(n,"ipv4",r.message,t),r.version!=="v4"&&Mo(n,"ipv6",r.message,t);break}case"base64url":li(n,jo.base64url,r.message,t);break;case"jwt":li(n,jo.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&li(n,jo.ipv4Cidr,r.message,t),r.version!=="v4"&&li(n,jo.ipv6Cidr,r.message,t);break}case"emoji":li(n,jo.emoji(),r.message,t);break;case"ulid":{li(n,jo.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Mo(n,"binary",r.message,t);break}case"contentEncoding:base64":{cr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{li(n,jo.base64,r.message,t);break}}break}case"nanoid":li(n,jo.nanoid,r.message,t)}return n}function ZS(e,t){return t.patternStrategy==="escape"?Hie(e):e}const qie=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Hie(e){let t="";for(let n=0;n<e.length;n++)qie.has(e[n])||(t+="\\"),t+=e[n];return t}function Mo(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):cr(e,"format",t,n,r)}function li(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:J4(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):cr(e,"pattern",J4(t,r),n,r)}function J4(e,t){var u;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let c=0;c<r.length;c++){if(i){a+=r[c],i=!1;continue}if(n.i){if(o){if(r[c].match(/[a-z]/)){s?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),s=!1):r[c+1]==="-"&&((u=r[c+2])!=null&&u.match(/[a-z]/))?(a+=r[c],s=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=o?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?i=!0:o&&r[c]==="]"?o=!1:!o&&r[c]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function i5(e,t){var r,a,i,o,s,u;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Mt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,f)=>({...c,[f]:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",f]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Mt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...f}=a5(e.keyType._def,t);return{...n,propertyNames:f}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===Mt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===Mt.ZodBranded&&e.keyType._def.type._def.typeName===Mt.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){const{type:c,...f}=n5(e.keyType._def,t);return{...n,propertyNames:f}}}return n}function Vie(e,t){if(t.mapStrategy==="record")return i5(e,t);const n=nr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Gie(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Wie(){return{not:{}}}function Kie(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const lv={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Zie(e,t){if(t.target==="openApi3")return Q4(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in lv&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=lv[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return Q4(e,t)}const Q4=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>nr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Yie(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:lv[e.innerType._def.typeName],nullable:!0}:{type:[lv[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=nr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=nr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Xie(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",VM(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?cr(n,"minimum",r.value,r.message,t):cr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),cr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?cr(n,"maximum",r.value,r.message,t):cr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),cr(n,"maximum",r.value,r.message,t));break;case"multipleOf":cr(n,"multipleOf",r.value,r.message,t);break}return n}function Jie(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let u=i[s];if(u===void 0||u._def===void 0)continue;let c=eoe(u);c&&n&&(u instanceof Ho&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),c=!1);const f=nr(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});f!==void 0&&(r.properties[s]=f,c||a.push(s))}a.length&&(r.required=a);const o=Qie(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Qie(e,t){if(e.catchall._def.typeName!=="ZodNever")return nr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function eoe(e){try{return e.isOptional()}catch{return!0}}const toe=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return nr(e.innerType._def,t);const n=nr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},noe=(e,t)=>{if(t.pipeStrategy==="input")return nr(e.in._def,t);if(t.pipeStrategy==="output")return nr(e.out._def,t);const n=nr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=nr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function roe(e,t){return nr(e.type._def,t)}function aoe(e,t){const r={type:"array",uniqueItems:!0,items:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&cr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&cr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function ioe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>nr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:nr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>nr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function ooe(){return{not:{}}}function soe(){return{}}const loe=(e,t)=>nr(e.innerType._def,t),uoe=(e,t,n)=>{switch(t){case Mt.ZodString:return a5(e,n);case Mt.ZodNumber:return Xie(e,n);case Mt.ZodObject:return Jie(e,n);case Mt.ZodBigInt:return Die(e,n);case Mt.ZodBoolean:return jie();case Mt.ZodDate:return r5(e,n);case Mt.ZodUndefined:return ooe();case Mt.ZodNull:return Kie(n);case Mt.ZodArray:return Oie(e,n);case Mt.ZodUnion:case Mt.ZodDiscriminatedUnion:return Zie(e,n);case Mt.ZodIntersection:return zie(e,n);case Mt.ZodTuple:return ioe(e,n);case Mt.ZodRecord:return i5(e,n);case Mt.ZodLiteral:return Uie(e,n);case Mt.ZodEnum:return $ie(e);case Mt.ZodNativeEnum:return Gie(e);case Mt.ZodNullable:return Yie(e,n);case Mt.ZodOptional:return toe(e,n);case Mt.ZodMap:return Vie(e,n);case Mt.ZodSet:return aoe(e,n);case Mt.ZodLazy:return()=>e.getter()._def;case Mt.ZodPromise:return roe(e,n);case Mt.ZodNaN:case Mt.ZodNever:return Wie();case Mt.ZodEffects:return Lie(e,n);case Mt.ZodAny:return Iie();case Mt.ZodUnknown:return soe();case Mt.ZodDefault:return Fie(e,n);case Mt.ZodBranded:return n5(e,n);case Mt.ZodReadonly:return loe(e,n);case Mt.ZodCatch:return Mie(e,n);case Mt.ZodPipeline:return noe(e,n);case Mt.ZodFunction:case Mt.ZodVoid:case Mt.ZodSymbol:return;default:return(r=>{})()}};function nr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(u!==wae)return u}if(r&&!n){const u=coe(r,t);if(u!==void 0)return u}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=uoe(e,e.typeName,t),o=typeof i=="function"?nr(i(),t):i;if(o&&foe(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return a.jsonSchema=o,u}return a.jsonSchema=o,o}const coe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:doe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},doe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},foe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),hoe=(e,t)=>{const n=xae(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,f])=>({...u,[c]:nr(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=nr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var a0={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},i0={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},o0={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},s0={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},l0={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},poe=[a0,i0,o0,s0,l0];a0.code+"",i0.code+"",o0.code+"",s0.code+"",l0.code+"";a0.name+"",a0.code,i0.name+"",i0.code,o0.name+"",o0.code,s0.name+"",s0.code,l0.name+"",l0.code;poe.map(e=>e.code);function moe(e){const t=["ROOT"];let n=-1,r=null;function a(u,c,f){switch(u){case'"':{n=c,t.pop(),t.push(f),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(f),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(f),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(f),t.push("INSIDE_ARRAY_START");break}}}function i(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function o(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let u=0;u<e.length;u++){const c=e[u];switch(t[t.length-1]){case"ROOT":a(c,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,u);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=u}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=u,t.pop();break}default:{n=u,a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}default:{n=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=u;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,u+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u)):n=u;break}}}let s=e.slice(0,n+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const f=e.substring(r,e.length);"true".startsWith(f)?s+="true".slice(f.length):"false".startsWith(f)?s+="false".slice(f.length):"null".startsWith(f)&&(s+="null".slice(f.length))}}return s}function goe(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=ld({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=ld({text:moe(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var yoe={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},boe={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},voe={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},woe={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},_oe={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},xoe={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},Soe={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},Eoe={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Coe={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},koe={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},Aoe={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},Toe={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},Roe={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},Noe={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},Ioe={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},Ooe={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},jw=[yoe,boe,voe,woe,_oe,xoe,Soe,Eoe,Coe,koe,Aoe,Toe,Roe,Noe,Ioe,Ooe];Object.fromEntries(jw.map(e=>[e.code,e]));Object.fromEntries(jw.map(e=>[e.name,e.code]));jw.map(e=>e.code);function Ga(e,t){const n=jw.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function Doe(e,t){var n;const r=(n=void 0)!=null?n:!1;return joe(hoe(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var yE=Symbol.for("vercel.ai.schema");function joe(e,{validate:t}={}){return{[yE]:!0,_type:void 0,[ev]:!0,jsonSchema:e,validate:t}}function Moe(e){return typeof e=="object"&&e!==null&&yE in e&&e[yE]===!0&&"jsonSchema"in e&&"validate"in e}function Mw(e){return Moe(e)?e:Doe(e)}const e6=globalThis||void 0||self;var Poe=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof e6=="object"?e6:{},rd="1.9.0",t6=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Foe(e){var t=new Set([e]),n=new Set,r=e.match(t6);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(u){return u===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(u){if(t.has(u))return!0;if(n.has(u))return!1;var c=u.match(t6);if(!c)return i(u);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||a.major!==f.major?i(u):a.major===0?a.minor===f.minor&&a.patch<=f.patch?o(u):i(u):a.minor<=f.minor?o(u):i(u)}}var Loe=Foe(rd),$oe=rd.split(".")[0],u0=Symbol.for("opentelemetry.js.api."+$oe),c0=Poe;function Bk(e,t,n,r){var a;r===void 0&&(r=!1);var i=c0[u0]=(a=c0[u0])!==null&&a!==void 0?a:{version:rd};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==rd){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+rd);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+rd+"."),!0}function d0(e){var t,n,r=(t=c0[u0])===null||t===void 0?void 0:t.version;if(!(!r||!Loe(r)))return(n=c0[u0])===null||n===void 0?void 0:n[e]}function zk(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+rd+".");var n=c0[u0];n&&delete n[e]}var Boe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},zoe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Uoe=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return sm("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return sm("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return sm("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return sm("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return sm("verbose",this._namespace,t)},e}();function sm(e,t,n){var r=d0("diag");if(r)return n.unshift(t),r[e].apply(r,zoe([],Boe(n),!1))}var qi;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(qi||(qi={}));function qoe(e,t){e<qi.NONE?e=qi.NONE:e>qi.ALL&&(e=qi.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",qi.ERROR),warn:n("warn",qi.WARN),info:n("info",qi.INFO),debug:n("debug",qi.DEBUG),verbose:n("verbose",qi.VERBOSE)}}var Hoe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Voe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Goe="diag",uv=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=d0("diag");if(s)return s[a].apply(s,Voe([],Hoe(i),!1))}}var n=this,r=function(a,i){var o,s,u;if(i===void 0&&(i={logLevel:qi.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var f=d0("diag"),h=qoe((s=i.logLevel)!==null&&s!==void 0?s:qi.INFO,a);if(f&&!i.suppressOverrideMessage){var p=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+p),h.warn("Current logger will overwrite one already registered from "+p)}return Bk("diag",h,n,!0)};n.setLogger=r,n.disable=function(){zk(Goe,n)},n.createComponentLogger=function(a){return new Uoe(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function Woe(e){return Symbol.for(e)}var Koe=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Zoe=new Koe,Yoe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Xoe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Joe=function(){function e(){}return e.prototype.active=function(){return Zoe},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,Xoe([r],Yoe(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Qoe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},ese=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},YS="context",tse=new Joe,o5=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Bk(YS,t,uv.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,ese([t,n,r],Qoe(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return d0(YS)||tse},e.prototype.disable=function(){this._getContextManager().disable(),zk(YS,uv.instance())},e}(),bE;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(bE||(bE={}));var s5="0000000000000000",l5="00000000000000000000000000000000",nse={traceId:l5,spanId:s5,traceFlags:bE.NONE},ym=function(){function e(t){t===void 0&&(t=nse),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),Uk=Woe("OpenTelemetry Context Key SPAN");function qk(e){return e.getValue(Uk)||void 0}function rse(){return qk(o5.getInstance().active())}function Hk(e,t){return e.setValue(Uk,t)}function ase(e){return e.deleteValue(Uk)}function ise(e,t){return Hk(e,new ym(t))}function u5(e){var t;return(t=qk(e))===null||t===void 0?void 0:t.spanContext()}var ose=/^([0-9a-f]{32})$/i,sse=/^[0-9a-f]{16}$/i;function lse(e){return ose.test(e)&&e!==l5}function use(e){return sse.test(e)&&e!==s5}function c5(e){return lse(e.traceId)&&use(e.spanId)}function cse(e){return new ym(e)}var XS=o5.getInstance(),d5=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=XS.active());var a=!!(n!=null&&n.root);if(a)return new ym;var i=r&&u5(r);return dse(i)&&c5(i)?new ym(i):new ym},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var u=o??XS.active(),c=this.startSpan(t,i,u),f=Hk(u,c);return XS.with(f,s,void 0,c)}},e}();function dse(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var fse=new d5,hse=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):fse},e}(),pse=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new d5},e}(),mse=new pse,n6=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new hse(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:mse},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),cv;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(cv||(cv={}));var JS="trace",gse=function(){function e(){this._proxyTracerProvider=new n6,this.wrapSpanContext=cse,this.isSpanContextValid=c5,this.deleteSpan=ase,this.getSpan=qk,this.getActiveSpan=rse,this.getSpanContext=u5,this.setSpan=Hk,this.setSpanContext=ise}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=Bk(JS,this._proxyTracerProvider,uv.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return d0(JS)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){zk(JS,uv.instance()),this._proxyTracerProvider=new n6},e}(),yse=gse.getInstance(),bse=Object.defineProperty,Vk=(e,t)=>{for(var n in t)bse(e,n,{get:t[n],enumerable:!0})};function dv(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function r6(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function a6({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:u}=await i.read();if(s)break;e.write(u)}}catch(s){throw s}finally{e.end()}})()}var f5="AI_InvalidArgumentError",h5=`vercel.ai.error.${f5}`,vse=Symbol.for(h5),p5,Fo=class extends xn{constructor({parameter:t,value:n,message:r}){super({name:f5,message:`Invalid argument for parameter ${t}: ${r}`}),this[p5]=!0,this.parameter=t,this.value=n}static isInstance(t){return xn.hasMarker(t,h5)}};p5=vse;var m5="AI_RetryError",g5=`vercel.ai.error.${m5}`,wse=Symbol.for(g5),y5,i6=class extends xn{constructor({message:e,reason:t,errors:n}){super({name:m5,message:e}),this[y5]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return xn.hasMarker(e,g5)}};y5=wse;var _se=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>b5(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function b5(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(pb(i)||t===0)throw i;const o=oae(i),s=[...a,i],u=s.length;if(u>t)throw new i6({message:`Failed after ${u} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&pa.isInstance(i)&&i.isRetryable===!0&&u<=t)return await rae(n),b5(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw u===1?i:new i6({message:`Failed after ${u} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function xse({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Fo({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Fo({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:_se({maxRetries:t})}}function vE({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function Sse({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var Ese={startSpan(){return Jy},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Jy);if(typeof n=="function")return n(Jy);if(typeof r=="function")return r(Jy)}},Jy={spanContext(){return Cse},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Cse={traceId:"",spanId:"",traceFlags:0};function kse({isEnabled:e=!1,tracer:t}={}){return e?t||yse.getTracer("ai"):Ese}function wE({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:cv.ERROR,message:o.message})):i.setStatus({code:cv.ERROR})}finally{i.end()}throw o}})}function Ff({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var Ase=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=uh(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=qM(this.base64Data)),this.uint8ArrayData}},Tse=class extends Ase{constructor(e){super(e),this.type="file"}},Rse=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function Nse(e){for(const t of Rse)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var v5="AI_NoObjectGeneratedError",w5=`vercel.ai.error.${v5}`,Ise=Symbol.for(w5),_5,o6=class extends xn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:v5,message:e,cause:t}),this[_5]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return xn.hasMarker(e,w5)}};_5=Ise;var x5="AI_DownloadError",S5=`vercel.ai.error.${x5}`,Ose=Symbol.for(S5),E5,QS=class extends xn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:x5,message:a,cause:r}),this[E5]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return xn.hasMarker(e,S5)}};E5=Ose;async function Dse({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new QS({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw QS.isInstance(a)?a:new QS({url:r,cause:a})}}var C5="AI_InvalidDataContentError",k5=`vercel.ai.error.${C5}`,jse=Symbol.for(k5),A5,s6=class extends xn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:C5,message:n,cause:t}),this[A5]=!0,this.content=e}static isInstance(e){return xn.hasMarker(e,k5)}};A5=jse;var T5=$.union([$.string(),$.instanceof(Uint8Array),$.instanceof(ArrayBuffer),$.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function R5(e){return typeof e=="string"?e:e instanceof ArrayBuffer?uh(new Uint8Array(e)):uh(e)}function fv(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return qM(e)}catch(t){throw new s6({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new s6({content:e})}function Mse(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var N5="AI_InvalidMessageRoleError",I5=`vercel.ai.error.${N5}`,Pse=Symbol.for(I5),O5,Fse=class extends xn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:N5,message:t}),this[O5]=!0,this.role=e}static isInstance(e){return xn.hasMarker(e,I5)}};O5=Pse;function Lse(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function $se({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=Dse}){const a=await zse(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>Bse(i,a))]}function Bse(e,t){var n,r,a,i,o,s;const u=e.role;switch(u){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>Use(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var f;const h=(f=c.providerOptions)!=null?f:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:R5(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var f;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(f=c.providerOptions)!=null?f:c.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const c=u;throw new Fse({role:c})}}}async function zse(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function Use(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,u,c;const f=e.type;switch(f){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${f}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){const{mimeType:h,base64Content:p}=Lse(u.toString());if(h==null||p==null)throw new Error(`Invalid data URL format in part ${f}`);o=h,c=fv(p)}else{const h=t[u.toString()];h?(c=h.data,o??(o=h.mimeType)):c=u}else c=fv(u);switch(f){case"image":return c instanceof Uint8Array&&(o=(r=Nse(c))!=null?r:o),{type:"image",image:c,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?R5(c):c,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function qse({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new Fo({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Fo({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Fo({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Fo({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Fo({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Fo({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Fo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Fo({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function l6(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,u,c;try{[s,u]=i.url.split(","),c=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||u==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:fv(u)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:Mse(fv(u))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:u,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var D5="AI_MessageConversionError",j5=`vercel.ai.error.${D5}`,Hse=Symbol.for(j5),M5,e2=class extends xn{constructor({originalMessage:e,message:t}){super({name:D5,message:t}),this[M5]=!0,this.originalMessage=e}static isInstance(e){return xn.hasMarker(e,j5)}};M5=Hse;function Vse(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],u=o===e.length-1,{role:c,content:f,experimental_attachments:h}=s;switch(c){case"system":{i.push({role:"system",content:f});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:f},...l6(h)]:f});else{const p=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...p,...l6(h)]:p})}break}case"assistant":{if(s.parts!=null){let v=function(){const S=[];for(const C of x)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":S.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:S});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new e2({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:O,result:N}=C,D=a[O];return(D==null?void 0:D.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:O,result:D.experimental_toToolResultContent(N),experimental_content:D.experimental_toToolResultContent(N)}:{type:"tool-result",toolCallId:k,toolName:O,result:N}})}),x=[],_=!1,b++},b=0,_=!1,x=[];for(const S of s.parts)switch(S.type){case"text":{_&&v(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==b&&v(),x.push(S),_=!0;break}}v();break}const p=s.toolInvocations;if(p==null||p.length===0){i.push({role:"assistant",content:f});break}const g=p.reduce((v,b)=>{var _;return Math.max(v,(_=b.step)!=null?_:0)},0);for(let v=0;v<=g;v++){const b=p.filter(_=>{var x;return((x=_.step)!=null?x:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...u&&f&&v===0?[{type:"text",text:f}]:[],...b.map(({toolCallId:_,toolName:x,args:S})=>({type:"tool-call",toolCallId:_,toolName:x,args:S}))]}),i.push({role:"tool",content:b.map(_=>{if(!("result"in _))throw new e2({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:x,toolName:S,result:E}=_,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}f&&!u&&i.push({role:"assistant",content:f});break}case"data":break;default:{const p=c;throw new e2({originalMessage:s,message:`Unsupported role: ${p}`})}}}return i}function Gse(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Wse);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Wse(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var _E=$.lazy(()=>$.union([$.null(),$.string(),$.number(),$.boolean(),$.record($.string(),_E),$.array(_E)])),Zr=$.record($.string(),$.record($.string(),_E)),Kse=$.array($.union([$.object({type:$.literal("text"),text:$.string()}),$.object({type:$.literal("image"),data:$.string(),mimeType:$.string().optional()})])),P5=$.object({type:$.literal("text"),text:$.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Zse=$.object({type:$.literal("image"),image:$.union([T5,$.instanceof(URL)]),mimeType:$.string().optional(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),F5=$.object({type:$.literal("file"),data:$.union([T5,$.instanceof(URL)]),filename:$.string().optional(),mimeType:$.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Yse=$.object({type:$.literal("reasoning"),text:$.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Xse=$.object({type:$.literal("redacted-reasoning"),data:$.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Jse=$.object({type:$.literal("tool-call"),toolCallId:$.string(),toolName:$.string(),args:$.unknown(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),Qse=$.object({type:$.literal("tool-result"),toolCallId:$.string(),toolName:$.string(),result:$.unknown(),content:Kse.optional(),isError:$.boolean().optional(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),ele=$.object({role:$.literal("system"),content:$.string(),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),tle=$.object({role:$.literal("user"),content:$.union([$.string(),$.array($.union([P5,Zse,F5]))]),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),nle=$.object({role:$.literal("assistant"),content:$.union([$.string(),$.array($.union([P5,F5,Yse,Xse,Jse]))]),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),rle=$.object({role:$.literal("tool"),content:$.array(Qse),providerOptions:Zr.optional(),experimental_providerMetadata:Zr.optional()}),ale=$.union([ele,tle,nle,rle]);function ile({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new vl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new vl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new vl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new vl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=Gse(e.messages);if(n==="other")throw new vl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?Vse(e.messages,{tools:t}):e.messages;if(r.length===0)throw new vl({prompt:e,message:"messages must not be empty"});const a=Fh({value:r,schema:$.array(ale)});if(!a.success)throw new vl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function ole({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function sle(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var lle="JSON schema:",ule="You MUST answer with a JSON object that matches the JSON schema above.",cle="You MUST answer with JSON.";function dle({prompt:e,schema:t,schemaPrefix:n=t!=null?lle:void 0,schemaSuffix:r=t!=null?ule:cle}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function t2(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}kd({prefix:"aiobj",size:24});var vi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function u6(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function fle(){let e=[],t=null,n=!1,r=u6();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=u6(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function hle(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}kd({prefix:"aiobj",size:24});var L5="AI_NoOutputSpecifiedError",$5=`vercel.ai.error.${L5}`,ple=Symbol.for($5),B5,mle=class extends xn{constructor({message:e="No output specified."}={}){super({name:L5,message:e}),this[B5]=!0}static isInstance(e){return xn.hasMarker(e,$5)}};B5=ple;var z5="AI_ToolExecutionError",U5=`vercel.ai.error.${z5}`,gle=Symbol.for(U5),q5,yle=class extends xn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${ig(r)}`}){super({name:z5,message:a,cause:r}),this[q5]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return xn.hasMarker(e,U5)}};q5=gle;function ble(e){return e!=null&&Object.keys(e).length>0}function vle({tools:e,toolChoice:t,activeTools:n}){return ble(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:Mw(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var wle=/^([\s\S]*?)(\s+)(\S*)$/;function _le(e){const t=e.match(wle);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var H5="AI_InvalidToolArgumentsError",V5=`vercel.ai.error.${H5}`,xle=Symbol.for(V5),G5,W5=class extends xn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${ig(n)}`}){super({name:H5,message:r,cause:n}),this[G5]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return xn.hasMarker(e,V5)}};G5=xle;var K5="AI_NoSuchToolError",Z5=`vercel.ai.error.${K5}`,Sle=Symbol.for(Z5),Y5,xE=class extends xn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:K5,message:n}),this[Y5]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return xn.hasMarker(e,Z5)}};Y5=Sle;var X5="AI_ToolCallRepairError",J5=`vercel.ai.error.${X5}`,Ele=Symbol.for(J5),Q5,Cle=class extends xn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${ig(e)}`}){super({name:X5,message:n,cause:e}),this[Q5]=!0,this.originalError=t}static isInstance(e){return xn.hasMarker(e,J5)}};Q5=Ele;async function kle({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new xE({toolName:e.toolName});try{return await c6({toolCall:e,tools:t})}catch(i){if(n==null||!(xE.isInstance(i)||W5.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>Mw(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new Cle({cause:s,originalError:i})}if(o==null)throw i;return await c6({toolCall:o,tools:t})}}async function c6({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new xE({toolName:e.toolName,availableTools:Object.keys(t)});const a=Mw(r.parameters),i=e.args.trim()===""?Fh({value:{},schema:a}):ld({text:e.args,schema:a});if(i.success===!1)throw new W5({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function Ale(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function d6({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const u=[];return u.push({role:"assistant",content:[...n.map(c=>c.type==="text"?{...c,type:"reasoning"}:{...c,type:"redacted-reasoning"}),...t.map(c=>({type:"file",data:c.base64,mimeType:c.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&u.push({role:"tool",id:s(),content:i.map(c=>{const f=r[c.toolName];return(f==null?void 0:f.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:f.experimental_toToolResultContent(c.result),experimental_content:f.experimental_toToolResultContent(c.result)}:{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result}})}),u}kd({prefix:"aitxt",size:24});kd({prefix:"msg",size:24});var Tle={};Vk(Tle,{object:()=>Ole,text:()=>Ile});var eP="AI_InvalidStreamPartError",tP=`vercel.ai.error.${eP}`,Rle=Symbol.for(tP),nP,Nle=class extends xn{constructor({chunk:e,message:t}){super({name:eP,message:t}),this[nP]=!0,this.chunk=e}static isInstance(e){return xn.hasMarker(e,tP)}};nP=Rle;var Ile=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),Ole=({schema:e})=>{const t=Mw(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:dle({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=goe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=ld({text:n});if(!a.success)throw new o6({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=Fh({value:a.value,schema:t});if(!i.success)throw new o6({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function Dle(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Gk(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function u(f){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}async function c(f){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}return new ReadableStream({async pull(f){try{if(o){await c(f);return}if(s){await u(f);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:p}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||f.enqueue(h.value),p===n?(a=void 0,h.done&&(await c(f),o=!0)):(i=void 0,h.done&&(s=!0,await u(f)))}catch(h){f.error(h)}},cancel(){n.cancel(),r.cancel()}})}function jle({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:u}){let c=null;const f=new ReadableStream({start(x){c=x}}),h={},p=new Set;let g=!1,v;function b(){g&&p.size===0&&(v!=null&&c.enqueue(v),c.close())}const _=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new Tse({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await kle({toolCall:x,tools:e,repairToolCall:u,system:i,messages:o});S.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const O=As();p.add(O),wE({name:"ai.toolCall",attributes:Ff({telemetry:a,attributes:{...vE({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async N=>k.execute(C.args,{toolCallId:C.toolCallId,messages:o,abortSignal:s}).then(D=>{c.enqueue({...C,type:"tool-result",result:D}),p.delete(O),b();try{N.setAttributes(Ff({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(D)}}}))}catch{}},D=>{c.enqueue({type:"error",error:new yle({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:D})}),p.delete(O),b()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:ole(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),f.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var Mle=kd({prefix:"aitxt",size:24}),Ple=kd({prefix:"msg",size:24});function Fle({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:u,maxSteps:c=1,experimental_generateMessageId:f=Ple,experimental_output:h,experimental_continueSteps:p=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:_=!1,toolCallStreaming:x=_,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:k,onError:O,onFinish:N,onStepFinish:D,_internal:{now:U=hle,generateId:W=Mle,currentDate:Q=()=>new Date}={},...F}){return new $le({model:e,telemetry:g,headers:u,settings:F,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:Dle(C),activeTools:S,repairToolCall:E,maxSteps:c,output:h,continueSteps:p,providerOptions:b,onChunk:k,onError:O,onFinish:N,onStepFinish:D,now:U,currentDate:Q,generateId:W,generateMessageId:f})}function Lle(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const u=JSON.stringify(s.partial);u!==r&&(a({controller:o,partialOutput:s.partial}),r=u)}},flush(i){n.length>0&&a({controller:i})}})}var $le=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:u,tools:c,toolChoice:f,toolCallStreaming:h,transforms:p,activeTools:g,repairToolCall:v,maxSteps:b,output:_,continueSteps:x,providerOptions:S,now:E,currentDate:C,generateId:k,generateMessageId:O,onChunk:N,onError:D,onFinish:U,onStepFinish:W}){this.warningsPromise=new vi,this.usagePromise=new vi,this.finishReasonPromise=new vi,this.providerMetadataPromise=new vi,this.textPromise=new vi,this.reasoningPromise=new vi,this.reasoningDetailsPromise=new vi,this.sourcesPromise=new vi,this.filesPromise=new vi,this.toolCallsPromise=new vi,this.toolResultsPromise=new vi,this.requestPromise=new vi,this.responsePromise=new vi,this.stepsPromise=new vi;var Q;if(b<1)throw new Fo({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=_;let F="",Z="",L="",he=[],ie=[],ne,ee=[];const se=[],G={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let X=[],Y=[],re,be,we="initial";const Me=[];let Pe;const Ae=new TransformStream({async transform(ce,ae){ae.enqueue(ce);const{part:J}=ce;if((J.type==="text-delta"||J.type==="reasoning"||J.type==="source"||J.type==="tool-call"||J.type==="tool-result"||J.type==="tool-call-streaming-start"||J.type==="tool-call-delta")&&await(N==null?void 0:N({chunk:J})),J.type==="error"&&await(D==null?void 0:D({error:J.error})),J.type==="text-delta"&&(F+=J.textDelta,Z+=J.textDelta,L+=J.textDelta),J.type==="reasoning"&&(ne==null?(ne={type:"text",text:J.textDelta},he.push(ne)):ne.text+=J.textDelta),J.type==="reasoning-signature"){if(ne==null)throw new xn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});ne.signature=J.signature,ne=void 0}if(J.type==="redacted-reasoning"&&he.push({type:"redacted",data:J.data}),J.type==="file"&&ie.push(J),J.type==="source"&&(se.push(J.source),ee.push(J.source)),J.type==="tool-call"&&X.push(J),J.type==="tool-result"&&Y.push(J),J.type==="step-finish"){const xe=d6({text:Z,files:ie,reasoning:he,tools:c??{},toolCalls:X,toolResults:Y,messageId:J.messageId,generateMessageId:O}),Le=Me.length;let Se="done";Le+1<b&&(x&&J.finishReason==="length"&&X.length===0?Se="continue":X.length>0&&Y.length===X.length&&(Se="tool-result"));const Ve={stepType:we,text:F,reasoning:Ale(he),reasoningDetails:he,files:ie,sources:ee,toolCalls:X,toolResults:Y,finishReason:J.finishReason,usage:J.usage,warnings:J.warnings,logprobs:J.logprobs,request:J.request,response:{...J.response,messages:[...G.messages,...xe]},providerMetadata:J.experimental_providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,isContinued:J.isContinued};await(W==null?void 0:W(Ve)),Me.push(Ve),X=[],Y=[],F="",ee=[],he=[],ie=[],ne=void 0,Se!=="done"&&(we=Se),Se!=="continue"&&(G.messages.push(...xe),Z="")}J.type==="finish"&&(G.id=J.response.id,G.timestamp=J.response.timestamp,G.modelId=J.response.modelId,G.headers=J.response.headers,be=J.usage,re=J.finishReason)},async flush(ce){var ae;try{if(Me.length===0)return;const J=Me[Me.length-1];Ne.warningsPromise.resolve(J.warnings),Ne.requestPromise.resolve(J.request),Ne.responsePromise.resolve(J.response),Ne.toolCallsPromise.resolve(J.toolCalls),Ne.toolResultsPromise.resolve(J.toolResults),Ne.providerMetadataPromise.resolve(J.experimental_providerMetadata),Ne.reasoningPromise.resolve(J.reasoning),Ne.reasoningDetailsPromise.resolve(J.reasoningDetails);const xe=re??"unknown",Le=be??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ne.finishReasonPromise.resolve(xe),Ne.usagePromise.resolve(Le),Ne.textPromise.resolve(L),Ne.sourcesPromise.resolve(se),Ne.filesPromise.resolve(J.files),Ne.stepsPromise.resolve(Me),await(U==null?void 0:U({finishReason:xe,logprobs:void 0,usage:Le,text:L,reasoning:J.reasoning,reasoningDetails:J.reasoningDetails,files:J.files,sources:J.sources,toolCalls:J.toolCalls,toolResults:J.toolResults,request:(ae=J.request)!=null?ae:{},response:J.response,warnings:J.warnings,providerMetadata:J.providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,steps:Me})),Pe.setAttributes(Ff({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>L},"ai.response.toolCalls":{output:()=>{var Se;return(Se=J.toolCalls)!=null&&Se.length?JSON.stringify(J.toolCalls):void 0}},"ai.usage.promptTokens":Le.promptTokens,"ai.usage.completionTokens":Le.completionTokens}}))}catch(J){ce.error(J)}finally{Pe.end()}}}),Te=fle();this.addStream=Te.addStream,this.closeStream=Te.close;let qe=Te.stream;for(const ce of p)qe=qe.pipeThrough(ce({tools:c,stopStream(){Te.terminate()}}));this.baseStream=qe.pipeThrough(Lle(_)).pipeThrough(Ae);const{maxRetries:it,retry:Ie}=xse({maxRetries:a}),Re=kse(t),z=Sse({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:it}}),Ce=ile({prompt:{system:(Q=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?Q:o,prompt:s,messages:u},tools:c}),Ne=this;wE({name:"ai.streamText",attributes:Ff({telemetry:t,attributes:{...vE({operationId:"ai.streamText",telemetry:t}),...z,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:u})},"ai.settings.maxSteps":b}}),tracer:Re,endWhenDone:!1,fn:async ce=>{Pe=ce;async function ae({currentStep:J,responseMessages:xe,usage:Le,stepType:Se,previousStepText:Ve,hasLeadingWhitespace:xt,messageId:ht}){var Et;const Pt=xe.length===0?Ce.type:"messages",Tt=[...Ce.messages,...xe],Ut=await $se({prompt:{type:Pt,system:Ce.system,messages:Tt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Et=e.supportsUrl)==null?void 0:Et.bind(e)}),ge={type:"regular",...vle({tools:c,toolChoice:f,activeTools:g})},{result:{stream:I,warnings:H,rawResponse:fe,request:Oe},doStreamSpan:ve,startTimestampMs:ke}=await Ie(()=>wE({name:"ai.streamText.doStream",attributes:Ff({telemetry:t,attributes:{...vE({operationId:"ai.streamText.doStream",telemetry:t}),...z,"ai.prompt.format":{input:()=>Pt},"ai.prompt.messages":{input:()=>JSON.stringify(Ut)},"ai.prompt.tools":{input:()=>{var zt;return(zt=ge.tools)==null?void 0:zt.map(Vt=>JSON.stringify(Vt))}},"ai.prompt.toolChoice":{input:()=>ge.toolChoice!=null?JSON.stringify(ge.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Re,endWhenDone:!1,fn:async zt=>({startTimestampMs:E(),doStreamSpan:zt,result:await e.doStream({mode:ge,...qse(r),inputFormat:Pt,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:Ut,providerMetadata:S,abortSignal:i,headers:n})})})),le=jle({tools:c,generatorStream:I,toolCallStreaming:h,tracer:Re,telemetry:t,system:o,messages:Tt,repairToolCall:v,abortSignal:i}),ct=Oe??{},yt=[],M=[],Be=[],et=[];let me,De="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Ct,ye=!0,q="",B=Se==="continue"?Ve:"",V,pe={id:k(),timestamp:C(),modelId:e.modelId},de="",Fe=!1,ot=!0,Dt=!1;async function un({controller:zt,chunk:Vt}){zt.enqueue(Vt),q+=Vt.textDelta,B+=Vt.textDelta,Fe=!0,Dt=Vt.textDelta.trimEnd()!==Vt.textDelta}Ne.addStream(le.pipeThrough(new TransformStream({async transform(zt,Vt){var Xt,Rn,zn;if(ye){const hr=E()-ke;ye=!1,ve.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":hr}),ve.setAttributes({"ai.response.msToFirstChunk":hr}),Vt.enqueue({type:"step-start",messageId:ht,request:ct,warnings:H??[]})}if(zt.type==="text-delta"&&zt.textDelta.length===0)return;const fr=zt.type;switch(fr){case"text-delta":{if(x){const hr=ot&&xt?zt.textDelta.trimStart():zt.textDelta;if(hr.length===0)break;ot=!1,de+=hr;const jn=_le(de);jn!=null&&(de=jn.suffix,await un({controller:Vt,chunk:{type:"text-delta",textDelta:jn.prefix+jn.whitespace}}))}else await un({controller:Vt,chunk:zt});break}case"reasoning":{Vt.enqueue(zt),me==null?(me={type:"text",text:zt.textDelta},Be.push(me)):me.text+=zt.textDelta;break}case"reasoning-signature":{if(Vt.enqueue(zt),me==null)throw new Nle({chunk:zt,message:"reasoning-signature without reasoning"});me.signature=zt.signature,me=void 0;break}case"redacted-reasoning":{Vt.enqueue(zt),Be.push({type:"redacted",data:zt.data});break}case"tool-call":{Vt.enqueue(zt),yt.push(zt);break}case"tool-result":{Vt.enqueue(zt),M.push(zt);break}case"response-metadata":{pe={id:(Xt=zt.id)!=null?Xt:pe.id,timestamp:(Rn=zt.timestamp)!=null?Rn:pe.timestamp,modelId:(zn=zt.modelId)!=null?zn:pe.modelId};break}case"finish":{Ke=zt.usage,De=zt.finishReason,Ct=zt.experimental_providerMetadata,V=zt.logprobs;const hr=E()-ke;ve.addEvent("ai.stream.finish"),ve.setAttributes({"ai.response.msToFinish":hr,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/hr});break}case"file":{et.push(zt),Vt.enqueue(zt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Vt.enqueue(zt);break}case"error":{Vt.enqueue(zt),De="error";break}default:{const hr=fr;throw new Error(`Unknown chunk type: ${hr}`)}}},async flush(zt){const Vt=yt.length>0?JSON.stringify(yt):void 0;let Xt="done";J+1<b&&(x&&De==="length"&&yt.length===0?Xt="continue":yt.length>0&&M.length===yt.length&&(Xt="tool-result")),x&&de.length>0&&(Xt!=="continue"||Se==="continue"&&!Fe)&&(await un({controller:zt,chunk:{type:"text-delta",textDelta:de}}),de="");try{ve.setAttributes(Ff({telemetry:t,attributes:{"ai.response.finishReason":De,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>Vt},"ai.response.id":pe.id,"ai.response.model":pe.modelId,"ai.response.timestamp":pe.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[De],"gen_ai.response.id":pe.id,"gen_ai.response.model":pe.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{ve.end()}zt.enqueue({type:"step-finish",finishReason:De,usage:Ke,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:V,request:ct,response:{...pe,headers:fe==null?void 0:fe.headers},warnings:H,isContinued:Xt==="continue",messageId:ht});const Rn=sle(Le,Ke);if(Xt==="done")zt.enqueue({type:"finish",finishReason:De,usage:Rn,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:V,response:{...pe,headers:fe==null?void 0:fe.headers}}),Ne.closeStream();else{if(Se==="continue"){const zn=xe[xe.length-1];typeof zn.content=="string"?zn.content+=q:zn.content.push({text:q,type:"text"})}else xe.push(...d6({text:q,files:et,reasoning:Be,tools:c??{},toolCalls:yt,toolResults:M,messageId:ht,generateMessageId:O}));await ae({currentStep:J+1,responseMessages:xe,usage:Rn,stepType:Xt,previousStepText:B,hasLeadingWhitespace:Dt,messageId:Xt==="continue"?ht:O()})}}})))}await ae({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:O()})}}).catch(ce=>{Ne.addStream(new ReadableStream({start(ae){ae.enqueue({type:"error",error:ce}),ae.close()}})),Ne.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return t2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return t2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new mle;return t2(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(Ga("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(Ga("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(Ga("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(Ga("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(Ga("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(Ga("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(Ga("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(Ga("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(Ga("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(Ga("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(Ga("error",e(i.error)));break}case"step-start":{o.enqueue(Ga("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(Ga("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(Ga("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const u=s;throw new Error(`Unknown chunk type: ${u}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c}={}){a6({response:e,status:t,statusText:n,headers:r6(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){a6({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:r6(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?Gk(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}),{status:t,statusText:n,headers:dv(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:dv(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};var Ble=$.object({name:$.string(),version:$.string()}).passthrough(),Wk=$.object({_meta:$.optional($.object({}).passthrough())}).passthrough(),f0=Wk,zle=$.object({method:$.string(),params:$.optional(Wk)}),Ule=$.object({experimental:$.optional($.object({}).passthrough()),logging:$.optional($.object({}).passthrough()),prompts:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough()),resources:$.optional($.object({subscribe:$.optional($.boolean()),listChanged:$.optional($.boolean())}).passthrough()),tools:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough())}).passthrough();f0.extend({protocolVersion:$.string(),capabilities:Ule,serverInfo:Ble,instructions:$.optional($.string())});var qle=f0.extend({nextCursor:$.optional($.string())}),Hle=$.object({name:$.string(),description:$.optional($.string()),inputSchema:$.object({type:$.literal("object"),properties:$.optional($.object({}).passthrough())}).passthrough()}).passthrough();qle.extend({tools:$.array(Hle)});var Vle=$.object({type:$.literal("text"),text:$.string()}).passthrough(),Gle=$.object({type:$.literal("image"),data:$.string().base64(),mimeType:$.string()}).passthrough(),rP=$.object({uri:$.string(),mimeType:$.optional($.string())}).passthrough(),Wle=rP.extend({text:$.string()}),Kle=rP.extend({blob:$.string().base64()}),Zle=$.object({type:$.literal("resource"),resource:$.union([Wle,Kle])}).passthrough();f0.extend({content:$.array($.union([Vle,Gle,Zle])),isError:$.boolean().default(!1).optional()}).or(f0.extend({toolResult:$.unknown()}));var Pw="2.0",Yle=$.object({jsonrpc:$.literal(Pw),id:$.union([$.string(),$.number().int()])}).merge(zle).strict(),Xle=$.object({jsonrpc:$.literal(Pw),id:$.union([$.string(),$.number().int()]),result:f0}).strict(),Jle=$.object({jsonrpc:$.literal(Pw),id:$.union([$.string(),$.number().int()]),error:$.object({code:$.number().int(),message:$.string(),data:$.optional($.unknown())})}).strict(),Qle=$.object({jsonrpc:$.literal(Pw)}).merge($.object({method:$.string(),params:$.optional(Wk)})).strict();$.union([Yle,Qle,Xle,Jle]);var eue={};Vk(eue,{mergeIntoDataStream:()=>rue,toDataStream:()=>tue,toDataStreamResponse:()=>nue});function aP(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function Kk(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&f6((a=n.data)==null?void 0:a.chunk,r);return}f6(n,r)}})).pipeThrough(aP(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Ga("text",n))}}))}function tue(e,t){return Kk(e,t).pipeThrough(new TextEncoderStream)}function nue(e,t){var n;const r=Kk(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?Gk(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:dv(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function rue(e,t){t.dataStream.merge(Kk(e,t.callbacks))}function f6(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var aue={};Vk(aue,{mergeIntoDataStream:()=>sue,toDataStream:()=>iue,toDataStreamResponse:()=>oue});function Zk(e,t){const n=lue();return nae(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(aP(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(Ga("text",r))}}))}function iue(e,t){return Zk(e,t).pipeThrough(new TextEncoderStream)}function oue(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=Zk(e,i).pipeThrough(new TextEncoderStream),s=a?Gk(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:dv(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function sue(e,t){t.dataStream.merge(Zk(e,t.callbacks))}function lue(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}function uue({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,u)=>{var c,f,h,p;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(c=s.mimeType)!=null?c:"image/jpeg"};base64,${uh(s.image)}`,detail:(h=(f=s.providerMetadata)==null?void 0:f.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new _r({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(p=s.filename)!=null?p:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new _r({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const u=[];for(const c of o)switch(c.type){case"text":{s+=c.text;break}case"tool-call":{u.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(u.length>1)throw new _r({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:u.length>0?u[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:u.length>0?u:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function h6(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function hv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Yk=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),sc=UM({errorSchema:Yk,errorToMessage:e=>e.error.message});function pv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function cue({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const c=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new _r({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const c of a)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):s.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const u=o.type;switch(u){case"auto":case"none":case"required":return{tools:s,tool_choice:u,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=u;throw new _r({functionality:`Unsupported tool choice type: ${c}`})}}}var due=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:SE(this.modelId)}get defaultObjectGenerationMode(){return pue(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var p,g,v,b,_,x,S,E;const C=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const O=this.settings.useLegacyFunctionCalling;if(O&&this.settings.parallelToolCalls===!0)throw new _r({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(O&&this.supportsStructuredOutputs)throw new _r({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:N,warnings:D}=uue({prompt:t,useLegacyFunctionCalling:O,systemMessageMode:mue(this.modelId)});k.push(...D);const U={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(p=c.name)!=null?p:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:f,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:N};switch(SE(this.modelId)&&(U.temperature!=null&&(U.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),U.top_p!=null&&(U.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),U.frequency_penalty!=null&&(U.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),U.presence_penalty!=null&&(U.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),U.logit_bias!=null&&(U.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),U.logprobs!=null&&(U.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),U.top_logprobs!=null&&(U.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),U.max_tokens!=null&&(U.max_completion_tokens==null&&(U.max_completion_tokens=U.max_tokens),U.max_tokens=void 0)),C){case"regular":{const{tools:W,tool_choice:Q,functions:F,function_call:Z,toolWarnings:L}=cue({mode:e,useLegacyFunctionCalling:O,structuredOutputs:this.supportsStructuredOutputs});return{args:{...U,tools:W,tool_choice:Q,functions:F,function_call:Z},warnings:[...k,...L]}}case"object-json":return{args:{...U,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:O?{...U,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...U,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const W=C;throw new Error(`Unsupported type: ${W}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u;const{args:c,warnings:f}=this.getArgs(e),{responseHeaders:h,value:p,rawValue:g}=await Zo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:c,failedResponseHandler:sc,successfulResponseHandler:Ad(fue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=c,_=p.choices[0],x=(t=p.usage)==null?void 0:t.completion_tokens_details,S=(n=p.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:As(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:As(),toolName:C.function.name,args:C.function.arguments}}),finishReason:hv(_.finish_reason),usage:{promptTokens:(o=(i=p.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(u=(s=p.usage)==null?void 0:s.completion_tokens)!=null?u:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:pv(p),warnings:f,logprobs:h6(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const S of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Zo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:r,failedResponseHandler:sc,successfulResponseHandler:Lk(hue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,u=[];let c="unknown",f={promptTokens:void 0,completionTokens:void 0},h,p=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,_){var x,S,E,C,k,O,N,D,U,W,Q,F;if(!b.success){c="error",_.enqueue({type:"error",error:b.error});return}const Z=b.value;if("error"in Z){c="error",_.enqueue({type:"error",error:Z.error});return}if(p&&(p=!1,_.enqueue({type:"response-metadata",...pv(Z)})),Z.usage!=null){const{prompt_tokens:ee,completion_tokens:se,prompt_tokens_details:G,completion_tokens_details:X}=Z.usage;f={promptTokens:ee??void 0,completionTokens:se??void 0},(X==null?void 0:X.reasoning_tokens)!=null&&(v.openai.reasoningTokens=X==null?void 0:X.reasoning_tokens),(X==null?void 0:X.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=X==null?void 0:X.accepted_prediction_tokens),(X==null?void 0:X.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=X==null?void 0:X.rejected_prediction_tokens),(G==null?void 0:G.cached_tokens)!=null&&(v.openai.cachedPromptTokens=G==null?void 0:G.cached_tokens)}const L=Z.choices[0];if((L==null?void 0:L.finish_reason)!=null&&(c=hv(L.finish_reason)),(L==null?void 0:L.delta)==null)return;const he=L.delta;he.content!=null&&_.enqueue({type:"text-delta",textDelta:he.content});const ie=h6(L==null?void 0:L.logprobs);ie!=null&&ie.length&&(h===void 0&&(h=[]),h.push(...ie));const ne=g&&he.function_call!=null?[{type:"function",id:As(),function:he.function_call,index:0}]:he.tool_calls;if(ne!=null)for(const ee of ne){const se=ee.index;if(u[se]==null){if(ee.type!=="function")throw new Uf({data:ee,message:"Expected 'function' type."});if(ee.id==null)throw new Uf({data:ee,message:"Expected 'id' to be a string."});if(((x=ee.function)==null?void 0:x.name)==null)throw new Uf({data:ee,message:"Expected 'function.name' to be a string."});u[se]={id:ee.id,type:"function",function:{name:ee.function.name,arguments:(S=ee.function.arguments)!=null?S:""},hasFinished:!1};const X=u[se];((E=X.function)==null?void 0:E.name)!=null&&((C=X.function)==null?void 0:C.arguments)!=null&&(X.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:X.id,toolName:X.function.name,argsTextDelta:X.function.arguments}),W4(X.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=X.id)!=null?k:As(),toolName:X.function.name,args:X.function.arguments}),X.hasFinished=!0));continue}const G=u[se];G.hasFinished||(((O=ee.function)==null?void 0:O.arguments)!=null&&(G.function.arguments+=(D=(N=ee.function)==null?void 0:N.arguments)!=null?D:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:(U=ee.function.arguments)!=null?U:""}),((W=G.function)==null?void 0:W.name)!=null&&((Q=G.function)==null?void 0:Q.arguments)!=null&&W4(G.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(F=G.id)!=null?F:As(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0))}},flush(b){var _,x;b.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(_=f.promptTokens)!=null?_:NaN,completionTokens:(x=f.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},iP=$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish(),prompt_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),completion_tokens_details:$.object({reasoning_tokens:$.number().nullish(),accepted_prediction_tokens:$.number().nullish(),rejected_prediction_tokens:$.number().nullish()}).nullish()}).nullish(),fue=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),function_call:$.object({arguments:$.string(),name:$.string()}).nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullish()})),usage:iP}),hue=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),function_call:$.object({name:$.string().optional(),arguments:$.string().optional()}).nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()})),usage:iP}),Yk]);function SE(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function pue(e){return e.startsWith("gpt-4o-audio-preview")}function mue(e){var t,n;return SE(e)?(n=(t=gue[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var gue={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function yue({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new vl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new _r({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new _r({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new _r({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function p6(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var bue=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h}){var p;const g=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:_}=yue({prompt:n,inputFormat:t}),x=[..._??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,prompt:b,stop:x.length>0?x:void 0};switch(g){case"regular":{if((p=e.tools)!=null&&p.length)throw new _r({functionality:"tools"});if(e.toolChoice)throw new _r({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new _r({functionality:"object-json mode"});case"object-tool":throw new _r({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Zo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:t,failedResponseHandler:sc,successfulResponseHandler:Ad(vue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,u=a.choices[0];return{text:u.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:hv(u.finish_reason),logprobs:p6(u.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:pv(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Zo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:r,failedResponseHandler:sc,successfulResponseHandler:Lk(wue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(p,g){if(!p.success){u="error",g.enqueue({type:"error",error:p.error});return}const v=p.value;if("error"in v){u="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...pv(v)})),v.usage!=null&&(c={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(u=hv(b.finish_reason)),(b==null?void 0:b.text)!=null&&g.enqueue({type:"text-delta",textDelta:b.text});const _=p6(b==null?void 0:b.logprobs);_!=null&&_.length&&(f===void 0&&(f=[]),f.push(..._))},flush(p){p.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},vue=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()})}),wue=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),Yk]),_ue=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Fk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Zo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Fs(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:sc,successfulResponseHandler:Ad(xue),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},xue=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),Sue={"dall-e-3":1,"dall-e-2":10},Eue=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:Sue[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h;const p=[];r!=null&&p.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&p.push({type:"unsupported-setting",setting:"seed"});const g=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:v,responseHeaders:b}=await Zo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Fs(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:sc,successfulResponseHandler:Ad(Cue),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(_=>_.b64_json),warnings:p,response:{timestamp:g,modelId:this.modelId,headers:b}}}},Cue=$.object({data:$.array($.object({b64_json:$.string()}))});function kue({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var u,c,f,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${uh(o.image)}`,detail:(f=(c=o.providerMetadata)==null?void 0:c.openai)==null?void 0:f.imageDetail};case"file":{if(o.data instanceof URL)throw new _r({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new _r({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function m6({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function Aue({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)switch(u.type){case"function":o.push({type:"function",name:u.name,description:u.description,parameters:u.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(u.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:u.args.searchContextSize,user_location:u.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:u});break}break;default:a.push({type:"unsupported-tool",tool:u});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const u=s;throw new _r({functionality:`Unsupported tool choice type: ${u}`})}}}var Tue=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:u,prompt:c,providerMetadata:f,responseFormat:h}){var p,g,v;const b=[],_=Hue(this.modelId),x=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),u!=null&&b.push({type:"unsupported-setting",setting:"seed"}),o!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=kue({prompt:c,systemMessageMode:_.systemMessageMode});b.push(...E);const C=mae({provider:"openai",providerOptions:f,schema:Vue}),k=(p=C==null?void 0:C.strictSchemas)!=null?p:!0,O={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,..._.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(O.temperature!=null&&(O.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),O.top_p!=null&&(O.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:N,tool_choice:D,toolWarnings:U}=Aue({mode:e,strict:k});return{args:{...O,tools:N,tool_choice:D},warnings:[...b,...U]}}case"object-json":return{args:{...O,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...O,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const N=x;throw new Error(`Unsupported type: ${N}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:u,value:c,rawValue:f}=await Zo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:o,failedResponseHandler:sc,successfulResponseHandler:Ad($.object({id:$.string(),created_at:$.number(),model:$.string(),output:$.array($.discriminatedUnion("type",[$.object({type:$.literal("message"),role:$.literal("assistant"),content:$.array($.object({type:$.literal("output_text"),text:$.string(),annotations:$.array($.object({type:$.literal("url_citation"),start_index:$.number(),end_index:$.number(),url:$.string(),title:$.string()}))}))}),$.object({type:$.literal("function_call"),call_id:$.string(),name:$.string(),arguments:$.string()}),$.object({type:$.literal("web_search_call")}),$.object({type:$.literal("computer_call")}),$.object({type:$.literal("reasoning")})])),incomplete_details:$.object({reason:$.string()}).nullable(),usage:oP})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),p=c.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(v=>{var b,_,x;return{sourceType:"url",id:(x=(_=(b=this.config).generateId)==null?void 0:_.call(b))!=null?x:As(),url:v.url,title:v.title}})),finishReason:m6({finishReason:(t=c.incomplete_details)==null?void 0:t.reason,hasToolCalls:p.length>0}),toolCalls:p.length>0?p:void 0,usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:f},request:{body:JSON.stringify(o)},response:{id:c.id,timestamp:new Date(c.created_at*1e3),modelId:c.model},providerMetadata:{openai:{responseId:c.id,cachedPromptTokens:(r=(n=c.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=c.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Zo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:sc,successfulResponseHandler:Lk(Pue),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,u=NaN,c=null,f=null,h=null;const p={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k,O,N;if(!v.success){o="error",b.enqueue({type:"error",error:v.error});return}const D=v.value;if(Uue(D))D.item.type==="function_call"&&(p[D.output_index]={toolName:D.item.name,toolCallId:D.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:D.item.call_id,toolName:D.item.name,argsTextDelta:D.item.arguments}));else if(zue(D)){const U=p[D.output_index];U!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.toolCallId,toolName:U.toolName,argsTextDelta:D.delta})}else Bue(D)?(h=D.response.id,b.enqueue({type:"response-metadata",id:D.response.id,timestamp:new Date(D.response.created_at*1e3),modelId:D.response.model})):Fue(D)?b.enqueue({type:"text-delta",textDelta:D.delta}):Lue(D)&&D.item.type==="function_call"?(p[D.output_index]=void 0,g=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:D.item.call_id,toolName:D.item.name,args:D.item.arguments})):$ue(D)?(o=m6({finishReason:(_=D.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=D.response.usage.input_tokens,u=D.response.usage.output_tokens,c=(S=(x=D.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:c,f=(C=(E=D.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:f):que(D)&&b.enqueue({type:"source",source:{sourceType:"url",id:(N=(O=(k=i.config).generateId)==null?void 0:O.call(k))!=null?N:As(),url:D.annotation.url,title:D.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:u},...(c!=null||f!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:f}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},oP=$.object({input_tokens:$.number(),input_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),output_tokens:$.number(),output_tokens_details:$.object({reasoning_tokens:$.number().nullish()}).nullish()}),Rue=$.object({type:$.literal("response.output_text.delta"),delta:$.string()}),Nue=$.object({type:$.enum(["response.completed","response.incomplete"]),response:$.object({incomplete_details:$.object({reason:$.string()}).nullish(),usage:oP})}),Iue=$.object({type:$.literal("response.created"),response:$.object({id:$.string(),created_at:$.number(),model:$.string()})}),Oue=$.object({type:$.literal("response.output_item.done"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string(),status:$.literal("completed")})])}),Due=$.object({type:$.literal("response.function_call_arguments.delta"),item_id:$.string(),output_index:$.number(),delta:$.string()}),jue=$.object({type:$.literal("response.output_item.added"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string()})])}),Mue=$.object({type:$.literal("response.output_text.annotation.added"),annotation:$.object({type:$.literal("url_citation"),url:$.string(),title:$.string()})}),Pue=$.union([Rue,Nue,Iue,Oue,Due,jue,Mue,$.object({type:$.string()}).passthrough()]);function Fue(e){return e.type==="response.output_text.delta"}function Lue(e){return e.type==="response.output_item.done"}function $ue(e){return e.type==="response.completed"||e.type==="response.incomplete"}function Bue(e){return e.type==="response.created"}function zue(e){return e.type==="response.function_call_arguments.delta"}function Uue(e){return e.type==="response.output_item.added"}function que(e){return e.type==="response.output_text.annotation.added"}function Hue(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var Vue=$.object({metadata:$.any().nullish(),parallelToolCalls:$.boolean().nullish(),previousResponseId:$.string().nullish(),store:$.boolean().nullish(),user:$.string().nullish(),reasoningEffort:$.string().nullish(),strictSchemas:$.boolean().nullish(),instructions:$.string().nullish()}),Gue=$.object({});function Wue({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:Gue}}var Kue={webSearchPreview:Wue};function sP(e={}){var t,n,r;const a=(t=HM(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${lae({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(b,_={})=>new due(b,_,{provider:`${o}.chat`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),c=(b,_={})=>new bue(b,_,{provider:`${o}.completion`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),f=(b,_={})=>new _ue(b,_,{provider:`${o}.embedding`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),h=(b,_={})=>new Eue(b,_,{provider:`${o}.image`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),p=(b,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b==="gpt-3.5-turbo-instruct"?c(b,_):u(b,_)},g=b=>new Tue(b,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),v=function(b,_){return p(b,_)};return v.languageModel=p,v.chat=u,v.completion=c,v.responses=g,v.embedding=f,v.textEmbedding=f,v.textEmbeddingModel=f,v.image=h,v.imageModel=h,v.tools=Kue,v}sP({compatibility:"strict"});var lP="vercel.ai.error",Zue=Symbol.for(lP),uP,Yue=class cP extends Error{constructor({name:t,message:n,cause:r}){super(n),this[uP]=!0,this.name=t,this.cause=r}static isInstance(t){return cP.hasMarker(t,lP)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};uP=Zue;var Qa=Yue,dP="AI_APICallError",fP=`vercel.ai.error.${dP}`,Xue=Symbol.for(fP),hP,Sl=class extends Qa{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:dP,message:t,cause:s}),this[hP]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Qa.hasMarker(t,fP)}};hP=Xue;var pP="AI_EmptyResponseBodyError",mP=`vercel.ai.error.${pP}`,Jue=Symbol.for(mP),gP,Que=class extends Qa{constructor({message:t="Empty response body"}={}){super({name:pP,message:t}),this[gP]=!0}static isInstance(t){return Qa.hasMarker(t,mP)}};gP=Jue;function yP(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var bP="AI_InvalidArgumentError",vP=`vercel.ai.error.${bP}`,ece=Symbol.for(vP),wP,_P=class extends Qa{constructor({message:t,cause:n,argument:r}){super({name:bP,message:t,cause:n}),this[wP]=!0,this.argument=r}static isInstance(t){return Qa.hasMarker(t,vP)}};wP=ece;var xP="AI_JSONParseError",SP=`vercel.ai.error.${xP}`,tce=Symbol.for(SP),EP,mv=class extends Qa{constructor({text:t,cause:n}){super({name:xP,message:`JSON parsing failed: Text: ${t}.
Error message: ${yP(n)}`,cause:n}),this[EP]=!0,this.text=t}static isInstance(t){return Qa.hasMarker(t,SP)}};EP=tce;var CP="AI_LoadAPIKeyError",kP=`vercel.ai.error.${CP}`,nce=Symbol.for(kP),AP,Qy=class extends Qa{constructor({message:t}){super({name:CP,message:t}),this[AP]=!0}static isInstance(t){return Qa.hasMarker(t,kP)}};AP=nce;var TP="AI_TooManyEmbeddingValuesForCallError",RP=`vercel.ai.error.${TP}`,rce=Symbol.for(RP),NP,ace=class extends Qa{constructor(e){super({name:TP,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[NP]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Qa.hasMarker(e,RP)}};NP=rce;var IP="AI_TypeValidationError",OP=`vercel.ai.error.${IP}`,ice=Symbol.for(OP),DP,oce=class EE extends Qa{constructor({value:t,cause:n}){super({name:IP,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${yP(n)}`,cause:n}),this[DP]=!0,this.value=t}static isInstance(t){return Qa.hasMarker(t,OP)}static wrap({value:t,cause:n}){return EE.isInstance(n)&&n.value===t?n:new EE({value:t,cause:n})}};DP=ice;var gv=oce,jP="AI_UnsupportedFunctionalityError",MP=`vercel.ai.error.${jP}`,sce=Symbol.for(MP),PP,mb=class extends Qa{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:jP,message:n}),this[PP]=!0,this.functionality=t}static isInstance(t){return Qa.hasMarker(t,MP)}};PP=sce;let lce=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var uce={};function CE(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function cce(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),p=f+1,g=p<u.length&&u[p]===" "?u.slice(p+1):u.slice(p);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=dce(e,u);e=h;for(let p=0;p<f.length;p++)i(f[p],c)},flush(u){i(e,u),o(u)}})}function dce(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Fw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var fce=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=lce(n,t);if(e==null)return a;if(n.includes(r))throw new _P({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},hce=fce();function pce(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function n2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function mce({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Qy({message:`${r} API key must be a string.`});if(typeof Wr>"u")throw new Qy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=uce[t],e==null)throw new Qy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Qy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var kE=Symbol.for("vercel.ai.validator");function gce(e){return{[kE]:!0,validate:e}}function yce(e){return typeof e=="object"&&e!==null&&kE in e&&e[kE]===!0&&"validate"in e}function bce(e){return yce(e)?e:vce(e)}function vce(e){return gce(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function wce({value:e,schema:t}){const n=Xk({value:e,schema:t});if(!n.success)throw gv.wrap({value:e,cause:n.error});return n.value}function Xk({value:e,schema:t}){const n=bce(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:gv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:gv.wrap({value:e,cause:r})}}}function _ce({text:e,schema:t}){try{const n=ns.parse(e);return t==null?n:wce({value:n,schema:t})}catch(n){throw mv.isInstance(n)||gv.isInstance(n)?n:new mv({text:e,cause:n})}}function FP({text:e,schema:t}){try{const n=ns.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Xk({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:mv.isInstance(n)?n:new mv({text:e,cause:n})}}}function xce({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Xk({value:t[e],schema:n});if(!r.success)throw new _P({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var Sce=()=>globalThis.fetch,AE=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Ece({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Ece=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Sce()})=>{try{const s=await o(e,{method:"POST",headers:pce(t),body:n.content,signal:i}),u=Fw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw n2(f)||Sl.isInstance(f)?f:new Sl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(n2(c)||Sl.isInstance(c))?c:new Sl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(n2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new Sl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function TE(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Cce=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Fw(r);if(o.trim()==="")return{responseHeaders:s,value:new Sl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=_ce({text:o,schema:e});return{responseHeaders:s,value:new Sl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new Sl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},kce=e=>async({response:t})=>{const n=Fw(t);if(t.body==null)throw new Que({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(cce()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(FP({text:r,schema:e}))}}))}},LP=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=FP({text:a,schema:e}),o=Fw(t);if(!i.success)throw new Sl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Ace}=globalThis;function Tce(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Ace(t)}function Rce(e){return e==null?void 0:e.replace(/\/$/,"")}function mo(e){if(Nce(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:u,format:c,const:f,minLength:h,enum:p}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),f!==void 0&&(g.enum=[f]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),p!==void 0&&(g.enum=p),a!=null&&(g.properties=Object.entries(a).reduce((v,[b,_])=>(v[b]=mo(_),v),{})),i&&(g.items=Array.isArray(i)?i.map(mo):mo(i)),o&&(g.allOf=o.map(mo)),s)if(s.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=s.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=mo(v[0]);typeof b=="object"&&(g.nullable=!0,Object.assign(g,b))}else g.anyOf=v.map(mo),g.nullable=!0}else g.anyOf=s.map(mo);return u&&(g.oneOf=u.map(mo)),h!==void 0&&(g.minLength=h),g}function Nce(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function Ice(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new mb({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const u=[];for(const c of s)switch(c.type){case"text":{u.push({text:c.text});break}case"image":{u.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:Tce(c.image)}});break}case"file":{u.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}a.push({role:"user",parts:u});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(u=>{switch(u.type){case"text":return u.text.length===0?void 0:{text:u.text};case"file":{if(u.mimeType!=="image/png")throw new mb({functionality:"Only PNG images are supported in assistant messages"});if(u.data instanceof URL)throw new mb({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:u.mimeType,data:u.data}}}case"tool-call":return{functionCall:{name:u.toolName,args:u.args}}}}).filter(u=>u!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(u=>({functionResponse:{name:u.toolName,response:{name:u.toolName,content:u.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function g6(e){return e.includes("/")?e:`models/${e}`}var Oce=$.object({error:$.object({code:$.number().nullable(),message:$.string(),status:$.string()})}),RE=Cce({errorSchema:Oce,errorToMessage:e=>e.error.message});function Dce(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],u=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:u?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const f=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):f.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:mo(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:f},toolConfig:void 0,toolWarnings:s};const p=h.type;switch(p){case"auto":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=p;throw new mb({functionality:`Unsupported tool choice type: ${g}`})}}}function y6({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var jce=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var p,g;const v=e.type,b=[],_=xce({provider:"google",providerOptions:h,schema:Lce}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:u,seed:f,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?mo(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:S,systemInstruction:E}=Ice(t);switch(v){case"regular":{const{tools:C,toolConfig:k,toolWarnings:O}=Dce(e,(p=this.settings.useSearchGrounding)!=null?p:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...b,...O]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?mo(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:mo(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),u=JSON.stringify(o),c=CE(await TE(this.config.headers),e.headers),{responseHeaders:f,value:h,rawValue:p}=await AE({url:`${this.config.baseURL}/${g6(this.modelId)}:generateContent`,headers:c,body:o,failedResponseHandler:RE,successfulResponseHandler:LP(Pce),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=o,b=h.candidates[0],_=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=b6({parts:_,generateId:this.config.generateId}),S=h.usageMetadata;return{text:v6(_),files:(t=w6(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:y6({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:f,body:p},warnings:s,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:_6({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:u}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=CE(await TE(this.config.headers),e.headers),{responseHeaders:i,value:o}=await AE({url:`${this.config.baseURL}/${g6(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:RE,successfulResponseHandler:kce(Fce),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...u}=t;let c="unknown",f={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const p=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k;if(!v.success){b.enqueue({type:"error",error:v.error});return}const O=v.value,N=O.usageMetadata;N!=null&&(f={promptTokens:(_=N.promptTokenCount)!=null?_:NaN,completionTokens:(x=N.candidatesTokenCount)!=null?x:NaN});const D=(S=O.candidates)==null?void 0:S[0];if(D==null)return;const U=D.content;if(U!=null){const W=v6(U.parts);W!=null&&b.enqueue({type:"text-delta",textDelta:W});const Q=w6(U.parts);if(Q!=null)for(const Z of Q)b.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const F=b6({parts:U.parts,generateId:p});if(F!=null)for(const Z of F)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),g=!0}if(D.finishReason!=null){c=y6({finishReason:D.finishReason,hasToolCalls:g});const W=(E=_6({groundingMetadata:D.groundingMetadata,generateId:p}))!=null?E:[];for(const Q of W)b.enqueue({type:"source",source:Q});h={google:{groundingMetadata:(C=D.groundingMetadata)!=null?C:null,safetyRatings:(k=D.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:c,usage:f,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:u},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function b6({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function v6(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function w6(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function _6({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var $P=$.object({role:$.string(),parts:$.array($.union([$.object({text:$.string()}),$.object({functionCall:$.object({name:$.string(),args:$.unknown()})}),$.object({inlineData:$.object({mimeType:$.string(),data:$.string()})})])).nullish()}),Mce=$.object({web:$.object({uri:$.string(),title:$.string()}).nullish(),retrievedContext:$.object({uri:$.string(),title:$.string()}).nullish()}),BP=$.object({webSearchQueries:$.array($.string()).nullish(),retrievalQueries:$.array($.string()).nullish(),searchEntryPoint:$.object({renderedContent:$.string()}).nullish(),groundingChunks:$.array(Mce).nullish(),groundingSupports:$.array($.object({segment:$.object({startIndex:$.number().nullish(),endIndex:$.number().nullish(),text:$.string().nullish()}),segment_text:$.string().nullish(),groundingChunkIndices:$.array($.number()).nullish(),supportChunkIndices:$.array($.number()).nullish(),confidenceScores:$.array($.number()).nullish(),confidenceScore:$.array($.number()).nullish()})).nullish(),retrievalMetadata:$.union([$.object({webDynamicRetrievalScore:$.number()}),$.object({})]).nullish()}),zP=$.object({category:$.string(),probability:$.string(),probabilityScore:$.number().nullish(),severity:$.string().nullish(),severityScore:$.number().nullish(),blocked:$.boolean().nullish()}),Pce=$.object({candidates:$.array($.object({content:$P.nullish().or($.object({}).strict()),finishReason:$.string().nullish(),safetyRatings:$.array(zP).nullish(),groundingMetadata:BP.nullish()})),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),Fce=$.object({candidates:$.array($.object({content:$P.nullish(),finishReason:$.string().nullish(),safetyRatings:$.array(zP).nullish(),groundingMetadata:BP.nullish()})).nullish(),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),Lce=$.object({responseModalities:$.array($.enum(["TEXT","IMAGE"])).nullish()}),$ce=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new ace({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=CE(await TE(this.config.headers),t),{responseHeaders:a,value:i}=await AE({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:RE,successfulResponseHandler:LP(Bce),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},Bce=$.object({embeddings:$.array($.object({values:$.array($.number())}))});function zce(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function UP(e={}){var t;const n=(t=Rce(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":mce({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,u={})=>{var c;return new jce(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:hce,isSupportedUrl:zce,fetch:e.fetch})},i=(s,u={})=>new $ce(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,u)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}UP();var qP="vercel.ai.error",Uce=Symbol.for(qP),HP,qce=class VP extends Error{constructor({name:t,message:n,cause:r}){super(n),this[HP]=!0,this.name=t,this.cause=r}static isInstance(t){return VP.hasMarker(t,qP)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};HP=Uce;var Ra=qce,GP="AI_APICallError",WP=`vercel.ai.error.${GP}`,Hce=Symbol.for(WP),KP,El=class extends Ra{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:u}){super({name:GP,message:e,cause:o}),this[KP]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=u}static isInstance(e){return Ra.hasMarker(e,WP)}};KP=Hce;var ZP="AI_EmptyResponseBodyError",YP=`vercel.ai.error.${ZP}`,Vce=Symbol.for(YP),XP,Gce=class extends Ra{constructor({message:e="Empty response body"}={}){super({name:ZP,message:e}),this[XP]=!0}static isInstance(e){return Ra.hasMarker(e,YP)}};XP=Vce;function JP(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var QP="AI_InvalidArgumentError",eF=`vercel.ai.error.${QP}`,Wce=Symbol.for(eF),tF,Kce=class extends Ra{constructor({message:e,cause:t,argument:n}){super({name:QP,message:e,cause:t}),this[tF]=!0,this.argument=n}static isInstance(e){return Ra.hasMarker(e,eF)}};tF=Wce;var nF="AI_InvalidPromptError",rF=`vercel.ai.error.${nF}`,Zce=Symbol.for(rF),aF,Yce=class extends Ra{constructor({prompt:e,message:t,cause:n}){super({name:nF,message:`Invalid prompt: ${t}`,cause:n}),this[aF]=!0,this.prompt=e}static isInstance(e){return Ra.hasMarker(e,rF)}};aF=Zce;var iF="AI_InvalidResponseDataError",oF=`vercel.ai.error.${iF}`,Xce=Symbol.for(oF),sF,r2=class extends Ra{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:iF,message:t}),this[sF]=!0,this.data=e}static isInstance(e){return Ra.hasMarker(e,oF)}};sF=Xce;var lF="AI_JSONParseError",uF=`vercel.ai.error.${lF}`,Jce=Symbol.for(uF),cF,yv=class extends Ra{constructor({text:e,cause:t}){super({name:lF,message:`JSON parsing failed: Text: ${e}.
Error message: ${JP(t)}`,cause:t}),this[cF]=!0,this.text=e}static isInstance(e){return Ra.hasMarker(e,uF)}};cF=Jce;var dF="AI_LoadAPIKeyError",fF=`vercel.ai.error.${dF}`,Qce=Symbol.for(fF),hF,eb=class extends Ra{constructor({message:e}){super({name:dF,message:e}),this[hF]=!0}static isInstance(e){return Ra.hasMarker(e,fF)}};hF=Qce;var pF="AI_TypeValidationError",mF=`vercel.ai.error.${pF}`,ede=Symbol.for(mF),gF,tde=class NE extends Ra{constructor({value:t,cause:n}){super({name:pF,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${JP(n)}`,cause:n}),this[gF]=!0,this.value=t}static isInstance(t){return Ra.hasMarker(t,mF)}static wrap({value:t,cause:n}){return NE.isInstance(n)&&n.value===t?n:new NE({value:t,cause:n})}};gF=ede;var bv=tde,yF="AI_UnsupportedFunctionalityError",bF=`vercel.ai.error.${yF}`,nde=Symbol.for(bF),vF,yo=class extends Ra{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:yF,message:t}),this[vF]=!0,this.functionality=e}static isInstance(e){return Ra.hasMarker(e,bF)}};vF=nde;let rde=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};class x6 extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function a2(e){}function ade(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=a2,onError:n=a2,onRetry:r=a2,onComment:a}=e;let i="",o=!0,s,u="",c="";function f(b){const _=o?b.replace(/^\xEF\xBB\xBF/,""):b,[x,S]=ide(`${i}${_}`);for(const E of x)h(E);i=S,o=!1}function h(b){if(b===""){g();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const _=b.indexOf(":");if(_!==-1){const x=b.slice(0,_),S=b[_+1]===" "?2:1,E=b.slice(_+S);p(x,E,b);return}p(b,"",b)}function p(b,_,x){switch(b){case"event":c=_;break;case"data":u=`${u}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new x6(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:x}));break;default:n(new x6(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:_,line:x}));break}}function g(){u.length>0&&t({id:s,event:c||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),s=void 0,u="",c=""}function v(b={}){i&&b.consume&&h(i),o=!0,s=void 0,u="",c="",i=""}return{feed:f,reset:v}}function ide(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class ode extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=ade({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var sde={};function vv(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Lw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var lde=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=rde(n,t);if(e==null)return a;if(n.includes(r))throw new Kce({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},tb=lde();function ude(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function i2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function cde({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new eb({message:`${r} API key must be a string.`});if(typeof Wr>"u")throw new eb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=sde[t],e==null)throw new eb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new eb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var IE=Symbol.for("vercel.ai.validator");function dde(e){return{[IE]:!0,validate:e}}function fde(e){return typeof e=="object"&&e!==null&&IE in e&&e[IE]===!0&&"validate"in e}function hde(e){return fde(e)?e:pde(e)}function pde(e){return dde(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function mde({value:e,schema:t}){const n=wF({value:e,schema:t});if(!n.success)throw bv.wrap({value:e,cause:n.error});return n.value}function wF({value:e,schema:t}){const n=hde(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:bv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:bv.wrap({value:e,cause:r})}}}function gde({text:e,schema:t}){try{const n=ns.parse(e);return t==null?n:mde({value:n,schema:t})}catch(n){throw yv.isInstance(n)||bv.isInstance(n)?n:new yv({text:e,cause:n})}}function _F({text:e,schema:t}){try{const n=ns.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=wF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:yv.isInstance(n)?n:new yv({text:e,cause:n})}}}function o2(e){try{return ns.parse(e),!0}catch{return!1}}var yde=()=>globalThis.fetch,wv=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>bde({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),bde=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=yde()})=>{try{const s=await o(e,{method:"POST",headers:ude(t),body:n.content,signal:i}),u=Lw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw i2(f)||El.isInstance(f)?f:new El({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(i2(c)||El.isInstance(c))?c:new El({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(i2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new El({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},vde=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Lw(r);if(o.trim()==="")return{responseHeaders:s,value:new El({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=gde({text:o,schema:e});return{responseHeaders:s,value:new El({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new El({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},xF=e=>async({response:t})=>{const n=Lw(t);if(t.body==null)throw new Gce({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new ode).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(_F({text:r,schema:e}))}}))}},SF=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=_F({text:a,schema:e}),o=Lw(t);if(!i.success)throw new El({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:wde}=globalThis;function _de(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return wde(t)}function xde(e){return e==null?void 0:e.replace(/\/$/,"")}var Sde=Object.defineProperty,Ede=Object.defineProperties,Cde=Object.getOwnPropertyDescriptors,_v=Object.getOwnPropertySymbols,EF=Object.prototype.hasOwnProperty,CF=Object.prototype.propertyIsEnumerable,S6=(e,t,n)=>t in e?Sde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hi=(e,t)=>{for(var n in t||(t={}))EF.call(t,n)&&S6(e,n,t[n]);if(_v)for(var n of _v(t))CF.call(t,n)&&S6(e,n,t[n]);return e},gb=(e,t)=>Ede(e,Cde(t)),xv=(e,t)=>{var n={};for(var r in e)EF.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_v)for(var r of _v(e))t.indexOf(r)<0&&CF.call(e,r)&&(n[r]=e[r]);return n};function _s(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function kde(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:_s(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=_s(s))!=null?n:_s(o[0].providerMetadata)});break}const u=_s(s),c=o.map(f=>{var h,p,g,v;switch(f.type){case"text":return{type:"text",text:f.text,cache_control:(h=_s(f.providerMetadata))!=null?h:u};case"image":return{type:"image_url",image_url:{url:f.image instanceof URL?f.image.toString():`data:${(p=f.mimeType)!=null?p:"image/jpeg"};base64,${_de(f.image)}`},cache_control:(g=_s(f.providerMetadata))!=null?g:u};case"file":return{type:"text",text:f.data instanceof URL?f.data.toString():f.data,cache_control:(v=_s(f.providerMetadata))!=null?v:u};default:{const b=f;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:c});break}case"assistant":{let u="";const c=[];for(const f of o)switch(f.type){case"text":{u+=f.text;break}case"tool-call":{c.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=f;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0,cache_control:_s(s)});break}case"tool":{for(const u of o)a.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),cache_control:(r=_s(s))!=null?r:_s(u.providerMetadata)});break}default:{const u=i;throw new Error(`Unsupported role: ${u}`)}}return a}function E6(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function Sv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Jk=$.object({error:$.object({message:$.string(),type:$.string(),param:$.any().nullable(),code:$.string().nullable()})}),Ev=vde({errorSchema:Jk,errorToMessage:e=>e.error.message});function Ade(e){return"parameters"in e}var Tde=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:u,responseFormat:c,topK:f,providerMetadata:h}){var p;const g=e.type,v=(p=h==null?void 0:h.openrouter)!=null?p:{},b=Hi(Hi(Hi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:u,response_format:c,top_k:f,messages:kde(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return Hi(Hi({},b),Ide(e));case"object-json":return gb(Hi({},b),{response_format:{type:"json_object"}});case"object-tool":return gb(Hi({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new yo({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const u=this.getArgs(e),{responseHeaders:c,value:f}=await wv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:vv(this.config.headers(),e.headers),body:u,failedResponseHandler:Ev,successfulResponseHandler:SF(Rde),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u,{messages:p}=h,g=xv(h,["messages"]),v=f.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:f.id,modelId:f.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var _;return{toolCallType:"function",toolCallId:(_=b.id)!=null?_:tb(),toolName:b.function.name,args:b.function.arguments}}),finishReason:Sv(v.finish_reason),usage:{promptTokens:(i=(a=f.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=f.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:p,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:E6(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await wv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:vv(this.config.headers(),e.headers),body:gb(Hi({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Ev,successfulResponseHandler:xF(Nde),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=xv(a,["messages"]),s=[];let u="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f;return{stream:r.pipeThrough(new TransformStream({transform(h,p){var g,v,b,_,x,S,E,C,k,O,N,D;if(!h.success){u="error",p.enqueue({type:"error",error:h.error});return}const U=h.value;if("error"in U){u="error",p.enqueue({type:"error",error:U.error});return}U.id&&p.enqueue({type:"response-metadata",id:U.id}),U.model&&p.enqueue({type:"response-metadata",modelId:U.model}),U.usage!=null&&(c={promptTokens:U.usage.prompt_tokens,completionTokens:U.usage.completion_tokens});const W=U.choices[0];if((W==null?void 0:W.finish_reason)!=null&&(u=Sv(W.finish_reason)),(W==null?void 0:W.delta)==null)return;const Q=W.delta;Q.content!=null&&p.enqueue({type:"text-delta",textDelta:Q.content}),Q.reasoning!=null&&p.enqueue({type:"reasoning",textDelta:Q.reasoning});const F=E6(W==null?void 0:W.logprobs);if(F!=null&&F.length&&(f===void 0&&(f=[]),f.push(...F)),Q.tool_calls!=null)for(const Z of Q.tool_calls){const L=Z.index;if(s[L]==null){if(Z.type!=="function")throw new r2({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new r2({data:Z,message:"Expected 'id' to be a string."});if(((g=Z.function)==null?void 0:g.name)==null)throw new r2({data:Z,message:"Expected 'function.name' to be a string."});s[L]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const ie=s[L];if(ie==null)throw new Error("Tool call is missing");((b=ie.function)==null?void 0:b.name)!=null&&((_=ie.function)==null?void 0:_.arguments)!=null&&o2(ie.function.arguments)&&(p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:ie.function.arguments}),p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=ie.id)!=null?x:tb(),toolName:ie.function.name,args:ie.function.arguments}),ie.sent=!0);continue}const he=s[L];if(he==null)throw new Error("Tool call is missing");((S=Z.function)==null?void 0:S.arguments)!=null&&(he.function.arguments+=(C=(E=Z.function)==null?void 0:E.arguments)!=null?C:""),p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:he.id,toolName:he.function.name,argsTextDelta:(k=Z.function.arguments)!=null?k:""}),((O=he.function)==null?void 0:O.name)!=null&&((N=he.function)==null?void 0:N.arguments)!=null&&o2(he.function.arguments)&&(p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(D=he.id)!=null?D:tb(),toolName:he.function.name,args:he.function.arguments}),he.sent=!0)}},flush(h){var p;if(u==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(p=g.id)!=null?p:tb(),toolName:g.function.name,args:o2(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},kF=$.object({id:$.string().optional(),model:$.string().optional(),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number(),total_tokens:$.number()}).nullish()}),Rde=kF.extend({choices:$.array($.object({message:$.object({role:$.literal("assistant"),content:$.string().nullable().optional(),reasoning:$.string().nullable().optional(),tool_calls:$.array($.object({id:$.string().optional().nullable(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).optional()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullable().optional(),finish_reason:$.string().optional().nullable()}))}),Nde=$.union([kF.extend({choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).optional(),content:$.string().nullish(),reasoning:$.string().nullish().optional(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()}))}),Jk]);function Ide(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>Ade(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function Ode({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new Yce({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new yo({functionality:"images"});case"file":throw new yo({functionality:"file attachments"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new yo({functionality:"tool-call messages"});case"reasoning":throw new yo({functionality:"reasoning messages"});case"redacted-reasoning":throw new yo({functionality:"redacted reasoning messages"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new yo({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function C6(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var Dde=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:u,responseFormat:c,topK:f,stopSequences:h,providerMetadata:p}){var g,v;const b=e.type,_=(g=p==null?void 0:p.openrouter)!=null?g:{},{prompt:x}=Ode({prompt:n,inputFormat:t}),S=Hi(Hi(Hi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:u,stop:h,response_format:c,top_k:f,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new yo({functionality:"tools"});if(e.toolChoice)throw new yo({functionality:"toolChoice"});return S}case"object-json":throw new yo({functionality:"object-json mode"});case"object-tool":throw new yo({functionality:"object-tool mode"});default:{const E=b;throw new yo({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:u}=await wv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:vv(this.config.headers(),e.headers),body:o,failedResponseHandler:Ev,successfulResponseHandler:SF(k6),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=o,{prompt:f}=c,h=xv(c,["prompt"]);if("error"in u)throw new Error(`${u.error.message}`);const p=u.choices[0];if(!p)throw new Error("No choice in OpenRouter completion response");return{response:{id:u.id,modelId:u.model},text:(t=p.text)!=null?t:"",reasoning:p.reasoning||void 0,usage:{promptTokens:(r=(n=u.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=u.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:Sv(p.finish_reason),logprobs:C6(p.logprobs),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await wv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:vv(this.config.headers(),e.headers),body:gb(Hi({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Ev,successfulResponseHandler:xF(k6),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=xv(a,["prompt"]);let s="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(f,h){if(!f.success){s="error",h.enqueue({type:"error",error:f.error});return}const p=f.value;if("error"in p){s="error",h.enqueue({type:"error",error:p.error});return}p.usage!=null&&(u={promptTokens:p.usage.prompt_tokens,completionTokens:p.usage.completion_tokens});const g=p.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=Sv(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=C6(g==null?void 0:g.logprobs);v!=null&&v.length&&(c===void 0&&(c=[]),c.push(...v))},flush(f){f.enqueue({type:"finish",finishReason:s,logprobs:c,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},k6=$.union([$.object({id:$.string().optional(),model:$.string().optional(),choices:$.array($.object({text:$.string(),reasoning:$.string().nullish().optional(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullable().optional()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).optional().nullable()}),Jk]);function AF(e={}){var t,n,r;const a=(n=xde((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>Hi({Authorization:`Bearer ${cde({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,p={})=>new Tde(h,p,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,p={})=>new Dde(h,p,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,p)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?u(h,p):s(h,p)},f=function(h,p){return c(h,p)};return f.languageModel=c,f.chat=s,f.completion=u,f}AF({compatibility:"strict"});var Yc={},s2={},A6;function T6(){return A6||(A6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(s2)),s2}var R6;function jde(){return R6||(R6=1,function(e){var t=Yc&&Yc.__createBinding||(Object.create?function(c,f,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,p,g)}:function(c,f,h,p){p===void 0&&(p=h),c[p]=f[h]}),n=Yc&&Yc.__exportStar||function(c,f){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&t(f,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=T6();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(T6(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(c,f=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return s(c.trim(),f)}e.parseJSON=o;const s=(c,f)=>{const h=c.length;let p=0;const g=k=>{throw new a(`${k} at position ${p}`)},v=k=>{throw new i(`${k} at position ${p}`)},b=()=>(C(),p>=h&&g("Unexpected end of input"),c[p]==='"'?_():c[p]==="{"?x():c[p]==="["?S():c.substring(p,p+4)==="null"||r.Allow.NULL&f&&h-p<4&&"null".startsWith(c.substring(p))?(p+=4,null):c.substring(p,p+4)==="true"||r.Allow.BOOL&f&&h-p<4&&"true".startsWith(c.substring(p))?(p+=4,!0):c.substring(p,p+5)==="false"||r.Allow.BOOL&f&&h-p<5&&"false".startsWith(c.substring(p))?(p+=5,!1):c.substring(p,p+8)==="Infinity"||r.Allow.INFINITY&f&&h-p<8&&"Infinity".startsWith(c.substring(p))?(p+=8,1/0):c.substring(p,p+9)==="-Infinity"||r.Allow._INFINITY&f&&1<h-p&&h-p<9&&"-Infinity".startsWith(c.substring(p))?(p+=9,-1/0):c.substring(p,p+3)==="NaN"||r.Allow.NAN&f&&h-p<3&&"NaN".startsWith(c.substring(p))?(p+=3,NaN):E()),_=()=>{const k=p;let O=!1;for(p++;p<h&&(c[p]!=='"'||O&&c[p-1]==="\\");)O=c[p]==="\\"?!O:!1,p++;if(c.charAt(p)=='"')try{return JSON.parse(c.substring(k,++p-Number(O)))}catch(N){v(String(N))}else if(r.Allow.STR&f)try{return JSON.parse(c.substring(k,p-Number(O))+'"')}catch{return JSON.parse(c.substring(k,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{p++,C();const k={};try{for(;c[p]!=="}";){if(C(),p>=h&&r.Allow.OBJ&f)return k;const O=_();C(),p++;try{const N=b();k[O]=N}catch(N){if(r.Allow.OBJ&f)return k;throw N}C(),c[p]===","&&p++}}catch{if(r.Allow.OBJ&f)return k;g("Expected '}' at end of object")}return p++,k},S=()=>{p++;const k=[];try{for(;c[p]!=="]";)k.push(b()),C(),c[p]===","&&p++}catch{if(r.Allow.ARR&f)return k;g("Expected ']' at end of array")}return p++,k},E=()=>{if(p===0){c==="-"&&v("Not sure what '-' is");try{return JSON.parse(c)}catch(O){if(r.Allow.NUM&f)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}v(String(O))}}const k=p;for(c[p]==="-"&&p++;c[p]&&",]}".indexOf(c[p])===-1;)p++;p==h&&!(r.Allow.NUM&f)&&g("Unterminated number literal");try{return JSON.parse(c.substring(k,p))}catch{c.substring(k,p)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(k,c.lastIndexOf("e")))}catch(N){v(String(N))}}},C=()=>{for(;p<h&&` 
\r	`.includes(c[p]);)p++};return b()},u=o;e.parse=u}(Yc)),Yc}var Mde=jde();function l2(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new _r({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(uh(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var Pde=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=Mde.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:As(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function Fde({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var Lde=$.object({error:$.object({code:$.string().nullable(),message:$.string(),param:$.any().nullable(),type:$.string()})}),OE=UM({errorSchema:Lde,errorToMessage:e=>e.error.message});function $de({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new _r({functionality:`Unsupported tool choice type: ${s}`})}}}function Bde(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var zde=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},Ude=e=>async({response:t})=>{const n=og(t);if(t.body===null)throw new Mk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new zde).pipeThrough(new TransformStream({transform(r,a){a.enqueue(ld({schema:e,text:r}))}}))}},qde=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:u,topK:c,topP:f}){const h=n.type,p=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&p.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:Bde({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:u,tfs_z:this.settings.tfsZ,top_k:c,top_p:f,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=$de({mode:n});return{args:{...g,messages:l2(a),tools:v},type:h,warnings:[...p,...b]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:l2(a)},type:h,warnings:p};case"object-tool":return{args:{...g,messages:l2(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:p};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Zo({abortSignal:e.abortSignal,body:i,failedResponseHandler:OE,fetch:this.config.fetch,headers:Fs(this.config.headers(),e.headers),successfulResponseHandler:Ad(Hde),url:`${this.config.baseURL}/chat`}),{messages:u,...c}=i,f=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var p;return{args:JSON.stringify(h.function.arguments),toolCallId:(p=h.id)!=null?p:As(),toolCallType:"function",toolName:h.function.name}});return{finishReason:Fde({finishReason:s.done_reason,hasToolCalls:f!==void 0&&f.length>0}),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:f,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...g.response}),g.text&&b.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)b.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",..._});b.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),b.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Zo({abortSignal:e.abortSignal,body:t,failedResponseHandler:OE,fetch:this.config.fetch,headers:Fs(this.config.headers(),e.headers),successfulResponseHandler:Ude(Vde),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,u=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new Pde({tools:u,type:n});let f="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:p=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:f,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const b=g.value;if(b.done){f=c.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}p&&c.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},Hde=$.object({created_at:$.string(),done:$.literal(!0),done_reason:$.string().optional().nullable(),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),message:$.object({content:$.string(),role:$.string(),tool_calls:$.array($.object({function:$.object({arguments:$.record($.any()),name:$.string()}),id:$.string().optional()})).optional().nullable()}),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()}),Vde=$.discriminatedUnion("done",[$.object({created_at:$.string(),done:$.literal(!1),message:$.object({content:$.string(),role:$.string()}),model:$.string()}),$.object({created_at:$.string(),done:$.literal(!0),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()})]),Gde=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new Fk({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Zo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:OE,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Ad(Wde),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},Wde=$.object({embeddings:$.array($.array($.number())),prompt_eval_count:$.number().nullable()});function TF(e={}){var t;const n=(t=HM(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,u={})=>new qde(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,u={})=>new Gde(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,u){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,u)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}TF();let Kde=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function hh(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Zde(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),p=f+1,g=p<u.length&&u[p]===" "?u.slice(p+1):u.slice(p);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=Yde(e,u);e=h;for(let p=0;p<f.length;p++)i(f[p],c)},flush(u){i(e,u),o(u)}})}function Yde(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function $w(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Xde=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Kde(n,t);if(e==null)return a;if(n.includes(r))throw new Pk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},u2=Xde();function Jde(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function c2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var DE=Symbol.for("vercel.ai.validator");function Qde(e){return{[DE]:!0,validate:e}}function efe(e){return typeof e=="object"&&e!==null&&DE in e&&e[DE]===!0&&"validate"in e}function tfe(e){return efe(e)?e:nfe(e)}function nfe(e){return Qde(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function rfe({value:e,schema:t}){const n=RF({value:e,schema:t});if(!n.success)throw nc.wrap({value:e,cause:n.error});return n.value}function RF({value:e,schema:t}){const n=tfe(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:nc.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:nc.wrap({value:e,cause:r})}}}function afe({text:e,schema:t}){try{const n=ns.parse(e);return t==null?n:rfe({value:n,schema:t})}catch(n){throw tc.isInstance(n)||nc.isInstance(n)?n:new tc({text:e,cause:n})}}function NF({text:e,schema:t}){try{const n=ns.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=RF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:tc.isInstance(n)?n:new tc({text:e,cause:n})}}}function N6(e){try{return ns.parse(e),!0}catch{return!1}}var ife=()=>globalThis.fetch,ph=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>ofe({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),ofe=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=ife()})=>{try{const s=await o(e,{method:"POST",headers:Jde(t),body:n.content,signal:i}),u=$w(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw c2(f)||pa.isInstance(f)?f:new pa({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(c2(c)||pa.isInstance(c))?c:new pa({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(c2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new pa({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},Bw=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=$w(r);if(o.trim()==="")return{responseHeaders:s,value:new pa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=afe({text:o,schema:e});return{responseHeaders:s,value:new pa({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new pa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},IF=e=>async({response:t})=>{const n=$w(t);if(t.body==null)throw new Mk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(Zde()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(NF({text:r,schema:e}))}}))}},zw=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=NF({text:a,schema:e}),o=$w(t);if(!i.success)throw new pa({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:sfe}=globalThis;function lfe(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return sfe(t)}function ufe(e){return e==null?void 0:e.replace(/\/$/,"")}function lm(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function cfe(e){const t=[];for(const{role:n,content:r,...a}of e){const i=lm({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...lm(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const u=lm(o);switch(o.type){case"text":return{type:"text",text:o.text,...u};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${lfe(o.image)}`},...u};case"file":throw new _r({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const u of r){const c=lm(u);switch(u.type){case"text":{o+=u.text;break}case"tool-call":{s.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)},...c});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=lm(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function Cv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function kv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var dfe=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),Uw={errorSchema:dfe,errorToMessage:e=>e.error.message};function ffe({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)u.type==="provider-defined"?a.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const u=s;throw new _r({functionality:`Unsupported tool choice type: ${u}`})}}}var hfe=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Uw;this.chunkSchema=mfe(i.errorSchema),this.failedResponseHandler=Bw(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:u,stopSequences:c,responseFormat:f,seed:h}){var p,g;const v=e.type,b=[];i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),(f==null?void 0:f.type)==="json"&&f.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(f==null?void 0:f.type)==="json"?this.supportsStructuredOutputs===!0&&f.schema!=null?{type:"json_schema",json_schema:{schema:f.schema,name:(p=f.name)!=null?p:"response",description:f.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...u==null?void 0:u[this.providerOptionsName],messages:cfe(t)};switch(v){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=ffe({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:x,tool_choice:S},warnings:[...b,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:b};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:b};default:{const x=v;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u,c;const{args:f,warnings:h}=this.getArgs({...e}),p=JSON.stringify(f),{responseHeaders:g,value:v,rawValue:b}=await ph({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hh(this.config.headers(),e.headers),body:f,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:zw(pfe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...x}=f,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:b});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:u2(),toolName:C.function.name,args:C.function.arguments}}),finishReason:kv(S.finish_reason),usage:{promptTokens:(s=(o=v.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(c=(u=v.usage)==null?void 0:u.completion_tokens)!=null?c:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:x},rawResponse:{headers:g,body:b},response:Cv(v),warnings:h,request:{body:p}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const x of v.reasoning)x.type==="text"&&_.enqueue({type:"reasoning",textDelta:x.text});else _.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&_.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const x of v.toolCalls)_.enqueue({type:"tool-call",...x});_.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),_.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await ph({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hh(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:IF(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=n,f=[];let h="unknown",p={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k,O,N,D,U,W,Q,F,Z;if(!v.success){h="error",b.enqueue({type:"error",error:v.error});return}const L=v.value;if(i==null||i.processChunk(v.rawValue),"error"in L){h="error",b.enqueue({type:"error",error:L.error.message});return}g&&(g=!1,b.enqueue({type:"response-metadata",...Cv(L)})),L.usage!=null&&(p={promptTokens:(_=L.usage.prompt_tokens)!=null?_:void 0,completionTokens:(x=L.usage.completion_tokens)!=null?x:void 0});const he=L.choices[0];if((he==null?void 0:he.finish_reason)!=null&&(h=kv(he.finish_reason)),(he==null?void 0:he.delta)==null)return;const ie=he.delta;if(ie.reasoning_content!=null&&b.enqueue({type:"reasoning",textDelta:ie.reasoning_content}),ie.content!=null&&b.enqueue({type:"text-delta",textDelta:ie.content}),ie.tool_calls!=null)for(const ne of ie.tool_calls){const ee=ne.index;if(f[ee]==null){if(ne.type!=="function")throw new Uf({data:ne,message:"Expected 'function' type."});if(ne.id==null)throw new Uf({data:ne,message:"Expected 'id' to be a string."});if(((S=ne.function)==null?void 0:S.name)==null)throw new Uf({data:ne,message:"Expected 'function.name' to be a string."});f[ee]={id:ne.id,type:"function",function:{name:ne.function.name,arguments:(E=ne.function.arguments)!=null?E:""},hasFinished:!1};const G=f[ee];((C=G.function)==null?void 0:C.name)!=null&&((k=G.function)==null?void 0:k.arguments)!=null&&(G.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:G.function.arguments}),N6(G.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=G.id)!=null?O:u2(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0));continue}const se=f[ee];se.hasFinished||(((N=ne.function)==null?void 0:N.arguments)!=null&&(se.function.arguments+=(U=(D=ne.function)==null?void 0:D.arguments)!=null?U:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:se.id,toolName:se.function.name,argsTextDelta:(W=ne.function.arguments)!=null?W:""}),((Q=se.function)==null?void 0:Q.name)!=null&&((F=se.function)==null?void 0:F.arguments)!=null&&N6(se.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=se.id)!=null?Z:u2(),toolName:se.function.name,args:se.function.arguments}),se.hasFinished=!0))}},flush(v){var b,_;const x=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(b=p.promptTokens)!=null?b:NaN,completionTokens:(_=p.completionTokens)!=null?_:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:a}}}},pfe=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),mfe=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),e]);function gfe({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new vl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new _r({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new _r({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new _r({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var yfe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:Uw;this.chunkSchema=vfe(a.errorSchema),this.failedResponseHandler=Bw(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h,providerMetadata:p}){var g;const v=e.type,b=[];o!=null&&b.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:x}=gfe({prompt:n,inputFormat:t}),S=[...x??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,...p==null?void 0:p[this.providerOptionsName],prompt:_,stop:S.length>0?S:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new _r({functionality:"tools"});if(e.toolChoice)throw new _r({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new _r({functionality:"object-json mode"});case"object-tool":throw new _r({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:u,rawValue:c}=await ph({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hh(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:zw(bfe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:f,...h}=i,p=u.choices[0];return{text:p.text,usage:{promptTokens:(n=(t=u.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=u.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:kv(p.finish_reason),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s,body:c},response:Cv(u),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await ph({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hh(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:IF(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,p){if(!h.success){u="error",p.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){u="error",p.enqueue({type:"error",error:g.error});return}f&&(f=!1,p.enqueue({type:"response-metadata",...Cv(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(u=kv(v.finish_reason)),(v==null?void 0:v.text)!=null&&p.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},bfe=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),vfe=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),e]),wfe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new Fk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await ph({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:hh(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Bw((r=this.config.errorStructure)!=null?r:Uw),successfulResponseHandler:zw(_fe),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},_fe=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),xfe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h,p;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:b,responseHeaders:_}=await ph({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:hh(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:Bw((p=this.config.errorStructure)!=null?p:Uw),successfulResponseHandler:zw(Sfe),abortSignal:s,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:_}}}},Sfe=$.object({data:$.array($.object({b64_json:$.string()}))});function Efe(e){const t=ufe(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:p})=>{const g=new URL(`${t}${p}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,p={})=>o(h,p),o=(h,p={})=>new hfe(h,p,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,p={})=>new yfe(h,p,a("completion")),u=(h,p={})=>new wfe(h,p,a("embedding")),c=(h,p={})=>new xfe(h,p,a("image")),f=(h,p)=>i(h,p);return f.languageModel=i,f.chatModel=o,f.completionModel=s,f.textEmbeddingModel=u,f.imageModel=c,f}const Qk=e=>e==="openai"||e==="openrouter"||e==="google",eA=e=>e==="ollama"||e==="openai-compatible",bm=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",OF=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],If={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},DF=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function Cfe(e,t,n){try{switch(e.type){case"openai":return sP({apiKey:n})(t);case"google":return UP({apiKey:n})(t);case"openrouter":return AF({apiKey:n})(t);case"ollama":return TF({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return Efe({baseURL:DF(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function kfe(e,t,n){const r=e.type,i=(e.fetchedModels&&e.fetchedModels.length>0?e.fetchedModels:If[r]||[]).find(c=>c.id===t);if(!i)return;const o=Cfe(e,t,n);if(!o)return;const s=e.type==="openai",u=["openai","google","openrouter"].includes(e.type);return{id:`${e.id}:${t}`,name:i.name,providerId:e.id,providerName:e.name,instance:o,supportsImageGeneration:s,supportsToolCalling:u,metadata:i.metadata}}const um=new Map,Afe=5*60*1e3;async function Tfe(e,t){const n=`${e.id}-${e.baseURL||""}`,r=um.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,u,c;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":{if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break}case"openrouter":{if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break}case"ollama":{const f=((u=e.baseURL)==null?void 0:u.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",f).toString(),delete o.Authorization;break}case"openai-compatible":{if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const f=DF(e.baseURL);i=new URL("models",f.endsWith("/")?f:f+"/").toString();break}case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(f){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,f),dt.error(`Invalid Base URL for ${e.name}: ${f instanceof Error?f.message:String(f)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const f=await fetch(i,{headers:o});if(!f.ok){let g=`(${f.status} ${f.statusText})`;try{const v=await f.text();try{const b=JSON.parse(v);g=((c=b==null?void 0:b.error)==null?void 0:c.message)||(b==null?void 0:b.message)||v||g}catch{g=v||g}}catch(v){console.warn("[ModelFetcher] Failed to read error response body:",v)}throw new Error(`API Error: ${g}`)}const h=await f.json();let p=[];if(e.type==="ollama")h.models&&Array.isArray(h.models)?p=h.models.map(g=>({id:g.name,name:g.name,metadata:g.details??{}})):console.warn(`[ModelFetcher] Unexpected response structure from Ollama for ${e.name}:`,h);else if(e.type==="openrouter"){const g=h.data||h;Array.isArray(g)?p=g.map(v=>{const{id:b,name:_,...x}=v;return{id:b,name:_||b,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}else{const g=h.data||h;Array.isArray(g)?p=g.map(v=>{const{id:b,name:_,...x}=v;return{id:b,name:_||b,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}return p.sort((g,v)=>(g.name||g.id).localeCompare(v.name||v.id)),console.log(`[ModelFetcher] Fetched ${p.length} models for ${e.name}`),p}catch(f){const h=f instanceof Error?f.message:String(f);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),dt.error(`Failed to fetch models for ${e.name}: ${h}`),um.delete(n),[]}})();return um.set(n,a),setTimeout(()=>{um.get(n)===a&&(um.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},Afe),a}const d2="provider:lastModelSelection",I6="provider:globalModelSortOrder",cm=(e,t)=>`${e}:${t}`,Rfe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},Ai=Bl(zl((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Gt.saveSetting("enableApiKeyManagement",n)},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Gt.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([Gt.loadProviderConfigs(),Gt.loadApiKeys(),Gt.loadSetting(I6,[]),Gt.loadSetting(d2,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((p,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{p.push(cm(g.id,v))}),p),[]),u=new Set(s),c=i.filter(p=>u.has(p));e({globalModelSortOrder:c});let f=o;f&&u.has(f)||(f=c[0]??null,f||(f=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${f}`)),e({selectedModelId:f,isLoading:!1}),await Gt.saveSetting(d2,f)}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),dt.error("Failed to load provider data")}},selectModel:n=>{e({selectedModelId:n}),Gt.saveSetting(d2,n)},addApiKey:async(n,r,a)=>{const i=Lo(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await Gt.saveApiKey(s),e(u=>{u.dbApiKeys.push(s)}),dt.success(`API Key "${n}" added.`),i}catch(u){throw console.error("ProviderStore: Error adding API key",u),dt.error(`Failed to add API Key: ${u instanceof Error?u.message:String(u)}`),u}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await Gt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),dt.success(`API Key "${r}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting API key",i),dt.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=Lo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Gt.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),dt.success(`Provider "${n.name}" added.`),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),dt.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await Gt.saveProviderConfig(i),e(h=>{const p=h.dbProviderConfigs.findIndex(g=>g.id===n);p!==-1&&(h.dbProviderConfigs[p]=i)});const o=t().globalModelSortOrder;let s=[...o],u=!1;const c=(i.fetchedModels??If[i.type]??[]).map(h=>cm(n,h.id)),f=new Set((i.enabledModels??[]).map(h=>cm(n,h)));r.isEnabled===!1?(s=s.filter(h=>!c.includes(h)),u=!0):(r.isEnabled===!0||r.enabledModels)&&(s=s.filter(h=>!c.includes(h)||f.has(h)),f.forEach(h=>{s.includes(h)||s.push(h)}),u=!0),(JSON.stringify(s)!==JSON.stringify(o)||u)&&await t().setGlobalModelSortOrder(s)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),dt.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await Gt.deleteProviderConfig(n);const i=(r.fetchedModels??If[r.type]??[]).map(u=>cm(n,u.id)),s=t().globalModelSortOrder.filter(u=>!i.includes(u));e(u=>{u.dbProviderConfigs=u.dbProviderConfigs.filter(c=>c.id!==n)}),await t().setGlobalModelSortOrder(s),dt.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),dt.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){dt.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(u=>u.id===i))==null?void 0:a.value,s=await Tfe(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),dt.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{var s,u;const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Gt.saveSetting(I6,r);const a=t().selectedModelId,i=t().getGloballyEnabledAndOrderedModels(),o=new Set(i.map(c=>c.id));if(a&&!o.has(a)){const c=r.find(f=>o.has(f))??((s=i[0])==null?void 0:s.id)??null;console.log(`[ProviderStore] Selection ${a} invalidated by order change. Selecting ${c}`),t().selectModel(c)}else if(!a&&r.length>0){const c=r.find(f=>o.has(f))??((u=i[0])==null?void 0:u.id)??null;console.log(`[ProviderStore] No selection, selecting first from new order: ${c}`),t().selectModel(c)}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=Rfe(n);if(!i||!o)return;const s=r.find(c=>c.id===i);if(!s)return;const u=a.find(c=>c.id===s.apiKeyId);return kfe(s,o,u==null?void 0:u.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=n.type,a=[...n.fetchedModels??(If[r]||[])];return{id:n.id,name:n.name,type:n.type,allAvailableModels:a}}),getGloballyEnabledAndOrderedModels:()=>{const{dbProviderConfigs:n,globalModelSortOrder:r}=t(),a=new Map,i=new Set;n.forEach(c=>{if(!c.isEnabled||!c.enabledModels)return;const f=c.type,h=c.fetchedModels??If[f]??[],p=new Map(h.map(g=>[g.id,g]));c.enabledModels.forEach(g=>{const v=cm(c.id,g),b=p.get(g);b&&(i.add(v),a.set(v,{id:v,name:b.name||g,providerId:c.id,providerName:c.name,metadata:b.metadata}))})});const o=[],s=new Set;r.forEach(c=>{if(i.has(c)){const f=a.get(c);f&&!s.has(c)&&(o.push(f),s.add(c))}});const u=Array.from(i).filter(c=>!s.has(c)).map(c=>a.get(c)).filter(c=>!!c).sort((c,f)=>c.name.localeCompare(f.name));return[...o,...u]},getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return[];const a=r.type;return[...r.fetchedModels??(If[a]||[])].map(i=>({...i}))}})));async function O6(e,t){const n=Na.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}const Nfe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}};function Ife(){const e=yr.getState(),t=Ai.getState(),n=qr.getState(),{providerId:r}=Nfe(t.selectedModelId);return{selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme}}function Ofe(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}const Dfe=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"];function jfe(e){try{const t=e.type||"application/octet-stream",n=e.name.toLowerCase(),r=t.startsWith("text/")||t==="application/json"||Dfe.some(i=>n.endsWith(i)),a=t.startsWith("image/");if(r&&e.contentText!==void 0)return{type:"text",text:e.contentText};if(a&&e.contentBase64!==void 0)return{type:"image",image:Ofe(e.contentBase64),mimeType:t};if(!r&&e.contentBase64!==void 0)return console.warn(`AIService: Unsupported file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw new Error(`Missing content or unable to determine type for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),dt.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}class yb{static async startInteraction(t,n){var D,U,W,Q,F,Z,L,he,ie;const r=yr.getState(),a=r.currentConversationId;if(!a)return r.setError("No active conversation."),dt.error("Cannot start interaction: No active conversation."),null;const i=await O6("middleware:interaction:beforeStart",{prompt:t,conversationId:a});if(i===!1)return console.log("AIService: Interaction start cancelled by middleware."),null;const o=i&&typeof i=="object"?i.prompt:t,s=Lo(),u=new AbortController;this.activeStreams.set(s,u);const f=r.interactions.filter(ne=>ne.conversationId===a),h=f.reduce((ne,ee)=>Math.max(ne,ee.index),-1)+1,p=f.length>0?f[f.length-1].id:null,g=[...o.messages];let v=-1;for(let ne=g.length-1;ne>=0;ne--)if(g[ne].role==="user"){v=ne;break}if(v!==-1&&((D=n.metadata)!=null&&D.attachedFiles)&&n.metadata.attachedFiles.length>0){const ne=g[v],ee=n.metadata.attachedFiles.map(jfe).filter(G=>G!==null);let se=[];typeof ne.content=="string"?ne.content.trim()&&se.push({type:"text",text:ne.content}):Array.isArray(ne.content)&&(se=ne.content.filter(G=>G&&typeof G=="object"&&"type"in G&&(G.type==="text"||G.type==="image"))),g[v]={...ne,content:[...ee,...se]},console.log(`AIService: Added ${ee.length} file(s) to user message content.`)}const b={id:s,conversationId:a,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...o.metadata,attachedFiles:(U=n.metadata.attachedFiles)==null?void 0:U.map(({contentBase64:ne,contentText:ee,...se})=>se),toolCalls:[],toolResults:[]},index:h,parentId:p};r._addInteractionToState(b),r._addStreamingId(s),Gt.saveInteraction({...b}).catch(ne=>{console.error(`AIService: Failed initial persistence for ${s}`,ne)}),Ei.emit("interaction:started",{interactionId:s,conversationId:a,type:b.type});let _,x="ERROR",S,E,C,k;const O=[],N=[];try{const ne=(W=Ai.getState().getSelectedModel())==null?void 0:W.instance;if(!ne)throw new Error("Selected model instance not available.");const ee=Na.getState().getRegisteredTools(),G=(((Q=o.metadata)==null?void 0:Q.enabledTools)??[]).reduce((re,be)=>{const we=ee[be];if(we){const Me={...we.definition};we.implementation&&(Me.execute=async Pe=>{try{const Ae=Ife(),Te=we.definition.parameters.parse(Pe),qe=we.implementation;return await qe(Te,Ae)}catch(Ae){console.error(`[AIService] Error executing tool ${be} via SDK:`,Ae);const Te=Ae instanceof Error?Ae.message:String(Ae);return Ae instanceof $.ZodError?{_isError:!0,error:`Invalid arguments: ${Ae.errors.map(qe=>`${qe.path.join(".")} (${qe.message})`).join(", ")}`}:{_isError:!0,error:Te}}}),re[be]=Me}return re},{}),X=((F=o.parameters)==null?void 0:F.maxSteps)??qr.getState().toolMaxSteps,Y={model:ne,messages:g,abortSignal:u.signal,maxSteps:X};Object.keys(G).length>0&&(Y.tools=G),Y.toolChoice=o.toolChoice??(Object.keys(G).length>0?"auto":"none"),o.system&&(Y.system=o.system),o.parameters&&(o.parameters.temperature!==void 0&&(Y.temperature=o.parameters.temperature),o.parameters.max_tokens!==void 0&&(Y.maxTokens=o.parameters.max_tokens),o.parameters.top_p!==void 0&&(Y.topP=o.parameters.top_p),o.parameters.top_k!==void 0&&(Y.topK=o.parameters.top_k),o.parameters.presence_penalty!==void 0&&(Y.presencePenalty=o.parameters.presence_penalty),o.parameters.frequency_penalty!==void 0&&(Y.frequencyPenalty=o.parameters.frequency_penalty)),console.log(`AIService: Calling streamText with options for ${s}:`,{model:Y.model,messages:JSON.stringify(Y.messages),system:Y.system,temperature:Y.temperature,maxTokens:Y.maxTokens,topP:Y.topP,topK:Y.topK,presencePenalty:Y.presencePenalty,frequencyPenalty:Y.frequencyPenalty,toolChoice:Y.toolChoice,tools:Y.tools?Object.keys(Y.tools):void 0,maxSteps:Y.maxSteps}),_=await Fle(Y);for await(const re of _.fullStream){if(u.signal.aborted)throw console.log(`AIService: Stream ${s} aborted by signal.`),k="stop",new Error("Stream aborted by user.");switch(re.type){case"text-delta":{const be={interactionId:s,chunk:re.textDelta},we=await O6("middleware:interaction:processChunk",be);if(we!==!1){const Me=we&&typeof we=="object"&&"chunk"in we?we.chunk:re.textDelta;yr.getState().appendInteractionResponseChunk(s,Me),Ei.emit("interaction:stream_chunk",{interactionId:s,chunk:Me})}break}case"tool-call":{const be=JSON.stringify(re);O.push(be),yr.getState()._updateInteractionInState(s,{metadata:{...(Z=yr.getState().interactions.find(we=>we.id===s))==null?void 0:Z.metadata,toolCalls:[...O]}}),console.log(`[AIService] Tool call observed: ${re.toolName}`,re.args);break}case"tool-result":{const be=JSON.stringify(re);N.push(be),yr.getState()._updateInteractionInState(s,{metadata:{...(L=yr.getState().interactions.find(we=>we.id===s))==null?void 0:L.metadata,toolResults:[...N]}}),console.log(`[AIService] Tool result observed for ${re.toolName} (Call ID: ${re.toolCallId})`,re.result);break}case"finish":console.log("[AIService] Stream finish part received:",re),k=re.finishReason,E=re.usage,C=re.providerMetadata;break;case"error":throw console.error("[AIService] Stream error part:",re.error),k="error",new Error(`AI Stream Error: ${re.error instanceof Error?re.error.message:re.error}`);case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"file":case"tool-call-streaming-start":case"tool-call-delta":case"step-start":case"step-finish":break}}if(u.signal.aborted)throw k="stop",new Error("Stream aborted by user.");k===void 0&&(console.warn(`[AIService] Stream loop finished for ${s} without receiving a 'finish' part.`),k="other")}catch(ne){console.error(`AIService: Error during interaction ${s}:`,ne);const ee=ne instanceof Error&&ne.message==="Stream aborted by user.";k=k??(ee?"stop":"error"),S=ee?void 0:ne instanceof Error?ne.message:String(ne),ee?(console.log(`AIService: Interaction ${s} cancelled.`),dt.info("Interaction cancelled.")):dt.error(`AI Interaction Error: ${S}`)}finally{this.activeStreams.delete(s);const ne=yr.getState().activeStreamBuffers[s]||"";switch(k){case"stop":case"length":case"tool-calls":x="COMPLETED";break;case"error":x="ERROR";break;case"other":default:ne.trim()||O.length>0?(x="COMPLETED",console.warn(`[AIService] Interaction ${s} finished with reason '${k||"unknown"}', but content exists. Marking COMPLETED.`)):(x="WARNING",S=S??"Stream ended unexpectedly without output.",console.warn(`[AIService] Interaction ${s} finished with reason '${k||"unknown"}' and no content. Marking WARNING.`));break}const ee=((he=yr.getState().interactions.find(re=>re.id===s))==null?void 0:he.metadata)||b.metadata,se={status:x,endedAt:new Date,response:ne,metadata:{...ee,...E&&{promptTokens:E.promptTokens,completionTokens:E.completionTokens,totalTokens:E.totalTokens},...C&&{providerMetadata:C},...(x==="ERROR"||x==="WARNING")&&{error:S},toolCalls:O,toolResults:N,attachedFiles:(ie=b.metadata.attachedFiles)==null?void 0:ie.map(({contentBase64:re,contentText:be,...we})=>we)}};yr.getState()._updateInteractionInState(s,se),yr.getState()._removeStreamingId(s);const G=yr.getState().interactions.find(re=>re.id===s);G?yr.getState().updateInteractionAndPersist({...G}).catch(re=>{console.error(`AIService: Failed final persistence for ${s}`,re)}):console.error(`AIService: CRITICAL - Could not find final state for interaction ${s} to persist after updates. State might be inconsistent.`);let X=[],Y=[];try{X=O.map(re=>JSON.parse(re)),Y=N.map(re=>JSON.parse(re))}catch(re){console.error("[AIService] Failed to parse tool strings for event emitter:",re)}Ei.emit("interaction:completed",{interactionId:s,status:x,error:S??void 0,toolCalls:X,toolResults:Y}),console.log(`AIService: Finalized interaction ${s} with status ${x}.`)}return s}static stopInteraction(t){const n=this.activeStreams.get(t),r=yr.getState();if(n&&!n.signal.aborted)console.log(`AIService: Aborting interaction ${t}...`),n.abort();else{console.log(`AIService: No active controller found or already aborted for interaction ${t}. Attempting store cleanup if needed.`);const a=r.interactions.find(i=>i.id===t);if(a&&a.status==="STREAMING"&&(!n||n.signal.aborted)){console.warn(`AIService: Forcing CANCELLED status for interaction ${t} without active controller or already aborted.`);const i=r.activeStreamBuffers[t]||"",o={status:"CANCELLED",endedAt:new Date,response:i};r._updateInteractionInState(t,o),r._removeStreamingId(t);const s=yr.getState().interactions.find(u=>u.id===t);s&&r.updateInteractionAndPersist({...s}).catch(u=>{console.error(`AIService: Failed persistence for forced cancel of ${t}`,u)})}}}}Ha(yb,"activeStreams",new Map);const h0=Bl(zl((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Gt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),dt.error(r)}},addDbMod:async n=>{const r=Lo(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await Gt.saveMod(a),dt.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(u=>u.id!==r),s.error=o}),dt.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(u=>u.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await Gt.saveMod(o),dt.success(`Mod "${o.name}" updated.`)}catch(s){const u="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(c=>{const f=c.dbMods.findIndex(h=>h.id===n);f!==-1&&a&&(c.dbMods[f]=a,c.dbMods.sort((h,p)=>h.loadOrder-p.loadOrder)),c.error=u}),dt.error(u),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await Gt.deleteMod(n),dt.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder),s.error=o}),dt.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}}))),Mfe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}};function D6(e){const t=e.id,n=e.name,r=Na.getState(),a=h0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>r.registerChatControl(o),registerTool:(o,s,u)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,u)),on:(o,s)=>(Ei.on(o,s),()=>Ei.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=yr.getState(),s=Gr.getState(),u=qr.getState(),c=Ai.getState(),{providerId:f}=Mfe(c.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(p=>Object.freeze({...p})):[]),isStreaming:o.status==="streaming",selectedProviderId:f,selectedModelId:c.selectedModelId,activeSystemPrompt:u.globalSystemPrompt,temperature:u.temperature,maxTokens:u.maxTokens,theme:u.theme})},showToast:(o,s)=>{dt[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function Pfe(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=D6(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);a=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(u){o=u instanceof Error?u:String(u),console.error(`[ModLoader] Error loading mod "${r.name}":`,u),dt.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=D6(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Ei.emit(s.error?"mod:error":"mod:loaded",{id:r.id,name:r.name,error:s.error}),s}));return Ei.emit("app:loaded",void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var Ffe=(e,t,n,r,a,i,o,s)=>{let u=document.documentElement,c=["light","dark"];function f(g){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",_=b&&i?a.map(x=>i[x]||x):a;b?(u.classList.remove(..._),u.classList.add(i&&i[g]?i[g]:g)):u.setAttribute(v,g)}),h(g)}function h(g){s&&c.includes(g)&&(u.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(t)||n,v=o&&g==="system"?p():g;f(v)}catch{}},Lfe=R.createContext(void 0),$fe={setTheme:e=>{},themes:[]},Bfe=()=>{var e;return(e=R.useContext(Lfe))!=null?e:$fe};R.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:u,scriptProps:c})=>{let f=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return R.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Ffe.toString()})(${f})`}})});const zfe=({...e})=>{const{theme:t="system"}=Bfe();return y.jsx(pH,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function tA({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:$t("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const jF=R.memo(R.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)"},a)=>{const i=R.useRef(null),[o,s]=R.useState(e);R.useImperativeHandle(a,()=>({getValue:()=>o,focus:()=>{var p;return(p=i.current)==null?void 0:p.focus()}}));const{focusInputOnNextRender:u,setFocusInputFlag:c}=ci(Mn(p=>({focusInputOnNextRender:p.focusInputOnNextRender,setFocusInputFlag:p.setFocusInputFlag})));R.useEffect(()=>{u&&i.current&&(c(!1),requestAnimationFrame(()=>{var p;(p=i.current)==null||p.focus()}))},[u,c]);const f=p=>{p.key==="Enter"&&!p.shiftKey&&!n&&(p.preventDefault(),t())},h=p=>{s(p.target.value)};return R.useEffect(()=>{const p=i.current;if(p){p.style.height="auto";const g=p.scrollHeight,v=250;p.style.height=`${Math.min(g,v)}px`}},[o]),R.useEffect(()=>{s(e)},[e]),y.jsx(tA,{ref:i,value:o,onChange:h,onKeyDown:f,disabled:n,placeholder:r,rows:3,className:$t("w-full p-3 border border-[--border] rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-[--primary] outline-none disabled:opacity-50 overflow-y-auto","min-h-[80px] max-h-[250px]"),"aria-label":"Chat input"})}));jF.displayName="InputArea";var Ufe=R.createContext(void 0);function Lh(e){const t=R.useContext(Ufe);return e||t||"ltr"}function p0(e,[t,n]){return Math.min(n,Math.max(t,e))}function qfe(e,t){return R.useReducer((n,r)=>t[n][r]??n,e)}var nA="ScrollArea",[MF,r1e]=Ni(nA),[Hfe,Ao]=MF(nA),PF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,u]=R.useState(null),[c,f]=R.useState(null),[h,p]=R.useState(null),[g,v]=R.useState(null),[b,_]=R.useState(null),[x,S]=R.useState(0),[E,C]=R.useState(0),[k,O]=R.useState(!1),[N,D]=R.useState(!1),U=_n(t,Q=>u(Q)),W=Lh(a);return y.jsx(Hfe,{scope:n,type:r,dir:W,scrollHideDelay:i,scrollArea:s,viewport:c,onViewportChange:f,content:h,onContentChange:p,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:O,scrollbarY:b,onScrollbarYChange:_,scrollbarYEnabled:N,onScrollbarYEnabledChange:D,onCornerWidthChange:S,onCornerHeightChange:C,children:y.jsx(Jt.div,{dir:W,...o,ref:U,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});PF.displayName=nA;var FF="ScrollAreaViewport",LF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=Ao(FF,n),s=R.useRef(null),u=_n(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(Jt.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});LF.displayName=FF;var Hs="ScrollAreaScrollbar",$F=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ao(Hs,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return R.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(Vfe,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(Gfe,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(BF,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(rA,{...r,ref:t}):null});$F.displayName=Hs;var Vfe=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ao(Hs,e.__scopeScrollArea),[i,o]=R.useState(!1);return R.useEffect(()=>{const s=a.scrollArea;let u=0;if(s){const c=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(Ia,{present:n||i,children:y.jsx(BF,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Gfe=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ao(Hs,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Hw(()=>u("SCROLL_END"),100),[s,u]=qfe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return R.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,a.scrollHideDelay,u]),R.useEffect(()=>{const c=a.viewport,f=i?"scrollLeft":"scrollTop";if(c){let h=c[f];const p=()=>{const g=c[f];h!==g&&(u("SCROLL"),o()),h=g};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[a.viewport,i,u,o]),y.jsx(Ia,{present:n||s!=="hidden",children:y.jsx(rA,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Bt(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Bt(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),BF=R.forwardRef((e,t)=>{const n=Ao(Hs,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=R.useState(!1),s=e.orientation==="horizontal",u=Hw(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?c:f)}},10);return mh(n.viewport,u),mh(n.content,u),y.jsx(Ia,{present:r||i,children:y.jsx(rA,{"data-state":i?"visible":"hidden",...a,ref:t})})}),rA=R.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Ao(Hs,e.__scopeScrollArea),i=R.useRef(null),o=R.useRef(0),[s,u]=R.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=VF(s.viewport,s.content),f={...r,sizes:s,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,g){return Jfe(p,o.current,s,g)}return n==="horizontal"?y.jsx(Wfe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollLeft,g=j6(p,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=h(p,a.dir))}}):n==="vertical"?y.jsx(Kfe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollTop,g=j6(p,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=h(p))}}):null}),Wfe=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ao(Hs,e.__scopeScrollArea),[o,s]=R.useState(),u=R.useRef(null),c=_n(t,u,i.onScrollbarXChange);return R.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(UF,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":qw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(p),WF(p,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Tv(o.paddingLeft),paddingEnd:Tv(o.paddingRight)}})}})}),Kfe=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ao(Hs,e.__scopeScrollArea),[o,s]=R.useState(),u=R.useRef(null),c=_n(t,u,i.onScrollbarYChange);return R.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(UF,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":qw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(p),WF(p,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Tv(o.paddingTop),paddingEnd:Tv(o.paddingBottom)}})}})}),[Zfe,zF]=MF(Hs),UF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:f,onResize:h,...p}=e,g=Ao(Hs,n),[v,b]=R.useState(null),_=_n(t,U=>b(U)),x=R.useRef(null),S=R.useRef(""),E=g.viewport,C=r.content-r.viewport,k=ka(f),O=ka(u),N=Hw(h,10);function D(U){if(x.current){const W=U.clientX-x.current.left,Q=U.clientY-x.current.top;c({x:W,y:Q})}}return R.useEffect(()=>{const U=W=>{const Q=W.target;(v==null?void 0:v.contains(Q))&&k(W,C)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[E,v,C,k]),R.useEffect(O,[r,O]),mh(v,N),mh(g.content,N),y.jsx(Zfe,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:ka(i),onThumbPointerUp:ka(o),onThumbPositionChange:O,onThumbPointerDown:ka(s),children:y.jsx(Jt.div,{...p,ref:_,style:{position:"absolute",...p.style},onPointerDown:Bt(e.onPointerDown,U=>{U.button===0&&(U.target.setPointerCapture(U.pointerId),x.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),D(U))}),onPointerMove:Bt(e.onPointerMove,D),onPointerUp:Bt(e.onPointerUp,U=>{const W=U.target;W.hasPointerCapture(U.pointerId)&&W.releasePointerCapture(U.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),Av="ScrollAreaThumb",qF=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=zF(Av,e.__scopeScrollArea);return y.jsx(Ia,{present:n||a.hasThumb,children:y.jsx(Yfe,{ref:t,...r})})}),Yfe=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Ao(Av,n),o=zF(Av,n),{onThumbPositionChange:s}=o,u=_n(t,h=>o.onThumbChange(h)),c=R.useRef(void 0),f=Hw(()=>{c.current&&(c.current(),c.current=void 0)},100);return R.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(f(),!c.current){const g=Qfe(h,s);c.current=g,s()}};return s(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,f,s]),y.jsx(Jt.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Bt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,b=h.clientY-g.top;o.onThumbPointerDown({x:v,y:b})}),onPointerUp:Bt(e.onPointerUp,o.onThumbPointerUp)})});qF.displayName=Av;var aA="ScrollAreaCorner",HF=R.forwardRef((e,t)=>{const n=Ao(aA,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(Xfe,{...e,ref:t}):null});HF.displayName=aA;var Xfe=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Ao(aA,n),[i,o]=R.useState(0),[s,u]=R.useState(0),c=!!(i&&s);return mh(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),u(f)}),mh(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),c?y.jsx(Jt.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Tv(e){return e?parseInt(e,10):0}function VF(e,t){const n=e/t;return isNaN(n)?0:n}function qw(e){const t=VF(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Jfe(e,t,n,r="ltr"){const a=qw(n),i=a/2,o=t||i,s=a-o,u=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return GF([u,c],h)(e)}function j6(e,t,n="ltr"){const r=qw(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,u=n==="ltr"?[0,o]:[o*-1,0],c=p0(e,u);return GF([0,o],[0,s])(c)}function GF(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function WF(e,t){return e>0&&e<t}var Qfe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Hw(e,t){const n=ka(e),r=R.useRef(0);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),R.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function mh(e,t){const n=ka(t);$a(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var ehe=PF,the=LF,nhe=HF;function lg({className:e,children:t,...n}){return y.jsxs(ehe,{"data-slot":"scroll-area",className:$t("relative",e),...n,children:[y.jsx(the,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(rhe,{}),y.jsx(nhe,{})]})}function rhe({className:e,orientation:t="vertical",...n}){return y.jsx($F,{"data-slot":"scroll-area-scrollbar",orientation:t,className:$t("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(qF,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function dr({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:$t("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const ahe=(e,t)=>{if(!t)return null;let n=Kv,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Zn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=js,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=js,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=iC,r="text-green-500",a=`Synced with ${t}`;break}return y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(n,{className:$t("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(Dn,{side:"right",children:a})]})})},Rv=R.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:O,editInputRef:N})=>{const D=e.id===n,U=e.itemType==="project",W=e.id===v&&e.itemType===b,Q=U&&f.has(e.id),{projects:F,conversations:Z}=U?p(e.id,g):{projects:[],conversations:[]},L=F.length>0||Z.length>0,he=!U&&e.syncRepoId?r[e.id]:void 0,ie=!U&&e.syncRepoId?a.get(e.syncRepoId):void 0,ne=!U&&ie?ahe(he,ie):null,ee=()=>{W||(U&&L&&h(e.id),i(e.id,e.itemType))},se=re=>{re.stopPropagation(),U?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,re):o(e.id,re)},G=re=>{re.stopPropagation(),E(e)},X=re=>{re.key==="Enter"?(re.preventDefault(),C()):re.key==="Escape"&&k(U&&_==="New Project")};R.useEffect(()=>{var re,be;W&&((re=N.current)==null||re.focus(),(be=N.current)==null||be.select())},[W,N]);const Y=U?e.name:e.title;return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:$t("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!W&&"hover:bg-muted/50 hover:text-primary/80",D&&!W?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",W&&"bg-muted ring-1 ring-primary",!W&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ee,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[U&&L&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:re=>{re.stopPropagation(),h(e.id)},children:Q?y.jsx(Vv,{className:"h-3 w-3 text-muted-foreground"}):y.jsx(aC,{className:"h-3 w-3 text-muted-foreground"})}),U&&!L&&y.jsx("span",{className:"w-3 flex-shrink-0"}),U?y.jsx(Wv,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(nq,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),W?y.jsx(dr,{ref:N,value:x,onChange:re=>S(re.target.value),onKeyDown:X,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:re=>re.stopPropagation(),disabled:O}):y.jsx("span",{className:"truncate pr-1",children:Y}),ne]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:W?y.jsxs(y.Fragment,{children:[y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-green-500 hover:text-green-600",onClick:re=>{re.stopPropagation(),C()},disabled:O||!x.trim()||x.trim()===_,"aria-label":"Save changes",children:O?y.jsx(Zn,{className:"h-3 w-3 animate-spin"}):y.jsx(_o,{className:"h-3 w-3"})}),y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:re=>{re.stopPropagation(),k(U&&_==="New Project")},disabled:O,"aria-label":"Cancel edit",children:y.jsx(Ul,{className:"h-3 w-3"})})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:G,"aria-label":`Edit ${Y}`,children:y.jsx(lC,{className:"h-3 w-3"})})}),y.jsx(Dn,{side:"top",children:"Edit"})]})}),U?y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:re=>c(e.id,re),"aria-label":`Export project ${Y}`,children:y.jsx(SU,{className:"h-3 w-3"})})}),y.jsx(Dn,{side:"top",children:"Export Project (JSON)"})]})}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx("div",{className:"p-1 rounded hover:bg-muted cursor-pointer","aria-label":`Export ${Y}`,children:y.jsx(kb,{className:"h-3 w-3 text-muted-foreground group-hover/export:text-foreground"})})}),y.jsx(Dn,{side:"top",children:"Export Conversation"})]})}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:re=>re.stopPropagation(),children:[y.jsx(Lt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:re=>u(e.id,"json",re),children:"JSON"}),y.jsx(Lt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:re=>u(e.id,"md",re),children:"MD"})]})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-destructive hover:text-destructive/80",onClick:se,"aria-label":`Delete ${Y}`,children:y.jsx(Uu,{className:"h-3 w-3"})})}),y.jsx(Dn,{side:"top",children:"Delete"})]})})]})})]},e.id),U&&Q&&y.jsxs(y.Fragment,{children:[F.sort((re,be)=>be.updatedAt.getTime()-re.updatedAt.getTime()).map(re=>y.jsx(Rv,{item:{...re,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:O,editInputRef:N},re.id)),Z.sort((re,be)=>be.updatedAt.getTime()-re.updatedAt.getTime()).map(re=>y.jsx(Rv,{item:{...re,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:O,editInputRef:N},re.id))]})]})});Rv.displayName="ConversationItemRenderer";const ihe=({updateProject:e,updateConversation:t,deleteProject:n})=>{const[r,a]=R.useState(null),[i,o]=R.useState(null),[s,u]=R.useState(""),[c,f]=R.useState(""),[h,p]=R.useState(!1),g=R.useRef(null),v=R.useCallback(S=>{a(S.id),o(S.itemType);const E=S.itemType==="project"?S.name:S.title;u(E),f(E),p(!1)},[]),b=R.useCallback(()=>{a(null),o(null),u(""),f(""),p(!1)},[]),_=R.useCallback(async()=>{if(!r||!i||h)return;const S=c.trim();if(!S||S===s){S||dt.error("Name cannot be empty."),b();return}p(!0);try{i==="project"?await e(r,{name:S}):await t(r,{title:S}),b()}catch(E){console.error("Failed to save edit:",E),p(!1)}},[r,i,c,s,h,e,t,b]),x=R.useCallback((S=!1)=>{S&&i==="project"&&s==="New Project"&&r&&n(r).catch(E=>{console.error("Failed to delete new project on cancel:",E),dt.error("Failed to clean up new project.")}),b()},[r,i,s,n,b]);return{editingItemId:r,editingItemType:i,editingName:s,localEditingName:c,setLocalEditingName:f,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:_,handleCancelEdit:x}},jE=(e,t,n,r,a,i,o,s,u)=>{if(!n)return!0;const c=`${t}-${e}`;if(u[c]!==void 0)return u[c];let f=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))f=!0;else{const p=s.get(e)||[],g=o.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){f=!0;break}if(!f){for(const v of p)if(jE(v.id,"project",n,r,a,i,o,s,u)){f=!0;break}}}}return u[c]=f,f},ohe=()=>{const{conversations:e,projects:t,selectItem:n,selectedItemId:r,selectedItemType:a,addConversation:i,updateConversation:o,deleteConversation:s,addProject:u,updateProject:c,deleteProject:f,exportConversation:h,exportProject:p,isLoading:g,syncRepos:v,conversationSyncStatus:b,getConversationById:_,getProjectById:x}=Gr(Mn(Ie=>({conversations:Ie.conversations,projects:Ie.projects,selectItem:Ie.selectItem,selectedItemId:Ie.selectedItemId,selectedItemType:Ie.selectedItemType,addConversation:Ie.addConversation,updateConversation:Ie.updateConversation,deleteConversation:Ie.deleteConversation,addProject:Ie.addProject,updateProject:Ie.updateProject,deleteProject:Ie.deleteProject,exportConversation:Ie.exportConversation,exportProject:Ie.exportProject,isLoading:Ie.isLoading,syncRepos:Ie.syncRepos,conversationSyncStatus:Ie.conversationSyncStatus,getConversationById:Ie.getConversationById,getProjectById:Ie.getProjectById}))),S=ci(Ie=>Ie.setFocusInputFlag),[E,C]=vt.useState(new Set),[k,O]=R.useState(""),{editingItemId:N,editingItemType:D,editingName:U,localEditingName:W,setLocalEditingName:Q,isSavingEdit:F,editInputRef:Z,handleStartEditing:L,handleSaveEdit:he,handleCancelEdit:ie}=ihe({updateProject:c,updateConversation:o,deleteProject:f,getProjectById:x,getConversationById:_}),ne=R.useCallback(Ie=>{C(Re=>{const z=new Set(Re);return z.has(Ie)?z.delete(Ie):z.add(Ie),z})},[]),ee=R.useCallback(()=>{if(a==="project")return r;if(a==="conversation"&&r){const Ie=_(r);return(Ie==null?void 0:Ie.projectId)??null}return null},[r,a,_]),se=R.useCallback(async()=>{if(!N)try{const Ie=ee(),Re=await i({title:"New Chat",projectId:Ie});n(Re,"conversation"),setTimeout(()=>S(!0),0)}catch(Ie){console.error("Failed to create new chat:",Ie),dt.error("Failed to create new chat.")}},[N,ee,i,n,S]),G=R.useCallback(async()=>{if(!N)try{const Ie=ee(),Re=await u({name:"New Project",parentId:Ie});n(Re,"project"),C(z=>new Set(z).add(Re)),setTimeout(()=>{const z=x(Re);z?L({...z,itemType:"project"}):(console.warn("New project data not found immediately, using fallback"),L({id:Re,itemType:"project",name:"New Project",parentId:Ie,createdAt:new Date,updatedAt:new Date,path:"/New Project"}))},50)}catch(Ie){console.error("Failed to create new project:",Ie)}},[N,ee,u,n,x,L]),X=R.useCallback((Ie,Re)=>{Ie!==N&&(N&&Ie!==N&&(W.trim()&&W.trim()!==U?he():ie(D==="project"&&U==="New Project")),!(Ie===r&&Re===a)&&(n(Ie,Re),Re==="conversation"&&setTimeout(()=>S(!0),0)))},[N,D,U,W,r,a,he,ie,n,S]),Y=R.useCallback((Ie,Re)=>{Re.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&s(Ie).catch(z=>{console.error("Failed to delete conversation:",z),dt.error("Failed to delete conversation.")})},[s]),re=R.useCallback((Ie,Re)=>{Re.stopPropagation(),f(Ie).catch(z=>{console.error("Failed to delete project:",z),dt.error("Failed to delete project.")})},[f]),be=R.useCallback(async(Ie,Re,z)=>{z.stopPropagation();try{await h(Ie,Re)}catch(Ce){console.error(`Failed to export conversation as ${Re}:`,Ce)}},[h]),we=R.useCallback(async(Ie,Re)=>{Re.stopPropagation();try{await p(Ie)}catch(z){console.error("Failed to export project:",z)}},[p]),Me=R.useMemo(()=>new Map(v.map(Ie=>[Ie.id,Ie.name])),[v]),{projectsById:Pe,conversationsByProjectId:Ae,projectsByParentId:Te}=R.useMemo(()=>{const Ie=new Map(t.map(Ce=>[Ce.id,Ce])),Re=new Map;e.forEach(Ce=>{const Ne=Ce.projectId??null;Re.has(Ne)||Re.set(Ne,[]),Re.get(Ne).push(Ce)});const z=new Map;return t.forEach(Ce=>{const Ne=Ce.parentId??null;z.has(Ne)||z.set(Ne,[]),z.get(Ne).push(Ce)}),{projectsById:Ie,conversationsByProjectId:Re,projectsByParentId:z}},[t,e]),qe=R.useCallback((Ie,Re)=>{const z=Re.toLowerCase(),Ce={},Ne=(Te.get(Ie)||[]).filter(ae=>jE(ae.id,"project",z,t,e,Pe,Ae,Te,Ce)),ce=(Ae.get(Ie)||[]).filter(ae=>ae.title.toLowerCase().includes(z));return Ne.sort((ae,J)=>J.updatedAt.getTime()-ae.updatedAt.getTime()),ce.sort((ae,J)=>J.updatedAt.getTime()-ae.updatedAt.getTime()),{projects:Ne,conversations:ce}},[t,e,Pe,Ae,Te]),it=R.useMemo(()=>{const Ie=k.toLowerCase(),Re={},z=(Te.get(null)||[]).filter(ce=>jE(ce.id,"project",Ie,t,e,Pe,Ae,Te,Re)),Ce=(Ae.get(null)||[]).filter(ce=>ce.title.toLowerCase().includes(Ie)),Ne=[...z.map(ce=>({...ce,itemType:"project"})),...Ce.map(ce=>({...ce,itemType:"conversation"}))];return Ne.sort((ce,ae)=>ae.updatedAt.getTime()-ce.updatedAt.getTime()),Ne},[t,e,k,Pe,Ae,Te]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{size:"sm",variant:"ghost",onClick:G,"aria-label":"New Project",disabled:g||!!N,className:"h-7 w-7 p-0",children:y.jsx(sC,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"bottom",children:"New Project"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{size:"sm",variant:"ghost",onClick:se,"aria-label":"New Chat",disabled:g||!!N,className:"h-7 w-7 p-0",children:y.jsx(Zv,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(Yv,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(dr,{type:"search",placeholder:"Filter...",value:k,onChange:Ie=>O(Ie.target.value),className:"h-8 text-xs pl-8",disabled:g})]}),y.jsx(lg,{className:"flex-grow",children:g?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"})]}):it.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:k.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:it.map(Ie=>y.jsx(Rv,{item:Ie,level:0,selectedItemId:r,conversationSyncStatus:b,repoNameMap:Me,onSelectItem:X,onDeleteConversation:Y,onDeleteProject:re,onExportConversation:be,onExportProject:we,expandedProjects:E,toggleProjectExpansion:ne,getChildren:qe,filterText:k,editingItemId:N,editingItemType:D,editingName:U,localEditingName:W,setLocalEditingName:Q,handleStartEditing:L,handleSaveEdit:he,handleCancelEdit:ie,isSavingEdit:F,editInputRef:Z},Ie.id))})})]})},she=()=>{const{addConversation:e,addProject:t,selectItem:n,selectedItemId:r,selectedItemType:a,getConversationById:i}=Gr(Mn(f=>({addConversation:f.addConversation,addProject:f.addProject,selectItem:f.selectItem,selectedItemId:f.selectedItemId,selectedItemType:f.selectedItemType,getConversationById:f.getConversationById}))),o=ci(f=>f.setFocusInputFlag),s=()=>{if(a==="project")return r;if(a==="conversation"&&r){const f=i(r);return(f==null?void 0:f.projectId)??null}return null},u=async()=>{try{const f=s(),h=await e({title:"New Chat",projectId:f});n(h,"conversation"),setTimeout(()=>o(!0),0)}catch(f){console.error("Failed to create new chat:",f)}},c=async()=>{try{const f=s(),h=await t({name:"New Project",parentId:f});n(h,"project")}catch(f){console.error("Failed to create new project:",f)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(sC,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"right",children:"New Project"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(Zv,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"right",children:"New Chat"})]})})]})},lhe=()=>{const e=Na(n=>n.registerChatControl),t=Gr(n=>n.isLoading);return vt.useEffect(()=>e({id:"core-conversation-list",status:()=>t?"loading":"ready",panel:"sidebar",renderer:()=>y.jsx(ohe,{}),iconRenderer:()=>y.jsx(she,{}),show:()=>!0,order:10}),[e,t]),null};var f2="focusScope.autoFocusOnMount",h2="focusScope.autoFocusOnUnmount",M6={bubbles:!1,cancelable:!0},uhe="FocusScope",ug=R.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,u]=R.useState(null),c=ka(a),f=ka(i),h=R.useRef(null),p=_n(t,b=>u(b)),g=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(r){let b=function(E){if(g.paused||!s)return;const C=E.target;s.contains(C)?h.current=C:Iu(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const C=E.relatedTarget;C!==null&&(s.contains(C)||Iu(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&Iu(s)};document.addEventListener("focusin",b),document.addEventListener("focusout",_);const S=new MutationObserver(x);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,g.paused]),R.useEffect(()=>{if(s){F6.add(g);const b=document.activeElement;if(!s.contains(b)){const x=new CustomEvent(f2,M6);s.addEventListener(f2,c),s.dispatchEvent(x),x.defaultPrevented||(che(mhe(KF(s)),{select:!0}),document.activeElement===b&&Iu(s))}return()=>{s.removeEventListener(f2,c),setTimeout(()=>{const x=new CustomEvent(h2,M6);s.addEventListener(h2,f),s.dispatchEvent(x),x.defaultPrevented||Iu(b??document.body,{select:!0}),s.removeEventListener(h2,f),F6.remove(g)},0)}}},[s,c,f,g]);const v=R.useCallback(b=>{if(!n&&!r||g.paused)return;const _=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(_&&x){const S=b.currentTarget,[E,C]=dhe(S);E&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Iu(E,{select:!0})):b.shiftKey&&x===E&&(b.preventDefault(),n&&Iu(C,{select:!0})):x===S&&b.preventDefault()}},[n,r,g.paused]);return y.jsx(Jt.div,{tabIndex:-1,...o,ref:p,onKeyDown:v})});ug.displayName=uhe;function che(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Iu(r,{select:t}),document.activeElement!==n)return}function dhe(e){const t=KF(e),n=P6(t,e),r=P6(t.reverse(),e);return[n,r]}function KF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function P6(e,t){for(const n of e)if(!fhe(n,{upTo:t}))return n}function fhe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function hhe(e){return e instanceof HTMLInputElement&&"select"in e}function Iu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&hhe(e)&&t&&e.select()}}var F6=phe();function phe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=L6(e,t),e.unshift(t)},remove(t){var n;e=L6(e,t),(n=e[0])==null||n.resume()}}}function L6(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function mhe(e){return e.filter(t=>t.tagName!=="A")}var p2=0;function Vw(){R.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??$6()),document.body.insertAdjacentElement("beforeend",e[1]??$6()),p2++,()=>{p2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),p2--}},[])}function $6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ts=function(){return Ts=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ts.apply(this,arguments)};function ZF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function ghe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var bb="right-scroll-bar-position",vb="width-before-scroll-bar",yhe="with-scroll-bars-hidden",bhe="--removed-body-scroll-bar-size";function m2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vhe(e,t){var n=R.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var whe=typeof window<"u"?R.useLayoutEffect:R.useEffect,B6=new WeakMap;function _he(e,t){var n=vhe(null,function(r){return e.forEach(function(a){return m2(a,r)})});return whe(function(){var r=B6.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||m2(s,null)}),i.forEach(function(s){a.has(s)||m2(s,o)})}B6.set(n,e)},[e]),n}function xhe(e){return e}function She(e,t){t===void 0&&(t=xhe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var u=function(){var f=o;o=[],f.forEach(i)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(f){o.push(f),c()},filter:function(f){return o=o.filter(f),n}}}};return a}function Ehe(e){e===void 0&&(e={});var t=She(null);return t.options=Ts({async:!0,ssr:!1},e),t}var YF=function(e){var t=e.sideCar,n=ZF(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,Ts({},n))};YF.isSideCarExport=!0;function Che(e,t){return e.useMedium(t),YF}var XF=Ehe(),g2=function(){},Gw=R.forwardRef(function(e,t){var n=R.useRef(null),r=R.useState({onScrollCapture:g2,onWheelCapture:g2,onTouchMoveCapture:g2}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,u=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,g=e.noIsolation,v=e.inert,b=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,S=e.gapMode,E=ZF(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,k=_he([n,t]),O=Ts(Ts({},E),a);return R.createElement(R.Fragment,null,f&&R.createElement(C,{sideCar:XF,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),o?R.cloneElement(R.Children.only(s),Ts(Ts({},O),{ref:k})):R.createElement(x,Ts({},O,{className:u,ref:k}),s))});Gw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gw.classNames={fullWidth:vb,zeroRight:bb};var khe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ahe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=khe();return t&&e.setAttribute("nonce",t),e}function The(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Rhe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Nhe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Ahe())&&(The(t,n),Rhe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ihe=function(){var e=Nhe();return function(t,n){R.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},JF=function(){var e=Ihe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Ohe={left:0,top:0,right:0,gap:0},y2=function(e){return parseInt(e||"",10)||0},Dhe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[y2(n),y2(r),y2(a)]},jhe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ohe;var t=Dhe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Mhe=JF(),Hf="data-scroll-locked",Phe=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(yhe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Hf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bb,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(vb,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(bb," .").concat(bb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(vb," .").concat(vb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Hf,`] {
    `).concat(bhe,": ").concat(s,`px;
  }
`)},z6=function(){var e=parseInt(document.body.getAttribute(Hf)||"0",10);return isFinite(e)?e:0},Fhe=function(){R.useEffect(function(){return document.body.setAttribute(Hf,(z6()+1).toString()),function(){var e=z6()-1;e<=0?document.body.removeAttribute(Hf):document.body.setAttribute(Hf,e.toString())}},[])},Lhe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Fhe();var i=R.useMemo(function(){return jhe(a)},[a]);return R.createElement(Mhe,{styles:Phe(i,!t,a,n?"":"!important")})},ME=!1;if(typeof window<"u")try{var nb=Object.defineProperty({},"passive",{get:function(){return ME=!0,!0}});window.addEventListener("test",nb,nb),window.removeEventListener("test",nb,nb)}catch{ME=!1}var kf=ME?{passive:!1}:!1,$he=function(e){return e.tagName==="TEXTAREA"},QF=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!$he(e)&&n[t]==="visible")},Bhe=function(e){return QF(e,"overflowY")},zhe=function(e){return QF(e,"overflowX")},U6=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=eL(e,r);if(a){var i=tL(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Uhe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},qhe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},eL=function(e,t){return e==="v"?Bhe(t):zhe(t)},tL=function(e,t){return e==="v"?Uhe(t):qhe(t)},Hhe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Vhe=function(e,t,n,r,a){var i=Hhe(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,u=t.contains(s),c=!1,f=o>0,h=0,p=0;do{var g=tL(e,s),v=g[0],b=g[1],_=g[2],x=b-_-i*v;(v||x)&&eL(e,s)&&(h+=x,p+=v),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(c=!0),c},rb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},q6=function(e){return[e.deltaX,e.deltaY]},H6=function(e){return e&&"current"in e?e.current:e},Ghe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Whe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Khe=0,Af=[];function Zhe(e){var t=R.useRef([]),n=R.useRef([0,0]),r=R.useRef(),a=R.useState(Khe++)[0],i=R.useState(JF)[0],o=R.useRef(e);R.useEffect(function(){o.current=e},[e]),R.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=ghe([e.lockRef.current],(e.shards||[]).map(H6),!0).filter(Boolean);return b.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=R.useCallback(function(b,_){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var x=rb(b),S=n.current,E="deltaX"in b?b.deltaX:S[0]-x[0],C="deltaY"in b?b.deltaY:S[1]-x[1],k,O=b.target,N=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&N==="h"&&O.type==="range")return!1;var D=U6(N,O);if(!D)return!0;if(D?k=N:(k=N==="v"?"h":"v",D=U6(N,O)),!D)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=k),!k)return!0;var U=r.current||k;return Vhe(U,_,b,U==="h"?E:C)},[]),u=R.useCallback(function(b){var _=b;if(!(!Af.length||Af[Af.length-1]!==i)){var x="deltaY"in _?q6(_):rb(_),S=t.current.filter(function(k){return k.name===_.type&&(k.target===_.target||_.target===k.shadowParent)&&Ghe(k.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(H6).filter(Boolean).filter(function(k){return k.contains(_.target)}),C=E.length>0?s(_,E[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),c=R.useCallback(function(b,_,x,S){var E={name:b,delta:_,target:x,should:S,shadowParent:Yhe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),f=R.useCallback(function(b){n.current=rb(b),r.current=void 0},[]),h=R.useCallback(function(b){c(b.type,q6(b),b.target,s(b,e.lockRef.current))},[]),p=R.useCallback(function(b){c(b.type,rb(b),b.target,s(b,e.lockRef.current))},[]);R.useEffect(function(){return Af.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",u,kf),document.addEventListener("touchmove",u,kf),document.addEventListener("touchstart",f,kf),function(){Af=Af.filter(function(b){return b!==i}),document.removeEventListener("wheel",u,kf),document.removeEventListener("touchmove",u,kf),document.removeEventListener("touchstart",f,kf)}},[]);var g=e.removeScrollBar,v=e.inert;return R.createElement(R.Fragment,null,v?R.createElement(i,{styles:Whe(a)}):null,g?R.createElement(Lhe,{gapMode:e.gapMode}):null)}function Yhe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Xhe=Che(XF,Zhe);var cg=R.forwardRef(function(e,t){return R.createElement(Gw,Ts({},e,{ref:t,sideCar:Xhe}))});cg.classNames=Gw.classNames;var Jhe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Tf=new WeakMap,ab=new WeakMap,ib={},b2=0,nL=function(e){return e&&(e.host||nL(e.parentNode))},Qhe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=nL(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},epe=function(e,t,n,r){var a=Qhe(t,Array.isArray(e)?e:[e]);ib[n]||(ib[n]=new WeakMap);var i=ib[n],o=[],s=new Set,u=new Set(a),c=function(h){!h||s.has(h)||(s.add(h),c(h.parentNode))};a.forEach(c);var f=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(p){if(s.has(p))f(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",b=(Tf.get(p)||0)+1,_=(i.get(p)||0)+1;Tf.set(p,b),i.set(p,_),o.push(p),b===1&&v&&ab.set(p,!0),_===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return f(t),s.clear(),b2++,function(){o.forEach(function(h){var p=Tf.get(h)-1,g=i.get(h)-1;Tf.set(h,p),i.set(h,g),p||(ab.has(h)||h.removeAttribute(r),ab.delete(h)),g||h.removeAttribute(n)}),b2--,b2||(Tf=new WeakMap,Tf=new WeakMap,ab=new WeakMap,ib={})}},Ww=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Jhe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),epe(r,a,n,"aria-hidden")):function(){return null}},Kw="Dialog",[rL,a1e]=Ni(Kw),[tpe,rs]=rL(Kw),aL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=R.useRef(null),u=R.useRef(null),[c,f]=Ps({prop:r,defaultProp:a??!1,onChange:i,caller:Kw});return y.jsx(tpe,{scope:t,triggerRef:s,contentRef:u,contentId:Za(),titleId:Za(),descriptionId:Za(),open:c,onOpenChange:f,onOpenToggle:R.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};aL.displayName=Kw;var iL="DialogTrigger",oL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=rs(iL,n),i=_n(t,a.triggerRef);return y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":sA(a.open),...r,ref:i,onClick:Bt(e.onClick,a.onOpenToggle)})});oL.displayName=iL;var iA="DialogPortal",[npe,sL]=rL(iA,{forceMount:void 0}),lL=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=rs(iA,t);return y.jsx(npe,{scope:t,forceMount:n,children:R.Children.map(r,o=>y.jsx(Ia,{present:n||i.open,children:y.jsx(xh,{asChild:!0,container:a,children:o})}))})};lL.displayName=iA;var Nv="DialogOverlay",uL=R.forwardRef((e,t)=>{const n=sL(Nv,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=rs(Nv,e.__scopeDialog);return i.modal?y.jsx(Ia,{present:r||i.open,children:y.jsx(ape,{...a,ref:t})}):null});uL.displayName=Nv;var rpe=zu("DialogOverlay.RemoveScroll"),ape=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=rs(Nv,n);return y.jsx(cg,{as:rpe,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(Jt.div,{"data-state":sA(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),fd="DialogContent",cL=R.forwardRef((e,t)=>{const n=sL(fd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=rs(fd,e.__scopeDialog);return y.jsx(Ia,{present:r||i.open,children:i.modal?y.jsx(ipe,{...a,ref:t}):y.jsx(ope,{...a,ref:t})})});cL.displayName=fd;var ipe=R.forwardRef((e,t)=>{const n=rs(fd,e.__scopeDialog),r=R.useRef(null),a=_n(t,n.contentRef,r);return R.useEffect(()=>{const i=r.current;if(i)return Ww(i)},[]),y.jsx(dL,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Bt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:Bt(e.onFocusOutside,i=>i.preventDefault())})}),ope=R.forwardRef((e,t)=>{const n=rs(fd,e.__scopeDialog),r=R.useRef(!1),a=R.useRef(!1);return y.jsx(dL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),dL=R.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=rs(fd,n),u=R.useRef(null),c=_n(t,u);return Vw(),y.jsxs(y.Fragment,{children:[y.jsx(ug,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(vh,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":sA(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(spe,{titleId:s.titleId}),y.jsx(upe,{contentRef:u,descriptionId:s.descriptionId})]})]})}),oA="DialogTitle",fL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=rs(oA,n);return y.jsx(Jt.h2,{id:a.titleId,...r,ref:t})});fL.displayName=oA;var hL="DialogDescription",pL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=rs(hL,n);return y.jsx(Jt.p,{id:a.descriptionId,...r,ref:t})});pL.displayName=hL;var mL="DialogClose",gL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=rs(mL,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Bt(e.onClick,()=>a.onOpenChange(!1))})});gL.displayName=mL;function sA(e){return e?"open":"closed"}var yL="DialogTitleWarning",[i1e,bL]=yH(yL,{contentName:fd,titleName:oA,docsSlug:"dialog"}),spe=({titleId:e})=>{const t=bL(yL),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return R.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},lpe="DialogDescriptionWarning",upe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${bL(lpe).contentName}}.`;return R.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},vL=aL,cpe=oL,wL=lL,_L=uL,xL=cL,dpe=fL,fpe=pL,SL=gL;function Zw({...e}){return y.jsx(vL,{"data-slot":"dialog",...e})}function hpe({...e}){return y.jsx(cpe,{"data-slot":"dialog-trigger",...e})}function ppe({...e}){return y.jsx(wL,{"data-slot":"dialog-portal",...e})}function mpe({...e}){return y.jsx(SL,{"data-slot":"dialog-close",...e})}function gpe({className:e,...t}){return y.jsx(_L,{"data-slot":"dialog-overlay",className:$t("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Yw({className:e,children:t,...n}){return y.jsxs(ppe,{"data-slot":"dialog-portal",children:[y.jsx(gpe,{}),y.jsxs(xL,{"data-slot":"dialog-content",className:$t("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(SL,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(Ul,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Xw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:$t("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Jw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:$t("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Qw({className:e,...t}){return y.jsx(dpe,{"data-slot":"dialog-title",className:$t("text-lg leading-none font-semibold",e),...t})}function e1({className:e,...t}){return y.jsx(fpe,{"data-slot":"dialog-description",className:$t("text-muted-foreground text-sm",e),...t})}function t1(e){const t=e+"CollectionProvider",[n,r]=Ni(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:_,children:x}=b,S=vt.useRef(null),E=vt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:S,children:x})};o.displayName=t;const s=e+"CollectionSlot",u=zu(s),c=vt.forwardRef((b,_)=>{const{scope:x,children:S}=b,E=i(s,x),C=_n(_,E.collectionRef);return y.jsx(u,{ref:C,children:S})});c.displayName=s;const f=e+"CollectionItemSlot",h="data-radix-collection-item",p=zu(f),g=vt.forwardRef((b,_)=>{const{scope:x,children:S,...E}=b,C=vt.useRef(null),k=_n(_,C),O=i(f,x);return vt.useEffect(()=>(O.itemMap.set(C,{ref:C,...E}),()=>void O.itemMap.delete(C))),y.jsx(p,{[h]:"",ref:k,children:S})});g.displayName=f;function v(b){const _=i(e+"CollectionConsumer",b);return vt.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((O,N)=>E.indexOf(O.ref.current)-E.indexOf(N.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var v2="rovingFocusGroup.onEntryFocus",ype={bubbles:!1,cancelable:!0},dg="RovingFocusGroup",[PE,EL,bpe]=t1(dg),[vpe,n1]=Ni(dg,[bpe]),[wpe,_pe]=vpe(dg),CL=R.forwardRef((e,t)=>y.jsx(PE.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(PE.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(xpe,{...e,ref:t})})}));CL.displayName=dg;var xpe=R.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=e,p=R.useRef(null),g=_n(t,p),v=Lh(i),[b,_]=Ps({prop:o,defaultProp:s??null,onChange:u,caller:dg}),[x,S]=R.useState(!1),E=ka(c),C=EL(n),k=R.useRef(!1),[O,N]=R.useState(0);return R.useEffect(()=>{const D=p.current;if(D)return D.addEventListener(v2,E),()=>D.removeEventListener(v2,E)},[E]),y.jsx(wpe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:R.useCallback(D=>_(D),[_]),onItemShiftTab:R.useCallback(()=>S(!0),[]),onFocusableItemAdd:R.useCallback(()=>N(D=>D+1),[]),onFocusableItemRemove:R.useCallback(()=>N(D=>D-1),[]),children:y.jsx(Jt.div,{tabIndex:x||O===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Bt(e.onMouseDown,()=>{k.current=!0}),onFocus:Bt(e.onFocus,D=>{const U=!k.current;if(D.target===D.currentTarget&&U&&!x){const W=new CustomEvent(v2,ype);if(D.currentTarget.dispatchEvent(W),!W.defaultPrevented){const Q=C().filter(ie=>ie.focusable),F=Q.find(ie=>ie.active),Z=Q.find(ie=>ie.id===b),he=[F,Z,...Q].filter(Boolean).map(ie=>ie.ref.current);TL(he,f)}}k.current=!1}),onBlur:Bt(e.onBlur,()=>S(!1))})})}),kL="RovingFocusGroupItem",AL=R.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,u=Za(),c=i||u,f=_pe(kL,n),h=f.currentTabStopId===c,p=EL(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=f;return R.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),y.jsx(PE.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:y.jsx(Jt.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...s,ref:t,onMouseDown:Bt(e.onMouseDown,_=>{r?f.onItemFocus(c):_.preventDefault()}),onFocus:Bt(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:Bt(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=Cpe(_,f.orientation,f.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=p().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(_.currentTarget);E=f.loop?kpe(E,C+1):E.slice(C+1)}setTimeout(()=>TL(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:b!=null}):o})})});AL.displayName=kL;var Spe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Epe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Cpe(e,t,n){const r=Epe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Spe[r]}function TL(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function kpe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var RL=CL,NL=AL,r1="Tabs",[Ape,o1e]=Ni(r1,[n1]),IL=n1(),[Tpe,lA]=Ape(r1),OL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:u="automatic",...c}=e,f=Lh(s),[h,p]=Ps({prop:r,onChange:a,defaultProp:i??"",caller:r1});return y.jsx(Tpe,{scope:n,baseId:Za(),value:h,onValueChange:p,orientation:o,dir:f,activationMode:u,children:y.jsx(Jt.div,{dir:f,"data-orientation":o,...c,ref:t})})});OL.displayName=r1;var DL="TabsList",jL=R.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=lA(DL,n),o=IL(n);return y.jsx(RL,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(Jt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});jL.displayName=DL;var ML="TabsTrigger",PL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=lA(ML,n),s=IL(n),u=$L(o.baseId,r),c=BL(o.baseId,r),f=r===o.value;return y.jsx(NL,{asChild:!0,...s,focusable:!a,active:f,children:y.jsx(Jt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:Bt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Bt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Bt(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!a&&h&&o.onValueChange(r)})})})});PL.displayName=ML;var FL="TabsContent",LL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=lA(FL,n),u=$L(s.baseId,r),c=BL(s.baseId,r),f=r===s.value,h=R.useRef(f);return R.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),y.jsx(Ia,{present:a||f,children:({present:p})=>y.jsx(Jt.div,{"data-state":f?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});LL.displayName=FL;function $L(e,t){return`${e}-trigger-${t}`}function BL(e,t){return`${e}-content-${t}`}var Rpe=OL,Npe=jL,Ipe=PL,Ope=LL;function w2({className:e,...t}){return y.jsx(Rpe,{"data-slot":"tabs",className:$t("flex flex-col gap-2",e),...t})}function _2({className:e,...t}){return y.jsx(Npe,{"data-slot":"tabs-list",className:$t("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function fo({className:e,...t}){return y.jsx(Ipe,{"data-slot":"tabs-trigger",className:$t("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ho({className:e,...t}){return y.jsx(Ope,{"data-slot":"tabs-content",className:$t("flex-1 outline-none",e),...t})}var Dpe="Label",zL=R.forwardRef((e,t)=>y.jsx(Jt.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));zL.displayName=Dpe;var jpe=zL;function An({className:e,...t}){return y.jsx(jpe,{"data-slot":"label",className:$t("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function a1(e){const t=R.useRef({value:e,previous:e});return R.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var i1="Switch",[Mpe,s1e]=Ni(i1),[Ppe,Fpe]=Mpe(i1),UL=R.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[p,g]=R.useState(null),v=_n(t,E=>g(E)),b=R.useRef(!1),_=p?f||!!p.closest("form"):!0,[x,S]=Ps({prop:a,defaultProp:i??!1,onChange:c,caller:i1});return y.jsxs(Ppe,{scope:n,checked:x,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":GL(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onClick:Bt(e.onClick,E=>{S(C=>!C),_&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),_&&y.jsx(VL,{control:p,bubbles:!b.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"}})]})});UL.displayName=i1;var qL="SwitchThumb",HL=R.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Fpe(qL,n);return y.jsx(Jt.span,{"data-state":GL(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});HL.displayName=qL;var Lpe="SwitchBubbleInput",VL=R.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=R.useRef(null),s=_n(o,i),u=a1(n),c=ew(t);return R.useEffect(()=>{const f=o.current;if(!f)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&g){const v=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(v)}},[u,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});VL.displayName=Lpe;function GL(e){return e?"checked":"unchecked"}var $pe=UL,Bpe=HL;function Ll({className:e,...t}){return y.jsx($pe,{"data-slot":"switch",className:$t("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Bpe,{"data-slot":"switch-thumb",className:$t("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var zpe=[" ","Enter","ArrowUp","ArrowDown"],Upe=[" ","Enter"],hd="Select",[o1,s1,qpe]=t1(hd),[$h,l1e]=Ni(hd,[qpe,uc]),l1=uc(),[Hpe,vc]=$h(hd),[Vpe,Gpe]=$h(hd),WL=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:u,dir:c,name:f,autoComplete:h,disabled:p,required:g,form:v}=e,b=l1(t),[_,x]=R.useState(null),[S,E]=R.useState(null),[C,k]=R.useState(!1),O=Lh(c),[N,D]=Ps({prop:r,defaultProp:a??!1,onChange:i,caller:hd}),[U,W]=Ps({prop:o,defaultProp:s,onChange:u,caller:hd}),Q=R.useRef(null),F=_?v||!!_.closest("form"):!0,[Z,L]=R.useState(new Set),he=Array.from(Z).map(ie=>ie.props.value).join(";");return y.jsx(tw,{...b,children:y.jsxs(Hpe,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:Za(),value:U,onValueChange:W,open:N,onOpenChange:D,dir:O,triggerPointerDownPosRef:Q,disabled:p,children:[y.jsx(o1.Provider,{scope:t,children:y.jsx(Vpe,{scope:e.__scopeSelect,onNativeOptionAdd:R.useCallback(ie=>{L(ne=>new Set(ne).add(ie))},[]),onNativeOptionRemove:R.useCallback(ie=>{L(ne=>{const ee=new Set(ne);return ee.delete(ie),ee})},[]),children:n})}),F?y.jsxs(m9,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:U,onChange:ie=>W(ie.target.value),disabled:p,form:v,children:[U===void 0?y.jsx("option",{value:""}):null,Array.from(Z)]},he):null]})})};WL.displayName=hd;var KL="SelectTrigger",ZL=R.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=l1(n),o=vc(KL,n),s=o.disabled||r,u=_n(t,o.onTriggerChange),c=s1(n),f=R.useRef("touch"),[h,p,g]=y9(b=>{const _=c().filter(E=>!E.disabled),x=_.find(E=>E.value===o.value),S=b9(_,b,x);S!==void 0&&o.onValueChange(S.value)}),v=b=>{s||(o.onOpenChange(!0),g()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return y.jsx(x0,{asChild:!0,...i,children:y.jsx(Jt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":g9(o.value)?"":void 0,...a,ref:u,onClick:Bt(a.onClick,b=>{b.currentTarget.focus(),f.current!=="mouse"&&v(b)}),onPointerDown:Bt(a.onPointerDown,b=>{f.current=b.pointerType;const _=b.target;_.hasPointerCapture(b.pointerId)&&_.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:Bt(a.onKeyDown,b=>{const _=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(_&&b.key===" ")&&zpe.includes(b.key)&&(v(),b.preventDefault())})})})});ZL.displayName=KL;var YL="SelectValue",XL=R.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,u=vc(YL,n),{onValueNodeHasChildrenChange:c}=u,f=i!==void 0,h=_n(t,u.onValueNodeChange);return $a(()=>{c(f)},[c,f]),y.jsx(Jt.span,{...s,ref:h,style:{pointerEvents:"none"},children:g9(u.value)?y.jsx(y.Fragment,{children:o}):i})});XL.displayName=YL;var Wpe="SelectIcon",JL=R.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(Jt.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});JL.displayName=Wpe;var Kpe="SelectPortal",QL=e=>y.jsx(xh,{asChild:!0,...e});QL.displayName=Kpe;var pd="SelectContent",e9=R.forwardRef((e,t)=>{const n=vc(pd,e.__scopeSelect),[r,a]=R.useState();if($a(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Rs.createPortal(y.jsx(t9,{scope:e.__scopeSelect,children:y.jsx(o1.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(n9,{...e,ref:t})});e9.displayName=pd;var Po=10,[t9,wc]=$h(pd),Zpe="SelectContentImpl",Ype=zu("SelectContent.RemoveScroll"),n9=R.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_,...x}=e,S=vc(pd,n),[E,C]=R.useState(null),[k,O]=R.useState(null),N=_n(t,Pe=>C(Pe)),[D,U]=R.useState(null),[W,Q]=R.useState(null),F=s1(n),[Z,L]=R.useState(!1),he=R.useRef(!1);R.useEffect(()=>{if(E)return Ww(E)},[E]),Vw();const ie=R.useCallback(Pe=>{const[Ae,...Te]=F().map(Ie=>Ie.ref.current),[qe]=Te.slice(-1),it=document.activeElement;for(const Ie of Pe)if(Ie===it||(Ie==null||Ie.scrollIntoView({block:"nearest"}),Ie===Ae&&k&&(k.scrollTop=0),Ie===qe&&k&&(k.scrollTop=k.scrollHeight),Ie==null||Ie.focus(),document.activeElement!==it))return},[F,k]),ne=R.useCallback(()=>ie([D,E]),[ie,D,E]);R.useEffect(()=>{Z&&ne()},[Z,ne]);const{onOpenChange:ee,triggerPointerDownPosRef:se}=S;R.useEffect(()=>{if(E){let Pe={x:0,y:0};const Ae=qe=>{var it,Ie;Pe={x:Math.abs(Math.round(qe.pageX)-(((it=se.current)==null?void 0:it.x)??0)),y:Math.abs(Math.round(qe.pageY)-(((Ie=se.current)==null?void 0:Ie.y)??0))}},Te=qe=>{Pe.x<=10&&Pe.y<=10?qe.preventDefault():E.contains(qe.target)||ee(!1),document.removeEventListener("pointermove",Ae),se.current=null};return se.current!==null&&(document.addEventListener("pointermove",Ae),document.addEventListener("pointerup",Te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",Te,{capture:!0})}}},[E,ee,se]),R.useEffect(()=>{const Pe=()=>ee(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[ee]);const[G,X]=y9(Pe=>{const Ae=F().filter(it=>!it.disabled),Te=Ae.find(it=>it.ref.current===document.activeElement),qe=b9(Ae,Pe,Te);qe&&setTimeout(()=>qe.ref.current.focus())}),Y=R.useCallback((Pe,Ae,Te)=>{const qe=!he.current&&!Te;(S.value!==void 0&&S.value===Ae||qe)&&(U(Pe),qe&&(he.current=!0))},[S.value]),re=R.useCallback(()=>E==null?void 0:E.focus(),[E]),be=R.useCallback((Pe,Ae,Te)=>{const qe=!he.current&&!Te;(S.value!==void 0&&S.value===Ae||qe)&&Q(Pe)},[S.value]),we=r==="popper"?FE:r9,Me=we===FE?{side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_}:{};return y.jsx(t9,{scope:n,content:E,viewport:k,onViewportChange:O,itemRefCallback:Y,selectedItem:D,onItemLeave:re,itemTextRefCallback:be,focusSelectedItem:ne,selectedItemText:W,position:r,isPositioned:Z,searchRef:G,children:y.jsx(cg,{as:Ype,allowPinchZoom:!0,children:y.jsx(ug,{asChild:!0,trapped:S.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:Bt(a,Pe=>{var Ae;(Ae=S.trigger)==null||Ae.focus({preventScroll:!0}),Pe.preventDefault()}),children:y.jsx(vh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(we,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Pe=>Pe.preventDefault(),...x,...Me,onPlaced:()=>L(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Bt(x.onKeyDown,Pe=>{const Ae=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Ae&&Pe.key.length===1&&X(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let qe=F().filter(it=>!it.disabled).map(it=>it.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&(qe=qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const it=Pe.target,Ie=qe.indexOf(it);qe=qe.slice(Ie+1)}setTimeout(()=>ie(qe)),Pe.preventDefault()}})})})})})})});n9.displayName=Zpe;var Xpe="SelectItemAlignedPosition",r9=R.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=vc(pd,n),o=wc(pd,n),[s,u]=R.useState(null),[c,f]=R.useState(null),h=_n(t,N=>f(N)),p=s1(n),g=R.useRef(!1),v=R.useRef(!0),{viewport:b,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,E=R.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&b&&_&&x){const N=i.trigger.getBoundingClientRect(),D=c.getBoundingClientRect(),U=i.valueNode.getBoundingClientRect(),W=x.getBoundingClientRect();if(i.dir!=="rtl"){const it=W.left-D.left,Ie=U.left-it,Re=N.left-Ie,z=N.width+Re,Ce=Math.max(z,D.width),Ne=window.innerWidth-Po,ce=p0(Ie,[Po,Math.max(Po,Ne-Ce)]);s.style.minWidth=z+"px",s.style.left=ce+"px"}else{const it=D.right-W.right,Ie=window.innerWidth-U.right-it,Re=window.innerWidth-N.right-Ie,z=N.width+Re,Ce=Math.max(z,D.width),Ne=window.innerWidth-Po,ce=p0(Ie,[Po,Math.max(Po,Ne-Ce)]);s.style.minWidth=z+"px",s.style.right=ce+"px"}const Q=p(),F=window.innerHeight-Po*2,Z=b.scrollHeight,L=window.getComputedStyle(c),he=parseInt(L.borderTopWidth,10),ie=parseInt(L.paddingTop,10),ne=parseInt(L.borderBottomWidth,10),ee=parseInt(L.paddingBottom,10),se=he+ie+Z+ee+ne,G=Math.min(_.offsetHeight*5,se),X=window.getComputedStyle(b),Y=parseInt(X.paddingTop,10),re=parseInt(X.paddingBottom,10),be=N.top+N.height/2-Po,we=F-be,Me=_.offsetHeight/2,Pe=_.offsetTop+Me,Ae=he+ie+Pe,Te=se-Ae;if(Ae<=be){const it=Q.length>0&&_===Q[Q.length-1].ref.current;s.style.bottom="0px";const Ie=c.clientHeight-b.offsetTop-b.offsetHeight,Re=Math.max(we,Me+(it?re:0)+Ie+ne),z=Ae+Re;s.style.height=z+"px"}else{const it=Q.length>0&&_===Q[0].ref.current;s.style.top="0px";const Re=Math.max(be,he+b.offsetTop+(it?Y:0)+Me)+Te;s.style.height=Re+"px",b.scrollTop=Ae-be+b.offsetTop}s.style.margin=`${Po}px 0`,s.style.minHeight=G+"px",s.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,s,c,b,_,x,i.dir,r]);$a(()=>E(),[E]);const[C,k]=R.useState();$a(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const O=R.useCallback(N=>{N&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return y.jsx(Qpe,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(Jt.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});r9.displayName=Xpe;var Jpe="SelectPopperPosition",FE=R.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Po,...i}=e,o=l1(n);return y.jsx(nw,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});FE.displayName=Jpe;var[Qpe,uA]=$h(pd,{}),LE="SelectViewport",a9=R.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=wc(LE,n),o=uA(LE,n),s=_n(t,i.onViewportChange),u=R.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(o1.Slot,{scope:n,children:y.jsx(Jt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Bt(a.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const g=Math.abs(u.current-f.scrollTop);if(g>0){const v=window.innerHeight-Po*2,b=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(b,_);if(x<v){const S=x+g,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});a9.displayName=LE;var i9="SelectGroup",[eme,tme]=$h(i9),nme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Za();return y.jsx(eme,{scope:n,id:a,children:y.jsx(Jt.div,{role:"group","aria-labelledby":a,...r,ref:t})})});nme.displayName=i9;var o9="SelectLabel",rme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=tme(o9,n);return y.jsx(Jt.div,{id:a.id,...r,ref:t})});rme.displayName=o9;var Iv="SelectItem",[ame,s9]=$h(Iv),l9=R.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=vc(Iv,n),u=wc(Iv,n),c=s.value===r,[f,h]=R.useState(i??""),[p,g]=R.useState(!1),v=_n(t,S=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,S,r,a)}),b=Za(),_=R.useRef("touch"),x=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(ame,{scope:n,value:r,disabled:a,textId:b,isSelected:c,onItemTextChange:R.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(o1.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:y.jsx(Jt.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:Bt(o.onFocus,()=>g(!0)),onBlur:Bt(o.onBlur,()=>g(!1)),onClick:Bt(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:Bt(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:Bt(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:Bt(o.onPointerMove,S=>{var E;_.current=S.pointerType,a?(E=u.onItemLeave)==null||E.call(u):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Bt(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:Bt(o.onKeyDown,S=>{var C;((C=u.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(Upe.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});l9.displayName=Iv;var pm="SelectItemText",u9=R.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=vc(pm,n),s=wc(pm,n),u=s9(pm,n),c=Gpe(pm,n),[f,h]=R.useState(null),p=_n(t,x=>h(x),u.onItemTextChange,x=>{var S;return(S=s.itemTextRefCallback)==null?void 0:S.call(s,x,u.value,u.disabled)}),g=f==null?void 0:f.textContent,v=R.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:_}=c;return $a(()=>(b(v),()=>_(v)),[b,_,v]),y.jsxs(y.Fragment,{children:[y.jsx(Jt.span,{id:u.textId,...i,ref:p}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Rs.createPortal(i.children,o.valueNode):null]})});u9.displayName=pm;var c9="SelectItemIndicator",d9=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s9(c9,n).isSelected?y.jsx(Jt.span,{"aria-hidden":!0,...r,ref:t}):null});d9.displayName=c9;var $E="SelectScrollUpButton",f9=R.forwardRef((e,t)=>{const n=wc($E,e.__scopeSelect),r=uA($E,e.__scopeSelect),[a,i]=R.useState(!1),o=_n(t,r.onScrollButtonChange);return $a(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollTop>0;i(c)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(p9,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});f9.displayName=$E;var BE="SelectScrollDownButton",h9=R.forwardRef((e,t)=>{const n=wc(BE,e.__scopeSelect),r=uA(BE,e.__scopeSelect),[a,i]=R.useState(!1),o=_n(t,r.onScrollButtonChange);return $a(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<c;i(f)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(p9,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});h9.displayName=BE;var p9=R.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=wc("SelectScrollButton",n),o=R.useRef(null),s=s1(n),u=R.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return R.useEffect(()=>()=>u(),[u]),$a(()=>{var f;const c=s().find(h=>h.ref.current===document.activeElement);(f=c==null?void 0:c.ref.current)==null||f.scrollIntoView({block:"nearest"})},[s]),y.jsx(Jt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Bt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Bt(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Bt(a.onPointerLeave,()=>{u()})})}),ime="SelectSeparator",ome=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(Jt.div,{"aria-hidden":!0,...r,ref:t})});ome.displayName=ime;var zE="SelectArrow",sme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=l1(n),i=vc(zE,n),o=wc(zE,n);return i.open&&o.position==="popper"?y.jsx(rw,{...a,...r,ref:t}):null});sme.displayName=zE;var lme="SelectBubbleInput",m9=R.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=R.useRef(null),i=_n(r,a),o=a1(t);return R.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.select,{...n,style:{...hD,...n.style},ref:i,defaultValue:t})});m9.displayName=lme;function g9(e){return e===""||e===void 0}function y9(e){const t=ka(e),n=R.useRef(""),r=R.useRef(0),a=R.useCallback(o=>{const s=n.current+o;t(s),function u(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(s)},[t]),i=R.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function b9(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=ume(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function ume(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var cme=WL,dme=ZL,fme=XL,hme=JL,pme=QL,mme=e9,gme=a9,yme=l9,bme=u9,vme=d9,wme=f9,_me=h9;function Bh({...e}){return y.jsx(cme,{"data-slot":"select",...e})}function zh({...e}){return y.jsx(fme,{"data-slot":"select-value",...e})}function Uh({className:e,size:t="default",children:n,...r}){return y.jsxs(dme,{"data-slot":"select-trigger","data-size":t,className:$t("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(hme,{asChild:!0,children:y.jsx(Vv,{className:"size-4 opacity-50"})})]})}function qh({className:e,children:t,position:n="popper",...r}){return y.jsx(pme,{children:y.jsxs(mme,{"data-slot":"select-content",className:$t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(xme,{}),y.jsx(gme,{className:$t("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(Sme,{})]})})}function Wi({className:e,children:t,...n}){return y.jsxs(yme,{"data-slot":"select-item",className:$t("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx(vme,{children:y.jsx(_o,{className:"size-4"})})}),y.jsx(bme,{children:t})]})}function xme({className:e,...t}){return y.jsx(wme,{"data-slot":"select-scroll-up-button",className:$t("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(lU,{className:"size-4"})})}function Sme({className:e,...t}){return y.jsx(_me,{"data-slot":"select-scroll-down-button",className:$t("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(Vv,{className:"size-4"})})}var v9=["PageUp","PageDown"],w9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Hh="Slider",[UE,Eme,Cme]=t1(Hh),[x9,u1e]=Ni(Hh,[Cme]),[kme,u1]=x9(Hh),S9=R.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:u=0,defaultValue:c=[r],value:f,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:v,...b}=e,_=R.useRef(new Set),x=R.useRef(0),E=o==="horizontal"?Ame:Tme,[C=[],k]=Ps({prop:f,defaultProp:c,onChange:Q=>{var Z;(Z=[..._.current][x.current])==null||Z.focus(),h(Q)}}),O=R.useRef(C);function N(Q){const F=Dme(C,Q);W(Q,F)}function D(Q){W(Q,x.current)}function U(){const Q=O.current[x.current];C[x.current]!==Q&&p(C)}function W(Q,F,{commit:Z}={commit:!1}){const L=Fme(i),he=Lme(Math.round((Q-r)/i)*i+r,L),ie=p0(he,[r,a]);k((ne=[])=>{const ee=Ime(ne,ie,F);if(Pme(ee,u*i)){x.current=ee.indexOf(ie);const se=String(ee)!==String(ne);return se&&Z&&p(ee),se?ee:ne}else return ne})}return y.jsx(kme,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:C,orientation:o,form:v,children:y.jsx(UE.Provider,{scope:e.__scopeSlider,children:y.jsx(UE.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...b,ref:t,onPointerDown:Bt(b.onPointerDown,()=>{s||(O.current=C)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:N,onSlideMove:s?void 0:D,onSlideEnd:s?void 0:U,onHomeKeyDown:()=>!s&&W(r,0,{commit:!0}),onEndKeyDown:()=>!s&&W(a,C.length-1,{commit:!0}),onStepKeyDown:({event:Q,direction:F})=>{if(!s){const he=v9.includes(Q.key)||Q.shiftKey&&w9.includes(Q.key)?10:1,ie=x.current,ne=C[ie],ee=i*he*F;W(ne+ee,ie,{commit:!0})}}})})})})});S9.displayName=Hh;var[E9,C9]=x9(Hh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ame=R.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:u,onStepKeyDown:c,...f}=e,[h,p]=R.useState(null),g=_n(t,E=>p(E)),v=R.useRef(void 0),b=Lh(a),_=b==="ltr",x=_&&!i||!_&&i;function S(E){const C=v.current||h.getBoundingClientRect(),k=[0,C.width],N=cA(k,x?[n,r]:[r,n]);return v.current=C,N(E-C.left)}return y.jsx(E9,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(k9,{dir:b,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);s==null||s(C)},onSlideEnd:()=>{v.current=void 0,u==null||u()},onStepKeyDown:E=>{const k=_9[x?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:k?-1:1})}})})}),Tme=R.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:u,...c}=e,f=R.useRef(null),h=_n(t,f),p=R.useRef(void 0),g=!a;function v(b){const _=p.current||f.current.getBoundingClientRect(),x=[0,_.height],E=cA(x,g?[r,n]:[n,r]);return p.current=_,E(b-_.top)}return y.jsx(E9,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(k9,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const _=v(b.clientY);i==null||i(_)},onSlideMove:b=>{const _=v(b.clientY);o==null||o(_)},onSlideEnd:()=>{p.current=void 0,s==null||s()},onStepKeyDown:b=>{const x=_9[g?"from-bottom":"from-top"].includes(b.key);u==null||u({event:b,direction:x?-1:1})}})})}),k9=R.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:u,...c}=e,f=u1(Hh,n);return y.jsx(Jt.span,{...c,ref:t,onKeyDown:Bt(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):v9.concat(w9).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:Bt(e.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(p)?p.focus():r(h)}),onPointerMove:Bt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Bt(e.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),A9="SliderTrack",T9=R.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=u1(A9,n);return y.jsx(Jt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});T9.displayName=A9;var qE="SliderRange",R9=R.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=u1(qE,n),i=C9(qE,n),o=R.useRef(null),s=_n(t,o),u=a.values.length,c=a.values.map(p=>O9(p,a.min,a.max)),f=u>1?Math.min(...c):0,h=100-Math.max(...c);return y.jsx(Jt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:h+"%"}})});R9.displayName=qE;var HE="SliderThumb",N9=R.forwardRef((e,t)=>{const n=Eme(e.__scopeSlider),[r,a]=R.useState(null),i=_n(t,s=>a(s)),o=R.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(Rme,{...e,ref:i,index:o})}),Rme=R.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=u1(HE,n),s=C9(HE,n),[u,c]=R.useState(null),f=_n(t,S=>c(S)),h=u?o.form||!!u.closest("form"):!0,p=ew(u),g=o.values[r],v=g===void 0?0:O9(g,o.min,o.max),b=Ome(r,o.values.length),_=p==null?void 0:p[s.size],x=_?jme(_,v,s.direction):0;return R.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${v}% + ${x}px)`},children:[y.jsx(UE.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(Jt.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:Bt(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx(I9,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});N9.displayName=HE;var Nme="RadioBubbleInput",I9=R.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=R.useRef(null),i=_n(a,r),o=a1(t);return R.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("input",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});I9.displayName=Nme;function Ime(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function O9(e,t,n){const i=100/(n-t)*(e-t);return p0(i,[0,100])}function Ome(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Dme(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function jme(e,t,n){const r=e/2,i=cA([0,50],[0,r]);return(r-i(t)*n)*n}function Mme(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Pme(e,t){if(t>0){const n=Mme(e);return Math.min(...n)>=t}return!0}function cA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Fme(e){return(String(e).split(".")[1]||"").length}function Lme(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var $me=S9,Bme=T9,zme=R9,Ume=N9;function Lf({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=R.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs($me,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:$t("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx(Bme,{"data-slot":"slider-track",className:$t("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx(zme,{"data-slot":"slider-range",className:$t("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,u)=>y.jsx(Ume,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}var qme="Separator",V6="horizontal",Hme=["horizontal","vertical"],D9=R.forwardRef((e,t)=>{const{decorative:n,orientation:r=V6,...a}=e,i=Vme(r)?r:V6,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(Jt.div,{"data-orientation":i,...s,...a,ref:t})});D9.displayName=qme;function Vme(e){return Hme.includes(e)}var Gme=D9;function Ov({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(Gme,{"data-slot":"separator-root",decorative:n,orientation:t,className:$t("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const Wme=()=>{const{theme:e,setTheme:t,enableAdvancedSettings:n,setEnableAdvancedSettings:r,enableStreamingMarkdown:a,setEnableStreamingMarkdown:i,streamingRenderFPS:o,setStreamingRenderFPS:s,streamingCodeRenderFPS:u,setStreamingCodeRenderFPS:c,resetGeneralSettings:f}=qr(Mn(O=>({theme:O.theme,setTheme:O.setTheme,enableAdvancedSettings:O.enableAdvancedSettings,setEnableAdvancedSettings:O.setEnableAdvancedSettings,enableStreamingMarkdown:O.enableStreamingMarkdown,setEnableStreamingMarkdown:O.setEnableStreamingMarkdown,streamingRenderFPS:O.streamingRenderFPS,setStreamingRenderFPS:O.setStreamingRenderFPS,streamingCodeRenderFPS:O.streamingCodeRenderFPS,setStreamingCodeRenderFPS:O.setStreamingCodeRenderFPS,resetGeneralSettings:O.resetGeneralSettings}))),[h,p]=R.useState(o),[g,v]=R.useState(u),b=R.useCallback(O=>{p(O[0])},[]),_=R.useCallback(O=>{s(O[0])},[s]),x=R.useCallback(O=>{const N=O.target.value,D=N===""?30:parseInt(N.replace(/[^0-9]/g,""),10);if(!isNaN(D)){const U=Math.max(1,Math.min(60,D));s(U),p(U)}},[s]),S=R.useCallback(O=>{v(O[0])},[]),E=R.useCallback(O=>{c(O[0])},[c]),C=R.useCallback(O=>{const N=O.target.value,D=N===""?10:parseInt(N.replace(/[^0-9]/g,""),10);if(!isNaN(D)){const U=Math.max(1,Math.min(60,D));c(U),v(U)}},[c]);R.useEffect(()=>{p(o)},[o]),R.useEffect(()=>{v(u)},[u]);const k=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&f()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(An,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(Bh,{value:e??"system",onValueChange:O=>t(O),children:[y.jsx(Uh,{id:"theme-select",className:"w-[180px]",children:y.jsx(zh,{placeholder:"Select theme"})}),y.jsxs(qh,{children:[y.jsx(Wi,{value:"light",children:"Light"}),y.jsx(Wi,{value:"dark",children:"Dark"}),y.jsx(Wi,{value:"system",children:"System"})]})]})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(An,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx(Ll,{id:"streaming-markdown-switch",checked:a??!0,onCheckedChange:i})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(An,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["General Streaming Update Rate (",h," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how smoothly streaming text appears. (Default: 30)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Lf,{id:"streaming-fps-slider",min:1,max:60,step:1,value:[h],onValueChange:b,onValueCommit:_,className:"flex-grow"}),y.jsx(dr,{type:"number",min:1,max:60,step:1,value:h,onChange:x,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(An,{htmlFor:"streaming-code-fps-slider",className:"font-medium",children:["Code Block Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Specific update rate when code blocks are streaming (lower values reduce lag). (Default: 10)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Lf,{id:"streaming-code-fps-slider",min:1,max:60,step:1,value:[g],onValueChange:S,onValueCommit:E,className:"flex-grow"}),y.jsx(dr,{type:"number",min:1,max:60,step:1,value:g,onChange:C,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(Ov,{}),y.jsxs("div",{className:"space-y-2 hidden",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Advanced Settings"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(An,{htmlFor:"advanced-settings-switch",className:"font-medium",children:"Enable Advanced Controls"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Show controls for AI parameters (temperature, etc.) and Assistant settings tab."})]}),y.jsx(Ll,{id:"advanced-settings-switch",checked:n??!1,onCheckedChange:r})]})]}),y.jsx(Ov,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(Lt,{variant:"outline",size:"sm",onClick:k,children:[y.jsx(mq,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},Kme=vt.memo(Wme),Zme=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r}=qr(Mn(i=>({globalSystemPrompt:i.globalSystemPrompt,setGlobalSystemPrompt:i.setGlobalSystemPrompt,toolMaxSteps:i.toolMaxSteps,setToolMaxSteps:i.setToolMaxSteps}))),a=i=>{const o=i.target.value,s=o===""?5:parseInt(o,10);isNaN(s)||r(s)};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),y.jsx(An,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),y.jsx(tA,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:i=>t(i.target.value),rows:4})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),y.jsx(An,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),y.jsx(dr,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:a,className:"w-24"})]})]})},Yme=vt.memo(Zme);function c1({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:$t("w-full caption-bottom text-sm",e),...t})})}function d1({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:$t("[&_tr]:border-b",e),...t})}function f1({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:$t("[&_tr:last-child]:border-0",e),...t})}function Gi({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:$t("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function sa({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:$t("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function vr({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:$t("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const Xme=()=>{const{addApiKey:e,deleteApiKey:t,enableApiKeyManagement:n,dbApiKeys:r,dbProviderConfigs:a,isLoading:i}=Ai(Mn(N=>({addApiKey:N.addApiKey,deleteApiKey:N.deleteApiKey,enableApiKeyManagement:N.enableApiKeyManagement,dbApiKeys:N.dbApiKeys,dbProviderConfigs:N.dbProviderConfigs,isLoading:N.isLoading}))),[o,s]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(""),[p,g]=R.useState(!1),[v,b]=R.useState({}),[_,x]=R.useState({}),S=R.useCallback(async N=>{if(N.preventDefault(),!o.trim()||!u.trim()||!f){dt.error("Please fill in all fields for the API key.");return}g(!0);try{await e(o.trim(),f,u.trim()),s(""),c(""),h("")}catch(D){console.error("Failed to add API key (from component):",D)}finally{g(!1)}},[e,o,u,f]),E=R.useCallback(async(N,D)=>{if(window.confirm(`Are you sure you want to delete the API key "${D}"? This will also unlink it from any providers using it. This action cannot be undone.`)){b(U=>({...U,[N]:!0}));try{await t(N),x(U=>{const W={...U};return delete W[N],W})}catch(U){console.error("Failed to delete API key (from component):",U)}finally{b(U=>({...U,[N]:!1}))}}},[t]),C=R.useMemo(()=>{const N=new Map;return(r||[]).forEach(D=>{const U=(a||[]).filter(W=>W.apiKeyId===D.id);N.set(D.id,U.length===0?"Not linked":U.map(W=>W.name).join(", "))}),N},[r,a]);if(!n)return y.jsxs("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400 flex items-center justify-center gap-2 bg-gray-800/30 rounded-md border border-dashed border-gray-700 min-h-[200px]",children:[y.jsx(UO,{className:"h-5 w-5"}),"API Key Management is disabled in the configuration."]});const k=N=>{x(D=>({...D,[N]:!D[N]}))},O=N=>({openai:"OpenAI",google:"Google",openrouter:"OpenRouter","openai-compatible":"OpenAI-Compatible"})[N]||"Unknown/Custom";return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Add New API Key"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(An,{htmlFor:"new-key-name",children:"Name"}),y.jsx(dr,{id:"new-key-name",value:o,onChange:N=>s(N.target.value),placeholder:"e.g., My Personal Key",required:!0,className:"mt-1",disabled:p})]}),y.jsxs("div",{children:[y.jsx(An,{htmlFor:"new-key-provider-type",children:"Intended Provider Type"}),y.jsxs(Bh,{value:f,onValueChange:h,required:!0,disabled:p,children:[y.jsx(Uh,{id:"new-key-provider-type",className:"mt-1",children:y.jsx(zh,{placeholder:"Select Type..."})}),y.jsxs(qh,{children:[y.jsx(Wi,{value:"openai",children:"OpenAI"}),y.jsx(Wi,{value:"google",children:"Google"}),y.jsx(Wi,{value:"openrouter",children:"OpenRouter"}),y.jsx(Wi,{value:"openai-compatible",children:"OpenAI-Compatible"})]})]})]}),y.jsxs("div",{children:[y.jsx(An,{htmlFor:"new-key-value",children:"API Key Value"}),y.jsx(dr,{id:"new-key-value",type:"password",value:u,onChange:N=>c(N.target.value),placeholder:"Paste your API key here",required:!0,className:"mt-1",disabled:p})]})]}),y.jsxs(Lt,{type:"submit",disabled:p,children:[p&&y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Key"]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Stored API Keys"}),i?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"})]}):(r||[]).length===0?y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No API keys stored yet. Add one above. Link keys to providers in the 'Providers' tab."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(c1,{children:[y.jsx(d1,{children:y.jsxs(Gi,{children:[y.jsx(sa,{children:"Name"}),y.jsx(sa,{children:"Type"}),y.jsx(sa,{children:"Linked To"}),y.jsx(sa,{children:"Key Value"}),y.jsx(sa,{className:"text-right",children:"Actions"})]})}),y.jsx(f1,{children:(r||[]).map(N=>{const D=v[N.id];return y.jsxs(Gi,{children:[y.jsx(vr,{className:"font-medium",children:N.name}),y.jsx(vr,{children:O(N.providerId)}),y.jsx(vr,{className:"text-xs text-muted-foreground",children:C.get(N.id)??"Not linked"}),y.jsx(vr,{children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-mono text-xs",children:_[N.id]?N.value:""}),y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>k(N.id),className:"h-6 w-6","aria-label":_[N.id]?"Hide key":"Show key",disabled:D,children:_[N.id]?y.jsx(yU,{className:"h-4 w-4"}):y.jsx(vU,{className:"h-4 w-4"})})]})}),y.jsx(vr,{className:"text-right",children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>E(N.id,N.name),className:"text-red-600 hover:text-red-700 h-8 w-8","aria-label":`Delete key ${N.name}`,disabled:D,children:D?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(Uu,{className:"h-4 w-4"})})})]},N.id)})})]})})]})]})},Jme=vt.memo(Xme),Qme=()=>{const{importConversation:e,exportAllConversations:t}=Gr(Mn(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=R.useRef(null),[r,a]=R.useState(!1),[i,o]=R.useState(!1),[s,u]=R.useState(!1),c=()=>{var g;(g=n.current)==null||g.click()},f=R.useCallback(async g=>{var b;const v=(b=g.target.files)==null?void 0:b[0];if(v){a(!0);try{await e(v)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=R.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),p=R.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await Gt.clearAllData(),dt.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const v="Failed to clear all data";console.error(v,g),dt.error(`${v}: ${g instanceof Error?g.message:String(g)}`),u(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:f,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(Lt,{onClick:c,variant:"outline",disabled:r,children:[r?y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Iq,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(Lt,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(kb,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(Lt,{onClick:p,variant:"destructive",disabled:s,children:[s?y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Uu,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},e0e=vt.memo(Qme),t0e=tC("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function n0e({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:$t(t0e({variant:t}),e),...n})}function r0e({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:$t("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function a0e({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:$t("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const i0e=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=h0(Mn(O=>({loadedMods:O.loadedMods,addDbMod:O.addDbMod,updateDbMod:O.updateDbMod,deleteDbMod:O.deleteDbMod,dbMods:O.dbMods,isLoading:O.isLoading}))),[o,s]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(""),[p,g]=R.useState(!1),[v,b]=R.useState({}),[_,x]=R.useState({}),S=R.useCallback(async()=>{if(!o.trim()){dt.error("Mod name cannot be empty.");return}if(!u.trim()&&!f.trim()){dt.error("Either Mod URL or Script Content must be provided.");return}if(u.trim()&&f.trim()){dt.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const O={name:o.trim(),sourceUrl:u.trim()||null,scriptContent:f.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(O),s(""),c(""),h(""),dt.info("Mod added. Reload required for changes to take effect.")}catch(O){console.error("Failed to add mod (from component):",O)}finally{g(!1)}},[o,u,f,t,a==null?void 0:a.length]),E=R.useCallback(async O=>{b(N=>({...N,[O.id]:!0}));try{await n(O.id,{enabled:!O.enabled}),dt.info(`Mod "${O.name}" ${O.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(N){console.error("Failed to update mod (from component):",N)}finally{b(N=>({...N,[O.id]:!1}))}},[n]),C=R.useCallback(async O=>{if(window.confirm(`Are you sure you want to delete the mod "${O.name}"? This cannot be undone.`)){x(N=>({...N,[O.id]:!0}));try{await r(O.id),dt.info("Mod deleted. Reload required for changes to take effect.")}catch(N){console.error("Failed to delete mod (from component):",N)}finally{x(N=>({...N,[O.id]:!1}))}}},[r]),k=R.useCallback(O=>{const N=e.find(U=>U.id===O);if(N)if(N.error){const U=N.error instanceof Error?N.error.message:String(N.error);return{status:"Error",error:N.error,tooltip:U}}else return{status:"Loaded"};const D=(a||[]).find(U=>U.id===O);return D?D.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(n0e,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(Tq,{className:"h-4 w-4"}),y.jsx(r0e,{children:"Security Warning"}),y.jsx(a0e,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(An,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(dr,{id:"mod-name",value:o,onChange:O=>s(O.target.value),placeholder:"My Awesome Mod",disabled:p})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(An,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(dr,{id:"mod-url",type:"url",value:u,onChange:O=>c(O.target.value),placeholder:"https://example.com/my-mod.js",disabled:p||!!f.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(An,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(tA,{id:"mod-script",value:f,onChange:O=>h(O.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:p||!!u.trim()})]}),y.jsxs(Lt,{onClick:S,disabled:p,children:[p&&y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(kn,{delayDuration:100,children:y.jsxs(c1,{children:[y.jsx(d1,{children:y.jsxs(Gi,{children:[y.jsx(sa,{children:"Name"}),y.jsx(sa,{children:"Source"}),y.jsx(sa,{children:"Status"}),y.jsx(sa,{className:"text-center",children:"Enabled"}),y.jsx(sa,{className:"text-right",children:"Actions"})]})}),y.jsx(f1,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Gi,{children:y.jsx(vr,{colSpan:5,children:y.jsx(Mr,{className:"h-10 w-full"})})}),y.jsx(Gi,{children:y.jsx(vr,{colSpan:5,children:y.jsx(Mr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Gi,{children:y.jsx(vr,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(O=>{const{status:N,error:D,tooltip:U}=k(O.id),W=O.sourceUrl?new URL(O.sourceUrl).hostname:"Direct Script",Q=v[O.id],F=_[O.id],Z=Q||F,L=N==="Error";return y.jsxs(Gi,{children:[y.jsx(vr,{className:"font-medium",children:O.name}),y.jsx(vr,{className:"text-muted-foreground",children:W}),y.jsxs(vr,{children:[y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx("span",{className:L?"text-destructive font-semibold cursor-help":"",children:N})}),U&&y.jsx(Dn,{className:"max-w-xs break-words",children:y.jsx("p",{children:U})})]}),L&&D&&y.jsx("p",{className:"text-xs text-destructive truncate",children:D instanceof Error?D.message:String(D)})]}),y.jsxs(vr,{className:"text-center",children:[y.jsx(Ll,{checked:O.enabled??!1,onCheckedChange:()=>E(O),disabled:Z,"aria-label":`Enable ${O.name}`}),Q&&y.jsx(Zn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(vr,{className:"text-right",children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>C(O),disabled:Z,"aria-label":`Delete ${O.name}`,className:"text-destructive hover:text-destructive/80",children:F?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(Uu,{className:"h-4 w-4"})})})]},O.id)})})]})})})]})]})},o0e=vt.memo(i0e),j9=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48"})=>{const[s,u]=R.useState(""),c=R.useMemo(()=>{if(!s)return t;const f=s.toLowerCase();return t.filter(h=>h.name.toLowerCase().includes(f)||h.id.toLowerCase().includes(f))},[t,s]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(dr,{value:s,onChange:f=>u(f.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx(lg,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:c.map(f=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(An,{htmlFor:`enable-model-${e}-${f.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:f.name||f.id,children:f.name||f.id}),y.jsx(Ll,{id:`enable-model-${e}-${f.id}`,checked:n.has(f.id),onCheckedChange:h=>r(f.id,h),className:"flex-shrink-0",disabled:i,"aria-label":`Enable model ${f.name||f.id}`})]},f.id))})})]})},s0e=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s})=>{var C;const u=Qk(e.type),c=eA(e.type),f=bm(e.type),h=o==="fetching"||s,p=s||o==="fetching",g=s||o==="fetching",b=Ai(k=>k.getAllAvailableModelDefsForProvider)(e.id),_=R.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),x=e.apiKeyId?t.some(k=>k.id===e.apiKeyId):!1,S=u&&!x,E=R.useCallback(async(k,O)=>{const N=new Set(e.enabledModels??[]);O?N.add(k):N.delete(k);const D=Array.from(N);try{await i(e.id,{enabledModels:D})}catch(U){dt.error("Failed to update model status."),console.error("Failed to save model toggle:",U)}},[e.enabledModels,e.id,i]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{children:y.jsx("span",{className:$t("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(Dn,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),S&&y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{children:y.jsx(js,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(Dn,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:n,disabled:p,"aria-label":"Edit provider",className:"h-8 w-8",children:y.jsx(lC,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"top",children:"Edit"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:r,disabled:g,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",children:s?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(Uu,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"top",children:"Delete"})]})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[u&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?x?y.jsx("span",{className:"text-green-400",children:((C=t.find(k=>k.id===e.apiKeyId))==null?void 0:C.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),c&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),f&&y.jsx("div",{className:"pt-1",children:y.jsxs(Lt,{variant:"outline",size:"sm",onClick:a,disabled:h,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Zn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(_o,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(js,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(uC,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"font-medium text-card-foreground text-sm",children:"Model Enablement (Saves Immediately):"}),y.jsx(j9,{providerId:e.id,allAvailableModels:b,enabledModelIds:_,onToggleModel:E,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64"})]})]})},l0e=vt.memo(s0e),M9=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var c;const o=f=>{r(f==="none"?null:f)},s=(c=a.find(f=>f.id===n))==null?void 0:c.name,u=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(Bh,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(Uh,{className:$t("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(zh,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(XU,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):u]})]})})}),y.jsxs(qh,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx(Wi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(f=>y.jsx(Wi,{value:f.id,children:f.name||`Key ID: ${f.id.substring(0,6)}...`},f.id))]})]})},u0e=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const u=Qk(t.type??null),c=eA(t.type??null),f=bm(t.type??null),h=t.isEnabled??!1,p=t.autoFetchModels??!1,g=R.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=R.useCallback((b,_)=>{const x=new Set(t.enabledModels??[]);_?x.add(b):x.delete(b);const S=Array.from(x);s("enabledModels",S)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(An,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(dr,{id:`edit-name-${e}`,value:t.name||"",onChange:b=>s("name",b.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(An,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(Bh,{value:t.type??"",onValueChange:b=>s("type",b),disabled:a,children:[y.jsx(Uh,{id:`edit-type-${e}`,children:y.jsx(zh,{placeholder:"Select Type"})}),y.jsx(qh,{children:OF.map(b=>y.jsx(Wi,{value:b.value,children:b.label},b.value))})]})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(An,{children:"API Key"}),y.jsx(M9,{selectedKeyId:t.apiKeyId??null,onKeySelected:b=>s("apiKeyId",b),apiKeys:n,disabled:a})]}),c&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(An,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(dr,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:b=>s("baseURL",b.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx(Ll,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:b=>s("isEnabled",b),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(An,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ll,{id:`edit-autofetch-${e}`,checked:p,onCheckedChange:b=>s("autoFetchModels",b),disabled:!f||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(An,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:f?"":"text-muted-foreground",children:["Auto-fetch models ",f?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(j9,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(Ov,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(Ul,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(cC,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},c0e=vt.memo(u0e),d0e=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i})=>{const[o,s]=R.useState(!1),[u,c]=R.useState(!1),[f,h]=R.useState(!1),[p,g]=R.useState({}),v=Ai(D=>D.getAllAvailableModelDefsForProvider),[b,_]=R.useState([]),x=R.useMemo(()=>[...b].sort((D,U)=>(D.name||D.id).localeCompare(U.name||U.id)),[b]);R.useEffect(()=>{if(o){const D=v(e.id);_(D),g({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else _([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,e.fetchedModels,v]);const S=()=>s(!0),E=()=>{s(!1),g({}),c(!1)},C=R.useCallback(async()=>{c(!0);try{const D=p.enabledModels&&p.enabledModels.length>0?p.enabledModels:null,U={name:p.name,type:p.type,isEnabled:p.isEnabled,apiKeyId:p.apiKeyId,baseURL:p.baseURL,autoFetchModels:p.autoFetchModels,enabledModels:D};Object.keys(U).forEach(W=>{U[W]===void 0&&delete U[W]}),await n(e.id,U),s(!1),g({}),dt.success(`Provider "${U.name||e.name}" updated.`)}catch(D){console.error("Failed to save provider update:",D),dt.error("Failed to save provider configuration.")}finally{c(!1)}},[p,n,e.id,e.name]),k=R.useCallback((D,U)=>{g(W=>({...W,[D]:U}))},[]),O=R.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(D){console.error("Failed to delete provider:",D),h(!1)}}},[r,e.id,e.name]),N=R.useCallback(async()=>{if(await a(e.id),o){const D=v(e.id);_(D)}},[a,e.id,o,v]);return y.jsx("div",{className:"border-b border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?y.jsx(c0e,{providerId:e.id,editData:p,apiKeys:t,allAvailableModels:x,isSaving:u,onCancel:E,onSave:C,onChange:k,onUpdate:n}):y.jsx(l0e,{provider:e,apiKeys:t,onEdit:S,onDelete:O,onFetchModels:N,onUpdate:n,fetchStatus:i,isDeleting:f})})},f0e=vt.memo(d0e),h0e=({apiKeys:e,onAddProvider:t,onCancel:n})=>{const[r,a]=R.useState(!1),[i,o]=R.useState({name:"",type:"openai",isEnabled:!0,apiKeyId:null,baseURL:null,enabledModels:null,autoFetchModels:!0,fetchedModels:null,modelsLastFetchedAt:null}),s=R.useCallback((p,g)=>{o(v=>{const b={...v,[p]:g};if(p==="type"){const _=g;b.apiKeyId=null,b.baseURL=null,b.autoFetchModels=bm(_),b.enabledModels=null}return(p==="isEnabled"||p==="autoFetchModels")&&(b[p]=!!g),b})},[]),u=R.useCallback(async()=>{if(!i.name||!i.type){dt.error("Provider Name and Type are required.");return}a(!0);try{const p=i.type,g=i.autoFetchModels??bm(p),v={name:i.name,type:p,isEnabled:i.isEnabled??!0,apiKeyId:i.apiKeyId??null,baseURL:i.baseURL??null,enabledModels:null,autoFetchModels:g,fetchedModels:null,modelsLastFetchedAt:null};await t(v),n()}catch(p){console.error("Failed to add provider (from form component):",p)}finally{a(!1)}},[i,t,n]),c=Qk(i.type??null),f=eA(i.type??null),h=bm(i.type??null);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(dr,{value:i.name||"",onChange:p=>s("name",p.target.value),placeholder:"Provider Name (e.g., My Ollama)",className:"flex-grow",disabled:r,"aria-label":"Provider Name"}),y.jsxs(Bh,{value:i.type??"openai",onValueChange:p=>s("type",p),disabled:r,children:[y.jsx(Uh,{className:"w-[200px]","aria-label":"Provider Type",children:y.jsx(zh,{placeholder:"Select Type"})}),y.jsx(qh,{children:OF.map(p=>y.jsx(Wi,{value:p.value,children:p.label},p.value))})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ll,{id:"new-enabled",checked:i.isEnabled??!0,onCheckedChange:p=>s("isEnabled",p),disabled:r,"aria-labelledby":"new-enabled-label"}),y.jsx(An,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]})]}),(c||f)&&y.jsxs("div",{className:"flex items-center space-x-2",children:[c&&y.jsx(M9,{label:"API Key:",selectedKeyId:i.apiKeyId??null,onKeySelected:p=>s("apiKeyId",p),apiKeys:e||[],className:"flex-grow",disabled:r}),f&&y.jsx(dr,{value:i.baseURL||"",onChange:p=>s("baseURL",p.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",className:"flex-grow",disabled:r,"aria-label":"Base URL"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ll,{id:"new-autofetch",checked:i.autoFetchModels??!1,onCheckedChange:p=>s("autoFetchModels",p),disabled:!h||r,"aria-labelledby":"new-autofetch-label"}),y.jsxs(An,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:h?"":"text-muted-foreground",children:["Auto-fetch models ",h?"":"(Not Supported)"]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:n,disabled:r,type:"button",children:[y.jsx(Ul,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:u,disabled:r||!i.name||!i.type,type:"button",children:[r&&y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(cC,{className:"h-4 w-4 mr-1"})," ",r?"Adding...":"Add Provider"]})]})]})},p0e=()=>{const{addDbProviderConfig:e,updateDbProviderConfig:t,deleteDbProviderConfig:n,fetchModels:r,providerFetchStatus:a,dbProviderConfigs:i,apiKeys:o,isLoading:s}=Ai(Mn(v=>({addDbProviderConfig:v.addProviderConfig,updateDbProviderConfig:v.updateProviderConfig,deleteDbProviderConfig:v.deleteProviderConfig,fetchModels:v.fetchModels,providerFetchStatus:v.providerFetchStatus,dbProviderConfigs:v.dbProviderConfigs,apiKeys:v.dbApiKeys,isLoading:v.isLoading}))),[u,c]=R.useState(!1),f=()=>c(!0),h=R.useCallback(()=>c(!1),[]),p=R.useCallback(async v=>{await r(v)},[r]),g=R.useMemo(()=>i||[],[i]);return y.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(h0e,{apiKeys:o||[],onAddProvider:e,onCancel:h}):y.jsxs(Lt,{onClick:f,variant:"outline",className:"w-full",disabled:s,children:[y.jsx(Zv,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow overflow-hidden border-t border-border pt-4 mt-4",children:y.jsxs("div",{className:"space-y-2",children:[s&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Mr,{className:"h-24 w-full"}),y.jsx(Mr,{className:"h-24 w-full"}),y.jsx(Mr,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:g.map(v=>y.jsx(f0e,{provider:v,apiKeys:o||[],onUpdate:t,onDelete:n,onFetchModels:p,fetchStatus:a[v.id]||"idle"},v.id))}),!s&&g.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},m0e=vt.memo(p0e);function g0e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const h1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function dA(e){return"nodeType"in e}function Oi(e){var t,n;return e?Vh(e)?e:dA(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function fA(e){const{Document:t}=Oi(e);return e instanceof t}function fg(e){return Vh(e)?!1:e instanceof Oi(e).HTMLElement}function P9(e){return e instanceof Oi(e).SVGElement}function Gh(e){return e?Vh(e)?e.document:dA(e)?fA(e)?e:fg(e)||P9(e)?e.ownerDocument:document:document:document}const Bs=h1?R.useLayoutEffect:R.useEffect;function hA(e){const t=R.useRef(e);return Bs(()=>{t.current=e}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function y0e(){const e=R.useRef(null),t=R.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=R.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function m0(e,t){t===void 0&&(t=[e]);const n=R.useRef(e);return Bs(()=>{n.current!==e&&(n.current=e)},t),n}function hg(e,t){const n=R.useRef();return R.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Dv(e){const t=hA(e),n=R.useRef(null),r=R.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function VE(e){const t=R.useRef();return R.useEffect(()=>{t.current=e},[e]),t.current}let x2={};function pg(e,t){return R.useMemo(()=>{if(t)return t;const n=x2[e]==null?0:x2[e]+1;return x2[e]=n,e+"-"+n},[e,t])}function F9(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const s=Object.entries(o);for(const[u,c]of s){const f=i[u];f!=null&&(i[u]=f+e*c)}return i},{...t})}}const Vf=F9(1),g0=F9(-1);function b0e(e){return"clientX"in e&&"clientY"in e}function pA(e){if(!e)return!1;const{KeyboardEvent:t}=Oi(e.target);return t&&e instanceof t}function v0e(e){if(!e)return!1;const{TouchEvent:t}=Oi(e.target);return t&&e instanceof t}function GE(e){if(v0e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return b0e(e)?{x:e.clientX,y:e.clientY}:null}const y0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[y0.Translate.toString(e),y0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),G6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function w0e(e){return e.matches(G6)?e:e.querySelector(G6)}const _0e={display:"none"};function x0e(e){let{id:t,value:n}=e;return vt.createElement("div",{id:t,style:_0e},n)}function S0e(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return vt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function E0e(){const[e,t]=R.useState("");return{announce:R.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const L9=R.createContext(null);function C0e(e){const t=R.useContext(L9);R.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function k0e(){const[e]=R.useState(()=>new Set),t=R.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[R.useCallback(r=>{let{type:a,event:i}=r;e.forEach(o=>{var s;return(s=o[a])==null?void 0:s.call(o,i)})},[e]),t]}const A0e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},T0e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function R0e(e){let{announcements:t=T0e,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=A0e}=e;const{announce:i,announcement:o}=E0e(),s=pg("DndLiveRegion"),[u,c]=R.useState(!1);if(R.useEffect(()=>{c(!0)},[]),C0e(R.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:g}=h;t.onDragMove&&i(t.onDragMove({active:p,over:g}))},onDragOver(h){let{active:p,over:g}=h;i(t.onDragOver({active:p,over:g}))},onDragEnd(h){let{active:p,over:g}=h;i(t.onDragEnd({active:p,over:g}))},onDragCancel(h){let{active:p,over:g}=h;i(t.onDragCancel({active:p,over:g}))}}),[i,t])),!u)return null;const f=vt.createElement(vt.Fragment,null,vt.createElement(x0e,{id:r,value:a.draggable}),vt.createElement(S0e,{id:s,announcement:o}));return n?Rs.createPortal(f,n):f}var ha;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ha||(ha={}));function jv(){}function W6(e,t){return R.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function N0e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Xo=Object.freeze({x:0,y:0});function $9(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function B9(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function I0e(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function K6(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function z9(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Z6(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const O0e=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Z6(t,t.left,t.top),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=$9(Z6(u),a);i.push({id:s,data:{droppableContainer:o,value:c}})}}return i.sort(B9)},D0e=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=K6(t),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=K6(u),f=a.reduce((p,g,v)=>p+$9(c[v],g),0),h=Number((f/4).toFixed(4));i.push({id:s,data:{droppableContainer:o,value:h}})}}return i.sort(B9)};function j0e(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-r,s=i-n;if(r<a&&n<i){const u=t.width*t.height,c=e.width*e.height,f=o*s,h=f/(u+c-f);return Number(h.toFixed(4))}return 0}const M0e=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:o}=i,s=n.get(o);if(s){const u=j0e(s,t);u>0&&a.push({id:o,data:{droppableContainer:i,value:u}})}}return a.sort(I0e)};function P0e(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function U9(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Xo}function F0e(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((o,s)=>({...o,top:o.top+e*s.y,bottom:o.bottom+e*s.y,left:o.left+e*s.x,right:o.right+e*s.x}),{...n})}}const L0e=F0e(1);function $0e(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function B0e(e,t,n){const r=$0e(t);if(!r)return e;const{scaleX:a,scaleY:i,x:o,y:s}=r,u=e.left-o-(1-a)*parseFloat(n),c=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:f,height:h,top:c,right:u+f,bottom:c+h,left:u}}const z0e={ignoreTransform:!1};function Wh(e,t){t===void 0&&(t=z0e);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:f}=Oi(e).getComputedStyle(e);c&&(n=B0e(n,c,f))}const{top:r,left:a,width:i,height:o,bottom:s,right:u}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:u}}function Y6(e){return Wh(e,{ignoreTransform:!0})}function U0e(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function q0e(e,t){return t===void 0&&(t=Oi(e).getComputedStyle(e)),t.position==="fixed"}function H0e(e,t){t===void 0&&(t=Oi(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function p1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(fA(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!fg(a)||P9(a)||n.includes(a))return n;const i=Oi(e).getComputedStyle(a);return a!==e&&H0e(a,i)&&n.push(a),q0e(a,i)?n:r(a.parentNode)}return e?r(e):n}function q9(e){const[t]=p1(e,1);return t??null}function S2(e){return!h1||!e?null:Vh(e)?e:dA(e)?fA(e)||e===Gh(e).scrollingElement?window:fg(e)?e:null:null}function H9(e){return Vh(e)?e.scrollX:e.scrollLeft}function V9(e){return Vh(e)?e.scrollY:e.scrollTop}function WE(e){return{x:H9(e),y:V9(e)}}var Ca;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ca||(Ca={}));function G9(e){return!h1||!e?!1:e===document.scrollingElement}function W9(e){const t={x:0,y:0},n=G9(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,s=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:s,maxScroll:r,minScroll:t}}const V0e={x:.2,y:.2};function G0e(e,t,n,r,a){let{top:i,left:o,right:s,bottom:u}=n;r===void 0&&(r=10),a===void 0&&(a=V0e);const{isTop:c,isBottom:f,isLeft:h,isRight:p}=W9(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!c&&i<=t.top+b.height?(g.y=Ca.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!f&&u>=t.bottom-b.height&&(g.y=Ca.Forward,v.y=r*Math.abs((t.bottom-b.height-u)/b.height)),!p&&s>=t.right-b.width?(g.x=Ca.Forward,v.x=r*Math.abs((t.right-b.width-s)/b.width)):!h&&o<=t.left+b.width&&(g.x=Ca.Backward,v.x=r*Math.abs((t.left+b.width-o)/b.width)),{direction:g,speed:v}}function W0e(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function K9(e){return e.reduce((t,n)=>Vf(t,WE(n)),Xo)}function K0e(e){return e.reduce((t,n)=>t+H9(n),0)}function Z0e(e){return e.reduce((t,n)=>t+V9(n),0)}function Y0e(e,t){if(t===void 0&&(t=Wh),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);q9(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const X0e=[["x",["left","right"],K0e],["y",["top","bottom"],Z0e]];class mA{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=p1(n),a=K9(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,s]of X0e)for(const u of o)Object.defineProperty(this,u,{get:()=>{const c=s(r),f=a[i]-c;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class vm{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function J0e(e){const{EventTarget:t}=Oi(e);return e instanceof t?e:Gh(e)}function E2(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var go;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(go||(go={}));function X6(e){e.preventDefault()}function Q0e(e){e.stopPropagation()}var Vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Vn||(Vn={}));const Z9={start:[Vn.Space,Vn.Enter],cancel:[Vn.Esc],end:[Vn.Space,Vn.Enter,Vn.Tab]},ege=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Vn.Right:return{...n,x:n.x+25};case Vn.Left:return{...n,x:n.x-25};case Vn.Down:return{...n,y:n.y+25};case Vn.Up:return{...n,y:n.y-25}}};class gA{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new vm(Gh(n)),this.windowListeners=new vm(Oi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(go.Resize,this.handleCancel),this.windowListeners.add(go.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(go.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Y0e(r),n(Xo)}handleKeyDown(t){if(pA(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=Z9,coordinateGetter:o=ege,scrollBehavior:s="smooth"}=a,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:c}=r.current,f=c?{x:c.left,y:c.top}:Xo;this.referenceCoordinates||(this.referenceCoordinates=f);const h=o(t,{active:n,context:r.current,currentCoordinates:f});if(h){const p=g0(h,f),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const _=t.code,{isTop:x,isRight:S,isLeft:E,isBottom:C,maxScroll:k,minScroll:O}=W9(b),N=W0e(b),D={x:Math.min(_===Vn.Right?N.right-N.width/2:N.right,Math.max(_===Vn.Right?N.left:N.left+N.width/2,h.x)),y:Math.min(_===Vn.Down?N.bottom-N.height/2:N.bottom,Math.max(_===Vn.Down?N.top:N.top+N.height/2,h.y))},U=_===Vn.Right&&!S||_===Vn.Left&&!E,W=_===Vn.Down&&!C||_===Vn.Up&&!x;if(U&&D.x!==h.x){const Q=b.scrollLeft+p.x,F=_===Vn.Right&&Q<=k.x||_===Vn.Left&&Q>=O.x;if(F&&!p.y){b.scrollTo({left:Q,behavior:s});return}F?g.x=b.scrollLeft-Q:g.x=_===Vn.Right?b.scrollLeft-k.x:b.scrollLeft-O.x,g.x&&b.scrollBy({left:-g.x,behavior:s});break}else if(W&&D.y!==h.y){const Q=b.scrollTop+p.y,F=_===Vn.Down&&Q<=k.y||_===Vn.Up&&Q>=O.y;if(F&&!p.x){b.scrollTo({top:Q,behavior:s});return}F?g.y=b.scrollTop-Q:g.y=_===Vn.Down?b.scrollTop-k.y:b.scrollTop-O.y,g.y&&b.scrollBy({top:-g.y,behavior:s});break}}this.handleMove(t,Vf(g0(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gA.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Z9,onActivation:a}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const s=i.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function J6(e){return!!(e&&"distance"in e)}function Q6(e){return!!(e&&"delay"in e)}class yA{constructor(t,n,r){var a;r===void 0&&(r=J0e(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=Gh(o),this.documentListeners=new vm(this.document),this.listeners=new vm(r),this.windowListeners=new vm(Oi(o)),this.initialCoordinates=(a=GE(i))!=null?a:Xo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(go.Resize,this.handleCancel),this.windowListeners.add(go.DragStart,X6),this.windowListeners.add(go.VisibilityChange,this.handleCancel),this.windowListeners.add(go.ContextMenu,X6),this.documentListeners.add(go.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Q6(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(J6(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(go.Click,Q0e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(go.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!a)return;const u=(n=GE(t))!=null?n:Xo,c=g0(a,u);if(!r&&s){if(J6(s)){if(s.tolerance!=null&&E2(c,s.tolerance))return this.handleCancel();if(E2(c,s.distance))return this.handleStart()}if(Q6(s)&&E2(c,s.tolerance))return this.handleCancel();this.handlePending(s,c);return}t.cancelable&&t.preventDefault(),o(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const tge={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class bA extends yA{constructor(t){const{event:n}=t,r=Gh(n.target);super(t,tge,r)}}bA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const nge={move:{name:"mousemove"},end:{name:"mouseup"}};var KE;(function(e){e[e.RightClick=2]="RightClick"})(KE||(KE={}));class rge extends yA{constructor(t){super(t,nge,Gh(t.event.target))}}rge.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===KE.RightClick?!1:(r==null||r({event:n}),!0)}}];const C2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class age extends yA{constructor(t){super(t,C2)}static setup(){return window.addEventListener(C2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(C2.move.name,t)};function t(){}}}age.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var wm;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(wm||(wm={}));var Mv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Mv||(Mv={}));function ige(e){let{acceleration:t,activator:n=wm.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:s=Mv.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:f,delta:h,threshold:p}=e;const g=sge({delta:h,disabled:!i}),[v,b]=y0e(),_=R.useRef({x:0,y:0}),x=R.useRef({x:0,y:0}),S=R.useMemo(()=>{switch(n){case wm.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case wm.DraggableRect:return a}},[n,a,u]),E=R.useRef(null),C=R.useCallback(()=>{const O=E.current;if(!O)return;const N=_.current.x*x.current.x,D=_.current.y*x.current.y;O.scrollBy(N,D)},[]),k=R.useMemo(()=>s===Mv.TreeOrder?[...c].reverse():c,[s,c]);R.useEffect(()=>{if(!i||!c.length||!S){b();return}for(const O of k){if((r==null?void 0:r(O))===!1)continue;const N=c.indexOf(O),D=f[N];if(!D)continue;const{direction:U,speed:W}=G0e(O,D,S,t,p);for(const Q of["x","y"])g[Q][U[Q]]||(W[Q]=0,U[Q]=0);if(W.x>0||W.y>0){b(),E.current=O,v(C,o),_.current=W,x.current=U;return}}_.current={x:0,y:0},x.current={x:0,y:0},b()},[t,C,r,b,i,o,JSON.stringify(S),JSON.stringify(g),v,c,k,f,JSON.stringify(p)])}const oge={x:{[Ca.Backward]:!1,[Ca.Forward]:!1},y:{[Ca.Backward]:!1,[Ca.Forward]:!1}};function sge(e){let{delta:t,disabled:n}=e;const r=VE(t);return hg(a=>{if(n||!r||!a)return oge;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ca.Backward]:a.x[Ca.Backward]||i.x===-1,[Ca.Forward]:a.x[Ca.Forward]||i.x===1},y:{[Ca.Backward]:a.y[Ca.Backward]||i.y===-1,[Ca.Forward]:a.y[Ca.Forward]||i.y===1}}},[n,t,r])}function lge(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return hg(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function uge(e,t){return R.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...i]},[]),[e,t])}var b0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(b0||(b0={}));var ZE;(function(e){e.Optimized="optimized"})(ZE||(ZE={}));const eO=new Map;function cge(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,o]=R.useState(null),{frequency:s,measure:u,strategy:c}=a,f=R.useRef(e),h=_(),p=m0(h),g=R.useCallback(function(x){x===void 0&&(x=[]),!p.current&&o(S=>S===null?x:S.concat(x.filter(E=>!S.includes(E))))},[p]),v=R.useRef(null),b=hg(x=>{if(h&&!n)return eO;if(!x||x===eO||f.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,k=C?new mA(u(C),C):null;E.rect.current=k,k&&S.set(E.id,k)}return S}return x},[e,i,n,h,u]);return R.useEffect(()=>{f.current=e},[e]),R.useEffect(()=>{h||g()},[n,h]),R.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),R.useEffect(()=>{h||typeof s!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},s))},[s,h,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(c){case b0.Always:return!1;case b0.BeforeDragging:return n;default:return!n}}}function Y9(e,t){return hg(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function dge(e,t){return Y9(e,t)}function fge(e){let{callback:t,disabled:n}=e;const r=hA(t),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return R.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function m1(e){let{callback:t,disabled:n}=e;const r=hA(t),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return R.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function hge(e){return new mA(Wh(e),e)}function tO(e,t,n){t===void 0&&(t=hge);const[r,a]=R.useState(null);function i(){a(u=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=u??n)!=null?c:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=fge({callback(u){if(e)for(const c of u){const{type:f,target:h}=c;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),s=m1({callback:i});return Bs(()=>{i(),e?(s==null||s.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),o==null||o.disconnect())},[e]),r}function pge(e){const t=Y9(e);return U9(e,t)}const nO=[];function mge(e){const t=R.useRef(e),n=hg(r=>e?r&&r!==nO&&e&&t.current&&e.parentNode===t.current.parentNode?r:p1(e):nO,[e]);return R.useEffect(()=>{t.current=e},[e]),n}function gge(e){const[t,n]=R.useState(null),r=R.useRef(e),a=R.useCallback(i=>{const o=S2(i.target);o&&n(s=>s?(s.set(o,WE(o)),new Map(s)):null)},[]);return R.useEffect(()=>{const i=r.current;if(e!==i){o(i);const s=e.map(u=>{const c=S2(u);return c?(c.addEventListener("scroll",a,{passive:!0}),[c,WE(c)]):null}).filter(u=>u!=null);n(s.length?new Map(s):null),r.current=e}return()=>{o(e),o(i)};function o(s){s.forEach(u=>{const c=S2(u);c==null||c.removeEventListener("scroll",a)})}},[a,e]),R.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>Vf(i,o),Xo):K9(e):Xo,[e,t])}function rO(e,t){t===void 0&&(t=[]);const n=R.useRef(null);return R.useEffect(()=>{n.current=null},t),R.useEffect(()=>{const r=e!==Xo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?g0(e,n.current):Xo}function yge(e){R.useEffect(()=>{if(!h1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function bge(e,t){return R.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,t)},n},{}),[e,t])}function X9(e){return R.useMemo(()=>e?U0e(e):null,[e])}const aO=[];function vge(e,t){t===void 0&&(t=Wh);const[n]=e,r=X9(n?Oi(n):null),[a,i]=R.useState(aO);function o(){i(()=>e.length?e.map(u=>G9(u)?r:new mA(t(u),u)):aO)}const s=m1({callback:o});return Bs(()=>{s==null||s.disconnect(),o(),e.forEach(u=>s==null?void 0:s.observe(u))},[e]),a}function wge(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return fg(t)?t:e}function _ge(e){let{measure:t}=e;const[n,r]=R.useState(null),a=R.useCallback(c=>{for(const{target:f}of c)if(fg(f)){r(h=>{const p=t(f);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=m1({callback:a}),o=R.useCallback(c=>{const f=wge(c);i==null||i.disconnect(),f&&(i==null||i.observe(f)),r(f?t(f):null)},[t,i]),[s,u]=Dv(o);return R.useMemo(()=>({nodeRef:s,rect:n,setRef:u}),[n,s,u])}const xge=[{sensor:bA,options:{}},{sensor:gA,options:{}}],Sge={current:{}},wb={draggable:{measure:Y6},droppable:{measure:Y6,strategy:b0.WhileDragging,frequency:ZE.Optimized},dragOverlay:{measure:Wh}};class _m extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ege={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new _m,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:jv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:wb,measureDroppableContainers:jv,windowRect:null,measuringScheduled:!1},Cge={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:jv,draggableNodes:new Map,over:null,measureDroppableContainers:jv},g1=R.createContext(Cge),J9=R.createContext(Ege);function kge(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new _m}}}function Age(e,t){switch(t.type){case ha.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ha.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ha.DragEnd:case ha.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ha.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new _m(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case ha.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new _m(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case ha.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new _m(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Tge(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=R.useContext(g1),i=VE(r),o=VE(n==null?void 0:n.id);return R.useEffect(()=>{if(!t&&!r&&i&&o!=null){if(!pA(i)||document.activeElement===i.target)return;const s=a.get(o);if(!s)return;const{activatorNode:u,node:c}=s;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[u.current,c.current]){if(!f)continue;const h=w0e(f);if(h){h.focus();break}}})}},[r,t,a,o,i]),null}function Rge(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function Nge(e){return R.useMemo(()=>({draggable:{...wb.draggable,...e==null?void 0:e.draggable},droppable:{...wb.droppable,...e==null?void 0:e.droppable},dragOverlay:{...wb.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ige(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=R.useRef(!1),{x:o,y:s}=typeof a=="boolean"?{x:a,y:a}:a;Bs(()=>{if(!o&&!s||!t){i.current=!1;return}if(i.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const f=n(c),h=U9(f,r);if(o||(h.x=0),s||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=q9(c);p&&p.scrollBy({top:h.y,left:h.x})}},[t,o,s,r,n])}const Q9=R.createContext({...Xo,scaleX:1,scaleY:1});var Du;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Du||(Du={}));const Oge=R.memo(function(t){var n,r,a,i;let{id:o,accessibility:s,autoScroll:u=!0,children:c,sensors:f=xge,collisionDetection:h=M0e,measuring:p,modifiers:g,...v}=t;const b=R.useReducer(Age,void 0,kge),[_,x]=b,[S,E]=k0e(),[C,k]=R.useState(Du.Uninitialized),O=C===Du.Initialized,{draggable:{active:N,nodes:D,translate:U},droppable:{containers:W}}=_,Q=N!=null?D.get(N):null,F=R.useRef({initial:null,translated:null}),Z=R.useMemo(()=>{var et;return N!=null?{id:N,data:(et=Q==null?void 0:Q.data)!=null?et:Sge,rect:F}:null},[N,Q]),L=R.useRef(null),[he,ie]=R.useState(null),[ne,ee]=R.useState(null),se=m0(v,Object.values(v)),G=pg("DndDescribedBy",o),X=R.useMemo(()=>W.getEnabled(),[W]),Y=Nge(p),{droppableRects:re,measureDroppableContainers:be,measuringScheduled:we}=cge(X,{dragging:O,dependencies:[U.x,U.y],config:Y.droppable}),Me=lge(D,N),Pe=R.useMemo(()=>ne?GE(ne):null,[ne]),Ae=Be(),Te=dge(Me,Y.draggable.measure);Ige({activeNode:N!=null?D.get(N):null,config:Ae.layoutShiftCompensation,initialRect:Te,measure:Y.draggable.measure});const qe=tO(Me,Y.draggable.measure,Te),it=tO(Me?Me.parentElement:null),Ie=R.useRef({activatorEvent:null,active:null,activeNode:Me,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=W.getNodeFor((n=Ie.current.over)==null?void 0:n.id),z=_ge({measure:Y.dragOverlay.measure}),Ce=(r=z.nodeRef.current)!=null?r:Me,Ne=O?(a=z.rect)!=null?a:qe:null,ce=!!(z.nodeRef.current&&z.rect),ae=pge(ce?null:qe),J=X9(Ce?Oi(Ce):null),xe=mge(O?Re??Me:null),Le=vge(xe),Se=Rge(g,{transform:{x:U.x-ae.x,y:U.y-ae.y,scaleX:1,scaleY:1},activatorEvent:ne,active:Z,activeNodeRect:qe,containerNodeRect:it,draggingNodeRect:Ne,over:Ie.current.over,overlayNodeRect:z.rect,scrollableAncestors:xe,scrollableAncestorRects:Le,windowRect:J}),Ve=Pe?Vf(Pe,U):null,xt=gge(xe),ht=rO(xt),Et=rO(xt,[qe]),Pt=Vf(Se,ht),Tt=Ne?L0e(Ne,Se):null,Ut=Z&&Tt?h({active:Z,collisionRect:Tt,droppableRects:re,droppableContainers:X,pointerCoordinates:Ve}):null,ge=z9(Ut,"id"),[I,H]=R.useState(null),fe=ce?Se:Vf(Se,Et),Oe=P0e(fe,(i=I==null?void 0:I.rect)!=null?i:null,qe),ve=R.useRef(null),ke=R.useCallback((et,me)=>{let{sensor:De,options:Ke}=me;if(L.current==null)return;const Ct=D.get(L.current);if(!Ct)return;const ye=et.nativeEvent,q=new De({active:L.current,activeNode:Ct,event:ye,options:Ke,context:Ie,onAbort(V){if(!D.get(V))return;const{onDragAbort:de}=se.current,Fe={id:V};de==null||de(Fe),S({type:"onDragAbort",event:Fe})},onPending(V,pe,de,Fe){if(!D.get(V))return;const{onDragPending:Dt}=se.current,un={id:V,constraint:pe,initialCoordinates:de,offset:Fe};Dt==null||Dt(un),S({type:"onDragPending",event:un})},onStart(V){const pe=L.current;if(pe==null)return;const de=D.get(pe);if(!de)return;const{onDragStart:Fe}=se.current,ot={activatorEvent:ye,active:{id:pe,data:de.data,rect:F}};Rs.unstable_batchedUpdates(()=>{Fe==null||Fe(ot),k(Du.Initializing),x({type:ha.DragStart,initialCoordinates:V,active:pe}),S({type:"onDragStart",event:ot}),ie(ve.current),ee(ye)})},onMove(V){x({type:ha.DragMove,coordinates:V})},onEnd:B(ha.DragEnd),onCancel:B(ha.DragCancel)});ve.current=q;function B(V){return async function(){const{active:de,collisions:Fe,over:ot,scrollAdjustedTranslate:Dt}=Ie.current;let un=null;if(de&&Dt){const{cancelDrop:zt}=se.current;un={activatorEvent:ye,active:de,collisions:Fe,delta:Dt,over:ot},V===ha.DragEnd&&typeof zt=="function"&&await Promise.resolve(zt(un))&&(V=ha.DragCancel)}L.current=null,Rs.unstable_batchedUpdates(()=>{x({type:V}),k(Du.Uninitialized),H(null),ie(null),ee(null),ve.current=null;const zt=V===ha.DragEnd?"onDragEnd":"onDragCancel";if(un){const Vt=se.current[zt];Vt==null||Vt(un),S({type:zt,event:un})}})}}},[D]),le=R.useCallback((et,me)=>(De,Ke)=>{const Ct=De.nativeEvent,ye=D.get(Ke);if(L.current!==null||!ye||Ct.dndKit||Ct.defaultPrevented)return;const q={active:ye};et(De,me.options,q)===!0&&(Ct.dndKit={capturedBy:me.sensor},L.current=Ke,ke(De,me))},[D,ke]),ct=uge(f,le);yge(f),Bs(()=>{qe&&C===Du.Initializing&&k(Du.Initialized)},[qe,C]),R.useEffect(()=>{const{onDragMove:et}=se.current,{active:me,activatorEvent:De,collisions:Ke,over:Ct}=Ie.current;if(!me||!De)return;const ye={active:me,activatorEvent:De,collisions:Ke,delta:{x:Pt.x,y:Pt.y},over:Ct};Rs.unstable_batchedUpdates(()=>{et==null||et(ye),S({type:"onDragMove",event:ye})})},[Pt.x,Pt.y]),R.useEffect(()=>{const{active:et,activatorEvent:me,collisions:De,droppableContainers:Ke,scrollAdjustedTranslate:Ct}=Ie.current;if(!et||L.current==null||!me||!Ct)return;const{onDragOver:ye}=se.current,q=Ke.get(ge),B=q&&q.rect.current?{id:q.id,rect:q.rect.current,data:q.data,disabled:q.disabled}:null,V={active:et,activatorEvent:me,collisions:De,delta:{x:Ct.x,y:Ct.y},over:B};Rs.unstable_batchedUpdates(()=>{H(B),ye==null||ye(V),S({type:"onDragOver",event:V})})},[ge]),Bs(()=>{Ie.current={activatorEvent:ne,active:Z,activeNode:Me,collisionRect:Tt,collisions:Ut,droppableRects:re,draggableNodes:D,draggingNode:Ce,draggingNodeRect:Ne,droppableContainers:W,over:I,scrollableAncestors:xe,scrollAdjustedTranslate:Pt},F.current={initial:Ne,translated:Tt}},[Z,Me,Ut,Tt,D,Ce,Ne,re,W,I,xe,Pt]),ige({...Ae,delta:U,draggingRect:Tt,pointerCoordinates:Ve,scrollableAncestors:xe,scrollableAncestorRects:Le});const yt=R.useMemo(()=>({active:Z,activeNode:Me,activeNodeRect:qe,activatorEvent:ne,collisions:Ut,containerNodeRect:it,dragOverlay:z,draggableNodes:D,droppableContainers:W,droppableRects:re,over:I,measureDroppableContainers:be,scrollableAncestors:xe,scrollableAncestorRects:Le,measuringConfiguration:Y,measuringScheduled:we,windowRect:J}),[Z,Me,qe,ne,Ut,it,z,D,W,re,I,be,xe,Le,Y,we,J]),M=R.useMemo(()=>({activatorEvent:ne,activators:ct,active:Z,activeNodeRect:qe,ariaDescribedById:{draggable:G},dispatch:x,draggableNodes:D,over:I,measureDroppableContainers:be}),[ne,ct,Z,qe,x,G,D,I,be]);return vt.createElement(L9.Provider,{value:E},vt.createElement(g1.Provider,{value:M},vt.createElement(J9.Provider,{value:yt},vt.createElement(Q9.Provider,{value:Oe},c)),vt.createElement(Tge,{disabled:(s==null?void 0:s.restoreFocus)===!1})),vt.createElement(R0e,{...s,hiddenTextDescribedById:G}));function Be(){const et=(he==null?void 0:he.autoScrollEnabled)===!1,me=typeof u=="object"?u.enabled===!1:u===!1,De=O&&!et&&!me;return typeof u=="object"?{...u,enabled:De}:{enabled:De}}}),Dge=R.createContext(null),iO="button",jge="Draggable";function Mge(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=pg(jge),{activators:o,activatorEvent:s,active:u,activeNodeRect:c,ariaDescribedById:f,draggableNodes:h,over:p}=R.useContext(g1),{role:g=iO,roleDescription:v="draggable",tabIndex:b=0}=a??{},_=(u==null?void 0:u.id)===t,x=R.useContext(_?Q9:Dge),[S,E]=Dv(),[C,k]=Dv(),O=bge(o,t),N=m0(n);Bs(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:N}),()=>{const U=h.get(t);U&&U.key===i&&h.delete(t)}),[h,t]);const D=R.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":_&&g===iO?!0:void 0,"aria-roledescription":v,"aria-describedby":f.draggable}),[r,g,b,_,v,f.draggable]);return{active:u,activatorEvent:s,activeNodeRect:c,attributes:D,isDragging:_,listeners:r?void 0:O,node:S,over:p,setNodeRef:E,setActivatorNodeRef:k,transform:x}}function Pge(){return R.useContext(J9)}const Fge="Droppable",Lge={timeout:25};function $ge(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=pg(Fge),{active:o,dispatch:s,over:u,measureDroppableContainers:c}=R.useContext(g1),f=R.useRef({disabled:n}),h=R.useRef(!1),p=R.useRef(null),g=R.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:_}={...Lge,...a},x=m0(b??r),S=R.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),g.current=null},_)},[_]),E=m1({callback:S,disabled:v||!o}),C=R.useCallback((D,U)=>{E&&(U&&(E.unobserve(U),h.current=!1),D&&E.observe(D))},[E]),[k,O]=Dv(C),N=m0(t);return R.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),R.useEffect(()=>(s({type:ha.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:p,data:N}}),()=>s({type:ha.UnregisterDroppable,key:i,id:r})),[r]),R.useEffect(()=>{n!==f.current.disabled&&(s({type:ha.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,s]),{active:o,rect:p,isOver:(u==null?void 0:u.id)===r,node:k,over:u,setNodeRef:O}}function vA(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Bge(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function ob(e){return e!==null&&e>=0}function zge(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Uge(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const e$=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=vA(t,r,n),o=t[a],s=i[a];return!s||!o?null:{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}},sb={scaleX:1,scaleY:1},qge=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:o}=e;const s=(t=i[n])!=null?t:r;if(!s)return null;if(a===n){const c=i[o];return c?{x:0,y:n<o?c.top+c.height-(s.top+s.height):c.top-s.top,...sb}:null}const u=Hge(i,a,n);return a>n&&a<=o?{x:0,y:-s.height-u,...sb}:a<n&&a>=o?{x:0,y:s.height+u,...sb}:{x:0,y:0,...sb}};function Hge(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const t$="Sortable",n$=vt.createContext({activeIndex:-1,containerId:t$,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:e$,disabled:{draggable:!1,droppable:!1}});function Vge(e){let{children:t,id:n,items:r,strategy:a=e$,disabled:i=!1}=e;const{active:o,dragOverlay:s,droppableRects:u,over:c,measureDroppableContainers:f}=Pge(),h=pg(t$,n),p=s.rect!==null,g=R.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),v=o!=null,b=o?g.indexOf(o.id):-1,_=c?g.indexOf(c.id):-1,x=R.useRef(g),S=!zge(g,x.current),E=_!==-1&&b===-1||S,C=Uge(i);Bs(()=>{S&&v&&f(g)},[S,g,v,f]),R.useEffect(()=>{x.current=g},[g]);const k=R.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:_,useDragOverlay:p,sortedRects:Bge(g,u),strategy:a}),[b,h,C.draggable,C.droppable,E,g,_,u,p,a]);return vt.createElement(n$.Provider,{value:k},t)}const Gge=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return vA(n,r,a).indexOf(t)},Wge=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:o,previousItems:s,previousContainerId:u,transition:c}=e;return!c||!r||s!==i&&a===o?!1:n?!0:o!==a&&t===u},Kge={duration:200,easing:"ease"},r$="transform",Zge=y0.Transition.toString({property:r$,duration:0,easing:"linear"}),Yge={roleDescription:"sortable"};function Xge(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,o]=R.useState(null),s=R.useRef(n);return Bs(()=>{if(!t&&n!==s.current&&r.current){const u=a.current;if(u){const c=Wh(r.current,{ignoreTransform:!0}),f={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(f.x||f.y)&&o(f)}}n!==s.current&&(s.current=n)},[t,n,r,a]),R.useEffect(()=>{i&&o(null)},[i]),i}function Jge(e){let{animateLayoutChanges:t=Wge,attributes:n,disabled:r,data:a,getNewIndex:i=Gge,id:o,strategy:s,resizeObserverConfig:u,transition:c=Kge}=e;const{items:f,containerId:h,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:b,overIndex:_,useDragOverlay:x,strategy:S}=R.useContext(n$),E=Qge(r,g),C=f.indexOf(o),k=R.useMemo(()=>({sortable:{containerId:h,index:C,items:f},...a}),[h,a,C,f]),O=R.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:N,node:D,isOver:U,setNodeRef:W}=$ge({id:o,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...u}}),{active:Q,activatorEvent:F,activeNodeRect:Z,attributes:L,setNodeRef:he,listeners:ie,isDragging:ne,over:ee,setActivatorNodeRef:se,transform:G}=Mge({id:o,data:k,attributes:{...Yge,...n},disabled:E.draggable}),X=g0e(W,he),Y=!!Q,re=Y&&!v&&ob(p)&&ob(_),be=!x&&ne,we=be&&re?G:null,Pe=re?we??(s??S)({rects:b,activeNodeRect:Z,activeIndex:p,overIndex:_,index:C}):null,Ae=ob(p)&&ob(_)?i({id:o,items:f,activeIndex:p,overIndex:_}):C,Te=Q==null?void 0:Q.id,qe=R.useRef({activeId:Te,items:f,newIndex:Ae,containerId:h}),it=f!==qe.current.items,Ie=t({active:Q,containerId:h,isDragging:ne,isSorting:Y,id:o,index:C,items:f,newIndex:qe.current.newIndex,previousItems:qe.current.items,previousContainerId:qe.current.containerId,transition:c,wasDragging:qe.current.activeId!=null}),Re=Xge({disabled:!Ie,index:C,node:D,rect:N});return R.useEffect(()=>{Y&&qe.current.newIndex!==Ae&&(qe.current.newIndex=Ae),h!==qe.current.containerId&&(qe.current.containerId=h),f!==qe.current.items&&(qe.current.items=f)},[Y,Ae,h,f]),R.useEffect(()=>{if(Te===qe.current.activeId)return;if(Te!=null&&qe.current.activeId==null){qe.current.activeId=Te;return}const Ce=setTimeout(()=>{qe.current.activeId=Te},50);return()=>clearTimeout(Ce)},[Te]),{active:Q,activeIndex:p,attributes:L,data:k,rect:N,index:C,newIndex:Ae,items:f,isOver:U,isSorting:Y,isDragging:ne,listeners:ie,node:D,overIndex:_,over:ee,setNodeRef:X,setActivatorNodeRef:se,setDroppableNodeRef:W,setDraggableNodeRef:he,transform:Re??Pe,transition:z()};function z(){if(Re||it&&qe.current.newIndex===C)return Zge;if(!(be&&!pA(F)||!c)&&(Y||Ie))return y0.Transition.toString({...c,property:r$})}}function Qge(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Pv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const eye=[Vn.Down,Vn.Right,Vn.Up,Vn.Left],tye=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:s}}=t;if(eye.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=a.get(h.id);if(p)switch(e.code){case Vn.Down:r.top<p.top&&u.push(h);break;case Vn.Up:r.top>p.top&&u.push(h);break;case Vn.Left:r.left>p.left&&u.push(h);break;case Vn.Right:r.left<p.left&&u.push(h);break}});const c=D0e({collisionRect:r,droppableRects:a,droppableContainers:u});let f=z9(c,"id");if(f===(o==null?void 0:o.id)&&c.length>1&&(f=c[1].id),f!=null){const h=i.get(n.id),p=i.get(f),g=p?a.get(p.id):null,v=p==null?void 0:p.node.current;if(v&&g&&h&&p){const _=p1(v).some((O,N)=>s[N]!==O),x=a$(h,p),S=nye(h,p),E=_||!x?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:g0(C,E)}}}};function a$(e,t){return!Pv(e)||!Pv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function nye(e,t){return!Pv(e)||!Pv(t)||!a$(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const rye=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:o,transition:s,isDragging:u}=Jge({id:e,disabled:n}),c={transform:y0.Transform.toString(o),transition:s,zIndex:u?10:void 0,opacity:n?.5:1};return y.jsxs("div",{ref:i,style:c,...r,...a,className:$t("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",u&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[y.jsx(HU,{className:$t("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),y.jsx(An,{className:$t("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},aye=()=>{const{setGlobalModelSortOrder:e,getGloballyEnabledAndOrderedModels:t,dbProviderConfigs:n,globalModelSortOrder:r,isLoading:a}=Ai(Mn(p=>({setGlobalModelSortOrder:p.setGlobalModelSortOrder,getGloballyEnabledAndOrderedModels:p.getGloballyEnabledAndOrderedModels,dbProviderConfigs:p.dbProviderConfigs,globalModelSortOrder:p.globalModelSortOrder,isLoading:p.isLoading}))),[i,o]=R.useState(""),s=R.useMemo(()=>t?t():[],[t,n,r]),u=R.useMemo(()=>{if(!i.trim())return s;const p=i.toLowerCase();return s.filter(g=>g.name.toLowerCase().includes(p)||g.providerName.toLowerCase().includes(p)||g.id.toLowerCase().includes(p))},[s,i]),c=R.useMemo(()=>u.map(p=>p.id),[u]),f=R.useCallback(p=>{const{active:g,over:v}=p;if(v&&g.id!==v.id){const b=s.map(C=>C.id),_=g.id,x=v.id,S=b.indexOf(_),E=b.indexOf(x);if(S!==-1&&E!==-1){const C=vA(b,S,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[s,e]),h=N0e(W6(bA),W6(gA,{coordinateGetter:tye}));return a?y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx(Mr,{className:"h-8 w-1/3"}),y.jsx(Mr,{className:"h-6 w-1/2"}),y.jsx(Mr,{className:"h-64 w-full"})]}):y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),y.jsx(Ov,{}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(An,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),y.jsxs("div",{className:"relative",children:[y.jsx(Yv,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(dr,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:p=>o(p.target.value),className:"pl-8 w-full",disabled:a})]}),y.jsx(lg,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:u.length>0?y.jsx(Oge,{sensors:h,collisionDetection:O0e,onDragEnd:f,children:y.jsx(Vge,{items:c,strategy:qge,children:u.map(p=>y.jsx(rye,{id:p.id,name:`${p.name} (${p.providerName})`},p.id))})}):y.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},iye=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=qr(Mn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Git User Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set your user name and email for Git commits made within the VFS. This is required for committing changes."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 rounded-lg border p-4 shadow-sm bg-card",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(An,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(dr,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(An,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(dr,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})]})})},oye=vt.memo(iye),sye=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,isLoading:a}=Gr(Mn(k=>({syncRepos:k.syncRepos,addSyncRepo:k.addSyncRepo,updateSyncRepo:k.updateSyncRepo,deleteSyncRepo:k.deleteSyncRepo,isLoading:k.isLoading}))),[i,o]=R.useState(!1),[s,u]=R.useState(null),[c,f]=R.useState({name:"",remoteUrl:"",branch:"main"}),[h,p]=R.useState(!1),[g,v]=R.useState({}),b=R.useCallback(()=>{f({name:"",remoteUrl:"",branch:"main"}),o(!1),u(null),p(!1)},[]),_=R.useCallback((k,O)=>{f(N=>({...N,[k]:O}))},[]),x=R.useCallback(async()=>{var k,O,N,D;if(!((k=c.name)!=null&&k.trim())||!((O=c.remoteUrl)!=null&&O.trim())){dt.error("Repository Name and Remote URL are required.");return}p(!0);try{s?await n(s,{name:c.name.trim(),remoteUrl:c.remoteUrl.trim(),branch:((N=c.branch)==null?void 0:N.trim())||"main"}):await t({name:c.name.trim(),remoteUrl:c.remoteUrl.trim(),branch:((D=c.branch)==null?void 0:D.trim())||"main"}),b()}catch(U){console.error("Failed to save sync repo:",U)}finally{p(!1)}},[c,s,t,n,b]),S=k=>{u(k.id),f({name:k.name,remoteUrl:k.remoteUrl,branch:k.branch}),o(!1)},E=R.useCallback(async(k,O)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${O}"? This will unlink it from any conversations.`)){v(N=>({...N,[k]:!0}));try{await r(k),s===k&&b()}catch(N){console.error("Failed to delete sync repo:",N)}finally{v(N=>({...N,[k]:!1}))}}},[r,s,b]),C=()=>{var k,O;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:s?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(An,{htmlFor:"repo-name",children:"Name"}),y.jsx(dr,{id:"repo-name",value:c.name||"",onChange:N=>_("name",N.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:h})]}),y.jsxs("div",{children:[y.jsx(An,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(dr,{id:"repo-url",type:"url",value:c.remoteUrl||"",onChange:N=>_("remoteUrl",N.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:h})]}),y.jsxs("div",{children:[y.jsx(An,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(dr,{id:"repo-branch",value:c.branch||"",onChange:N=>_("branch",N.target.value),placeholder:"main",required:!0,className:"mt-1",disabled:h})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:b,disabled:h,type:"button",children:[y.jsx(Ul,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:x,disabled:h||!((k=c.name)!=null&&k.trim())||!((O=c.remoteUrl)!=null&&O.trim()),type:"button",children:[h&&y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(cC,{className:"h-4 w-4 mr-1"})," ",h?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area."})]}),!i&&!s&&y.jsxs(Lt,{onClick:()=>o(!0),variant:"outline",className:"w-full mb-4",disabled:a,children:[y.jsx(Zv,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(i||s)&&C(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),a&&!i&&!s?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"})]}):e.length===0&&!i&&!s?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(c1,{children:[y.jsx(d1,{children:y.jsxs(Gi,{children:[y.jsx(sa,{children:"Name"}),y.jsx(sa,{children:"Remote URL"}),y.jsx(sa,{children:"Branch"}),y.jsx(sa,{className:"text-right",children:"Actions"})]})}),y.jsx(f1,{children:e.map(k=>{const O=g[k.id],N=s===k.id;return y.jsxs(Gi,{className:N?"bg-muted/50":"",children:[y.jsx(vr,{className:"font-medium",children:k.name}),y.jsx(vr,{className:"text-xs truncate max-w-xs",children:k.remoteUrl}),y.jsx(vr,{children:k.branch}),y.jsxs(vr,{className:"text-right",children:[y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>S(k),className:"h-8 w-8 mr-1","aria-label":`Edit repo ${k.name}`,disabled:O||h||!!s,children:y.jsx(lC,{className:"h-4 w-4"})}),y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>E(k.id,k.name),className:"text-red-600 hover:text-red-700 h-8 w-8","aria-label":`Delete repo ${k.name}`,disabled:O||h,children:O?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(Uu,{className:"h-4 w-4"})})]})]},k.id)})})]})})]})]})},lye=vt.memo(sye),i$=R.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=qr(Mn(_=>({enableAdvancedSettings:_.enableAdvancedSettings}))),{enableApiKeyManagement:r}=Ai(Mn(_=>({enableApiKeyManagement:_.enableApiKeyManagement}))),{customSettingsTabs:a}=h0(Mn(_=>({customSettingsTabs:_.modSettingsTabs||[]}))),{initialSettingsTab:i,initialSettingsSubTab:o,clearInitialSettingsTabs:s}=ci(Mn(_=>({initialSettingsTab:_.initialSettingsTab,initialSettingsSubTab:_.initialSettingsSubTab,clearInitialSettingsTabs:_.clearInitialSettingsTabs}))),[u,c]=R.useState(i||"general"),[f,h]=R.useState(o||"");R.useEffect(()=>{e&&(c(i||"general"),h(o||""))},[e,i,o]);const p=_=>{_||(t(),s())},g=_=>{c(_),h("")},v=_=>{h(_)},b=$t("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(Zw,{open:e,onOpenChange:p,children:y.jsxs(Yw,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(Xw,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(Qw,{children:"Settings"}),y.jsx(e1,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsxs(w2,{value:u,onValueChange:g,className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(_2,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(fo,{value:"general",className:b,children:"General"}),y.jsx(fo,{value:"providers",className:b,children:"Providers & Models"}),n&&y.jsx(fo,{value:"assistant",className:b,children:"Assistant"}),y.jsx(fo,{value:"git",className:b,children:"Git"}),y.jsx(fo,{value:"data",className:b,children:"Data"}),y.jsx(fo,{value:"mods",className:b,children:"Mods"}),a.map(_=>y.jsx(fo,{value:_.id,className:b,children:_.title},_.id))]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(ho,{value:"general",children:y.jsx(Kme,{})}),y.jsx(ho,{value:"providers",className:"flex flex-col data-[state=inactive]:hidden",children:y.jsxs(w2,{value:u==="providers"&&f||"model-order",onValueChange:v,className:"flex flex-col",children:[y.jsxs(_2,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(fo,{value:"model-order",className:b,children:"Global Model Order"}),y.jsx(fo,{value:"provider-list",className:b,children:"Provider List & Config"}),r&&y.jsx(fo,{value:"api-keys",className:b,children:"API Keys"})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx(ho,{value:"model-order",children:y.jsx(aye,{})}),y.jsx(ho,{value:"provider-list",children:y.jsx(m0e,{})}),r&&y.jsx(ho,{value:"api-keys",children:y.jsx(Jme,{})})]})]})}),n&&y.jsx(ho,{value:"assistant",children:y.jsx(Yme,{})}),y.jsx(ho,{value:"git",className:"h-full",children:y.jsxs(w2,{value:u==="git"&&f||"config",onValueChange:v,className:"flex flex-col h-full",children:[y.jsxs(_2,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(fo,{value:"config",className:b,children:"User Config"}),y.jsx(fo,{value:"sync",className:b,children:"Sync Repositories"})]}),y.jsxs("div",{className:"flex-grow mt-4 overflow-y-auto",children:[y.jsx(ho,{value:"config",children:y.jsx(oye,{})}),y.jsx(ho,{value:"sync",children:y.jsx(lye,{})})]})]})}),y.jsx(ho,{value:"data",children:y.jsx(e0e,{})}),y.jsx(ho,{value:"mods",children:y.jsx(o0e,{})}),a.map(_=>y.jsx(ho,{value:_.id,children:vt.isValidElement(_.component)?_.component:typeof _.component=="function"?y.jsx(_.component,{}):null},_.id))]})]}),y.jsx(Jw,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(Lt,{variant:"outline",onClick:()=>p(!1),children:"Close"})})]})})});i$.displayName="SettingsModalComponent";const uye=i$,cye=()=>{const e=ci(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(Lt,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Open Settings",className:"h-8 w-8",children:y.jsx(dC,{className:"h-4 w-4"})})},dye=()=>{const e=ci(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(dC,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"right",children:"Settings"})]})})},fye=()=>{const e=Na(r=>r.registerChatControl),{isModalOpen:t,toggleModal:n}=ci(Mn(r=>({isModalOpen:r.isChatControlPanelOpen.settingsModal??!1,toggleModal:r.toggleChatControlPanel})));return vt.useEffect(()=>e({id:"core-settings-trigger",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(cye,{}),iconRenderer:()=>y.jsx(dye,{}),show:()=>!0,order:100,settingsConfig:{tabId:"mainSettingsModal",title:"Settings"},settingsRenderer:()=>t?y.jsx(uye,{isOpen:t,onClose:()=>n("settingsModal",!1)}):null}),[e,t,n]),null},o$=({isCollapsed:e,onClick:t})=>y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>t(),className:"h-8 w-8","aria-label":e?"Open sidebar":"Close sidebar",children:e?y.jsx(lq,{className:"h-4 w-4"}):y.jsx(oq,{className:"h-4 w-4"})}),hye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=ci(Mn(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(o$,{isCollapsed:e,onClick:t})},pye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=ci(Mn(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(o$,{isCollapsed:e,onClick:t})}),y.jsx(Dn,{side:"right",children:e?"Open Sidebar":"Close Sidebar"})]})})},mye=()=>{const e=Na(t=>t.registerChatControl);return vt.useEffect(()=>e({id:"core-sidebar-toggle",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(hye,{}),iconRenderer:()=>y.jsx(pye,{}),show:()=>!0,order:10}),[e]),null};var oO=1,gye=.9,yye=.8,bye=.17,k2=.1,A2=.999,vye=.9999,wye=.99,_ye=/[\\\/_+.#"@\[\(\{&]/,xye=/[\\\/_+.#"@\[\(\{&]/g,Sye=/[\s-]/,s$=/[\s-]/g;function YE(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?oO:wye;var s=`${a},${i}`;if(o[s]!==void 0)return o[s];for(var u=r.charAt(i),c=n.indexOf(u,a),f=0,h,p,g,v;c>=0;)h=YE(e,t,n,r,c+1,i+1,o),h>f&&(c===a?h*=oO:_ye.test(e.charAt(c-1))?(h*=yye,g=e.slice(a,c-1).match(xye),g&&a>0&&(h*=Math.pow(A2,g.length))):Sye.test(e.charAt(c-1))?(h*=gye,v=e.slice(a,c-1).match(s$),v&&a>0&&(h*=Math.pow(A2,v.length))):(h*=bye,a>0&&(h*=Math.pow(A2,c-a))),e.charAt(c)!==t.charAt(i)&&(h*=vye)),(h<k2&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(p=YE(e,t,n,r,c+1,i+2,o),p*k2>h&&(h=p*k2)),h>f&&(f=h),c=n.indexOf(u,c+1);return o[s]=f,f}function sO(e){return e.toLowerCase().replace(s$," ")}function Eye(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,YE(e,t,sO(e),sO(t),0,0,{})}var dm='[cmdk-group=""]',T2='[cmdk-group-items=""]',Cye='[cmdk-group-heading=""]',l$='[cmdk-item=""]',lO=`${l$}:not([aria-disabled="true"])`,XE="cmdk-item-select",Of="data-value",kye=(e,t,n)=>Eye(e,t,n),u$=R.createContext(void 0),mg=()=>R.useContext(u$),c$=R.createContext(void 0),wA=()=>R.useContext(c$),d$=R.createContext(void 0),f$=R.forwardRef((e,t)=>{let n=Df(()=>{var Y,re;return{search:"",value:(re=(Y=e.value)!=null?Y:e.defaultValue)!=null?re:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Df(()=>new Set),a=Df(()=>new Map),i=Df(()=>new Map),o=Df(()=>new Set),s=h$(e),{label:u,children:c,value:f,onValueChange:h,filter:p,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:_=!0,...x}=e,S=Za(),E=Za(),C=Za(),k=R.useRef(null),O=Fye();md(()=>{if(f!==void 0){let Y=f.trim();n.current.value=Y,N.emit()}},[f]),md(()=>{O(6,Z)},[]);let N=R.useMemo(()=>({subscribe:Y=>(o.current.add(Y),()=>o.current.delete(Y)),snapshot:()=>n.current,setState:(Y,re,be)=>{var we,Me,Pe,Ae;if(!Object.is(n.current[Y],re)){if(n.current[Y]=re,Y==="search")F(),W(),O(1,Q);else if(Y==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Te=document.getElementById(C);Te?Te.focus():(we=document.getElementById(S))==null||we.focus()}if(O(7,()=>{var Te;n.current.selectedItemId=(Te=L())==null?void 0:Te.id,N.emit()}),be||O(5,Z),((Me=s.current)==null?void 0:Me.value)!==void 0){let Te=re??"";(Ae=(Pe=s.current).onValueChange)==null||Ae.call(Pe,Te);return}}N.emit()}},emit:()=>{o.current.forEach(Y=>Y())}}),[]),D=R.useMemo(()=>({value:(Y,re,be)=>{var we;re!==((we=i.current.get(Y))==null?void 0:we.value)&&(i.current.set(Y,{value:re,keywords:be}),n.current.filtered.items.set(Y,U(re,be)),O(2,()=>{W(),N.emit()}))},item:(Y,re)=>(r.current.add(Y),re&&(a.current.has(re)?a.current.get(re).add(Y):a.current.set(re,new Set([Y]))),O(3,()=>{F(),W(),n.current.value||Q(),N.emit()}),()=>{i.current.delete(Y),r.current.delete(Y),n.current.filtered.items.delete(Y);let be=L();O(4,()=>{F(),(be==null?void 0:be.getAttribute("id"))===Y&&Q(),N.emit()})}),group:Y=>(a.current.has(Y)||a.current.set(Y,new Set),()=>{i.current.delete(Y),a.current.delete(Y)}),filter:()=>s.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:k}),[]);function U(Y,re){var be,we;let Me=(we=(be=s.current)==null?void 0:be.filter)!=null?we:kye;return Y?Me(Y,n.current.search,re):0}function W(){if(!n.current.search||s.current.shouldFilter===!1)return;let Y=n.current.filtered.items,re=[];n.current.filtered.groups.forEach(we=>{let Me=a.current.get(we),Pe=0;Me.forEach(Ae=>{let Te=Y.get(Ae);Pe=Math.max(Te,Pe)}),re.push([we,Pe])});let be=k.current;he().sort((we,Me)=>{var Pe,Ae;let Te=we.getAttribute("id"),qe=Me.getAttribute("id");return((Pe=Y.get(qe))!=null?Pe:0)-((Ae=Y.get(Te))!=null?Ae:0)}).forEach(we=>{let Me=we.closest(T2);Me?Me.appendChild(we.parentElement===Me?we:we.closest(`${T2} > *`)):be.appendChild(we.parentElement===be?we:we.closest(`${T2} > *`))}),re.sort((we,Me)=>Me[1]-we[1]).forEach(we=>{var Me;let Pe=(Me=k.current)==null?void 0:Me.querySelector(`${dm}[${Of}="${encodeURIComponent(we[0])}"]`);Pe==null||Pe.parentElement.appendChild(Pe)})}function Q(){let Y=he().find(be=>be.getAttribute("aria-disabled")!=="true"),re=Y==null?void 0:Y.getAttribute(Of);N.setState("value",re||void 0)}function F(){var Y,re,be,we;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Me=0;for(let Pe of r.current){let Ae=(re=(Y=i.current.get(Pe))==null?void 0:Y.value)!=null?re:"",Te=(we=(be=i.current.get(Pe))==null?void 0:be.keywords)!=null?we:[],qe=U(Ae,Te);n.current.filtered.items.set(Pe,qe),qe>0&&Me++}for(let[Pe,Ae]of a.current)for(let Te of Ae)if(n.current.filtered.items.get(Te)>0){n.current.filtered.groups.add(Pe);break}n.current.filtered.count=Me}function Z(){var Y,re,be;let we=L();we&&(((Y=we.parentElement)==null?void 0:Y.firstChild)===we&&((be=(re=we.closest(dm))==null?void 0:re.querySelector(Cye))==null||be.scrollIntoView({block:"nearest"})),we.scrollIntoView({block:"nearest"}))}function L(){var Y;return(Y=k.current)==null?void 0:Y.querySelector(`${l$}[aria-selected="true"]`)}function he(){var Y;return Array.from(((Y=k.current)==null?void 0:Y.querySelectorAll(lO))||[])}function ie(Y){let re=he()[Y];re&&N.setState("value",re.getAttribute(Of))}function ne(Y){var re;let be=L(),we=he(),Me=we.findIndex(Ae=>Ae===be),Pe=we[Me+Y];(re=s.current)!=null&&re.loop&&(Pe=Me+Y<0?we[we.length-1]:Me+Y===we.length?we[0]:we[Me+Y]),Pe&&N.setState("value",Pe.getAttribute(Of))}function ee(Y){let re=L(),be=re==null?void 0:re.closest(dm),we;for(;be&&!we;)be=Y>0?Mye(be,dm):Pye(be,dm),we=be==null?void 0:be.querySelector(lO);we?N.setState("value",we.getAttribute(Of)):ne(Y)}let se=()=>ie(he().length-1),G=Y=>{Y.preventDefault(),Y.metaKey?se():Y.altKey?ee(1):ne(1)},X=Y=>{Y.preventDefault(),Y.metaKey?ie(0):Y.altKey?ee(-1):ne(-1)};return R.createElement(Jt.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:Y=>{var re;(re=x.onKeyDown)==null||re.call(x,Y);let be=Y.nativeEvent.isComposing||Y.keyCode===229;if(!(Y.defaultPrevented||be))switch(Y.key){case"n":case"j":{_&&Y.ctrlKey&&G(Y);break}case"ArrowDown":{G(Y);break}case"p":case"k":{_&&Y.ctrlKey&&X(Y);break}case"ArrowUp":{X(Y);break}case"Home":{Y.preventDefault(),ie(0);break}case"End":{Y.preventDefault(),se();break}case"Enter":{Y.preventDefault();let we=L();if(we){let Me=new Event(XE);we.dispatchEvent(Me)}}}}},R.createElement("label",{"cmdk-label":"",htmlFor:D.inputId,id:D.labelId,style:$ye},u),y1(e,Y=>R.createElement(c$.Provider,{value:N},R.createElement(u$.Provider,{value:D},Y))))}),Aye=R.forwardRef((e,t)=>{var n,r;let a=Za(),i=R.useRef(null),o=R.useContext(d$),s=mg(),u=h$(e),c=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;md(()=>{if(!c)return s.item(a,o==null?void 0:o.id)},[c]);let f=p$(a,i,[e.value,e.children,i],e.keywords),h=wA(),p=lc(O=>O.value&&O.value===f.current),g=lc(O=>c||s.filter()===!1?!0:O.search?O.filtered.items.get(a)>0:!0);R.useEffect(()=>{let O=i.current;if(!(!O||e.disabled))return O.addEventListener(XE,v),()=>O.removeEventListener(XE,v)},[g,e.onSelect,e.disabled]);function v(){var O,N;b(),(N=(O=u.current).onSelect)==null||N.call(O,f.current)}function b(){h.setState("value",f.current,!0)}if(!g)return null;let{disabled:_,value:x,onSelect:S,forceMount:E,keywords:C,...k}=e;return R.createElement(Jt.div,{ref:Bu(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!p,"data-disabled":!!_,"data-selected":!!p,onPointerMove:_||s.getDisablePointerSelection()?void 0:b,onClick:_?void 0:v},e.children)}),Tye=R.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=Za(),s=R.useRef(null),u=R.useRef(null),c=Za(),f=mg(),h=lc(g=>a||f.filter()===!1?!0:g.search?g.filtered.groups.has(o):!0);md(()=>f.group(o),[]),p$(o,s,[e.value,e.heading,u]);let p=R.useMemo(()=>({id:o,forceMount:a}),[a]);return R.createElement(Jt.div,{ref:Bu(s,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&R.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),y1(e,g=>R.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},R.createElement(d$.Provider,{value:p},g))))}),Rye=R.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=R.useRef(null),i=lc(o=>!o.search);return!n&&!i?null:R.createElement(Jt.div,{ref:Bu(a,t),...r,"cmdk-separator":"",role:"separator"})}),Nye=R.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=wA(),o=lc(c=>c.search),s=lc(c=>c.selectedItemId),u=mg();return R.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),R.createElement(Jt.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":s,id:u.inputId,type:"text",value:a?e.value:o,onChange:c=>{a||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),Iye=R.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=R.useRef(null),o=R.useRef(null),s=lc(c=>c.selectedItemId),u=mg();return R.useEffect(()=>{if(o.current&&i.current){let c=o.current,f=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=c.offsetHeight;f.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return p.observe(c),()=>{cancelAnimationFrame(h),p.unobserve(c)}}},[]),R.createElement(Jt.div,{ref:Bu(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:u.listId},y1(e,c=>R.createElement("div",{ref:Bu(o,u.listInnerRef),"cmdk-list-sizer":""},c)))}),Oye=R.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...s}=e;return R.createElement(vL,{open:n,onOpenChange:r},R.createElement(wL,{container:o},R.createElement(_L,{"cmdk-overlay":"",className:a}),R.createElement(xL,{"aria-label":e.label,"cmdk-dialog":"",className:i},R.createElement(f$,{ref:t,...s}))))}),Dye=R.forwardRef((e,t)=>lc(n=>n.filtered.count===0)?R.createElement(Jt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),jye=R.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return R.createElement(Jt.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},y1(e,o=>R.createElement("div",{"aria-hidden":!0},o)))}),Kh=Object.assign(f$,{List:Iye,Item:Aye,Input:Nye,Group:Tye,Separator:Rye,Dialog:Oye,Empty:Dye,Loading:jye});function Mye(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Pye(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function h$(e){let t=R.useRef(e);return md(()=>{t.current=e}),t}var md=typeof window>"u"?R.useEffect:R.useLayoutEffect;function Df(e){let t=R.useRef();return t.current===void 0&&(t.current=e()),t}function lc(e){let t=wA(),n=()=>e(t.snapshot());return R.useSyncExternalStore(t.subscribe,n,n)}function p$(e,t,n,r=[]){let a=R.useRef(),i=mg();return md(()=>{var o;let s=(()=>{var c;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(c=f.current.textContent)==null?void 0:c.trim():a.current}})(),u=r.map(c=>c.trim());i.value(e,s,u),(o=t.current)==null||o.setAttribute(Of,s),a.current=s}),a}var Fye=()=>{let[e,t]=R.useState(),n=Df(()=>new Map);return md(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Lye(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function y1({asChild:e,children:t},n){return e&&R.isValidElement(t)?R.cloneElement(Lye(t),{ref:t.ref},n(t.props.children)):n(t)}var $ye={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Bye({className:e,...t}){return y.jsx(Kh,{"data-slot":"command",className:$t("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function zye({className:e,...t}){return y.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[y.jsx(Yv,{className:"size-4 shrink-0 opacity-50"}),y.jsx(Kh.Input,{"data-slot":"command-input",className:$t("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function Uye({className:e,...t}){return y.jsx(Kh.List,{"data-slot":"command-list",className:$t("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function qye({...e}){return y.jsx(Kh.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function Hye({className:e,...t}){return y.jsx(Kh.Group,{"data-slot":"command-group",className:$t("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function Vye({className:e,...t}){return y.jsx(Kh.Item,{"data-slot":"command-item",className:$t("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}var b1="Popover",[m$,c1e]=Ni(b1,[uc]),gg=uc(),[Gye,_c]=m$(b1),g$=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=gg(t),u=R.useRef(null),[c,f]=R.useState(!1),[h,p]=Ps({prop:r,defaultProp:a??!1,onChange:i,caller:b1});return y.jsx(tw,{...s,children:y.jsx(Gye,{scope:t,contentId:Za(),triggerRef:u,open:h,onOpenChange:p,onOpenToggle:R.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:c,onCustomAnchorAdd:R.useCallback(()=>f(!0),[]),onCustomAnchorRemove:R.useCallback(()=>f(!1),[]),modal:o,children:n})})};g$.displayName=b1;var y$="PopoverAnchor",Wye=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=_c(y$,n),i=gg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return R.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(x0,{...i,...r,ref:t})});Wye.displayName=y$;var b$="PopoverTrigger",v$=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=_c(b$,n),i=gg(n),o=_n(t,a.triggerRef),s=y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":E$(a.open),...r,ref:o,onClick:Bt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(x0,{asChild:!0,...i,children:s})});v$.displayName=b$;var _A="PopoverPortal",[Kye,Zye]=m$(_A,{forceMount:void 0}),w$=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=_c(_A,t);return y.jsx(Kye,{scope:t,forceMount:n,children:y.jsx(Ia,{present:n||i.open,children:y.jsx(xh,{asChild:!0,container:a,children:r})})})};w$.displayName=_A;var gh="PopoverContent",_$=R.forwardRef((e,t)=>{const n=Zye(gh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=_c(gh,e.__scopePopover);return y.jsx(Ia,{present:r||i.open,children:i.modal?y.jsx(Xye,{...a,ref:t}):y.jsx(Jye,{...a,ref:t})})});_$.displayName=gh;var Yye=zu("PopoverContent.RemoveScroll"),Xye=R.forwardRef((e,t)=>{const n=_c(gh,e.__scopePopover),r=R.useRef(null),a=_n(t,r),i=R.useRef(!1);return R.useEffect(()=>{const o=r.current;if(o)return Ww(o)},[]),y.jsx(cg,{as:Yye,allowPinchZoom:!0,children:y.jsx(x$,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Bt(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,c=s.button===2||u;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Bt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Jye=R.forwardRef((e,t)=>{const n=_c(gh,e.__scopePopover),r=R.useRef(!1),a=R.useRef(!1);return y.jsx(x$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),x$=R.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:f,...h}=e,p=_c(gh,n),g=gg(n);return Vw(),y.jsx(ug,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(vh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:y.jsx(nw,{"data-state":E$(p.open),role:"dialog",id:p.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),S$="PopoverClose",Qye=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=_c(S$,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Bt(e.onClick,()=>a.onOpenChange(!1))})});Qye.displayName=S$;var ebe="PopoverArrow",tbe=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=gg(n);return y.jsx(rw,{...a,...r,ref:t})});tbe.displayName=ebe;function E$(e){return e?"open":"closed"}var nbe=g$,rbe=v$,abe=w$,ibe=_$;function v1({...e}){return y.jsx(nbe,{"data-slot":"popover",...e})}function w1({...e}){return y.jsx(rbe,{"data-slot":"popover-trigger",...e})}function _1({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(abe,{children:y.jsx(ibe,{"data-slot":"popover-content",align:t,sideOffset:n,className:$t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function obe({options:e,value:t,onChange:n,placeholder:r="Select...",searchPlaceholder:a="Search...",emptyText:i="Nothing found.",triggerClassName:o,contentClassName:s,disabled:u=!1}){var p;const[c,f]=R.useState(!1),h=(p=e.find(g=>g.value===t))==null?void 0:p.label;return y.jsxs(v1,{open:c,onOpenChange:f,children:[y.jsx(w1,{asChild:!0,children:y.jsxs(Lt,{variant:"outline",role:"combobox","aria-expanded":c,className:$t("w-[200px] justify-between",o),disabled:u,children:[h||r,y.jsx(Gv,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),y.jsx(_1,{className:$t("w-[200px] p-0",s),children:y.jsxs(Bye,{children:[y.jsx(zye,{placeholder:a}),y.jsxs(Uye,{children:[y.jsx(qye,{children:i}),y.jsx(Hye,{children:e.map(g=>y.jsxs(Vye,{value:g.value,onSelect:v=>{n(v===t?"":v),f(!1)},children:[y.jsx(_o,{className:$t("mr-2 h-4 w-4",t===g.value?"opacity-100":"opacity-0")}),g.label]},g.value))})]})]})})]})}const sbe=()=>{const{selectedModelId:e,selectModel:t,getGloballyEnabledAndOrderedModels:n,dbProviderConfigs:r,globalModelSortOrder:a,isLoading:i}=Ai(Mn(u=>({selectedModelId:u.selectedModelId,selectModel:u.selectModel,getGloballyEnabledAndOrderedModels:u.getGloballyEnabledAndOrderedModels,dbProviderConfigs:u.dbProviderConfigs,globalModelSortOrder:u.globalModelSortOrder,isLoading:u.isLoading}))),o=R.useMemo(()=>n?n():[],[n,r,a]),s=vt.useMemo(()=>o.map(u=>({value:u.id,label:`${u.name} (${u.providerName})`})),[o]);return i?y.jsx(Mr,{className:"h-10 w-[250px]"}):y.jsx(obe,{options:s,value:e??"",onChange:u=>t(u||null),placeholder:"Select Model...",searchPlaceholder:"Search models...",emptyText:"No models enabled.",triggerClassName:"h-10 w-full min-w-[200px] max-w-[300px] text-xs",contentClassName:"w-[--radix-popover-trigger-width]",disabled:i||s.length===0})},lbe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},ube=()=>{const e=Na(n=>n.registerPromptControl),t=Ai(Mn(n=>({isLoading:n.isLoading,selectedModelId:n.selectedModelId})));return vt.useEffect(()=>e({id:"core-global-model-selector",triggerRenderer:()=>y.jsx(sbe,{}),show:()=>!0,getMetadata:()=>{const a=t.selectedModelId,{providerId:i,modelId:o}=lbe(a);return{providerId:i,modelId:o}},order:10}),[e,t.isLoading,t.selectedModelId]),null},cbe=({className:e})=>{const{temperature:t,setTemperature:n,topP:r,setTopP:a,maxTokens:i,setMaxTokens:o,topK:s,setTopK:u,presencePenalty:c,setPresencePenalty:f,frequencyPenalty:h,setFrequencyPenalty:p}=qr(Mn(D=>({temperature:D.temperature,setTemperature:D.setTemperature,topP:D.topP,setTopP:D.setTopP,maxTokens:D.maxTokens,setMaxTokens:D.setMaxTokens,topK:D.topK,setTopK:D.setTopK,presencePenalty:D.presencePenalty,setPresencePenalty:D.setPresencePenalty,frequencyPenalty:D.frequencyPenalty,setFrequencyPenalty:D.setFrequencyPenalty}))),[g,v]=R.useState(t),[b,_]=R.useState(r??1),[x,S]=R.useState(c??0),[E,C]=R.useState(h??0);R.useEffect(()=>v(t),[t]),R.useEffect(()=>_(r??1),[r]),R.useEffect(()=>S(c??0),[c]),R.useEffect(()=>C(h??0),[h]);const k=R.useCallback((D,U)=>{const W=U.target.value,Q=W===""?null:parseInt(W,10);(W===""||!isNaN(Q)&&Q!==null)&&D(Q)},[]),O=R.useCallback((D,U)=>{D(U[0])},[]),N=R.useCallback((D,U)=>{D(U[0])},[]);return y.jsxs("div",{className:$t("space-y-4 p-4 w-80",e),children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(An,{htmlFor:"popover-temperature",className:"text-xs",children:["Temperature (",g.toFixed(2),")"]}),y.jsx(Lf,{id:"popover-temperature",min:0,max:1,step:.01,value:[g],onValueChange:D=>O(v,D),onValueCommit:D=>N(n,D)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(An,{htmlFor:"popover-top-p",className:"text-xs",children:["Top P (",b.toFixed(2),")"]}),y.jsx(Lf,{id:"popover-top-p",min:0,max:1,step:.01,value:[b],onValueChange:D=>O(_,D),onValueCommit:D=>N(a,D)})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(An,{htmlFor:"popover-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(dr,{id:"popover-max-tokens",type:"number",placeholder:"Default",value:i??"",onChange:D=>k(o,D),min:"1",className:"h-8 text-xs"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(An,{htmlFor:"popover-top-k",className:"text-xs",children:"Top K"}),y.jsx(dr,{id:"popover-top-k",type:"number",placeholder:"Default",value:s??"",onChange:D=>k(u,D),min:"1",className:"h-8 text-xs"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(An,{htmlFor:"popover-presence-penalty",className:"text-xs",children:["Presence Penalty (",x.toFixed(2),")"]}),y.jsx(Lf,{id:"popover-presence-penalty",min:-2,max:2,step:.01,value:[x],onValueChange:D=>O(S,D),onValueCommit:D=>N(f,D)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(An,{htmlFor:"popover-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",E.toFixed(2),")"]}),y.jsx(Lf,{id:"popover-frequency-penalty",min:-2,max:2,step:.01,value:[E],onValueChange:D=>O(C,D),onValueCommit:D=>N(p,D)})]})]})},dbe=()=>{const e=Na(u=>u.registerPromptControl),{enableAdvancedSettings:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s}=qr(Mn(u=>({enableAdvancedSettings:u.enableAdvancedSettings,temperature:u.temperature,maxTokens:u.maxTokens,topP:u.topP,topK:u.topK,presencePenalty:u.presencePenalty,frequencyPenalty:u.frequencyPenalty})));return vt.useEffect(()=>e({id:"core-parameter-control",triggerRenderer:()=>y.jsxs(v1,{children:[y.jsx(w1,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Adjust AI Parameters",children:y.jsx(xq,{className:"h-5 w-5"})})}),y.jsx(_1,{className:"w-auto p-0",side:"top",align:"end",children:y.jsx(cbe,{})})]}),show:()=>t,getParameters:()=>{const f=qr.getState(),h={};return f.temperature!==.7&&(h.temperature=f.temperature),f.maxTokens!==null&&(h.max_tokens=f.maxTokens),f.topP!==null&&(h.top_p=f.topP),f.topK!==null&&(h.top_k=f.topK),f.presencePenalty!==0&&(h.presence_penalty=f.presencePenalty),f.frequencyPenalty!==0&&(h.frequency_penalty=f.frequencyPenalty),Object.keys(h).length>0?h:void 0},order:20}),[e,t,n,r,a,i,o,s]),null},C$=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],fbe=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{if(typeof r.result=="string"){const a=r.result.split(",")[1];a?t(a):n(new Error("Failed to extract base64 content from data URL."))}else n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsDataURL(e)}),hbe=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?t(r.result):n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsText(e)}),pbe=()=>{const e=Na(i=>i.registerPromptControl),t=Tb(i=>i.addAttachedFile),n=R.useRef(null),r=R.useCallback(()=>{var i;(i=n.current)==null||i.click()},[]),a=R.useCallback(async i=>{const o=i.target.files;if(o){const s=Array.from(o).map(async u=>{try{const c=u.type||"application/octet-stream",f=u.name.toLowerCase();if(c.startsWith("text/")||c==="application/json"||C$.some(p=>f.endsWith(p))){const p=await hbe(u);t({source:"direct",name:u.name,type:c,size:u.size,contentText:p})}else{const p=await fbe(u);t({source:"direct",name:u.name,type:c,size:u.size,contentBase64:p})}}catch(c){console.error(`Error reading file ${u.name}:`,c),dt.error(`Failed to read file "${u.name}": ${c instanceof Error?c.message:"Unknown error"}`)}});await Promise.all(s),i.target&&(i.target.value="")}},[t]);return vt.useEffect(()=>e({id:"core-file-control",triggerRenderer:()=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",multiple:!0}),y.jsx(Lt,{type:"button",variant:"ghost",size:"icon",onClick:r,className:"h-10 w-10 rounded-full","aria-label":"Attach file(s)",children:y.jsx(cq,{className:"h-5 w-5"})})]}),show:()=>!0,order:30}),[e,t,r,a]),null},Cl=Bl(zl((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,isVfsEnabledForItem:!1,vfsKey:null,configuredVfsKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,n&&dt.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(u=>u.parentId===a).map(u=>u.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1})},setIsVfsEnabledForItem:n=>{console.log(`[VfsStore] Setting isVfsEnabledForItem to: ${n}`),e({isVfsEnabledForItem:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):(t().clearSelection(),t().vfsKey===t().configuredVfsKey&&e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}))},setVfsKey:n=>{const r=t().configuredVfsKey;console.log(`[VfsStore] Setting vfsKey to: ${n} (Current configured: ${r})`),e({vfsKey:n}),n!==r?(console.log("[VfsStore] vfsKey changed. Resetting VFS state."),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}),t().initializeVFS(n||"default_fallback_key")):n===r&&!t().fs&&(console.log("[VfsStore] vfsKey matches configured key, but fs not ready. Retrying initialization."),t().initializeVFS(n||"default_fallback_key"))},setConfiguredVfsKey:n=>{e({configuredVfsKey:n})},initializeVFS:async(n=t().vfsKey||"default_fallback_key")=>{if(!n){console.warn("[VfsStore] initializeVFS called without a valid vfsKey.");return}if(t().configuredVfsKey===n&&t().fs||t().loading){console.log(`[VfsStore] Initialization skipped for key "${n}" (already initialized or loading).`);return}const{_setLoading:r,_setError:a,_addNodes:i,_setFsInstance:o,setConfiguredVfsKey:s}=t();r(!0),a(null),o(null),console.log(`[VfsStore] Initializing VFS with key: ${n}`);try{const u=await mne(n);if(!u)throw new Error("Filesystem backend initialization failed.");o(u),s(n),console.log(`[VfsStore] VFS instance set for key: ${n}`);const c="vfs-root";let f=t().nodes[c];try{await u.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(h){if(h.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw h}if(!f||f.path!=="/"){const h=Date.now();f={id:c,parentId:null,name:"",path:"/",type:"folder",createdAt:h,lastModified:h},i([f]),console.log("[VfsStore] Root node added/updated in state.")}e(h=>{h.rootId=f.id,h.currentParentId=f.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${f.id}`),await t().fetchNodes(f.id)}catch(u){console.error("Failed to initialize VFS:",u),a("Failed to initialize VFS."),o(null),s(null)}finally{r(!1)}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:u}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${f}`);const h=await Rk(f);console.log(`[VfsStore] Fetched ${h.length} entries for ${f}`);const p=n??u??"",g=new Set(h.map(_=>_.path)),v=Object.values(s).filter(_=>_.parentId===n&&!g.has(_.path)).map(_=>_.id);v.length>0&&(console.log(`[VfsStore] Removing ${v.length} nodes.`),t()._removeNodes(v));const b=h.map(_=>{const x=Object.values(s).find(E=>E.path===_.path),S=Date.now();return{id:(x==null?void 0:x.id)||Lo(),parentId:n,name:_.name,path:_.path,type:_.isDirectory?"folder":"file",size:_.size,createdAt:(x==null?void 0:x.createdAt)??S,lastModified:_.lastModified.getTime(),mimeType:_.isDirectory?void 0:_.mimeType}});b.length>0&&(console.log(`[VfsStore] Adding/Updating ${b.length} nodes.`),i(b)),e(_=>{const x=b.map(S=>S.id);(!_.childrenMap[p]||JSON.stringify(_.childrenMap[p].sort())!==JSON.stringify(x.sort()))&&(_.childrenMap[p]=x,console.log(`[VfsStore] Updated childrenMap for parent: ${p}`))})}catch(c){console.error("Failed to fetch VFS nodes:",c),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Gn(n);if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i}=t(),o=Gn(n),s=r(o);s&&s.type==="folder"?(e(u=>{u.currentParentId=s.id}),t().childrenMap[s.id]||await a(s.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,_addNodes:c}=t();if(!o){i("Filesystem not initialized.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const f=n?s[n]:s[u||""],h=f?f.path:"/",p=Cb(h,r.trim());try{throw await o.promises.stat(p),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await Q8(p);const g=Date.now(),b={id:Lo(),parentId:n,name:r.trim(),path:p,type:"folder",createdAt:g,lastModified:g};c([b])}catch(f){console.error("Failed to create directory:",f),i(f.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u}=t();if(!o){i("Filesystem not initialized.");return}a(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/";await eM(Array.from(r),f),await t().fetchNodes(n)}catch(c){console.error("Failed to upload files:",c),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{for(const s of n){const u=t().nodes[s];u&&await Nk(u.path,u.type==="folder")}i(n)}catch(s){console.error("Failed to delete nodes:",s),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:u,rootId:c}=t();if(!u){i("Filesystem not initialized.");return}if(!r.trim()){i("Name cannot be empty.");return}const f=s[n];if(!f){i("Item not found.");return}if(f.name!==r.trim()){a(!0);try{const h=f.parentId?s[f.parentId]:s[c||""],p=h?h.path:"/",g=Cb(p,r.trim());try{throw await u.promises.stat(g),new Error(`"${r.trim()}" already exists.`)}catch(b){if(b.code!=="ENOENT")throw b}await bne(f.path,g);const v={name:r.trim(),path:g,lastModified:Date.now()};o(n,v),await t().fetchNodes(f.parentId)}catch(h){console.error("Failed to rename item:",h),i(h.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i}=t();if(!a)return i("Filesystem not initialized."),null;const o=r[n];if(!o||o.type!=="file")return i("File not found."),null;try{const s=await Ph(o.path),u=o.mimeType||"application/octet-stream",c=new Blob([s],{type:u});return{name:o.name,blob:c}}catch(s){return console.error("Failed to download file:",s),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),mbe=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Gi,{className:"bg-muted/30",children:[y.jsx(vr,{className:"px-2 py-1"}),y.jsx(vr,{className:"px-2 py-1",children:y.jsx(Wv,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(vr,{className:"py-1 px-2",colSpan:3,children:y.jsx(dr,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(vr,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(_o,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"top",children:"Create (Enter)"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(Ul,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var x1="Checkbox",[gbe,d1e]=Ni(x1),[ybe,bbe]=gbe(x1),k$=R.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[p,g]=R.useState(null),v=_n(t,C=>g(C)),b=R.useRef(!1),_=p?f||!!p.closest("form"):!0,[x,S]=Ps({prop:a,defaultProp:i??!1,onChange:c,caller:x1}),E=R.useRef(x);return R.useEffect(()=>{const C=p==null?void 0:p.form;if(C){const k=()=>S(E.current);return C.addEventListener("reset",k),()=>C.removeEventListener("reset",k)}},[p,S]),y.jsxs(ybe,{scope:n,state:x,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"checkbox","aria-checked":$u(x)?"mixed":x,"aria-required":o,"data-state":N$(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onKeyDown:Bt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Bt(e.onClick,C=>{S(k=>$u(k)?!0:!k),_&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),_&&y.jsx(R$,{control:p,bubbles:!b.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"},defaultChecked:$u(i)?!1:i})]})});k$.displayName=x1;var A$="CheckboxIndicator",T$=R.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=bbe(A$,n);return y.jsx(Ia,{present:r||$u(i.state)||i.state===!0,children:y.jsx(Jt.span,{"data-state":N$(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});T$.displayName=A$;var vbe="CheckboxBubbleInput",R$=R.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=R.useRef(null),u=_n(s,o),c=a1(n),f=ew(t);R.useEffect(()=>{const p=s.current;if(!p)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&b){const _=new Event("click",{bubbles:r});p.indeterminate=$u(n),b.call(p,$u(n)?!1:n),p.dispatchEvent(_)}},[c,n,r]);const h=R.useRef($u(n)?!1:n);return y.jsx(Jt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});R$.displayName=vbe;function $u(e){return e==="indeterminate"}function N$(e){return $u(e)?"indeterminate":e?"checked":"unchecked"}var wbe=k$,_be=T$;function xbe({className:e,...t}){return y.jsx(wbe,{"data-slot":"checkbox",className:$t("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(_be,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(_o,{className:"size-3.5"})})})}var JE=["Enter"," "],Sbe=["ArrowDown","PageUp","Home"],I$=["ArrowUp","PageDown","End"],Ebe=[...Sbe,...I$],Cbe={ltr:[...JE,"ArrowRight"],rtl:[...JE,"ArrowLeft"]},kbe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},yg="Menu",[v0,Abe,Tbe]=t1(yg),[Td,O$]=Ni(yg,[Tbe,uc,n1]),S1=uc(),D$=n1(),[Rbe,Rd]=Td(yg),[Nbe,bg]=Td(yg),j$=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=S1(t),[u,c]=R.useState(null),f=R.useRef(!1),h=ka(i),p=Lh(a);return R.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),y.jsx(tw,{...s,children:y.jsx(Rbe,{scope:t,open:n,onOpenChange:h,content:u,onContentChange:c,children:y.jsx(Nbe,{scope:t,onClose:R.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:p,modal:o,children:r})})})};j$.displayName=yg;var Ibe="MenuAnchor",xA=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=S1(n);return y.jsx(x0,{...a,...r,ref:t})});xA.displayName=Ibe;var SA="MenuPortal",[Obe,M$]=Td(SA,{forceMount:void 0}),P$=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Rd(SA,t);return y.jsx(Obe,{scope:t,forceMount:n,children:y.jsx(Ia,{present:n||i.open,children:y.jsx(xh,{asChild:!0,container:a,children:r})})})};P$.displayName=SA;var wo="MenuContent",[Dbe,EA]=Td(wo),F$=R.forwardRef((e,t)=>{const n=M$(wo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Rd(wo,e.__scopeMenu),o=bg(wo,e.__scopeMenu);return y.jsx(v0.Provider,{scope:e.__scopeMenu,children:y.jsx(Ia,{present:r||i.open,children:y.jsx(v0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(jbe,{...a,ref:t}):y.jsx(Mbe,{...a,ref:t})})})})}),jbe=R.forwardRef((e,t)=>{const n=Rd(wo,e.__scopeMenu),r=R.useRef(null),a=_n(t,r);return R.useEffect(()=>{const i=r.current;if(i)return Ww(i)},[]),y.jsx(CA,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Bt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Mbe=R.forwardRef((e,t)=>{const n=Rd(wo,e.__scopeMenu);return y.jsx(CA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Pbe=zu("MenuContent.ScrollLock"),CA=R.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...b}=e,_=Rd(wo,n),x=bg(wo,n),S=S1(n),E=D$(n),C=Abe(n),[k,O]=R.useState(null),N=R.useRef(null),D=_n(t,N,_.onContentChange),U=R.useRef(0),W=R.useRef(""),Q=R.useRef(0),F=R.useRef(null),Z=R.useRef("right"),L=R.useRef(0),he=v?cg:R.Fragment,ie=v?{as:Pbe,allowPinchZoom:!0}:void 0,ne=se=>{var Pe,Ae;const G=W.current+se,X=C().filter(Te=>!Te.disabled),Y=document.activeElement,re=(Pe=X.find(Te=>Te.ref.current===Y))==null?void 0:Pe.textValue,be=X.map(Te=>Te.textValue),we=Kbe(be,G,re),Me=(Ae=X.find(Te=>Te.textValue===we))==null?void 0:Ae.ref.current;(function Te(qe){W.current=qe,window.clearTimeout(U.current),qe!==""&&(U.current=window.setTimeout(()=>Te(""),1e3))})(G),Me&&setTimeout(()=>Me.focus())};R.useEffect(()=>()=>window.clearTimeout(U.current),[]),Vw();const ee=R.useCallback(se=>{var X,Y;return Z.current===((X=F.current)==null?void 0:X.side)&&Ybe(se,(Y=F.current)==null?void 0:Y.area)},[]);return y.jsx(Dbe,{scope:n,searchRef:W,onItemEnter:R.useCallback(se=>{ee(se)&&se.preventDefault()},[ee]),onItemLeave:R.useCallback(se=>{var G;ee(se)||((G=N.current)==null||G.focus(),O(null))},[ee]),onTriggerLeave:R.useCallback(se=>{ee(se)&&se.preventDefault()},[ee]),pointerGraceTimerRef:Q,onPointerGraceIntentChange:R.useCallback(se=>{F.current=se},[]),children:y.jsx(he,{...ie,children:y.jsx(ug,{asChild:!0,trapped:a,onMountAutoFocus:Bt(i,se=>{var G;se.preventDefault(),(G=N.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(vh,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:g,children:y.jsx(RL,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:O,onEntryFocus:Bt(u,se=>{x.isUsingKeyboardRef.current||se.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(nw,{role:"menu","aria-orientation":"vertical","data-state":Q$(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...b,ref:D,style:{outline:"none",...b.style},onKeyDown:Bt(b.onKeyDown,se=>{const X=se.target.closest("[data-radix-menu-content]")===se.currentTarget,Y=se.ctrlKey||se.altKey||se.metaKey,re=se.key.length===1;X&&(se.key==="Tab"&&se.preventDefault(),!Y&&re&&ne(se.key));const be=N.current;if(se.target!==be||!Ebe.includes(se.key))return;se.preventDefault();const Me=C().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);I$.includes(se.key)&&Me.reverse(),Gbe(Me)}),onBlur:Bt(e.onBlur,se=>{se.currentTarget.contains(se.target)||(window.clearTimeout(U.current),W.current="")}),onPointerMove:Bt(e.onPointerMove,w0(se=>{const G=se.target,X=L.current!==se.clientX;if(se.currentTarget.contains(G)&&X){const Y=se.clientX>L.current?"right":"left";Z.current=Y,L.current=se.clientX}}))})})})})})})});F$.displayName=wo;var Fbe="MenuGroup",kA=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"group",...r,ref:t})});kA.displayName=Fbe;var Lbe="MenuLabel",L$=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{...r,ref:t})});L$.displayName=Lbe;var Fv="MenuItem",uO="menu.itemSelect",E1=R.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=R.useRef(null),o=bg(Fv,e.__scopeMenu),s=EA(Fv,e.__scopeMenu),u=_n(t,i),c=R.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(uO,{bubbles:!0,cancelable:!0});h.addEventListener(uO,g=>r==null?void 0:r(g),{once:!0}),HO(h,p),p.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx($$,{...a,ref:u,disabled:n,onClick:Bt(e.onClick,f),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),c.current=!0},onPointerUp:Bt(e.onPointerUp,h=>{var p;c.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:Bt(e.onKeyDown,h=>{const p=s.searchRef.current!=="";n||p&&h.key===" "||JE.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});E1.displayName=Fv;var $$=R.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=EA(Fv,n),s=D$(n),u=R.useRef(null),c=_n(t,u),[f,h]=R.useState(!1),[p,g]=R.useState("");return R.useEffect(()=>{const v=u.current;v&&g((v.textContent??"").trim())},[i.children]),y.jsx(v0.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:y.jsx(NL,{asChild:!0,...s,focusable:!r,children:y.jsx(Jt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Bt(e.onPointerMove,w0(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Bt(e.onPointerLeave,w0(v=>o.onItemLeave(v))),onFocus:Bt(e.onFocus,()=>h(!0)),onBlur:Bt(e.onBlur,()=>h(!1))})})})}),$be="MenuCheckboxItem",B$=R.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(V$,{scope:e.__scopeMenu,checked:n,children:y.jsx(E1,{role:"menuitemcheckbox","aria-checked":Lv(n)?"mixed":n,...a,ref:t,"data-state":TA(n),onSelect:Bt(a.onSelect,()=>r==null?void 0:r(Lv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});B$.displayName=$be;var z$="MenuRadioGroup",[Bbe,zbe]=Td(z$,{value:void 0,onValueChange:()=>{}}),U$=R.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=ka(r);return y.jsx(Bbe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(kA,{...a,ref:t})})});U$.displayName=z$;var q$="MenuRadioItem",H$=R.forwardRef((e,t)=>{const{value:n,...r}=e,a=zbe(q$,e.__scopeMenu),i=n===a.value;return y.jsx(V$,{scope:e.__scopeMenu,checked:i,children:y.jsx(E1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":TA(i),onSelect:Bt(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});H$.displayName=q$;var AA="MenuItemIndicator",[V$,Ube]=Td(AA,{checked:!1}),G$=R.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=Ube(AA,n);return y.jsx(Ia,{present:r||Lv(i.checked)||i.checked===!0,children:y.jsx(Jt.span,{...a,ref:t,"data-state":TA(i.checked)})})});G$.displayName=AA;var qbe="MenuSeparator",W$=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});W$.displayName=qbe;var Hbe="MenuArrow",K$=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=S1(n);return y.jsx(rw,{...a,...r,ref:t})});K$.displayName=Hbe;var Vbe="MenuSub",[f1e,Z$]=Td(Vbe),mm="MenuSubTrigger",Y$=R.forwardRef((e,t)=>{const n=Rd(mm,e.__scopeMenu),r=bg(mm,e.__scopeMenu),a=Z$(mm,e.__scopeMenu),i=EA(mm,e.__scopeMenu),o=R.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:u}=i,c={__scopeMenu:e.__scopeMenu},f=R.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return R.useEffect(()=>f,[f]),R.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),u(null)}},[s,u]),y.jsx(xA,{asChild:!0,...c,children:y.jsx($$,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Q$(n.open),...e,ref:Bu(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Bt(e.onPointerMove,w0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Bt(e.onPointerLeave,w0(h=>{var g,v;f();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const b=(v=n.content)==null?void 0:v.dataset.side,_=b==="right",x=_?-5:5,S=p[_?"left":"right"],E=p[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:S,y:p.bottom}],side:b}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Bt(e.onKeyDown,h=>{var g;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||Cbe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});Y$.displayName=mm;var X$="MenuSubContent",J$=R.forwardRef((e,t)=>{const n=M$(wo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Rd(wo,e.__scopeMenu),o=bg(wo,e.__scopeMenu),s=Z$(X$,e.__scopeMenu),u=R.useRef(null),c=_n(t,u);return y.jsx(v0.Provider,{scope:e.__scopeMenu,children:y.jsx(Ia,{present:r||i.open,children:y.jsx(v0.Slot,{scope:e.__scopeMenu,children:y.jsx(CA,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=u.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Bt(e.onFocusOutside,f=>{f.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Bt(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Bt(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),p=kbe[o.dir].includes(f.key);h&&p&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),f.preventDefault())})})})})})});J$.displayName=X$;function Q$(e){return e?"open":"closed"}function Lv(e){return e==="indeterminate"}function TA(e){return Lv(e)?"indeterminate":e?"checked":"unchecked"}function Gbe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Wbe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Kbe(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Wbe(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function Zbe(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,p=u.y;f>r!=p>r&&n<(h-c)*(r-f)/(p-f)+c&&(a=!a)}return a}function Ybe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Zbe(n,t)}function w0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Xbe=j$,Jbe=xA,Qbe=P$,eve=F$,tve=kA,nve=L$,rve=E1,ave=B$,ive=U$,ove=H$,sve=G$,lve=W$,uve=K$,cve=Y$,dve=J$,RA="ContextMenu",[fve,h1e]=Ni(RA,[O$]),mi=O$(),[hve,eB]=fve(RA),tB=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=R.useState(!1),u=mi(t),c=ka(r),f=R.useCallback(h=>{s(h),c(h)},[c]);return y.jsx(hve,{scope:t,open:o,onOpenChange:f,modal:i,children:y.jsx(Xbe,{...u,dir:a,open:o,onOpenChange:f,modal:i,children:n})})};tB.displayName=RA;var nB="ContextMenuTrigger",rB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=eB(nB,n),o=mi(n),s=R.useRef({x:0,y:0}),u=R.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),c=R.useRef(0),f=R.useCallback(()=>window.clearTimeout(c.current),[]),h=p=>{s.current={x:p.clientX,y:p.clientY},i.onOpenChange(!0)};return R.useEffect(()=>f,[f]),R.useEffect(()=>void(r&&f()),[r,f]),y.jsxs(y.Fragment,{children:[y.jsx(Jbe,{...o,virtualRef:u}),y.jsx(Jt.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Bt(e.onContextMenu,p=>{f(),h(p),p.preventDefault()}),onPointerDown:r?e.onPointerDown:Bt(e.onPointerDown,lb(p=>{f(),c.current=window.setTimeout(()=>h(p),700)})),onPointerMove:r?e.onPointerMove:Bt(e.onPointerMove,lb(f)),onPointerCancel:r?e.onPointerCancel:Bt(e.onPointerCancel,lb(f)),onPointerUp:r?e.onPointerUp:Bt(e.onPointerUp,lb(f))})]})});rB.displayName=nB;var pve="ContextMenuPortal",aB=e=>{const{__scopeContextMenu:t,...n}=e,r=mi(t);return y.jsx(Qbe,{...r,...n})};aB.displayName=pve;var iB="ContextMenuContent",oB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=eB(iB,n),i=mi(n),o=R.useRef(!1);return y.jsx(eve,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var u;(u=e.onCloseAutoFocus)==null||u.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var u;(u=e.onInteractOutside)==null||u.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oB.displayName=iB;var mve="ContextMenuGroup",gve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(tve,{...a,...r,ref:t})});gve.displayName=mve;var yve="ContextMenuLabel",bve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(nve,{...a,...r,ref:t})});bve.displayName=yve;var vve="ContextMenuItem",sB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(rve,{...a,...r,ref:t})});sB.displayName=vve;var wve="ContextMenuCheckboxItem",_ve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(ave,{...a,...r,ref:t})});_ve.displayName=wve;var xve="ContextMenuRadioGroup",Sve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(ive,{...a,...r,ref:t})});Sve.displayName=xve;var Eve="ContextMenuRadioItem",Cve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(ove,{...a,...r,ref:t})});Cve.displayName=Eve;var kve="ContextMenuItemIndicator",Ave=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(sve,{...a,...r,ref:t})});Ave.displayName=kve;var Tve="ContextMenuSeparator",lB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(lve,{...a,...r,ref:t})});lB.displayName=Tve;var Rve="ContextMenuArrow",Nve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(uve,{...a,...r,ref:t})});Nve.displayName=Rve;var Ive="ContextMenuSubTrigger",Ove=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(cve,{...a,...r,ref:t})});Ove.displayName=Ive;var Dve="ContextMenuSubContent",jve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mi(n);return y.jsx(dve,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jve.displayName=Dve;function lb(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Mve=tB,Pve=rB,Fve=aB,Lve=oB,$ve=sB,Bve=lB;function zve({...e}){return y.jsx(Mve,{"data-slot":"context-menu",...e})}function Uve({...e}){return y.jsx(Pve,{"data-slot":"context-menu-trigger",...e})}function qve({className:e,...t}){return y.jsx(Fve,{children:y.jsx(Lve,{"data-slot":"context-menu-content",className:$t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function yl({className:e,inset:t,variant:n="default",...r}){return y.jsx($ve,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:$t("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function cO({className:e,...t}){return y.jsx(Bve,{"data-slot":"context-menu-separator",className:$t("bg-border -mx-1 my-1 h-px",e),...t})}const Hve=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:p,handleDelete:g,setNewName:v,renameInputRef:b,handleGitInit:_,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const k=Q=>{Q.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||!t&&!i&&s(e)},O=Q=>{Q.key==="Enter"?h():Q.key==="Escape"&&f()},N=e.type==="folder",D=N?r?IU:Wv:RU,U=N?r?"text-green-400":"text-yellow-400":"text-blue-400",W=y.jsxs(Gi,{className:$t("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed"),onClick:k,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(vr,{className:"px-2 py-1",children:y.jsx(xbe,{checked:n,onCheckedChange:Q=>u(!!Q,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||N})}),y.jsx(vr,{className:"px-2 py-1",children:y.jsx(D,{className:$t("h-5 w-5",U)})}),y.jsx(vr,{className:"py-1 px-2",children:t?y.jsx(dr,{ref:b,value:a,onChange:Q=>v(Q.target.value),onBlur:h,onKeyDown:O,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:Q=>Q.stopPropagation(),disabled:i}):y.jsx("span",{className:$t("truncate",N&&"cursor-pointer hover:underline"),title:e.name,onClick:Q=>{N&&(Q.stopPropagation(),s(e))},children:e.name})}),y.jsx(vr,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?qv(e.size):""}),y.jsx(vr,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(vr,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:$t("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:Q=>{Q.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),children:i?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(_o,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"top",children:"Save (Enter)"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),f()},"aria-label":"Cancel edit",disabled:i,children:y.jsx(Ul,{className:"h-4 w-4"})})}),y.jsx(Dn,{side:"top",children:"Cancel (Esc)"})]})})]}):y.jsxs(y.Fragment,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||o,children:y.jsx(z2,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:"Rename"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),p(e)},"aria-label":N?"Download folder as ZIP":"Download file",disabled:i,children:y.jsx(kb,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:N?"Download folder (.zip)":"Download file"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:Q=>{Q.stopPropagation(),g(e)},"aria-label":`Delete ${N?"folder":"file"}`,disabled:i,children:y.jsx(Uu,{className:"h-3.5 w-3.5"})})}),y.jsx(Dn,{side:"top",children:"Delete"})]})})]})})})]},e.id);return N?y.jsxs(zve,{children:[y.jsx(Uve,{disabled:t||i,asChild:!0,children:W}),y.jsxs(qve,{children:[y.jsx(yl,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx(cO,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(yl,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(zU,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(yl,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(BO,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(yl,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(zO,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(yl,{onSelect:()=>C(e.path),disabled:i,children:[y.jsx(UO,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(yl,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(Kv,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx(cO,{}),y.jsxs(yl,{onSelect:()=>c(e),disabled:i,children:[y.jsx(z2,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(yl,{onSelect:()=>p(e),disabled:i,children:[y.jsx(kb,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(yl,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(Uu,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):W},Vve=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,cancelCreatingFolder:p,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:_,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:O,handleGitCommit:N,handleGitPush:D,handleGitStatus:U})=>{const W=R.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx(lg,{className:"flex-grow h-0 border-t border-border",children:y.jsxs(c1,{className:"w-full text-sm",children:[y.jsx(d1,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Gi,{className:"hover:bg-card",children:[y.jsx(sa,{className:"w-[40px] px-2"}),y.jsx(sa,{className:"w-[40px] px-2"}),y.jsx(sa,{children:"Name"}),y.jsx(sa,{className:"w-[100px] text-right",children:"Size"}),y.jsx(sa,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(sa,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs(f1,{children:[r&&y.jsx(mbe,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:p,newFolderInputRef:E,isOperationLoading:o}),W.map(Q=>{const F=t===Q.path,Z=i.has(Q.id),L=C[Q.path]??!1;return y.jsx(Hve,{entry:Q,isEditingThis:F,isChecked:Z,isGitRepo:L,newName:F?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:v,handleDelete:b,setNewName:_,renameInputRef:S,handleGitInit:k,handleGitPull:O,handleGitCommit:N,handleGitPush:D,handleGitStatus:U},Q.id)}),e.length===0&&!r&&!o&&y.jsx(Gi,{children:y.jsx(vr,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},Gve=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:u,startCreatingFolder:c,handleUploadClick:f,handleFolderUploadClick:h,handleArchiveUploadClick:p,handleDownloadAll:g,handleCloneClick:v,fileInputRef:b,folderInputRef:_,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:b,onChange:S,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Lt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(GU,{className:"h-4 w-4"})}),y.jsx(Lt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(PU,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(Lt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(uC,{className:"h-4 w-4"})}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(sC,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),f()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(LO,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Wv,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),p()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(_U,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Kv,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Qz,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),Wve=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:u})=>y.jsx(Zw,{open:e,onOpenChange:t,children:y.jsxs(Yw,{children:[y.jsxs(Xw,{children:[y.jsx(Qw,{children:"Clone Git Repository"}),y.jsxs(e1,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:u}),"."]})]}),y.jsxs("div",{className:"grid gap-4 py-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(An,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(dr,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(An,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(dr,{id:"clone-branch",value:a,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]}),y.jsxs(Jw,{children:[y.jsx(Lt,{variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),y.jsx(Lt,{onClick:s,disabled:o||!n.trim(),children:o?y.jsxs(y.Fragment,{children:[y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),"Cloning..."]}):"Clone"})]})]})}),Kve=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(Zw,{open:e,onOpenChange:t,children:y.jsxs(Yw,{children:[y.jsxs(Xw,{children:[y.jsx(Qw,{children:"Commit Changes"}),y.jsxs(e1,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]})]}),y.jsx("div",{className:"grid gap-4 py-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(An,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(dr,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})}),y.jsxs(Jw,{children:[y.jsx(Lt,{variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),y.jsx(Lt,{onClick:o,disabled:i||!r.trim(),children:i?y.jsxs(y.Fragment,{children:[y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),"Committing..."]}):"Commit"})]})]})}),uB=R.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,error:a,fetchNodes:i,createDirectory:o,uploadFiles:s,deleteNodes:u,renameNode:c,setCurrentPath:f,initializeVFS:h,rootId:p,fs:g,_setError:v,selectFile:b,deselectFile:_,selectedFileIds:x}=Cl(Mn(de=>({nodes:de.nodes,childrenMap:de.childrenMap,currentParentId:de.currentParentId,selectedFileIds:de.selectedFileIds,loading:de.loading,error:de.error,fetchNodes:de.fetchNodes,createDirectory:de.createDirectory,uploadFiles:de.uploadFiles,deleteNodes:de.deleteNodes,renameNode:de.renameNode,selectFile:de.selectFile,deselectFile:de.deselectFile,setCurrentPath:de.setCurrentPath,initializeVFS:de.initializeVFS,rootId:de.rootId,fs:de.fs,_setOperationLoading:de._setOperationLoading,_setError:de._setError,_addNodes:de._addNodes,_removeNodes:de._removeNodes}))),[S,E]=R.useState(""),[C,k]=R.useState(null),[O,N]=R.useState(!1),[D,U]=R.useState(""),[W,Q]=R.useState(!1),[F,Z]=R.useState({}),[L,he]=R.useState(!1),[ie,ne]=R.useState(""),[ee,se]=R.useState(""),[G,X]=R.useState(!1),[Y,re]=R.useState(!1),[be,we]=R.useState(null),[Me,Pe]=R.useState(""),[Ae,Te]=R.useState(!1),[qe,it]=R.useState({}),Ie=R.useRef(null),Re=R.useRef(null),z=R.useRef(null),Ce=R.useRef(null),Ne=R.useRef(null),ce=n?e[n]:null,ae=ce?ce.path:"/",xe=(t[n||p||""]||[]).map(de=>e[de]).filter(de=>!!de).sort((de,Fe)=>de.type==="folder"&&Fe.type==="file"?-1:de.type==="file"&&Fe.type==="folder"?1:de.name.localeCompare(Fe.name)),Le=R.useMemo(()=>xe.filter(de=>de.type==="folder").map(de=>de.path),[xe]),Se=r||W||G||Ae;R.useEffect(()=>{!p&&!r&&h("default_vfs_key")},[p,h,r]),R.useEffect(()=>{n!==null&&!t[n]&&!r&&g?i(n):n===null&&p&&!t[p]&&!r&&g&&i(p)},[n,i,t,p,r,g]),R.useEffect(()=>{var de,Fe;C&&((de=Ce.current)==null||de.focus(),(Fe=Ce.current)==null||Fe.select())},[C]),R.useEffect(()=>{var de;O&&((de=Ne.current)==null||de.focus())},[O]),R.useEffect(()=>{(async()=>{if(!g||Le.length===0)return;const Fe={};let ot=!1;for(const Dt of Le)try{const un=await vne(Dt);F[Dt]!==un&&(Fe[Dt]=un,ot=!0)}catch(un){console.error(`Error checking git status for ${Dt}:`,un),F[Dt]!==!1&&(Fe[Dt]=!1,ot=!0)}ot&&Z(Dt=>({...Dt,...Fe}))})()},[Le,g,F]);const Ve=R.useCallback(async(de,Fe=!0)=>{if(!Se){Fe&&Q(!0),v(null);try{await de()}catch(ot){console.error("[FileManager Operation Error]:",ot)}finally{Fe&&Q(!1)}}},[Se,v]),xt=R.useCallback(de=>{Se||C||de.type==="folder"&&Ve(()=>f(de.path),!1)},[Se,C,f,Ve]),ht=R.useCallback(()=>{if(Se||ae==="/")return;const de=Hv(ae);Ve(()=>f(de),!1)},[Se,ae,f,Ve]),Et=R.useCallback(()=>{Se||ae==="/"||Ve(()=>f("/"),!1)},[Se,ae,f,Ve]),Pt=R.useCallback(()=>{Ve(()=>i(n))},[Ve,i,n]),Tt=R.useCallback((de,Fe)=>{const ot=e[Fe];ot&&ot.type==="file"?de?b(Fe):_(Fe):ot&&ot.type==="folder"&&dt.info("Folders cannot be attached to the prompt.")},[b,_,e]),Ut=R.useCallback(de=>{Se||O||(k(de.path),E(de.name),N(!1))},[Se,O]),ge=R.useCallback(()=>{k(null),E("")},[]),I=R.useCallback(async()=>{if(!C||!S.trim()){ge();return}const de=Object.values(e).find(Fe=>Fe.path===C);de&&de.name!==S.trim()&&await Ve(()=>c(de.id,S.trim())),ge()},[C,S,c,ge,e,Ve]),H=R.useCallback(()=>{Se||C||(N(!0),U(""),k(null))},[Se,C]),fe=R.useCallback(()=>{N(!1),U("")},[]),Oe=R.useCallback(async()=>{if(!D.trim()){fe();return}await Ve(()=>o(n,D.trim())),fe()},[D,o,n,fe,Ve]),ve=()=>{var de;return(de=Ie.current)==null?void 0:de.click()},ke=()=>{var de;return(de=Re.current)==null?void 0:de.click()},le=()=>{var de;return(de=z.current)==null?void 0:de.click()},ct=R.useCallback(async de=>{const Fe=de.target.files;Fe&&Fe.length>0&&(await Ve(()=>s(n,Fe)),de.target&&(de.target.value=""))},[s,n,Ve]),yt=R.useCallback(async de=>{var ot;const Fe=(ot=de.target.files)==null?void 0:ot[0];Fe&&(await Ve(async()=>{await yne(Fe,ae),await i(n)}),de.target&&(de.target.value=""))},[ae,i,n,Ve]),M=R.useCallback(async de=>{window.confirm(`Delete ${de.type} "${de.name}"?${de.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ve(()=>u([de.id]))},[u,Ve]),Be=R.useCallback(async de=>{await Ve(async()=>{de.type==="file"?await gne(de.path):await O4(`${de.name}.zip`,de.path)})},[Ve]),et=R.useCallback(async()=>{xe.length!==0&&await Ve(async()=>{const de=la(ae)||"root";await O4(`${de}_export.zip`,ae)})},[ae,xe.length,Ve]),me=R.useCallback(async(de,Fe)=>{if(!qe[de]){it(ot=>({...ot,[de]:!0})),v(null);try{await Fe()}catch(ot){console.error(`[FileManager Git Op Error @ ${de}]:`,ot)}finally{it(ot=>({...ot,[de]:!1}))}}},[v,qe]),De=R.useCallback(de=>{me(de,async()=>{await tM(de),Z(Fe=>({...Fe,[de]:!0}))})},[me]),Ke=R.useCallback(de=>{me(de,()=>Dk(de))},[me]),Ct=R.useCallback(de=>{we(de),Pe(""),re(!0)},[]),ye=R.useCallback(de=>{me(de,()=>jk(de))},[me]),q=R.useCallback(de=>{me(de,()=>nM(de))},[me]),B=R.useCallback(()=>{ne(""),se(""),he(!0)},[]),V=R.useCallback(async()=>{if(!ie.trim()){dt.error("Repository URL cannot be empty.");return}X(!0),v(null);try{await Ik(ae,ie.trim(),ee.trim()||void 0),he(!1),await Pt()}catch{}finally{X(!1)}},[ie,ee,ae,v,Pt]),pe=R.useCallback(async()=>{if(!be||!Me.trim()){dt.error("Commit message cannot be empty.");return}Te(!0),v(null);try{await Ok(be,Me.trim()),re(!1)}catch{}finally{Te(!1)}},[be,Me,v]);return y.jsxs("div",{className:"flex h-full flex-col bg-card text-card-foreground rounded-lg border border-border shadow-sm overflow-hidden",children:[y.jsx(Gve,{currentPath:ae,isAnyLoading:Se,isOperationLoading:W,entries:xe,editingPath:C,creatingFolder:O,handleNavigateHome:Et,handleNavigateUp:ht,handleRefresh:Pt,startCreatingFolder:H,handleUploadClick:ve,handleFolderUploadClick:ke,handleArchiveUploadClick:le,handleDownloadAll:et,handleCloneClick:B,fileInputRef:Ie,folderInputRef:Re,archiveInputRef:z,handleFileChange:ct,handleArchiveChange:yt}),a&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-xs text-center flex-shrink-0",children:["Error: ",a]}),y.jsx(Vve,{entries:xe,editingPath:C,newName:S,creatingFolder:O,newFolderName:D,selectedFileIds:x,isOperationLoading:W||Object.values(qe).some(Boolean),handleNavigate:xt,handleCheckboxChange:Tt,startEditing:Ut,cancelEditing:ge,handleRename:I,cancelCreatingFolder:fe,handleCreateFolder:Oe,handleDownload:Be,handleDelete:M,setNewName:E,setNewFolderName:U,renameInputRef:Ce,newFolderInputRef:Ne,gitRepoStatus:F,handleGitInit:De,handleGitPull:Ke,handleGitCommit:Ct,handleGitPush:ye,handleGitStatus:q}),y.jsx(Wve,{isOpen:L,onOpenChange:he,cloneRepoUrl:ie,setCloneRepoUrl:ne,cloneBranch:ee,setCloneBranch:se,isCloning:G,onSubmitClone:V,currentPath:ae}),y.jsx(Kve,{isOpen:Y,onOpenChange:re,commitPath:be,commitMessage:Me,setCommitMessage:Pe,isCommitting:Ae,onSubmitCommit:pe})]})});uB.displayName="FileManager";const Zve="core-vfs-control",Yve=e=>{let t="";const n=new Uint8Array(e),r=n.byteLength;for(let a=0;a<r;a++)t+=String.fromCharCode(n[a]);return btoa(t)},Xve=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:C$.some(r=>n.endsWith(r))},Jve=()=>{const[e,t]=R.useState(!1),[n,r]=R.useState(!1),{nodes:a,selectedFileIds:i,clearSelection:o,uploadFiles:s}=Cl(Mn(S=>({nodes:S.nodes,selectedFileIds:S.selectedFileIds,clearSelection:S.clearSelection,uploadFiles:S.uploadFiles,currentParentId:S.currentParentId}))),{addAttachedFile:u,attachedFilesMetadata:c}=Tb(Mn(S=>({addAttachedFile:S.addAttachedFile,attachedFilesMetadata:S.attachedFilesMetadata}))),f=vt.useMemo(()=>Array.from(i).map(S=>a[S]).filter(S=>!!S&&S.type==="file"),[i,a]),h=R.useCallback(async()=>{if(f.length===0||n)return;r(!0);let S=0,E=0;const C=f.map(async k=>{try{const O=await Ph(k.path),N=k.mimeType||"application/octet-stream",D=Xve(k.name,N),U={source:"vfs",name:k.name,type:N,size:k.size,path:k.path};D?U.contentText=new TextDecoder().decode(O):U.contentBase64=Yve(O),u(U),S++}catch(O){E++,console.error(`Failed to read VFS file ${k.path}:`,O),dt.error(`Failed to attach "${k.name}": ${O instanceof Error?O.message:"Read error"}`)}});await Promise.all(C),S>0&&dt.success(`${S} file(s) attached from VFS.`),E>0&&dt.warning(`${E} file(s) could not be attached.`),o(),r(!1),t(!1)},[f,u,o,n]),p=R.useCallback(S=>{S?t(!0):(i.size>0&&o(),t(!1))},[o,i.size]),g=Cl.getState().currentParentId,v=R.useCallback(()=>{const S=g?Cl.getState().nodes[g]:Cl.getState().nodes[Cl.getState().rootId||""];return(S==null?void 0:S.path)||"/"},[g]),b=R.useCallback(async S=>{S.preventDefault(),S.stopPropagation();const E=S.dataTransfer.files;if(E&&E.length>0)try{await s(g,E),dt.success(`${E.length} file(s) added to VFS at ${v()}. Select them in the manager.`)}catch(C){console.error("Error adding files via drop:",C),dt.error("Failed to add dropped files.")}},[s,g,v]),_=R.useCallback(S=>{S.preventDefault(),S.stopPropagation()},[]),x=c.filter(S=>S.source==="vfs").length;return y.jsxs(Zw,{open:e,onOpenChange:p,children:[y.jsx(kn,{children:y.jsxs(In,{children:[y.jsx(On,{asChild:!0,children:y.jsx("div",{onDrop:b,onDragOver:_,className:"inline-block",children:y.jsx(hpe,{asChild:!0,children:y.jsxs(Lt,{variant:"ghost",size:"icon",className:$t("relative h-10 w-10 rounded-full",x>0&&"text-blue-500 hover:text-blue-600"),"aria-label":`Attach files from VFS (${x} selected)`,children:[y.jsx(DU,{className:"h-5 w-5"}),x>0&&y.jsx("span",{className:"absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-blue-500 text-xs text-white",children:x})]})})})}),y.jsxs(Dn,{children:[y.jsxs("p",{children:["Attach files from VFS (",x," selected)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag & drop enabled"})]})]})}),y.jsxs(Yw,{className:"max-w-[1200px] h-[85vh] sm:max-w-4xl flex flex-col",children:[y.jsxs(Xw,{children:[y.jsx(Qw,{children:"File Manager"}),y.jsx(e1,{children:'Manage files in the virtual filesystem. Select files and click "Attach Selected" to add them to your prompt.'})]}),y.jsx("div",{className:"flex-grow overflow-hidden",children:y.jsx(uB,{})}),y.jsxs(Jw,{children:[y.jsx(mpe,{asChild:!0,children:y.jsx(Lt,{variant:"outline",onClick:()=>p(!1),children:"Cancel"})}),y.jsxs(Lt,{onClick:h,disabled:f.length===0||n,children:[n&&y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Attaching...":`Attach Selected (${f.length})`]})]})]})]})},Qve=()=>{const e=Na(n=>n.registerPromptControl),{enableVfs:t}=Cl(Mn(n=>({enableVfs:n.enableVfs})));return R.useEffect(()=>e({id:Zve,triggerRenderer:()=>y.jsx(Jve,{}),show:()=>t,order:40}),[e,t]),null},ewe=()=>{const{selectedItemId:e,selectedItemType:t,conversations:n,syncRepos:r,conversationSyncStatus:a,linkConversationToRepo:i,syncConversation:o,loadSyncRepos:s}=Gr(Mn(N=>({selectedItemId:N.selectedItemId,selectedItemType:N.selectedItemType,conversations:N.conversations,syncRepos:N.syncRepos,conversationSyncStatus:N.conversationSyncStatus,linkConversationToRepo:N.linkConversationToRepo,syncConversation:N.syncConversation,loadSyncRepos:N.loadSyncRepos}))),{toggleChatControlPanel:u,setInitialSettingsTabs:c}=ci(Mn(N=>({toggleChatControlPanel:N.toggleChatControlPanel,setInitialSettingsTabs:N.setInitialSettingsTabs}))),[f,h]=R.useState(!1),[p,g]=R.useState(null),v=n.find(N=>N.id===e&&t==="conversation"),b=v?a[v.id]??"idle":"idle",_=(v==null?void 0:v.syncRepoId)??null,x=r.find(N=>N.id===_);R.useEffect(()=>{r.length===0&&s()},[r.length,s]),R.useEffect(()=>{f&&v&&g(v.syncRepoId??"none")},[f,v]);const S=R.useCallback(async()=>{if(!v)return;const N=p==="none"?null:p;try{await i(v.id,N),h(!1)}catch(D){console.error("Failed to link conversation:",D)}},[v,p,i]),E=R.useCallback(async()=>{if(!(!v||!_))try{await o(v.id)}catch(N){console.error("Failed to sync conversation:",N)}},[v,_,o]),C=()=>{c("git","sync"),u("settingsModal",!0),h(!1)},k=()=>{if(!v)return y.jsx(Kv,{className:"h-4 w-4 text-muted-foreground/50"});if(!_)return y.jsx(YR,{className:"h-4 w-4 text-muted-foreground"});switch(b){case"syncing":return y.jsx(Zn,{className:"h-4 w-4 animate-spin text-blue-500"});case"error":return y.jsx(js,{className:"h-4 w-4 text-destructive"});case"needs-sync":return y.jsx(js,{className:"h-4 w-4 text-orange-500"});case"idle":default:return y.jsx(iC,{className:"h-4 w-4 text-green-500"})}},O=()=>{if(!v)return"Select a conversation to manage sync";if(!_)return"Link conversation to a Git repository";switch(b){case"syncing":return`Syncing with ${x==null?void 0:x.name}...`;case"error":return`Sync error with ${x==null?void 0:x.name}`;case"needs-sync":return`Needs sync with ${x==null?void 0:x.name}`;case"idle":default:return`Synced with ${x==null?void 0:x.name}`}};return y.jsxs(v1,{open:f,onOpenChange:h,children:[y.jsx(w1,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:!v,"aria-label":"Git Sync Status",title:O(),children:k()})}),y.jsxs(_1,{className:"w-64 p-3 space-y-3",children:[y.jsx(An,{className:"text-xs font-medium",children:"Conversation Sync"}),r.length===0?y.jsxs("div",{className:"text-xs text-muted-foreground text-center space-y-2",children:[y.jsx("p",{children:"No sync repositories configured."}),y.jsxs(Lt,{variant:"outline",size:"sm",className:"w-full",onClick:C,children:[y.jsx(dC,{className:"h-3 w-3 mr-1"})," Configure Repos"]})]}):y.jsxs(y.Fragment,{children:[y.jsxs(Bh,{value:p??"none",onValueChange:g,children:[y.jsx(Uh,{className:"h-8 text-xs",children:y.jsx(zh,{placeholder:"Select Repository..."})}),y.jsxs(qh,{children:[y.jsx(Wi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None (Unlink)"})}),r.map(N=>y.jsx(Wi,{value:N.id,children:N.name},N.id))]})]}),y.jsxs(Lt,{size:"sm",className:"w-full h-8 text-xs",onClick:S,disabled:!p||p===_,children:[p==="none"?y.jsx(YR,{className:"h-3 w-3 mr-1"}):y.jsx(QU,{className:"h-3 w-3 mr-1"}),p==="none"?"Unlink":"Link"," Repository"]})]}),_&&y.jsxs("div",{className:"border-t pt-3 space-y-2",children:[y.jsxs(Lt,{variant:"outline",size:"sm",className:"w-full h-8 text-xs",onClick:E,disabled:b==="syncing",children:[b==="syncing"?y.jsx(Zn,{className:"h-3 w-3 mr-1 animate-spin"}):b==="needs-sync"?y.jsx(zO,{className:"h-3 w-3 mr-1"}):y.jsx(BO,{className:"h-3 w-3 mr-1"}),b==="syncing"?"Syncing...":"Sync Now"]}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:O()})]})]})]})},twe=()=>{const e=Na(n=>n.registerPromptControl),t=Gr(n=>n.syncRepos);R.useEffect(()=>e({id:"core-git-sync",order:50,triggerRenderer:()=>y.jsx(ewe,{}),show:()=>!0}),[e,t])};async function Zh(e){const{fs:t,initializeVFS:n,vfsKey:r}=Cl.getState();if(t)return t;console.log(`[${e}] VFS not ready. Attempting initialization with key: ${r||"default_fallback_key"}...`),dt.info(`Initializing filesystem for ${e}...`);try{await n(r||"default_fallback_key");const{fs:a}=Cl.getState();if(a)return console.log(`[${e}] VFS initialization successful.`),dt.success(`Filesystem ready for ${e}.`),a;throw new Error("VFS initialization failed after attempt.")}catch(a){return console.error(`[${e}] Failed to ensure VFS readiness:`,a),dt.error(`Filesystem unavailable for ${e}: ${a instanceof Error?a.message:String(a)}`),null}}const nwe={description:"Lists files and folders within a specified directory in the Virtual File System (VFS). Use '/' for the root directory.",parameters:$.object({path:$.string().describe("The absolute path of the directory to list (e.g., '/', '/documents', '/project/code').")})},rwe={description:"Reads the content of a specified file from the Virtual File System (VFS). Returns the content as a string.",parameters:$.object({path:$.string().describe("The absolute path of the file to read (e.g., '/documents/notes.txt', '/project/code/main.py').")})},awe={description:"Writes or overwrites a file with the given content in the Virtual File System (VFS). Creates parent directories if they don't exist.",parameters:$.object({path:$.string().describe("The absolute path where the file should be written (e.g., '/documents/new_notes.txt', '/project/data.json')."),content:$.string().describe("The text content to write into the file.")})},iwe={description:"Creates a new directory (and any necessary parent directories) at the specified path in the Virtual File System (VFS).",parameters:$.object({path:$.string().describe("The absolute path of the directory to create (e.g., '/new_folder', '/project/assets/images').")})},owe={description:"Deletes a file or an empty directory from the Virtual File System (VFS). Use with caution.",parameters:$.object({path:$.string().describe("The absolute path of the file or empty directory to delete (e.g., '/documents/old_notes.txt', '/temp_folder').")})},swe={description:"Deletes a directory and ALL its contents (files and subdirectories) recursively from the Virtual File System (VFS). VERY DANGEROUS - USE WITH EXTREME CAUTION.",parameters:$.object({path:$.string().describe("The absolute path of the directory to delete recursively (e.g., '/project_to_delete', '/old_backups'). Cannot be '/'.")})},lwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_list_directory called for path: ${e.path}`),!await Zh("vfs_list_directory"))return{status:"error",error:"Filesystem not available."};console.log("[VFS Tool Execute] VfsOps.VFS instance state:",dE);try{const r=await Rk(e.path);return{status:"success",isEmpty:r.length===0,content:r.map(a=>({name:a.name,type:a.isDirectory?"folder":"file",size:a.size,lastModified:a.lastModified.toISOString()}))}}catch(r){return{status:"error",error:`Failed to list directory: ${r.message}`}}},uwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_read_file called for path: ${e.path}`),!await Zh("vfs_read_file"))return{status:"error",error:"Filesystem not available."};try{const r=await Ph(e.path);return{status:"success",content:new TextDecoder().decode(r)}}catch(r){return{status:"error",error:`Failed to read file: ${r.message}`}}},cwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_write_file called for path: ${e.path}`),!await Zh("vfs_write_file"))return{status:"error",error:"Filesystem not available."};try{return await Iw(e.path,e.content),{status:"success"}}catch(r){return{status:"error",error:`Failed to write file: ${r.message}`}}},dwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_create_directory called for path: ${e.path}`),!await Zh("vfs_create_directory"))return{status:"error",error:"Filesystem not available."};try{return await Q8(e.path),{status:"success"}}catch(r){return{status:"error",error:`Failed to create directory: ${r.message}`}}},fwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_delete called for path: ${e.path}`),!await Zh("vfs_delete"))return{status:"error",error:"Filesystem not available."};if(e.path==="/")return{status:"error",error:"Cannot delete the root directory."};try{return await Nk(e.path,!1),{status:"success"}}catch(r){return{status:"error",error:`Failed to delete item: ${r.message}`}}},hwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_delete_recursive called for path: ${e.path}`),!await Zh("vfs_delete_recursive"))return{status:"error",error:"Filesystem not available."};if(e.path==="/")return{status:"error",error:"Cannot delete the root directory."};try{return await Nk(e.path,!0),{status:"success"}}catch(r){return{status:"error",error:`Failed to delete directory recursively: ${r.message}`}}},pwe=()=>{const{registerTool:e}=Na();R.useEffect(()=>{const t=[],n=(r,a,i)=>{const o=async(s,u)=>i(s,u);t.push(e("core",r,a,o))};return n("vfs_list_directory",nwe,lwe),n("vfs_read_file",rwe,uwe),n("vfs_write_file",awe,cwe),n("vfs_create_directory",iwe,dwe),n("vfs_delete",owe,fwe),n("vfs_delete_recursive",swe,hwe),()=>{console.log("[useVfsToolsRegistration] VFS tools unregistered"),t.forEach(r=>r())}},[e])},Rf="core-git-tools";function mwe(){const{registerTool:e,unregisterTool:t}=Na.getState();R.useEffect(()=>{const n=[],r=()=>{const{gitUserName:f,gitUserEmail:h}=qr.getState();return!f||!h?(dt.error("Git user name and email must be configured in Settings before using Git tools."),!1):!0},a={description:"Clones a remote Git repository into a specified parent directory within the VFS. Creates a new folder named after the repository.",parameters:$.object({parentPath:$.string().describe("The absolute path of the directory *where* the new repository folder should be created (e.g., '/', '/projects')."),repoUrl:$.string().url().describe("The HTTPS URL of the remote Git repository to clone."),branch:$.string().optional().describe("Optional specific branch to clone (defaults to the repository's default branch).")}),execute:async({parentPath:f,repoUrl:h,branch:p})=>{const g=Gn(f);try{await Ik(g,h,p);const v=la(h.replace(/\/$/,"").replace(/\.git$/,""));return{status:"success",path:Gn(`${g}/${v}`)}}catch(v){return{status:"error",message:v.message||"An unknown error occurred during clone."}}}};n.push(e(Rf,"git_clone",a));const i={description:"Pulls the latest changes from the remote repository for a specified local Git repository path within the VFS.",parameters:$.object({path:$.string().describe("The absolute path of the local Git repository directory in the VFS.")}),execute:async({path:f})=>{if(!r())return{status:"error",message:"Git user config missing."};const h=Gn(f);try{return await Dk(h),{status:"success",path:h}}catch(p){return{status:"error",message:p.message||"An unknown error occurred during pull."}}}};n.push(e(Rf,"git_pull",i));const o={description:"Pushes local commits from a specified local Git repository path within the VFS to its configured remote repository.",parameters:$.object({path:$.string().describe("The absolute path of the local Git repository directory in the VFS.")}),execute:async({path:f})=>{const h=Gn(f);try{return await jk(h),{status:"success",path:h}}catch(p){return{status:"error",message:p.message||"An unknown error occurred during push."}}}};n.push(e(Rf,"git_push",o));const s={description:"Stages all changes (new, modified, deleted files) and commits them with a message to the specified local Git repository path within the VFS.",parameters:$.object({path:$.string().describe("The absolute path of the local Git repository directory in the VFS."),message:$.string().describe("The commit message.")}),execute:async({path:f,message:h})=>{if(!r())return{status:"error",message:"Git user config missing."};const p=Gn(f);if(!h.trim())return{status:"error",message:"Commit message cannot be empty."};try{return await Ok(p,h),{status:"success",path:p}}catch(g){return{status:"error",message:g.message||"An unknown error occurred during commit."}}}};n.push(e(Rf,"git_commit",s));const u={description:"Shows the working tree status (changes not staged for commit) for a specified local Git repository path within the VFS.",parameters:$.object({path:$.string().describe("The absolute path of the local Git repository directory in the VFS.")}),execute:async({path:f})=>{const h=Gn(f);try{return await nM(h),{status:"success",path:h}}catch(p){return{status:"error",message:p.message||"An unknown error occurred checking status."}}}};n.push(e(Rf,"git_status",u));const c={description:"Initializes a new, empty Git repository at the specified directory path within the VFS.",parameters:$.object({path:$.string().describe("The absolute path of the directory to initialize as a Git repository.")}),execute:async({path:f})=>{const h=Gn(f);try{return await tM(h),{status:"success",path:h}}catch(p){return{status:"error",message:p.message||"An unknown error occurred during git init."}}}};return n.push(e(Rf,"git_init",c)),()=>{n.forEach(f=>f()),console.log("[useGitToolsRegistration] Git tools unregistered")}},[e,t])}const gwe=({className:e,localMaxSteps:t,setLocalMaxSteps:n})=>{const{selectedItemId:r,selectedItemType:a,getConversationById:i,updateCurrentConversationToolSettings:o}=Gr(Mn(E=>({selectedItemId:E.selectedItemId,selectedItemType:E.selectedItemType,getConversationById:E.getConversationById,updateCurrentConversationToolSettings:E.updateCurrentConversationToolSettings}))),s=Na(E=>E.tools),[u,c]=R.useState(""),[f,h]=R.useState(new Set);R.useEffect(()=>{var E;if(a==="conversation"&&r){const C=i(r),k=new Set(((E=C==null?void 0:C.metadata)==null?void 0:E.enabledTools)??[]);h(k)}else h(new Set)},[r,a,i]);const p=R.useMemo(()=>Object.entries(s).map(([E,{definition:C,modId:k}])=>({name:E,description:C.description??"No description provided.",modId:k})).sort((E,C)=>E.name.localeCompare(C.name)),[s]),g=R.useMemo(()=>{const E=u.trim().toLowerCase();return E?p.filter(C=>C.name.toLowerCase().includes(E)||C.description.toLowerCase().includes(E)||C.modId.toLowerCase().includes(E)):p},[p,u]),v=R.useCallback((E,C)=>{h(O=>{const N=new Set(O);return C?N.add(E):N.delete(E),N});const k=new Set(f);C?k.add(E):k.delete(E),o({enabledTools:Array.from(k)})},[f,o]),b=R.useCallback(E=>{const C=E?new Set(p.map(k=>k.name)):new Set;h(C),o({enabledTools:Array.from(C)})},[p,o]),_=E=>{const C=E.target.value;if(C===""){n(null);return}const k=parseInt(C,10);isNaN(k)?n(null):n(k)},x=t===null?"":String(t),S=a!=="conversation"||!r;return y.jsxs("div",{className:$t("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[y.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),y.jsxs("div",{className:"relative",children:[y.jsx(Yv,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(dr,{type:"search",placeholder:"Filter tools...",value:u,onChange:E=>c(E.target.value),className:"pl-8 h-9",disabled:S})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs(An,{className:"text-xs text-muted-foreground",children:[g.length," tools shown (",f.size," enabled)"]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>b(!0),disabled:S||p.length===0,children:"Enable All"}),y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>b(!1),disabled:S||p.length===0||f.size===0,children:"Disable All"})]})]}),y.jsx(lg,{className:"h-56 border rounded-md p-2 bg-background/50",children:S?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):p.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):g.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):y.jsx("div",{className:"space-y-1",children:g.map(E=>y.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[y.jsx(Ll,{id:`tool-switch-${E.name}`,checked:f.has(E.name),onCheckedChange:C=>v(E.name,C),className:"flex-shrink-0",disabled:S}),y.jsxs(An,{htmlFor:`tool-switch-${E.name}`,className:$t("text-sm font-normal flex-grow pl-2 space-y-0.5",S?"cursor-not-allowed":"cursor-pointer"),title:`${E.name} (from ${E.modId})`,children:[y.jsx("span",{className:"block font-medium",children:E.name}),y.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:E.description})]})]},E.name))})}),y.jsxs("div",{className:"pt-2",children:[y.jsx(An,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),y.jsx(dr,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:x,onChange:_,className:"w-20 h-8 text-xs mt-1",placeholder:String(qr.getState().toolMaxSteps??5),disabled:S}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20)."})]})]})},R2="core-tool-selector";function ywe(){const e=Na(h=>h.registerPromptControl),t=ci(h=>h.isPromptControlPanelOpen[R2]??!1),n=ci(h=>h.togglePromptControlPanel),{selectedItemId:r,selectedItemType:a,getConversationById:i}=Gr(Mn(h=>({selectedItemId:h.selectedItemId,selectedItemType:h.selectedItemType,getConversationById:h.getConversationById}))),o=qr(h=>h.toolMaxSteps),[s,u]=R.useState(null),c=R.useRef(null);R.useEffect(()=>{t?(u(o),c.current=null):(u(null),c.current=null)},[t,o]);const f=R.useCallback(h=>{if(u(h),h===null||isNaN(h))c.current=null;else{const p=Math.max(1,Math.min(20,h));c.current=p}},[]);R.useEffect(()=>e({id:R2,order:30,show:()=>!0,triggerRenderer:()=>{var b,_;const p=a==="conversation"&&r?i(r):null,g=((_=(b=p==null?void 0:p.metadata)==null?void 0:b.enabledTools)==null?void 0:_.length)??0,v=a==="conversation"&&!!r;return y.jsxs(v1,{open:t&&v,onOpenChange:x=>{v&&n(R2,x)},children:[y.jsx(w1,{asChild:!0,children:y.jsxs(Lt,{variant:"outline",size:"sm",className:"h-8 px-2 text-xs",disabled:!v,"aria-label":"Select Tools",children:[y.jsx(Ab,{className:"h-3.5 w-3.5 mr-1"}),"Tools ",g>0?`(${g})`:""]})}),y.jsx(_1,{className:"w-auto p-0",side:"top",align:"start",onOpenAutoFocus:x=>x.preventDefault(),children:y.jsx(gwe,{localMaxSteps:s||5,setLocalMaxSteps:f})})]})},getMetadata:()=>{var _,x;const p=Gr.getState(),g=qr.getState(),v={};if(p.selectedItemType==="conversation"&&p.selectedItemId){const S=p.getConversationById(p.selectedItemId);(x=(_=S==null?void 0:S.metadata)==null?void 0:_.enabledTools)!=null&&x.length&&(v.enabledTools=[...S.metadata.enabledTools])}const b=c.current;return b!==null&&b!==g.toolMaxSteps&&(v.maxSteps=b),v},clearOnSubmit:()=>{c.current=null}}),[e,t,n,r,a,i,s,f,o])}const bwe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},vwe=()=>{const[e,t]=R.useState(!0),{selectedItemId:n,selectedItemType:r,loadSidebarItems:a,addConversation:i,selectItem:o,getProjectById:s,getConversationById:u}=Gr(Mn(L=>({selectedItemId:L.selectedItemId,selectedItemType:L.selectedItemType,loadSidebarItems:L.loadSidebarItems,addConversation:L.addConversation,selectItem:L.selectItem,getProjectById:L.getProjectById,getConversationById:L.getConversationById,isLoading:L.isLoading}))),{interactions:c,status:f}=yr(Mn(L=>({interactions:L.interactions,status:L.status}))),{globalError:h,isSidebarCollapsed:p}=ci(Mn(L=>({globalError:L.globalError,isSidebarCollapsed:L.isSidebarCollapsed}))),g=ci(L=>L.isChatControlPanelOpen.settingsModal??!1),v=Na(L=>L.chatControls),b=R.useMemo(()=>Object.values(v),[v]),{loadDbMods:_,setLoadedMods:x}=h0(Mn(L=>({loadDbMods:L.loadDbMods,setLoadedMods:L.setLoadedMods,isLoading:L.isLoading}))),{loadInitialData:S}=Ai(Mn(L=>({loadInitialData:L.loadInitialData,isLoading:L.isLoading}))),{loadSettings:E,globalSystemPrompt:C}=qr(Mn(L=>({loadSettings:L.loadSettings,globalSystemPrompt:L.globalSystemPrompt})));lhe(),fye(),mye(),ube(),dbe(),pbe(),Qve(),twe(),pwe(),mwe(),ywe(),R.useEffect(()=>{let L=!0;return(async()=>{if(console.log("LiteChat: Starting initialization..."),t(!0),!!L&&(await E(),console.log("LiteChat: Settings loaded."),!!L&&(await S(),console.log("LiteChat: Provider data loaded."),!!L&&(await a(),console.log("LiteChat: Sidebar items loaded."),!!L&&(await _(),console.log("LiteChat: DB Mods loaded."),!!L))))){try{const ie=h0.getState().dbMods;if(console.log(`LiteChat: Loading ${ie.length} mods...`),!L)return;const ne=await Pfe(ie);L&&(x(ne),console.log(`LiteChat: ${ne.length} mods processed.`))}catch(ie){console.error("LiteChat: Failed to load mods:",ie)}L&&(console.log("LiteChat: Initialization complete."),t(!1))}})(),()=>{L=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[E,S,a,_,x]);const k=R.useCallback(L=>L.flatMap(he=>{var ne,ee,se,G,X,Y;const ie=[];if((ne=he.prompt)!=null&&ne.content&&typeof he.prompt.content=="string"?ie.push({role:"user",content:he.prompt.content}):(se=(ee=he.prompt)==null?void 0:ee.metadata)!=null&&se.attachedFiles&&he.prompt.metadata.attachedFiles.length>0&&((G=he.prompt)!=null&&G.content),he.response&&typeof he.response=="string"&&ie.push({role:"assistant",content:he.response}),(X=he.metadata)!=null&&X.toolCalls&&Array.isArray(he.metadata.toolCalls)){const re=[];he.metadata.toolCalls.forEach(be=>{try{const we=JSON.parse(be);we&&we.type==="tool-call"&&we.toolCallId&&we.toolName&&we.args!==void 0?re.push(we):console.warn("[LiteChat] buildHistory: Invalid tool call structure after parsing:",be)}catch(we){console.error("[LiteChat] buildHistory: Failed to parse tool call string:",be,we)}}),re.length>0&&ie.push({role:"assistant",content:re})}if((Y=he.metadata)!=null&&Y.toolResults&&Array.isArray(he.metadata.toolResults)){const re=[];he.metadata.toolResults.forEach(be=>{try{const we=JSON.parse(be);we&&we.type==="tool-result"&&we.toolCallId&&we.toolName&&we.result!==void 0?re.push(we):console.warn("[LiteChat] buildHistory: Invalid tool result structure after parsing:",be)}catch(we){console.error("[LiteChat] buildHistory: Failed to parse tool result string:",be,we)}}),re.length>0&&ie.push({role:"tool",content:re})}return ie}),[]),O=R.useCallback(async L=>{var we,Me,Pe;let he=Gr.getState().selectedItemType==="conversation"?Gr.getState().selectedItemId:null,ie=Gr.getState().selectedItemType==="project"?Gr.getState().selectedItemId:Gr.getState().selectedItemType==="conversation"?((we=Gr.getState().getConversationById(Gr.getState().selectedItemId))==null?void 0:we.projectId)??null:null;const ne=ci.getState().setFocusInputFlag;if(!Ai.getState().selectedModelId){dt.error("Please select a model before sending a message.");return}if(!he){console.log("LiteChat: No conversation selected, creating new one...");try{ie=Gr.getState().selectedItemType==="project"?Gr.getState().selectedItemId:null;const Ae=await i({title:"New Chat",projectId:ie});await o(Ae,"conversation"),he=Gr.getState().selectedItemId,he!==Ae&&(console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),he=Ae),console.log(`LiteChat: New conversation created (${he}), selected, and InteractionStore synced.`),setTimeout(()=>ne(!0),0)}catch(Ae){console.error("LiteChat: Failed to create new conversation",Ae),dt.error("Failed to start new chat.");return}}const G=yr.getState().interactions.filter(Ae=>Ae.status==="COMPLETED"&&Ae.type==="message.user_assistant"),X=k(G);if(L.content)X.push({role:"user",content:L.content});else if((Pe=(Me=L.metadata)==null?void 0:Me.attachedFiles)!=null&&Pe.length)X.push({role:"user",content:""});else{console.error("LiteChat: Attempting to submit with no content."),dt.error("Cannot send an empty message.");return}const Y=s(ie),be={system:(Y==null?void 0:Y.systemPrompt)??C??void 0,messages:X,parameters:L.parameters,metadata:L.metadata};Ei.emit("prompt:finalised",{prompt:be}),console.log("LiteChat: Submitting prompt to AIService:",be);try{await yb.startInteraction(be,L),console.log("LiteChat: AIService interaction started.")}catch(Ae){console.error("LiteChat: Error starting AI interaction:",Ae),dt.error(`Failed to start AI interaction: ${Ae instanceof Error?Ae.message:String(Ae)}`)}},[i,o,C,k,s,u]),N=R.useCallback(async L=>{var Te,qe,it,Ie,Re;console.log(`LiteChat: Regenerating interaction ${L}`);const he=yr.getState(),ie=he.interactions.find(z=>z.id===L);if(!ie||!ie.prompt){console.error(`LiteChat: Cannot regenerate - interaction ${L} or its prompt not found.`),dt.error("Cannot regenerate: Original interaction data missing.");return}if(ie.type!=="message.user_assistant"){console.error(`LiteChat: Cannot regenerate non-user_assistant interaction: ${L}`),dt.error("Can only regenerate from a user message interaction.");return}const ne=u(ie.conversationId),ee=(ne==null?void 0:ne.projectId)??null,se=s(ee),G=Ai.getState().selectedModelId;if(!G){dt.error("Please select a model before regenerating.");return}const{providerId:X,modelId:Y}=bwe(G);if(!X||!Y){dt.error("Invalid model selection for regeneration.");return}const re=ie.index,be=he.interactions.filter(z=>z.conversationId===ie.conversationId&&z.index<re&&z.status==="COMPLETED"&&z.type==="message.user_assistant").sort((z,Ce)=>z.index-Ce.index),we=k(be);if((Te=ie.prompt)!=null&&Te.content&&typeof ie.prompt.content=="string")we.push({role:"user",content:ie.prompt.content});else if((Ie=(it=(qe=ie.prompt)==null?void 0:qe.metadata)==null?void 0:it.attachedFiles)!=null&&Ie.length)we.push({role:"user",content:""});else{console.error(`LiteChat: Cannot regenerate - missing or invalid user prompt content in interaction ${L}.`),dt.error("Cannot regenerate: Original user prompt missing.");return}const Me=(se==null?void 0:se.systemPrompt)??qr.getState().globalSystemPrompt??void 0,Pe={...ie.prompt.metadata,regeneratedFromId:L,providerId:X,modelId:Y,attachedFiles:void 0,enabledTools:(Re=ie.prompt.metadata)==null?void 0:Re.enabledTools},Ae={system:Me,messages:we,parameters:ie.prompt.parameters,metadata:Pe};Ei.emit("prompt:finalised",{prompt:Ae}),console.log(`LiteChat: Submitting regeneration request for ${L}:`,Ae);try{await yb.startInteraction(Ae,ie.prompt),console.log(`LiteChat: AIService regeneration interaction started for ${L}.`)}catch(z){console.error(`LiteChat: Error starting regeneration for ${L}:`,z),dt.error("Failed to start regeneration.")}},[k,s,u]),D=R.useCallback(L=>{console.log(`LiteChat: Stopping interaction ${L}`),yb.stopInteraction(L)},[]),U=R.useMemo(()=>b.filter(L=>(L.panel??"main")==="sidebar"&&(L.show?L.show():!0)).sort((L,he)=>(L.order??1/0)-(he.order??1/0)),[b]),W=R.useMemo(()=>b.filter(L=>L.panel==="sidebar-footer"&&(L.show?L.show():!0)).sort((L,he)=>(L.order??1/0)-(he.order??1/0)),[b]),Q=R.useMemo(()=>b.filter(L=>L.panel==="header"&&(L.show?L.show():!0)).sort((L,he)=>(L.order??1/0)-(he.order??1/0)),[b]),F=R.useMemo(()=>{var L;return(L=b.find(he=>he.id==="core-settings-trigger"))==null?void 0:L.settingsRenderer},[b]),Z=r==="conversation"?n:null;return e?y.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx(Zn,{className:"h-12 w-12 animate-spin text-primary"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:$t("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:$t("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",p?"w-16":"w-64"),children:[y.jsxs("div",{className:$t("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:$t(p?"hidden":"block"),children:y.jsx(Yy,{controls:U,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:$t(p?"block":"hidden"),children:y.jsx(Yy,{controls:U,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:$t("flex-shrink-0 border-t border-[--border] p-2",p?"flex flex-col items-center gap-2":"flex items-center justify-between"),children:y.jsx(Yy,{controls:W,panelId:"sidebar-footer",renderMode:p?"icon":"full",className:$t("flex",p?"flex-col gap-2":"items-center gap-1")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(Yy,{controls:Q,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(Nne,{conversationId:Z,interactions:c,onRegenerateInteraction:N,onStopInteraction:D,status:f,className:"flex-grow overflow-y-hidden p-4 space-y-4"}),h&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",h]}),y.jsx(gH,{InputAreaRenderer:jF,onSubmit:O,className:"border-t border-[--border] bg-card flex-shrink-0"})]})]}),g&&F&&F(),y.jsx(zfe,{richColors:!0,position:"top-right"})]})};function wwe(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(vwe,{})})})}zz();function _we({children:e}){const t=qr(n=>n.theme);return R.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}z7.createRoot(document.getElementById("root")).render(y.jsx(vt.StrictMode,{children:y.jsx(_we,{children:y.jsx(wwe,{})})}));
