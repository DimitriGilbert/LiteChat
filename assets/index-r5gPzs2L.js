var P7=Object.defineProperty;var F7=(e,t,n)=>t in e?P7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Va=(e,t,n)=>F7(e,typeof t!="symbol"?t+"":t,n);function L7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ni(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xx={exports:{}},rm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AR;function $7(){if(AR)return rm;AR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return rm.Fragment=t,rm.jsx=n,rm.jsxs=n,rm}var TR;function B7(){return TR||(TR=1,xx.exports=$7()),xx.exports}var y=B7(),Sx={exports:{}};function z7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vO={exports:{}},ra=vO.exports={},Es,Cs;function H2(){throw new Error("setTimeout has not been defined")}function V2(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Es=setTimeout:Es=H2}catch{Es=H2}try{typeof clearTimeout=="function"?Cs=clearTimeout:Cs=V2}catch{Cs=V2}})();function wO(e){if(Es===setTimeout)return setTimeout(e,0);if((Es===H2||!Es)&&setTimeout)return Es=setTimeout,setTimeout(e,0);try{return Es(e,0)}catch{try{return Es.call(null,e,0)}catch{return Es.call(this,e,0)}}}function U7(e){if(Cs===clearTimeout)return clearTimeout(e);if((Cs===V2||!Cs)&&clearTimeout)return Cs=clearTimeout,clearTimeout(e);try{return Cs(e)}catch{try{return Cs.call(null,e)}catch{return Cs.call(this,e)}}}var kl=[],Bf=!1,td,vb=-1;function q7(){!Bf||!td||(Bf=!1,td.length?kl=td.concat(kl):vb=-1,kl.length&&_O())}function _O(){if(!Bf){var e=wO(q7);Bf=!0;for(var t=kl.length;t;){for(td=kl,kl=[];++vb<t;)td&&td[vb].run();vb=-1,t=kl.length}td=null,Bf=!1,U7(e)}}ra.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];kl.push(new xO(e,t)),kl.length===1&&!Bf&&wO(_O)};function xO(e,t){this.fun=e,this.array=t}xO.prototype.run=function(){this.fun.apply(null,this.array)};ra.title="browser";ra.browser=!0;ra.env={};ra.argv=[];ra.version="";ra.versions={};function Bl(){}ra.on=Bl;ra.addListener=Bl;ra.once=Bl;ra.off=Bl;ra.removeListener=Bl;ra.removeAllListeners=Bl;ra.emit=Bl;ra.prependListener=Bl;ra.prependOnceListener=Bl;ra.listeners=function(e){return[]};ra.binding=function(e){throw new Error("process.binding is not supported")};ra.cwd=function(){return"/"};ra.chdir=function(e){throw new Error("process.chdir is not supported")};ra.umask=function(){return 0};var H7=vO.exports;const Zr=z7(H7);var jn={},RR;function V7(){if(RR)return jn;RR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(W){return W===null||typeof W!="object"?null:(W=h&&W[h]||W["@@iterator"],typeof W=="function"?W:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function _(W,J,Y){this.props=W,this.context=J,this.refs=b,this.updater=Y||g}_.prototype.isReactComponent={},_.prototype.setState=function(W,J){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,J,"setState")},_.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function x(){}x.prototype=_.prototype;function S(W,J,Y){this.props=W,this.context=J,this.refs=b,this.updater=Y||g}var E=S.prototype=new x;E.constructor=S,v(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function O(W,J,Y,re,be,we){return Y=we.ref,{$$typeof:e,type:W,key:J,ref:Y!==void 0?Y:null,props:we}}function N(W,J){return O(W.type,J,void 0,void 0,void 0,W.props)}function z(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function H(W){var J={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Y){return J[Y]})}var X=/\/+/g;function F(W,J){return typeof W=="object"&&W!==null&&W.key!=null?H(""+W.key):J.toString(36)}function Z(){}function L(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(Z,Z):(W.status="pending",W.then(function(J){W.status==="pending"&&(W.status="fulfilled",W.value=J)},function(J){W.status==="pending"&&(W.status="rejected",W.reason=J)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function de(W,J,Y,re,be){var we=typeof W;(we==="undefined"||we==="boolean")&&(W=null);var Me=!1;if(W===null)Me=!0;else switch(we){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(W.$$typeof){case e:case t:Me=!0;break;case f:return Me=W._init,de(Me(W._payload),J,Y,re,be)}}if(Me)return be=be(W),Me=re===""?"."+F(W,0):re,C(be)?(Y="",Me!=null&&(Y=Me.replace(X,"$&/")+"/"),de(be,J,Y,"",function(Te){return Te})):be!=null&&(z(be)&&(be=N(be,Y+(be.key==null||W&&W.key===be.key?"":(""+be.key).replace(X,"$&/")+"/")+Me)),J.push(be)),1;Me=0;var Pe=re===""?".":re+":";if(C(W))for(var Ae=0;Ae<W.length;Ae++)re=W[Ae],we=Pe+F(re,Ae),Me+=de(re,J,Y,we,be);else if(Ae=p(W),typeof Ae=="function")for(W=Ae.call(W),Ae=0;!(re=W.next()).done;)re=re.value,we=Pe+F(re,Ae++),Me+=de(re,J,Y,we,be);else if(we==="object"){if(typeof W.then=="function")return de(L(W),J,Y,re,be);throw J=String(W),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ae(W,J,Y){if(W==null)return W;var re=[],be=0;return de(W,re,"","",function(we){return J.call(Y,we,be++)}),re}function ne(W){if(W._status===-1){var J=W._result;J=J(),J.then(function(Y){(W._status===0||W._status===-1)&&(W._status=1,W._result=Y)},function(Y){(W._status===0||W._status===-1)&&(W._status=2,W._result=Y)}),W._status===-1&&(W._status=0,W._result=J)}if(W._status===1)return W._result.default;throw W._result}var ee=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(J))return}else if(typeof Zr=="object"&&typeof Zr.emit=="function"){Zr.emit("uncaughtException",W);return}console.error(W)};function se(){}return jn.Children={map:ae,forEach:function(W,J,Y){ae(W,function(){J.apply(this,arguments)},Y)},count:function(W){var J=0;return ae(W,function(){J++}),J},toArray:function(W){return ae(W,function(J){return J})||[]},only:function(W){if(!z(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},jn.Component=_,jn.Fragment=n,jn.Profiler=a,jn.PureComponent=S,jn.StrictMode=r,jn.Suspense=u,jn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,jn.__COMPILER_RUNTIME={__proto__:null,c:function(W){return k.H.useMemoCache(W)}},jn.cache=function(W){return function(){return W.apply(null,arguments)}},jn.cloneElement=function(W,J,Y){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var re=v({},W.props),be=W.key,we=void 0;if(J!=null)for(Me in J.ref!==void 0&&(we=void 0),J.key!==void 0&&(be=""+J.key),J)!D.call(J,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&J.ref===void 0||(re[Me]=J[Me]);var Me=arguments.length-2;if(Me===1)re.children=Y;else if(1<Me){for(var Pe=Array(Me),Ae=0;Ae<Me;Ae++)Pe[Ae]=arguments[Ae+2];re.children=Pe}return O(W.type,be,void 0,void 0,we,re)},jn.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:i,_context:W},W},jn.createElement=function(W,J,Y){var re,be={},we=null;if(J!=null)for(re in J.key!==void 0&&(we=""+J.key),J)D.call(J,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(be[re]=J[re]);var Me=arguments.length-2;if(Me===1)be.children=Y;else if(1<Me){for(var Pe=Array(Me),Ae=0;Ae<Me;Ae++)Pe[Ae]=arguments[Ae+2];be.children=Pe}if(W&&W.defaultProps)for(re in Me=W.defaultProps,Me)be[re]===void 0&&(be[re]=Me[re]);return O(W,we,void 0,void 0,null,be)},jn.createRef=function(){return{current:null}},jn.forwardRef=function(W){return{$$typeof:s,render:W}},jn.isValidElement=z,jn.lazy=function(W){return{$$typeof:f,_payload:{_status:-1,_result:W},_init:ne}},jn.memo=function(W,J){return{$$typeof:c,type:W,compare:J===void 0?null:J}},jn.startTransition=function(W){var J=k.T,Y={};k.T=Y;try{var re=W(),be=k.S;be!==null&&be(Y,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(se,ee)}catch(we){ee(we)}finally{k.T=J}},jn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},jn.use=function(W){return k.H.use(W)},jn.useActionState=function(W,J,Y){return k.H.useActionState(W,J,Y)},jn.useCallback=function(W,J){return k.H.useCallback(W,J)},jn.useContext=function(W){return k.H.useContext(W)},jn.useDebugValue=function(){},jn.useDeferredValue=function(W,J){return k.H.useDeferredValue(W,J)},jn.useEffect=function(W,J,Y){var re=k.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(W,J)},jn.useId=function(){return k.H.useId()},jn.useImperativeHandle=function(W,J,Y){return k.H.useImperativeHandle(W,J,Y)},jn.useInsertionEffect=function(W,J){return k.H.useInsertionEffect(W,J)},jn.useLayoutEffect=function(W,J){return k.H.useLayoutEffect(W,J)},jn.useMemo=function(W,J){return k.H.useMemo(W,J)},jn.useOptimistic=function(W,J){return k.H.useOptimistic(W,J)},jn.useReducer=function(W,J,Y){return k.H.useReducer(W,J,Y)},jn.useRef=function(W){return k.H.useRef(W)},jn.useState=function(W){return k.H.useState(W)},jn.useSyncExternalStore=function(W,J,Y){return k.H.useSyncExternalStore(W,J,Y)},jn.useTransition=function(){return k.H.useTransition()},jn.version="19.1.0",jn}var NR;function fC(){return NR||(NR=1,Sx.exports=V7()),Sx.exports}var R=fC();const vt=ni(R),SO=L7({__proto__:null,default:vt},[R]);var Ex={exports:{}},am={},Cx={exports:{}},kx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IR;function G7(){return IR||(IR=1,function(e){function t(ae,ne){var ee=ae.length;ae.push(ne);e:for(;0<ee;){var se=ee-1>>>1,W=ae[se];if(0<a(W,ne))ae[se]=ne,ae[ee]=W,ee=se;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var ne=ae[0],ee=ae.pop();if(ee!==ne){ae[0]=ee;e:for(var se=0,W=ae.length,J=W>>>1;se<J;){var Y=2*(se+1)-1,re=ae[Y],be=Y+1,we=ae[be];if(0>a(re,ee))be<W&&0>a(we,re)?(ae[se]=we,ae[be]=ee,se=be):(ae[se]=re,ae[Y]=ee,se=Y);else if(be<W&&0>a(we,ee))ae[se]=we,ae[be]=ee,se=be;else break e}}return ne}function a(ae,ne){var ee=ae.sortIndex-ne.sortIndex;return ee!==0?ee:ae.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var u=[],c=[],f=1,h=null,p=3,g=!1,v=!1,b=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ae){for(var ne=n(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=ae)r(c),ne.sortIndex=ne.expirationTime,t(u,ne);else break;ne=n(c)}}function k(ae){if(b=!1,C(ae),!v)if(n(u)!==null)v=!0,D||(D=!0,F());else{var ne=n(c);ne!==null&&de(k,ne.startTime-ae)}}var D=!1,O=-1,N=5,z=-1;function H(){return _?!0:!(e.unstable_now()-z<N)}function X(){if(_=!1,D){var ae=e.unstable_now();z=ae;var ne=!0;try{e:{v=!1,b&&(b=!1,S(O),O=-1),g=!0;var ee=p;try{t:{for(C(ae),h=n(u);h!==null&&!(h.expirationTime>ae&&H());){var se=h.callback;if(typeof se=="function"){h.callback=null,p=h.priorityLevel;var W=se(h.expirationTime<=ae);if(ae=e.unstable_now(),typeof W=="function"){h.callback=W,C(ae),ne=!0;break t}h===n(u)&&r(u),C(ae)}else r(u);h=n(u)}if(h!==null)ne=!0;else{var J=n(c);J!==null&&de(k,J.startTime-ae),ne=!1}}break e}finally{h=null,p=ee,g=!1}ne=void 0}}finally{ne?F():D=!1}}}var F;if(typeof E=="function")F=function(){E(X)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,L=Z.port2;Z.port1.onmessage=X,F=function(){L.postMessage(null)}}else F=function(){x(X,0)};function de(ae,ne){O=x(function(){ae(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(ae){switch(p){case 1:case 2:case 3:var ne=3;break;default:ne=p}var ee=p;p=ne;try{return ae()}finally{p=ee}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(ae,ne){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ee=p;p=ae;try{return ne()}finally{p=ee}},e.unstable_scheduleCallback=function(ae,ne,ee){var se=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?se+ee:se):ee=se,ae){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ee+W,ae={id:f++,callback:ne,priorityLevel:ae,startTime:ee,expirationTime:W,sortIndex:-1},ee>se?(ae.sortIndex=ee,t(c,ae),n(u)===null&&ae===n(c)&&(b?(S(O),O=-1):b=!0,de(k,ee-se))):(ae.sortIndex=W,t(u,ae),v||g||(v=!0,D||(D=!0,F()))),ae},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(ae){var ne=p;return function(){var ee=p;p=ne;try{return ae.apply(this,arguments)}finally{p=ee}}}}(kx)),kx}var OR;function W7(){return OR||(OR=1,Cx.exports=G7()),Cx.exports}var Ax={exports:{}},Ga={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DR;function K7(){if(DR)return Ga;DR=1;var e=fC();function t(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:u,containerInfo:c,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Ga.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ga.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(u,c,null,f)},Ga.flushSync=function(u){var c=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=c,r.p=f,r.d.f()}},Ga.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},Ga.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Ga.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):f==="script"&&r.d.X(u,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Ga.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=s(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},Ga.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Ga.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=s(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},Ga.requestFormReset=function(u){r.d.r(u)},Ga.unstable_batchedUpdates=function(u,c){return u(c)},Ga.useFormState=function(u,c,f){return o.H.useFormState(u,c,f)},Ga.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ga.version="19.1.0",Ga}var jR;function EO(){if(jR)return Ax.exports;jR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ax.exports=K7(),Ax.exports}var MR;function Z7(){if(MR)return am;MR=1;var e=W7(),t=fC(),n=EO();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,m=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(m=d.return),l=d.return;while(l)}return d.tag===3?m:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function s(l){if(i(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var m=l,w=d;;){var T=m.return;if(T===null)break;var P=T.alternate;if(P===null){if(w=T.return,w!==null){m=w;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===m)return s(T),l;if(P===w)return s(T),d;P=P.sibling}throw Error(r(188))}if(m.return!==w.return)m=T,w=P;else{for(var oe=!1,Ee=T.child;Ee;){if(Ee===m){oe=!0,m=T,w=P;break}if(Ee===w){oe=!0,w=T,m=P;break}Ee=Ee.sibling}if(!oe){for(Ee=P.child;Ee;){if(Ee===m){oe=!0,m=P,w=T;break}if(Ee===w){oe=!0,w=P,m=T;break}Ee=Ee.sibling}if(!oe)throw Error(r(189))}}if(m.alternate!==w)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function F(l){return l===null||typeof l!="object"?null:(l=X&&l[X]||l["@@iterator"],typeof l=="function"?l:null)}var Z=Symbol.for("react.client.reference");function L(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case _:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case D:return"SuspenseList";case z:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case E:return(l.displayName||"Context")+".Provider";case S:return(l._context.displayName||"Context")+".Consumer";case C:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return d=l.displayName||null,d!==null?d:L(l.type)||"Memo";case N:d=l._payload,l=l._init;try{return L(l(d))}catch{}}return null}var de=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},se=[],W=-1;function J(l){return{current:l}}function Y(l){0>W||(l.current=se[W],se[W]=null,W--)}function re(l,d){W++,se[W]=l.current,l.current=d}var be=J(null),we=J(null),Me=J(null),Pe=J(null);function Ae(l,d){switch(re(Me,d),re(we,l),re(be,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?tR(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=tR(d),l=nR(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Y(be),re(be,l)}function Te(){Y(be),Y(we),Y(Me)}function qe(l){l.memoizedState!==null&&re(Pe,l);var d=be.current,m=nR(d,l.type);d!==m&&(re(we,l),re(be,m))}function it(l){we.current===l&&(Y(be),Y(we)),Pe.current===l&&(Y(Pe),Jp._currentValue=ee)}var Ie=Object.prototype.hasOwnProperty,Re=e.unstable_scheduleCallback,U=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,Ne=e.unstable_requestPaint,ce=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,Q=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Le=e.unstable_NormalPriority,Se=e.unstable_LowPriority,Ve=e.unstable_IdlePriority,xt=e.log,ht=e.unstable_setDisableYieldValue,Et=null,Ft=null;function Tt(l){if(typeof xt=="function"&&ht(l),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Et,l)}catch{}}var Ut=Math.clz32?Math.clz32:V,ge=Math.log,I=Math.LN2;function V(l){return l>>>=0,l===0?32:31-(ge(l)/I|0)|0}var he=256,Oe=4194304;function ve(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ke(l,d,m){var w=l.pendingLanes;if(w===0)return 0;var T=0,P=l.suspendedLanes,oe=l.pingedLanes;l=l.warmLanes;var Ee=w&134217727;return Ee!==0?(w=Ee&~P,w!==0?T=ve(w):(oe&=Ee,oe!==0?T=ve(oe):m||(m=Ee&~l,m!==0&&(T=ve(m))))):(Ee=w&~P,Ee!==0?T=ve(Ee):oe!==0?T=ve(oe):m||(m=w&~l,m!==0&&(T=ve(m)))),T===0?0:d!==0&&d!==T&&(d&P)===0&&(P=T&-T,m=d&-d,P>=m||P===32&&(m&4194048)!==0)?d:T}function le(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function dt(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var l=he;return he<<=1,(he&4194048)===0&&(he=256),l}function M(){var l=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),l}function Be(l){for(var d=[],m=0;31>m;m++)d.push(l);return d}function et(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function me(l,d,m,w,T,P){var oe=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var Ee=l.entanglements,ze=l.expirationTimes,ct=l.hiddenUpdates;for(m=oe&~m;0<m;){var _t=31-Ut(m),kt=1<<_t;Ee[_t]=0,ze[_t]=-1;var pt=ct[_t];if(pt!==null)for(ct[_t]=null,_t=0;_t<pt.length;_t++){var mt=pt[_t];mt!==null&&(mt.lane&=-536870913)}m&=~kt}w!==0&&De(l,w,0),P!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=P&~(oe&~d))}function De(l,d,m){l.pendingLanes|=d,l.suspendedLanes&=~d;var w=31-Ut(d);l.entangledLanes|=d,l.entanglements[w]=l.entanglements[w]|1073741824|m&4194090}function Ke(l,d){var m=l.entangledLanes|=d;for(l=l.entanglements;m;){var w=31-Ut(m),T=1<<w;T&d|l[w]&d&&(l[w]|=d),m&=~T}}function Ct(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ye(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function q(){var l=ne.p;return l!==0?l:(l=window.event,l===void 0?32:_R(l.type))}function B(l,d){var m=ne.p;try{return ne.p=l,d()}finally{ne.p=m}}var G=Math.random().toString(36).slice(2),pe="__reactFiber$"+G,fe="__reactProps$"+G,Fe="__reactContainer$"+G,st="__reactEvents$"+G,Dt="__reactListeners$"+G,un="__reactHandles$"+G,zt="__reactResources$"+G,Gt="__reactMarker$"+G;function Xt(l){delete l[pe],delete l[fe],delete l[st],delete l[Dt],delete l[un]}function Dn(l){var d=l[pe];if(d)return d;for(var m=l.parentNode;m;){if(d=m[Fe]||m[pe]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(l=oR(l);l!==null;){if(m=l[pe])return m;l=oR(l)}return d}l=m,m=l.parentNode}return null}function zn(l){if(l=l[pe]||l[Fe]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function fr(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function hr(l){var d=l[zt];return d||(d=l[zt]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Mn(l){l[Gt]=!0}var ai=new Set,is={};function os(l,d){ss(l,d),ss(l+"Capture",d)}function ss(l,d){for(is[l]=d,l=0;l<d.length;l++)ai.add(d[l])}var Ur=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ls={},Qi={};function Tg(l){return Ie.call(Qi,l)?!0:Ie.call(ls,l)?!1:Ur.test(l)?Qi[l]=!0:(ls[l]=!0,!1)}function To(l,d,m){if(Tg(d))if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var w=d.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+m)}}function Gs(l,d,m){if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+m)}}function Di(l,d,m,w){if(w===null)l.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(d,m,""+w)}}var _c,us;function Ws(l){if(_c===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);_c=d&&d[1]||"",us=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_c+l+us}var Wl=!1;function Dd(l,d){if(!l||Wl)return"";Wl=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(d){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(mt){var pt=mt}Reflect.construct(l,[],kt)}else{try{kt.call()}catch(mt){pt=mt}l.call(kt.prototype)}}else{try{throw Error()}catch(mt){pt=mt}(kt=l())&&typeof kt.catch=="function"&&kt.catch(function(){})}}catch(mt){if(mt&&pt&&typeof mt.stack=="string")return[mt.stack,pt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=w.DetermineComponentFrameRoot(),oe=P[0],Ee=P[1];if(oe&&Ee){var ze=oe.split(`
`),ct=Ee.split(`
`);for(T=w=0;w<ze.length&&!ze[w].includes("DetermineComponentFrameRoot");)w++;for(;T<ct.length&&!ct[T].includes("DetermineComponentFrameRoot");)T++;if(w===ze.length||T===ct.length)for(w=ze.length-1,T=ct.length-1;1<=w&&0<=T&&ze[w]!==ct[T];)T--;for(;1<=w&&0<=T;w--,T--)if(ze[w]!==ct[T]){if(w!==1||T!==1)do if(w--,T--,0>T||ze[w]!==ct[T]){var _t=`
`+ze[w].replace(" at new "," at ");return l.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",l.displayName)),_t}while(1<=w&&0<=T);break}}}finally{Wl=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?Ws(m):""}function Un(l){switch(l.tag){case 26:case 27:case 5:return Ws(l.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 15:return Dd(l.type,!1);case 11:return Dd(l.type.render,!1);case 1:return Dd(l.type,!0);case 31:return Ws("Activity");default:return""}}function ep(l){try{var d="";do d+=Un(l),l=l.return;while(l);return d}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function ii(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function tp(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function wr(l){var d=tp(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),w=""+l[d];if(!l.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var T=m.get,P=m.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(oe){w=""+oe,P.call(this,oe)}}),Object.defineProperty(l,d,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(oe){w=""+oe},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function cs(l){l._valueTracker||(l._valueTracker=wr(l))}function Kl(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var m=d.getValue(),w="";return l&&(w=tp(l)?l.checked?"true":"false":l.value),l=w,l!==m?(d.setValue(l),!0):!1}function Ro(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var np=/[\n"\\]/g;function za(l){return l.replace(np,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Zl(l,d,m,w,T,P,oe,Ee){l.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?l.type=oe:l.removeAttribute("type"),d!=null?oe==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ii(d)):l.value!==""+ii(d)&&(l.value=""+ii(d)):oe!=="submit"&&oe!=="reset"||l.removeAttribute("value"),d!=null?Yl(l,oe,ii(d)):m!=null?Yl(l,oe,ii(m)):w!=null&&l.removeAttribute("value"),T==null&&P!=null&&(l.defaultChecked=!!P),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&typeof Ee!="boolean"?l.name=""+ii(Ee):l.removeAttribute("name")}function rp(l,d,m,w,T,P,oe,Ee){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.type=P),d!=null||m!=null){if(!(P!=="submit"&&P!=="reset"||d!=null))return;m=m!=null?""+ii(m):"",d=d!=null?""+ii(d):m,Ee||d===l.value||(l.value=d),l.defaultValue=d}w=w??T,w=typeof w!="function"&&typeof w!="symbol"&&!!w,l.checked=Ee?l.checked:!!w,l.defaultChecked=!!w,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(l.name=oe)}function Yl(l,d,m){d==="number"&&Ro(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function Ks(l,d,m,w){if(l=l.options,d){d={};for(var T=0;T<m.length;T++)d["$"+m[T]]=!0;for(m=0;m<l.length;m++)T=d.hasOwnProperty("$"+l[m].value),l[m].selected!==T&&(l[m].selected=T),T&&w&&(l[m].defaultSelected=!0)}else{for(m=""+ii(m),d=null,T=0;T<l.length;T++){if(l[T].value===m){l[T].selected=!0,w&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function Xl(l,d,m){if(d!=null&&(d=""+ii(d),d!==l.value&&(l.value=d),m==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=m!=null?""+ii(m):""}function ap(l,d,m,w){if(d==null){if(w!=null){if(m!=null)throw Error(r(92));if(de(w)){if(1<w.length)throw Error(r(93));w=w[0]}m=w}m==null&&(m=""),d=m}m=ii(d),l.defaultValue=m,w=l.textContent,w===m&&w!==""&&w!==null&&(l.value=w)}function Jl(l,d){if(d){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=d;return}}l.textContent=d}var Wn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jd(l,d,m){var w=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?w?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":w?l.setProperty(d,m):typeof m!="number"||m===0||Wn.has(d)?d==="float"?l.cssFloat=m:l[d]=(""+m).trim():l[d]=m+"px"}function Rg(l,d,m){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,m!=null){for(var w in m)!m.hasOwnProperty(w)||d!=null&&d.hasOwnProperty(w)||(w.indexOf("--")===0?l.setProperty(w,""):w==="float"?l.cssFloat="":l[w]="");for(var T in d)w=d[T],d.hasOwnProperty(T)&&m[T]!==w&&jd(l,T,w)}else for(var P in d)d.hasOwnProperty(P)&&jd(l,P,d[P])}function ip(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ql=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(l){return Ql.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var eo=null;function Md(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ys=null,Ir=null;function ji(l){var d=zn(l);if(d&&(l=d.stateNode)){var m=l[fe]||null;e:switch(l=d.stateNode,d.type){case"input":if(Zl(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+za(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var w=m[d];if(w!==l&&w.form===l.form){var T=w[fe]||null;if(!T)throw Error(r(90));Zl(w,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<m.length;d++)w=m[d],w.form===l.form&&Kl(w)}break e;case"textarea":Xl(l,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&Ks(l,!!m.multiple,d,!1)}}}var Xs=!1;function eu(l,d,m){if(Xs)return l(d,m);Xs=!0;try{var w=l(d);return w}finally{if(Xs=!1,(Ys!==null||Ir!==null)&&(yy(),Ys&&(d=Ys,l=Ir,Ir=Ys=null,ji(d),l)))for(d=0;d<l.length;d++)ji(l[d])}}function Js(l,d){var m=l.stateNode;if(m===null)return null;var w=m[fe]||null;if(w===null)return null;m=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(l=l.type,w=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!w;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(r(231,d,typeof m));return m}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),op=!1;if(va)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){op=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{op=!1}var to=null,Pd=null,tu=null;function nu(){if(tu)return tu;var l,d=Pd,m=d.length,w,T="value"in to?to.value:to.textContent,P=T.length;for(l=0;l<m&&d[l]===T[l];l++);var oe=m-l;for(w=1;w<=oe&&d[m-w]===T[P-w];w++);return tu=T.slice(l,1<w?1-w:void 0)}function ru(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function xc(){return!0}function Ng(){return!1}function aa(l){function d(m,w,T,P,oe){this._reactName=m,this._targetInst=T,this.type=w,this.nativeEvent=P,this.target=oe,this.currentTarget=null;for(var Ee in l)l.hasOwnProperty(Ee)&&(m=l[Ee],this[Ee]=m?m(P):P[Ee]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?xc:Ng,this.isPropagationStopped=Ng,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){},isPersistent:xc}),d}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fd=aa(Qs),ds=f({},Qs,{view:0,detail:0}),Ld=aa(ds),Sc,sp,Ec,$d=f({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ec&&(Ec&&l.type==="mousemove"?(Sc=l.screenX-Ec.screenX,sp=l.screenY-Ec.screenY):sp=Sc=0,Ec=l),Sc)},movementY:function(l){return"movementY"in l?l.movementY:sp}}),Bd=aa($d),lp=f({},$d,{dataTransfer:0}),Ig=aa(lp),zd=f({},ds,{relatedTarget:0}),au=aa(zd),Ud=f({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Og=aa(Ud),P1=f({},Qs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),qd=aa(P1),up=f({},Qs,{data:0}),Hd=aa(up),cp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cc(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=wa[l])?!!d[l]:!1}function el(){return Cc}var Dg=f({},ds,{key:function(l){if(l.key){var d=cp[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=ru(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?dp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(l){return l.type==="keypress"?ru(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ru(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Vd=aa(Dg),jg=f({},$d,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fp=aa(jg),Gd=f({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),hp=aa(Gd),tl=f({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),pp=aa(tl),mp=f({},$d,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Wd=aa(mp),gp=f({},Qs,{newState:0,oldState:0}),Mg=aa(gp),F1=[9,13,27,32],kc=va&&"CompositionEvent"in window,fs=null;va&&"documentMode"in document&&(fs=document.documentMode);var L1=va&&"TextEvent"in window&&!fs,Kd=va&&(!kc||fs&&8<fs&&11>=fs),Zd=" ",Pg=!1;function yp(l,d){switch(l){case"keyup":return F1.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fg(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var nl=!1;function Lg(l,d){switch(l){case"compositionend":return Fg(d);case"keypress":return d.which!==32?null:(Pg=!0,Zd);case"textInput":return l=d.data,l===Zd&&Pg?null:l;default:return null}}function $1(l,d){if(nl)return l==="compositionend"||!kc&&yp(l,d)?(l=nu(),tu=Pd=to=null,nl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Kd&&d.locale!=="ko"?null:d.data;default:return null}}var $g={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!$g[l.type]:d==="textarea"}function bp(l,d,m,w){Ys?Ir?Ir.push(w):Ir=[w]:Ys=w,d=Sy(d,"onChange"),0<d.length&&(m=new Fd("onChange","change",null,m,w),l.push({event:m,listeners:d}))}var iu=null,Ac=null;function B1(l){Y3(l,0)}function Xd(l){var d=fr(l);if(Kl(d))return l}function Tc(l,d){if(l==="change")return d}var no=!1;if(va){var Or;if(va){var ou="oninput"in document;if(!ou){var si=document.createElement("div");si.setAttribute("oninput","return;"),ou=typeof si.oninput=="function"}Or=ou}else Or=!1;no=Or&&(!document.documentMode||9<document.documentMode)}function Bg(){iu&&(iu.detachEvent("onpropertychange",Jd),Ac=iu=null)}function Jd(l){if(l.propertyName==="value"&&Xd(Ac)){var d=[];bp(d,Ac,l,Md(l)),eu(B1,d)}}function zg(l,d,m){l==="focusin"?(Bg(),iu=d,Ac=m,iu.attachEvent("onpropertychange",Jd)):l==="focusout"&&Bg()}function rl(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Xd(Ac)}function vp(l,d){if(l==="click")return Xd(d)}function su(l,d){if(l==="input"||l==="change")return Xd(d)}function hs(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var qa=typeof Object.is=="function"?Object.is:hs;function A(l,d){if(qa(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var m=Object.keys(l),w=Object.keys(d);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var T=m[w];if(!Ie.call(d,T)||!qa(l[T],d[T]))return!1}return!0}function j(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function K(l,d){var m=j(l);l=0;for(var w;m;){if(m.nodeType===3){if(w=l+m.textContent.length,l<=d&&w>=d)return{node:m,offset:d-l};l=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=j(m)}}function te(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?te(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function ue(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Ro(l.document);d instanceof l.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)l=d.contentWindow;else break;d=Ro(l.document)}return d}function _e(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var je=va&&"documentMode"in document&&11>=document.documentMode,$e=null,We=null,Ye=null,tt=!1;function He(l,d,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;tt||$e==null||$e!==Ro(w)||(w=$e,"selectionStart"in w&&_e(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ye&&A(Ye,w)||(Ye=w,w=Sy(We,"onSelect"),0<w.length&&(d=new Fd("onSelect","select",null,d,m),l.push({event:d,listeners:w}),d.target=$e)))}function rt(l,d){var m={};return m[l.toLowerCase()]=d.toLowerCase(),m["Webkit"+l]="webkit"+d,m["Moz"+l]="moz"+d,m}var Ge={animationend:rt("Animation","AnimationEnd"),animationiteration:rt("Animation","AnimationIteration"),animationstart:rt("Animation","AnimationStart"),transitionrun:rt("Transition","TransitionRun"),transitionstart:rt("Transition","TransitionStart"),transitioncancel:rt("Transition","TransitionCancel"),transitionend:rt("Transition","TransitionEnd")},Qe={},at={};va&&(at=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Xe(l){if(Qe[l])return Qe[l];if(!Ge[l])return l;var d=Ge[l],m;for(m in d)if(d.hasOwnProperty(m)&&m in at)return Qe[l]=d[m];return l}var ft=Xe("animationend"),gt=Xe("animationiteration"),bt=Xe("animationstart"),wt=Xe("transitionrun"),jt=Xe("transitionstart"),qt=Xe("transitioncancel"),Nt=Xe("transitionend"),Lt=new Map,Vt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vt.push("scrollEnd");function It(l,d){Lt.set(l,d),os(d,[l])}var Zt=new WeakMap;function cn(l,d){if(typeof l=="object"&&l!==null){var m=Zt.get(l);return m!==void 0?m:(d={value:l,source:d,stack:ep(d)},Zt.set(l,d),d)}return{value:l,source:d,stack:ep(d)}}var dn=[],Cn=0,ja=0;function yn(){for(var l=Cn,d=ja=Cn=0;d<l;){var m=dn[d];dn[d++]=null;var w=dn[d];dn[d++]=null;var T=dn[d];dn[d++]=null;var P=dn[d];if(dn[d++]=null,w!==null&&T!==null){var oe=w.pending;oe===null?T.next=T:(T.next=oe.next,oe.next=T),w.pending=T}P!==0&&_a(m,T,P)}}function Jr(l,d,m,w){dn[Cn++]=l,dn[Cn++]=d,dn[Cn++]=m,dn[Cn++]=w,ja|=w,l.lanes|=w,l=l.alternate,l!==null&&(l.lanes|=w)}function ia(l,d,m,w){return Jr(l,d,m,w),ro(l)}function No(l,d){return Jr(l,null,null,d),ro(l)}function _a(l,d,m){l.lanes|=m;var w=l.alternate;w!==null&&(w.lanes|=m);for(var T=!1,P=l.return;P!==null;)P.childLanes|=m,w=P.alternate,w!==null&&(w.childLanes|=m),P.tag===22&&(l=P.stateNode,l===null||l._visibility&1||(T=!0)),l=P,P=P.return;return l.tag===3?(P=l.stateNode,T&&d!==null&&(T=31-Ut(m),l=P.hiddenUpdates,w=l[T],w===null?l[T]=[d]:w.push(d),d.lane=m|536870912),P):null}function ro(l){if(50<Hp)throw Hp=0,G_=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var ps={};function _B(l,d,m,w){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(l,d,m,w){return new _B(l,d,m,w)}function z1(l){return l=l.prototype,!(!l||!l.isReactComponent)}function al(l,d){var m=l.alternate;return m===null?(m=Mi(l.tag,d,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=d,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,d=l.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function MA(l,d){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,d=m.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Ug(l,d,m,w,T,P){var oe=0;if(w=l,typeof l=="function")z1(l)&&(oe=1);else if(typeof l=="string")oe=S7(l,m,be.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case z:return l=Mi(31,m,d,T),l.elementType=z,l.lanes=P,l;case v:return Rc(m.children,T,P,d);case b:oe=8,T|=24;break;case _:return l=Mi(12,m,d,T|2),l.elementType=_,l.lanes=P,l;case k:return l=Mi(13,m,d,T),l.elementType=k,l.lanes=P,l;case D:return l=Mi(19,m,d,T),l.elementType=D,l.lanes=P,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case E:oe=10;break e;case S:oe=9;break e;case C:oe=11;break e;case O:oe=14;break e;case N:oe=16,w=null;break e}oe=29,m=Error(r(130,l===null?"null":typeof l,"")),w=null}return d=Mi(oe,m,d,T),d.elementType=l,d.type=w,d.lanes=P,d}function Rc(l,d,m,w){return l=Mi(7,l,w,d),l.lanes=m,l}function U1(l,d,m){return l=Mi(6,l,null,d),l.lanes=m,l}function q1(l,d,m){return d=Mi(4,l.children!==null?l.children:[],l.key,d),d.lanes=m,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Qd=[],ef=0,qg=null,Hg=0,ao=[],io=0,Nc=null,il=1,ol="";function Ic(l,d){Qd[ef++]=Hg,Qd[ef++]=qg,qg=l,Hg=d}function PA(l,d,m){ao[io++]=il,ao[io++]=ol,ao[io++]=Nc,Nc=l;var w=il;l=ol;var T=32-Ut(w)-1;w&=~(1<<T),m+=1;var P=32-Ut(d)+T;if(30<P){var oe=T-T%5;P=(w&(1<<oe)-1).toString(32),w>>=oe,T-=oe,il=1<<32-Ut(d)+T|m<<T|w,ol=P+l}else il=1<<P|m<<T|w,ol=l}function H1(l){l.return!==null&&(Ic(l,1),PA(l,1,0))}function V1(l){for(;l===qg;)qg=Qd[--ef],Qd[ef]=null,Hg=Qd[--ef],Qd[ef]=null;for(;l===Nc;)Nc=ao[--io],ao[io]=null,ol=ao[--io],ao[io]=null,il=ao[--io],ao[io]=null}var li=null,Gr=null,er=!1,Oc=null,ms=!1,G1=Error(r(519));function Dc(l){var d=Error(r(418,""));throw xp(cn(d,l)),G1}function FA(l){var d=l.stateNode,m=l.type,w=l.memoizedProps;switch(d[pe]=l,d[fe]=w,m){case"dialog":Hn("cancel",d),Hn("close",d);break;case"iframe":case"object":case"embed":Hn("load",d);break;case"video":case"audio":for(m=0;m<Gp.length;m++)Hn(Gp[m],d);break;case"source":Hn("error",d);break;case"img":case"image":case"link":Hn("error",d),Hn("load",d);break;case"details":Hn("toggle",d);break;case"input":Hn("invalid",d),rp(d,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),cs(d);break;case"select":Hn("invalid",d);break;case"textarea":Hn("invalid",d),ap(d,w.value,w.defaultValue,w.children),cs(d)}m=w.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||w.suppressHydrationWarning===!0||eR(d.textContent,m)?(w.popover!=null&&(Hn("beforetoggle",d),Hn("toggle",d)),w.onScroll!=null&&Hn("scroll",d),w.onScrollEnd!=null&&Hn("scrollend",d),w.onClick!=null&&(d.onclick=Ey),d=!0):d=!1,d||Dc(l)}function LA(l){for(li=l.return;li;)switch(li.tag){case 5:case 13:ms=!1;return;case 27:case 3:ms=!0;return;default:li=li.return}}function wp(l){if(l!==li)return!1;if(!er)return LA(l),er=!0,!1;var d=l.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||lx(l.type,l.memoizedProps)),m=!m),m&&Gr&&Dc(l),LA(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(m=l.data,m==="/$"){if(d===0){Gr=Oo(l.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++;l=l.nextSibling}Gr=null}}else d===27?(d=Gr,Su(l.type)?(l=fx,fx=null,Gr=l):Gr=d):Gr=li?Oo(l.stateNode.nextSibling):null;return!0}function _p(){Gr=li=null,er=!1}function $A(){var l=Oc;return l!==null&&(wi===null?wi=l:wi.push.apply(wi,l),Oc=null),l}function xp(l){Oc===null?Oc=[l]:Oc.push(l)}var W1=J(null),jc=null,sl=null;function lu(l,d,m){re(W1,d._currentValue),d._currentValue=m}function ll(l){l._currentValue=W1.current,Y(W1)}function K1(l,d,m){for(;l!==null;){var w=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),l===m)break;l=l.return}}function Z1(l,d,m,w){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var P=T.dependencies;if(P!==null){var oe=T.child;P=P.firstContext;e:for(;P!==null;){var Ee=P;P=T;for(var ze=0;ze<d.length;ze++)if(Ee.context===d[ze]){P.lanes|=m,Ee=P.alternate,Ee!==null&&(Ee.lanes|=m),K1(P.return,m,l),w||(oe=null);break e}P=Ee.next}}else if(T.tag===18){if(oe=T.return,oe===null)throw Error(r(341));oe.lanes|=m,P=oe.alternate,P!==null&&(P.lanes|=m),K1(oe,m,l),oe=null}else oe=T.child;if(oe!==null)oe.return=T;else for(oe=T;oe!==null;){if(oe===l){oe=null;break}if(T=oe.sibling,T!==null){T.return=oe.return,oe=T;break}oe=oe.return}T=oe}}function Sp(l,d,m,w){l=null;for(var T=d,P=!1;T!==null;){if(!P){if((T.flags&524288)!==0)P=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var oe=T.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var Ee=T.type;qa(T.pendingProps.value,oe.value)||(l!==null?l.push(Ee):l=[Ee])}}else if(T===Pe.current){if(oe=T.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Jp):l=[Jp])}T=T.return}l!==null&&Z1(d,l,m,w),d.flags|=262144}function Vg(l){for(l=l.firstContext;l!==null;){if(!qa(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Mc(l){jc=l,sl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Ha(l){return BA(jc,l)}function Gg(l,d){return jc===null&&Mc(l),BA(l,d)}function BA(l,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},sl===null){if(l===null)throw Error(r(308));sl=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else sl=sl.next=d;return m}var xB=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(m,w){l.push(w)}};this.abort=function(){d.aborted=!0,l.forEach(function(m){return m()})}},SB=e.unstable_scheduleCallback,EB=e.unstable_NormalPriority,fa={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Y1(){return{controller:new xB,data:new Map,refCount:0}}function Ep(l){l.refCount--,l.refCount===0&&SB(EB,function(){l.controller.abort()})}var Cp=null,X1=0,tf=0,nf=null;function CB(l,d){if(Cp===null){var m=Cp=[];X1=0,tf=Q_(),nf={status:"pending",value:void 0,then:function(w){m.push(w)}}}return X1++,d.then(zA,zA),d}function zA(){if(--X1===0&&Cp!==null){nf!==null&&(nf.status="fulfilled");var l=Cp;Cp=null,tf=0,nf=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function kB(l,d){var m=[],w={status:"pending",value:null,reason:null,then:function(T){m.push(T)}};return l.then(function(){w.status="fulfilled",w.value=d;for(var T=0;T<m.length;T++)(0,m[T])(d)},function(T){for(w.status="rejected",w.reason=T,T=0;T<m.length;T++)(0,m[T])(void 0)}),w}var UA=ae.S;ae.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&CB(l,d),UA!==null&&UA(l,d)};var Pc=J(null);function J1(){var l=Pc.current;return l!==null?l:Ar.pooledCache}function Wg(l,d){d===null?re(Pc,Pc.current):re(Pc,d.pool)}function qA(){var l=J1();return l===null?null:{parent:fa._currentValue,pool:l}}var kp=Error(r(460)),HA=Error(r(474)),Kg=Error(r(542)),Q1={then:function(){}};function VA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Zg(){}function GA(l,d,m){switch(m=l[m],m===void 0?l.push(d):m!==d&&(d.then(Zg,Zg),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,KA(l),l;default:if(typeof d.status=="string")d.then(Zg,Zg);else{if(l=Ar,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(w){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=w}},function(w){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=w}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,KA(l),l}throw Ap=d,kp}}var Ap=null;function WA(){if(Ap===null)throw Error(r(459));var l=Ap;return Ap=null,l}function KA(l){if(l===kp||l===Kg)throw Error(r(483))}var uu=!1;function e_(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function t_(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function cu(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function du(l,d,m){var w=l.updateQueue;if(w===null)return null;if(w=w.shared,(or&2)!==0){var T=w.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),w.pending=d,d=ro(l),_a(l,null,m),d}return Jr(l,w,d,m),ro(l)}function Tp(l,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var w=d.lanes;w&=l.pendingLanes,m|=w,d.lanes=m,Ke(l,m)}}function n_(l,d){var m=l.updateQueue,w=l.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var T=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var oe={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};P===null?T=P=oe:P=P.next=oe,m=m.next}while(m!==null);P===null?T=P=d:P=P.next=d}else T=P=d;m={baseState:w.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:w.shared,callbacks:w.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=d}var r_=!1;function Rp(){if(r_){var l=nf;if(l!==null)throw l}}function Np(l,d,m,w){r_=!1;var T=l.updateQueue;uu=!1;var P=T.firstBaseUpdate,oe=T.lastBaseUpdate,Ee=T.shared.pending;if(Ee!==null){T.shared.pending=null;var ze=Ee,ct=ze.next;ze.next=null,oe===null?P=ct:oe.next=ct,oe=ze;var _t=l.alternate;_t!==null&&(_t=_t.updateQueue,Ee=_t.lastBaseUpdate,Ee!==oe&&(Ee===null?_t.firstBaseUpdate=ct:Ee.next=ct,_t.lastBaseUpdate=ze))}if(P!==null){var kt=T.baseState;oe=0,_t=ct=ze=null,Ee=P;do{var pt=Ee.lane&-536870913,mt=pt!==Ee.lane;if(mt?(Kn&pt)===pt:(w&pt)===pt){pt!==0&&pt===tf&&(r_=!0),_t!==null&&(_t=_t.next={lane:0,tag:Ee.tag,payload:Ee.payload,callback:null,next:null});e:{var bn=l,fn=Ee;pt=d;var gr=m;switch(fn.tag){case 1:if(bn=fn.payload,typeof bn=="function"){kt=bn.call(gr,kt,pt);break e}kt=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=fn.payload,pt=typeof bn=="function"?bn.call(gr,kt,pt):bn,pt==null)break e;kt=f({},kt,pt);break e;case 2:uu=!0}}pt=Ee.callback,pt!==null&&(l.flags|=64,mt&&(l.flags|=8192),mt=T.callbacks,mt===null?T.callbacks=[pt]:mt.push(pt))}else mt={lane:pt,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},_t===null?(ct=_t=mt,ze=kt):_t=_t.next=mt,oe|=pt;if(Ee=Ee.next,Ee===null){if(Ee=T.shared.pending,Ee===null)break;mt=Ee,Ee=mt.next,mt.next=null,T.lastBaseUpdate=mt,T.shared.pending=null}}while(!0);_t===null&&(ze=kt),T.baseState=ze,T.firstBaseUpdate=ct,T.lastBaseUpdate=_t,P===null&&(T.shared.lanes=0),vu|=oe,l.lanes=oe,l.memoizedState=kt}}function ZA(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function YA(l,d){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)ZA(m[l],d)}var rf=J(null),Yg=J(0);function XA(l,d){l=ml,re(Yg,l),re(rf,d),ml=l|d.baseLanes}function a_(){re(Yg,ml),re(rf,rf.current)}function i_(){ml=Yg.current,Y(rf),Y(Yg)}var fu=0,Ln=null,pr=null,oa=null,Xg=!1,af=!1,Fc=!1,Jg=0,Ip=0,of=null,AB=0;function Qr(){throw Error(r(321))}function o_(l,d){if(d===null)return!1;for(var m=0;m<d.length&&m<l.length;m++)if(!qa(l[m],d[m]))return!1;return!0}function s_(l,d,m,w,T,P){return fu=P,Ln=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ae.H=l===null||l.memoizedState===null?jT:MT,Fc=!1,P=m(w,T),Fc=!1,af&&(P=QA(d,m,w,T)),JA(l),P}function JA(l){ae.H=ay;var d=pr!==null&&pr.next!==null;if(fu=0,oa=pr=Ln=null,Xg=!1,Ip=0,of=null,d)throw Error(r(300));l===null||xa||(l=l.dependencies,l!==null&&Vg(l)&&(xa=!0))}function QA(l,d,m,w){Ln=l;var T=0;do{if(af&&(of=null),Ip=0,af=!1,25<=T)throw Error(r(301));if(T+=1,oa=pr=null,l.updateQueue!=null){var P=l.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}ae.H=jB,P=d(m,w)}while(af);return P}function TB(){var l=ae.H,d=l.useState()[0];return d=typeof d.then=="function"?Op(d):d,l=l.useState()[0],(pr!==null?pr.memoizedState:null)!==l&&(Ln.flags|=1024),d}function l_(){var l=Jg!==0;return Jg=0,l}function u_(l,d,m){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~m}function c_(l){if(Xg){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Xg=!1}fu=0,oa=pr=Ln=null,af=!1,Ip=Jg=0,of=null}function bi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oa===null?Ln.memoizedState=oa=l:oa=oa.next=l,oa}function sa(){if(pr===null){var l=Ln.alternate;l=l!==null?l.memoizedState:null}else l=pr.next;var d=oa===null?Ln.memoizedState:oa.next;if(d!==null)oa=d,pr=l;else{if(l===null)throw Ln.alternate===null?Error(r(467)):Error(r(310));pr=l,l={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},oa===null?Ln.memoizedState=oa=l:oa=oa.next=l}return oa}function d_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Op(l){var d=Ip;return Ip+=1,of===null&&(of=[]),l=GA(of,l,d),d=Ln,(oa===null?d.memoizedState:oa.next)===null&&(d=d.alternate,ae.H=d===null||d.memoizedState===null?jT:MT),l}function Qg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Op(l);if(l.$$typeof===E)return Ha(l)}throw Error(r(438,String(l)))}function f_(l){var d=null,m=Ln.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var w=Ln.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(d={data:w.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=d_(),Ln.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(l),w=0;w<l;w++)m[w]=H;return d.index++,m}function ul(l,d){return typeof d=="function"?d(l):d}function ey(l){var d=sa();return h_(d,pr,l)}function h_(l,d,m){var w=l.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=m;var T=l.baseQueue,P=w.pending;if(P!==null){if(T!==null){var oe=T.next;T.next=P.next,P.next=oe}d.baseQueue=T=P,w.pending=null}if(P=l.baseState,T===null)l.memoizedState=P;else{d=T.next;var Ee=oe=null,ze=null,ct=d,_t=!1;do{var kt=ct.lane&-536870913;if(kt!==ct.lane?(Kn&kt)===kt:(fu&kt)===kt){var pt=ct.revertLane;if(pt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),kt===tf&&(_t=!0);else if((fu&pt)===pt){ct=ct.next,pt===tf&&(_t=!0);continue}else kt={lane:0,revertLane:ct.revertLane,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},ze===null?(Ee=ze=kt,oe=P):ze=ze.next=kt,Ln.lanes|=pt,vu|=pt;kt=ct.action,Fc&&m(P,kt),P=ct.hasEagerState?ct.eagerState:m(P,kt)}else pt={lane:kt,revertLane:ct.revertLane,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},ze===null?(Ee=ze=pt,oe=P):ze=ze.next=pt,Ln.lanes|=kt,vu|=kt;ct=ct.next}while(ct!==null&&ct!==d);if(ze===null?oe=P:ze.next=Ee,!qa(P,l.memoizedState)&&(xa=!0,_t&&(m=nf,m!==null)))throw m;l.memoizedState=P,l.baseState=oe,l.baseQueue=ze,w.lastRenderedState=P}return T===null&&(w.lanes=0),[l.memoizedState,w.dispatch]}function p_(l){var d=sa(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var w=m.dispatch,T=m.pending,P=d.memoizedState;if(T!==null){m.pending=null;var oe=T=T.next;do P=l(P,oe.action),oe=oe.next;while(oe!==T);qa(P,d.memoizedState)||(xa=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),m.lastRenderedState=P}return[P,w]}function eT(l,d,m){var w=Ln,T=sa(),P=er;if(P){if(m===void 0)throw Error(r(407));m=m()}else m=d();var oe=!qa((pr||T).memoizedState,m);oe&&(T.memoizedState=m,xa=!0),T=T.queue;var Ee=rT.bind(null,w,T,l);if(Dp(2048,8,Ee,[l]),T.getSnapshot!==d||oe||oa!==null&&oa.memoizedState.tag&1){if(w.flags|=2048,sf(9,ty(),nT.bind(null,w,T,m,d),null),Ar===null)throw Error(r(349));P||(fu&124)!==0||tT(w,d,m)}return m}function tT(l,d,m){l.flags|=16384,l={getSnapshot:d,value:m},d=Ln.updateQueue,d===null?(d=d_(),Ln.updateQueue=d,d.stores=[l]):(m=d.stores,m===null?d.stores=[l]:m.push(l))}function nT(l,d,m,w){d.value=m,d.getSnapshot=w,aT(d)&&iT(l)}function rT(l,d,m){return m(function(){aT(d)&&iT(l)})}function aT(l){var d=l.getSnapshot;l=l.value;try{var m=d();return!qa(l,m)}catch{return!0}}function iT(l){var d=No(l,2);d!==null&&Bi(d,l,2)}function m_(l){var d=bi();if(typeof l=="function"){var m=l;if(l=m(),Fc){Tt(!0);try{m()}finally{Tt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:l},d}function oT(l,d,m,w){return l.baseState=m,h_(l,pr,typeof w=="function"?w:ul)}function RB(l,d,m,w,T){if(ry(l))throw Error(r(485));if(l=d.action,l!==null){var P={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){P.listeners.push(oe)}};ae.T!==null?m(!0):P.isTransition=!1,w(P),m=d.pending,m===null?(P.next=d.pending=P,sT(d,P)):(P.next=m.next,d.pending=m.next=P)}}function sT(l,d){var m=d.action,w=d.payload,T=l.state;if(d.isTransition){var P=ae.T,oe={};ae.T=oe;try{var Ee=m(T,w),ze=ae.S;ze!==null&&ze(oe,Ee),lT(l,d,Ee)}catch(ct){g_(l,d,ct)}finally{ae.T=P}}else try{P=m(T,w),lT(l,d,P)}catch(ct){g_(l,d,ct)}}function lT(l,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(w){uT(l,d,w)},function(w){return g_(l,d,w)}):uT(l,d,m)}function uT(l,d,m){d.status="fulfilled",d.value=m,cT(d),l.state=m,d=l.pending,d!==null&&(m=d.next,m===d?l.pending=null:(m=m.next,d.next=m,sT(l,m)))}function g_(l,d,m){var w=l.pending;if(l.pending=null,w!==null){w=w.next;do d.status="rejected",d.reason=m,cT(d),d=d.next;while(d!==w)}l.action=null}function cT(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function dT(l,d){return d}function fT(l,d){if(er){var m=Ar.formState;if(m!==null){e:{var w=Ln;if(er){if(Gr){t:{for(var T=Gr,P=ms;T.nodeType!==8;){if(!P){T=null;break t}if(T=Oo(T.nextSibling),T===null){T=null;break t}}P=T.data,T=P==="F!"||P==="F"?T:null}if(T){Gr=Oo(T.nextSibling),w=T.data==="F!";break e}}Dc(w)}w=!1}w&&(d=m[0])}}return m=bi(),m.memoizedState=m.baseState=d,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dT,lastRenderedState:d},m.queue=w,m=IT.bind(null,Ln,w),w.dispatch=m,w=m_(!1),P=__.bind(null,Ln,!1,w.queue),w=bi(),T={state:d,dispatch:null,action:l,pending:null},w.queue=T,m=RB.bind(null,Ln,T,P,m),T.dispatch=m,w.memoizedState=l,[d,m,!1]}function hT(l){var d=sa();return pT(d,pr,l)}function pT(l,d,m){if(d=h_(l,d,dT)[0],l=ey(ul)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var w=Op(d)}catch(oe){throw oe===kp?Kg:oe}else w=d;d=sa();var T=d.queue,P=T.dispatch;return m!==d.memoizedState&&(Ln.flags|=2048,sf(9,ty(),NB.bind(null,T,m),null)),[w,P,l]}function NB(l,d){l.action=d}function mT(l){var d=sa(),m=pr;if(m!==null)return pT(d,m,l);sa(),d=d.memoizedState,m=sa();var w=m.queue.dispatch;return m.memoizedState=l,[d,w,!1]}function sf(l,d,m,w){return l={tag:l,create:m,deps:w,inst:d,next:null},d=Ln.updateQueue,d===null&&(d=d_(),Ln.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=l.next=l:(w=m.next,m.next=l,l.next=w,d.lastEffect=l),l}function ty(){return{destroy:void 0,resource:void 0}}function gT(){return sa().memoizedState}function ny(l,d,m,w){var T=bi();w=w===void 0?null:w,Ln.flags|=l,T.memoizedState=sf(1|d,ty(),m,w)}function Dp(l,d,m,w){var T=sa();w=w===void 0?null:w;var P=T.memoizedState.inst;pr!==null&&w!==null&&o_(w,pr.memoizedState.deps)?T.memoizedState=sf(d,P,m,w):(Ln.flags|=l,T.memoizedState=sf(1|d,P,m,w))}function yT(l,d){ny(8390656,8,l,d)}function bT(l,d){Dp(2048,8,l,d)}function vT(l,d){return Dp(4,2,l,d)}function wT(l,d){return Dp(4,4,l,d)}function _T(l,d){if(typeof d=="function"){l=l();var m=d(l);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function xT(l,d,m){m=m!=null?m.concat([l]):null,Dp(4,4,_T.bind(null,d,l),m)}function y_(){}function ST(l,d){var m=sa();d=d===void 0?null:d;var w=m.memoizedState;return d!==null&&o_(d,w[1])?w[0]:(m.memoizedState=[l,d],l)}function ET(l,d){var m=sa();d=d===void 0?null:d;var w=m.memoizedState;if(d!==null&&o_(d,w[1]))return w[0];if(w=l(),Fc){Tt(!0);try{l()}finally{Tt(!1)}}return m.memoizedState=[w,d],w}function b_(l,d,m){return m===void 0||(fu&1073741824)!==0?l.memoizedState=d:(l.memoizedState=m,l=A3(),Ln.lanes|=l,vu|=l,m)}function CT(l,d,m,w){return qa(m,d)?m:rf.current!==null?(l=b_(l,m,w),qa(l,d)||(xa=!0),l):(fu&42)===0?(xa=!0,l.memoizedState=m):(l=A3(),Ln.lanes|=l,vu|=l,d)}function kT(l,d,m,w,T){var P=ne.p;ne.p=P!==0&&8>P?P:8;var oe=ae.T,Ee={};ae.T=Ee,__(l,!1,d,m);try{var ze=T(),ct=ae.S;if(ct!==null&&ct(Ee,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var _t=kB(ze,w);jp(l,d,_t,$i(l))}else jp(l,d,w,$i(l))}catch(kt){jp(l,d,{then:function(){},status:"rejected",reason:kt},$i())}finally{ne.p=P,ae.T=oe}}function IB(){}function v_(l,d,m,w){if(l.tag!==5)throw Error(r(476));var T=AT(l).queue;kT(l,T,d,ee,m===null?IB:function(){return TT(l),m(w)})}function AT(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:ee},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:m},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function TT(l){var d=AT(l).next.queue;jp(l,d,{},$i())}function w_(){return Ha(Jp)}function RT(){return sa().memoizedState}function NT(){return sa().memoizedState}function OB(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var m=$i();l=cu(m);var w=du(d,l,m);w!==null&&(Bi(w,d,m),Tp(w,d,m)),d={cache:Y1()},l.payload=d;return}d=d.return}}function DB(l,d,m){var w=$i();m={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},ry(l)?OT(d,m):(m=ia(l,d,m,w),m!==null&&(Bi(m,l,w),DT(m,d,w)))}function IT(l,d,m){var w=$i();jp(l,d,m,w)}function jp(l,d,m,w){var T={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(ry(l))OT(d,T);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var oe=d.lastRenderedState,Ee=P(oe,m);if(T.hasEagerState=!0,T.eagerState=Ee,qa(Ee,oe))return Jr(l,d,T,0),Ar===null&&yn(),!1}catch{}finally{}if(m=ia(l,d,T,w),m!==null)return Bi(m,l,w),DT(m,d,w),!0}return!1}function __(l,d,m,w){if(w={lane:2,revertLane:Q_(),action:w,hasEagerState:!1,eagerState:null,next:null},ry(l)){if(d)throw Error(r(479))}else d=ia(l,m,w,2),d!==null&&Bi(d,l,2)}function ry(l){var d=l.alternate;return l===Ln||d!==null&&d===Ln}function OT(l,d){af=Xg=!0;var m=l.pending;m===null?d.next=d:(d.next=m.next,m.next=d),l.pending=d}function DT(l,d,m){if((m&4194048)!==0){var w=d.lanes;w&=l.pendingLanes,m|=w,d.lanes=m,Ke(l,m)}}var ay={readContext:Ha,use:Qg,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useLayoutEffect:Qr,useInsertionEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useSyncExternalStore:Qr,useId:Qr,useHostTransitionStatus:Qr,useFormState:Qr,useActionState:Qr,useOptimistic:Qr,useMemoCache:Qr,useCacheRefresh:Qr},jT={readContext:Ha,use:Qg,useCallback:function(l,d){return bi().memoizedState=[l,d===void 0?null:d],l},useContext:Ha,useEffect:yT,useImperativeHandle:function(l,d,m){m=m!=null?m.concat([l]):null,ny(4194308,4,_T.bind(null,d,l),m)},useLayoutEffect:function(l,d){return ny(4194308,4,l,d)},useInsertionEffect:function(l,d){ny(4,2,l,d)},useMemo:function(l,d){var m=bi();d=d===void 0?null:d;var w=l();if(Fc){Tt(!0);try{l()}finally{Tt(!1)}}return m.memoizedState=[w,d],w},useReducer:function(l,d,m){var w=bi();if(m!==void 0){var T=m(d);if(Fc){Tt(!0);try{m(d)}finally{Tt(!1)}}}else T=d;return w.memoizedState=w.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},w.queue=l,l=l.dispatch=DB.bind(null,Ln,l),[w.memoizedState,l]},useRef:function(l){var d=bi();return l={current:l},d.memoizedState=l},useState:function(l){l=m_(l);var d=l.queue,m=IT.bind(null,Ln,d);return d.dispatch=m,[l.memoizedState,m]},useDebugValue:y_,useDeferredValue:function(l,d){var m=bi();return b_(m,l,d)},useTransition:function(){var l=m_(!1);return l=kT.bind(null,Ln,l.queue,!0,!1),bi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,m){var w=Ln,T=bi();if(er){if(m===void 0)throw Error(r(407));m=m()}else{if(m=d(),Ar===null)throw Error(r(349));(Kn&124)!==0||tT(w,d,m)}T.memoizedState=m;var P={value:m,getSnapshot:d};return T.queue=P,yT(rT.bind(null,w,P,l),[l]),w.flags|=2048,sf(9,ty(),nT.bind(null,w,P,m,d),null),m},useId:function(){var l=bi(),d=Ar.identifierPrefix;if(er){var m=ol,w=il;m=(w&~(1<<32-Ut(w)-1)).toString(32)+m,d=""+d+"R"+m,m=Jg++,0<m&&(d+="H"+m.toString(32)),d+=""}else m=AB++,d=""+d+"r"+m.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:w_,useFormState:fT,useActionState:fT,useOptimistic:function(l){var d=bi();d.memoizedState=d.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=__.bind(null,Ln,!0,m),m.dispatch=d,[l,d]},useMemoCache:f_,useCacheRefresh:function(){return bi().memoizedState=OB.bind(null,Ln)}},MT={readContext:Ha,use:Qg,useCallback:ST,useContext:Ha,useEffect:bT,useImperativeHandle:xT,useInsertionEffect:vT,useLayoutEffect:wT,useMemo:ET,useReducer:ey,useRef:gT,useState:function(){return ey(ul)},useDebugValue:y_,useDeferredValue:function(l,d){var m=sa();return CT(m,pr.memoizedState,l,d)},useTransition:function(){var l=ey(ul)[0],d=sa().memoizedState;return[typeof l=="boolean"?l:Op(l),d]},useSyncExternalStore:eT,useId:RT,useHostTransitionStatus:w_,useFormState:hT,useActionState:hT,useOptimistic:function(l,d){var m=sa();return oT(m,pr,l,d)},useMemoCache:f_,useCacheRefresh:NT},jB={readContext:Ha,use:Qg,useCallback:ST,useContext:Ha,useEffect:bT,useImperativeHandle:xT,useInsertionEffect:vT,useLayoutEffect:wT,useMemo:ET,useReducer:p_,useRef:gT,useState:function(){return p_(ul)},useDebugValue:y_,useDeferredValue:function(l,d){var m=sa();return pr===null?b_(m,l,d):CT(m,pr.memoizedState,l,d)},useTransition:function(){var l=p_(ul)[0],d=sa().memoizedState;return[typeof l=="boolean"?l:Op(l),d]},useSyncExternalStore:eT,useId:RT,useHostTransitionStatus:w_,useFormState:mT,useActionState:mT,useOptimistic:function(l,d){var m=sa();return pr!==null?oT(m,pr,l,d):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:f_,useCacheRefresh:NT},lf=null,Mp=0;function iy(l){var d=Mp;return Mp+=1,lf===null&&(lf=[]),GA(lf,l,d)}function Pp(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function oy(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function PT(l){var d=l._init;return d(l._payload)}function FT(l){function d(nt,Ze){if(l){var ut=nt.deletions;ut===null?(nt.deletions=[Ze],nt.flags|=16):ut.push(Ze)}}function m(nt,Ze){if(!l)return null;for(;Ze!==null;)d(nt,Ze),Ze=Ze.sibling;return null}function w(nt){for(var Ze=new Map;nt!==null;)nt.key!==null?Ze.set(nt.key,nt):Ze.set(nt.index,nt),nt=nt.sibling;return Ze}function T(nt,Ze){return nt=al(nt,Ze),nt.index=0,nt.sibling=null,nt}function P(nt,Ze,ut){return nt.index=ut,l?(ut=nt.alternate,ut!==null?(ut=ut.index,ut<Ze?(nt.flags|=67108866,Ze):ut):(nt.flags|=67108866,Ze)):(nt.flags|=1048576,Ze)}function oe(nt){return l&&nt.alternate===null&&(nt.flags|=67108866),nt}function Ee(nt,Ze,ut,St){return Ze===null||Ze.tag!==6?(Ze=U1(ut,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,ut),Ze.return=nt,Ze)}function ze(nt,Ze,ut,St){var Qt=ut.type;return Qt===v?_t(nt,Ze,ut.props.children,St,ut.key):Ze!==null&&(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===N&&PT(Qt)===Ze.type)?(Ze=T(Ze,ut.props),Pp(Ze,ut),Ze.return=nt,Ze):(Ze=Ug(ut.type,ut.key,ut.props,null,nt.mode,St),Pp(Ze,ut),Ze.return=nt,Ze)}function ct(nt,Ze,ut,St){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==ut.containerInfo||Ze.stateNode.implementation!==ut.implementation?(Ze=q1(ut,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,ut.children||[]),Ze.return=nt,Ze)}function _t(nt,Ze,ut,St,Qt){return Ze===null||Ze.tag!==7?(Ze=Rc(ut,nt.mode,St,Qt),Ze.return=nt,Ze):(Ze=T(Ze,ut),Ze.return=nt,Ze)}function kt(nt,Ze,ut){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=U1(""+Ze,nt.mode,ut),Ze.return=nt,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case p:return ut=Ug(Ze.type,Ze.key,Ze.props,null,nt.mode,ut),Pp(ut,Ze),ut.return=nt,ut;case g:return Ze=q1(Ze,nt.mode,ut),Ze.return=nt,Ze;case N:var St=Ze._init;return Ze=St(Ze._payload),kt(nt,Ze,ut)}if(de(Ze)||F(Ze))return Ze=Rc(Ze,nt.mode,ut,null),Ze.return=nt,Ze;if(typeof Ze.then=="function")return kt(nt,iy(Ze),ut);if(Ze.$$typeof===E)return kt(nt,Gg(nt,Ze),ut);oy(nt,Ze)}return null}function pt(nt,Ze,ut,St){var Qt=Ze!==null?Ze.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Qt!==null?null:Ee(nt,Ze,""+ut,St);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case p:return ut.key===Qt?ze(nt,Ze,ut,St):null;case g:return ut.key===Qt?ct(nt,Ze,ut,St):null;case N:return Qt=ut._init,ut=Qt(ut._payload),pt(nt,Ze,ut,St)}if(de(ut)||F(ut))return Qt!==null?null:_t(nt,Ze,ut,St,null);if(typeof ut.then=="function")return pt(nt,Ze,iy(ut),St);if(ut.$$typeof===E)return pt(nt,Ze,Gg(nt,ut),St);oy(nt,ut)}return null}function mt(nt,Ze,ut,St,Qt){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return nt=nt.get(ut)||null,Ee(Ze,nt,""+St,Qt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case p:return nt=nt.get(St.key===null?ut:St.key)||null,ze(Ze,nt,St,Qt);case g:return nt=nt.get(St.key===null?ut:St.key)||null,ct(Ze,nt,St,Qt);case N:var Bn=St._init;return St=Bn(St._payload),mt(nt,Ze,ut,St,Qt)}if(de(St)||F(St))return nt=nt.get(ut)||null,_t(Ze,nt,St,Qt,null);if(typeof St.then=="function")return mt(nt,Ze,ut,iy(St),Qt);if(St.$$typeof===E)return mt(nt,Ze,ut,Gg(Ze,St),Qt);oy(Ze,St)}return null}function bn(nt,Ze,ut,St){for(var Qt=null,Bn=null,on=Ze,mn=Ze=0,Ea=null;on!==null&&mn<ut.length;mn++){on.index>mn?(Ea=on,on=null):Ea=on.sibling;var Jn=pt(nt,on,ut[mn],St);if(Jn===null){on===null&&(on=Ea);break}l&&on&&Jn.alternate===null&&d(nt,on),Ze=P(Jn,Ze,mn),Bn===null?Qt=Jn:Bn.sibling=Jn,Bn=Jn,on=Ea}if(mn===ut.length)return m(nt,on),er&&Ic(nt,mn),Qt;if(on===null){for(;mn<ut.length;mn++)on=kt(nt,ut[mn],St),on!==null&&(Ze=P(on,Ze,mn),Bn===null?Qt=on:Bn.sibling=on,Bn=on);return er&&Ic(nt,mn),Qt}for(on=w(on);mn<ut.length;mn++)Ea=mt(on,nt,mn,ut[mn],St),Ea!==null&&(l&&Ea.alternate!==null&&on.delete(Ea.key===null?mn:Ea.key),Ze=P(Ea,Ze,mn),Bn===null?Qt=Ea:Bn.sibling=Ea,Bn=Ea);return l&&on.forEach(function(Tu){return d(nt,Tu)}),er&&Ic(nt,mn),Qt}function fn(nt,Ze,ut,St){if(ut==null)throw Error(r(151));for(var Qt=null,Bn=null,on=Ze,mn=Ze=0,Ea=null,Jn=ut.next();on!==null&&!Jn.done;mn++,Jn=ut.next()){on.index>mn?(Ea=on,on=null):Ea=on.sibling;var Tu=pt(nt,on,Jn.value,St);if(Tu===null){on===null&&(on=Ea);break}l&&on&&Tu.alternate===null&&d(nt,on),Ze=P(Tu,Ze,mn),Bn===null?Qt=Tu:Bn.sibling=Tu,Bn=Tu,on=Ea}if(Jn.done)return m(nt,on),er&&Ic(nt,mn),Qt;if(on===null){for(;!Jn.done;mn++,Jn=ut.next())Jn=kt(nt,Jn.value,St),Jn!==null&&(Ze=P(Jn,Ze,mn),Bn===null?Qt=Jn:Bn.sibling=Jn,Bn=Jn);return er&&Ic(nt,mn),Qt}for(on=w(on);!Jn.done;mn++,Jn=ut.next())Jn=mt(on,nt,mn,Jn.value,St),Jn!==null&&(l&&Jn.alternate!==null&&on.delete(Jn.key===null?mn:Jn.key),Ze=P(Jn,Ze,mn),Bn===null?Qt=Jn:Bn.sibling=Jn,Bn=Jn);return l&&on.forEach(function(M7){return d(nt,M7)}),er&&Ic(nt,mn),Qt}function gr(nt,Ze,ut,St){if(typeof ut=="object"&&ut!==null&&ut.type===v&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case p:e:{for(var Qt=ut.key;Ze!==null;){if(Ze.key===Qt){if(Qt=ut.type,Qt===v){if(Ze.tag===7){m(nt,Ze.sibling),St=T(Ze,ut.props.children),St.return=nt,nt=St;break e}}else if(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===N&&PT(Qt)===Ze.type){m(nt,Ze.sibling),St=T(Ze,ut.props),Pp(St,ut),St.return=nt,nt=St;break e}m(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}ut.type===v?(St=Rc(ut.props.children,nt.mode,St,ut.key),St.return=nt,nt=St):(St=Ug(ut.type,ut.key,ut.props,null,nt.mode,St),Pp(St,ut),St.return=nt,nt=St)}return oe(nt);case g:e:{for(Qt=ut.key;Ze!==null;){if(Ze.key===Qt)if(Ze.tag===4&&Ze.stateNode.containerInfo===ut.containerInfo&&Ze.stateNode.implementation===ut.implementation){m(nt,Ze.sibling),St=T(Ze,ut.children||[]),St.return=nt,nt=St;break e}else{m(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}St=q1(ut,nt.mode,St),St.return=nt,nt=St}return oe(nt);case N:return Qt=ut._init,ut=Qt(ut._payload),gr(nt,Ze,ut,St)}if(de(ut))return bn(nt,Ze,ut,St);if(F(ut)){if(Qt=F(ut),typeof Qt!="function")throw Error(r(150));return ut=Qt.call(ut),fn(nt,Ze,ut,St)}if(typeof ut.then=="function")return gr(nt,Ze,iy(ut),St);if(ut.$$typeof===E)return gr(nt,Ze,Gg(nt,ut),St);oy(nt,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint"?(ut=""+ut,Ze!==null&&Ze.tag===6?(m(nt,Ze.sibling),St=T(Ze,ut),St.return=nt,nt=St):(m(nt,Ze),St=U1(ut,nt.mode,St),St.return=nt,nt=St),oe(nt)):m(nt,Ze)}return function(nt,Ze,ut,St){try{Mp=0;var Qt=gr(nt,Ze,ut,St);return lf=null,Qt}catch(on){if(on===kp||on===Kg)throw on;var Bn=Mi(29,on,null,nt.mode);return Bn.lanes=St,Bn.return=nt,Bn}finally{}}}var uf=FT(!0),LT=FT(!1),oo=J(null),gs=null;function hu(l){var d=l.alternate;re(ha,ha.current&1),re(oo,l),gs===null&&(d===null||rf.current!==null||d.memoizedState!==null)&&(gs=l)}function $T(l){if(l.tag===22){if(re(ha,ha.current),re(oo,l),gs===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(gs=l)}}else pu()}function pu(){re(ha,ha.current),re(oo,oo.current)}function cl(l){Y(oo),gs===l&&(gs=null),Y(ha)}var ha=J(0);function sy(l){for(var d=l;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||dx(m)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function x_(l,d,m,w){d=l.memoizedState,m=m(w,d),m=m==null?d:f({},d,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var S_={enqueueSetState:function(l,d,m){l=l._reactInternals;var w=$i(),T=cu(w);T.payload=d,m!=null&&(T.callback=m),d=du(l,T,w),d!==null&&(Bi(d,l,w),Tp(d,l,w))},enqueueReplaceState:function(l,d,m){l=l._reactInternals;var w=$i(),T=cu(w);T.tag=1,T.payload=d,m!=null&&(T.callback=m),d=du(l,T,w),d!==null&&(Bi(d,l,w),Tp(d,l,w))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var m=$i(),w=cu(m);w.tag=2,d!=null&&(w.callback=d),d=du(l,w,m),d!==null&&(Bi(d,l,m),Tp(d,l,m))}};function BT(l,d,m,w,T,P,oe){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(w,P,oe):d.prototype&&d.prototype.isPureReactComponent?!A(m,w)||!A(T,P):!0}function zT(l,d,m,w){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,w),d.state!==l&&S_.enqueueReplaceState(d,d.state,null)}function Lc(l,d){var m=d;if("ref"in d){m={};for(var w in d)w!=="ref"&&(m[w]=d[w])}if(l=l.defaultProps){m===d&&(m=f({},m));for(var T in l)m[T]===void 0&&(m[T]=l[T])}return m}var ly=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof Zr=="object"&&typeof Zr.emit=="function"){Zr.emit("uncaughtException",l);return}console.error(l)};function UT(l){ly(l)}function qT(l){console.error(l)}function HT(l){ly(l)}function uy(l,d){try{var m=l.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(w){setTimeout(function(){throw w})}}function VT(l,d,m){try{var w=l.onCaughtError;w(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function E_(l,d,m){return m=cu(m),m.tag=3,m.payload={element:null},m.callback=function(){uy(l,d)},m}function GT(l){return l=cu(l),l.tag=3,l}function WT(l,d,m,w){var T=m.type.getDerivedStateFromError;if(typeof T=="function"){var P=w.value;l.payload=function(){return T(P)},l.callback=function(){VT(d,m,w)}}var oe=m.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(l.callback=function(){VT(d,m,w),typeof T!="function"&&(wu===null?wu=new Set([this]):wu.add(this));var Ee=w.stack;this.componentDidCatch(w.value,{componentStack:Ee!==null?Ee:""})})}function MB(l,d,m,w,T){if(m.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(d=m.alternate,d!==null&&Sp(d,m,T,!0),m=oo.current,m!==null){switch(m.tag){case 13:return gs===null?K_():m.alternate===null&&Wr===0&&(Wr=3),m.flags&=-257,m.flags|=65536,m.lanes=T,w===Q1?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([w]):d.add(w),Y_(l,w,T)),!1;case 22:return m.flags|=65536,w===Q1?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([w])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([w]):m.add(w)),Y_(l,w,T)),!1}throw Error(r(435,m.tag))}return Y_(l,w,T),K_(),!1}if(er)return d=oo.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,w!==G1&&(l=Error(r(422),{cause:w}),xp(cn(l,m)))):(w!==G1&&(d=Error(r(423),{cause:w}),xp(cn(d,m))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,w=cn(w,m),T=E_(l.stateNode,w,T),n_(l,T),Wr!==4&&(Wr=2)),!1;var P=Error(r(520),{cause:w});if(P=cn(P,m),qp===null?qp=[P]:qp.push(P),Wr!==4&&(Wr=2),d===null)return!0;w=cn(w,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,l=T&-T,m.lanes|=l,l=E_(m.stateNode,w,l),n_(m,l),!1;case 1:if(d=m.type,P=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(wu===null||!wu.has(P))))return m.flags|=65536,T&=-T,m.lanes|=T,T=GT(T),WT(T,l,m,w),n_(m,T),!1}m=m.return}while(m!==null);return!1}var KT=Error(r(461)),xa=!1;function Ma(l,d,m,w){d.child=l===null?LT(d,null,m,w):uf(d,l.child,m,w)}function ZT(l,d,m,w,T){m=m.render;var P=d.ref;if("ref"in w){var oe={};for(var Ee in w)Ee!=="ref"&&(oe[Ee]=w[Ee])}else oe=w;return Mc(d),w=s_(l,d,m,oe,P,T),Ee=l_(),l!==null&&!xa?(u_(l,d,T),dl(l,d,T)):(er&&Ee&&H1(d),d.flags|=1,Ma(l,d,w,T),d.child)}function YT(l,d,m,w,T){if(l===null){var P=m.type;return typeof P=="function"&&!z1(P)&&P.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=P,XT(l,d,P,w,T)):(l=Ug(m.type,null,w,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(P=l.child,!O_(l,T)){var oe=P.memoizedProps;if(m=m.compare,m=m!==null?m:A,m(oe,w)&&l.ref===d.ref)return dl(l,d,T)}return d.flags|=1,l=al(P,w),l.ref=d.ref,l.return=d,d.child=l}function XT(l,d,m,w,T){if(l!==null){var P=l.memoizedProps;if(A(P,w)&&l.ref===d.ref)if(xa=!1,d.pendingProps=w=P,O_(l,T))(l.flags&131072)!==0&&(xa=!0);else return d.lanes=l.lanes,dl(l,d,T)}return C_(l,d,m,w,T)}function JT(l,d,m){var w=d.pendingProps,T=w.children,P=l!==null?l.memoizedState:null;if(w.mode==="hidden"){if((d.flags&128)!==0){if(w=P!==null?P.baseLanes|m:m,l!==null){for(T=d.child=l.child,P=0;T!==null;)P=P|T.lanes|T.childLanes,T=T.sibling;d.childLanes=P&~w}else d.childLanes=0,d.child=null;return QT(l,d,w,m)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Wg(d,P!==null?P.cachePool:null),P!==null?XA(d,P):a_(),$T(d);else return d.lanes=d.childLanes=536870912,QT(l,d,P!==null?P.baseLanes|m:m,m)}else P!==null?(Wg(d,P.cachePool),XA(d,P),pu(),d.memoizedState=null):(l!==null&&Wg(d,null),a_(),pu());return Ma(l,d,T,m),d.child}function QT(l,d,m,w){var T=J1();return T=T===null?null:{parent:fa._currentValue,pool:T},d.memoizedState={baseLanes:m,cachePool:T},l!==null&&Wg(d,null),a_(),$T(d),l!==null&&Sp(l,d,w,!0),null}function cy(l,d){var m=d.ref;if(m===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(l===null||l.ref!==m)&&(d.flags|=4194816)}}function C_(l,d,m,w,T){return Mc(d),m=s_(l,d,m,w,void 0,T),w=l_(),l!==null&&!xa?(u_(l,d,T),dl(l,d,T)):(er&&w&&H1(d),d.flags|=1,Ma(l,d,m,T),d.child)}function e3(l,d,m,w,T,P){return Mc(d),d.updateQueue=null,m=QA(d,w,m,T),JA(l),w=l_(),l!==null&&!xa?(u_(l,d,P),dl(l,d,P)):(er&&w&&H1(d),d.flags|=1,Ma(l,d,m,P),d.child)}function t3(l,d,m,w,T){if(Mc(d),d.stateNode===null){var P=ps,oe=m.contextType;typeof oe=="object"&&oe!==null&&(P=Ha(oe)),P=new m(w,P),d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=S_,d.stateNode=P,P._reactInternals=d,P=d.stateNode,P.props=w,P.state=d.memoizedState,P.refs={},e_(d),oe=m.contextType,P.context=typeof oe=="object"&&oe!==null?Ha(oe):ps,P.state=d.memoizedState,oe=m.getDerivedStateFromProps,typeof oe=="function"&&(x_(d,m,oe,w),P.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(oe=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),oe!==P.state&&S_.enqueueReplaceState(P,P.state,null),Np(d,w,P,T),Rp(),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308),w=!0}else if(l===null){P=d.stateNode;var Ee=d.memoizedProps,ze=Lc(m,Ee);P.props=ze;var ct=P.context,_t=m.contextType;oe=ps,typeof _t=="object"&&_t!==null&&(oe=Ha(_t));var kt=m.getDerivedStateFromProps;_t=typeof kt=="function"||typeof P.getSnapshotBeforeUpdate=="function",Ee=d.pendingProps!==Ee,_t||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(Ee||ct!==oe)&&zT(d,P,w,oe),uu=!1;var pt=d.memoizedState;P.state=pt,Np(d,w,P,T),Rp(),ct=d.memoizedState,Ee||pt!==ct||uu?(typeof kt=="function"&&(x_(d,m,kt,w),ct=d.memoizedState),(ze=uu||BT(d,m,ze,w,pt,ct,oe))?(_t||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(d.flags|=4194308)):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=ct),P.props=w,P.state=ct,P.context=oe,w=ze):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{P=d.stateNode,t_(l,d),oe=d.memoizedProps,_t=Lc(m,oe),P.props=_t,kt=d.pendingProps,pt=P.context,ct=m.contextType,ze=ps,typeof ct=="object"&&ct!==null&&(ze=Ha(ct)),Ee=m.getDerivedStateFromProps,(ct=typeof Ee=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(oe!==kt||pt!==ze)&&zT(d,P,w,ze),uu=!1,pt=d.memoizedState,P.state=pt,Np(d,w,P,T),Rp();var mt=d.memoizedState;oe!==kt||pt!==mt||uu||l!==null&&l.dependencies!==null&&Vg(l.dependencies)?(typeof Ee=="function"&&(x_(d,m,Ee,w),mt=d.memoizedState),(_t=uu||BT(d,m,_t,w,pt,mt,ze)||l!==null&&l.dependencies!==null&&Vg(l.dependencies))?(ct||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(w,mt,ze),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(w,mt,ze)),typeof P.componentDidUpdate=="function"&&(d.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof P.componentDidUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=mt),P.props=w,P.state=mt,P.context=ze,w=_t):(typeof P.componentDidUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),w=!1)}return P=w,cy(l,d),w=(d.flags&128)!==0,P||w?(P=d.stateNode,m=w&&typeof m.getDerivedStateFromError!="function"?null:P.render(),d.flags|=1,l!==null&&w?(d.child=uf(d,l.child,null,T),d.child=uf(d,null,m,T)):Ma(l,d,m,T),d.memoizedState=P.state,l=d.child):l=dl(l,d,T),l}function n3(l,d,m,w){return _p(),d.flags|=256,Ma(l,d,m,w),d.child}var k_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function A_(l){return{baseLanes:l,cachePool:qA()}}function T_(l,d,m){return l=l!==null?l.childLanes&~m:0,d&&(l|=so),l}function r3(l,d,m){var w=d.pendingProps,T=!1,P=(d.flags&128)!==0,oe;if((oe=P)||(oe=l!==null&&l.memoizedState===null?!1:(ha.current&2)!==0),oe&&(T=!0,d.flags&=-129),oe=(d.flags&32)!==0,d.flags&=-33,l===null){if(er){if(T?hu(d):pu(),er){var Ee=Gr,ze;if(ze=Ee){e:{for(ze=Ee,Ee=ms;ze.nodeType!==8;){if(!Ee){Ee=null;break e}if(ze=Oo(ze.nextSibling),ze===null){Ee=null;break e}}Ee=ze}Ee!==null?(d.memoizedState={dehydrated:Ee,treeContext:Nc!==null?{id:il,overflow:ol}:null,retryLane:536870912,hydrationErrors:null},ze=Mi(18,null,null,0),ze.stateNode=Ee,ze.return=d,d.child=ze,li=d,Gr=null,ze=!0):ze=!1}ze||Dc(d)}if(Ee=d.memoizedState,Ee!==null&&(Ee=Ee.dehydrated,Ee!==null))return dx(Ee)?d.lanes=32:d.lanes=536870912,null;cl(d)}return Ee=w.children,w=w.fallback,T?(pu(),T=d.mode,Ee=dy({mode:"hidden",children:Ee},T),w=Rc(w,T,m,null),Ee.return=d,w.return=d,Ee.sibling=w,d.child=Ee,T=d.child,T.memoizedState=A_(m),T.childLanes=T_(l,oe,m),d.memoizedState=k_,w):(hu(d),R_(d,Ee))}if(ze=l.memoizedState,ze!==null&&(Ee=ze.dehydrated,Ee!==null)){if(P)d.flags&256?(hu(d),d.flags&=-257,d=N_(l,d,m)):d.memoizedState!==null?(pu(),d.child=l.child,d.flags|=128,d=null):(pu(),T=w.fallback,Ee=d.mode,w=dy({mode:"visible",children:w.children},Ee),T=Rc(T,Ee,m,null),T.flags|=2,w.return=d,T.return=d,w.sibling=T,d.child=w,uf(d,l.child,null,m),w=d.child,w.memoizedState=A_(m),w.childLanes=T_(l,oe,m),d.memoizedState=k_,d=T);else if(hu(d),dx(Ee)){if(oe=Ee.nextSibling&&Ee.nextSibling.dataset,oe)var ct=oe.dgst;oe=ct,w=Error(r(419)),w.stack="",w.digest=oe,xp({value:w,source:null,stack:null}),d=N_(l,d,m)}else if(xa||Sp(l,d,m,!1),oe=(m&l.childLanes)!==0,xa||oe){if(oe=Ar,oe!==null&&(w=m&-m,w=(w&42)!==0?1:Ct(w),w=(w&(oe.suspendedLanes|m))!==0?0:w,w!==0&&w!==ze.retryLane))throw ze.retryLane=w,No(l,w),Bi(oe,l,w),KT;Ee.data==="$?"||K_(),d=N_(l,d,m)}else Ee.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=ze.treeContext,Gr=Oo(Ee.nextSibling),li=d,er=!0,Oc=null,ms=!1,l!==null&&(ao[io++]=il,ao[io++]=ol,ao[io++]=Nc,il=l.id,ol=l.overflow,Nc=d),d=R_(d,w.children),d.flags|=4096);return d}return T?(pu(),T=w.fallback,Ee=d.mode,ze=l.child,ct=ze.sibling,w=al(ze,{mode:"hidden",children:w.children}),w.subtreeFlags=ze.subtreeFlags&65011712,ct!==null?T=al(ct,T):(T=Rc(T,Ee,m,null),T.flags|=2),T.return=d,w.return=d,w.sibling=T,d.child=w,w=T,T=d.child,Ee=l.child.memoizedState,Ee===null?Ee=A_(m):(ze=Ee.cachePool,ze!==null?(ct=fa._currentValue,ze=ze.parent!==ct?{parent:ct,pool:ct}:ze):ze=qA(),Ee={baseLanes:Ee.baseLanes|m,cachePool:ze}),T.memoizedState=Ee,T.childLanes=T_(l,oe,m),d.memoizedState=k_,w):(hu(d),m=l.child,l=m.sibling,m=al(m,{mode:"visible",children:w.children}),m.return=d,m.sibling=null,l!==null&&(oe=d.deletions,oe===null?(d.deletions=[l],d.flags|=16):oe.push(l)),d.child=m,d.memoizedState=null,m)}function R_(l,d){return d=dy({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function dy(l,d){return l=Mi(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function N_(l,d,m){return uf(d,l.child,null,m),l=R_(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function a3(l,d,m){l.lanes|=d;var w=l.alternate;w!==null&&(w.lanes|=d),K1(l.return,d,m)}function I_(l,d,m,w,T){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:T}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=w,P.tail=m,P.tailMode=T)}function i3(l,d,m){var w=d.pendingProps,T=w.revealOrder,P=w.tail;if(Ma(l,d,w.children,m),w=ha.current,(w&2)!==0)w=w&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&a3(l,m,d);else if(l.tag===19)a3(l,m,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}w&=1}switch(re(ha,w),T){case"forwards":for(m=d.child,T=null;m!==null;)l=m.alternate,l!==null&&sy(l)===null&&(T=m),m=m.sibling;m=T,m===null?(T=d.child,d.child=null):(T=m.sibling,m.sibling=null),I_(d,!1,T,m,P);break;case"backwards":for(m=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&sy(l)===null){d.child=T;break}l=T.sibling,T.sibling=m,m=T,T=l}I_(d,!0,m,null,P);break;case"together":I_(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function dl(l,d,m){if(l!==null&&(d.dependencies=l.dependencies),vu|=d.lanes,(m&d.childLanes)===0)if(l!==null){if(Sp(l,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,m=al(l,l.pendingProps),d.child=m,m.return=d;l.sibling!==null;)l=l.sibling,m=m.sibling=al(l,l.pendingProps),m.return=d;m.sibling=null}return d.child}function O_(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Vg(l)))}function PB(l,d,m){switch(d.tag){case 3:Ae(d,d.stateNode.containerInfo),lu(d,fa,l.memoizedState.cache),_p();break;case 27:case 5:qe(d);break;case 4:Ae(d,d.stateNode.containerInfo);break;case 10:lu(d,d.type,d.memoizedProps.value);break;case 13:var w=d.memoizedState;if(w!==null)return w.dehydrated!==null?(hu(d),d.flags|=128,null):(m&d.child.childLanes)!==0?r3(l,d,m):(hu(d),l=dl(l,d,m),l!==null?l.sibling:null);hu(d);break;case 19:var T=(l.flags&128)!==0;if(w=(m&d.childLanes)!==0,w||(Sp(l,d,m,!1),w=(m&d.childLanes)!==0),T){if(w)return i3(l,d,m);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),re(ha,ha.current),w)break;return null;case 22:case 23:return d.lanes=0,JT(l,d,m);case 24:lu(d,fa,l.memoizedState.cache)}return dl(l,d,m)}function o3(l,d,m){if(l!==null)if(l.memoizedProps!==d.pendingProps)xa=!0;else{if(!O_(l,m)&&(d.flags&128)===0)return xa=!1,PB(l,d,m);xa=(l.flags&131072)!==0}else xa=!1,er&&(d.flags&1048576)!==0&&PA(d,Hg,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var w=d.elementType,T=w._init;if(w=T(w._payload),d.type=w,typeof w=="function")z1(w)?(l=Lc(w,l),d.tag=1,d=t3(null,d,w,l,m)):(d.tag=0,d=C_(null,d,w,l,m));else{if(w!=null){if(T=w.$$typeof,T===C){d.tag=11,d=ZT(null,d,w,l,m);break e}else if(T===O){d.tag=14,d=YT(null,d,w,l,m);break e}}throw d=L(w)||w,Error(r(306,d,""))}}return d;case 0:return C_(l,d,d.type,d.pendingProps,m);case 1:return w=d.type,T=Lc(w,d.pendingProps),t3(l,d,w,T,m);case 3:e:{if(Ae(d,d.stateNode.containerInfo),l===null)throw Error(r(387));w=d.pendingProps;var P=d.memoizedState;T=P.element,t_(l,d),Np(d,w,null,m);var oe=d.memoizedState;if(w=oe.cache,lu(d,fa,w),w!==P.cache&&Z1(d,[fa],m,!0),Rp(),w=oe.element,P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:oe.cache},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){d=n3(l,d,w,m);break e}else if(w!==T){T=cn(Error(r(424)),d),xp(T),d=n3(l,d,w,m);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Gr=Oo(l.firstChild),li=d,er=!0,Oc=null,ms=!0,m=LT(d,null,w,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(_p(),w===T){d=dl(l,d,m);break e}Ma(l,d,w,m)}d=d.child}return d;case 26:return cy(l,d),l===null?(m=cR(d.type,null,d.pendingProps,null))?d.memoizedState=m:er||(m=d.type,l=d.pendingProps,w=Cy(Me.current).createElement(m),w[pe]=d,w[fe]=l,Fa(w,m,l),Mn(w),d.stateNode=w):d.memoizedState=cR(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return qe(d),l===null&&er&&(w=d.stateNode=sR(d.type,d.pendingProps,Me.current),li=d,ms=!0,T=Gr,Su(d.type)?(fx=T,Gr=Oo(w.firstChild)):Gr=T),Ma(l,d,d.pendingProps.children,m),cy(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&er&&((T=w=Gr)&&(w=c7(w,d.type,d.pendingProps,ms),w!==null?(d.stateNode=w,li=d,Gr=Oo(w.firstChild),ms=!1,T=!0):T=!1),T||Dc(d)),qe(d),T=d.type,P=d.pendingProps,oe=l!==null?l.memoizedProps:null,w=P.children,lx(T,P)?w=null:oe!==null&&lx(T,oe)&&(d.flags|=32),d.memoizedState!==null&&(T=s_(l,d,TB,null,null,m),Jp._currentValue=T),cy(l,d),Ma(l,d,w,m),d.child;case 6:return l===null&&er&&((l=m=Gr)&&(m=d7(m,d.pendingProps,ms),m!==null?(d.stateNode=m,li=d,Gr=null,l=!0):l=!1),l||Dc(d)),null;case 13:return r3(l,d,m);case 4:return Ae(d,d.stateNode.containerInfo),w=d.pendingProps,l===null?d.child=uf(d,null,w,m):Ma(l,d,w,m),d.child;case 11:return ZT(l,d,d.type,d.pendingProps,m);case 7:return Ma(l,d,d.pendingProps,m),d.child;case 8:return Ma(l,d,d.pendingProps.children,m),d.child;case 12:return Ma(l,d,d.pendingProps.children,m),d.child;case 10:return w=d.pendingProps,lu(d,d.type,w.value),Ma(l,d,w.children,m),d.child;case 9:return T=d.type._context,w=d.pendingProps.children,Mc(d),T=Ha(T),w=w(T),d.flags|=1,Ma(l,d,w,m),d.child;case 14:return YT(l,d,d.type,d.pendingProps,m);case 15:return XT(l,d,d.type,d.pendingProps,m);case 19:return i3(l,d,m);case 31:return w=d.pendingProps,m=d.mode,w={mode:w.mode,children:w.children},l===null?(m=dy(w,m),m.ref=d.ref,d.child=m,m.return=d,d=m):(m=al(l.child,w),m.ref=d.ref,d.child=m,m.return=d,d=m),d;case 22:return JT(l,d,m);case 24:return Mc(d),w=Ha(fa),l===null?(T=J1(),T===null&&(T=Ar,P=Y1(),T.pooledCache=P,P.refCount++,P!==null&&(T.pooledCacheLanes|=m),T=P),d.memoizedState={parent:w,cache:T},e_(d),lu(d,fa,T)):((l.lanes&m)!==0&&(t_(l,d),Np(d,null,null,m),Rp()),T=l.memoizedState,P=d.memoizedState,T.parent!==w?(T={parent:w,cache:w},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),lu(d,fa,w)):(w=P.cache,lu(d,fa,w),w!==T.cache&&Z1(d,[fa],m,!0))),Ma(l,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function fl(l){l.flags|=4}function s3(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!mR(d)){if(d=oo.current,d!==null&&((Kn&4194048)===Kn?gs!==null:(Kn&62914560)!==Kn&&(Kn&536870912)===0||d!==gs))throw Ap=Q1,HA;l.flags|=8192}}function fy(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?M():536870912,l.lanes|=d,hf|=d)}function Fp(l,d){if(!er)switch(l.tailMode){case"hidden":d=l.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:w.sibling=null}}function qr(l){var d=l.alternate!==null&&l.alternate.child===l.child,m=0,w=0;if(d)for(var T=l.child;T!==null;)m|=T.lanes|T.childLanes,w|=T.subtreeFlags&65011712,w|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)m|=T.lanes|T.childLanes,w|=T.subtreeFlags,w|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=w,l.childLanes=m,d}function FB(l,d,m){var w=d.pendingProps;switch(V1(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(d),null;case 1:return qr(d),null;case 3:return m=d.stateNode,w=null,l!==null&&(w=l.memoizedState.cache),d.memoizedState.cache!==w&&(d.flags|=2048),ll(fa),Te(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(wp(d)?fl(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,$A())),qr(d),null;case 26:return m=d.memoizedState,l===null?(fl(d),m!==null?(qr(d),s3(d,m)):(qr(d),d.flags&=-16777217)):m?m!==l.memoizedState?(fl(d),qr(d),s3(d,m)):(qr(d),d.flags&=-16777217):(l.memoizedProps!==w&&fl(d),qr(d),d.flags&=-16777217),null;case 27:it(d),m=Me.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==w&&fl(d);else{if(!w){if(d.stateNode===null)throw Error(r(166));return qr(d),null}l=be.current,wp(d)?FA(d):(l=sR(T,w,m),d.stateNode=l,fl(d))}return qr(d),null;case 5:if(it(d),m=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==w&&fl(d);else{if(!w){if(d.stateNode===null)throw Error(r(166));return qr(d),null}if(l=be.current,wp(d))FA(d);else{switch(T=Cy(Me.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof w.is=="string"?T.createElement("select",{is:w.is}):T.createElement("select"),w.multiple?l.multiple=!0:w.size&&(l.size=w.size);break;default:l=typeof w.is=="string"?T.createElement(m,{is:w.is}):T.createElement(m)}}l[pe]=d,l[fe]=w;e:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break e;for(;T.sibling===null;){if(T.return===null||T.return===d)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;e:switch(Fa(l,m,w),m){case"button":case"input":case"select":case"textarea":l=!!w.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&fl(d)}}return qr(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==w&&fl(d);else{if(typeof w!="string"&&d.stateNode===null)throw Error(r(166));if(l=Me.current,wp(d)){if(l=d.stateNode,m=d.memoizedProps,w=null,T=li,T!==null)switch(T.tag){case 27:case 5:w=T.memoizedProps}l[pe]=d,l=!!(l.nodeValue===m||w!==null&&w.suppressHydrationWarning===!0||eR(l.nodeValue,m)),l||Dc(d)}else l=Cy(l).createTextNode(w),l[pe]=d,d.stateNode=l}return qr(d),null;case 13:if(w=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=wp(d),w!==null&&w.dehydrated!==null){if(l===null){if(!T)throw Error(r(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[pe]=d}else _p(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;qr(d),T=!1}else T=$A(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(cl(d),d):(cl(d),null)}if(cl(d),(d.flags&128)!==0)return d.lanes=m,d;if(m=w!==null,l=l!==null&&l.memoizedState!==null,m){w=d.child,T=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(T=w.alternate.memoizedState.cachePool.pool);var P=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(P=w.memoizedState.cachePool.pool),P!==T&&(w.flags|=2048)}return m!==l&&m&&(d.child.flags|=8192),fy(d,d.updateQueue),qr(d),null;case 4:return Te(),l===null&&rx(d.stateNode.containerInfo),qr(d),null;case 10:return ll(d.type),qr(d),null;case 19:if(Y(ha),T=d.memoizedState,T===null)return qr(d),null;if(w=(d.flags&128)!==0,P=T.rendering,P===null)if(w)Fp(T,!1);else{if(Wr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(P=sy(l),P!==null){for(d.flags|=128,Fp(T,!1),l=P.updateQueue,d.updateQueue=l,fy(d,l),d.subtreeFlags=0,l=m,m=d.child;m!==null;)MA(m,l),m=m.sibling;return re(ha,ha.current&1|2),d.child}l=l.sibling}T.tail!==null&&ce()>my&&(d.flags|=128,w=!0,Fp(T,!1),d.lanes=4194304)}else{if(!w)if(l=sy(P),l!==null){if(d.flags|=128,w=!0,l=l.updateQueue,d.updateQueue=l,fy(d,l),Fp(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!er)return qr(d),null}else 2*ce()-T.renderingStartTime>my&&m!==536870912&&(d.flags|=128,w=!0,Fp(T,!1),d.lanes=4194304);T.isBackwards?(P.sibling=d.child,d.child=P):(l=T.last,l!==null?l.sibling=P:d.child=P,T.last=P)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=ce(),d.sibling=null,l=ha.current,re(ha,w?l&1|2:l&1),d):(qr(d),null);case 22:case 23:return cl(d),i_(),w=d.memoizedState!==null,l!==null?l.memoizedState!==null!==w&&(d.flags|=8192):w&&(d.flags|=8192),w?(m&536870912)!==0&&(d.flags&128)===0&&(qr(d),d.subtreeFlags&6&&(d.flags|=8192)):qr(d),m=d.updateQueue,m!==null&&fy(d,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==m&&(d.flags|=2048),l!==null&&Y(Pc),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),ll(fa),qr(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function LB(l,d){switch(V1(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return ll(fa),Te(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return it(d),null;case 13:if(cl(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));_p()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Y(ha),null;case 4:return Te(),null;case 10:return ll(d.type),null;case 22:case 23:return cl(d),i_(),l!==null&&Y(Pc),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return ll(fa),null;case 25:return null;default:return null}}function l3(l,d){switch(V1(d),d.tag){case 3:ll(fa),Te();break;case 26:case 27:case 5:it(d);break;case 4:Te();break;case 13:cl(d);break;case 19:Y(ha);break;case 10:ll(d.type);break;case 22:case 23:cl(d),i_(),l!==null&&Y(Pc);break;case 24:ll(fa)}}function Lp(l,d){try{var m=d.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var T=w.next;m=T;do{if((m.tag&l)===l){w=void 0;var P=m.create,oe=m.inst;w=P(),oe.destroy=w}m=m.next}while(m!==T)}}catch(Ee){_r(d,d.return,Ee)}}function mu(l,d,m){try{var w=d.updateQueue,T=w!==null?w.lastEffect:null;if(T!==null){var P=T.next;w=P;do{if((w.tag&l)===l){var oe=w.inst,Ee=oe.destroy;if(Ee!==void 0){oe.destroy=void 0,T=d;var ze=m,ct=Ee;try{ct()}catch(_t){_r(T,ze,_t)}}}w=w.next}while(w!==P)}}catch(_t){_r(d,d.return,_t)}}function u3(l){var d=l.updateQueue;if(d!==null){var m=l.stateNode;try{YA(d,m)}catch(w){_r(l,l.return,w)}}}function c3(l,d,m){m.props=Lc(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(w){_r(l,d,w)}}function $p(l,d){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var w=l.stateNode;break;case 30:w=l.stateNode;break;default:w=l.stateNode}typeof m=="function"?l.refCleanup=m(w):m.current=w}}catch(T){_r(l,d,T)}}function ys(l,d){var m=l.ref,w=l.refCleanup;if(m!==null)if(typeof w=="function")try{w()}catch(T){_r(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(T){_r(l,d,T)}else m.current=null}function d3(l){var d=l.type,m=l.memoizedProps,w=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&w.focus();break e;case"img":m.src?w.src=m.src:m.srcSet&&(w.srcset=m.srcSet)}}catch(T){_r(l,l.return,T)}}function D_(l,d,m){try{var w=l.stateNode;i7(w,l.type,m,d),w[fe]=d}catch(T){_r(l,l.return,T)}}function f3(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Su(l.type)||l.tag===4}function j_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||f3(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Su(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function M_(l,d,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(l),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=Ey));else if(w!==4&&(w===27&&Su(l.type)&&(m=l.stateNode,d=null),l=l.child,l!==null))for(M_(l,d,m),l=l.sibling;l!==null;)M_(l,d,m),l=l.sibling}function hy(l,d,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,d?m.insertBefore(l,d):m.appendChild(l);else if(w!==4&&(w===27&&Su(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(hy(l,d,m),l=l.sibling;l!==null;)hy(l,d,m),l=l.sibling}function h3(l){var d=l.stateNode,m=l.memoizedProps;try{for(var w=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);Fa(d,w,m),d[pe]=l,d[fe]=m}catch(P){_r(l,l.return,P)}}var hl=!1,ea=!1,P_=!1,p3=typeof WeakSet=="function"?WeakSet:Set,Sa=null;function $B(l,d){if(l=l.containerInfo,ox=Iy,l=ue(l),_e(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var T=w.anchorOffset,P=w.focusNode;w=w.focusOffset;try{m.nodeType,P.nodeType}catch{m=null;break e}var oe=0,Ee=-1,ze=-1,ct=0,_t=0,kt=l,pt=null;t:for(;;){for(var mt;kt!==m||T!==0&&kt.nodeType!==3||(Ee=oe+T),kt!==P||w!==0&&kt.nodeType!==3||(ze=oe+w),kt.nodeType===3&&(oe+=kt.nodeValue.length),(mt=kt.firstChild)!==null;)pt=kt,kt=mt;for(;;){if(kt===l)break t;if(pt===m&&++ct===T&&(Ee=oe),pt===P&&++_t===w&&(ze=oe),(mt=kt.nextSibling)!==null)break;kt=pt,pt=kt.parentNode}kt=mt}m=Ee===-1||ze===-1?null:{start:Ee,end:ze}}else m=null}m=m||{start:0,end:0}}else m=null;for(sx={focusedElem:l,selectionRange:m},Iy=!1,Sa=d;Sa!==null;)if(d=Sa,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,Sa=l;else for(;Sa!==null;){switch(d=Sa,P=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&P!==null){l=void 0,m=d,T=P.memoizedProps,P=P.memoizedState,w=m.stateNode;try{var bn=Lc(m.type,T,m.elementType===m.type);l=w.getSnapshotBeforeUpdate(bn,P),w.__reactInternalSnapshotBeforeUpdate=l}catch(fn){_r(m,m.return,fn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,m=l.nodeType,m===9)cx(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":cx(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Sa=l;break}Sa=d.return}}function m3(l,d,m){var w=m.flags;switch(m.tag){case 0:case 11:case 15:gu(l,m),w&4&&Lp(5,m);break;case 1:if(gu(l,m),w&4)if(l=m.stateNode,d===null)try{l.componentDidMount()}catch(oe){_r(m,m.return,oe)}else{var T=Lc(m.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(oe){_r(m,m.return,oe)}}w&64&&u3(m),w&512&&$p(m,m.return);break;case 3:if(gu(l,m),w&64&&(l=m.updateQueue,l!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{YA(l,d)}catch(oe){_r(m,m.return,oe)}}break;case 27:d===null&&w&4&&h3(m);case 26:case 5:gu(l,m),d===null&&w&4&&d3(m),w&512&&$p(m,m.return);break;case 12:gu(l,m);break;case 13:gu(l,m),w&4&&b3(l,m),w&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=KB.bind(null,m),f7(l,m))));break;case 22:if(w=m.memoizedState!==null||hl,!w){d=d!==null&&d.memoizedState!==null||ea,T=hl;var P=ea;hl=w,(ea=d)&&!P?yu(l,m,(m.subtreeFlags&8772)!==0):gu(l,m),hl=T,ea=P}break;case 30:break;default:gu(l,m)}}function g3(l){var d=l.alternate;d!==null&&(l.alternate=null,g3(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Xt(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Fr=null,vi=!1;function pl(l,d,m){for(m=m.child;m!==null;)y3(l,d,m),m=m.sibling}function y3(l,d,m){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Et,m)}catch{}switch(m.tag){case 26:ea||ys(m,d),pl(l,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:ea||ys(m,d);var w=Fr,T=vi;Su(m.type)&&(Fr=m.stateNode,vi=!1),pl(l,d,m),Kp(m.stateNode),Fr=w,vi=T;break;case 5:ea||ys(m,d);case 6:if(w=Fr,T=vi,Fr=null,pl(l,d,m),Fr=w,vi=T,Fr!==null)if(vi)try{(Fr.nodeType===9?Fr.body:Fr.nodeName==="HTML"?Fr.ownerDocument.body:Fr).removeChild(m.stateNode)}catch(P){_r(m,d,P)}else try{Fr.removeChild(m.stateNode)}catch(P){_r(m,d,P)}break;case 18:Fr!==null&&(vi?(l=Fr,iR(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),nm(l)):iR(Fr,m.stateNode));break;case 4:w=Fr,T=vi,Fr=m.stateNode.containerInfo,vi=!0,pl(l,d,m),Fr=w,vi=T;break;case 0:case 11:case 14:case 15:ea||mu(2,m,d),ea||mu(4,m,d),pl(l,d,m);break;case 1:ea||(ys(m,d),w=m.stateNode,typeof w.componentWillUnmount=="function"&&c3(m,d,w)),pl(l,d,m);break;case 21:pl(l,d,m);break;case 22:ea=(w=ea)||m.memoizedState!==null,pl(l,d,m),ea=w;break;default:pl(l,d,m)}}function b3(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{nm(l)}catch(m){_r(d,d.return,m)}}function BB(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new p3),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new p3),d;default:throw Error(r(435,l.tag))}}function F_(l,d){var m=BB(l);d.forEach(function(w){var T=ZB.bind(null,l,w);m.has(w)||(m.add(w),w.then(T,T))})}function Pi(l,d){var m=d.deletions;if(m!==null)for(var w=0;w<m.length;w++){var T=m[w],P=l,oe=d,Ee=oe;e:for(;Ee!==null;){switch(Ee.tag){case 27:if(Su(Ee.type)){Fr=Ee.stateNode,vi=!1;break e}break;case 5:Fr=Ee.stateNode,vi=!1;break e;case 3:case 4:Fr=Ee.stateNode.containerInfo,vi=!0;break e}Ee=Ee.return}if(Fr===null)throw Error(r(160));y3(P,oe,T),Fr=null,vi=!1,P=T.alternate,P!==null&&(P.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)v3(d,l),d=d.sibling}var Io=null;function v3(l,d){var m=l.alternate,w=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Pi(d,l),Fi(l),w&4&&(mu(3,l,l.return),Lp(3,l),mu(5,l,l.return));break;case 1:Pi(d,l),Fi(l),w&512&&(ea||m===null||ys(m,m.return)),w&64&&hl&&(l=l.updateQueue,l!==null&&(w=l.callbacks,w!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?w:m.concat(w))));break;case 26:var T=Io;if(Pi(d,l),Fi(l),w&512&&(ea||m===null||ys(m,m.return)),w&4){var P=m!==null?m.memoizedState:null;if(w=l.memoizedState,m===null)if(w===null)if(l.stateNode===null){e:{w=l.type,m=l.memoizedProps,T=T.ownerDocument||T;t:switch(w){case"title":P=T.getElementsByTagName("title")[0],(!P||P[Gt]||P[pe]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=T.createElement(w),T.head.insertBefore(P,T.querySelector("head > title"))),Fa(P,w,m),P[pe]=l,Mn(P),w=P;break e;case"link":var oe=hR("link","href",T).get(w+(m.href||""));if(oe){for(var Ee=0;Ee<oe.length;Ee++)if(P=oe[Ee],P.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&P.getAttribute("rel")===(m.rel==null?null:m.rel)&&P.getAttribute("title")===(m.title==null?null:m.title)&&P.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){oe.splice(Ee,1);break t}}P=T.createElement(w),Fa(P,w,m),T.head.appendChild(P);break;case"meta":if(oe=hR("meta","content",T).get(w+(m.content||""))){for(Ee=0;Ee<oe.length;Ee++)if(P=oe[Ee],P.getAttribute("content")===(m.content==null?null:""+m.content)&&P.getAttribute("name")===(m.name==null?null:m.name)&&P.getAttribute("property")===(m.property==null?null:m.property)&&P.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&P.getAttribute("charset")===(m.charSet==null?null:m.charSet)){oe.splice(Ee,1);break t}}P=T.createElement(w),Fa(P,w,m),T.head.appendChild(P);break;default:throw Error(r(468,w))}P[pe]=l,Mn(P),w=P}l.stateNode=w}else pR(T,l.type,l.stateNode);else l.stateNode=fR(T,w,l.memoizedProps);else P!==w?(P===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):P.count--,w===null?pR(T,l.type,l.stateNode):fR(T,w,l.memoizedProps)):w===null&&l.stateNode!==null&&D_(l,l.memoizedProps,m.memoizedProps)}break;case 27:Pi(d,l),Fi(l),w&512&&(ea||m===null||ys(m,m.return)),m!==null&&w&4&&D_(l,l.memoizedProps,m.memoizedProps);break;case 5:if(Pi(d,l),Fi(l),w&512&&(ea||m===null||ys(m,m.return)),l.flags&32){T=l.stateNode;try{Jl(T,"")}catch(mt){_r(l,l.return,mt)}}w&4&&l.stateNode!=null&&(T=l.memoizedProps,D_(l,T,m!==null?m.memoizedProps:T)),w&1024&&(P_=!0);break;case 6:if(Pi(d,l),Fi(l),w&4){if(l.stateNode===null)throw Error(r(162));w=l.memoizedProps,m=l.stateNode;try{m.nodeValue=w}catch(mt){_r(l,l.return,mt)}}break;case 3:if(Ty=null,T=Io,Io=ky(d.containerInfo),Pi(d,l),Io=T,Fi(l),w&4&&m!==null&&m.memoizedState.isDehydrated)try{nm(d.containerInfo)}catch(mt){_r(l,l.return,mt)}P_&&(P_=!1,w3(l));break;case 4:w=Io,Io=ky(l.stateNode.containerInfo),Pi(d,l),Fi(l),Io=w;break;case 12:Pi(d,l),Fi(l);break;case 13:Pi(d,l),Fi(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(q_=ce()),w&4&&(w=l.updateQueue,w!==null&&(l.updateQueue=null,F_(l,w)));break;case 22:T=l.memoizedState!==null;var ze=m!==null&&m.memoizedState!==null,ct=hl,_t=ea;if(hl=ct||T,ea=_t||ze,Pi(d,l),ea=_t,hl=ct,Fi(l),w&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(m===null||ze||hl||ea||$c(l)),m=null,d=l;;){if(d.tag===5||d.tag===26){if(m===null){ze=m=d;try{if(P=ze.stateNode,T)oe=P.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{Ee=ze.stateNode;var kt=ze.memoizedProps.style,pt=kt!=null&&kt.hasOwnProperty("display")?kt.display:null;Ee.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(mt){_r(ze,ze.return,mt)}}}else if(d.tag===6){if(m===null){ze=d;try{ze.stateNode.nodeValue=T?"":ze.memoizedProps}catch(mt){_r(ze,ze.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}w&4&&(w=l.updateQueue,w!==null&&(m=w.retryQueue,m!==null&&(w.retryQueue=null,F_(l,m))));break;case 19:Pi(d,l),Fi(l),w&4&&(w=l.updateQueue,w!==null&&(l.updateQueue=null,F_(l,w)));break;case 30:break;case 21:break;default:Pi(d,l),Fi(l)}}function Fi(l){var d=l.flags;if(d&2){try{for(var m,w=l.return;w!==null;){if(f3(w)){m=w;break}w=w.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var T=m.stateNode,P=j_(l);hy(l,P,T);break;case 5:var oe=m.stateNode;m.flags&32&&(Jl(oe,""),m.flags&=-33);var Ee=j_(l);hy(l,Ee,oe);break;case 3:case 4:var ze=m.stateNode.containerInfo,ct=j_(l);M_(l,ct,ze);break;default:throw Error(r(161))}}catch(_t){_r(l,l.return,_t)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function w3(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;w3(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function gu(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)m3(l,d.alternate,d),d=d.sibling}function $c(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:mu(4,d,d.return),$c(d);break;case 1:ys(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&c3(d,d.return,m),$c(d);break;case 27:Kp(d.stateNode);case 26:case 5:ys(d,d.return),$c(d);break;case 22:d.memoizedState===null&&$c(d);break;case 30:$c(d);break;default:$c(d)}l=l.sibling}}function yu(l,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var w=d.alternate,T=l,P=d,oe=P.flags;switch(P.tag){case 0:case 11:case 15:yu(T,P,m),Lp(4,P);break;case 1:if(yu(T,P,m),w=P,T=w.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ct){_r(w,w.return,ct)}if(w=P,T=w.updateQueue,T!==null){var Ee=w.stateNode;try{var ze=T.shared.hiddenCallbacks;if(ze!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ze.length;T++)ZA(ze[T],Ee)}catch(ct){_r(w,w.return,ct)}}m&&oe&64&&u3(P),$p(P,P.return);break;case 27:h3(P);case 26:case 5:yu(T,P,m),m&&w===null&&oe&4&&d3(P),$p(P,P.return);break;case 12:yu(T,P,m);break;case 13:yu(T,P,m),m&&oe&4&&b3(T,P);break;case 22:P.memoizedState===null&&yu(T,P,m),$p(P,P.return);break;case 30:break;default:yu(T,P,m)}d=d.sibling}}function L_(l,d){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&Ep(m))}function $_(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Ep(l))}function bs(l,d,m,w){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)_3(l,d,m,w),d=d.sibling}function _3(l,d,m,w){var T=d.flags;switch(d.tag){case 0:case 11:case 15:bs(l,d,m,w),T&2048&&Lp(9,d);break;case 1:bs(l,d,m,w);break;case 3:bs(l,d,m,w),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Ep(l)));break;case 12:if(T&2048){bs(l,d,m,w),l=d.stateNode;try{var P=d.memoizedProps,oe=P.id,Ee=P.onPostCommit;typeof Ee=="function"&&Ee(oe,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ze){_r(d,d.return,ze)}}else bs(l,d,m,w);break;case 13:bs(l,d,m,w);break;case 23:break;case 22:P=d.stateNode,oe=d.alternate,d.memoizedState!==null?P._visibility&2?bs(l,d,m,w):Bp(l,d):P._visibility&2?bs(l,d,m,w):(P._visibility|=2,cf(l,d,m,w,(d.subtreeFlags&10256)!==0)),T&2048&&L_(oe,d);break;case 24:bs(l,d,m,w),T&2048&&$_(d.alternate,d);break;default:bs(l,d,m,w)}}function cf(l,d,m,w,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var P=l,oe=d,Ee=m,ze=w,ct=oe.flags;switch(oe.tag){case 0:case 11:case 15:cf(P,oe,Ee,ze,T),Lp(8,oe);break;case 23:break;case 22:var _t=oe.stateNode;oe.memoizedState!==null?_t._visibility&2?cf(P,oe,Ee,ze,T):Bp(P,oe):(_t._visibility|=2,cf(P,oe,Ee,ze,T)),T&&ct&2048&&L_(oe.alternate,oe);break;case 24:cf(P,oe,Ee,ze,T),T&&ct&2048&&$_(oe.alternate,oe);break;default:cf(P,oe,Ee,ze,T)}d=d.sibling}}function Bp(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=l,w=d,T=w.flags;switch(w.tag){case 22:Bp(m,w),T&2048&&L_(w.alternate,w);break;case 24:Bp(m,w),T&2048&&$_(w.alternate,w);break;default:Bp(m,w)}d=d.sibling}}var zp=8192;function df(l){if(l.subtreeFlags&zp)for(l=l.child;l!==null;)x3(l),l=l.sibling}function x3(l){switch(l.tag){case 26:df(l),l.flags&zp&&l.memoizedState!==null&&C7(Io,l.memoizedState,l.memoizedProps);break;case 5:df(l);break;case 3:case 4:var d=Io;Io=ky(l.stateNode.containerInfo),df(l),Io=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=zp,zp=16777216,df(l),zp=d):df(l));break;default:df(l)}}function S3(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Up(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var w=d[m];Sa=w,C3(w,l)}S3(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)E3(l),l=l.sibling}function E3(l){switch(l.tag){case 0:case 11:case 15:Up(l),l.flags&2048&&mu(9,l,l.return);break;case 3:Up(l);break;case 12:Up(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,py(l)):Up(l);break;default:Up(l)}}function py(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var w=d[m];Sa=w,C3(w,l)}S3(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:mu(8,d,d.return),py(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,py(d));break;default:py(d)}l=l.sibling}}function C3(l,d){for(;Sa!==null;){var m=Sa;switch(m.tag){case 0:case 11:case 15:mu(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var w=m.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Ep(m.memoizedState.cache)}if(w=m.child,w!==null)w.return=m,Sa=w;else e:for(m=l;Sa!==null;){w=Sa;var T=w.sibling,P=w.return;if(g3(w),w===m){Sa=null;break e}if(T!==null){T.return=P,Sa=T;break e}Sa=P}}}var zB={getCacheForType:function(l){var d=Ha(fa),m=d.data.get(l);return m===void 0&&(m=l(),d.data.set(l,m)),m}},UB=typeof WeakMap=="function"?WeakMap:Map,or=0,Ar=null,qn=null,Kn=0,sr=0,Li=null,bu=!1,ff=!1,B_=!1,ml=0,Wr=0,vu=0,Bc=0,z_=0,so=0,hf=0,qp=null,wi=null,U_=!1,q_=0,my=1/0,gy=null,wu=null,Pa=0,_u=null,pf=null,mf=0,H_=0,V_=null,k3=null,Hp=0,G_=null;function $i(){if((or&2)!==0&&Kn!==0)return Kn&-Kn;if(ae.T!==null){var l=tf;return l!==0?l:Q_()}return q()}function A3(){so===0&&(so=(Kn&536870912)===0||er?yt():536870912);var l=oo.current;return l!==null&&(l.flags|=32),so}function Bi(l,d,m){(l===Ar&&(sr===2||sr===9)||l.cancelPendingCommit!==null)&&(gf(l,0),xu(l,Kn,so,!1)),et(l,m),((or&2)===0||l!==Ar)&&(l===Ar&&((or&2)===0&&(Bc|=m),Wr===4&&xu(l,Kn,so,!1)),vs(l))}function T3(l,d,m){if((or&6)!==0)throw Error(r(327));var w=!m&&(d&124)===0&&(d&l.expiredLanes)===0||le(l,d),T=w?VB(l,d):Z_(l,d,!0),P=w;do{if(T===0){ff&&!w&&xu(l,d,0,!1);break}else{if(m=l.current.alternate,P&&!qB(m)){T=Z_(l,d,!1),P=!1;continue}if(T===2){if(P=d,l.errorRecoveryDisabledLanes&P)var oe=0;else oe=l.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){d=oe;e:{var Ee=l;T=qp;var ze=Ee.current.memoizedState.isDehydrated;if(ze&&(gf(Ee,oe).flags|=256),oe=Z_(Ee,oe,!1),oe!==2){if(B_&&!ze){Ee.errorRecoveryDisabledLanes|=P,Bc|=P,T=4;break e}P=wi,wi=T,P!==null&&(wi===null?wi=P:wi.push.apply(wi,P))}T=oe}if(P=!1,T!==2)continue}}if(T===1){gf(l,0),xu(l,d,0,!0);break}e:{switch(w=l,P=T,P){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:xu(w,d,so,!bu);break e;case 2:wi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(T=q_+300-ce(),10<T)){if(xu(w,d,so,!bu),ke(w,0,!0)!==0)break e;w.timeoutHandle=rR(R3.bind(null,w,m,wi,gy,U_,d,so,Bc,hf,bu,P,2,-0,0),T);break e}R3(w,m,wi,gy,U_,d,so,Bc,hf,bu,P,0,-0,0)}}break}while(!0);vs(l)}function R3(l,d,m,w,T,P,oe,Ee,ze,ct,_t,kt,pt,mt){if(l.timeoutHandle=-1,kt=d.subtreeFlags,(kt&8192||(kt&16785408)===16785408)&&(Xp={stylesheets:null,count:0,unsuspend:E7},x3(d),kt=k7(),kt!==null)){l.cancelPendingCommit=kt(P3.bind(null,l,d,P,m,w,T,oe,Ee,ze,_t,1,pt,mt)),xu(l,P,oe,!ct);return}P3(l,d,P,m,w,T,oe,Ee,ze)}function qB(l){for(var d=l;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var w=0;w<m.length;w++){var T=m[w],P=T.getSnapshot;T=T.value;try{if(!qa(P(),T))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function xu(l,d,m,w){d&=~z_,d&=~Bc,l.suspendedLanes|=d,l.pingedLanes&=~d,w&&(l.warmLanes|=d),w=l.expirationTimes;for(var T=d;0<T;){var P=31-Ut(T),oe=1<<P;w[P]=-1,T&=~oe}m!==0&&De(l,m,d)}function yy(){return(or&6)===0?(Vp(0),!1):!0}function W_(){if(qn!==null){if(sr===0)var l=qn.return;else l=qn,sl=jc=null,c_(l),lf=null,Mp=0,l=qn;for(;l!==null;)l3(l.alternate,l),l=l.return;qn=null}}function gf(l,d){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,s7(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),W_(),Ar=l,qn=m=al(l.current,null),Kn=d,sr=0,Li=null,bu=!1,ff=le(l,d),B_=!1,hf=so=z_=Bc=vu=Wr=0,wi=qp=null,U_=!1,(d&8)!==0&&(d|=d&32);var w=l.entangledLanes;if(w!==0)for(l=l.entanglements,w&=d;0<w;){var T=31-Ut(w),P=1<<T;d|=l[T],w&=~P}return ml=d,yn(),m}function N3(l,d){Ln=null,ae.H=ay,d===kp||d===Kg?(d=WA(),sr=3):d===HA?(d=WA(),sr=4):sr=d===KT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Li=d,qn===null&&(Wr=1,uy(l,cn(d,l.current)))}function I3(){var l=ae.H;return ae.H=ay,l===null?ay:l}function O3(){var l=ae.A;return ae.A=zB,l}function K_(){Wr=4,bu||(Kn&4194048)!==Kn&&oo.current!==null||(ff=!0),(vu&134217727)===0&&(Bc&134217727)===0||Ar===null||xu(Ar,Kn,so,!1)}function Z_(l,d,m){var w=or;or|=2;var T=I3(),P=O3();(Ar!==l||Kn!==d)&&(gy=null,gf(l,d)),d=!1;var oe=Wr;e:do try{if(sr!==0&&qn!==null){var Ee=qn,ze=Li;switch(sr){case 8:W_(),oe=6;break e;case 3:case 2:case 9:case 6:oo.current===null&&(d=!0);var ct=sr;if(sr=0,Li=null,yf(l,Ee,ze,ct),m&&ff){oe=0;break e}break;default:ct=sr,sr=0,Li=null,yf(l,Ee,ze,ct)}}HB(),oe=Wr;break}catch(_t){N3(l,_t)}while(!0);return d&&l.shellSuspendCounter++,sl=jc=null,or=w,ae.H=T,ae.A=P,qn===null&&(Ar=null,Kn=0,yn()),oe}function HB(){for(;qn!==null;)D3(qn)}function VB(l,d){var m=or;or|=2;var w=I3(),T=O3();Ar!==l||Kn!==d?(gy=null,my=ce()+500,gf(l,d)):ff=le(l,d);e:do try{if(sr!==0&&qn!==null){d=qn;var P=Li;t:switch(sr){case 1:sr=0,Li=null,yf(l,d,P,1);break;case 2:case 9:if(VA(P)){sr=0,Li=null,j3(d);break}d=function(){sr!==2&&sr!==9||Ar!==l||(sr=7),vs(l)},P.then(d,d);break e;case 3:sr=7;break e;case 4:sr=5;break e;case 7:VA(P)?(sr=0,Li=null,j3(d)):(sr=0,Li=null,yf(l,d,P,7));break;case 5:var oe=null;switch(qn.tag){case 26:oe=qn.memoizedState;case 5:case 27:var Ee=qn;if(!oe||mR(oe)){sr=0,Li=null;var ze=Ee.sibling;if(ze!==null)qn=ze;else{var ct=Ee.return;ct!==null?(qn=ct,by(ct)):qn=null}break t}}sr=0,Li=null,yf(l,d,P,5);break;case 6:sr=0,Li=null,yf(l,d,P,6);break;case 8:W_(),Wr=6;break e;default:throw Error(r(462))}}GB();break}catch(_t){N3(l,_t)}while(!0);return sl=jc=null,ae.H=w,ae.A=T,or=m,qn!==null?0:(Ar=null,Kn=0,yn(),Wr)}function GB(){for(;qn!==null&&!Ce();)D3(qn)}function D3(l){var d=o3(l.alternate,l,ml);l.memoizedProps=l.pendingProps,d===null?by(l):qn=d}function j3(l){var d=l,m=d.alternate;switch(d.tag){case 15:case 0:d=e3(m,d,d.pendingProps,d.type,void 0,Kn);break;case 11:d=e3(m,d,d.pendingProps,d.type.render,d.ref,Kn);break;case 5:c_(d);default:l3(m,d),d=qn=MA(d,ml),d=o3(m,d,ml)}l.memoizedProps=l.pendingProps,d===null?by(l):qn=d}function yf(l,d,m,w){sl=jc=null,c_(d),lf=null,Mp=0;var T=d.return;try{if(MB(l,T,d,m,Kn)){Wr=1,uy(l,cn(m,l.current)),qn=null;return}}catch(P){if(T!==null)throw qn=T,P;Wr=1,uy(l,cn(m,l.current)),qn=null;return}d.flags&32768?(er||w===1?l=!0:ff||(Kn&536870912)!==0?l=!1:(bu=l=!0,(w===2||w===9||w===3||w===6)&&(w=oo.current,w!==null&&w.tag===13&&(w.flags|=16384))),M3(d,l)):by(d)}function by(l){var d=l;do{if((d.flags&32768)!==0){M3(d,bu);return}l=d.return;var m=FB(d.alternate,d,ml);if(m!==null){qn=m;return}if(d=d.sibling,d!==null){qn=d;return}qn=d=l}while(d!==null);Wr===0&&(Wr=5)}function M3(l,d){do{var m=LB(l.alternate,l);if(m!==null){m.flags&=32767,qn=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(l=l.sibling,l!==null)){qn=l;return}qn=l=m}while(l!==null);Wr=6,qn=null}function P3(l,d,m,w,T,P,oe,Ee,ze){l.cancelPendingCommit=null;do vy();while(Pa!==0);if((or&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(P=d.lanes|d.childLanes,P|=ja,me(l,m,P,oe,Ee,ze),l===Ar&&(qn=Ar=null,Kn=0),pf=d,_u=l,mf=m,H_=P,V_=T,k3=w,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,YB(Le,function(){return z3(),null})):(l.callbackNode=null,l.callbackPriority=0),w=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||w){w=ae.T,ae.T=null,T=ne.p,ne.p=2,oe=or,or|=4;try{$B(l,d,m)}finally{or=oe,ne.p=T,ae.T=w}}Pa=1,F3(),L3(),$3()}}function F3(){if(Pa===1){Pa=0;var l=_u,d=pf,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=ae.T,ae.T=null;var w=ne.p;ne.p=2;var T=or;or|=4;try{v3(d,l);var P=sx,oe=ue(l.containerInfo),Ee=P.focusedElem,ze=P.selectionRange;if(oe!==Ee&&Ee&&Ee.ownerDocument&&te(Ee.ownerDocument.documentElement,Ee)){if(ze!==null&&_e(Ee)){var ct=ze.start,_t=ze.end;if(_t===void 0&&(_t=ct),"selectionStart"in Ee)Ee.selectionStart=ct,Ee.selectionEnd=Math.min(_t,Ee.value.length);else{var kt=Ee.ownerDocument||document,pt=kt&&kt.defaultView||window;if(pt.getSelection){var mt=pt.getSelection(),bn=Ee.textContent.length,fn=Math.min(ze.start,bn),gr=ze.end===void 0?fn:Math.min(ze.end,bn);!mt.extend&&fn>gr&&(oe=gr,gr=fn,fn=oe);var nt=K(Ee,fn),Ze=K(Ee,gr);if(nt&&Ze&&(mt.rangeCount!==1||mt.anchorNode!==nt.node||mt.anchorOffset!==nt.offset||mt.focusNode!==Ze.node||mt.focusOffset!==Ze.offset)){var ut=kt.createRange();ut.setStart(nt.node,nt.offset),mt.removeAllRanges(),fn>gr?(mt.addRange(ut),mt.extend(Ze.node,Ze.offset)):(ut.setEnd(Ze.node,Ze.offset),mt.addRange(ut))}}}}for(kt=[],mt=Ee;mt=mt.parentNode;)mt.nodeType===1&&kt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof Ee.focus=="function"&&Ee.focus(),Ee=0;Ee<kt.length;Ee++){var St=kt[Ee];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}Iy=!!ox,sx=ox=null}finally{or=T,ne.p=w,ae.T=m}}l.current=d,Pa=2}}function L3(){if(Pa===2){Pa=0;var l=_u,d=pf,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=ae.T,ae.T=null;var w=ne.p;ne.p=2;var T=or;or|=4;try{m3(l,d.alternate,d)}finally{or=T,ne.p=w,ae.T=m}}Pa=3}}function $3(){if(Pa===4||Pa===3){Pa=0,Ne();var l=_u,d=pf,m=mf,w=k3;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Pa=5:(Pa=0,pf=_u=null,B3(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(wu=null),ye(m),d=d.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Et,d,void 0,(d.current.flags&128)===128)}catch{}if(w!==null){d=ae.T,T=ne.p,ne.p=2,ae.T=null;try{for(var P=l.onRecoverableError,oe=0;oe<w.length;oe++){var Ee=w[oe];P(Ee.value,{componentStack:Ee.stack})}}finally{ae.T=d,ne.p=T}}(mf&3)!==0&&vy(),vs(l),T=l.pendingLanes,(m&4194090)!==0&&(T&42)!==0?l===G_?Hp++:(Hp=0,G_=l):Hp=0,Vp(0)}}function B3(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Ep(d)))}function vy(l){return F3(),L3(),$3(),z3()}function z3(){if(Pa!==5)return!1;var l=_u,d=H_;H_=0;var m=ye(mf),w=ae.T,T=ne.p;try{ne.p=32>m?32:m,ae.T=null,m=V_,V_=null;var P=_u,oe=mf;if(Pa=0,pf=_u=null,mf=0,(or&6)!==0)throw Error(r(331));var Ee=or;if(or|=4,E3(P.current),_3(P,P.current,oe,m),or=Ee,Vp(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Et,P)}catch{}return!0}finally{ne.p=T,ae.T=w,B3(l,d)}}function U3(l,d,m){d=cn(m,d),d=E_(l.stateNode,d,2),l=du(l,d,2),l!==null&&(et(l,2),vs(l))}function _r(l,d,m){if(l.tag===3)U3(l,l,m);else for(;d!==null;){if(d.tag===3){U3(d,l,m);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(wu===null||!wu.has(w))){l=cn(m,l),m=GT(2),w=du(d,m,2),w!==null&&(WT(m,w,d,l),et(w,2),vs(w));break}}d=d.return}}function Y_(l,d,m){var w=l.pingCache;if(w===null){w=l.pingCache=new UB;var T=new Set;w.set(d,T)}else T=w.get(d),T===void 0&&(T=new Set,w.set(d,T));T.has(m)||(B_=!0,T.add(m),l=WB.bind(null,l,d,m),d.then(l,l))}function WB(l,d,m){var w=l.pingCache;w!==null&&w.delete(d),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,Ar===l&&(Kn&m)===m&&(Wr===4||Wr===3&&(Kn&62914560)===Kn&&300>ce()-q_?(or&2)===0&&gf(l,0):z_|=m,hf===Kn&&(hf=0)),vs(l)}function q3(l,d){d===0&&(d=M()),l=No(l,d),l!==null&&(et(l,d),vs(l))}function KB(l){var d=l.memoizedState,m=0;d!==null&&(m=d.retryLane),q3(l,m)}function ZB(l,d){var m=0;switch(l.tag){case 13:var w=l.stateNode,T=l.memoizedState;T!==null&&(m=T.retryLane);break;case 19:w=l.stateNode;break;case 22:w=l.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(d),q3(l,m)}function YB(l,d){return Re(l,d)}var wy=null,bf=null,X_=!1,_y=!1,J_=!1,zc=0;function vs(l){l!==bf&&l.next===null&&(bf===null?wy=bf=l:bf=bf.next=l),_y=!0,X_||(X_=!0,JB())}function Vp(l,d){if(!J_&&_y){J_=!0;do for(var m=!1,w=wy;w!==null;){if(l!==0){var T=w.pendingLanes;if(T===0)var P=0;else{var oe=w.suspendedLanes,Ee=w.pingedLanes;P=(1<<31-Ut(42|l)+1)-1,P&=T&~(oe&~Ee),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(m=!0,W3(w,P))}else P=Kn,P=ke(w,w===Ar?P:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(P&3)===0||le(w,P)||(m=!0,W3(w,P));w=w.next}while(m);J_=!1}}function XB(){H3()}function H3(){_y=X_=!1;var l=0;zc!==0&&(o7()&&(l=zc),zc=0);for(var d=ce(),m=null,w=wy;w!==null;){var T=w.next,P=V3(w,d);P===0?(w.next=null,m===null?wy=T:m.next=T,T===null&&(bf=m)):(m=w,(l!==0||(P&3)!==0)&&(_y=!0)),w=T}Vp(l)}function V3(l,d){for(var m=l.suspendedLanes,w=l.pingedLanes,T=l.expirationTimes,P=l.pendingLanes&-62914561;0<P;){var oe=31-Ut(P),Ee=1<<oe,ze=T[oe];ze===-1?((Ee&m)===0||(Ee&w)!==0)&&(T[oe]=dt(Ee,d)):ze<=d&&(l.expiredLanes|=Ee),P&=~Ee}if(d=Ar,m=Kn,m=ke(l,l===d?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),w=l.callbackNode,m===0||l===d&&(sr===2||sr===9)||l.cancelPendingCommit!==null)return w!==null&&w!==null&&U(w),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||le(l,m)){if(d=m&-m,d===l.callbackPriority)return d;switch(w!==null&&U(w),ye(m)){case 2:case 8:m=xe;break;case 32:m=Le;break;case 268435456:m=Ve;break;default:m=Le}return w=G3.bind(null,l),m=Re(m,w),l.callbackPriority=d,l.callbackNode=m,d}return w!==null&&w!==null&&U(w),l.callbackPriority=2,l.callbackNode=null,2}function G3(l,d){if(Pa!==0&&Pa!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(vy()&&l.callbackNode!==m)return null;var w=Kn;return w=ke(l,l===Ar?w:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),w===0?null:(T3(l,w,d),V3(l,ce()),l.callbackNode!=null&&l.callbackNode===m?G3.bind(null,l):null)}function W3(l,d){if(vy())return null;T3(l,d,!0)}function JB(){l7(function(){(or&6)!==0?Re(Q,XB):H3()})}function Q_(){return zc===0&&(zc=yt()),zc}function K3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Zs(""+l)}function Z3(l,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,l.id&&m.setAttribute("form",l.id),d.parentNode.insertBefore(m,d),l=new FormData(l),m.parentNode.removeChild(m),l}function QB(l,d,m,w,T){if(d==="submit"&&m&&m.stateNode===T){var P=K3((T[fe]||null).action),oe=w.submitter;oe&&(d=(d=oe[fe]||null)?K3(d.formAction):oe.getAttribute("formAction"),d!==null&&(P=d,oe=null));var Ee=new Fd("action","action",null,w,T);l.push({event:Ee,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(zc!==0){var ze=oe?Z3(T,oe):new FormData(T);v_(m,{pending:!0,data:ze,method:T.method,action:P},null,ze)}}else typeof P=="function"&&(Ee.preventDefault(),ze=oe?Z3(T,oe):new FormData(T),v_(m,{pending:!0,data:ze,method:T.method,action:P},P,ze))},currentTarget:T}]})}}for(var ex=0;ex<Vt.length;ex++){var tx=Vt[ex],e7=tx.toLowerCase(),t7=tx[0].toUpperCase()+tx.slice(1);It(e7,"on"+t7)}It(ft,"onAnimationEnd"),It(gt,"onAnimationIteration"),It(bt,"onAnimationStart"),It("dblclick","onDoubleClick"),It("focusin","onFocus"),It("focusout","onBlur"),It(wt,"onTransitionRun"),It(jt,"onTransitionStart"),It(qt,"onTransitionCancel"),It(Nt,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gp));function Y3(l,d){d=(d&4)!==0;for(var m=0;m<l.length;m++){var w=l[m],T=w.event;w=w.listeners;e:{var P=void 0;if(d)for(var oe=w.length-1;0<=oe;oe--){var Ee=w[oe],ze=Ee.instance,ct=Ee.currentTarget;if(Ee=Ee.listener,ze!==P&&T.isPropagationStopped())break e;P=Ee,T.currentTarget=ct;try{P(T)}catch(_t){ly(_t)}T.currentTarget=null,P=ze}else for(oe=0;oe<w.length;oe++){if(Ee=w[oe],ze=Ee.instance,ct=Ee.currentTarget,Ee=Ee.listener,ze!==P&&T.isPropagationStopped())break e;P=Ee,T.currentTarget=ct;try{P(T)}catch(_t){ly(_t)}T.currentTarget=null,P=ze}}}}function Hn(l,d){var m=d[st];m===void 0&&(m=d[st]=new Set);var w=l+"__bubble";m.has(w)||(X3(d,l,2,!1),m.add(w))}function nx(l,d,m){var w=0;d&&(w|=4),X3(m,l,w,d)}var xy="_reactListening"+Math.random().toString(36).slice(2);function rx(l){if(!l[xy]){l[xy]=!0,ai.forEach(function(m){m!=="selectionchange"&&(n7.has(m)||nx(m,!1,l),nx(m,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[xy]||(d[xy]=!0,nx("selectionchange",!1,d))}}function X3(l,d,m,w){switch(_R(d)){case 2:var T=R7;break;case 8:T=N7;break;default:T=yx}m=T.bind(null,d,m,l),T=void 0,!op||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),w?T!==void 0?l.addEventListener(d,m,{capture:!0,passive:T}):l.addEventListener(d,m,!0):T!==void 0?l.addEventListener(d,m,{passive:T}):l.addEventListener(d,m,!1)}function ax(l,d,m,w,T){var P=w;if((d&1)===0&&(d&2)===0&&w!==null)e:for(;;){if(w===null)return;var oe=w.tag;if(oe===3||oe===4){var Ee=w.stateNode.containerInfo;if(Ee===T)break;if(oe===4)for(oe=w.return;oe!==null;){var ze=oe.tag;if((ze===3||ze===4)&&oe.stateNode.containerInfo===T)return;oe=oe.return}for(;Ee!==null;){if(oe=Dn(Ee),oe===null)return;if(ze=oe.tag,ze===5||ze===6||ze===26||ze===27){w=P=oe;continue e}Ee=Ee.parentNode}}w=w.return}eu(function(){var ct=P,_t=Md(m),kt=[];e:{var pt=Lt.get(l);if(pt!==void 0){var mt=Fd,bn=l;switch(l){case"keypress":if(ru(m)===0)break e;case"keydown":case"keyup":mt=Vd;break;case"focusin":bn="focus",mt=au;break;case"focusout":bn="blur",mt=au;break;case"beforeblur":case"afterblur":mt=au;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=hp;break;case ft:case gt:case bt:mt=Og;break;case Nt:mt=pp;break;case"scroll":case"scrollend":mt=Ld;break;case"wheel":mt=Wd;break;case"copy":case"cut":case"paste":mt=qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=fp;break;case"toggle":case"beforetoggle":mt=Mg}var fn=(d&4)!==0,gr=!fn&&(l==="scroll"||l==="scrollend"),nt=fn?pt!==null?pt+"Capture":null:pt;fn=[];for(var Ze=ct,ut;Ze!==null;){var St=Ze;if(ut=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||ut===null||nt===null||(St=Js(Ze,nt),St!=null&&fn.push(Wp(Ze,St,ut))),gr)break;Ze=Ze.return}0<fn.length&&(pt=new mt(pt,bn,null,m,_t),kt.push({event:pt,listeners:fn}))}}if((d&7)===0){e:{if(pt=l==="mouseover"||l==="pointerover",mt=l==="mouseout"||l==="pointerout",pt&&m!==eo&&(bn=m.relatedTarget||m.fromElement)&&(Dn(bn)||bn[Fe]))break e;if((mt||pt)&&(pt=_t.window===_t?_t:(pt=_t.ownerDocument)?pt.defaultView||pt.parentWindow:window,mt?(bn=m.relatedTarget||m.toElement,mt=ct,bn=bn?Dn(bn):null,bn!==null&&(gr=i(bn),fn=bn.tag,bn!==gr||fn!==5&&fn!==27&&fn!==6)&&(bn=null)):(mt=null,bn=ct),mt!==bn)){if(fn=Bd,St="onMouseLeave",nt="onMouseEnter",Ze="mouse",(l==="pointerout"||l==="pointerover")&&(fn=fp,St="onPointerLeave",nt="onPointerEnter",Ze="pointer"),gr=mt==null?pt:fr(mt),ut=bn==null?pt:fr(bn),pt=new fn(St,Ze+"leave",mt,m,_t),pt.target=gr,pt.relatedTarget=ut,St=null,Dn(_t)===ct&&(fn=new fn(nt,Ze+"enter",bn,m,_t),fn.target=ut,fn.relatedTarget=gr,St=fn),gr=St,mt&&bn)t:{for(fn=mt,nt=bn,Ze=0,ut=fn;ut;ut=vf(ut))Ze++;for(ut=0,St=nt;St;St=vf(St))ut++;for(;0<Ze-ut;)fn=vf(fn),Ze--;for(;0<ut-Ze;)nt=vf(nt),ut--;for(;Ze--;){if(fn===nt||nt!==null&&fn===nt.alternate)break t;fn=vf(fn),nt=vf(nt)}fn=null}else fn=null;mt!==null&&J3(kt,pt,mt,fn,!1),bn!==null&&gr!==null&&J3(kt,gr,bn,fn,!0)}}e:{if(pt=ct?fr(ct):window,mt=pt.nodeName&&pt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&pt.type==="file")var Qt=Tc;else if(Yd(pt))if(no)Qt=su;else{Qt=rl;var Bn=zg}else mt=pt.nodeName,!mt||mt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?ct&&ip(ct.elementType)&&(Qt=Tc):Qt=vp;if(Qt&&(Qt=Qt(l,ct))){bp(kt,Qt,m,_t);break e}Bn&&Bn(l,pt,ct),l==="focusout"&&ct&&pt.type==="number"&&ct.memoizedProps.value!=null&&Yl(pt,"number",pt.value)}switch(Bn=ct?fr(ct):window,l){case"focusin":(Yd(Bn)||Bn.contentEditable==="true")&&($e=Bn,We=ct,Ye=null);break;case"focusout":Ye=We=$e=null;break;case"mousedown":tt=!0;break;case"contextmenu":case"mouseup":case"dragend":tt=!1,He(kt,m,_t);break;case"selectionchange":if(je)break;case"keydown":case"keyup":He(kt,m,_t)}var on;if(kc)e:{switch(l){case"compositionstart":var mn="onCompositionStart";break e;case"compositionend":mn="onCompositionEnd";break e;case"compositionupdate":mn="onCompositionUpdate";break e}mn=void 0}else nl?yp(l,m)&&(mn="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(mn="onCompositionStart");mn&&(Kd&&m.locale!=="ko"&&(nl||mn!=="onCompositionStart"?mn==="onCompositionEnd"&&nl&&(on=nu()):(to=_t,Pd="value"in to?to.value:to.textContent,nl=!0)),Bn=Sy(ct,mn),0<Bn.length&&(mn=new Hd(mn,l,null,m,_t),kt.push({event:mn,listeners:Bn}),on?mn.data=on:(on=Fg(m),on!==null&&(mn.data=on)))),(on=L1?Lg(l,m):$1(l,m))&&(mn=Sy(ct,"onBeforeInput"),0<mn.length&&(Bn=new Hd("onBeforeInput","beforeinput",null,m,_t),kt.push({event:Bn,listeners:mn}),Bn.data=on)),QB(kt,l,ct,m,_t)}Y3(kt,d)})}function Wp(l,d,m){return{instance:l,listener:d,currentTarget:m}}function Sy(l,d){for(var m=d+"Capture",w=[];l!==null;){var T=l,P=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||P===null||(T=Js(l,m),T!=null&&w.unshift(Wp(l,T,P)),T=Js(l,d),T!=null&&w.push(Wp(l,T,P))),l.tag===3)return w;l=l.return}return[]}function vf(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function J3(l,d,m,w,T){for(var P=d._reactName,oe=[];m!==null&&m!==w;){var Ee=m,ze=Ee.alternate,ct=Ee.stateNode;if(Ee=Ee.tag,ze!==null&&ze===w)break;Ee!==5&&Ee!==26&&Ee!==27||ct===null||(ze=ct,T?(ct=Js(m,P),ct!=null&&oe.unshift(Wp(m,ct,ze))):T||(ct=Js(m,P),ct!=null&&oe.push(Wp(m,ct,ze)))),m=m.return}oe.length!==0&&l.push({event:d,listeners:oe})}var r7=/\r\n?/g,a7=/\u0000|\uFFFD/g;function Q3(l){return(typeof l=="string"?l:""+l).replace(r7,`
`).replace(a7,"")}function eR(l,d){return d=Q3(d),Q3(l)===d}function Ey(){}function mr(l,d,m,w,T,P){switch(m){case"children":typeof w=="string"?d==="body"||d==="textarea"&&w===""||Jl(l,w):(typeof w=="number"||typeof w=="bigint")&&d!=="body"&&Jl(l,""+w);break;case"className":Gs(l,"class",w);break;case"tabIndex":Gs(l,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(l,m,w);break;case"style":Rg(l,w,P);break;case"data":if(d!=="object"){Gs(l,"data",w);break}case"src":case"href":if(w===""&&(d!=="a"||m!=="href")){l.removeAttribute(m);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){l.removeAttribute(m);break}w=Zs(""+w),l.setAttribute(m,w);break;case"action":case"formAction":if(typeof w=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(m==="formAction"?(d!=="input"&&mr(l,d,"name",T.name,T,null),mr(l,d,"formEncType",T.formEncType,T,null),mr(l,d,"formMethod",T.formMethod,T,null),mr(l,d,"formTarget",T.formTarget,T,null)):(mr(l,d,"encType",T.encType,T,null),mr(l,d,"method",T.method,T,null),mr(l,d,"target",T.target,T,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){l.removeAttribute(m);break}w=Zs(""+w),l.setAttribute(m,w);break;case"onClick":w!=null&&(l.onclick=Ey);break;case"onScroll":w!=null&&Hn("scroll",l);break;case"onScrollEnd":w!=null&&Hn("scrollend",l);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"multiple":l.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":l.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){l.removeAttribute("xlink:href");break}m=Zs(""+w),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?l.setAttribute(m,""+w):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":w===!0?l.setAttribute(m,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?l.setAttribute(m,w):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?l.setAttribute(m,w):l.removeAttribute(m);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?l.removeAttribute(m):l.setAttribute(m,w);break;case"popover":Hn("beforetoggle",l),Hn("toggle",l),To(l,"popover",w);break;case"xlinkActuate":Di(l,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Di(l,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Di(l,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Di(l,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Di(l,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Di(l,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Di(l,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Di(l,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Di(l,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":To(l,"is",w);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=oi.get(m)||m,To(l,m,w))}}function ix(l,d,m,w,T,P){switch(m){case"style":Rg(l,w,P);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"children":typeof w=="string"?Jl(l,w):(typeof w=="number"||typeof w=="bigint")&&Jl(l,""+w);break;case"onScroll":w!=null&&Hn("scroll",l);break;case"onScrollEnd":w!=null&&Hn("scrollend",l);break;case"onClick":w!=null&&(l.onclick=Ey);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!is.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(T=m.endsWith("Capture"),d=m.slice(2,T?m.length-7:void 0),P=l[fe]||null,P=P!=null?P[m]:null,typeof P=="function"&&l.removeEventListener(d,P,T),typeof w=="function")){typeof P!="function"&&P!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(d,w,T);break e}m in l?l[m]=w:w===!0?l.setAttribute(m,""):To(l,m,w)}}}function Fa(l,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hn("error",l),Hn("load",l);var w=!1,T=!1,P;for(P in m)if(m.hasOwnProperty(P)){var oe=m[P];if(oe!=null)switch(P){case"src":w=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,P,oe,m,null)}}T&&mr(l,d,"srcSet",m.srcSet,m,null),w&&mr(l,d,"src",m.src,m,null);return;case"input":Hn("invalid",l);var Ee=P=oe=T=null,ze=null,ct=null;for(w in m)if(m.hasOwnProperty(w)){var _t=m[w];if(_t!=null)switch(w){case"name":T=_t;break;case"type":oe=_t;break;case"checked":ze=_t;break;case"defaultChecked":ct=_t;break;case"value":P=_t;break;case"defaultValue":Ee=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,d));break;default:mr(l,d,w,_t,m,null)}}rp(l,P,Ee,ze,ct,oe,T,!1),cs(l);return;case"select":Hn("invalid",l),w=oe=P=null;for(T in m)if(m.hasOwnProperty(T)&&(Ee=m[T],Ee!=null))switch(T){case"value":P=Ee;break;case"defaultValue":oe=Ee;break;case"multiple":w=Ee;default:mr(l,d,T,Ee,m,null)}d=P,m=oe,l.multiple=!!w,d!=null?Ks(l,!!w,d,!1):m!=null&&Ks(l,!!w,m,!0);return;case"textarea":Hn("invalid",l),P=T=w=null;for(oe in m)if(m.hasOwnProperty(oe)&&(Ee=m[oe],Ee!=null))switch(oe){case"value":w=Ee;break;case"defaultValue":T=Ee;break;case"children":P=Ee;break;case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(91));break;default:mr(l,d,oe,Ee,m,null)}ap(l,w,T,P),cs(l);return;case"option":for(ze in m)if(m.hasOwnProperty(ze)&&(w=m[ze],w!=null))switch(ze){case"selected":l.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:mr(l,d,ze,w,m,null)}return;case"dialog":Hn("beforetoggle",l),Hn("toggle",l),Hn("cancel",l),Hn("close",l);break;case"iframe":case"object":Hn("load",l);break;case"video":case"audio":for(w=0;w<Gp.length;w++)Hn(Gp[w],l);break;case"image":Hn("error",l),Hn("load",l);break;case"details":Hn("toggle",l);break;case"embed":case"source":case"link":Hn("error",l),Hn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ct in m)if(m.hasOwnProperty(ct)&&(w=m[ct],w!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,ct,w,m,null)}return;default:if(ip(d)){for(_t in m)m.hasOwnProperty(_t)&&(w=m[_t],w!==void 0&&ix(l,d,_t,w,m,void 0));return}}for(Ee in m)m.hasOwnProperty(Ee)&&(w=m[Ee],w!=null&&mr(l,d,Ee,w,m,null))}function i7(l,d,m,w){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,P=null,oe=null,Ee=null,ze=null,ct=null,_t=null;for(mt in m){var kt=m[mt];if(m.hasOwnProperty(mt)&&kt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":ze=kt;default:w.hasOwnProperty(mt)||mr(l,d,mt,null,w,kt)}}for(var pt in w){var mt=w[pt];if(kt=m[pt],w.hasOwnProperty(pt)&&(mt!=null||kt!=null))switch(pt){case"type":P=mt;break;case"name":T=mt;break;case"checked":ct=mt;break;case"defaultChecked":_t=mt;break;case"value":oe=mt;break;case"defaultValue":Ee=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,d));break;default:mt!==kt&&mr(l,d,pt,mt,w,kt)}}Zl(l,oe,Ee,ze,ct,_t,P,T);return;case"select":mt=oe=Ee=pt=null;for(P in m)if(ze=m[P],m.hasOwnProperty(P)&&ze!=null)switch(P){case"value":break;case"multiple":mt=ze;default:w.hasOwnProperty(P)||mr(l,d,P,null,w,ze)}for(T in w)if(P=w[T],ze=m[T],w.hasOwnProperty(T)&&(P!=null||ze!=null))switch(T){case"value":pt=P;break;case"defaultValue":Ee=P;break;case"multiple":oe=P;default:P!==ze&&mr(l,d,T,P,w,ze)}d=Ee,m=oe,w=mt,pt!=null?Ks(l,!!m,pt,!1):!!w!=!!m&&(d!=null?Ks(l,!!m,d,!0):Ks(l,!!m,m?[]:"",!1));return;case"textarea":mt=pt=null;for(Ee in m)if(T=m[Ee],m.hasOwnProperty(Ee)&&T!=null&&!w.hasOwnProperty(Ee))switch(Ee){case"value":break;case"children":break;default:mr(l,d,Ee,null,w,T)}for(oe in w)if(T=w[oe],P=m[oe],w.hasOwnProperty(oe)&&(T!=null||P!=null))switch(oe){case"value":pt=T;break;case"defaultValue":mt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==P&&mr(l,d,oe,T,w,P)}Xl(l,pt,mt);return;case"option":for(var bn in m)if(pt=m[bn],m.hasOwnProperty(bn)&&pt!=null&&!w.hasOwnProperty(bn))switch(bn){case"selected":l.selected=!1;break;default:mr(l,d,bn,null,w,pt)}for(ze in w)if(pt=w[ze],mt=m[ze],w.hasOwnProperty(ze)&&pt!==mt&&(pt!=null||mt!=null))switch(ze){case"selected":l.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:mr(l,d,ze,pt,w,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fn in m)pt=m[fn],m.hasOwnProperty(fn)&&pt!=null&&!w.hasOwnProperty(fn)&&mr(l,d,fn,null,w,pt);for(ct in w)if(pt=w[ct],mt=m[ct],w.hasOwnProperty(ct)&&pt!==mt&&(pt!=null||mt!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,d));break;default:mr(l,d,ct,pt,w,mt)}return;default:if(ip(d)){for(var gr in m)pt=m[gr],m.hasOwnProperty(gr)&&pt!==void 0&&!w.hasOwnProperty(gr)&&ix(l,d,gr,void 0,w,pt);for(_t in w)pt=w[_t],mt=m[_t],!w.hasOwnProperty(_t)||pt===mt||pt===void 0&&mt===void 0||ix(l,d,_t,pt,w,mt);return}}for(var nt in m)pt=m[nt],m.hasOwnProperty(nt)&&pt!=null&&!w.hasOwnProperty(nt)&&mr(l,d,nt,null,w,pt);for(kt in w)pt=w[kt],mt=m[kt],!w.hasOwnProperty(kt)||pt===mt||pt==null&&mt==null||mr(l,d,kt,pt,w,mt)}var ox=null,sx=null;function Cy(l){return l.nodeType===9?l:l.ownerDocument}function tR(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nR(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function lx(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var ux=null;function o7(){var l=window.event;return l&&l.type==="popstate"?l===ux?!1:(ux=l,!0):(ux=null,!1)}var rR=typeof setTimeout=="function"?setTimeout:void 0,s7=typeof clearTimeout=="function"?clearTimeout:void 0,aR=typeof Promise=="function"?Promise:void 0,l7=typeof queueMicrotask=="function"?queueMicrotask:typeof aR<"u"?function(l){return aR.resolve(null).then(l).catch(u7)}:rR;function u7(l){setTimeout(function(){throw l})}function Su(l){return l==="head"}function iR(l,d){var m=d,w=0,T=0;do{var P=m.nextSibling;if(l.removeChild(m),P&&P.nodeType===8)if(m=P.data,m==="/$"){if(0<w&&8>w){m=w;var oe=l.ownerDocument;if(m&1&&Kp(oe.documentElement),m&2&&Kp(oe.body),m&4)for(m=oe.head,Kp(m),oe=m.firstChild;oe;){var Ee=oe.nextSibling,ze=oe.nodeName;oe[Gt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||m.removeChild(oe),oe=Ee}}if(T===0){l.removeChild(P),nm(d);return}T--}else m==="$"||m==="$?"||m==="$!"?T++:w=m.charCodeAt(0)-48;else w=0;m=P}while(m);nm(d)}function cx(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":cx(m),Xt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function c7(l,d,m,w){for(;l.nodeType===1;){var T=m;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!w&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(w){if(!l[Gt])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(P=l.getAttribute("rel"),P==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(P!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(P=l.getAttribute("src"),(P!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&P&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var P=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===P)return l}else return l;if(l=Oo(l.nextSibling),l===null)break}return null}function d7(l,d,m){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=Oo(l.nextSibling),l===null))return null;return l}function dx(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function f7(l,d){var m=l.ownerDocument;if(l.data!=="$?"||m.readyState==="complete")d();else{var w=function(){d(),m.removeEventListener("DOMContentLoaded",w)};m.addEventListener("DOMContentLoaded",w),l._reactRetry=w}}function Oo(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var fx=null;function oR(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return l;d--}else m==="/$"&&d++}l=l.previousSibling}return null}function sR(l,d,m){switch(d=Cy(m),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Kp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Xt(l)}var lo=new Map,lR=new Set;function ky(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var gl=ne.d;ne.d={f:h7,r:p7,D:m7,C:g7,L:y7,m:b7,X:w7,S:v7,M:_7};function h7(){var l=gl.f(),d=yy();return l||d}function p7(l){var d=zn(l);d!==null&&d.tag===5&&d.type==="form"?TT(d):gl.r(l)}var wf=typeof document>"u"?null:document;function uR(l,d,m){var w=wf;if(w&&typeof d=="string"&&d){var T=za(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof m=="string"&&(T+='[crossorigin="'+m+'"]'),lR.has(T)||(lR.add(T),l={rel:l,crossOrigin:m,href:d},w.querySelector(T)===null&&(d=w.createElement("link"),Fa(d,"link",l),Mn(d),w.head.appendChild(d)))}}function m7(l){gl.D(l),uR("dns-prefetch",l,null)}function g7(l,d){gl.C(l,d),uR("preconnect",l,d)}function y7(l,d,m){gl.L(l,d,m);var w=wf;if(w&&l&&d){var T='link[rel="preload"][as="'+za(d)+'"]';d==="image"&&m&&m.imageSrcSet?(T+='[imagesrcset="'+za(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(T+='[imagesizes="'+za(m.imageSizes)+'"]')):T+='[href="'+za(l)+'"]';var P=T;switch(d){case"style":P=_f(l);break;case"script":P=xf(l)}lo.has(P)||(l=f({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:l,as:d},m),lo.set(P,l),w.querySelector(T)!==null||d==="style"&&w.querySelector(Zp(P))||d==="script"&&w.querySelector(Yp(P))||(d=w.createElement("link"),Fa(d,"link",l),Mn(d),w.head.appendChild(d)))}}function b7(l,d){gl.m(l,d);var m=wf;if(m&&l){var w=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+za(w)+'"][href="'+za(l)+'"]',P=T;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=xf(l)}if(!lo.has(P)&&(l=f({rel:"modulepreload",href:l},d),lo.set(P,l),m.querySelector(T)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Yp(P)))return}w=m.createElement("link"),Fa(w,"link",l),Mn(w),m.head.appendChild(w)}}}function v7(l,d,m){gl.S(l,d,m);var w=wf;if(w&&l){var T=hr(w).hoistableStyles,P=_f(l);d=d||"default";var oe=T.get(P);if(!oe){var Ee={loading:0,preload:null};if(oe=w.querySelector(Zp(P)))Ee.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},m),(m=lo.get(P))&&hx(l,m);var ze=oe=w.createElement("link");Mn(ze),Fa(ze,"link",l),ze._p=new Promise(function(ct,_t){ze.onload=ct,ze.onerror=_t}),ze.addEventListener("load",function(){Ee.loading|=1}),ze.addEventListener("error",function(){Ee.loading|=2}),Ee.loading|=4,Ay(oe,d,w)}oe={type:"stylesheet",instance:oe,count:1,state:Ee},T.set(P,oe)}}}function w7(l,d){gl.X(l,d);var m=wf;if(m&&l){var w=hr(m).hoistableScripts,T=xf(l),P=w.get(T);P||(P=m.querySelector(Yp(T)),P||(l=f({src:l,async:!0},d),(d=lo.get(T))&&px(l,d),P=m.createElement("script"),Mn(P),Fa(P,"link",l),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(T,P))}}function _7(l,d){gl.M(l,d);var m=wf;if(m&&l){var w=hr(m).hoistableScripts,T=xf(l),P=w.get(T);P||(P=m.querySelector(Yp(T)),P||(l=f({src:l,async:!0,type:"module"},d),(d=lo.get(T))&&px(l,d),P=m.createElement("script"),Mn(P),Fa(P,"link",l),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(T,P))}}function cR(l,d,m,w){var T=(T=Me.current)?ky(T):null;if(!T)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=_f(m.href),m=hr(T).hoistableStyles,w=m.get(d),w||(w={type:"style",instance:null,count:0,state:null},m.set(d,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=_f(m.href);var P=hr(T).hoistableStyles,oe=P.get(l);if(oe||(T=T.ownerDocument||T,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(l,oe),(P=T.querySelector(Zp(l)))&&!P._p&&(oe.instance=P,oe.state.loading=5),lo.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},lo.set(l,m),P||x7(T,l,m,oe.state))),d&&w===null)throw Error(r(528,""));return oe}if(d&&w!==null)throw Error(r(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=xf(m),m=hr(T).hoistableScripts,w=m.get(d),w||(w={type:"script",instance:null,count:0,state:null},m.set(d,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function _f(l){return'href="'+za(l)+'"'}function Zp(l){return'link[rel="stylesheet"]['+l+"]"}function dR(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function x7(l,d,m,w){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?w.loading=1:(d=l.createElement("link"),w.preload=d,d.addEventListener("load",function(){return w.loading|=1}),d.addEventListener("error",function(){return w.loading|=2}),Fa(d,"link",m),Mn(d),l.head.appendChild(d))}function xf(l){return'[src="'+za(l)+'"]'}function Yp(l){return"script[async]"+l}function fR(l,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var w=l.querySelector('style[data-href~="'+za(m.href)+'"]');if(w)return d.instance=w,Mn(w),w;var T=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return w=(l.ownerDocument||l).createElement("style"),Mn(w),Fa(w,"style",T),Ay(w,m.precedence,l),d.instance=w;case"stylesheet":T=_f(m.href);var P=l.querySelector(Zp(T));if(P)return d.state.loading|=4,d.instance=P,Mn(P),P;w=dR(m),(T=lo.get(T))&&hx(w,T),P=(l.ownerDocument||l).createElement("link"),Mn(P);var oe=P;return oe._p=new Promise(function(Ee,ze){oe.onload=Ee,oe.onerror=ze}),Fa(P,"link",w),d.state.loading|=4,Ay(P,m.precedence,l),d.instance=P;case"script":return P=xf(m.src),(T=l.querySelector(Yp(P)))?(d.instance=T,Mn(T),T):(w=m,(T=lo.get(P))&&(w=f({},m),px(w,T)),l=l.ownerDocument||l,T=l.createElement("script"),Mn(T),Fa(T,"link",w),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(w=d.instance,d.state.loading|=4,Ay(w,m.precedence,l));return d.instance}function Ay(l,d,m){for(var w=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=w.length?w[w.length-1]:null,P=T,oe=0;oe<w.length;oe++){var Ee=w[oe];if(Ee.dataset.precedence===d)P=Ee;else if(P!==T)break}P?P.parentNode.insertBefore(l,P.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(l,d.firstChild))}function hx(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function px(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Ty=null;function hR(l,d,m){if(Ty===null){var w=new Map,T=Ty=new Map;T.set(m,w)}else T=Ty,w=T.get(m),w||(w=new Map,T.set(m,w));if(w.has(l))return w;for(w.set(l,null),m=m.getElementsByTagName(l),T=0;T<m.length;T++){var P=m[T];if(!(P[Gt]||P[pe]||l==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=P.getAttribute(d)||"";oe=l+oe;var Ee=w.get(oe);Ee?Ee.push(P):w.set(oe,[P])}}return w}function pR(l,d,m){l=l.ownerDocument||l,l.head.insertBefore(m,d==="title"?l.querySelector("head > title"):null)}function S7(l,d,m){if(m===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function mR(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Xp=null;function E7(){}function C7(l,d,m){if(Xp===null)throw Error(r(475));var w=Xp;if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=_f(m.href),P=l.querySelector(Zp(T));if(P){l=P._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(w.count++,w=Ry.bind(w),l.then(w,w)),d.state.loading|=4,d.instance=P,Mn(P);return}P=l.ownerDocument||l,m=dR(m),(T=lo.get(T))&&hx(m,T),P=P.createElement("link"),Mn(P);var oe=P;oe._p=new Promise(function(Ee,ze){oe.onload=Ee,oe.onerror=ze}),Fa(P,"link",m),d.instance=P}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(w.count++,d=Ry.bind(w),l.addEventListener("load",d),l.addEventListener("error",d))}}function k7(){if(Xp===null)throw Error(r(475));var l=Xp;return l.stylesheets&&l.count===0&&mx(l,l.stylesheets),0<l.count?function(d){var m=setTimeout(function(){if(l.stylesheets&&mx(l,l.stylesheets),l.unsuspend){var w=l.unsuspend;l.unsuspend=null,w()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(m)}}:null}function Ry(){if(this.count--,this.count===0){if(this.stylesheets)mx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Ny=null;function mx(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Ny=new Map,d.forEach(A7,l),Ny=null,Ry.call(l))}function A7(l,d){if(!(d.state.loading&4)){var m=Ny.get(l);if(m)var w=m.get(null);else{m=new Map,Ny.set(l,m);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<T.length;P++){var oe=T[P];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(m.set(oe.dataset.precedence,oe),w=oe)}w&&m.set(null,w)}T=d.instance,oe=T.getAttribute("data-precedence"),P=m.get(oe)||w,P===w&&m.set(null,T),m.set(oe,T),this.count++,w=Ry.bind(this),T.addEventListener("load",w),T.addEventListener("error",w),P?P.parentNode.insertBefore(T,P.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var Jp={$$typeof:E,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function T7(l,d,m,w,T,P,oe,Ee){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=w,this.onUncaughtError=T,this.onCaughtError=P,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function gR(l,d,m,w,T,P,oe,Ee,ze,ct,_t,kt){return l=new T7(l,d,m,oe,Ee,ze,ct,kt),d=1,P===!0&&(d|=24),P=Mi(3,null,null,d),l.current=P,P.stateNode=l,d=Y1(),d.refCount++,l.pooledCache=d,d.refCount++,P.memoizedState={element:w,isDehydrated:m,cache:d},e_(P),l}function yR(l){return l?(l=ps,l):ps}function bR(l,d,m,w,T,P){T=yR(T),w.context===null?w.context=T:w.pendingContext=T,w=cu(d),w.payload={element:m},P=P===void 0?null:P,P!==null&&(w.callback=P),m=du(l,w,d),m!==null&&(Bi(m,l,d),Tp(m,l,d))}function vR(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<d?m:d}}function gx(l,d){vR(l,d),(l=l.alternate)&&vR(l,d)}function wR(l){if(l.tag===13){var d=No(l,67108864);d!==null&&Bi(d,l,67108864),gx(l,67108864)}}var Iy=!0;function R7(l,d,m,w){var T=ae.T;ae.T=null;var P=ne.p;try{ne.p=2,yx(l,d,m,w)}finally{ne.p=P,ae.T=T}}function N7(l,d,m,w){var T=ae.T;ae.T=null;var P=ne.p;try{ne.p=8,yx(l,d,m,w)}finally{ne.p=P,ae.T=T}}function yx(l,d,m,w){if(Iy){var T=bx(w);if(T===null)ax(l,d,w,Oy,m),xR(l,w);else if(O7(T,l,d,m,w))w.stopPropagation();else if(xR(l,w),d&4&&-1<I7.indexOf(l)){for(;T!==null;){var P=zn(T);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var oe=ve(P.pendingLanes);if(oe!==0){var Ee=P;for(Ee.pendingLanes|=2,Ee.entangledLanes|=2;oe;){var ze=1<<31-Ut(oe);Ee.entanglements[1]|=ze,oe&=~ze}vs(P),(or&6)===0&&(my=ce()+500,Vp(0))}}break;case 13:Ee=No(P,2),Ee!==null&&Bi(Ee,P,2),yy(),gx(P,2)}if(P=bx(w),P===null&&ax(l,d,w,Oy,m),P===T)break;T=P}T!==null&&w.stopPropagation()}else ax(l,d,w,null,m)}}function bx(l){return l=Md(l),vx(l)}var Oy=null;function vx(l){if(Oy=null,l=Dn(l),l!==null){var d=i(l);if(d===null)l=null;else{var m=d.tag;if(m===13){if(l=o(d),l!==null)return l;l=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Oy=l,null}function _R(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case Q:return 2;case xe:return 8;case Le:case Se:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var wx=!1,Eu=null,Cu=null,ku=null,Qp=new Map,em=new Map,Au=[],I7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xR(l,d){switch(l){case"focusin":case"focusout":Eu=null;break;case"dragenter":case"dragleave":Cu=null;break;case"mouseover":case"mouseout":ku=null;break;case"pointerover":case"pointerout":Qp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":em.delete(d.pointerId)}}function tm(l,d,m,w,T,P){return l===null||l.nativeEvent!==P?(l={blockedOn:d,domEventName:m,eventSystemFlags:w,nativeEvent:P,targetContainers:[T]},d!==null&&(d=zn(d),d!==null&&wR(d)),l):(l.eventSystemFlags|=w,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function O7(l,d,m,w,T){switch(d){case"focusin":return Eu=tm(Eu,l,d,m,w,T),!0;case"dragenter":return Cu=tm(Cu,l,d,m,w,T),!0;case"mouseover":return ku=tm(ku,l,d,m,w,T),!0;case"pointerover":var P=T.pointerId;return Qp.set(P,tm(Qp.get(P)||null,l,d,m,w,T)),!0;case"gotpointercapture":return P=T.pointerId,em.set(P,tm(em.get(P)||null,l,d,m,w,T)),!0}return!1}function SR(l){var d=Dn(l.target);if(d!==null){var m=i(d);if(m!==null){if(d=m.tag,d===13){if(d=o(m),d!==null){l.blockedOn=d,B(l.priority,function(){if(m.tag===13){var w=$i();w=Ct(w);var T=No(m,w);T!==null&&Bi(T,m,w),gx(m,w)}});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Dy(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var m=bx(l.nativeEvent);if(m===null){m=l.nativeEvent;var w=new m.constructor(m.type,m);eo=w,m.target.dispatchEvent(w),eo=null}else return d=zn(m),d!==null&&wR(d),l.blockedOn=m,!1;d.shift()}return!0}function ER(l,d,m){Dy(l)&&m.delete(d)}function D7(){wx=!1,Eu!==null&&Dy(Eu)&&(Eu=null),Cu!==null&&Dy(Cu)&&(Cu=null),ku!==null&&Dy(ku)&&(ku=null),Qp.forEach(ER),em.forEach(ER)}function jy(l,d){l.blockedOn===d&&(l.blockedOn=null,wx||(wx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,D7)))}var My=null;function CR(l){My!==l&&(My=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){My===l&&(My=null);for(var d=0;d<l.length;d+=3){var m=l[d],w=l[d+1],T=l[d+2];if(typeof w!="function"){if(vx(w||m)===null)continue;break}var P=zn(m);P!==null&&(l.splice(d,3),d-=3,v_(P,{pending:!0,data:T,method:m.method,action:w},w,T))}}))}function nm(l){function d(ze){return jy(ze,l)}Eu!==null&&jy(Eu,l),Cu!==null&&jy(Cu,l),ku!==null&&jy(ku,l),Qp.forEach(d),em.forEach(d);for(var m=0;m<Au.length;m++){var w=Au[m];w.blockedOn===l&&(w.blockedOn=null)}for(;0<Au.length&&(m=Au[0],m.blockedOn===null);)SR(m),m.blockedOn===null&&Au.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(w=0;w<m.length;w+=3){var T=m[w],P=m[w+1],oe=T[fe]||null;if(typeof P=="function")oe||CR(m);else if(oe){var Ee=null;if(P&&P.hasAttribute("formAction")){if(T=P,oe=P[fe]||null)Ee=oe.formAction;else if(vx(T)!==null)continue}else Ee=oe.action;typeof Ee=="function"?m[w+1]=Ee:(m.splice(w,3),w-=3),CR(m)}}}function _x(l){this._internalRoot=l}Py.prototype.render=_x.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var m=d.current,w=$i();bR(m,w,l,d,null,null)},Py.prototype.unmount=_x.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;bR(l.current,2,null,l,null,null),yy(),d[Fe]=null}};function Py(l){this._internalRoot=l}Py.prototype.unstable_scheduleHydration=function(l){if(l){var d=q();l={blockedOn:null,target:l,priority:d};for(var m=0;m<Au.length&&d!==0&&d<Au[m].priority;m++);Au.splice(m,0,l),m===0&&SR(l)}};var kR=t.version;if(kR!=="19.1.0")throw Error(r(527,kR,"19.1.0"));ne.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var j7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fy.isDisabled&&Fy.supportsFiber)try{Et=Fy.inject(j7),Ft=Fy}catch{}}return am.createRoot=function(l,d){if(!a(l))throw Error(r(299));var m=!1,w="",T=UT,P=qT,oe=HT,Ee=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(P=d.onCaughtError),d.onRecoverableError!==void 0&&(oe=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(Ee=d.unstable_transitionCallbacks)),d=gR(l,1,!1,null,null,m,w,T,P,oe,Ee,null),l[Fe]=d.current,rx(l),new _x(d)},am.hydrateRoot=function(l,d,m){if(!a(l))throw Error(r(299));var w=!1,T="",P=UT,oe=qT,Ee=HT,ze=null,ct=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(P=m.onUncaughtError),m.onCaughtError!==void 0&&(oe=m.onCaughtError),m.onRecoverableError!==void 0&&(Ee=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ze=m.unstable_transitionCallbacks),m.formState!==void 0&&(ct=m.formState)),d=gR(l,1,!0,d,m??null,w,T,P,oe,Ee,ze,ct),d.context=yR(null),m=d.current,w=$i(),w=Ct(w),T=cu(w),T.callback=null,du(m,T,w),m=w,d.current.lanes=m,et(d,m),vs(d),l[Fe]=d.current,rx(l),new Py(d)},am.version="19.1.0",am}var PR;function Y7(){if(PR)return Ex.exports;PR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ex.exports=Z7(),Ex.exports}var X7=Y7();const J7=ni(X7);function CO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=CO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function kO(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=CO(e))&&(r&&(r+=" "),r+=t);return r}const hC="-",Q7=e=>{const t=tz(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(hC);return s[0]===""&&s.length!==1&&s.shift(),AO(s,t)||ez(o)},getConflictingClassGroupIds:(o,s)=>{const u=n[o]||[];return s&&r[o]?[...u,...r[o]]:u}}},AO=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?AO(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(hC);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},FR=/^\[(.+)\]$/,ez=e=>{if(FR.test(e)){const t=FR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},tz=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)G2(n[a],r,a,t);return r},G2=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:LR(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(nz(a)){G2(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{G2(o,LR(t,i),n,r)})})},LR=(e,t)=>{let n=e;return t.split(hC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},nz=e=>e.isThemeGetter,rz=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},W2="!",K2=":",az=K2.length,iz=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,u=0,c;for(let v=0;v<a.length;v++){let b=a[v];if(o===0&&s===0){if(b===K2){i.push(a.slice(u,v)),u=v+az;continue}if(b==="/"){c=v;continue}}b==="["?o++:b==="]"?o--:b==="("?s++:b===")"&&s--}const f=i.length===0?a:a.substring(u),h=oz(f),p=h!==f,g=c&&c>u?c-u:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+K2,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},oz=e=>e.endsWith(W2)?e.substring(0,e.length-1):e.startsWith(W2)?e.substring(1):e,sz=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},lz=e=>({cache:rz(e.cacheSize),parseClassName:iz(e),sortModifiers:sz(e),...Q7(e)}),uz=/\s+/,cz=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(uz);let u="";for(let c=s.length-1;c>=0;c-=1){const f=s[c],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(f);if(h){u=f+(u.length>0?" "+u:u);continue}let _=!!b,x=r(_?v.substring(0,b):v);if(!x){if(!_){u=f+(u.length>0?" "+u:u);continue}if(x=r(v),!x){u=f+(u.length>0?" "+u:u);continue}_=!1}const S=i(p).join(":"),E=g?S+W2:S,C=E+x;if(o.includes(C))continue;o.push(C);const k=a(x,_);for(let D=0;D<k.length;++D){const O=k[D];o.push(E+O)}u=f+(u.length>0?" "+u:u)}return u};function dz(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=TO(t))&&(r&&(r+=" "),r+=n);return r}const TO=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=TO(e[r]))&&(n&&(n+=" "),n+=t);return n};function fz(e,...t){let n,r,a,i=o;function o(u){const c=t.reduce((f,h)=>h(f),e());return n=lz(c),r=n.cache.get,a=n.cache.set,i=s,s(u)}function s(u){const c=r(u);if(c)return c;const f=cz(u,n);return a(u,f),f}return function(){return i(dz.apply(null,arguments))}}const pa=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},RO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,NO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,hz=/^\d+\/\d+$/,pz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,yz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sf=e=>hz.test(e),$n=e=>!!e&&!Number.isNaN(Number(e)),Ru=e=>!!e&&Number.isInteger(Number(e)),Tx=e=>e.endsWith("%")&&$n(e.slice(0,-1)),yl=e=>pz.test(e),vz=()=>!0,wz=e=>mz.test(e)&&!gz.test(e),IO=()=>!1,_z=e=>yz.test(e),xz=e=>bz.test(e),Sz=e=>!en(e)&&!tn(e),Ez=e=>wh(e,jO,IO),en=e=>RO.test(e),Uc=e=>wh(e,MO,wz),Rx=e=>wh(e,Rz,$n),$R=e=>wh(e,OO,IO),Cz=e=>wh(e,DO,xz),Ly=e=>wh(e,PO,_z),tn=e=>NO.test(e),im=e=>_h(e,MO),kz=e=>_h(e,Nz),BR=e=>_h(e,OO),Az=e=>_h(e,jO),Tz=e=>_h(e,DO),$y=e=>_h(e,PO,!0),wh=(e,t,n)=>{const r=RO.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},_h=(e,t,n=!1)=>{const r=NO.exec(e);return r?r[1]?t(r[1]):n:!1},OO=e=>e==="position"||e==="percentage",DO=e=>e==="image"||e==="url",jO=e=>e==="length"||e==="size"||e==="bg-size",MO=e=>e==="length",Rz=e=>e==="number",Nz=e=>e==="family-name",PO=e=>e==="shadow",Iz=()=>{const e=pa("color"),t=pa("font"),n=pa("text"),r=pa("font-weight"),a=pa("tracking"),i=pa("leading"),o=pa("breakpoint"),s=pa("container"),u=pa("spacing"),c=pa("radius"),f=pa("shadow"),h=pa("inset-shadow"),p=pa("text-shadow"),g=pa("drop-shadow"),v=pa("blur"),b=pa("perspective"),_=pa("aspect"),x=pa("ease"),S=pa("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),tn,en],D=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],N=()=>[tn,en,u],z=()=>[Sf,"full","auto",...N()],H=()=>[Ru,"none","subgrid",tn,en],X=()=>["auto",{span:["full",Ru,tn,en]},Ru,tn,en],F=()=>[Ru,"auto",tn,en],Z=()=>["auto","min","max","fr",tn,en],L=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],de=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...N()],ne=()=>[Sf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],ee=()=>[e,tn,en],se=()=>[...C(),BR,$R,{position:[tn,en]}],W=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",Az,Ez,{size:[tn,en]}],Y=()=>[Tx,im,Uc],re=()=>["","none","full",c,tn,en],be=()=>["",$n,im,Uc],we=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[$n,Tx,BR,$R],Ae=()=>["","none",v,tn,en],Te=()=>["none",$n,tn,en],qe=()=>["none",$n,tn,en],it=()=>[$n,tn,en],Ie=()=>[Sf,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yl],breakpoint:[yl],color:[vz],container:[yl],"drop-shadow":[yl],ease:["in","out","in-out"],font:[Sz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yl],shadow:[yl],spacing:["px",$n],text:[yl],"text-shadow":[yl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Sf,en,tn,_]}],container:["container"],columns:[{columns:[$n,en,tn,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[Ru,"auto",tn,en]}],basis:[{basis:[Sf,"full","auto",s,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$n,Sf,"auto","initial","none",en]}],grow:[{grow:["",$n,tn,en]}],shrink:[{shrink:["",$n,tn,en]}],order:[{order:[Ru,"first","last","none",tn,en]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:X()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:X()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...L(),"normal"]}],"justify-items":[{"justify-items":[...de(),"normal"]}],"justify-self":[{"justify-self":["auto",...de()]}],"align-content":[{content:["normal",...L()]}],"align-items":[{items:[...de(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...de(),{baseline:["","last"]}]}],"place-content":[{"place-content":L()}],"place-items":[{"place-items":[...de(),"baseline"]}],"place-self":[{"place-self":["auto",...de()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[s,"screen",...ne()]}],"min-w":[{"min-w":[s,"screen","none",...ne()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...ne()]}],h:[{h:["screen",...ne()]}],"min-h":[{"min-h":["screen","none",...ne()]}],"max-h":[{"max-h":["screen",...ne()]}],"font-size":[{text:["base",n,im,Uc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tn,Rx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Tx,en]}],"font-family":[{font:[kz,en,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tn,en]}],"line-clamp":[{"line-clamp":[$n,"none",tn,Rx]}],leading:[{leading:[i,...N()]}],"list-image":[{"list-image":["none",tn,en]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tn,en]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ee()}],"text-color":[{text:ee()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...we(),"wavy"]}],"text-decoration-thickness":[{decoration:[$n,"from-font","auto",tn,Uc]}],"text-decoration-color":[{decoration:ee()}],"underline-offset":[{"underline-offset":[$n,"auto",tn,en]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn,en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn,en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:W()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ru,tn,en],radial:["",tn,en],conic:[Ru,tn,en]},Tz,Cz]}],"bg-color":[{bg:ee()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:ee()}],"gradient-via":[{via:ee()}],"gradient-to":[{to:ee()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...we(),"hidden","none"]}],"divide-style":[{divide:[...we(),"hidden","none"]}],"border-color":[{border:ee()}],"border-color-x":[{"border-x":ee()}],"border-color-y":[{"border-y":ee()}],"border-color-s":[{"border-s":ee()}],"border-color-e":[{"border-e":ee()}],"border-color-t":[{"border-t":ee()}],"border-color-r":[{"border-r":ee()}],"border-color-b":[{"border-b":ee()}],"border-color-l":[{"border-l":ee()}],"divide-color":[{divide:ee()}],"outline-style":[{outline:[...we(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$n,tn,en]}],"outline-w":[{outline:["",$n,im,Uc]}],"outline-color":[{outline:ee()}],shadow:[{shadow:["","none",f,$y,Ly]}],"shadow-color":[{shadow:ee()}],"inset-shadow":[{"inset-shadow":["none",h,$y,Ly]}],"inset-shadow-color":[{"inset-shadow":ee()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ee()}],"ring-offset-w":[{"ring-offset":[$n,Uc]}],"ring-offset-color":[{"ring-offset":ee()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":ee()}],"text-shadow":[{"text-shadow":["none",p,$y,Ly]}],"text-shadow-color":[{"text-shadow":ee()}],opacity:[{opacity:[$n,tn,en]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$n]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":ee()}],"mask-image-linear-to-color":[{"mask-linear-to":ee()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":ee()}],"mask-image-t-to-color":[{"mask-t-to":ee()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":ee()}],"mask-image-r-to-color":[{"mask-r-to":ee()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":ee()}],"mask-image-b-to-color":[{"mask-b-to":ee()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":ee()}],"mask-image-l-to-color":[{"mask-l-to":ee()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":ee()}],"mask-image-x-to-color":[{"mask-x-to":ee()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":ee()}],"mask-image-y-to-color":[{"mask-y-to":ee()}],"mask-image-radial":[{"mask-radial":[tn,en]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":ee()}],"mask-image-radial-to-color":[{"mask-radial-to":ee()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[$n]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":ee()}],"mask-image-conic-to-color":[{"mask-conic-to":ee()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:W()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tn,en]}],filter:[{filter:["","none",tn,en]}],blur:[{blur:Ae()}],brightness:[{brightness:[$n,tn,en]}],contrast:[{contrast:[$n,tn,en]}],"drop-shadow":[{"drop-shadow":["","none",g,$y,Ly]}],"drop-shadow-color":[{"drop-shadow":ee()}],grayscale:[{grayscale:["",$n,tn,en]}],"hue-rotate":[{"hue-rotate":[$n,tn,en]}],invert:[{invert:["",$n,tn,en]}],saturate:[{saturate:[$n,tn,en]}],sepia:[{sepia:["",$n,tn,en]}],"backdrop-filter":[{"backdrop-filter":["","none",tn,en]}],"backdrop-blur":[{"backdrop-blur":Ae()}],"backdrop-brightness":[{"backdrop-brightness":[$n,tn,en]}],"backdrop-contrast":[{"backdrop-contrast":[$n,tn,en]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$n,tn,en]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$n,tn,en]}],"backdrop-invert":[{"backdrop-invert":["",$n,tn,en]}],"backdrop-opacity":[{"backdrop-opacity":[$n,tn,en]}],"backdrop-saturate":[{"backdrop-saturate":[$n,tn,en]}],"backdrop-sepia":[{"backdrop-sepia":["",$n,tn,en]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tn,en]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$n,"initial",tn,en]}],ease:[{ease:["linear","initial",x,tn,en]}],delay:[{delay:[$n,tn,en]}],animate:[{animate:["none",S,tn,en]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,tn,en]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:qe()}],"scale-x":[{"scale-x":qe()}],"scale-y":[{"scale-y":qe()}],"scale-z":[{"scale-z":qe()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[tn,en,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ie()}],"translate-x":[{"translate-x":Ie()}],"translate-y":[{"translate-y":Ie()}],"translate-z":[{"translate-z":Ie()}],"translate-none":["translate-none"],accent:[{accent:ee()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ee()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn,en]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn,en]}],fill:[{fill:["none",...ee()]}],"stroke-w":[{stroke:[$n,im,Uc,Rx]}],stroke:[{stroke:["none",...ee()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Oz=fz(Iz);function $t(...e){return Oz(kO(e))}const zR=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:$t(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(vt.Fragment,{children:i},a.id):null})})};function UR(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Bu(...e){return t=>{let n=!1;const r=e.map(a=>{const i=UR(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():UR(e[a],null)}}}}function _n(...e){return R.useCallback(Bu(...e),e)}function zu(e){const t=Dz(e),n=R.forwardRef((r,a)=>{const{children:i,...o}=r,s=R.Children.toArray(i),u=s.find(Mz);if(u){const c=u.props.children,f=s.map(h=>h===u?R.Children.count(c)>1?R.Children.only(null):R.isValidElement(c)?c.props.children:null:h);return y.jsx(t,{...o,ref:a,children:R.isValidElement(c)?R.cloneElement(c,void 0,f):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var FO=zu("Slot");function Dz(e){const t=R.forwardRef((n,r)=>{const{children:a,...i}=n;if(R.isValidElement(a)){const o=Fz(a),s=Pz(i,a.props);return a.type!==R.Fragment&&(s.ref=r?Bu(r,o):o),R.cloneElement(a,s)}return R.Children.count(a)>1?R.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var LO=Symbol("radix.slottable");function jz(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=LO,t}function Mz(e){return R.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===LO}function Pz(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Fz(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const qR=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,HR=kO,pC=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return HR(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const f=n==null?void 0:n[c],h=i==null?void 0:i[c];if(f===null)return null;const p=qR(f)||qR(h);return a[c][p]}),s=n&&Object.entries(n).reduce((c,f)=>{let[h,p]=f;return p===void 0||(c[h]=p),c},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:p,...g}=f;return Object.entries(g).every(v=>{let[b,_]=v;return Array.isArray(_)?_.includes({...i,...s}[b]):{...i,...s}[b]===_})?[...c,h,p]:c},[]);return HR(e,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},Lz=pC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Pt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?FO:"button";return y.jsx(i,{"data-slot":"button",className:$t(Lz({variant:t,size:n,className:e})),...a})}const VR=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,p))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(r,a,s);return s},$z=e=>e?VR(e):VR,Bz=e=>e;function zz(e,t=Bz){const n=vt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return vt.useDebugValue(n),n}const GR=e=>{const t=$z(e),n=r=>zz(t,r);return Object.assign(n,t),n},zl=e=>e?GR(e):GR;var $O=Symbol.for("immer-nothing"),WR=Symbol.for("immer-draftable"),rr=Symbol.for("immer-state");function vo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Kf=Object.getPrototypeOf;function Zf(e){return!!e&&!!e[rr]}function Il(e){var t;return e?BO(e)||Array.isArray(e)||!!e[WR]||!!((t=e.constructor)!=null&&t[WR])||Yv(e)||Xv(e):!1}var Uz=Object.prototype.constructor.toString();function BO(e){if(!e||typeof e!="object")return!1;const t=Kf(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Uz}function Em(e,t){Zv(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Zv(e){const t=e[rr];return t?t.type_:Array.isArray(e)?1:Yv(e)?2:Xv(e)?3:0}function Z2(e,t){return Zv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zO(e,t,n){const r=Zv(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function qz(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Yv(e){return e instanceof Map}function Xv(e){return e instanceof Set}function ka(e){return e.copy_||e.base_}function Y2(e,t){if(Yv(e))return new Map(e);if(Xv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=BO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[rr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Kf(e),r)}else{const r=Kf(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function mC(e,t=!1){return Jv(e)||Zf(e)||!Il(e)||(Zv(e)>1&&(e.set=e.add=e.clear=e.delete=Hz),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>mC(r,!0))),e}function Hz(){vo(2)}function Jv(e){return Object.isFrozen(e)}var X2={};function od(e){const t=X2[e];return t||vo(0,e),t}function Vz(e,t){X2[e]||(X2[e]=t)}var Cm;function Ib(){return Cm}function Gz(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function KR(e,t){t&&(od("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function J2(e){Q2(e),e.drafts_.forEach(Wz),e.drafts_=null}function Q2(e){e===Cm&&(Cm=e.parent_)}function ZR(e){return Cm=Gz(Cm,e)}function Wz(e){const t=e[rr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function YR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[rr].modified_&&(J2(t),vo(4)),Il(e)&&(e=Ob(t,e),t.parent_||Db(t,e)),t.patches_&&od("Patches").generateReplacementPatches_(n[rr].base_,e,t.patches_,t.inversePatches_)):e=Ob(t,n,[]),J2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$O?e:void 0}function Ob(e,t,n){if(Jv(t))return t;const r=t[rr];if(!r)return Em(t,(a,i)=>XR(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Db(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),Em(i,(s,u)=>XR(e,r,a,s,u,n,o)),Db(e,a,!1),n&&e.patches_&&od("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function XR(e,t,n,r,a,i,o){if(Zf(a)){const s=i&&t&&t.type_!==3&&!Z2(t.assigned_,r)?i.concat(r):void 0,u=Ob(e,a,s);if(zO(n,r,u),Zf(u))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(Il(a)&&!Jv(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ob(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Db(e,a)}}function Db(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mC(t,n)}function Kz(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Ib(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=gC;n&&(a=[r],i=km);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var gC={get(e,t){if(t===rr)return e;const n=ka(e);if(!Z2(n,t))return Zz(e,n,t);const r=n[t];return e.finalized_||!Il(r)?r:r===Nx(e.base_,t)?(Ix(e),e.copy_[t]=Am(r,e)):r},has(e,t){return t in ka(e)},ownKeys(e){return Reflect.ownKeys(ka(e))},set(e,t,n){const r=UO(ka(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=Nx(ka(e),t),i=a==null?void 0:a[rr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(qz(n,a)&&(n!==void 0||Z2(e.base_,t)))return!0;Ix(e),_l(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Nx(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ix(e),_l(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ka(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){vo(11)},getPrototypeOf(e){return Kf(e.base_)},setPrototypeOf(){vo(12)}},km={};Em(gC,(e,t)=>{km[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});km.deleteProperty=function(e,t){return km.set.call(this,e,t,void 0)};km.set=function(e,t,n){return gC.set.call(this,e[0],t,n,e[0])};function Nx(e,t){const n=e[rr];return(n?ka(n):e)[t]}function Zz(e,t,n){var a;const r=UO(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function UO(e,t){if(!(t in e))return;let n=Kf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Kf(n)}}function _l(e){e.modified_||(e.modified_=!0,e.parent_&&_l(e.parent_))}function Ix(e){e.copy_||(e.copy_=Y2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Yz=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(u=i,...c){return o.produce(u,f=>n.call(this,f,...c))}}typeof n!="function"&&vo(6),r!==void 0&&typeof r!="function"&&vo(7);let a;if(Il(t)){const i=ZR(this),o=Am(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?J2(i):Q2(i)}return KR(i,r),YR(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===$O&&(a=void 0),this.autoFreeze_&&mC(a,!0),r){const i=[],o=[];od("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else vo(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,u=>t(u,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Il(e)||vo(8),Zf(e)&&(e=Xz(e));const t=ZR(this),n=Am(e,void 0);return n[rr].isManual_=!0,Q2(t),n}finishDraft(e,t){const n=e&&e[rr];(!n||!n.isManual_)&&vo(9);const{scope_:r}=n;return KR(r,t),YR(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=od("Patches").applyPatches_;return Zf(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Am(e,t){const n=Yv(e)?od("MapSet").proxyMap_(e,t):Xv(e)?od("MapSet").proxySet_(e,t):Kz(e,t);return(t?t.scope_:Ib()).drafts_.push(n),n}function Xz(e){return Zf(e)||vo(10,e),qO(e)}function qO(e){if(!Il(e)||Jv(e))return e;const t=e[rr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Y2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Y2(e,!0);return Em(n,(r,a)=>{zO(n,r,qO(a))}),t&&(t.finalized_=!1),n}function Jz(){class e extends Map{constructor(u,c){super(),this[rr]={type_:2,parent_:c,scope_:c?c.scope_:Ib(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return ka(this[rr]).size}has(u){return ka(this[rr]).has(u)}set(u,c){const f=this[rr];return o(f),(!ka(f).has(u)||ka(f).get(u)!==c)&&(n(f),_l(f),f.assigned_.set(u,!0),f.copy_.set(u,c),f.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const c=this[rr];return o(c),n(c),_l(c),c.base_.has(u)?c.assigned_.set(u,!1):c.assigned_.delete(u),c.copy_.delete(u),!0}clear(){const u=this[rr];o(u),ka(u).size&&(n(u),_l(u),u.assigned_=new Map,Em(u.base_,c=>{u.assigned_.set(c,!1)}),u.copy_.clear())}forEach(u,c){const f=this[rr];ka(f).forEach((h,p,g)=>{u.call(c,this.get(p),p,this)})}get(u){const c=this[rr];o(c);const f=ka(c).get(u);if(c.finalized_||!Il(f)||f!==c.base_.get(u))return f;const h=Am(f,c);return n(c),c.copy_.set(u,h),h}keys(){return ka(this[rr]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=u.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=u.next();if(c.done)return c;const f=this.get(c.value);return{done:!1,value:[c.value,f]}}}}[Symbol.iterator](){return this.entries()}}function t(s,u){return new e(s,u)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(u,c){super(),this[rr]={type_:3,parent_:c,scope_:c?c.scope_:Ib(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return ka(this[rr]).size}has(u){const c=this[rr];return o(c),c.copy_?!!(c.copy_.has(u)||c.drafts_.has(u)&&c.copy_.has(c.drafts_.get(u))):c.base_.has(u)}add(u){const c=this[rr];return o(c),this.has(u)||(i(c),_l(c),c.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const c=this[rr];return o(c),i(c),_l(c),c.copy_.delete(u)||(c.drafts_.has(u)?c.copy_.delete(c.drafts_.get(u)):!1)}clear(){const u=this[rr];o(u),ka(u).size&&(i(u),_l(u),u.copy_.clear())}values(){const u=this[rr];return o(u),i(u),u.copy_.values()}entries(){const u=this[rr];return o(u),i(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,c){const f=this.values();let h=f.next();for(;!h.done;)u.call(c,h.value,h.value,this),h=f.next()}}function a(s,u){return new r(s,u)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(u=>{if(Il(u)){const c=Am(u,s);s.drafts_.set(u,c),s.copy_.add(c)}else s.copy_.add(u)}))}function o(s){s.revoked_&&vo(3,JSON.stringify(ka(s)))}Vz("MapSet",{proxyMap_:t,proxySet_:a})}var Yi=new Yz,Qz=Yi.produce;Yi.produceWithPatches.bind(Yi);Yi.setAutoFreeze.bind(Yi);Yi.setUseStrictShallowCopy.bind(Yi);Yi.applyPatches.bind(Yi);Yi.createDraft.bind(Yi);Yi.finishDraft.bind(Yi);const eU=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?Qz(a):a;return t(s,i,...o)},e(r.setState,n,r)),Ul=eU,Oa=zl(Ul((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((u,c)=>(u.order??0)-(c.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var wb={exports:{}},tU=wb.exports,JR;function nU(){return JR||(JR=1,function(e,t){(function(n,r){e.exports=r()})(tU,function(){var n=function(A,j){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,te){K.__proto__=te}||function(K,te){for(var ue in te)Object.prototype.hasOwnProperty.call(te,ue)&&(K[ue]=te[ue])})(A,j)},r=function(){return(r=Object.assign||function(A){for(var j,K=1,te=arguments.length;K<te;K++)for(var ue in j=arguments[K])Object.prototype.hasOwnProperty.call(j,ue)&&(A[ue]=j[ue]);return A}).apply(this,arguments)};function a(A,j,K){for(var te,ue=0,_e=j.length;ue<_e;ue++)!te&&ue in j||((te=te||Array.prototype.slice.call(j,0,ue))[ue]=j[ue]);return A.concat(te||Array.prototype.slice.call(j))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ed,o=Object.keys,s=Array.isArray;function u(A,j){return typeof j!="object"||o(j).forEach(function(K){A[K]=j[K]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function h(A,j){return f.call(A,j)}function p(A,j){typeof j=="function"&&(j=j(c(A))),(typeof Reflect>"u"?o:Reflect.ownKeys)(j).forEach(function(K){v(A,K,j[K])})}var g=Object.defineProperty;function v(A,j,K,te){g(A,j,u(K&&h(K,"get")&&typeof K.get=="function"?{get:K.get,set:K.set,configurable:!0}:{value:K,configurable:!0,writable:!0},te))}function b(A){return{from:function(j){return A.prototype=Object.create(j.prototype),v(A.prototype,"constructor",A),{extend:p.bind(null,A.prototype)}}}}var _=Object.getOwnPropertyDescriptor,x=[].slice;function S(A,j,K){return x.call(A,j,K)}function E(A,j){return j(A)}function C(A){if(!A)throw new Error("Assertion Failed")}function k(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function D(A,j){if(typeof j=="string"&&h(A,j))return A[j];if(!j)return A;if(typeof j!="string"){for(var K=[],te=0,ue=j.length;te<ue;++te){var _e=D(A,j[te]);K.push(_e)}return K}var je=j.indexOf(".");if(je!==-1){var $e=A[j.substr(0,je)];return $e==null?void 0:D($e,j.substr(je+1))}}function O(A,j,K){if(A&&j!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof j!="string"&&"length"in j){C(typeof K!="string"&&"length"in K);for(var te=0,ue=j.length;te<ue;++te)O(A,j[te],K[te])}else{var _e,je,$e=j.indexOf(".");$e!==-1?(_e=j.substr(0,$e),(je=j.substr($e+1))===""?K===void 0?s(A)&&!isNaN(parseInt(_e))?A.splice(_e,1):delete A[_e]:A[_e]=K:O($e=!($e=A[_e])||!h(A,_e)?A[_e]={}:$e,je,K)):K===void 0?s(A)&&!isNaN(parseInt(j))?A.splice(j,1):delete A[j]:A[j]=K}}function N(A){var j,K={};for(j in A)h(A,j)&&(K[j]=A[j]);return K}var z=[].concat;function H(A){return z.apply([],A)}var Et="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(H([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(j){return j+A+"Array"})}))).filter(function(A){return i[A]}),X=new Set(Et.map(function(A){return i[A]})),F=null;function Z(A){return F=new WeakMap,A=function j(K){if(!K||typeof K!="object")return K;var te=F.get(K);if(te)return te;if(s(K)){te=[],F.set(K,te);for(var ue=0,_e=K.length;ue<_e;++ue)te.push(j(K[ue]))}else if(X.has(K.constructor))te=K;else{var je,$e=c(K);for(je in te=$e===Object.prototype?{}:Object.create($e),F.set(K,te),K)h(K,je)&&(te[je]=j(K[je]))}return te}(A),F=null,A}var L={}.toString;function de(A){return L.call(A).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof ae=="symbol"?function(A){var j;return A!=null&&(j=A[ae])&&j.apply(A)}:function(){return null};function ee(A,j){return j=A.indexOf(j),0<=j&&A.splice(j,1),0<=j}var se={};function W(A){var j,K,te,ue;if(arguments.length===1){if(s(A))return A.slice();if(this===se&&typeof A=="string")return[A];if(ue=ne(A)){for(K=[];!(te=ue.next()).done;)K.push(te.value);return K}if(A==null)return[A];if(typeof(j=A.length)!="number")return[A];for(K=new Array(j);j--;)K[j]=A[j];return K}for(j=arguments.length,K=new Array(j);j--;)K[j]=arguments[j];return K}var J=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ht=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],si=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ht),Y={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function re(A,j){this.name=A,this.message=j}function be(A,j){return A+". Errors: "+Object.keys(j).map(function(K){return j[K].toString()}).filter(function(K,te,ue){return ue.indexOf(K)===te}).join(`
`)}function we(A,j,K,te){this.failures=j,this.failedKeys=te,this.successCount=K,this.message=be(A,j)}function Me(A,j){this.name="BulkError",this.failures=Object.keys(j).map(function(K){return j[K]}),this.failuresByPos=j,this.message=be(A,this.failures)}b(re).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(we).from(re),b(Me).from(re);var Pe=si.reduce(function(A,j){return A[j]=j+"Error",A},{}),Ae=re,Te=si.reduce(function(A,j){var K=j+"Error";function te(ue,_e){this.name=K,ue?typeof ue=="string"?(this.message="".concat(ue).concat(_e?`
 `+_e:""),this.inner=_e||null):typeof ue=="object"&&(this.message="".concat(ue.name," ").concat(ue.message),this.inner=ue):(this.message=Y[j]||K,this.inner=null)}return b(te).from(Ae),A[j]=te,A},{});Te.Syntax=SyntaxError,Te.Type=TypeError,Te.Range=RangeError;var qe=ht.reduce(function(A,j){return A[j+"Error"]=Te[j],A},{}),it=si.reduce(function(A,j){return["Syntax","Type","Range"].indexOf(j)===-1&&(A[j+"Error"]=Te[j]),A},{});function Ie(){}function Re(A){return A}function U(A,j){return A==null||A===Re?j:function(K){return j(A(K))}}function Ce(A,j){return function(){A.apply(this,arguments),j.apply(this,arguments)}}function Ne(A,j){return A===Ie?j:function(){var K=A.apply(this,arguments);K!==void 0&&(arguments[0]=K);var te=this.onsuccess,ue=this.onerror;this.onsuccess=null,this.onerror=null;var _e=j.apply(this,arguments);return te&&(this.onsuccess=this.onsuccess?Ce(te,this.onsuccess):te),ue&&(this.onerror=this.onerror?Ce(ue,this.onerror):ue),_e!==void 0?_e:K}}function ce(A,j){return A===Ie?j:function(){A.apply(this,arguments);var K=this.onsuccess,te=this.onerror;this.onsuccess=this.onerror=null,j.apply(this,arguments),K&&(this.onsuccess=this.onsuccess?Ce(K,this.onsuccess):K),te&&(this.onerror=this.onerror?Ce(te,this.onerror):te)}}function ie(A,j){return A===Ie?j:function(K){var te=A.apply(this,arguments);u(K,te);var ue=this.onsuccess,_e=this.onerror;return this.onsuccess=null,this.onerror=null,K=j.apply(this,arguments),ue&&(this.onsuccess=this.onsuccess?Ce(ue,this.onsuccess):ue),_e&&(this.onerror=this.onerror?Ce(_e,this.onerror):_e),te===void 0?K===void 0?void 0:K:u(te,K)}}function Q(A,j){return A===Ie?j:function(){return j.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function xe(A,j){return A===Ie?j:function(){var K=A.apply(this,arguments);if(K&&typeof K.then=="function"){for(var te=this,ue=arguments.length,_e=new Array(ue);ue--;)_e[ue]=arguments[ue];return K.then(function(){return j.apply(te,_e)})}return j.apply(this,arguments)}}it.ModifyError=we,it.DexieError=re,it.BulkError=Me;var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Se(A){Le=A}var Ve={},xt=100,Et=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,c(A),A];var j=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[j,c(j),A]}(),ht=Et[0],si=Et[1],Et=Et[2],si=si&&si.then,Ft=ht&&ht.constructor,Tt=!!Et,Ut=function(A,j){le.push([A,j]),I&&(queueMicrotask(ye),I=!1)},ge=!0,I=!0,V=[],he=[],Oe=Re,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ie,pgp:!1,env:{},finalize:Ie},ke=ve,le=[],dt=0,yt=[];function M(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var j=this._PSD=ke;if(typeof A!="function"){if(A!==Ve)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&me(this,this._value))}this._state=null,this._value=null,++j.ref,function K(te,ue){try{ue(function(_e){if(te._state===null){if(_e===te)throw new TypeError("A promise cannot be resolved with itself.");var je=te._lib&&q();_e&&typeof _e.then=="function"?K(te,function($e,We){_e instanceof M?_e._then($e,We):_e.then($e,We)}):(te._state=!0,te._value=_e,De(te)),je&&B()}},me.bind(null,te))}catch(_e){me(te,_e)}}(this,A)}var Be={get:function(){var A=ke,j=zt;function K(te,ue){var _e=this,je=!A.global&&(A!==ke||j!==zt),$e=je&&!zn(),We=new M(function(Ye,tt){Ke(_e,new et(os(te,A,je,$e),os(ue,A,je,$e),Ye,tt,A))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return K.prototype=Ve,K},set:function(A){v(this,"then",A&&A.prototype===Ve?Be:{get:function(){return A},set:Be.set})}};function et(A,j,K,te,ue){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof j=="function"?j:null,this.resolve=K,this.reject=te,this.psd=ue}function me(A,j){var K,te;he.push(j),A._state===null&&(K=A._lib&&q(),j=Oe(j),A._state=!1,A._value=j,te=A,V.some(function(ue){return ue._value===te._value})||V.push(te),De(A),K&&B())}function De(A){var j=A._listeners;A._listeners=[];for(var K=0,te=j.length;K<te;++K)Ke(A,j[K]);var ue=A._PSD;--ue.ref||ue.finalize(),dt===0&&(++dt,Ut(function(){--dt==0&&G()},[]))}function Ke(A,j){if(A._state!==null){var K=A._state?j.onFulfilled:j.onRejected;if(K===null)return(A._state?j.resolve:j.reject)(A._value);++j.psd.ref,++dt,Ut(Ct,[K,A,j])}else A._listeners.push(j)}function Ct(A,j,K){try{var te,ue=j._value;!j._state&&he.length&&(he=[]),te=Le&&j._consoleTask?j._consoleTask.run(function(){return A(ue)}):A(ue),j._state||he.indexOf(ue)!==-1||function(_e){for(var je=V.length;je;)if(V[--je]._value===_e._value)return V.splice(je,1)}(j),K.resolve(te)}catch(_e){K.reject(_e)}finally{--dt==0&&G(),--K.psd.ref||K.psd.finalize()}}function ye(){is(ve,function(){q()&&B()})}function q(){var A=ge;return I=ge=!1,A}function B(){var A,j,K;do for(;0<le.length;)for(A=le,le=[],K=A.length,j=0;j<K;++j){var te=A[j];te[0].apply(null,te[1])}while(0<le.length);I=ge=!0}function G(){var A=V;V=[],A.forEach(function(te){te._PSD.onunhandled.call(null,te._value,te)});for(var j=yt.slice(0),K=j.length;K;)j[--K]()}function pe(A){return new M(Ve,!1,A)}function fe(A,j){var K=ke;return function(){var te=q(),ue=ke;try{return Mn(K,!0),A.apply(this,arguments)}catch(_e){j&&j(_e)}finally{Mn(ue,!1),te&&B()}}}p(M.prototype,{then:Be,_then:function(A,j){Ke(this,new et(null,null,A,j,ke))},catch:function(A){if(arguments.length===1)return this.then(null,A);var j=A,K=arguments[1];return typeof j=="function"?this.then(null,function(te){return(te instanceof j?K:pe)(te)}):this.then(null,function(te){return(te&&te.name===j?K:pe)(te)})},finally:function(A){return this.then(function(j){return M.resolve(A()).then(function(){return j})},function(j){return M.resolve(A()).then(function(){return pe(j)})})},timeout:function(A,j){var K=this;return A<1/0?new M(function(te,ue){var _e=setTimeout(function(){return ue(new Te.Timeout(j))},A);K.then(te,ue).finally(clearTimeout.bind(null,_e))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(M.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=ai(),p(M,{all:function(){var A=W.apply(null,arguments).map(fr);return new M(function(j,K){A.length===0&&j([]);var te=A.length;A.forEach(function(ue,_e){return M.resolve(ue).then(function(je){A[_e]=je,--te||j(A)},K)})})},resolve:function(A){return A instanceof M?A:A&&typeof A.then=="function"?new M(function(j,K){A.then(j,K)}):new M(Ve,!0,A)},reject:pe,race:function(){var A=W.apply(null,arguments).map(fr);return new M(function(j,K){A.map(function(te){return M.resolve(te).then(j,K)})})},PSD:{get:function(){return ke},set:function(A){return ke=A}},totalEchoes:{get:function(){return zt}},newPSD:Xt,usePSD:is,scheduler:{get:function(){return Ut},set:function(A){Ut=A}},rejectionMapper:{get:function(){return Oe},set:function(A){Oe=A}},follow:function(A,j){return new M(function(K,te){return Xt(function(ue,_e){var je=ke;je.unhandleds=[],je.onunhandled=_e,je.finalize=Ce(function(){var $e,We=this;$e=function(){We.unhandleds.length===0?ue():_e(We.unhandleds[0])},yt.push(function Ye(){$e(),yt.splice(yt.indexOf(Ye),1)}),++dt,Ut(function(){--dt==0&&G()},[])},je.finalize),A()},j,K,te)})}}),Ft&&(Ft.allSettled&&v(M,"allSettled",function(){var A=W.apply(null,arguments).map(fr);return new M(function(j){A.length===0&&j([]);var K=A.length,te=new Array(K);A.forEach(function(ue,_e){return M.resolve(ue).then(function(je){return te[_e]={status:"fulfilled",value:je}},function(je){return te[_e]={status:"rejected",reason:je}}).then(function(){return--K||j(te)})})})}),Ft.any&&typeof AggregateError<"u"&&v(M,"any",function(){var A=W.apply(null,arguments).map(fr);return new M(function(j,K){A.length===0&&K(new AggregateError([]));var te=A.length,ue=new Array(te);A.forEach(function(_e,je){return M.resolve(_e).then(function($e){return j($e)},function($e){ue[je]=$e,--te||K(new AggregateError(ue))})})})}),Ft.withResolvers&&(M.withResolvers=Ft.withResolvers));var Fe={awaits:0,echoes:0,id:0},st=0,Dt=[],un=0,zt=0,Gt=0;function Xt(A,j,K,te){var ue=ke,_e=Object.create(ue);return _e.parent=ue,_e.ref=0,_e.global=!1,_e.id=++Gt,ve.env,_e.env=Tt?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},j&&u(_e,j),++ue.ref,_e.finalize=function(){--this.parent.ref||this.parent.finalize()},te=is(_e,A,K,te),_e.ref===0&&_e.finalize(),te}function Dn(){return Fe.id||(Fe.id=++st),++Fe.awaits,Fe.echoes+=xt,Fe.id}function zn(){return!!Fe.awaits&&(--Fe.awaits==0&&(Fe.id=0),Fe.echoes=Fe.awaits*xt,!0)}function fr(A){return Fe.echoes&&A&&A.constructor===Ft?(Dn(),A.then(function(j){return zn(),j},function(j){return zn(),Ur(j)})):A}function hr(){var A=Dt[Dt.length-1];Dt.pop(),Mn(A,!1)}function Mn(A,j){var K,te=ke;(j?!Fe.echoes||un++&&A===ke:!un||--un&&A===ke)||queueMicrotask(j?(function(ue){++zt,Fe.echoes&&--Fe.echoes!=0||(Fe.echoes=Fe.awaits=Fe.id=0),Dt.push(ke),Mn(ue,!0)}).bind(null,A):hr),A!==ke&&(ke=A,te===ve&&(ve.env=ai()),Tt&&(K=ve.env.Promise,j=A.env,(te.global||A.global)&&(Object.defineProperty(i,"Promise",j.PromiseProp),K.all=j.all,K.race=j.race,K.resolve=j.resolve,K.reject=j.reject,j.allSettled&&(K.allSettled=j.allSettled),j.any&&(K.any=j.any))))}function ai(){var A=i.Promise;return Tt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function is(A,j,K,te,ue){var _e=ke;try{return Mn(A,!0),j(K,te,ue)}finally{Mn(_e,!1)}}function os(A,j,K,te){return typeof A!="function"?A:function(){var ue=ke;K&&Dn(),Mn(j,!0);try{return A.apply(this,arguments)}finally{Mn(ue,!1),te&&queueMicrotask(zn)}}}function ss(A){Promise===Ft&&Fe.echoes===0?un===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+si).indexOf("[native code]")===-1&&(Dn=zn=Ie);var Ur=M.reject,ls="",Qi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Tg="String expected.",To=[],Gs="__dbnames",Di="readonly",_c="readwrite";function us(A,j){return A?j?function(){return A.apply(this,arguments)&&j.apply(this,arguments)}:A:j}var Ws={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wl(A){return typeof A!="string"||/\./.test(A)?function(j){return j}:function(j){return j[A]===void 0&&A in j&&delete(j=Z(j))[A],j}}function Dd(){throw Te.Type()}function Un(A,j){try{var K=ep(A),te=ep(j);if(K!==te)return K==="Array"?1:te==="Array"?-1:K==="binary"?1:te==="binary"?-1:K==="string"?1:te==="string"?-1:K==="Date"?1:te!=="Date"?NaN:-1;switch(K){case"number":case"Date":case"string":return j<A?1:A<j?-1:0;case"binary":return function(ue,_e){for(var je=ue.length,$e=_e.length,We=je<$e?je:$e,Ye=0;Ye<We;++Ye)if(ue[Ye]!==_e[Ye])return ue[Ye]<_e[Ye]?-1:1;return je===$e?0:je<$e?-1:1}(ii(A),ii(j));case"Array":return function(ue,_e){for(var je=ue.length,$e=_e.length,We=je<$e?je:$e,Ye=0;Ye<We;++Ye){var tt=Un(ue[Ye],_e[Ye]);if(tt!==0)return tt}return je===$e?0:je<$e?-1:1}(A,j)}}catch{}return NaN}function ep(A){var j=typeof A;return j!="object"?j:ArrayBuffer.isView(A)?"binary":(A=de(A),A==="ArrayBuffer"?"binary":A)}function ii(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var tp=(wr.prototype._trans=function(A,j,K){var te=this._tx||ke.trans,ue=this.name,_e=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function je(Ye,tt,He){if(!He.schema[ue])throw new Te.NotFound("Table "+ue+" not part of transaction");return j(He.idbtrans,He)}var $e=q();try{var We=te&&te.db._novip===this.db._novip?te===ke.trans?te._promise(A,je,K):Xt(function(){return te._promise(A,je,K)},{trans:te,transless:ke.transless||ke}):function Ye(tt,He,rt,Ge){if(tt.idbdb&&(tt._state.openComplete||ke.letThrough||tt._vip)){var Qe=tt._createTransaction(He,rt,tt._dbSchema);try{Qe.create(),tt._state.PR1398_maxLoop=3}catch(at){return at.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,He,rt,Ge)})):Ur(at)}return Qe._promise(He,function(at,Xe){return Xt(function(){return ke.trans=Qe,Ge(at,Xe,Qe)})}).then(function(at){if(He==="readwrite")try{Qe.idbtrans.commit()}catch{}return He==="readonly"?at:Qe._completion.then(function(){return at})})}if(tt._state.openComplete)return Ur(new Te.DatabaseClosed(tt._state.dbOpenError));if(!tt._state.isBeingOpened){if(!tt._state.autoOpen)return Ur(new Te.DatabaseClosed);tt.open().catch(Ie)}return tt._state.dbReadyPromise.then(function(){return Ye(tt,He,rt,Ge)})}(this.db,A,[this.name],je);return _e&&(We._consoleTask=_e,We=We.catch(function(Ye){return console.trace(Ye),Ur(Ye)})),We}finally{$e&&B()}},wr.prototype.get=function(A,j){var K=this;return A&&A.constructor===Object?this.where(A).first(j):A==null?Ur(new Te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(te){return K.core.get({trans:te,key:A}).then(function(ue){return K.hook.reading.fire(ue)})}).then(j)},wr.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(s(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var j=o(A);if(j.length===1)return this.where(j[0]).equals(A[j[0]]);var K=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&j.every(function(Ye){return 0<=$e.keyPath.indexOf(Ye)})){for(var We=0;We<j.length;++We)if(j.indexOf($e.keyPath[We])===-1)return!1;return!0}return!1}).sort(function($e,We){return $e.keyPath.length-We.keyPath.length})[0];if(K&&this.db._maxKey!==ls){var _e=K.keyPath.slice(0,j.length);return this.where(_e).equals(_e.map(function(We){return A[We]}))}!K&&Le&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(j.join("+"),"]"));var te=this.schema.idxByName;function ue($e,We){return Un($e,We)===0}var je=j.reduce(function(He,We){var Ye=He[0],tt=He[1],He=te[We],rt=A[We];return[Ye||He,Ye||!He?us(tt,He&&He.multi?function(Ge){return Ge=D(Ge,We),s(Ge)&&Ge.some(function(Qe){return ue(rt,Qe)})}:function(Ge){return ue(rt,D(Ge,We))}):tt]},[null,null]),_e=je[0],je=je[1];return _e?this.where(_e.name).equals(A[_e.keyPath]).filter(je):K?this.filter(je):this.where(j).equals("")},wr.prototype.filter=function(A){return this.toCollection().and(A)},wr.prototype.count=function(A){return this.toCollection().count(A)},wr.prototype.offset=function(A){return this.toCollection().offset(A)},wr.prototype.limit=function(A){return this.toCollection().limit(A)},wr.prototype.each=function(A){return this.toCollection().each(A)},wr.prototype.toArray=function(A){return this.toCollection().toArray(A)},wr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},wr.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,s(A)?"[".concat(A.join("+"),"]"):A))},wr.prototype.reverse=function(){return this.toCollection().reverse()},wr.prototype.mapToClass=function(A){var j,K=this.db,te=this.name;function ue(){return j!==null&&j.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof Dd&&(function(We,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function tt(){this.constructor=We}n(We,Ye),We.prototype=Ye===null?Object.create(Ye):(tt.prototype=Ye.prototype,new tt)}(ue,j=A),Object.defineProperty(ue.prototype,"db",{get:function(){return K},enumerable:!1,configurable:!0}),ue.prototype.table=function(){return te},A=ue);for(var _e=new Set,je=A.prototype;je;je=c(je))Object.getOwnPropertyNames(je).forEach(function(We){return _e.add(We)});function $e(We){if(!We)return We;var Ye,tt=Object.create(A.prototype);for(Ye in We)if(!_e.has(Ye))try{tt[Ye]=We[Ye]}catch{}return tt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),A},wr.prototype.defineClass=function(){return this.mapToClass(function(A){u(this,A)})},wr.prototype.add=function(A,j){var K=this,te=this.schema.primKey,ue=te.auto,_e=te.keyPath,je=A;return _e&&ue&&(je=Wl(_e)(A)),this._trans("readwrite",function($e){return K.core.mutate({trans:$e,type:"add",keys:j!=null?[j]:null,values:[je]})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(_e)try{O(A,_e,$e)}catch{}return $e})},wr.prototype.update=function(A,j){return typeof A!="object"||s(A)?this.where(":id").equals(A).modify(j):(A=D(A,this.schema.primKey.keyPath),A===void 0?Ur(new Te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(j))},wr.prototype.put=function(A,j){var K=this,te=this.schema.primKey,ue=te.auto,_e=te.keyPath,je=A;return _e&&ue&&(je=Wl(_e)(A)),this._trans("readwrite",function($e){return K.core.mutate({trans:$e,type:"put",values:[je],keys:j!=null?[j]:null})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(_e)try{O(A,_e,$e)}catch{}return $e})},wr.prototype.delete=function(A){var j=this;return this._trans("readwrite",function(K){return j.core.mutate({trans:K,type:"delete",keys:[A]})}).then(function(K){return K.numFailures?M.reject(K.failures[0]):void 0})},wr.prototype.clear=function(){var A=this;return this._trans("readwrite",function(j){return A.core.mutate({trans:j,type:"deleteRange",range:Ws})}).then(function(j){return j.numFailures?M.reject(j.failures[0]):void 0})},wr.prototype.bulkGet=function(A){var j=this;return this._trans("readonly",function(K){return j.core.getMany({keys:A,trans:K}).then(function(te){return te.map(function(ue){return j.hook.reading.fire(ue)})})})},wr.prototype.bulkAdd=function(A,j,K){var te=this,ue=Array.isArray(j)?j:void 0,_e=(K=K||(ue?void 0:j))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==A.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var We=A.length,Ye=Ye&&$e?A.map(Wl(Ye)):A;return te.core.mutate({trans:je,type:"add",keys:ue,values:Ye,wantResults:_e}).then(function(Qe){var He=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(He===0)return _e?rt:Ge;throw new Me("".concat(te.name,".bulkAdd(): ").concat(He," of ").concat(We," operations failed"),Qe)})})},wr.prototype.bulkPut=function(A,j,K){var te=this,ue=Array.isArray(j)?j:void 0,_e=(K=K||(ue?void 0:j))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==A.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var We=A.length,Ye=Ye&&$e?A.map(Wl(Ye)):A;return te.core.mutate({trans:je,type:"put",keys:ue,values:Ye,wantResults:_e}).then(function(Qe){var He=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(He===0)return _e?rt:Ge;throw new Me("".concat(te.name,".bulkPut(): ").concat(He," of ").concat(We," operations failed"),Qe)})})},wr.prototype.bulkUpdate=function(A){var j=this,K=this.core,te=A.map(function(je){return je.key}),ue=A.map(function(je){return je.changes}),_e=[];return this._trans("readwrite",function(je){return K.getMany({trans:je,keys:te,cache:"clone"}).then(function($e){var We=[],Ye=[];A.forEach(function(He,rt){var Ge=He.key,Qe=He.changes,at=$e[rt];if(at){for(var Xe=0,ft=Object.keys(Qe);Xe<ft.length;Xe++){var gt=ft[Xe],bt=Qe[gt];if(gt===j.schema.primKey.keyPath){if(Un(bt,Ge)!==0)throw new Te.Constraint("Cannot update primary key in bulkUpdate()")}else O(at,gt,bt)}_e.push(rt),We.push(Ge),Ye.push(at)}});var tt=We.length;return K.mutate({trans:je,type:"put",keys:We,values:Ye,updates:{keys:te,changeSpecs:ue}}).then(function(He){var rt=He.numFailures,Ge=He.failures;if(rt===0)return tt;for(var Qe=0,at=Object.keys(Ge);Qe<at.length;Qe++){var Xe,ft=at[Qe],gt=_e[Number(ft)];gt!=null&&(Xe=Ge[ft],delete Ge[ft],Ge[gt]=Xe)}throw new Me("".concat(j.name,".bulkUpdate(): ").concat(rt," of ").concat(tt," operations failed"),Ge)})})})},wr.prototype.bulkDelete=function(A){var j=this,K=A.length;return this._trans("readwrite",function(te){return j.core.mutate({trans:te,type:"delete",keys:A})}).then(function(je){var ue=je.numFailures,_e=je.lastResult,je=je.failures;if(ue===0)return _e;throw new Me("".concat(j.name,".bulkDelete(): ").concat(ue," of ").concat(K," operations failed"),je)})},wr);function wr(){}function cs(A){function j(je,$e){if($e){for(var We=arguments.length,Ye=new Array(We-1);--We;)Ye[We-1]=arguments[We];return K[je].subscribe.apply(null,Ye),A}if(typeof je=="string")return K[je]}var K={};j.addEventType=_e;for(var te=1,ue=arguments.length;te<ue;++te)_e(arguments[te]);return j;function _e(je,$e,We){if(typeof je!="object"){var Ye;$e=$e||Q;var tt={subscribers:[],fire:We=We||Ie,subscribe:function(He){tt.subscribers.indexOf(He)===-1&&(tt.subscribers.push(He),tt.fire=$e(tt.fire,He))},unsubscribe:function(He){tt.subscribers=tt.subscribers.filter(function(rt){return rt!==He}),tt.fire=tt.subscribers.reduce($e,We)}};return K[je]=j[je]=tt}o(Ye=je).forEach(function(He){var rt=Ye[He];if(s(rt))_e(He,Ye[He][0],Ye[He][1]);else{if(rt!=="asap")throw new Te.InvalidArgument("Invalid event config");var Ge=_e(He,Re,function(){for(var Qe=arguments.length,at=new Array(Qe);Qe--;)at[Qe]=arguments[Qe];Ge.subscribers.forEach(function(Xe){k(function(){Xe.apply(null,at)})})})}})}}function Kl(A,j){return b(j).from({prototype:A}),j}function Ro(A,j){return!(A.filter||A.algorithm||A.or)&&(j?A.justLimit:!A.replayFilter)}function np(A,j){A.filter=us(A.filter,j)}function za(A,j,K){var te=A.replayFilter;A.replayFilter=te?function(){return us(te(),j())}:j,A.justLimit=K&&!te}function Zl(A,j){if(A.isPrimKey)return j.primaryKey;var K=j.getIndexByKeyPath(A.index);if(!K)throw new Te.Schema("KeyPath "+A.index+" on object store "+j.name+" is not indexed");return K}function rp(A,j,K){var te=Zl(A,j.schema);return j.openCursor({trans:K,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:te,range:A.range}})}function Yl(A,j,K,te){var ue=A.replayFilter?us(A.filter,A.replayFilter()):A.filter;if(A.or){var _e={},je=function($e,We,Ye){var tt,He;ue&&!ue(We,Ye,function(rt){return We.stop(rt)},function(rt){return We.fail(rt)})||((He=""+(tt=We.primaryKey))=="[object ArrayBuffer]"&&(He=""+new Uint8Array(tt)),h(_e,He)||(_e[He]=!0,j($e,We,Ye)))};return Promise.all([A.or._iterate(je,K),Ks(rp(A,te,K),A.algorithm,je,!A.keysOnly&&A.valueMapper)])}return Ks(rp(A,te,K),us(A.algorithm,ue),j,!A.keysOnly&&A.valueMapper)}function Ks(A,j,K,te){var ue=fe(te?function(_e,je,$e){return K(te(_e),je,$e)}:K);return A.then(function(_e){if(_e)return _e.start(function(){var je=function(){return _e.continue()};j&&!j(_e,function($e){return je=$e},function($e){_e.stop($e),je=Ie},function($e){_e.fail($e),je=Ie})||ue(_e.value,_e,function($e){return je=$e}),je()})})}var Xl=(ap.prototype.execute=function(A){var j=this["@@propmod"];if(j.add!==void 0){var K=j.add;if(s(K))return a(a([],s(A)?A:[],!0),K).sort();if(typeof K=="number")return(Number(A)||0)+K;if(typeof K=="bigint")try{return BigInt(A)+K}catch{return BigInt(0)+K}throw new TypeError("Invalid term ".concat(K))}if(j.remove!==void 0){var te=j.remove;if(s(te))return s(A)?A.filter(function(ue){return!te.includes(ue)}).sort():[];if(typeof te=="number")return Number(A)-te;if(typeof te=="bigint")try{return BigInt(A)-te}catch{return BigInt(0)-te}throw new TypeError("Invalid subtrahend ".concat(te))}return K=(K=j.replacePrefix)===null||K===void 0?void 0:K[0],K&&typeof A=="string"&&A.startsWith(K)?j.replacePrefix[1]+A.substring(K.length):A},ap);function ap(A){this["@@propmod"]=A}var Jl=(Wn.prototype._read=function(A,j){var K=this._ctx;return K.error?K.table._trans(null,Ur.bind(null,K.error)):K.table._trans("readonly",A).then(j)},Wn.prototype._write=function(A){var j=this._ctx;return j.error?j.table._trans(null,Ur.bind(null,j.error)):j.table._trans("readwrite",A,"locked")},Wn.prototype._addAlgorithm=function(A){var j=this._ctx;j.algorithm=us(j.algorithm,A)},Wn.prototype._iterate=function(A,j){return Yl(this._ctx,A,j,this._ctx.table.core)},Wn.prototype.clone=function(A){var j=Object.create(this.constructor.prototype),K=Object.create(this._ctx);return A&&u(K,A),j._ctx=K,j},Wn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Wn.prototype.each=function(A){var j=this._ctx;return this._read(function(K){return Yl(j,A,K,j.table.core)})},Wn.prototype.count=function(A){var j=this;return this._read(function(K){var te=j._ctx,ue=te.table.core;if(Ro(te,!0))return ue.count({trans:K,query:{index:Zl(te,ue.schema),range:te.range}}).then(function(je){return Math.min(je,te.limit)});var _e=0;return Yl(te,function(){return++_e,!1},K,ue).then(function(){return _e})}).then(A)},Wn.prototype.sortBy=function(A,j){var K=A.split(".").reverse(),te=K[0],ue=K.length-1;function _e(We,Ye){return Ye?_e(We[K[Ye]],Ye-1):We[te]}var je=this._ctx.dir==="next"?1:-1;function $e(We,Ye){return Un(_e(We,ue),_e(Ye,ue))*je}return this.toArray(function(We){return We.sort($e)}).then(j)},Wn.prototype.toArray=function(A){var j=this;return this._read(function(K){var te=j._ctx;if(te.dir==="next"&&Ro(te,!0)&&0<te.limit){var ue=te.valueMapper,_e=Zl(te,te.table.core.schema);return te.table.core.query({trans:K,limit:te.limit,values:!0,query:{index:_e,range:te.range}}).then(function($e){return $e=$e.result,ue?$e.map(ue):$e})}var je=[];return Yl(te,function($e){return je.push($e)},K,te.table.core).then(function(){return je})},A)},Wn.prototype.offset=function(A){var j=this._ctx;return A<=0||(j.offset+=A,Ro(j)?za(j,function(){var K=A;return function(te,ue){return K===0||(K===1?--K:ue(function(){te.advance(K),K=0}),!1)}}):za(j,function(){var K=A;return function(){return--K<0}})),this},Wn.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),za(this._ctx,function(){var j=A;return function(K,te,ue){return--j<=0&&te(ue),0<=j}},!0),this},Wn.prototype.until=function(A,j){return np(this._ctx,function(K,te,ue){return!A(K.value)||(te(ue),j)}),this},Wn.prototype.first=function(A){return this.limit(1).toArray(function(j){return j[0]}).then(A)},Wn.prototype.last=function(A){return this.reverse().first(A)},Wn.prototype.filter=function(A){var j;return np(this._ctx,function(K){return A(K.value)}),(j=this._ctx).isMatch=us(j.isMatch,A),this},Wn.prototype.and=function(A){return this.filter(A)},Wn.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},Wn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Wn.prototype.desc=function(){return this.reverse()},Wn.prototype.eachKey=function(A){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(K,te){A(te.key,te)})},Wn.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},Wn.prototype.eachPrimaryKey=function(A){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(K,te){A(te.primaryKey,te)})},Wn.prototype.keys=function(A){var j=this._ctx;j.keysOnly=!j.isMatch;var K=[];return this.each(function(te,ue){K.push(ue.key)}).then(function(){return K}).then(A)},Wn.prototype.primaryKeys=function(A){var j=this._ctx;if(j.dir==="next"&&Ro(j,!0)&&0<j.limit)return this._read(function(te){var ue=Zl(j,j.table.core.schema);return j.table.core.query({trans:te,values:!1,limit:j.limit,query:{index:ue,range:j.range}})}).then(function(te){return te.result}).then(A);j.keysOnly=!j.isMatch;var K=[];return this.each(function(te,ue){K.push(ue.primaryKey)}).then(function(){return K}).then(A)},Wn.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},Wn.prototype.firstKey=function(A){return this.limit(1).keys(function(j){return j[0]}).then(A)},Wn.prototype.lastKey=function(A){return this.reverse().firstKey(A)},Wn.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var j={};return np(this._ctx,function(ue){var te=ue.primaryKey.toString(),ue=h(j,te);return j[te]=!0,!ue}),this},Wn.prototype.modify=function(A){var j=this,K=this._ctx;return this._write(function(te){var ue,_e,je;je=typeof A=="function"?A:(ue=o(A),_e=ue.length,function(Xe){for(var ft=!1,gt=0;gt<_e;++gt){var bt=ue[gt],wt=A[bt],jt=D(Xe,bt);wt instanceof Xl?(O(Xe,bt,wt.execute(jt)),ft=!0):jt!==wt&&(O(Xe,bt,wt),ft=!0)}return ft});var $e=K.table.core,He=$e.schema.primaryKey,We=He.outbound,Ye=He.extractKey,tt=200,He=j.db._options.modifyChunkSize;He&&(tt=typeof He=="object"?He[$e.name]||He["*"]||200:He);function rt(Xe,bt){var gt=bt.failures,bt=bt.numFailures;Qe+=Xe-bt;for(var wt=0,jt=o(gt);wt<jt.length;wt++){var qt=jt[wt];Ge.push(gt[qt])}}var Ge=[],Qe=0,at=[];return j.clone().primaryKeys().then(function(Xe){function ft(bt){var wt=Math.min(tt,Xe.length-bt);return $e.getMany({trans:te,keys:Xe.slice(bt,bt+wt),cache:"immutable"}).then(function(jt){for(var qt=[],Nt=[],Lt=We?[]:null,Vt=[],It=0;It<wt;++It){var Zt=jt[It],cn={value:Z(Zt),primKey:Xe[bt+It]};je.call(cn,cn.value,cn)!==!1&&(cn.value==null?Vt.push(Xe[bt+It]):We||Un(Ye(Zt),Ye(cn.value))===0?(Nt.push(cn.value),We&&Lt.push(Xe[bt+It])):(Vt.push(Xe[bt+It]),qt.push(cn.value)))}return Promise.resolve(0<qt.length&&$e.mutate({trans:te,type:"add",values:qt}).then(function(dn){for(var Cn in dn.failures)Vt.splice(parseInt(Cn),1);rt(qt.length,dn)})).then(function(){return(0<Nt.length||gt&&typeof A=="object")&&$e.mutate({trans:te,type:"put",keys:Lt,values:Nt,criteria:gt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<bt}).then(function(dn){return rt(Nt.length,dn)})}).then(function(){return(0<Vt.length||gt&&A===jd)&&$e.mutate({trans:te,type:"delete",keys:Vt,criteria:gt,isAdditionalChunk:0<bt}).then(function(dn){return rt(Vt.length,dn)})}).then(function(){return Xe.length>bt+wt&&ft(bt+tt)})})}var gt=Ro(K)&&K.limit===1/0&&(typeof A!="function"||A===jd)&&{index:K.index,range:K.range};return ft(0).then(function(){if(0<Ge.length)throw new we("Error modifying one or more objects",Ge,Qe,at);return Xe.length})})})},Wn.prototype.delete=function(){var A=this._ctx,j=A.range;return Ro(A)&&(A.isPrimKey||j.type===3)?this._write(function(K){var te=A.table.core.schema.primaryKey,ue=j;return A.table.core.count({trans:K,query:{index:te,range:ue}}).then(function(_e){return A.table.core.mutate({trans:K,type:"deleteRange",range:ue}).then(function(je){var $e=je.failures;if(je.lastResult,je.results,je=je.numFailures,je)throw new we("Could not delete some values",Object.keys($e).map(function(We){return $e[We]}),_e-je);return _e-je})})}):this.modify(jd)},Wn);function Wn(){}var jd=function(A,j){return j.value=null};function Rg(A,j){return A<j?-1:A===j?0:1}function ip(A,j){return j<A?-1:A===j?0:1}function oi(A,j,K){return A=A instanceof Ys?new A.Collection(A):A,A._ctx.error=new(K||TypeError)(j),A}function Ql(A){return new A.Collection(A,function(){return Md("")}).limit(0)}function Zs(A,j,K,te){var ue,_e,je,$e,We,Ye,tt,He=K.length;if(!K.every(function(Qe){return typeof Qe=="string"}))return oi(A,Tg);function rt(Qe){ue=Qe==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},_e=Qe==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},je=Qe==="next"?Rg:ip;var at=K.map(function(Xe){return{lower:_e(Xe),upper:ue(Xe)}}).sort(function(Xe,ft){return je(Xe.lower,ft.lower)});$e=at.map(function(Xe){return Xe.upper}),We=at.map(function(Xe){return Xe.lower}),tt=(Ye=Qe)==="next"?"":te}rt("next"),A=new A.Collection(A,function(){return eo($e[0],We[He-1]+te)}),A._ondirectionchange=function(Qe){rt(Qe)};var Ge=0;return A._addAlgorithm(function(Qe,at,Xe){var ft=Qe.key;if(typeof ft!="string")return!1;var gt=_e(ft);if(j(gt,We,Ge))return!0;for(var bt=null,wt=Ge;wt<He;++wt){var jt=function(qt,Nt,Lt,Vt,It,Zt){for(var cn=Math.min(qt.length,Vt.length),dn=-1,Cn=0;Cn<cn;++Cn){var ja=Nt[Cn];if(ja!==Vt[Cn])return It(qt[Cn],Lt[Cn])<0?qt.substr(0,Cn)+Lt[Cn]+Lt.substr(Cn+1):It(qt[Cn],Vt[Cn])<0?qt.substr(0,Cn)+Vt[Cn]+Lt.substr(Cn+1):0<=dn?qt.substr(0,dn)+Nt[dn]+Lt.substr(dn+1):null;It(qt[Cn],ja)<0&&(dn=Cn)}return cn<Vt.length&&Zt==="next"?qt+Lt.substr(qt.length):cn<qt.length&&Zt==="prev"?qt.substr(0,Lt.length):dn<0?null:qt.substr(0,dn)+Vt[dn]+Lt.substr(dn+1)}(ft,gt,$e[wt],We[wt],je,Ye);jt===null&&bt===null?Ge=wt+1:(bt===null||0<je(bt,jt))&&(bt=jt)}return at(bt!==null?function(){Qe.continue(bt+tt)}:Xe),!1}),A}function eo(A,j,K,te){return{type:2,lower:A,upper:j,lowerOpen:K,upperOpen:te}}function Md(A){return{type:1,lower:A,upper:A}}var Ys=(Object.defineProperty(Ir.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ir.prototype.between=function(A,j,K,te){K=K!==!1,te=te===!0;try{return 0<this._cmp(A,j)||this._cmp(A,j)===0&&(K||te)&&(!K||!te)?Ql(this):new this.Collection(this,function(){return eo(A,j,!K,!te)})}catch{return oi(this,Qi)}},Ir.prototype.equals=function(A){return A==null?oi(this,Qi):new this.Collection(this,function(){return Md(A)})},Ir.prototype.above=function(A){return A==null?oi(this,Qi):new this.Collection(this,function(){return eo(A,void 0,!0)})},Ir.prototype.aboveOrEqual=function(A){return A==null?oi(this,Qi):new this.Collection(this,function(){return eo(A,void 0,!1)})},Ir.prototype.below=function(A){return A==null?oi(this,Qi):new this.Collection(this,function(){return eo(void 0,A,!1,!0)})},Ir.prototype.belowOrEqual=function(A){return A==null?oi(this,Qi):new this.Collection(this,function(){return eo(void 0,A)})},Ir.prototype.startsWith=function(A){return typeof A!="string"?oi(this,Tg):this.between(A,A+ls,!0,!0)},Ir.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):Zs(this,function(j,K){return j.indexOf(K[0])===0},[A],ls)},Ir.prototype.equalsIgnoreCase=function(A){return Zs(this,function(j,K){return j===K[0]},[A],"")},Ir.prototype.anyOfIgnoreCase=function(){var A=W.apply(se,arguments);return A.length===0?Ql(this):Zs(this,function(j,K){return K.indexOf(j)!==-1},A,"")},Ir.prototype.startsWithAnyOfIgnoreCase=function(){var A=W.apply(se,arguments);return A.length===0?Ql(this):Zs(this,function(j,K){return K.some(function(te){return j.indexOf(te)===0})},A,ls)},Ir.prototype.anyOf=function(){var A=this,j=W.apply(se,arguments),K=this._cmp;try{j.sort(K)}catch{return oi(this,Qi)}if(j.length===0)return Ql(this);var te=new this.Collection(this,function(){return eo(j[0],j[j.length-1])});te._ondirectionchange=function(_e){K=_e==="next"?A._ascending:A._descending,j.sort(K)};var ue=0;return te._addAlgorithm(function(_e,je,$e){for(var We=_e.key;0<K(We,j[ue]);)if(++ue===j.length)return je($e),!1;return K(We,j[ue])===0||(je(function(){_e.continue(j[ue])}),!1)}),te},Ir.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ir.prototype.noneOf=function(){var A=W.apply(se,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return oi(this,Qi)}var j=A.reduce(function(K,te){return K?K.concat([[K[K.length-1][1],te]]):[[-1/0,te]]},null);return j.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(j,{includeLowers:!1,includeUppers:!1})},Ir.prototype.inAnyRange=function(ft,j){var K=this,te=this._cmp,ue=this._ascending,_e=this._descending,je=this._min,$e=this._max;if(ft.length===0)return Ql(this);if(!ft.every(function(gt){return gt[0]!==void 0&&gt[1]!==void 0&&ue(gt[0],gt[1])<=0}))return oi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Te.InvalidArgument);var We=!j||j.includeLowers!==!1,Ye=j&&j.includeUppers===!0,tt,He=ue;function rt(gt,bt){return He(gt[0],bt[0])}try{(tt=ft.reduce(function(gt,bt){for(var wt=0,jt=gt.length;wt<jt;++wt){var qt=gt[wt];if(te(bt[0],qt[1])<0&&0<te(bt[1],qt[0])){qt[0]=je(qt[0],bt[0]),qt[1]=$e(qt[1],bt[1]);break}}return wt===jt&&gt.push(bt),gt},[])).sort(rt)}catch{return oi(this,Qi)}var Ge=0,Qe=Ye?function(gt){return 0<ue(gt,tt[Ge][1])}:function(gt){return 0<=ue(gt,tt[Ge][1])},at=We?function(gt){return 0<_e(gt,tt[Ge][0])}:function(gt){return 0<=_e(gt,tt[Ge][0])},Xe=Qe,ft=new this.Collection(this,function(){return eo(tt[0][0],tt[tt.length-1][1],!We,!Ye)});return ft._ondirectionchange=function(gt){He=gt==="next"?(Xe=Qe,ue):(Xe=at,_e),tt.sort(rt)},ft._addAlgorithm(function(gt,bt,wt){for(var jt,qt=gt.key;Xe(qt);)if(++Ge===tt.length)return bt(wt),!1;return!Qe(jt=qt)&&!at(jt)||(K._cmp(qt,tt[Ge][1])===0||K._cmp(qt,tt[Ge][0])===0||bt(function(){He===ue?gt.continue(tt[Ge][0]):gt.continue(tt[Ge][1])}),!1)}),ft},Ir.prototype.startsWithAnyOf=function(){var A=W.apply(se,arguments);return A.every(function(j){return typeof j=="string"})?A.length===0?Ql(this):this.inAnyRange(A.map(function(j){return[j,j+ls]})):oi(this,"startsWithAnyOf() only works with strings")},Ir);function Ir(){}function ji(A){return fe(function(j){return Xs(j),A(j.target.error),!1})}function Xs(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var eu="storagemutated",Js="x-storagemutated-1",va=cs(null,eu),op=(Ua.prototype._lock=function(){return C(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},Ua.prototype._unlock=function(){if(C(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{is(A[1],A[0])}catch{}}return this},Ua.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},Ua.prototype.create=function(A){var j=this;if(!this.mode)return this;var K=this.db.idbdb,te=this.db._state.dbOpenError;if(C(!this.idbtrans),!A&&!K)switch(te&&te.name){case"DatabaseClosedError":throw new Te.DatabaseClosed(te);case"MissingAPIError":throw new Te.MissingAPI(te.message,te);default:throw new Te.OpenFailed(te)}if(!this.active)throw new Te.TransactionInactive;return C(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||K).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=fe(function(ue){Xs(ue),j._reject(A.error)}),A.onabort=fe(function(ue){Xs(ue),j.active&&j._reject(new Te.Abort(A.error)),j.active=!1,j.on("abort").fire(ue)}),A.oncomplete=fe(function(){j.active=!1,j._resolve(),"mutatedParts"in A&&va.storagemutated.fire(A.mutatedParts)}),this},Ua.prototype._promise=function(A,j,K){var te=this;if(A==="readwrite"&&this.mode!=="readwrite")return Ur(new Te.ReadOnly("Transaction is readonly"));if(!this.active)return Ur(new Te.TransactionInactive);if(this._locked())return new M(function(_e,je){te._blockedFuncs.push([function(){te._promise(A,j,K).then(_e,je)},ke])});if(K)return Xt(function(){var _e=new M(function(je,$e){te._lock();var We=j(je,$e,te);We&&We.then&&We.then(je,$e)});return _e.finally(function(){return te._unlock()}),_e._lib=!0,_e});var ue=new M(function(_e,je){var $e=j(_e,je,te);$e&&$e.then&&$e.then(_e,je)});return ue._lib=!0,ue},Ua.prototype._root=function(){return this.parent?this.parent._root():this},Ua.prototype.waitFor=function(A){var j,K=this._root(),te=M.resolve(A);K._waitingFor?K._waitingFor=K._waitingFor.then(function(){return te}):(K._waitingFor=te,K._waitingQueue=[],j=K.idbtrans.objectStore(K.storeNames[0]),function _e(){for(++K._spinCount;K._waitingQueue.length;)K._waitingQueue.shift()();K._waitingFor&&(j.get(-1/0).onsuccess=_e)}());var ue=K._waitingFor;return new M(function(_e,je){te.then(function($e){return K._waitingQueue.push(fe(_e.bind(null,$e)))},function($e){return K._waitingQueue.push(fe(je.bind(null,$e)))}).finally(function(){K._waitingFor===ue&&(K._waitingFor=null)})})},Ua.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Te.Abort))},Ua.prototype.table=function(A){var j=this._memoizedTables||(this._memoizedTables={});if(h(j,A))return j[A];var K=this.schema[A];if(!K)throw new Te.NotFound("Table "+A+" not part of transaction");return K=new this.db.Table(A,K,this),K.core=this.db.core.table(A),j[A]=K},Ua);function Ua(){}function to(A,j,K,te,ue,_e,je){return{name:A,keyPath:j,unique:K,multi:te,auto:ue,compound:_e,src:(K&&!je?"&":"")+(te?"*":"")+(ue?"++":"")+Pd(j)}}function Pd(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function tu(A,j,K){return{name:A,primKey:j,indexes:K,mappedClass:null,idxByName:(te=function(ue){return[ue.name,ue]},K.reduce(function(ue,_e,je){return je=te(_e,je),je&&(ue[je[0]]=je[1]),ue},{}))};var te}var nu=function(A){try{return A.only([[]]),nu=function(){return[[]]},[[]]}catch{return nu=function(){return ls},ls}};function ru(A){return A==null?function(){}:typeof A=="string"?(j=A).split(".").length===1?function(K){return K[j]}:function(K){return D(K,j)}:function(K){return D(K,A)};var j}function xc(A){return[].slice.call(A)}var Ng=0;function aa(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function Qs(A,j,We){function te(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Xe.lower,Qe=Xe.upper,at=Xe.lowerOpen,Xe=Xe.upperOpen;return Ge===void 0?Qe===void 0?null:j.upperBound(Qe,!!Xe):Qe===void 0?j.lowerBound(Ge,!!at):j.bound(Ge,Qe,!!at,!!Xe)}function ue(rt){var Ge,Qe=rt.name;return{name:Qe,schema:rt,mutate:function(at){var Xe=at.trans,ft=at.type,gt=at.keys,bt=at.values,wt=at.range;return new Promise(function(jt,qt){jt=fe(jt);var Nt=Xe.objectStore(Qe),Lt=Nt.keyPath==null,Vt=ft==="put"||ft==="add";if(!Vt&&ft!=="delete"&&ft!=="deleteRange")throw new Error("Invalid operation type: "+ft);var It,Zt=(gt||bt||{length:1}).length;if(gt&&bt&&gt.length!==bt.length)throw new Error("Given keys array must have same length as given values array.");if(Zt===0)return jt({numFailures:0,failures:{},results:[],lastResult:void 0});function cn(_a){++ja,Xs(_a)}var dn=[],Cn=[],ja=0;if(ft==="deleteRange"){if(wt.type===4)return jt({numFailures:ja,failures:Cn,results:[],lastResult:void 0});wt.type===3?dn.push(It=Nt.clear()):dn.push(It=Nt.delete(te(wt)))}else{var Lt=Vt?Lt?[bt,gt]:[bt,null]:[gt,null],yn=Lt[0],Jr=Lt[1];if(Vt)for(var ia=0;ia<Zt;++ia)dn.push(It=Jr&&Jr[ia]!==void 0?Nt[ft](yn[ia],Jr[ia]):Nt[ft](yn[ia])),It.onerror=cn;else for(ia=0;ia<Zt;++ia)dn.push(It=Nt[ft](yn[ia])),It.onerror=cn}function No(_a){_a=_a.target.result,dn.forEach(function(ro,ps){return ro.error!=null&&(Cn[ps]=ro.error)}),jt({numFailures:ja,failures:Cn,results:ft==="delete"?gt:dn.map(function(ro){return ro.result}),lastResult:_a})}It.onerror=function(_a){cn(_a),No(_a)},It.onsuccess=No})},getMany:function(at){var Xe=at.trans,ft=at.keys;return new Promise(function(gt,bt){gt=fe(gt);for(var wt,jt=Xe.objectStore(Qe),qt=ft.length,Nt=new Array(qt),Lt=0,Vt=0,It=function(dn){dn=dn.target,Nt[dn._pos]=dn.result,++Vt===Lt&&gt(Nt)},Zt=ji(bt),cn=0;cn<qt;++cn)ft[cn]!=null&&((wt=jt.get(ft[cn]))._pos=cn,wt.onsuccess=It,wt.onerror=Zt,++Lt);Lt===0&&gt(Nt)})},get:function(at){var Xe=at.trans,ft=at.key;return new Promise(function(gt,bt){gt=fe(gt);var wt=Xe.objectStore(Qe).get(ft);wt.onsuccess=function(jt){return gt(jt.target.result)},wt.onerror=ji(bt)})},query:(Ge=Ye,function(at){return new Promise(function(Xe,ft){Xe=fe(Xe);var gt,bt,wt,Lt=at.trans,jt=at.values,qt=at.limit,It=at.query,Nt=qt===1/0?void 0:qt,Vt=It.index,It=It.range,Lt=Lt.objectStore(Qe),Vt=Vt.isPrimaryKey?Lt:Lt.index(Vt.name),It=te(It);if(qt===0)return Xe({result:[]});Ge?((Nt=jt?Vt.getAll(It,Nt):Vt.getAllKeys(It,Nt)).onsuccess=function(Zt){return Xe({result:Zt.target.result})},Nt.onerror=ji(ft)):(gt=0,bt=!jt&&"openKeyCursor"in Vt?Vt.openKeyCursor(It):Vt.openCursor(It),wt=[],bt.onsuccess=function(Zt){var cn=bt.result;return cn?(wt.push(jt?cn.value:cn.primaryKey),++gt===qt?Xe({result:wt}):void cn.continue()):Xe({result:wt})},bt.onerror=ji(ft))})}),openCursor:function(at){var Xe=at.trans,ft=at.values,gt=at.query,bt=at.reverse,wt=at.unique;return new Promise(function(jt,qt){jt=fe(jt);var Vt=gt.index,Nt=gt.range,Lt=Xe.objectStore(Qe),Lt=Vt.isPrimaryKey?Lt:Lt.index(Vt.name),Vt=bt?wt?"prevunique":"prev":wt?"nextunique":"next",It=!ft&&"openKeyCursor"in Lt?Lt.openKeyCursor(te(Nt),Vt):Lt.openCursor(te(Nt),Vt);It.onerror=ji(qt),It.onsuccess=fe(function(Zt){var cn,dn,Cn,ja,yn=It.result;yn?(yn.___id=++Ng,yn.done=!1,cn=yn.continue.bind(yn),dn=(dn=yn.continuePrimaryKey)&&dn.bind(yn),Cn=yn.advance.bind(yn),ja=function(){throw new Error("Cursor not stopped")},yn.trans=Xe,yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=function(){throw new Error("Cursor not started")},yn.fail=fe(qt),yn.next=function(){var Jr=this,ia=1;return this.start(function(){return ia--?Jr.continue():Jr.stop()}).then(function(){return Jr})},yn.start=function(Jr){function ia(){if(It.result)try{Jr()}catch(_a){yn.fail(_a)}else yn.done=!0,yn.start=function(){throw new Error("Cursor behind last entry")},yn.stop()}var No=new Promise(function(_a,ro){_a=fe(_a),It.onerror=ji(ro),yn.fail=ro,yn.stop=function(ps){yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=ja,_a(ps)}});return It.onsuccess=fe(function(_a){It.onsuccess=ia,ia()}),yn.continue=cn,yn.continuePrimaryKey=dn,yn.advance=Cn,ia(),No},jt(yn)):jt(null)},qt)})},count:function(at){var Xe=at.query,ft=at.trans,gt=Xe.index,bt=Xe.range;return new Promise(function(wt,jt){var qt=ft.objectStore(Qe),Nt=gt.isPrimaryKey?qt:qt.index(gt.name),qt=te(bt),Nt=qt?Nt.count(qt):Nt.count();Nt.onsuccess=fe(function(Lt){return wt(Lt.target.result)}),Nt.onerror=ji(jt)})}}}var _e,je,$e,tt=(je=We,$e=xc((_e=A).objectStoreNames),{schema:{name:_e.name,tables:$e.map(function(rt){return je.objectStore(rt)}).map(function(rt){var Ge=rt.keyPath,Xe=rt.autoIncrement,Qe=s(Ge),at={},Xe={name:rt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:Qe,keyPath:Ge,autoIncrement:Xe,unique:!0,extractKey:ru(Ge)},indexes:xc(rt.indexNames).map(function(ft){return rt.index(ft)}).map(function(wt){var gt=wt.name,bt=wt.unique,jt=wt.multiEntry,wt=wt.keyPath,jt={name:gt,compound:s(wt),keyPath:wt,unique:bt,multiEntry:jt,extractKey:ru(wt)};return at[aa(wt)]=jt}),getIndexByKeyPath:function(ft){return at[aa(ft)]}};return at[":id"]=Xe.primaryKey,Ge!=null&&(at[aa(Ge)]=Xe.primaryKey),Xe})},hasGetAll:0<$e.length&&"getAll"in je.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=tt.schema,Ye=tt.hasGetAll,tt=We.tables.map(ue),He={};return tt.forEach(function(rt){return He[rt.name]=rt}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(rt){if(!He[rt])throw new Error("Table '".concat(rt,"' not found"));return He[rt]},MIN_KEY:-1/0,MAX_KEY:nu(j),schema:We}}function Fd(A,j,K,te){var ue=K.IDBKeyRange;return K.indexedDB,{dbcore:(te=Qs(j,ue,te),A.dbcore.reduce(function(_e,je){return je=je.create,r(r({},_e),je(_e))},te))}}function ds(A,te){var K=te.db,te=Fd(A._middlewares,K,A._deps,te);A.core=te.dbcore,A.tables.forEach(function(ue){var _e=ue.name;A.core.schema.tables.some(function(je){return je.name===_e})&&(ue.core=A.core.table(_e),A[_e]instanceof A.Table&&(A[_e].core=ue.core))})}function Ld(A,j,K,te){K.forEach(function(ue){var _e=te[ue];j.forEach(function(je){var $e=function We(Ye,tt){return _(Ye,tt)||(Ye=c(Ye))&&We(Ye,tt)}(je,ue);(!$e||"value"in $e&&$e.value===void 0)&&(je===A.Transaction.prototype||je instanceof A.Transaction?v(je,ue,{get:function(){return this.table(ue)},set:function(We){g(this,ue,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):je[ue]=new A.Table(ue,_e))})})}function Sc(A,j){j.forEach(function(K){for(var te in K)K[te]instanceof A.Table&&delete K[te]})}function sp(A,j){return A._cfg.version-j._cfg.version}function Ec(A,j,K,te){var ue=A._dbSchema;K.objectStoreNames.contains("$meta")&&!ue.$meta&&(ue.$meta=tu("$meta",Og("")[0],[]),A._storeNames.push("$meta"));var _e=A._createTransaction("readwrite",A._storeNames,ue);_e.create(K),_e._completion.catch(te);var je=_e._reject.bind(_e),$e=ke.transless||ke;Xt(function(){return ke.trans=_e,ke.transless=$e,j!==0?(ds(A,K),Ye=j,((We=_e).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(tt){return tt??Ye}):M.resolve(Ye)).then(function(tt){return rt=tt,Ge=_e,Qe=K,at=[],tt=(He=A)._versions,Xe=He._dbSchema=au(0,He.idbdb,Qe),(tt=tt.filter(function(ft){return ft._cfg.version>=rt})).length!==0?(tt.forEach(function(ft){at.push(function(){var gt=Xe,bt=ft._cfg.dbschema;Ud(He,gt,Qe),Ud(He,bt,Qe),Xe=He._dbSchema=bt;var wt=Bd(gt,bt);wt.add.forEach(function(Vt){lp(Qe,Vt[0],Vt[1].primKey,Vt[1].indexes)}),wt.change.forEach(function(Vt){if(Vt.recreate)throw new Te.Upgrade("Not yet support for changing primary key");var It=Qe.objectStore(Vt.name);Vt.add.forEach(function(Zt){return zd(It,Zt)}),Vt.change.forEach(function(Zt){It.deleteIndex(Zt.name),zd(It,Zt)}),Vt.del.forEach(function(Zt){return It.deleteIndex(Zt)})});var jt=ft._cfg.contentUpgrade;if(jt&&ft._cfg.version>rt){ds(He,Qe),Ge._memoizedTables={};var qt=N(bt);wt.del.forEach(function(Vt){qt[Vt]=gt[Vt]}),Sc(He,[He.Transaction.prototype]),Ld(He,[He.Transaction.prototype],o(qt),qt),Ge.schema=qt;var Nt,Lt=J(jt);return Lt&&Dn(),wt=M.follow(function(){var Vt;(Nt=jt(Ge))&&Lt&&(Vt=zn.bind(null,null),Nt.then(Vt,Vt))}),Nt&&typeof Nt.then=="function"?M.resolve(Nt):wt.then(function(){return Nt})}}),at.push(function(gt){var bt,wt,jt=ft._cfg.dbschema;bt=jt,wt=gt,[].slice.call(wt.db.objectStoreNames).forEach(function(qt){return bt[qt]==null&&wt.db.deleteObjectStore(qt)}),Sc(He,[He.Transaction.prototype]),Ld(He,[He.Transaction.prototype],He._storeNames,He._dbSchema),Ge.schema=He._dbSchema}),at.push(function(gt){He.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(He.idbdb.version/10)===ft._cfg.version?(He.idbdb.deleteObjectStore("$meta"),delete He._dbSchema.$meta,He._storeNames=He._storeNames.filter(function(bt){return bt!=="$meta"})):gt.objectStore("$meta").put(ft._cfg.version,"version"))})}),function ft(){return at.length?M.resolve(at.shift()(Ge.idbtrans)).then(ft):M.resolve()}().then(function(){Ig(Xe,Qe)})):M.resolve();var He,rt,Ge,Qe,at,Xe}).catch(je)):(o(ue).forEach(function(tt){lp(K,tt,ue[tt].primKey,ue[tt].indexes)}),ds(A,K),void M.follow(function(){return A.on.populate.fire(_e)}).catch(je));var We,Ye})}function $d(A,j){Ig(A._dbSchema,j),j.db.version%10!=0||j.objectStoreNames.contains("$meta")||j.db.createObjectStore("$meta").add(Math.ceil(j.db.version/10-1),"version");var K=au(0,A.idbdb,j);Ud(A,A._dbSchema,j);for(var te=0,ue=Bd(K,A._dbSchema).change;te<ue.length;te++){var _e=function(je){if(je.change.length||je.recreate)return console.warn("Unable to patch indexes of table ".concat(je.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=j.objectStore(je.name);je.add.forEach(function(We){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(je.name,".").concat(We.src)),zd($e,We)})}(ue[te]);if(typeof _e=="object")return _e.value}}function Bd(A,j){var K,te={del:[],add:[],change:[]};for(K in A)j[K]||te.del.push(K);for(K in j){var ue=A[K],_e=j[K];if(ue){var je={name:K,def:_e,recreate:!1,del:[],add:[],change:[]};if(""+(ue.primKey.keyPath||"")!=""+(_e.primKey.keyPath||"")||ue.primKey.auto!==_e.primKey.auto)je.recreate=!0,te.change.push(je);else{var $e=ue.idxByName,We=_e.idxByName,Ye=void 0;for(Ye in $e)We[Ye]||je.del.push(Ye);for(Ye in We){var tt=$e[Ye],He=We[Ye];tt?tt.src!==He.src&&je.change.push(He):je.add.push(He)}(0<je.del.length||0<je.add.length||0<je.change.length)&&te.change.push(je)}}else te.add.push([K,_e])}return te}function lp(A,j,K,te){var ue=A.db.createObjectStore(j,K.keyPath?{keyPath:K.keyPath,autoIncrement:K.auto}:{autoIncrement:K.auto});return te.forEach(function(_e){return zd(ue,_e)}),ue}function Ig(A,j){o(A).forEach(function(K){j.db.objectStoreNames.contains(K)||(Le&&console.debug("Dexie: Creating missing table",K),lp(j,K,A[K].primKey,A[K].indexes))})}function zd(A,j){A.createIndex(j.name,j.keyPath,{unique:j.unique,multiEntry:j.multi})}function au(A,j,K){var te={};return S(j.objectStoreNames,0).forEach(function(ue){for(var _e=K.objectStore(ue),je=to(Pd(Ye=_e.keyPath),Ye||"",!0,!1,!!_e.autoIncrement,Ye&&typeof Ye!="string",!0),$e=[],We=0;We<_e.indexNames.length;++We){var tt=_e.index(_e.indexNames[We]),Ye=tt.keyPath,tt=to(tt.name,Ye,!!tt.unique,!!tt.multiEntry,!1,Ye&&typeof Ye!="string",!1);$e.push(tt)}te[ue]=tu(ue,je,$e)}),te}function Ud(A,j,K){for(var te=K.db.objectStoreNames,ue=0;ue<te.length;++ue){var _e=te[ue],je=K.objectStore(_e);A._hasGetAll="getAll"in je;for(var $e=0;$e<je.indexNames.length;++$e){var We=je.indexNames[$e],Ye=je.index(We).keyPath,tt=typeof Ye=="string"?Ye:"["+S(Ye).join("+")+"]";!j[_e]||(Ye=j[_e].idxByName[tt])&&(Ye.name=We,delete j[_e].idxByName[tt],j[_e].idxByName[We]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function Og(A){return A.split(",").map(function(j,K){var te=(j=j.trim()).replace(/([&*]|\+\+)/g,""),ue=/^\[/.test(te)?te.match(/^\[(.*)\]$/)[1].split("+"):te;return to(te,ue||null,/\&/.test(j),/\*/.test(j),/\+\+/.test(j),s(ue),K===0)})}var P1=(qd.prototype._parseStoresSpec=function(A,j){o(A).forEach(function(K){if(A[K]!==null){var te=Og(A[K]),ue=te.shift();if(ue.unique=!0,ue.multi)throw new Te.Schema("Primary key cannot be multi-valued");te.forEach(function(_e){if(_e.auto)throw new Te.Schema("Only primary key can be marked as autoIncrement (++)");if(!_e.keyPath)throw new Te.Schema("Index must have a name and cannot be an empty string")}),j[K]=tu(K,ue,te)}})},qd.prototype.stores=function(K){var j=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,K):K;var K=j._versions,te={},ue={};return K.forEach(function(_e){u(te,_e._cfg.storesSource),ue=_e._cfg.dbschema={},_e._parseStoresSpec(te,ue)}),j._dbSchema=ue,Sc(j,[j._allTables,j,j.Transaction.prototype]),Ld(j,[j._allTables,j,j.Transaction.prototype,this._cfg.tables],o(ue),ue),j._storeNames=o(ue),this},qd.prototype.upgrade=function(A){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Ie,A),this},qd);function qd(){}function up(A,j){var K=A._dbNamesDB;return K||(K=A._dbNamesDB=new no(Gs,{addons:[],indexedDB:A,IDBKeyRange:j})).version(1).stores({dbnames:"name"}),K.table("dbnames")}function Hd(A){return A&&typeof A.databases=="function"}function cp(A){return Xt(function(){return ke.letThrough=!0,A()})}function dp(A){return!("from"in A)}var wa=function(A,j){if(!this){var K=new wa;return A&&"d"in A&&u(K,A),K}u(this,arguments.length?{d:1,from:A,to:1<arguments.length?j:A}:{d:0})};function Cc(A,j,K){var te=Un(j,K);if(!isNaN(te)){if(0<te)throw RangeError();if(dp(A))return u(A,{from:j,to:K,d:1});var ue=A.l,te=A.r;if(Un(K,A.from)<0)return ue?Cc(ue,j,K):A.l={from:j,to:K,d:1,l:null,r:null},jg(A);if(0<Un(j,A.to))return te?Cc(te,j,K):A.r={from:j,to:K,d:1,l:null,r:null},jg(A);Un(j,A.from)<0&&(A.from=j,A.l=null,A.d=te?te.d+1:1),0<Un(K,A.to)&&(A.to=K,A.r=null,A.d=A.l?A.l.d+1:1),K=!A.r,ue&&!A.l&&el(A,ue),te&&K&&el(A,te)}}function el(A,j){dp(j)||function K(te,We){var _e=We.from,je=We.to,$e=We.l,We=We.r;Cc(te,_e,je),$e&&K(te,$e),We&&K(te,We)}(A,j)}function Dg(A,j){var K=Vd(j),te=K.next();if(te.done)return!1;for(var ue=te.value,_e=Vd(A),je=_e.next(ue.from),$e=je.value;!te.done&&!je.done;){if(Un($e.from,ue.to)<=0&&0<=Un($e.to,ue.from))return!0;Un(ue.from,$e.from)<0?ue=(te=K.next($e.from)).value:$e=(je=_e.next(ue.from)).value}return!1}function Vd(A){var j=dp(A)?null:{s:0,n:A};return{next:function(K){for(var te=0<arguments.length;j;)switch(j.s){case 0:if(j.s=1,te)for(;j.n.l&&Un(K,j.n.from)<0;)j={up:j,n:j.n.l,s:1};else for(;j.n.l;)j={up:j,n:j.n.l,s:1};case 1:if(j.s=2,!te||Un(K,j.n.to)<=0)return{value:j.n,done:!1};case 2:if(j.n.r){j.s=3,j={up:j,n:j.n.r,s:0};continue}case 3:j=j.up}return{done:!0}}}}function jg(A){var j,K,te=(((j=A.r)===null||j===void 0?void 0:j.d)||0)-(((K=A.l)===null||K===void 0?void 0:K.d)||0),ue=1<te?"r":te<-1?"l":"";ue&&(j=ue=="r"?"l":"r",K=r({},A),te=A[ue],A.from=te.from,A.to=te.to,A[ue]=te[ue],K[ue]=te[j],(A[j]=K).d=fp(K)),A.d=fp(A)}function fp(K){var j=K.r,K=K.l;return(j?K?Math.max(j.d,K.d):j.d:K?K.d:0)+1}function Gd(A,j){return o(j).forEach(function(K){A[K]?el(A[K],j[K]):A[K]=function te(ue){var _e,je,$e={};for(_e in ue)h(ue,_e)&&(je=ue[_e],$e[_e]=!je||typeof je!="object"||X.has(je.constructor)?je:te(je));return $e}(j[K])}),A}function hp(A,j){return A.all||j.all||Object.keys(A).some(function(K){return j[K]&&Dg(j[K],A[K])})}p(wa.prototype,((si={add:function(A){return el(this,A),this},addKey:function(A){return Cc(this,A,A),this},addKeys:function(A){var j=this;return A.forEach(function(K){return Cc(j,K,K)}),this},hasKey:function(A){var j=Vd(this).next(A).value;return j&&Un(j.from,A)<=0&&0<=Un(j.to,A)}})[ae]=function(){return Vd(this)},si));var tl={},pp={},mp=!1;function Wd(A){Gd(pp,A),mp||(mp=!0,setTimeout(function(){mp=!1,gp(pp,!(pp={}))},0))}function gp(A,j){j===void 0&&(j=!1);var K=new Set;if(A.all)for(var te=0,ue=Object.values(tl);te<ue.length;te++)Mg(je=ue[te],A,K,j);else for(var _e in A){var je,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(_e);$e&&(_e=$e[1],$e=$e[2],(je=tl["idb://".concat(_e,"/").concat($e)])&&Mg(je,A,K,j))}K.forEach(function(We){return We()})}function Mg(A,j,K,te){for(var ue=[],_e=0,je=Object.entries(A.queries.query);_e<je.length;_e++){for(var $e=je[_e],We=$e[0],Ye=[],tt=0,He=$e[1];tt<He.length;tt++){var rt=He[tt];hp(j,rt.obsSet)?rt.subscribers.forEach(function(Xe){return K.add(Xe)}):te&&Ye.push(rt)}te&&ue.push([We,Ye])}if(te)for(var Ge=0,Qe=ue;Ge<Qe.length;Ge++){var at=Qe[Ge],We=at[0],Ye=at[1];A.queries.query[We]=Ye}}function F1(A){var j=A._state,K=A._deps.indexedDB;if(j.isBeingOpened||A.idbdb)return j.dbReadyPromise.then(function(){return j.dbOpenError?Ur(j.dbOpenError):A});j.isBeingOpened=!0,j.dbOpenError=null,j.openComplete=!1;var te=j.openCanceller,ue=Math.round(10*A.verno),_e=!1;function je(){if(j.openCanceller!==te)throw new Te.DatabaseClosed("db.open() was cancelled")}function $e(){return new M(function(rt,Ge){if(je(),!K)throw new Te.MissingAPI;var Qe=A.name,at=j.autoSchema||!ue?K.open(Qe):K.open(Qe,ue);if(!at)throw new Te.MissingAPI;at.onerror=ji(Ge),at.onblocked=fe(A._fireOnBlocked),at.onupgradeneeded=fe(function(Xe){var ft;tt=at.transaction,j.autoSchema&&!A._options.allowEmptyDB?(at.onerror=Xs,tt.abort(),at.result.close(),(ft=K.deleteDatabase(Qe)).onsuccess=ft.onerror=fe(function(){Ge(new Te.NoSuchDatabase("Database ".concat(Qe," doesnt exist")))})):(tt.onerror=ji(Ge),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,He=Xe<1,A.idbdb=at.result,_e&&$d(A,tt),Ec(A,Xe/10,tt,Ge))},Ge),at.onsuccess=fe(function(){tt=null;var Xe,ft,gt,bt,wt,jt=A.idbdb=at.result,qt=S(jt.objectStoreNames);if(0<qt.length)try{var Nt=jt.transaction((bt=qt).length===1?bt[0]:bt,"readonly");if(j.autoSchema)ft=jt,gt=Nt,(Xe=A).verno=ft.version/10,gt=Xe._dbSchema=au(0,ft,gt),Xe._storeNames=S(ft.objectStoreNames,0),Ld(Xe,[Xe._allTables],o(gt),gt);else if(Ud(A,A._dbSchema,Nt),((wt=Bd(au(0,(wt=A).idbdb,Nt),wt._dbSchema)).add.length||wt.change.some(function(Lt){return Lt.add.length||Lt.change.length}))&&!_e)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),jt.close(),ue=jt.version+1,_e=!0,rt($e());ds(A,Nt)}catch{}To.push(A),jt.onversionchange=fe(function(Lt){j.vcFired=!0,A.on("versionchange").fire(Lt)}),jt.onclose=fe(function(Lt){A.on("close").fire(Lt)}),He&&(wt=A._deps,Nt=Qe,jt=wt.indexedDB,wt=wt.IDBKeyRange,Hd(jt)||Nt===Gs||up(jt,wt).put({name:Nt}).catch(Ie)),rt()},Ge)}).catch(function(rt){switch(rt==null?void 0:rt.name){case"UnknownError":if(0<j.PR1398_maxLoop)return j.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ue)return ue=0,$e()}return M.reject(rt)})}var We,Ye=j.dbReadyResolve,tt=null,He=!1;return M.race([te,(typeof navigator>"u"?M.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(rt){function Ge(){return indexedDB.databases().finally(rt)}We=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then($e)]).then(function(){return je(),j.onReadyBeingFired=[],M.resolve(cp(function(){return A.on.ready.fire(A.vip)})).then(function rt(){if(0<j.onReadyBeingFired.length){var Ge=j.onReadyBeingFired.reduce(xe,Ie);return j.onReadyBeingFired=[],M.resolve(cp(function(){return Ge(A.vip)})).then(rt)}})}).finally(function(){j.openCanceller===te&&(j.onReadyBeingFired=null,j.isBeingOpened=!1)}).catch(function(rt){j.dbOpenError=rt;try{tt&&tt.abort()}catch{}return te===j.openCanceller&&A._close(),Ur(rt)}).finally(function(){j.openComplete=!0,Ye()}).then(function(){var rt;return He&&(rt={},A.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(Qe){Qe.name&&(rt["idb://".concat(A.name,"/").concat(Ge.name,"/").concat(Qe.name)]=new wa(-1/0,[[[]]]))}),rt["idb://".concat(A.name,"/").concat(Ge.name,"/")]=rt["idb://".concat(A.name,"/").concat(Ge.name,"/:dels")]=new wa(-1/0,[[[]]])}),va(eu).fire(rt),gp(rt,!0)),A})}function kc(A){function j(_e){return A.next(_e)}var K=ue(j),te=ue(function(_e){return A.throw(_e)});function ue(_e){return function(We){var $e=_e(We),We=$e.value;return $e.done?We:We&&typeof We.then=="function"?We.then(K,te):s(We)?Promise.all(We).then(K,te):K(We)}}return ue(j)()}function fs(A,j,K){for(var te=s(A)?A.slice():[A],ue=0;ue<K;++ue)te.push(j);return te}var L1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(j){var K=A.table(j),te=K.schema,ue={},_e=[];function je(He,rt,Ge){var Qe=aa(He),at=ue[Qe]=ue[Qe]||[],Xe=He==null?0:typeof He=="string"?1:He.length,ft=0<rt,ft=r(r({},Ge),{name:ft?"".concat(Qe,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:ft,keyTail:rt,keyLength:Xe,extractKey:ru(He),unique:!ft&&Ge.unique});return at.push(ft),ft.isPrimaryKey||_e.push(ft),1<Xe&&je(Xe===2?He[0]:He.slice(0,Xe-1),rt+1,Ge),at.sort(function(gt,bt){return gt.keyTail-bt.keyTail}),ft}j=je(te.primaryKey.keyPath,0,te.primaryKey),ue[":id"]=[j];for(var $e=0,We=te.indexes;$e<We.length;$e++){var Ye=We[$e];je(Ye.keyPath,0,Ye)}function tt(He){var rt,Ge=He.query.index;return Ge.isVirtual?r(r({},He),{query:{index:Ge.lowLevelIndex,range:(rt=He.query.range,Ge=Ge.keyTail,{type:rt.type===1?2:rt.type,lower:fs(rt.lower,rt.lowerOpen?A.MAX_KEY:A.MIN_KEY,Ge),lowerOpen:!0,upper:fs(rt.upper,rt.upperOpen?A.MIN_KEY:A.MAX_KEY,Ge),upperOpen:!0})}}):He}return r(r({},K),{schema:r(r({},te),{primaryKey:j,indexes:_e,getIndexByKeyPath:function(He){return(He=ue[aa(He)])&&He[0]}}),count:function(He){return K.count(tt(He))},query:function(He){return K.query(tt(He))},openCursor:function(He){var rt=He.query.index,Ge=rt.keyTail,Qe=rt.isVirtual,at=rt.keyLength;return Qe?K.openCursor(tt(He)).then(function(ft){return ft&&Xe(ft)}):K.openCursor(He);function Xe(ft){return Object.create(ft,{continue:{value:function(gt){gt!=null?ft.continue(fs(gt,He.reverse?A.MAX_KEY:A.MIN_KEY,Ge)):He.unique?ft.continue(ft.key.slice(0,at).concat(He.reverse?A.MIN_KEY:A.MAX_KEY,Ge)):ft.continue()}},continuePrimaryKey:{value:function(gt,bt){ft.continuePrimaryKey(fs(gt,A.MAX_KEY,Ge),bt)}},primaryKey:{get:function(){return ft.primaryKey}},key:{get:function(){var gt=ft.key;return at===1?gt[0]:gt.slice(0,at)}},value:{get:function(){return ft.value}}})}}})}})}};function Kd(A,j,K,te){return K=K||{},te=te||"",o(A).forEach(function(ue){var _e,je,$e;h(j,ue)?(_e=A[ue],je=j[ue],typeof _e=="object"&&typeof je=="object"&&_e&&je?($e=de(_e))!==de(je)?K[te+ue]=j[ue]:$e==="Object"?Kd(_e,je,K,te+ue+"."):_e!==je&&(K[te+ue]=j[ue]):_e!==je&&(K[te+ue]=j[ue])):K[te+ue]=void 0}),o(j).forEach(function(ue){h(A,ue)||(K[te+ue]=j[ue])}),K}function Zd(A,j){return j.type==="delete"?j.keys:j.keys||j.values.map(A.extractKey)}var Pg={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(j){var K=A.table(j),te=K.schema.primaryKey;return r(r({},K),{mutate:function(ue){var _e=ke.trans,je=_e.table(j).hook,$e=je.deleting,We=je.creating,Ye=je.updating;switch(ue.type){case"add":if(We.fire===Ie)break;return _e._promise("readwrite",function(){return tt(ue)},!0);case"put":if(We.fire===Ie&&Ye.fire===Ie)break;return _e._promise("readwrite",function(){return tt(ue)},!0);case"delete":if($e.fire===Ie)break;return _e._promise("readwrite",function(){return tt(ue)},!0);case"deleteRange":if($e.fire===Ie)break;return _e._promise("readwrite",function(){return function He(rt,Ge,Qe){return K.query({trans:rt,values:!1,query:{index:te,range:Ge},limit:Qe}).then(function(at){var Xe=at.result;return tt({type:"delete",keys:Xe,trans:rt}).then(function(ft){return 0<ft.numFailures?Promise.reject(ft.failures[0]):Xe.length<Qe?{failures:[],numFailures:0,lastResult:void 0}:He(rt,r(r({},Ge),{lower:Xe[Xe.length-1],lowerOpen:!0}),Qe)})})}(ue.trans,ue.range,1e4)},!0)}return K.mutate(ue);function tt(He){var rt,Ge,Qe,at=ke.trans,Xe=He.keys||Zd(te,He);if(!Xe)throw new Error("Keys missing");return(He=He.type==="add"||He.type==="put"?r(r({},He),{keys:Xe}):r({},He)).type!=="delete"&&(He.values=a([],He.values)),He.keys&&(He.keys=a([],He.keys)),rt=K,Qe=Xe,((Ge=He).type==="add"?Promise.resolve([]):rt.getMany({trans:Ge.trans,keys:Qe,cache:"immutable"})).then(function(ft){var gt=Xe.map(function(bt,wt){var jt,qt,Nt,Lt=ft[wt],Vt={onerror:null,onsuccess:null};return He.type==="delete"?$e.fire.call(Vt,bt,Lt,at):He.type==="add"||Lt===void 0?(jt=We.fire.call(Vt,bt,He.values[wt],at),bt==null&&jt!=null&&(He.keys[wt]=bt=jt,te.outbound||O(He.values[wt],te.keyPath,bt))):(jt=Kd(Lt,He.values[wt]),(qt=Ye.fire.call(Vt,jt,bt,Lt,at))&&(Nt=He.values[wt],Object.keys(qt).forEach(function(It){h(Nt,It)?Nt[It]=qt[It]:O(Nt,It,qt[It])}))),Vt});return K.mutate(He).then(function(bt){for(var wt=bt.failures,jt=bt.results,qt=bt.numFailures,bt=bt.lastResult,Nt=0;Nt<Xe.length;++Nt){var Lt=(jt||Xe)[Nt],Vt=gt[Nt];Lt==null?Vt.onerror&&Vt.onerror(wt[Nt]):Vt.onsuccess&&Vt.onsuccess(He.type==="put"&&ft[Nt]?He.values[Nt]:Lt)}return{failures:wt,results:jt,numFailures:qt,lastResult:bt}}).catch(function(bt){return gt.forEach(function(wt){return wt.onerror&&wt.onerror(bt)}),Promise.reject(bt)})})}}})}})}};function yp(A,j,K){try{if(!j||j.keys.length<A.length)return null;for(var te=[],ue=0,_e=0;ue<j.keys.length&&_e<A.length;++ue)Un(j.keys[ue],A[_e])===0&&(te.push(K?Z(j.values[ue]):j.values[ue]),++_e);return te.length===A.length?te:null}catch{return null}}var Fg={stack:"dbcore",level:-1,create:function(A){return{table:function(j){var K=A.table(j);return r(r({},K),{getMany:function(te){if(!te.cache)return K.getMany(te);var ue=yp(te.keys,te.trans._cache,te.cache==="clone");return ue?M.resolve(ue):K.getMany(te).then(function(_e){return te.trans._cache={keys:te.keys,values:te.cache==="clone"?Z(_e):_e},_e})},mutate:function(te){return te.type!=="add"&&(te.trans._cache=null),K.mutate(te)}})}}}};function nl(A,j){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!j.schema.primaryKey.outbound}function Lg(A,j){switch(A){case"query":return j.values&&!j.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var $1={stack:"dbcore",level:0,name:"Observability",create:function(A){var j=A.schema.name,K=new wa(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(te,ue,_e){if(ke.subscr&&ue!=="readonly")throw new Te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return A.transaction(te,ue,_e)},table:function(te){var ue=A.table(te),_e=ue.schema,je=_e.primaryKey,He=_e.indexes,$e=je.extractKey,We=je.outbound,Ye=je.autoIncrement&&He.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(je.keyPath)}),tt=r(r({},ue),{mutate:function(Ge){function Qe(It){return It="idb://".concat(j,"/").concat(te,"/").concat(It),bt[It]||(bt[It]=new wa)}var at,Xe,ft,gt=Ge.trans,bt=Ge.mutatedParts||(Ge.mutatedParts={}),wt=Qe(""),jt=Qe(":dels"),qt=Ge.type,Vt=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[Zd(je,Ge).filter(function(It){return It}),Ge.values]:[],Nt=Vt[0],Lt=Vt[1],Vt=Ge.trans._cache;return s(Nt)?(wt.addKeys(Nt),(Vt=qt==="delete"||Nt.length===Lt.length?yp(Nt,Vt):null)||jt.addKeys(Nt),(Vt||Lt)&&(at=Qe,Xe=Vt,ft=Lt,_e.indexes.forEach(function(It){var Zt=at(It.name||"");function cn(Cn){return Cn!=null?It.extractKey(Cn):null}function dn(Cn){return It.multiEntry&&s(Cn)?Cn.forEach(function(ja){return Zt.addKey(ja)}):Zt.addKey(Cn)}(Xe||ft).forEach(function(Cn,Jr){var yn=Xe&&cn(Xe[Jr]),Jr=ft&&cn(ft[Jr]);Un(yn,Jr)!==0&&(yn!=null&&dn(yn),Jr!=null&&dn(Jr))})}))):Nt?(Lt={from:(Lt=Nt.lower)!==null&&Lt!==void 0?Lt:A.MIN_KEY,to:(Lt=Nt.upper)!==null&&Lt!==void 0?Lt:A.MAX_KEY},jt.add(Lt),wt.add(Lt)):(wt.add(K),jt.add(K),_e.indexes.forEach(function(It){return Qe(It.name).add(K)})),ue.mutate(Ge).then(function(It){return!Nt||Ge.type!=="add"&&Ge.type!=="put"||(wt.addKeys(It.results),Ye&&Ye.forEach(function(Zt){for(var cn=Ge.values.map(function(yn){return Zt.extractKey(yn)}),dn=Zt.keyPath.findIndex(function(yn){return yn===je.keyPath}),Cn=0,ja=It.results.length;Cn<ja;++Cn)cn[Cn][dn]=It.results[Cn];Qe(Zt.name).addKeys(cn)})),gt.mutatedParts=Gd(gt.mutatedParts||{},bt),It})}}),He=function(Qe){var at=Qe.query,Qe=at.index,at=at.range;return[Qe,new wa((Qe=at.lower)!==null&&Qe!==void 0?Qe:A.MIN_KEY,(at=at.upper)!==null&&at!==void 0?at:A.MAX_KEY)]},rt={get:function(Ge){return[je,new wa(Ge.key)]},getMany:function(Ge){return[je,new wa().addKeys(Ge.keys)]},count:He,query:He,openCursor:He};return o(rt).forEach(function(Ge){tt[Ge]=function(Qe){var at=ke.subscr,Xe=!!at,ft=nl(ke,ue)&&Lg(Ge,Qe)?Qe.obsSet={}:at;if(Xe){var gt=function(Lt){return Lt="idb://".concat(j,"/").concat(te,"/").concat(Lt),ft[Lt]||(ft[Lt]=new wa)},bt=gt(""),wt=gt(":dels"),at=rt[Ge](Qe),Xe=at[0],at=at[1];if((Ge==="query"&&Xe.isPrimaryKey&&!Qe.values?wt:gt(Xe.name||"")).add(at),!Xe.isPrimaryKey){if(Ge!=="count"){var jt=Ge==="query"&&We&&Qe.values&&ue.query(r(r({},Qe),{values:!1}));return ue[Ge].apply(this,arguments).then(function(Lt){if(Ge==="query"){if(We&&Qe.values)return jt.then(function(cn){return cn=cn.result,bt.addKeys(cn),Lt});var Vt=Qe.values?Lt.result.map($e):Lt.result;(Qe.values?bt:wt).addKeys(Vt)}else if(Ge==="openCursor"){var It=Lt,Zt=Qe.values;return It&&Object.create(It,{key:{get:function(){return wt.addKey(It.primaryKey),It.key}},primaryKey:{get:function(){var cn=It.primaryKey;return wt.addKey(cn),cn}},value:{get:function(){return Zt&&bt.addKey(It.primaryKey),It.value}}})}return Lt})}wt.add(K)}}return ue[Ge].apply(this,arguments)}}),tt}})}};function $g(A,j,K){if(K.numFailures===0)return j;if(j.type==="deleteRange")return null;var te=j.keys?j.keys.length:"values"in j&&j.values?j.values.length:1;return K.numFailures===te?null:(j=r({},j),s(j.keys)&&(j.keys=j.keys.filter(function(ue,_e){return!(_e in K.failures)})),"values"in j&&s(j.values)&&(j.values=j.values.filter(function(ue,_e){return!(_e in K.failures)})),j)}function Yd(A,j){return K=A,((te=j).lower===void 0||(te.lowerOpen?0<Un(K,te.lower):0<=Un(K,te.lower)))&&(A=A,(j=j).upper===void 0||(j.upperOpen?Un(A,j.upper)<0:Un(A,j.upper)<=0));var K,te}function bp(A,j,rt,te,ue,_e){if(!rt||rt.length===0)return A;var je=j.query.index,$e=je.multiEntry,We=j.query.range,Ye=te.schema.primaryKey.extractKey,tt=je.extractKey,He=(je.lowLevelIndex||je).extractKey,rt=rt.reduce(function(Ge,Qe){var at=Ge,Xe=[];if(Qe.type==="add"||Qe.type==="put")for(var ft=new wa,gt=Qe.values.length-1;0<=gt;--gt){var bt,wt=Qe.values[gt],jt=Ye(wt);ft.hasKey(jt)||(bt=tt(wt),($e&&s(bt)?bt.some(function(It){return Yd(It,We)}):Yd(bt,We))&&(ft.addKey(jt),Xe.push(wt)))}switch(Qe.type){case"add":var qt=new wa().addKeys(j.values?Ge.map(function(Zt){return Ye(Zt)}):Ge),at=Ge.concat(j.values?Xe.filter(function(Zt){return Zt=Ye(Zt),!qt.hasKey(Zt)&&(qt.addKey(Zt),!0)}):Xe.map(function(Zt){return Ye(Zt)}).filter(function(Zt){return!qt.hasKey(Zt)&&(qt.addKey(Zt),!0)}));break;case"put":var Nt=new wa().addKeys(Qe.values.map(function(Zt){return Ye(Zt)}));at=Ge.filter(function(Zt){return!Nt.hasKey(j.values?Ye(Zt):Zt)}).concat(j.values?Xe:Xe.map(function(Zt){return Ye(Zt)}));break;case"delete":var Lt=new wa().addKeys(Qe.keys);at=Ge.filter(function(Zt){return!Lt.hasKey(j.values?Ye(Zt):Zt)});break;case"deleteRange":var Vt=Qe.range;at=Ge.filter(function(Zt){return!Yd(Ye(Zt),Vt)})}return at},A);return rt===A?A:(rt.sort(function(Ge,Qe){return Un(He(Ge),He(Qe))||Un(Ye(Ge),Ye(Qe))}),j.limit&&j.limit<1/0&&(rt.length>j.limit?rt.length=j.limit:A.length===j.limit&&rt.length<j.limit&&(ue.dirty=!0)),_e?Object.freeze(rt):rt)}function iu(A,j){return Un(A.lower,j.lower)===0&&Un(A.upper,j.upper)===0&&!!A.lowerOpen==!!j.lowerOpen&&!!A.upperOpen==!!j.upperOpen}function Ac(A,j){return function(K,te,ue,_e){if(K===void 0)return te!==void 0?-1:0;if(te===void 0)return 1;if((te=Un(K,te))===0){if(ue&&_e)return 0;if(ue)return 1;if(_e)return-1}return te}(A.lower,j.lower,A.lowerOpen,j.lowerOpen)<=0&&0<=function(K,te,ue,_e){if(K===void 0)return te!==void 0?1:0;if(te===void 0)return-1;if((te=Un(K,te))===0){if(ue&&_e)return 0;if(ue)return-1;if(_e)return 1}return te}(A.upper,j.upper,A.upperOpen,j.upperOpen)}function B1(A,j,K,te){A.subscribers.add(K),te.addEventListener("abort",function(){var ue,_e;A.subscribers.delete(K),A.subscribers.size===0&&(ue=A,_e=j,setTimeout(function(){ue.subscribers.size===0&&ee(_e,ue)},3e3))})}var Xd={stack:"dbcore",level:0,name:"Cache",create:function(A){var j=A.schema.name;return r(r({},A),{transaction:function(K,te,ue){var _e,je,$e=A.transaction(K,te,ue);return te==="readwrite"&&(je=(_e=new AbortController).signal,ue=function(We){return function(){if(_e.abort(),te==="readwrite"){for(var Ye=new Set,tt=0,He=K;tt<He.length;tt++){var rt=He[tt],Ge=tl["idb://".concat(j,"/").concat(rt)];if(Ge){var Qe=A.table(rt),at=Ge.optimisticOps.filter(function(Zt){return Zt.trans===$e});if($e._explicit&&We&&$e.mutatedParts)for(var Xe=0,ft=Object.values(Ge.queries.query);Xe<ft.length;Xe++)for(var gt=0,bt=(qt=ft[Xe]).slice();gt<bt.length;gt++)hp((Nt=bt[gt]).obsSet,$e.mutatedParts)&&(ee(qt,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)}));else if(0<at.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(Zt){return Zt.trans!==$e});for(var wt=0,jt=Object.values(Ge.queries.query);wt<jt.length;wt++)for(var qt,Nt,Lt,Vt=0,It=(qt=jt[wt]).slice();Vt<It.length;Vt++)(Nt=It[Vt]).res!=null&&$e.mutatedParts&&(We&&!Nt.dirty?(Lt=Object.isFrozen(Nt.res),Lt=bp(Nt.res,Nt.req,at,Qe,Nt,Lt),Nt.dirty?(ee(qt,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)})):Lt!==Nt.res&&(Nt.res=Lt,Nt.promise=M.resolve({result:Lt}))):(Nt.dirty&&ee(qt,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)})))}}}Ye.forEach(function(Zt){return Zt()})}}},$e.addEventListener("abort",ue(!1),{signal:je}),$e.addEventListener("error",ue(!1),{signal:je}),$e.addEventListener("complete",ue(!0),{signal:je})),$e},table:function(K){var te=A.table(K),ue=te.schema.primaryKey;return r(r({},te),{mutate:function(_e){var je=ke.trans;if(ue.outbound||je.db._options.cache==="disabled"||je.explicit||je.idbtrans.mode!=="readwrite")return te.mutate(_e);var $e=tl["idb://".concat(j,"/").concat(K)];return $e?(je=te.mutate(_e),_e.type!=="add"&&_e.type!=="put"||!(50<=_e.values.length||Zd(ue,_e).some(function(We){return We==null}))?($e.optimisticOps.push(_e),_e.mutatedParts&&Wd(_e.mutatedParts),je.then(function(We){0<We.numFailures&&(ee($e.optimisticOps,_e),(We=$g(0,_e,We))&&$e.optimisticOps.push(We),_e.mutatedParts&&Wd(_e.mutatedParts))}),je.catch(function(){ee($e.optimisticOps,_e),_e.mutatedParts&&Wd(_e.mutatedParts)})):je.then(function(We){var Ye=$g(0,r(r({},_e),{values:_e.values.map(function(tt,He){var rt;return We.failures[He]?tt:(tt=(rt=ue.keyPath)!==null&&rt!==void 0&&rt.includes(".")?Z(tt):r({},tt),O(tt,ue.keyPath,We.results[He]),tt)})}),We);$e.optimisticOps.push(Ye),queueMicrotask(function(){return _e.mutatedParts&&Wd(_e.mutatedParts)})}),je):te.mutate(_e)},query:function(_e){if(!nl(ke,te)||!Lg("query",_e))return te.query(_e);var je=((Ye=ke.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",He=ke,$e=He.requery,We=He.signal,Ye=function(Qe,at,Xe,ft){var gt=tl["idb://".concat(Qe,"/").concat(at)];if(!gt)return[];if(!(at=gt.queries[Xe]))return[null,!1,gt,null];var bt=at[(ft.query?ft.query.index.name:null)||""];if(!bt)return[null,!1,gt,null];switch(Xe){case"query":var wt=bt.find(function(jt){return jt.req.limit===ft.limit&&jt.req.values===ft.values&&iu(jt.req.query.range,ft.query.range)});return wt?[wt,!0,gt,bt]:[bt.find(function(jt){return("limit"in jt.req?jt.req.limit:1/0)>=ft.limit&&(!ft.values||jt.req.values)&&Ac(jt.req.query.range,ft.query.range)}),!1,gt,bt];case"count":return wt=bt.find(function(jt){return iu(jt.req.query.range,ft.query.range)}),[wt,!!wt,gt,bt]}}(j,K,"query",_e),tt=Ye[0],He=Ye[1],rt=Ye[2],Ge=Ye[3];return tt&&He?tt.obsSet=_e.obsSet:(He=te.query(_e).then(function(Qe){var at=Qe.result;if(tt&&(tt.res=at),je){for(var Xe=0,ft=at.length;Xe<ft;++Xe)Object.freeze(at[Xe]);Object.freeze(at)}else Qe.result=Z(at);return Qe}).catch(function(Qe){return Ge&&tt&&ee(Ge,tt),Promise.reject(Qe)}),tt={obsSet:_e.obsSet,promise:He,subscribers:new Set,type:"query",req:_e,dirty:!1},Ge?Ge.push(tt):(Ge=[tt],(rt=rt||(tl["idb://".concat(j,"/").concat(K)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[_e.query.index.name||""]=Ge)),B1(tt,Ge,$e,We),tt.promise.then(function(Qe){return{result:bp(Qe.result,_e,rt==null?void 0:rt.optimisticOps,te,tt,je)}})}})}})}};function Tc(A,j){return new Proxy(A,{get:function(K,te,ue){return te==="db"?j:Reflect.get(K,te,ue)}})}var no=(Or.prototype.version=function(A){if(isNaN(A)||A<.1)throw new Te.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new Te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var j=this._versions,K=j.filter(function(te){return te._cfg.version===A})[0];return K||(K=new this.Version(A),j.push(K),j.sort(sp),K.stores({}),this._state.autoSchema=!1,K)},Or.prototype._whenReady=function(A){var j=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?A():new M(function(K,te){if(j._state.openComplete)return te(new Te.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return void te(new Te.DatabaseClosed);j.open().catch(Ie)}j._state.dbReadyPromise.then(K,te)}).then(A)},Or.prototype.use=function(A){var j=A.stack,K=A.create,te=A.level,ue=A.name;return ue&&this.unuse({stack:j,name:ue}),A=this._middlewares[j]||(this._middlewares[j]=[]),A.push({stack:j,create:K,level:te??10,name:ue}),A.sort(function(_e,je){return _e.level-je.level}),this},Or.prototype.unuse=function(A){var j=A.stack,K=A.name,te=A.create;return j&&this._middlewares[j]&&(this._middlewares[j]=this._middlewares[j].filter(function(ue){return te?ue.create!==te:!!K&&ue.name!==K})),this},Or.prototype.open=function(){var A=this;return is(ve,function(){return F1(A)})},Or.prototype._close=function(){var A=this._state,j=To.indexOf(this);if(0<=j&&To.splice(j,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new M(function(K){A.dbReadyResolve=K}),A.openCanceller=new M(function(K,te){A.cancelOpen=te}))},Or.prototype.close=function(K){var j=(K===void 0?{disableAutoOpen:!0}:K).disableAutoOpen,K=this._state;j?(K.isBeingOpened&&K.cancelOpen(new Te.DatabaseClosed),this._close(),K.autoOpen=!1,K.dbOpenError=new Te.DatabaseClosed):(this._close(),K.autoOpen=this._options.autoOpen||K.isBeingOpened,K.openComplete=!1,K.dbOpenError=null)},Or.prototype.delete=function(A){var j=this;A===void 0&&(A={disableAutoOpen:!0});var K=0<arguments.length&&typeof arguments[0]!="object",te=this._state;return new M(function(ue,_e){function je(){j.close(A);var $e=j._deps.indexedDB.deleteDatabase(j.name);$e.onsuccess=fe(function(){var We,Ye,tt;We=j._deps,Ye=j.name,tt=We.indexedDB,We=We.IDBKeyRange,Hd(tt)||Ye===Gs||up(tt,We).delete(Ye).catch(Ie),ue()}),$e.onerror=ji(_e),$e.onblocked=j._fireOnBlocked}if(K)throw new Te.InvalidArgument("Invalid closeOptions argument to db.delete()");te.isBeingOpened?te.dbReadyPromise.then(je):je()})},Or.prototype.backendDB=function(){return this.idbdb},Or.prototype.isOpen=function(){return this.idbdb!==null},Or.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},Or.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Or.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Or.prototype,"tables",{get:function(){var A=this;return o(this._allTables).map(function(j){return A._allTables[j]})},enumerable:!1,configurable:!0}),Or.prototype.transaction=function(){var A=(function(j,K,te){var ue=arguments.length;if(ue<2)throw new Te.InvalidArgument("Too few arguments");for(var _e=new Array(ue-1);--ue;)_e[ue-1]=arguments[ue];return te=_e.pop(),[j,H(_e),te]}).apply(this,arguments);return this._transaction.apply(this,A)},Or.prototype._transaction=function(A,j,K){var te=this,ue=ke.trans;ue&&ue.db===this&&A.indexOf("!")===-1||(ue=null);var _e,je,$e=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(je=j.map(function(Ye){if(Ye=Ye instanceof te.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),A=="r"||A===Di)_e=Di;else{if(A!="rw"&&A!=_c)throw new Te.InvalidArgument("Invalid transaction mode: "+A);_e=_c}if(ue){if(ue.mode===Di&&_e===_c){if(!$e)throw new Te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ue=null}ue&&je.forEach(function(Ye){if(ue&&ue.storeNames.indexOf(Ye)===-1){if(!$e)throw new Te.SubTransaction("Table "+Ye+" not included in parent transaction.");ue=null}}),$e&&ue&&!ue.active&&(ue=null)}}catch(Ye){return ue?ue._promise(null,function(tt,He){He(Ye)}):Ur(Ye)}var We=(function Ye(tt,He,rt,Ge,Qe){return M.resolve().then(function(){var at=ke.transless||ke,Xe=tt._createTransaction(He,rt,tt._dbSchema,Ge);if(Xe.explicit=!0,at={trans:Xe,transless:at},Ge)Xe.idbtrans=Ge.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,tt._state.PR1398_maxLoop=3}catch(bt){return bt.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,He,rt,null,Qe)})):Ur(bt)}var ft,gt=J(Qe);return gt&&Dn(),at=M.follow(function(){var bt;(ft=Qe.call(Xe,Xe))&&(gt?(bt=zn.bind(null,null),ft.then(bt,bt)):typeof ft.next=="function"&&typeof ft.throw=="function"&&(ft=kc(ft)))},at),(ft&&typeof ft.then=="function"?M.resolve(ft).then(function(bt){return Xe.active?bt:Ur(new Te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):at.then(function(){return ft})).then(function(bt){return Ge&&Xe._resolve(),Xe._completion.then(function(){return bt})}).catch(function(bt){return Xe._reject(bt),Ur(bt)})})}).bind(null,this,_e,je,ue,K);return ue?ue._promise(_e,We,"lock"):ke.trans?is(ke.transless,function(){return te._whenReady(We)}):this._whenReady(We)},Or.prototype.table=function(A){if(!h(this._allTables,A))throw new Te.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},Or);function Or(A,j){var K=this;this._middlewares={},this.verno=0;var te=Or.dependencies;this._options=j=r({addons:Or.addons,autoOpen:!0,indexedDB:te.indexedDB,IDBKeyRange:te.IDBKeyRange,cache:"cloned"},j),this._deps={indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange},te=j.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ue,_e,je,$e,We,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ie,dbReadyPromise:null,cancelOpen:Ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:j.autoOpen};Ye.dbReadyPromise=new M(function(He){Ye.dbReadyResolve=He}),Ye.openCanceller=new M(function(He,rt){Ye.cancelOpen=rt}),this._state=Ye,this.name=A,this.on=cs(this,"populate","blocked","versionchange","close",{ready:[xe,Ie]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(He){return function(rt,Ge){Or.vip(function(){var Qe,at=K._state;at.openComplete?(at.dbOpenError||M.resolve().then(rt),Ge&&He(rt)):at.onReadyBeingFired?(at.onReadyBeingFired.push(rt),Ge&&He(rt)):(He(rt),Qe=K,Ge||He(function Xe(){Qe.on.ready.unsubscribe(rt),Qe.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(ue=this,Kl(Jl.prototype,function(ft,Xe){this.db=ue;var Ge=Ws,Qe=null;if(Xe)try{Ge=Xe()}catch(gt){Qe=gt}var at=ft._ctx,Xe=at.table,ft=Xe.hook.reading.fire;this._ctx={table:Xe,index:at.index,isPrimKey:!at.index||Xe.schema.primKey.keyPath&&at.index===Xe.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Qe,or:at.or,valueMapper:ft!==Re?ft:null}})),this.Table=(_e=this,Kl(tp.prototype,function(He,rt,Ge){this.db=_e,this._tx=Ge,this.name=He,this.schema=rt,this.hook=_e._allTables[He]?_e._allTables[He].hook:cs(null,{creating:[Ne,Ie],reading:[U,Re],updating:[ie,Ie],deleting:[ce,Ie]})})),this.Transaction=(je=this,Kl(op.prototype,function(He,rt,Ge,Qe,at){var Xe=this;this.db=je,this.mode=He,this.storeNames=rt,this.schema=Ge,this.chromeTransactionDurability=Qe,this.idbtrans=null,this.on=cs(this,"complete","error","abort"),this.parent=at||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(ft,gt){Xe._resolve=ft,Xe._reject=gt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(ft){var gt=Xe.active;return Xe.active=!1,Xe.on.error.fire(ft),Xe.parent?Xe.parent._reject(ft):gt&&Xe.idbtrans&&Xe.idbtrans.abort(),Ur(ft)})})),this.Version=($e=this,Kl(P1.prototype,function(He){this.db=$e,this._cfg={version:He,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,Kl(Ys.prototype,function(He,rt,Ge){if(this.db=We,this._ctx={table:He,index:rt===":id"?null:rt,or:Ge},this._cmp=this._ascending=Un,this._descending=function(Qe,at){return Un(at,Qe)},this._max=function(Qe,at){return 0<Un(Qe,at)?Qe:at},this._min=function(Qe,at){return Un(Qe,at)<0?Qe:at},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new Te.MissingAPI})),this.on("versionchange",function(He){0<He.newVersion?console.warn("Another connection wants to upgrade database '".concat(K.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(K.name,"'. Closing db now to resume the delete request.")),K.close({disableAutoOpen:!1})}),this.on("blocked",function(He){!He.newVersion||He.newVersion<He.oldVersion?console.warn("Dexie.delete('".concat(K.name,"') was blocked")):console.warn("Upgrade '".concat(K.name,"' blocked by other connection holding version ").concat(He.oldVersion/10))}),this._maxKey=nu(j.IDBKeyRange),this._createTransaction=function(He,rt,Ge,Qe){return new K.Transaction(He,rt,Ge,K._options.chromeTransactionDurability,Qe)},this._fireOnBlocked=function(He){K.on("blocked").fire(He),To.filter(function(rt){return rt.name===K.name&&rt!==K&&!rt._state.vcFired}).map(function(rt){return rt.on("versionchange").fire(He)})},this.use(Fg),this.use(Xd),this.use($1),this.use(L1),this.use(Pg);var tt=new Proxy(this,{get:function(He,rt,Ge){if(rt==="_vip")return!0;if(rt==="table")return function(at){return Tc(K.table(at),tt)};var Qe=Reflect.get(He,rt,Ge);return Qe instanceof tp?Tc(Qe,tt):rt==="tables"?Qe.map(function(at){return Tc(at,tt)}):rt==="_createTransaction"?function(){return Tc(Qe.apply(this,arguments),tt)}:Qe}});this.vip=tt,te.forEach(function(He){return He(K)})}var ou,si=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Bg=(Jd.prototype.subscribe=function(A,j,K){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:j,complete:K})},Jd.prototype[si]=function(){return this},Jd);function Jd(A){this._subscribe=A}try{ou={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{ou={indexedDB:null,IDBKeyRange:null}}function zg(A){var j,K=!1,te=new Bg(function(ue){var _e=J(A),je,$e=!1,We={},Ye={},tt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,je&&je.abort(),He&&va.storagemutated.unsubscribe(Ge))}};ue.start&&ue.start(tt);var He=!1,rt=function(){return ss(Qe)},Ge=function(at){Gd(We,at),hp(Ye,We)&&rt()},Qe=function(){var at,Xe,ft;!$e&&ou.indexedDB&&(We={},at={},je&&je.abort(),je=new AbortController,ft=function(gt){var bt=q();try{_e&&Dn();var wt=Xt(A,gt);return wt=_e?wt.finally(zn):wt}finally{bt&&B()}}(Xe={subscr:at,signal:je.signal,requery:rt,querier:A,trans:null}),Promise.resolve(ft).then(function(gt){K=!0,j=gt,$e||Xe.signal.aborted||(We={},function(bt){for(var wt in bt)if(h(bt,wt))return;return 1}(Ye=at)||He||(va(eu,Ge),He=!0),ss(function(){return!$e&&ue.next&&ue.next(gt)}))},function(gt){K=!1,["DatabaseClosedError","AbortError"].includes(gt==null?void 0:gt.name)||$e||ss(function(){$e||ue.error&&ue.error(gt)})}))};return setTimeout(rt,0),tt});return te.hasValue=function(){return K},te.getValue=function(){return j},te}var rl=no;function vp(A){var j=hs;try{hs=!0,va.storagemutated.fire(A),gp(A,!0)}finally{hs=j}}p(rl,r(r({},it),{delete:function(A){return new rl(A,{addons:[]}).delete()},exists:function(A){return new rl(A,{addons:[]}).open().then(function(j){return j.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return j=rl.dependencies,K=j.indexedDB,j=j.IDBKeyRange,(Hd(K)?Promise.resolve(K.databases()).then(function(te){return te.map(function(ue){return ue.name}).filter(function(ue){return ue!==Gs})}):up(K,j).toCollection().primaryKeys()).then(A)}catch{return Ur(new Te.MissingAPI)}var j,K},defineClass:function(){return function(A){u(this,A)}},ignoreTransaction:function(A){return ke.trans?is(ke.transless,A):A()},vip:cp,async:function(A){return function(){try{var j=kc(A.apply(this,arguments));return j&&typeof j.then=="function"?j:M.resolve(j)}catch(K){return Ur(K)}}},spawn:function(A,j,K){try{var te=kc(A.apply(K,j||[]));return te&&typeof te.then=="function"?te:M.resolve(te)}catch(ue){return Ur(ue)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(A,j){return j=M.resolve(typeof A=="function"?rl.ignoreTransaction(A):A).timeout(j||6e4),ke.trans?ke.trans.waitFor(j):j},Promise:M,debug:{get:function(){return Le},set:function(A){Se(A)}},derive:b,extend:u,props:p,override:E,Events:cs,on:va,liveQuery:zg,extendObservabilitySet:Gd,getByKeyPath:D,setByKeyPath:O,delByKeyPath:function(A,j){typeof j=="string"?O(A,j,void 0):"length"in j&&[].map.call(j,function(K){O(A,K,void 0)})},shallowClone:N,deepClone:Z,getObjectDiff:Kd,cmp:Un,asap:k,minKey:-1/0,addons:[],connections:To,errnames:Pe,dependencies:ou,cache:tl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,j,K){return A+j/Math.pow(10,2*K)})})),rl.maxKey=nu(rl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(va(eu,function(A){hs||(A=new CustomEvent(Js,{detail:A}),hs=!0,dispatchEvent(A),hs=!1)}),addEventListener(Js,function(A){A=A.detail,hs||vp(A)}));var su,hs=!1,qa=function(){};return typeof BroadcastChannel<"u"&&((qa=function(){(su=new BroadcastChannel(Js)).onmessage=function(A){return A.data&&vp(A.data)}})(),typeof su.unref=="function"&&su.unref(),va(eu,function(A){hs||su.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!no.disableBfCache&&A.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),su!=null&&su.close();for(var j=0,K=To;j<K.length;j++)K[j].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!no.disableBfCache&&A.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),qa(),vp({all:new wa(-1/0,[[]])}))})),M.rejectionMapper=function(A,j){return!A||A instanceof re||A instanceof TypeError||A instanceof SyntaxError||!A.name||!qe[A.name]?A:(j=new qe[A.name](j||A.message,A),"stack"in A&&v(j,"stack",{get:function(){return this.inner.stack}}),j)},Se(Le),r(no,Object.freeze({__proto__:null,Dexie:no,liveQuery:zg,Entity:Dd,cmp:Un,PropModification:Xl,replacePrefix:function(A,j){return new Xl({replacePrefix:[A,j]})},add:function(A){return new Xl({add:A})},remove:function(A){return new Xl({remove:A})},default:no,RangeSet:wa,mergeRanges:el,rangesOverlap:Dg}),{default:no}),no})}(wb)),wb.exports}var rU=nU();const eE=ni(rU),QR=Symbol.for("Dexie"),jb=globalThis[QR]||(globalThis[QR]=eE);if(eE.semVer!==jb.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${eE.semVer} and ${jb.semVer}`);const{liveQuery:Fwe,mergeRanges:Lwe,rangesOverlap:$we,RangeSet:Bwe,cmp:zwe,Entity:Uwe,PropModification:qwe,replacePrefix:Hwe,add:Vwe,remove:Gwe}=jb;class aU extends jb{constructor(){super("LiteChatDatabase_Rewrite_v1");Va(this,"conversations");Va(this,"interactions");Va(this,"mods");Va(this,"appState");Va(this,"providerConfigs");Va(this,"apiKeys");Va(this,"syncRepos");Va(this,"projects");this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const sn=new aU,qc=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class Ht{static async loadConversations(){try{return(await sn.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>qc(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await sn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await sn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await sn.interactions.where({conversationId:t}).sortBy("index")).map(r=>qc(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await sn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await sn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await sn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await sn.mods.orderBy("loadOrder").toArray()).map(n=>qc(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await sn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await sn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await sn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await sn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=sn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>qc(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await sn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await sn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=sn.apiKeys)==null?void 0:t.toArray())??[]).map(r=>qc(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await sn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await sn.transaction("rw",[sn.apiKeys,sn.providerConfigs],async()=>{const n=await sn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await sn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await sn.syncRepos.toArray()).map(n=>qc(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await sn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await sn.transaction("rw",[sn.syncRepos,sn.conversations],async()=>{const n=await sn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await sn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await sn.projects.orderBy("updatedAt").reverse().toArray()).map(n=>qc(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await sn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await sn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await sn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>sn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await sn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await sn.transaction("rw",[sn.projects,sn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await sn.transaction("rw",[sn.conversations,sn.interactions,sn.mods,sn.appState,sn.providerConfigs,sn.apiKeys,sn.syncRepos,sn.projects],async()=>{await sn.interactions.clear(),await sn.conversations.clear(),await sn.projects.clear(),await sn.mods.clear(),await sn.appState.clear(),await sn.providerConfigs.clear(),await sn.apiKeys.clear(),await sn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const Cr=zl(Ul((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n});try{const r=await Ht.loadInteractionsForConversation(n);r.sort((a,i)=>a.index-i.index),e({interactions:r,status:"idle"})}catch(r){console.error("InteractionStore: Error loading interactions",r),e({error:"Failed load interactions",status:"error"})}},_addInteractionToState:n=>{const r=t().interactions;if(r.some(a=>a.id===n.id))console.warn(`InteractionStore: Interaction ${n.id} already exists in state.`);else{const a=[...r,n];a.sort((i,o)=>i.index-o.index),e({interactions:a})}},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];let s={...o.metadata||{}};r.metadata&&(s={...s,...r.metadata},r.metadata.toolCalls!==void 0&&(s.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&(s.toolResults=[...r.metadata.toolResults])),Object.assign(o,{...r,metadata:void 0}),o.metadata=s}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)?a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r:console.warn(`InteractionStore: Tried to append chunk to non-streaming interaction buffer ${n}.`)})},_removeInteractionFromState:n=>{const a=t().interactions.filter(i=>i.id!==n);e({interactions:a})},addInteractionAndPersist:async n=>{const a=t().interactions.filter(u=>u.conversationId===n.conversationId),i=a.reduce((u,c)=>Math.max(u,c.index),-1)+1,o=a.length>0?a[a.length-1].id:null,s={...n,index:i,parentId:o};t()._addInteractionToState(s);try{return await Ht.saveInteraction(s),s}catch(u){throw console.error("InteractionStore: Error persisting added interaction",u),t()._removeInteractionFromState(s.id),e({error:"Failed to save interaction"}),u}},updateInteractionAndPersist:async n=>{try{await Ht.saveInteraction({...n})}catch(r){throw console.error(`InteractionStore: Error persisting final update for ${n.id}`,r),e({error:"Failed to save final interaction state"}),r}},deleteInteraction:async n=>{const r=t().interactions.find(i=>i.id===n);if(!r)return;const a={...r};t()._removeInteractionFromState(n),t()._removeStreamingId(n);try{await Ht.deleteInteraction(n)}catch(i){throw console.error("InteractionStore: Error deleting interaction",i),t()._addInteractionToState(a),a.status==="STREAMING"&&t()._addStreamingId(n),e({error:"Failed to delete interaction"}),i}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions."),e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null})},setError:n=>{e(r=>{r.error=n,n?r.status="error":r.status==="error"&&(r.status=r.streamingInteractionIds.length>0?"streaming":"idle")})},setStatus:n=>{t().status!==n&&e({status:n})},_addStreamingId:n=>{e(r=>{r.streamingInteractionIds.includes(n)||(r.streamingInteractionIds.push(n),r.activeStreamBuffers[n]="",r.streamingInteractionIds.length===1&&(r.status="streaming"),r.error=null)})},_removeStreamingId:n=>{e(r=>{const a=r.streamingInteractionIds.indexOf(n);a!==-1&&(r.streamingInteractionIds.splice(a,1),delete r.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),r.streamingInteractionIds.length===0&&r.status==="streaming"&&(r.status=r.error?"error":"idle"))})}})));var HO="vercel.ai.error",iU=Symbol.for(HO),VO,oU=class GO extends Error{constructor({name:t,message:n,cause:r}){super(n),this[VO]=!0,this.name=t,this.cause=r}static isInstance(t){return GO.hasMarker(t,HO)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};VO=iU;var xn=oU,WO="AI_APICallError",KO=`vercel.ai.error.${WO}`,sU=Symbol.for(KO),ZO,ga=class extends xn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:WO,message:t,cause:s}),this[ZO]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return xn.hasMarker(t,KO)}};ZO=sU;var YO="AI_EmptyResponseBodyError",XO=`vercel.ai.error.${YO}`,lU=Symbol.for(XO),JO,yC=class extends xn{constructor({message:t="Empty response body"}={}){super({name:YO,message:t}),this[JO]=!0}static isInstance(t){return xn.hasMarker(t,XO)}};JO=lU;function I0(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var QO="AI_InvalidArgumentError",eD=`vercel.ai.error.${QO}`,uU=Symbol.for(eD),tD,bC=class extends xn{constructor({message:t,cause:n,argument:r}){super({name:QO,message:t,cause:n}),this[tD]=!0,this.argument=r}static isInstance(t){return xn.hasMarker(t,eD)}};tD=uU;var nD="AI_InvalidPromptError",rD=`vercel.ai.error.${nD}`,cU=Symbol.for(rD),aD,wl=class extends xn{constructor({prompt:t,message:n,cause:r}){super({name:nD,message:`Invalid prompt: ${n}`,cause:r}),this[aD]=!0,this.prompt=t}static isInstance(t){return xn.hasMarker(t,rD)}};aD=cU;var iD="AI_InvalidResponseDataError",oD=`vercel.ai.error.${iD}`,dU=Symbol.for(oD),sD,zf=class extends xn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:iD,message:n}),this[sD]=!0,this.data=t}static isInstance(t){return xn.hasMarker(t,oD)}};sD=dU;var lD="AI_JSONParseError",uD=`vercel.ai.error.${lD}`,fU=Symbol.for(uD),cD,Uu=class extends xn{constructor({text:t,cause:n}){super({name:lD,message:`JSON parsing failed: Text: ${t}.
Error message: ${I0(n)}`,cause:n}),this[cD]=!0,this.text=t}static isInstance(t){return xn.hasMarker(t,uD)}};cD=fU;var dD="AI_LoadAPIKeyError",fD=`vercel.ai.error.${dD}`,hU=Symbol.for(fD),hD,By=class extends xn{constructor({message:t}){super({name:dD,message:t}),this[hD]=!0}static isInstance(t){return xn.hasMarker(t,fD)}};hD=hU;var pD="AI_TooManyEmbeddingValuesForCallError",mD=`vercel.ai.error.${pD}`,pU=Symbol.for(mD),gD,vC=class extends xn{constructor(t){super({name:pD,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[gD]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return xn.hasMarker(t,mD)}};gD=pU;var yD="AI_TypeValidationError",bD=`vercel.ai.error.${yD}`,mU=Symbol.for(bD),vD,gU=class tE extends xn{constructor({value:t,cause:n}){super({name:yD,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${I0(n)}`,cause:n}),this[vD]=!0,this.value=t}static isInstance(t){return xn.hasMarker(t,bD)}static wrap({value:t,cause:n}){return tE.isInstance(n)&&n.value===t?n:new tE({value:t,cause:n})}};vD=mU;var qu=gU,wD="AI_UnsupportedFunctionalityError",_D=`vercel.ai.error.${wD}`,yU=Symbol.for(_D),xD,br=class extends xn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:wD,message:n}),this[xD]=!0,this.functionality=t}static isInstance(t){return xn.hasMarker(t,_D)}};xD=yU;let bU=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var wC={},Qv={};Qv.byteLength=_U;Qv.toByteArray=SU;Qv.fromByteArray=kU;var ks=[],mo=[],vU=typeof Uint8Array<"u"?Uint8Array:Array,Ox="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ef=0,wU=Ox.length;Ef<wU;++Ef)ks[Ef]=Ox[Ef],mo[Ox.charCodeAt(Ef)]=Ef;mo[45]=62;mo[95]=63;function SD(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function _U(e){var t=SD(e),n=t[0],r=t[1];return(n+r)*3/4-r}function xU(e,t,n){return(t+n)*3/4-n}function SU(e){var t,n=SD(e),r=n[0],a=n[1],i=new vU(xU(e,r,a)),o=0,s=a>0?r-4:r,u;for(u=0;u<s;u+=4)t=mo[e.charCodeAt(u)]<<18|mo[e.charCodeAt(u+1)]<<12|mo[e.charCodeAt(u+2)]<<6|mo[e.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=mo[e.charCodeAt(u)]<<2|mo[e.charCodeAt(u+1)]>>4,i[o++]=t&255),a===1&&(t=mo[e.charCodeAt(u)]<<10|mo[e.charCodeAt(u+1)]<<4|mo[e.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function EU(e){return ks[e>>18&63]+ks[e>>12&63]+ks[e>>6&63]+ks[e&63]}function CU(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(EU(r));return a.join("")}function kU(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(CU(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(ks[t>>2]+ks[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(ks[t>>10]+ks[t>>4&63]+ks[t<<2&63]+"=")),a.join("")}var _C={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_C.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,u=(1<<s)-1,c=u>>1,f=-7,h=n?a-1:0,p=n?-1:1,g=e[t+h];for(h+=p,i=g&(1<<-f)-1,g>>=-f,f+=s;f>0;i=i*256+e[t+h],h+=p,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+e[t+h],h+=p,f-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(g?-1:1)*o*Math.pow(2,i-r)};_C.write=function(e,t,n,r,a,i){var o,s,u,c=i*8-a-1,f=(1<<c)-1,h=f>>1,p=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=p/u:t+=p*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=v,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[n+g]=o&255,g+=v,o/=256,c-=8);e[n+g-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Qv,n=_C,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;f.TYPED_ARRAY_SUPPORT=u(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const ge=new i(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,i.prototype),Object.setPrototypeOf(ge,I),ge.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(ge){if(ge>a)throw new RangeError('The value "'+ge+'" is invalid for option "size"');const I=new i(ge);return Object.setPrototypeOf(I,f.prototype),I}function f(ge,I,V){if(typeof ge=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ge)}return h(ge,I,V)}f.poolSize=8192;function h(ge,I,V){if(typeof ge=="string")return b(ge,I);if(o.isView(ge))return x(ge);if(ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge);if(ht(ge,o)||ge&&ht(ge.buffer,o)||typeof s<"u"&&(ht(ge,s)||ge&&ht(ge.buffer,s)))return S(ge,I,V);if(typeof ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=ge.valueOf&&ge.valueOf();if(he!=null&&he!==ge)return f.from(he,I,V);const Oe=E(ge);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ge[Symbol.toPrimitive]=="function")return f.from(ge[Symbol.toPrimitive]("string"),I,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge)}f.from=function(ge,I,V){return h(ge,I,V)},Object.setPrototypeOf(f.prototype,i.prototype),Object.setPrototypeOf(f,i);function p(ge){if(typeof ge!="number")throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function g(ge,I,V){return p(ge),ge<=0?c(ge):I!==void 0?typeof V=="string"?c(ge).fill(I,V):c(ge).fill(I):c(ge)}f.alloc=function(ge,I,V){return g(ge,I,V)};function v(ge){return p(ge),c(ge<0?0:C(ge)|0)}f.allocUnsafe=function(ge){return v(ge)},f.allocUnsafeSlow=function(ge){return v(ge)};function b(ge,I){if((typeof I!="string"||I==="")&&(I="utf8"),!f.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const V=D(ge,I)|0;let he=c(V);const Oe=he.write(ge,I);return Oe!==V&&(he=he.slice(0,Oe)),he}function _(ge){const I=ge.length<0?0:C(ge.length)|0,V=c(I);for(let he=0;he<I;he+=1)V[he]=ge[he]&255;return V}function x(ge){if(ht(ge,i)){const I=new i(ge);return S(I.buffer,I.byteOffset,I.byteLength)}return _(ge)}function S(ge,I,V){if(I<0||ge.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<I+(V||0))throw new RangeError('"length" is outside of buffer bounds');let he;return I===void 0&&V===void 0?he=new i(ge):V===void 0?he=new i(ge,I):he=new i(ge,I,V),Object.setPrototypeOf(he,f.prototype),he}function E(ge){if(f.isBuffer(ge)){const I=C(ge.length)|0,V=c(I);return V.length===0||ge.copy(V,0,0,I),V}if(ge.length!==void 0)return typeof ge.length!="number"||Et(ge.length)?c(0):_(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return _(ge.data)}function C(ge){if(ge>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ge|0}function k(ge){return+ge!=ge&&(ge=0),f.alloc(+ge)}f.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==f.prototype},f.compare=function(I,V){if(ht(I,i)&&(I=f.from(I,I.offset,I.byteLength)),ht(V,i)&&(V=f.from(V,V.offset,V.byteLength)),!f.isBuffer(I)||!f.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===V)return 0;let he=I.length,Oe=V.length;for(let ve=0,ke=Math.min(he,Oe);ve<ke;++ve)if(I[ve]!==V[ve]){he=I[ve],Oe=V[ve];break}return he<Oe?-1:Oe<he?1:0},f.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(I,V){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return f.alloc(0);let he;if(V===void 0)for(V=0,he=0;he<I.length;++he)V+=I[he].length;const Oe=f.allocUnsafe(V);let ve=0;for(he=0;he<I.length;++he){let ke=I[he];if(ht(ke,i))ve+ke.length>Oe.length?(f.isBuffer(ke)||(ke=f.from(ke)),ke.copy(Oe,ve)):i.prototype.set.call(Oe,ke,ve);else if(f.isBuffer(ke))ke.copy(Oe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=ke.length}return Oe};function D(ge,I){if(f.isBuffer(ge))return ge.length;if(o.isView(ge)||ht(ge,o))return ge.byteLength;if(typeof ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ge);const V=ge.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&V===0)return 0;let Oe=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return xe(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V*2;case"hex":return V>>>1;case"base64":return Ve(ge).length;default:if(Oe)return he?-1:xe(ge).length;I=(""+I).toLowerCase(),Oe=!0}}f.byteLength=D;function O(ge,I,V){let he=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0,I>>>=0,V<=I))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return Y(this,I,V);case"utf8":case"utf-8":return ne(this,I,V);case"ascii":return W(this,I,V);case"latin1":case"binary":return J(this,I,V);case"base64":return ae(this,I,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,I,V);default:if(he)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),he=!0}}f.prototype._isBuffer=!0;function N(ge,I,V){const he=ge[I];ge[I]=ge[V],ge[V]=he}f.prototype.swap16=function(){const I=this.length;if(I%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let V=0;V<I;V+=2)N(this,V,V+1);return this},f.prototype.swap32=function(){const I=this.length;if(I%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let V=0;V<I;V+=4)N(this,V,V+3),N(this,V+1,V+2);return this},f.prototype.swap64=function(){const I=this.length;if(I%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let V=0;V<I;V+=8)N(this,V,V+7),N(this,V+1,V+6),N(this,V+2,V+5),N(this,V+3,V+4);return this},f.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?ne(this,0,I):O.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(I){if(!f.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:f.compare(this,I)===0},f.prototype.inspect=function(){let I="";const V=e.INSPECT_MAX_BYTES;return I=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(I+=" ... "),"<Buffer "+I+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(I,V,he,Oe,ve){if(ht(I,i)&&(I=f.from(I,I.offset,I.byteLength)),!f.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(V===void 0&&(V=0),he===void 0&&(he=I?I.length:0),Oe===void 0&&(Oe=0),ve===void 0&&(ve=this.length),V<0||he>I.length||Oe<0||ve>this.length)throw new RangeError("out of range index");if(Oe>=ve&&V>=he)return 0;if(Oe>=ve)return-1;if(V>=he)return 1;if(V>>>=0,he>>>=0,Oe>>>=0,ve>>>=0,this===I)return 0;let ke=ve-Oe,le=he-V;const dt=Math.min(ke,le),yt=this.slice(Oe,ve),M=I.slice(V,he);for(let Be=0;Be<dt;++Be)if(yt[Be]!==M[Be]){ke=yt[Be],le=M[Be];break}return ke<le?-1:le<ke?1:0};function z(ge,I,V,he,Oe){if(ge.length===0)return-1;if(typeof V=="string"?(he=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,Et(V)&&(V=Oe?0:ge.length-1),V<0&&(V=ge.length+V),V>=ge.length){if(Oe)return-1;V=ge.length-1}else if(V<0)if(Oe)V=0;else return-1;if(typeof I=="string"&&(I=f.from(I,he)),f.isBuffer(I))return I.length===0?-1:H(ge,I,V,he,Oe);if(typeof I=="number")return I=I&255,typeof i.prototype.indexOf=="function"?Oe?i.prototype.indexOf.call(ge,I,V):i.prototype.lastIndexOf.call(ge,I,V):H(ge,[I],V,he,Oe);throw new TypeError("val must be string, number or Buffer")}function H(ge,I,V,he,Oe){let ve=1,ke=ge.length,le=I.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(ge.length<2||I.length<2)return-1;ve=2,ke/=2,le/=2,V/=2}function dt(M,Be){return ve===1?M[Be]:M.readUInt16BE(Be*ve)}let yt;if(Oe){let M=-1;for(yt=V;yt<ke;yt++)if(dt(ge,yt)===dt(I,M===-1?0:yt-M)){if(M===-1&&(M=yt),yt-M+1===le)return M*ve}else M!==-1&&(yt-=yt-M),M=-1}else for(V+le>ke&&(V=ke-le),yt=V;yt>=0;yt--){let M=!0;for(let Be=0;Be<le;Be++)if(dt(ge,yt+Be)!==dt(I,Be)){M=!1;break}if(M)return yt}return-1}f.prototype.includes=function(I,V,he){return this.indexOf(I,V,he)!==-1},f.prototype.indexOf=function(I,V,he){return z(this,I,V,he,!0)},f.prototype.lastIndexOf=function(I,V,he){return z(this,I,V,he,!1)};function X(ge,I,V,he){V=Number(V)||0;const Oe=ge.length-V;he?(he=Number(he),he>Oe&&(he=Oe)):he=Oe;const ve=I.length;he>ve/2&&(he=ve/2);let ke;for(ke=0;ke<he;++ke){const le=parseInt(I.substr(ke*2,2),16);if(Et(le))return ke;ge[V+ke]=le}return ke}function F(ge,I,V,he){return xt(xe(I,ge.length-V),ge,V,he)}function Z(ge,I,V,he){return xt(Le(I),ge,V,he)}function L(ge,I,V,he){return xt(Ve(I),ge,V,he)}function de(ge,I,V,he){return xt(Se(I,ge.length-V),ge,V,he)}f.prototype.write=function(I,V,he,Oe){if(V===void 0)Oe="utf8",he=this.length,V=0;else if(he===void 0&&typeof V=="string")Oe=V,he=this.length,V=0;else if(isFinite(V))V=V>>>0,isFinite(he)?(he=he>>>0,Oe===void 0&&(Oe="utf8")):(Oe=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ve=this.length-V;if((he===void 0||he>ve)&&(he=ve),I.length>0&&(he<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let ke=!1;for(;;)switch(Oe){case"hex":return X(this,I,V,he);case"utf8":case"utf-8":return F(this,I,V,he);case"ascii":case"latin1":case"binary":return Z(this,I,V,he);case"base64":return L(this,I,V,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,I,V,he);default:if(ke)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),ke=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(ge,I,V){return I===0&&V===ge.length?t.fromByteArray(ge):t.fromByteArray(ge.slice(I,V))}function ne(ge,I,V){V=Math.min(ge.length,V);const he=[];let Oe=I;for(;Oe<V;){const ve=ge[Oe];let ke=null,le=ve>239?4:ve>223?3:ve>191?2:1;if(Oe+le<=V){let dt,yt,M,Be;switch(le){case 1:ve<128&&(ke=ve);break;case 2:dt=ge[Oe+1],(dt&192)===128&&(Be=(ve&31)<<6|dt&63,Be>127&&(ke=Be));break;case 3:dt=ge[Oe+1],yt=ge[Oe+2],(dt&192)===128&&(yt&192)===128&&(Be=(ve&15)<<12|(dt&63)<<6|yt&63,Be>2047&&(Be<55296||Be>57343)&&(ke=Be));break;case 4:dt=ge[Oe+1],yt=ge[Oe+2],M=ge[Oe+3],(dt&192)===128&&(yt&192)===128&&(M&192)===128&&(Be=(ve&15)<<18|(dt&63)<<12|(yt&63)<<6|M&63,Be>65535&&Be<1114112&&(ke=Be))}}ke===null?(ke=65533,le=1):ke>65535&&(ke-=65536,he.push(ke>>>10&1023|55296),ke=56320|ke&1023),he.push(ke),Oe+=le}return se(he)}const ee=4096;function se(ge){const I=ge.length;if(I<=ee)return String.fromCharCode.apply(String,ge);let V="",he=0;for(;he<I;)V+=String.fromCharCode.apply(String,ge.slice(he,he+=ee));return V}function W(ge,I,V){let he="";V=Math.min(ge.length,V);for(let Oe=I;Oe<V;++Oe)he+=String.fromCharCode(ge[Oe]&127);return he}function J(ge,I,V){let he="";V=Math.min(ge.length,V);for(let Oe=I;Oe<V;++Oe)he+=String.fromCharCode(ge[Oe]);return he}function Y(ge,I,V){const he=ge.length;(!I||I<0)&&(I=0),(!V||V<0||V>he)&&(V=he);let Oe="";for(let ve=I;ve<V;++ve)Oe+=Ft[ge[ve]];return Oe}function re(ge,I,V){const he=ge.slice(I,V);let Oe="";for(let ve=0;ve<he.length-1;ve+=2)Oe+=String.fromCharCode(he[ve]+he[ve+1]*256);return Oe}f.prototype.slice=function(I,V){const he=this.length;I=~~I,V=V===void 0?he:~~V,I<0?(I+=he,I<0&&(I=0)):I>he&&(I=he),V<0?(V+=he,V<0&&(V=0)):V>he&&(V=he),V<I&&(V=I);const Oe=this.subarray(I,V);return Object.setPrototypeOf(Oe,f.prototype),Oe};function be(ge,I,V){if(ge%1!==0||ge<0)throw new RangeError("offset is not uint");if(ge+I>V)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(I,V,he){I=I>>>0,V=V>>>0,he||be(I,V,this.length);let Oe=this[I],ve=1,ke=0;for(;++ke<V&&(ve*=256);)Oe+=this[I+ke]*ve;return Oe},f.prototype.readUintBE=f.prototype.readUIntBE=function(I,V,he){I=I>>>0,V=V>>>0,he||be(I,V,this.length);let Oe=this[I+--V],ve=1;for(;V>0&&(ve*=256);)Oe+=this[I+--V]*ve;return Oe},f.prototype.readUint8=f.prototype.readUInt8=function(I,V){return I=I>>>0,V||be(I,1,this.length),this[I]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(I,V){return I=I>>>0,V||be(I,2,this.length),this[I]|this[I+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(I,V){return I=I>>>0,V||be(I,2,this.length),this[I]<<8|this[I+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(I,V){return I=I>>>0,V||be(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+this[I+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(I,V){return I=I>>>0,V||be(I,4,this.length),this[I]*16777216+(this[I+1]<<16|this[I+2]<<8|this[I+3])},f.prototype.readBigUInt64LE=Tt(function(I){I=I>>>0,Ne(I,"offset");const V=this[I],he=this[I+7];(V===void 0||he===void 0)&&ce(I,this.length-8);const Oe=V+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24,ve=this[++I]+this[++I]*2**8+this[++I]*2**16+he*2**24;return BigInt(Oe)+(BigInt(ve)<<BigInt(32))}),f.prototype.readBigUInt64BE=Tt(function(I){I=I>>>0,Ne(I,"offset");const V=this[I],he=this[I+7];(V===void 0||he===void 0)&&ce(I,this.length-8);const Oe=V*2**24+this[++I]*2**16+this[++I]*2**8+this[++I],ve=this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+he;return(BigInt(Oe)<<BigInt(32))+BigInt(ve)}),f.prototype.readIntLE=function(I,V,he){I=I>>>0,V=V>>>0,he||be(I,V,this.length);let Oe=this[I],ve=1,ke=0;for(;++ke<V&&(ve*=256);)Oe+=this[I+ke]*ve;return ve*=128,Oe>=ve&&(Oe-=Math.pow(2,8*V)),Oe},f.prototype.readIntBE=function(I,V,he){I=I>>>0,V=V>>>0,he||be(I,V,this.length);let Oe=V,ve=1,ke=this[I+--Oe];for(;Oe>0&&(ve*=256);)ke+=this[I+--Oe]*ve;return ve*=128,ke>=ve&&(ke-=Math.pow(2,8*V)),ke},f.prototype.readInt8=function(I,V){return I=I>>>0,V||be(I,1,this.length),this[I]&128?(255-this[I]+1)*-1:this[I]},f.prototype.readInt16LE=function(I,V){I=I>>>0,V||be(I,2,this.length);const he=this[I]|this[I+1]<<8;return he&32768?he|4294901760:he},f.prototype.readInt16BE=function(I,V){I=I>>>0,V||be(I,2,this.length);const he=this[I+1]|this[I]<<8;return he&32768?he|4294901760:he},f.prototype.readInt32LE=function(I,V){return I=I>>>0,V||be(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},f.prototype.readInt32BE=function(I,V){return I=I>>>0,V||be(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},f.prototype.readBigInt64LE=Tt(function(I){I=I>>>0,Ne(I,"offset");const V=this[I],he=this[I+7];(V===void 0||he===void 0)&&ce(I,this.length-8);const Oe=this[I+4]+this[I+5]*2**8+this[I+6]*2**16+(he<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(V+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24)}),f.prototype.readBigInt64BE=Tt(function(I){I=I>>>0,Ne(I,"offset");const V=this[I],he=this[I+7];(V===void 0||he===void 0)&&ce(I,this.length-8);const Oe=(V<<24)+this[++I]*2**16+this[++I]*2**8+this[++I];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+he)}),f.prototype.readFloatLE=function(I,V){return I=I>>>0,V||be(I,4,this.length),n.read(this,I,!0,23,4)},f.prototype.readFloatBE=function(I,V){return I=I>>>0,V||be(I,4,this.length),n.read(this,I,!1,23,4)},f.prototype.readDoubleLE=function(I,V){return I=I>>>0,V||be(I,8,this.length),n.read(this,I,!0,52,8)},f.prototype.readDoubleBE=function(I,V){return I=I>>>0,V||be(I,8,this.length),n.read(this,I,!1,52,8)};function we(ge,I,V,he,Oe,ve){if(!f.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>Oe||I<ve)throw new RangeError('"value" argument is out of bounds');if(V+he>ge.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(I,V,he,Oe){if(I=+I,V=V>>>0,he=he>>>0,!Oe){const le=Math.pow(2,8*he)-1;we(this,I,V,he,le,0)}let ve=1,ke=0;for(this[V]=I&255;++ke<he&&(ve*=256);)this[V+ke]=I/ve&255;return V+he},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(I,V,he,Oe){if(I=+I,V=V>>>0,he=he>>>0,!Oe){const le=Math.pow(2,8*he)-1;we(this,I,V,he,le,0)}let ve=he-1,ke=1;for(this[V+ve]=I&255;--ve>=0&&(ke*=256);)this[V+ve]=I/ke&255;return V+he},f.prototype.writeUint8=f.prototype.writeUInt8=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,1,255,0),this[V]=I&255,V+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,2,65535,0),this[V]=I&255,this[V+1]=I>>>8,V+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,2,65535,0),this[V]=I>>>8,this[V+1]=I&255,V+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,4,4294967295,0),this[V+3]=I>>>24,this[V+2]=I>>>16,this[V+1]=I>>>8,this[V]=I&255,V+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,4,4294967295,0),this[V]=I>>>24,this[V+1]=I>>>16,this[V+2]=I>>>8,this[V+3]=I&255,V+4};function Me(ge,I,V,he,Oe){Ce(I,he,Oe,ge,V,7);let ve=Number(I&BigInt(4294967295));ge[V++]=ve,ve=ve>>8,ge[V++]=ve,ve=ve>>8,ge[V++]=ve,ve=ve>>8,ge[V++]=ve;let ke=Number(I>>BigInt(32)&BigInt(4294967295));return ge[V++]=ke,ke=ke>>8,ge[V++]=ke,ke=ke>>8,ge[V++]=ke,ke=ke>>8,ge[V++]=ke,V}function Pe(ge,I,V,he,Oe){Ce(I,he,Oe,ge,V,7);let ve=Number(I&BigInt(4294967295));ge[V+7]=ve,ve=ve>>8,ge[V+6]=ve,ve=ve>>8,ge[V+5]=ve,ve=ve>>8,ge[V+4]=ve;let ke=Number(I>>BigInt(32)&BigInt(4294967295));return ge[V+3]=ke,ke=ke>>8,ge[V+2]=ke,ke=ke>>8,ge[V+1]=ke,ke=ke>>8,ge[V]=ke,V+8}f.prototype.writeBigUInt64LE=Tt(function(I,V=0){return Me(this,I,V,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Tt(function(I,V=0){return Pe(this,I,V,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(I,V,he,Oe){if(I=+I,V=V>>>0,!Oe){const dt=Math.pow(2,8*he-1);we(this,I,V,he,dt-1,-dt)}let ve=0,ke=1,le=0;for(this[V]=I&255;++ve<he&&(ke*=256);)I<0&&le===0&&this[V+ve-1]!==0&&(le=1),this[V+ve]=(I/ke>>0)-le&255;return V+he},f.prototype.writeIntBE=function(I,V,he,Oe){if(I=+I,V=V>>>0,!Oe){const dt=Math.pow(2,8*he-1);we(this,I,V,he,dt-1,-dt)}let ve=he-1,ke=1,le=0;for(this[V+ve]=I&255;--ve>=0&&(ke*=256);)I<0&&le===0&&this[V+ve+1]!==0&&(le=1),this[V+ve]=(I/ke>>0)-le&255;return V+he},f.prototype.writeInt8=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,1,127,-128),I<0&&(I=255+I+1),this[V]=I&255,V+1},f.prototype.writeInt16LE=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,2,32767,-32768),this[V]=I&255,this[V+1]=I>>>8,V+2},f.prototype.writeInt16BE=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,2,32767,-32768),this[V]=I>>>8,this[V+1]=I&255,V+2},f.prototype.writeInt32LE=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,4,2147483647,-2147483648),this[V]=I&255,this[V+1]=I>>>8,this[V+2]=I>>>16,this[V+3]=I>>>24,V+4},f.prototype.writeInt32BE=function(I,V,he){return I=+I,V=V>>>0,he||we(this,I,V,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[V]=I>>>24,this[V+1]=I>>>16,this[V+2]=I>>>8,this[V+3]=I&255,V+4},f.prototype.writeBigInt64LE=Tt(function(I,V=0){return Me(this,I,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Tt(function(I,V=0){return Pe(this,I,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(ge,I,V,he,Oe,ve){if(V+he>ge.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function Te(ge,I,V,he,Oe){return I=+I,V=V>>>0,Oe||Ae(ge,I,V,4),n.write(ge,I,V,he,23,4),V+4}f.prototype.writeFloatLE=function(I,V,he){return Te(this,I,V,!0,he)},f.prototype.writeFloatBE=function(I,V,he){return Te(this,I,V,!1,he)};function qe(ge,I,V,he,Oe){return I=+I,V=V>>>0,Oe||Ae(ge,I,V,8),n.write(ge,I,V,he,52,8),V+8}f.prototype.writeDoubleLE=function(I,V,he){return qe(this,I,V,!0,he)},f.prototype.writeDoubleBE=function(I,V,he){return qe(this,I,V,!1,he)},f.prototype.copy=function(I,V,he,Oe){if(!f.isBuffer(I))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Oe&&Oe!==0&&(Oe=this.length),V>=I.length&&(V=I.length),V||(V=0),Oe>0&&Oe<he&&(Oe=he),Oe===he||I.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),I.length-V<Oe-he&&(Oe=I.length-V+he);const ve=Oe-he;return this===I&&typeof i.prototype.copyWithin=="function"?this.copyWithin(V,he,Oe):i.prototype.set.call(I,this.subarray(he,Oe),V),ve},f.prototype.fill=function(I,V,he,Oe){if(typeof I=="string"){if(typeof V=="string"?(Oe=V,V=0,he=this.length):typeof he=="string"&&(Oe=he,he=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!f.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(I.length===1){const ke=I.charCodeAt(0);(Oe==="utf8"&&ke<128||Oe==="latin1")&&(I=ke)}}else typeof I=="number"?I=I&255:typeof I=="boolean"&&(I=Number(I));if(V<0||this.length<V||this.length<he)throw new RangeError("Out of range index");if(he<=V)return this;V=V>>>0,he=he===void 0?this.length:he>>>0,I||(I=0);let ve;if(typeof I=="number")for(ve=V;ve<he;++ve)this[ve]=I;else{const ke=f.isBuffer(I)?I:f.from(I,Oe),le=ke.length;if(le===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(ve=0;ve<he-V;++ve)this[ve+V]=ke[ve%le]}return this};const it={};function Ie(ge,I,V){it[ge]=class extends V{constructor(){super(),Object.defineProperty(this,"message",{value:I.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ge}]`,this.stack,delete this.name}get code(){return ge}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${ge}]: ${this.message}`}}}Ie("ERR_BUFFER_OUT_OF_BOUNDS",function(ge){return ge?`${ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ie("ERR_INVALID_ARG_TYPE",function(ge,I){return`The "${ge}" argument must be of type number. Received type ${typeof I}`},TypeError),Ie("ERR_OUT_OF_RANGE",function(ge,I,V){let he=`The value of "${ge}" is out of range.`,Oe=V;return Number.isInteger(V)&&Math.abs(V)>2**32?Oe=Re(String(V)):typeof V=="bigint"&&(Oe=String(V),(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))&&(Oe=Re(Oe)),Oe+="n"),he+=` It must be ${I}. Received ${Oe}`,he},RangeError);function Re(ge){let I="",V=ge.length;const he=ge[0]==="-"?1:0;for(;V>=he+4;V-=3)I=`_${ge.slice(V-3,V)}${I}`;return`${ge.slice(0,V)}${I}`}function U(ge,I,V){Ne(I,"offset"),(ge[I]===void 0||ge[I+V]===void 0)&&ce(I,ge.length-(V+1))}function Ce(ge,I,V,he,Oe,ve){if(ge>V||ge<I){const ke=typeof I=="bigint"?"n":"";let le;throw I===0||I===BigInt(0)?le=`>= 0${ke} and < 2${ke} ** ${(ve+1)*8}${ke}`:le=`>= -(2${ke} ** ${(ve+1)*8-1}${ke}) and < 2 ** ${(ve+1)*8-1}${ke}`,new it.ERR_OUT_OF_RANGE("value",le,ge)}U(he,Oe,ve)}function Ne(ge,I){if(typeof ge!="number")throw new it.ERR_INVALID_ARG_TYPE(I,"number",ge)}function ce(ge,I,V){throw Math.floor(ge)!==ge?(Ne(ge,V),new it.ERR_OUT_OF_RANGE("offset","an integer",ge)):I<0?new it.ERR_BUFFER_OUT_OF_BOUNDS:new it.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${I}`,ge)}const ie=/[^+/0-9A-Za-z-_]/g;function Q(ge){if(ge=ge.split("=")[0],ge=ge.trim().replace(ie,""),ge.length<2)return"";for(;ge.length%4!==0;)ge=ge+"=";return ge}function xe(ge,I){I=I||1/0;let V;const he=ge.length;let Oe=null;const ve=[];for(let ke=0;ke<he;++ke){if(V=ge.charCodeAt(ke),V>55295&&V<57344){if(!Oe){if(V>56319){(I-=3)>-1&&ve.push(239,191,189);continue}else if(ke+1===he){(I-=3)>-1&&ve.push(239,191,189);continue}Oe=V;continue}if(V<56320){(I-=3)>-1&&ve.push(239,191,189),Oe=V;continue}V=(Oe-55296<<10|V-56320)+65536}else Oe&&(I-=3)>-1&&ve.push(239,191,189);if(Oe=null,V<128){if((I-=1)<0)break;ve.push(V)}else if(V<2048){if((I-=2)<0)break;ve.push(V>>6|192,V&63|128)}else if(V<65536){if((I-=3)<0)break;ve.push(V>>12|224,V>>6&63|128,V&63|128)}else if(V<1114112){if((I-=4)<0)break;ve.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw new Error("Invalid code point")}return ve}function Le(ge){const I=[];for(let V=0;V<ge.length;++V)I.push(ge.charCodeAt(V)&255);return I}function Se(ge,I){let V,he,Oe;const ve=[];for(let ke=0;ke<ge.length&&!((I-=2)<0);++ke)V=ge.charCodeAt(ke),he=V>>8,Oe=V%256,ve.push(Oe),ve.push(he);return ve}function Ve(ge){return t.toByteArray(Q(ge))}function xt(ge,I,V,he){let Oe;for(Oe=0;Oe<he&&!(Oe+V>=I.length||Oe>=ge.length);++Oe)I[Oe+V]=ge[Oe];return Oe}function ht(ge,I){return ge instanceof I||ge!=null&&ge.constructor!=null&&ge.constructor.name!=null&&ge.constructor.name===I.name}function Et(ge){return ge!==ge}const Ft=function(){const ge="0123456789abcdef",I=new Array(256);for(let V=0;V<16;++V){const he=V*16;for(let Oe=0;Oe<16;++Oe)I[he+Oe]=ge[V]+ge[Oe]}return I}();function Tt(ge){return typeof BigInt>"u"?Ut:ge}function Ut(){throw new Error("BigInt not supported")}})(wC);const Wt=wC.Buffer,Rr=wC.Buffer;var Hc={exports:{}},eN;function AU(){if(eN)return Hc.exports;eN=1;const e=typeof Wt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,u,c){c==null&&u!==null&&typeof u=="object"&&(c=u,u=void 0),e&&Wt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const f=JSON.parse(s,u);if(f===null||typeof f!="object")return f;const h=c&&c.protoAction||"error",p=c&&c.constructorAction||"error";if(h==="ignore"&&p==="ignore")return f;if(h!=="ignore"&&p!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return f}else if(h!=="ignore"&&p==="ignore"){if(t.test(s)===!1)return f}else if(n.test(s)===!1)return f;return a(f,{protoAction:h,constructorAction:p,safe:c&&c.safe})}function a(s,{protoAction:u="error",constructorAction:c="error",safe:f}={}){let h=[s];for(;h.length;){const p=h;h=[];for(const g of p){if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(f===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const b=g[v];b&&typeof b=="object"&&h.push(b)}}}return s}function i(s,u,c){const f=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,c)}finally{Error.stackTraceLimit=f}}function o(s,u){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Hc.exports=i,Hc.exports.default=i,Hc.exports.parse=i,Hc.exports.safeParse=o,Hc.exports.scan=a,Hc.exports}var TU=AU();const Qo=ni(TU);var RU={};function Ms(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function NU(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function IU(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function OU(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),p=f+1,g=p<u.length&&u[p]===" "?u.slice(p+1):u.slice(p);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=DU(e,u);e=h;for(let p=0;p<f.length;p++)i(f[p],c)},flush(u){i(e,u),o(u)}})}function DU(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function O0(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var bd=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=bU(n,t);if(e==null)return a;if(n.includes(r))throw new bC({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},As=bd();function jU(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function MU(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function _b(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function PU({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new By({message:`${r} API key must be a string.`});if(typeof Zr>"u")throw new By({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=RU[t],e==null)throw new By({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new By({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Mb=Symbol.for("vercel.ai.validator");function FU(e){return{[Mb]:!0,validate:e}}function LU(e){return typeof e=="object"&&e!==null&&Mb in e&&e[Mb]===!0&&"validate"in e}function $U(e){return LU(e)?e:BU(e)}function BU(e){return FU(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function zU({value:e,schema:t}){const n=xh({value:e,schema:t});if(!n.success)throw qu.wrap({value:e,cause:n.error});return n.value}function xh({value:e,schema:t}){const n=$U(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:qu.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:qu.wrap({value:e,cause:r})}}}function UU({text:e,schema:t}){try{const n=Qo.parse(e);return t==null?n:zU({value:n,schema:t})}catch(n){throw Uu.isInstance(n)||qu.isInstance(n)?n:new Uu({text:e,cause:n})}}function sd({text:e,schema:t}){try{const n=Qo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=xh({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Uu.isInstance(n)?n:new Uu({text:e,cause:n})}}}function tN(e){try{return Qo.parse(e),!0}catch{return!1}}function qU({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=xh({value:t[e],schema:n});if(!r.success)throw new bC({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var HU=()=>globalThis.fetch,Go=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>VU({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),VU=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=HU()})=>{try{const s=await o(e,{method:"POST",headers:MU(t),body:n.content,signal:i}),u=O0(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw _b(f)||ga.isInstance(f)?f:new ga({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(_b(c)||ga.isInstance(c))?c:new ga({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(_b(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new ga({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},ED=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=O0(r);if(o.trim()==="")return{responseHeaders:s,value:new ga({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=UU({text:o,schema:e});return{responseHeaders:s,value:new ga({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new ga({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},xC=e=>async({response:t})=>{const n=O0(t);if(t.body==null)throw new yC({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(OU()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(sd({text:r,schema:e}))}}))}},vd=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=sd({text:a,schema:e}),o=O0(t);if(!i.success)throw new ga({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:GU,atob:WU}=globalThis;function CD(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=WU(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Yf(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return GU(t)}function kD(e){return e==null?void 0:e.replace(/\/$/,"")}var Zn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Zn||(Zn={}));var nE;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(nE||(nE={}));const Yt=Zn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xl=e=>{switch(typeof e){case"undefined":return Yt.undefined;case"string":return Yt.string;case"number":return isNaN(e)?Yt.nan:Yt.number;case"boolean":return Yt.boolean;case"function":return Yt.function;case"bigint":return Yt.bigint;case"symbol":return Yt.symbol;case"object":return Array.isArray(e)?Yt.array:e===null?Yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Yt.promise:typeof Map<"u"&&e instanceof Map?Yt.map:typeof Set<"u"&&e instanceof Set?Yt.set:typeof Date<"u"&&e instanceof Date?Yt.date:Yt.object;default:return Yt.unknown}},Rt=Zn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),KU=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ki extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(n(o))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}};return a(this),r}static assert(t){if(!(t instanceof Ki))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Zn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ki.create=e=>new Ki(e);const Xf=(e,t)=>{let n;switch(e.code){case Rt.invalid_type:e.received===Yt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Rt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Zn.jsonStringifyReplacer)}`;break;case Rt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Zn.joinValues(e.keys,", ")}`;break;case Rt.invalid_union:n="Invalid input";break;case Rt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Zn.joinValues(e.options)}`;break;case Rt.invalid_enum_value:n=`Invalid enum value. Expected ${Zn.joinValues(e.options)}, received '${e.received}'`;break;case Rt.invalid_arguments:n="Invalid function arguments";break;case Rt.invalid_return_type:n="Invalid function return type";break;case Rt.invalid_date:n="Invalid date";break;case Rt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Zn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Rt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Rt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Rt.custom:n="Invalid input";break;case Rt.invalid_intersection_types:n="Intersection results could not be merged";break;case Rt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Rt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Zn.assertNever(e)}return{message:n}};let AD=Xf;function ZU(e){AD=e}function Pb(){return AD}const Fb=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)s=c(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},YU=[];function Kt(e,t){const n=Pb(),r=Fb({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Xf?void 0:Xf].filter(a=>!!a)});e.common.issues.push(r)}class Ja{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return vn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Ja.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return vn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const vn=Object.freeze({status:"aborted"}),Mf=e=>({status:"dirty",value:e}),hi=e=>({status:"valid",value:e}),rE=e=>e.status==="aborted",aE=e=>e.status==="dirty",ld=e=>e.status==="valid",Tm=e=>typeof Promise<"u"&&e instanceof Promise;function Lb(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function TD(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var an;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(an||(an={}));var pm,mm;class Ps{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const nN=(e,t)=>{if(ld(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ki(e.common.issues);return this._error=n,this._error}}};function On(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var u,c;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??s.defaultError}:typeof s.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:s.defaultError}},description:a}}class Pn{get description(){return this._def.description}_getType(t){return xl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:xl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ja,ctx:{common:t.parent.common,data:t.data,parsedType:xl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Tm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return nN(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return ld(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>ld(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(Tm(a)?a:Promise.resolve(a));return nN(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:Rt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Wo({schema:this,typeName:Mt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return qo.create(this,this._def)}nullable(){return Wu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Uo.create(this)}promise(){return Qf.create(this,this._def)}or(t){return Om.create([this,t],this._def)}and(t){return Dm.create(this,t,this._def)}transform(t){return new Wo({...On(this._def),schema:this,typeName:Mt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Lm({...On(this._def),innerType:this,defaultValue:n,typeName:Mt.ZodDefault})}brand(){return new SC({typeName:Mt.ZodBranded,type:this,...On(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new $m({...On(this._def),innerType:this,catchValue:n,typeName:Mt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return D0.create(this,t)}readonly(){return Bm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const XU=/^c[^\s-]{8,}$/i,JU=/^[0-9a-z]+$/,QU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eq=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tq=/^[a-z0-9_-]{21}$/i,nq=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rq=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aq=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Dx;const oq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lq=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uq=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cq=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dq=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,RD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fq=new RegExp(`^${RD}$`);function ND(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function hq(e){return new RegExp(`^${ND(e)}$`)}function ID(e){let t=`${RD}T${ND(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function pq(e,t){return!!((t==="v4"||!t)&&oq.test(e)||(t==="v6"||!t)&&lq.test(e))}function mq(e,t){if(!nq.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function gq(e,t){return!!((t==="v4"||!t)&&sq.test(e)||(t==="v6"||!t)&&uq.test(e))}class $o extends Pn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Yt.string){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.string,received:i.parsedType}),vn}const r=new Ja;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")aq.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"email",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Dx||(Dx=new RegExp(iq,"u")),Dx.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"emoji",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")eq.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"uuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")tq.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"nanoid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")XU.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")JU.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid2",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")QU.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ulid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Kt(a,{validation:"url",code:Rt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"regex",code:Rt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?ID(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?fq.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?hq(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?rq.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"duration",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?pq(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ip",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?mq(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"jwt",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?gq(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cidr",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?cq.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?dq.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64url",code:Rt.invalid_string,message:i.message}),r.dirty()):Zn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Rt.invalid_string,...an.errToObj(r)})}_addCheck(t){return new $o({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...an.errToObj(t)})}url(t){return this._addCheck({kind:"url",...an.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...an.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...an.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...an.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...an.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...an.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...an.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...an.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...an.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...an.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...an.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...an.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...an.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...an.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...an.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...an.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...an.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...an.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...an.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...an.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...an.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...an.errToObj(n)})}nonempty(t){return this.min(1,an.errToObj(t))}trim(){return new $o({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $o({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $o({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}$o.create=e=>{var t;return new $o({checks:[],typeName:Mt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...On(e)})};function yq(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class Hu extends Pn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Yt.number){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.number,received:i.parsedType}),vn}let r;const a=new Ja;for(const i of this._def.checks)i.kind==="int"?Zn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?yq(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_finite,message:i.message}),a.dirty()):Zn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,an.toString(n))}gt(t,n){return this.setLimit("min",t,!1,an.toString(n))}lte(t,n){return this.setLimit("max",t,!0,an.toString(n))}lt(t,n){return this.setLimit("max",t,!1,an.toString(n))}setLimit(t,n,r,a){return new Hu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:an.toString(a)}]})}_addCheck(t){return new Hu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:an.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:an.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:an.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:an.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:an.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:an.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:an.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:an.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:an.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Zn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Hu.create=e=>new Hu({checks:[],typeName:Mt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...On(e)});class Vu extends Pn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Yt.bigint)return this._getInvalidInput(t);let r;const a=new Ja;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Zn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.bigint,received:n.parsedType}),vn}gte(t,n){return this.setLimit("min",t,!0,an.toString(n))}gt(t,n){return this.setLimit("min",t,!1,an.toString(n))}lte(t,n){return this.setLimit("max",t,!0,an.toString(n))}lt(t,n){return this.setLimit("max",t,!1,an.toString(n))}setLimit(t,n,r,a){return new Vu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:an.toString(a)}]})}_addCheck(t){return new Vu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:an.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:an.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:an.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:an.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:an.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Vu.create=e=>{var t;return new Vu({checks:[],typeName:Mt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...On(e)})};class Rm extends Pn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Yt.boolean){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.boolean,received:r.parsedType}),vn}return hi(t.data)}}Rm.create=e=>new Rm({typeName:Mt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...On(e)});class ud extends Pn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Yt.date){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.date,received:i.parsedType}),vn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_date}),vn}const r=new Ja;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Zn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ud({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:an.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:an.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}ud.create=e=>new ud({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Mt.ZodDate,...On(e)});class $b extends Pn{_parse(t){if(this._getType(t)!==Yt.symbol){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.symbol,received:r.parsedType}),vn}return hi(t.data)}}$b.create=e=>new $b({typeName:Mt.ZodSymbol,...On(e)});class Nm extends Pn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.undefined,received:r.parsedType}),vn}return hi(t.data)}}Nm.create=e=>new Nm({typeName:Mt.ZodUndefined,...On(e)});class Im extends Pn{_parse(t){if(this._getType(t)!==Yt.null){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.null,received:r.parsedType}),vn}return hi(t.data)}}Im.create=e=>new Im({typeName:Mt.ZodNull,...On(e)});class Jf extends Pn{constructor(){super(...arguments),this._any=!0}_parse(t){return hi(t.data)}}Jf.create=e=>new Jf({typeName:Mt.ZodAny,...On(e)});class id extends Pn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return hi(t.data)}}id.create=e=>new id({typeName:Mt.ZodUnknown,...On(e)});class Ol extends Pn{_parse(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.never,received:n.parsedType}),vn}}Ol.create=e=>new Ol({typeName:Mt.ZodNever,...On(e)});class Bb extends Pn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.void,received:r.parsedType}),vn}return hi(t.data)}}Bb.create=e=>new Bb({typeName:Mt.ZodVoid,...On(e)});class Uo extends Pn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==Yt.array)return Kt(n,{code:Rt.invalid_type,expected:Yt.array,received:n.parsedType}),vn;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Kt(n,{code:o?Rt.too_big:Rt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Kt(n,{code:Rt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Kt(n,{code:Rt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new Ps(n,o,n.path,s)))).then(o=>Ja.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new Ps(n,o,n.path,s)));return Ja.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Uo({...this._def,minLength:{value:t,message:an.toString(n)}})}max(t,n){return new Uo({...this._def,maxLength:{value:t,message:an.toString(n)}})}length(t,n){return new Uo({...this._def,exactLength:{value:t,message:an.toString(n)}})}nonempty(t){return this.min(1,t)}}Uo.create=(e,t)=>new Uo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Mt.ZodArray,...On(t)});function Of(e){if(e instanceof Hr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=qo.create(Of(r))}return new Hr({...e._def,shape:()=>t})}else return e instanceof Uo?new Uo({...e._def,type:Of(e.element)}):e instanceof qo?qo.create(Of(e.unwrap())):e instanceof Wu?Wu.create(Of(e.unwrap())):e instanceof Fs?Fs.create(e.items.map(t=>Of(t))):e}class Hr extends Pn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Zn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==Yt.object){const c=this._getOrReturnCtx(t);return Kt(c,{code:Rt.invalid_type,expected:Yt.object,received:c.parsedType}),vn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Ol&&this._def.unknownKeys==="strip"))for(const c in a.data)o.includes(c)||s.push(c);const u=[];for(const c of o){const f=i[c],h=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new Ps(a,h,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Ol){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of s)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")s.length>0&&(Kt(a,{code:Rt.unrecognized_keys,keys:s}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of s){const h=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new Ps(a,h,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const h=await f.key,p=await f.value;c.push({key:h,value:p,alwaysSet:f.alwaysSet})}return c}).then(c=>Ja.mergeObjectSync(r,c)):Ja.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return an.errToObj,new Hr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const u=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=an.errToObj(t).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new Hr({...this._def,unknownKeys:"strip"})}passthrough(){return new Hr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Hr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Hr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Mt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Hr({...this._def,catchall:t})}pick(t){const n={};return Zn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Hr({...this._def,shape:()=>n})}omit(t){const n={};return Zn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Hr({...this._def,shape:()=>n})}deepPartial(){return Of(this)}partial(t){const n={};return Zn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Hr({...this._def,shape:()=>n})}required(t){const n={};return Zn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof qo;)i=i._def.innerType;n[r]=i}}),new Hr({...this._def,shape:()=>n})}keyof(){return OD(Zn.objectKeys(this.shape))}}Hr.create=(e,t)=>new Hr({shape:()=>e,unknownKeys:"strip",catchall:Ol.create(),typeName:Mt.ZodObject,...On(t)});Hr.strictCreate=(e,t)=>new Hr({shape:()=>e,unknownKeys:"strict",catchall:Ol.create(),typeName:Mt.ZodObject,...On(t)});Hr.lazycreate=(e,t)=>new Hr({shape:e,unknownKeys:"strip",catchall:Ol.create(),typeName:Mt.ZodObject,...On(t)});class Om extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new Ki(s.ctx.common.issues));return Kt(n,{code:Rt.invalid_union,unionErrors:o}),vn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(u=>new Ki(u));return Kt(n,{code:Rt.invalid_union,unionErrors:s}),vn}}get options(){return this._def.options}}Om.create=(e,t)=>new Om({options:e,typeName:Mt.ZodUnion,...On(t)});const vl=e=>e instanceof Mm?vl(e.schema):e instanceof Wo?vl(e.innerType()):e instanceof Pm?[e.value]:e instanceof Gu?e.options:e instanceof Fm?Zn.objectValues(e.enum):e instanceof Lm?vl(e._def.innerType):e instanceof Nm?[void 0]:e instanceof Im?[null]:e instanceof qo?[void 0,...vl(e.unwrap())]:e instanceof Wu?[null,...vl(e.unwrap())]:e instanceof SC||e instanceof Bm?vl(e.unwrap()):e instanceof $m?vl(e._def.innerType):[];class ew extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.object)return Kt(n,{code:Rt.invalid_type,expected:Yt.object,received:n.parsedType}),vn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Kt(n,{code:Rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),vn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=vl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new ew({typeName:Mt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...On(r)})}}function iE(e,t){const n=xl(e),r=xl(t);if(e===t)return{valid:!0,data:e};if(n===Yt.object&&r===Yt.object){const a=Zn.objectKeys(t),i=Zn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const u=iE(e[s],t[s]);if(!u.valid)return{valid:!1};o[s]=u.data}return{valid:!0,data:o}}else if(n===Yt.array&&r===Yt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],u=iE(o,s);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return n===Yt.date&&r===Yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Dm extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(rE(i)||rE(o))return vn;const s=iE(i.value,o.value);return s.valid?((aE(i)||aE(o))&&n.dirty(),{status:n.value,value:s.data}):(Kt(r,{code:Rt.invalid_intersection_types}),vn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Dm.create=(e,t,n)=>new Dm({left:e,right:t,typeName:Mt.ZodIntersection,...On(n)});class Fs extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.array)return Kt(r,{code:Rt.invalid_type,expected:Yt.array,received:r.parsedType}),vn;if(r.data.length<this._def.items.length)return Kt(r,{code:Rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),vn;!this._def.rest&&r.data.length>this._def.items.length&&(Kt(r,{code:Rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new Ps(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Ja.mergeArray(n,o)):Ja.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Fs({...this._def,rest:t})}}Fs.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fs({items:e,typeName:Mt.ZodTuple,rest:null,...On(t)})};class jm extends Pn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.object)return Kt(r,{code:Rt.invalid_type,expected:Yt.object,received:r.parsedType}),vn;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new Ps(r,s,r.path,s)),value:o._parse(new Ps(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Ja.mergeObjectAsync(n,a):Ja.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Pn?new jm({keyType:t,valueType:n,typeName:Mt.ZodRecord,...On(r)}):new jm({keyType:$o.create(),valueType:t,typeName:Mt.ZodRecord,...On(n)})}}class zb extends Pn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.map)return Kt(r,{code:Rt.invalid_type,expected:Yt.map,received:r.parsedType}),vn;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,u],c)=>({key:a._parse(new Ps(r,s,r.path,[c,"key"])),value:i._parse(new Ps(r,u,r.path,[c,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of o){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const u of o){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}}}}zb.create=(e,t,n)=>new zb({valueType:t,keyType:e,typeName:Mt.ZodMap,...On(n)});class cd extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.set)return Kt(r,{code:Rt.invalid_type,expected:Yt.set,received:r.parsedType}),vn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Kt(r,{code:Rt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Kt(r,{code:Rt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const c=new Set;for(const f of u){if(f.status==="aborted")return vn;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const s=[...r.data.values()].map((u,c)=>i._parse(new Ps(r,u,r.path,c)));return r.common.async?Promise.all(s).then(u=>o(u)):o(s)}min(t,n){return new cd({...this._def,minSize:{value:t,message:an.toString(n)}})}max(t,n){return new cd({...this._def,maxSize:{value:t,message:an.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}cd.create=(e,t)=>new cd({valueType:e,minSize:null,maxSize:null,typeName:Mt.ZodSet,...On(t)});class Uf extends Pn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.function)return Kt(n,{code:Rt.invalid_type,expected:Yt.function,received:n.parsedType}),vn;function r(s,u){return Fb({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Pb(),Xf].filter(c=>!!c),issueData:{code:Rt.invalid_arguments,argumentsError:u}})}function a(s,u){return Fb({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Pb(),Xf].filter(c=>!!c),issueData:{code:Rt.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Qf){const s=this;return hi(async function(...u){const c=new Ki([]),f=await s._def.args.parseAsync(u,i).catch(g=>{throw c.addIssue(r(u,g)),c}),h=await Reflect.apply(o,this,f);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(a(h,g)),c})})}else{const s=this;return hi(function(...u){const c=s._def.args.safeParse(u,i);if(!c.success)throw new Ki([r(u,c.error)]);const f=Reflect.apply(o,this,c.data),h=s._def.returns.safeParse(f,i);if(!h.success)throw new Ki([a(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Uf({...this._def,args:Fs.create(t).rest(id.create())})}returns(t){return new Uf({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Uf({args:t||Fs.create([]).rest(id.create()),returns:n||id.create(),typeName:Mt.ZodFunction,...On(r)})}}class Mm extends Pn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Mm.create=(e,t)=>new Mm({getter:e,typeName:Mt.ZodLazy,...On(t)});class Pm extends Pn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Kt(n,{received:n.data,code:Rt.invalid_literal,expected:this._def.value}),vn}return{status:"valid",value:t.data}}get value(){return this._def.value}}Pm.create=(e,t)=>new Pm({value:e,typeName:Mt.ZodLiteral,...On(t)});function OD(e,t){return new Gu({values:e,typeName:Mt.ZodEnum,...On(t)})}class Gu extends Pn{constructor(){super(...arguments),pm.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{expected:Zn.joinValues(r),received:n.parsedType,code:Rt.invalid_type}),vn}if(Lb(this,pm)||TD(this,pm,new Set(this._def.values)),!Lb(this,pm).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{received:n.data,code:Rt.invalid_enum_value,options:r}),vn}return hi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Gu.create(t,{...this._def,...n})}exclude(t,n=this._def){return Gu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}pm=new WeakMap;Gu.create=OD;class Fm extends Pn{constructor(){super(...arguments),mm.set(this,void 0)}_parse(t){const n=Zn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Yt.string&&r.parsedType!==Yt.number){const a=Zn.objectValues(n);return Kt(r,{expected:Zn.joinValues(a),received:r.parsedType,code:Rt.invalid_type}),vn}if(Lb(this,mm)||TD(this,mm,new Set(Zn.getValidEnumValues(this._def.values))),!Lb(this,mm).has(t.data)){const a=Zn.objectValues(n);return Kt(r,{received:r.data,code:Rt.invalid_enum_value,options:a}),vn}return hi(t.data)}get enum(){return this._def.values}}mm=new WeakMap;Fm.create=(e,t)=>new Fm({values:e,typeName:Mt.ZodNativeEnum,...On(t)});class Qf extends Pn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.promise&&n.common.async===!1)return Kt(n,{code:Rt.invalid_type,expected:Yt.promise,received:n.parsedType}),vn;const r=n.parsedType===Yt.promise?n.data:Promise.resolve(n.data);return hi(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Qf.create=(e,t)=>new Qf({type:e,typeName:Mt.ZodPromise,...On(t)});class Wo extends Pn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Kt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return vn;const u=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return u.status==="aborted"?vn:u.status==="dirty"||n.value==="dirty"?Mf(u.value):u});{if(n.value==="aborted")return vn;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?vn:s.status==="dirty"||n.value==="dirty"?Mf(s.value):s}}if(a.type==="refinement"){const o=s=>{const u=a.refinement(s,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ld(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ld(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Zn.assertNever(a)}}Wo.create=(e,t,n)=>new Wo({schema:e,typeName:Mt.ZodEffects,effect:t,...On(n)});Wo.createWithPreprocess=(e,t,n)=>new Wo({schema:t,effect:{type:"preprocess",transform:e},typeName:Mt.ZodEffects,...On(n)});class qo extends Pn{_parse(t){return this._getType(t)===Yt.undefined?hi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}qo.create=(e,t)=>new qo({innerType:e,typeName:Mt.ZodOptional,...On(t)});class Wu extends Pn{_parse(t){return this._getType(t)===Yt.null?hi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Wu.create=(e,t)=>new Wu({innerType:e,typeName:Mt.ZodNullable,...On(t)});class Lm extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Yt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Lm.create=(e,t)=>new Lm({innerType:e,typeName:Mt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...On(t)});class $m extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Tm(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ki(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ki(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}$m.create=(e,t)=>new $m({innerType:e,typeName:Mt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...On(t)});class Ub extends Pn{_parse(t){if(this._getType(t)!==Yt.nan){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.nan,received:r.parsedType}),vn}return{status:"valid",value:t.data}}}Ub.create=e=>new Ub({typeName:Mt.ZodNaN,...On(e)});const bq=Symbol("zod_brand");class SC extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class D0 extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?vn:i.status==="dirty"?(n.dirty(),Mf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?vn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new D0({in:t,out:n,typeName:Mt.ZodPipeline})}}class Bm extends Pn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(ld(a)&&(a.value=Object.freeze(a.value)),a);return Tm(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}Bm.create=(e,t)=>new Bm({innerType:e,typeName:Mt.ZodReadonly,...On(t)});function rN(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function DD(e,t={},n){return e?Jf.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(u=>{var c,f;if(!u){const h=rN(t,r),p=(f=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&f!==void 0?f:!0;a.addIssue({code:"custom",...h,fatal:p})}});if(!s){const u=rN(t,r),c=(o=(i=u.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...u,fatal:c})}}):Jf.create()}const vq={object:Hr.lazycreate};var Mt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Mt||(Mt={}));const wq=(e,t={message:`Input not instance of ${e.name}`})=>DD(n=>n instanceof e,t),jD=$o.create,MD=Hu.create,_q=Ub.create,xq=Vu.create,PD=Rm.create,Sq=ud.create,Eq=$b.create,Cq=Nm.create,kq=Im.create,Aq=Jf.create,Tq=id.create,Rq=Ol.create,Nq=Bb.create,Iq=Uo.create,Oq=Hr.create,Dq=Hr.strictCreate,jq=Om.create,Mq=ew.create,Pq=Dm.create,Fq=Fs.create,Lq=jm.create,$q=zb.create,Bq=cd.create,zq=Uf.create,Uq=Mm.create,qq=Pm.create,Hq=Gu.create,Vq=Fm.create,Gq=Qf.create,aN=Wo.create,Wq=qo.create,Kq=Wu.create,Zq=Wo.createWithPreprocess,Yq=D0.create,Xq=()=>jD().optional(),Jq=()=>MD().optional(),Qq=()=>PD().optional(),eH={string:e=>$o.create({...e,coerce:!0}),number:e=>Hu.create({...e,coerce:!0}),boolean:e=>Rm.create({...e,coerce:!0}),bigint:e=>Vu.create({...e,coerce:!0}),date:e=>ud.create({...e,coerce:!0})},tH=vn;var $=Object.freeze({__proto__:null,defaultErrorMap:Xf,setErrorMap:ZU,getErrorMap:Pb,makeIssue:Fb,EMPTY_PATH:YU,addIssueToContext:Kt,ParseStatus:Ja,INVALID:vn,DIRTY:Mf,OK:hi,isAborted:rE,isDirty:aE,isValid:ld,isAsync:Tm,get util(){return Zn},get objectUtil(){return nE},ZodParsedType:Yt,getParsedType:xl,ZodType:Pn,datetimeRegex:ID,ZodString:$o,ZodNumber:Hu,ZodBigInt:Vu,ZodBoolean:Rm,ZodDate:ud,ZodSymbol:$b,ZodUndefined:Nm,ZodNull:Im,ZodAny:Jf,ZodUnknown:id,ZodNever:Ol,ZodVoid:Bb,ZodArray:Uo,ZodObject:Hr,ZodUnion:Om,ZodDiscriminatedUnion:ew,ZodIntersection:Dm,ZodTuple:Fs,ZodRecord:jm,ZodMap:zb,ZodSet:cd,ZodFunction:Uf,ZodLazy:Mm,ZodLiteral:Pm,ZodEnum:Gu,ZodNativeEnum:Fm,ZodPromise:Qf,ZodEffects:Wo,ZodTransformer:Wo,ZodOptional:qo,ZodNullable:Wu,ZodDefault:Lm,ZodCatch:$m,ZodNaN:Ub,BRAND:bq,ZodBranded:SC,ZodPipeline:D0,ZodReadonly:Bm,custom:DD,Schema:Pn,ZodSchema:Pn,late:vq,get ZodFirstPartyTypeKind(){return Mt},coerce:eH,any:Aq,array:Iq,bigint:xq,boolean:PD,date:Sq,discriminatedUnion:Mq,effect:aN,enum:Hq,function:zq,instanceof:wq,intersection:Pq,lazy:Uq,literal:qq,map:$q,nan:_q,nativeEnum:Vq,never:Rq,null:kq,nullable:Kq,number:MD,object:Oq,oboolean:Qq,onumber:Jq,optional:Wq,ostring:Xq,pipeline:Yq,preprocess:Zq,promise:Gq,record:Lq,set:Bq,strictObject:Dq,string:jD,symbol:Eq,transformer:aN,tuple:Fq,undefined:Cq,union:jq,unknown:Tq,void:Nq,NEVER:tH,ZodIssueCode:Rt,quotelessJson:KU,ZodError:Ki});function nH({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,u)=>{var c,f,h,p;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(c=s.mimeType)!=null?c:"image/jpeg"};base64,${Yf(s.image)}`,detail:(h=(f=s.providerMetadata)==null?void 0:f.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new br({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(p=s.filename)!=null?p:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new br({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const u=[];for(const c of o)switch(c.type){case"text":{s+=c.text;break}case"tool-call":{u.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(u.length>1)throw new br({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:u.length>0?u[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:u.length>0?u:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function iN(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function qb(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var EC=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),Ku=ED({errorSchema:EC,errorToMessage:e=>e.error.message});function Hb({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function rH({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const c=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new br({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const c of a)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):s.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const u=o.type;switch(u){case"auto":case"none":case"required":return{tools:s,tool_choice:u,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=u;throw new br({functionality:`Unsupported tool choice type: ${c}`})}}}var aH=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:oE(this.modelId)}get defaultObjectGenerationMode(){return sH(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var p,g,v,b,_,x,S,E;const C=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const D=this.settings.useLegacyFunctionCalling;if(D&&this.settings.parallelToolCalls===!0)throw new br({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(D&&this.supportsStructuredOutputs)throw new br({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:O,warnings:N}=nH({prompt:t,useLegacyFunctionCalling:D,systemMessageMode:lH(this.modelId)});k.push(...N);const z={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(p=c.name)!=null?p:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:f,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:O};switch(oE(this.modelId)&&(z.temperature!=null&&(z.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),z.top_p!=null&&(z.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),z.frequency_penalty!=null&&(z.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),z.presence_penalty!=null&&(z.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),z.logit_bias!=null&&(z.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),z.logprobs!=null&&(z.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),z.top_logprobs!=null&&(z.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),z.max_tokens!=null&&(z.max_completion_tokens==null&&(z.max_completion_tokens=z.max_tokens),z.max_tokens=void 0)),C){case"regular":{const{tools:H,tool_choice:X,functions:F,function_call:Z,toolWarnings:L}=rH({mode:e,useLegacyFunctionCalling:D,structuredOutputs:this.supportsStructuredOutputs});return{args:{...z,tools:H,tool_choice:X,functions:F,function_call:Z},warnings:[...k,...L]}}case"object-json":return{args:{...z,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:D?{...z,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...z,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const H=C;throw new Error(`Unsupported type: ${H}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u;const{args:c,warnings:f}=this.getArgs(e),{responseHeaders:h,value:p,rawValue:g}=await Go({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ms(this.config.headers(),e.headers),body:c,failedResponseHandler:Ku,successfulResponseHandler:vd(iH),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=c,_=p.choices[0],x=(t=p.usage)==null?void 0:t.completion_tokens_details,S=(n=p.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:As(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:As(),toolName:C.function.name,args:C.function.arguments}}),finishReason:qb(_.finish_reason),usage:{promptTokens:(o=(i=p.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(u=(s=p.usage)==null?void 0:s.completion_tokens)!=null?u:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:Hb(p),warnings:f,logprobs:iN(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const S of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Go({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ms(this.config.headers(),e.headers),body:r,failedResponseHandler:Ku,successfulResponseHandler:xC(oH),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,u=[];let c="unknown",f={promptTokens:void 0,completionTokens:void 0},h,p=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,_){var x,S,E,C,k,D,O,N,z,H,X,F;if(!b.success){c="error",_.enqueue({type:"error",error:b.error});return}const Z=b.value;if("error"in Z){c="error",_.enqueue({type:"error",error:Z.error});return}if(p&&(p=!1,_.enqueue({type:"response-metadata",...Hb(Z)})),Z.usage!=null){const{prompt_tokens:ee,completion_tokens:se,prompt_tokens_details:W,completion_tokens_details:J}=Z.usage;f={promptTokens:ee??void 0,completionTokens:se??void 0},(J==null?void 0:J.reasoning_tokens)!=null&&(v.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(W==null?void 0:W.cached_tokens)!=null&&(v.openai.cachedPromptTokens=W==null?void 0:W.cached_tokens)}const L=Z.choices[0];if((L==null?void 0:L.finish_reason)!=null&&(c=qb(L.finish_reason)),(L==null?void 0:L.delta)==null)return;const de=L.delta;de.content!=null&&_.enqueue({type:"text-delta",textDelta:de.content});const ae=iN(L==null?void 0:L.logprobs);ae!=null&&ae.length&&(h===void 0&&(h=[]),h.push(...ae));const ne=g&&de.function_call!=null?[{type:"function",id:As(),function:de.function_call,index:0}]:de.tool_calls;if(ne!=null)for(const ee of ne){const se=ee.index;if(u[se]==null){if(ee.type!=="function")throw new zf({data:ee,message:"Expected 'function' type."});if(ee.id==null)throw new zf({data:ee,message:"Expected 'id' to be a string."});if(((x=ee.function)==null?void 0:x.name)==null)throw new zf({data:ee,message:"Expected 'function.name' to be a string."});u[se]={id:ee.id,type:"function",function:{name:ee.function.name,arguments:(S=ee.function.arguments)!=null?S:""},hasFinished:!1};const J=u[se];((E=J.function)==null?void 0:E.name)!=null&&((C=J.function)==null?void 0:C.arguments)!=null&&(J.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),tN(J.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=J.id)!=null?k:As(),toolName:J.function.name,args:J.function.arguments}),J.hasFinished=!0));continue}const W=u[se];W.hasFinished||(((D=ee.function)==null?void 0:D.arguments)!=null&&(W.function.arguments+=(N=(O=ee.function)==null?void 0:O.arguments)!=null?N:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:W.id,toolName:W.function.name,argsTextDelta:(z=ee.function.arguments)!=null?z:""}),((H=W.function)==null?void 0:H.name)!=null&&((X=W.function)==null?void 0:X.arguments)!=null&&tN(W.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(F=W.id)!=null?F:As(),toolName:W.function.name,args:W.function.arguments}),W.hasFinished=!0))}},flush(b){var _,x;b.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(_=f.promptTokens)!=null?_:NaN,completionTokens:(x=f.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},FD=$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish(),prompt_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),completion_tokens_details:$.object({reasoning_tokens:$.number().nullish(),accepted_prediction_tokens:$.number().nullish(),rejected_prediction_tokens:$.number().nullish()}).nullish()}).nullish(),iH=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),function_call:$.object({arguments:$.string(),name:$.string()}).nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullish()})),usage:FD}),oH=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),function_call:$.object({name:$.string().optional(),arguments:$.string().optional()}).nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()})),usage:FD}),EC]);function oE(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function sH(e){return e.startsWith("gpt-4o-audio-preview")}function lH(e){var t,n;return oE(e)?(n=(t=uH[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var uH={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function cH({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new wl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new br({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new br({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new br({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function oN(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var dH=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h}){var p;const g=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:_}=cH({prompt:n,inputFormat:t}),x=[..._??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,prompt:b,stop:x.length>0?x:void 0};switch(g){case"regular":{if((p=e.tools)!=null&&p.length)throw new br({functionality:"tools"});if(e.toolChoice)throw new br({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new br({functionality:"object-json mode"});case"object-tool":throw new br({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Go({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ms(this.config.headers(),e.headers),body:t,failedResponseHandler:Ku,successfulResponseHandler:vd(fH),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,u=a.choices[0];return{text:u.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:qb(u.finish_reason),logprobs:oN(u.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:Hb(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Go({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ms(this.config.headers(),e.headers),body:r,failedResponseHandler:Ku,successfulResponseHandler:xC(hH),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(p,g){if(!p.success){u="error",g.enqueue({type:"error",error:p.error});return}const v=p.value;if("error"in v){u="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...Hb(v)})),v.usage!=null&&(c={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(u=qb(b.finish_reason)),(b==null?void 0:b.text)!=null&&g.enqueue({type:"text-delta",textDelta:b.text});const _=oN(b==null?void 0:b.logprobs);_!=null&&_.length&&(f===void 0&&(f=[]),f.push(..._))},flush(p){p.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},fH=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()})}),hH=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),EC]),pH=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new vC({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Go({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ms(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Ku,successfulResponseHandler:vd(mH),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},mH=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),gH={"dall-e-3":1,"dall-e-2":10},yH=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:gH[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h;const p=[];r!=null&&p.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&p.push({type:"unsupported-setting",setting:"seed"});const g=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:v,responseHeaders:b}=await Go({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ms(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:Ku,successfulResponseHandler:vd(bH),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(_=>_.b64_json),warnings:p,response:{timestamp:g,modelId:this.modelId,headers:b}}}},bH=$.object({data:$.array($.object({b64_json:$.string()}))});function vH({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var u,c,f,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${Yf(o.image)}`,detail:(f=(c=o.providerMetadata)==null?void 0:c.openai)==null?void 0:f.imageDetail};case"file":{if(o.data instanceof URL)throw new br({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new br({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function sN({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function wH({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)switch(u.type){case"function":o.push({type:"function",name:u.name,description:u.description,parameters:u.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(u.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:u.args.searchContextSize,user_location:u.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:u});break}break;default:a.push({type:"unsupported-tool",tool:u});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const u=s;throw new br({functionality:`Unsupported tool choice type: ${u}`})}}}var _H=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:u,prompt:c,providerMetadata:f,responseFormat:h}){var p,g,v;const b=[],_=FH(this.modelId),x=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),u!=null&&b.push({type:"unsupported-setting",setting:"seed"}),o!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=vH({prompt:c,systemMessageMode:_.systemMessageMode});b.push(...E);const C=qU({provider:"openai",providerOptions:f,schema:LH}),k=(p=C==null?void 0:C.strictSchemas)!=null?p:!0,D={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,..._.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(D.temperature!=null&&(D.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),D.top_p!=null&&(D.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:O,tool_choice:N,toolWarnings:z}=wH({mode:e,strict:k});return{args:{...D,tools:O,tool_choice:N},warnings:[...b,...z]}}case"object-json":return{args:{...D,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...D,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const O=x;throw new Error(`Unsupported type: ${O}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:u,value:c,rawValue:f}=await Go({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ms(this.config.headers(),e.headers),body:o,failedResponseHandler:Ku,successfulResponseHandler:vd($.object({id:$.string(),created_at:$.number(),model:$.string(),output:$.array($.discriminatedUnion("type",[$.object({type:$.literal("message"),role:$.literal("assistant"),content:$.array($.object({type:$.literal("output_text"),text:$.string(),annotations:$.array($.object({type:$.literal("url_citation"),start_index:$.number(),end_index:$.number(),url:$.string(),title:$.string()}))}))}),$.object({type:$.literal("function_call"),call_id:$.string(),name:$.string(),arguments:$.string()}),$.object({type:$.literal("web_search_call")}),$.object({type:$.literal("computer_call")}),$.object({type:$.literal("reasoning")})])),incomplete_details:$.object({reason:$.string()}).nullable(),usage:LD})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),p=c.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(v=>{var b,_,x;return{sourceType:"url",id:(x=(_=(b=this.config).generateId)==null?void 0:_.call(b))!=null?x:As(),url:v.url,title:v.title}})),finishReason:sN({finishReason:(t=c.incomplete_details)==null?void 0:t.reason,hasToolCalls:p.length>0}),toolCalls:p.length>0?p:void 0,usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:f},request:{body:JSON.stringify(o)},response:{id:c.id,timestamp:new Date(c.created_at*1e3),modelId:c.model},providerMetadata:{openai:{responseId:c.id,cachedPromptTokens:(r=(n=c.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=c.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Go({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ms(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:Ku,successfulResponseHandler:xC(RH),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,u=NaN,c=null,f=null,h=null;const p={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k,D,O;if(!v.success){o="error",b.enqueue({type:"error",error:v.error});return}const N=v.value;if(MH(N))N.item.type==="function_call"&&(p[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,argsTextDelta:N.item.arguments}));else if(jH(N)){const z=p[N.output_index];z!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:z.toolCallId,toolName:z.toolName,argsTextDelta:N.delta})}else DH(N)?(h=N.response.id,b.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(N.response.created_at*1e3),modelId:N.response.model})):NH(N)?b.enqueue({type:"text-delta",textDelta:N.delta}):IH(N)&&N.item.type==="function_call"?(p[N.output_index]=void 0,g=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,args:N.item.arguments})):OH(N)?(o=sN({finishReason:(_=N.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=N.response.usage.input_tokens,u=N.response.usage.output_tokens,c=(S=(x=N.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:c,f=(C=(E=N.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:f):PH(N)&&b.enqueue({type:"source",source:{sourceType:"url",id:(O=(D=(k=i.config).generateId)==null?void 0:D.call(k))!=null?O:As(),url:N.annotation.url,title:N.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:u},...(c!=null||f!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:f}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},LD=$.object({input_tokens:$.number(),input_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),output_tokens:$.number(),output_tokens_details:$.object({reasoning_tokens:$.number().nullish()}).nullish()}),xH=$.object({type:$.literal("response.output_text.delta"),delta:$.string()}),SH=$.object({type:$.enum(["response.completed","response.incomplete"]),response:$.object({incomplete_details:$.object({reason:$.string()}).nullish(),usage:LD})}),EH=$.object({type:$.literal("response.created"),response:$.object({id:$.string(),created_at:$.number(),model:$.string()})}),CH=$.object({type:$.literal("response.output_item.done"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string(),status:$.literal("completed")})])}),kH=$.object({type:$.literal("response.function_call_arguments.delta"),item_id:$.string(),output_index:$.number(),delta:$.string()}),AH=$.object({type:$.literal("response.output_item.added"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string()})])}),TH=$.object({type:$.literal("response.output_text.annotation.added"),annotation:$.object({type:$.literal("url_citation"),url:$.string(),title:$.string()})}),RH=$.union([xH,SH,EH,CH,kH,AH,TH,$.object({type:$.string()}).passthrough()]);function NH(e){return e.type==="response.output_text.delta"}function IH(e){return e.type==="response.output_item.done"}function OH(e){return e.type==="response.completed"||e.type==="response.incomplete"}function DH(e){return e.type==="response.created"}function jH(e){return e.type==="response.function_call_arguments.delta"}function MH(e){return e.type==="response.output_item.added"}function PH(e){return e.type==="response.output_text.annotation.added"}function FH(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var LH=$.object({metadata:$.any().nullish(),parallelToolCalls:$.boolean().nullish(),previousResponseId:$.string().nullish(),store:$.boolean().nullish(),user:$.string().nullish(),reasoningEffort:$.string().nullish(),strictSchemas:$.boolean().nullish(),instructions:$.string().nullish()}),$H=$.object({});function BH({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:$H}}var zH={webSearchPreview:BH};function $D(e={}){var t,n,r;const a=(t=kD(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${PU({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(b,_={})=>new aH(b,_,{provider:`${o}.chat`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),c=(b,_={})=>new dH(b,_,{provider:`${o}.completion`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),f=(b,_={})=>new pH(b,_,{provider:`${o}.embedding`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),h=(b,_={})=>new yH(b,_,{provider:`${o}.image`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),p=(b,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b==="gpt-3.5-turbo-instruct"?c(b,_):u(b,_)},g=b=>new _H(b,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),v=function(b,_){return p(b,_)};return v.languageModel=p,v.chat=u,v.completion=c,v.responses=g,v.embedding=f,v.textEmbedding=f,v.textEmbeddingModel=f,v.image=h,v.imageModel=h,v.tools=zH,v}$D({compatibility:"strict"});var BD="vercel.ai.error",UH=Symbol.for(BD),zD,qH=class UD extends Error{constructor({name:t,message:n,cause:r}){super(n),this[zD]=!0,this.name=t,this.cause=r}static isInstance(t){return UD.hasMarker(t,BD)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};zD=UH;var Qa=qH,qD="AI_APICallError",HD=`vercel.ai.error.${qD}`,HH=Symbol.for(HD),VD,El=class extends Qa{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:qD,message:t,cause:s}),this[VD]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Qa.hasMarker(t,HD)}};VD=HH;var GD="AI_EmptyResponseBodyError",WD=`vercel.ai.error.${GD}`,VH=Symbol.for(WD),KD,GH=class extends Qa{constructor({message:t="Empty response body"}={}){super({name:GD,message:t}),this[KD]=!0}static isInstance(t){return Qa.hasMarker(t,WD)}};KD=VH;function ZD(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var YD="AI_InvalidArgumentError",XD=`vercel.ai.error.${YD}`,WH=Symbol.for(XD),JD,QD=class extends Qa{constructor({message:t,cause:n,argument:r}){super({name:YD,message:t,cause:n}),this[JD]=!0,this.argument=r}static isInstance(t){return Qa.hasMarker(t,XD)}};JD=WH;var ej="AI_JSONParseError",tj=`vercel.ai.error.${ej}`,KH=Symbol.for(tj),nj,Vb=class extends Qa{constructor({text:t,cause:n}){super({name:ej,message:`JSON parsing failed: Text: ${t}.
Error message: ${ZD(n)}`,cause:n}),this[nj]=!0,this.text=t}static isInstance(t){return Qa.hasMarker(t,tj)}};nj=KH;var rj="AI_LoadAPIKeyError",aj=`vercel.ai.error.${rj}`,ZH=Symbol.for(aj),ij,zy=class extends Qa{constructor({message:t}){super({name:rj,message:t}),this[ij]=!0}static isInstance(t){return Qa.hasMarker(t,aj)}};ij=ZH;var oj="AI_TooManyEmbeddingValuesForCallError",sj=`vercel.ai.error.${oj}`,YH=Symbol.for(sj),lj,XH=class extends Qa{constructor(e){super({name:oj,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[lj]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Qa.hasMarker(e,sj)}};lj=YH;var uj="AI_TypeValidationError",cj=`vercel.ai.error.${uj}`,JH=Symbol.for(cj),dj,QH=class sE extends Qa{constructor({value:t,cause:n}){super({name:uj,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${ZD(n)}`,cause:n}),this[dj]=!0,this.value=t}static isInstance(t){return Qa.hasMarker(t,cj)}static wrap({value:t,cause:n}){return sE.isInstance(n)&&n.value===t?n:new sE({value:t,cause:n})}};dj=JH;var Gb=QH,fj="AI_UnsupportedFunctionalityError",hj=`vercel.ai.error.${fj}`,eV=Symbol.for(hj),pj,xb=class extends Qa{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:fj,message:n}),this[pj]=!0,this.functionality=t}static isInstance(t){return Qa.hasMarker(t,hj)}};pj=eV;let tV=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var nV={};function lE(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function rV(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),p=f+1,g=p<u.length&&u[p]===" "?u.slice(p+1):u.slice(p);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=aV(e,u);e=h;for(let p=0;p<f.length;p++)i(f[p],c)},flush(u){i(e,u),o(u)}})}function aV(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function tw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var iV=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=tV(n,t);if(e==null)return a;if(n.includes(r))throw new QD({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},oV=iV();function sV(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function jx(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function lV({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new zy({message:`${r} API key must be a string.`});if(typeof Zr>"u")throw new zy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=nV[t],e==null)throw new zy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new zy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var uE=Symbol.for("vercel.ai.validator");function uV(e){return{[uE]:!0,validate:e}}function cV(e){return typeof e=="object"&&e!==null&&uE in e&&e[uE]===!0&&"validate"in e}function dV(e){return cV(e)?e:fV(e)}function fV(e){return uV(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function hV({value:e,schema:t}){const n=CC({value:e,schema:t});if(!n.success)throw Gb.wrap({value:e,cause:n.error});return n.value}function CC({value:e,schema:t}){const n=dV(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Gb.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Gb.wrap({value:e,cause:r})}}}function pV({text:e,schema:t}){try{const n=Qo.parse(e);return t==null?n:hV({value:n,schema:t})}catch(n){throw Vb.isInstance(n)||Gb.isInstance(n)?n:new Vb({text:e,cause:n})}}function mj({text:e,schema:t}){try{const n=Qo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=CC({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Vb.isInstance(n)?n:new Vb({text:e,cause:n})}}}function mV({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=CC({value:t[e],schema:n});if(!r.success)throw new QD({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var gV=()=>globalThis.fetch,cE=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>yV({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),yV=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=gV()})=>{try{const s=await o(e,{method:"POST",headers:sV(t),body:n.content,signal:i}),u=tw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw jx(f)||El.isInstance(f)?f:new El({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(jx(c)||El.isInstance(c))?c:new El({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(jx(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new El({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function dE(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var bV=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=tw(r);if(o.trim()==="")return{responseHeaders:s,value:new El({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=pV({text:o,schema:e});return{responseHeaders:s,value:new El({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new El({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},vV=e=>async({response:t})=>{const n=tw(t);if(t.body==null)throw new GH({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(rV()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(mj({text:r,schema:e}))}}))}},gj=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=mj({text:a,schema:e}),o=tw(t);if(!i.success)throw new El({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:wV}=globalThis;function _V(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return wV(t)}function xV(e){return e==null?void 0:e.replace(/\/$/,"")}function go(e){if(SV(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:u,format:c,const:f,minLength:h,enum:p}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),f!==void 0&&(g.enum=[f]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),p!==void 0&&(g.enum=p),a!=null&&(g.properties=Object.entries(a).reduce((v,[b,_])=>(v[b]=go(_),v),{})),i&&(g.items=Array.isArray(i)?i.map(go):go(i)),o&&(g.allOf=o.map(go)),s)if(s.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=s.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=go(v[0]);typeof b=="object"&&(g.nullable=!0,Object.assign(g,b))}else g.anyOf=v.map(go),g.nullable=!0}else g.anyOf=s.map(go);return u&&(g.oneOf=u.map(go)),h!==void 0&&(g.minLength=h),g}function SV(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function EV(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new xb({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const u=[];for(const c of s)switch(c.type){case"text":{u.push({text:c.text});break}case"image":{u.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:_V(c.image)}});break}case"file":{u.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}a.push({role:"user",parts:u});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(u=>{switch(u.type){case"text":return u.text.length===0?void 0:{text:u.text};case"file":{if(u.mimeType!=="image/png")throw new xb({functionality:"Only PNG images are supported in assistant messages"});if(u.data instanceof URL)throw new xb({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:u.mimeType,data:u.data}}}case"tool-call":return{functionCall:{name:u.toolName,args:u.args}}}}).filter(u=>u!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(u=>({functionResponse:{name:u.toolName,response:{name:u.toolName,content:u.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function lN(e){return e.includes("/")?e:`models/${e}`}var CV=$.object({error:$.object({code:$.number().nullable(),message:$.string(),status:$.string()})}),fE=bV({errorSchema:CV,errorToMessage:e=>e.error.message});function kV(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],u=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:u?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const f=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):f.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:go(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:f},toolConfig:void 0,toolWarnings:s};const p=h.type;switch(p){case"auto":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=p;throw new xb({functionality:`Unsupported tool choice type: ${g}`})}}}function uN({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var AV=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var p,g;const v=e.type,b=[],_=mV({provider:"google",providerOptions:h,schema:IV}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:u,seed:f,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?go(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:S,systemInstruction:E}=EV(t);switch(v){case"regular":{const{tools:C,toolConfig:k,toolWarnings:D}=kV(e,(p=this.settings.useSearchGrounding)!=null?p:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...b,...D]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?go(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:go(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),u=JSON.stringify(o),c=lE(await dE(this.config.headers),e.headers),{responseHeaders:f,value:h,rawValue:p}=await cE({url:`${this.config.baseURL}/${lN(this.modelId)}:generateContent`,headers:c,body:o,failedResponseHandler:fE,successfulResponseHandler:gj(RV),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=o,b=h.candidates[0],_=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=cN({parts:_,generateId:this.config.generateId}),S=h.usageMetadata;return{text:dN(_),files:(t=fN(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:uN({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:f,body:p},warnings:s,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:hN({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:u}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=lE(await dE(this.config.headers),e.headers),{responseHeaders:i,value:o}=await cE({url:`${this.config.baseURL}/${lN(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:fE,successfulResponseHandler:vV(NV),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...u}=t;let c="unknown",f={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const p=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k;if(!v.success){b.enqueue({type:"error",error:v.error});return}const D=v.value,O=D.usageMetadata;O!=null&&(f={promptTokens:(_=O.promptTokenCount)!=null?_:NaN,completionTokens:(x=O.candidatesTokenCount)!=null?x:NaN});const N=(S=D.candidates)==null?void 0:S[0];if(N==null)return;const z=N.content;if(z!=null){const H=dN(z.parts);H!=null&&b.enqueue({type:"text-delta",textDelta:H});const X=fN(z.parts);if(X!=null)for(const Z of X)b.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const F=cN({parts:z.parts,generateId:p});if(F!=null)for(const Z of F)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),g=!0}if(N.finishReason!=null){c=uN({finishReason:N.finishReason,hasToolCalls:g});const H=(E=hN({groundingMetadata:N.groundingMetadata,generateId:p}))!=null?E:[];for(const X of H)b.enqueue({type:"source",source:X});h={google:{groundingMetadata:(C=N.groundingMetadata)!=null?C:null,safetyRatings:(k=N.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:c,usage:f,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:u},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function cN({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function dN(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function fN(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function hN({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var yj=$.object({role:$.string(),parts:$.array($.union([$.object({text:$.string()}),$.object({functionCall:$.object({name:$.string(),args:$.unknown()})}),$.object({inlineData:$.object({mimeType:$.string(),data:$.string()})})])).nullish()}),TV=$.object({web:$.object({uri:$.string(),title:$.string()}).nullish(),retrievedContext:$.object({uri:$.string(),title:$.string()}).nullish()}),bj=$.object({webSearchQueries:$.array($.string()).nullish(),retrievalQueries:$.array($.string()).nullish(),searchEntryPoint:$.object({renderedContent:$.string()}).nullish(),groundingChunks:$.array(TV).nullish(),groundingSupports:$.array($.object({segment:$.object({startIndex:$.number().nullish(),endIndex:$.number().nullish(),text:$.string().nullish()}),segment_text:$.string().nullish(),groundingChunkIndices:$.array($.number()).nullish(),supportChunkIndices:$.array($.number()).nullish(),confidenceScores:$.array($.number()).nullish(),confidenceScore:$.array($.number()).nullish()})).nullish(),retrievalMetadata:$.union([$.object({webDynamicRetrievalScore:$.number()}),$.object({})]).nullish()}),vj=$.object({category:$.string(),probability:$.string(),probabilityScore:$.number().nullish(),severity:$.string().nullish(),severityScore:$.number().nullish(),blocked:$.boolean().nullish()}),RV=$.object({candidates:$.array($.object({content:yj.nullish().or($.object({}).strict()),finishReason:$.string().nullish(),safetyRatings:$.array(vj).nullish(),groundingMetadata:bj.nullish()})),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),NV=$.object({candidates:$.array($.object({content:yj.nullish(),finishReason:$.string().nullish(),safetyRatings:$.array(vj).nullish(),groundingMetadata:bj.nullish()})).nullish(),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),IV=$.object({responseModalities:$.array($.enum(["TEXT","IMAGE"])).nullish()}),OV=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new XH({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=lE(await dE(this.config.headers),t),{responseHeaders:a,value:i}=await cE({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:fE,successfulResponseHandler:gj(DV),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},DV=$.object({embeddings:$.array($.object({values:$.array($.number())}))});function jV(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function wj(e={}){var t;const n=(t=xV(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":lV({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,u={})=>{var c;return new AV(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:oV,isSupportedUrl:jV,fetch:e.fetch})},i=(s,u={})=>new OV(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,u)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}wj();var _j="vercel.ai.error",MV=Symbol.for(_j),xj,PV=class Sj extends Error{constructor({name:t,message:n,cause:r}){super(n),this[xj]=!0,this.name=t,this.cause=r}static isInstance(t){return Sj.hasMarker(t,_j)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};xj=MV;var Ia=PV,Ej="AI_APICallError",Cj=`vercel.ai.error.${Ej}`,FV=Symbol.for(Cj),kj,Cl=class extends Ia{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:u}){super({name:Ej,message:e,cause:o}),this[kj]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=u}static isInstance(e){return Ia.hasMarker(e,Cj)}};kj=FV;var Aj="AI_EmptyResponseBodyError",Tj=`vercel.ai.error.${Aj}`,LV=Symbol.for(Tj),Rj,$V=class extends Ia{constructor({message:e="Empty response body"}={}){super({name:Aj,message:e}),this[Rj]=!0}static isInstance(e){return Ia.hasMarker(e,Tj)}};Rj=LV;function Nj(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Ij="AI_InvalidArgumentError",Oj=`vercel.ai.error.${Ij}`,BV=Symbol.for(Oj),Dj,zV=class extends Ia{constructor({message:t,cause:n,argument:r}){super({name:Ij,message:t,cause:n}),this[Dj]=!0,this.argument=r}static isInstance(t){return Ia.hasMarker(t,Oj)}};Dj=BV;var jj="AI_InvalidPromptError",Mj=`vercel.ai.error.${jj}`,UV=Symbol.for(Mj),Pj,qV=class extends Ia{constructor({prompt:e,message:t,cause:n}){super({name:jj,message:`Invalid prompt: ${t}`,cause:n}),this[Pj]=!0,this.prompt=e}static isInstance(e){return Ia.hasMarker(e,Mj)}};Pj=UV;var Fj="AI_InvalidResponseDataError",Lj=`vercel.ai.error.${Fj}`,HV=Symbol.for(Lj),$j,Mx=class extends Ia{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:Fj,message:t}),this[$j]=!0,this.data=e}static isInstance(e){return Ia.hasMarker(e,Lj)}};$j=HV;var Bj="AI_JSONParseError",zj=`vercel.ai.error.${Bj}`,VV=Symbol.for(zj),Uj,Wb=class extends Ia{constructor({text:e,cause:t}){super({name:Bj,message:`JSON parsing failed: Text: ${e}.
Error message: ${Nj(t)}`,cause:t}),this[Uj]=!0,this.text=e}static isInstance(e){return Ia.hasMarker(e,zj)}};Uj=VV;var qj="AI_LoadAPIKeyError",Hj=`vercel.ai.error.${qj}`,GV=Symbol.for(Hj),Vj,Uy=class extends Ia{constructor({message:e}){super({name:qj,message:e}),this[Vj]=!0}static isInstance(e){return Ia.hasMarker(e,Hj)}};Vj=GV;var Gj="AI_TypeValidationError",Wj=`vercel.ai.error.${Gj}`,WV=Symbol.for(Wj),Kj,KV=class hE extends Ia{constructor({value:t,cause:n}){super({name:Gj,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Nj(n)}`,cause:n}),this[Kj]=!0,this.value=t}static isInstance(t){return Ia.hasMarker(t,Wj)}static wrap({value:t,cause:n}){return hE.isInstance(n)&&n.value===t?n:new hE({value:t,cause:n})}};Kj=WV;var Kb=KV,Zj="AI_UnsupportedFunctionalityError",Yj=`vercel.ai.error.${Zj}`,ZV=Symbol.for(Yj),Xj,bo=class extends Ia{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Zj,message:t}),this[Xj]=!0,this.functionality=e}static isInstance(e){return Ia.hasMarker(e,Yj)}};Xj=ZV;let YV=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},pN=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function Px(e){}function XV(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=Px,onError:n=Px,onRetry:r=Px,onComment:a}=e;let i="",o=!0,s,u="",c="";function f(b){const _=o?b.replace(/^\xEF\xBB\xBF/,""):b,[x,S]=JV(`${i}${_}`);for(const E of x)h(E);i=S,o=!1}function h(b){if(b===""){g();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const _=b.indexOf(":");if(_!==-1){const x=b.slice(0,_),S=b[_+1]===" "?2:1,E=b.slice(_+S);p(x,E,b);return}p(b,"",b)}function p(b,_,x){switch(b){case"event":c=_;break;case"data":u=`${u}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new pN(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:x}));break;default:n(new pN(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:_,line:x}));break}}function g(){u.length>0&&t({id:s,event:c||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),s=void 0,u="",c=""}function v(b={}){i&&b.consume&&h(i),o=!0,s=void 0,u="",c="",i=""}return{feed:f,reset:v}}function JV(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class QV extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=XV({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var eG={};function Zb(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function nw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var tG=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=YV(n,t);if(e==null)return a;if(n.includes(r))throw new zV({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},qy=tG();function nG(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Fx(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function rG({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Uy({message:`${r} API key must be a string.`});if(typeof Zr>"u")throw new Uy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=eG[t],e==null)throw new Uy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Uy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var pE=Symbol.for("vercel.ai.validator");function aG(e){return{[pE]:!0,validate:e}}function iG(e){return typeof e=="object"&&e!==null&&pE in e&&e[pE]===!0&&"validate"in e}function oG(e){return iG(e)?e:sG(e)}function sG(e){return aG(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function lG({value:e,schema:t}){const n=Jj({value:e,schema:t});if(!n.success)throw Kb.wrap({value:e,cause:n.error});return n.value}function Jj({value:e,schema:t}){const n=oG(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Kb.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Kb.wrap({value:e,cause:r})}}}function uG({text:e,schema:t}){try{const n=Qo.parse(e);return t==null?n:lG({value:n,schema:t})}catch(n){throw Wb.isInstance(n)||Kb.isInstance(n)?n:new Wb({text:e,cause:n})}}function Qj({text:e,schema:t}){try{const n=Qo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Jj({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Wb.isInstance(n)?n:new Wb({text:e,cause:n})}}}function Lx(e){try{return Qo.parse(e),!0}catch{return!1}}var cG=()=>globalThis.fetch,Yb=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>dG({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),dG=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=cG()})=>{try{const s=await o(e,{method:"POST",headers:nG(t),body:n.content,signal:i}),u=nw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw Fx(f)||Cl.isInstance(f)?f:new Cl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Fx(c)||Cl.isInstance(c))?c:new Cl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(Fx(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new Cl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},fG=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=nw(r);if(o.trim()==="")return{responseHeaders:s,value:new Cl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=uG({text:o,schema:e});return{responseHeaders:s,value:new Cl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new Cl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},e8=e=>async({response:t})=>{const n=nw(t);if(t.body==null)throw new $V({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new QV).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Qj({text:r,schema:e}))}}))}},t8=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Qj({text:a,schema:e}),o=nw(t);if(!i.success)throw new Cl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:hG}=globalThis;function pG(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return hG(t)}function mG(e){return e==null?void 0:e.replace(/\/$/,"")}var gG=Object.defineProperty,yG=Object.defineProperties,bG=Object.getOwnPropertyDescriptors,Xb=Object.getOwnPropertySymbols,n8=Object.prototype.hasOwnProperty,r8=Object.prototype.propertyIsEnumerable,mN=(e,t,n)=>t in e?gG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hi=(e,t)=>{for(var n in t||(t={}))n8.call(t,n)&&mN(e,n,t[n]);if(Xb)for(var n of Xb(t))r8.call(t,n)&&mN(e,n,t[n]);return e},Sb=(e,t)=>yG(e,bG(t)),Jb=(e,t)=>{var n={};for(var r in e)n8.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Xb)for(var r of Xb(e))t.indexOf(r)<0&&r8.call(e,r)&&(n[r]=e[r]);return n};function ws(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function vG(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:ws(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=ws(s))!=null?n:ws(o[0].providerMetadata)});break}const u=ws(s),c=o.map(f=>{var h,p,g,v;switch(f.type){case"text":return{type:"text",text:f.text,cache_control:(h=ws(f.providerMetadata))!=null?h:u};case"image":return{type:"image_url",image_url:{url:f.image instanceof URL?f.image.toString():`data:${(p=f.mimeType)!=null?p:"image/jpeg"};base64,${pG(f.image)}`},cache_control:(g=ws(f.providerMetadata))!=null?g:u};case"file":return{type:"text",text:f.data instanceof URL?f.data.toString():f.data,cache_control:(v=ws(f.providerMetadata))!=null?v:u};default:{const b=f;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:c});break}case"assistant":{let u="";const c=[];for(const f of o)switch(f.type){case"text":{u+=f.text;break}case"tool-call":{c.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=f;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0,cache_control:ws(s)});break}case"tool":{for(const u of o)a.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),cache_control:(r=ws(s))!=null?r:ws(u.providerMetadata)});break}default:{const u=i;throw new Error(`Unsupported role: ${u}`)}}return a}function gN(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function Qb(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var kC=$.object({error:$.object({message:$.string(),type:$.string(),param:$.any().nullable(),code:$.string().nullable()})}),ev=fG({errorSchema:kC,errorToMessage:e=>e.error.message});function wG(e){return"parameters"in e}var _G=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:u,responseFormat:c,topK:f,providerMetadata:h}){var p;const g=e.type,v=(p=h==null?void 0:h.openrouter)!=null?p:{},b=Hi(Hi(Hi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:u,response_format:c,top_k:f,messages:vG(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return Hi(Hi({},b),EG(e));case"object-json":return Sb(Hi({},b),{response_format:{type:"json_object"}});case"object-tool":return Sb(Hi({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new bo({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const u=this.getArgs(e),{responseHeaders:c,value:f}=await Yb({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Zb(this.config.headers(),e.headers),body:u,failedResponseHandler:ev,successfulResponseHandler:t8(xG),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u,{messages:p}=h,g=Jb(h,["messages"]),v=f.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:f.id,modelId:f.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var _;return{toolCallType:"function",toolCallId:(_=b.id)!=null?_:qy(),toolName:b.function.name,args:b.function.arguments}}),finishReason:Qb(v.finish_reason),usage:{promptTokens:(i=(a=f.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=f.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:p,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:gN(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Yb({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Zb(this.config.headers(),e.headers),body:Sb(Hi({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:ev,successfulResponseHandler:e8(SG),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=Jb(a,["messages"]),s=[];let u="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f;return{stream:r.pipeThrough(new TransformStream({transform(h,p){var g,v,b,_,x,S,E,C,k,D,O,N;if(!h.success){u="error",p.enqueue({type:"error",error:h.error});return}const z=h.value;if("error"in z){u="error",p.enqueue({type:"error",error:z.error});return}z.id&&p.enqueue({type:"response-metadata",id:z.id}),z.model&&p.enqueue({type:"response-metadata",modelId:z.model}),z.usage!=null&&(c={promptTokens:z.usage.prompt_tokens,completionTokens:z.usage.completion_tokens});const H=z.choices[0];if((H==null?void 0:H.finish_reason)!=null&&(u=Qb(H.finish_reason)),(H==null?void 0:H.delta)==null)return;const X=H.delta;X.content!=null&&p.enqueue({type:"text-delta",textDelta:X.content}),X.reasoning!=null&&p.enqueue({type:"reasoning",textDelta:X.reasoning});const F=gN(H==null?void 0:H.logprobs);if(F!=null&&F.length&&(f===void 0&&(f=[]),f.push(...F)),X.tool_calls!=null)for(const Z of X.tool_calls){const L=Z.index;if(s[L]==null){if(Z.type!=="function")throw new Mx({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new Mx({data:Z,message:"Expected 'id' to be a string."});if(((g=Z.function)==null?void 0:g.name)==null)throw new Mx({data:Z,message:"Expected 'function.name' to be a string."});s[L]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const ae=s[L];if(ae==null)throw new Error("Tool call is missing");((b=ae.function)==null?void 0:b.name)!=null&&((_=ae.function)==null?void 0:_.arguments)!=null&&Lx(ae.function.arguments)&&(p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:ae.function.arguments}),p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=ae.id)!=null?x:qy(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0);continue}const de=s[L];if(de==null)throw new Error("Tool call is missing");((S=Z.function)==null?void 0:S.arguments)!=null&&(de.function.arguments+=(C=(E=Z.function)==null?void 0:E.arguments)!=null?C:""),p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:de.id,toolName:de.function.name,argsTextDelta:(k=Z.function.arguments)!=null?k:""}),((D=de.function)==null?void 0:D.name)!=null&&((O=de.function)==null?void 0:O.arguments)!=null&&Lx(de.function.arguments)&&(p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(N=de.id)!=null?N:qy(),toolName:de.function.name,args:de.function.arguments}),de.sent=!0)}},flush(h){var p;if(u==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(p=g.id)!=null?p:qy(),toolName:g.function.name,args:Lx(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},a8=$.object({id:$.string().optional(),model:$.string().optional(),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number(),total_tokens:$.number()}).nullish()}),xG=a8.extend({choices:$.array($.object({message:$.object({role:$.literal("assistant"),content:$.string().nullable().optional(),reasoning:$.string().nullable().optional(),tool_calls:$.array($.object({id:$.string().optional().nullable(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).optional()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullable().optional(),finish_reason:$.string().optional().nullable()}))}),SG=$.union([a8.extend({choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).optional(),content:$.string().nullish(),reasoning:$.string().nullish().optional(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()}))}),kC]);function EG(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>wG(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function CG({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new qV({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new bo({functionality:"images"});case"file":throw new bo({functionality:"file attachments"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new bo({functionality:"tool-call messages"});case"reasoning":throw new bo({functionality:"reasoning messages"});case"redacted-reasoning":throw new bo({functionality:"redacted reasoning messages"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new bo({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function yN(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var kG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:u,responseFormat:c,topK:f,stopSequences:h,providerMetadata:p}){var g,v;const b=e.type,_=(g=p==null?void 0:p.openrouter)!=null?g:{},{prompt:x}=CG({prompt:n,inputFormat:t}),S=Hi(Hi(Hi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:u,stop:h,response_format:c,top_k:f,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new bo({functionality:"tools"});if(e.toolChoice)throw new bo({functionality:"toolChoice"});return S}case"object-json":throw new bo({functionality:"object-json mode"});case"object-tool":throw new bo({functionality:"object-tool mode"});default:{const E=b;throw new bo({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:u}=await Yb({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Zb(this.config.headers(),e.headers),body:o,failedResponseHandler:ev,successfulResponseHandler:t8(bN),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=o,{prompt:f}=c,h=Jb(c,["prompt"]);if("error"in u)throw new Error(`${u.error.message}`);const p=u.choices[0];if(!p)throw new Error("No choice in OpenRouter completion response");return{response:{id:u.id,modelId:u.model},text:(t=p.text)!=null?t:"",reasoning:p.reasoning||void 0,usage:{promptTokens:(r=(n=u.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=u.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:Qb(p.finish_reason),logprobs:yN(p.logprobs),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Yb({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Zb(this.config.headers(),e.headers),body:Sb(Hi({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:ev,successfulResponseHandler:e8(bN),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=Jb(a,["prompt"]);let s="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(f,h){if(!f.success){s="error",h.enqueue({type:"error",error:f.error});return}const p=f.value;if("error"in p){s="error",h.enqueue({type:"error",error:p.error});return}p.usage!=null&&(u={promptTokens:p.usage.prompt_tokens,completionTokens:p.usage.completion_tokens});const g=p.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=Qb(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=yN(g==null?void 0:g.logprobs);v!=null&&v.length&&(c===void 0&&(c=[]),c.push(...v))},flush(f){f.enqueue({type:"finish",finishReason:s,logprobs:c,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},bN=$.union([$.object({id:$.string().optional(),model:$.string().optional(),choices:$.array($.object({text:$.string(),reasoning:$.string().nullish().optional(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullable().optional()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).optional().nullable()}),kC]);function i8(e={}){var t,n,r;const a=(n=mG((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>Hi({Authorization:`Bearer ${rG({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,p={})=>new _G(h,p,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,p={})=>new kG(h,p,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,p)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?u(h,p):s(h,p)},f=function(h,p){return c(h,p)};return f.languageModel=c,f.chat=s,f.completion=u,f}i8({compatibility:"strict"});var Vc={},$x={},vN;function wN(){return vN||(vN=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}($x)),$x}var _N;function AG(){return _N||(_N=1,function(e){var t=Vc&&Vc.__createBinding||(Object.create?function(c,f,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,p,g)}:function(c,f,h,p){p===void 0&&(p=h),c[p]=f[h]}),n=Vc&&Vc.__exportStar||function(c,f){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&t(f,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=wN();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(wN(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(c,f=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return s(c.trim(),f)}e.parseJSON=o;const s=(c,f)=>{const h=c.length;let p=0;const g=k=>{throw new a(`${k} at position ${p}`)},v=k=>{throw new i(`${k} at position ${p}`)},b=()=>(C(),p>=h&&g("Unexpected end of input"),c[p]==='"'?_():c[p]==="{"?x():c[p]==="["?S():c.substring(p,p+4)==="null"||r.Allow.NULL&f&&h-p<4&&"null".startsWith(c.substring(p))?(p+=4,null):c.substring(p,p+4)==="true"||r.Allow.BOOL&f&&h-p<4&&"true".startsWith(c.substring(p))?(p+=4,!0):c.substring(p,p+5)==="false"||r.Allow.BOOL&f&&h-p<5&&"false".startsWith(c.substring(p))?(p+=5,!1):c.substring(p,p+8)==="Infinity"||r.Allow.INFINITY&f&&h-p<8&&"Infinity".startsWith(c.substring(p))?(p+=8,1/0):c.substring(p,p+9)==="-Infinity"||r.Allow._INFINITY&f&&1<h-p&&h-p<9&&"-Infinity".startsWith(c.substring(p))?(p+=9,-1/0):c.substring(p,p+3)==="NaN"||r.Allow.NAN&f&&h-p<3&&"NaN".startsWith(c.substring(p))?(p+=3,NaN):E()),_=()=>{const k=p;let D=!1;for(p++;p<h&&(c[p]!=='"'||D&&c[p-1]==="\\");)D=c[p]==="\\"?!D:!1,p++;if(c.charAt(p)=='"')try{return JSON.parse(c.substring(k,++p-Number(D)))}catch(O){v(String(O))}else if(r.Allow.STR&f)try{return JSON.parse(c.substring(k,p-Number(D))+'"')}catch{return JSON.parse(c.substring(k,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{p++,C();const k={};try{for(;c[p]!=="}";){if(C(),p>=h&&r.Allow.OBJ&f)return k;const D=_();C(),p++;try{const O=b();k[D]=O}catch(O){if(r.Allow.OBJ&f)return k;throw O}C(),c[p]===","&&p++}}catch{if(r.Allow.OBJ&f)return k;g("Expected '}' at end of object")}return p++,k},S=()=>{p++;const k=[];try{for(;c[p]!=="]";)k.push(b()),C(),c[p]===","&&p++}catch{if(r.Allow.ARR&f)return k;g("Expected ']' at end of array")}return p++,k},E=()=>{if(p===0){c==="-"&&v("Not sure what '-' is");try{return JSON.parse(c)}catch(D){if(r.Allow.NUM&f)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}v(String(D))}}const k=p;for(c[p]==="-"&&p++;c[p]&&",]}".indexOf(c[p])===-1;)p++;p==h&&!(r.Allow.NUM&f)&&g("Unterminated number literal");try{return JSON.parse(c.substring(k,p))}catch{c.substring(k,p)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(k,c.lastIndexOf("e")))}catch(O){v(String(O))}}},C=()=>{for(;p<h&&` 
\r	`.includes(c[p]);)p++};return b()},u=o;e.parse=u}(Vc)),Vc}var TG=AG();function Bx(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new br({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(Yf(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var RG=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=TG.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:As(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function NG({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var IG=$.object({error:$.object({code:$.string().nullable(),message:$.string(),param:$.any().nullable(),type:$.string()})}),mE=ED({errorSchema:IG,errorToMessage:e=>e.error.message});function OG({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new br({functionality:`Unsupported tool choice type: ${s}`})}}}function DG(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var jG=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},MG=e=>async({response:t})=>{const n=O0(t);if(t.body===null)throw new yC({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new jG).pipeThrough(new TransformStream({transform(r,a){a.enqueue(sd({schema:e,text:r}))}}))}},PG=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:u,topK:c,topP:f}){const h=n.type,p=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&p.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:DG({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:u,tfs_z:this.settings.tfsZ,top_k:c,top_p:f,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=OG({mode:n});return{args:{...g,messages:Bx(a),tools:v},type:h,warnings:[...p,...b]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:Bx(a)},type:h,warnings:p};case"object-tool":return{args:{...g,messages:Bx(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:p};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Go({abortSignal:e.abortSignal,body:i,failedResponseHandler:mE,fetch:this.config.fetch,headers:Ms(this.config.headers(),e.headers),successfulResponseHandler:vd(FG),url:`${this.config.baseURL}/chat`}),{messages:u,...c}=i,f=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var p;return{args:JSON.stringify(h.function.arguments),toolCallId:(p=h.id)!=null?p:As(),toolCallType:"function",toolName:h.function.name}});return{finishReason:NG({finishReason:s.done_reason,hasToolCalls:f!==void 0&&f.length>0}),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:f,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...g.response}),g.text&&b.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)b.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",..._});b.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),b.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Go({abortSignal:e.abortSignal,body:t,failedResponseHandler:mE,fetch:this.config.fetch,headers:Ms(this.config.headers(),e.headers),successfulResponseHandler:MG(LG),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,u=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new RG({tools:u,type:n});let f="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:p=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:f,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const b=g.value;if(b.done){f=c.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}p&&c.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},FG=$.object({created_at:$.string(),done:$.literal(!0),done_reason:$.string().optional().nullable(),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),message:$.object({content:$.string(),role:$.string(),tool_calls:$.array($.object({function:$.object({arguments:$.record($.any()),name:$.string()}),id:$.string().optional()})).optional().nullable()}),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()}),LG=$.discriminatedUnion("done",[$.object({created_at:$.string(),done:$.literal(!1),message:$.object({content:$.string(),role:$.string()}),model:$.string()}),$.object({created_at:$.string(),done:$.literal(!0),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()})]),$G=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new vC({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Go({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:mE,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:vd(BG),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},BG=$.object({embeddings:$.array($.array($.number())),prompt_eval_count:$.number().nullable()});function o8(e={}){var t;const n=(t=kD(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,u={})=>new PG(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,u={})=>new $G(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,u){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,u)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}o8();let zG=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function eh(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function UG(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),p=f+1,g=p<u.length&&u[p]===" "?u.slice(p+1):u.slice(p);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=qG(e,u);e=h;for(let p=0;p<f.length;p++)i(f[p],c)},flush(u){i(e,u),o(u)}})}function qG(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function rw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var HG=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=zG(n,t);if(e==null)return a;if(n.includes(r))throw new bC({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},zx=HG();function VG(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Ux(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var gE=Symbol.for("vercel.ai.validator");function GG(e){return{[gE]:!0,validate:e}}function WG(e){return typeof e=="object"&&e!==null&&gE in e&&e[gE]===!0&&"validate"in e}function KG(e){return WG(e)?e:ZG(e)}function ZG(e){return GG(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function YG({value:e,schema:t}){const n=s8({value:e,schema:t});if(!n.success)throw qu.wrap({value:e,cause:n.error});return n.value}function s8({value:e,schema:t}){const n=KG(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:qu.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:qu.wrap({value:e,cause:r})}}}function XG({text:e,schema:t}){try{const n=Qo.parse(e);return t==null?n:YG({value:n,schema:t})}catch(n){throw Uu.isInstance(n)||qu.isInstance(n)?n:new Uu({text:e,cause:n})}}function l8({text:e,schema:t}){try{const n=Qo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=s8({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Uu.isInstance(n)?n:new Uu({text:e,cause:n})}}}function xN(e){try{return Qo.parse(e),!0}catch{return!1}}var JG=()=>globalThis.fetch,th=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>QG({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),QG=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=JG()})=>{try{const s=await o(e,{method:"POST",headers:VG(t),body:n.content,signal:i}),u=rw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw Ux(f)||ga.isInstance(f)?f:new ga({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Ux(c)||ga.isInstance(c))?c:new ga({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(Ux(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new ga({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},aw=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=rw(r);if(o.trim()==="")return{responseHeaders:s,value:new ga({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=XG({text:o,schema:e});return{responseHeaders:s,value:new ga({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new ga({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},u8=e=>async({response:t})=>{const n=rw(t);if(t.body==null)throw new yC({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(UG()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(l8({text:r,schema:e}))}}))}},iw=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=l8({text:a,schema:e}),o=rw(t);if(!i.success)throw new ga({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:eW}=globalThis;function tW(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return eW(t)}function nW(e){return e==null?void 0:e.replace(/\/$/,"")}function om(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function rW(e){const t=[];for(const{role:n,content:r,...a}of e){const i=om({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...om(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const u=om(o);switch(o.type){case"text":return{type:"text",text:o.text,...u};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${tW(o.image)}`},...u};case"file":throw new br({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const u of r){const c=om(u);switch(u.type){case"text":{o+=u.text;break}case"tool-call":{s.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)},...c});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=om(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function tv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function nv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var aW=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),ow={errorSchema:aW,errorToMessage:e=>e.error.message};function iW({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)u.type==="provider-defined"?a.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const u=s;throw new br({functionality:`Unsupported tool choice type: ${u}`})}}}var oW=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:ow;this.chunkSchema=lW(i.errorSchema),this.failedResponseHandler=aw(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:u,stopSequences:c,responseFormat:f,seed:h}){var p,g;const v=e.type,b=[];i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),(f==null?void 0:f.type)==="json"&&f.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(f==null?void 0:f.type)==="json"?this.supportsStructuredOutputs===!0&&f.schema!=null?{type:"json_schema",json_schema:{schema:f.schema,name:(p=f.name)!=null?p:"response",description:f.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...u==null?void 0:u[this.providerOptionsName],messages:rW(t)};switch(v){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=iW({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:x,tool_choice:S},warnings:[...b,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:b};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:b};default:{const x=v;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u,c;const{args:f,warnings:h}=this.getArgs({...e}),p=JSON.stringify(f),{responseHeaders:g,value:v,rawValue:b}=await th({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:eh(this.config.headers(),e.headers),body:f,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:iw(sW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...x}=f,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:b});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:zx(),toolName:C.function.name,args:C.function.arguments}}),finishReason:nv(S.finish_reason),usage:{promptTokens:(s=(o=v.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(c=(u=v.usage)==null?void 0:u.completion_tokens)!=null?c:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:x},rawResponse:{headers:g,body:b},response:tv(v),warnings:h,request:{body:p}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const x of v.reasoning)x.type==="text"&&_.enqueue({type:"reasoning",textDelta:x.text});else _.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&_.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const x of v.toolCalls)_.enqueue({type:"tool-call",...x});_.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),_.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await th({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:eh(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:u8(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=n,f=[];let h="unknown",p={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k,D,O,N,z,H,X,F,Z;if(!v.success){h="error",b.enqueue({type:"error",error:v.error});return}const L=v.value;if(i==null||i.processChunk(v.rawValue),"error"in L){h="error",b.enqueue({type:"error",error:L.error.message});return}g&&(g=!1,b.enqueue({type:"response-metadata",...tv(L)})),L.usage!=null&&(p={promptTokens:(_=L.usage.prompt_tokens)!=null?_:void 0,completionTokens:(x=L.usage.completion_tokens)!=null?x:void 0});const de=L.choices[0];if((de==null?void 0:de.finish_reason)!=null&&(h=nv(de.finish_reason)),(de==null?void 0:de.delta)==null)return;const ae=de.delta;if(ae.reasoning_content!=null&&b.enqueue({type:"reasoning",textDelta:ae.reasoning_content}),ae.content!=null&&b.enqueue({type:"text-delta",textDelta:ae.content}),ae.tool_calls!=null)for(const ne of ae.tool_calls){const ee=ne.index;if(f[ee]==null){if(ne.type!=="function")throw new zf({data:ne,message:"Expected 'function' type."});if(ne.id==null)throw new zf({data:ne,message:"Expected 'id' to be a string."});if(((S=ne.function)==null?void 0:S.name)==null)throw new zf({data:ne,message:"Expected 'function.name' to be a string."});f[ee]={id:ne.id,type:"function",function:{name:ne.function.name,arguments:(E=ne.function.arguments)!=null?E:""},hasFinished:!1};const W=f[ee];((C=W.function)==null?void 0:C.name)!=null&&((k=W.function)==null?void 0:k.arguments)!=null&&(W.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:W.id,toolName:W.function.name,argsTextDelta:W.function.arguments}),xN(W.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(D=W.id)!=null?D:zx(),toolName:W.function.name,args:W.function.arguments}),W.hasFinished=!0));continue}const se=f[ee];se.hasFinished||(((O=ne.function)==null?void 0:O.arguments)!=null&&(se.function.arguments+=(z=(N=ne.function)==null?void 0:N.arguments)!=null?z:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:se.id,toolName:se.function.name,argsTextDelta:(H=ne.function.arguments)!=null?H:""}),((X=se.function)==null?void 0:X.name)!=null&&((F=se.function)==null?void 0:F.arguments)!=null&&xN(se.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=se.id)!=null?Z:zx(),toolName:se.function.name,args:se.function.arguments}),se.hasFinished=!0))}},flush(v){var b,_;const x=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(b=p.promptTokens)!=null?b:NaN,completionTokens:(_=p.completionTokens)!=null?_:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:a}}}},sW=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),lW=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),e]);function uW({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new wl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new br({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new br({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new br({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var cW=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:ow;this.chunkSchema=fW(a.errorSchema),this.failedResponseHandler=aw(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h,providerMetadata:p}){var g;const v=e.type,b=[];o!=null&&b.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:x}=uW({prompt:n,inputFormat:t}),S=[...x??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,...p==null?void 0:p[this.providerOptionsName],prompt:_,stop:S.length>0?S:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new br({functionality:"tools"});if(e.toolChoice)throw new br({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new br({functionality:"object-json mode"});case"object-tool":throw new br({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:u,rawValue:c}=await th({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:eh(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:iw(dW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:f,...h}=i,p=u.choices[0];return{text:p.text,usage:{promptTokens:(n=(t=u.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=u.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:nv(p.finish_reason),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s,body:c},response:tv(u),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await th({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:eh(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:u8(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,p){if(!h.success){u="error",p.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){u="error",p.enqueue({type:"error",error:g.error});return}f&&(f=!1,p.enqueue({type:"response-metadata",...tv(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(u=nv(v.finish_reason)),(v==null?void 0:v.text)!=null&&p.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},dW=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),fW=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),e]),hW=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new vC({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await th({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:eh(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:aw((r=this.config.errorStructure)!=null?r:ow),successfulResponseHandler:iw(pW),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},pW=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),mW=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h,p;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:b,responseHeaders:_}=await th({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:eh(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:aw((p=this.config.errorStructure)!=null?p:ow),successfulResponseHandler:iw(gW),abortSignal:s,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:_}}}},gW=$.object({data:$.array($.object({b64_json:$.string()}))});function yW(e){const t=nW(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:p})=>{const g=new URL(`${t}${p}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,p={})=>o(h,p),o=(h,p={})=>new oW(h,p,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,p={})=>new cW(h,p,a("completion")),u=(h,p={})=>new hW(h,p,a("embedding")),c=(h,p={})=>new mW(h,p,a("image")),f=(h,p)=>i(h,p);return f.languageModel=i,f.chatModel=o,f.completionModel=s,f.textEmbeddingModel=u,f.imageModel=c,f}const nd=(e,t)=>`${e}:${t}`,AC=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},TC=e=>e==="openai"||e==="openrouter"||e==="google",RC=e=>e==="ollama"||e==="openai-compatible",bm=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",c8=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],zm={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},d8=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function bW(e,t,n){try{switch(e.type){case"openai":return $D({apiKey:n})(t);case"google":return wj({apiKey:n})(t);case"openrouter":return i8({apiKey:n})(t);case"ollama":return o8({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return yW({baseURL:d8(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function vW(e,t,n){const r=e.type,i=(e.fetchedModels&&e.fetchedModels.length>0?e.fetchedModels:zm[r]||[]).find(c=>c.id===t);if(!i)return;const o=bW(e,t,n);if(!o)return;const s=e.type==="openai",u=["openai","google","openrouter"].includes(e.type);return{id:nd(e.id,t),name:i.name,providerId:e.id,providerName:e.name,instance:o,supportsImageGeneration:s,supportsToolCalling:u,metadata:i.metadata}}const wW="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Bo=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=wW[n[e]&63];return t};var Ns=EO();const f8=ni(Ns);function _W(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const xW=e=>{switch(e){case"success":return CW;case"info":return AW;case"warning":return kW;case"error":return TW;default:return null}},SW=Array(12).fill(0),EW=({visible:e,className:t})=>vt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},vt.createElement("div",{className:"sonner-spinner"},SW.map((n,r)=>vt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),CW=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),kW=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),AW=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),TW=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),RW=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},vt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),vt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),NW=()=>{const[e,t]=vt.useState(document.hidden);return vt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let yE=1;class IW{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:yE++,o=this.toasts.find(u=>u.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:r}),{...u,...t,id:i,dismissible:s,title:r}):u):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async c=>{if(o=["resolve",c],vt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(DW(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,v=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,p=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,p=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:p,...v})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof f=="object"&&!vt.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((c,f)=>s.then(()=>o[0]==="reject"?f(o[1]):c(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||yE++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const xi=new IW,OW=(e,t)=>{const n=(t==null?void 0:t.id)||yE++;return xi.addToast({title:e,...t,id:n}),n},DW=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",jW=OW,MW=()=>xi.toasts,PW=()=>xi.getActiveToasts(),ot=Object.assign(jW,{success:xi.success,info:xi.info,warning:xi.warning,error:xi.error,custom:xi.custom,message:xi.message,promise:xi.promise,dismiss:xi.dismiss,loading:xi.loading},{getHistory:MW,getToasts:PW});_W("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Hy(e){return e.label!==void 0}const FW=3,LW="24px",$W="16px",SN=4e3,BW=356,zW=14,UW=45,qW=200;function _s(...e){return e.filter(Boolean).join(" ")}function HW(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const VW=e=>{var t,n,r,a,i,o,s,u,c;const{invert:f,toast:h,unstyled:p,interacting:g,setHeights:v,visibleToasts:b,heights:_,index:x,toasts:S,expanded:E,removeToast:C,defaultRichColors:k,closeButton:D,style:O,cancelButtonStyle:N,actionButtonStyle:z,className:H="",descriptionClassName:X="",duration:F,position:Z,gap:L,expandByDefault:de,classNames:ae,icons:ne,closeButtonAriaLabel:ee="Close toast"}=e,[se,W]=vt.useState(null),[J,Y]=vt.useState(null),[re,be]=vt.useState(!1),[we,Me]=vt.useState(!1),[Pe,Ae]=vt.useState(!1),[Te,qe]=vt.useState(!1),[it,Ie]=vt.useState(!1),[Re,U]=vt.useState(0),[Ce,Ne]=vt.useState(0),ce=vt.useRef(h.duration||F||SN),ie=vt.useRef(null),Q=vt.useRef(null),xe=x===0,Le=x+1<=b,Se=h.type,Ve=h.dismissible!==!1,xt=h.className||"",ht=h.descriptionClassName||"",Et=vt.useMemo(()=>_.findIndex(De=>De.toastId===h.id)||0,[_,h.id]),Ft=vt.useMemo(()=>{var De;return(De=h.closeButton)!=null?De:D},[h.closeButton,D]),Tt=vt.useMemo(()=>h.duration||F||SN,[h.duration,F]),Ut=vt.useRef(0),ge=vt.useRef(0),I=vt.useRef(0),V=vt.useRef(null),[he,Oe]=Z.split("-"),ve=vt.useMemo(()=>_.reduce((De,Ke,Ct)=>Ct>=Et?De:De+Ke.height,0),[_,Et]),ke=NW(),le=h.invert||f,dt=Se==="loading";ge.current=vt.useMemo(()=>Et*L+ve,[Et,ve]),vt.useEffect(()=>{ce.current=Tt},[Tt]),vt.useEffect(()=>{be(!0)},[]),vt.useEffect(()=>{const De=Q.current;if(De){const Ke=De.getBoundingClientRect().height;return Ne(Ke),v(Ct=>[{toastId:h.id,height:Ke,position:h.position},...Ct]),()=>v(Ct=>Ct.filter(ye=>ye.toastId!==h.id))}},[v,h.id]),vt.useLayoutEffect(()=>{if(!re)return;const De=Q.current,Ke=De.style.height;De.style.height="auto";const Ct=De.getBoundingClientRect().height;De.style.height=Ke,Ne(Ct),v(ye=>ye.find(B=>B.toastId===h.id)?ye.map(B=>B.toastId===h.id?{...B,height:Ct}:B):[{toastId:h.id,height:Ct,position:h.position},...ye])},[re,h.title,h.description,v,h.id]);const yt=vt.useCallback(()=>{Me(!0),U(ge.current),v(De=>De.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},qW)},[h,C,v,ge]);vt.useEffect(()=>{if(h.promise&&Se==="loading"||h.duration===1/0||h.type==="loading")return;let De;return E||g||ke?(()=>{if(I.current<Ut.current){const ye=new Date().getTime()-Ut.current;ce.current=ce.current-ye}I.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(Ut.current=new Date().getTime(),De=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),yt()},ce.current))})(),()=>clearTimeout(De)},[E,g,h,Se,ke,yt]),vt.useEffect(()=>{h.delete&&yt()},[yt,h.delete]);function M(){var De;if(ne!=null&&ne.loading){var Ke;return vt.createElement("div",{className:_s(ae==null?void 0:ae.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Se==="loading"},ne.loading)}return vt.createElement(EW,{className:_s(ae==null?void 0:ae.loader,h==null||(De=h.classNames)==null?void 0:De.loader),visible:Se==="loading"})}const Be=h.icon||(ne==null?void 0:ne[Se])||xW(Se);var et,me;return vt.createElement("li",{tabIndex:0,ref:Q,className:_s(H,xt,ae==null?void 0:ae.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[Se],h==null||(n=h.classNames)==null?void 0:n[Se]),"data-sonner-toast":"","data-rich-colors":(et=h.richColors)!=null?et:k,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":re,"data-promise":!!h.promise,"data-swiped":it,"data-removed":we,"data-visible":Le,"data-y-position":he,"data-x-position":Oe,"data-index":x,"data-front":xe,"data-swiping":Pe,"data-dismissible":Ve,"data-type":Se,"data-invert":le,"data-swipe-out":Te,"data-swipe-direction":J,"data-expanded":!!(E||de&&re),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${we?Re:ge.current}px`,"--initial-height":de?"auto":`${Ce}px`,...O,...h.style},onDragEnd:()=>{Ae(!1),W(null),V.current=null},onPointerDown:De=>{dt||!Ve||(ie.current=new Date,U(ge.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(Ae(!0),V.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,Ke,Ct;if(Te||!Ve)return;V.current=null;const ye=Number(((De=Q.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),q=Number(((Ke=Q.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),B=new Date().getTime()-((Ct=ie.current)==null?void 0:Ct.getTime()),G=se==="x"?ye:q,pe=Math.abs(G)/B;if(Math.abs(G)>=UW||pe>.11){U(ge.current),h.onDismiss==null||h.onDismiss.call(h,h),Y(se==="x"?ye>0?"right":"left":q>0?"down":"up"),yt(),qe(!0);return}else{var fe,Fe;(fe=Q.current)==null||fe.style.setProperty("--swipe-amount-x","0px"),(Fe=Q.current)==null||Fe.style.setProperty("--swipe-amount-y","0px")}Ie(!1),Ae(!1),W(null)},onPointerMove:De=>{var Ke,Ct,ye;if(!V.current||!Ve||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const B=De.clientY-V.current.y,G=De.clientX-V.current.x;var pe;const fe=(pe=e.swipeDirections)!=null?pe:HW(Z);!se&&(Math.abs(G)>1||Math.abs(B)>1)&&W(Math.abs(G)>Math.abs(B)?"x":"y");let Fe={x:0,y:0};const st=Dt=>1/(1.5+Math.abs(Dt)/20);if(se==="y"){if(fe.includes("top")||fe.includes("bottom"))if(fe.includes("top")&&B<0||fe.includes("bottom")&&B>0)Fe.y=B;else{const Dt=B*st(B);Fe.y=Math.abs(Dt)<Math.abs(B)?Dt:B}}else if(se==="x"&&(fe.includes("left")||fe.includes("right")))if(fe.includes("left")&&G<0||fe.includes("right")&&G>0)Fe.x=G;else{const Dt=G*st(G);Fe.x=Math.abs(Dt)<Math.abs(G)?Dt:G}(Math.abs(Fe.x)>0||Math.abs(Fe.y)>0)&&Ie(!0),(Ct=Q.current)==null||Ct.style.setProperty("--swipe-amount-x",`${Fe.x}px`),(ye=Q.current)==null||ye.style.setProperty("--swipe-amount-y",`${Fe.y}px`)}},Ft&&!h.jsx&&Se!=="loading"?vt.createElement("button",{"aria-label":ee,"data-disabled":dt,"data-close-button":!0,onClick:dt||!Ve?()=>{}:()=>{yt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:_s(ae==null?void 0:ae.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(me=ne==null?void 0:ne.close)!=null?me:RW):null,(Se||h.icon||h.promise)&&h.icon!==null&&((ne==null?void 0:ne[Se])!==null||h.icon)?vt.createElement("div",{"data-icon":"",className:_s(ae==null?void 0:ae.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||M():null,h.type!=="loading"?Be:null):null,vt.createElement("div",{"data-content":"",className:_s(ae==null?void 0:ae.content,h==null||(i=h.classNames)==null?void 0:i.content)},vt.createElement("div",{"data-title":"",className:_s(ae==null?void 0:ae.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?vt.createElement("div",{"data-description":"",className:_s(X,ht,ae==null?void 0:ae.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),vt.isValidElement(h.cancel)?h.cancel:h.cancel&&Hy(h.cancel)?vt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||N,onClick:De=>{Hy(h.cancel)&&Ve&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,De),yt())},className:_s(ae==null?void 0:ae.cancelButton,h==null||(u=h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,vt.isValidElement(h.action)?h.action:h.action&&Hy(h.action)?vt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||z,onClick:De=>{Hy(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,De),!De.defaultPrevented&&yt())},className:_s(ae==null?void 0:ae.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function EN(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function GW(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?$W:LW;function u(c){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=s:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):u(s)}),n}const WW=vt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:u,offset:c,mobileOffset:f,theme:h="light",richColors:p,duration:g,style:v,visibleToasts:b=FW,toastOptions:_,dir:x=EN(),gap:S=zW,icons:E,containerAriaLabel:C="Notifications"}=t,[k,D]=vt.useState([]),O=vt.useMemo(()=>Array.from(new Set([a].concat(k.filter(J=>J.position).map(J=>J.position)))),[k,a]),[N,z]=vt.useState([]),[H,X]=vt.useState(!1),[F,Z]=vt.useState(!1),[L,de]=vt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=vt.useRef(null),ne=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=vt.useRef(null),se=vt.useRef(!1),W=vt.useCallback(J=>{D(Y=>{var re;return(re=Y.find(be=>be.id===J.id))!=null&&re.delete||xi.dismiss(J.id),Y.filter(({id:be})=>be!==J.id)})},[]);return vt.useEffect(()=>xi.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{D(Y=>Y.map(re=>re.id===J.id?{...re,delete:!0}:re))});return}setTimeout(()=>{f8.flushSync(()=>{D(Y=>{const re=Y.findIndex(be=>be.id===J.id);return re!==-1?[...Y.slice(0,re),{...Y[re],...J},...Y.slice(re+1)]:[J,...Y]})})})}),[k]),vt.useEffect(()=>{if(h!=="system"){de(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?de("dark"):de("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:Y})=>{de(Y?"dark":"light")})}catch{J.addListener(({matches:re})=>{try{de(re?"dark":"light")}catch(be){console.error(be)}})}},[h]),vt.useEffect(()=>{k.length<=1&&X(!1)},[k]),vt.useEffect(()=>{const J=Y=>{var re;if(i.every(Me=>Y[Me]||Y.code===Me)){var we;X(!0),(we=ae.current)==null||we.focus()}Y.code==="Escape"&&(document.activeElement===ae.current||(re=ae.current)!=null&&re.contains(document.activeElement))&&X(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),vt.useEffect(()=>{if(ae.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,se.current=!1)}},[ae.current]),vt.createElement("section",{ref:n,"aria-label":`${C} ${ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((J,Y)=>{var re;const[be,we]=J.split("-");return k.length?vt.createElement("ol",{key:J,dir:x==="auto"?EN():x,tabIndex:-1,ref:ae,className:u,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":be,"data-lifted":H&&k.length>1&&!o,"data-x-position":we,style:{"--front-toast-height":`${((re=N[0])==null?void 0:re.height)||0}px`,"--width":`${BW}px`,"--gap":`${S}px`,...v,...GW(c,f)},onBlur:Me=>{se.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(se.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||se.current||(se.current=!0,ee.current=Me.relatedTarget)},onMouseEnter:()=>X(!0),onMouseMove:()=>X(!0),onMouseLeave:()=>{F||X(!1)},onDragEnd:()=>X(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},k.filter(Me=>!Me.position&&Y===0||Me.position===J).map((Me,Pe)=>{var Ae,Te;return vt.createElement(VW,{key:Me.id,icons:E,index:Pe,toast:Me,defaultRichColors:p,duration:(Ae=_==null?void 0:_.duration)!=null?Ae:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Te=_==null?void 0:_.closeButton)!=null?Te:s,interacting:F,position:J,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:W,toasts:k.filter(qe=>qe.position==Me.position),heights:N.filter(qe=>qe.position==Me.position),setHeights:z,expandByDefault:o,gap:S,expanded:H,swipeDirections:t.swipeDirections})})):null}))}),sm=new Map,KW=5*60*1e3;async function ZW(e,t){const n=`${e.id}-${e.baseURL||""}`,r=sm.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,u,c;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":{if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break}case"openrouter":{if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break}case"ollama":{const f=((u=e.baseURL)==null?void 0:u.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",f).toString(),delete o.Authorization;break}case"openai-compatible":{if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const f=d8(e.baseURL);i=new URL("models",f.endsWith("/")?f:f+"/").toString();break}case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(f){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,f),ot.error(`Invalid Base URL for ${e.name}: ${f instanceof Error?f.message:String(f)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const f=await fetch(i,{headers:o});if(!f.ok){let g=`(${f.status} ${f.statusText})`;try{const v=await f.text();try{const b=JSON.parse(v);g=((c=b==null?void 0:b.error)==null?void 0:c.message)||(b==null?void 0:b.message)||v||g}catch{g=v||g}}catch(v){console.warn("[ModelFetcher] Failed to read error response body:",v)}throw new Error(`API Error: ${g}`)}const h=await f.json();let p=[];if(e.type==="ollama")h.models&&Array.isArray(h.models)?p=h.models.map(g=>({id:g.name,name:g.name,metadata:g.details??{}})):console.warn(`[ModelFetcher] Unexpected response structure from Ollama for ${e.name}:`,h);else if(e.type==="openrouter"){const g=h.data||h;Array.isArray(g)?p=g.map(v=>{const{id:b,name:_,...x}=v;return{id:b,name:_||b,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}else{const g=h.data||h;Array.isArray(g)?p=g.map(v=>{const{id:b,name:_,...x}=v;return{id:b,name:_||b,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}return p.sort((g,v)=>(g.name||g.id).localeCompare(v.name||v.id)),console.log(`[ModelFetcher] Fetched ${p.length} models for ${e.name}`),p}catch(f){const h=f instanceof Error?f.message:String(f);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),ot.error(`Failed to fetch models for ${e.name}: ${h}`),sm.delete(n),[]}})();return sm.set(n,a),setTimeout(()=>{sm.get(n)===a&&(sm.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},KW),a}const qx="provider:lastModelSelection",CN="provider:globalModelSortOrder",Ya=zl(Ul((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Ht.saveSetting("enableApiKeyManagement",n)},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Ht.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([Ht.loadProviderConfigs(),Ht.loadApiKeys(),Ht.loadSetting(CN,[]),Ht.loadSetting(qx,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((p,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{p.push(nd(g.id,v))}),p),[]),u=new Set(s),c=i.filter(p=>u.has(p));let f=o;f&&u.has(f)||(f=c[0]??null,f||(f=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${f}`)),e({globalModelSortOrder:c,selectedModelId:f,isLoading:!1}),await Ht.saveSetting(qx,f)}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),ot.error("Failed to load provider data")}},selectModel:n=>{e({selectedModelId:n}),Ht.saveSetting(qx,n)},addApiKey:async(n,r,a)=>{const i=Bo(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await Ht.saveApiKey(s),e(u=>{u.dbApiKeys.push(s)}),ot.success(`API Key "${n}" added.`),i}catch(u){throw console.error("ProviderStore: Error adding API key",u),ot.error(`Failed to add API Key: ${u instanceof Error?u.message:String(u)}`),u}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await Ht.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),ot.success(`API Key "${r}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting API key",i),ot.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=Bo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Ht.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),ot.success(`Provider "${n.name}" added.`),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),ot.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await Ht.saveProviderConfig(i),e(p=>{const g=p.dbProviderConfigs.findIndex(v=>v.id===n);g!==-1&&(p.dbProviderConfigs[g]=i)});const o=t().globalModelSortOrder,s=t().dbProviderConfigs;let u=[...o],c=!1;const f=s.reduce((p,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{p.push(nd(g.id,v))}),p),[]),h=new Set(f);u=o.filter(p=>h.has(p)),h.forEach(p=>{u.includes(p)||u.push(p)}),c=!0,(JSON.stringify(u)!==JSON.stringify(o)||c)&&await t().setGlobalModelSortOrder(u)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),ot.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await Ht.deleteProviderConfig(n),e(f=>{f.dbProviderConfigs=f.dbProviderConfigs.filter(h=>h.id!==n)});const o=t().dbProviderConfigs.reduce((f,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(p=>{f.push(nd(h.id,p))}),f),[]),s=new Set(o),c=t().globalModelSortOrder.filter(f=>s.has(f));await t().setGlobalModelSortOrder(c),ot.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),ot.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){ot.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(u=>u.id===i))==null?void 0:a.value,s=await ZW(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),ot.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Ht.saveSetting(CN,r);const a=t().selectedModelId,o=t().dbProviderConfigs.reduce((u,c)=>(c.isEnabled&&c.enabledModels&&c.enabledModels.forEach(f=>{u.push(nd(c.id,f))}),u),[]),s=new Set(o);if(a&&!s.has(a)){const u=r.find(c=>s.has(c))??o.find(c=>r.includes(c))??o[0]??null;console.log(`[ProviderStore] Selection ${a} invalidated by order change. Selecting ${u}`),t().selectModel(u)}else if(!a&&r.length>0){const u=r.find(c=>s.has(c))??o[0]??null;console.log(`[ProviderStore] No selection, selecting first from new order: ${u}`),t().selectModel(u)}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=AC(n);if(!i||!o)return;const s=r.find(c=>c.id===i);if(!s)return;const u=a.find(c=>c.id===s.apiKeyId);return vW(s,o,u==null?void 0:u.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=n.type,a=[...n.fetchedModels??(zm[r]||[])];return{id:n.id,name:n.name,type:n.type,allAvailableModels:a}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return[];const a=r.type;return[...r.fetchedModels??(zm[a]||[])].map(i=>({...i}))}})));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XW=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),kN=e=>{const t=XW(e);return t.charAt(0).toUpperCase()+t.slice(1)},h8=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},u)=>R.createElement("svg",{ref:u,...JW,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:h8("lucide",a),...s},[...o.map(([c,f])=>R.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=(e,t)=>{const n=R.forwardRef(({className:r,...a},i)=>R.createElement(QW,{ref:i,iconNode:t,className:h8(`lucide-${YW(kN(e))}`,`lucide-${e}`,r),...a}));return n.displayName=kN(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],tK=rn("archive",eK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],rK=rn("arrow-down",nK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],xo=rn("check",aK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sw=rn("chevron-down",iK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],sK=rn("chevron-left",oK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],NC=rn("chevron-right",lK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cK=rn("chevron-up",uK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],j0=rn("chevrons-up-down",dK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ls=rn("circle-alert",fK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lw=rn("circle-check",hK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],IC=rn("clipboard",pK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],p8=rn("cloud-upload",mK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gK=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],m8=rn("copy",gK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],rv=rn("download",yK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bK=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vK=rn("eye-off",bK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_K=rn("eye",wK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],SK=rn("file-archive",xK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],CK=rn("file-json",EK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],AK=rn("file-question",kK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],RK=rn("file-text",TK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],IK=rn("file",NK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],DK=rn("folder-git",OK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],MK=rn("folder-open",jK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],OC=rn("folder-plus",PK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],LK=rn("folder-up",FK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],uw=rn("folder",$K);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Um=rn("git-branch",BK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],g8=rn("git-commit-horizontal",zK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],qK=rn("git-merge",UK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],y8=rn("git-pull-request",HK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GK=rn("grip-vertical",VK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],KK=rn("house",WK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],YK=rn("image",ZK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],b8=rn("info",XK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],QK=rn("key",JK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],tZ=rn("link",eZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gn=rn("loader-circle",nZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],aZ=rn("message-square",rZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],oZ=rn("music",iZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],lZ=rn("panel-left-close",sZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],cZ=rn("panel-right-close",uZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],fZ=rn("paperclip",dZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],DC=rn("pen",hZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],cw=rn("plus",pZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dw=rn("refresh-cw",mZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yZ=rn("rotate-ccw",gZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jC=rn("save",bZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],fw=rn("search",vZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],_Z=rn("send-horizontal",wZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MC=rn("settings",xZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],EZ=rn("sliders-horizontal",SZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],bE=rn("square-pen",CZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],AZ=rn("square",kZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Zu=rn("trash-2",TZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],PC=rn("triangle-alert",RZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],AN=rn("unlink",NZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],OZ=rn("upload",IZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jZ=rn("user",DZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],PZ=rn("video",MZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],av=rn("wrench",FZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ql=rn("x",LZ);function $Z(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ci=$Z(),iv=zl(Ul(e=>({attachedFilesMetadata:[],enabledTools:new Set,addAttachedFile:t=>{e(n=>{if(n.attachedFilesMetadata.some(a=>a.source==="direct"&&t.source==="direct"?a.name===t.name:a.source==="vfs"&&t.source==="vfs"?a.path===t.path:!1))console.warn(`InputStore: File "${t.name}" (source: ${t.source}) already attached. Skipping.`);else{const a={id:crypto.randomUUID(),...t};n.attachedFilesMetadata.push(a)}})},removeAttachedFile:t=>{e(n=>{n.attachedFilesMetadata=n.attachedFilesMetadata.filter(r=>r.id!==t)})},clearAttachedFiles:()=>{e({attachedFilesMetadata:[],enabledTools:new Set})},setEnabledTools:t=>{e(n=>{n.enabledTools=t(n.enabledTools)})}}))),BZ=pC("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function zZ({className:e,variant:t,asChild:n=!1,...r}){const a=n?FO:"span";return y.jsx(a,{"data-slot":"badge",className:$t(BZ({variant:t}),e),...r})}const qm=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},kr=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Dl=(...e)=>kr(e.map(t=>t.trim()).filter(Boolean).join("/")),hw=e=>{const t=kr(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},ca=e=>{const t=kr(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},ov=(e,t)=>kr(e==="/"?`/${t}`:`${e}/${t}`);async function UZ(e,t){const n=Oa.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}const qZ=({InputAreaRenderer:e,onSubmit:t,className:n})=>{const r=R.useRef(null),{attachedFilesMetadata:a,clearAttachedFiles:i,removeAttachedFile:o}=iv(),[s,u]=R.useState(!1),c=Oa(S=>S.promptControls),f=Cr(S=>S.status==="streaming"),h=R.useMemo(()=>Object.values(c).filter(S=>S.show?S.show():!0).sort((S,E)=>(S.order??1/0)-(E.order??1/0)),[c]),p=R.useCallback(()=>{i(),h.forEach(S=>{S.clearOnSubmit&&S.clearOnSubmit()})},[h,i]),g=R.useCallback(async S=>{var X;S==null||S.preventDefault();const C=(((X=r.current)==null?void 0:X.getValue())??"").trim();if(f){console.warn("Submit prevented: AI is currently streaming.");return}const k=iv.getState().attachedFilesMetadata;if(!(C||k.length>0)){console.warn("Submit prevented: No content provided.");return}u(!0);const O=JSON.parse(JSON.stringify(k));let N={id:Bo(),content:C,parameters:{},metadata:{attachedFiles:O}};for(const F of h){if(F.getParameters)try{const Z=await F.getParameters();Z&&typeof Z=="object"&&(N.parameters={...N.parameters,...Z})}catch(Z){console.error(`Error getting parameters from control ${F.id}:`,Z)}if(F.getMetadata)try{const Z=await F.getMetadata();if(Z&&typeof Z=="object"){const{attachedFiles:L,...de}=Z;L&&console.warn(`Control ${F.id} tried to overwrite attachedFiles metadata. Ignoring.`),N.metadata={...N.metadata,...de,attachedFiles:N.metadata.attachedFiles}}}catch(Z){console.error(`Error getting metadata from control ${F.id}:`,Z)}}if(N.metadata.modelId=Ya.getState().selectedModelId,!N.metadata.modelId){ot.error("No model selected. Please choose a model."),u(!1);return}Ci.emit("prompt:submitted",{turnData:N});const z=await UZ("middleware:prompt:turnFinalize",{turnData:N});if(z===!1){console.log("Submission cancelled by middleware:prompt:turnFinalize."),u(!1);return}const H=z&&typeof z=="object"?z.turnData:N;try{await t(H),p()}catch(F){console.error("Error during final prompt submission:",F),ot.error(`Submission failed: ${F instanceof Error?F.message:String(F)}`)}finally{u(!1)}},[t,f,p,h]),v=R.useCallback(()=>{g()},[g]),b=h.some(S=>!!S.renderer),_=h.some(S=>!!S.triggerRenderer);R.useEffect(()=>()=>{i()},[i]);const x=s||f||a.length===0;return y.jsxs("form",{onSubmit:g,className:$t("flex flex-col border-t border-[--border] bg-background",n),children:[b&&y.jsx("div",{className:"p-2 border-b border-[--border] bg-muted/30",children:y.jsx(zR,{controls:h,area:"panel"})}),a.length>0&&y.jsx("div",{className:"px-3 md:px-4 pt-2 border-b border-border/50 max-h-24 overflow-y-auto",children:y.jsx("div",{className:"flex flex-wrap gap-1.5 pb-1.5",children:a.map(S=>y.jsxs(zZ,{variant:"secondary",className:"flex items-center gap-1.5 pl-1.5 pr-0.5 py-0.5 text-xs",children:[y.jsx("span",{className:"truncate max-w-[150px]",title:S.name,children:S.name}),y.jsxs("span",{className:"text-muted-foreground/80",children:["(",qm(S.size),")"]}),y.jsx(Pt,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>o(S.id),"aria-label":`Remove ${S.name}`,disabled:s||f,children:y.jsx(ql,{className:"h-3 w-3"})})]},S.id))})}),y.jsxs("div",{className:"p-3 md:p-4 flex items-end gap-2",children:[y.jsx("div",{className:"flex-grow",children:y.jsx(e,{ref:r,onSubmit:v,disabled:s||f,initialValue:""})}),y.jsx("div",{className:"flex-shrink-0",children:y.jsx(Pt,{type:"submit",disabled:x,size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Send message",children:y.jsx(_Z,{className:"h-5 w-5"})})})]}),_&&y.jsx("div",{className:"px-3 md:px-4 pb-2 pt-1 flex-grow",children:y.jsx(zR,{controls:h,area:"trigger",className:"flex flex-wrap items-center gap-1 [&>*]:flex-shrink-0"})})]})};function Bt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function HZ(e,t){const n=R.createContext(t),r=i=>{const{children:o,...s}=i,u=R.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:u,children:o})};r.displayName=e+"Provider";function a(i){const o=R.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Ni(e,t=[]){let n=[];function r(i,o){const s=R.createContext(o),u=n.length;n=[...n,o];const c=h=>{var x;const{scope:p,children:g,...v}=h,b=((x=p==null?void 0:p[e])==null?void 0:x[u])||s,_=R.useMemo(()=>v,Object.values(v));return y.jsx(b.Provider,{value:_,children:g})};c.displayName=i+"Provider";function f(h,p){var b;const g=((b=p==null?void 0:p[e])==null?void 0:b[u])||s,v=R.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const a=()=>{const i=n.map(o=>R.createContext(o));return function(s){const u=(s==null?void 0:s[e])||i;return R.useMemo(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return a.scopeName=e,[r,VZ(a,...t)]}function VZ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...s,...h}},{});return R.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var GZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jt=GZ.reduce((e,t)=>{const n=zu(`Primitive.${t}`),r=R.forwardRef((a,i)=>{const{asChild:o,...s}=a,u=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function v8(e,t){e&&Ns.flushSync(()=>e.dispatchEvent(t))}function Ta(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),R.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function WZ(e,t=globalThis==null?void 0:globalThis.document){const n=Ta(e);R.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var KZ="DismissableLayer",vE="dismissableLayer.update",ZZ="dismissableLayer.pointerDownOutside",YZ="dismissableLayer.focusOutside",TN,w8=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sh=R.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...u}=e,c=R.useContext(w8),[f,h]=R.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=R.useState({}),v=_n(t,O=>h(O)),b=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(_),S=f?b.indexOf(f):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=S>=x,k=QZ(O=>{const N=O.target,z=[...c.branches].some(H=>H.contains(N));!C||z||(a==null||a(O),o==null||o(O),O.defaultPrevented||s==null||s())},p),D=eY(O=>{const N=O.target;[...c.branches].some(H=>H.contains(N))||(i==null||i(O),o==null||o(O),O.defaultPrevented||s==null||s())},p);return WZ(O=>{S===c.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&s&&(O.preventDefault(),s()))},p),R.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(TN=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),RN(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=TN)}},[f,p,n,c]),R.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),RN())},[f,c]),R.useEffect(()=>{const O=()=>g({});return document.addEventListener(vE,O),()=>document.removeEventListener(vE,O)},[]),y.jsx(Jt.div,{...u,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:Bt(e.onFocusCapture,D.onFocusCapture),onBlurCapture:Bt(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Bt(e.onPointerDownCapture,k.onPointerDownCapture)})});Sh.displayName=KZ;var XZ="DismissableLayerBranch",JZ=R.forwardRef((e,t)=>{const n=R.useContext(w8),r=R.useRef(null),a=_n(t,r);return R.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(Jt.div,{...e,ref:a})});JZ.displayName=XZ;function QZ(e,t=globalThis==null?void 0:globalThis.document){const n=Ta(e),r=R.useRef(!1),a=R.useRef(()=>{});return R.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let u=function(){_8(ZZ,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function eY(e,t=globalThis==null?void 0:globalThis.document){const n=Ta(e),r=R.useRef(!1);return R.useEffect(()=>{const a=i=>{i.target&&!r.current&&_8(YZ,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function RN(){const e=new CustomEvent(vE);document.dispatchEvent(e)}function _8(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?v8(a,i):a.dispatchEvent(i)}var Ba=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},tY=SO[" useId ".trim().toString()]||(()=>{}),nY=0;function Xa(e){const[t,n]=R.useState(tY());return Ba(()=>{n(r=>r??String(nY++))},[e]),t?`radix-${t}`:""}const rY=["top","right","bottom","left"],Yu=Math.min,Vi=Math.max,sv=Math.round,Vy=Math.floor,js=e=>({x:e,y:e}),aY={left:"right",right:"left",bottom:"top",top:"bottom"},iY={start:"end",end:"start"};function wE(e,t,n){return Vi(e,Yu(t,n))}function jl(e,t){return typeof e=="function"?e(t):e}function Ml(e){return e.split("-")[0]}function Eh(e){return e.split("-")[1]}function FC(e){return e==="x"?"y":"x"}function LC(e){return e==="y"?"height":"width"}function Xu(e){return["top","bottom"].includes(Ml(e))?"y":"x"}function $C(e){return FC(Xu(e))}function oY(e,t,n){n===void 0&&(n=!1);const r=Eh(e),a=$C(e),i=LC(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=lv(o)),[o,lv(o)]}function sY(e){const t=lv(e);return[_E(e),t,_E(t)]}function _E(e){return e.replace(/start|end/g,t=>iY[t])}function lY(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function uY(e,t,n,r){const a=Eh(e);let i=lY(Ml(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(_E)))),i}function lv(e){return e.replace(/left|right|bottom|top/g,t=>aY[t])}function cY(e){return{top:0,right:0,bottom:0,left:0,...e}}function x8(e){return typeof e!="number"?cY(e):{top:e,right:e,bottom:e,left:e}}function uv(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function NN(e,t,n){let{reference:r,floating:a}=e;const i=Xu(t),o=$C(t),s=LC(o),u=Ml(t),c=i==="y",f=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,p=r[s]/2-a[s]/2;let g;switch(u){case"top":g={x:f,y:r.y-a.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Eh(t)){case"start":g[o]-=p*(n&&c?-1:1);break;case"end":g[o]+=p*(n&&c?-1:1);break}return g}const dY=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=NN(c,r,u),p=r,g={},v=0;for(let b=0;b<s.length;b++){const{name:_,fn:x}=s[b],{x:S,y:E,data:C,reset:k}=await x({x:f,y:h,initialPlacement:r,placement:p,strategy:a,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});f=S??f,h=E??h,g={...g,[_]:{...g[_],...C}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:f,y:h}=NN(c,p,u)),b=-1)}return{x:f,y:h,placement:p,strategy:a,middlewareData:g}};async function Hm(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=jl(t,e),v=x8(g),_=s[p?h==="floating"?"reference":"floating":h],x=uv(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:u})),S=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=uv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:u}):S);return{top:(x.top-k.top+v.top)/C.y,bottom:(k.bottom-x.bottom+v.bottom)/C.y,left:(x.left-k.left+v.left)/C.x,right:(k.right-x.right+v.right)/C.x}}const fY=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:u}=t,{element:c,padding:f=0}=jl(e,t)||{};if(c==null)return{};const h=x8(f),p={x:n,y:r},g=$C(a),v=LC(g),b=await o.getDimensions(c),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",E=_?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[g]-p[g]-i.floating[v],k=p[g]-i.reference[g],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let O=D?D[E]:0;(!O||!await(o.isElement==null?void 0:o.isElement(D)))&&(O=s.floating[E]||i.floating[v]);const N=C/2-k/2,z=O/2-b[v]/2-1,H=Yu(h[x],z),X=Yu(h[S],z),F=H,Z=O-b[v]-X,L=O/2-b[v]/2+N,de=wE(F,L,Z),ae=!u.arrow&&Eh(a)!=null&&L!==de&&i.reference[v]/2-(L<F?H:X)-b[v]/2<0,ne=ae?L<F?L-F:L-Z:0;return{[g]:p[g]+ne,data:{[g]:de,centerOffset:L-de-ne,...ae&&{alignmentOffset:ne}},reset:ae}}}),hY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:u,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,..._}=jl(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Ml(a),S=Xu(s),E=Ml(s)===s,C=await(u.isRTL==null?void 0:u.isRTL(c.floating)),k=p||(E||!b?[lv(s)]:sY(s)),D=v!=="none";!p&&D&&k.push(...uY(s,b,v,C));const O=[s,...k],N=await Hm(t,_),z=[];let H=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&z.push(N[x]),h){const L=oY(a,o,C);z.push(N[L[0]],N[L[1]])}if(H=[...H,{placement:a,overflows:z}],!z.every(L=>L<=0)){var X,F;const L=(((X=i.flip)==null?void 0:X.index)||0)+1,de=O[L];if(de)return{data:{index:L,overflows:H},reset:{placement:de}};let ae=(F=H.filter(ne=>ne.overflows[0]<=0).sort((ne,ee)=>ne.overflows[1]-ee.overflows[1])[0])==null?void 0:F.placement;if(!ae)switch(g){case"bestFit":{var Z;const ne=(Z=H.filter(ee=>{if(D){const se=Xu(ee.placement);return se===S||se==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(se=>se>0).reduce((se,W)=>se+W,0)]).sort((ee,se)=>ee[1]-se[1])[0])==null?void 0:Z[0];ne&&(ae=ne);break}case"initialPlacement":ae=s;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function IN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ON(e){return rY.some(t=>e[t]>=0)}const pY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=jl(e,t);switch(r){case"referenceHidden":{const i=await Hm(t,{...a,elementContext:"reference"}),o=IN(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ON(o)}}}case"escaped":{const i=await Hm(t,{...a,altBoundary:!0}),o=IN(i,n.floating);return{data:{escapedOffsets:o,escaped:ON(o)}}}default:return{}}}}};async function mY(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Ml(n),s=Eh(n),u=Xu(n)==="y",c=["left","top"].includes(o)?-1:1,f=i&&u?-1:1,h=jl(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof v=="number"&&(g=s==="end"?v*-1:v),u?{x:g*f,y:p*c}:{x:p*c,y:g*f}}const gY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,u=await mY(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:o}}}}},yY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...u}=jl(e,t),c={x:n,y:r},f=await Hm(t,u),h=Xu(Ml(a)),p=FC(h);let g=c[p],v=c[h];if(i){const _=p==="y"?"top":"left",x=p==="y"?"bottom":"right",S=g+f[_],E=g-f[x];g=wE(S,g,E)}if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=v+f[_],E=v-f[x];v=wE(S,v,E)}const b=s.fn({...t,[p]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[h]:o}}}}}},bY=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:u=!0,crossAxis:c=!0}=jl(e,t),f={x:n,y:r},h=Xu(a),p=FC(h);let g=f[p],v=f[h];const b=jl(s,t),_=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const E=p==="y"?"height":"width",C=i.reference[p]-i.floating[E]+_.mainAxis,k=i.reference[p]+i.reference[E]-_.mainAxis;g<C?g=C:g>k&&(g=k)}if(c){var x,S;const E=p==="y"?"width":"height",C=["top","left"].includes(Ml(a)),k=i.reference[h]-i.floating[E]+(C&&((x=o.offset)==null?void 0:x[h])||0)+(C?0:_.crossAxis),D=i.reference[h]+i.reference[E]+(C?0:((S=o.offset)==null?void 0:S[h])||0)-(C?_.crossAxis:0);v<k?v=k:v>D&&(v=D)}return{[p]:g,[h]:v}}}},vY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:u=()=>{},...c}=jl(e,t),f=await Hm(t,c),h=Ml(a),p=Eh(a),g=Xu(a)==="y",{width:v,height:b}=i.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=p===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,_=p==="end"?"top":"bottom");const S=b-f.top-f.bottom,E=v-f.left-f.right,C=Yu(b-f[_],S),k=Yu(v-f[x],E),D=!t.middlewareData.shift;let O=C,N=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(O=S),D&&!p){const H=Vi(f.left,0),X=Vi(f.right,0),F=Vi(f.top,0),Z=Vi(f.bottom,0);g?N=v-2*(H!==0||X!==0?H+X:Vi(f.left,f.right)):O=b-2*(F!==0||Z!==0?F+Z:Vi(f.top,f.bottom))}await u({...t,availableWidth:N,availableHeight:O});const z=await o.getDimensions(s.floating);return v!==z.width||b!==z.height?{reset:{rects:!0}}:{}}}};function pw(){return typeof window<"u"}function Ch(e){return S8(e)?(e.nodeName||"").toLowerCase():"#document"}function Zi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Us(e){var t;return(t=(S8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function S8(e){return pw()?e instanceof Node||e instanceof Zi(e).Node:!1}function Ko(e){return pw()?e instanceof Element||e instanceof Zi(e).Element:!1}function $s(e){return pw()?e instanceof HTMLElement||e instanceof Zi(e).HTMLElement:!1}function DN(e){return!pw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Zi(e).ShadowRoot}function M0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Zo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function wY(e){return["table","td","th"].includes(Ch(e))}function mw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function BC(e){const t=zC(),n=Ko(e)?Zo(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function _Y(e){let t=Ju(e);for(;$s(t)&&!nh(t);){if(BC(t))return t;if(mw(t))return null;t=Ju(t)}return null}function zC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nh(e){return["html","body","#document"].includes(Ch(e))}function Zo(e){return Zi(e).getComputedStyle(e)}function gw(e){return Ko(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ju(e){if(Ch(e)==="html")return e;const t=e.assignedSlot||e.parentNode||DN(e)&&e.host||Us(e);return DN(t)?t.host:t}function E8(e){const t=Ju(e);return nh(t)?e.ownerDocument?e.ownerDocument.body:e.body:$s(t)&&M0(t)?t:E8(t)}function Vm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=E8(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Zi(a);if(i){const s=xE(o);return t.concat(o,o.visualViewport||[],M0(a)?a:[],s&&n?Vm(s):[])}return t.concat(a,Vm(a,[],n))}function xE(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function C8(e){const t=Zo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=$s(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=sv(n)!==i||sv(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function UC(e){return Ko(e)?e:e.contextElement}function qf(e){const t=UC(e);if(!$s(t))return js(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=C8(t);let o=(i?sv(n.width):n.width)/r,s=(i?sv(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const xY=js(0);function k8(e){const t=Zi(e);return!zC()||!t.visualViewport?xY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function SY(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Zi(e)?!1:t}function dd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=UC(e);let o=js(1);t&&(r?Ko(r)&&(o=qf(r)):o=qf(e));const s=SY(i,n,r)?k8(i):js(0);let u=(a.left+s.x)/o.x,c=(a.top+s.y)/o.y,f=a.width/o.x,h=a.height/o.y;if(i){const p=Zi(i),g=r&&Ko(r)?Zi(r):r;let v=p,b=xE(v);for(;b&&r&&g!==v;){const _=qf(b),x=b.getBoundingClientRect(),S=Zo(b),E=x.left+(b.clientLeft+parseFloat(S.paddingLeft))*_.x,C=x.top+(b.clientTop+parseFloat(S.paddingTop))*_.y;u*=_.x,c*=_.y,f*=_.x,h*=_.y,u+=E,c+=C,v=Zi(b),b=xE(v)}}return uv({width:f,height:h,x:u,y:c})}function qC(e,t){const n=gw(e).scrollLeft;return t?t.left+n:dd(Us(e)).left+n}function A8(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:qC(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function EY(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Us(r),s=t?mw(t.floating):!1;if(r===o||s&&i)return n;let u={scrollLeft:0,scrollTop:0},c=js(1);const f=js(0),h=$s(r);if((h||!h&&!i)&&((Ch(r)!=="body"||M0(o))&&(u=gw(r)),$s(r))){const g=dd(r);c=qf(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const p=o&&!h&&!i?A8(o,u,!0):js(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+f.x+p.x,y:n.y*c.y-u.scrollTop*c.y+f.y+p.y}}function CY(e){return Array.from(e.getClientRects())}function kY(e){const t=Us(e),n=gw(e),r=e.ownerDocument.body,a=Vi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Vi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+qC(e);const s=-n.scrollTop;return Zo(r).direction==="rtl"&&(o+=Vi(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function AY(e,t){const n=Zi(e),r=Us(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,u=0;if(a){i=a.width,o=a.height;const c=zC();(!c||c&&t==="fixed")&&(s=a.offsetLeft,u=a.offsetTop)}return{width:i,height:o,x:s,y:u}}function TY(e,t){const n=dd(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=$s(e)?qf(e):js(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,u=a*i.x,c=r*i.y;return{width:o,height:s,x:u,y:c}}function jN(e,t,n){let r;if(t==="viewport")r=AY(e,n);else if(t==="document")r=kY(Us(e));else if(Ko(t))r=TY(t,n);else{const a=k8(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return uv(r)}function T8(e,t){const n=Ju(e);return n===t||!Ko(n)||nh(n)?!1:Zo(n).position==="fixed"||T8(n,t)}function RY(e,t){const n=t.get(e);if(n)return n;let r=Vm(e,[],!1).filter(s=>Ko(s)&&Ch(s)!=="body"),a=null;const i=Zo(e).position==="fixed";let o=i?Ju(e):e;for(;Ko(o)&&!nh(o);){const s=Zo(o),u=BC(o);!u&&s.position==="fixed"&&(a=null),(i?!u&&!a:!u&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||M0(o)&&!u&&T8(e,o))?r=r.filter(f=>f!==o):a=s,o=Ju(o)}return t.set(e,r),r}function NY(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?mw(t)?[]:RY(t,this._c):[].concat(n),r],s=o[0],u=o.reduce((c,f)=>{const h=jN(t,f,a);return c.top=Vi(h.top,c.top),c.right=Yu(h.right,c.right),c.bottom=Yu(h.bottom,c.bottom),c.left=Vi(h.left,c.left),c},jN(t,s,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function IY(e){const{width:t,height:n}=C8(e);return{width:t,height:n}}function OY(e,t,n){const r=$s(t),a=Us(t),i=n==="fixed",o=dd(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=js(0);if(r||!r&&!i)if((Ch(t)!=="body"||M0(a))&&(s=gw(t)),r){const p=dd(t,!0,i,t);u.x=p.x+t.clientLeft,u.y=p.y+t.clientTop}else a&&(u.x=qC(a));const c=a&&!r&&!i?A8(a,s):js(0),f=o.left+s.scrollLeft-u.x-c.x,h=o.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:o.width,height:o.height}}function Hx(e){return Zo(e).position==="static"}function MN(e,t){if(!$s(e)||Zo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Us(e)===n&&(n=n.ownerDocument.body),n}function R8(e,t){const n=Zi(e);if(mw(e))return n;if(!$s(e)){let a=Ju(e);for(;a&&!nh(a);){if(Ko(a)&&!Hx(a))return a;a=Ju(a)}return n}let r=MN(e,t);for(;r&&wY(r)&&Hx(r);)r=MN(r,t);return r&&nh(r)&&Hx(r)&&!BC(r)?n:r||_Y(e)||n}const DY=async function(e){const t=this.getOffsetParent||R8,n=this.getDimensions,r=await n(e.floating);return{reference:OY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jY(e){return Zo(e).direction==="rtl"}const MY={convertOffsetParentRelativeRectToViewportRelativeRect:EY,getDocumentElement:Us,getClippingRect:NY,getOffsetParent:R8,getElementRects:DY,getClientRects:CY,getDimensions:IY,getScale:qf,isElement:Ko,isRTL:jY};function N8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function PY(e,t){let n=null,r;const a=Us(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),i();const c=e.getBoundingClientRect(),{left:f,top:h,width:p,height:g}=c;if(s||t(),!p||!g)return;const v=Vy(h),b=Vy(a.clientWidth-(f+p)),_=Vy(a.clientHeight-(h+g)),x=Vy(f),E={rootMargin:-v+"px "+-b+"px "+-_+"px "+-x+"px",threshold:Vi(0,Yu(1,u))||1};let C=!0;function k(D){const O=D[0].intersectionRatio;if(O!==u){if(!C)return o();O?o(!1,O):r=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!N8(c,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return o(!0),i}function FY(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=UC(e),f=a||i?[...c?Vm(c):[],...Vm(t)]:[];f.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&s?PY(c,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!u&&g.observe(c),g.observe(t));let v,b=u?dd(e):null;u&&_();function _(){const x=dd(e);b&&!N8(b,x)&&n(),b=x,v=requestAnimationFrame(_)}return n(),()=>{var x;f.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,u&&cancelAnimationFrame(v)}}const LY=gY,$Y=yY,BY=hY,zY=vY,UY=pY,PN=fY,qY=bY,HY=(e,t,n)=>{const r=new Map,a={platform:MY,...n},i={...a.platform,_c:r};return dY(e,t,{...a,platform:i})};var Eb=typeof document<"u"?R.useLayoutEffect:R.useEffect;function cv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!cv(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!cv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function I8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function FN(e,t){const n=I8(e);return Math.round(t*n)/n}function Vx(e){const t=R.useRef(e);return Eb(()=>{t.current=e}),t}function VY(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:u,open:c}=e,[f,h]=R.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=R.useState(r);cv(p,r)||g(r);const[v,b]=R.useState(null),[_,x]=R.useState(null),S=R.useCallback(ee=>{ee!==D.current&&(D.current=ee,b(ee))},[]),E=R.useCallback(ee=>{ee!==O.current&&(O.current=ee,x(ee))},[]),C=i||v,k=o||_,D=R.useRef(null),O=R.useRef(null),N=R.useRef(f),z=u!=null,H=Vx(u),X=Vx(a),F=Vx(c),Z=R.useCallback(()=>{if(!D.current||!O.current)return;const ee={placement:t,strategy:n,middleware:p};X.current&&(ee.platform=X.current),HY(D.current,O.current,ee).then(se=>{const W={...se,isPositioned:F.current!==!1};L.current&&!cv(N.current,W)&&(N.current=W,Ns.flushSync(()=>{h(W)}))})},[p,t,n,X,F]);Eb(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(ee=>({...ee,isPositioned:!1})))},[c]);const L=R.useRef(!1);Eb(()=>(L.current=!0,()=>{L.current=!1}),[]),Eb(()=>{if(C&&(D.current=C),k&&(O.current=k),C&&k){if(H.current)return H.current(C,k,Z);Z()}},[C,k,Z,H,z]);const de=R.useMemo(()=>({reference:D,floating:O,setReference:S,setFloating:E}),[S,E]),ae=R.useMemo(()=>({reference:C,floating:k}),[C,k]),ne=R.useMemo(()=>{const ee={position:n,left:0,top:0};if(!ae.floating)return ee;const se=FN(ae.floating,f.x),W=FN(ae.floating,f.y);return s?{...ee,transform:"translate("+se+"px, "+W+"px)",...I8(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:se,top:W}},[n,s,ae.floating,f.x,f.y]);return R.useMemo(()=>({...f,update:Z,refs:de,elements:ae,floatingStyles:ne}),[f,Z,de,ae,ne])}const GY=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?PN({element:r.current,padding:a}).fn(n):{}:r?PN({element:r,padding:a}).fn(n):{}}}},WY=(e,t)=>({...LY(e),options:[e,t]}),KY=(e,t)=>({...$Y(e),options:[e,t]}),ZY=(e,t)=>({...qY(e),options:[e,t]}),YY=(e,t)=>({...BY(e),options:[e,t]}),XY=(e,t)=>({...zY(e),options:[e,t]}),JY=(e,t)=>({...UY(e),options:[e,t]}),QY=(e,t)=>({...GY(e),options:[e,t]});var eX="Arrow",O8=R.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(Jt.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});O8.displayName=eX;var tX=O8;function yw(e){const[t,n]=R.useState(void 0);return Ba(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const u=i.borderBoxSize,c=Array.isArray(u)?u[0]:u;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var HC="Popper",[D8,lc]=Ni(HC),[nX,j8]=D8(HC),M8=e=>{const{__scopePopper:t,children:n}=e,[r,a]=R.useState(null);return y.jsx(nX,{scope:t,anchor:r,onAnchorChange:a,children:n})};M8.displayName=HC;var P8="PopperAnchor",F8=R.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=j8(P8,n),o=R.useRef(null),s=_n(t,o);return R.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(Jt.div,{...a,ref:s})});F8.displayName=P8;var VC="PopperContent",[rX,aX]=D8(VC),L8=R.forwardRef((e,t)=>{var Pe,Ae,Te,qe,it,Ie;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,_=j8(VC,n),[x,S]=R.useState(null),E=_n(t,Re=>S(Re)),[C,k]=R.useState(null),D=yw(C),O=(D==null?void 0:D.width)??0,N=(D==null?void 0:D.height)??0,z=r+(i!=="center"?"-"+i:""),H=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},X=Array.isArray(c)?c:[c],F=X.length>0,Z={padding:H,boundary:X.filter(oX),altBoundary:F},{refs:L,floatingStyles:de,placement:ae,isPositioned:ne,middlewareData:ee}=VY({strategy:"fixed",placement:z,whileElementsMounted:(...Re)=>FY(...Re,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[WY({mainAxis:a+N,alignmentAxis:o}),u&&KY({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?ZY():void 0,...Z}),u&&YY({...Z}),XY({...Z,apply:({elements:Re,rects:U,availableWidth:Ce,availableHeight:Ne})=>{const{width:ce,height:ie}=U.reference,Q=Re.floating.style;Q.setProperty("--radix-popper-available-width",`${Ce}px`),Q.setProperty("--radix-popper-available-height",`${Ne}px`),Q.setProperty("--radix-popper-anchor-width",`${ce}px`),Q.setProperty("--radix-popper-anchor-height",`${ie}px`)}}),C&&QY({element:C,padding:s}),sX({arrowWidth:O,arrowHeight:N}),p&&JY({strategy:"referenceHidden",...Z})]}),[se,W]=z8(ae),J=Ta(v);Ba(()=>{ne&&(J==null||J())},[ne,J]);const Y=(Pe=ee.arrow)==null?void 0:Pe.x,re=(Ae=ee.arrow)==null?void 0:Ae.y,be=((Te=ee.arrow)==null?void 0:Te.centerOffset)!==0,[we,Me]=R.useState();return Ba(()=>{x&&Me(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:ne?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(qe=ee.transformOrigin)==null?void 0:qe.x,(it=ee.transformOrigin)==null?void 0:it.y].join(" "),...((Ie=ee.hide)==null?void 0:Ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(rX,{scope:n,placedSide:se,onArrowChange:k,arrowX:Y,arrowY:re,shouldHideArrow:be,children:y.jsx(Jt.div,{"data-side":se,"data-align":W,...b,ref:E,style:{...b.style,animation:ne?void 0:"none"}})})})});L8.displayName=VC;var $8="PopperArrow",iX={top:"bottom",right:"left",bottom:"top",left:"right"},B8=R.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=aX($8,r),o=iX[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(tX,{...a,ref:n,style:{...a.style,display:"block"}})})});B8.displayName=$8;function oX(e){return e!==null}var sX=e=>({name:"transformOrigin",options:e,fn(t){var _,x,S;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[c,f]=z8(n),h={start:"0%",center:"50%",end:"100%"}[f],p=(((x=a.arrow)==null?void 0:x.x)??0)+s/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+u/2;let v="",b="";return c==="bottom"?(v=o?h:`${p}px`,b=`${-u}px`):c==="top"?(v=o?h:`${p}px`,b=`${r.floating.height+u}px`):c==="right"?(v=`${-u}px`,b=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+u}px`,b=o?h:`${g}px`),{data:{x:v,y:b}}}});function z8(e){const[t,n="center"]=e.split("-");return[t,n]}var bw=M8,P0=F8,vw=L8,ww=B8,lX="Portal",kh=R.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=R.useState(!1);Ba(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?f8.createPortal(y.jsx(Jt.div,{...r,ref:t}),o):null});kh.displayName=lX;function uX(e,t){return R.useReducer((n,r)=>t[n][r]??n,e)}var Da=e=>{const{present:t,children:n}=e,r=cX(t),a=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),i=_n(r.ref,dX(a));return typeof n=="function"||r.isPresent?R.cloneElement(a,{ref:i}):null};Da.displayName="Presence";function cX(e){const[t,n]=R.useState(),r=R.useRef(null),a=R.useRef(e),i=R.useRef("none"),o=e?"mounted":"unmounted",[s,u]=uX(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const c=Gy(r.current);i.current=s==="mounted"?c:"none"},[s]),Ba(()=>{const c=r.current,f=a.current;if(f!==e){const p=i.current,g=Gy(c);e?u("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(f&&p!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),Ba(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=g=>{const b=Gy(r.current).includes(g.animationName);if(g.target===t&&b&&(u("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},p=g=>{g.target===t&&(i.current=Gy(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:R.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Gy(e){return(e==null?void 0:e.animationName)||"none"}function dX(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var fX=SO[" useInsertionEffect ".trim().toString()]||Ba;function Bs({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=hX({defaultProp:t,onChange:n}),s=e!==void 0,u=s?e:a;{const f=R.useRef(e!==void 0);R.useEffect(()=>{const h=f.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=s},[s,r])}const c=R.useCallback(f=>{var h;if(s){const p=pX(f)?f(e):f;p!==e&&((h=o.current)==null||h.call(o,p))}else i(f)},[s,e,i,o]);return[u,c]}function hX({defaultProp:e,onChange:t}){const[n,r]=R.useState(e),a=R.useRef(n),i=R.useRef(t);return fX(()=>{i.current=t},[t]),R.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function pX(e){return typeof e=="function"}var U8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),mX="VisuallyHidden",q8=R.forwardRef((e,t)=>y.jsx(Jt.span,{...e,ref:t,style:{...U8,...e.style}}));q8.displayName=mX;var gX=q8,[_w,d1e]=Ni("Tooltip",[lc]),xw=lc(),H8="TooltipProvider",yX=700,SE="tooltip.open",[bX,GC]=_w(H8),V8=e=>{const{__scopeTooltip:t,delayDuration:n=yX,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=R.useRef(!0),s=R.useRef(!1),u=R.useRef(0);return R.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),y.jsx(bX,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:R.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:R.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:R.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:i})};V8.displayName=H8;var Gm="Tooltip",[vX,F0]=_w(Gm),G8=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,u=GC(Gm,e.__scopeTooltip),c=xw(t),[f,h]=R.useState(null),p=Xa(),g=R.useRef(0),v=o??u.disableHoverableContent,b=s??u.delayDuration,_=R.useRef(!1),[x,S]=Bs({prop:r,defaultProp:a??!1,onChange:O=>{O?(u.onOpen(),document.dispatchEvent(new CustomEvent(SE))):u.onClose(),i==null||i(O)},caller:Gm}),E=R.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),C=R.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,S(!0)},[S]),k=R.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),D=R.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,S(!0),g.current=0},b)},[b,S]);return R.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(bw,{...c,children:y.jsx(vX,{scope:t,contentId:p,open:x,stateAttribute:E,trigger:f,onTriggerChange:h,onTriggerEnter:R.useCallback(()=>{u.isOpenDelayedRef.current?D():C()},[u.isOpenDelayedRef,D,C]),onTriggerLeave:R.useCallback(()=>{v?k():(window.clearTimeout(g.current),g.current=0)},[k,v]),onOpen:C,onClose:k,disableHoverableContent:v,children:n})})};G8.displayName=Gm;var EE="TooltipTrigger",W8=R.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=F0(EE,n),i=GC(EE,n),o=xw(n),s=R.useRef(null),u=_n(t,s,a.onTriggerChange),c=R.useRef(!1),f=R.useRef(!1),h=R.useCallback(()=>c.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(P0,{asChild:!0,...o,children:y.jsx(Jt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:u,onPointerMove:Bt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Bt(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Bt(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Bt(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:Bt(e.onBlur,a.onClose),onClick:Bt(e.onClick,a.onClose)})})});W8.displayName=EE;var WC="TooltipPortal",[wX,_X]=_w(WC,{forceMount:void 0}),K8=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=F0(WC,t);return y.jsx(wX,{scope:t,forceMount:n,children:y.jsx(Da,{present:n||i.open,children:y.jsx(kh,{asChild:!0,container:a,children:r})})})};K8.displayName=WC;var rh="TooltipContent",Z8=R.forwardRef((e,t)=>{const n=_X(rh,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=F0(rh,e.__scopeTooltip);return y.jsx(Da,{present:r||o.open,children:o.disableHoverableContent?y.jsx(Y8,{side:a,...i,ref:t}):y.jsx(xX,{side:a,...i,ref:t})})}),xX=R.forwardRef((e,t)=>{const n=F0(rh,e.__scopeTooltip),r=GC(rh,e.__scopeTooltip),a=R.useRef(null),i=_n(t,a),[o,s]=R.useState(null),{trigger:u,onClose:c}=n,f=a.current,{onPointerInTransitChange:h}=r,p=R.useCallback(()=>{s(null),h(!1)},[h]),g=R.useCallback((v,b)=>{const _=v.currentTarget,x={x:v.clientX,y:v.clientY},S=kX(x,_.getBoundingClientRect()),E=AX(x,S),C=TX(b.getBoundingClientRect()),k=NX([...E,...C]);s(k),h(!0)},[h]);return R.useEffect(()=>()=>p(),[p]),R.useEffect(()=>{if(u&&f){const v=_=>g(_,f),b=_=>g(_,u);return u.addEventListener("pointerleave",v),f.addEventListener("pointerleave",b),()=>{u.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",b)}}},[u,f,g,p]),R.useEffect(()=>{if(o){const v=b=>{const _=b.target,x={x:b.clientX,y:b.clientY},S=(u==null?void 0:u.contains(_))||(f==null?void 0:f.contains(_)),E=!RX(x,o);S?p():E&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,f,o,c,p]),y.jsx(Y8,{...e,ref:i})}),[SX,EX]=_w(Gm,{isInside:!1}),CX=jz("TooltipContent"),Y8=R.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,u=F0(rh,n),c=xw(n),{onClose:f}=u;return R.useEffect(()=>(document.addEventListener(SE,f),()=>document.removeEventListener(SE,f)),[f]),R.useEffect(()=>{if(u.trigger){const h=p=>{const g=p.target;g!=null&&g.contains(u.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[u.trigger,f]),y.jsx(Sh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:y.jsxs(vw,{"data-state":u.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(CX,{children:r}),y.jsx(SX,{scope:n,isInside:!0,children:y.jsx(gX,{id:u.contentId,role:"tooltip",children:a||r})})]})})});Z8.displayName=rh;var X8="TooltipArrow",J8=R.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=xw(n);return EX(X8,n).isInside?null:y.jsx(ww,{...a,...r,ref:t})});J8.displayName=X8;function kX(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function AX(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function TX(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function RX(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,p=u.y;f>r!=p>r&&n<(h-c)*(r-f)/(p-f)+c&&(a=!a)}return a}function NX(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),IX(t)}function IX(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var OX=V8,DX=G8,jX=W8,MX=K8,PX=Z8,FX=J8;function Sn({delayDuration:e=0,...t}){return y.jsx(OX,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function kn({...e}){return y.jsx(Sn,{children:y.jsx(DX,{"data-slot":"tooltip",...e})})}function An({...e}){return y.jsx(jX,{"data-slot":"tooltip-trigger",...e})}function Tn({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(MX,{children:y.jsxs(PX,{"data-slot":"tooltip-content",sideOffset:t,className:$t("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx(FX,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const LN={};function LX(e){let t=LN[e];if(t)return t;t=LN[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function ah(e,t){typeof t!="string"&&(t=ah.defaultChars);const n=LX(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const u=parseInt(r.slice(i+4,i+6),16);if((u&192)===128){const c=s<<6&1984|u&63;c<128?a+="":a+=String.fromCharCode(c),i+=3;continue}}if((s&240)===224&&i+6<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const f=s<<12&61440|u<<6&4032|c&63;f<2048||f>=55296&&f<=57343?a+="":a+=String.fromCharCode(f),i+=6;continue}}if((s&248)===240&&i+9<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),f=parseInt(r.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(f&192)===128){let h=s<<18&1835008|u<<12&258048|c<<6&4032|f&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}ah.defaultChars=";/?:@&=+$,#";ah.componentChars="";const $N={};function $X(e){let t=$N[e];if(t)return t;t=$N[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function L0(e,t,n){typeof t!="string"&&(n=t,t=L0.defaultChars),typeof n>"u"&&(n=!0);const r=$X(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const u=e.charCodeAt(i+1);if(u>=56320&&u<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}L0.defaultChars=";/?:@&=+$,-_.!~*'()#";L0.componentChars="-_.!~*'()";function KC(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function dv(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const BX=/^([a-z0-9.+-]+:)/i,zX=/:[0-9]*$/,UX=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,qX=["<",">",'"',"`"," ","\r",`
`,"	"],HX=["{","}","|","\\","^","`"].concat(qX),VX=["'"].concat(HX),BN=["%","/","?",";","#"].concat(VX),zN=["/","?","#"],GX=255,UN=/^[+a-z0-9A-Z_-]{0,63}$/,WX=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,qN={javascript:!0,"javascript:":!0},HN={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ZC(e,t){if(e&&e instanceof dv)return e;const n=new dv;return n.parse(e,t),n}dv.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=UX.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=BX.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&qN[o])&&(i=i.substr(2),this.slashes=!0)),!qN[o]&&(a||o&&!HN[o])){let c=-1;for(let v=0;v<zN.length;v++)r=i.indexOf(zN[v]),r!==-1&&(c===-1||r<c)&&(c=r);let f,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(f=i.slice(0,h),i=i.slice(h+1),this.auth=f),c=-1;for(let v=0;v<BN.length;v++)r=i.indexOf(BN[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const p=i.slice(0,c);i=i.slice(c),this.parseHost(p),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let b=0,_=v.length;b<_;b++){const x=v[b];if(x&&!x.match(UN)){let S="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(UN)){const E=v.slice(0,b),C=v.slice(b+1),k=x.match(WX);k&&(E.push(k[1]),C.unshift(k[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>GX&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),HN[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};dv.prototype.parseHost=function(e){let t=zX.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const KX=Object.freeze(Object.defineProperty({__proto__:null,decode:ah,encode:L0,format:KC,parse:ZC},Symbol.toStringTag,{value:"Module"})),Q8=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,eM=/[\0-\x1F\x7F-\x9F]/,ZX=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,YC=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,tM=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,nM=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,YX=Object.freeze(Object.defineProperty({__proto__:null,Any:Q8,Cc:eM,Cf:ZX,P:YC,S:tM,Z:nM},Symbol.toStringTag,{value:"Module"})),XX=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),JX=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Gx;const QX=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),eJ=(Gx=String.fromCodePoint)!==null&&Gx!==void 0?Gx:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function tJ(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=QX.get(e))!==null&&t!==void 0?t:e}var Ra;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ra||(Ra={}));const nJ=32;var Pu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Pu||(Pu={}));function CE(e){return e>=Ra.ZERO&&e<=Ra.NINE}function rJ(e){return e>=Ra.UPPER_A&&e<=Ra.UPPER_F||e>=Ra.LOWER_A&&e<=Ra.LOWER_F}function aJ(e){return e>=Ra.UPPER_A&&e<=Ra.UPPER_Z||e>=Ra.LOWER_A&&e<=Ra.LOWER_Z||CE(e)}function iJ(e){return e===Ra.EQUALS||aJ(e)}var Ca;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ca||(Ca={}));var Mu;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Mu||(Mu={}));class oJ{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ca.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Mu.Strict}startEntity(t){this.decodeMode=t,this.state=Ca.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ca.EntityStart:return t.charCodeAt(n)===Ra.NUM?(this.state=Ca.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ca.NamedEntity,this.stateNamedEntity(t,n));case Ca.NumericStart:return this.stateNumericStart(t,n);case Ca.NumericDecimal:return this.stateNumericDecimal(t,n);case Ca.NumericHex:return this.stateNumericHex(t,n);case Ca.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|nJ)===Ra.LOWER_X?(this.state=Ca.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ca.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(CE(a)||rJ(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(CE(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ra.SEMI)this.consumed+=1;else if(this.decodeMode===Mu.Strict)return 0;return this.emitCodePoint(tJ(this.result),this.consumed),this.errors&&(t!==Ra.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Pu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=sJ(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Mu.Attribute&&(i===0||iJ(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Pu.VALUE_LENGTH)>>14,i!==0){if(o===Ra.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Mu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Pu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Pu.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Ca.NamedEntity:return this.result!==0&&(this.decodeMode!==Mu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ca.NumericDecimal:return this.emitNumericEntity(0,2);case Ca.NumericHex:return this.emitNumericEntity(0,3);case Ca.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ca.EntityStart:return 0}}}function rM(e){let t="";const n=new oJ(e,r=>t+=eJ(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const c=n.write(a,s+1);if(c<0){o=s+n.end();break}o=s+c,s=c===0?o+1:o}const u=t+a.slice(o);return t="",u}}function sJ(e,t,n,r){const a=(t&Pu.BRANCH_LENGTH)>>7,i=t&Pu.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=a?-1:e[n+u]-1}let o=n,s=o+a-1;for(;o<=s;){const u=o+s>>>1,c=e[u];if(c<r)o=u+1;else if(c>r)s=u-1;else return e[u+a]}return-1}const lJ=rM(XX);rM(JX);function aM(e,t=Mu.Legacy){return lJ(e,t)}function uJ(e){return Object.prototype.toString.call(e)}function XC(e){return uJ(e)==="[object String]"}const cJ=Object.prototype.hasOwnProperty;function dJ(e,t){return cJ.call(e,t)}function Sw(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function iM(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function JC(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function fv(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const oM=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,fJ=/&([a-z#][a-z0-9]{1,31});/gi,hJ=new RegExp(oM.source+"|"+fJ.source,"gi"),pJ=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function mJ(e,t){if(t.charCodeAt(0)===35&&pJ.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return JC(r)?fv(r):e}const n=aM(e);return n!==e?n:e}function gJ(e){return e.indexOf("\\")<0?e:e.replace(oM,"$1")}function ih(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(hJ,function(t,n,r){return n||mJ(t,r)})}const yJ=/[&<>"]/,bJ=/[&<>"]/g,vJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function wJ(e){return vJ[e]}function Qu(e){return yJ.test(e)?e.replace(bJ,wJ):e}const _J=/[.?*+^$[\]\\(){}|-]/g;function xJ(e){return e.replace(_J,"\\$&")}function Nr(e){switch(e){case 9:case 32:return!0}return!1}function Wm(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Km(e){return YC.test(e)||tM.test(e)}function Zm(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Ew(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const SJ={mdurl:KX,ucmicro:YX},EJ=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:iM,assign:Sw,escapeHtml:Qu,escapeRE:xJ,fromCodePoint:fv,has:dJ,isMdAsciiPunct:Zm,isPunctChar:Km,isSpace:Nr,isString:XC,isValidEntityCode:JC,isWhiteSpace:Wm,lib:SJ,normalizeReference:Ew,unescapeAll:ih,unescapeMd:gJ},Symbol.toStringTag,{value:"Module"}));function CJ(e,t,n){let r,a,i,o;const s=e.posMax,u=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=u,-1}}let c=-1;return a&&(c=e.pos),e.pos=u,c}function kJ(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=ih(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=ih(e.slice(t,a)),i.pos=a,i.ok=!0),i}function AJ(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=ih(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=ih(e.slice(t,i)),o}const TJ=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:kJ,parseLinkLabel:CJ,parseLinkTitle:AJ},Symbol.toStringTag,{value:"Module"})),qs={};qs.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Qu(i.content)+"</code>"};qs.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Qu(e[t].content)+`</code></pre>
`};qs.fence=function(e,t,n,r,a){const i=e[t],o=i.info?ih(i.info).trim():"";let s="",u="";if(o){const f=o.split(/(\s+)/g);s=f[0],u=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,s,u)||Qu(i.content):c=Qu(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];f<0?h.push(["class",n.langPrefix+s]):(h[f]=h[f].slice(),h[f][1]+=" "+n.langPrefix+s);const p={attrs:h};return`<pre><code${a.renderAttrs(p)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${c}</code></pre>
`};qs.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};qs.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};qs.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};qs.text=function(e,t){return Qu(e[t].content)};qs.html_block=function(e,t){return e[t].content};qs.html_inline=function(e,t){return e[t].content};function Ah(){this.rules=Sw({},qs)}Ah.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Qu(t.attrs[n][0])+'="'+Qu(t.attrs[n][1])+'"';return a};Ah.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};Ah.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};Ah.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Ah.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Ti(){this.__rules__=[],this.__cache__=null}Ti.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ti.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ti.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Ti.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ti.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ti.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ti.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ti.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function es(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}es.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};es.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};es.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};es.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};es.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function sM(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}sM.prototype.Token=es;const RJ=/\r\n?|\n/g,NJ=/\0/g;function IJ(e){let t;t=e.src.replace(RJ,`
`),t=t.replace(NJ,""),e.src=t}function OJ(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function DJ(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function jJ(e){return/^<a[>\s]/i.test(e)}function MJ(e){return/^<\/a\s*>/i.test(e)}function PJ(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(jJ(s.content)&&i>0&&i--,MJ(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const u=s.content;let c=e.md.linkify.match(u);const f=[];let h=s.level,p=0;c.length>0&&c[0].index===0&&o>0&&a[o-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const v=c[g].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let _=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const x=c[g].index;if(x>p){const k=new e.Token("text","",0);k.content=u.slice(p,x),k.level=h,f.push(k)}const S=new e.Token("link_open","a",1);S.attrs=[["href",b]],S.level=h++,S.markup="linkify",S.info="auto",f.push(S);const E=new e.Token("text","",0);E.content=_,E.level=h,f.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",f.push(C),p=c[g].lastIndex}if(p<u.length){const g=new e.Token("text","",0);g.content=u.slice(p),g.level=h,f.push(g)}t[n].children=a=iM(a,o,f)}}}}const lM=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,FJ=/\((c|tm|r)\)/i,LJ=/\((c|tm|r)\)/ig,$J={c:"",r:"",tm:""};function BJ(e,t){return $J[t.toLowerCase()]}function zJ(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(LJ,BJ)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function UJ(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&lM.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function qJ(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(FJ.test(e.tokens[t].content)&&zJ(e.tokens[t].children),lM.test(e.tokens[t].content)&&UJ(e.tokens[t].children))}const HJ=/['"]/,VN=/['"]/g,GN="";function Wy(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function VJ(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,u=0,c=s.length;e:for(;u<c;){VN.lastIndex=u;const f=VN.exec(s);if(!f)break;let h=!0,p=!0;u=f.index+1;const g=f[0]==="'";let v=32;if(f.index-1>=0)v=s.charCodeAt(f.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(u<c)b=s.charCodeAt(u);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const _=Zm(v)||Km(String.fromCharCode(v)),x=Zm(b)||Km(String.fromCharCode(b)),S=Wm(v),E=Wm(b);if(E?h=!1:x&&(S||_||(h=!1)),S?p=!1:_&&(E||x||(p=!1)),b===34&&f[0]==='"'&&v>=48&&v<=57&&(p=h=!1),h&&p&&(h=_,p=x),!h&&!p){g&&(i.content=Wy(i.content,f.index,GN));continue}if(p)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<o)break;if(C.single===g&&r[n].level===o){C=r[n];let k,D;g?(k=t.md.options.quotes[2],D=t.md.options.quotes[3]):(k=t.md.options.quotes[0],D=t.md.options.quotes[1]),i.content=Wy(i.content,f.index,D),e[C.token].content=Wy(e[C.token].content,C.pos,k),u+=D.length-1,C.token===a&&(u+=k.length-1),s=i.content,c=s.length,r.length=n;continue e}}h?r.push({token:a,pos:f.index,single:g,level:o}):p&&g&&(i.content=Wy(i.content,f.index,GN))}}}function GJ(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!HJ.test(e.tokens[t].content)||VJ(e.tokens[t].children,e)}function WJ(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const Wx=[["normalize",IJ],["block",OJ],["inline",DJ],["linkify",PJ],["replacements",qJ],["smartquotes",GJ],["text_join",WJ]];function QC(){this.ruler=new Ti;for(let e=0;e<Wx.length;e++)this.ruler.push(Wx[e][0],Wx[e][1])}QC.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};QC.prototype.State=sM;function Hs(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,u=0,c=a.length,f=!1;o<c;o++){const h=a.charCodeAt(o);if(!f)if(Nr(h)){s++,h===9?u+=4-u%4:u++;continue}else f=!0;(h===10||o===c-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(u),this.bsCount.push(0),f=!1,s=0,u=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Hs.prototype.push=function(e,t,n){const r=new es(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Hs.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Hs.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Hs.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Nr(r))break}return t};Hs.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Nr(this.src.charCodeAt(--t)))return t+1;return t};Hs.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Hs.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Hs.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let u=0;const c=this.bMarks[s];let f=c,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];f<h&&u<r;){const p=this.src.charCodeAt(f);if(Nr(p))p===9?u+=4-(u+this.bsCount[s])%4:u++;else if(f-c<this.tShift[s])u++;else break;f++}u>r?i[o]=new Array(u-r+1).join(" ")+this.src.slice(f,h):i[o]=this.src.slice(f,h)}return i.join("")};Hs.prototype.Token=es;const KJ=65536;function Kx(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function WN(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function ZJ(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!Nr(s)||o===45&&Nr(s))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Nr(C))return!1;i++}let u=Kx(e,t+1),c=u.split("|");const f=[];for(let C=0;C<c.length;C++){const k=c[C].trim();if(!k){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?f.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?f.push("left"):f.push("")}if(u=Kx(e,t).trim(),u.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=WN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==f.length)return!1;if(r)return!0;const p=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<c.length;C++){const k=e.push("th_open","th",1);f[C]&&(k.attrs=[["style","text-align:"+f[C]]]);const D=e.push("inline","",0);D.content=c[C].trim(),D.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let D=0,O=g.length;D<O;D++)if(g[D](e,a,n,!0)){C=!0;break}if(C||(u=Kx(e,a).trim(),!u)||e.sCount[a]-e.blkIndent>=4||(c=WN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>KJ))break;if(a===t+2){const D=e.push("tbody_open","tbody",1);D.map=S=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let D=0;D<h;D++){const O=e.push("td_open","td",1);f[D]&&(O.attrs=[["style","text-align:"+f[D]]]);const N=e.push("inline","",0);N.content=c[D]?c[D].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=p,e.line=a,!0}function YJ(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function XJ(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let u=a-s;if(u<3)return!1;const c=e.src.slice(s,a),f=e.src.slice(a,i);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,p=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<u)&&(a=e.skipSpaces(a),!(a<i)))){p=!0;break}u=e.sCount[t],e.line=h+(p?1:0);const g=e.push("fence","code",0);return g.info=f,g.content=e.getLines(t+1,h,u,!0),g.markup=c,g.map=[t,e.line],!0}function JJ(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],u=[],c=[],f=[],h=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,D,O;e.src.charCodeAt(a)===32?(a++,k++,O=!1,D=!0):e.src.charCodeAt(a)===9?(D=!0,(e.bsCount[v]+k)%4===3?(a++,k++,O=!1):O=!0):D=!1;let N=k;for(s.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const z=e.src.charCodeAt(a);if(Nr(z))z===9?N+=4-(N+e.bsCount[v]+(O?1:0))%4:N++;else break;a++}g=a>=i,u.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(D?1:0),c.push(e.sCount[v]),e.sCount[v]=N-k,f.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let C=!1;for(let k=0,D=h.length;k<D;k++)if(h[k](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const x=[t,0];_.map=x,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=o,e.parentType=p,x[1]=e.line;for(let E=0;E<f.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=f[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=u[E];return e.blkIndent=b,!0}function QJ(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const c=e.src.charCodeAt(i++);if(c!==o&&!Nr(c))return!1;c===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const u=e.push("hr","hr",0);return u.map=[t,e.line],u.markup=Array(s+1).join(String.fromCharCode(o)),!0}function KN(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Nr(i))return-1}return r}function ZN(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Nr(i))?-1:a}function eQ(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function tQ(e,t,n,r){let a,i,o,s,u=t,c=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[u]>=e.blkIndent&&(f=!0);let h,p,g;if((g=ZN(e,u))>=0){if(h=!0,o=e.bMarks[u]+e.tShift[u],p=Number(e.src.slice(o,g-1)),f&&p!==1)return!1}else if((g=KN(e,u))>=0)h=!1;else return!1;if(f&&e.skipSpaces(g)>=e.eMarks[u])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),b=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),p!==1&&(s.attrs=[["start",p]])):s=e.push("bullet_list_open","ul",1);const _=[u,0];s.map=_,s.markup=String.fromCharCode(v);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";u<n;){i=g,a=e.eMarks[u];const C=e.sCount[u]+g-(e.bMarks[u]+e.tShift[u]);let k=C;for(;i<a;){const de=e.src.charCodeAt(i);if(de===9)k+=4-(k+e.bsCount[u])%4;else if(de===32)k++;else break;i++}const D=i;let O;D>=a?O=1:O=k-C,O>4&&(O=1);const N=C+O;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(v);const z=[u,0];s.map=z,h&&(s.info=e.src.slice(o,g-1));const H=e.tight,X=e.tShift[u],F=e.sCount[u],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[u]=D-e.bMarks[u],e.sCount[u]=k,D>=a&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,u,n,!0),(!e.tight||x)&&(c=!1),x=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[u]=X,e.sCount[u]=F,e.tight=H,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(v),u=e.line,z[1]=u,u>=n||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let L=!1;for(let de=0,ae=S.length;de<ae;de++)if(S[de](e,u,n,!0)){L=!0;break}if(L)break;if(h){if(g=ZN(e,u),g<0)break;o=e.bMarks[u]+e.tShift[u]}else if(g=KN(e,u),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(v),_[1]=u,e.line=u,e.parentType=E,c&&eQ(e,b),!0}function nQ(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const O=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let z=!1;for(let H=0,X=O.length;H<X;H++)if(O[H](e,S,E,!0)){z=!0;break}if(e.parentType=N,z)return null}const k=e.bMarks[S]+e.tShift[S],D=e.eMarks[S];return e.src.slice(k,D+1)}let u=e.src.slice(a,i+1);i=u.length;let c=-1;for(a=1;a<i;a++){const S=u.charCodeAt(a);if(S===91)return!1;if(S===93){c=a;break}else if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(S===92&&(a++,a<i&&u.charCodeAt(a)===10)){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Nr(S))break}const f=e.md.helpers.parseLinkDestination(u,a,i);if(!f.ok)return!1;const h=e.md.normalizeLink(f.str);if(!e.md.validateLink(h))return!1;a=f.pos;const p=a,g=o,v=a;for(;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Nr(S))break}let b=e.md.helpers.parseLinkTitle(u,a,i);for(;b.can_continue;){const S=s(o);if(S===null)break;u+=S,a=i,i=u.length,o++,b=e.md.helpers.parseLinkTitle(u,a,i,b)}let _;for(a<i&&v!==a&&b.ok?(_=b.str,a=b.pos):(_="",a=p,o=g);a<i;){const S=u.charCodeAt(a);if(!Nr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10&&_)for(_="",a=p,o=g;a<i;){const S=u.charCodeAt(a);if(!Nr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10)return!1;const x=Ew(u.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:_,href:h}),e.line=o),!0):!1}const rQ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],aQ="[a-zA-Z_:][a-zA-Z0-9:._-]*",iQ="[^\"'=<>`\\x00-\\x20]+",oQ="'[^']*'",sQ='"[^"]*"',lQ="(?:"+iQ+"|"+oQ+"|"+sQ+")",uQ="(?:\\s+"+aQ+"(?:\\s*=\\s*"+lQ+")?)",uM="<[A-Za-z][A-Za-z0-9\\-]*"+uQ+"*\\s*\\/?>",cM="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",cQ="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",dQ="<[?][\\s\\S]*?[?]>",fQ="<![A-Za-z][^>]*>",hQ="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",pQ=new RegExp("^(?:"+uM+"|"+cM+"|"+cQ+"|"+dQ+"|"+fQ+"|"+hQ+")"),mQ=new RegExp("^(?:"+uM+"|"+cM+")"),Cf=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+rQ.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(mQ.source+"\\s*$"),/^$/,!1]];function gQ(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<Cf.length&&!Cf[s][0].test(o);s++);if(s===Cf.length)return!1;if(r)return Cf[s][2];let u=t+1;if(!Cf[s][1].test(o)){for(;u<n&&!(e.sCount[u]<e.blkIndent);u++)if(a=e.bMarks[u]+e.tShift[u],i=e.eMarks[u],o=e.src.slice(a,i),Cf[s][1].test(o)){o.length!==0&&u++;break}}e.line=u;const c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}function yQ(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!Nr(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const u=e.skipCharsBack(i,35,a);u>a&&Nr(e.src.charCodeAt(u-1))&&(i=u),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(a,i).trim(),f.map=[t,e.line],f.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function bQ(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const v=e.eMarks[s];if(g<v&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=v))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let p=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,s,n,!0)){p=!0;break}if(p)break}if(!i)return!1;const u=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=u,f.map=[t,e.line-1],f.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function vQ(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](e,i,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const u=e.push("inline","",0);return u.content=o,u.map=[t,e.line],u.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const Ky=[["table",ZJ,["paragraph","reference"]],["code",YJ],["fence",XJ,["paragraph","reference","blockquote","list"]],["blockquote",JJ,["paragraph","reference","blockquote","list"]],["hr",QJ,["paragraph","reference","blockquote","list"]],["list",tQ,["paragraph","reference","blockquote"]],["reference",nQ],["html_block",gQ,["paragraph","reference","blockquote"]],["heading",yQ,["paragraph","reference","blockquote"]],["lheading",bQ],["paragraph",vQ]];function Cw(){this.ruler=new Ti;for(let e=0;e<Ky.length;e++)this.ruler.push(Ky[e][0],Ky[e][1],{alt:(Ky[e][2]||[]).slice()})}Cw.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const u=e.line;let c=!1;for(let f=0;f<a;f++)if(c=r[f](e,o,n,!1),c){if(u>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};Cw.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};Cw.prototype.State=Hs;function $0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}$0.prototype.pushPending=function(){const e=new es("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};$0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new es(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};$0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,u=Zm(a)||Km(String.fromCharCode(a)),c=Zm(s)||Km(String.fromCharCode(s)),f=Wm(a),h=Wm(s),p=!h&&(!c||f||u),g=!f&&(!u||h||c);return{can_open:p&&(t||!g||u),can_close:g&&(t||!p||c),length:o}};$0.prototype.Token=es;function wQ(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function _Q(e,t){let n=e.pos;for(;n<e.posMax&&!wQ(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const xQ=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function SQ(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(xQ);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const u=e.md.normalizeLink(s);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function EQ(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Nr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const ek=[];for(let e=0;e<256;e++)ek.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){ek[e.charCodeAt(0)]=1});function CQ(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Nr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&ek[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function kQ(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let u=n,c;for(;(c=e.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&e.src.charCodeAt(u)===96;)u++;const f=u-c;if(f===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=u,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function AQ(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let u=0;u<i;u+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function YN(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function TQ(e){const t=e.tokens_meta,n=e.tokens_meta.length;YN(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&YN(e,t[r].delimiters)}const dM={tokenize:AQ,postProcess:TQ};function RQ(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function XN(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),u=e.tokens[a.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?s+s:s,u.content="";const c=e.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?s+s:s,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function NQ(e){const t=e.tokens_meta,n=e.tokens_meta.length;XN(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&XN(e,t[r].delimiters)}const fM={tokenize:RQ,postProcess:NQ};function IQ(e,t){let n,r,a,i,o="",s="",u=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,h=e.posMax,p=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(c=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Nr(n)&&n!==10));v++);if(v>=h)return!1;if(u=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?v=a.pos:o="",u=v;v<h&&(n=e.src.charCodeAt(v),!(!Nr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&u!==v&&a.ok)for(s=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Nr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(u=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(u,v++):v=g+1):v=g+1,r||(r=e.src.slice(p,g)),i=e.env.references[Ew(r)],!i)return e.pos=f,!1;o=i.href,s=i.title}if(!t){e.pos=p,e.posMax=g;const b=e.push("link_open","a",1),_=[["href",o]];b.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function OQ(e,t){let n,r,a,i,o,s,u,c,f="";const h=e.pos,p=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<p&&e.src.charCodeAt(i)===40){for(i++;i<p&&(n=e.src.charCodeAt(i),!(!Nr(n)&&n!==10));i++);if(i>=p)return!1;for(c=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(f=e.md.normalizeLink(s.str),e.md.validateLink(f)?i=s.pos:f=""),c=i;i<p&&(n=e.src.charCodeAt(i),!(!Nr(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<p&&c!==i&&s.ok)for(u=s.str,i=s.pos;i<p&&(n=e.src.charCodeAt(i),!(!Nr(n)&&n!==10));i++);else u="";if(i>=p||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<p&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(c,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),o=e.env.references[Ew(a)],!o)return e.pos=h,!1;f=o.href,u=o.title}if(!t){r=e.src.slice(g,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const _=e.push("image","img",0),x=[["src",f],["alt",""]];_.attrs=x,_.children=b,_.content=r,u&&x.push(["title",u])}return e.pos=i,e.posMax=p,!0}const DQ=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,jQ=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function MQ(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(jQ.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(DQ.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function PQ(e){return/^<a[>\s]/i.test(e)}function FQ(e){return/^<\/a\s*>/i.test(e)}function LQ(e){const t=e|32;return t>=97&&t<=122}function $Q(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!LQ(a))return!1;const i=e.src.slice(r).match(pQ);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],PQ(o.content)&&e.linkLevel++,FQ(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const BQ=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,zQ=/^&([a-z][a-z0-9]{1,31});/i;function UQ(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(BQ);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=JC(o)?fv(o):fv(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(zQ);if(i){const o=aM(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function JN(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[s.marker][(s.open?3:0)+s.length%3];let c=r-i[r]-1,f=c;for(;c>u;c-=i[c]+1){const h=e[c];if(h.marker===s.marker&&h.open&&h.end<0){let p=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(p=!0),!p){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[o]=o-c+g,i[c]=g,s.open=!1,h.end=o,h.close=!1,f=-1,a=-2;break}}}f!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=f)}}function qQ(e){const t=e.tokens_meta,n=e.tokens_meta.length;JN(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&JN(t[r].delimiters)}function HQ(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const Zx=[["text",_Q],["linkify",SQ],["newline",EQ],["escape",CQ],["backticks",kQ],["strikethrough",dM.tokenize],["emphasis",fM.tokenize],["link",IQ],["image",OQ],["autolink",MQ],["html_inline",$Q],["entity",UQ]],Yx=[["balance_pairs",qQ],["strikethrough",dM.postProcess],["emphasis",fM.postProcess],["fragments_join",HQ]];function B0(){this.ruler=new Ti;for(let e=0;e<Zx.length;e++)this.ruler.push(Zx[e][0],Zx[e][1]);this.ruler2=new Ti;for(let e=0;e<Yx.length;e++)this.ruler2.push(Yx[e][0],Yx[e][1])}B0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};B0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};B0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};B0.prototype.State=$0;function VQ(e){const t={};e=e||{},t.src_Any=Q8.source,t.src_Cc=eM.source,t.src_Z=nM.source,t.src_P=YC.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function kE(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function kw(e){return Object.prototype.toString.call(e)}function GQ(e){return kw(e)==="[object String]"}function WQ(e){return kw(e)==="[object Object]"}function KQ(e){return kw(e)==="[object RegExp]"}function QN(e){return kw(e)==="[object Function]"}function ZQ(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const hM={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function YQ(e){return Object.keys(e||{}).reduce(function(t,n){return t||hM.hasOwnProperty(n)},!1)}const XQ={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},JQ="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",QQ="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function eee(e){e.__index__=-1,e.__text_cache__=""}function tee(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function eI(){return function(e,t){t.normalize(e)}}function hv(e){const t=e.re=VQ(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(JQ),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,u){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+u)}Object.keys(e.__schemas__).forEach(function(s){const u=e.__schemas__[s];if(u===null)return;const c={validate:null,link:null};if(e.__compiled__[s]=c,WQ(u)){KQ(u.validate)?c.validate=tee(u.validate):QN(u.validate)?c.validate=u.validate:i(s,u),QN(u.normalize)?c.normalize=u.normalize:u.normalize?i(s,u):c.normalize=eI();return}if(GQ(u)){a.push(s);return}i(s,u)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:eI()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(ZQ).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),eee(e)}function nee(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function AE(e,t){const n=new nee(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Xi(e,t){if(!(this instanceof Xi))return new Xi(e,t);t||YQ(e)&&(t=e,e={}),this.__opts__=kE({},hM,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=kE({},XQ,e),this.__compiled__={},this.__tlds__=QQ,this.__tlds_replaced__=!1,this.re={},hv(this)}Xi.prototype.add=function(t,n){return this.__schemas__[t]=n,hv(this),this};Xi.prototype.set=function(t){return this.__opts__=kE(this.__opts__,t),this};Xi.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,u,c,f;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],u.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};Xi.prototype.pretest=function(t){return this.re.pretest.test(t)};Xi.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Xi.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(AE(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(AE(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Xi.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,AE(this,0)):null};Xi.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),hv(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,hv(this),this)};Xi.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Xi.prototype.onCompile=function(){};const Hf=2147483647,Is=36,tk=1,Ym=26,ree=38,aee=700,pM=72,mM=128,gM="-",iee=/^xn--/,oee=/[^\0-\x7F]/,see=/[\x2E\u3002\uFF0E\uFF61]/g,lee={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Xx=Is-tk,Os=Math.floor,Jx=String.fromCharCode;function Du(e){throw new RangeError(lee[e])}function uee(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function yM(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(see,".");const a=e.split("."),i=uee(a,t).join(".");return r+i}function bM(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const cee=e=>String.fromCodePoint(...e),dee=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Is},tI=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},vM=function(e,t,n){let r=0;for(e=n?Os(e/aee):e>>1,e+=Os(e/t);e>Xx*Ym>>1;r+=Is)e=Os(e/Xx);return Os(r+(Xx+1)*e/(e+ree))},wM=function(e){const t=[],n=e.length;let r=0,a=mM,i=pM,o=e.lastIndexOf(gM);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&Du("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const u=r;for(let f=1,h=Is;;h+=Is){s>=n&&Du("invalid-input");const p=dee(e.charCodeAt(s++));p>=Is&&Du("invalid-input"),p>Os((Hf-r)/f)&&Du("overflow"),r+=p*f;const g=h<=i?tk:h>=i+Ym?Ym:h-i;if(p<g)break;const v=Is-g;f>Os(Hf/v)&&Du("overflow"),f*=v}const c=t.length+1;i=vM(r-u,c,u==0),Os(r/c)>Hf-a&&Du("overflow"),a+=Os(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},_M=function(e){const t=[];e=bM(e);const n=e.length;let r=mM,a=0,i=pM;for(const u of e)u<128&&t.push(Jx(u));const o=t.length;let s=o;for(o&&t.push(gM);s<n;){let u=Hf;for(const f of e)f>=r&&f<u&&(u=f);const c=s+1;u-r>Os((Hf-a)/c)&&Du("overflow"),a+=(u-r)*c,r=u;for(const f of e)if(f<r&&++a>Hf&&Du("overflow"),f===r){let h=a;for(let p=Is;;p+=Is){const g=p<=i?tk:p>=i+Ym?Ym:p-i;if(h<g)break;const v=h-g,b=Is-g;t.push(Jx(tI(g+v%b,0))),h=Os(v/b)}t.push(Jx(tI(h,0))),i=vM(a,c,s===o),a=0,++s}++a,++r}return t.join("")},fee=function(e){return yM(e,function(t){return iee.test(t)?wM(t.slice(4).toLowerCase()):t})},hee=function(e){return yM(e,function(t){return oee.test(t)?"xn--"+_M(t):t})},xM={version:"2.3.1",ucs2:{decode:bM,encode:cee},decode:wM,encode:_M,toASCII:hee,toUnicode:fee},pee={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},mee={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},gee={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},yee={default:pee,zero:mee,commonmark:gee},bee=/^(vbscript|javascript|file|data):/,vee=/^data:image\/(gif|png|jpeg|webp);/;function wee(e){const t=e.trim().toLowerCase();return bee.test(t)?vee.test(t):!0}const SM=["http:","https:","mailto:"];function _ee(e){const t=ZC(e,!0);if(t.hostname&&(!t.protocol||SM.indexOf(t.protocol)>=0))try{t.hostname=xM.toASCII(t.hostname)}catch{}return L0(KC(t))}function xee(e){const t=ZC(e,!0);if(t.hostname&&(!t.protocol||SM.indexOf(t.protocol)>=0))try{t.hostname=xM.toUnicode(t.hostname)}catch{}return ah(KC(t),ah.defaultChars+"%")}function So(e,t){if(!(this instanceof So))return new So(e,t);t||XC(e)||(t=e||{},e="default"),this.inline=new B0,this.block=new Cw,this.core=new QC,this.renderer=new Ah,this.linkify=new Xi,this.validateLink=wee,this.normalizeLink=_ee,this.normalizeLinkText=xee,this.utils=EJ,this.helpers=Sw({},TJ),this.options={},this.configure(e),t&&this.set(t)}So.prototype.set=function(e){return Sw(this.options,e),this};So.prototype.configure=function(e){const t=this;if(XC(e)){const n=e;if(e=yee[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};So.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};So.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};So.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};So.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};So.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};So.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};So.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const Qx=new So({html:!1,linkify:!0,breaks:!0});function nk(e){return R.useMemo(()=>{var n;if(!e)return[];try{const r=Qx.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const u=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:u,code:s.content}),o++}else{const u=[];for(;o<r.length&&r[o].type!=="fence";)u.push(r[o]),o++;u.length>0&&(i+=Qx.renderer.render(u,Qx.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}var eS={exports:{}},nI;function See(){return nI||(nI=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof u?new u(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var k,D;switch(s.util.type(E)){case"Object":if(D=s.util.objId(E),C[D])return C[D];k={},C[D]=k;for(var O in E)E.hasOwnProperty(O)&&(k[O]=S(E[O],C));return k;case"Array":return D=s.util.objId(E),C[D]?C[D]:(k=[],C[D]=k,E.forEach(function(N,z){k[z]=S(N,C)}),k);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var k="no-"+E;S;){var D=S.classList;if(D.contains(E))return!0;if(D.contains(k))return!1;S=S.parentElement}return!!C}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(S,E){var C=s.util.clone(s.languages[S]);for(var k in E)C[k]=E[k];return C},insertBefore:function(S,E,C,k){k=k||s.languages;var D=k[S],O={};for(var N in D)if(D.hasOwnProperty(N)){if(N==E)for(var z in C)C.hasOwnProperty(z)&&(O[z]=C[z]);C.hasOwnProperty(N)||(O[N]=D[N])}var H=k[S];return k[S]=O,s.languages.DFS(s.languages,function(X,F){F===H&&X!=S&&(this[X]=O)}),O},DFS:function S(E,C,k,D){D=D||{};var O=s.util.objId;for(var N in E)if(E.hasOwnProperty(N)){C.call(E,N,E[N],k||N);var z=E[N],H=s.util.type(z);H==="Object"&&!D[O(z)]?(D[O(z)]=!0,S(z,C,null,D)):H==="Array"&&!D[O(z)]&&(D[O(z)]=!0,S(z,C,N,D))}}},plugins:{},highlightAll:function(S,E){s.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var k={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),s.hooks.run("before-all-elements-highlight",k);for(var D=0,O;O=k.elements[D++];)s.highlightElement(O,E===!0,k.callback)},highlightElement:function(S,E,C){var k=s.util.getLanguage(S),D=s.languages[k];s.util.setLanguage(S,k);var O=S.parentElement;O&&O.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(O,k);var N=S.textContent,z={element:S,language:k,grammar:D,code:N};function H(F){z.highlightedCode=F,s.hooks.run("before-insert",z),z.element.innerHTML=z.highlightedCode,s.hooks.run("after-highlight",z),s.hooks.run("complete",z),C&&C.call(z.element)}if(s.hooks.run("before-sanity-check",z),O=z.element.parentElement,O&&O.nodeName.toLowerCase()==="pre"&&!O.hasAttribute("tabindex")&&O.setAttribute("tabindex","0"),!z.code){s.hooks.run("complete",z),C&&C.call(z.element);return}if(s.hooks.run("before-highlight",z),!z.grammar){H(s.util.encode(z.code));return}if(E&&r.Worker){var X=new Worker(s.filename);X.onmessage=function(F){H(F.data)},X.postMessage(JSON.stringify({language:z.language,code:z.code,immediateClose:!0}))}else H(s.highlight(z.code,z.grammar,z.language))},highlight:function(S,E,C){var k={code:S,grammar:E,language:C};if(s.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=s.tokenize(k.code,k.grammar),s.hooks.run("after-tokenize",k),u.stringify(s.util.encode(k.tokens),k.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var k in C)E[k]=C[k];delete E.rest}var D=new h;return p(D,D.head,S),f(S,D,E,D.head,0),v(D)},hooks:{all:{},add:function(S,E){var C=s.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=s.hooks.all[S];if(!(!C||!C.length))for(var k=0,D;D=C[k++];)D(E)}},Token:u};r.Prism=s;function u(S,E,C,k){this.type=S,this.content=E,this.alias=C,this.length=(k||"").length|0}u.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(H){k+=S(H,C)}),k}var D={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},O=E.alias;O&&(Array.isArray(O)?Array.prototype.push.apply(D.classes,O):D.classes.push(O)),s.hooks.run("wrap",D);var N="";for(var z in D.attributes)N+=" "+z+'="'+(D.attributes[z]||"").replace(/"/g,"&quot;")+'"';return"<"+D.tag+' class="'+D.classes.join(" ")+'"'+N+">"+D.content+"</"+D.tag+">"};function c(S,E,C,k){S.lastIndex=E;var D=S.exec(C);if(D&&k&&D[1]){var O=D[1].length;D.index+=O,D[0]=D[0].slice(O)}return D}function f(S,E,C,k,D,O){for(var N in C)if(!(!C.hasOwnProperty(N)||!C[N])){var z=C[N];z=Array.isArray(z)?z:[z];for(var H=0;H<z.length;++H){if(O&&O.cause==N+","+H)return;var X=z[H],F=X.inside,Z=!!X.lookbehind,L=!!X.greedy,de=X.alias;if(L&&!X.pattern.global){var ae=X.pattern.toString().match(/[imsuy]*$/)[0];X.pattern=RegExp(X.pattern.source,ae+"g")}for(var ne=X.pattern||X,ee=k.next,se=D;ee!==E.tail&&!(O&&se>=O.reach);se+=ee.value.length,ee=ee.next){var W=ee.value;if(E.length>S.length)return;if(!(W instanceof u)){var J=1,Y;if(L){if(Y=c(ne,se,S,Z),!Y||Y.index>=S.length)break;var Me=Y.index,re=Y.index+Y[0].length,be=se;for(be+=ee.value.length;Me>=be;)ee=ee.next,be+=ee.value.length;if(be-=ee.value.length,se=be,ee.value instanceof u)continue;for(var we=ee;we!==E.tail&&(be<re||typeof we.value=="string");we=we.next)J++,be+=we.value.length;J--,W=S.slice(se,be),Y.index-=se}else if(Y=c(ne,0,W,Z),!Y)continue;var Me=Y.index,Pe=Y[0],Ae=W.slice(0,Me),Te=W.slice(Me+Pe.length),qe=se+W.length;O&&qe>O.reach&&(O.reach=qe);var it=ee.prev;Ae&&(it=p(E,it,Ae),se+=Ae.length),g(E,it,J);var Ie=new u(N,F?s.tokenize(Pe,F):Pe,de,Pe);if(ee=p(E,it,Ie),Te&&p(E,ee,Te),J>1){var Re={cause:N+","+H,reach:qe};f(S,E,C,ee.prev,se,Re),O&&Re.reach>O.reach&&(O.reach=Re.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function p(S,E,C){var k=E.next,D={value:C,prev:E,next:k};return E.next=D,k.prev=D,S.length++,D}function g(S,E,C){for(var k=E.next,D=0;D<C&&k!==S.tail;D++)k=k.next;E.next=k,k.prev=E,S.length-=D}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,k=E.code,D=E.immediateClose;r.postMessage(s.highlight(k,s.languages[C],C)),D&&r.close()},!1)),s;var b=s.util.currentScript();b&&(s.filename=b.src,b.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof ed<"u"&&(ed.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,_){return" Error "+b+" while fetching file: "+_},i=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",c="loaded",f="failed",h="pre[data-src]:not(["+s+'="'+c+'"]):not(['+s+'="'+u+'"])';function p(b,_,x){var S=new XMLHttpRequest;S.open("GET",b,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?_(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function g(b){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(_){var x=Number(_[1]),S=_[2],E=_[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var _=b.element;if(_.matches(h)){b.code="",_.setAttribute(s,u);var x=_.appendChild(document.createElement("CODE"));x.textContent=r;var S=_.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=o[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(_,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),p(S,function(D){_.setAttribute(s,c);var O=g(_.getAttribute("data-range"));if(O){var N=D.split(/\r\n?|\n/g),z=O[0],H=O[1]==null?N.length:O[1];z<0&&(z+=N.length),z=Math.max(0,Math.min(z-1,N.length)),H<0&&(H+=N.length),H=Math.max(0,Math.min(H,N.length)),D=N.slice(z,H).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(z+1))}x.textContent=D,n.highlightElement(x)},function(D){_.setAttribute(s,f),x.textContent=D})}}),n.plugins.fileHighlight={highlight:function(_){for(var x=(_||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(eS)),eS.exports}var Eee=See();const Cee=ni(Eee);var rI={},aI;function kee(){return aI||(aI=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),rI}kee();var iI={},oI;function Aee(){return oI||(oI=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),iI}Aee();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(f){return f=f.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+f+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(f){["url","bold","italic","strike","code-snippet"].forEach(function(h){f!==h&&(e.languages.markdown[f].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(f){if(f.language!=="markdown"&&f.language!=="md")return;function h(p){if(!(!p||typeof p=="string"))for(var g=0,v=p.length;g<v;g++){var b=p[g];if(b.type!=="code"){h(b.content);continue}var _=b.content[1],x=b.content[3];if(_&&x&&_.type==="code-language"&&x.type==="code-block"&&typeof _.content=="string"){var S=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(f.tokens)}),e.hooks.add("wrap",function(f){if(f.type==="code-block"){for(var h="",p=0,g=f.classes.length;p<g;p++){var v=f.classes[p],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var _=e.languages[h];if(_)f.content=e.highlight(c(f.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);f.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(f){var h=f.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),u(v)}else{var b=s[g];return b||p}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,u){u=(u||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(c,u)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var sI={},lI;function Tee(){return lI||(lI=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),sI}Tee();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const Zy="system",uI="You are a helpful AI assistant.",cI=.7,dI=null,fI=null,hI=null,pI=0,mI=0,gI=!0,Yy=!0,Xy=30,Jy=10,yI=null,bI=null,vI=5,Qy=null,Br=zl(Ul(e=>({theme:Zy,globalSystemPrompt:uI,temperature:cI,maxTokens:dI,topP:fI,topK:hI,presencePenalty:pI,frequencyPenalty:mI,enableAdvancedSettings:gI,enableStreamingMarkdown:Yy,streamingRenderFPS:Xy,streamingCodeRenderFPS:Jy,gitUserName:yI,gitUserEmail:bI,toolMaxSteps:vI,prismThemeUrl:Qy,setTheme:t=>{e({theme:t}),Ht.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),Ht.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),Ht.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),Ht.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),Ht.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),Ht.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),Ht.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),Ht.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),Ht.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),Ht.saveSetting("enableStreamingMarkdown",t)},setStreamingRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingRenderFPS:n}),Ht.saveSetting("streamingRenderFPS",n)},setStreamingCodeRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingCodeRenderFPS:n}),Ht.saveSetting("streamingCodeRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),Ht.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),Ht.saveSetting("gitUserEmail",n)},setToolMaxSteps:t=>{const n=Math.max(1,Math.min(20,t));e({toolMaxSteps:n}),Ht.saveSetting("toolMaxSteps",n)},setPrismThemeUrl:t=>{const n=(t==null?void 0:t.trim())||null;e({prismThemeUrl:n}),Ht.saveSetting("prismThemeUrl",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,u,c,f,h,p,g,v,b,_]=await Promise.all([Ht.loadSetting("theme",Zy),Ht.loadSetting("temperature",cI),Ht.loadSetting("maxTokens",dI),Ht.loadSetting("topP",fI),Ht.loadSetting("topK",hI),Ht.loadSetting("presencePenalty",pI),Ht.loadSetting("frequencyPenalty",mI),Ht.loadSetting("globalSystemPrompt",uI),Ht.loadSetting("enableAdvancedSettings",gI),Ht.loadSetting("enableStreamingMarkdown",Yy),Ht.loadSetting("streamingRenderFPS",Xy),Ht.loadSetting("streamingCodeRenderFPS",Jy),Ht.loadSetting("gitUserName",yI),Ht.loadSetting("gitUserEmail",bI),Ht.loadSetting("toolMaxSteps",vI),Ht.loadSetting("prismThemeUrl",Qy)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:u,enableAdvancedSettings:c,enableStreamingMarkdown:f,streamingRenderFPS:h,streamingCodeRenderFPS:p,gitUserName:g,gitUserEmail:v,toolMaxSteps:b,prismThemeUrl:_})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:Zy,enableStreamingMarkdown:Yy,streamingRenderFPS:Xy,streamingCodeRenderFPS:Jy,prismThemeUrl:Qy}),await Promise.all([Ht.saveSetting("theme",Zy),Ht.saveSetting("enableStreamingMarkdown",Yy),Ht.saveSetting("streamingRenderFPS",Xy),Ht.saveSetting("streamingCodeRenderFPS",Jy),Ht.saveSetting("prismThemeUrl",Qy)]),ot.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),ot.error("Failed to reset general settings.")}}}))),wI=e=>Symbol.iterator in e,_I=e=>"entries"in e,xI=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},Ree=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function Nee(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!wI(e)||!wI(t)?xI({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):_I(e)&&_I(t)?xI(e,t):Ree(e,t)}function In(e){const t=vt.useRef(void 0);return n=>{const r=e(n);return Nee(t.current,r)?t.current:t.current=r}}const SI="prism-theme-link",tS="prism-default-light-theme-link",nS="prism-default-dark-theme-link",Iee="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-material-light.min.css",Oee="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-coldark-dark.min.css",EI=e=>e.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"),Aw=({lang:e,code:t})=>{const[n,r]=R.useState(!1),[a,i]=R.useState(!1),o=R.useRef(null),{prismThemeUrl:s,theme:u}=Br(In(_=>({prismThemeUrl:_.prismThemeUrl,theme:_.theme}))),c=R.useMemo(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),f=u==="system"?c:u;R.useEffect(()=>{const _=(S,E)=>{const C=document.getElementById(E);if(C)C.href!==S&&(C.href=S);else{const k=document.createElement("link");k.id=E,k.rel="stylesheet",k.href=S,document.head.appendChild(k)}},x=S=>{const E=document.getElementById(S);E&&E.remove()};return s?(_(s,SI),x(tS),x(nS)):(x(SI),f==="dark"?(_(EI(Oee),nS),x(tS)):(_(EI(Iee),tS),x(nS))),()=>{}},[s,f]);const h=R.useCallback(()=>{if(o.current&&t)try{o.current.textContent=t,Cee.highlightElement(o.current)}catch(_){console.error("Prism highlight error:",_),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);R.useEffect(()=>{a||h()},[t,e,a,h]);const p=async()=>{try{await navigator.clipboard.writeText(t),r(!0),ot.success("Code copied to clipboard!"),setTimeout(()=>r(!1),1500)}catch(_){ot.error("Failed to copy code."),console.error("Clipboard copy failed:",_)}},g=()=>{const _=a;i(x=>!x),_&&setTimeout(h,0)},v=e?`language-${e}`:"language-plaintext",b=R.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container my-4",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("span",{className:"text-xs text-muted-foreground",children:e||"code"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:g,"aria-label":a?"Unfold code":"Fold code",children:y.jsx(j0,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:a?"Unfold":"Fold"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:p,"aria-label":"Copy code",children:n?y.jsx(xo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(IC,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:"Copy"})]})})]})]}),!a&&y.jsx("pre",{className:"code-block-content",children:y.jsx("code",{ref:o,className:v,children:t})}),a&&y.jsx("div",{className:"folded-content-preview p-4 pt-0",onClick:g,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:b})})]})},Dee=({toolCallStrings:e,toolResultStrings:t})=>{const[n,r]=R.useState(new Set),[a,i]=R.useState([]),[o,s]=R.useState([]),[u,c]=R.useState(new Map);R.useEffect(()=>{const h=[],p=[],g=new Set;(e??[]).forEach(v=>{try{const b=JSON.parse(v);b&&b.type==="tool-call"&&b.toolCallId&&b.toolName&&b.args!==void 0?(h.push(b),g.add(b.toolCallId)):console.warn("Skipping invalid tool call string:",v)}catch(b){console.error("Failed to parse tool call string for display:",v,b)}}),(t??[]).forEach(v=>{try{const b=JSON.parse(v);b&&b.type==="tool-result"&&b.toolCallId&&b.toolName&&b.result!==void 0?p.push(b):console.warn("Skipping invalid tool result string:",v)}catch(b){console.error("Failed to parse tool result string for display:",v,b)}}),i(h),s(p),c(new Map(p.map(v=>[v.toolCallId,v]))),r(g)},[e,t]);const f=h=>{r(p=>{const g=new Set(p);return g.has(h)?g.delete(h):g.add(h),g})};return a.length===0?null:y.jsxs("div",{className:"mt-2 space-y-2 border-t border-border/50 pt-2",children:[y.jsx("div",{className:"flex items-center justify-between mb-1",children:y.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground",children:[y.jsx(av,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Tool Activity (",a.length," calls)"]})]})}),a.map((h,p)=>{const g=n.has(h.toolCallId),v=u.get(h.toolCallId),b=v&&typeof v.result=="object"&&v.result!==null&&v.result._isError===!0,_=b?String(v.result.error):null,x=v?b?"error":"completed":"pending",S=v?b?`Error: ${_}`:JSON.stringify(v.result,null,2):"Waiting for result...";return y.jsxs("div",{className:"p-2 border rounded bg-muted/30 text-xs",children:[y.jsxs("div",{className:"flex items-center justify-between gap-1.5 font-medium mb-1",children:[y.jsxs("div",{className:"flex items-center gap-1.5",children:[x==="pending"&&y.jsx(Gn,{className:"h-3.5 w-3.5 animate-spin text-blue-500"}),x==="completed"&&y.jsx(lw,{className:"h-3.5 w-3.5 text-green-500"}),x==="error"&&y.jsx(Ls,{className:"h-3.5 w-3.5 text-destructive"}),y.jsx(av,{className:"h-3.5 w-3.5 text-muted-foreground"}),y.jsxs("span",{children:["Tool Call #",p+1,": ",h.toolName]})]}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>f(h.toolCallId),"aria-label":g?"Expand tool call":"Collapse tool call",children:g?y.jsx(NC,{className:"h-3.5 w-3.5"}):y.jsx(sw,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:g?"Expand":"Collapse"})]})})]}),!g&&y.jsxs("div",{className:"pl-5 space-y-1 mt-1",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"Args:"}),y.jsx("pre",{className:"text-[11px] bg-background/50 p-1 rounded mt-0.5 whitespace-pre-wrap break-words",children:JSON.stringify(h.args,null,2)})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"Result:"}),y.jsx("pre",{className:$t("text-[11px] p-1 rounded mt-0.5 whitespace-pre-wrap break-words",b?"bg-destructive/10 text-destructive":"bg-background/50"),children:S})]})]})]},h.toolCallId)})]})},jee=({interaction:e,allInteractionsInGroup:t,onRegenerate:n,className:r})=>{var F,Z,L,de,ae,ne,ee,se,W,J,Y,re,be;const[a,i]=R.useState(0),[o,s]=R.useState(!1),[u,c]=R.useState(!1),[f,h]=R.useState(!1),p=R.useMemo(()=>t.filter(we=>we.type==="message.user_assistant"&&we.status==="COMPLETED"&&we.prompt===null).sort((we,Me)=>{var Pe,Ae;return(((Pe=Me.startedAt)==null?void 0:Pe.getTime())??0)-(((Ae=we.startedAt)==null?void 0:Ae.getTime())??0)}),[t]),g=p.length>0?p[a]:e,v=typeof g.response=="string"?g.response:null,b=nk(v),_=e.prompt&&g.status==="COMPLETED"&&typeof n=="function"&&a===0,x=we=>{we.stopPropagation(),n&&e.prompt?n(e.id):console.error("Could not regenerate: No callback or prompt data found in the original interaction.",e)},S=we=>{i(Me=>we==="prev"?Math.min(Me+1,p.length-1):Math.max(Me-1,0))},E=R.useCallback(async()=>{if(v)try{await navigator.clipboard.writeText(v),c(!0),ot.success("Response copied to clipboard!"),setTimeout(()=>c(!1),1500)}catch(we){ot.error("Failed to copy response."),console.error("Clipboard copy failed:",we)}},[v]),C=R.useCallback(async()=>{try{await navigator.clipboard.writeText(g.id),h(!0),ot.success("Interaction ID copied to clipboard!"),setTimeout(()=>h(!1),1500)}catch(we){ot.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",we)}},[g.id]),k=()=>s(we=>!we),D=p.length>1,O=a<p.length-1,N=a>0,z=R.useMemo(()=>v?v.split(`
`).slice(0,3).join(`
`):"",[v]),H=R.useMemo(()=>g.startedAt&&g.endedAt?((g.endedAt.getTime()-g.startedAt.getTime())/1e3).toFixed(2):null,[g.startedAt,g.endedAt]),X=(((Z=(F=g.metadata)==null?void 0:F.toolCalls)==null?void 0:Z.length)??0)>0;return y.jsxs("div",{className:$t("p-3 my-2 border rounded-md shadow-sm bg-card relative group",r),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{children:["Assistant | ",g.status,((L=g.metadata)==null?void 0:L.modelId)&&y.jsxs("span",{className:"ml-2 text-blue-400",children:["(",g.metadata.modelId,")"]})]}),y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":o?"Unfold response":"Fold response",children:y.jsx(j0,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:o?"Unfold":"Fold"})]})}),D&&y.jsxs("div",{className:"flex items-center border border-border rounded bg-background/50",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>S("prev"),disabled:!O,"aria-label":"Previous revision",children:y.jsx(sK,{className:"h-3 w-3"})})}),y.jsx(Tn,{side:"top",children:"Previous Revision"})]})}),y.jsxs("span",{className:"text-[10px] px-1 text-muted-foreground select-none",children:[a+1,"/",p.length]}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>S("next"),disabled:!N,"aria-label":"Next revision",children:y.jsx(NC,{className:"h-3 w-3"})})}),y.jsx(Tn,{side:"top",children:"Next Revision"})]})})]}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:C,"aria-label":"Copy interaction ID",children:f?y.jsx(xo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(m8,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:"Copy ID"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:E,"aria-label":"Copy response",disabled:!v,children:u?y.jsx(xo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(IC,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:"Copy"})]})}),_&&y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:x,"aria-label":"Regenerate response",children:y.jsx(dw,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:"Regenerate"})]})})]})]}),y.jsx("div",{className:"text-sm markdown-content",children:o?y.jsx("div",{className:"folded-content-preview cursor-pointer",onClick:k,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:z||(X?"[Tool Activity]":"")})}):y.jsxs(y.Fragment,{children:[b.map((we,Me)=>typeof we=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:we}},Me):we.type==="code"?y.jsx(Aw,{lang:we.lang,code:we.code},Me):null),y.jsx(Dee,{toolCallStrings:(de=g.metadata)==null?void 0:de.toolCalls,toolResultStrings:(ae=g.metadata)==null?void 0:ae.toolResults})]})}),!o&&(((ne=g.metadata)==null?void 0:ne.promptTokens)||((ee=g.metadata)==null?void 0:ee.completionTokens)||H)&&y.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50 text-xs text-muted-foreground flex justify-start gap-3",children:[H&&y.jsxs("span",{children:["Time: ",H,"s"]}),(((se=g.metadata)==null?void 0:se.promptTokens)||((W=g.metadata)==null?void 0:W.completionTokens))&&y.jsxs("span",{children:["Tokens: ",((J=g.metadata)==null?void 0:J.promptTokens)??"?"," ","(in) / ",((Y=g.metadata)==null?void 0:Y.completionTokens)??"?"," ","(out)"]})]}),g.status==="ERROR"&&((re=g.metadata)==null?void 0:re.error)&&y.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-destructive",children:[y.jsx(Ls,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Error: ",g.metadata.error]})]}),g.status==="WARNING"&&((be=g.metadata)==null?void 0:be.error)&&y.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-accent",children:[y.jsx(Ls,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Error: ",g.metadata.error]})]})]})},Mee=R.memo(jee);var lt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(lt||(lt={}));const CI={[lt.EPERM]:"Operation not permitted",[lt.ENOENT]:"No such file or directory",[lt.EINTR]:"Interrupted system call",[lt.EIO]:"Input/output error",[lt.ENXIO]:"No such device or address",[lt.EBADF]:"Bad file descriptor",[lt.EAGAIN]:"Resource temporarily unavailable",[lt.ENOMEM]:"Cannot allocate memory",[lt.EACCES]:"Permission denied",[lt.EFAULT]:"Bad address",[lt.ENOTBLK]:"Block device required",[lt.EBUSY]:"Resource busy or locked",[lt.EEXIST]:"File exists",[lt.EXDEV]:"Invalid cross-device link",[lt.ENODEV]:"No such device",[lt.ENOTDIR]:"File is not a directory",[lt.EISDIR]:"File is a directory",[lt.EINVAL]:"Invalid argument",[lt.ENFILE]:"Too many open files in system",[lt.EMFILE]:"Too many open files",[lt.ETXTBSY]:"Text file busy",[lt.EFBIG]:"File is too big",[lt.ENOSPC]:"No space left on disk",[lt.ESPIPE]:"Illegal seek",[lt.EROFS]:"Cannot modify a read-only file system",[lt.EMLINK]:"Too many links",[lt.EPIPE]:"Broken pipe",[lt.EDOM]:"Numerical argument out of domain",[lt.ERANGE]:"Numerical result out of range",[lt.EDEADLK]:"Resource deadlock would occur",[lt.ENAMETOOLONG]:"File name too long",[lt.ENOLCK]:"No locks available",[lt.ENOSYS]:"Function not implemented",[lt.ENOTEMPTY]:"Directory is not empty",[lt.ELOOP]:"Too many levels of symbolic links",[lt.ENOMSG]:"No message of desired type",[lt.EBADE]:"Invalid exchange",[lt.EBADR]:"Invalid request descriptor",[lt.EXFULL]:"Exchange full",[lt.ENOANO]:"No anode",[lt.EBADRQC]:"Invalid request code",[lt.ENOSTR]:"Device not a stream",[lt.ENODATA]:"No data available",[lt.ETIME]:"Timer expired",[lt.ENOSR]:"Out of streams resources",[lt.ENONET]:"Machine is not on the network",[lt.EREMOTE]:"Object is remote",[lt.ENOLINK]:"Link has been severed",[lt.ECOMM]:"Communication error on send",[lt.EPROTO]:"Protocol error",[lt.EBADMSG]:"Bad message",[lt.EOVERFLOW]:"Value too large for defined data type",[lt.EBADFD]:"File descriptor in bad state",[lt.ESTRPIPE]:"Streams pipe error",[lt.ENOTSOCK]:"Socket operation on non-socket",[lt.EDESTADDRREQ]:"Destination address required",[lt.EMSGSIZE]:"Message too long",[lt.EPROTOTYPE]:"Protocol wrong type for socket",[lt.ENOPROTOOPT]:"Protocol not available",[lt.EPROTONOSUPPORT]:"Protocol not supported",[lt.ESOCKTNOSUPPORT]:"Socket type not supported",[lt.ENOTSUP]:"Operation is not supported",[lt.ENETDOWN]:"Network is down",[lt.ENETUNREACH]:"Network is unreachable",[lt.ENETRESET]:"Network dropped connection on reset",[lt.ETIMEDOUT]:"Connection timed out",[lt.ECONNREFUSED]:"Connection refused",[lt.EHOSTDOWN]:"Host is down",[lt.EHOSTUNREACH]:"No route to host",[lt.EALREADY]:"Operation already in progress",[lt.EINPROGRESS]:"Operation now in progress",[lt.ESTALE]:"Stale file handle",[lt.EREMOTEIO]:"Remote I/O error",[lt.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(lt[t],CI[lt[t]],n,r)}constructor(t,n=CI[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=lt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var rS={exports:{}},kI;function Pee(){return kI||(kI=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function i(u,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,h||u,p),v=n?n+c:c;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],g]:u._events[v].push(g):(u._events[v]=g,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)t.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},s.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,v=new Array(g);p<g;p++)v[p]=h[p].fn;return v},s.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},s.prototype.emit=function(c,f,h,p,g,v){var b=n?n+c:c;if(!this._events[b])return!1;var _=this._events[b],x=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,h),!0;case 4:return _.fn.call(_.context,f,h,p),!0;case 5:return _.fn.call(_.context,f,h,p,g),!0;case 6:return _.fn.call(_.context,f,h,p,g,v),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var C=_.length,k;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),x){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,f);break;case 3:_[E].fn.call(_[E].context,f,h);break;case 4:_[E].fn.call(_[E].context,f,h,p);break;default:if(!S)for(k=1,S=new Array(x-1);k<x;k++)S[k-1]=arguments[k];_[E].fn.apply(_[E].context,S)}}return!0},s.prototype.on=function(c,f,h){return i(this,c,f,h,!1)},s.prototype.once=function(c,f,h){return i(this,c,f,h,!0)},s.prototype.removeListener=function(c,f,h,p){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===f&&(!p||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var b=0,_=[],x=v.length;b<x;b++)(v[b].fn!==f||p&&!v[b].once||h&&v[b].context!==h)&&_.push(v[b]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(rS)),rS.exports}var Fee=Pee();const rk=ni(Fee);var bO;let Lee=class extends rk{constructor(n){super();Va(this,bO,"List");Va(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(bO=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function AI(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function lr(e){throw e}const TI=Intl.NumberFormat("en",{notation:"compact"});TI.format.bind(TI);function wd(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function $ee(e){try{return JSON.parse(e),!0}catch{return!1}}function TE(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function ak(e){return e.at(0).toUpperCase()+e.slice(1)}const Bee=new TextEncoder;function Jc(e){return Bee.encode(e)}const RI=new TextDecoder;function ik(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return RI.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),RI.decode(t)}function Xm(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Xm(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function zee(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Uee={};let qee="process"in globalThis&&"env"in globalThis.process&&Uee.U_DEBUG=="true";function Jm(...e){qee&&console.debug("[U]",...e)}const NI=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],Hee=[...NI,...NI.map(e=>ak(e)),"char"],ok=/^(u?int|float)(8|16|32|64|128)$/i;function EM(e){return e=="char"?"uint8":e.toLowerCase()}function sk(e){return ok.test(e.toString())}function RE(e){return e=="char"||ok.test(e.toString().toLowerCase())}function Vee(e){if(!RE(e))throw new TypeError("Not a valid primitive type: "+e)}const II=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function CM(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function Gee(e){return e!=null&&typeof e=="object"&&"struct"in e}function Tw(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function Ho(e){return typeof e=="function"&&Symbol.metadata in e&&Gee(e[Symbol.metadata])}function z0(e){return e!=null&&typeof e=="object"&&Ho(e.constructor)}function kM(e){if(!z0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function lk(e){return z0(e)||Ho(e)}function AM(e){if(!lk(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function uk(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Mr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=Mr(e[i]);return a}if(typeof e=="string")return Vee(e),+EM(e).match(ok)[2]/8;if(uk(e))return e[Symbol.size];AM(e);const t=Ho(e)?e:e.constructor;Tw(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(Ho(e))return r;for(const a of n.members.values()){const i=e[a.name];if(z0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Mr(i)):r+=Mr(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=Mr(lk(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function Wee(e,t){var i;AM(e);const n=Ho(e)?e:e.constructor;Tw(n);const{struct:r}=n[Symbol.metadata];if(Ho(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??lr(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=Mr(lk(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function Kee(e,t){return Math.ceil(e/t)*t}function _d(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:u,length:c}of CM(r)){if(!RE(u)&&!Ho(u))throw new TypeError("Not a valid type: "+u);if(typeof c=="string"){const p=a.get(c);if(!p)throw new Error(`"${c}" is undefined or declared after "${s}"`);if(!sk(p.type))throw new Error(`"${c}" is not a number and cannot be used to count "${s}"`)}let f=`${typeof u=="string"?u:u.name} ${s}`;c!==void 0&&(f+=`[${c}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:RE(u)?EM(u):u,length:c,decl:f});const h=typeof c=="string"||Ho(u)&&u[Symbol.metadata].struct.isDynamic?0:Mr(u)*(c||1);o||(o=Ho(u)?u[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=Kee(i,e.align||1),Jm("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function Qm(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return CM(r).push({name:a,type:e,length:t}),n}}function TM(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:lr(new Error("Array lengths must be natural numbers"))}function La(e){if(uk(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();kM(e),Tw(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Mr(e),a=new Uint8Array(r),i=new DataView(a.buffer);Jm("serialize",e.constructor.name);let o=0,s=0;for(const u of n.values()){const c=TM(e,u);Jm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name][f]:e[u.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=z0(h)?Mr(h):Mr(u.type),!sk(u.type)){a.set(h?La(h):new Uint8Array(Mr(u.type)),o);continue}const p=`set${ak(u.type)}`;if(p=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(p=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(p=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&II,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&II,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[p](o,Number(h),!t.bigEndian)}}return a}function Rw(e,t){const n=zee(t);if(uk(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);kM(e),Tw(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);Jm("deserialize",e.constructor.name);let o=0,s=0;for(const u of a.values()){const c=TM(e,u);Jm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name]:e;const p=c!=-1?f:u.name,g=h[p]===null||h[p]===void 0,v=g&&Ho(u.type)&&u.type[Symbol.metadata].struct.isDynamic;if(o=s,!z0(h[p])&&!v&&(s+=Mr(u.type)),typeof e[u.name]=="string"){e[u.name]=e[u.name].slice(0,f)+String.fromCharCode(i.getUint8(o))+e[u.name].slice(f+1);continue}if(!sk(u.type)){if(v&&Ho(u.type))h[p]??(h[p]=new u.type);else if(g)continue;Rw(h[p],new Uint8Array(n.subarray(o))),s+=Mr(h[p]);continue}c&&c!=-1&&(h||(h=[]));const b=`get${ak(u.type)}`;if(b=="getInt64"){h[p]=i.getBigInt64(o,!r.bigEndian);continue}if(b=="getUint64"){h[p]=i.getBigUint64(o,!r.bigEndian);continue}if(b=="getInt128"){h[p]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[p]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[p]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[p]=i[b](o,!r.bigEndian)}}}function Zee(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Qm(e,n):Qm(e)(n,r)}return t}const gn=Object.fromEntries(Hee.map(e=>[e,Zee(e)]));function Yee(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const ts={root:"/",pwd:"/",credentials:Yee({uid:0,gid:0}),descriptors:new Map};function RM(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const u=n.lastIndexOf("/");u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function Pl(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:ts.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=RM(n,!r),r?`/${n}`:n.length?n:"/"}function Xee(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=RM(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function tr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?Xee(t):"."}function NM(e,t){if(e===t||(e=Pl.call(this,e),t=Pl.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let u=-1,c=0;for(;c<s;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(u=c)}if(c===s)if(o>s){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else a>s&&(e[n+c]==="/"?u=c:c===0&&(u=0));let f="";for(c=n+u+1;c<=r;++c)(c===r||e[c]==="/")&&(f+=f.length===0?"..":"/..");return`${f}${t.slice(i+u)}`}function Yn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function oh(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Ss(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,u=e.length-1,c=0;for(;u>=r;--u){if(e[u]==="/"){if(!s){i=u+1;break}continue}o===-1&&(s=!1,o=u+1),e[u]==="."?a===-1?a=u:c!==1&&(c=1):a!==-1&&(c=-1)}if(o!==-1){const f=i===0&&t?1:i;a===-1||c===0||c===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(f,o):(n.name=e.slice(f,a),n.base=e.slice(f,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var pn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(pn||(pn={}));pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";const Jee=new Lee;function Qee(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};Jee.add(n),ste(n)}function ete(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+tr(i,e.path)}function uc(e){return function(t,n={}){return Qee(e,ete(t,n)),t}}uc(pn.EMERG);const tte=uc(pn.ALERT),Nw=uc(pn.CRIT),Si=uc(pn.ERR),Za=uc(pn.WARN),ck=uc(pn.NOTICE),IM=uc(pn.INFO),vm=uc(pn.DEBUG);function nte(e,t){return`\x1B[${t}m${e}\x1B[0m`}function rte(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[nte(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";let ate=e=>[...rte(e),e.message];function ite(e){const t=ate(e);return typeof t=="string"?[t]:Array.from(t)}let ote=console.error;function ste(e){e.level>lte||ote(...ite(e))}let lte=pn.ALERT;function dk(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function ute(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function cte(e,t){if(typeof t!="object"||t===null)throw Si(new Ue(lt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){vm("Using default for option: "+n);continue}throw Si(new Ue(lt.EINVAL,"Missing required option: "+n))}const i=(c,f=a)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?a instanceof c:c(a):typeof a===c||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,u=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw Si(new Ue(lt.EINVAL,`Incorrect type for "${n}": ${o} (expected ${u})`))}}function OM(e){return e!=null&&typeof e=="object"&&"backend"in e&&dk(e.backend)}const fk=0,ya=4,Yr=2,Cb=1,hk=1,dte=2,fte=4,DM=0,Ka=1,Al=2,Iw=64,Ow=128,hte=256,Dw=512,fd=1024,pte=65536,mte=262144,gte=131072,jw=1052672,yte=4096,bte=32768,vte=16384,wte=2048,yr=61440,xd=49152,Hl=40960,Vo=32768,Sd=24576,ua=16384,Ed=8192,Cd=4096,U0=2048,q0=1024,_te=512,xte=448,jM=256,MM=128,PM=64,Ste=56,FM=32,LM=16,$M=8,Ete=7,BM=4,zM=2,UM=1,Cte=0,pi=4294967295,qM=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:hk,COPYFILE_FICLONE:dte,COPYFILE_FICLONE_FORCE:fte,F_OK:fk,O_APPEND:fd,O_CREAT:Iw,O_DIRECT:vte,O_DIRECTORY:pte,O_DSYNC:yte,O_EXCL:Ow,O_NOATIME:mte,O_NOCTTY:hte,O_NOFOLLOW:gte,O_NONBLOCK:wte,O_RDONLY:DM,O_RDWR:Al,O_SYMLINK:bte,O_SYNC:jw,O_TRUNC:Dw,O_WRONLY:Ka,R_OK:ya,S_IFBLK:Sd,S_IFCHR:Ed,S_IFDIR:ua,S_IFIFO:Cd,S_IFLNK:Hl,S_IFMT:yr,S_IFREG:Vo,S_IFSOCK:xd,S_IRGRP:FM,S_IROTH:BM,S_IRUSR:jM,S_IRWXG:Ste,S_IRWXO:Ete,S_IRWXU:xte,S_ISGID:q0,S_ISUID:U0,S_ISVTX:_te,S_IWGRP:LM,S_IWOTH:zM,S_IWUSR:MM,S_IXGRP:$M,S_IXOTH:UM,S_IXUSR:PM,UV_FS_O_FILEMAP:Cte,W_OK:Yr,X_OK:Cb,size_max:pi},Symbol.toStringTag,{value:"Module"})),eb=BigInt(1e3);class HM{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:u,ino:c,...f}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(c??0),this.mode=this._convert(u??420&Vo),(this.mode&yr)==0&&(this.mode=this.mode|this._convert(Vo)),Object.assign(this,f)}isFile(){return(this.mode&yr)===Vo}isDirectory(){return(this.mode&yr)===ua}isSymbolicLink(){return(this.mode&yr)===Hl}isSocket(){return(this.mode&yr)===xd}isBlockDevice(){return(this.mode&yr)===Sd}isCharacterDevice(){return(this.mode&yr)===Ed}isFIFO(){return(this.mode&yr)===Cd}toJSON(){return wd(this,NE)}hasAccess(t,n){return ar(n,this._isBigint?new Vl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*eb}get mtimeNs(){return BigInt(this.mtimeMs)*eb}get ctimeNs(){return BigInt(this.ctimeMs)*eb}get birthtimeNs(){return BigInt(this.birthtimeMs)*eb}}function VM(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<pi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<pi?e.gid=n:r=!1,r}class Vl extends HM{constructor(){super(...arguments),this._isBigint=!1}}class kd extends HM{constructor(){super(...arguments),this._isBigint=!0}}function kte(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class Ate{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=pi,this.ffree=pi}}class Tte{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(pi),this.ffree=BigInt(pi)}}var Er=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),p=!0},hn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},pk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const zi=0,Rte=1024;let OI=(()=>{var e,t;let n=[_d()],r,a=[],i,o,s=[],u=[],c,f=[],h=[],p,g=[],v=[],b,_=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=hn(this,s,0),this.valueSize=(hn(this,u),hn(this,f,0)),this._key=(hn(this,h),hn(this,g,"")),this._value=(hn(this,v),hn(this,_,new Uint8Array(Rte))),hn(this,x),S&&(this.key=S),E&&(this.value=E)}},pk(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=gn).uint32.bind(e)],c=[(t=gn).uint32.bind(t)],p=[gn.char("keySize")],b=[gn.uint8("valueSize")],Er(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},s,u),Er(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},f,h),Er(null,null,p,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},g,v),Er(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},_,x),Er(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),hn(i,a)})(),i})(),ec=(()=>{var e;let t=[_d()],n,r=[],a,i,o=[],s=[],u,c=[],f=[];return a=class{has(h){return this.data.some(p=>p.key==h)}get(h){return this.data.find(p=>p.key==h)}set(h,p){const g=this.get(h);if(g){g.value=p;return}this.data.push(new OI(h,p)),this.size++}remove(h){const p=this.data.findIndex(g=>g.key==h);return p===-1?!1:(this.data.splice(p,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=hn(this,o,0),this.data=(hn(this,s),hn(this,c,[])),hn(this,f)}},pk(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=gn).uint32.bind(e)],u=[Qm(OI,"size")],Er(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:p=>"size"in p,get:p=>p.size,set:(p,g)=>{p.size=g}},metadata:h},o,s),Er(null,null,u,{kind:"field",name:"data",static:!1,private:!1,access:{has:p=>"data"in p,get:p=>p.data,set:(p,g)=>{p.data=g}},metadata:h},c,f),Er(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),hn(a,r)})(),a})();const NE=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],Nte=4;var Ei;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Ei||(Ei={}));let la=(()=>{var e,t,n,r,a,i,o,s,u,c,f,h,p,g,v,b;let _=[_d()],x,S=[],E,C,k=[],D=[],O,N=[],z=[],H,X=[],F=[],Z,L=[],de=[],ae,ne=[],ee=[],se,W=[],J=[],Y,re=[],be=[],we,Me=[],Pe=[],Ae,Te=[],qe=[],it,Ie=[],Re=[],U,Ce=[],Ne=[],ce,ie=[],Q=[],xe,Le=[],Se=[],Ve,xt=[],ht=[],Et,Ft=[],Tt=[],Ut,ge=[],I=[],V,he=[],Oe=[],ve,ke=[],le=[];var dt=E=class{constructor(yt){if(this.data=hn(this,k,TE(0,pi)),this.__data_old=(hn(this,D),hn(this,N,0)),this.size=(hn(this,z),hn(this,X,0)),this.mode=(hn(this,F),hn(this,L,0)),this.nlink=(hn(this,de),hn(this,ne,1)),this.uid=(hn(this,ee),hn(this,W,0)),this.gid=(hn(this,J),hn(this,re,0)),this.atimeMs=(hn(this,be),hn(this,Me,Date.now())),this.birthtimeMs=(hn(this,Pe),hn(this,Te,Date.now())),this.mtimeMs=(hn(this,qe),hn(this,Ie,Date.now())),this.ctimeMs=(hn(this,Re),hn(this,Ce,Date.now())),this.ino=(hn(this,Ne),hn(this,ie,TE(0,pi))),this.__ino_old=(hn(this,Q),hn(this,Le,0)),this.flags=(hn(this,Se),hn(this,xt,0)),this.__after_flags=(hn(this,ht),hn(this,Ft,0)),this.version=(hn(this,Tt),hn(this,ge,0)),this.__padding=(hn(this,I),hn(this,he,[])),this.attributes=(hn(this,Oe),hn(this,ke,new ec)),hn(this,le),!!yt){if(!("byteLength"in yt)){Object.assign(this,yt);return}if(yt.byteLength<Mr(dt))throw Nw(new Ue(lt.EIO,"Buffer is too small to create an inode"));Rw(this,yt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...wd(this,NE),attributes:this.attributes}}toStats(){return new Vl(this)}update(yt){if(!yt)return!1;let M=!1;for(const Be of NE)yt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==yt[Be]&&(Be=="atimeMs"&&this.flags&Ei.NoAtime||(this[Be]=yt[Be],M=!0)));return yt.attributes&&(this.attributes=yt.attributes,M=!0),M&&(this.ctimeMs=Date.now()),M}};return pk(E,"Inode"),(()=>{const yt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=gn).uint32.bind(e)],O=[(t=gn).uint32.bind(t)],H=[(n=gn).uint32.bind(n)],Z=[(r=gn).uint16.bind(r)],ae=[(a=gn).uint32.bind(a)],se=[(i=gn).uint32.bind(i)],Y=[(o=gn).uint32.bind(o)],we=[(s=gn).float64.bind(s)],Ae=[(u=gn).float64.bind(u)],it=[(c=gn).float64.bind(c)],U=[(f=gn).float64.bind(f)],ce=[(h=gn).uint32.bind(h)],xe=[(p=gn).uint32.bind(p)],Ve=[(g=gn).uint32.bind(g)],Et=[(v=gn).uint16.bind(v)],Ut=[(b=gn).uint32.bind(b)],V=[gn.uint8(48)],ve=[Qm(ec)],Er(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:M=>"data"in M,get:M=>M.data,set:(M,Be)=>{M.data=Be}},metadata:yt},k,D),Er(null,null,O,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:M=>"__data_old"in M,get:M=>M.__data_old,set:(M,Be)=>{M.__data_old=Be}},metadata:yt},N,z),Er(null,null,H,{kind:"field",name:"size",static:!1,private:!1,access:{has:M=>"size"in M,get:M=>M.size,set:(M,Be)=>{M.size=Be}},metadata:yt},X,F),Er(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:M=>"mode"in M,get:M=>M.mode,set:(M,Be)=>{M.mode=Be}},metadata:yt},L,de),Er(null,null,ae,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:M=>"nlink"in M,get:M=>M.nlink,set:(M,Be)=>{M.nlink=Be}},metadata:yt},ne,ee),Er(null,null,se,{kind:"field",name:"uid",static:!1,private:!1,access:{has:M=>"uid"in M,get:M=>M.uid,set:(M,Be)=>{M.uid=Be}},metadata:yt},W,J),Er(null,null,Y,{kind:"field",name:"gid",static:!1,private:!1,access:{has:M=>"gid"in M,get:M=>M.gid,set:(M,Be)=>{M.gid=Be}},metadata:yt},re,be),Er(null,null,we,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:M=>"atimeMs"in M,get:M=>M.atimeMs,set:(M,Be)=>{M.atimeMs=Be}},metadata:yt},Me,Pe),Er(null,null,Ae,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:M=>"birthtimeMs"in M,get:M=>M.birthtimeMs,set:(M,Be)=>{M.birthtimeMs=Be}},metadata:yt},Te,qe),Er(null,null,it,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:M=>"mtimeMs"in M,get:M=>M.mtimeMs,set:(M,Be)=>{M.mtimeMs=Be}},metadata:yt},Ie,Re),Er(null,null,U,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:M=>"ctimeMs"in M,get:M=>M.ctimeMs,set:(M,Be)=>{M.ctimeMs=Be}},metadata:yt},Ce,Ne),Er(null,null,ce,{kind:"field",name:"ino",static:!1,private:!1,access:{has:M=>"ino"in M,get:M=>M.ino,set:(M,Be)=>{M.ino=Be}},metadata:yt},ie,Q),Er(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:M=>"__ino_old"in M,get:M=>M.__ino_old,set:(M,Be)=>{M.__ino_old=Be}},metadata:yt},Le,Se),Er(null,null,Ve,{kind:"field",name:"flags",static:!1,private:!1,access:{has:M=>"flags"in M,get:M=>M.flags,set:(M,Be)=>{M.flags=Be}},metadata:yt},xt,ht),Er(null,null,Et,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:M=>"__after_flags"in M,get:M=>M.__after_flags,set:(M,Be)=>{M.__after_flags=Be}},metadata:yt},Ft,Tt),Er(null,null,Ut,{kind:"field",name:"version",static:!1,private:!1,access:{has:M=>"version"in M,get:M=>M.version,set:(M,Be)=>{M.version=Be}},metadata:yt},ge,I),Er(null,null,V,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:M=>"__padding"in M,get:M=>M.__padding,set:(M,Be)=>{M.__padding=Be}},metadata:yt},he,Oe),Er(null,null,ve,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:M=>"attributes"in M,get:M=>M.attributes,set:(M,Be)=>{M.attributes=Be}},metadata:yt},ke,le),Er(null,x={value:E},_,{kind:"class",name:E.name,metadata:yt},null,S),dt=E=x.value,yt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:yt}),hn(E,S)})(),dt=E})();function Ite(e){return(e.mode&yr)===Vo}function Yo(e){return(e.mode&yr)===ua}function sh(e){return(e.mode&yr)===Hl}function Ote(e){return(e.mode&yr)===xd}function e0(e){return(e.mode&yr)===Sd}function t0(e){return(e.mode&yr)===Ed}function Dte(e){return(e.mode&yr)===Cd}function ar(e,t,n){const r=(e==null?void 0:e.credentials)||ts.credentials;if(sh(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&jM&&(a|=ya),t.mode&MM&&(a|=Yr),t.mode&PM&&(a|=Cb)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&FM&&(a|=ya),t.mode&LM&&(a|=Yr),t.mode&$M&&(a|=Cb)),t.mode&BM&&(a|=ya),t.mode&zM&&(a|=Yr),t.mode&UM&&(a|=Cb),(a&n)===n}const DI=1;class pv extends Map{constructor(){super(...arguments),this.maxSize=pi}toJSON(){return{version:DI,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Mr(la);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&yr)!=ua)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())Yn(a)==t&&a!=t&&(r[oh(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&yr)!=ua)continue;const a={};for(const i of this.keys())Yn(i)==n&&i!=n&&(a[oh(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=DI)throw new Ue(lt.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=TE(1,pi)),r=="/"&&(a.ino=0),this.set(r,new la(a));return this}static parse(t){if(!$ee(t))throw new Ue(lt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new pv;return r.fromJSON(n),r}}const aS=4096;let mk=class IE{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===IE.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===IE.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=aS){const u=s+aS>o?o-s:aS,c=new Uint8Array(u);await this.read(t,c,s,s+u).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const u=f=>{s=!0,o.error(f)},{size:c}=await this.stat(t);await this.write(t,i,a).catch(u),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,a)}).catch(u))}})}};function ui(e){return JSON.parse(ik(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function uo(e){return Jc(JSON.stringify(e))}function cc(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(lt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function mv(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(lt.EINVAL,"Invalid time.")}}function ln(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(lt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(lt.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(lt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Pl(e)}function Tl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:cc("mode"in e?e==null?void 0:e.mode:null,r)}}class jte{constructor(t,n,r,a){Va(this,"id");Va(this,"_size");Va(this,"options");Va(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=Xm(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=Xm(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,u)=>s.start-u.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var iS,oS,sS;(iS=Promise.withResolvers)!==null&&iS!==void 0||(Promise.withResolvers=(Za("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(oS=Symbol.dispose)!==null&&oS!==void 0||(Symbol.dispose=(Za("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(sS=Symbol.asyncDispose)!==null&&sS!==void 0||(Symbol.asyncDispose=(Za("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class GM{constructor(t){this.store=t}}class Mte extends GM{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class OE extends GM{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new jte(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:u,end:c}of o)this.async(this.get(t,u,c));if(o.length)throw Si(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){Za("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class Pte{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof OE))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,await this.raw.get(t,u.start,u.end),u.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof OE))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,u.start,u.end),u.start)}}}var xr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Sr=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class WM extends mk{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=NM(t,a);if(o.startsWith(".."))continue;let s=tr(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){Za("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,vm(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,La(o)),a.has(i)&&await r.set(o.data,uo(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,La(o)),a.has(i)&&r.setSync(o.data,uo(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new pv,a=xr(n,this.transaction(),!0),i=[["/",0]],o=AI(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new la(await a.get(u));if(r.set(s,c),c.mode&ua){const f=ui((t=await a.get(c.data))!==null&&t!==void 0?t:lr(Ue.With("ENODATA",s)));for(const[h,p]of Object.entries(f))i.push([tr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new pv,a=xr(n,this.transaction(),!1),i=[["/",0]],o=AI(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new la(a.getSync(u));if(r.set(s,c),c.mode&ua){const f=ui((t=a.getSync(c.data))!==null&&t!==void 0?t:lr(Ue.With("ENODATA",s)));for(const[h,p]of Object.entries(f))i.push([tr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!0),u=Ss(t),c=Ss(n),f=await this.findInode(s,u.dir,"rename"),h=ui((r=await s.get(f.data))!==null&&r!==void 0?r:lr(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const p=h[u.base];if(p!=this._ids.get(t)&&Si(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,u.dir);const g=c.dir==u.dir,v=g?f:await this.findInode(s,c.dir,"rename"),b=g?h:ui((a=await s.get(v.data))!==null&&a!==void 0?a:lr(Ue.With("ENODATA",c.dir,"rename")));if(b[c.base]){const _=new la((i=await s.get(b[c.base]))!==null&&i!==void 0?i:lr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(b[c.base])}b[c.base]=p,await s.set(f.data,uo(h)),await s.set(v.data,uo(b)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!1),u=Ss(t),c=Ss(n),f=this.findInodeSync(s,u.dir,"rename"),h=ui((r=s.getSync(f.data))!==null&&r!==void 0?r:lr(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const p=h[u.base];if(p!=this._ids.get(t)&&Si(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,u.dir);const g=c.dir===u.dir,v=g?f:this.findInodeSync(s,c.dir,"rename"),b=g?h:ui((a=s.getSync(v.data))!==null&&a!==void 0?a:lr(Ue.With("ENODATA",c.dir,"rename")));if(b[c.base]){const _=new la((i=s.getSync(b[c.base]))!==null&&i!==void 0?i:lr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(b[c.base])}b[c.base]=p,s.setSync(f.data,uo(h)),s.setSync(v.data,uo(b)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,La(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Sr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,La(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Sr(r)}}async createFile(t,n){return n.mode|=Vo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=Vo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=ua,await this.commitNew(t,n,Jc("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=ua,this.commitNewSync(t,n,Jc("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(ui((n=await a.get(i.data))!==null&&n!==void 0?n:lr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Sr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(ui((n=a.getSync(i.data))!==null&&n!==void 0?n:lr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Sr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,La(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Sr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,La(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Sr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!0),o=Yn(n),s=await this.findInode(i,o,"link"),u=ui((r=await i.get(s.data))!==null&&r!==void 0?r:lr(Ue.With("ENOENT",o,"link"))),c=await this.findInode(i,t,"link");c.nlink++,u[oh(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,La(c)),await i.set(s.data,uo(u)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Sr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!1),o=Yn(n),s=this.findInodeSync(i,o,"link"),u=ui((r=i.getSync(s.data))!==null&&r!==void 0?r:lr(Ue.With("ENOENT",o,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,u[oh(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,La(c)),i.setSync(s.data,uo(u)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Sr(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!0),u=await this.findInode(s,t,"read");if(u.size==0)return;const c=(i=await s.get(u.data,r,a))!==null&&i!==void 0?i:lr(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&Si(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!1),u=this.findInodeSync(s,t,"read");if(u.size==0)return;const c=(i=s.getSync(u.data,r,a))!==null&&i!==void 0?i:lr(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&Si(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=xr(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let u=n;o.flag("partial")||(u=Xm((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),await o.set(s.data,u,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Sr(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=xr(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let u=n;o.flag("partial")||(u=Xm((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),o.setSync(s.data,u,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Sr(i)}}transaction(){return new Pte(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=xr(t,this.transaction(),!0);if(await n.get(zi))return;const r=new la({ino:zi,data:1,mode:511|ua});await n.set(r.data,Jc("{}")),this._add(zi,"/"),await n.set(zi,La(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Sr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=xr(t,this.transaction(),!1);if(n.getSync(zi))return;const r=new la({ino:zi,data:1,mode:511|ua});n.setSync(r.data,Jc("{}")),this._add(zi,"/"),n.setSync(zi,La(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Sr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Za("Attempted to populate tables after initialization");return}vm("Populating tables with existing store metadata");const n=xr(t,this.transaction(),!0),r=await n.get(zi);if(!r){ck("Store does not have a root inode");const s=new la({ino:zi,data:1,mode:511|ua});await n.set(s.data,Jc("{}")),this._add(zi,"/"),await n.set(zi,La(s)),await n.commit();return}if(r.length<Mr(la)){Nw("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",zi]];for(;o.length>0;){i++;const[s,u]=o.shift();this._add(u,s);const c=await n.get(u);if(!c){Za("Store is missing data for inode: "+u);continue}if(c.length<Mr(la)){Za(`Invalid inode size for ino ${u}: ${c.length}`);continue}const f=new la(c);if((f.mode&ua)!=ua||a.has(u))continue;a.add(u);const h=await n.get(f.data);if(!h){Za("Store is missing directory data: "+f.data);continue}const p=ui(h);for(const[g,v]of Object.entries(p))o.push([tr(s,g),v])}vm(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Sr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new la((a=await t.get(i))!==null&&a!==void 0?a:lr(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new la((a=t.getSync(i))!==null&&a!==void 0?a:lr(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>pi)throw Si(new Ue(lt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=xr(o,this.transaction(),!0),{dir:u,base:c}=Ss(t),f=await this.findInode(s,u,a),h=ui((i=await s.get(f.data))!==null&&i!==void 0?i:lr(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new la({...n,ino:p,data:p+1,size:r.byteLength});return await s.set(g.ino,La(g)),await s.set(g.data,r),h[c]=g.ino,await s.set(f.data,uo(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=xr(o,this.transaction(),!1),{dir:u,base:c}=Ss(t),f=this.findInodeSync(s,u,a),h=ui((i=s.getSync(f.data))!==null&&i!==void 0?i:lr(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new la({...n,ino:p,data:p+1,size:r.byteLength});return s.setSync(g.ino,La(g)),s.setSync(g.data,r),h[c]=g.ino,s.setSync(f.data,uo(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=xr(i,this.transaction(),!0),{dir:u,base:c}=Ss(t),f=await this.findInode(s,u,o),h=ui((r=await s.get(f.data))!==null&&r!==void 0?r:lr(Ue.With("ENOENT",u,o)));if(!h[c])throw Ue.With("ENOENT",t,o);const p=h[c],g=new la((a=await s.get(p))!==null&&a!==void 0?a:lr(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Yo(g))throw Ue.With("EISDIR",t,o);await s.set(f.data,uo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,La(g))):(await s.remove(g.data),await s.remove(p),this._remove(p)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Sr(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=xr(i,this.transaction(),!1),{dir:u,base:c}=Ss(t),f=this.findInodeSync(s,u,o),h=ui((r=s.getSync(f.data))!==null&&r!==void 0?r:lr(Ue.With("ENOENT",u,o))),p=h[c];if(!p)throw Ue.With("ENOENT",t,o);const g=new la((a=s.getSync(p))!==null&&a!==void 0?a:lr(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Yo(g))throw Ue.With("EISDIR",t,o);s.setSync(f.data,uo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,La(g))):(s.removeSync(g.data),s.removeSync(p),this._remove(p)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Sr(i)}}}class Fte extends Mte{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class Lte extends Map{constructor(t=pi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new Fte(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const $te={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new WM(new Lte(e,t));return n.checkRootSync(),n}},Bte=$te;let ba=!0;class jI extends rk{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;co(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;co(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);tb(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);tb(this.output,0),co(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,co(this.output,-a.length,0),co(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;co(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(co(this.output,-this._cursor,0),co(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);tb(this.output,0),co(this.output,0,0),this.output.write(this._prompt+r),this.line=r,co(this.output,-r.length,0),co(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(tb(this.output,0),co(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Za("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Za("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function zte(e,t,n,r){return"input"in e?new jI(e.input,e.output,e.completer,e.terminal):new jI(e,t,n,r)}function tb(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function co(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class gv{get position(){return this.flag&fd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&jw||this.inode.flags&Ei.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Ka||this.flag&Al))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&Ka||this.flag&Al))throw new Ue(lt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Ei.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!t0(this.inode)&&!e0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Ka)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Ei.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!t0(this.inode)&&!e0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>yr?-61441:yr)|t,(this._isSync||t>yr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,VM(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Ei.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function yv(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:ts.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function ri(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:ts.descriptors).get(t);if(!a)throw new Ue(lt.EBADF);return a}function KM(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:ts.descriptors).delete(t)}const Ute=/[rwasx]{1,2}\+?/;function Rl(e){if(typeof e=="number")return e;if(!Ute.test(e))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);return qte(e)}function qte(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?DM:Iw;return e.includes("w")&&(t|=Dw),e.includes("a")&&(t|=fd),e.includes("+")?t|=Al:e.includes("r")||(t|=Ka),e.includes("s")&&(t|=jw),e.includes("x")&&(t|=Ow),t}function ZM(e){let t=0;return e&Ka||(t|=ya),(e&Ka||e&Al)&&(t|=Yr),t}const n0=new Map;gk("/",Bte.create({label:"root"}));function gk(e,t){if(e[0]!="/"&&(e="/"+e),e=Pl.call(this,e),n0.has(e))throw Si(new Ue(lt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,n0.set(e,t),IM(`Mounted ${t.name} on ${e}`),vm(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function YM(e){if(e[0]!="/"&&(e="/"+e),e=Pl.call(this,e),!n0.has(e)){Za(e+" is already unmounted");return}n0.delete(e),ck("Unmounted "+e)}function Fn(e,t){const n=(t==null?void 0:t.root)||ts.root;e=ln(tr(n,e));const r=[...n0].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(Vte(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw tte(new Ue(lt.EIO,"No file system",e))}function lS(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function ir(e,t){typeof e.stack=="string"&&(e.stack=lS(e.stack,t));try{e.message=lS(e.message,t)}catch{}return e.path&&(e.path=lS(e.path,t)),e}function XM(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||pi),files:(t?BigInt:Number)(n.totalNodes||pi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function Hte(e){var t,n,r,a,i,o,s;const u=this!==null&&this!==void 0?this:ts;if(((t=u.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=u.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=u.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=u.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(lt.EPERM,"Can not chroot() as non-root user");(i=u.root)!==null&&i!==void 0||(u.root="/");const c=tr(u.root,e);for(const f of(s=(o=u.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!f.path.startsWith(u.root))throw Ue.With("EBUSY",f.path,"chroot");f.path=f.path.slice(u.root.length)}if(c.length>u.root.length)throw new Ue(lt.EPERM,"Can not chroot() outside of current root");u.root=c}function Vte(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class JM extends rk{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class QM extends JM{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?tr(t.root,n):n,Wte(this.realpath,this)}close(){super.emit("close"),Kte(this.realpath,this)}[Symbol.dispose](){this.close()}}class Gte extends JM{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=tc(this.path);kte(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=tc(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Fu=new Map;function Wte(e,t){const n=ln(e);Fu.has(n)||Fu.set(n,new Set),Fu.get(n).add(t)}function Kte(e,t){const n=ln(e);Fu.has(n)&&(Fu.get(n).delete(t),Fu.get(n).size===0&&Fu.delete(n))}function $a(e,t,n){var r;e&&(n=tr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=ln(n);for(let a=n;a!="/";a=Yn(a)){const i=Fu.get(a);if(i)for(const o of i)o.emit("change",t,NM.call(o._context,a,n)||oh(n))}}var H0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},V0=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function Zte(e,t){e=ln(e),t=ln(t);const n=Fn(e,this),r=Fn(t,this);if(!tc.call(this,Yn(e)).hasAccess(Yr,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),$a(this,"rename",e.toString()),$a(this,"change",t.toString());return}_k.call(this,t,wk(e)),vk.call(this,e),$a(this,"rename",e.toString())}catch(a){throw ir(a,{[n.path]:e,[r.path]:t})}}function yk(e){e=ln(e);try{const{fs:t,path:n}=Fn(dc.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==lt.ENOENT)return!1;throw t}}function tc(e,t){e=ln(e);const{fs:n,path:r}=Fn(dc.call(this,e),this);try{const a=n.statSync(r);if(ba&&!ar(this,a,ya))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new kd(a):new Vl(a)}catch(a){throw ir(a,{[r]:e})}}function bk(e,t){e=ln(e);const{fs:n,path:r}=Fn(e,this);try{const a=n.statSync(r);if(ba&&!ar(this,a,ya))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new kd(a):new Vl(a)}catch(a){throw ir(a,{[r]:e})}}function Yte(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=H0(n,Ad.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(lt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{V0(n)}}function vk(e){e=ln(e);const{fs:t,path:n}=Fn(e,this);try{if(ba&&!ar(this,t.statSync(n),Yr))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),$a(this,"rename",e.toString())}catch(r){throw ir(r,{[n]:e})}}function Ad(e,t){var n;e=ln(e);const r=cc(t.mode,420),a=Rl(t.flag);e=t.preserveSymlinks?e:dc.call(this,e);const{fs:i,path:o}=Fn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&Iw))throw Ue.With("ENOENT",e,"_open");const c=i.statSync(Yn(o));if(!ar(this,c,Yr))throw Ue.With("EACCES",Yn(e),"_open");if(!Yo(c))throw Ue.With("ENOTDIR",Yn(e),"_open");if(!t.allowDirectory&&r&ua)throw Ue.With("EISDIR",e,"_open");if(!ar(this,c,Yr))throw Ue.With("EACCES",Yn(o),"_open");const{euid:f,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:ts.credentials,p=i.createFileSync(o,{mode:r,uid:c.mode&U0?c.uid:f,gid:c.mode&q0?c.gid:h});return new gv(this,e,i,o,a,p)}if(!ar(this,s,r)||!ar(this,s,ZM(a)))throw Ue.With("EACCES",e,"_open");if(a&Ow)throw Ue.With("EEXIST",e,"_open");const u=new gv(this,e,i,o,a,s);if(a&Dw&&u.truncate(0),!t.allowDirectory&&s.mode&ua)throw Ue.With("EISDIR",e,"_open");return u}function Mw(e,t,n=fk){return yv(Ad.call(this,e,{flag:t,mode:n}))}function Pw(e,t,n){return yv(Ad.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function e5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=H0(r,typeof e=="number"?ri(this,e):Ad.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{V0(r)}}function wk(e,t={}){const n=Tl(t,null,"r",420);if(Rl(n.flag)&Ka)throw new Ue(lt.EINVAL,"Flag passed to readFile must allow for reading");const a=Rr.from(e5.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function _k(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","w+",420),i=Rl(a.flag);if(!(i&Ka||i&Al))throw new Ue(lt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new Ue(lt.EINVAL,"Data not specified");H0(r,typeof e=="number"?ri(this,e):Ad.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),$a(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{V0(r)}}function Xte(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","a+",420),i=Rl(a.flag);if(!(i&fd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);H0(r,Ad.call(this,typeof e=="number"?ri(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{V0(r)}}function Jte(e,t){const n=ri(this,e).stat();return t!=null&&t.bigint?new kd(n):new Vl(n)}function Td(e){ri(this,e).close(),KM(this,e)}function Qte(e,t=0){if(t||(t=0),t<0)throw new Ue(lt.EINVAL);ri(this,e).truncate(t)}function ene(e){ri(this,e).sync()}function tne(e){ri(this,e).datasync()}function nne(e,t,n,r,a){let i,o,s,u;if(typeof t=="string"){u=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Rr.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,u=typeof a=="number"?a:null;const c=ri(this,e);u??(u=c.position);const f=c.write(i,o,s,u);return $a(this,"change",c.path),f}function rne(e,t,n,r,a){const i=ri(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function xk(e,t,n){ri(this,e).chown(t,n)}function Sk(e,t){const n=cc(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode.");ri(this,e).chmod(n)}function Ek(e,t,n){ri(this,e).utimes(mv(t),mv(n))}function t5(e){e=ln(e);const{fs:t,path:n}=Fn(dc.call(this,e),this);try{const r=t.statSync(n);if(!Yo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ba&&!ar(this,r,Yr))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),$a(this,"rename",e.toString())}catch(r){throw ir(r,{[n]:e})}}function Ck(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:ts.credentials;t=typeof t=="object"?t:{mode:t};const o=cc(t==null?void 0:t.mode,511);e=dc.call(this,e);const{fs:s,path:u,root:c}=Fn(e,this),f={[u]:e},h=(p,g)=>{if(!ar(this,g,Yr))throw Ue.With("EACCES",Yn(p),"mkdir");const v=s.mkdirSync(p,{mode:o,uid:g.mode&U0?g.uid:a,gid:g.mode&q0?g.gid:i});return $a(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){h(u,s.statSync(Yn(u)));return}const p=[];for(let v=u,b=e;!s.existsSync(v);v=Yn(v),b=Yn(b))p.unshift(v),f[v]=b;if(!p.length)return;const g=[s.statSync(Yn(p[0]))];for(const[v,b]of p.entries())g.push(h(b,g[v]));return c.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(c.length)}catch(p){throw ir(p,f)}}function Th(e,t){t=typeof t=="object"?t:{encoding:t},e=ln(e);const{fs:n,path:r}=Fn(dc.call(this,e),this);let a;try{const o=n.statSync(r);if(ba&&!ar(this,o,ya))throw Ue.With("EACCES",r,"readdir");if(!Yo(o))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw ir(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(tr(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new r0(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Rr.from(o)):i.push(o),!(!Yo(s)||!(t!=null&&t.recursive)))for(const u of Th.call(this,tr(e,o),t))u instanceof r0?(u.path=tr(o,u.path),i.push(u)):Rr.isBuffer(u)?i.push(Rr.from(tr(o,ik(u)))):i.push(tr(o,u))}return i}function ane(e,t){if(e=ln(e),!tc(Yn(e)).hasAccess(ya,this))throw Ue.With("EACCES",Yn(e),"link");if(t=ln(t),!tc(Yn(t)).hasAccess(Yr,this))throw Ue.With("EACCES",Yn(t),"link");const{fs:n,path:r}=Fn(e,this),a=Fn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ba&&!ar(this,n.statSync(r),ya))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw ir(i,{[r]:e,[a.path]:t})}}function ine(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid type: "+n);t=ln(t);const a=H0(r,Ad.call(this,t,{flag:"wx",mode:420}),!1);a.write(Jc(ln(e,!0))),a.chmod(Hl)}catch(a){r.error=a,r.hasError=!0}finally{V0(r)}}function DE(e,t){const n=Rr.from(e5.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function one(e,t,n){const r=Mw.call(this,e,"r+");xk.call(this,r,t,n),Td.call(this,r)}function sne(e,t,n){const r=Pw.call(this,e,"r+");xk.call(this,r,t,n),Td.call(this,r)}function lne(e,t){const n=Mw.call(this,e,"r+");Sk.call(this,n,t),Td.call(this,n)}function une(e,t){const n=Pw.call(this,e,"r+");Sk.call(this,n,t),Td.call(this,n)}function n5(e,t,n){const r=Mw.call(this,e,"r+");Ek.call(this,r,t,n),Td.call(this,r)}function cne(e,t,n){const r=Pw.call(this,e,"r+");Ek.call(this,r,t,n),Td.call(this,r)}function jE(e,t,n){try{const u=Fn(t,e),c=u.fs.statSync(u.path);if(!sh(c))return{...u,fullPath:t,stats:c};const f=Pl.call(e,Yn(t),DE.call(e,t).toString());return jE(e,f)}catch{}const{base:r,dir:a}=Ss(t),i=a=="/"?"/":dc.call(e,a),o=tr(i,r),s=Fn(o,e);try{const u=s.fs.statSync(s.path);if(!sh(u))return{...s,fullPath:o,stats:u};const c=Pl.call(e,i,DE.call(e,o).toString());return jE(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw ir(u,{[s.path]:o})}}function dc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=jE(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Rr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function dne(e,t=384){if(!ar(this,tc.call(this,e),t))throw new Ue(lt.EACCES)}function r5(e,t){e=ln(e);let n;try{n=bk.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&yr){case ua:if(t!=null&&t.recursive)for(const r of Th.call(this,e))r5.call(this,tr(e,r),t);t5.call(this,e);break;case Vo:case Hl:case Sd:case Ed:vk.call(this,e);break;case Cd:case xd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}function fne(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return Ck.call(this,a),n=="buffer"?Rr.from(a):a}function a5(e,t,n){if(e=ln(e),t=ln(t),n&&n&hk&&yk(t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");_k.call(this,t,wk(e)),$a(this,"rename",t.toString())}function hne(e,t,n){const r=ri(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function pne(e,t,n){const r=ri(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function mne(e,t){return e=ln(e),new kk(e,this)}function i5(e,t,n){e=ln(e),t=ln(t);const r=bk.call(this,e);if(n!=null&&n.errorOnExist&&yk.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&yr){case ua:if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");Ck.call(this,t,{recursive:!0});for(const a of Th.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(tr(e,a.name),tr(t,a.name))||i5.call(this,tr(e,a.name),tr(t,a.name),n);break;case Vo:case Hl:a5.call(this,e,t);break;case Sd:case Ed:case Cd:case xd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&n5.call(this,t,r.atime,r.mtime)}function gne(e,t){e=ln(e);const{fs:n}=Fn(e,this);return XM(n,t==null?void 0:t.bigint)}function yne(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(u=>(u=u.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${u}$`))),o=[];function s(u){const c=Th(u,{withFileTypes:r,encoding:"utf8"});for(const f of c){const h=r?f.path:u+"/"+f;a(r?f:h)||(tc(h).isDirectory()&&i.some(p=>p.source.includes(".*"))&&s(h),i.some(p=>p.test(h.replace(/^\/+/g,"")))&&o.push(r?f.path:h.replace(/^\/+/g,"")))}}return s(n),o}class r0{get name(){return oh(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return Ite(this.stats)}isDirectory(){return Yo(this.stats)}isBlockDevice(){return e0(this.stats)}isCharacterDevice(){return t0(this.stats)}isSymbolicLink(){return sh(this.stats)}isFIFO(){return Dte(this.stats)}isSocket(){return Ote(this.stats)}}class kk{checkClosed(){if(this.closed)throw new Ue(lt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await pc.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Th.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var uS={exports:{}},cS={exports:{}},dS={},MI;function fc(){return MI||(MI=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=f,n.toByteArray=p,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function c(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var k=C===E?0:4-C%4;return[C,k]}function f(S){var E=c(S),C=E[0],k=E[1];return(C+k)*3/4-k}function h(S,E,C){return(E+C)*3/4-C}function p(S){var E,C=c(S),k=C[0],D=C[1],O=new i(h(S,k,D)),N=0,z=D>0?k-4:k,H;for(H=0;H<z;H+=4)E=a[S.charCodeAt(H)]<<18|a[S.charCodeAt(H+1)]<<12|a[S.charCodeAt(H+2)]<<6|a[S.charCodeAt(H+3)],O[N++]=E>>16&255,O[N++]=E>>8&255,O[N++]=E&255;return D===2&&(E=a[S.charCodeAt(H)]<<2|a[S.charCodeAt(H+1)]>>4,O[N++]=E&255),D===1&&(E=a[S.charCodeAt(H)]<<10|a[S.charCodeAt(H+1)]<<4|a[S.charCodeAt(H+2)]>>2,O[N++]=E>>8&255,O[N++]=E&255),O}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var k,D=[],O=E;O<C;O+=3)k=(S[O]<<16&16711680)+(S[O+1]<<8&65280)+(S[O+2]&255),D.push(g(k));return D.join("")}function b(S){for(var E,C=S.length,k=C%3,D=[],O=16383,N=0,z=C-k;N<z;N+=O)D.push(v(S,N,N+O>z?z:N+O));return k===1?(E=S[C-1],D.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(S[C-2]<<8)+S[C-1],D.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),D.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(S,E,C,k,D){var O,N,z=D*8-k-1,H=(1<<z)-1,X=H>>1,F=-7,Z=C?D-1:0,L=C?-1:1,de=S[E+Z];for(Z+=L,O=de&(1<<-F)-1,de>>=-F,F+=z;F>0;O=O*256+S[E+Z],Z+=L,F-=8);for(N=O&(1<<-F)-1,O>>=-F,F+=k;F>0;N=N*256+S[E+Z],Z+=L,F-=8);if(O===0)O=1-X;else{if(O===H)return N?NaN:(de?-1:1)*(1/0);N=N+Math.pow(2,k),O=O-X}return(de?-1:1)*N*Math.pow(2,O-k)},_.write=function(S,E,C,k,D,O){var N,z,H,X=O*8-D-1,F=(1<<X)-1,Z=F>>1,L=D===23?Math.pow(2,-24)-Math.pow(2,-77):0,de=k?0:O-1,ae=k?1:-1,ne=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(z=isNaN(E)?1:0,N=F):(N=Math.floor(Math.log(E)/Math.LN2),E*(H=Math.pow(2,-N))<1&&(N--,H*=2),N+Z>=1?E+=L/H:E+=L*Math.pow(2,1-Z),E*H>=2&&(N++,H/=2),N+Z>=F?(z=0,N=F):N+Z>=1?(z=(E*H-1)*Math.pow(2,D),N=N+Z):(z=E*Math.pow(2,Z-1)*Math.pow(2,D),N=0));D>=8;S[C+de]=z&255,de+=ae,z/=256,D-=8);for(N=N<<D|z,X+=D;X>0;S[C+de]=N&255,de+=ae,N/=256,X-=8);S[C+de-ae]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=_,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=F,S.SlowBuffer=re,S.INSPECT_MAX_BYTES=50;const D=2147483647;S.kMaxLength=D;const{Uint8Array:O,ArrayBuffer:N,SharedArrayBuffer:z}=globalThis;F.TYPED_ARRAY_SUPPORT=H(),!F.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function H(){try{const q=new O(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,O.prototype),Object.setPrototypeOf(q,B),q.foo()===42}catch{return!1}}Object.defineProperty(F.prototype,"parent",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.buffer}}),Object.defineProperty(F.prototype,"offset",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.byteOffset}});function X(q){if(q>D)throw new RangeError('The value "'+q+'" is invalid for option "size"');const B=new O(q);return Object.setPrototypeOf(B,F.prototype),B}function F(q,B,G){if(typeof q=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(q)}return Z(q,B,G)}F.poolSize=8192;function Z(q,B,G){if(typeof q=="string")return ne(q,B);if(N.isView(q))return se(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(me(q,N)||q&&me(q.buffer,N)||typeof z<"u"&&(me(q,z)||q&&me(q.buffer,z)))return W(q,B,G);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=q.valueOf&&q.valueOf();if(pe!=null&&pe!==q)return F.from(pe,B,G);const fe=J(q);if(fe)return fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return F.from(q[Symbol.toPrimitive]("string"),B,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}F.from=function(q,B,G){return Z(q,B,G)},Object.setPrototypeOf(F.prototype,O.prototype),Object.setPrototypeOf(F,O);function L(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function de(q,B,G){return L(q),q<=0?X(q):B!==void 0?typeof G=="string"?X(q).fill(B,G):X(q).fill(B):X(q)}F.alloc=function(q,B,G){return de(q,B,G)};function ae(q){return L(q),X(q<0?0:Y(q)|0)}F.allocUnsafe=function(q){return ae(q)},F.allocUnsafeSlow=function(q){return ae(q)};function ne(q,B){if((typeof B!="string"||B==="")&&(B="utf8"),!F.isEncoding(B))throw new TypeError("Unknown encoding: "+B);const G=be(q,B)|0;let pe=X(G);const fe=pe.write(q,B);return fe!==G&&(pe=pe.slice(0,fe)),pe}function ee(q){const B=q.length<0?0:Y(q.length)|0,G=X(B);for(let pe=0;pe<B;pe+=1)G[pe]=q[pe]&255;return G}function se(q){if(me(q,O)){const B=new O(q);return W(B.buffer,B.byteOffset,B.byteLength)}return ee(q)}function W(q,B,G){if(B<0||q.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<B+(G||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return B===void 0&&G===void 0?pe=new O(q):G===void 0?pe=new O(q,B):pe=new O(q,B,G),Object.setPrototypeOf(pe,F.prototype),pe}function J(q){if(F.isBuffer(q)){const B=Y(q.length)|0,G=X(B);return G.length===0||q.copy(G,0,0,B),G}if(q.length!==void 0)return typeof q.length!="number"||De(q.length)?X(0):ee(q);if(q.type==="Buffer"&&Array.isArray(q.data))return ee(q.data)}function Y(q){if(q>=D)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+D.toString(16)+" bytes");return q|0}function re(q){return+q!=q&&(q=0),F.alloc(+q)}F.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==F.prototype},F.compare=function(B,G){if(me(B,O)&&(B=F.from(B,B.offset,B.byteLength)),me(G,O)&&(G=F.from(G,G.offset,G.byteLength)),!F.isBuffer(B)||!F.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===G)return 0;let pe=B.length,fe=G.length;for(let Fe=0,st=Math.min(pe,fe);Fe<st;++Fe)if(B[Fe]!==G[Fe]){pe=B[Fe],fe=G[Fe];break}return pe<fe?-1:fe<pe?1:0},F.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},F.concat=function(B,G){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return F.alloc(0);let pe;if(G===void 0)for(G=0,pe=0;pe<B.length;++pe)G+=B[pe].length;const fe=F.allocUnsafe(G);let Fe=0;for(pe=0;pe<B.length;++pe){let st=B[pe];if(me(st,O))Fe+st.length>fe.length?(F.isBuffer(st)||(st=F.from(st)),st.copy(fe,Fe)):O.prototype.set.call(fe,st,Fe);else if(F.isBuffer(st))st.copy(fe,Fe);else throw new TypeError('"list" argument must be an Array of Buffers');Fe+=st.length}return fe};function be(q,B){if(F.isBuffer(q))return q.length;if(N.isView(q)||me(q,N))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);const G=q.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&G===0)return 0;let fe=!1;for(;;)switch(B){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return dt(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G*2;case"hex":return G>>>1;case"base64":return Be(q).length;default:if(fe)return pe?-1:dt(q).length;B=(""+B).toLowerCase(),fe=!0}}F.byteLength=be;function we(q,B,G){let pe=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0,B>>>=0,G<=B))return"";for(q||(q="utf8");;)switch(q){case"hex":return xe(this,B,G);case"utf8":case"utf-8":return Ce(this,B,G);case"ascii":return ie(this,B,G);case"latin1":case"binary":return Q(this,B,G);case"base64":return U(this,B,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,B,G);default:if(pe)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),pe=!0}}F.prototype._isBuffer=!0;function Me(q,B,G){const pe=q[B];q[B]=q[G],q[G]=pe}F.prototype.swap16=function(){const B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let G=0;G<B;G+=2)Me(this,G,G+1);return this},F.prototype.swap32=function(){const B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let G=0;G<B;G+=4)Me(this,G,G+3),Me(this,G+1,G+2);return this},F.prototype.swap64=function(){const B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let G=0;G<B;G+=8)Me(this,G,G+7),Me(this,G+1,G+6),Me(this,G+2,G+5),Me(this,G+3,G+4);return this},F.prototype.toString=function(){const B=this.length;return B===0?"":arguments.length===0?Ce(this,0,B):we.apply(this,arguments)},F.prototype.toLocaleString=F.prototype.toString,F.prototype.equals=function(B){if(!F.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:F.compare(this,B)===0},F.prototype.inspect=function(){let B="";const G=S.INSPECT_MAX_BYTES;return B=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&(B+=" ... "),"<Buffer "+B+">"},k&&(F.prototype[k]=F.prototype.inspect),F.prototype.compare=function(B,G,pe,fe,Fe){if(me(B,O)&&(B=F.from(B,B.offset,B.byteLength)),!F.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(G===void 0&&(G=0),pe===void 0&&(pe=B?B.length:0),fe===void 0&&(fe=0),Fe===void 0&&(Fe=this.length),G<0||pe>B.length||fe<0||Fe>this.length)throw new RangeError("out of range index");if(fe>=Fe&&G>=pe)return 0;if(fe>=Fe)return-1;if(G>=pe)return 1;if(G>>>=0,pe>>>=0,fe>>>=0,Fe>>>=0,this===B)return 0;let st=Fe-fe,Dt=pe-G;const un=Math.min(st,Dt),zt=this.slice(fe,Fe),Gt=B.slice(G,pe);for(let Xt=0;Xt<un;++Xt)if(zt[Xt]!==Gt[Xt]){st=zt[Xt],Dt=Gt[Xt];break}return st<Dt?-1:Dt<st?1:0};function Pe(q,B,G,pe,fe){if(q.length===0)return-1;if(typeof G=="string"?(pe=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,De(G)&&(G=fe?0:q.length-1),G<0&&(G=q.length+G),G>=q.length){if(fe)return-1;G=q.length-1}else if(G<0)if(fe)G=0;else return-1;if(typeof B=="string"&&(B=F.from(B,pe)),F.isBuffer(B))return B.length===0?-1:Ae(q,B,G,pe,fe);if(typeof B=="number")return B=B&255,typeof O.prototype.indexOf=="function"?fe?O.prototype.indexOf.call(q,B,G):O.prototype.lastIndexOf.call(q,B,G):Ae(q,[B],G,pe,fe);throw new TypeError("val must be string, number or Buffer")}function Ae(q,B,G,pe,fe){let Fe=1,st=q.length,Dt=B.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(q.length<2||B.length<2)return-1;Fe=2,st/=2,Dt/=2,G/=2}function un(Gt,Xt){return Fe===1?Gt[Xt]:Gt.readUInt16BE(Xt*Fe)}let zt;if(fe){let Gt=-1;for(zt=G;zt<st;zt++)if(un(q,zt)===un(B,Gt===-1?0:zt-Gt)){if(Gt===-1&&(Gt=zt),zt-Gt+1===Dt)return Gt*Fe}else Gt!==-1&&(zt-=zt-Gt),Gt=-1}else for(G+Dt>st&&(G=st-Dt),zt=G;zt>=0;zt--){let Gt=!0;for(let Xt=0;Xt<Dt;Xt++)if(un(q,zt+Xt)!==un(B,Xt)){Gt=!1;break}if(Gt)return zt}return-1}F.prototype.includes=function(B,G,pe){return this.indexOf(B,G,pe)!==-1},F.prototype.indexOf=function(B,G,pe){return Pe(this,B,G,pe,!0)},F.prototype.lastIndexOf=function(B,G,pe){return Pe(this,B,G,pe,!1)};function Te(q,B,G,pe){G=Number(G)||0;const fe=q.length-G;pe?(pe=Number(pe),pe>fe&&(pe=fe)):pe=fe;const Fe=B.length;pe>Fe/2&&(pe=Fe/2);let st;for(st=0;st<pe;++st){const Dt=parseInt(B.substr(st*2,2),16);if(De(Dt))return st;q[G+st]=Dt}return st}function qe(q,B,G,pe){return et(dt(B,q.length-G),q,G,pe)}function it(q,B,G,pe){return et(yt(B),q,G,pe)}function Ie(q,B,G,pe){return et(Be(B),q,G,pe)}function Re(q,B,G,pe){return et(M(B,q.length-G),q,G,pe)}F.prototype.write=function(B,G,pe,fe){if(G===void 0)fe="utf8",pe=this.length,G=0;else if(pe===void 0&&typeof G=="string")fe=G,pe=this.length,G=0;else if(isFinite(G))G=G>>>0,isFinite(pe)?(pe=pe>>>0,fe===void 0&&(fe="utf8")):(fe=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Fe=this.length-G;if((pe===void 0||pe>Fe)&&(pe=Fe),B.length>0&&(pe<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");let st=!1;for(;;)switch(fe){case"hex":return Te(this,B,G,pe);case"utf8":case"utf-8":return qe(this,B,G,pe);case"ascii":case"latin1":case"binary":return it(this,B,G,pe);case"base64":return Ie(this,B,G,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,B,G,pe);default:if(st)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),st=!0}},F.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(q,B,G){return B===0&&G===q.length?E.fromByteArray(q):E.fromByteArray(q.slice(B,G))}function Ce(q,B,G){G=Math.min(q.length,G);const pe=[];let fe=B;for(;fe<G;){const Fe=q[fe];let st=null,Dt=Fe>239?4:Fe>223?3:Fe>191?2:1;if(fe+Dt<=G){let un,zt,Gt,Xt;switch(Dt){case 1:Fe<128&&(st=Fe);break;case 2:un=q[fe+1],(un&192)===128&&(Xt=(Fe&31)<<6|un&63,Xt>127&&(st=Xt));break;case 3:un=q[fe+1],zt=q[fe+2],(un&192)===128&&(zt&192)===128&&(Xt=(Fe&15)<<12|(un&63)<<6|zt&63,Xt>2047&&(Xt<55296||Xt>57343)&&(st=Xt));break;case 4:un=q[fe+1],zt=q[fe+2],Gt=q[fe+3],(un&192)===128&&(zt&192)===128&&(Gt&192)===128&&(Xt=(Fe&15)<<18|(un&63)<<12|(zt&63)<<6|Gt&63,Xt>65535&&Xt<1114112&&(st=Xt))}}st===null?(st=65533,Dt=1):st>65535&&(st-=65536,pe.push(st>>>10&1023|55296),st=56320|st&1023),pe.push(st),fe+=Dt}return ce(pe)}const Ne=4096;function ce(q){const B=q.length;if(B<=Ne)return String.fromCharCode.apply(String,q);let G="",pe=0;for(;pe<B;)G+=String.fromCharCode.apply(String,q.slice(pe,pe+=Ne));return G}function ie(q,B,G){let pe="";G=Math.min(q.length,G);for(let fe=B;fe<G;++fe)pe+=String.fromCharCode(q[fe]&127);return pe}function Q(q,B,G){let pe="";G=Math.min(q.length,G);for(let fe=B;fe<G;++fe)pe+=String.fromCharCode(q[fe]);return pe}function xe(q,B,G){const pe=q.length;(!B||B<0)&&(B=0),(!G||G<0||G>pe)&&(G=pe);let fe="";for(let Fe=B;Fe<G;++Fe)fe+=Ke[q[Fe]];return fe}function Le(q,B,G){const pe=q.slice(B,G);let fe="";for(let Fe=0;Fe<pe.length-1;Fe+=2)fe+=String.fromCharCode(pe[Fe]+pe[Fe+1]*256);return fe}F.prototype.slice=function(B,G){const pe=this.length;B=~~B,G=G===void 0?pe:~~G,B<0?(B+=pe,B<0&&(B=0)):B>pe&&(B=pe),G<0?(G+=pe,G<0&&(G=0)):G>pe&&(G=pe),G<B&&(G=B);const fe=this.subarray(B,G);return Object.setPrototypeOf(fe,F.prototype),fe};function Se(q,B,G){if(q%1!==0||q<0)throw new RangeError("offset is not uint");if(q+B>G)throw new RangeError("Trying to access beyond buffer length")}F.prototype.readUintLE=F.prototype.readUIntLE=function(B,G,pe){B=B>>>0,G=G>>>0,pe||Se(B,G,this.length);let fe=this[B],Fe=1,st=0;for(;++st<G&&(Fe*=256);)fe+=this[B+st]*Fe;return fe},F.prototype.readUintBE=F.prototype.readUIntBE=function(B,G,pe){B=B>>>0,G=G>>>0,pe||Se(B,G,this.length);let fe=this[B+--G],Fe=1;for(;G>0&&(Fe*=256);)fe+=this[B+--G]*Fe;return fe},F.prototype.readUint8=F.prototype.readUInt8=function(B,G){return B=B>>>0,G||Se(B,1,this.length),this[B]},F.prototype.readUint16LE=F.prototype.readUInt16LE=function(B,G){return B=B>>>0,G||Se(B,2,this.length),this[B]|this[B+1]<<8},F.prototype.readUint16BE=F.prototype.readUInt16BE=function(B,G){return B=B>>>0,G||Se(B,2,this.length),this[B]<<8|this[B+1]},F.prototype.readUint32LE=F.prototype.readUInt32LE=function(B,G){return B=B>>>0,G||Se(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},F.prototype.readUint32BE=F.prototype.readUInt32BE=function(B,G){return B=B>>>0,G||Se(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},F.prototype.readBigUInt64LE=Ct(function(B){B=B>>>0,Oe(B,"offset");const G=this[B],pe=this[B+7];(G===void 0||pe===void 0)&&ve(B,this.length-8);const fe=G+this[++B]*2**8+this[++B]*2**16+this[++B]*2**24,Fe=this[++B]+this[++B]*2**8+this[++B]*2**16+pe*2**24;return BigInt(fe)+(BigInt(Fe)<<BigInt(32))}),F.prototype.readBigUInt64BE=Ct(function(B){B=B>>>0,Oe(B,"offset");const G=this[B],pe=this[B+7];(G===void 0||pe===void 0)&&ve(B,this.length-8);const fe=G*2**24+this[++B]*2**16+this[++B]*2**8+this[++B],Fe=this[++B]*2**24+this[++B]*2**16+this[++B]*2**8+pe;return(BigInt(fe)<<BigInt(32))+BigInt(Fe)}),F.prototype.readIntLE=function(B,G,pe){B=B>>>0,G=G>>>0,pe||Se(B,G,this.length);let fe=this[B],Fe=1,st=0;for(;++st<G&&(Fe*=256);)fe+=this[B+st]*Fe;return Fe*=128,fe>=Fe&&(fe-=Math.pow(2,8*G)),fe},F.prototype.readIntBE=function(B,G,pe){B=B>>>0,G=G>>>0,pe||Se(B,G,this.length);let fe=G,Fe=1,st=this[B+--fe];for(;fe>0&&(Fe*=256);)st+=this[B+--fe]*Fe;return Fe*=128,st>=Fe&&(st-=Math.pow(2,8*G)),st},F.prototype.readInt8=function(B,G){return B=B>>>0,G||Se(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},F.prototype.readInt16LE=function(B,G){B=B>>>0,G||Se(B,2,this.length);const pe=this[B]|this[B+1]<<8;return pe&32768?pe|4294901760:pe},F.prototype.readInt16BE=function(B,G){B=B>>>0,G||Se(B,2,this.length);const pe=this[B+1]|this[B]<<8;return pe&32768?pe|4294901760:pe},F.prototype.readInt32LE=function(B,G){return B=B>>>0,G||Se(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},F.prototype.readInt32BE=function(B,G){return B=B>>>0,G||Se(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},F.prototype.readBigInt64LE=Ct(function(B){B=B>>>0,Oe(B,"offset");const G=this[B],pe=this[B+7];(G===void 0||pe===void 0)&&ve(B,this.length-8);const fe=this[B+4]+this[B+5]*2**8+this[B+6]*2**16+(pe<<24);return(BigInt(fe)<<BigInt(32))+BigInt(G+this[++B]*2**8+this[++B]*2**16+this[++B]*2**24)}),F.prototype.readBigInt64BE=Ct(function(B){B=B>>>0,Oe(B,"offset");const G=this[B],pe=this[B+7];(G===void 0||pe===void 0)&&ve(B,this.length-8);const fe=(G<<24)+this[++B]*2**16+this[++B]*2**8+this[++B];return(BigInt(fe)<<BigInt(32))+BigInt(this[++B]*2**24+this[++B]*2**16+this[++B]*2**8+pe)}),F.prototype.readFloatLE=function(B,G){return B=B>>>0,G||Se(B,4,this.length),C.read(this,B,!0,23,4)},F.prototype.readFloatBE=function(B,G){return B=B>>>0,G||Se(B,4,this.length),C.read(this,B,!1,23,4)},F.prototype.readDoubleLE=function(B,G){return B=B>>>0,G||Se(B,8,this.length),C.read(this,B,!0,52,8)},F.prototype.readDoubleBE=function(B,G){return B=B>>>0,G||Se(B,8,this.length),C.read(this,B,!1,52,8)};function Ve(q,B,G,pe,fe,Fe){if(!F.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>fe||B<Fe)throw new RangeError('"value" argument is out of bounds');if(G+pe>q.length)throw new RangeError("Index out of range")}F.prototype.writeUintLE=F.prototype.writeUIntLE=function(B,G,pe,fe){if(B=+B,G=G>>>0,pe=pe>>>0,!fe){const Dt=Math.pow(2,8*pe)-1;Ve(this,B,G,pe,Dt,0)}let Fe=1,st=0;for(this[G]=B&255;++st<pe&&(Fe*=256);)this[G+st]=B/Fe&255;return G+pe},F.prototype.writeUintBE=F.prototype.writeUIntBE=function(B,G,pe,fe){if(B=+B,G=G>>>0,pe=pe>>>0,!fe){const Dt=Math.pow(2,8*pe)-1;Ve(this,B,G,pe,Dt,0)}let Fe=pe-1,st=1;for(this[G+Fe]=B&255;--Fe>=0&&(st*=256);)this[G+Fe]=B/st&255;return G+pe},F.prototype.writeUint8=F.prototype.writeUInt8=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,1,255,0),this[G]=B&255,G+1},F.prototype.writeUint16LE=F.prototype.writeUInt16LE=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,2,65535,0),this[G]=B&255,this[G+1]=B>>>8,G+2},F.prototype.writeUint16BE=F.prototype.writeUInt16BE=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,2,65535,0),this[G]=B>>>8,this[G+1]=B&255,G+2},F.prototype.writeUint32LE=F.prototype.writeUInt32LE=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,4,4294967295,0),this[G+3]=B>>>24,this[G+2]=B>>>16,this[G+1]=B>>>8,this[G]=B&255,G+4},F.prototype.writeUint32BE=F.prototype.writeUInt32BE=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,4,4294967295,0),this[G]=B>>>24,this[G+1]=B>>>16,this[G+2]=B>>>8,this[G+3]=B&255,G+4};function xt(q,B,G,pe,fe){he(B,pe,fe,q,G,7);let Fe=Number(B&BigInt(4294967295));q[G++]=Fe,Fe=Fe>>8,q[G++]=Fe,Fe=Fe>>8,q[G++]=Fe,Fe=Fe>>8,q[G++]=Fe;let st=Number(B>>BigInt(32)&BigInt(4294967295));return q[G++]=st,st=st>>8,q[G++]=st,st=st>>8,q[G++]=st,st=st>>8,q[G++]=st,G}function ht(q,B,G,pe,fe){he(B,pe,fe,q,G,7);let Fe=Number(B&BigInt(4294967295));q[G+7]=Fe,Fe=Fe>>8,q[G+6]=Fe,Fe=Fe>>8,q[G+5]=Fe,Fe=Fe>>8,q[G+4]=Fe;let st=Number(B>>BigInt(32)&BigInt(4294967295));return q[G+3]=st,st=st>>8,q[G+2]=st,st=st>>8,q[G+1]=st,st=st>>8,q[G]=st,G+8}F.prototype.writeBigUInt64LE=Ct(function(B,G=0){return xt(this,B,G,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeBigUInt64BE=Ct(function(B,G=0){return ht(this,B,G,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeIntLE=function(B,G,pe,fe){if(B=+B,G=G>>>0,!fe){const un=Math.pow(2,8*pe-1);Ve(this,B,G,pe,un-1,-un)}let Fe=0,st=1,Dt=0;for(this[G]=B&255;++Fe<pe&&(st*=256);)B<0&&Dt===0&&this[G+Fe-1]!==0&&(Dt=1),this[G+Fe]=(B/st>>0)-Dt&255;return G+pe},F.prototype.writeIntBE=function(B,G,pe,fe){if(B=+B,G=G>>>0,!fe){const un=Math.pow(2,8*pe-1);Ve(this,B,G,pe,un-1,-un)}let Fe=pe-1,st=1,Dt=0;for(this[G+Fe]=B&255;--Fe>=0&&(st*=256);)B<0&&Dt===0&&this[G+Fe+1]!==0&&(Dt=1),this[G+Fe]=(B/st>>0)-Dt&255;return G+pe},F.prototype.writeInt8=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,1,127,-128),B<0&&(B=255+B+1),this[G]=B&255,G+1},F.prototype.writeInt16LE=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,2,32767,-32768),this[G]=B&255,this[G+1]=B>>>8,G+2},F.prototype.writeInt16BE=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,2,32767,-32768),this[G]=B>>>8,this[G+1]=B&255,G+2},F.prototype.writeInt32LE=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,4,2147483647,-2147483648),this[G]=B&255,this[G+1]=B>>>8,this[G+2]=B>>>16,this[G+3]=B>>>24,G+4},F.prototype.writeInt32BE=function(B,G,pe){return B=+B,G=G>>>0,pe||Ve(this,B,G,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[G]=B>>>24,this[G+1]=B>>>16,this[G+2]=B>>>8,this[G+3]=B&255,G+4},F.prototype.writeBigInt64LE=Ct(function(B,G=0){return xt(this,B,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),F.prototype.writeBigInt64BE=Ct(function(B,G=0){return ht(this,B,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(q,B,G,pe,fe,Fe){if(G+pe>q.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function Ft(q,B,G,pe,fe){return B=+B,G=G>>>0,fe||Et(q,B,G,4),C.write(q,B,G,pe,23,4),G+4}F.prototype.writeFloatLE=function(B,G,pe){return Ft(this,B,G,!0,pe)},F.prototype.writeFloatBE=function(B,G,pe){return Ft(this,B,G,!1,pe)};function Tt(q,B,G,pe,fe){return B=+B,G=G>>>0,fe||Et(q,B,G,8),C.write(q,B,G,pe,52,8),G+8}F.prototype.writeDoubleLE=function(B,G,pe){return Tt(this,B,G,!0,pe)},F.prototype.writeDoubleBE=function(B,G,pe){return Tt(this,B,G,!1,pe)},F.prototype.copy=function(B,G,pe,fe){if(!F.isBuffer(B))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!fe&&fe!==0&&(fe=this.length),G>=B.length&&(G=B.length),G||(G=0),fe>0&&fe<pe&&(fe=pe),fe===pe||B.length===0||this.length===0)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),B.length-G<fe-pe&&(fe=B.length-G+pe);const Fe=fe-pe;return this===B&&typeof O.prototype.copyWithin=="function"?this.copyWithin(G,pe,fe):O.prototype.set.call(B,this.subarray(pe,fe),G),Fe},F.prototype.fill=function(B,G,pe,fe){if(typeof B=="string"){if(typeof G=="string"?(fe=G,G=0,pe=this.length):typeof pe=="string"&&(fe=pe,pe=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!F.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(B.length===1){const st=B.charCodeAt(0);(fe==="utf8"&&st<128||fe==="latin1")&&(B=st)}}else typeof B=="number"?B=B&255:typeof B=="boolean"&&(B=Number(B));if(G<0||this.length<G||this.length<pe)throw new RangeError("Out of range index");if(pe<=G)return this;G=G>>>0,pe=pe===void 0?this.length:pe>>>0,B||(B=0);let Fe;if(typeof B=="number")for(Fe=G;Fe<pe;++Fe)this[Fe]=B;else{const st=F.isBuffer(B)?B:F.from(B,fe),Dt=st.length;if(Dt===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(Fe=0;Fe<pe-G;++Fe)this[Fe+G]=st[Fe%Dt]}return this};const Ut={};function ge(q,B,G){Ut[q]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:B.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${q}]`,this.stack,delete this.name}get code(){return q}set code(fe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:fe,writable:!0})}toString(){return`${this.name} [${q}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(q){return q?`${q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(q,B){return`The "${q}" argument must be of type number. Received type ${typeof B}`},TypeError),ge("ERR_OUT_OF_RANGE",function(q,B,G){let pe=`The value of "${q}" is out of range.`,fe=G;return Number.isInteger(G)&&Math.abs(G)>2**32?fe=I(String(G)):typeof G=="bigint"&&(fe=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(fe=I(fe)),fe+="n"),pe+=` It must be ${B}. Received ${fe}`,pe},RangeError);function I(q){let B="",G=q.length;const pe=q[0]==="-"?1:0;for(;G>=pe+4;G-=3)B=`_${q.slice(G-3,G)}${B}`;return`${q.slice(0,G)}${B}`}function V(q,B,G){Oe(B,"offset"),(q[B]===void 0||q[B+G]===void 0)&&ve(B,q.length-(G+1))}function he(q,B,G,pe,fe,Fe){if(q>G||q<B){const st=typeof B=="bigint"?"n":"";let Dt;throw B===0||B===BigInt(0)?Dt=`>= 0${st} and < 2${st} ** ${(Fe+1)*8}${st}`:Dt=`>= -(2${st} ** ${(Fe+1)*8-1}${st}) and < 2 ** ${(Fe+1)*8-1}${st}`,new Ut.ERR_OUT_OF_RANGE("value",Dt,q)}V(pe,fe,Fe)}function Oe(q,B){if(typeof q!="number")throw new Ut.ERR_INVALID_ARG_TYPE(B,"number",q)}function ve(q,B,G){throw Math.floor(q)!==q?(Oe(q,G),new Ut.ERR_OUT_OF_RANGE("offset","an integer",q)):B<0?new Ut.ERR_BUFFER_OUT_OF_BOUNDS:new Ut.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${B}`,q)}const ke=/[^+/0-9A-Za-z-_]/g;function le(q){if(q=q.split("=")[0],q=q.trim().replace(ke,""),q.length<2)return"";for(;q.length%4!==0;)q=q+"=";return q}function dt(q,B){B=B||1/0;let G;const pe=q.length;let fe=null;const Fe=[];for(let st=0;st<pe;++st){if(G=q.charCodeAt(st),G>55295&&G<57344){if(!fe){if(G>56319){(B-=3)>-1&&Fe.push(239,191,189);continue}else if(st+1===pe){(B-=3)>-1&&Fe.push(239,191,189);continue}fe=G;continue}if(G<56320){(B-=3)>-1&&Fe.push(239,191,189),fe=G;continue}G=(fe-55296<<10|G-56320)+65536}else fe&&(B-=3)>-1&&Fe.push(239,191,189);if(fe=null,G<128){if((B-=1)<0)break;Fe.push(G)}else if(G<2048){if((B-=2)<0)break;Fe.push(G>>6|192,G&63|128)}else if(G<65536){if((B-=3)<0)break;Fe.push(G>>12|224,G>>6&63|128,G&63|128)}else if(G<1114112){if((B-=4)<0)break;Fe.push(G>>18|240,G>>12&63|128,G>>6&63|128,G&63|128)}else throw new Error("Invalid code point")}return Fe}function yt(q){const B=[];for(let G=0;G<q.length;++G)B.push(q.charCodeAt(G)&255);return B}function M(q,B){let G,pe,fe;const Fe=[];for(let st=0;st<q.length&&!((B-=2)<0);++st)G=q.charCodeAt(st),pe=G>>8,fe=G%256,Fe.push(fe),Fe.push(pe);return Fe}function Be(q){return E.toByteArray(le(q))}function et(q,B,G,pe){let fe;for(fe=0;fe<pe&&!(fe+G>=B.length||fe>=q.length);++fe)B[fe+G]=q[fe];return fe}function me(q,B){return q instanceof B||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===B.name}function De(q){return q!==q}const Ke=function(){const q="0123456789abcdef",B=new Array(256);for(let G=0;G<16;++G){const pe=G*16;for(let fe=0;fe<16;++fe)B[pe+fe]=q[G]+q[fe]}return B}();function Ct(q){return typeof BigInt>"u"?ye:q}function ye(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(dS)),dS}var fS,PI;function Vr(){if(PI)return fS;PI=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return fS={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},fS}var hS={exports:{}},pS,FI;function o5(){return FI||(FI=1,pS={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),pS}var mS,LI;function mi(){if(LI)return mS;LI=1;const{format:e,inspect:t}=o5(),{AggregateError:n}=Vr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function c(_,x){if(!_)throw new u.ERR_INTERNAL_ASSERTION(x)}function f(_){let x="",S=_.length;const E=_[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${_.slice(S-3,S)}${x}`;return`${_.slice(0,S)}${x}`}function h(_,x,S){if(typeof x=="function")return c(x.length<=S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return c(E===S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function p(_,x,S){S||(S=Error);class E extends S{constructor(...k){super(h(_,x,k))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,u[_]=E}function g(_){const x=s+_.name;return Object.defineProperty(_,"name",{value:x}),_}function v(_,x){if(_&&x&&_!==x){if(Array.isArray(x.errors))return x.errors.push(_),x;const S=new r([x,_],x.message);return S.code=x.code,S}return _||x}class b extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(_,x,S)=>{c(typeof _=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const C=[],k=[],D=[];for(const N of x)c(typeof N=="string","All expected entries have to be of type string"),i.includes(N)?C.push(N.toLowerCase()):o.test(N)?k.push(N):(c(N!=="object",'The value "object" should be written as "Object"'),D.push(N));if(k.length>0){const N=C.indexOf("object");N!==-1&&(C.splice(C,N,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const N=C.pop();E+=`one of type ${C.join(", ")}, or ${N}`}}(k.length>0||D.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const N=k.pop();E+=`an instance of ${k.join(", ")}, or ${N}`}}D.length>0&&(E+=" or ")}switch(D.length){case 0:break;case 1:D[0].toLowerCase()!==D[0]&&(E+="an "),E+=`${D[0]}`;break;case 2:E+=`one of ${D[0]} or ${D[1]}`;break;default:{const N=D.pop();E+=`one of ${D.join(", ")}, or ${N}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var O;if((O=S.constructor)!==null&&O!==void 0&&O.name)E+=`. Received an instance of ${S.constructor.name}`;else{const N=t(S,{depth:-1});E+=`. Received ${N}`}}else{let N=t(S,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),E+=`. Received type ${typeof S} (${N})`}return E},TypeError),p("ERR_INVALID_ARG_VALUE",(_,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${S}. Received ${E}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(_,x,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${_} to be returned from the "${x}" function but got ${C}.`},TypeError),p("ERR_MISSING_ARGS",(..._)=>{c(_.length>0,"At least one arg needs to be specified");let x;const S=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${_[0]} argument`;break;case 2:x+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();x+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(_,x,S)=>{c(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=f(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=f(E)),E+="n"}else E=t(S);return`The value of "${_}" is out of range. It must be ${x}. Received ${E}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),mS={AbortError:b,aggregateTwoErrors:g(v),hideStackFrames:g,codes:u},mS}var lm={exports:{}},$I;function a0(){if($I)return lm.exports;$I=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return lm.exports=e,lm.exports.AbortSignal=t,lm.exports.default=e,lm.exports}var nb={exports:{}},BI;function Fw(){if(BI)return nb.exports;BI=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,D,O){return Function.prototype.apply.call(k,D,O)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}nb.exports=i,nb.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function u(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(k){for(var D=[],O=1;O<arguments.length;O++)D.push(arguments[O]);var N=k==="error",z=this._events;if(z!==void 0)N=N&&z.error===void 0;else if(!N)return!1;if(N){var H;if(D.length>0&&(H=D[0]),H instanceof Error)throw H;var X=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw X.context=H,X}var F=z[k];if(F===void 0)return!1;if(typeof F=="function")t(F,this,D);else for(var Z=F.length,L=v(F,Z),O=0;O<Z;++O)t(L[O],this,D);return!0};function c(C,k,D,O){var N,z,H;if(s(D),z=C._events,z===void 0?(z=C._events=Object.create(null),C._eventsCount=0):(z.newListener!==void 0&&(C.emit("newListener",k,D.listener?D.listener:D),z=C._events),H=z[k]),H===void 0)H=z[k]=D,++C._eventsCount;else if(typeof H=="function"?H=z[k]=O?[D,H]:[H,D]:O?H.unshift(D):H.push(D),N=u(C),N>0&&H.length>N&&!H.warned){H.warned=!0;var X=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");X.name="MaxListenersExceededWarning",X.emitter=C,X.type=k,X.count=H.length,r(X)}return C}i.prototype.addListener=function(k,D){return c(this,k,D,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,D){return c(this,k,D,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,k,D){var O={fired:!1,wrapFn:void 0,target:C,type:k,listener:D},N=f.bind(O);return N.listener=D,O.wrapFn=N,N}i.prototype.once=function(k,D){return s(D),this.on(k,h(this,k,D)),this},i.prototype.prependOnceListener=function(k,D){return s(D),this.prependListener(k,h(this,k,D)),this},i.prototype.removeListener=function(k,D){var O,N,z,H,X;if(s(D),N=this._events,N===void 0)return this;if(O=N[k],O===void 0)return this;if(O===D||O.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete N[k],N.removeListener&&this.emit("removeListener",k,O.listener||D));else if(typeof O!="function"){for(z=-1,H=O.length-1;H>=0;H--)if(O[H]===D||O[H].listener===D){X=O[H].listener,z=H;break}if(z<0)return this;z===0?O.shift():b(O,z),O.length===1&&(N[k]=O[0]),N.removeListener!==void 0&&this.emit("removeListener",k,X||D)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var D,O,N;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[k]),this;if(arguments.length===0){var z=Object.keys(O),H;for(N=0;N<z.length;++N)H=z[N],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=O[k],typeof D=="function")this.removeListener(k,D);else if(D!==void 0)for(N=D.length-1;N>=0;N--)this.removeListener(k,D[N]);return this};function p(C,k,D){var O=C._events;if(O===void 0)return[];var N=O[k];return N===void 0?[]:typeof N=="function"?D?[N.listener||N]:[N]:D?_(N):v(N,N.length)}i.prototype.listeners=function(k){return p(this,k,!0)},i.prototype.rawListeners=function(k){return p(this,k,!1)},i.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):g.call(C,k)},i.prototype.listenerCount=g;function g(C){var k=this._events;if(k!==void 0){var D=k[C];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,k){for(var D=new Array(k),O=0;O<k;++O)D[O]=C[O];return D}function b(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function _(C){for(var k=new Array(C.length),D=0;D<k.length;++D)k[D]=C[D].listener||C[D];return k}function x(C,k){return new Promise(function(D,O){function N(H){C.removeListener(k,z),O(H)}function z(){typeof C.removeListener=="function"&&C.removeListener("error",N),D([].slice.call(arguments))}E(C,k,z,{once:!0}),k!=="error"&&S(C,N,{once:!0})})}function S(C,k,D){typeof C.on=="function"&&E(C,"error",k,D)}function E(C,k,D,O){if(typeof C.on=="function")O.once?C.once(k,D):C.on(k,D);else if(typeof C.addEventListener=="function")C.addEventListener(k,function N(z){O.once&&C.removeEventListener(k,N),D(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return nb.exports}var zI;function ki(){return zI||(zI=1,function(e){const t=fc(),{format:n,inspect:r}=o5(),{codes:{ERR_INVALID_ARG_TYPE:a}}=mi(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Vr(),u=globalThis.AbortSignal||a0().AbortSignal,c=globalThis.AbortController||a0().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,p=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(b,_)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(_,"AbortSignal",b)},v=(b,_)=>{if(typeof b!="function")throw new a(_,"Function",b)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(b){let _=!1;return function(...x){_||(_=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,_;return{promise:new Promise((S,E)=>{b=S,_=E}),resolve:b,reject:_}},promisify(b){return new Promise((_,x)=>{b((S,...E)=>S?x(S):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof f},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:p,deprecate(b,_){return b},addAbortListener:Fw().addAbortListener||function(_,x){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),v(x,"listener");let S;return _.aborted?queueMicrotask(()=>x()):(_.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{_.removeEventListener("abort",x)}),{__proto__:null,[s](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:u.any||function(_){if(_.length===1)return _[0];const x=new c,S=()=>x.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(hS)),hS.exports}var rb={},gS,UI;function G0(){if(UI)return gS;UI=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:p,StringPrototypeTrim:g}=Vr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=mi(),{normalizeEncoding:C}=ki(),{isAsyncFunction:k,isArrayBufferView:D}=ki().types,O={};function N(Q){return Q===(Q|0)}function z(Q){return Q===Q>>>0}const H=/^[0-7]+$/,X="must be a 32-bit unsigned integer or an octal string";function F(Q,xe,Le){if(typeof Q>"u"&&(Q=Le),typeof Q=="string"){if(f(H,Q)===null)throw new x(xe,Q,X);Q=u(Q,8)}return de(Q,xe),Q}const Z=v((Q,xe,Le=s,Se=o)=>{if(typeof Q!="number")throw new _(xe,"number",Q);if(!a(Q))throw new S(xe,"an integer",Q);if(Q<Le||Q>Se)throw new S(xe,`>= ${Le} && <= ${Se}`,Q)}),L=v((Q,xe,Le=-2147483648,Se=2147483647)=>{if(typeof Q!="number")throw new _(xe,"number",Q);if(!a(Q))throw new S(xe,"an integer",Q);if(Q<Le||Q>Se)throw new S(xe,`>= ${Le} && <= ${Se}`,Q)}),de=v((Q,xe,Le=!1)=>{if(typeof Q!="number")throw new _(xe,"number",Q);if(!a(Q))throw new S(xe,"an integer",Q);const Se=Le?1:0,Ve=4294967295;if(Q<Se||Q>Ve)throw new S(xe,`>= ${Se} && <= ${Ve}`,Q)});function ae(Q,xe){if(typeof Q!="string")throw new _(xe,"string",Q)}function ne(Q,xe,Le=void 0,Se){if(typeof Q!="number")throw new _(xe,"number",Q);if(Le!=null&&Q<Le||Se!=null&&Q>Se||(Le!=null||Se!=null)&&i(Q))throw new S(xe,`${Le!=null?`>= ${Le}`:""}${Le!=null&&Se!=null?" && ":""}${Se!=null?`<= ${Se}`:""}`,Q)}const ee=v((Q,xe,Le)=>{if(!t(Le,Q)){const Ve="must be one of: "+n(r(Le,xt=>typeof xt=="string"?`'${xt}'`:h(xt)),", ");throw new x(xe,Q,Ve)}});function se(Q,xe){if(typeof Q!="boolean")throw new _(xe,"boolean",Q)}function W(Q,xe,Le){return Q==null||!c(Q,xe)?Le:Q[xe]}const J=v((Q,xe,Le=null)=>{const Se=W(Le,"allowArray",!1),Ve=W(Le,"allowFunction",!1);if(!W(Le,"nullable",!1)&&Q===null||!Se&&e(Q)||typeof Q!="object"&&(!Ve||typeof Q!="function"))throw new _(xe,"Object",Q)}),Y=v((Q,xe)=>{if(Q!=null&&typeof Q!="object"&&typeof Q!="function")throw new _(xe,"a dictionary",Q)}),re=v((Q,xe,Le=0)=>{if(!e(Q))throw new _(xe,"Array",Q);if(Q.length<Le){const Se=`must be longer than ${Le}`;throw new x(xe,Q,Se)}});function be(Q,xe){re(Q,xe);for(let Le=0;Le<Q.length;Le++)ae(Q[Le],`${xe}[${Le}]`)}function we(Q,xe){re(Q,xe);for(let Le=0;Le<Q.length;Le++)se(Q[Le],`${xe}[${Le}]`)}function Me(Q,xe){re(Q,xe);for(let Le=0;Le<Q.length;Le++){const Se=Q[Le],Ve=`${xe}[${Le}]`;if(Se==null)throw new _(Ve,"AbortSignal",Se);it(Se,Ve)}}function Pe(Q,xe="signal"){if(ae(Q,xe),O[Q]===void 0)throw O[p(Q)]!==void 0?new E(Q+" (signals must use all capital letters)"):new E(Q)}const Ae=v((Q,xe="buffer")=>{if(!D(Q))throw new _(xe,["Buffer","TypedArray","DataView"],Q)});function Te(Q,xe){const Le=C(xe),Se=Q.length;if(Le==="hex"&&Se%2!==0)throw new x("encoding",xe,`is invalid for data of length ${Se}`)}function qe(Q,xe="Port",Le=!0){if(typeof Q!="number"&&typeof Q!="string"||typeof Q=="string"&&g(Q).length===0||+Q!==+Q>>>0||Q>65535||Q===0&&!Le)throw new b(xe,Q,Le);return Q|0}const it=v((Q,xe)=>{if(Q!==void 0&&(Q===null||typeof Q!="object"||!("aborted"in Q)))throw new _(xe,"AbortSignal",Q)}),Ie=v((Q,xe)=>{if(typeof Q!="function")throw new _(xe,"Function",Q)}),Re=v((Q,xe)=>{if(typeof Q!="function"||k(Q))throw new _(xe,"Function",Q)}),U=v((Q,xe)=>{if(Q!==void 0)throw new _(xe,"undefined",Q)});function Ce(Q,xe,Le){if(!t(Le,Q))throw new _(xe,`('${n(Le,"|")}')`,Q)}const Ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ce(Q,xe){if(typeof Q>"u"||!f(Ne,Q))throw new x(xe,Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(Q){if(typeof Q=="string")return ce(Q,"hints"),Q;if(e(Q)){const xe=Q.length;let Le="";if(xe===0)return Le;for(let Se=0;Se<xe;Se++){const Ve=Q[Se];ce(Ve,"hints"),Le+=Ve,Se!==xe-1&&(Le+=", ")}return Le}throw new x("hints",Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return gS={isInt32:N,isUint32:z,parseFileMode:F,validateArray:re,validateStringArray:be,validateBooleanArray:we,validateAbortSignalArray:Me,validateBoolean:se,validateBuffer:Ae,validateDictionary:Y,validateEncoding:Te,validateFunction:Ie,validateInt32:L,validateInteger:Z,validateNumber:ne,validateObject:J,validateOneOf:ee,validatePlainFunction:Re,validatePort:qe,validateSignalName:Pe,validateString:ae,validateUint32:de,validateUndefined:U,validateUnion:Ce,validateAbortSignal:it,validateLinkHeaderValue:ie},gS}var ab={exports:{}},yS={},qI;function Rd(){return qI||(qI=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function u(C){if(a===setTimeout)return setTimeout(C,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(i===clearTimeout)return clearTimeout(C);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var f=[],h=!1,p,g=-1;function v(){!h||!p||(h=!1,p.length?f=p.concat(f):g=-1,f.length&&b())}function b(){if(!h){var C=u(v);h=!0;for(var k=f.length;k;){for(p=f,f=[];++g<k;)p&&p[g].run();g=-1,k=f.length}p=null,h=!1,c(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)k[D-1]=arguments[D];f.push(new _(C,k)),f.length===1&&!h&&u(b)};function _(C,k){this.fun=C,this.array=k}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(yS)),yS}var bS,HI;function Gl(){if(HI)return bS;HI=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Vr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),u=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function f(W,J=!1){var Y;return!!(W&&typeof W.pipe=="function"&&typeof W.on=="function"&&(!J||typeof W.pause=="function"&&typeof W.resume=="function")&&(!W._writableState||((Y=W._readableState)===null||Y===void 0?void 0:Y.readable)!==!1)&&(!W._writableState||W._readableState))}function h(W){var J;return!!(W&&typeof W.write=="function"&&typeof W.on=="function"&&(!W._readableState||((J=W._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function p(W){return!!(W&&typeof W.pipe=="function"&&W._readableState&&typeof W.on=="function"&&typeof W.write=="function")}function g(W){return W&&(W._readableState||W._writableState||typeof W.write=="function"&&typeof W.on=="function"||typeof W.pipe=="function"&&typeof W.on=="function")}function v(W){return!!(W&&!g(W)&&typeof W.pipeThrough=="function"&&typeof W.getReader=="function"&&typeof W.cancel=="function")}function b(W){return!!(W&&!g(W)&&typeof W.getWriter=="function"&&typeof W.abort=="function")}function _(W){return!!(W&&!g(W)&&typeof W.readable=="object"&&typeof W.writable=="object")}function x(W){return v(W)||b(W)||_(W)}function S(W,J){return W==null?!1:J===!0?typeof W[e]=="function":J===!1?typeof W[t]=="function":typeof W[e]=="function"||typeof W[t]=="function"}function E(W){if(!g(W))return null;const J=W._writableState,Y=W._readableState,re=J||Y;return!!(W.destroyed||W[r]||re!=null&&re.destroyed)}function C(W){if(!h(W))return null;if(W.writableEnded===!0)return!0;const J=W._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function k(W,J){if(!h(W))return null;if(W.writableFinished===!0)return!0;const Y=W._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.finished)!="boolean"?null:!!(Y.finished||J===!1&&Y.ended===!0&&Y.length===0)}function D(W){if(!f(W))return null;if(W.readableEnded===!0)return!0;const J=W._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function O(W,J){if(!f(W))return null;const Y=W._readableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.endEmitted)!="boolean"?null:!!(Y.endEmitted||J===!1&&Y.ended===!0&&Y.length===0)}function N(W){return W&&W[i]!=null?W[i]:typeof(W==null?void 0:W.readable)!="boolean"?null:E(W)?!1:f(W)&&W.readable&&!O(W)}function z(W){return W&&W[o]!=null?W[o]:typeof(W==null?void 0:W.writable)!="boolean"?null:E(W)?!1:h(W)&&W.writable&&!C(W)}function H(W,J){return g(W)?E(W)?!0:!((J==null?void 0:J.readable)!==!1&&N(W)||(J==null?void 0:J.writable)!==!1&&z(W)):null}function X(W){var J,Y;return g(W)?W.writableErrored?W.writableErrored:(J=(Y=W._writableState)===null||Y===void 0?void 0:Y.errored)!==null&&J!==void 0?J:null:null}function F(W){var J,Y;return g(W)?W.readableErrored?W.readableErrored:(J=(Y=W._readableState)===null||Y===void 0?void 0:Y.errored)!==null&&J!==void 0?J:null:null}function Z(W){if(!g(W))return null;if(typeof W.closed=="boolean")return W.closed;const J=W._writableState,Y=W._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(Y==null?void 0:Y.closed)=="boolean"?(J==null?void 0:J.closed)||(Y==null?void 0:Y.closed):typeof W._closed=="boolean"&&L(W)?W._closed:null}function L(W){return typeof W._closed=="boolean"&&typeof W._defaultKeepAlive=="boolean"&&typeof W._removedConnection=="boolean"&&typeof W._removedContLen=="boolean"}function de(W){return typeof W._sent100=="boolean"&&L(W)}function ae(W){var J;return typeof W._consuming=="boolean"&&typeof W._dumped=="boolean"&&((J=W.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function ne(W){if(!g(W))return null;const J=W._writableState,Y=W._readableState,re=J||Y;return!re&&de(W)||!!(re&&re.autoDestroy&&re.emitClose&&re.closed===!1)}function ee(W){var J;return!!(W&&((J=W[s])!==null&&J!==void 0?J:W.readableDidRead||W.readableAborted))}function se(W){var J,Y,re,be,we,Me,Pe,Ae,Te,qe;return!!(W&&((J=(Y=(re=(be=(we=(Me=W[a])!==null&&Me!==void 0?Me:W.readableErrored)!==null&&we!==void 0?we:W.writableErrored)!==null&&be!==void 0?be:(Pe=W._readableState)===null||Pe===void 0?void 0:Pe.errorEmitted)!==null&&re!==void 0?re:(Ae=W._writableState)===null||Ae===void 0?void 0:Ae.errorEmitted)!==null&&Y!==void 0?Y:(Te=W._readableState)===null||Te===void 0?void 0:Te.errored)!==null&&J!==void 0?J:!((qe=W._writableState)===null||qe===void 0)&&qe.errored))}return bS={isDestroyed:E,kIsDestroyed:r,isDisturbed:ee,kIsDisturbed:s,isErrored:se,kIsErrored:a,isReadable:N,kIsReadable:i,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:o,isClosed:Z,isDuplexNodeStream:p,isFinished:H,isIterable:S,isReadableNodeStream:f,isReadableStream:v,isReadableEnded:D,isReadableFinished:O,isReadableErrored:F,isNodeStream:g,isWebStream:x,isWritable:z,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:k,isWritableErrored:X,isServerRequest:ae,isServerResponse:de,willEmitClose:ne,isTransformStream:_},bS}var VI;function hc(){if(VI)return ab.exports;VI=1;const e=Rd(),{AbortError:t,codes:n}=mi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=ki(),{validateAbortSignal:s,validateFunction:u,validateObject:c,validateBoolean:f}=G0(),{Promise:h,PromisePrototypeThen:p,SymbolDispose:g}=Vr(),{isClosed:v,isReadable:b,isReadableNodeStream:_,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:k,isWritableStream:D,isWritableFinished:O,isWritableErrored:N,isNodeStream:z,willEmitClose:H,kIsClosedPromise:X}=Gl();let F;function Z(ee){return ee.setHeader&&typeof ee.abort=="function"}const L=()=>{};function de(ee,se,W){var J,Y;if(arguments.length===2?(W=se,se=i):se==null?se=i:c(se,"options"),u(W,"callback"),s(se.signal,"options.signal"),W=o(W),x(ee)||D(ee))return ae(ee,se,W);if(!z(ee))throw new r("stream",["ReadableStream","WritableStream","Stream"],ee);const re=(J=se.readable)!==null&&J!==void 0?J:_(ee),be=(Y=se.writable)!==null&&Y!==void 0?Y:k(ee),we=ee._writableState,Me=ee._readableState,Pe=()=>{ee.writable||qe()};let Ae=H(ee)&&_(ee)===re&&k(ee)===be,Te=O(ee,!1);const qe=()=>{Te=!0,ee.destroyed&&(Ae=!1),!(Ae&&(!ee.readable||re))&&(!re||it)&&W.call(ee)};let it=S(ee,!1);const Ie=()=>{it=!0,ee.destroyed&&(Ae=!1),!(Ae&&(!ee.writable||be))&&(!be||Te)&&W.call(ee)},Re=Q=>{W.call(ee,Q)};let U=v(ee);const Ce=()=>{U=!0;const Q=N(ee)||E(ee);if(Q&&typeof Q!="boolean")return W.call(ee,Q);if(re&&!it&&_(ee,!0)&&!S(ee,!1))return W.call(ee,new a);if(be&&!Te&&!O(ee,!1))return W.call(ee,new a);W.call(ee)},Ne=()=>{U=!0;const Q=N(ee)||E(ee);if(Q&&typeof Q!="boolean")return W.call(ee,Q);W.call(ee)},ce=()=>{ee.req.on("finish",qe)};Z(ee)?(ee.on("complete",qe),Ae||ee.on("abort",Ce),ee.req?ce():ee.on("request",ce)):be&&!we&&(ee.on("end",Pe),ee.on("close",Pe)),!Ae&&typeof ee.aborted=="boolean"&&ee.on("aborted",Ce),ee.on("end",Ie),ee.on("finish",qe),se.error!==!1&&ee.on("error",Re),ee.on("close",Ce),U?e.nextTick(Ce):we!=null&&we.errorEmitted||Me!=null&&Me.errorEmitted?Ae||e.nextTick(Ne):(!re&&(!Ae||b(ee))&&(Te||C(ee)===!1)||!be&&(!Ae||C(ee))&&(it||b(ee)===!1)||Me&&ee.req&&ee.aborted)&&e.nextTick(Ne);const ie=()=>{W=L,ee.removeListener("aborted",Ce),ee.removeListener("complete",qe),ee.removeListener("abort",Ce),ee.removeListener("request",ce),ee.req&&ee.req.removeListener("finish",qe),ee.removeListener("end",Pe),ee.removeListener("close",Pe),ee.removeListener("finish",qe),ee.removeListener("end",Ie),ee.removeListener("error",Re),ee.removeListener("close",Ce)};if(se.signal&&!U){const Q=()=>{const xe=W;ie(),xe.call(ee,new t(void 0,{cause:se.signal.reason}))};if(se.signal.aborted)e.nextTick(Q);else{F=F||ki().addAbortListener;const xe=F(se.signal,Q),Le=W;W=o((...Se)=>{xe[g](),Le.apply(ee,Se)})}}return ie}function ae(ee,se,W){let J=!1,Y=L;if(se.signal)if(Y=()=>{J=!0,W.call(ee,new t(void 0,{cause:se.signal.reason}))},se.signal.aborted)e.nextTick(Y);else{F=F||ki().addAbortListener;const be=F(se.signal,Y),we=W;W=o((...Me)=>{be[g](),we.apply(ee,Me)})}const re=(...be)=>{J||e.nextTick(()=>W.apply(ee,be))};return p(ee[X].promise,re,re),L}function ne(ee,se){var W;let J=!1;return se===null&&(se=i),(W=se)!==null&&W!==void 0&&W.cleanup&&(f(se.cleanup,"cleanup"),J=se.cleanup),new h((Y,re)=>{const be=de(ee,se,we=>{J&&be(),we?re(we):Y()})})}return ab.exports=de,ab.exports.finished=ne,ab.exports}var vS,GI;function Rh(){if(GI)return vS;GI=1;const e=Rd(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=mi(),{Symbol:a}=Vr(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:u}=Gl(),c=a("kDestroy"),f=a("kConstruct");function h(H,X,F){H&&(H.stack,X&&!X.errored&&(X.errored=H),F&&!F.errored&&(F.errored=H))}function p(H,X){const F=this._readableState,Z=this._writableState,L=Z||F;return Z!=null&&Z.destroyed||F!=null&&F.destroyed?(typeof X=="function"&&X(),this):(h(H,Z,F),Z&&(Z.destroyed=!0),F&&(F.destroyed=!0),L.constructed?g(this,H,X):this.once(c,function(de){g(this,t(de,H),X)}),this)}function g(H,X,F){let Z=!1;function L(de){if(Z)return;Z=!0;const ae=H._readableState,ne=H._writableState;h(de,ne,ae),ne&&(ne.closed=!0),ae&&(ae.closed=!0),typeof F=="function"&&F(de),de?e.nextTick(v,H,de):e.nextTick(b,H)}try{H._destroy(X||null,L)}catch(de){L(de)}}function v(H,X){_(H,X),b(H)}function b(H){const X=H._readableState,F=H._writableState;F&&(F.closeEmitted=!0),X&&(X.closeEmitted=!0),(F!=null&&F.emitClose||X!=null&&X.emitClose)&&H.emit("close")}function _(H,X){const F=H._readableState,Z=H._writableState;Z!=null&&Z.errorEmitted||F!=null&&F.errorEmitted||(Z&&(Z.errorEmitted=!0),F&&(F.errorEmitted=!0),H.emit("error",X))}function x(){const H=this._readableState,X=this._writableState;H&&(H.constructed=!0,H.closed=!1,H.closeEmitted=!1,H.destroyed=!1,H.errored=null,H.errorEmitted=!1,H.reading=!1,H.ended=H.readable===!1,H.endEmitted=H.readable===!1),X&&(X.constructed=!0,X.destroyed=!1,X.closed=!1,X.closeEmitted=!1,X.errored=null,X.errorEmitted=!1,X.finalCalled=!1,X.prefinished=!1,X.ended=X.writable===!1,X.ending=X.writable===!1,X.finished=X.writable===!1)}function S(H,X,F){const Z=H._readableState,L=H._writableState;if(L!=null&&L.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||L!=null&&L.autoDestroy?H.destroy(X):X&&(X.stack,L&&!L.errored&&(L.errored=X),Z&&!Z.errored&&(Z.errored=X),F?e.nextTick(_,H,X):_(H,X))}function E(H,X){if(typeof H._construct!="function")return;const F=H._readableState,Z=H._writableState;F&&(F.constructed=!1),Z&&(Z.constructed=!1),H.once(f,X),!(H.listenerCount(f)>1)&&e.nextTick(C,H)}function C(H){let X=!1;function F(Z){if(X){S(H,Z??new n);return}X=!0;const L=H._readableState,de=H._writableState,ae=de||L;L&&(L.constructed=!0),de&&(de.constructed=!0),ae.destroyed?H.emit(c,Z):Z?S(H,Z,!0):e.nextTick(k,H)}try{H._construct(Z=>{e.nextTick(F,Z)})}catch(Z){e.nextTick(F,Z)}}function k(H){H.emit(f)}function D(H){return(H==null?void 0:H.setHeader)&&typeof H.abort=="function"}function O(H){H.emit("close")}function N(H,X){H.emit("error",X),e.nextTick(O,H)}function z(H,X){!H||o(H)||(!X&&!s(H)&&(X=new r),u(H)?(H.socket=null,H.destroy(X)):D(H)?H.abort():D(H.req)?H.req.abort():typeof H.destroy=="function"?H.destroy(X):typeof H.close=="function"?H.close():X?e.nextTick(N,H,X):e.nextTick(O,H),H.destroyed||(H[i]=!0))}return vS={construct:E,destroyer:z,destroy:p,undestroy:x,errorOrDestroy:S},vS}var wS,WI;function Ak(){if(WI)return wS;WI=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Vr(),{EventEmitter:n}=Fw();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function u(b){i.writable&&i.write(b)===!1&&s.pause&&s.pause()}s.on("data",u);function c(){s.readable&&s.resume&&s.resume()}i.on("drain",c),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",p));let f=!1;function h(){f||(f=!0,i.end())}function p(){f||(f=!0,typeof i.destroy=="function"&&i.destroy())}function g(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(s,"error",g),a(i,"error",g);function v(){s.removeListener("data",u),i.removeListener("drain",c),s.removeListener("end",h),s.removeListener("close",p),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",v),s.removeListener("close",v),i.removeListener("close",v)}return s.on("end",v),s.on("close",v),i.on("close",v),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return wS={Stream:r,prependListener:a},wS}var _S={exports:{}},KI;function Lw(){return KI||(KI=1,function(e){const{SymbolDispose:t}=Vr(),{AbortError:n,codes:r}=mi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Gl(),s=hc(),{ERR_INVALID_ARG_TYPE:u}=r;let c;const f=(h,p)=>{if(typeof h!="object"||!("aborted"in h))throw new u(p,"AbortSignal",h)};e.exports.addAbortSignal=function(p,g){if(f(p,"signal"),!a(g)&&!i(g))throw new u("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(p,g)},e.exports.addAbortSignalNoValidate=function(h,p){if(typeof h!="object"||!("aborted"in h))return p;const g=a(p)?()=>{p.destroy(new n(void 0,{cause:h.reason}))}:()=>{p[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||ki().addAbortListener;const v=c(h,g);s(p,v[t])}return p}}(_S)),_S.exports}var xS,ZI;function bne(){if(ZI)return xS;ZI=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Vr(),{Buffer:a}=fc(),{inspect:i}=ki();return xS=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=s+u.data;return c}concat(s){if(this.length===0)return a.alloc(0);const u=a.allocUnsafe(s>>>0);let c=this.head,f=0;for(;c;)n(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(s,u){const c=this.head.data;if(s<c.length){const f=c.slice(0,s);return this.head.data=c.slice(s),f}return s===c.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",c=this.head,f=0;do{const h=c.data;if(s>h.length)u+=h,s-=h.length;else{s===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=e(h,0,s),this.head=c,c.data=e(h,s));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(s){const u=a.allocUnsafe(s),c=s;let f=this.head,h=0;do{const p=f.data;if(s>p.length)n(u,p,c-s),s-=p.length;else{s===p.length?(n(u,p,c-s),++h,f.next?this.head=f.next:this.head=this.tail=null):(n(u,new r(p.buffer,p.byteOffset,s),c-s),this.head=f,f.data=p.slice(s));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return i(this,{...u,depth:0,customInspect:!1})}},xS}var SS,YI;function $w(){if(YI)return SS;YI=1;const{MathFloor:e,NumberIsInteger:t}=Vr(),{validateInteger:n}=G0(),{ERR_INVALID_ARG_VALUE:r}=mi().codes;let a=16*1024,i=16;function o(f,h,p){return f.highWaterMark!=null?f.highWaterMark:h?f[p]:null}function s(f){return f?i:a}function u(f,h){n(h,"value",0),f?i=h:a=h}function c(f,h,p,g){const v=o(h,g,p);if(v!=null){if(!t(v)||v<0){const b=g?`options.${p}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return s(f.objectMode)}return SS={getHighWaterMark:c,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},SS}var ES={},ib={exports:{}},XI;function Tk(){return XI||(XI=1,function(e,t){var n=fc(),r=n.Buffer;function a(o,s){for(var u in o)s[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,u){return r(o,s,u)}a(r,i),i.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,u)},i.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(ib,ib.exports)),ib.exports}var JI;function vne(){if(JI)return ES;JI=1;var e=Tk().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}ES.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=p,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=g,this.end=v,S=3;break;default:this.write=b,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=f,a.prototype.text=c,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,S,E){var C=S.length-1;if(C<E)return 0;var k=i(S[C]);return k>=0?(k>0&&(x.lastNeed=k-1),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(x.lastNeed=k-2),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(k===2?k=0:x.lastNeed=k-3),k):0))}function s(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function u(x){var S=this.lastTotal-this.lastNeed,E=s(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function c(x,S){var E=o(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",S,C)}function f(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function p(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function v(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function b(x){return x.toString(this.encoding)}function _(x){return x&&x.length?this.write(x):""}return ES}var CS,QI;function s5(){if(QI)return CS;QI=1;const e=Rd(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Vr(),{Buffer:a}=fc(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=mi().codes;function s(u,c,f){let h;if(typeof c=="string"||c instanceof a)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let p;if(c&&c[n])p=!0,h=c[n]();else if(c&&c[r])p=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new u({objectMode:!0,highWaterMark:1,...f});let v=!1;g._read=function(){v||(v=!0,_())},g._destroy=function(x,S){t(b(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function b(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:k}=await h.throw(x);if(await C,k)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function _(){for(;;){try{const{value:x,done:S}=p?await h.next():h.next();if(S)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new o;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return CS=s,CS}var kS,e4;function Bw(){if(e4)return kS;e4=1;const e=Rd(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:p}=Vr();kS=Se,Se.ReadableState=Le;const{EventEmitter:g}=Fw(),{Stream:v,prependListener:b}=Ak(),{Buffer:_}=fc(),{addAbortSignal:x}=Lw(),S=hc();let E=ki().debuglog("stream",ye=>{E=ye});const C=bne(),k=Rh(),{getHighWaterMark:D,getDefaultHighWaterMark:O}=$w(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:H,ERR_OUT_OF_RANGE:X,ERR_STREAM_PUSH_AFTER_EOF:F,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:L}=mi(),{validateObject:de}=G0(),ae=p("kPaused"),{StringDecoder:ne}=vne(),ee=s5();s(Se.prototype,v.prototype),s(Se,v);const se=()=>{},{errorOrDestroy:W}=k,J=1,Y=2,re=4,be=8,we=16,Me=32,Pe=64,Ae=128,Te=256,qe=512,it=1024,Ie=2048,Re=4096,U=8192,Ce=16384,Ne=32768,ce=65536,ie=1<<17,Q=1<<18;function xe(ye){return{enumerable:!1,get(){return(this.state&ye)!==0},set(q){q?this.state|=ye:this.state&=~ye}}}i(Le.prototype,{objectMode:xe(J),ended:xe(Y),endEmitted:xe(re),reading:xe(be),constructed:xe(we),sync:xe(Me),needReadable:xe(Pe),emittedReadable:xe(Ae),readableListening:xe(Te),resumeScheduled:xe(qe),errorEmitted:xe(it),emitClose:xe(Ie),autoDestroy:xe(Re),destroyed:xe(U),closed:xe(Ce),closeEmitted:xe(Ne),multiAwaitDrain:xe(ce),readingMore:xe(ie),dataEmitted:xe(Q)});function Le(ye,q,B){typeof B!="boolean"&&(B=q instanceof Fl()),this.state=Ie|Re|we|Me,ye&&ye.objectMode&&(this.state|=J),B&&ye&&ye.readableObjectMode&&(this.state|=J),this.highWaterMark=ye?D(this,ye,"readableHighWaterMark",B):O(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ae]=null,ye&&ye.emitClose===!1&&(this.state&=-2049),ye&&ye.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=ye&&ye.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ye&&ye.encoding&&(this.decoder=new ne(ye.encoding),this.encoding=ye.encoding)}function Se(ye){if(!(this instanceof Se))return new Se(ye);const q=this instanceof Fl();this._readableState=new Le(ye,this,q),ye&&(typeof ye.read=="function"&&(this._read=ye.read),typeof ye.destroy=="function"&&(this._destroy=ye.destroy),typeof ye.construct=="function"&&(this._construct=ye.construct),ye.signal&&!q&&x(ye.signal,this)),v.call(this,ye),k.construct(this,()=>{this._readableState.needReadable&&I(this,this._readableState)})}Se.prototype.destroy=k.destroy,Se.prototype._undestroy=k.undestroy,Se.prototype._destroy=function(ye,q){q(ye)},Se.prototype[g.captureRejectionSymbol]=function(ye){this.destroy(ye)},Se.prototype[f]=function(){let ye;return this.destroyed||(ye=this.readableEnded?null:new L,this.destroy(ye)),new u((q,B)=>S(this,G=>G&&G!==ye?B(G):q(null)))},Se.prototype.push=function(ye,q){return Ve(this,ye,q,!1)},Se.prototype.unshift=function(ye,q){return Ve(this,ye,q,!0)};function Ve(ye,q,B,G){E("readableAddChunk",q);const pe=ye._readableState;let fe;if((pe.state&J)===0&&(typeof q=="string"?(B=B||pe.defaultEncoding,pe.encoding!==B&&(G&&pe.encoding?q=_.from(q,B).toString(pe.encoding):(q=_.from(q,B),B=""))):q instanceof _?B="":v._isUint8Array(q)?(q=v._uint8ArrayToBuffer(q),B=""):q!=null&&(fe=new z("chunk",["string","Buffer","Uint8Array"],q))),fe)W(ye,fe);else if(q===null)pe.state&=-9,Tt(ye,pe);else if((pe.state&J)!==0||q&&q.length>0)if(G)if((pe.state&re)!==0)W(ye,new Z);else{if(pe.destroyed||pe.errored)return!1;xt(ye,pe,q,!0)}else if(pe.ended)W(ye,new F);else{if(pe.destroyed||pe.errored)return!1;pe.state&=-9,pe.decoder&&!B?(q=pe.decoder.write(q),pe.objectMode||q.length!==0?xt(ye,pe,q,!1):I(ye,pe)):xt(ye,pe,q,!1)}else G||(pe.state&=-9,I(ye,pe));return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function xt(ye,q,B,G){q.flowing&&q.length===0&&!q.sync&&ye.listenerCount("data")>0?((q.state&ce)!==0?q.awaitDrainWriters.clear():q.awaitDrainWriters=null,q.dataEmitted=!0,ye.emit("data",B)):(q.length+=q.objectMode?1:B.length,G?q.buffer.unshift(B):q.buffer.push(B),(q.state&Pe)!==0&&Ut(ye)),I(ye,q)}Se.prototype.isPaused=function(){const ye=this._readableState;return ye[ae]===!0||ye.flowing===!1},Se.prototype.setEncoding=function(ye){const q=new ne(ye);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;const B=this._readableState.buffer;let G="";for(const pe of B)G+=q.write(pe);return B.clear(),G!==""&&B.push(G),this._readableState.length=G.length,this};const ht=1073741824;function Et(ye){if(ye>ht)throw new X("size","<= 1GiB",ye);return ye--,ye|=ye>>>1,ye|=ye>>>2,ye|=ye>>>4,ye|=ye>>>8,ye|=ye>>>16,ye++,ye}function Ft(ye,q){return ye<=0||q.length===0&&q.ended?0:(q.state&J)!==0?1:r(ye)?q.flowing&&q.length?q.buffer.first().length:q.length:ye<=q.length?ye:q.ended?q.length:0}Se.prototype.read=function(ye){E("read",ye),ye===void 0?ye=NaN:n(ye)||(ye=a(ye,10));const q=this._readableState,B=ye;if(ye>q.highWaterMark&&(q.highWaterMark=Et(ye)),ye!==0&&(q.state&=-129),ye===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended))return E("read: emitReadable",q.length,q.ended),q.length===0&&q.ended?et(this):Ut(this),null;if(ye=Ft(ye,q),ye===0&&q.ended)return q.length===0&&et(this),null;let G=(q.state&Pe)!==0;if(E("need readable",G),(q.length===0||q.length-ye<q.highWaterMark)&&(G=!0,E("length less than watermark",G)),q.ended||q.reading||q.destroyed||q.errored||!q.constructed)G=!1,E("reading, ended or constructing",G);else if(G){E("do read"),q.state|=be|Me,q.length===0&&(q.state|=Pe);try{this._read(q.highWaterMark)}catch(fe){W(this,fe)}q.state&=-33,q.reading||(ye=Ft(B,q))}let pe;return ye>0?pe=Be(ye,q):pe=null,pe===null?(q.needReadable=q.length<=q.highWaterMark,ye=0):(q.length-=ye,q.multiAwaitDrain?q.awaitDrainWriters.clear():q.awaitDrainWriters=null),q.length===0&&(q.ended||(q.needReadable=!0),B!==ye&&q.ended&&et(this)),pe!==null&&!q.errorEmitted&&!q.closeEmitted&&(q.dataEmitted=!0,this.emit("data",pe)),pe};function Tt(ye,q){if(E("onEofChunk"),!q.ended){if(q.decoder){const B=q.decoder.end();B&&B.length&&(q.buffer.push(B),q.length+=q.objectMode?1:B.length)}q.ended=!0,q.sync?Ut(ye):(q.needReadable=!1,q.emittedReadable=!0,ge(ye))}}function Ut(ye){const q=ye._readableState;E("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(E("emitReadable",q.flowing),q.emittedReadable=!0,e.nextTick(ge,ye))}function ge(ye){const q=ye._readableState;E("emitReadable_",q.destroyed,q.length,q.ended),!q.destroyed&&!q.errored&&(q.length||q.ended)&&(ye.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,dt(ye)}function I(ye,q){!q.readingMore&&q.constructed&&(q.readingMore=!0,e.nextTick(V,ye,q))}function V(ye,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0);){const B=q.length;if(E("maybeReadMore read 0"),ye.read(0),B===q.length)break}q.readingMore=!1}Se.prototype._read=function(ye){throw new H("_read()")},Se.prototype.pipe=function(ye,q){const B=this,G=this._readableState;G.pipes.length===1&&(G.multiAwaitDrain||(G.multiAwaitDrain=!0,G.awaitDrainWriters=new c(G.awaitDrainWriters?[G.awaitDrainWriters]:[]))),G.pipes.push(ye),E("pipe count=%d opts=%j",G.pipes.length,q);const fe=(!q||q.end!==!1)&&ye!==e.stdout&&ye!==e.stderr?st:hr;G.endEmitted?e.nextTick(fe):B.once("end",fe),ye.on("unpipe",Fe);function Fe(Mn,ai){E("onunpipe"),Mn===B&&ai&&ai.hasUnpiped===!1&&(ai.hasUnpiped=!0,zt())}function st(){E("onend"),ye.end()}let Dt,un=!1;function zt(){E("cleanup"),ye.removeListener("close",zn),ye.removeListener("finish",fr),Dt&&ye.removeListener("drain",Dt),ye.removeListener("error",Dn),ye.removeListener("unpipe",Fe),B.removeListener("end",st),B.removeListener("end",hr),B.removeListener("data",Xt),un=!0,Dt&&G.awaitDrainWriters&&(!ye._writableState||ye._writableState.needDrain)&&Dt()}function Gt(){un||(G.pipes.length===1&&G.pipes[0]===ye?(E("false write response, pause",0),G.awaitDrainWriters=ye,G.multiAwaitDrain=!1):G.pipes.length>1&&G.pipes.includes(ye)&&(E("false write response, pause",G.awaitDrainWriters.size),G.awaitDrainWriters.add(ye)),B.pause()),Dt||(Dt=he(B,ye),ye.on("drain",Dt))}B.on("data",Xt);function Xt(Mn){E("ondata");const ai=ye.write(Mn);E("dest.write",ai),ai===!1&&Gt()}function Dn(Mn){if(E("onerror",Mn),hr(),ye.removeListener("error",Dn),ye.listenerCount("error")===0){const ai=ye._writableState||ye._readableState;ai&&!ai.errorEmitted?W(ye,Mn):ye.emit("error",Mn)}}b(ye,"error",Dn);function zn(){ye.removeListener("finish",fr),hr()}ye.once("close",zn);function fr(){E("onfinish"),ye.removeListener("close",zn),hr()}ye.once("finish",fr);function hr(){E("unpipe"),B.unpipe(ye)}return ye.emit("pipe",B),ye.writableNeedDrain===!0?Gt():G.flowing||(E("pipe resume"),B.resume()),ye};function he(ye,q){return function(){const G=ye._readableState;G.awaitDrainWriters===q?(E("pipeOnDrain",1),G.awaitDrainWriters=null):G.multiAwaitDrain&&(E("pipeOnDrain",G.awaitDrainWriters.size),G.awaitDrainWriters.delete(q)),(!G.awaitDrainWriters||G.awaitDrainWriters.size===0)&&ye.listenerCount("data")&&ye.resume()}}Se.prototype.unpipe=function(ye){const q=this._readableState,B={hasUnpiped:!1};if(q.pipes.length===0)return this;if(!ye){const pe=q.pipes;q.pipes=[],this.pause();for(let fe=0;fe<pe.length;fe++)pe[fe].emit("unpipe",this,{hasUnpiped:!1});return this}const G=t(q.pipes,ye);return G===-1?this:(q.pipes.splice(G,1),q.pipes.length===0&&this.pause(),ye.emit("unpipe",this,B),this)},Se.prototype.on=function(ye,q){const B=v.prototype.on.call(this,ye,q),G=this._readableState;return ye==="data"?(G.readableListening=this.listenerCount("readable")>0,G.flowing!==!1&&this.resume()):ye==="readable"&&!G.endEmitted&&!G.readableListening&&(G.readableListening=G.needReadable=!0,G.flowing=!1,G.emittedReadable=!1,E("on readable",G.length,G.reading),G.length?Ut(this):G.reading||e.nextTick(ve,this)),B},Se.prototype.addListener=Se.prototype.on,Se.prototype.removeListener=function(ye,q){const B=v.prototype.removeListener.call(this,ye,q);return ye==="readable"&&e.nextTick(Oe,this),B},Se.prototype.off=Se.prototype.removeListener,Se.prototype.removeAllListeners=function(ye){const q=v.prototype.removeAllListeners.apply(this,arguments);return(ye==="readable"||ye===void 0)&&e.nextTick(Oe,this),q};function Oe(ye){const q=ye._readableState;q.readableListening=ye.listenerCount("readable")>0,q.resumeScheduled&&q[ae]===!1?q.flowing=!0:ye.listenerCount("data")>0?ye.resume():q.readableListening||(q.flowing=null)}function ve(ye){E("readable nexttick read 0"),ye.read(0)}Se.prototype.resume=function(){const ye=this._readableState;return ye.flowing||(E("resume"),ye.flowing=!ye.readableListening,ke(this,ye)),ye[ae]=!1,this};function ke(ye,q){q.resumeScheduled||(q.resumeScheduled=!0,e.nextTick(le,ye,q))}function le(ye,q){E("resume",q.reading),q.reading||ye.read(0),q.resumeScheduled=!1,ye.emit("resume"),dt(ye),q.flowing&&!q.reading&&ye.read(0)}Se.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function dt(ye){const q=ye._readableState;for(E("flow",q.flowing);q.flowing&&ye.read()!==null;);}Se.prototype.wrap=function(ye){let q=!1;ye.on("data",G=>{!this.push(G)&&ye.pause&&(q=!0,ye.pause())}),ye.on("end",()=>{this.push(null)}),ye.on("error",G=>{W(this,G)}),ye.on("close",()=>{this.destroy()}),ye.on("destroy",()=>{this.destroy()}),this._read=()=>{q&&ye.resume&&(q=!1,ye.resume())};const B=o(ye);for(let G=1;G<B.length;G++){const pe=B[G];this[pe]===void 0&&typeof ye[pe]=="function"&&(this[pe]=ye[pe].bind(ye))}return this},Se.prototype[h]=function(){return yt(this)},Se.prototype.iterator=function(ye){return ye!==void 0&&de(ye,"options"),yt(this,ye)};function yt(ye,q){typeof ye.read!="function"&&(ye=Se.wrap(ye,{objectMode:!0}));const B=M(ye,q);return B.stream=ye,B}async function*M(ye,q){let B=se;function G(Fe){this===ye?(B(),B=se):B=Fe}ye.on("readable",G);let pe;const fe=S(ye,{writable:!1},Fe=>{pe=Fe?N(pe,Fe):null,B(),B=se});try{for(;;){const Fe=ye.destroyed?null:ye.read();if(Fe!==null)yield Fe;else{if(pe)throw pe;if(pe===null)return;await new u(G)}}}catch(Fe){throw pe=N(pe,Fe),pe}finally{(pe||(q==null?void 0:q.destroyOnReturn)!==!1)&&(pe===void 0||ye._readableState.autoDestroy)?k.destroyer(ye,null):(ye.off("readable",G),fe())}}i(Se.prototype,{readable:{__proto__:null,get(){const ye=this._readableState;return!!ye&&ye.readable!==!1&&!ye.destroyed&&!ye.errorEmitted&&!ye.endEmitted},set(ye){this._readableState&&(this._readableState.readable=!!ye)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ye){this._readableState&&(this._readableState.flowing=ye)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ye){this._readableState&&(this._readableState.destroyed=ye)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Le.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(ye){this[ae]=!!ye}}}),Se._fromList=Be;function Be(ye,q){if(q.length===0)return null;let B;return q.objectMode?B=q.buffer.shift():!ye||ye>=q.length?(q.decoder?B=q.buffer.join(""):q.buffer.length===1?B=q.buffer.first():B=q.buffer.concat(q.length),q.buffer.clear()):B=q.buffer.consume(ye,q.decoder),B}function et(ye){const q=ye._readableState;E("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,e.nextTick(me,q,ye))}function me(ye,q){if(E("endReadableNT",ye.endEmitted,ye.length),!ye.errored&&!ye.closeEmitted&&!ye.endEmitted&&ye.length===0){if(ye.endEmitted=!0,q.emit("end"),q.writable&&q.allowHalfOpen===!1)e.nextTick(De,q);else if(ye.autoDestroy){const B=q._writableState;(!B||B.autoDestroy&&(B.finished||B.writable===!1))&&q.destroy()}}}function De(ye){ye.writable&&!ye.writableEnded&&!ye.destroyed&&ye.end()}Se.from=function(ye,q){return ee(Se,ye,q)};let Ke;function Ct(){return Ke===void 0&&(Ke={}),Ke}return Se.fromWeb=function(ye,q){return Ct().newStreamReadableFromReadableStream(ye,q)},Se.toWeb=function(ye,q){return Ct().newReadableStreamFromStreamReadable(ye,q)},Se.wrap=function(ye,q){var B,G;return new Se({objectMode:(B=(G=ye.readableObjectMode)!==null&&G!==void 0?G:ye.objectMode)!==null&&B!==void 0?B:!0,...q,destroy(pe,fe){k.destroyer(ye,pe),fe(pe)}}).wrap(ye)},kS}var AS,t4;function Rk(){if(t4)return AS;t4=1;const e=Rd(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:c}=Vr();AS=de,de.WritableState=Z;const{EventEmitter:f}=Fw(),h=Ak().Stream,{Buffer:p}=fc(),g=Rh(),{addAbortSignal:v}=Lw(),{getHighWaterMark:b,getDefaultHighWaterMark:_}=$w(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:D,ERR_STREAM_NULL_VALUES:O,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:z}=mi().codes,{errorOrDestroy:H}=g;o(de.prototype,h.prototype),o(de,h);function X(){}const F=u("kOnFinished");function Z(Re,U,Ce){typeof Ce!="boolean"&&(Ce=U instanceof Fl()),this.objectMode=!!(Re&&Re.objectMode),Ce&&(this.objectMode=this.objectMode||!!(Re&&Re.writableObjectMode)),this.highWaterMark=Re?b(this,Re,"writableHighWaterMark",Ce):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ne=!!(Re&&Re.decodeStrings===!1);this.decodeStrings=!Ne,this.defaultEncoding=Re&&Re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=W.bind(void 0,U),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Re||Re.emitClose!==!1,this.autoDestroy=!Re||Re.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[F]=[]}function L(Re){Re.buffered=[],Re.bufferedIndex=0,Re.allBuffers=!0,Re.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function de(Re){const U=this instanceof Fl();if(!U&&!r(de,this))return new de(Re);this._writableState=new Z(Re,this,U),Re&&(typeof Re.write=="function"&&(this._write=Re.write),typeof Re.writev=="function"&&(this._writev=Re.writev),typeof Re.destroy=="function"&&(this._destroy=Re.destroy),typeof Re.final=="function"&&(this._final=Re.final),typeof Re.construct=="function"&&(this._construct=Re.construct),Re.signal&&v(Re.signal,this)),h.call(this,Re),g.construct(this,()=>{const Ce=this._writableState;Ce.writing||be(this,Ce),Ae(this,Ce)})}a(de,c,{__proto__:null,value:function(Re){return r(this,Re)?!0:this!==de?!1:Re&&Re._writableState instanceof Z}}),de.prototype.pipe=function(){H(this,new C)};function ae(Re,U,Ce,Ne){const ce=Re._writableState;if(typeof Ce=="function")Ne=Ce,Ce=ce.defaultEncoding;else{if(!Ce)Ce=ce.defaultEncoding;else if(Ce!=="buffer"&&!p.isEncoding(Ce))throw new z(Ce);typeof Ne!="function"&&(Ne=X)}if(U===null)throw new O;if(!ce.objectMode)if(typeof U=="string")ce.decodeStrings!==!1&&(U=p.from(U,Ce),Ce="buffer");else if(U instanceof p)Ce="buffer";else if(h._isUint8Array(U))U=h._uint8ArrayToBuffer(U),Ce="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],U);let ie;return ce.ending?ie=new N:ce.destroyed&&(ie=new k("write")),ie?(e.nextTick(Ne,ie),H(Re,ie,!0),ie):(ce.pendingcb++,ne(Re,ce,U,Ce,Ne))}de.prototype.write=function(Re,U,Ce){return ae(this,Re,U,Ce)===!0},de.prototype.cork=function(){this._writableState.corked++},de.prototype.uncork=function(){const Re=this._writableState;Re.corked&&(Re.corked--,Re.writing||be(this,Re))},de.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=s(U)),!p.isEncoding(U))throw new z(U);return this._writableState.defaultEncoding=U,this};function ne(Re,U,Ce,Ne,ce){const ie=U.objectMode?1:Ce.length;U.length+=ie;const Q=U.length<U.highWaterMark;return Q||(U.needDrain=!0),U.writing||U.corked||U.errored||!U.constructed?(U.buffered.push({chunk:Ce,encoding:Ne,callback:ce}),U.allBuffers&&Ne!=="buffer"&&(U.allBuffers=!1),U.allNoop&&ce!==X&&(U.allNoop=!1)):(U.writelen=ie,U.writecb=ce,U.writing=!0,U.sync=!0,Re._write(Ce,Ne,U.onwrite),U.sync=!1),Q&&!U.errored&&!U.destroyed}function ee(Re,U,Ce,Ne,ce,ie,Q){U.writelen=Ne,U.writecb=Q,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new k("write")):Ce?Re._writev(ce,U.onwrite):Re._write(ce,ie,U.onwrite),U.sync=!1}function se(Re,U,Ce,Ne){--U.pendingcb,Ne(Ce),re(U),H(Re,Ce)}function W(Re,U){const Ce=Re._writableState,Ne=Ce.sync,ce=Ce.writecb;if(typeof ce!="function"){H(Re,new E);return}Ce.writing=!1,Ce.writecb=null,Ce.length-=Ce.writelen,Ce.writelen=0,U?(U.stack,Ce.errored||(Ce.errored=U),Re._readableState&&!Re._readableState.errored&&(Re._readableState.errored=U),Ne?e.nextTick(se,Re,Ce,U,ce):se(Re,Ce,U,ce)):(Ce.buffered.length>Ce.bufferedIndex&&be(Re,Ce),Ne?Ce.afterWriteTickInfo!==null&&Ce.afterWriteTickInfo.cb===ce?Ce.afterWriteTickInfo.count++:(Ce.afterWriteTickInfo={count:1,cb:ce,stream:Re,state:Ce},e.nextTick(J,Ce.afterWriteTickInfo)):Y(Re,Ce,1,ce))}function J({stream:Re,state:U,count:Ce,cb:Ne}){return U.afterWriteTickInfo=null,Y(Re,U,Ce,Ne)}function Y(Re,U,Ce,Ne){for(!U.ending&&!Re.destroyed&&U.length===0&&U.needDrain&&(U.needDrain=!1,Re.emit("drain"));Ce-- >0;)U.pendingcb--,Ne();U.destroyed&&re(U),Ae(Re,U)}function re(Re){if(Re.writing)return;for(let ce=Re.bufferedIndex;ce<Re.buffered.length;++ce){var U;const{chunk:ie,callback:Q}=Re.buffered[ce],xe=Re.objectMode?1:ie.length;Re.length-=xe,Q((U=Re.errored)!==null&&U!==void 0?U:new k("write"))}const Ce=Re[F].splice(0);for(let ce=0;ce<Ce.length;ce++){var Ne;Ce[ce]((Ne=Re.errored)!==null&&Ne!==void 0?Ne:new k("end"))}L(Re)}function be(Re,U){if(U.corked||U.bufferProcessing||U.destroyed||!U.constructed)return;const{buffered:Ce,bufferedIndex:Ne,objectMode:ce}=U,ie=Ce.length-Ne;if(!ie)return;let Q=Ne;if(U.bufferProcessing=!0,ie>1&&Re._writev){U.pendingcb-=ie-1;const xe=U.allNoop?X:Se=>{for(let Ve=Q;Ve<Ce.length;++Ve)Ce[Ve].callback(Se)},Le=U.allNoop&&Q===0?Ce:t(Ce,Q);Le.allBuffers=U.allBuffers,ee(Re,U,!0,U.length,Le,"",xe),L(U)}else{do{const{chunk:xe,encoding:Le,callback:Se}=Ce[Q];Ce[Q++]=null;const Ve=ce?1:xe.length;ee(Re,U,!1,Ve,xe,Le,Se)}while(Q<Ce.length&&!U.writing);Q===Ce.length?L(U):Q>256?(Ce.splice(0,Q),U.bufferedIndex=0):U.bufferedIndex=Q}U.bufferProcessing=!1}de.prototype._write=function(Re,U,Ce){if(this._writev)this._writev([{chunk:Re,encoding:U}],Ce);else throw new S("_write()")},de.prototype._writev=null,de.prototype.end=function(Re,U,Ce){const Ne=this._writableState;typeof Re=="function"?(Ce=Re,Re=null,U=null):typeof U=="function"&&(Ce=U,U=null);let ce;if(Re!=null){const ie=ae(this,Re,U);ie instanceof n&&(ce=ie)}return Ne.corked&&(Ne.corked=1,this.uncork()),ce||(!Ne.errored&&!Ne.ending?(Ne.ending=!0,Ae(this,Ne,!0),Ne.ended=!0):Ne.finished?ce=new D("end"):Ne.destroyed&&(ce=new k("end"))),typeof Ce=="function"&&(ce||Ne.finished?e.nextTick(Ce,ce):Ne[F].push(Ce)),this};function we(Re){return Re.ending&&!Re.destroyed&&Re.constructed&&Re.length===0&&!Re.errored&&Re.buffered.length===0&&!Re.finished&&!Re.writing&&!Re.errorEmitted&&!Re.closeEmitted}function Me(Re,U){let Ce=!1;function Ne(ce){if(Ce){H(Re,ce??E());return}if(Ce=!0,U.pendingcb--,ce){const ie=U[F].splice(0);for(let Q=0;Q<ie.length;Q++)ie[Q](ce);H(Re,ce,U.sync)}else we(U)&&(U.prefinished=!0,Re.emit("prefinish"),U.pendingcb++,e.nextTick(Te,Re,U))}U.sync=!0,U.pendingcb++;try{Re._final(Ne)}catch(ce){Ne(ce)}U.sync=!1}function Pe(Re,U){!U.prefinished&&!U.finalCalled&&(typeof Re._final=="function"&&!U.destroyed?(U.finalCalled=!0,Me(Re,U)):(U.prefinished=!0,Re.emit("prefinish")))}function Ae(Re,U,Ce){we(U)&&(Pe(Re,U),U.pendingcb===0&&(Ce?(U.pendingcb++,e.nextTick((Ne,ce)=>{we(ce)?Te(Ne,ce):ce.pendingcb--},Re,U)):we(U)&&(U.pendingcb++,Te(Re,U))))}function Te(Re,U){U.pendingcb--,U.finished=!0;const Ce=U[F].splice(0);for(let Ne=0;Ne<Ce.length;Ne++)Ce[Ne]();if(Re.emit("finish"),U.autoDestroy){const Ne=Re._readableState;(!Ne||Ne.autoDestroy&&(Ne.endEmitted||Ne.readable===!1))&&Re.destroy()}}i(de.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Re){this._writableState&&(this._writableState.destroyed=Re)}},writable:{__proto__:null,get(){const Re=this._writableState;return!!Re&&Re.writable!==!1&&!Re.destroyed&&!Re.errored&&!Re.ending&&!Re.ended},set(Re){this._writableState&&(this._writableState.writable=!!Re)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Re=this._writableState;return Re?!Re.destroyed&&!Re.ending&&Re.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const qe=g.destroy;de.prototype.destroy=function(Re,U){const Ce=this._writableState;return!Ce.destroyed&&(Ce.bufferedIndex<Ce.buffered.length||Ce[F].length)&&e.nextTick(re,Ce),qe.call(this,Re,U),this},de.prototype._undestroy=g.undestroy,de.prototype._destroy=function(Re,U){U(Re)},de.prototype[f.captureRejectionSymbol]=function(Re){this.destroy(Re)};let it;function Ie(){return it===void 0&&(it={}),it}return de.fromWeb=function(Re,U){return Ie().newStreamWritableFromWritableStream(Re,U)},de.toWeb=function(Re){return Ie().newWritableStreamFromStreamWritable(Re)},AS}var TS,n4;function wne(){if(n4)return TS;n4=1;const e=Rd(),t=fc(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=Gl(),h=hc(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=mi(),{destroyer:b}=Rh(),_=Fl(),x=Bw(),S=Rk(),{createDeferredPromise:E}=ki(),C=s5(),k=globalThis.Blob||t.Blob,D=typeof k<"u"?function(Z){return Z instanceof k}:function(Z){return!1},O=globalThis.AbortController||a0().AbortController,{FunctionPrototypeCall:N}=Vr();class z extends _{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}TS=function F(Z,L){if(u(Z))return Z;if(o(Z))return X({readable:Z});if(s(Z))return X({writable:Z});if(i(Z))return X({writable:!1,readable:!1});if(c(Z))return X({readable:x.fromWeb(Z)});if(f(Z))return X({writable:S.fromWeb(Z)});if(typeof Z=="function"){const{value:ae,write:ne,final:ee,destroy:se}=H(Z);if(a(ae))return C(z,ae,{objectMode:!0,write:ne,final:ee,destroy:se});const W=ae==null?void 0:ae.then;if(typeof W=="function"){let J;const Y=N(W,ae,re=>{if(re!=null)throw new v("nully","body",re)},re=>{b(J,re)});return J=new z({objectMode:!0,readable:!1,write:ne,final(re){ee(async()=>{try{await Y,e.nextTick(re,null)}catch(be){e.nextTick(re,be)}})},destroy:se})}throw new v("Iterable, AsyncIterable or AsyncFunction",L,ae)}if(D(Z))return F(Z.arrayBuffer());if(a(Z))return C(z,Z,{objectMode:!0,writable:!1});if(c(Z==null?void 0:Z.readable)&&f(Z==null?void 0:Z.writable))return z.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const ae=Z!=null&&Z.readable?o(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:F(Z.readable):void 0,ne=Z!=null&&Z.writable?s(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:F(Z.writable):void 0;return X({readable:ae,writable:ne})}const de=Z==null?void 0:Z.then;if(typeof de=="function"){let ae;return N(de,Z,ne=>{ne!=null&&ae.push(ne),ae.push(null)},ne=>{b(ae,ne)}),ae=new z({objectMode:!0,writable:!1,read(){}})}throw new g(L,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function H(F){let{promise:Z,resolve:L}=E();const de=new O,ae=de.signal;return{value:F(async function*(){for(;;){const ee=Z;Z=null;const{chunk:se,done:W,cb:J}=await ee;if(e.nextTick(J),W)return;if(ae.aborted)throw new p(void 0,{cause:ae.reason});({promise:Z,resolve:L}=E()),yield se}}(),{signal:ae}),write(ee,se,W){const J=L;L=null,J({chunk:ee,done:!1,cb:W})},final(ee){const se=L;L=null,se({done:!0,cb:ee})},destroy(ee,se){de.abort(),se(ee)}}}function X(F){const Z=F.readable&&typeof F.readable.read!="function"?x.wrap(F.readable):F.readable,L=F.writable;let de=!!n(Z),ae=!!r(L),ne,ee,se,W,J;function Y(re){const be=W;W=null,be?be(re):re&&J.destroy(re)}return J=new z({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(L!=null&&L.writableObjectMode),readable:de,writable:ae}),ae&&(h(L,re=>{ae=!1,re&&b(Z,re),Y(re)}),J._write=function(re,be,we){L.write(re,be)?we():ne=we},J._final=function(re){L.end(),ee=re},L.on("drain",function(){if(ne){const re=ne;ne=null,re()}}),L.on("finish",function(){if(ee){const re=ee;ee=null,re()}})),de&&(h(Z,re=>{de=!1,re&&b(Z,re),Y(re)}),Z.on("readable",function(){if(se){const re=se;se=null,re()}}),Z.on("end",function(){J.push(null)}),J._read=function(){for(;;){const re=Z.read();if(re===null){se=J._read;return}if(!J.push(re))return}}),J._destroy=function(re,be){!re&&W!==null&&(re=new p),se=null,ne=null,ee=null,W===null?be(re):(W=be,b(L,re),b(Z,re))},J}return TS}var RS,r4;function Fl(){if(r4)return RS;r4=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Vr();RS=o;const a=Bw(),i=Rk();r(o.prototype,a.prototype),r(o,a);{const f=n(i.prototype);for(let h=0;h<f.length;h++){const p=f[h];o.prototype[p]||(o.prototype[p]=i.prototype[p])}}function o(f){if(!(this instanceof o))return new o(f);a.call(this,f),i.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let s;function u(){return s===void 0&&(s={}),s}o.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},o.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return o.from=function(f){return c||(c=wne()),c(f,"body")},RS}var NS,a4;function l5(){if(a4)return NS;a4=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Vr();NS=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=mi().codes,r=Fl(),{getHighWaterMark:a}=$w();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(c){if(!(this instanceof o))return new o(c);const f=c?a(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function s(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(c,f,h){throw new n("_transform()")},o.prototype._write=function(c,f,h){const p=this._readableState,g=this._writableState,v=p.length;this._transform(c,f,(b,_)=>{if(b){h(b);return}_!=null&&this.push(_),g.ended||v===p.length||p.length<p.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},NS}var IS,i4;function u5(){if(i4)return IS;i4=1;const{ObjectSetPrototypeOf:e}=Vr();IS=n;const t=l5();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},IS}var OS,o4;function Nk(){if(o4)return OS;o4=1;const e=Rd(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Vr(),i=hc(),{once:o}=ki(),s=Rh(),u=Fl(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=mi(),{validateFunction:_,validateAbortSignal:x}=G0(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:k,isTransformStream:D,isWebStream:O,isReadableStream:N,isReadableFinished:z}=Gl(),H=globalThis.AbortController||a0().AbortController;let X,F,Z;function L(re,be,we){let Me=!1;re.on("close",()=>{Me=!0});const Pe=i(re,{readable:be,writable:we},Ae=>{Me=!Ae});return{destroy:Ae=>{Me||(Me=!0,s.destroyer(re,Ae||new g("pipe")))},cleanup:Pe}}function de(re){return _(re[re.length-1],"streams[stream.length - 1]"),re.pop()}function ae(re){if(S(re))return re;if(C(re))return ne(re);throw new f("val",["Readable","Iterable","AsyncIterable"],re)}async function*ne(re){F||(F=Bw()),yield*F.prototype[r].call(re)}async function ee(re,be,we,{end:Me}){let Pe,Ae=null;const Te=Ie=>{if(Ie&&(Pe=Ie),Ae){const Re=Ae;Ae=null,Re()}},qe=()=>new n((Ie,Re)=>{Pe?Re(Pe):Ae=()=>{Pe?Re(Pe):Ie()}});be.on("drain",Te);const it=i(be,{readable:!1},Te);try{be.writableNeedDrain&&await qe();for await(const Ie of re)be.write(Ie)||await qe();Me&&(be.end(),await qe()),we()}catch(Ie){we(Pe!==Ie?c(Pe,Ie):Ie)}finally{it(),be.off("drain",Te)}}async function se(re,be,we,{end:Me}){D(be)&&(be=be.writable);const Pe=be.getWriter();try{for await(const Ae of re)await Pe.ready,Pe.write(Ae).catch(()=>{});await Pe.ready,Me&&await Pe.close(),we()}catch(Ae){try{await Pe.abort(Ae),we(Ae)}catch(Te){we(Te)}}}function W(...re){return J(re,o(de(re)))}function J(re,be,we){if(re.length===1&&t(re[0])&&(re=re[0]),re.length<2)throw new p("streams");const Me=new H,Pe=Me.signal,Ae=we==null?void 0:we.signal,Te=[];x(Ae,"options.signal");function qe(){ce(new b)}Z=Z||ki().addAbortListener;let it;Ae&&(it=Z(Ae,qe));let Ie,Re;const U=[];let Ce=0;function Ne(Se){ce(Se,--Ce===0)}function ce(Se,Ve){var xt;if(Se&&(!Ie||Ie.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Ie=Se),!(!Ie&&!Ve)){for(;U.length;)U.shift()(Ie);(xt=it)===null||xt===void 0||xt[a](),Me.abort(),Ve&&(Ie||Te.forEach(ht=>ht()),e.nextTick(be,Ie,Re))}}let ie;for(let Se=0;Se<re.length;Se++){const Ve=re[Se],xt=Se<re.length-1,ht=Se>0,Et=xt||(we==null?void 0:we.end)!==!1,Ft=Se===re.length-1;if(k(Ve)){let Tt=function(Ut){Ut&&Ut.name!=="AbortError"&&Ut.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ne(Ut)};var Le=Tt;if(Et){const{destroy:Ut,cleanup:ge}=L(Ve,xt,ht);U.push(Ut),E(Ve)&&Ft&&Te.push(ge)}Ve.on("error",Tt),E(Ve)&&Ft&&Te.push(()=>{Ve.removeListener("error",Tt)})}if(Se===0)if(typeof Ve=="function"){if(ie=Ve({signal:Pe}),!S(ie))throw new h("Iterable, AsyncIterable or Stream","source",ie)}else S(Ve)||C(Ve)||D(Ve)?ie=Ve:ie=u.from(Ve);else if(typeof Ve=="function"){if(D(ie)){var Q;ie=ae((Q=ie)===null||Q===void 0?void 0:Q.readable)}else ie=ae(ie);if(ie=Ve(ie,{signal:Pe}),xt){if(!S(ie,!0))throw new h("AsyncIterable",`transform[${Se-1}]`,ie)}else{var xe;X||(X=u5());const Tt=new X({objectMode:!0}),Ut=(xe=ie)===null||xe===void 0?void 0:xe.then;if(typeof Ut=="function")Ce++,Ut.call(ie,V=>{Re=V,V!=null&&Tt.write(V),Et&&Tt.end(),e.nextTick(Ne)},V=>{Tt.destroy(V),e.nextTick(Ne,V)});else if(S(ie,!0))Ce++,ee(ie,Tt,Ne,{end:Et});else if(N(ie)||D(ie)){const V=ie.readable||ie;Ce++,ee(V,Tt,Ne,{end:Et})}else throw new h("AsyncIterable or Promise","destination",ie);ie=Tt;const{destroy:ge,cleanup:I}=L(ie,!1,!0);U.push(ge),Ft&&Te.push(I)}}else if(k(Ve)){if(C(ie)){Ce+=2;const Tt=Y(ie,Ve,Ne,{end:Et});E(Ve)&&Ft&&Te.push(Tt)}else if(D(ie)||N(ie)){const Tt=ie.readable||ie;Ce++,ee(Tt,Ve,Ne,{end:Et})}else if(S(ie))Ce++,ee(ie,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ve}else if(O(Ve)){if(C(ie))Ce++,se(ae(ie),Ve,Ne,{end:Et});else if(N(ie)||S(ie))Ce++,se(ie,Ve,Ne,{end:Et});else if(D(ie))Ce++,se(ie.readable,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ve}else ie=u.from(Ve)}return(Pe!=null&&Pe.aborted||Ae!=null&&Ae.aborted)&&e.nextTick(qe),ie}function Y(re,be,we,{end:Me}){let Pe=!1;if(be.on("close",()=>{Pe||we(new v)}),re.pipe(be,{end:!1}),Me){let Te=function(){Pe=!0,be.end()};var Ae=Te;z(re)?e.nextTick(Te):re.once("end",Te)}else we();return i(re,{readable:!0,writable:!1},Te=>{const qe=re._readableState;Te&&Te.code==="ERR_STREAM_PREMATURE_CLOSE"&&qe&&qe.ended&&!qe.errored&&!qe.errorEmitted?re.once("end",we).once("error",we):we(Te)}),i(be,{readable:!1,writable:!0},we)}return OS={pipelineImpl:J,pipeline:W},OS}var DS,s4;function c5(){if(s4)return DS;s4=1;const{pipeline:e}=Nk(),t=Fl(),{destroyer:n}=Rh(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:u,isReadableStream:c}=Gl(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:p}}=mi(),g=hc();return DS=function(...b){if(b.length===0)throw new p("streams");if(b.length===1)return t.from(b[0]);const _=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const X=b.length-1;b[X]=t.from(b[X])}for(let X=0;X<b.length;++X)if(!(!r(b[X])&&!o(b[X]))){if(X<b.length-1&&!(a(b[X])||c(b[X])||s(b[X])))throw new h(`streams[${X}]`,_[X],"must be readable");if(X>0&&!(i(b[X])||u(b[X])||s(b[X])))throw new h(`streams[${X}]`,_[X],"must be writable")}let x,S,E,C,k;function D(X){const F=C;C=null,F?F(X):X?k.destroy(X):!H&&!z&&k.destroy()}const O=b[0],N=e(b,D),z=!!(i(O)||u(O)||s(O)),H=!!(a(N)||c(N)||s(N));if(k=new t({writableObjectMode:!!(O!=null&&O.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:z,readable:H}),z){if(r(O))k._write=function(F,Z,L){O.write(F,Z)?L():x=L},k._final=function(F){O.end(),S=F},O.on("drain",function(){if(x){const F=x;x=null,F()}});else if(o(O)){const Z=(s(O)?O.writable:O).getWriter();k._write=async function(L,de,ae){try{await Z.ready,Z.write(L).catch(()=>{}),ae()}catch(ne){ae(ne)}},k._final=async function(L){try{await Z.ready,Z.close().catch(()=>{}),S=L}catch(de){L(de)}}}const X=s(N)?N.readable:N;g(X,()=>{if(S){const F=S;S=null,F()}})}if(H){if(r(N))N.on("readable",function(){if(E){const X=E;E=null,X()}}),N.on("end",function(){k.push(null)}),k._read=function(){for(;;){const X=N.read();if(X===null){E=k._read;return}if(!k.push(X))return}};else if(o(N)){const F=(s(N)?N.readable:N).getReader();k._read=async function(){for(;;)try{const{value:Z,done:L}=await F.read();if(!k.push(Z))return;if(L){k.push(null);return}}catch{return}}}}return k._destroy=function(X,F){!X&&C!==null&&(X=new f),E=null,x=null,S=null,C===null?F(X):(C=F,r(N)&&n(N,X))},k},DS}var l4;function _ne(){if(l4)return rb;l4=1;const e=globalThis.AbortController||a0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=mi(),{validateAbortSignal:o,validateInteger:s,validateObject:u}=G0(),c=Vr().Symbol("kWeak"),f=Vr().Symbol("kResistStopPropagation"),{finished:h}=hc(),p=c5(),{addAbortSignalNoValidate:g}=Lw(),{isWritable:v,isNodeStream:b}=Gl(),{deprecate:_}=ki(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:k,Promise:D,PromiseReject:O,PromiseResolve:N,PromisePrototypeThen:z,Symbol:H}=Vr(),X=H("kEmpty"),F=H("kEof");function Z(Ae,Te){if(Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),b(Ae)&&!v(Ae))throw new t("stream",Ae,"must be writable");const qe=p(this,Ae);return Te!=null&&Te.signal&&g(Te.signal,qe),qe}function L(Ae,Te){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal");let qe=1;(Te==null?void 0:Te.concurrency)!=null&&(qe=E(Te.concurrency));let it=qe-1;return(Te==null?void 0:Te.highWaterMark)!=null&&(it=E(Te.highWaterMark)),s(qe,"options.concurrency",1),s(it,"options.highWaterMark",0),it+=qe,(async function*(){const Re=ki().AbortSignalAny([Te==null?void 0:Te.signal].filter(S)),U=this,Ce=[],Ne={signal:Re};let ce,ie,Q=!1,xe=0;function Le(){Q=!0,Se()}function Se(){xe-=1,Ve()}function Ve(){ie&&!Q&&xe<qe&&Ce.length<it&&(ie(),ie=null)}async function xt(){try{for await(let ht of U){if(Q)return;if(Re.aborted)throw new i;try{if(ht=Ae(ht,Ne),ht===X)continue;ht=N(ht)}catch(Et){ht=O(Et)}xe+=1,z(ht,Se,Le),Ce.push(ht),ce&&(ce(),ce=null),!Q&&(Ce.length>=it||xe>=qe)&&await new D(Et=>{ie=Et})}Ce.push(F)}catch(ht){const Et=O(ht);z(Et,Se,Le),Ce.push(Et)}finally{Q=!0,ce&&(ce(),ce=null)}}xt();try{for(;;){for(;Ce.length>0;){const ht=await Ce[0];if(ht===F)return;if(Re.aborted)throw new i;ht!==X&&(yield ht),Ce.shift(),Ve()}await new D(ht=>{ce=ht})}}finally{Q=!0,ie&&(ie(),ie=null)}}).call(this)}function de(Ae=void 0){return Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal"),(async function*(){let qe=0;for await(const Ie of this){var it;if(Ae!=null&&(it=Ae.signal)!==null&&it!==void 0&&it.aborted)throw new i({cause:Ae.signal.reason});yield[qe++,Ie]}}).call(this)}async function ae(Ae,Te=void 0){for await(const qe of W.call(this,Ae,Te))return!0;return!1}async function ne(Ae,Te=void 0){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);return!await ae.call(this,async(...qe)=>!await Ae(...qe),Te)}async function ee(Ae,Te){for await(const qe of W.call(this,Ae,Te))return qe}async function se(Ae,Te){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);async function qe(it,Ie){return await Ae(it,Ie),X}for await(const it of L.call(this,qe,Te));}function W(Ae,Te){if(typeof Ae!="function")throw new n("fn",["Function","AsyncFunction"],Ae);async function qe(it,Ie){return await Ae(it,Ie)?it:X}return L.call(this,qe,Te)}class J extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Y(Ae,Te,qe){var it;if(typeof Ae!="function")throw new n("reducer",["Function","AsyncFunction"],Ae);qe!=null&&u(qe,"options"),(qe==null?void 0:qe.signal)!=null&&o(qe.signal,"options.signal");let Ie=arguments.length>1;if(qe!=null&&(it=qe.signal)!==null&&it!==void 0&&it.aborted){const ce=new i(void 0,{cause:qe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(ce)),ce}const Re=new e,U=Re.signal;if(qe!=null&&qe.signal){const ce={once:!0,[c]:this,[f]:!0};qe.signal.addEventListener("abort",()=>Re.abort(),ce)}let Ce=!1;try{for await(const ce of this){var Ne;if(Ce=!0,qe!=null&&(Ne=qe.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new i;Ie?Te=await Ae(Te,ce,{signal:U}):(Te=ce,Ie=!0)}if(!Ce&&!Ie)throw new J}finally{Re.abort()}return Te}async function re(Ae){Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal");const Te=[];for await(const it of this){var qe;if(Ae!=null&&(qe=Ae.signal)!==null&&qe!==void 0&&qe.aborted)throw new i(void 0,{cause:Ae.signal.reason});x(Te,it)}return Te}function be(Ae,Te){const qe=L.call(this,Ae,Te);return(async function*(){for await(const Ie of qe)yield*Ie}).call(this)}function we(Ae){if(Ae=C(Ae),k(Ae))return 0;if(Ae<0)throw new a("number",">= 0",Ae);return Ae}function Me(Ae,Te=void 0){return Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),Ae=we(Ae),(async function*(){var it;if(Te!=null&&(it=Te.signal)!==null&&it!==void 0&&it.aborted)throw new i;for await(const Re of this){var Ie;if(Te!=null&&(Ie=Te.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new i;Ae--<=0&&(yield Re)}}).call(this)}function Pe(Ae,Te=void 0){return Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),Ae=we(Ae),(async function*(){var it;if(Te!=null&&(it=Te.signal)!==null&&it!==void 0&&it.aborted)throw new i;for await(const Re of this){var Ie;if(Te!=null&&(Ie=Te.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new i;if(Ae-- >0&&(yield Re),Ae<=0)return}}).call(this)}return rb.streamReturningOperators={asIndexedPairs:_(de,"readable.asIndexedPairs will be removed in a future version."),drop:Me,filter:W,flatMap:be,map:L,take:Pe,compose:Z},rb.promiseReturningOperators={every:ne,forEach:se,reduce:Y,toArray:re,some:ae,find:ee},rb}var jS,u4;function d5(){if(u4)return jS;u4=1;const{ArrayPrototypePop:e,Promise:t}=Vr(),{isIterable:n,isNodeStream:r,isWebStream:a}=Gl(),{pipelineImpl:i}=Nk(),{finished:o}=hc();f5();function s(...u){return new t((c,f)=>{let h,p;const g=u[u.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(u);h=v.signal,p=v.end}i(u,(v,b)=>{v?f(v):c(b)},{signal:h,end:p})})}return jS={finished:o,pipeline:s},jS}var c4;function f5(){if(c4)return cS.exports;c4=1;const{Buffer:e}=fc(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Vr(),{promisify:{custom:a}}=ki(),{streamReturningOperators:i,promiseReturningOperators:o}=_ne(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=mi(),u=c5(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=$w(),{pipeline:h}=Nk(),{destroyer:p}=Rh(),g=hc(),v=d5(),b=Gl(),_=cS.exports=Ak().Stream;_.isDestroyed=b.isDestroyed,_.isDisturbed=b.isDisturbed,_.isErrored=b.isErrored,_.isReadable=b.isReadable,_.isWritable=b.isWritable,_.Readable=Bw();for(const E of n(i)){let k=function(...D){if(new.target)throw s();return _.Readable.from(r(C,this,D))};var S=k;const C=i[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let k=function(...O){if(new.target)throw s();return r(C,this,O)};var S=k;const C=o[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}_.Writable=Rk(),_.Duplex=Fl(),_.Transform=l5(),_.PassThrough=u5(),_.pipeline=h;const{addAbortSignal:x}=Lw();return _.addAbortSignal=x,_.finished=g,_.destroy=p,_.compose=u,_.setDefaultHighWaterMark=c,_.getDefaultHighWaterMark=f,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),_.Stream=_,_._isUint8Array=function(C){return C instanceof Uint8Array},_._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},cS.exports}var d4;function xne(){return d4||(d4=1,function(e){const t=f5(),n=d5(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(uS)),uS.exports}var h5=xne();class Ik extends h5.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(lt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class Ok extends h5.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Za(new Ue(lt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Za(new Ue(lt.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(lt.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(lt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Eo=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Co=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class ei{get position(){return this.flag&fd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=ri(t,n);Object.assign(this,wd(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&jw||this.inode.flags&Ei.Sync)}_emitChange(){$a(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,VM(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=cc(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>yr?-61441:yr)|n,(this._isSync||n>yr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(lt.EINVAL);if(this.dirty=!0,!(this.flag&Ka||this.flag&Al))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=mv(t),this.inode.mtimeMs=mv(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Tl(n,"utf8","a",420);if(!(Rl(r.flag)&fd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Rr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Ka)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Ei.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!t0(this.inode)&&!e0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Tl(t,null,"r",292);if(Rl(n.flag)&Ka)throw new Ue(lt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Rr.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Ei.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Ka)throw Ue.With("EBADF",this.path,"readLines");return zte({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!ar(this.context,this.inode,ya))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new kd(this.inode):new Vl(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Ei.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Ka||this.flag&Al))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!t0(this.inode)&&!e0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Rr.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const u=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:u}}async writeFile(t,n={}){const r=Tl(n,"utf8","w",420),a=Rl(r.flag);if(!(a&Ka||a&Al))throw new Ue(lt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Rr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),KM(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Ka)throw Ue.With("EBADF",this.path,"createReadStream");return new Ik(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Ei.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"createWriteStream");return new Ok(t,this)}}async function Dk(e,t){e=ln(e),t=ln(t);const n=Fn(e,this),r=Fn(t,this);if(!(await Ji.call(this,Yn(e))).hasAccess(Yr,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),$a(this,"rename",e.toString()),$a(this,"change",t.toString());return}await Y0.call(this,t,await Z0(e)),await K0.call(this,e),$a(this,"rename",e.toString())}catch(a){throw ir(a,{[n.path]:e,[r.path]:t})}}async function W0(e){try{const{fs:t,path:n}=Fn(await mc.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function Ji(e,t){e=ln(e);const{fs:n,path:r}=Fn(await mc.call(this,e),this);try{const a=await n.stat(r);if(ba&&!ar(this,a,ya))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new kd(a):new Vl(a)}catch(a){throw ir(a,{[r]:e})}}async function zw(e,t){e=ln(e);const{fs:n,path:r}=Fn(e,this);try{const a=await n.stat(r);if(ba&&!ar(this,a,ya))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new kd(a):new Vl(a)}catch(a){throw ir(a,{[r]:e})}}async function p5(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Eo(n,await ko.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function K0(e){e=ln(e);const{fs:t,path:n}=Fn(e,this);try{if(ba&&!ar(this,await t.stat(n),Yr))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),$a(this,"rename",e.toString())}catch(r){throw ir(r,{[n]:e})}}async function Nh(e,t,n){var r;t=ln(t);const a=cc(n.mode,420),i=Rl(n.flag),{fullPath:o,fs:s,path:u,stats:c}=await vv(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&Iw))throw Ue.With("ENOENT",o,"_open");const h=await s.stat(Yn(u));if(!ar(e,h,Yr))throw Ue.With("EACCES",Yn(o),"_open");if(!Yo(h))throw Ue.With("ENOTDIR",Yn(o),"_open");const{euid:p,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:ts.credentials,v=await s.createFile(u,{mode:a,uid:h.mode&U0?h.uid:p,gid:h.mode&q0?h.gid:g});return new ei(e,yv(new gv(e,t,s,u,i,v)))}if(!ar(e,c,ZM(i)))throw Ue.With("EACCES",o,"_open");if(i&Ow)throw Ue.With("EEXIST",o,"_open");const f=new ei(e,yv(new gv(e,t,s,u,i,c)));return i&Dw&&await f.truncate(0),f}async function ko(e,t="r",n=420){return await Nh(this,e,{flag:t,mode:n})}async function Z0(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Tl(t,null,"r",292);return await Eo(n,typeof e=="object"&&"fd"in e?e:await ko.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function Y0(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","w+",420),i=Eo(r,e instanceof ei?e:await ko.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new Ue(lt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function m5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","a",420);if(!(Rl(a.flag)&fd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Eo(r,typeof e=="object"&&"fd"in e?e:await ko.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function jk(e){e=await mc.call(this,e);const{fs:t,path:n}=Fn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!Yo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ba&&!ar(this,r,Yr))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),$a(this,"rename",e.toString())}catch(r){throw ir(r,{[n]:e})}}async function Ih(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:ts.credentials;t=typeof t=="object"?t:{mode:t};const o=cc(t==null?void 0:t.mode,511);e=await mc.call(this,e);const{fs:s,path:u,root:c}=Fn(e,this),f={[u]:e},h=async(p,g)=>{if(!ar(this,g,Yr))throw Ue.With("EACCES",Yn(p),"mkdir");const v=await s.mkdir(p,{mode:o,uid:g.mode&U0?g.uid:a,gid:g.mode&q0?g.gid:i});return $a(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){await h(u,await s.stat(Yn(u)));return}const p=[];for(let v=u,b=e;!await s.exists(v);v=Yn(v),b=Yn(b))p.unshift(v),f[v]=b;if(!p.length)return;const g=[await s.stat(Yn(p[0]))];for(const[v,b]of p.entries())g.push(await h(b,g[v]));return c.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(c.length)}catch(p){throw ir(p,f)}}async function pc(e,t){t=typeof t=="object"?t:{encoding:t},e=await mc.call(this,e);const{fs:n,path:r}=Fn(e,this),a=await n.stat(r).catch(u=>lr(ir(u,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!ar(this,a,ya))throw Ue.With("EACCES",e,"readdir");if(!Yo(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(u=>lr(ir(u,{[r]:e}))),o=[],s=async u=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(tr(r,u)).catch(f=>{if(f.code!="ENOENT")throw ir(f,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?o.push(new r0(u,c)):(t==null?void 0:t.encoding)=="buffer"?o.push(Rr.from(u)):o.push(u),!(!(t!=null&&t.recursive)||!Yo(c))))for(const f of await pc.call(this,tr(e,u),t))f instanceof r0?(f.path=tr(u,f.path),o.push(f)):Rr.isBuffer(f)?o.push(Rr.from(tr(u,ik(f)))):o.push(tr(u,f))};return await Promise.all(i.map(s)),o}async function g5(e,t){e=ln(e),t=ln(t);const{fs:n,path:r}=Fn(e,this),a=Fn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ba&&!ar(this,await n.stat(Yn(r)),ya))throw Ue.With("EACCES",Yn(r),"link");if(ba&&!(await Ji.call(this,Yn(t))).hasAccess(Yr,this))throw Ue.With("EACCES",Yn(t),"link");if(ba&&!ar(this,await n.stat(r),ya))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw ir(i,{[a.path]:t,[r]:e})}}async function y5(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid symlink type: "+n);if(t=ln(t),await W0.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=Eo(r,await Nh(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(ln(e,!0)),await a.chmod(Hl)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function bv(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Eo(n,await Nh(this,ln(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function b5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await ko.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function v5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await Nh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function w5(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Eo(n,await ko.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function _5(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Eo(n,await Nh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function Mk(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await ko.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function x5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await Nh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function vv(e,t,n){if(n){const u=Fn(t,e),c=await u.fs.stat(u.path).catch(()=>{});return{...u,fullPath:t,stats:c}}try{const u=Fn(t,e),c=await u.fs.stat(u.path);if(!sh(c))return{...u,fullPath:t,stats:c};const f=Pl.call(e,Yn(t),(await bv.call(e,t)).toString());return await vv(e,f)}catch{}const{base:r,dir:a}=Ss(t),i=a=="/"?"/":await mc.call(e,a),o=tr(i,r),s=Fn(o,e);try{const u=await s.fs.stat(s.path);if(!sh(u))return{...s,fullPath:o,stats:u};const c=Pl.call(e,i,(await bv.call(e,o)).toString());return await vv(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw ir(u,{[s.path]:o})}}async function mc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=await vv(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Rr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function Sne(e,t={}){const n=new QM(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var u;(u=r.shift())===null||u===void 0||u({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function S5(e,t=fk){if(!(await Ji.call(this,e)).hasAccess(t,this))throw new Ue(lt.EACCES)}async function X0(e,t){e=ln(e);const n=await zw.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&yr){case ua:if(t!=null&&t.recursive)for(const r of await pc.call(this,e))await X0.call(this,tr(e,r),t);await jk.call(this,e);break;case Vo:case Hl:case Sd:case Ed:await K0.call(this,e);break;case Cd:case xd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}async function E5(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await Ih.call(this,a),n=="buffer"?Rr.from(a):a}async function Pk(e,t,n){if(e=ln(e),t=ln(t),n&&n&hk&&await W0.call(this,t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");await Y0.call(this,t,await Z0.call(this,e)),$a(this,"rename",t.toString())}function C5(e,t){return e=ln(e),Promise.resolve(new kk(e,this))}async function Fk(e,t,n){e=ln(e),t=ln(t);const r=await zw.call(this,e);if(n!=null&&n.errorOnExist&&await W0.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&yr){case ua:{if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([pc.call(this,e,{withFileTypes:!0}),Ih.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(tr(e,o.name),tr(t,o.name))||await Fk.call(this,tr(e,o.name),tr(t,o.name),n)};await Promise.all(a.map(i));break}case Vo:case Hl:await Pk.call(this,e,t);break;case Sd:case Ed:case Cd:case xd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await Mk.call(this,t,r.atime,r.mtime)}async function k5(e,t){e=ln(e);const{fs:n}=Fn(e,this);return Promise.resolve(XM(n,t==null?void 0:t.bigint))}function A5(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const u=await pc(s,{withFileTypes:r,encoding:"utf8"});for(const c of u){const f=r?c.path:s+"/"+c;a(r?c:f)||((await Ji(f)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(f)),i.some(h=>h.test(f.replace(/^\/+/g,"")))&&(yield r?c:f.replace(/^\/+/g,"")))}}return o(n)}const Ene=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:ei,access:S5,appendFile:m5,chmod:w5,chown:b5,constants:qM,copyFile:Pk,cp:Fk,exists:W0,glob:A5,lchmod:_5,lchown:v5,link:g5,lstat:zw,lutimes:x5,mkdir:Ih,mkdtemp:E5,open:ko,opendir:C5,readFile:Z0,readdir:pc,readlink:bv,realpath:mc,rename:Dk,rm:X0,rmdir:jk,stat:Ji,statfs:k5,symlink:y5,truncate:p5,unlink:K0,utimes:Mk,watch:Sne,writeFile:Y0},Symbol.toStringTag,{value:"Module"})),Rn=()=>{};async function Cne(e){const t=[];for await(const n of e)t.push(n);return t}function kne(e,t,n=Rn){Dk.call(this,e,t).then(()=>n()).catch(n)}function Ane(e,t=Rn){W0.call(this,e).then(t).catch(()=>t(!1))}function Tne(e,t,n=Rn){n=typeof t=="function"?t:n,Ji.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function Rne(e,t,n=Rn){n=typeof t=="function"?t:n,zw.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function Nne(e,t=0,n=Rn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;p5.call(this,e,r).then(()=>n()).catch(n)}function Ine(e,t=Rn){K0.call(this,e).then(()=>t()).catch(t)}function One(e,t,n,r=Rn){const a=cc(n,420);r=typeof n=="function"?n:r,ko.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function Dne(e,t,n=Rn){n=typeof t=="function"?t:n,Z0.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function jne(e,t,n,r=Rn){r=typeof n=="function"?n:r,Y0.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function Mne(e,t,n,r=Rn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,m5.call(this,e,t,a).then(()=>r()).catch(r)}function Pne(e,t,n=Rn){n=typeof t=="function"?t:n,new ei(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new kd(r):r)).catch(n)}function Fne(e,t=Rn){new ei(this,e).close().then(()=>t()).catch(t)}function Lne(e,t,n=Rn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new ei(this,e);if(r<0)throw new Ue(lt.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function $ne(e,t=Rn){new ei(this,e).sync().then(()=>t()).catch(t)}function Bne(e,t=Rn){new ei(this,e).datasync().then(()=>t()).catch(t)}function zne(e,t,n,r,a,i=Rn){let o,s,u,c,f;const h=new ei(this,e);if(typeof t=="string"){switch(f="utf8",typeof n){case"function":i=n;break;case"number":c=n,f=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(lt.EINVAL,"Invalid arguments"));return}o=Rr.from(t),s=0,u=o.length;const p=i;h.write(o,s,u,c).then(({bytesWritten:g})=>p(void 0,g,o.toString(f))).catch(p)}else{o=Rr.from(t.buffer),s=n,u=r,c=typeof a=="number"?a:null;const p=typeof a=="function"?a:i;h.write(o,s,u,c).then(({bytesWritten:g})=>p(void 0,g,o)).catch(p)}}function Une(e,t,n,r,a,i=Rn){new ei(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function qne(e,t,n,r=Rn){new ei(this,e).chown(t,n).then(()=>r()).catch(r)}function Hne(e,t,n){new ei(this,e).chmod(t).then(()=>n()).catch(n)}function Vne(e,t,n,r=Rn){new ei(this,e).utimes(t,n).then(()=>r()).catch(r)}function Gne(e,t=Rn){jk.call(this,e).then(()=>t()).catch(t)}function Wne(e,t,n=Rn){Ih.call(this,e,t).then(()=>n()).catch(n)}function Kne(e,t,n=Rn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};pc.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function Zne(e,t,n=Rn){g5.call(this,e,t).then(()=>n()).catch(n)}function Yne(e,t,n,r=Rn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,y5.call(this,e,t,a).then(()=>r()).catch(r)}function Xne(e,t,n=Rn){n=typeof t=="function"?t:n,bv.call(this,e).then(r=>n(void 0,r)).catch(n)}function Jne(e,t,n,r=Rn){b5.call(this,e,t,n).then(()=>r()).catch(r)}function Qne(e,t,n,r=Rn){v5.call(this,e,t,n).then(()=>r()).catch(r)}function ere(e,t,n=Rn){w5.call(this,e,t).then(()=>n()).catch(n)}function tre(e,t,n=Rn){_5.call(this,e,t).then(()=>n()).catch(n)}function nre(e,t,n,r=Rn){Mk.call(this,e,t,n).then(()=>r()).catch(r)}function rre(e,t,n,r=Rn){x5.call(this,e,t,n).then(()=>r()).catch(r)}function are(e,t,n=Rn){n=typeof t=="function"?t:n,mc.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function ire(e,t,n=Rn){const r=typeof t=="number"?t:ya;n=typeof t=="function"?t:n,S5.call(this,e,r).then(()=>n()).catch(n)}const Pf=new Map;function ore(e,t,n){const r=ln(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(lt.EINVAL,"No listener specified",e.toString(),"watchFile");if(Pf.has(r)){const o=Pf.get(r);o&&o.listeners.add(n);return}const i=new Gte(this,r,a);i.on("change",(o,s)=>{const u=Pf.get(r);if(u)for(const c of u.listeners)c(o,s)}),Pf.set(r,{watcher:i,listeners:new Set})}function sre(e,t=Rn){const n=ln(e),r=Pf.get(n);r&&(t&&t!==Rn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Pf.delete(n)))}function lre(e,t,n){const r=new QM(this,ln(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Rn),r}function ure(e,t){t=typeof t=="object"?t:{encoding:t};const n=ko.call(this,e,"r",t==null?void 0:t.mode);return new Ik({...t,autoClose:!0},n)}function cre(e,t){t=typeof t=="object"?t:{encoding:t};const n=ko.call(this,e,"w",t==null?void 0:t.mode);return new Ok(t,n)}function dre(e,t,n=Rn){n=typeof t=="function"?t:n,X0.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function fre(e,t,n=Rn){n=typeof t=="function"?t:n,E5.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function hre(e,t,n,r=Rn){r=typeof n=="function"?n:r,Pk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function pre(e,t,n,r=Rn){r=typeof n=="function"?n:r,new ei(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function mre(e,t,n,r=Rn){r=typeof n=="function"?n:r,new ei(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function gre(e,t,n=Rn){n=typeof t=="function"?t:n,C5.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function yre(e,t,n,r=Rn){r=typeof n=="function"?n:r,Fk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function bre(e,t,n=Rn){n=typeof t=="function"?t:n,k5.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function vre(e,t){const n=await ko.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function wre(e,t,n=Rn){n=typeof t=="function"?t:n;const r=A5.call(this,e,typeof t=="function"?void 0:t);Cne(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Gc=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),p=!0},Ui=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},_re=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},wv;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(wv||(wv={}));let T5=(()=>{var e,t,n,r,a;let i=[_d()],o,s=[],u,c,f=[],h=[],p,g=[],v=[],b,_=[],x=[],S,E=[],C=[],k,D=[],O=[],N,z=[],H=[];return u=class{constructor(X=lr(new Ue(lt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Ui(this,f,0),this.extsize=(Ui(this,h),Ui(this,g,0)),this.nextents=(Ui(this,v),Ui(this,_,0)),this.projid=(Ui(this,x),Ui(this,E,0)),this.cowextsize=(Ui(this,C),Ui(this,D,0)),this.pad=(Ui(this,O),Ui(this,z,[])),Ui(this,H),this.extsize=X.size,this.nextents=1,this.projid=X.uid,this.cowextsize=X.size;for(const F of Object.keys(Ei))X.flags&Ei[F]&&F in wv&&(this.xflags|=wv[F])}},_re(u,"fsxattr"),(()=>{const X=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=gn).uint32.bind(e)],p=[(t=gn).uint32.bind(t)],b=[(n=gn).uint32.bind(n)],S=[(r=gn).uint32.bind(r)],k=[(a=gn).uint32.bind(a)],N=[gn.char(8)],Gc(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:F=>"xflags"in F,get:F=>F.xflags,set:(F,Z)=>{F.xflags=Z}},metadata:X},f,h),Gc(null,null,p,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:F=>"extsize"in F,get:F=>F.extsize,set:(F,Z)=>{F.extsize=Z}},metadata:X},g,v),Gc(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:F=>"nextents"in F,get:F=>F.nextents,set:(F,Z)=>{F.nextents=Z}},metadata:X},_,x),Gc(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:F=>"projid"in F,get:F=>F.projid,set:(F,Z)=>{F.projid=Z}},metadata:X},E,C),Gc(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:F=>"cowextsize"in F,get:F=>F.cowextsize,set:(F,Z)=>{F.cowextsize=Z}},metadata:X},D,O),Gc(null,null,N,{kind:"field",name:"pad",static:!1,private:!1,access:{has:F=>"pad"in F,get:F=>F.pad,set:(F,Z)=>{F.pad=Z}},metadata:X},z,H),Gc(null,o={value:u},i,{kind:"class",name:u.name,metadata:X},null,s),u=o.value,X&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:X}),Ui(u,s)})(),u})();var jr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(jr||(jr={}));var zo;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(zo||(zo={}));async function xre(e,t,...n){e=ln(e);const{fs:r,path:a}=Fn(e,this);try{const i=new la(await r.stat(a));switch(t){case jr.GetFlags:case zo.GetFlags:return i.flags;case jr.SetFlags:case zo.SetFlags:i.flags=n[0],await r.touch(a,i);return;case jr.GetVersion:case zo.GetVersion:return i.version;case jr.SetVersion:case zo.SetVersion:i.version=n[0],await r.touch(a,i);return;case jr.Fiemap:break;case jr.GetXattr:return new T5(i);case jr.SetXattr:break;case jr.GetLabel:return r.label;case jr.SetLabel:r.label=n[0];return;case jr.GetUUID:return r.uuid;case jr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw ir(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function Sre(e,t,...n){e=ln(e);const{fs:r,path:a}=Fn(e,this);try{const i=new la(r.statSync(a));switch(t){case jr.GetFlags:case zo.GetFlags:return i.flags;case jr.SetFlags:case zo.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case jr.GetVersion:case zo.GetVersion:return i.version;case jr.SetVersion:case zo.SetVersion:i.version=n[0],r.touchSync(a,i);return;case jr.Fiemap:break;case jr.GetXattr:return new T5(i);case jr.SetXattr:break;case jr.GetLabel:return r.label;case jr.SetLabel:r.label=n[0];return;case jr.GetUUID:return r.uuid;case jr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw ir(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const Ere=[];function Oh(e,t,n,r){if(!t.startsWith("user.")&&!Ere.includes(t))throw new Ue(lt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function Cre(e,t,n={}){var r;e=ln(e);const{fs:a,path:i}=Fn(e,this);Oh(this,t,e,"xattr.get");try{const o=await a.stat(i);if(ba&&!ar(this,o,ya))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new ec);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Rr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw ir(o,{[i]:e})}}function kre(e,t,n={}){var r;e=ln(e),Oh(this,t,e,"xattr.get");const{fs:a,path:i}=Fn(e,this);try{const o=a.statSync(i);if(ba&&!ar(this,o,ya))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new ec);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Rr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw ir(o,{[i]:e})}}async function Are(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Fn(e,this);Oh(this,t,e,"xattr.set");try{const s=await i.stat(o);if(ba&&!ar(this,s,Yr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new ec);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Rr.from(n)),await i.touch(o,wd(s,"attributes"))}catch(s){throw ir(s,{[o]:e})}}function Tre(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Fn(e,this);Oh(this,t,e,"xattr.set");try{const s=i.statSync(o);if(ba&&!ar(this,s,Yr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new ec);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Rr.from(n)),i.touchSync(o,wd(s,"attributes"))}catch(s){throw ir(s,{[o]:e})}}async function Rre(e,t){var n;e=ln(e);const{fs:r,path:a}=Fn(e,this);Oh(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(ba&&!ar(this,i,Yr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new ec),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,wd(i,"attributes"))}catch(i){throw ir(i,{[a]:e})}}function Nre(e,t){var n;e=ln(e);const{fs:r,path:a}=Fn(e,this);Oh(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(ba&&!ar(this,i,Yr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new ec),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,wd(i,"attributes"))}catch(i){throw ir(i,{[a]:e})}}async function Ire(e){e=ln(e);const{fs:t,path:n}=Fn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw ir(r,{[n]:e})}}function Ore(e){e=ln(e);const{fs:t,path:n}=Fn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw ir(r,{[n]:e})}}const Dre=Object.freeze(Object.defineProperty({__proto__:null,get:Cre,getSync:kre,list:Ire,listSync:Ore,remove:Rre,removeSync:Nre,set:Are,setSync:Tre},Symbol.toStringTag,{value:"Module"})),Tr=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:Tte,Dir:kk,Dirent:r0,get IOC(){return jr},get IOC32(){return zo},ReadStream:Ik,Stats:Vl,StatsFs:Ate,WriteStream:Ok,access:ire,accessSync:dne,appendFile:Mne,appendFileSync:Xte,chmod:ere,chmodSync:lne,chown:Jne,chownSync:one,chroot:Hte,close:Fne,closeSync:Td,constants:qM,copyFile:hre,copyFileSync:a5,cp:yre,cpSync:i5,createReadStream:ure,createWriteStream:cre,exists:Ane,existsSync:yk,fchmod:Hne,fchmodSync:Sk,fchown:qne,fchownSync:xk,fdatasync:Bne,fdatasyncSync:tne,fstat:Pne,fstatSync:Jte,fsync:$ne,fsyncSync:ene,ftruncate:Lne,ftruncateSync:Qte,futimes:Vne,futimesSync:Ek,glob:wre,globSync:yne,ioctl:xre,ioctlSync:Sre,lchmod:tre,lchmodSync:une,lchown:Qne,lchownSync:sne,link:Zne,linkSync:ane,lopenSync:Pw,lstat:Rne,lstatSync:bk,lutimes:rre,lutimesSync:cne,mkdir:Wne,mkdirSync:Ck,mkdtemp:fre,mkdtempSync:fne,mount:gk,open:One,openAsBlob:vre,openSync:Mw,opendir:gre,opendirSync:mne,promises:Ene,read:Une,readFile:Dne,readFileSync:wk,readSync:rne,readdir:Kne,readdirSync:Th,readlink:Xne,readlinkSync:DE,readv:pre,readvSync:hne,realpath:are,realpathSync:dc,rename:kne,renameSync:Zte,rm:dre,rmSync:r5,rmdir:Gne,rmdirSync:t5,stat:Tne,statSync:tc,statfs:bre,statfsSync:gne,symlink:Yne,symlinkSync:ine,truncate:Nne,truncateSync:Yte,umount:YM,unlink:Ine,unlinkSync:vk,unwatchFile:sre,utimes:nre,utimesSync:n5,watch:lre,watchFile:ore,write:zne,writeFile:jne,writeFileSync:_k,writeSync:nne,writev:mre,writevSync:pne,xattr:Dre},Symbol.toStringTag,{value:"Module"}));function f4(e){return OM(e)||dk(e)||e instanceof mk}async function R5(e,t=0){if(typeof e!="object"||e==null)throw Si(new Ue(lt.EINVAL,"Invalid options on mount configuration"));if(!f4(e))throw Si(new Ue(lt.EINVAL,"Invalid mount configuration"));if(e instanceof mk)return await e.ready(),e;dk(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&f4(i)){if(IM("Resolving nested mount configuration: "+a),t>10)throw Si(new Ue(lt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await R5(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw Si(new Ue(lt.EPERM,"Backend not available: "+n.name));cte(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function jre(e){if(!OM(e))throw new TypeError("Invalid single mount point configuration");const t=await R5(e);YM("/"),gk("/",t)}const Mre=["delete"];Math.max(...Mre.map(e=>e.length));ute("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const N5=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;N5[e]=t}function Pre(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^N5[(t^e[n])&255];return(t^4294967295)>>>0}var Dr=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),p=!0},wn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},Lk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let h4=(()=>{var e,t,n,r;let a=[_d()],i,o=[],s,u,c=[],f=[],h,p=[],g=[],v,b=[],_=[],x,S=[],E=[];return s=class{constructor(){this.id=wn(this,c,0),this.offset_=(wn(this,f),wn(this,p,0)),this.offset=(wn(this,g),wn(this,b,0)),this.size=(wn(this,_),wn(this,S,0)),wn(this,E)}},Lk(s,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],v=[(n=gn).uint32.bind(n)],x=[(r=gn).uint32.bind(r)],Dr(null,null,u,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,D)=>{k.id=D}},metadata:C},c,f),Dr(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,D)=>{k.offset_=D}},metadata:C},p,g),Dr(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,D)=>{k.offset=D}},metadata:C},b,_),Dr(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,D)=>{k.size=D}},metadata:C},S,E),Dr(null,i={value:s},a,{kind:"class",name:s.name,metadata:C},null,o),s=i.value,C&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),wn(s,o)})(),s})();const p4=255;let Wc=(()=>{var e,t,n,r;let a=[_d()],i,o=[],s,u,c=[],f=[],h,p=[],g=[],v,b=[],_=[],x,S=[],E=[],C,k=[],D=[];var O=s=class{constructor(N=lr(new Ue(lt.EINVAL,"Metadata block must be initialized with a superblock")),z=0){if(this.superblock=N,this.offset=z,this.checksum=wn(this,c,0),this.timestamp=(wn(this,f),wn(this,p,Date.now())),this.previous_offset_=(wn(this,g),wn(this,b,0)),this.previous_offset=(wn(this,_),wn(this,S,0)),this._previous=wn(this,E),this.entries=wn(this,k,Array.from({length:p4},()=>new h4)),wn(this,D),this.superblock=N,this.offset=z,!!z&&(Rw(this,N.store._buffer.subarray(z,z+Mr(O))),!I5(this)))throw Nw(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+z.toString(16)))}get previous(){var N;if(this.previous_offset)return(N=this._previous)!==null&&N!==void 0||(this._previous=new O(this.superblock,this.previous_offset)),this._previous}};return Lk(s,"MetadataBlock"),(()=>{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],v=[(n=gn).uint32.bind(n)],x=[(r=gn).uint32.bind(r)],C=[Qm(h4,p4)],Dr(null,null,u,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:z=>"checksum"in z,get:z=>z.checksum,set:(z,H)=>{z.checksum=H}},metadata:N},c,f),Dr(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:z=>"timestamp"in z,get:z=>z.timestamp,set:(z,H)=>{z.timestamp=H}},metadata:N},p,g),Dr(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:z=>"previous_offset_"in z,get:z=>z.previous_offset_,set:(z,H)=>{z.previous_offset_=H}},metadata:N},b,_),Dr(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:z=>"previous_offset"in z,get:z=>z.previous_offset,set:(z,H)=>{z.previous_offset=H}},metadata:N},S,E),Dr(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:z=>"entries"in z,get:z=>z.entries,set:(z,H)=>{z.entries=H}},metadata:N},k,D),Dr(null,i={value:s},a,{kind:"class",name:s.name,metadata:N},null,o),O=s=i.value,N&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),wn(s,o)})(),O=s})();const m4=2049864546;(()=>{var e,t,n,r,a,i,o,s,u,c,f;let h=[_d()],p,g=[],v,b,_=[],x=[],S,E=[],C=[],k,D=[],O=[],N,z=[],H=[],X,F=[],Z=[],L,de=[],ae=[],ne,ee=[],se=[],W,J=[],Y=[],re,be=[],we=[],Me,Pe=[],Ae=[],Te,qe=[],it=[],Ie,Re=[],U=[],Ce,Ne=[],ce=[];var ie=v=class{constructor(Q=lr(new Ue(lt.EINVAL,"Super block must be initialized with a store"))){if(this.store=Q,this.checksum=wn(this,_,0),this.magic=(wn(this,x),wn(this,E,m4)),this.version=(wn(this,C),wn(this,D,1)),this.inode_format=(wn(this,O),wn(this,z,Nte)),this.flags=(wn(this,H),wn(this,F,0)),this.used_bytes=(wn(this,Z),wn(this,de,BigInt(0))),this.total_bytes=(wn(this,ae),wn(this,ee,BigInt(0))),this.uuid=(wn(this,se),wn(this,J,BigInt(0))),this.metadata_block_size=(wn(this,Y),wn(this,be,Mr(Wc))),this.metadata_offset_=(wn(this,we),wn(this,Pe,0)),this.metadata_offset=(wn(this,Ae),wn(this,qe,0)),this.metadata=wn(this,it),this.label=wn(this,Re,""),this._padding=(wn(this,U),wn(this,Ne,new Array(132).fill(0))),wn(this,ce),this.store=Q,Q._view.getUint32(Wee(ie,"magic"),!0)!=m4){Za("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Wc(this),this.metadata.offset=Mr(ie),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Mr(ie)+Mr(Wc)),this.total_bytes=BigInt(Q._buffer.byteLength),Q._write(this),Q._write(this.metadata);return}if(Rw(this,Q._buffer.subarray(0,Mr(ie))),!I5(this))throw Nw(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Wc(this,this.metadata_offset)}rotateMetadata(){const Q=new Wc(this);return Q.offset=Number(this.used_bytes),Q.previous_offset=this.metadata_offset,this.metadata=Q,this.metadata_offset=Q.offset,this.store._write(Q),this.used_bytes+=BigInt(Mr(Wc)),this.store._write(this),Q}isUnused(Q,xe){if(!xe)return!0;if(Q+xe>this.total_bytes||Q<Mr(ie))return!1;for(let Le=this.metadata;Le;Le=Le.previous){if(Q<Le.offset+Mr(Wc)&&Q+xe>Le.offset)return!1;for(const Se of Le.entries)if(Se.offset&&(Q>=Se.offset&&Q<Se.offset+Se.size||Q+xe>Se.offset&&Q+xe<=Se.offset+Se.size||Q<=Se.offset&&Q+xe>=Se.offset+Se.size))return!1}return!0}};return Lk(v,"SuperBlock"),(()=>{const Q=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=gn).uint32.bind(e)],S=[(t=gn).uint32.bind(t)],k=[(n=gn).uint16.bind(n)],N=[(r=gn).uint16.bind(r)],X=[(a=gn).uint32.bind(a)],L=[(i=gn).uint64.bind(i)],ne=[(o=gn).uint64.bind(o)],W=[(s=gn).uint128.bind(s)],re=[(u=gn).uint32.bind(u)],Me=[(c=gn).uint32.bind(c)],Te=[(f=gn).uint32.bind(f)],Ie=[gn.char(64)],Ce=[gn.char(132)],Dr(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Le)=>{xe.checksum=Le}},metadata:Q},_,x),Dr(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Le)=>{xe.magic=Le}},metadata:Q},E,C),Dr(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Le)=>{xe.version=Le}},metadata:Q},D,O),Dr(null,null,N,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Le)=>{xe.inode_format=Le}},metadata:Q},z,H),Dr(null,null,X,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Le)=>{xe.flags=Le}},metadata:Q},F,Z),Dr(null,null,L,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Le)=>{xe.used_bytes=Le}},metadata:Q},de,ae),Dr(null,null,ne,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Le)=>{xe.total_bytes=Le}},metadata:Q},ee,se),Dr(null,null,W,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Le)=>{xe.uuid=Le}},metadata:Q},J,Y),Dr(null,null,re,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Le)=>{xe.metadata_block_size=Le}},metadata:Q},be,we),Dr(null,null,Me,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Le)=>{xe.metadata_offset_=Le}},metadata:Q},Pe,Ae),Dr(null,null,Te,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Le)=>{xe.metadata_offset=Le}},metadata:Q},qe,it),Dr(null,null,Ie,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Le)=>{xe.label=Le}},metadata:Q},Re,U),Dr(null,null,Ce,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Le)=>{xe._padding=Le}},metadata:Q},Ne,ce),Dr(null,p={value:v},h,{kind:"class",name:v.name,metadata:Q},null,g),ie=v=p.value,Q&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q}),wn(v,g)})(),ie=v})();function I5(e){const t=La(e),n=Pre(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Tr;function Fre(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function ME(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?lt[Fre(e)]:lt.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Ff(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(ME(e.error))}})}class Lre extends OE{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Ff(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Ff(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Ff(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Ff(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(ME(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(ME(this.tx.error)),this.tx.abort(),t}}async function $re(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Za("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Ff(n)}class Bre{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new Lre(t,this)}}const zre={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Ff(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await $re(e.storeName||"zenfs",e.idbFactory),n=new Bre(t),r=new WM(n);if(e!=null&&e.disableAsyncCache)return ck("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},Ure=zre,_v={APP_LOADED:"app:loaded",APP_ERROR:"app:error",CONVERSATION_SELECTED:"conversation:selected",CONVERSATION_CREATED:"conversation:created",CONVERSATION_DELETED:"conversation:deleted",CONVERSATION_RENAMED:"conversation:renamed",INTERACTION_STARTED:"interaction:started",INTERACTION_STREAM_CHUNK:"interaction:stream_chunk",INTERACTION_COMPLETED:"interaction:completed",PROMPT_SUBMITTED:"prompt:submitted",PROMPT_FINALISED:"prompt:finalised",SETTINGS_OPENED:"settings:opened",SETTINGS_CLOSED:"settings:closed",MOD_LOADED:"mod:loaded",MOD_ERROR:"mod:error",VFS_FILE_READ:"vfs:file:read",VFS_FILE_WRITTEN:"vfs:file:written",VFS_FILE_DELETED:"vfs:file:deleted"};function ob(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var MS={exports:{}},g4;function qre(){return g4||(g4=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(c,f){if(!a[c]){if(!r[c]){var h=typeof ob=="function"&&ob;if(!f&&h)return h(c,!0);if(s)return s(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var g=a[c]={exports:{}};r[c][0].call(g.exports,function(v){var b=r[c][1][v];return o(b||v)},g,g.exports,n,r,a,i)}return a[c].exports}for(var s=typeof ob=="function"&&ob,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,f,h,p,g,v,b,_=[],x=0,S=u.length,E=S,C=i.getTypeOf(u)!=="string";x<u.length;)E=S-x,h=C?(c=u[x++],f=x<S?u[x++]:0,x<S?u[x++]:0):(c=u.charCodeAt(x++),f=x<S?u.charCodeAt(x++):0,x<S?u.charCodeAt(x++):0),p=c>>2,g=(3&c)<<4|f>>4,v=1<E?(15&f)<<2|h>>6:64,b=2<E?63&h:64,_.push(s.charAt(p)+s.charAt(g)+s.charAt(v)+s.charAt(b));return _.join("")},a.decode=function(u){var c,f,h,p,g,v,b=0,_=0,x="data:";if(u.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&E--,u.charAt(u.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|E):new Array(0|E);b<u.length;)c=s.indexOf(u.charAt(b++))<<2|(p=s.indexOf(u.charAt(b++)))>>4,f=(15&p)<<4|(g=s.indexOf(u.charAt(b++)))>>2,h=(3&g)<<6|(v=s.indexOf(u.charAt(b++))),S[_++]=c,g!==64&&(S[_++]=f),v!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(f,h,p,g,v){this.compressedSize=f,this.uncompressedSize=h,this.crc32=p,this.compression=g,this.compressedContent=v}c.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,h,p){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,u=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[c]=s}return u}();r.exports=function(s,u){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(c,f,h,p){var g=o,v=p+h;c^=-1;for(var b=p;b<v;b++)c=c>>>8^g[255&(c^f[b])];return-1^c}(0|u,s,s.length,0):function(c,f,h,p){var g=o,v=p+h;c^=-1;for(var b=p;b<v;b++)c=c>>>8^g[255&(c^f.charCodeAt(b))];return-1^c}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),u=n("./stream/GenericWorker"),c=i?"uint8array":"array";function f(h,p){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}a.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,h.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},a.compressWorker=function(h){return new f("Deflate",h)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var b,_="";for(b=0;b<v;b++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,v,b,_,x,S){var E,C,k=g.file,D=g.compression,O=S!==c.utf8encode,N=s.transformTo("string",S(k.name)),z=s.transformTo("string",c.utf8encode(k.name)),H=k.comment,X=s.transformTo("string",S(H)),F=s.transformTo("string",c.utf8encode(H)),Z=z.length!==k.name.length,L=F.length!==H.length,de="",ae="",ne="",ee=k.dir,se=k.date,W={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(W.crc32=g.crc32,W.compressedSize=g.compressedSize,W.uncompressedSize=g.uncompressedSize);var J=0;v&&(J|=8),O||!Z&&!L||(J|=2048);var Y=0,re=0;ee&&(Y|=16),x==="UNIX"?(re=798,Y|=function(we,Me){var Pe=we;return we||(Pe=Me?16893:33204),(65535&Pe)<<16}(k.unixPermissions,ee)):(re=20,Y|=function(we){return 63&(we||0)}(k.dosPermissions)),E=se.getUTCHours(),E<<=6,E|=se.getUTCMinutes(),E<<=5,E|=se.getUTCSeconds()/2,C=se.getUTCFullYear()-1980,C<<=4,C|=se.getUTCMonth()+1,C<<=5,C|=se.getUTCDate(),Z&&(ae=i(1,1)+i(f(N),4)+z,de+="up"+i(ae.length,2)+ae),L&&(ne=i(1,1)+i(f(X),4)+F,de+="uc"+i(ne.length,2)+ne);var be="";return be+=`
\0`,be+=i(J,2),be+=D.magic,be+=i(E,2),be+=i(C,2),be+=i(W.crc32,4),be+=i(W.compressedSize,4),be+=i(W.uncompressedSize,4),be+=i(N.length,2),be+=i(de.length,2),{fileRecord:h.LOCAL_FILE_HEADER+be+N+de,dirRecord:h.CENTRAL_FILE_HEADER+i(re,2)+be+i(X.length,2)+"\0\0\0\0"+i(Y,4)+i(_,4)+N+de+X}}var s=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),f=n("../crc32"),h=n("../signature");function p(g,v,b,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(p,u),p.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-_-1))/b:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=o(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=o(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,_=function(x,S,E,C,k){var D=s.transformTo("string",k(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(D.length,2)+D}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},p.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var v=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},p.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,u,c){var f=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{s.forEach(function(p,g){h++;var v=function(S,E){var C=S||E,k=i[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(g.options.compression,u.compression),b=g.options.compressionOptions||u.compressionOptions||{},_=g.dir,x=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:p,dir:_,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(p){f.error(p)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(p){return new o.Promise(function(g,v){var b=p.decompressed.getContentWorker().pipe(new c);b.on("error",function(_){v(_)}).on("end",function(){b.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(p,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(b){var _=new u(g);return _.load(b),_}).then(function(b){var _=[o.Promise.resolve(b)],x=b.files;if(g.checkCRC32)for(var S=0;S<x.length;S++)_.push(h(x[S]));return o.Promise.all(_)}).then(function(b){for(var _=b.shift(),x=_.files,S=0;S<x.length;S++){var E=x[S],C=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(k).unsafeOriginalName=C)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(s,o),s.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,u,c){i.call(this,u),this._helper=s;var f=this;s.on("data",function(h,p){f.push(h)||f._helper.pause(),c&&c(p)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Wt<"u",newBufferFrom:function(i,o){if(Wt.from&&Wt.from!==Uint8Array.from)return Wt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Wt(i,o)},allocBuffer:function(i){if(Wt.alloc)return Wt.alloc(i);var o=new Wt(i);return o.fill(0),o},isBuffer:function(i){return Wt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,D,O){var N,z=s.getTypeOf(D),H=s.extend(O||{},f);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(k=x(k)),H.createFolders&&(N=_(k))&&S.call(this,N,!0);var X=z==="string"&&H.binary===!1&&H.base64===!1;O&&O.binary!==void 0||(H.binary=!X),(D instanceof h&&D.uncompressedSize===0||H.dir||!D||D.length===0)&&(H.base64=!1,H.binary=!0,D="",H.compression="STORE",z="string");var F=null;F=D instanceof h||D instanceof u?D:v.isNode&&v.isStream(D)?new b(k,D):s.prepareContent(k,D,H.binary,H.optimizedBinaryString,H.base64);var Z=new p(k,F,H);this.files[k]=Z}var o=n("./utf8"),s=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),_=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var D=k.lastIndexOf("/");return 0<D?k.substring(0,D):""},x=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},S=function(k,D){return D=D!==void 0?D:f.createFolders,k=x(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:D}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var D,O,N;for(D in this.files)N=this.files[D],(O=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&k(O,N)},filter:function(k){var D=[];return this.forEach(function(O,N){k(O,N)&&D.push(N)}),D},file:function(k,D,O){if(arguments.length!==1)return k=this.root+k,i.call(this,k,D,O),this;if(E(k)){var N=k;return this.filter(function(H,X){return!X.dir&&N.test(H)})}var z=this.files[this.root+k];return z&&!z.dir?z:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(z,H){return H.dir&&k.test(z)});var D=this.root+k,O=S.call(this,D),N=this.clone();return N.root=O.name,N},remove:function(k){k=this.root+k;var D=this.files[k];if(D||(k.slice(-1)!=="/"&&(k+="/"),D=this.files[k]),D&&!D.dir)delete this.files[k];else for(var O=this.filter(function(z,H){return H.name.slice(0,k.length)===k}),N=0;N<O.length;N++)delete this.files[O[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var D,O={};try{if((O=s.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");s.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var N=O.comment||this.comment||"";D=g.generateWorker(this,O,N)}catch(z){(D=new u("error")).error(z)}return new c(D,O.type||"string",O.mimeType)},generateAsync:function(k,D){return this.generateInternalStream(k).accumulate(D)},generateNodeStream:function(k,D){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(D)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===u&&this.data[p+1]===c&&this.data[p+2]===f&&this.data[p+3]===h)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),p=this.readData(4);return u===p[0]&&c===p[1]&&f===p[2]&&h===p[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,c=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=s,c},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var p=i.getTypeOf(h);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new c(h):o.uint8array?new f(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,i),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(s,o),s.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=i.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),u=n("../base64"),c=n("../support"),f=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,b){return new f.Promise(function(_,x){var S=[],E=v._internalType,C=v._outputType,k=v._mimeType;v.on("data",function(D,O){S.push(D),b&&b(O)}).on("error",function(D){S=[],x(D)}).on("end",function(){try{var D=function(O,N,z){switch(O){case"blob":return i.newBlob(i.transformTo("arraybuffer",N),z);case"base64":return u.encode(N);default:return i.transformTo(O,N)}}(C,function(O,N){var z,H=0,X=null,F=0;for(z=0;z<N.length;z++)F+=N[z].length;switch(O){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(X=new Uint8Array(F),z=0;z<N.length;z++)X.set(N[z],H),H+=N[z].length;return X;case"nodebuffer":return Wt.concat(N);default:throw new Error("concat : unsupported type '"+O+"'")}}(E,S),k);_(D)}catch(O){x(O)}S=[]}).resume()})}function g(v,b,_){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=_,i.checkSupport(x),this._worker=v.pipe(new o(x)),v.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}g.prototype={accumulate:function(v){return p(this,v)},on:function(v,b){var _=this;return v==="data"?this._worker.on(v,function(x){b.call(_,x.data,x.meta)}):this._worker.on(v,function(){i.delay(b,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Wt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function p(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(v){var b,_,x,S,E,C=v.length,k=0;for(S=0;S<C;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),k+=_<128?1:_<2048?2:_<65536?3:4;for(b=o.uint8array?new Uint8Array(k):new Array(k),S=E=0;E<k;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),_<128?b[E++]=_:(_<2048?b[E++]=192|_>>>6:(_<65536?b[E++]=224|_>>>12:(b[E++]=240|_>>>18,b[E++]=128|_>>>12&63),b[E++]=128|_>>>6&63),b[E++]=128|63&_);return b}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var b,_,x,S,E=v.length,C=new Array(2*E);for(b=_=0;b<E;)if((x=v[b++])<128)C[_++]=x;else if(4<(S=c[x]))C[_++]=65533,b+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&b<E;)x=x<<6|63&v[b++],S--;1<S?C[_++]=65533:x<65536?C[_++]=x:(x-=65536,C[_++]=55296|x>>10&1023,C[_++]=56320|1023&x)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,u),h.prototype.processChunk=function(g){var v=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+c[S[C]]>E?C:E}(v),x=v;_!==v.length&&(o.uint8array?(x=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(x=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(p,u),p.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),u=n("./external");function c(b){return b}function f(b,_){for(var x=0;x<b.length;++x)_[x]=255&b.charCodeAt(x);return _}n("setimmediate"),a.newBlob=function(b,_){a.checkSupport("blob");try{return new Blob([b],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,_,x){var S=[],E=0,C=b.length;if(C<=x)return String.fromCharCode.apply(null,b);for(;E<C;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+x,C)))):S.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+x,C)))),E+=x;return S.join("")},stringifyByChar:function(b){for(var _="",x=0;x<b.length;x++)_+=String.fromCharCode(b[x]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function p(b){var _=65536,x=a.getTypeOf(b),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(b,x,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(b)}function g(b,_){for(var x=0;x<b.length;x++)_[x]=b[x];return _}a.applyFromCharCode=p;var v={};v.string={string:c,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return f(b,new Uint8Array(b.length))},nodebuffer:function(b){return f(b,s.allocBuffer(b.length))}},v.array={string:p,array:c,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(b)}},v.arraybuffer={string:function(b){return p(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:c,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:c,nodebuffer:function(b){return s.newBufferFrom(b)}},v.nodebuffer={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:c},a.transformTo=function(b,_){if(_=_||"",!b)return _;a.checkSupport(b);var x=a.getTypeOf(_);return v[x][b](_)},a.resolve=function(b){for(var _=b.split("/"),x=[],S=0;S<_.length;S++){var E=_[S];E==="."||E===""&&S!==0&&S!==_.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var _,x,S="";for(x=0;x<(b||"").length;x++)S+="\\x"+((_=b.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return S},a.delay=function(b,_,x){setImmediate(function(){b.apply(x||null,_||[])})},a.inherits=function(b,_){function x(){}x.prototype=_.prototype,b.prototype=new x},a.extend=function(){var b,_,x={};for(b=0;b<arguments.length;b++)for(_ in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],_)&&x[_]===void 0&&(x[_]=arguments[b][_]);return x},a.prepareContent=function(b,_,x,S,E){return u.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(k,D){var O=new FileReader;O.onload=function(N){k(N.target.result)},O.onerror=function(N){D(N.target.error)},O.readAsArrayBuffer(C)}):C}).then(function(C){var k=a.getTypeOf(C);return k?(k==="arraybuffer"?C=a.transformTo("uint8array",C):k==="string"&&(E?C=o.decode(C):x&&S!==!0&&(C=function(D){return f(D,i.uint8array?new Uint8Array(D.length):new Array(D.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),u=n("./zipEntry"),c=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(h)+")")}},isSignature:function(h,p){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===p;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=c.uint8array?"uint8array":"array",g=o.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=p-g;if(0<v)this.isSignature(p,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),f=n("./compressions"),h=n("./support");function p(g,v){this.options=g,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)&&f[x].magic===_)return f[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,_,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),b=g.readInt(2),_=g.readData(b),this.extraFields[v]={id:v,length:b,value:_};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=b,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,_="string";try{if(!v)throw new Error("No output type specified.");var x=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(b=b.pipe(new u.Utf8EncodeWorker)),!S&&x&&(b=b.pipe(new u.Utf8DecodeWorker))}catch(E){(b=new f("error")).error(E)}return new o(b,_,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,v,b)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,f=new u(v),h=i.document.createTextNode("");f.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var p=new i.MessageChannel;p.port1.onmessage=v,o=function(){p.port2.postMessage(0)}}var g=[];function v(){var b,_;s=!0;for(var x=g.length;x;){for(_=g,g=[],b=-1;++b<x;)_[b]();x=g.length}s=!1}r.exports=function(b){g.push(b)!==1||s||o()}}).call(this,typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},u=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,x!==o&&b(this,x)}function p(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,S,E){i(function(){var C;try{C=S(E)}catch(k){return s.reject(x,k)}C===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,C)})}function v(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function b(x,S){var E=!1;function C(O){E||(E=!0,s.reject(x,O))}function k(O){E||(E=!0,s.resolve(x,O))}var D=_(function(){S(k,C)});D.status==="error"&&C(D.value)}function _(x,S){var E={};try{E.value=x(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===c||typeof S!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==f?g(E,this.state===c?x:S,this.outcome):this.queue.push(new p(E,x,S)),E},p.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},p.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},p.prototype.callRejected=function(x){s.reject(this.promise,x)},p.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},s.resolve=function(x,S){var E=_(v,S);if(E.status==="error")return s.reject(x,E.value);var C=E.value;if(C)b(x,C);else{x.state=c,x.outcome=S;for(var k=-1,D=x.queue.length;++k<D;)x.queue[k].callFulfilled(S)}return x},s.reject=function(x,S){x.state=u,x.outcome=S;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var S=new this(o);return s.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=new Array(E),D=0,O=-1,N=new this(o);++O<E;)z(x[O],O);return N;function z(H,X){S.resolve(H).then(function(F){k[X]=F,++D!==E||C||(C=!0,s.resolve(N,k))},function(F){C||(C=!0,s.reject(N,F))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=-1,D=new this(o);++k<E;)O=x[k],S.resolve(O).then(function(N){C||(C=!0,s.resolve(D,N))},function(N){C||(C=!0,s.reject(D,N))});var O;return D}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=Object.prototype.toString,h=0,p=-1,g=0,v=8;function b(x){if(!(this instanceof b))return new b(x);this.options=o.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(u[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?s.string2buf(S.dictionary):f.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(u[E]);this._dict_set=!0}}function _(x,S){var E=new b(S);if(E.push(x,!0),E.err)throw E.msg||u[E.err];return E.result}b.prototype.push=function(x,S){var E,C,k=this.strm,D=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof x=="string"?k.input=s.string2buf(x):f.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(D),k.next_out=0,k.avail_out=D),(E=i.deflate(k,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(k.output,k.next_out))):this.onData(o.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(k.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=b,a.deflate=_,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,_(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,_(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},b||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||b&&b.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,_.windowBits);if(x!==u.Z_OK)throw new Error(c[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,_){var x=new g(_);if(x.push(b,!0),x.err)throw x.msg||c[x.err];return x.result}g.prototype.push=function(b,_){var x,S,E,C,k,D,O=this.strm,N=this.options.chunkSize,z=this.options.dictionary,H=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof b=="string"?O.input=s.binstring2buf(b):p.call(b)==="[object ArrayBuffer]"?O.input=new Uint8Array(b):O.input=b,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(N),O.next_out=0,O.avail_out=N),(x=i.inflate(O,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&z&&(D=typeof z=="string"?s.string2buf(z):p.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,x=i.inflateSetDictionary(this.strm,D)),x===u.Z_BUF_ERROR&&H===!0&&(x=u.Z_OK,H=!1),x!==u.Z_STREAM_END&&x!==u.Z_OK)return this.onEnd(x),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&x!==u.Z_STREAM_END&&(O.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(O.output,O.next_out),C=O.next_out-E,k=s.buf2string(O.output,E),O.next_out=C,O.avail_out=N-C,C&&o.arraySet(O.output,O.output,E,C,0),this.onData(k)):this.onData(o.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(H=!0)}while((0<O.avail_in||O.avail_out===0)&&x!==u.Z_STREAM_END);return x===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(O.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(b,_){return(_=_||{}).raw=!0,v(b,_)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,f,h,p){if(c.subarray&&u.subarray)u.set(c.subarray(f,f+h),p);else for(var g=0;g<h;g++)u[p+g]=c[f+g]},flattenChunks:function(u){var c,f,h,p,g,v;for(c=h=0,f=u.length;c<f;c++)h+=u[c].length;for(v=new Uint8Array(h),c=p=0,f=u.length;c<f;c++)g=u[c],v.set(g,p),p+=g.length;return v}},s={arraySet:function(u,c,f,h,p){for(var g=0;g<h;g++)u[p+g]=c[f+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(h,p){if(p<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,p));for(var g="",v=0;v<p;v++)g+=String.fromCharCode(h[v]);return g}u[254]=u[254]=1,a.string2buf=function(h){var p,g,v,b,_,x=h.length,S=0;for(b=0;b<x;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),S+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(S),b=_=0;_<S;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?p[_++]=g:(g<2048?p[_++]=192|g>>>6:(g<65536?p[_++]=224|g>>>12:(p[_++]=240|g>>>18,p[_++]=128|g>>>12&63),p[_++]=128|g>>>6&63),p[_++]=128|63&g);return p},a.buf2binstring=function(h){return f(h,h.length)},a.binstring2buf=function(h){for(var p=new i.Buf8(h.length),g=0,v=p.length;g<v;g++)p[g]=h.charCodeAt(g);return p},a.buf2string=function(h,p){var g,v,b,_,x=p||h.length,S=new Array(2*x);for(g=v=0;g<x;)if((b=h[g++])<128)S[v++]=b;else if(4<(_=u[b]))S[v++]=65533,g+=_-1;else{for(b&=_===2?31:_===3?15:7;1<_&&g<x;)b=b<<6|63&h[g++],_--;1<_?S[v++]=65533:b<65536?S[v++]=b:(b-=65536,S[v++]=55296|b>>10&1023,S[v++]=56320|1023&b)}return f(S,v)},a.utf8border=function(h,p){var g;for((p=p||h.length)>h.length&&(p=h.length),g=p-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?p:g+u[h[g]]>p?g:p}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,u){for(var c=65535&i|0,f=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;f=f+(c=c+o[u++]|0)|0,--h;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();r.exports=function(o,s,u,c){var f=i,h=c+u;o^=-1;for(var p=c;p<h;p++)o=o>>>8^f[255&(o^s[p])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),u=n("./adler32"),c=n("./crc32"),f=n("./messages"),h=0,p=4,g=0,v=-2,b=-1,_=4,x=2,S=8,E=9,C=286,k=30,D=19,O=2*C+1,N=15,z=3,H=258,X=H+z+1,F=42,Z=113,L=1,de=2,ae=3,ne=4;function ee(U,Ce){return U.msg=f[Ce],Ce}function se(U){return(U<<1)-(4<U?9:0)}function W(U){for(var Ce=U.length;0<=--Ce;)U[Ce]=0}function J(U){var Ce=U.state,Ne=Ce.pending;Ne>U.avail_out&&(Ne=U.avail_out),Ne!==0&&(o.arraySet(U.output,Ce.pending_buf,Ce.pending_out,Ne,U.next_out),U.next_out+=Ne,Ce.pending_out+=Ne,U.total_out+=Ne,U.avail_out-=Ne,Ce.pending-=Ne,Ce.pending===0&&(Ce.pending_out=0))}function Y(U,Ce){s._tr_flush_block(U,0<=U.block_start?U.block_start:-1,U.strstart-U.block_start,Ce),U.block_start=U.strstart,J(U.strm)}function re(U,Ce){U.pending_buf[U.pending++]=Ce}function be(U,Ce){U.pending_buf[U.pending++]=Ce>>>8&255,U.pending_buf[U.pending++]=255&Ce}function we(U,Ce){var Ne,ce,ie=U.max_chain_length,Q=U.strstart,xe=U.prev_length,Le=U.nice_match,Se=U.strstart>U.w_size-X?U.strstart-(U.w_size-X):0,Ve=U.window,xt=U.w_mask,ht=U.prev,Et=U.strstart+H,Ft=Ve[Q+xe-1],Tt=Ve[Q+xe];U.prev_length>=U.good_match&&(ie>>=2),Le>U.lookahead&&(Le=U.lookahead);do if(Ve[(Ne=Ce)+xe]===Tt&&Ve[Ne+xe-1]===Ft&&Ve[Ne]===Ve[Q]&&Ve[++Ne]===Ve[Q+1]){Q+=2,Ne++;do;while(Ve[++Q]===Ve[++Ne]&&Ve[++Q]===Ve[++Ne]&&Ve[++Q]===Ve[++Ne]&&Ve[++Q]===Ve[++Ne]&&Ve[++Q]===Ve[++Ne]&&Ve[++Q]===Ve[++Ne]&&Ve[++Q]===Ve[++Ne]&&Ve[++Q]===Ve[++Ne]&&Q<Et);if(ce=H-(Et-Q),Q=Et-H,xe<ce){if(U.match_start=Ce,Le<=(xe=ce))break;Ft=Ve[Q+xe-1],Tt=Ve[Q+xe]}}while((Ce=ht[Ce&xt])>Se&&--ie!=0);return xe<=U.lookahead?xe:U.lookahead}function Me(U){var Ce,Ne,ce,ie,Q,xe,Le,Se,Ve,xt,ht=U.w_size;do{if(ie=U.window_size-U.lookahead-U.strstart,U.strstart>=ht+(ht-X)){for(o.arraySet(U.window,U.window,ht,ht,0),U.match_start-=ht,U.strstart-=ht,U.block_start-=ht,Ce=Ne=U.hash_size;ce=U.head[--Ce],U.head[Ce]=ht<=ce?ce-ht:0,--Ne;);for(Ce=Ne=ht;ce=U.prev[--Ce],U.prev[Ce]=ht<=ce?ce-ht:0,--Ne;);ie+=ht}if(U.strm.avail_in===0)break;if(xe=U.strm,Le=U.window,Se=U.strstart+U.lookahead,Ve=ie,xt=void 0,xt=xe.avail_in,Ve<xt&&(xt=Ve),Ne=xt===0?0:(xe.avail_in-=xt,o.arraySet(Le,xe.input,xe.next_in,xt,Se),xe.state.wrap===1?xe.adler=u(xe.adler,Le,xt,Se):xe.state.wrap===2&&(xe.adler=c(xe.adler,Le,xt,Se)),xe.next_in+=xt,xe.total_in+=xt,xt),U.lookahead+=Ne,U.lookahead+U.insert>=z)for(Q=U.strstart-U.insert,U.ins_h=U.window[Q],U.ins_h=(U.ins_h<<U.hash_shift^U.window[Q+1])&U.hash_mask;U.insert&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[Q+z-1])&U.hash_mask,U.prev[Q&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=Q,Q++,U.insert--,!(U.lookahead+U.insert<z)););}while(U.lookahead<X&&U.strm.avail_in!==0)}function Pe(U,Ce){for(var Ne,ce;;){if(U.lookahead<X){if(Me(U),U.lookahead<X&&Ce===h)return L;if(U.lookahead===0)break}if(Ne=0,U.lookahead>=z&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+z-1])&U.hash_mask,Ne=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),Ne!==0&&U.strstart-Ne<=U.w_size-X&&(U.match_length=we(U,Ne)),U.match_length>=z)if(ce=s._tr_tally(U,U.strstart-U.match_start,U.match_length-z),U.lookahead-=U.match_length,U.match_length<=U.max_lazy_match&&U.lookahead>=z){for(U.match_length--;U.strstart++,U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+z-1])&U.hash_mask,Ne=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart,--U.match_length!=0;);U.strstart++}else U.strstart+=U.match_length,U.match_length=0,U.ins_h=U.window[U.strstart],U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+1])&U.hash_mask;else ce=s._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++;if(ce&&(Y(U,!1),U.strm.avail_out===0))return L}return U.insert=U.strstart<z-1?U.strstart:z-1,Ce===p?(Y(U,!0),U.strm.avail_out===0?ae:ne):U.last_lit&&(Y(U,!1),U.strm.avail_out===0)?L:de}function Ae(U,Ce){for(var Ne,ce,ie;;){if(U.lookahead<X){if(Me(U),U.lookahead<X&&Ce===h)return L;if(U.lookahead===0)break}if(Ne=0,U.lookahead>=z&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+z-1])&U.hash_mask,Ne=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),U.prev_length=U.match_length,U.prev_match=U.match_start,U.match_length=z-1,Ne!==0&&U.prev_length<U.max_lazy_match&&U.strstart-Ne<=U.w_size-X&&(U.match_length=we(U,Ne),U.match_length<=5&&(U.strategy===1||U.match_length===z&&4096<U.strstart-U.match_start)&&(U.match_length=z-1)),U.prev_length>=z&&U.match_length<=U.prev_length){for(ie=U.strstart+U.lookahead-z,ce=s._tr_tally(U,U.strstart-1-U.prev_match,U.prev_length-z),U.lookahead-=U.prev_length-1,U.prev_length-=2;++U.strstart<=ie&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+z-1])&U.hash_mask,Ne=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),--U.prev_length!=0;);if(U.match_available=0,U.match_length=z-1,U.strstart++,ce&&(Y(U,!1),U.strm.avail_out===0))return L}else if(U.match_available){if((ce=s._tr_tally(U,0,U.window[U.strstart-1]))&&Y(U,!1),U.strstart++,U.lookahead--,U.strm.avail_out===0)return L}else U.match_available=1,U.strstart++,U.lookahead--}return U.match_available&&(ce=s._tr_tally(U,0,U.window[U.strstart-1]),U.match_available=0),U.insert=U.strstart<z-1?U.strstart:z-1,Ce===p?(Y(U,!0),U.strm.avail_out===0?ae:ne):U.last_lit&&(Y(U,!1),U.strm.avail_out===0)?L:de}function Te(U,Ce,Ne,ce,ie){this.good_length=U,this.max_lazy=Ce,this.nice_length=Ne,this.max_chain=ce,this.func=ie}function qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*O),this.dyn_dtree=new o.Buf16(2*(2*k+1)),this.bl_tree=new o.Buf16(2*(2*D+1)),W(this.dyn_ltree),W(this.dyn_dtree),W(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*C+1),W(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),W(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it(U){var Ce;return U&&U.state?(U.total_in=U.total_out=0,U.data_type=x,(Ce=U.state).pending=0,Ce.pending_out=0,Ce.wrap<0&&(Ce.wrap=-Ce.wrap),Ce.status=Ce.wrap?F:Z,U.adler=Ce.wrap===2?0:1,Ce.last_flush=h,s._tr_init(Ce),g):ee(U,v)}function Ie(U){var Ce=it(U);return Ce===g&&function(Ne){Ne.window_size=2*Ne.w_size,W(Ne.head),Ne.max_lazy_match=i[Ne.level].max_lazy,Ne.good_match=i[Ne.level].good_length,Ne.nice_match=i[Ne.level].nice_length,Ne.max_chain_length=i[Ne.level].max_chain,Ne.strstart=0,Ne.block_start=0,Ne.lookahead=0,Ne.insert=0,Ne.match_length=Ne.prev_length=z-1,Ne.match_available=0,Ne.ins_h=0}(U.state),Ce}function Re(U,Ce,Ne,ce,ie,Q){if(!U)return v;var xe=1;if(Ce===b&&(Ce=6),ce<0?(xe=0,ce=-ce):15<ce&&(xe=2,ce-=16),ie<1||E<ie||Ne!==S||ce<8||15<ce||Ce<0||9<Ce||Q<0||_<Q)return ee(U,v);ce===8&&(ce=9);var Le=new qe;return(U.state=Le).strm=U,Le.wrap=xe,Le.gzhead=null,Le.w_bits=ce,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=ie+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+z-1)/z),Le.window=new o.Buf8(2*Le.w_size),Le.head=new o.Buf16(Le.hash_size),Le.prev=new o.Buf16(Le.w_size),Le.lit_bufsize=1<<ie+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new o.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=Ce,Le.strategy=Q,Le.method=Ne,Ie(U)}i=[new Te(0,0,0,0,function(U,Ce){var Ne=65535;for(Ne>U.pending_buf_size-5&&(Ne=U.pending_buf_size-5);;){if(U.lookahead<=1){if(Me(U),U.lookahead===0&&Ce===h)return L;if(U.lookahead===0)break}U.strstart+=U.lookahead,U.lookahead=0;var ce=U.block_start+Ne;if((U.strstart===0||U.strstart>=ce)&&(U.lookahead=U.strstart-ce,U.strstart=ce,Y(U,!1),U.strm.avail_out===0)||U.strstart-U.block_start>=U.w_size-X&&(Y(U,!1),U.strm.avail_out===0))return L}return U.insert=0,Ce===p?(Y(U,!0),U.strm.avail_out===0?ae:ne):(U.strstart>U.block_start&&(Y(U,!1),U.strm.avail_out),L)}),new Te(4,4,8,4,Pe),new Te(4,5,16,8,Pe),new Te(4,6,32,32,Pe),new Te(4,4,16,16,Ae),new Te(8,16,32,32,Ae),new Te(8,16,128,128,Ae),new Te(8,32,128,256,Ae),new Te(32,128,258,1024,Ae),new Te(32,258,258,4096,Ae)],a.deflateInit=function(U,Ce){return Re(U,Ce,S,15,8,0)},a.deflateInit2=Re,a.deflateReset=Ie,a.deflateResetKeep=it,a.deflateSetHeader=function(U,Ce){return U&&U.state?U.state.wrap!==2?v:(U.state.gzhead=Ce,g):v},a.deflate=function(U,Ce){var Ne,ce,ie,Q;if(!U||!U.state||5<Ce||Ce<0)return U?ee(U,v):v;if(ce=U.state,!U.output||!U.input&&U.avail_in!==0||ce.status===666&&Ce!==p)return ee(U,U.avail_out===0?-5:v);if(ce.strm=U,Ne=ce.last_flush,ce.last_flush=Ce,ce.status===F)if(ce.wrap===2)U.adler=0,re(ce,31),re(ce,139),re(ce,8),ce.gzhead?(re(ce,(ce.gzhead.text?1:0)+(ce.gzhead.hcrc?2:0)+(ce.gzhead.extra?4:0)+(ce.gzhead.name?8:0)+(ce.gzhead.comment?16:0)),re(ce,255&ce.gzhead.time),re(ce,ce.gzhead.time>>8&255),re(ce,ce.gzhead.time>>16&255),re(ce,ce.gzhead.time>>24&255),re(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),re(ce,255&ce.gzhead.os),ce.gzhead.extra&&ce.gzhead.extra.length&&(re(ce,255&ce.gzhead.extra.length),re(ce,ce.gzhead.extra.length>>8&255)),ce.gzhead.hcrc&&(U.adler=c(U.adler,ce.pending_buf,ce.pending,0)),ce.gzindex=0,ce.status=69):(re(ce,0),re(ce,0),re(ce,0),re(ce,0),re(ce,0),re(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),re(ce,3),ce.status=Z);else{var xe=S+(ce.w_bits-8<<4)<<8;xe|=(2<=ce.strategy||ce.level<2?0:ce.level<6?1:ce.level===6?2:3)<<6,ce.strstart!==0&&(xe|=32),xe+=31-xe%31,ce.status=Z,be(ce,xe),ce.strstart!==0&&(be(ce,U.adler>>>16),be(ce,65535&U.adler)),U.adler=1}if(ce.status===69)if(ce.gzhead.extra){for(ie=ce.pending;ce.gzindex<(65535&ce.gzhead.extra.length)&&(ce.pending!==ce.pending_buf_size||(ce.gzhead.hcrc&&ce.pending>ie&&(U.adler=c(U.adler,ce.pending_buf,ce.pending-ie,ie)),J(U),ie=ce.pending,ce.pending!==ce.pending_buf_size));)re(ce,255&ce.gzhead.extra[ce.gzindex]),ce.gzindex++;ce.gzhead.hcrc&&ce.pending>ie&&(U.adler=c(U.adler,ce.pending_buf,ce.pending-ie,ie)),ce.gzindex===ce.gzhead.extra.length&&(ce.gzindex=0,ce.status=73)}else ce.status=73;if(ce.status===73)if(ce.gzhead.name){ie=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ie&&(U.adler=c(U.adler,ce.pending_buf,ce.pending-ie,ie)),J(U),ie=ce.pending,ce.pending===ce.pending_buf_size)){Q=1;break}Q=ce.gzindex<ce.gzhead.name.length?255&ce.gzhead.name.charCodeAt(ce.gzindex++):0,re(ce,Q)}while(Q!==0);ce.gzhead.hcrc&&ce.pending>ie&&(U.adler=c(U.adler,ce.pending_buf,ce.pending-ie,ie)),Q===0&&(ce.gzindex=0,ce.status=91)}else ce.status=91;if(ce.status===91)if(ce.gzhead.comment){ie=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ie&&(U.adler=c(U.adler,ce.pending_buf,ce.pending-ie,ie)),J(U),ie=ce.pending,ce.pending===ce.pending_buf_size)){Q=1;break}Q=ce.gzindex<ce.gzhead.comment.length?255&ce.gzhead.comment.charCodeAt(ce.gzindex++):0,re(ce,Q)}while(Q!==0);ce.gzhead.hcrc&&ce.pending>ie&&(U.adler=c(U.adler,ce.pending_buf,ce.pending-ie,ie)),Q===0&&(ce.status=103)}else ce.status=103;if(ce.status===103&&(ce.gzhead.hcrc?(ce.pending+2>ce.pending_buf_size&&J(U),ce.pending+2<=ce.pending_buf_size&&(re(ce,255&U.adler),re(ce,U.adler>>8&255),U.adler=0,ce.status=Z)):ce.status=Z),ce.pending!==0){if(J(U),U.avail_out===0)return ce.last_flush=-1,g}else if(U.avail_in===0&&se(Ce)<=se(Ne)&&Ce!==p)return ee(U,-5);if(ce.status===666&&U.avail_in!==0)return ee(U,-5);if(U.avail_in!==0||ce.lookahead!==0||Ce!==h&&ce.status!==666){var Le=ce.strategy===2?function(Se,Ve){for(var xt;;){if(Se.lookahead===0&&(Me(Se),Se.lookahead===0)){if(Ve===h)return L;break}if(Se.match_length=0,xt=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++,xt&&(Y(Se,!1),Se.strm.avail_out===0))return L}return Se.insert=0,Ve===p?(Y(Se,!0),Se.strm.avail_out===0?ae:ne):Se.last_lit&&(Y(Se,!1),Se.strm.avail_out===0)?L:de}(ce,Ce):ce.strategy===3?function(Se,Ve){for(var xt,ht,Et,Ft,Tt=Se.window;;){if(Se.lookahead<=H){if(Me(Se),Se.lookahead<=H&&Ve===h)return L;if(Se.lookahead===0)break}if(Se.match_length=0,Se.lookahead>=z&&0<Se.strstart&&(ht=Tt[Et=Se.strstart-1])===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]){Ft=Se.strstart+H;do;while(ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&Et<Ft);Se.match_length=H-(Ft-Et),Se.match_length>Se.lookahead&&(Se.match_length=Se.lookahead)}if(Se.match_length>=z?(xt=s._tr_tally(Se,1,Se.match_length-z),Se.lookahead-=Se.match_length,Se.strstart+=Se.match_length,Se.match_length=0):(xt=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++),xt&&(Y(Se,!1),Se.strm.avail_out===0))return L}return Se.insert=0,Ve===p?(Y(Se,!0),Se.strm.avail_out===0?ae:ne):Se.last_lit&&(Y(Se,!1),Se.strm.avail_out===0)?L:de}(ce,Ce):i[ce.level].func(ce,Ce);if(Le!==ae&&Le!==ne||(ce.status=666),Le===L||Le===ae)return U.avail_out===0&&(ce.last_flush=-1),g;if(Le===de&&(Ce===1?s._tr_align(ce):Ce!==5&&(s._tr_stored_block(ce,0,0,!1),Ce===3&&(W(ce.head),ce.lookahead===0&&(ce.strstart=0,ce.block_start=0,ce.insert=0))),J(U),U.avail_out===0))return ce.last_flush=-1,g}return Ce!==p?g:ce.wrap<=0?1:(ce.wrap===2?(re(ce,255&U.adler),re(ce,U.adler>>8&255),re(ce,U.adler>>16&255),re(ce,U.adler>>24&255),re(ce,255&U.total_in),re(ce,U.total_in>>8&255),re(ce,U.total_in>>16&255),re(ce,U.total_in>>24&255)):(be(ce,U.adler>>>16),be(ce,65535&U.adler)),J(U),0<ce.wrap&&(ce.wrap=-ce.wrap),ce.pending!==0?g:1)},a.deflateEnd=function(U){var Ce;return U&&U.state?(Ce=U.state.status)!==F&&Ce!==69&&Ce!==73&&Ce!==91&&Ce!==103&&Ce!==Z&&Ce!==666?ee(U,v):(U.state=null,Ce===Z?ee(U,-3):g):v},a.deflateSetDictionary=function(U,Ce){var Ne,ce,ie,Q,xe,Le,Se,Ve,xt=Ce.length;if(!U||!U.state||(Q=(Ne=U.state).wrap)===2||Q===1&&Ne.status!==F||Ne.lookahead)return v;for(Q===1&&(U.adler=u(U.adler,Ce,xt,0)),Ne.wrap=0,xt>=Ne.w_size&&(Q===0&&(W(Ne.head),Ne.strstart=0,Ne.block_start=0,Ne.insert=0),Ve=new o.Buf8(Ne.w_size),o.arraySet(Ve,Ce,xt-Ne.w_size,Ne.w_size,0),Ce=Ve,xt=Ne.w_size),xe=U.avail_in,Le=U.next_in,Se=U.input,U.avail_in=xt,U.next_in=0,U.input=Ce,Me(Ne);Ne.lookahead>=z;){for(ce=Ne.strstart,ie=Ne.lookahead-(z-1);Ne.ins_h=(Ne.ins_h<<Ne.hash_shift^Ne.window[ce+z-1])&Ne.hash_mask,Ne.prev[ce&Ne.w_mask]=Ne.head[Ne.ins_h],Ne.head[Ne.ins_h]=ce,ce++,--ie;);Ne.strstart=ce,Ne.lookahead=z-1,Me(Ne)}return Ne.strstart+=Ne.lookahead,Ne.block_start=Ne.strstart,Ne.insert=Ne.lookahead,Ne.lookahead=0,Ne.match_length=Ne.prev_length=z-1,Ne.match_available=0,U.next_in=Le,U.input=Se,U.avail_in=xe,Ne.wrap=Q,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,u,c,f,h,p,g,v,b,_,x,S,E,C,k,D,O,N,z,H,X,F,Z,L,de;s=i.state,u=i.next_in,L=i.input,c=u+(i.avail_in-5),f=i.next_out,de=i.output,h=f-(o-i.avail_out),p=f+(i.avail_out-257),g=s.dmax,v=s.wsize,b=s.whave,_=s.wnext,x=s.window,S=s.hold,E=s.bits,C=s.lencode,k=s.distcode,D=(1<<s.lenbits)-1,O=(1<<s.distbits)-1;e:do{E<15&&(S+=L[u++]<<E,E+=8,S+=L[u++]<<E,E+=8),N=C[S&D];t:for(;;){if(S>>>=z=N>>>24,E-=z,(z=N>>>16&255)===0)de[f++]=65535&N;else{if(!(16&z)){if((64&z)==0){N=C[(65535&N)+(S&(1<<z)-1)];continue t}if(32&z){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}H=65535&N,(z&=15)&&(E<z&&(S+=L[u++]<<E,E+=8),H+=S&(1<<z)-1,S>>>=z,E-=z),E<15&&(S+=L[u++]<<E,E+=8,S+=L[u++]<<E,E+=8),N=k[S&O];n:for(;;){if(S>>>=z=N>>>24,E-=z,!(16&(z=N>>>16&255))){if((64&z)==0){N=k[(65535&N)+(S&(1<<z)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(X=65535&N,E<(z&=15)&&(S+=L[u++]<<E,(E+=8)<z&&(S+=L[u++]<<E,E+=8)),g<(X+=S&(1<<z)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=z,E-=z,(z=f-h)<X){if(b<(z=X-z)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(Z=x,(F=0)===_){if(F+=v-z,z<H){for(H-=z;de[f++]=x[F++],--z;);F=f-X,Z=de}}else if(_<z){if(F+=v+_-z,(z-=_)<H){for(H-=z;de[f++]=x[F++],--z;);if(F=0,_<H){for(H-=z=_;de[f++]=x[F++],--z;);F=f-X,Z=de}}}else if(F+=_-z,z<H){for(H-=z;de[f++]=x[F++],--z;);F=f-X,Z=de}for(;2<H;)de[f++]=Z[F++],de[f++]=Z[F++],de[f++]=Z[F++],H-=3;H&&(de[f++]=Z[F++],1<H&&(de[f++]=Z[F++]))}else{for(F=f-X;de[f++]=de[F++],de[f++]=de[F++],de[f++]=de[F++],2<(H-=3););H&&(de[f++]=de[F++],1<H&&(de[f++]=de[F++]))}break}}break}}while(u<c&&f<p);u-=H=E>>3,S&=(1<<(E-=H<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=f<p?p-f+257:257-(f-p),s.hold=S,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),f=1,h=2,p=0,g=-2,v=1,b=852,_=592;function x(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(F){var Z;return F&&F.state?(Z=F.state,F.total_in=F.total_out=Z.total=0,F.msg="",Z.wrap&&(F.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(b),Z.distcode=Z.distdyn=new i.Buf32(_),Z.sane=1,Z.back=-1,p):g}function C(F){var Z;return F&&F.state?((Z=F.state).wsize=0,Z.whave=0,Z.wnext=0,E(F)):g}function k(F,Z){var L,de;return F&&F.state?(de=F.state,Z<0?(L=0,Z=-Z):(L=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?g:(de.window!==null&&de.wbits!==Z&&(de.window=null),de.wrap=L,de.wbits=Z,C(F))):g}function D(F,Z){var L,de;return F?(de=new S,(F.state=de).window=null,(L=k(F,Z))!==p&&(F.state=null),L):g}var O,N,z=!0;function H(F){if(z){var Z;for(O=new i.Buf32(512),N=new i.Buf32(32),Z=0;Z<144;)F.lens[Z++]=8;for(;Z<256;)F.lens[Z++]=9;for(;Z<280;)F.lens[Z++]=7;for(;Z<288;)F.lens[Z++]=8;for(c(f,F.lens,0,288,O,0,F.work,{bits:9}),Z=0;Z<32;)F.lens[Z++]=5;c(h,F.lens,0,32,N,0,F.work,{bits:5}),z=!1}F.lencode=O,F.lenbits=9,F.distcode=N,F.distbits=5}function X(F,Z,L,de){var ae,ne=F.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new i.Buf8(ne.wsize)),de>=ne.wsize?(i.arraySet(ne.window,Z,L-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(de<(ae=ne.wsize-ne.wnext)&&(ae=de),i.arraySet(ne.window,Z,L-de,ae,ne.wnext),(de-=ae)?(i.arraySet(ne.window,Z,L-de,de,0),ne.wnext=de,ne.whave=ne.wsize):(ne.wnext+=ae,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=ae))),0}a.inflateReset=C,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(F){return D(F,15)},a.inflateInit2=D,a.inflate=function(F,Z){var L,de,ae,ne,ee,se,W,J,Y,re,be,we,Me,Pe,Ae,Te,qe,it,Ie,Re,U,Ce,Ne,ce,ie=0,Q=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return g;(L=F.state).mode===12&&(L.mode=13),ee=F.next_out,ae=F.output,W=F.avail_out,ne=F.next_in,de=F.input,se=F.avail_in,J=L.hold,Y=L.bits,re=se,be=W,Ce=p;e:for(;;)switch(L.mode){case v:if(L.wrap===0){L.mode=13;break}for(;Y<16;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if(2&L.wrap&&J===35615){Q[L.check=0]=255&J,Q[1]=J>>>8&255,L.check=s(L.check,Q,2,0),Y=J=0,L.mode=2;break}if(L.flags=0,L.head&&(L.head.done=!1),!(1&L.wrap)||(((255&J)<<8)+(J>>8))%31){F.msg="incorrect header check",L.mode=30;break}if((15&J)!=8){F.msg="unknown compression method",L.mode=30;break}if(Y-=4,U=8+(15&(J>>>=4)),L.wbits===0)L.wbits=U;else if(U>L.wbits){F.msg="invalid window size",L.mode=30;break}L.dmax=1<<U,F.adler=L.check=1,L.mode=512&J?10:12,Y=J=0;break;case 2:for(;Y<16;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if(L.flags=J,(255&L.flags)!=8){F.msg="unknown compression method",L.mode=30;break}if(57344&L.flags){F.msg="unknown header flags set",L.mode=30;break}L.head&&(L.head.text=J>>8&1),512&L.flags&&(Q[0]=255&J,Q[1]=J>>>8&255,L.check=s(L.check,Q,2,0)),Y=J=0,L.mode=3;case 3:for(;Y<32;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}L.head&&(L.head.time=J),512&L.flags&&(Q[0]=255&J,Q[1]=J>>>8&255,Q[2]=J>>>16&255,Q[3]=J>>>24&255,L.check=s(L.check,Q,4,0)),Y=J=0,L.mode=4;case 4:for(;Y<16;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}L.head&&(L.head.xflags=255&J,L.head.os=J>>8),512&L.flags&&(Q[0]=255&J,Q[1]=J>>>8&255,L.check=s(L.check,Q,2,0)),Y=J=0,L.mode=5;case 5:if(1024&L.flags){for(;Y<16;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}L.length=J,L.head&&(L.head.extra_len=J),512&L.flags&&(Q[0]=255&J,Q[1]=J>>>8&255,L.check=s(L.check,Q,2,0)),Y=J=0}else L.head&&(L.head.extra=null);L.mode=6;case 6:if(1024&L.flags&&(se<(we=L.length)&&(we=se),we&&(L.head&&(U=L.head.extra_len-L.length,L.head.extra||(L.head.extra=new Array(L.head.extra_len)),i.arraySet(L.head.extra,de,ne,we,U)),512&L.flags&&(L.check=s(L.check,de,we,ne)),se-=we,ne+=we,L.length-=we),L.length))break e;L.length=0,L.mode=7;case 7:if(2048&L.flags){if(se===0)break e;for(we=0;U=de[ne+we++],L.head&&U&&L.length<65536&&(L.head.name+=String.fromCharCode(U)),U&&we<se;);if(512&L.flags&&(L.check=s(L.check,de,we,ne)),se-=we,ne+=we,U)break e}else L.head&&(L.head.name=null);L.length=0,L.mode=8;case 8:if(4096&L.flags){if(se===0)break e;for(we=0;U=de[ne+we++],L.head&&U&&L.length<65536&&(L.head.comment+=String.fromCharCode(U)),U&&we<se;);if(512&L.flags&&(L.check=s(L.check,de,we,ne)),se-=we,ne+=we,U)break e}else L.head&&(L.head.comment=null);L.mode=9;case 9:if(512&L.flags){for(;Y<16;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if(J!==(65535&L.check)){F.msg="header crc mismatch",L.mode=30;break}Y=J=0}L.head&&(L.head.hcrc=L.flags>>9&1,L.head.done=!0),F.adler=L.check=0,L.mode=12;break;case 10:for(;Y<32;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}F.adler=L.check=x(J),Y=J=0,L.mode=11;case 11:if(L.havedict===0)return F.next_out=ee,F.avail_out=W,F.next_in=ne,F.avail_in=se,L.hold=J,L.bits=Y,2;F.adler=L.check=1,L.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(L.last){J>>>=7&Y,Y-=7&Y,L.mode=27;break}for(;Y<3;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}switch(L.last=1&J,Y-=1,3&(J>>>=1)){case 0:L.mode=14;break;case 1:if(H(L),L.mode=20,Z!==6)break;J>>>=2,Y-=2;break e;case 2:L.mode=17;break;case 3:F.msg="invalid block type",L.mode=30}J>>>=2,Y-=2;break;case 14:for(J>>>=7&Y,Y-=7&Y;Y<32;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if((65535&J)!=(J>>>16^65535)){F.msg="invalid stored block lengths",L.mode=30;break}if(L.length=65535&J,Y=J=0,L.mode=15,Z===6)break e;case 15:L.mode=16;case 16:if(we=L.length){if(se<we&&(we=se),W<we&&(we=W),we===0)break e;i.arraySet(ae,de,ne,we,ee),se-=we,ne+=we,W-=we,ee+=we,L.length-=we;break}L.mode=12;break;case 17:for(;Y<14;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if(L.nlen=257+(31&J),J>>>=5,Y-=5,L.ndist=1+(31&J),J>>>=5,Y-=5,L.ncode=4+(15&J),J>>>=4,Y-=4,286<L.nlen||30<L.ndist){F.msg="too many length or distance symbols",L.mode=30;break}L.have=0,L.mode=18;case 18:for(;L.have<L.ncode;){for(;Y<3;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}L.lens[xe[L.have++]]=7&J,J>>>=3,Y-=3}for(;L.have<19;)L.lens[xe[L.have++]]=0;if(L.lencode=L.lendyn,L.lenbits=7,Ne={bits:L.lenbits},Ce=c(0,L.lens,0,19,L.lencode,0,L.work,Ne),L.lenbits=Ne.bits,Ce){F.msg="invalid code lengths set",L.mode=30;break}L.have=0,L.mode=19;case 19:for(;L.have<L.nlen+L.ndist;){for(;Te=(ie=L.lencode[J&(1<<L.lenbits)-1])>>>16&255,qe=65535&ie,!((Ae=ie>>>24)<=Y);){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if(qe<16)J>>>=Ae,Y-=Ae,L.lens[L.have++]=qe;else{if(qe===16){for(ce=Ae+2;Y<ce;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if(J>>>=Ae,Y-=Ae,L.have===0){F.msg="invalid bit length repeat",L.mode=30;break}U=L.lens[L.have-1],we=3+(3&J),J>>>=2,Y-=2}else if(qe===17){for(ce=Ae+3;Y<ce;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}Y-=Ae,U=0,we=3+(7&(J>>>=Ae)),J>>>=3,Y-=3}else{for(ce=Ae+7;Y<ce;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}Y-=Ae,U=0,we=11+(127&(J>>>=Ae)),J>>>=7,Y-=7}if(L.have+we>L.nlen+L.ndist){F.msg="invalid bit length repeat",L.mode=30;break}for(;we--;)L.lens[L.have++]=U}}if(L.mode===30)break;if(L.lens[256]===0){F.msg="invalid code -- missing end-of-block",L.mode=30;break}if(L.lenbits=9,Ne={bits:L.lenbits},Ce=c(f,L.lens,0,L.nlen,L.lencode,0,L.work,Ne),L.lenbits=Ne.bits,Ce){F.msg="invalid literal/lengths set",L.mode=30;break}if(L.distbits=6,L.distcode=L.distdyn,Ne={bits:L.distbits},Ce=c(h,L.lens,L.nlen,L.ndist,L.distcode,0,L.work,Ne),L.distbits=Ne.bits,Ce){F.msg="invalid distances set",L.mode=30;break}if(L.mode=20,Z===6)break e;case 20:L.mode=21;case 21:if(6<=se&&258<=W){F.next_out=ee,F.avail_out=W,F.next_in=ne,F.avail_in=se,L.hold=J,L.bits=Y,u(F,be),ee=F.next_out,ae=F.output,W=F.avail_out,ne=F.next_in,de=F.input,se=F.avail_in,J=L.hold,Y=L.bits,L.mode===12&&(L.back=-1);break}for(L.back=0;Te=(ie=L.lencode[J&(1<<L.lenbits)-1])>>>16&255,qe=65535&ie,!((Ae=ie>>>24)<=Y);){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if(Te&&(240&Te)==0){for(it=Ae,Ie=Te,Re=qe;Te=(ie=L.lencode[Re+((J&(1<<it+Ie)-1)>>it)])>>>16&255,qe=65535&ie,!(it+(Ae=ie>>>24)<=Y);){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}J>>>=it,Y-=it,L.back+=it}if(J>>>=Ae,Y-=Ae,L.back+=Ae,L.length=qe,Te===0){L.mode=26;break}if(32&Te){L.back=-1,L.mode=12;break}if(64&Te){F.msg="invalid literal/length code",L.mode=30;break}L.extra=15&Te,L.mode=22;case 22:if(L.extra){for(ce=L.extra;Y<ce;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}L.length+=J&(1<<L.extra)-1,J>>>=L.extra,Y-=L.extra,L.back+=L.extra}L.was=L.length,L.mode=23;case 23:for(;Te=(ie=L.distcode[J&(1<<L.distbits)-1])>>>16&255,qe=65535&ie,!((Ae=ie>>>24)<=Y);){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if((240&Te)==0){for(it=Ae,Ie=Te,Re=qe;Te=(ie=L.distcode[Re+((J&(1<<it+Ie)-1)>>it)])>>>16&255,qe=65535&ie,!(it+(Ae=ie>>>24)<=Y);){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}J>>>=it,Y-=it,L.back+=it}if(J>>>=Ae,Y-=Ae,L.back+=Ae,64&Te){F.msg="invalid distance code",L.mode=30;break}L.offset=qe,L.extra=15&Te,L.mode=24;case 24:if(L.extra){for(ce=L.extra;Y<ce;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}L.offset+=J&(1<<L.extra)-1,J>>>=L.extra,Y-=L.extra,L.back+=L.extra}if(L.offset>L.dmax){F.msg="invalid distance too far back",L.mode=30;break}L.mode=25;case 25:if(W===0)break e;if(we=be-W,L.offset>we){if((we=L.offset-we)>L.whave&&L.sane){F.msg="invalid distance too far back",L.mode=30;break}Me=we>L.wnext?(we-=L.wnext,L.wsize-we):L.wnext-we,we>L.length&&(we=L.length),Pe=L.window}else Pe=ae,Me=ee-L.offset,we=L.length;for(W<we&&(we=W),W-=we,L.length-=we;ae[ee++]=Pe[Me++],--we;);L.length===0&&(L.mode=21);break;case 26:if(W===0)break e;ae[ee++]=L.length,W--,L.mode=21;break;case 27:if(L.wrap){for(;Y<32;){if(se===0)break e;se--,J|=de[ne++]<<Y,Y+=8}if(be-=W,F.total_out+=be,L.total+=be,be&&(F.adler=L.check=L.flags?s(L.check,ae,be,ee-be):o(L.check,ae,be,ee-be)),be=W,(L.flags?J:x(J))!==L.check){F.msg="incorrect data check",L.mode=30;break}Y=J=0}L.mode=28;case 28:if(L.wrap&&L.flags){for(;Y<32;){if(se===0)break e;se--,J+=de[ne++]<<Y,Y+=8}if(J!==(4294967295&L.total)){F.msg="incorrect length check",L.mode=30;break}Y=J=0}L.mode=29;case 29:Ce=1;break e;case 30:Ce=-3;break e;case 31:return-4;case 32:default:return g}return F.next_out=ee,F.avail_out=W,F.next_in=ne,F.avail_in=se,L.hold=J,L.bits=Y,(L.wsize||be!==F.avail_out&&L.mode<30&&(L.mode<27||Z!==4))&&X(F,F.output,F.next_out,be-F.avail_out)?(L.mode=31,-4):(re-=F.avail_in,be-=F.avail_out,F.total_in+=re,F.total_out+=be,L.total+=be,L.wrap&&be&&(F.adler=L.check=L.flags?s(L.check,ae,be,F.next_out-be):o(L.check,ae,be,F.next_out-be)),F.data_type=L.bits+(L.last?64:0)+(L.mode===12?128:0)+(L.mode===20||L.mode===15?256:0),(re==0&&be===0||Z===4)&&Ce===p&&(Ce=-5),Ce)},a.inflateEnd=function(F){if(!F||!F.state)return g;var Z=F.state;return Z.window&&(Z.window=null),F.state=null,p},a.inflateGetHeader=function(F,Z){var L;return F&&F.state?(2&(L=F.state).wrap)==0?g:((L.head=Z).done=!1,p):g},a.inflateSetDictionary=function(F,Z){var L,de=Z.length;return F&&F.state?(L=F.state).wrap!==0&&L.mode!==11?g:L.mode===11&&o(1,Z,de,0)!==L.check?-3:X(F,Z,de,de)?(L.mode=31,-4):(L.havedict=1,p):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,p,g,v,b,_,x){var S,E,C,k,D,O,N,z,H,X=x.bits,F=0,Z=0,L=0,de=0,ae=0,ne=0,ee=0,se=0,W=0,J=0,Y=null,re=0,be=new i.Buf16(16),we=new i.Buf16(16),Me=null,Pe=0;for(F=0;F<=15;F++)be[F]=0;for(Z=0;Z<g;Z++)be[h[p+Z]]++;for(ae=X,de=15;1<=de&&be[de]===0;de--);if(de<ae&&(ae=de),de===0)return v[b++]=20971520,v[b++]=20971520,x.bits=1,0;for(L=1;L<de&&be[L]===0;L++);for(ae<L&&(ae=L),F=se=1;F<=15;F++)if(se<<=1,(se-=be[F])<0)return-1;if(0<se&&(f===0||de!==1))return-1;for(we[1]=0,F=1;F<15;F++)we[F+1]=we[F]+be[F];for(Z=0;Z<g;Z++)h[p+Z]!==0&&(_[we[h[p+Z]]++]=Z);if(O=f===0?(Y=Me=_,19):f===1?(Y=o,re-=257,Me=s,Pe-=257,256):(Y=u,Me=c,-1),F=L,D=b,ee=Z=J=0,C=-1,k=(W=1<<(ne=ae))-1,f===1&&852<W||f===2&&592<W)return 1;for(;;){for(N=F-ee,H=_[Z]<O?(z=0,_[Z]):_[Z]>O?(z=Me[Pe+_[Z]],Y[re+_[Z]]):(z=96,0),S=1<<F-ee,L=E=1<<ne;v[D+(J>>ee)+(E-=S)]=N<<24|z<<16|H|0,E!==0;);for(S=1<<F-1;J&S;)S>>=1;if(S!==0?(J&=S-1,J+=S):J=0,Z++,--be[F]==0){if(F===de)break;F=h[p+_[Z]]}if(ae<F&&(J&k)!==C){for(ee===0&&(ee=ae),D+=L,se=1<<(ne=F-ee);ne+ee<de&&!((se-=be[ne+ee])<=0);)ne++,se<<=1;if(W+=1<<ne,f===1&&852<W||f===2&&592<W)return 1;v[C=J&k]=ae<<24|ne<<16|D-b|0}}return J!==0&&(v[D+J]=F-ee<<24|64<<16|0),x.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function u(ie){for(var Q=ie.length;0<=--Q;)ie[Q]=0}var c=0,f=29,h=256,p=h+1+f,g=30,v=19,b=2*p+1,_=15,x=16,S=7,E=256,C=16,k=17,D=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(p+2));u(X);var F=new Array(2*g);u(F);var Z=new Array(512);u(Z);var L=new Array(256);u(L);var de=new Array(f);u(de);var ae,ne,ee,se=new Array(g);function W(ie,Q,xe,Le,Se){this.static_tree=ie,this.extra_bits=Q,this.extra_base=xe,this.elems=Le,this.max_length=Se,this.has_stree=ie&&ie.length}function J(ie,Q){this.dyn_tree=ie,this.max_code=0,this.stat_desc=Q}function Y(ie){return ie<256?Z[ie]:Z[256+(ie>>>7)]}function re(ie,Q){ie.pending_buf[ie.pending++]=255&Q,ie.pending_buf[ie.pending++]=Q>>>8&255}function be(ie,Q,xe){ie.bi_valid>x-xe?(ie.bi_buf|=Q<<ie.bi_valid&65535,re(ie,ie.bi_buf),ie.bi_buf=Q>>x-ie.bi_valid,ie.bi_valid+=xe-x):(ie.bi_buf|=Q<<ie.bi_valid&65535,ie.bi_valid+=xe)}function we(ie,Q,xe){be(ie,xe[2*Q],xe[2*Q+1])}function Me(ie,Q){for(var xe=0;xe|=1&ie,ie>>>=1,xe<<=1,0<--Q;);return xe>>>1}function Pe(ie,Q,xe){var Le,Se,Ve=new Array(_+1),xt=0;for(Le=1;Le<=_;Le++)Ve[Le]=xt=xt+xe[Le-1]<<1;for(Se=0;Se<=Q;Se++){var ht=ie[2*Se+1];ht!==0&&(ie[2*Se]=Me(Ve[ht]++,ht))}}function Ae(ie){var Q;for(Q=0;Q<p;Q++)ie.dyn_ltree[2*Q]=0;for(Q=0;Q<g;Q++)ie.dyn_dtree[2*Q]=0;for(Q=0;Q<v;Q++)ie.bl_tree[2*Q]=0;ie.dyn_ltree[2*E]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function Te(ie){8<ie.bi_valid?re(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function qe(ie,Q,xe,Le){var Se=2*Q,Ve=2*xe;return ie[Se]<ie[Ve]||ie[Se]===ie[Ve]&&Le[Q]<=Le[xe]}function it(ie,Q,xe){for(var Le=ie.heap[xe],Se=xe<<1;Se<=ie.heap_len&&(Se<ie.heap_len&&qe(Q,ie.heap[Se+1],ie.heap[Se],ie.depth)&&Se++,!qe(Q,Le,ie.heap[Se],ie.depth));)ie.heap[xe]=ie.heap[Se],xe=Se,Se<<=1;ie.heap[xe]=Le}function Ie(ie,Q,xe){var Le,Se,Ve,xt,ht=0;if(ie.last_lit!==0)for(;Le=ie.pending_buf[ie.d_buf+2*ht]<<8|ie.pending_buf[ie.d_buf+2*ht+1],Se=ie.pending_buf[ie.l_buf+ht],ht++,Le===0?we(ie,Se,Q):(we(ie,(Ve=L[Se])+h+1,Q),(xt=O[Ve])!==0&&be(ie,Se-=de[Ve],xt),we(ie,Ve=Y(--Le),xe),(xt=N[Ve])!==0&&be(ie,Le-=se[Ve],xt)),ht<ie.last_lit;);we(ie,E,Q)}function Re(ie,Q){var xe,Le,Se,Ve=Q.dyn_tree,xt=Q.stat_desc.static_tree,ht=Q.stat_desc.has_stree,Et=Q.stat_desc.elems,Ft=-1;for(ie.heap_len=0,ie.heap_max=b,xe=0;xe<Et;xe++)Ve[2*xe]!==0?(ie.heap[++ie.heap_len]=Ft=xe,ie.depth[xe]=0):Ve[2*xe+1]=0;for(;ie.heap_len<2;)Ve[2*(Se=ie.heap[++ie.heap_len]=Ft<2?++Ft:0)]=1,ie.depth[Se]=0,ie.opt_len--,ht&&(ie.static_len-=xt[2*Se+1]);for(Q.max_code=Ft,xe=ie.heap_len>>1;1<=xe;xe--)it(ie,Ve,xe);for(Se=Et;xe=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],it(ie,Ve,1),Le=ie.heap[1],ie.heap[--ie.heap_max]=xe,ie.heap[--ie.heap_max]=Le,Ve[2*Se]=Ve[2*xe]+Ve[2*Le],ie.depth[Se]=(ie.depth[xe]>=ie.depth[Le]?ie.depth[xe]:ie.depth[Le])+1,Ve[2*xe+1]=Ve[2*Le+1]=Se,ie.heap[1]=Se++,it(ie,Ve,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],function(Tt,Ut){var ge,I,V,he,Oe,ve,ke=Ut.dyn_tree,le=Ut.max_code,dt=Ut.stat_desc.static_tree,yt=Ut.stat_desc.has_stree,M=Ut.stat_desc.extra_bits,Be=Ut.stat_desc.extra_base,et=Ut.stat_desc.max_length,me=0;for(he=0;he<=_;he++)Tt.bl_count[he]=0;for(ke[2*Tt.heap[Tt.heap_max]+1]=0,ge=Tt.heap_max+1;ge<b;ge++)et<(he=ke[2*ke[2*(I=Tt.heap[ge])+1]+1]+1)&&(he=et,me++),ke[2*I+1]=he,le<I||(Tt.bl_count[he]++,Oe=0,Be<=I&&(Oe=M[I-Be]),ve=ke[2*I],Tt.opt_len+=ve*(he+Oe),yt&&(Tt.static_len+=ve*(dt[2*I+1]+Oe)));if(me!==0){do{for(he=et-1;Tt.bl_count[he]===0;)he--;Tt.bl_count[he]--,Tt.bl_count[he+1]+=2,Tt.bl_count[et]--,me-=2}while(0<me);for(he=et;he!==0;he--)for(I=Tt.bl_count[he];I!==0;)le<(V=Tt.heap[--ge])||(ke[2*V+1]!==he&&(Tt.opt_len+=(he-ke[2*V+1])*ke[2*V],ke[2*V+1]=he),I--)}}(ie,Q),Pe(Ve,Ft,ie.bl_count)}function U(ie,Q,xe){var Le,Se,Ve=-1,xt=Q[1],ht=0,Et=7,Ft=4;for(xt===0&&(Et=138,Ft=3),Q[2*(xe+1)+1]=65535,Le=0;Le<=xe;Le++)Se=xt,xt=Q[2*(Le+1)+1],++ht<Et&&Se===xt||(ht<Ft?ie.bl_tree[2*Se]+=ht:Se!==0?(Se!==Ve&&ie.bl_tree[2*Se]++,ie.bl_tree[2*C]++):ht<=10?ie.bl_tree[2*k]++:ie.bl_tree[2*D]++,Ve=Se,Ft=(ht=0)===xt?(Et=138,3):Se===xt?(Et=6,3):(Et=7,4))}function Ce(ie,Q,xe){var Le,Se,Ve=-1,xt=Q[1],ht=0,Et=7,Ft=4;for(xt===0&&(Et=138,Ft=3),Le=0;Le<=xe;Le++)if(Se=xt,xt=Q[2*(Le+1)+1],!(++ht<Et&&Se===xt)){if(ht<Ft)for(;we(ie,Se,ie.bl_tree),--ht!=0;);else Se!==0?(Se!==Ve&&(we(ie,Se,ie.bl_tree),ht--),we(ie,C,ie.bl_tree),be(ie,ht-3,2)):ht<=10?(we(ie,k,ie.bl_tree),be(ie,ht-3,3)):(we(ie,D,ie.bl_tree),be(ie,ht-11,7));Ve=Se,Ft=(ht=0)===xt?(Et=138,3):Se===xt?(Et=6,3):(Et=7,4)}}u(se);var Ne=!1;function ce(ie,Q,xe,Le){be(ie,(c<<1)+(Le?1:0),3),function(Se,Ve,xt,ht){Te(Se),re(Se,xt),re(Se,~xt),i.arraySet(Se.pending_buf,Se.window,Ve,xt,Se.pending),Se.pending+=xt}(ie,Q,xe)}a._tr_init=function(ie){Ne||(function(){var Q,xe,Le,Se,Ve,xt=new Array(_+1);for(Se=Le=0;Se<f-1;Se++)for(de[Se]=Le,Q=0;Q<1<<O[Se];Q++)L[Le++]=Se;for(L[Le-1]=Se,Se=Ve=0;Se<16;Se++)for(se[Se]=Ve,Q=0;Q<1<<N[Se];Q++)Z[Ve++]=Se;for(Ve>>=7;Se<g;Se++)for(se[Se]=Ve<<7,Q=0;Q<1<<N[Se]-7;Q++)Z[256+Ve++]=Se;for(xe=0;xe<=_;xe++)xt[xe]=0;for(Q=0;Q<=143;)X[2*Q+1]=8,Q++,xt[8]++;for(;Q<=255;)X[2*Q+1]=9,Q++,xt[9]++;for(;Q<=279;)X[2*Q+1]=7,Q++,xt[7]++;for(;Q<=287;)X[2*Q+1]=8,Q++,xt[8]++;for(Pe(X,p+1,xt),Q=0;Q<g;Q++)F[2*Q+1]=5,F[2*Q]=Me(Q,5);ae=new W(X,O,h+1,p,_),ne=new W(F,N,0,g,_),ee=new W(new Array(0),z,0,v,S)}(),Ne=!0),ie.l_desc=new J(ie.dyn_ltree,ae),ie.d_desc=new J(ie.dyn_dtree,ne),ie.bl_desc=new J(ie.bl_tree,ee),ie.bi_buf=0,ie.bi_valid=0,Ae(ie)},a._tr_stored_block=ce,a._tr_flush_block=function(ie,Q,xe,Le){var Se,Ve,xt=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=function(ht){var Et,Ft=4093624447;for(Et=0;Et<=31;Et++,Ft>>>=1)if(1&Ft&&ht.dyn_ltree[2*Et]!==0)return o;if(ht.dyn_ltree[18]!==0||ht.dyn_ltree[20]!==0||ht.dyn_ltree[26]!==0)return s;for(Et=32;Et<h;Et++)if(ht.dyn_ltree[2*Et]!==0)return s;return o}(ie)),Re(ie,ie.l_desc),Re(ie,ie.d_desc),xt=function(ht){var Et;for(U(ht,ht.dyn_ltree,ht.l_desc.max_code),U(ht,ht.dyn_dtree,ht.d_desc.max_code),Re(ht,ht.bl_desc),Et=v-1;3<=Et&&ht.bl_tree[2*H[Et]+1]===0;Et--);return ht.opt_len+=3*(Et+1)+5+5+4,Et}(ie),Se=ie.opt_len+3+7>>>3,(Ve=ie.static_len+3+7>>>3)<=Se&&(Se=Ve)):Se=Ve=xe+5,xe+4<=Se&&Q!==-1?ce(ie,Q,xe,Le):ie.strategy===4||Ve===Se?(be(ie,2+(Le?1:0),3),Ie(ie,X,F)):(be(ie,4+(Le?1:0),3),function(ht,Et,Ft,Tt){var Ut;for(be(ht,Et-257,5),be(ht,Ft-1,5),be(ht,Tt-4,4),Ut=0;Ut<Tt;Ut++)be(ht,ht.bl_tree[2*H[Ut]+1],3);Ce(ht,ht.dyn_ltree,Et-1),Ce(ht,ht.dyn_dtree,Ft-1)}(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,xt+1),Ie(ie,ie.dyn_ltree,ie.dyn_dtree)),Ae(ie),Le&&Te(ie)},a._tr_tally=function(ie,Q,xe){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=Q>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&Q,ie.pending_buf[ie.l_buf+ie.last_lit]=255&xe,ie.last_lit++,Q===0?ie.dyn_ltree[2*xe]++:(ie.matches++,Q--,ie.dyn_ltree[2*(L[xe]+h+1)]++,ie.dyn_dtree[2*Y(Q)]++),ie.last_lit===ie.lit_bufsize-1},a._tr_align=function(ie){be(ie,2,3),we(ie,E,X),function(Q){Q.bi_valid===16?(re(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)}(ie)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var u,c,f,h,p=1,g={},v=!1,b=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(C){Zr.nextTick(function(){S(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,k=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=k,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){f.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(c=b.documentElement,function(C){var k=b.createElement("script");k.onreadystatechange=function(){S(C),k.onreadystatechange=null,c.removeChild(k),k=null},c.appendChild(k)}):function(C){setTimeout(S,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),D=0;D<k.length;D++)k[D]=arguments[D+1];var O={callback:C,args:k};return g[p]=O,u(p),p++},_.clearImmediate=x}function x(C){delete g[C]}function S(C){if(v)setTimeout(S,0,C);else{var k=g[C];if(k){v=!0;try{(function(D){var O=D.callback,N=D.args;switch(N.length){case 0:O();break;case 1:O(N[0]);break;case 2:O(N[0],N[1]);break;case 3:O(N[0],N[1],N[2]);break;default:O.apply(s,N)}})(k)}finally{x(C),v=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(MS)),MS.exports}var Hre=qre();const O5=ni(Hre);var PS,y4;function Vre(){if(y4)return PS;y4=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Zr>"u"||typeof Zr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,C){i=E,o=C})),a=a||{};var u=!1,c=null,f=null,h=null,p=this,g=function(E,C,k){f&&(clearTimeout(f),f=null),h&&(clearTimeout(h),h=null),E&&(p.queues[t]&&p.queues[t].length===0&&delete p.queues[t],p.domainReentrant&&delete p.domains[t]),u||(s?C?o(C):i(k):typeof r=="function"&&r(C,k),u=!0),E&&p.queues[t]&&p.queues[t].length>0&&p.queues[t].shift()()},v=function(E){if(u)return g(E);c&&(clearTimeout(c),c=null),p.domainReentrant&&E&&(p.domains[t]=Zr.domain);var C=a.maxExecutionTime||p.maxExecutionTime;if(C&&(h=setTimeout(function(){p.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(D,O){k||(k=!0,g(E,D,O))})}catch(D){k||(k=!0,g(E,D))}}else p._promiseTry(function(){return n()}).then(function(D){g(E,void 0,D)},function(D){g(E,D)})};p.domainReentrant&&Zr.domain&&(v=Zr.domain.bind(v));var b=a.maxPending||p.maxPending;if(!p.queues[t])p.queues[t]=[],v(!0);else if(p.domainReentrant&&Zr.domain&&Zr.domain===p.domains[t])v(!1);else if(p.queues[t].length>=b)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){v(!0)};a.skipQueue?p.queues[t].unshift(_):p.queues[t].push(_);var x=a.timeout||p.timeout;x&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||p.maxOccupationTime;if(S&&(f=setTimeout(function(){p.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(u,c){return function(f){i.acquire(u,c,f,a)}},s=t.reduceRight(function(u,c){return o(c,u)},n);if(typeof r=="function")s(r);else return new this.Promise(function(u,c){s.length===1?s(function(f,h){f?c(f):u(h)}):u(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},PS=e,PS}var FS,b4;function Gre(){return b4||(b4=1,FS=Vre()),FS}var Wre=Gre();const i0=ni(Wre);var sb={exports:{}},v4;function Kre(){return v4||(v4=1,typeof Object.create=="function"?sb.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:sb.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),sb.exports}var LS,w4;function Zre(){if(w4)return LS;w4=1;var e=Tk().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,u=0;u<o;){for(var c=s%i,f=Math.min(o-u,i-c),h=0;h<f;h++)a[c+h]=n[u+h];s+=f,u+=f,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},LS=t,LS}var $S,_4;function Yre(){if(_4)return $S;_4=1;var e=Kre(),t=Zre(),n=Tk().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(f){return f<<1|f>>>31}function s(f){return f<<5|f>>>27}function u(f){return f<<30|f>>>2}function c(f,h,p,g){return f===0?h&p|~h&g:f===2?h&p|h&g|p&g:h^p^g}return i.prototype._update=function(f){for(var h=this._w,p=this._a|0,g=this._b|0,v=this._c|0,b=this._d|0,_=this._e|0,x=0;x<16;++x)h[x]=f.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=s(p)+c(E,g,v,b)+_+h[S]+r[E]|0;_=b,b=v,v=u(g),g=p,p=C}this._a=p+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var f=n.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},$S=i,$S}var Xre=Yre();const D5=ni(Xre);var BS,x4;function Jre(){if(x4)return BS;x4=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,u=-1,c=0,f,h=0;h<=a.length;++h){if(h<a.length)f=a.charCodeAt(h);else{if(f===47)break;f=47}if(f===47){if(!(u===h-1||c===1))if(u!==h-1&&c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var p=o.lastIndexOf("/");if(p!==o.length-1){p===-1?(o="",s=0):(o=o.slice(0,p),s=o.length-1-o.lastIndexOf("/")),u=h,c=0;continue}}else if(o.length===2||o.length===1){o="",s=0,u=h,c=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(u+1,h):o=a.slice(u+1,h),s=h-u-1;u=h,c=0}else f===46&&c!==-1?++c:c=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,u=arguments.length-1;u>=-1&&!o;u--){var c;u>=0?c=arguments[u]:(s===void 0&&(s=Zr.cwd()),c=s),e(c),c.length!==0&&(i=c+"/"+i,o=c.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var u=i.length,c=u-s,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var h=o.length,p=h-f,g=c<p?c:p,v=-1,b=0;b<=g;++b){if(b===g){if(p>g){if(o.charCodeAt(f+b)===47)return o.slice(f+b+1);if(b===0)return o.slice(f+b)}else c>g&&(i.charCodeAt(s+b)===47?v=b:b===0&&(v=0));break}var _=i.charCodeAt(s+b),x=o.charCodeAt(f+b);if(_!==x)break;_===47&&(v=b)}var S="";for(b=s+v+1;b<=u;++b)(b===u||i.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+o.slice(f+v):(f+=v,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,u=-1,c=!0,f=i.length-1;f>=1;--f)if(o=i.charCodeAt(f),o===47){if(!c){u=f;break}}else c=!1;return u===-1?s?"/":".":s&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,u=-1,c=!0,f;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,p=-1;for(f=i.length-1;f>=0;--f){var g=i.charCodeAt(f);if(g===47){if(!c){s=f+1;break}}else p===-1&&(c=!1,p=f+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(u=f):(h=-1,u=p))}return s===u?u=p:u===-1&&(u=i.length),i.slice(s,u)}else{for(f=i.length-1;f>=0;--f)if(i.charCodeAt(f)===47){if(!c){s=f+1;break}}else u===-1&&(c=!1,u=f+1);return u===-1?"":i.slice(s,u)}},extname:function(i){e(i);for(var o=-1,s=0,u=-1,c=!0,f=0,h=i.length-1;h>=0;--h){var p=i.charCodeAt(h);if(p===47){if(!c){s=h+1;break}continue}u===-1&&(c=!1,u=h+1),p===46?o===-1?o=h:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||u===-1||f===0||f===1&&o===u-1&&o===s+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),u=s===47,c;u?(o.root="/",c=1):c=0;for(var f=-1,h=0,p=-1,g=!0,v=i.length-1,b=0;v>=c;--v){if(s=i.charCodeAt(v),s===47){if(!g){h=v+1;break}continue}p===-1&&(g=!1,p=v+1),s===46?f===-1?f=v:b!==1&&(b=1):f!==-1&&(b=-1)}return f===-1||p===-1||b===0||b===1&&f===p-1&&f===h+1?p!==-1&&(h===0&&u?o.base=o.name=i.slice(1,p):o.base=o.name=i.slice(h,p)):(h===0&&u?(o.name=i.slice(1,f),o.base=i.slice(1,p)):(o.name=i.slice(h,f),o.base=i.slice(h,p)),o.ext=i.slice(f,p)),h>0?o.dir=i.slice(0,h-1):u&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,BS=r,BS}var At=Jre(),zS={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var S4;function Qre(){return S4||(S4=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var N=0,z=new Array(256),H=0;H!=256;++H)N=H,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,z[H]=N;return typeof Int32Array<"u"?new Int32Array(z):z}var r=n();function a(N){var z=0,H=0,X=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(X=0;X!=256;++X)F[X]=N[X];for(X=0;X!=256;++X)for(H=N[X],z=256+X;z<4096;z+=256)H=F[z]=H>>>8^N[H&255];var Z=[];for(X=1;X!=16;++X)Z[X-1]=typeof Int32Array<"u"?F.subarray(X*256,X*256+256):F.slice(X*256,X*256+256);return Z}var i=a(r),o=i[0],s=i[1],u=i[2],c=i[3],f=i[4],h=i[5],p=i[6],g=i[7],v=i[8],b=i[9],_=i[10],x=i[11],S=i[12],E=i[13],C=i[14];function k(N,z){for(var H=z^-1,X=0,F=N.length;X<F;)H=H>>>8^r[(H^N.charCodeAt(X++))&255];return~H}function D(N,z){for(var H=z^-1,X=N.length-15,F=0;F<X;)H=C[N[F++]^H&255]^E[N[F++]^H>>8&255]^S[N[F++]^H>>16&255]^x[N[F++]^H>>>24]^_[N[F++]]^b[N[F++]]^v[N[F++]]^g[N[F++]]^p[N[F++]]^h[N[F++]]^f[N[F++]]^c[N[F++]]^u[N[F++]]^s[N[F++]]^o[N[F++]]^r[N[F++]];for(X+=15;F<X;)H=H>>>8^r[(H^N[F++])&255];return~H}function O(N,z){for(var H=z^-1,X=0,F=N.length,Z=0,L=0;X<F;)Z=N.charCodeAt(X++),Z<128?H=H>>>8^r[(H^Z)&255]:Z<2048?(H=H>>>8^r[(H^(192|Z>>6&31))&255],H=H>>>8^r[(H^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,L=N.charCodeAt(X++)&1023,H=H>>>8^r[(H^(240|Z>>8&7))&255],H=H>>>8^r[(H^(128|Z>>2&63))&255],H=H>>>8^r[(H^(128|L>>6&15|(Z&3)<<4))&255],H=H>>>8^r[(H^(128|L&63))&255]):(H=H>>>8^r[(H^(224|Z>>12&15))&255],H=H>>>8^r[(H^(128|Z>>6&63))&255],H=H>>>8^r[(H^(128|Z&63))&255]);return~H}t.table=r,t.bstr=k,t.buf=D,t.str=O})}(zS)),zS}var eae=Qre();const tae=ni(eae);var US={},E4;function gc(){return E4||(E4=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(i[u]=s[u])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,u,c){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+u),c);return}for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){var o,s,u,c,f,h;for(u=0,o=0,s=i.length;o<s;o++)u+=i[o].length;for(h=new Uint8Array(u),c=0,o=0,s=i.length;o<s;o++)f=i[o],h.set(f,c),c+=f.length;return h}},a={arraySet:function(i,o,s,u,c){for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(US)),US}var kf={},Do={},Kc={},C4;function nae(){if(C4)return Kc;C4=1;var e=gc(),t=4,n=0,r=1,a=2;function i(I){for(var V=I.length;--V>=0;)I[V]=0}var o=0,s=1,u=2,c=3,f=258,h=29,p=256,g=p+1+h,v=30,b=19,_=2*g+1,x=15,S=16,E=7,C=256,k=16,D=17,O=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=512,Z=new Array((g+2)*2);i(Z);var L=new Array(v*2);i(L);var de=new Array(F);i(de);var ae=new Array(f-c+1);i(ae);var ne=new Array(h);i(ne);var ee=new Array(v);i(ee);function se(I,V,he,Oe,ve){this.static_tree=I,this.extra_bits=V,this.extra_base=he,this.elems=Oe,this.max_length=ve,this.has_stree=I&&I.length}var W,J,Y;function re(I,V){this.dyn_tree=I,this.max_code=0,this.stat_desc=V}function be(I){return I<256?de[I]:de[256+(I>>>7)]}function we(I,V){I.pending_buf[I.pending++]=V&255,I.pending_buf[I.pending++]=V>>>8&255}function Me(I,V,he){I.bi_valid>S-he?(I.bi_buf|=V<<I.bi_valid&65535,we(I,I.bi_buf),I.bi_buf=V>>S-I.bi_valid,I.bi_valid+=he-S):(I.bi_buf|=V<<I.bi_valid&65535,I.bi_valid+=he)}function Pe(I,V,he){Me(I,he[V*2],he[V*2+1])}function Ae(I,V){var he=0;do he|=I&1,I>>>=1,he<<=1;while(--V>0);return he>>>1}function Te(I){I.bi_valid===16?(we(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):I.bi_valid>=8&&(I.pending_buf[I.pending++]=I.bi_buf&255,I.bi_buf>>=8,I.bi_valid-=8)}function qe(I,V){var he=V.dyn_tree,Oe=V.max_code,ve=V.stat_desc.static_tree,ke=V.stat_desc.has_stree,le=V.stat_desc.extra_bits,dt=V.stat_desc.extra_base,yt=V.stat_desc.max_length,M,Be,et,me,De,Ke,Ct=0;for(me=0;me<=x;me++)I.bl_count[me]=0;for(he[I.heap[I.heap_max]*2+1]=0,M=I.heap_max+1;M<_;M++)Be=I.heap[M],me=he[he[Be*2+1]*2+1]+1,me>yt&&(me=yt,Ct++),he[Be*2+1]=me,!(Be>Oe)&&(I.bl_count[me]++,De=0,Be>=dt&&(De=le[Be-dt]),Ke=he[Be*2],I.opt_len+=Ke*(me+De),ke&&(I.static_len+=Ke*(ve[Be*2+1]+De)));if(Ct!==0){do{for(me=yt-1;I.bl_count[me]===0;)me--;I.bl_count[me]--,I.bl_count[me+1]+=2,I.bl_count[yt]--,Ct-=2}while(Ct>0);for(me=yt;me!==0;me--)for(Be=I.bl_count[me];Be!==0;)et=I.heap[--M],!(et>Oe)&&(he[et*2+1]!==me&&(I.opt_len+=(me-he[et*2+1])*he[et*2],he[et*2+1]=me),Be--)}}function it(I,V,he){var Oe=new Array(x+1),ve=0,ke,le;for(ke=1;ke<=x;ke++)Oe[ke]=ve=ve+he[ke-1]<<1;for(le=0;le<=V;le++){var dt=I[le*2+1];dt!==0&&(I[le*2]=Ae(Oe[dt]++,dt))}}function Ie(){var I,V,he,Oe,ve,ke=new Array(x+1);for(he=0,Oe=0;Oe<h-1;Oe++)for(ne[Oe]=he,I=0;I<1<<N[Oe];I++)ae[he++]=Oe;for(ae[he-1]=Oe,ve=0,Oe=0;Oe<16;Oe++)for(ee[Oe]=ve,I=0;I<1<<z[Oe];I++)de[ve++]=Oe;for(ve>>=7;Oe<v;Oe++)for(ee[Oe]=ve<<7,I=0;I<1<<z[Oe]-7;I++)de[256+ve++]=Oe;for(V=0;V<=x;V++)ke[V]=0;for(I=0;I<=143;)Z[I*2+1]=8,I++,ke[8]++;for(;I<=255;)Z[I*2+1]=9,I++,ke[9]++;for(;I<=279;)Z[I*2+1]=7,I++,ke[7]++;for(;I<=287;)Z[I*2+1]=8,I++,ke[8]++;for(it(Z,g+1,ke),I=0;I<v;I++)L[I*2+1]=5,L[I*2]=Ae(I,5);W=new se(Z,N,p+1,g,x),J=new se(L,z,0,v,x),Y=new se(new Array(0),H,0,b,E)}function Re(I){var V;for(V=0;V<g;V++)I.dyn_ltree[V*2]=0;for(V=0;V<v;V++)I.dyn_dtree[V*2]=0;for(V=0;V<b;V++)I.bl_tree[V*2]=0;I.dyn_ltree[C*2]=1,I.opt_len=I.static_len=0,I.last_lit=I.matches=0}function U(I){I.bi_valid>8?we(I,I.bi_buf):I.bi_valid>0&&(I.pending_buf[I.pending++]=I.bi_buf),I.bi_buf=0,I.bi_valid=0}function Ce(I,V,he,Oe){U(I),we(I,he),we(I,~he),e.arraySet(I.pending_buf,I.window,V,he,I.pending),I.pending+=he}function Ne(I,V,he,Oe){var ve=V*2,ke=he*2;return I[ve]<I[ke]||I[ve]===I[ke]&&Oe[V]<=Oe[he]}function ce(I,V,he){for(var Oe=I.heap[he],ve=he<<1;ve<=I.heap_len&&(ve<I.heap_len&&Ne(V,I.heap[ve+1],I.heap[ve],I.depth)&&ve++,!Ne(V,Oe,I.heap[ve],I.depth));)I.heap[he]=I.heap[ve],he=ve,ve<<=1;I.heap[he]=Oe}function ie(I,V,he){var Oe,ve,ke=0,le,dt;if(I.last_lit!==0)do Oe=I.pending_buf[I.d_buf+ke*2]<<8|I.pending_buf[I.d_buf+ke*2+1],ve=I.pending_buf[I.l_buf+ke],ke++,Oe===0?Pe(I,ve,V):(le=ae[ve],Pe(I,le+p+1,V),dt=N[le],dt!==0&&(ve-=ne[le],Me(I,ve,dt)),Oe--,le=be(Oe),Pe(I,le,he),dt=z[le],dt!==0&&(Oe-=ee[le],Me(I,Oe,dt)));while(ke<I.last_lit);Pe(I,C,V)}function Q(I,V){var he=V.dyn_tree,Oe=V.stat_desc.static_tree,ve=V.stat_desc.has_stree,ke=V.stat_desc.elems,le,dt,yt=-1,M;for(I.heap_len=0,I.heap_max=_,le=0;le<ke;le++)he[le*2]!==0?(I.heap[++I.heap_len]=yt=le,I.depth[le]=0):he[le*2+1]=0;for(;I.heap_len<2;)M=I.heap[++I.heap_len]=yt<2?++yt:0,he[M*2]=1,I.depth[M]=0,I.opt_len--,ve&&(I.static_len-=Oe[M*2+1]);for(V.max_code=yt,le=I.heap_len>>1;le>=1;le--)ce(I,he,le);M=ke;do le=I.heap[1],I.heap[1]=I.heap[I.heap_len--],ce(I,he,1),dt=I.heap[1],I.heap[--I.heap_max]=le,I.heap[--I.heap_max]=dt,he[M*2]=he[le*2]+he[dt*2],I.depth[M]=(I.depth[le]>=I.depth[dt]?I.depth[le]:I.depth[dt])+1,he[le*2+1]=he[dt*2+1]=M,I.heap[1]=M++,ce(I,he,1);while(I.heap_len>=2);I.heap[--I.heap_max]=I.heap[1],qe(I,V),it(he,yt,I.bl_count)}function xe(I,V,he){var Oe,ve=-1,ke,le=V[0*2+1],dt=0,yt=7,M=4;for(le===0&&(yt=138,M=3),V[(he+1)*2+1]=65535,Oe=0;Oe<=he;Oe++)ke=le,le=V[(Oe+1)*2+1],!(++dt<yt&&ke===le)&&(dt<M?I.bl_tree[ke*2]+=dt:ke!==0?(ke!==ve&&I.bl_tree[ke*2]++,I.bl_tree[k*2]++):dt<=10?I.bl_tree[D*2]++:I.bl_tree[O*2]++,dt=0,ve=ke,le===0?(yt=138,M=3):ke===le?(yt=6,M=3):(yt=7,M=4))}function Le(I,V,he){var Oe,ve=-1,ke,le=V[0*2+1],dt=0,yt=7,M=4;for(le===0&&(yt=138,M=3),Oe=0;Oe<=he;Oe++)if(ke=le,le=V[(Oe+1)*2+1],!(++dt<yt&&ke===le)){if(dt<M)do Pe(I,ke,I.bl_tree);while(--dt!==0);else ke!==0?(ke!==ve&&(Pe(I,ke,I.bl_tree),dt--),Pe(I,k,I.bl_tree),Me(I,dt-3,2)):dt<=10?(Pe(I,D,I.bl_tree),Me(I,dt-3,3)):(Pe(I,O,I.bl_tree),Me(I,dt-11,7));dt=0,ve=ke,le===0?(yt=138,M=3):ke===le?(yt=6,M=3):(yt=7,M=4)}}function Se(I){var V;for(xe(I,I.dyn_ltree,I.l_desc.max_code),xe(I,I.dyn_dtree,I.d_desc.max_code),Q(I,I.bl_desc),V=b-1;V>=3&&I.bl_tree[X[V]*2+1]===0;V--);return I.opt_len+=3*(V+1)+5+5+4,V}function Ve(I,V,he,Oe){var ve;for(Me(I,V-257,5),Me(I,he-1,5),Me(I,Oe-4,4),ve=0;ve<Oe;ve++)Me(I,I.bl_tree[X[ve]*2+1],3);Le(I,I.dyn_ltree,V-1),Le(I,I.dyn_dtree,he-1)}function xt(I){var V=4093624447,he;for(he=0;he<=31;he++,V>>>=1)if(V&1&&I.dyn_ltree[he*2]!==0)return n;if(I.dyn_ltree[9*2]!==0||I.dyn_ltree[10*2]!==0||I.dyn_ltree[13*2]!==0)return r;for(he=32;he<p;he++)if(I.dyn_ltree[he*2]!==0)return r;return n}var ht=!1;function Et(I){ht||(Ie(),ht=!0),I.l_desc=new re(I.dyn_ltree,W),I.d_desc=new re(I.dyn_dtree,J),I.bl_desc=new re(I.bl_tree,Y),I.bi_buf=0,I.bi_valid=0,Re(I)}function Ft(I,V,he,Oe){Me(I,(o<<1)+(Oe?1:0),3),Ce(I,V,he)}function Tt(I){Me(I,s<<1,3),Pe(I,C,Z),Te(I)}function Ut(I,V,he,Oe){var ve,ke,le=0;I.level>0?(I.strm.data_type===a&&(I.strm.data_type=xt(I)),Q(I,I.l_desc),Q(I,I.d_desc),le=Se(I),ve=I.opt_len+3+7>>>3,ke=I.static_len+3+7>>>3,ke<=ve&&(ve=ke)):ve=ke=he+5,he+4<=ve&&V!==-1?Ft(I,V,he,Oe):I.strategy===t||ke===ve?(Me(I,(s<<1)+(Oe?1:0),3),ie(I,Z,L)):(Me(I,(u<<1)+(Oe?1:0),3),Ve(I,I.l_desc.max_code+1,I.d_desc.max_code+1,le+1),ie(I,I.dyn_ltree,I.dyn_dtree)),Re(I),Oe&&U(I)}function ge(I,V,he){return I.pending_buf[I.d_buf+I.last_lit*2]=V>>>8&255,I.pending_buf[I.d_buf+I.last_lit*2+1]=V&255,I.pending_buf[I.l_buf+I.last_lit]=he&255,I.last_lit++,V===0?I.dyn_ltree[he*2]++:(I.matches++,V--,I.dyn_ltree[(ae[he]+p+1)*2]++,I.dyn_dtree[be(V)*2]++),I.last_lit===I.lit_bufsize-1}return Kc._tr_init=Et,Kc._tr_stored_block=Ft,Kc._tr_flush_block=Ut,Kc._tr_tally=ge,Kc._tr_align=Tt,Kc}var qS,k4;function j5(){if(k4)return qS;k4=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return qS=e,qS}var HS,A4;function M5(){if(A4)return HS;A4=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,u=o+i;r^=-1;for(var c=o;c<u;c++)r=r>>>8^s[(r^a[c])&255];return r^-1}return HS=n,HS}var VS,T4;function $k(){return T4||(T4=1,VS={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),VS}var R4;function rae(){if(R4)return Do;R4=1;var e=gc(),t=nae(),n=j5(),r=M5(),a=$k(),i=0,o=1,s=3,u=4,c=5,f=0,h=1,p=-2,g=-3,v=-5,b=-1,_=1,x=2,S=3,E=4,C=0,k=2,D=8,O=9,N=15,z=8,H=29,X=256,F=X+1+H,Z=30,L=19,de=2*F+1,ae=15,ne=3,ee=258,se=ee+ne+1,W=32,J=42,Y=69,re=73,be=91,we=103,Me=113,Pe=666,Ae=1,Te=2,qe=3,it=4,Ie=3;function Re(M,Be){return M.msg=a[Be],Be}function U(M){return(M<<1)-(M>4?9:0)}function Ce(M){for(var Be=M.length;--Be>=0;)M[Be]=0}function Ne(M){var Be=M.state,et=Be.pending;et>M.avail_out&&(et=M.avail_out),et!==0&&(e.arraySet(M.output,Be.pending_buf,Be.pending_out,et,M.next_out),M.next_out+=et,Be.pending_out+=et,M.total_out+=et,M.avail_out-=et,Be.pending-=et,Be.pending===0&&(Be.pending_out=0))}function ce(M,Be){t._tr_flush_block(M,M.block_start>=0?M.block_start:-1,M.strstart-M.block_start,Be),M.block_start=M.strstart,Ne(M.strm)}function ie(M,Be){M.pending_buf[M.pending++]=Be}function Q(M,Be){M.pending_buf[M.pending++]=Be>>>8&255,M.pending_buf[M.pending++]=Be&255}function xe(M,Be,et,me){var De=M.avail_in;return De>me&&(De=me),De===0?0:(M.avail_in-=De,e.arraySet(Be,M.input,M.next_in,De,et),M.state.wrap===1?M.adler=n(M.adler,Be,De,et):M.state.wrap===2&&(M.adler=r(M.adler,Be,De,et)),M.next_in+=De,M.total_in+=De,De)}function Le(M,Be){var et=M.max_chain_length,me=M.strstart,De,Ke,Ct=M.prev_length,ye=M.nice_match,q=M.strstart>M.w_size-se?M.strstart-(M.w_size-se):0,B=M.window,G=M.w_mask,pe=M.prev,fe=M.strstart+ee,Fe=B[me+Ct-1],st=B[me+Ct];M.prev_length>=M.good_match&&(et>>=2),ye>M.lookahead&&(ye=M.lookahead);do if(De=Be,!(B[De+Ct]!==st||B[De+Ct-1]!==Fe||B[De]!==B[me]||B[++De]!==B[me+1])){me+=2,De++;do;while(B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&B[++me]===B[++De]&&me<fe);if(Ke=ee-(fe-me),me=fe-ee,Ke>Ct){if(M.match_start=Be,Ct=Ke,Ke>=ye)break;Fe=B[me+Ct-1],st=B[me+Ct]}}while((Be=pe[Be&G])>q&&--et!==0);return Ct<=M.lookahead?Ct:M.lookahead}function Se(M){var Be=M.w_size,et,me,De,Ke,Ct;do{if(Ke=M.window_size-M.lookahead-M.strstart,M.strstart>=Be+(Be-se)){e.arraySet(M.window,M.window,Be,Be,0),M.match_start-=Be,M.strstart-=Be,M.block_start-=Be,me=M.hash_size,et=me;do De=M.head[--et],M.head[et]=De>=Be?De-Be:0;while(--me);me=Be,et=me;do De=M.prev[--et],M.prev[et]=De>=Be?De-Be:0;while(--me);Ke+=Be}if(M.strm.avail_in===0)break;if(me=xe(M.strm,M.window,M.strstart+M.lookahead,Ke),M.lookahead+=me,M.lookahead+M.insert>=ne)for(Ct=M.strstart-M.insert,M.ins_h=M.window[Ct],M.ins_h=(M.ins_h<<M.hash_shift^M.window[Ct+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[Ct+ne-1])&M.hash_mask,M.prev[Ct&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=Ct,Ct++,M.insert--,!(M.lookahead+M.insert<ne)););}while(M.lookahead<se&&M.strm.avail_in!==0)}function Ve(M,Be){var et=65535;for(et>M.pending_buf_size-5&&(et=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Se(M),M.lookahead===0&&Be===i)return Ae;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var me=M.block_start+et;if((M.strstart===0||M.strstart>=me)&&(M.lookahead=M.strstart-me,M.strstart=me,ce(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-se&&(ce(M,!1),M.strm.avail_out===0))return Ae}return M.insert=0,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):(M.strstart>M.block_start&&(ce(M,!1),M.strm.avail_out===0),Ae)}function xt(M,Be){for(var et,me;;){if(M.lookahead<se){if(Se(M),M.lookahead<se&&Be===i)return Ae;if(M.lookahead===0)break}if(et=0,M.lookahead>=ne&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ne-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),et!==0&&M.strstart-et<=M.w_size-se&&(M.match_length=Le(M,et)),M.match_length>=ne)if(me=t._tr_tally(M,M.strstart-M.match_start,M.match_length-ne),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=ne){M.match_length--;do M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ne-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart;while(--M.match_length!==0);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else me=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(me&&(ce(M,!1),M.strm.avail_out===0))return Ae}return M.insert=M.strstart<ne-1?M.strstart:ne-1,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Ae:Te}function ht(M,Be){for(var et,me,De;;){if(M.lookahead<se){if(Se(M),M.lookahead<se&&Be===i)return Ae;if(M.lookahead===0)break}if(et=0,M.lookahead>=ne&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ne-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=ne-1,et!==0&&M.prev_length<M.max_lazy_match&&M.strstart-et<=M.w_size-se&&(M.match_length=Le(M,et),M.match_length<=5&&(M.strategy===_||M.match_length===ne&&M.strstart-M.match_start>4096)&&(M.match_length=ne-1)),M.prev_length>=ne&&M.match_length<=M.prev_length){De=M.strstart+M.lookahead-ne,me=t._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-ne),M.lookahead-=M.prev_length-1,M.prev_length-=2;do++M.strstart<=De&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ne-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart);while(--M.prev_length!==0);if(M.match_available=0,M.match_length=ne-1,M.strstart++,me&&(ce(M,!1),M.strm.avail_out===0))return Ae}else if(M.match_available){if(me=t._tr_tally(M,0,M.window[M.strstart-1]),me&&ce(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return Ae}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(me=t._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<ne-1?M.strstart:ne-1,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Ae:Te}function Et(M,Be){for(var et,me,De,Ke,Ct=M.window;;){if(M.lookahead<=ee){if(Se(M),M.lookahead<=ee&&Be===i)return Ae;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=ne&&M.strstart>0&&(De=M.strstart-1,me=Ct[De],me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De])){Ke=M.strstart+ee;do;while(me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&me===Ct[++De]&&De<Ke);M.match_length=ee-(Ke-De),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=ne?(et=t._tr_tally(M,1,M.match_length-ne),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(et=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),et&&(ce(M,!1),M.strm.avail_out===0))return Ae}return M.insert=0,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Ae:Te}function Ft(M,Be){for(var et;;){if(M.lookahead===0&&(Se(M),M.lookahead===0)){if(Be===i)return Ae;break}if(M.match_length=0,et=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,et&&(ce(M,!1),M.strm.avail_out===0))return Ae}return M.insert=0,Be===u?(ce(M,!0),M.strm.avail_out===0?qe:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Ae:Te}function Tt(M,Be,et,me,De){this.good_length=M,this.max_lazy=Be,this.nice_length=et,this.max_chain=me,this.func=De}var Ut;Ut=[new Tt(0,0,0,0,Ve),new Tt(4,4,8,4,xt),new Tt(4,5,16,8,xt),new Tt(4,6,32,32,xt),new Tt(4,4,16,16,ht),new Tt(8,16,32,32,ht),new Tt(8,16,128,128,ht),new Tt(8,32,128,256,ht),new Tt(32,128,258,1024,ht),new Tt(32,258,258,4096,ht)];function ge(M){M.window_size=2*M.w_size,Ce(M.head),M.max_lazy_match=Ut[M.level].max_lazy,M.good_match=Ut[M.level].good_length,M.nice_match=Ut[M.level].nice_length,M.max_chain_length=Ut[M.level].max_chain,M.strstart=0,M.block_start=0,M.lookahead=0,M.insert=0,M.match_length=M.prev_length=ne-1,M.match_available=0,M.ins_h=0}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(de*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*L+1)*2),Ce(this.dyn_ltree),Ce(this.dyn_dtree),Ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*F+1),Ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*F+1),Ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(M){var Be;return!M||!M.state?Re(M,p):(M.total_in=M.total_out=0,M.data_type=k,Be=M.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?J:Me,M.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),f)}function he(M){var Be=V(M);return Be===f&&ge(M.state),Be}function Oe(M,Be){return!M||!M.state||M.state.wrap!==2?p:(M.state.gzhead=Be,f)}function ve(M,Be,et,me,De,Ke){if(!M)return p;var Ct=1;if(Be===b&&(Be=6),me<0?(Ct=0,me=-me):me>15&&(Ct=2,me-=16),De<1||De>O||et!==D||me<8||me>15||Be<0||Be>9||Ke<0||Ke>E)return Re(M,p);me===8&&(me=9);var ye=new I;return M.state=ye,ye.strm=M,ye.wrap=Ct,ye.gzhead=null,ye.w_bits=me,ye.w_size=1<<ye.w_bits,ye.w_mask=ye.w_size-1,ye.hash_bits=De+7,ye.hash_size=1<<ye.hash_bits,ye.hash_mask=ye.hash_size-1,ye.hash_shift=~~((ye.hash_bits+ne-1)/ne),ye.window=new e.Buf8(ye.w_size*2),ye.head=new e.Buf16(ye.hash_size),ye.prev=new e.Buf16(ye.w_size),ye.lit_bufsize=1<<De+6,ye.pending_buf_size=ye.lit_bufsize*4,ye.pending_buf=new e.Buf8(ye.pending_buf_size),ye.d_buf=1*ye.lit_bufsize,ye.l_buf=3*ye.lit_bufsize,ye.level=Be,ye.strategy=Ke,ye.method=et,he(M)}function ke(M,Be){return ve(M,Be,D,N,z,C)}function le(M,Be){var et,me,De,Ke;if(!M||!M.state||Be>c||Be<0)return M?Re(M,p):p;if(me=M.state,!M.output||!M.input&&M.avail_in!==0||me.status===Pe&&Be!==u)return Re(M,M.avail_out===0?v:p);if(me.strm=M,et=me.last_flush,me.last_flush=Be,me.status===J)if(me.wrap===2)M.adler=0,ie(me,31),ie(me,139),ie(me,8),me.gzhead?(ie(me,(me.gzhead.text?1:0)+(me.gzhead.hcrc?2:0)+(me.gzhead.extra?4:0)+(me.gzhead.name?8:0)+(me.gzhead.comment?16:0)),ie(me,me.gzhead.time&255),ie(me,me.gzhead.time>>8&255),ie(me,me.gzhead.time>>16&255),ie(me,me.gzhead.time>>24&255),ie(me,me.level===9?2:me.strategy>=x||me.level<2?4:0),ie(me,me.gzhead.os&255),me.gzhead.extra&&me.gzhead.extra.length&&(ie(me,me.gzhead.extra.length&255),ie(me,me.gzhead.extra.length>>8&255)),me.gzhead.hcrc&&(M.adler=r(M.adler,me.pending_buf,me.pending,0)),me.gzindex=0,me.status=Y):(ie(me,0),ie(me,0),ie(me,0),ie(me,0),ie(me,0),ie(me,me.level===9?2:me.strategy>=x||me.level<2?4:0),ie(me,Ie),me.status=Me);else{var Ct=D+(me.w_bits-8<<4)<<8,ye=-1;me.strategy>=x||me.level<2?ye=0:me.level<6?ye=1:me.level===6?ye=2:ye=3,Ct|=ye<<6,me.strstart!==0&&(Ct|=W),Ct+=31-Ct%31,me.status=Me,Q(me,Ct),me.strstart!==0&&(Q(me,M.adler>>>16),Q(me,M.adler&65535)),M.adler=1}if(me.status===Y)if(me.gzhead.extra){for(De=me.pending;me.gzindex<(me.gzhead.extra.length&65535)&&!(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ne(M),De=me.pending,me.pending===me.pending_buf_size));)ie(me,me.gzhead.extra[me.gzindex]&255),me.gzindex++;me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),me.gzindex===me.gzhead.extra.length&&(me.gzindex=0,me.status=re)}else me.status=re;if(me.status===re)if(me.gzhead.name){De=me.pending;do{if(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ne(M),De=me.pending,me.pending===me.pending_buf_size)){Ke=1;break}me.gzindex<me.gzhead.name.length?Ke=me.gzhead.name.charCodeAt(me.gzindex++)&255:Ke=0,ie(me,Ke)}while(Ke!==0);me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ke===0&&(me.gzindex=0,me.status=be)}else me.status=be;if(me.status===be)if(me.gzhead.comment){De=me.pending;do{if(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ne(M),De=me.pending,me.pending===me.pending_buf_size)){Ke=1;break}me.gzindex<me.gzhead.comment.length?Ke=me.gzhead.comment.charCodeAt(me.gzindex++)&255:Ke=0,ie(me,Ke)}while(Ke!==0);me.gzhead.hcrc&&me.pending>De&&(M.adler=r(M.adler,me.pending_buf,me.pending-De,De)),Ke===0&&(me.status=we)}else me.status=we;if(me.status===we&&(me.gzhead.hcrc?(me.pending+2>me.pending_buf_size&&Ne(M),me.pending+2<=me.pending_buf_size&&(ie(me,M.adler&255),ie(me,M.adler>>8&255),M.adler=0,me.status=Me)):me.status=Me),me.pending!==0){if(Ne(M),M.avail_out===0)return me.last_flush=-1,f}else if(M.avail_in===0&&U(Be)<=U(et)&&Be!==u)return Re(M,v);if(me.status===Pe&&M.avail_in!==0)return Re(M,v);if(M.avail_in!==0||me.lookahead!==0||Be!==i&&me.status!==Pe){var q=me.strategy===x?Ft(me,Be):me.strategy===S?Et(me,Be):Ut[me.level].func(me,Be);if((q===qe||q===it)&&(me.status=Pe),q===Ae||q===qe)return M.avail_out===0&&(me.last_flush=-1),f;if(q===Te&&(Be===o?t._tr_align(me):Be!==c&&(t._tr_stored_block(me,0,0,!1),Be===s&&(Ce(me.head),me.lookahead===0&&(me.strstart=0,me.block_start=0,me.insert=0))),Ne(M),M.avail_out===0))return me.last_flush=-1,f}return Be!==u?f:me.wrap<=0?h:(me.wrap===2?(ie(me,M.adler&255),ie(me,M.adler>>8&255),ie(me,M.adler>>16&255),ie(me,M.adler>>24&255),ie(me,M.total_in&255),ie(me,M.total_in>>8&255),ie(me,M.total_in>>16&255),ie(me,M.total_in>>24&255)):(Q(me,M.adler>>>16),Q(me,M.adler&65535)),Ne(M),me.wrap>0&&(me.wrap=-me.wrap),me.pending!==0?f:h)}function dt(M){var Be;return!M||!M.state?p:(Be=M.state.status,Be!==J&&Be!==Y&&Be!==re&&Be!==be&&Be!==we&&Be!==Me&&Be!==Pe?Re(M,p):(M.state=null,Be===Me?Re(M,g):f))}function yt(M,Be){var et=Be.length,me,De,Ke,Ct,ye,q,B,G;if(!M||!M.state||(me=M.state,Ct=me.wrap,Ct===2||Ct===1&&me.status!==J||me.lookahead))return p;for(Ct===1&&(M.adler=n(M.adler,Be,et,0)),me.wrap=0,et>=me.w_size&&(Ct===0&&(Ce(me.head),me.strstart=0,me.block_start=0,me.insert=0),G=new e.Buf8(me.w_size),e.arraySet(G,Be,et-me.w_size,me.w_size,0),Be=G,et=me.w_size),ye=M.avail_in,q=M.next_in,B=M.input,M.avail_in=et,M.next_in=0,M.input=Be,Se(me);me.lookahead>=ne;){De=me.strstart,Ke=me.lookahead-(ne-1);do me.ins_h=(me.ins_h<<me.hash_shift^me.window[De+ne-1])&me.hash_mask,me.prev[De&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=De,De++;while(--Ke);me.strstart=De,me.lookahead=ne-1,Se(me)}return me.strstart+=me.lookahead,me.block_start=me.strstart,me.insert=me.lookahead,me.lookahead=0,me.match_length=me.prev_length=ne-1,me.match_available=0,M.next_in=q,M.input=B,M.avail_in=ye,me.wrap=Ct,f}return Do.deflateInit=ke,Do.deflateInit2=ve,Do.deflateReset=he,Do.deflateResetKeep=V,Do.deflateSetHeader=Oe,Do.deflate=le,Do.deflateEnd=dt,Do.deflateSetDictionary=yt,Do.deflateInfo="pako deflate (from Nodeca project)",Do}var Zc={},N4;function P5(){if(N4)return Zc;N4=1;var e=gc(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Zc.string2buf=function(o){var s,u,c,f,h,p=o.length,g=0;for(f=0;f<p;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<p&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(s=new e.Buf8(g),h=0,f=0;h<g;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<p&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),u<128?s[h++]=u:u<2048?(s[h++]=192|u>>>6,s[h++]=128|u&63):u<65536?(s[h++]=224|u>>>12,s[h++]=128|u>>>6&63,s[h++]=128|u&63):(s[h++]=240|u>>>18,s[h++]=128|u>>>12&63,s[h++]=128|u>>>6&63,s[h++]=128|u&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var u="",c=0;c<s;c++)u+=String.fromCharCode(o[c]);return u}return Zc.buf2binstring=function(o){return i(o,o.length)},Zc.binstring2buf=function(o){for(var s=new e.Buf8(o.length),u=0,c=s.length;u<c;u++)s[u]=o.charCodeAt(u);return s},Zc.buf2string=function(o,s){var u,c,f,h,p=s||o.length,g=new Array(p*2);for(c=0,u=0;u<p;){if(f=o[u++],f<128){g[c++]=f;continue}if(h=r[f],h>4){g[c++]=65533,u+=h-1;continue}for(f&=h===2?31:h===3?15:7;h>1&&u<p;)f=f<<6|o[u++]&63,h--;if(h>1){g[c++]=65533;continue}f<65536?g[c++]=f:(f-=65536,g[c++]=55296|f>>10&1023,g[c++]=56320|f&1023)}return i(g,c)},Zc.utf8border=function(o,s){var u;for(s=s||o.length,s>o.length&&(s=o.length),u=s-1;u>=0&&(o[u]&192)===128;)u--;return u<0||u===0?s:u+r[o[u]]>s?u:s},Zc}var GS,I4;function F5(){if(I4)return GS;I4=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return GS=e,GS}var O4;function aae(){if(O4)return kf;O4=1;var e=rae(),t=gc(),n=P5(),r=$k(),a=F5(),i=Object.prototype.toString,o=0,s=4,u=0,c=1,f=2,h=-1,p=0,g=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==u)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==u)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,k=this.options.chunkSize,D,O;if(this.ended)return!1;O=E===~~E?E:E===!0?s:o,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),D=e.deflate(C,O),D!==c&&D!==u)return this.onEnd(D),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(O===s||O===f))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&D!==c);return O===s?(D=e.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===u):(O===f&&(this.onEnd(u),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function b(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function _(S,E){return E=E||{},E.raw=!0,b(S,E)}function x(S,E){return E=E||{},E.gzip=!0,b(S,E)}return kf.Deflate=v,kf.deflate=b,kf.deflateRaw=_,kf.gzip=x,kf}var Af={},fo={},WS,D4;function iae(){if(D4)return WS;D4=1;var e=30,t=12;return WS=function(r,a){var i,o,s,u,c,f,h,p,g,v,b,_,x,S,E,C,k,D,O,N,z,H,X,F,Z;i=r.state,o=r.next_in,F=r.input,s=o+(r.avail_in-5),u=r.next_out,Z=r.output,c=u-(a-r.avail_out),f=u+(r.avail_out-257),h=i.dmax,p=i.wsize,g=i.whave,v=i.wnext,b=i.window,_=i.hold,x=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),D=S[_&C];t:for(;;){if(O=D>>>24,_>>>=O,x-=O,O=D>>>16&255,O===0)Z[u++]=D&65535;else if(O&16){N=D&65535,O&=15,O&&(x<O&&(_+=F[o++]<<x,x+=8),N+=_&(1<<O)-1,_>>>=O,x-=O),x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),D=E[_&k];n:for(;;){if(O=D>>>24,_>>>=O,x-=O,O=D>>>16&255,O&16){if(z=D&65535,O&=15,x<O&&(_+=F[o++]<<x,x+=8,x<O&&(_+=F[o++]<<x,x+=8)),z+=_&(1<<O)-1,z>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=O,x-=O,O=u-c,z>O){if(O=z-O,O>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(H=0,X=b,v===0){if(H+=p-O,O<N){N-=O;do Z[u++]=b[H++];while(--O);H=u-z,X=Z}}else if(v<O){if(H+=p+v-O,O-=v,O<N){N-=O;do Z[u++]=b[H++];while(--O);if(H=0,v<N){O=v,N-=O;do Z[u++]=b[H++];while(--O);H=u-z,X=Z}}}else if(H+=v-O,O<N){N-=O;do Z[u++]=b[H++];while(--O);H=u-z,X=Z}for(;N>2;)Z[u++]=X[H++],Z[u++]=X[H++],Z[u++]=X[H++],N-=3;N&&(Z[u++]=X[H++],N>1&&(Z[u++]=X[H++]))}else{H=u-z;do Z[u++]=Z[H++],Z[u++]=Z[H++],Z[u++]=Z[H++],N-=3;while(N>2);N&&(Z[u++]=Z[H++],N>1&&(Z[u++]=Z[H++]))}}else if((O&64)===0){D=E[(D&65535)+(_&(1<<O)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((O&64)===0){D=S[(D&65535)+(_&(1<<O)-1)];continue t}else if(O&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&u<f);N=x>>3,o-=N,x-=N<<3,_&=(1<<x)-1,r.next_in=o,r.next_out=u,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=u<f?257+(f-u):257-(u-f),i.hold=_,i.bits=x},WS}var KS,j4;function oae(){if(j4)return KS;j4=1;var e=gc(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return KS=function(p,g,v,b,_,x,S,E){var C=E.bits,k=0,D=0,O=0,N=0,z=0,H=0,X=0,F=0,Z=0,L=0,de,ae,ne,ee,se,W=null,J=0,Y,re=new e.Buf16(t+1),be=new e.Buf16(t+1),we=null,Me=0,Pe,Ae,Te;for(k=0;k<=t;k++)re[k]=0;for(D=0;D<b;D++)re[g[v+D]]++;for(z=C,N=t;N>=1&&re[N]===0;N--);if(z>N&&(z=N),N===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,E.bits=1,0;for(O=1;O<N&&re[O]===0;O++);for(z<O&&(z=O),F=1,k=1;k<=t;k++)if(F<<=1,F-=re[k],F<0)return-1;if(F>0&&(p===a||N!==1))return-1;for(be[1]=0,k=1;k<t;k++)be[k+1]=be[k]+re[k];for(D=0;D<b;D++)g[v+D]!==0&&(S[be[g[v+D]]++]=D);if(p===a?(W=we=S,Y=19):p===i?(W=s,J-=257,we=u,Me-=257,Y=256):(W=c,we=f,Y=-1),L=0,D=0,k=O,se=x,H=z,X=0,ne=-1,Z=1<<z,ee=Z-1,p===i&&Z>n||p===o&&Z>r)return 1;for(;;){Pe=k-X,S[D]<Y?(Ae=0,Te=S[D]):S[D]>Y?(Ae=we[Me+S[D]],Te=W[J+S[D]]):(Ae=96,Te=0),de=1<<k-X,ae=1<<H,O=ae;do ae-=de,_[se+(L>>X)+ae]=Pe<<24|Ae<<16|Te|0;while(ae!==0);for(de=1<<k-1;L&de;)de>>=1;if(de!==0?(L&=de-1,L+=de):L=0,D++,--re[k]===0){if(k===N)break;k=g[v+S[D]]}if(k>z&&(L&ee)!==ne){for(X===0&&(X=z),se+=O,H=k-X,F=1<<H;H+X<N&&(F-=re[H+X],!(F<=0));)H++,F<<=1;if(Z+=1<<H,p===i&&Z>n||p===o&&Z>r)return 1;ne=L&ee,_[ne]=z<<24|H<<16|se-x|0}}return L!==0&&(_[se+L]=k-X<<24|64<<16|0),E.bits=z,0},KS}var M4;function sae(){if(M4)return fo;M4=1;var e=gc(),t=j5(),n=M5(),r=iae(),a=oae(),i=0,o=1,s=2,u=4,c=5,f=6,h=0,p=1,g=2,v=-2,b=-3,_=-4,x=-5,S=8,E=1,C=2,k=3,D=4,O=5,N=6,z=7,H=8,X=9,F=10,Z=11,L=12,de=13,ae=14,ne=15,ee=16,se=17,W=18,J=19,Y=20,re=21,be=22,we=23,Me=24,Pe=25,Ae=26,Te=27,qe=28,it=29,Ie=30,Re=31,U=32,Ce=852,Ne=592,ce=15,ie=ce;function Q(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Le(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ve.total_in=ve.total_out=ke.total=0,ve.msg="",ke.wrap&&(ve.adler=ke.wrap&1),ke.mode=E,ke.last=0,ke.havedict=0,ke.dmax=32768,ke.head=null,ke.hold=0,ke.bits=0,ke.lencode=ke.lendyn=new e.Buf32(Ce),ke.distcode=ke.distdyn=new e.Buf32(Ne),ke.sane=1,ke.back=-1,h)}function Se(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ke.wsize=0,ke.whave=0,ke.wnext=0,Le(ve))}function Ve(ve,ke){var le,dt;return!ve||!ve.state||(dt=ve.state,ke<0?(le=0,ke=-ke):(le=(ke>>4)+1,ke<48&&(ke&=15)),ke&&(ke<8||ke>15))?v:(dt.window!==null&&dt.wbits!==ke&&(dt.window=null),dt.wrap=le,dt.wbits=ke,Se(ve))}function xt(ve,ke){var le,dt;return ve?(dt=new xe,ve.state=dt,dt.window=null,le=Ve(ve,ke),le!==h&&(ve.state=null),le):v}function ht(ve){return xt(ve,ie)}var Et=!0,Ft,Tt;function Ut(ve){if(Et){var ke;for(Ft=new e.Buf32(512),Tt=new e.Buf32(32),ke=0;ke<144;)ve.lens[ke++]=8;for(;ke<256;)ve.lens[ke++]=9;for(;ke<280;)ve.lens[ke++]=7;for(;ke<288;)ve.lens[ke++]=8;for(a(o,ve.lens,0,288,Ft,0,ve.work,{bits:9}),ke=0;ke<32;)ve.lens[ke++]=5;a(s,ve.lens,0,32,Tt,0,ve.work,{bits:5}),Et=!1}ve.lencode=Ft,ve.lenbits=9,ve.distcode=Tt,ve.distbits=5}function ge(ve,ke,le,dt){var yt,M=ve.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new e.Buf8(M.wsize)),dt>=M.wsize?(e.arraySet(M.window,ke,le-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(yt=M.wsize-M.wnext,yt>dt&&(yt=dt),e.arraySet(M.window,ke,le-dt,yt,M.wnext),dt-=yt,dt?(e.arraySet(M.window,ke,le-dt,dt,0),M.wnext=dt,M.whave=M.wsize):(M.wnext+=yt,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=yt))),0}function I(ve,ke){var le,dt,yt,M,Be,et,me,De,Ke,Ct,ye,q,B,G,pe=0,fe,Fe,st,Dt,un,zt,Gt,Xt,Dn=new e.Buf8(4),zn,fr,hr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return v;le=ve.state,le.mode===L&&(le.mode=de),Be=ve.next_out,yt=ve.output,me=ve.avail_out,M=ve.next_in,dt=ve.input,et=ve.avail_in,De=le.hold,Ke=le.bits,Ct=et,ye=me,Xt=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=de;break}for(;Ke<16;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if(le.wrap&2&&De===35615){le.check=0,Dn[0]=De&255,Dn[1]=De>>>8&255,le.check=n(le.check,Dn,2,0),De=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((De&255)<<8)+(De>>8))%31){ve.msg="incorrect header check",le.mode=Ie;break}if((De&15)!==S){ve.msg="unknown compression method",le.mode=Ie;break}if(De>>>=4,Ke-=4,Gt=(De&15)+8,le.wbits===0)le.wbits=Gt;else if(Gt>le.wbits){ve.msg="invalid window size",le.mode=Ie;break}le.dmax=1<<Gt,ve.adler=le.check=1,le.mode=De&512?F:L,De=0,Ke=0;break;case C:for(;Ke<16;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if(le.flags=De,(le.flags&255)!==S){ve.msg="unknown compression method",le.mode=Ie;break}if(le.flags&57344){ve.msg="unknown header flags set",le.mode=Ie;break}le.head&&(le.head.text=De>>8&1),le.flags&512&&(Dn[0]=De&255,Dn[1]=De>>>8&255,le.check=n(le.check,Dn,2,0)),De=0,Ke=0,le.mode=k;case k:for(;Ke<32;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}le.head&&(le.head.time=De),le.flags&512&&(Dn[0]=De&255,Dn[1]=De>>>8&255,Dn[2]=De>>>16&255,Dn[3]=De>>>24&255,le.check=n(le.check,Dn,4,0)),De=0,Ke=0,le.mode=D;case D:for(;Ke<16;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}le.head&&(le.head.xflags=De&255,le.head.os=De>>8),le.flags&512&&(Dn[0]=De&255,Dn[1]=De>>>8&255,le.check=n(le.check,Dn,2,0)),De=0,Ke=0,le.mode=O;case O:if(le.flags&1024){for(;Ke<16;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}le.length=De,le.head&&(le.head.extra_len=De),le.flags&512&&(Dn[0]=De&255,Dn[1]=De>>>8&255,le.check=n(le.check,Dn,2,0)),De=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=N;case N:if(le.flags&1024&&(q=le.length,q>et&&(q=et),q&&(le.head&&(Gt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,dt,M,q,Gt)),le.flags&512&&(le.check=n(le.check,dt,q,M)),et-=q,M+=q,le.length-=q),le.length))break e;le.length=0,le.mode=z;case z:if(le.flags&2048){if(et===0)break e;q=0;do Gt=dt[M+q++],le.head&&Gt&&le.length<65536&&(le.head.name+=String.fromCharCode(Gt));while(Gt&&q<et);if(le.flags&512&&(le.check=n(le.check,dt,q,M)),et-=q,M+=q,Gt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=H;case H:if(le.flags&4096){if(et===0)break e;q=0;do Gt=dt[M+q++],le.head&&Gt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Gt));while(Gt&&q<et);if(le.flags&512&&(le.check=n(le.check,dt,q,M)),et-=q,M+=q,Gt)break e}else le.head&&(le.head.comment=null);le.mode=X;case X:if(le.flags&512){for(;Ke<16;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if(De!==(le.check&65535)){ve.msg="header crc mismatch",le.mode=Ie;break}De=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),ve.adler=le.check=0,le.mode=L;break;case F:for(;Ke<32;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}ve.adler=le.check=Q(De),De=0,Ke=0,le.mode=Z;case Z:if(le.havedict===0)return ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=De,le.bits=Ke,g;ve.adler=le.check=1,le.mode=L;case L:if(ke===c||ke===f)break e;case de:if(le.last){De>>>=Ke&7,Ke-=Ke&7,le.mode=Te;break}for(;Ke<3;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}switch(le.last=De&1,De>>>=1,Ke-=1,De&3){case 0:le.mode=ae;break;case 1:if(Ut(le),le.mode=Y,ke===f){De>>>=2,Ke-=2;break e}break;case 2:le.mode=se;break;case 3:ve.msg="invalid block type",le.mode=Ie}De>>>=2,Ke-=2;break;case ae:for(De>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if((De&65535)!==(De>>>16^65535)){ve.msg="invalid stored block lengths",le.mode=Ie;break}if(le.length=De&65535,De=0,Ke=0,le.mode=ne,ke===f)break e;case ne:le.mode=ee;case ee:if(q=le.length,q){if(q>et&&(q=et),q>me&&(q=me),q===0)break e;e.arraySet(yt,dt,M,q,Be),et-=q,M+=q,me-=q,Be+=q,le.length-=q;break}le.mode=L;break;case se:for(;Ke<14;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if(le.nlen=(De&31)+257,De>>>=5,Ke-=5,le.ndist=(De&31)+1,De>>>=5,Ke-=5,le.ncode=(De&15)+4,De>>>=4,Ke-=4,le.nlen>286||le.ndist>30){ve.msg="too many length or distance symbols",le.mode=Ie;break}le.have=0,le.mode=W;case W:for(;le.have<le.ncode;){for(;Ke<3;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}le.lens[hr[le.have++]]=De&7,De>>>=3,Ke-=3}for(;le.have<19;)le.lens[hr[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,zn={bits:le.lenbits},Xt=a(i,le.lens,0,19,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Xt){ve.msg="invalid code lengths set",le.mode=Ie;break}le.have=0,le.mode=J;case J:for(;le.have<le.nlen+le.ndist;){for(;pe=le.lencode[De&(1<<le.lenbits)-1],fe=pe>>>24,Fe=pe>>>16&255,st=pe&65535,!(fe<=Ke);){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if(st<16)De>>>=fe,Ke-=fe,le.lens[le.have++]=st;else{if(st===16){for(fr=fe+2;Ke<fr;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if(De>>>=fe,Ke-=fe,le.have===0){ve.msg="invalid bit length repeat",le.mode=Ie;break}Gt=le.lens[le.have-1],q=3+(De&3),De>>>=2,Ke-=2}else if(st===17){for(fr=fe+3;Ke<fr;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}De>>>=fe,Ke-=fe,Gt=0,q=3+(De&7),De>>>=3,Ke-=3}else{for(fr=fe+7;Ke<fr;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}De>>>=fe,Ke-=fe,Gt=0,q=11+(De&127),De>>>=7,Ke-=7}if(le.have+q>le.nlen+le.ndist){ve.msg="invalid bit length repeat",le.mode=Ie;break}for(;q--;)le.lens[le.have++]=Gt}}if(le.mode===Ie)break;if(le.lens[256]===0){ve.msg="invalid code -- missing end-of-block",le.mode=Ie;break}if(le.lenbits=9,zn={bits:le.lenbits},Xt=a(o,le.lens,0,le.nlen,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Xt){ve.msg="invalid literal/lengths set",le.mode=Ie;break}if(le.distbits=6,le.distcode=le.distdyn,zn={bits:le.distbits},Xt=a(s,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,zn),le.distbits=zn.bits,Xt){ve.msg="invalid distances set",le.mode=Ie;break}if(le.mode=Y,ke===f)break e;case Y:le.mode=re;case re:if(et>=6&&me>=258){ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=De,le.bits=Ke,r(ve,ye),Be=ve.next_out,yt=ve.output,me=ve.avail_out,M=ve.next_in,dt=ve.input,et=ve.avail_in,De=le.hold,Ke=le.bits,le.mode===L&&(le.back=-1);break}for(le.back=0;pe=le.lencode[De&(1<<le.lenbits)-1],fe=pe>>>24,Fe=pe>>>16&255,st=pe&65535,!(fe<=Ke);){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if(Fe&&(Fe&240)===0){for(Dt=fe,un=Fe,zt=st;pe=le.lencode[zt+((De&(1<<Dt+un)-1)>>Dt)],fe=pe>>>24,Fe=pe>>>16&255,st=pe&65535,!(Dt+fe<=Ke);){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}De>>>=Dt,Ke-=Dt,le.back+=Dt}if(De>>>=fe,Ke-=fe,le.back+=fe,le.length=st,Fe===0){le.mode=Ae;break}if(Fe&32){le.back=-1,le.mode=L;break}if(Fe&64){ve.msg="invalid literal/length code",le.mode=Ie;break}le.extra=Fe&15,le.mode=be;case be:if(le.extra){for(fr=le.extra;Ke<fr;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}le.length+=De&(1<<le.extra)-1,De>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=we;case we:for(;pe=le.distcode[De&(1<<le.distbits)-1],fe=pe>>>24,Fe=pe>>>16&255,st=pe&65535,!(fe<=Ke);){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if((Fe&240)===0){for(Dt=fe,un=Fe,zt=st;pe=le.distcode[zt+((De&(1<<Dt+un)-1)>>Dt)],fe=pe>>>24,Fe=pe>>>16&255,st=pe&65535,!(Dt+fe<=Ke);){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}De>>>=Dt,Ke-=Dt,le.back+=Dt}if(De>>>=fe,Ke-=fe,le.back+=fe,Fe&64){ve.msg="invalid distance code",le.mode=Ie;break}le.offset=st,le.extra=Fe&15,le.mode=Me;case Me:if(le.extra){for(fr=le.extra;Ke<fr;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}le.offset+=De&(1<<le.extra)-1,De>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){ve.msg="invalid distance too far back",le.mode=Ie;break}le.mode=Pe;case Pe:if(me===0)break e;if(q=ye-me,le.offset>q){if(q=le.offset-q,q>le.whave&&le.sane){ve.msg="invalid distance too far back",le.mode=Ie;break}q>le.wnext?(q-=le.wnext,B=le.wsize-q):B=le.wnext-q,q>le.length&&(q=le.length),G=le.window}else G=yt,B=Be-le.offset,q=le.length;q>me&&(q=me),me-=q,le.length-=q;do yt[Be++]=G[B++];while(--q);le.length===0&&(le.mode=re);break;case Ae:if(me===0)break e;yt[Be++]=le.length,me--,le.mode=re;break;case Te:if(le.wrap){for(;Ke<32;){if(et===0)break e;et--,De|=dt[M++]<<Ke,Ke+=8}if(ye-=me,ve.total_out+=ye,le.total+=ye,ye&&(ve.adler=le.check=le.flags?n(le.check,yt,ye,Be-ye):t(le.check,yt,ye,Be-ye)),ye=me,(le.flags?De:Q(De))!==le.check){ve.msg="incorrect data check",le.mode=Ie;break}De=0,Ke=0}le.mode=qe;case qe:if(le.wrap&&le.flags){for(;Ke<32;){if(et===0)break e;et--,De+=dt[M++]<<Ke,Ke+=8}if(De!==(le.total&4294967295)){ve.msg="incorrect length check",le.mode=Ie;break}De=0,Ke=0}le.mode=it;case it:Xt=p;break e;case Ie:Xt=b;break e;case Re:return _;case U:default:return v}return ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=De,le.bits=Ke,(le.wsize||ye!==ve.avail_out&&le.mode<Ie&&(le.mode<Te||ke!==u))&&ge(ve,ve.output,ve.next_out,ye-ve.avail_out),Ct-=ve.avail_in,ye-=ve.avail_out,ve.total_in+=Ct,ve.total_out+=ye,le.total+=ye,le.wrap&&ye&&(ve.adler=le.check=le.flags?n(le.check,yt,ye,ve.next_out-ye):t(le.check,yt,ye,ve.next_out-ye)),ve.data_type=le.bits+(le.last?64:0)+(le.mode===L?128:0)+(le.mode===Y||le.mode===ne?256:0),(Ct===0&&ye===0||ke===u)&&Xt===h&&(Xt=x),Xt}function V(ve){if(!ve||!ve.state)return v;var ke=ve.state;return ke.window&&(ke.window=null),ve.state=null,h}function he(ve,ke){var le;return!ve||!ve.state||(le=ve.state,(le.wrap&2)===0)?v:(le.head=ke,ke.done=!1,h)}function Oe(ve,ke){var le=ke.length,dt,yt,M;return!ve||!ve.state||(dt=ve.state,dt.wrap!==0&&dt.mode!==Z)?v:dt.mode===Z&&(yt=1,yt=t(yt,ke,le,0),yt!==dt.check)?b:(M=ge(ve,ke,le,le),M?(dt.mode=Re,_):(dt.havedict=1,h))}return fo.inflateReset=Se,fo.inflateReset2=Ve,fo.inflateResetKeep=Le,fo.inflateInit=ht,fo.inflateInit2=xt,fo.inflate=I,fo.inflateEnd=V,fo.inflateGetHeader=he,fo.inflateSetDictionary=Oe,fo.inflateInfo="pako inflate (from Nodeca project)",fo}var ZS,P4;function L5(){return P4||(P4=1,ZS={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),ZS}var YS,F4;function lae(){if(F4)return YS;F4=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return YS=e,YS}var L4;function uae(){if(L4)return Af;L4=1;var e=sae(),t=gc(),n=P5(),r=L5(),a=$k(),i=F5(),o=lae(),s=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(h&&h.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15)===0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,p.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=n.string2buf(p.dictionary):s.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(g=e.inflateSetDictionary(this.strm,p.dictionary),g!==r.Z_OK)))throw new Error(a[g])}u.prototype.push=function(h,p){var g=this.strm,v=this.options.chunkSize,b=this.options.dictionary,_,x,S,E,C,k=!1;if(this.ended)return!1;x=p===~~p?p:p===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&b&&(_=e.inflateSetDictionary(this.strm,b)),_===r.Z_BUF_ERROR&&k===!0&&(_=r.Z_OK,k=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,C=n.buf2string(g.output,S),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,p){var g=new u(p);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function f(h,p){return p=p||{},p.raw=!0,c(h,p)}return Af.Inflate=u,Af.inflate=c,Af.inflateRaw=f,Af.ungzip=c,Af}var XS,$4;function cae(){if($4)return XS;$4=1;var e=gc().assign,t=aae(),n=uae(),r=L5(),a={};return e(a,t,n,r),XS=a,XS}var dae=cae();const Bk=ni(dae);var JS,B4;function fae(){if(B4)return JS;B4=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,u)=>{s?o(s):i(u)}):r.push(i),t.apply(this,r)})};return JS=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=u=>typeof u=="string"?o===u:u.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},JS}var hae=fae();const QS=ni(hae);var e2,z4;function pae(){if(z4)return e2;z4=1;var e={};function t(ne){return Array.isArray(ne)?ne:[ne]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,u=/^\\#/,c=/\r?\n/g,f=/^\.*\/|^\.+$/,h="/";let p="node-ignore";typeof Symbol<"u"&&(p=Symbol.for("node-ignore"));const g=p,v=(ne,ee,se)=>Object.defineProperty(ne,ee,{value:se}),b=/([0-z])-([0-z])/g,_=()=>!1,x=ne=>ne.replace(b,(ee,se,W)=>se.charCodeAt(0)<=W.charCodeAt(0)?ee:n),S=ne=>{const{length:ee}=ne;return ne.slice(0,ee-ee%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(ne,ee,se)=>ee+(se.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(ne,ee)=>{const{length:se}=ee;return ee.slice(0,se-se%2)+r}],[/[\\$.|*+(){^]/g,ne=>`\\${ne}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(ne,ee,se)=>ee+6<se.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(ne,ee,se)=>{const W=se.replace(/\\\*/g,"[^\\/]*");return ee+W}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(ne,ee,se,W,J)=>ee===a?`\\[${se}${S(W)}${J}`:J==="]"&&W.length%2===0?`[${x(se)}${W}]`:"[]"],[/(?:[^*])$/,ne=>/\/$/.test(ne)?`${ne}$`:`${ne}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(ne,ee)=>`${ee?`${ee}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(ne,ee)=>{let se=C[ne];return se||(se=E.reduce((W,[J,Y])=>W.replace(J,Y.bind(ne)),ne),C[ne]=se),ee?new RegExp(se,"i"):new RegExp(se)},D=ne=>typeof ne=="string",O=ne=>ne&&D(ne)&&!i.test(ne)&&!o.test(ne)&&ne.indexOf("#")!==0,N=ne=>ne.split(c);class z{constructor(ee,se,W,J){this.origin=ee,this.pattern=se,this.negative=W,this.regex=J}}const H=(ne,ee)=>{const se=ne;let W=!1;ne.indexOf("!")===0&&(W=!0,ne=ne.substr(1)),ne=ne.replace(s,"!").replace(u,"#");const J=k(ne,ee);return new z(se,ne,W,J)},X=(ne,ee)=>{throw new ee(ne)},F=(ne,ee,se)=>D(ne)?ne?F.isNotRelative(ne)?se(`path should be a \`path.relative()\`d string, but got "${ee}"`,RangeError):!0:se("path must not be empty",TypeError):se(`path must be a string, but got \`${ee}\``,TypeError),Z=ne=>f.test(ne);F.isNotRelative=Z,F.convert=ne=>ne;class L{constructor({ignorecase:ee=!0,ignoreCase:se=ee,allowRelativePaths:W=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=se,this._allowRelativePaths=W,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(ee){if(ee&&ee[g]){this._rules=this._rules.concat(ee._rules),this._added=!0;return}if(O(ee)){const se=H(ee,this._ignoreCase);this._added=!0,this._rules.push(se)}}add(ee){return this._added=!1,t(D(ee)?N(ee):ee).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(ee){return this.add(ee)}_testOne(ee,se){let W=!1,J=!1;return this._rules.forEach(Y=>{const{negative:re}=Y;if(J===re&&W!==J||re&&!W&&!J&&!se)return;Y.regex.test(ee)&&(W=!re,J=re)}),{ignored:W,unignored:J}}_test(ee,se,W,J){const Y=ee&&F.convert(ee);return F(Y,ee,this._allowRelativePaths?_:X),this._t(Y,se,W,J)}_t(ee,se,W,J){if(ee in se)return se[ee];if(J||(J=ee.split(h)),J.pop(),!J.length)return se[ee]=this._testOne(ee,W);const Y=this._t(J.join(h)+h,se,W,J);return se[ee]=Y.ignored?Y:this._testOne(ee,W)}ignores(ee){return this._test(ee,this._ignoreCache,!1).ignored}createFilter(){return ee=>!this.ignores(ee)}filter(ee){return t(ee).filter(this.createFilter())}test(ee){return this._test(ee,this._testCache,!0)}}const de=ne=>new L(ne),ae=ne=>F(ne&&F.convert(ne),ne,_);if(de.isPathValid=ae,de.default=de,e2=de,typeof Zr<"u"&&(e&&e.IGNORE_TEST_WIN32||Zr.platform==="win32")){const ne=se=>/^\\\\\?\\/.test(se)||/["<>|\u0000-\u001F]+/u.test(se)?se:se.replace(/\\/g,"/");F.convert=ne;const ee=/^[a-z]:\//i;F.isNotRelative=se=>ee.test(se)||Z(se)}return e2}var mae=pae();const gae=ni(mae);var t2,U4;function yae(){if(U4)return t2;U4=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return t2=n,t2}var bae=yae();const Ds=ni(bae);var n2,q4;function vae(){return q4||(q4=1,n2=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,u=a+1,c=[],f=[],h=[],p="",g=-1,v=0,b=1,_,x,S=function(){a>=i&&(_=n,x=a,n=r,r=_,a=i,i=x,o=!0,u=a+1)},E=function(O,N,z){return{x:O,y:N,k:z}},C=function(O,N){return{elem:O,t:N}},k=function(O,N,z){var H,X,F;for(N>z?H=c[O-1+u]:H=c[O+1+u],F=Math.max(N,z),X=F-O;X<a&&F<i&&n[X]===r[F];)++X,++F;return c[O+u]=f.length,f[f.length]=new E(X,F,H),F},D=function(O){var N,z,H;for(N=z=0,H=O.length-1;H>=0;--H)for(;N<O[H].x||z<O[H].y;)O[H].y-O[H].x>z-N?(o?h[h.length]=new C(r[z],g):h[h.length]=new C(r[z],b),++z):O[H].y-O[H].x<z-N?(o?h[h.length]=new C(n[N],b):h[h.length]=new C(n[N],g),++N):(h[h.length]=new C(n[N],v),p+=n[N],++N,++z)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return p},getses:function(){return h},compose:function(){var O,N,z,H,X,F,Z,L;for(O=i-a,N=a+i+3,z={},Z=0;Z<N;++Z)z[Z]=-1,c[Z]=-1;H=-1;do{for(++H,L=-H;L<=O-1;++L)z[L+u]=k(L,z[L-1+u]+1,z[L+1+u]);for(L=O+H;L>=O+1;--L)z[L+u]=k(L,z[L-1+u]+1,z[L+1+u]);z[O+u]=k(O,z[O-1+u]+1,z[O+1+u])}while(z[O+u]!==i);for(s=O+2*H,X=c[O+u],F=[];X!==-1;)F[F.length]=new E(f[X].x,f[X].y,null),X=f[X].k;D(F)}}}),n2}var r2,H4;function wae(){if(H4)return r2;H4=1;var e=vae();function t(i,o){var s=new e(i,o);s.compose();for(var u=s.getses(),c,f,h=i.length-1,p=o.length-1,g=u.length-1;g>=0;--g)u[g].t===s.SES_COMMON?(f?(f.chain={file1index:h,file2index:p,chain:null},f=f.chain):(c={file1index:h,file2index:p,chain:null},f=c),h--,p--):u[g].t===s.SES_DELETE?h--:u[g].t===s.SES_ADD&&p--;var v={file1index:-1,file2index:-1,chain:null};return f?(f.chain=v,c):v}function n(i,o){for(var s=[],u=i.length,c=o.length,f=t(i,o);f!==null;f=f.chain){var h=u-f.file1index-1,p=c-f.file2index-1;u=f.file1index,c=f.file2index,(h||p)&&s.push({file1:[u+1,h],file2:[c+1,p]})}return s.reverse(),s}function r(i,o,s){var u,c=n(o,i),f=n(o,s),h=[];function p(ee,se){h.push([ee.file1[0],se,ee.file1[1],ee.file2[0],ee.file2[1]])}for(u=0;u<c.length;u++)p(c[u],0);for(u=0;u<f.length;u++)p(f[u],2);h.sort(function(ee,se){return ee[0]-se[0]});var g=[],v=0;function b(ee){ee>v&&(g.push([1,v,ee-v]),v=ee)}for(var _=0;_<h.length;_++){for(var x=_,S=h[_],E=S[0],C=E+S[2];_<h.length-1;){var k=h[_+1],D=k[0];if(D>C)break;C=Math.max(C,D+k[2]),_++}if(b(E),x==_)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var O={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(u=x;u<=_;u++){S=h[u];var N=S[1],z=O[N],H=S[0],X=H+S[2],F=S[3],Z=F+S[4];z[0]=Math.min(F,z[0]),z[1]=Math.max(Z,z[1]),z[2]=Math.min(H,z[2]),z[3]=Math.max(X,z[3])}var L=O[0][0]+(E-O[0][2]),de=O[0][1]+(C-O[0][3]),ae=O[2][0]+(E-O[2][2]),ne=O[2][1]+(C-O[2][3]);g.push([-1,L,de-L,E,C-E,ae,ne-ae])}v=C}return b(o.length),g}function a(i,o,s){var u=[],c=[i,o,s],f=r(i,o,s),h=[];function p(){h.length&&u.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],k=0;k<S[2];k++)if(i[k+E]!=s[k+C])return!0;return!1}for(var b=0;b<f.length;b++){var _=f[b],x=_[0];x==-1?v(_)?(p(),u.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(c[0].slice(_[1],_[1]+_[2])):g(c[x].slice(_[1],_[1]+_[2]))}return p(),u}return r2=a,r2}var _ae=wae();const xae=ni(_ae);class Xn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Xn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class J0 extends Xn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=J0.code,this.data={filepaths:t}}}J0.code="UnmergedPathsError";class Nn extends Xn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=Nn.code,this.data={message:t}}}Nn.code="InternalError";class Dh extends Xn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Dh.code,this.data={filepath:t}}}Dh.code="UnsafeFilepathError";class Ts{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function Uw(e,t){return-(e<t)||+(e>t)}function $5(e,t){return Uw(e.path,t.path)}function B5(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const xs=2**32;function V4(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function lh(e){const[t,n]=V4(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=V4(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%xs,ctimeNanoseconds:n%xs,mtimeSeconds:r%xs,mtimeNanoseconds:a%xs,dev:e.dev%xs,ino:e.ino%xs,mode:B5(e.mode%xs),uid:e.uid%xs,gid:e.gid%xs,size:e.size>-1?e.size%xs:0}}function Sae(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let a2=null;async function Ll(e){return a2===null&&(a2=await Cae()),a2?z5(e):Eae(e)}function Eae(e){return new D5().update(e).digest("hex")}async function z5(e){const t=await crypto.subtle.digest("SHA-1",e);return Sae(t)}async function Cae(){try{if(await z5(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function kae(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function Aae(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Wt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Qc{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Wt.isBuffer(t))return Qc.fromBuffer(t);if(t===null)return new Qc(null);throw new Nn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new Nn("Index file is empty (.git/index)");const n=new Qc,r=new Ts(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new Nn(`Invalid dircache magic file number: ${a}`);const i=await Ll(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new Nn(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new Nn(`Unsupported dircache version: ${s}`);const u=r.readUInt32BE();let c=0;for(;!r.eof()&&c<u;){const f={};f.ctimeSeconds=r.readUInt32BE(),f.ctimeNanoseconds=r.readUInt32BE(),f.mtimeSeconds=r.readUInt32BE(),f.mtimeNanoseconds=r.readUInt32BE(),f.dev=r.readUInt32BE(),f.ino=r.readUInt32BE(),f.mode=r.readUInt32BE(),f.uid=r.readUInt32BE(),f.gid=r.readUInt32BE(),f.size=r.readUInt32BE(),f.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();f.flags=kae(h);const p=t.indexOf(0,r.tell()+1)-r.tell();if(p<1)throw new Nn(`Got a path length of: ${p}`);if(f.path=r.toString("utf8",p),f.path.includes("..\\")||f.path.includes("../"))throw new Dh(f.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new Nn(`Expected 1-8 null characters but got '${v}' after ${f.path}`);if(r.eof())throw new Nn("Unexpected end of file")}f.stages=[],n._addEntry(f),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort($5)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=lh(n);const i=Wt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Wt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Wt.alloc(r),i=new Ts(a),o=lh(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(Aae(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Wt.alloc(12),n=new Ts(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(Qc._entryToBuffer(s)),s.stages.length>1)for(const u of s.stages)u&&u!==s&&r.push(Qc._entryToBuffer(u));r=await Promise.all(r);const a=Wt.concat(r),i=Wt.concat([t,a]),o=await Ll(i);return Wt.concat([i,Wt.from(o,"hex")])}}function xv(e,t,n=!0,r=!0){const a=lh(e),i=lh(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let i2=null;const o2=Symbol("IndexCache");function Tae(){return{map:new Map,stats:new Map}}async function Rae(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Qc.from(a);n.map.set(t,i),n.stats.set(t,r)}async function Nae(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:xv(r,a)}class Na{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[o2]||(r[o2]=Tae());const o=`${n}/index`;i2===null&&(i2=new i0({maxPending:1/0}));let s,u=[];return await i2.acquire(o,async()=>{const c=r[o2];await Nae(t,o,c)&&await Rae(t,o,c);const f=c.map.get(o);if(u=f.unmergedPaths,u.length&&!a)throw new J0(u);if(s=await i(f),f._dirty){const h=await f.toObject();await t.write(o,h),c.stats.set(o,await t.lstat(o)),f._dirty=!1}}),s}}function Sv(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function uh(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function U5(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Sv(a),metadata:{},children:[]};t.set(a,i),i.parent=n(uh(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:Sv(a),metadata:i,parent:n(uh(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function Iae(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Nn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class Oae{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Na.acquire({fs:t,gitdir:n,cache:r},async function(i){return U5(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(Uw),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:lh(r.metadata);t._type=r.type==="tree"?"tree":Iae(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const qw=Symbol("GitWalkSymbol");function jh(){const e=Object.create(null);return Object.defineProperty(e,qw,{value:function({fs:t,gitdir:n,cache:r}){return new Oae({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class vr extends Xn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=vr.code,this.data={what:t}}}vr.code="NotFoundError";class gi extends Xn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=gi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}gi.code="ObjectTypeError";class nc extends Xn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=nc.code,this.data={value:t}}}nc.code="InvalidOidError";class Q0 extends Xn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=Q0.code,this.data={remote:t}}}Q0.code="NoRefspecError";class Ev{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Ev(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Cv{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",u=a==="*";if(u!==(o==="*"))throw new Nn("Invalid refspec");return new Cv({remotePath:r,localPath:i,force:s,matchPrefix:u})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class zk{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Cv.from(r));return new zk(n)}add(t){const n=Cv.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function Dae(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const jae=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},um=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},G4={core:{filemode:um,bare:um,logallrefupdates:um,symlinks:um,ignorecase:um,bigFileThreshold:jae}},Mae=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,Pae=/^[A-Za-z0-9-.]+$/,Fae=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Lae=/^[A-Za-z][A-Za-z-]*$/,$ae=/^(.*?)( *[#;].*)$/,Bae=e=>{const t=Mae.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},zae=e=>{const t=Fae.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=Uae(r),i=qae(a);return[n,i]}return null},Uae=e=>{const t=$ae.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return W4(n)&&W4(r)?`${n}${r}`:n},W4=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,qae=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),K4=e=>e!=null?e.toLowerCase():null,PE=(e,t,n)=>[K4(e),t,K4(n)].filter(r=>r!=null).join("."),Z4=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:PE(n,a,r),sectionPath:PE(n,a,null),isSection:!!n}},Hae=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class Uk{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),u=Bae(s),c=u!=null;if(c)[n,r]=u;else{const h=zae(s);h!=null&&([i,o]=h)}const f=PE(n,r,i);return{line:a,isSection:c,section:n,subsection:r,name:i,value:o,path:f}}):[]}static from(t){return new Uk(t)}async get(t,n=!1){const r=Z4(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const u=G4[i]&&G4[i][o];return u?u(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:u,isSection:c}=Z4(t),f=Hae(this.parsedConfig,h=>h.path===s);if(n==null)f!==-1&&this.parsedConfig.splice(f,1);else if(f!==-1){const h=this.parsedConfig[f],p=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(f+1,0,p):this.parsedConfig[f]=p}else{const h=this.parsedConfig.findIndex(g=>g.path===u),p={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(Pae.test(a)&&Lae.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,p);else{const g={isSection:c,section:a,subsection:i,modified:!0,path:u};this.parsedConfig.push(g,p)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class da{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return Uk.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const lb=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],Vae=["config","description","index","shallow","commondir"];let s2;async function Nu(e,t){return s2===void 0&&(s2=new i0),s2.acquire(e,t)}class Ot{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:u=!1,pruneTags:c=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new nc(_);const f=await da.get({fs:t,gitdir:n});if(!s){if(s=await f.getall(`remote.${r}.fetch`),s.length===0)throw new Q0(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=zk.from(s),p=new Map;if(c){const _=await Ot.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ot.deleteRefs({fs:t,gitdir:n,refs:_.map(x=>`refs/tags/${x}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await Ot.exists({fs:t,gitdir:n,ref:_})){const x=a.get(_);p.set(_,x)}}const g=h.translate([...a.keys()]);for(const[_,x]of g){const S=a.get(_);p.set(x,S)}const v=h.translate([...i.keys()]);for(const[_,x]of v){const S=i.get(_),E=h.translateOne(S);E&&p.set(x,`ref: ${E}`)}const b=[];if(u){for(const _ of h.localNamespaces()){const x=(await Ot.listRefs({fs:t,gitdir:n,filepath:_})).map(S=>`${_}/${S}`);for(const S of x)p.has(S)||b.push(S)}b.length>0&&await Ot.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[_,x]of p)await Nu(_,async()=>t.write(At.join(n,_),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new nc(a);await Nu(r,async()=>t.write(At.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Nu(r,async()=>t.write(At.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ot.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(At.join(n,s))));let a=await Nu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Ev.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await Nu("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ot.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ot.packedRefs({fs:t,gitdir:n}),o=lb(r).filter(s=>!Vae.includes(s));for(const s of o){const u=await Nu(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(u)return Ot.resolve({fs:t,gitdir:n,ref:u.trim(),depth:a})}throw new vr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ot.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ot.packedRefs({fs:t,gitdir:n}),i=lb(r);for(const o of i)if(await Nu(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new vr(r)}static async expandAgainstMap({ref:t,map:n}){const r=lb(t);for(const a of r)if(await n.has(a))return a;throw new vr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ot.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=lb(t);for(const o of i){const s=a.get(o);if(s)return Ot.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new vr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Nu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Ev.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ot.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(Dae),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ot.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ot.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ot.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function Gae(e,t){return Uw(Y4(e),Y4(t))}function Y4(e){return e.mode==="040000"?e.path+"/":e.path}function q5(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Nn(`Unexpected GitTree entry mode: ${e}`)}function Wae(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new Nn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new Nn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=q5(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new Dh(s);const u=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:u,type:o})}return t}function Kae(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new Nn(`Could not understand file mode: ${e}`)}function Zae(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Kae(e.mode),e.type||(e.type=q5(e.mode)),e}class Ri{constructor(t){if(Wt.isBuffer(t))this._entries=Wae(t);else if(Array.isArray(t))this._entries=t.map(Zae);else throw new Nn("invalid type passed to GitTree constructor");this._entries.sort($5)}static from(t){return new Ri(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(Gae),Wt.concat(t.map(n=>{const r=Wt.from(n.mode.replace(/^0/,"")),a=Wt.from(" "),i=Wt.from(n.path,"utf8"),o=Wt.from([0]),s=Wt.from(n.oid,"hex");return Wt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Mh{static wrap({type:t,object:n}){return Wt.concat([Wt.from(`${t} ${n.byteLength.toString()}\0`),Wt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new Nn(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Wt.from(t.slice(r+1))}}}async function H5({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function Yae(e,t){const n=new Ts(e),r=X4(n);if(r!==t.byteLength)throw new Nn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=X4(n);let i;const o=Q4(n,t);if(o.byteLength===a)i=o;else{i=Wt.alloc(a);const s=new Ts(i);for(s.copy(o);!n.eof();)s.copy(Q4(n,t));const u=s.tell();if(a!==u)throw new Nn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${u} bytes`)}return i}function X4(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function J4(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function Q4(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=J4(e,n&a,4);let s=J4(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function Xae(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function V5(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Xae(e)}class G5{constructor(t){if(typeof Wt>"u")throw new Error("Missing Buffer dependency");this.stream=V5(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Wt.alloc(0):(n&&(n=Wt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>Jae(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Wt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function Jae(e){return e.reduce((t,n)=>t+n.length,0)}async function Qae(e,t){const n=new G5(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Nn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new Nn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:u,ofs:c,reference:f}=await eie(n),h=new Bk.Inflate;for(;!h.result;){const p=await n.chunk();if(!p)break;if(h.push(p,!1),h.err)throw new Nn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==u)throw new Nn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(p.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:f,ofs:c})}}}}async function eie(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Wt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function W5(e){return Bk.inflate(e)}function tie(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function nie(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class ch{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new Ts(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Nn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new Nn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let f=0;f<o;f++){const h=r.slice(20).toString("hex");s[f]=h}r.seek(r.tell()+4*o);const u=new Map;for(let f=0;f<o;f++)u.set(s[f],r.readUInt32BE());const c=r.slice(20).toString("hex");return new ch({hashes:s,crcs:{},offsets:u,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],u={},c=new Map;let f=null,h=null;await Qae([t],async({data:_,type:x,reference:S,offset:E,num:C})=>{f===null&&(f=C);const k=Math.floor((f-C)*100/f);k!==h&&r&&await r({phase:"Receiving objects",loaded:f-C,total:f}),h=k,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const p=Object.keys(i).map(Number);for(const[_,x]of p.entries()){const S=_+1===p.length?t.byteLength-20:p[_+1],E=i[x],C=tae.buf(t.slice(x,S))>>>0;E.end=S,E.crc=C}const g=new ch({pack:Promise.resolve(t),packfileSha:o,crcs:u,hashes:s,offsets:c,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const x=Math.floor(v*100/f);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:f}),v++,h=x;const S=i[_];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:_});b[g.readDepth]+=1;const k=await Ll(Mh.wrap({type:E,object:C}));S.oid=k,s.push(k),c.set(k,_),u[k]=S.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(c,f)=>{t.push(Wt.from(c,f))};n("ff744f63","hex"),n("00000002","hex");const r=new Ts(Wt.alloc(256*4));for(let c=0;c<256;c++){let f=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&f++;r.writeUInt32BE(f)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const a=new Ts(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)a.writeUInt32BE(this.crcs[c]);t.push(a.buffer);const i=new Ts(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const o=Wt.concat(t),s=await Ll(o),u=Wt.alloc(20);return u.write(s,"hex"),Wt.concat([o,u])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new Nn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Nn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new Ts(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new Nn("Unrecognized type: 0b"+o.toString(2));const u=i&15;let c=u;i&128&&(c=nie(a,u));let h=null,p=null;if(s==="ofs_delta"){const v=tie(a),b=t-v;({object:h,type:s}=await this.readSlice({start:b}))}if(s==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:v}))}const g=r.slice(a.tell());if(p=Wt.from(await W5(g)),p.byteLength!==c)throw new Nn(`Packfile told us object would have length ${c} but it had length ${p.byteLength}`);return h&&(p=Wt.from(Yae(p,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:p}),{type:s,format:"content",object:p}}}const ub=Symbol("PackfileCache");async function rie({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return ch.fromIdx({idx:i,getExternalRefDelta:n})}function qk({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[ub]||(t[ub]=new Map);let o=t[ub].get(n);return o||(o=rie({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[ub].set(n,o)),o}async function aie({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await qk({fs:e,cache:t,filename:u,getExternalRefDelta:i});if(c.error)throw new Nn(c.error);if(c.offsets.has(r)){if(!c.pack){const h=u.replace(/idx$/,"pack");c.pack=e.read(h)}const f=await c.read({oid:r,getExternalRefDelta:i});return f.format="content",f.source=`objects/pack/${s.replace(/idx$/,"pack")}`,f}}return null}async function zr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=f=>zr({fs:e,cache:t,gitdir:n,oid:f});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Wt.from("tree 0\0")}),o||(o=await H5({fs:e,gitdir:n,oid:r})),!o){if(o=await aie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new vr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Wt.from(await W5(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await Ll(o.object);if(s!==r)throw new Nn(`SHA check failed! Expected ${r}, computed ${s}`);const{object:u,type:c}=Mh.unwrap(o.object);if(o.type=c,o.object=u,o.format="content",a==="content")return o;throw new Nn(`invalid requested format "${a}"`)}class ns extends Xn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=ns.code,this.data={noun:t,where:n,canForce:r}}}ns.code="AlreadyExistsError";class eg extends Xn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=eg.code,this.data={nouns:t,short:n,matches:r}}}eg.code="AmbiguousError";class tg extends Xn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=tg.code,this.data={filepaths:t}}}tg.code="CheckoutConflictError";class ng extends Xn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=ng.code,this.data={ref:t,oid:n}}}ng.code="CommitNotFetchedError";class rg extends Xn{constructor(){super("Empty response from git server."),this.code=this.name=rg.code,this.data={}}}rg.code="EmptyServerResponseError";class ag extends Xn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=ag.code,this.data={}}}ag.code="FastForwardError";class ig extends Xn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=ig.code,this.data={prettyDetails:t,result:n}}}ig.code="GitPushError";class dh extends Xn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=dh.code,this.data={statusCode:t,statusMessage:n,response:r}}}dh.code="HttpError";class rc extends Xn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=rc.code,this.data={reason:t}}}rc.code="InvalidFilepathError";class Xo extends Xn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Xo.code,this.data={ref:t,suggestion:n}}}Xo.code="InvalidRefNameError";class og extends Xn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=og.code,this.data={depth:t}}}og.code="MaxDepthError";class Ph extends Xn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Ph.code,this.data={}}}Ph.code="MergeNotSupportedError";class Fh extends Xn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Fh.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}Fh.code="MergeConflictError";class ti extends Xn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=ti.code,this.data={role:t}}}ti.code="MissingNameError";class Ai extends Xn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Ai.code,this.data={parameter:t}}}Ai.code="MissingParameterError";class sg extends Xn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=sg.code,this.data={errors:t},this.errors=t}}sg.code="MultipleGitError";class Nd extends Xn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=Nd.code,this.data={expected:t,actual:n}}}Nd.code="ParseError";class fh extends Xn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=fh.code,this.data={reason:t}}}fh.code="PushRejectedError";class Lu extends Xn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Lu.code,this.data={capability:t,parameter:n}}}Lu.code="RemoteCapabilityError";class lg extends Xn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=lg.code,this.data={preview:t,response:n}}}lg.code="SmartHttpError";class ug extends Xn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=ug.code,this.data={url:t,transport:n,suggestion:r}}}ug.code="UnknownTransportError";class cg extends Xn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=cg.code,this.data={url:t}}}cg.code="UrlParseError";class Lh extends Xn{constructor(){super("The operation was canceled."),this.code=this.name=Lh.code,this.data={}}}Lh.code="UserCanceledError";class dg extends Xn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=dg.code,this.data={filepath:t}}}dg.code="IndexResetError";class fg extends Xn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=fg.code,this.data={ref:t}}}fg.code="NoCommitError";var iie=Object.freeze({__proto__:null,AlreadyExistsError:ns,AmbiguousError:eg,CheckoutConflictError:tg,CommitNotFetchedError:ng,EmptyServerResponseError:rg,FastForwardError:ag,GitPushError:ig,HttpError:dh,InternalError:Nn,InvalidFilepathError:rc,InvalidOidError:nc,InvalidRefNameError:Xo,MaxDepthError:og,MergeNotSupportedError:Ph,MergeConflictError:Fh,MissingNameError:ti,MissingParameterError:Ai,MultipleGitError:sg,NoRefspecError:Q0,NotFoundError:vr,ObjectTypeError:gi,ParseError:Nd,PushRejectedError:fh,RemoteCapabilityError:Lu,SmartHttpError:lg,UnknownTransportError:ug,UnsafeFilepathError:Dh,UrlParseError:cg,UserCanceledError:Lh,UnmergedPathsError:J0,IndexResetError:dg,NoCommitError:fg});function FE({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=oie(r),`${e} <${t}> ${n} ${r}`}function oie(e){const t=sie(lie(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function sie(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function lie(e){return e===0?e:-e}function Sl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function kv(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:uie(a)}}function uie(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),cie(r)}function cie(e){return e===0?e:-e}class di{constructor(t){if(typeof t=="string")this._tag=t;else if(Wt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=di.render(t);else throw new Nn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new di(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${FE(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=kv(r.tagger)),r.committer&&(r.committer=kv(r.committer)),r}withoutSignature(){const t=Sl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Sl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Wt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=Sl(i);const o=a+i;return di.from(o)}}function l2(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function die(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Lr{constructor(t){if(typeof t=="string")this._commit=t;else if(Wt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Lr.render(t);else throw new Nn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Lr.justHeaders(t),a=Lr.justMessage(t),i=Sl(r+`
gpgsig`+l2(n)+`
`+a);return new Lr(i)}static from(t){return new Lr(t)}toObject(){return Wt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Lr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return Sl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Lr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=kv(r.author)),r.committer&&(r.committer=kv(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new Nn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${FE(r)}
`;const a=t.committer||t.author;return n+=`committer ${FE(a)}
`,t.gpgsig&&(n+="gpgsig"+l2(t.gpgsig)),n}static render(t){return Lr.renderHeaders(t)+`
`+Sl(t.message)}render(){return this._commit}withoutSignature(){const t=Sl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Sl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return die(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Lr.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=Sl(o);const u=Lr.justHeaders(t._commit)+`
gpgsig`+l2(o)+`
`+i;return Lr.from(u)}}async function hh({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ri.from([]),oid:r};const{type:a,object:i}=await zr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=di.from(i).parse().object,hh({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Lr.from(i).parse().tree,hh({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new gi(r,a,"tree");return{tree:Ri.from(i),oid:r}}class fie{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await Ot.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof vr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const u=await hh({fs:t,cache:this.cache,gitdir:n,oid:s});return u.type="tree",u.mode="40000",o.set(".",u),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const u=s.oid;if(!u)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:c,object:f}=await zr({fs:r,cache:a,gitdir:i,oid:u});if(c!==s.type)throw new gi(u,c,s.type);const h=Ri.from(f);for(const p of h)o.set(At.join(n,p.path),p);return h.entries().map(p=>At.join(n,p.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=B5(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:u,object:c}=await zr({fs:r,cache:a,gitdir:i,oid:s});u!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function wo({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,qw,{value:function({fs:n,gitdir:r,cache:a}){return new fie({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class hie{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(At.join(a,n));return i===null?null:i.map(o=>At.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=lh(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Na.acquire({fs:r,gitdir:a,cache:i},async function(s){const u=s.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),p=typeof Zr<"u"?Zr.platform!=="win32":!0;if(!u||xv(c,u,h,p)){const g=await t.content();g===void 0?o=void 0:(o=await Ll(Mh.wrap({type:"blob",object:g})),u&&o===u.oid&&(!h||c.mode===u.mode)&&xv(c,u,h,p)&&s.insert({filepath:t._fullpath,stats:c,oid:o}))}else o=u.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await da.get({fs:t,gitdir:n}),this.config)}}function hg(){const e=Object.create(null);return Object.defineProperty(e,qw,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new hie({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function pie(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const K5=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class mie{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*gie(e){const t=new mie;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function ac({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(u,c)=>c,reduce:o=async(u,c)=>{const f=K5(c);return u!==void 0&&f.unshift(u),f},iterate:s=(u,c)=>Promise.all([...c].map(u))}){const u=a.map(g=>g[qw]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(u.length).fill("."),f=pie(0,u.length),h=async g=>{f.map(_=>{const x=g[_];g[_]=x&&new u[_].ConstructEntry(x)});const b=(await Promise.all(f.map(_=>{const x=g[_];return x?u[_].readdir(x):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:gie(b)}},p=async g=>{const{entries:v,children:b}=await h(g),_=v.find(S=>S&&S._fullpath)._fullpath,x=await i(_,v);if(x!==null){let S=await s(p,b);return S=S.filter(E=>E!==void 0),o(x,S)}};return p(c)}async function LE(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=At.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?LE(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function yie(e){return bie(e)&&e6(e.then)&&e6(e.catch)}function bie(e){return e&&typeof e=="object"}function e6(e){return typeof e=="function"}function t6(e){return yie((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const n6=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function r6(e,t){if(t6(t))for(const n of n6)e[`_${n}`]=t[n].bind(t);else for(const n of n6)e[`_${n}`]=QS(t[n].bind(t));t6(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=LE.bind(null,e):t.rm?e._rm=QS(t.rm.bind(t)):t.rmdir.length>2?e._rm=QS(t.rmdir.bind(t)):e._rm=LE.bind(null,e)}class nn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?r6(this,t.promises):r6(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Wt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(uh(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=uh(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(Uw),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Wt.isBuffer(r)?r:Wt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Je(e,t){if(t===void 0)throw new Ai(e)}async function Av(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function vie({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Je("fs",e),Je("dir",t),Je("gitdir",n);const i=new nn(e),o=[wo({ref:r}),hg(),jh()];let s=[];await Na.acquire({fs:i,gitdir:n,cache:a},async function(c){s=c.unmergedPaths});const u=await ac({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(c,[f,h,p]){const g=!await Av(h,p),v=s.includes(c),b=!await Av(p,f);if(g||v)return f?{path:c,mode:await f.mode(),oid:await f.oid(),type:await f.type(),content:await f.content()}:void 0;if(b)return!1;throw new dg(c)}});await Na.acquire({fs:i,gitdir:n,cache:a},async function(c){for(const f of u)if(f!==!1){if(!f){await i.rmdir(`${t}/${f.path}`,{recursive:!0}),c.delete({filepath:f.path});continue}if(f.type==="blob"){const h=new TextDecoder().decode(f.content);await i.write(`${t}/${f.path}`,h,{mode:f.mode}),c.insert({filepath:f.path,oid:f.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class $h{static async isIgnored({fs:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a}){if(Sv(a)===".git")return!0;if(a===".")return!1;let i="";const o=At.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:At.join(n,".gitignore"),filepath:a}],u=a.split("/").filter(Boolean);for(let f=1;f<u.length;f++){const h=u.slice(0,f).join("/"),p=u.slice(f).join("/");s.push({gitignore:At.join(n,h,".gitignore"),filepath:p})}let c=!1;for(const f of s){let h;try{h=await t.read(f.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const p=gae().add(i);p.add(h);const g=uh(f.filepath);if(g!=="."&&p.ignores(g))return!0;c?c=!p.test(f.filepath).unignored:c=p.test(f.filepath).ignored}return c}}async function wie({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let u2=null;async function Z5(e){return u2===null&&(u2=xie()),u2?_ie(e):Bk.deflate(e)}async function _ie(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function xie(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Ii({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Mh.wrap({type:n,object:r})),i=await Ll(r),r=Wt.from(await Z5(r))),o||await wie({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function Y5(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function Sie({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r);const s=new nn(e);await Na.acquire({fs:s,gitdir:n,cache:a},async u=>{const f=await(await da.get({fs:s,gitdir:n})).get("core.autocrlf");return $E({dir:t,gitdir:n,fs:s,filepath:r,index:u,force:i,parallel:o,autocrlf:f})})}catch(s){throw s.caller="git.add",s}}async function $E({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const u=r.map(async p=>{if(!i&&await $h.isIgnored({fs:n,dir:e,gitdir:t,filepath:p}))return;const g=await n.lstat(At.join(e,p));if(!g)throw new vr(p);if(g.isDirectory()){const v=await n.readdir(At.join(e,p));if(o){const b=v.map(_=>$E({dir:e,gitdir:t,fs:n,filepath:[At.join(p,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(b)}else for(const b of v)await $E({dir:e,gitdir:t,fs:n,filepath:[At.join(p,b)],index:a,force:i,parallel:o,autocrlf:s})}else{const v=g.isSymbolicLink()?await n.readlink(At.join(e,p)).then(Y5):await n.read(At.join(e,p),{autocrlf:s});if(v===null)throw new vr(p);const b=await Ii({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:p,stats:g,oid:b})}}),c=await Promise.allSettled(u),f=c.filter(p=>p.status==="rejected").map(p=>p.reason);if(f.length>1)throw new sg(f);if(f.length===1)throw f[0];return c.filter(p=>p.status==="fulfilled"&&p.value).map(p=>p.value)}async function o0({fs:e,gitdir:t,path:n}){return(await da.get({fs:e,gitdir:t})).get(n)}function X5(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function ic({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await o0({fs:e,gitdir:t,path:"user.name"}),email:await o0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=X5({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function ph({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await o0({fs:e,gitdir:t,path:"user.name"}),email:await o0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=X5({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function J5({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await zr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=di.from(i).parse().object,J5({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new gi(r,a,"commit");return{commit:Lr.from(i),oid:r}}async function mh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await J5({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function Hw({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:p,tree:g}){let v=!1;h||(h=await Ot.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,_;try{b=await Ot.resolve({fs:e,gitdir:r,ref:h}),_=await mh({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(u&&v)throw new fg(h);const x=u?await ic({fs:e,gitdir:r,author:i,commit:_.commit}):await ic({fs:e,gitdir:r,author:i});if(!x)throw new ti("author");const S=u?await ph({fs:e,gitdir:r,author:x,committer:o,commit:_.commit}):await ph({fs:e,gitdir:r,author:x,committer:o});if(!S)throw new ti("committer");return Na.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=U5(E.entries).get(".");if(g||(g=await Q5({fs:e,gitdir:r,inode:k,dryRun:c})),p?p=await Promise.all(p.map(N=>Ot.resolve({fs:e,gitdir:r,ref:N}))):u?p=_.commit.parent:p=b?[b]:[],!a)if(u)a=_.commit.message;else throw new Ai("message");let D=Lr.from({tree:g,parent:p,author:x,committer:S,message:a});s&&(D=await Lr.sign(D,n,s));const O=await Ii({fs:e,gitdir:r,type:"commit",object:D.toObject(),dryRun:c});return!f&&!c&&await Ot.writeRef({fs:e,gitdir:r,ref:h,value:O}),O})}async function Q5({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const u of a)u.type==="tree"&&(u.metadata.mode="040000",u.metadata.oid=await Q5({fs:e,gitdir:t,inode:u,dryRun:r}));const i=a.map(u=>({mode:u.metadata.mode,path:u.basename,oid:u.metadata.oid,type:u.type})),o=Ri.from(i);return await Ii({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function pg({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new rc("leading-slash");if(a.endsWith("/"))throw new rc("trailing-slash");const i=r,o=await hh({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const u=a.split("/");r=await eP({fs:e,cache:t,gitdir:n,tree:s,pathArray:u,oid:i,filepath:a})}return r}async function eP({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const u of r)if(u.path===s){if(a.length===0)return u.oid;{const{type:c,object:f}=await zr({fs:e,cache:t,gitdir:n,oid:u.oid});if(c!=="tree")throw new gi(i,c,"tree",o);return r=Ri.from(f),eP({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new vr(`file or directory found at "${i}:${o}"`)}async function Bh({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await pg({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await hh({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function mg({fs:e,gitdir:t,tree:n}){const r=Ri.from(n).toObject();return await Ii({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function Eie({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:u,committer:c,signingKey:f}){let h;try{h=await Ot.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof vr))throw x}let g=(await Bh({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new ns("note",i);typeof o=="string"&&(o=Wt.from(o,"utf8"));const v=await Ii({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await mg({fs:e,gitdir:r,tree:g});return await Hw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:u,committer:c,signingKey:f})}async function Cie({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:u,committer:c,signingKey:f,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i),Je("note",o),f&&Je("onSign",t);const p=new nn(e),g=await ic({fs:p,gitdir:r,author:u});if(!g)throw new ti("author");const v=await ph({fs:p,gitdir:r,author:g,committer:c});if(!v)throw new ti("committer");return await Eie({fs:new nn(p),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:v,signingKey:f})}catch(p){throw p.caller="git.addNote",p}}async function tP({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==Ds.clean(n))throw new Xo(n,Ds.clean(n));const i=await da.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new ns("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await da.save({fs:e,gitdir:t,config:i})}async function kie({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("remote",r),Je("url",a),await tP({fs:new nn(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function Aie({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!f&&await Ot.exists({fs:e,gitdir:r,ref:a}))throw new ns("tag",a);const h=await Ot.resolve({fs:e,gitdir:r,ref:u||"HEAD"}),{type:p}=await zr({fs:e,cache:t,gitdir:r,oid:h});let g=di.from({object:h,type:p,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});c&&(g=await di.sign(g,n,c));const v=await Ii({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Ot.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function Tie({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("ref",a),c&&Je("onSign",t);const p=new nn(e),g=await ic({fs:p,gitdir:r,author:i});if(!g)throw new ti("tagger");return await Aie({fs:p,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:u,signingKey:c,force:f})}catch(p){throw p.caller="git.annotatedTag",p}}async function Rie({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==Ds.clean(n))throw new Xo(n,Ds.clean(n));const o=`refs/heads/${n}`;if(!i&&await Ot.exists({fs:e,gitdir:t,ref:o}))throw new ns("branch",n,!1);let s;try{s=await Ot.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await Ot.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await Ot.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Nie({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Rie({fs:new nn(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const nP=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function Hk({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:u,noCheckout:c,noUpdateHead:f,dryRun:h,force:p,track:g=!0}){let v;if(r)try{v=await Ot.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await Ot.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const x=`${o}/${s}`;if(b=await Ot.resolve({fs:e,gitdir:i,ref:x}),g){const S=await da.get({fs:e,gitdir:i});await S.set(`branch.${s}.remote`,o),await S.set(`branch.${s}.merge`,`refs/heads/${s}`),await da.save({fs:e,gitdir:i,config:S})}await Ot.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:b})}if(!c){let _;try{_=await Iie({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:p,filepaths:u})}catch(k){throw k instanceof vr&&k.data.what===b?new ng(s,b):k}const x=_.filter(([k])=>k==="conflict").map(([k,D])=>D);if(x.length>0)throw new tg(x);const S=_.filter(([k])=>k==="error").map(([k,D])=>D);if(S.length>0)throw new Nn(S.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:u!=null&&u.length>0?"file":"branch"});return}let E=0;const C=_.length;await Na.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([D])=>D==="delete"||D==="delete-index").map(async function([D,O]){const N=`${a}/${O}`;D==="delete"&&await e.rm(N),k.delete({filepath:O}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Na.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[D,O]of _)if(D==="rmdir"||D==="rmdir-index"){const N=`${a}/${O}`;try{D==="rmdir-index"&&k.delete({filepath:O}),await e.rmdir(N),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(z){if(z.code==="ENOTEMPTY")console.log(`Did not delete ${O} because directory is not empty`);else throw z}}}),await Promise.all(_.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,D]){const O=`${a}/${D}`;await e.mkdir(O),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Na.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([D])=>D==="create"||D==="create-index"||D==="update"||D==="mkdir-index").map(async function([D,O,N,z,H]){const X=`${a}/${O}`;try{if(D!=="create-index"&&D!=="mkdir-index"){const{object:Z}=await zr({fs:e,cache:t,gitdir:i,oid:N});if(H&&await e.rm(X),z===33188)await e.write(X,Z);else if(z===33261)await e.write(X,Z,{mode:511});else if(z===40960)await e.writelink(X,Z);else throw new Nn(`Invalid mode 0o${z.toString(8)} detected in blob ${N}`)}const F=await e.lstat(X);z===33261&&(F.mode=493),D==="mkdir-index"&&(F.mode=57344),k.insert({filepath:O,stats:F,oid:N}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(F){console.log(F)}}))}),r&&await r({previousHead:v,newHead:b,type:u!=null&&u.length>0?"file":"branch"})}if(!f){const _=await Ot.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await Ot.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await Ot.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function Iie({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let u=0;return ac({fs:e,cache:t,dir:r,gitdir:a,trees:[wo({ref:i}),hg(),jh()],map:async function(c,[f,h,p]){if(c===".")return;if(s&&!s.some(v=>nP(c,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++u}),[!!p,!!f,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(c)?["delete",c]:void 0;case"010":switch(await f.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await f.oid(),await f.mode()];case"commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`new entry Unhandled type ${await f.type()}`]}case"011":switch(`${await f.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await f.oid()!==await h.oid()?o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]:await f.mode()!==await h.mode()?o?["update",c,await f.oid(),await f.mode(),!0]:["conflict",c]:["create-index",c,await f.oid(),await f.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${f.type}`]}case"100":return["delete-index",c];case"101":switch(await p.type()){case"tree":return["rmdir",c];case"blob":return await p.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await p.type()}`]}case"110":case"111":switch(`${await p.type()}-${await f.type()}`){case"tree-tree":return;case"blob-blob":{if(await p.oid()===await f.oid()&&await p.mode()===await f.mode()&&!o)return;if(h){if(await h.oid()!==await p.oid()&&await h.oid()!==await f.oid())return o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await f.oid(),await f.mode(),await f.mode()!==await p.mode()];return await f.mode()!==await p.mode()?["update",c,await f.oid(),await f.mode(),!0]:await f.oid()!==await p.oid()?["update",c,await f.oid(),await f.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await f.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`update entry Unhandled type ${await p.type()}-${await f.type()}`]}}},reduce:async function(c,f){return f=K5(f),c?c&&c[0]==="rmdir"?(f.push(c),f):(f.unshift(c),f):f}})}async function rP({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=At.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:u=!1,noUpdateHead:c=o===void 0,dryRun:f=!1,force:h=!1,track:p=!0,cache:g={}}){try{Je("fs",e),Je("dir",r),Je("gitdir",a);const v=o||"HEAD";return await Hk({fs:new nn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:s,noCheckout:u,noUpdateHead:c,dryRun:f,force:h,track:p})}catch(v){throw v.caller="git.checkout",v}}const Oie=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function rd(e){const t=Oie.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function yc({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ot.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ot.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:rd(a)}function Die(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function aP({username:e="",password:t=""}){return`Basic ${Wt.from(`${e}:${t}`).toString("base64")}`}async function gg(e,t){const n=V5(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Tv(e){let t=0;const n=[];await gg(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function a6(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function BE(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class ta{static flush(){return Wt.from("0000","utf8")}static delim(){return Wt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Wt.from(t));const n=t.length+4,r=BE(4,n);return Wt.concat([Wt.from(r,"utf8"),t])}static streamReader(t){const n=new G5(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function i6(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function o6(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=ta.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new rg;if(o.includes("version 2"))return i6(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new Nd(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return i6(i);const[u,c]=c2(s,"\0","\\x00");if(c.split(" ").map(f=>n.add(f)),u!=="0000000000000000000000000000000000000000 capabilities^{}"){const[f,h]=c2(u," "," ");for(r.set(h,f);;){const p=await i();if(p===!0)break;if(p!==null){const[g,v]=c2(p.toString("utf8")," "," ");r.set(v,g)}}}for(const f of n)if(f.startsWith("symref=")){const h=f.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function c2(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new Nd(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const s6=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,l6=(e,t)=>{(t.username||t.password)&&(e.Authorization=aP(t)),t.headers&&Object.assign(e,t.headers)},d2=async e=>{try{const t=Wt.from(await Tv(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Rv{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:u,headers:c,protocolVersion:f}){let{url:h,auth:p}=a6(u);const g=o?s6(o,h):h;(p.username||p.password)&&(c.Authorization=aP(p)),f===2&&(c["Git-Protocol"]="version=2");let v,b,_=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:c}),b=!1,v.statusCode===401||v.statusCode===203){const x=_?i:r;if(x){if(p=await x(h,{...p,headers:{...c}}),p&&p.cancel)throw new Lh;p&&(l6(c,p),_=!0,b=!0)}}else v.statusCode===200&&_&&a&&await a(h,p);while(b);if(v.statusCode!==200){const{response:x}=await d2(v);throw new dh(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${s}-advertisement`){const x=await o6(v.body,{service:s});return x.auth=p,x}else{const{preview:x,response:S,data:E}=await d2(v);try{const C=await o6([E],{service:s});return C.auth=p,C}catch{throw new lg(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:u}){const c=a6(i);c&&(i=c.url),r&&(i=s6(r,i)),u["content-type"]=`application/x-${a}-request`,u.accept=`application/x-${a}-result`,l6(u,o);const f=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:u});if(f.statusCode!==200){const{response:h}=d2(f);throw new dh(f.statusCode,f.statusMessage,h)}return f}}function jie({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class Vw{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Rv),n.set("https",Rv);const r=jie({url:t});if(!r)throw new cg(t);if(n.has(r.transport))return n.get(r.transport);throw new ug(t,r.transport,r.transport==="ssh"?Die(t):void 0)}}let Yc=null;class s0{static async read({fs:t,gitdir:n}){Yc===null&&(Yc=new i0);const r=At.join(n,"shallow"),a=new Set;return await Yc.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){Yc===null&&(Yc=new i0);const a=At.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Yc.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Yc.acquire(a,async function(){await t.rm(a)})}}async function Mie({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Pie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(At.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,u=await qk({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(u.error)throw new Nn(u.error);if(u.offsets.has(r))return!0}return!1}async function u6({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>zr({fs:e,cache:t,gitdir:n,oid:s});let o=await Mie({fs:e,gitdir:n,oid:r});return o||(o=await Pie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function Fie(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function iP(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const Gw={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class kb{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Lie(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function oP(e){const t=new kb;let n="";return(async()=>(await gg(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Lie(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class sP{static demux(t){const n=ta.streamReader(t),r=new kb,a=new kb,i=new kb,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const u=s.slice(1);i.write(u),r.end(),i.end(),a.destroy(new Error(u.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function $ie(e){const{packetlines:t,packfile:n,progress:r}=sP.demux(e),a=[],i=[],o=[];let s=!1,u=!1;return new Promise((c,f)=>{gg(t,h=>{const p=h.toString("utf8").trim();if(p.startsWith("shallow")){const g=p.slice(-41).trim();g.length!==40&&f(new nc(g)),a.push(g)}else if(p.startsWith("unshallow")){const g=p.slice(-41).trim();g.length!==40&&f(new nc(g)),i.push(g)}else if(p.startsWith("ACK")){const[,g,v]=p.split(" ");o.push({oid:g,status:v}),v||(u=!0)}else p.startsWith("NAK")?(s=!0,u=!0):(u=!0,s=!0);u&&(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{u||(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function Bie({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let u=` ${e.join(" ")}`;for(const c of t)s.push(ta.encode(`want ${c}${u}
`)),u="";for(const c of r)s.push(ta.encode(`shallow ${c}
`));a!==null&&s.push(ta.encode(`deepen ${a}
`)),i!==null&&s.push(ta.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)s.push(ta.encode(`deepen-not ${c}
`));s.push(ta.flush());for(const c of n)s.push(ta.encode(`have ${c}
`));return s.push(ta.encode(`done
`)),s}async function Vk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,ref:c,remoteRef:f,remote:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:D=!1}){const O=c||await yc({fs:e,gitdir:u,test:!0}),N=await da.get({fs:e,gitdir:u}),z=h||O&&await N.get(`branch.${O}.remote`)||"origin",H=p||await N.get(`remote.${z}.url`);if(typeof H>"u")throw new Ai("remote OR url");const X=f||O&&await N.get(`branch.${O}.merge`)||c||"HEAD";g===void 0&&(g=await N.get("http.corsProxy"));const F=Vw.getRemoteHelperFor({url:H}),Z=await F.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:H,headers:C,protocolVersion:1}),L=Z.auth,de=Z.refs;if(de.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new Lu("shallow","depth");if(b!==null&&!Z.capabilities.has("deepen-since"))throw new Lu("deepen-since","since");if(_.length>0&&!Z.capabilities.has("deepen-not"))throw new Lu("deepen-not","exclude");if(x===!0&&!Z.capabilities.has("deepen-relative"))throw new Lu("deepen-relative","relative");const{oid:ae,fullref:ne}=Ot.resolveAgainstMap({ref:X,map:de});for(const Ie of de.keys())Ie===ne||Ie==="HEAD"||Ie.startsWith("refs/heads/")||S&&Ie.startsWith("refs/tags/")||de.delete(Ie);const ee=iP([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Gw.agent}`]);x&&ee.push("deepen-relative");const se=E?[ae]:de.values(),W=E?[O]:await Ot.listRefs({fs:e,gitdir:u,filepath:"refs"});let J=[];for(let Ie of W)try{Ie=await Ot.expand({fs:e,gitdir:u,ref:Ie});const Re=await Ot.resolve({fs:e,gitdir:u,ref:Ie});await u6({fs:e,cache:t,gitdir:u,oid:Re})&&J.push(Re)}catch{}J=[...new Set(J)];const Y=await s0.read({fs:e,gitdir:u}),re=Z.capabilities.has("shallow")?[...Y]:[],be=Bie({capabilities:ee,wants:se,haves:J,shallows:re,depth:v,since:b,exclude:_}),we=Wt.from(await Tv(be)),Me=await F.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:H,auth:L,body:[we],headers:C}),Pe=await $ie(Me.body);Me.headers&&(Pe.headers=Me.headers);for(const Ie of Pe.shallows)if(!Y.has(Ie))try{const{object:Re}=await zr({fs:e,cache:t,gitdir:u,oid:Ie}),U=new Lr(Re),Ce=await Promise.all(U.headers().parent.map(ce=>u6({fs:e,cache:t,gitdir:u,oid:ce})));Ce.length===0||Ce.every(ce=>ce)||Y.add(Ie)}catch{Y.add(Ie)}for(const Ie of Pe.unshallows)Y.delete(Ie);if(await s0.write({fs:e,gitdir:u,oids:Y}),E){const Ie=new Map([[ne,ae]]),Re=new Map;let U=10,Ce=ne;for(;U--;){const ie=Z.symrefs.get(Ce);if(ie===void 0)break;Re.set(Ce,ie),Ce=ie}const Ne=de.get(Ce);Ne&&Ie.set(Ce,Ne);const{pruned:ce}=await Ot.updateRemoteRefs({fs:e,gitdir:u,remote:z,refs:Ie,symrefs:Re,tags:S,prune:k});k&&(Pe.pruned=ce)}else{const{pruned:Ie}=await Ot.updateRemoteRefs({fs:e,gitdir:u,remote:z,refs:de,symrefs:Z.symrefs,tags:S,prune:k,pruneTags:D});k&&(Pe.pruned=Ie)}if(Pe.HEAD=Z.symrefs.get("HEAD"),Pe.HEAD===void 0){const{oid:Ie}=Ot.resolveAgainstMap({ref:"HEAD",map:de});for(const[Re,U]of de.entries())if(Re!=="HEAD"&&U===Ie){Pe.HEAD=Re;break}}const Ae=ne.startsWith("refs/tags")?"tag":"branch";if(Pe.FETCH_HEAD={oid:ae,description:`${Ae} '${rd(ne)}' of ${H}`},r||a){const Ie=oP(Pe.progress);gg(Ie,async Re=>{if(a&&await a(Re),r){const U=Re.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);U&&await r({phase:U[1].trim(),loaded:parseInt(U[2],10),total:parseInt(U[3],10)})}})}const Te=Wt.from(await Tv(Pe.packfile));if(Me.body.error)throw Me.body.error;const qe=Te.slice(-20).toString("hex"),it={defaultBranch:Pe.HEAD,fetchHead:Pe.FETCH_HEAD.oid,fetchHeadDescription:Pe.FETCH_HEAD.description};if(Pe.headers&&(it.headers=Pe.headers),k&&(it.pruned=Pe.pruned),qe!==""&&!Fie(Te)){it.packfile=`objects/pack/pack-${qe}.pack`;const Ie=At.join(u,it.packfile);await e.write(Ie,Te);const Re=Ce=>zr({fs:e,cache:t,gitdir:u,oid:Ce}),U=await ch.fromPack({pack:Te,getExternalRefDelta:Re,onProgress:r});await e.write(Ie.replace(/\.pack$/,".idx"),await U.toBuffer())}return it}async function lP({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function zie({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:u,dir:c,gitdir:f,url:h,corsProxy:p,ref:g,remote:v,depth:b,since:_,exclude:x,relative:S,singleBranch:E,noCheckout:C,noTags:k,headers:D}){try{if(await lP({fs:e,gitdir:f}),await tP({fs:e,gitdir:f,remote:v,url:h,force:!1}),p){const z=await da.get({fs:e,gitdir:f});await z.set("http.corsProxy",p),await da.save({fs:e,gitdir:f,config:z})}const{defaultBranch:O,fetchHead:N}=await Vk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:f,ref:g,remote:v,corsProxy:p,depth:b,since:_,exclude:x,relative:S,singleBranch:E,headers:D,tags:!k});if(N===null)return;g=g||O,g=g.replace("refs/heads/",""),await Hk({fs:e,cache:t,onProgress:r,onPostCheckout:u,dir:c,gitdir:f,ref:g,remote:v,noCheckout:C})}catch(O){throw await e.rmdir(f,{recursive:!0,maxRetries:10}).catch(()=>{}),O}}async function Uie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c=At.join(u,".git"),url:f,corsProxy:h=void 0,ref:p=void 0,remote:g="origin",depth:v=void 0,since:b=void 0,exclude:_=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:k={},cache:D={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),E||Je("dir",u),Je("url",f),await zie({fs:new nn(e),cache:D,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c,url:f,corsProxy:h,ref:p,remote:g,depth:v,since:b,exclude:_,relative:x,singleBranch:S,noCheckout:E,noTags:C,headers:k})}catch(O){throw O.caller="git.clone",O}}async function qie({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:p,tree:g,cache:v={}}){try{Je("fs",e),u||Je("message",a),s&&Je("onSign",t);const b=new nn(e);return await Hw({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u,dryRun:c,noUpdateBranch:f,ref:h,parent:p,tree:g})}catch(b){throw b.caller="git.commit",b}}async function Hie({fs:e,dir:t,gitdir:n=At.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Je("fs",e),Je("gitdir",n),await yc({fs:new nn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Vie({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ot.exists({fs:e,gitdir:t,ref:n}))throw new vr(n);const a=await Ot.expand({fs:e,gitdir:t,ref:n}),i=await yc({fs:e,gitdir:t,fullname:!0});if(a===i){const u=await Ot.resolve({fs:e,gitdir:t,ref:a});await Ot.writeRef({fs:e,gitdir:t,ref:"HEAD",value:u})}await Ot.deleteRef({fs:e,gitdir:t,ref:a});const o=rd(n),s=await da.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await da.save({fs:e,gitdir:t,config:s})}async function Gie({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Vie({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Wie({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{Je("fs",e),Je("ref",r),await Ot.deleteRef({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Kie({fs:e,gitdir:t,remote:n}){const r=await da.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await da.save({fs:e,gitdir:t,config:r})}async function Zie({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("remote",r),await Kie({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Yie({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ot.deleteRef({fs:e,gitdir:t,ref:n})}async function Xie({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Yie({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Jie({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Qie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await qk({fs:e,cache:t,filename:u,getExternalRefDelta:a});if(c.error)throw new Nn(c.error);for(const f of c.offsets.keys())f.startsWith(r)&&i.push(f)}return i}async function eoe({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>zr({fs:e,cache:t,gitdir:n,oid:s}),i=await Jie({fs:e,gitdir:n,oid:r}),o=await Qie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new eg("oids",r,i):new vr(`an object matching "${r}"`)}async function toe({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await eoe({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function noe({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ot.expand({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function Gk({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,u)=>({index:u,oid:s}));for(;o.length;){const s=new Set;for(const{oid:c,index:f}of o)a[c]||(a[c]=new Set),a[c].add(f),a[c].size===i&&s.add(c);if(s.size>0)return[...s];const u=new Map;for(const{oid:c,index:f}of o)try{const{object:h}=await zr({fs:e,cache:t,gitdir:n,oid:c}),p=Lr.from(h),{parent:g}=p.parseHeaders();for(const v of g)(!a[v]||!a[v].has(f))&&u.set(v+":"+f,{oid:v,index:f})}catch{}o=Array.from(u.values())}return[]}const f2=/^.*(\r?\n|$)/gm;function roe({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(f2),u=a.match(f2),c=o.match(f2),f=xae(s,u,c),h=7;let p="",g=!0;for(const v of f)v.ok&&(p+=v.ok.join("")),v.conflict&&(g=!1,p+=`${"<".repeat(h)} ${n}
`,p+=v.conflict.a.join(""),p+=`${"=".repeat(h)}
`,p+=v.conflict.b.join(""),p+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:p}}async function aoe({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:u="ours",baseName:c="base",theirName:f="theirs",dryRun:h=!1,abortOnConflict:p=!0,mergeDriver:g}){const v=wo({ref:i}),b=wo({ref:o}),_=wo({ref:s}),x=[],S=[],E=[],C=[],k=await ac({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,_],map:async function(D,[O,N,z]){const H=Sv(D),X=await Av(O,N),F=await Av(z,N);switch(`${X}-${F}`){case"false-false":return{mode:await N.mode(),path:H,oid:await N.oid(),type:await N.type()};case"false-true":return z?{mode:await z.mode(),path:H,oid:await z.oid(),type:await z.type()}:void 0;case"true-false":return O?{mode:await O.mode(),path:H,oid:await O.oid(),type:await O.type()}:void 0;case"true-true":{if(O&&N&&z&&await O.type()==="blob"&&await N.type()==="blob"&&await z.type()==="blob")return ioe({fs:e,gitdir:r,path:H,ours:O,base:N,theirs:z,ourName:u,baseName:c,theirName:f,mergeDriver:g}).then(async Z=>{if(Z.cleanMerge)p||a.insert({filepath:D,oid:Z.mergeResult.oid,stage:0});else if(x.push(D),S.push(D),!p){const L=await N.oid(),de=await O.oid(),ae=await z.oid();a.delete({filepath:D}),a.insert({filepath:D,oid:L,stage:1}),a.insert({filepath:D,oid:de,stage:2}),a.insert({filepath:D,oid:ae,stage:3})}return Z.mergeResult});if(N&&!O&&z&&await N.type()==="blob"&&await z.type()==="blob"){if(x.push(D),E.push(D),!p){const Z=await N.oid(),L=await z.oid();a.delete({filepath:D}),a.insert({filepath:D,oid:Z,stage:1}),a.insert({filepath:D,oid:L,stage:3})}return{mode:await z.mode(),oid:await z.oid(),type:"blob",path:H}}if(N&&O&&!z&&await N.type()==="blob"&&await O.type()==="blob"){if(x.push(D),C.push(D),!p){const Z=await N.oid(),L=await O.oid();a.delete({filepath:D}),a.insert({filepath:D,oid:Z,stage:1}),a.insert({filepath:D,oid:L,stage:2})}return{mode:await O.mode(),oid:await O.oid(),type:"blob",path:H}}if(N&&!O&&!z&&await N.type()==="blob")return;throw new Ph}}},reduce:x.length!==0&&(!n||p)?void 0:async(D,O)=>{const N=O.filter(Boolean);if(D&&!(D&&D.type==="tree"&&N.length===0)){if(N.length>0){const H=new Ri(N).toObject(),X=await Ii({fs:e,gitdir:r,type:"tree",object:H,dryRun:h});D.oid=X}return D}}});return x.length!==0?(n&&!p&&await ac({fs:e,cache:t,dir:n,gitdir:r,trees:[wo({ref:k.oid})],map:async function(D,[O]){const N=`${n}/${D}`;if(await O.type()==="blob"){const z=await O.mode(),H=new TextDecoder().decode(await O.content());await e.write(N,H,{mode:z})}return!0}}),new Fh(x,S,E,C)):k.oid}async function ioe({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:u,dryRun:c,mergeDriver:f=roe}){const h="blob",p=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};const g=Wt.from(await r.content()).toString("utf8"),v=Wt.from(await a.content()).toString("utf8"),b=Wt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:x}=await f({branches:[u,o,s],contents:[v,g,b],path:n}),S=await Ii({fs:e,gitdir:t,type:"blob",object:Wt.from(_,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:p,path:n,oid:S,type:h}}}async function uP({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:p,committer:g,signingKey:v,onSign:b,mergeDriver:_}){a===void 0&&(a=await yc({fs:e,gitdir:r,fullname:!0})),a=await Ot.expand({fs:e,gitdir:r,ref:a}),i=await Ot.expand({fs:e,gitdir:r,ref:i});const x=await Ot.resolve({fs:e,gitdir:r,ref:a}),S=await Ot.resolve({fs:e,gitdir:r,ref:i}),E=await Gk({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new Ph;const C=E[0];if(C===S)return{oid:x,alreadyMerged:!0};if(o&&C===x)return!u&&!c&&await Ot.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(s)throw new ag;const k=await Na.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async O=>aoe({fs:e,cache:t,dir:n,gitdir:r,index:O,ourOid:x,theirOid:S,baseOid:C,ourName:rd(a),baseName:"base",theirName:rd(i),dryRun:u,abortOnConflict:f,mergeDriver:_}));if(k instanceof Fh)throw k;return h||(h=`Merge branch '${rd(i)}' into ${rd(a)}`),{oid:await Hw({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[x,S],author:p,committer:g,signingKey:v,onSign:b,dryRun:u,noUpdateBranch:c}),tree:k,mergeCommit:!0}}}async function cP({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:u,gitdir:c,ref:f,url:h,remote:p,remoteRef:g,prune:v,pruneTags:b,fastForward:_,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:C,author:k,committer:D,signingKey:O}){try{if(!f){const H=await yc({fs:e,gitdir:c});if(!H)throw new Ai("ref");f=H}const{fetchHead:N,fetchHeadDescription:z}=await Vk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:c,corsProxy:S,ref:f,url:h,remote:p,remoteRef:g,singleBranch:E,headers:C,prune:v,pruneTags:b});await uP({fs:e,cache:t,gitdir:c,ours:f,theirs:N,fastForward:_,fastForwardOnly:x,message:`Merge ${z}`,author:k,committer:D,signingKey:O,dryRun:!1,noUpdateBranch:!1}),await Hk({fs:e,cache:t,onProgress:r,dir:u,gitdir:c,ref:f,remote:p,noCheckout:!1})}catch(N){throw N.caller="git.pull",N}}async function ooe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:p,corsProxy:g,singleBranch:v,headers:b={},cache:_={}}){try{Je("fs",e),Je("http",t),Je("gitdir",u);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await cP({fs:new nn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:p,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function soe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,remote:f,remoteRef:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:D=!1,cache:O={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",u),await Vk({fs:new nn(e),cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:u,ref:c,remote:f,remoteRef:h,url:p,corsProxy:g,depth:v,since:b,exclude:_,relative:x,tags:S,singleBranch:E,headers:C,prune:k,pruneTags:D})}catch(N){throw N.caller="git.fetch",N}}async function loe({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await Gk({fs:new nn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function dP({fs:e,filepath:t}){if(await e.exists(At.join(t,".git")))return t;{const n=uh(t);if(n===t)throw new vr(`git root for ${t}`);return dP({fs:e,filepath:n})}}async function uoe({fs:e,filepath:t}){try{return Je("fs",e),Je("filepath",t),await dP({fs:new nn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function coe({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await o0({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function doe({fs:e,gitdir:t,path:n}){return(await da.get({fs:e,gitdir:t})).getall(n)}async function foe({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await doe({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function hoe({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Je("http",e),Je("url",i);const c=await Vw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),f={capabilities:[...c.capabilities]};for(const[h,p]of c.refs){const g=h.split("/"),v=g.pop();let b=f;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}for(const[h,p]of c.symrefs){const g=h.split("/"),v=g.pop();let b=f;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}return f}catch(u){throw u.caller="git.getRemoteInfo",u}}function fP(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const u=i.replace("^{}",""),c=a[a.length-1],f=c.ref===u?c:a.find(h=>h.ref===u);if(f===void 0)throw new Error("I did not expect this to happen");f.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function poe({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2}){try{Je("http",e),Je("url",i);const f=await Vw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(f.protocolVersion===2)return{protocolVersion:f.protocolVersion,capabilities:f.capabilities2};const h={};for(const p of f.capabilities){const[g,v]=p.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:fP(f,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function moe({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Mh.wrap({type:e,object:t})),r=await Ll(t)),{oid:r,object:t}}async function goe({object:e}){try{Je("object",e),typeof e=="string"?e=Wt.from(e,"utf8"):e=Wt.from(e);const t="blob",{oid:n,object:r}=await moe({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function yoe({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=At.join(r,i);const o=await e.read(i),s=c=>zr({fs:e,cache:t,gitdir:a,oid:c}),u=await ch.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await u.toBuffer()),{oids:[...u.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function boe({fs:e,onProgress:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a,cache:i={}}){try{return Je("fs",e),Je("dir",n),Je("gitdir",n),Je("filepath",a),await yoe({fs:new nn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function voe({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){try{return Je("fs",e),Je("gitdir",r),t||Je("dir",n),await lP({fs:new nn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function hP({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await s0.read({fs:e,gitdir:n});if(!r)throw new Ai("oid");if(!a)throw new Ai("ancestor");if(r===a)return!1;const s=[r],u=new Set;let c=0;for(;s.length;){if(c++===i)throw new og(i);const f=s.shift(),{type:h,object:p}=await zr({fs:e,cache:t,gitdir:n,oid:f});if(h!=="commit")throw new gi(f,h,"commit");const g=Lr.from(p).parse();for(const v of g.parent)if(v===a)return!0;if(!o.has(f))for(const v of g.parent)u.has(v)||(s.push(v),u.add(v))}return!1}async function woe({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),Je("ancestor",a),await hP({fs:new nn(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function _oe({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r),$h.isIgnored({fs:new nn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function xoe({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("gitdir",n),Ot.listBranches({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function Soe({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ot.resolve({gitdir:t,fs:e,ref:n}),i=[];return await pP({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Na.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function pP({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await Bh({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await pP({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:At.join(i,s.path)}):a.push(At.join(i,s.path))}async function Eoe({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),await Soe({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function Coe({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ot.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof vr)return[]}return(await Bh({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function koe({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Coe({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Aoe({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("gitdir",n),Ot.listRefs({fs:new nn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function Toe({fs:e,gitdir:t}){const n=await da.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function Roe({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),await Toe({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Noe(e){const t=ta.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const u of o){const[c,f]=u.split(":");c==="symref-target"?s.target=f:c==="peeled"&&(s.peeled=f)}n.push(s)}return n}async function Ioe({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(ta.encode(`command=ls-refs
`)),r.push(ta.encode(`agent=${Gw.agent}
`)),(n||t||e)&&r.push(ta.delim()),n&&r.push(ta.encode("peel")),t&&r.push(ta.encode("symrefs")),e&&r.push(ta.encode(`ref-prefix ${e}`)),r.push(ta.flush()),r}async function Ooe({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2,prefix:c,symrefs:f,peelTags:h}){try{Je("http",e),Je("url",i);const p=await Rv.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(p.protocolVersion===1)return fP(p,c,f,h);const g=await Ioe({prefix:c,symrefs:f,peelTags:h}),v=await Rv.connect({http:e,auth:p.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return Noe(v.body)}catch(p){throw p.caller="git.listServerRefs",p}}async function Doe({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),Ot.listTags({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function joe(e,t){return e.committer.timestamp-t.committer.timestamp}const Moe="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function c6({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Moe)return;const i=r;let o;const s=await hh({fs:e,cache:t,gitdir:n,oid:r}),u=s.tree;return a===s.oid?o=s.path:(o=await mP({fs:e,cache:t,gitdir:n,tree:u,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function mP({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const u=r.entries().map(function(c){let f;return c.oid===a?(f=At.join(s,c.path),o.push(f)):c.type==="tree"&&(f=zr({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return mP({fs:e,cache:t,gitdir:n,tree:Ri.from(h),fileId:a,oid:i,filepaths:o,parentPath:At.join(s,c.path)})})),f});return await Promise.all(u),o}async function Poe({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),f=[],h=await s0.read({fs:e,gitdir:n}),p=await Ot.resolve({fs:e,gitdir:n,ref:a}),g=[await mh({fs:e,cache:t,gitdir:n,oid:p})];let v,b,_;function x(S){_&&r&&f.push(S)}for(;g.length>0;){const S=g.pop();if(c!==void 0&&S.commit.committer.timestamp<=c)break;if(r){let E;try{E=await pg({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),b&&v!==E&&f.push(b),v=E,b=S,_=!0}catch(C){if(C instanceof vr){let k=u&&v;if(k&&(k=await c6({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(b){const D=await c6({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(D))if(k=k.filter(O=>D.indexOf(O)===-1),k.length===1)k=k[0],r=k,b&&f.push(b);else{k=!1,b&&f.push(b);break}}}else r=k,b&&f.push(b);if(!k){if(_&&v&&(f.push(b),!s))break;if(!s&&!u)throw C}b=S,_=!1}else throw C}}else f.push(S);if(i!==void 0&&f.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await mh({fs:e,cache:t,gitdir:n,oid:E});g.map(k=>k.oid).includes(C.oid)||g.push(C)}g.length===0&&x(S),g.sort((E,C)=>joe(E.commit,C.commit))}return f}async function Foe({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:u,cache:c={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",a),await Poe({fs:new nn(e),cache:c,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u})}catch(f){throw f.caller="git.log",f}}async function Loe({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:p,committer:g,signingKey:v,cache:b={},mergeDriver:_}){try{Je("fs",e),v&&Je("onSign",t);const x=new nn(e),S=await ic({fs:x,gitdir:r,author:p});if(!S&&(!s||!o))throw new ti("author");const E=await ph({fs:x,gitdir:r,author:S,committer:g});if(!E&&(!s||!o))throw new ti("committer");return await uP({fs:x,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:u,noUpdateBranch:c,abortOnConflict:f,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:_})}catch(x){throw x.caller="git.merge",x}}const $oe={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function gP({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new D5,o=[];function s(f,h){const p=Wt.from(f,h);o.push(p),i.update(p)}async function u({stype:f,object:h}){const p=$oe[f];let g=h.length,v=g>15?128:0;const b=g&15;g=g>>>4;let _=(v|p|b).toString(16);for(s(_,"hex");v;)v=g>127?128:0,_=v|g&127,s(BE(2,_),"hex"),g=g>>>7;s(Wt.from(await Z5(h)))}s("PACK"),s("00000002","hex"),s(BE(8,a.length),"hex");for(const f of a){const{type:h,object:p}=await zr({fs:e,cache:t,gitdir:r,oid:f});await u({object:p,stype:h})}const c=i.digest();return o.push(c),o}async function Boe({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await gP({fs:e,cache:t,gitdir:n,oids:r}),o=Wt.from(await Tv(i)),u=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(At.join(n,`objects/pack/${u}`),o),{filename:u}):{filename:u,packfile:new Uint8Array(o)}}async function zoe({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await Boe({fs:new nn(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function Uoe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:p,prune:g=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:_=!1,corsProxy:x,singleBranch:S,headers:E={},author:C,committer:k,signingKey:D,cache:O={}}){try{Je("fs",e),Je("gitdir",u);const N=new nn(e),z=await ic({fs:N,gitdir:u,author:C});if(!z)throw new ti("author");const H=await ph({fs:N,gitdir:u,author:z,committer:k});if(!H)throw new ti("committer");return await cP({fs:N,cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:p,fastForward:b,fastForwardOnly:_,corsProxy:x,singleBranch:S,headers:E,author:z,committer:H,signingKey:D,prune:g,pruneTags:v})}catch(N){throw N.caller="git.pull",N}}async function qoe({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),start:a,finish:i}){const o=await s0.read({fs:e,gitdir:r}),s=new Set,u=new Set;for(const h of a)s.add(await Ot.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const p=await Ot.resolve({fs:e,gitdir:r,ref:h});u.add(p)}catch{}const c=new Set;async function f(h){c.add(h);const{type:p,object:g}=await zr({fs:e,cache:t,gitdir:r,oid:h});if(p==="tag"){const b=di.from(g).headers().object;return f(b)}if(p!=="commit")throw new gi(h,p,"commit");if(!o.has(h)){const b=Lr.from(g).headers().parent;for(h of b)!u.has(h)&&!c.has(h)&&await f(h)}}for(const h of s)await f(h);return c}async function h2({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:u,object:c}=await zr({fs:e,cache:t,gitdir:r,oid:s});if(u==="tag"){const h=di.from(c).headers().object;await o(h)}else if(u==="commit"){const h=Lr.from(c).headers().tree;await o(h)}else if(u==="tree"){const f=Ri.from(c);for(const h of f)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function Hoe(e){const t={};let n="";const r=ta.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new Nd('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),u=o.slice(3);let c=u.indexOf(" ");c===-1&&(c=u.length);const f=u.slice(0,c),h=u.slice(c+1);t.refs[f]={ok:s==="ok",error:h}}return t}async function Voe({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(ta.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(ta.flush()),n}async function Goe({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:u,gitdir:c,ref:f,remoteRef:h,remote:p,url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:x={}}){const S=f||await yc({fs:e,gitdir:c});if(typeof S>"u")throw new Ai("ref");const E=await da.get({fs:e,gitdir:c});p=p||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=g||await E.get(`remote.${p}.pushurl`)||await E.get(`remote.${p}.url`);if(typeof C>"u")throw new Ai("remote OR url");const k=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new Ai("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const D=await Ot.expand({fs:e,gitdir:c,ref:S}),O=b?"0000000000000000000000000000000000000000":await Ot.resolve({fs:e,gitdir:c,ref:D}),N=Vw.getRemoteHelperFor({url:C}),z=await N.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),H=z.auth;let X;if(!k)X=D;else try{X=await Ot.expandAgainstMap({ref:k,map:z.refs})}catch(Y){if(Y instanceof vr)X=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw Y}const F=z.refs.get(X)||"0000000000000000000000000000000000000000";if(u&&!await u({remote:p,url:C,localRef:{ref:b?"(delete)":D,oid:O},remoteRef:{ref:X,oid:F}}))throw new Lh;const Z=!z.capabilities.has("no-thin");let L=new Set;if(!b){const Y=[...z.refs.values()];let re=new Set;if(F!=="0000000000000000000000000000000000000000"){const be=await Gk({fs:e,cache:t,gitdir:c,oids:[O,F]});for(const we of be)Y.push(we);Z&&(re=await h2({fs:e,cache:t,gitdir:c,oids:be}))}if(!Y.includes(O)){const be=await qoe({fs:e,cache:t,gitdir:c,start:[O],finish:Y});L=await h2({fs:e,cache:t,gitdir:c,oids:be})}if(Z){try{const be=await Ot.resolve({fs:e,gitdir:c,ref:`refs/remotes/${p}/HEAD`,depth:2}),{oid:we}=await Ot.resolveAgainstMap({ref:be.replace(`refs/remotes/${p}/`,""),fullref:be,map:z.refs}),Me=[we];for(const Pe of await h2({fs:e,cache:t,gitdir:c,oids:Me}))re.add(Pe)}catch{}for(const be of re)L.delete(be)}if(O===F&&(v=!0),!v){if(D.startsWith("refs/tags")&&F!=="0000000000000000000000000000000000000000")throw new fh("tag-exists");if(O!=="0000000000000000000000000000000000000000"&&F!=="0000000000000000000000000000000000000000"&&!await hP({fs:e,cache:t,gitdir:c,oid:O,ancestor:F,depth:-1}))throw new fh("not-fast-forward")}}const de=iP([...z.capabilities],["report-status","side-band-64k",`agent=${Gw.agent}`]),ae=await Voe({capabilities:de,triplets:[{oldoid:F,oid:O,fullRef:X}]}),ne=b?[]:await gP({fs:e,cache:t,gitdir:c,oids:[...L]}),ee=await N.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:C,auth:H,headers:x,body:[...ae,...ne]}),{packfile:se,progress:W}=await sP.demux(ee.body);if(a){const Y=oP(W);gg(Y,async re=>{await a(re)})}const J=await Hoe(se);if(ee.headers&&(J.headers=ee.headers),p&&J.ok&&J.refs[X].ok&&!D.startsWith("refs/tags")){const Y=`refs/remotes/${p}/${X.replace("refs/heads","")}`;b?await Ot.deleteRef({fs:e,gitdir:c,ref:Y}):await Ot.writeRef({fs:e,gitdir:c,ref:Y,value:O})}if(J.ok&&Object.values(J.refs).every(Y=>Y.ok))return J;{const Y=Object.entries(J.refs).filter(([re,be])=>!be.ok).map(([re,be])=>`
  - ${re}: ${be.error}`).join("");throw new ig(Y,J)}}async function Woe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:u,gitdir:c=At.join(u,".git"),ref:f,remoteRef:h,remote:p="origin",url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:x={},cache:S={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),await Goe({fs:new nn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:c,ref:f,remoteRef:h,remote:p,url:g,force:v,delete:b,corsProxy:_,headers:x})}catch(E){throw E.caller="git.push",E}}async function yP({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await zr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=di.from(i).parse().object,yP({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new gi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function bP({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await pg({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await yP({fs:e,cache:t,gitdir:n,oid:r})}async function Koe({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await bP({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function vP({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await mh({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Zoe({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ot.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await bP({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function Yoe({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oid",a),await Zoe({fs:new nn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function Xoe({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Je("fs",e),Je("gitdir",n),Je("oid",r);const u=new nn(e);i!==void 0&&(r=await pg({fs:u,cache:s,gitdir:n,oid:r,filepath:i}));const f=await zr({fs:u,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(f.oid=r,a==="parsed")switch(f.format="parsed",f.type){case"commit":f.object=Lr.from(f.object).parse();break;case"tree":f.object=Ri.from(f.object).entries();break;case"blob":o?f.object=f.object.toString(o):(f.object=new Uint8Array(f.object),f.format="content");break;case"tag":f.object=di.from(f.object).parse();break;default:throw new gi(f.oid,f.type,"blob|commit|tag|tree")}else(f.format==="deflated"||f.format==="wrapped")&&(f.type=f.format);return f}catch(u){throw u.caller="git.readObject",u}}async function Joe({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await zr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new gi(r,a,"tag");const o=di.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function Qoe({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Joe({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function ese({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Bh({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function tse({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r),await Na.acquire({fs:new nn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function nse({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u}){let c;try{c=await Ot.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof vr))throw v}let h=(await Bh({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const p=await mg({fs:e,gitdir:r,tree:h});return await Hw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:p,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:u})}async function rse({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u,cache:c={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i);const f=new nn(e),h=await ic({fs:f,gitdir:r,author:o});if(!h)throw new ti("author");const p=await ph({fs:f,gitdir:r,author:h,committer:s});if(!p)throw new ti("committer");return await nse({fs:f,cache:c,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:p,signingKey:u})}catch(f){throw f.caller="git.removeNote",f}}async function ase({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==Ds.clean(r))throw new Xo(r,Ds.clean(r));if(n!==Ds.clean(n))throw new Xo(n,Ds.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await Ot.exists({fs:e,gitdir:t,ref:o}))throw new ns("branch",r,!1);const u=await Ot.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ot.writeRef({fs:e,gitdir:t,ref:o,value:u}),await Ot.deleteRef({fs:e,gitdir:t,ref:i});const f=await yc({fs:e,gitdir:t,fullname:!0})===i;(a||f)&&await Ot.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function ise({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oldref",a),await ase({fs:new nn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function wP({gitdir:e,type:t,object:n}){return Ll(Mh.wrap({type:t,object:n}))}async function ose({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const o=new nn(e);let s,u;try{s=await Ot.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await pg({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const f=t&&await o.read(At.join(t,r));f&&(u=await wP({gitdir:n,type:"blob",object:f}),s===u&&(c=await o.lstat(At.join(t,r)))),await Na.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:c,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function sse({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,depth:a}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ot.resolve({fs:new nn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function lse({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r,value:a,append:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("path",r);const o=new nn(e),s=await da.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await da.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function _P({fs:e,gitdir:t,commit:n}){const r=Lr.from(n).toObject();return await Ii({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Nv{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=Nv.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const use={stage:jh,workdir:hg};let p2;async function gh(e,t){return p2===void 0&&(p2=new i0),p2.acquire(e,t)}async function cse(e,t,n,r,a=null){const i=At.join(n,r),o=await e.lstat(i);if(!o)throw new vr(i);if(o.isDirectory())throw new Nn(`${i}: file expected, but found directory`);const s=a?await H5({fs:e,gitdir:t,oid:a}):void 0;let u=s?a:void 0;return s||await gh({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await e.readlink(i).then(Y5):await e.read(i);if(c===null)throw new vr(i);u=await Ii({fs:e,gitdir:t,type:"blob",object:c})}),u}async function dse({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await mg({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await cse(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function d6({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?use[g]():g),o=[],f=await ac({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,b])=>{if(!(g==="."||await $h.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&o.push([v,b]),{mode:await b.mode(),path:g,oid:await b.oid(),type:await b.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const b=[];for(const _ of v){const[x,S]=_;a?S&&(await e.exists(`${t}/${S.toString()}`)?b.push(_):o.push([null,S])):x&&(S?b.push(_):o.push([x,null]))}return b.length?Promise.all(b.map(g)):[]}});if(o.length===0||f.length===0)return null;const p=(await dse({fs:e,dir:t,gitdir:n,entries:f})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return mg({fs:e,gitdir:n,tree:p})}async function fse({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],u=await ac({fs:e,cache:{},dir:t,gitdir:n,trees:[wo({ref:a}),wo({ref:r})],map:async(c,[f,h])=>{if(c==="."||await $h.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const p=h?await h.type():await f.type();if(p!=="tree"&&p!=="blob")return;if(!h&&f){const v=p==="tree"?"rmdir":"rm";return p==="tree"&&o.push(c),p==="blob"&&i&&s.push({filepath:c,oid:await f.oid()}),{method:v,filepath:c}}const g=await h.oid();if(!f||await f.oid()!==g)return p==="tree"?{method:"mkdir",filepath:c}:(i&&s.push({filepath:c,oid:g,stats:await e.lstat(At.join(t,c))}),{method:"write",filepath:c,oid:g})}});await gh({fs:e,gitdir:n,dirRemoved:o,ops:u},async()=>{for(const c of u){const f=At.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(f);break;case"mkdir":await e.mkdir(f);break;case"rm":await e.rm(f);break;case"write":if(!o.some(h=>f.startsWith(h))){const{object:h}=await zr({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(f)&&await e.rm(f),await e.write(f,h)}break}}}),await Na.acquire({fs:e,gitdir:n,cache:{}},async c=>{s.forEach(({filepath:f,stats:h,oid:p})=>{c.insert({filepath:f,stats:h,oid:p})})})}class Nl{constructor({fs:t,dir:n,gitdir:r=At.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return At.join(this.gitdir,Nl.refStash)}get refLogsStashPath(){return At.join(this.gitdir,Nl.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await ic({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new ti("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return _P({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Xo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?mh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ot.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Nl.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Nv.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await gh({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Nv.getStashReflogEntry(r,t)}}async function hse({fs:e,dir:t,gitdir:n,message:r=""}){const a=new Nl({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await yc({fs:e,gitdir:n,fullname:!1}),o=await Ot.resolve({fs:e,gitdir:n,ref:"HEAD"}),u=(await vP({fs:e,dir:t,gitdir:n,oid:o})).commit.message,c=[o];let f=null,h=wo({ref:"HEAD"});const p=await d6({fs:e,dir:t,gitdir:n,treePair:[wo({ref:"HEAD"}),"stage"]});if(p){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:p,parent:c});c.push(_),f=p,h=jh()}const g=await d6({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(_),f=g}if(!f||!p&&!g)throw new vr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${u}`,b=await a.writeStashCommit({message:v,tree:f,parent:c});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await rP({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function xP({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Nl({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const c=(await mh({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await fse({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:c})}}async function SP({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new Nl({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await gh(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const u=a.refLogsStashPath;await gh({reflogEntries:s,stashReflogPath:u,stashMgr:a},async()=>{if(s.length){await e.write(u,s.join(`
`),"utf8");const c=s[s.length-1].split(" ")[1];await a.writeStashRef(c)}else await e.rm(u)})}async function pse({fs:e,dir:t,gitdir:n}){return new Nl({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function mse({fs:e,dir:t,gitdir:n}){const r=new Nl({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await gh(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function gse({fs:e,dir:t,gitdir:n,refIdx:r=0}){await xP({fs:e,dir:t,gitdir:n,refIdx:r}),await SP({fs:e,dir:t,gitdir:n,refIdx:r})}async function yse({fs:e,dir:t,gitdir:n=At.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Je("fs",e),Je("dir",t),Je("gitdir",n),Je("op",r);const o={push:hse,apply:xP,drop:SP,list:pse,clear:mse,pop:gse},s=["apply","drop","pop"];try{const u=new nn(e);["refs","logs","logs/refs"].map(h=>At.join(n,h)).forEach(async h=>{await u.exists(h)||await u.mkdir(h)});const f=o[r];if(f){if(s.includes(r)&&i<0)throw new Xo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await f({fs:u,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(u){throw u.caller="git.stash",u}}async function bse({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const i=new nn(e);if(await $h.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await vse({fs:i,cache:a,gitdir:n}),u=await EP({fs:i,cache:a,gitdir:n,tree:s,path:r}),c=await Na.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const _ of b)if(_.path===r)return _;return null}),f=await i.lstat(At.join(t,r)),h=u!==null,p=c!==null,g=f!==null,v=async()=>{if(p&&!xv(c,f))return c.oid;{const b=await i.read(At.join(t,r)),_=await wP({gitdir:n,type:"blob",object:b});return p&&c.oid===_&&f.size!==-1&&Na.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:f,oid:_})}),_}};if(!h&&!g&&!p)return"absent";if(!h&&!g&&p)return"*absent";if(!h&&g&&!p)return"*added";if(!h&&g&&p)return await v()===c.oid?"added":"*added";if(h&&!g&&!p)return"deleted";if(h&&!g&&p)return u===c.oid,"*deleted";if(h&&g&&!p)return await v()===u?"*undeleted":"*undeletemodified";if(h&&g&&p){const b=await v();return b===u?b===c.oid?"unmodified":"*unmodified":b===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function EP({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:u}=await zr({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const c=Ri.from(u);return EP({fs:e,cache:t,gitdir:n,tree:c,path:a})}if(s==="blob")throw new gi(o.oid,s,"blob",a.join("/"))}return null}async function vse({fs:e,cache:t,gitdir:n}){let r;try{r=await Ot.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof vr)return[]}const{tree:a}=await Bh({fs:e,cache:t,gitdir:n,oid:r});return a}async function wse({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const u=new nn(e);return await ac({fs:u,cache:o,dir:t,gitdir:n,trees:[wo({ref:r}),hg(),jh()],map:async function(c,[f,h,p]){if(!f&&!p&&h&&!s&&await $h.isIgnored({fs:u,dir:t,filepath:c})||!a.some(D=>nP(c,D)))return null;if(i&&!i(c))return;const[g,v,b]=await Promise.all([f&&f.type(),h&&h.type(),p&&p.type()]),_=[g,v,b].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!_)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!_)return;const x=g==="blob"?await f.oid():void 0,S=b==="blob"?await p.oid():void 0;let E;g!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,x,E,S],k=C.map(D=>C.indexOf(D));return k.shift(),[c,...k]}})}catch(u){throw u.caller="git.statusMatrix",u}}async function _se({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,force:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const o=new nn(e);if(r===void 0)throw new Ai("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await Ot.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await Ot.exists({fs:o,gitdir:n,ref:r}))throw new ns("tag",r);await Ot.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function xse({fs:e,dir:t,gitdir:n=At.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:u,force:c}){try{Je("fs",e),Je("gitdir",n),Je("filepath",a);const f=new nn(e);if(u)return await Na.acquire({fs:f,gitdir:n,cache:r},async function(p){if(!c){const g=await f.lstat(At.join(t,a));if(g){if(g.isDirectory())throw new rc("directory");return}}p.has({filepath:a})&&p.delete({filepath:a})});let h;if(!i){if(h=await f.lstat(At.join(t,a)),!h)throw new vr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new rc("directory")}return await Na.acquire({fs:f,gitdir:n,cache:r},async function(p){if(!s&&!p.has({filepath:a}))throw new vr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await f.readlink(At.join(t,a)):await f.read(At.join(t,a));i=await Ii({fs:f,gitdir:n,type:"blob",format:"content",object:v})}return p.insert({filepath:a,oid:i,stats:g}),i})}catch(f){throw f.caller="git.updateIndex",f}}function Sse(){try{return Gw.version}catch(e){throw e.caller="git.version",e}}async function Ese({fs:e,dir:t,gitdir:n=At.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Je("fs",e),Je("gitdir",n),Je("trees",r),await ac({fs:new nn(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(u){throw u.caller="git.walk",u}}async function Cse({fs:e,dir:t,gitdir:n=At.join(t,".git"),blob:r}){try{return Je("fs",e),Je("gitdir",n),Je("blob",r),await Ii({fs:new nn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function kse({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r}){try{return Je("fs",e),Je("gitdir",n),Je("commit",r),await _P({fs:new nn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function Ase({fs:e,dir:t,gitdir:n=At.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const u=new nn(e);if(i==="parsed"){switch(r){case"commit":a=Lr.from(a).toObject();break;case"tree":a=Ri.from(a).toObject();break;case"blob":a=Wt.from(a,s);break;case"tag":a=di.from(a).toObject();break;default:throw new gi(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Ii({fs:u,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(u){throw u.caller="git.writeObject",u}}async function Tse({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r),Je("value",a);const s=new nn(e);if(r!==Ds.clean(r))throw new Xo(r,Ds.clean(r));if(!i&&await Ot.exists({fs:s,gitdir:n,ref:r}))throw new ns("ref",r);o?await Ot.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await Ot.resolve({fs:s,gitdir:n,ref:a}),await Ot.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function Rse({fs:e,gitdir:t,tag:n}){const r=di.from(n).toObject();return await Ii({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function Nse({fs:e,dir:t,gitdir:n=At.join(t,".git"),tag:r}){try{return Je("fs",e),Je("gitdir",n),Je("tag",r),await Rse({fs:new nn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function Ise({fs:e,dir:t,gitdir:n=At.join(t,".git"),tree:r}){try{return Je("fs",e),Je("gitdir",n),Je("tree",r),await mg({fs:new nn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var $r={Errors:iie,STAGE:jh,TREE:wo,WORKDIR:hg,add:Sie,abortMerge:vie,addNote:Cie,addRemote:kie,annotatedTag:Tie,branch:Nie,checkout:rP,clone:Uie,commit:qie,getConfig:coe,getConfigAll:foe,setConfig:lse,currentBranch:Hie,deleteBranch:Gie,deleteRef:Wie,deleteRemote:Zie,deleteTag:Xie,expandOid:toe,expandRef:noe,fastForward:ooe,fetch:soe,findMergeBase:loe,findRoot:uoe,getRemoteInfo:hoe,getRemoteInfo2:poe,hashBlob:goe,indexPack:boe,init:voe,isDescendent:woe,isIgnored:_oe,listBranches:xoe,listFiles:Eoe,listNotes:koe,listRefs:Aoe,listRemotes:Roe,listServerRefs:Ooe,listTags:Doe,log:Foe,merge:Loe,packObjects:zoe,pull:Uoe,push:Woe,readBlob:Koe,readCommit:vP,readNote:Yoe,readObject:Xoe,readTag:Qoe,readTree:ese,remove:tse,removeNote:rse,renameBranch:ise,resetIndex:ose,updateIndex:xse,resolveRef:sse,status:bse,statusMatrix:wse,tag:_se,version:Sse,walk:Ese,writeBlob:Cse,writeCommit:kse,writeObject:Ase,writeRef:Tse,writeTag:Nse,writeTree:Ise,stash:yse};function Ose(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Dse(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Ose(e)}async function jse(e,t){const n=Dse(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Mse(e){let t=0;const n=[];await jse(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function Pse(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Fse({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await Mse(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?Pse(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,u]of i.headers.entries())r[s]=u;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var l0={request:Fse};const u0="https://cors.isomorphic-git.org",yh=new Map,CP=async e=>{const{gitUserName:t,gitUserEmail:n}=Br.getState();if(!t||!n)return ot.error("Git user name and email must be configured in Settings before committing."),!1;try{const r=await $r.getConfig({fs:Tr,dir:e,path:"user.name"}).catch(()=>null),a=await $r.getConfig({fs:Tr,dir:e,path:"user.email"}).catch(()=>null);return r!==t&&await $r.setConfig({fs:Tr,dir:e,path:"user.name",value:t}),a!==n&&await $r.setConfig({fs:Tr,dir:e,path:"user.email",value:n}),!0}catch(r){return console.error("[VFS Git Op] Error checking/setting Git config:",r),ot.error(`Failed to configure Git user: ${r instanceof Error?r.message:String(r)}`),!1}},c0=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=yh.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return ot.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(yh.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(ot.error("Authentication cancelled: Password/token not provided."),null)},d0=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),yh.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),yh.delete(n)),null},f0=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!yh.has(n)&&t.username&&t.password&&(yh.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},Vf=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e instanceof Error?e.message:String(e)},Lse=async e=>{const t=kr(e),n=Dl(t,".git");try{return(await Ji(n)).isDirectory()}catch(r){return r instanceof Error&&r.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${t}:`,r),!1}},kP=async(e,t,n,r)=>{var i;const a=kr(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${a}`);try{let o=!1;try{await Ji(Dl(a,".git")),o=!0}catch(f){if(f.code!=="ENOENT")throw f}if(o)throw console.warn(`[VFS Git Op] Clone target ${a} already contains a .git directory.`),new Error(`Repository already cloned at ${a}.`);const s=hw(a);if(s!=="/")try{await Ih(s,{recursive:!0})}catch(f){if(f.code!=="EEXIST")throw f}let u=n;if(!u)try{if(u=(i=(await $r.getRemoteInfo({http:l0,url:t,corsProxy:u0,onAuth:h=>c0(h,r),onAuthFailure:d0,onAuthSuccess:f0})).HEAD)==null?void 0:i.replace("refs/heads/",""),!u)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${u}`)}catch(f){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",f),new Error(`Failed to determine default branch: ${Vf(f)}`)}await $r.clone({fs:Tr,http:l0,dir:a,corsProxy:u0,url:t,ref:u,singleBranch:!0,depth:10,onAuth:f=>c0(f,r),onAuthFailure:d0,onAuthSuccess:f0,onProgress:f=>{f.phase==="counting objects"&&f.total?console.log(`Clone progress: ${f.phase} ${f.loaded}/${f.total}`):f.phase==="receiving objects"&&f.total?console.log(`Clone progress: ${f.phase} ${f.loaded}/${f.total}`):console.log(`Clone progress: ${f.phase}`)}}),await Ji(Dl(a,".git"));const c=await $r.currentBranch({fs:Tr,dir:a,fullname:!1}).catch(()=>null);c!==u&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${c}, expected ${u}. Checking out...`),await $r.checkout({fs:Tr,dir:a,ref:u})),ot.success(`Repository cloned successfully into ${a} (branch: ${u}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(o){console.error(`[VFS Git Op] Git clone failed for ${t}:`,o);const s=Vf(o);if(o instanceof Error&&o.message.includes("already cloned")||ot.error(`Git clone failed: ${s}`),!(o instanceof Error&&o.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${a}`),await X0(a,{recursive:!0,force:!0})}catch(u){console.warn("[VFS Git Op] Failed cleanup after clone error:",u)}throw o}},AP=async e=>{const t=kr(e);try{await $r.init({fs:Tr,dir:t}),ot.success(`Initialized empty Git repository in "${ca(t)}"`)}catch(n){throw console.error(`[VFS Git Op] Git init failed for ${t}:`,n),ot.error(`Git init failed: ${n instanceof Error?n.message:String(n)}`),n}},Wk=async(e,t)=>{const n=kr(e);try{if(!await CP(n))throw new Error("Git user configuration is missing or invalid.");if(await $r.add({fs:Tr,dir:n,filepath:"."}),!(await $r.statusMatrix({fs:Tr,dir:n})).some(([,s])=>s!==0)){ot.info("No changes detected to commit.");return}const o=await $r.commit({fs:Tr,dir:n,message:t,author:{name:Br.getState().gitUserName,email:Br.getState().gitUserEmail}});ot.success(`Changes committed: ${o.substring(0,7)}`)}catch(r){throw console.error(`[VFS Git Op] Git commit failed for ${n}:`,r),ot.error(`Git commit failed: ${r instanceof Error?r.message:String(r)}`),r}},Ww=async(e,t,n)=>{const r=kr(e);try{if(!await CP(r))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");const i=await $r.currentBranch({fs:Tr,dir:r,fullname:!1}).catch(()=>null);if(i!==t){console.log(`[VFS Git Op] Current branch is ${i}, switching to ${t} before pull...`);try{await $r.checkout({fs:Tr,dir:r,ref:t}),console.log(`[VFS Git Op] Successfully checked out branch ${t}.`)}catch(u){if(u.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to create from origin/${t}...`);try{await $r.fetch({fs:Tr,http:l0,dir:r,corsProxy:u0,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:c=>c0(c,n),onAuthFailure:d0,onAuthSuccess:f0}),await $r.branch({fs:Tr,dir:r,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(c){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,c),new Error(`Failed to switch to or create local branch "${t}": ${Vf(c)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,u),new Error(`Failed to checkout branch "${t}": ${Vf(u)}`)}}console.log(`[VFS Git Op] Fetching ${t} for ${r}`),await $r.fetch({fs:Tr,http:l0,dir:r,corsProxy:u0,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>c0(u,n),onAuthFailure:d0,onAuthSuccess:f0}),console.log("[VFS Git Op] Fetch successful.");const o=await $r.resolveRef({fs:Tr,dir:r,ref:"FETCH_HEAD"}).catch(()=>null);if(!o)try{const u=`refs/remotes/origin/${t}`,c=await $r.resolveRef({fs:Tr,dir:r,ref:u}),f=await $r.resolveRef({fs:Tr,dir:r,ref:t});if(c===f){ot.info(`Branch "${t}" is already up-to-date.`),console.log(`[VFS Git Op] Branch ${t} already up-to-date.`);return}else console.warn(`[VFS Git Op] FETCH_HEAD missing after fetch, but remote ref ${u} exists. Proceeding with merge attempt.`)}catch(u){throw console.error("[VFS Git Op] Error resolving refs after fetch:",u),new Error(`Could not confirm remote branch "${t}" state after fetch.`)}console.log(`[VFS Git Op] Merging FETCH_HEAD (${o}) into ${t}`);const s=await $r.merge({fs:Tr,dir:r,ours:t,theirs:"FETCH_HEAD",fastForward:!1,author:{name:Br.getState().gitUserName,email:Br.getState().gitUserEmail}});if(console.log("[VFS Git Op] Merge result:",s),s.oid)await $r.resolveRef({fs:Tr,dir:r,ref:"HEAD"})===o?(ot.success(`Pulled and fast-forwarded changes for "${ca(r)}"`),console.log(`[VFS Git Op] Pull/Fast-forward successful for ${r}`)):(ot.success(`Pulled and merged changes (merge commit created) for "${ca(r)}"`),console.log(`[VFS Git Op] Pull/Merge successful (merge commit) for ${r}`));else if(s.alreadyMerged)ot.info(`Branch "${t}" is already up-to-date.`),console.log(`[VFS Git Op] Branch ${t} already up-to-date.`);else throw console.error("[VFS Git Op] Merge failed after fetch:",s),new Error("Merge failed after fetch. Conflicts likely occurred. Resolve manually.")}catch(a){throw console.error(`[VFS Git Op] Git pull (fetch/merge) failed for ${r}:`,a),ot.error(`Git pull failed: ${Vf(a)}`),a}},Kk=async(e,t,n)=>{var a,i;const r=kr(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${r}`);const o=await $r.push({fs:Tr,http:l0,dir:r,corsProxy:u0,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:s=>c0(s,n),onAuthFailure:d0,onAuthSuccess:f0});if(o!=null&&o.ok)ot.success(`Pushed changes successfully for "${ca(r)}"`);else if((a=o==null?void 0:o.error)!=null&&a.includes("up-to-date"))ot.info(`Branch "${t}" already up-to-date on remote.`);else throw(i=o==null?void 0:o.error)!=null&&i.includes("rejected")?(ot.error(`Push rejected for "${ca(r)}". Pull changes first.`),new Error(o.error)):new Error((o==null?void 0:o.error)||"Push rejected by remote")}catch(o){throw console.error(`[VFS Git Op] Git push failed for ${r}:`,o),o instanceof Error&&o.message.includes("rejected")||ot.error(`Git push failed: ${Vf(o)}`),o}},TP=async e=>{const t=kr(e);console.log(`[VFS Git Op] Git Status on ${t}`);try{const n=await $r.statusMatrix({fs:Tr,dir:t});console.log("Git Status Matrix:",n);const r=n.map(([a,i,o,s])=>{let u="";return s===2&&(u+="INDEX_Modified "),s===3&&(u+="INDEX_Added "),i===0&&o===2?u+="WT_New":i===1&&o===2?u+="WT_Modified":i===1&&o===0?u+="WT_Deleted":i===1&&o===1&&s===0&&(u="Unmodified"),(!u||u==="INDEX_Unmodified ")&&(u=`h:${i} w:${o} s:${s}`),`${a}: ${u.trim()}`}).filter(a=>!a.endsWith("Unmodified")).join(`
`);ot.info(`Git Status for "${ca(t)}":
${r||"No changes"}`,{duration:15e3})}catch(n){throw console.error(`[VFS Git Op] Git status failed for ${t}:`,n),ot.error(`Git status failed: ${n instanceof Error?n.message:String(n)}`),n}},hd=async e=>{const t=kr(e);if(t!=="/")try{await Ih(t,{recursive:!0})}catch(n){if(n instanceof Error&&n.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${t}`);return}throw console.error(`[VFS Op] Failed to create directory ${t}:`,n),ot.error(`Error creating directory "${ca(t)}": ${n instanceof Error?n.message:String(n)}`),n}},$se=async e=>{try{const t={backend:Ure,name:`litechat_vfs_${e}`};return await jre(t),Tr}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),ot.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},Zk=async e=>{const t=kr(e);try{try{await Ji(t)}catch(o){if(o.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${t}`),await hd(t),[];throw o}const r=(await pc(t)).map(async o=>{const s=Dl(t,o);try{const u=await Ji(s);return{name:o,path:s,isDirectory:u.isDirectory(),size:u.size,lastModified:u.mtime}}catch(u){return console.error(`[VFS Op] Failed to stat ${s}:`,u),null}});return(await Promise.all(r)).filter(o=>o!==null)}catch(n){throw console.error(`[VFS Op] Failed to list directory ${t}:`,n),ot.error(`Error listing files: ${n instanceof Error?n.message:String(n)}`),n}},zh=async e=>{const t=kr(e);try{const n=await Z0(t);return Ci.emit(_v.VFS_FILE_READ,{path:t}),n}catch(n){throw console.error(`[VFS Op] Failed to read file ${t}:`,n),ot.error(`Error reading file "${ca(t)}": ${n instanceof Error?n.message:String(n)}`),n}},Kw=async(e,t)=>{const n=kr(e),r=hw(n);try{r!=="/"&&await hd(r),await Y0(n,t),Ci.emit(_v.VFS_FILE_WRITTEN,{path:n})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${n}:`,a),ot.error(`Error writing file "${ca(n)}": ${a instanceof Error?a.message:String(a)}`)),a}},Zw=async(e,t=!1)=>{const n=kr(e);if(n==="/")throw ot.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await Ji(n)).isDirectory()?(await X0(n,{recursive:t}),Ci.emit(_v.VFS_FILE_DELETED,{path:n})):(await K0(n),Ci.emit(_v.VFS_FILE_DELETED,{path:n})),ot.success(`"${ca(n)}" deleted.`)}catch(r){if(r instanceof Error&&r.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${n}`);return}throw console.error(`[VFS Op] Failed to delete ${n}:`,r),ot.error(`Error deleting "${ca(n)}": ${r instanceof Error?r.message:String(r)}`),r}},RP=async e=>{await hd(e)},Bse=async(e,t)=>{try{const n=await zh(e),r=new Blob([n]),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a;const o=kr(e);i.download=t||ca(o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(n){console.error(`[VFS Op] Failed to initiate download for ${e}:`,n),n instanceof Error&&n.message.includes("Error reading file")||ot.error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}},NP=async(e,t)=>{const n=kr(t);let r=0,a=0;const i=Array.from(e);try{await hd(n);for(const o of i){const s=Dl(n,o.name);try{const u=await o.arrayBuffer();await Kw(s,new Uint8Array(u)),r++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${o.name}:`,u)}}}catch(o){a=i.length,console.error(`[VFS Op] Failed to prepare target directory ${n} for upload:`,o)}finally{a>0&&r>0?ot.warning(`Upload complete with issues. ${r} succeeded, ${a} failed.`):a===0&&r>0&&ot.success(`Successfully uploaded ${r} file(s) to ${n==="/"?"root":ca(n)}.`)}},zse=async(e,t)=>{if(!e.name.toLowerCase().endsWith(".zip")){ot.error("Please select a valid ZIP file.");return}const n=kr(t);let r;try{await hd(n),r=await O5.loadAsync(e);const a=Object.values(r.files),i=await Promise.allSettled(a.map(async c=>{const f=Dl(n,c.name);if(c.dir)await hd(f);else{const h=await c.async("uint8array");await Kw(f,h)}return{name:c.name,isDir:c.dir}}));let o=0,s=0,u=0;i.forEach(c=>{c.status==="fulfilled"&&c.value?c.value.isDir?s++:o++:c.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",c.reason))}),u>0?ot.warning(`Finished extracting "${e.name}". ${o+s} items succeeded, ${u} failed.`):ot.success(`Successfully extracted ${o} files and ${s} folders from "${e.name}" to ${n==="/"?"root":ca(n)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),ot.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},f6=async(e,t="/")=>{const n=new O5,r=kr(t),a=ca(r)||"root";try{try{if(!(await Ji(r)).isDirectory()){ot.error(`Cannot export: "${a}" is not a directory.`);return}}catch(f){f instanceof Error&&f.code==="ENOENT"?ot.error(`Cannot export: Path "${a}" not found.`):ot.error(`Cannot export: Error accessing path "${a}". ${f instanceof Error?f.message:String(f)}`);return}const i=async(f,h)=>{const p=await Zk(f);for(const g of p)if(g.isDirectory){if(g.name===".git")continue;const v=h.folder(g.name);if(v)await i(g.path,v);else throw new Error(`Failed to create subfolder ${g.name} in zip.`)}else{const v=await zh(g.path);h.file(g.name,v)}};await i(r,n);const o=await n.generateAsync({type:"blob"}),s=URL.createObjectURL(o),u=document.createElement("a");u.href=s;const c=`vfs_${a}_export.zip`;u.download=e||c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s),ot.success(`"${a}" exported as ${u.download}.`)}catch(i){console.error("[VFS Op] Failed to download all as zip:",i),i instanceof Error&&(i.message.includes("Error listing files")||i.message.includes("Error reading file")||i.message.includes("Cannot export"))||ot.error(`ZIP export failed: ${i instanceof Error?i.message:String(i)}`)}},Use=async(e,t)=>{const n=kr(e),r=kr(t);if(n==="/"||r==="/")throw ot.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(n!==r)try{const a=hw(r);a!=="/"&&await hd(a),await Dk(n,r),ot.success(`Renamed "${ca(n)}" to "${ca(r)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||ot.error(`Rename failed: Original item "${ca(n)}" not found.`):a instanceof Error&&a.code==="EEXIST"?ot.error(`Rename failed: An item named "${ca(r)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||ot.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${n} to ${r}:`,a),a}},qse=Tr,Hse=1024*5,Vse=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},Gse=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},Wse=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],Kse=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:Wse.some(r=>n.endsWith(r))},Zse=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=R.useState(null),[i,o]=R.useState(null),[s,u]=R.useState(!1),[c,f]=R.useState(!1),h=e.type||"application/octet-stream",p=Kse(e.name,h),g=h.startsWith("image/"),v=h.startsWith("audio/"),b=h.startsWith("video/");R.useEffect(()=>{let k=null;return o(null),!p&&e.contentBase64?(k=Vse(e.contentBase64,h),k||o("Failed to decode file content for preview."),a(k)):a(null),()=>{k&&(URL.revokeObjectURL(k),a(null))}},[e.contentBase64,h,p]),R.useEffect(()=>{p&&e.contentText&&e.contentText.length>Hse?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):p&&e.contentText===void 0&&o("Text content missing from metadata.")},[e.contentText,e.size,p]);const _=async()=>{if(e.source==="vfs"){ot.info("File is already in VFS.");return}const k=Gse(e);if(!k){ot.error("Cannot add to VFS: Failed to reconstruct file data.");return}u(!0);try{await NP([k],"/"),ot.success(`"${e.name}" added to VFS root.`)}catch(D){console.error("Failed to add file to VFS:",D),ot.error(`Failed to add "${e.name}" to VFS.`)}finally{u(!1)}},x=()=>f(k=>!k),S=()=>p?y.jsx(RK,{className:"h-5 w-5 text-blue-500"}):g?y.jsx(YK,{className:"h-5 w-5 text-purple-500"}):v?y.jsx(oZ,{className:"h-5 w-5 text-green-500"}):b?y.jsx(PZ,{className:"h-5 w-5 text-orange-500"}):y.jsx(AK,{className:"h-5 w-5 text-muted-foreground"}),E=()=>i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(Ls,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):p&&e.contentText!==void 0?y.jsx(Aw,{lang:h==="text/markdown"?"markdown":"text",code:e.contentText}):g&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):v&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):b&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),C=R.useMemo(()=>{let k="File";return p?k="Text":g?k="Image":v?k="Audio":b&&(k="Video"),`${k} (${qm(e.size)})`},[p,g,v,b,e.size]);return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-2",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[S(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",qm(e.size),")"]}),e.source==="vfs"&&e.path&&y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-blue-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(Tn,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:x,"aria-label":c?"Unfold preview":"Fold preview",children:y.jsx(j0,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:c?"Unfold":"Fold"})]})}),!n&&t&&y.jsxs(y.Fragment,{children:[e.source==="direct"&&y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:_,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Gn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(p8,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{children:"Add to VFS"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(ql,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{children:"Remove from Prompt"})]})})]})]})]}),c?y.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:x,children:C}):y.jsx("div",{className:$t("p-2 max-h-80 overflow-y-auto"),children:E()})]})},Yse=({interaction:e,className:t})=>{var _,x,S;const[n,r]=R.useState(!1),[a,i]=R.useState(!1),[o,s]=R.useState(!1),u=(_=e.prompt)!=null&&_.content&&typeof e.prompt.content=="string"?e.prompt.content:"",c=nk(u),f=((S=(x=e.prompt)==null?void 0:x.metadata)==null?void 0:S.attachedFiles)||[],h=u||f.length>0,p=R.useCallback(async()=>{if(u)try{await navigator.clipboard.writeText(u),i(!0),ot.success("Prompt text copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(E){ot.error("Failed to copy prompt text."),console.error("Clipboard copy failed:",E)}},[u]),g=R.useCallback(async()=>{try{await navigator.clipboard.writeText(e.id),s(!0),ot.success("Interaction ID copied to clipboard!"),setTimeout(()=>s(!1),1500)}catch(E){ot.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",E)}},[e.id]),v=()=>r(E=>!E),b=R.useMemo(()=>u?u.split(`
`).slice(0,3).join(`
`):"",[u]);return y.jsxs("div",{className:$t("flex items-start gap-3 my-2 group",t),children:[y.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary/20 text-primary flex items-center justify-center mt-1",children:y.jsx(jZ,{className:"h-5 w-5"})}),y.jsxs("div",{className:"p-3 border rounded-md shadow-sm bg-muted/50 flex-grow min-w-0 relative",children:[y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:v,"aria-label":n?"Unfold prompt":"Fold prompt",disabled:!h,children:y.jsx(j0,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:n?"Unfold":"Fold"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:g,"aria-label":"Copy interaction ID",children:o?y.jsx(xo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(m8,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:"Copy ID"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:p,"aria-label":"Copy prompt text",disabled:!u,children:a?y.jsx(xo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(IC,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:"Copy Text"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:()=>ot.info("Edit functionality coming soon!"),"aria-label":"Edit prompt (coming soon)",children:y.jsx(bE,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:"Edit (Soon)"})]})})]}),y.jsx("div",{className:"text-sm markdown-content",children:n?y.jsxs("div",{className:"folded-content-preview cursor-pointer",onClick:v,children:[u?y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:b}):y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),f.length>0&&y.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(+",f.length," file(s))"]})]}):y.jsxs(y.Fragment,{children:[u?c.map((E,C)=>typeof E=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:E}},C):E.type==="code"?y.jsx(Aw,{lang:E.lang,code:E.code},C):null):!f.length&&y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),f.length>0&&y.jsx("div",{className:"mt-2 space-y-2",children:f.map(E=>y.jsx(Zse,{fileMeta:E,isReadOnly:!0},E.id))})]})})]})]})},Xse=({interactionId:e,onStop:t,className:n})=>{const r=a=>{a.stopPropagation(),t(e)};return y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"destructive",size:"icon",className:$t("h-6 w-6",n),onClick:r,"aria-label":"Stop generation",children:y.jsx(AZ,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:y.jsx("p",{children:"Stop Generation"})})]})})};function h6(e,t){let n,r,a;return function(){n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-a>=t&&(e(),a=Date.now())},t-(Date.now()-a))):(e(),a=Date.now(),n=!0)}}const p6=e=>/```/.test(e),IP=R.memo(({interactionId:e})=>{const t=Cr(p=>p.activeStreamBuffers[e]),{enableStreamingMarkdown:n,streamingRenderFPS:r,streamingCodeRenderFPS:a}=Br(In(p=>({enableStreamingMarkdown:p.enableStreamingMarkdown,streamingRenderFPS:p.streamingRenderFPS,streamingCodeRenderFPS:p.streamingCodeRenderFPS}))),[i,o]=R.useState(""),s=R.useRef(""),u=R.useRef(void 0),c=R.useRef(100),f=R.useRef(!1);R.useEffect(()=>{s.current=t??"",f.current=!0},[t]),R.useEffect(()=>{var b;const g=p6(s.current)?a:r,v=g>0?1e3/g:100;v!==c.current&&(c.current=v,u.current=h6(()=>{i!==s.current&&o(s.current),f.current=!1},v)),f.current&&((b=u.current)==null||b.call(u))},[t,r,a,i]),R.useEffect(()=>{const p=Cr.getState().activeStreamBuffers[e]??"";s.current=p;const v=p6(p)?a:r,b=v>0?1e3/v:100;c.current=b,u.current=h6(()=>{i!==s.current&&o(s.current),f.current=!1},b),o(p),f.current=!1},[e,r,a]);const h=nk(n?i:null);return n?y.jsx("div",{className:"text-sm markdown-content",children:h.map((p,g)=>typeof p=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:p}},g):p.type==="code"?y.jsx(Aw,{lang:p.lang,code:p.code},g):null)}):y.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:i})});IP.displayName="StreamingContentView";const OP=R.memo(({interactionId:e,onStop:t})=>{const n=Cr(In(u=>{var p,g,v;const c=u.interactions.find(b=>b.id===e),f=(((g=(p=c==null?void 0:c.metadata)==null?void 0:p.toolCalls)==null?void 0:g.length)??0)>0,h=!u.activeStreamBuffers[e];return c&&c.status==="STREAMING"?{index:c.index,type:c.type,modelId:(v=c.metadata)==null?void 0:v.modelId,hasToolCalls:f,showToolPlaceholder:f&&h}:null}));if(!n)return console.log(`[StreamingInteractionCard] Shell data not found or not streaming for ${e}, rendering null.`),null;const{index:r,type:a,modelId:i,hasToolCalls:o,showToolPlaceholder:s}=n;return y.jsxs("div",{className:$t("p-3 my-2 border rounded-md shadow-sm bg-card border-dashed relative group"),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{className:"flex items-center gap-1.5",children:["Idx:",r," | ",a," | Streaming",y.jsxs("span",{className:"relative flex h-2 w-2",children:[y.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),y.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-sky-500"})]}),i&&y.jsxs("span",{className:"ml-1 text-blue-400",children:["(",i,")"]}),o&&y.jsxs("span",{className:"ml-2 flex items-center gap-1 text-orange-400",children:[y.jsx(av,{className:"h-3 w-3"}),"(Using Tools...)"]})]}),y.jsx("div",{className:"interaction-card-actions-sticky",children:y.jsx(Xse,{interactionId:e,onStop:t})})]}),y.jsx(IP,{interactionId:e}),s&&y.jsxs("div",{className:"mt-2 text-xs text-muted-foreground italic flex items-center gap-1",children:[y.jsx(Gn,{className:"h-3 w-3 animate-spin"}),"Executing tools..."]})]},e)});OP.displayName="StreamingInteractionCard";function Pr({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:$t("bg-accent animate-pulse rounded-md",e),...t})}const Jse=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onStopInteraction:i})=>{const o=R.useRef(null),s=Cr(In(h=>new Set(h.streamingInteractionIds))),u=t.reduce((h,p)=>{if(p.type==="message.user_assistant"){const g=p.index??-1;(h[g]=h[g]||[]).push(p)}return h},{}),c=Object.keys(u).map(Number).filter(h=>!isNaN(h)&&h>=0).sort((h,p)=>h-p),f=R.useCallback((h="smooth")=>{o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:h})},[]);return R.useEffect(()=>{const h=o.current;h&&h.scrollHeight-h.scrollTop-h.clientHeight<150&&f("smooth")},[t.length,n,f]),y.jsxs("div",{className:$t("relative",r),children:[y.jsxs("div",{ref:o,className:"h-full overflow-y-auto pr-2",children:[c.map(h=>{const p=u[h]||[],g=p.sort((v,b)=>{var _,x;return(((_=b.startedAt)==null?void 0:_.getTime())??0)-(((x=v.startedAt)==null?void 0:x.getTime())??0)})[0];return g?y.jsxs(vt.Fragment,{children:[g.prompt&&y.jsx(Yse,{interaction:g}),(g.response!==null||g.status==="STREAMING")&&(s.has(g.id)?y.jsx(OP,{interactionId:g.id,onStop:i}):y.jsx(Mee,{interaction:g,allInteractionsInGroup:p,onRegenerate:a}))]},`${h}-${g.id}`):null}),n==="loading"&&y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsx(Pr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Pr,{className:"h-12 w-3/4 mr-auto rounded-md"}),y.jsx(Pr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Pr,{className:"h-12 w-3/4 mr-auto rounded-md"})]}),t.length===0&&n==="idle"&&!e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select or start a new conversation."}),t.length===0&&n==="idle"&&e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Send a message to start chatting."})]}),y.jsx(Pt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 h-10 w-10 rounded-full shadow-lg bg-card/80 backdrop-blur-sm hover:bg-muted",onClick:()=>f("smooth"),"aria-label":"Scroll to bottom",children:y.jsx(rK,{className:"h-5 w-5"})})]})},cb=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0)).sort((i,o)=>(i.order??1/0)-(o.order??1/0));return a.length===0?null:y.jsx("div",{className:$t(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(vt.Fragment,{children:o?o():null},i.id)})})},DP=6048e5,Qse=864e5,m6=Symbol.for("constructDateFrom");function oc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&m6 in e?e[m6](t):e instanceof Date?new e.constructor(t):new Date(t)}function rs(e,t){return oc(t||e,e)}let ele={};function Yw(){return ele}function h0(e,t){var s,u,c,f;const n=Yw(),r=(t==null?void 0:t.weekStartsOn)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,a=rs(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Iv(e,t){return h0(e,{...t,weekStartsOn:1})}function jP(e,t){const n=rs(e,t==null?void 0:t.in),r=n.getFullYear(),a=oc(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Iv(a),o=oc(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=Iv(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function g6(e){const t=rs(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function tle(e,...t){const n=oc.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function y6(e,t){const n=rs(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function nle(e,t,n){const[r,a]=tle(n==null?void 0:n.in,e,t),i=y6(r),o=y6(a),s=+i-g6(i),u=+o-g6(o);return Math.round((s-u)/Qse)}function rle(e,t){const n=jP(e,t),r=oc(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Iv(r)}function ale(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ile(e){return!(!ale(e)&&typeof e!="number"||isNaN(+rs(e)))}function ole(e,t){const n=rs(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const sle={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lle=(e,t,n)=>{let r;const a=sle[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function m2(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const ule={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cle={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dle={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fle={date:m2({formats:ule,defaultWidth:"full"}),time:m2({formats:cle,defaultWidth:"full"}),dateTime:m2({formats:dle,defaultWidth:"full"})},hle={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ple=(e,t,n,r)=>hle[e];function cm(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const mle={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gle={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yle={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ble={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vle={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wle={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_le=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},xle={ordinalNumber:_le,era:cm({values:mle,defaultWidth:"wide"}),quarter:cm({values:gle,defaultWidth:"wide",argumentCallback:e=>e-1}),month:cm({values:yle,defaultWidth:"wide"}),day:cm({values:ble,defaultWidth:"wide"}),dayPeriod:cm({values:vle,defaultWidth:"wide",formattingValues:wle,defaultFormattingWidth:"wide"})};function dm(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?Ele(s,h=>h.test(o)):Sle(s,h=>h.test(o));let c;c=e.valueCallback?e.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(o.length);return{value:c,rest:f}}}function Sle(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Ele(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Cle(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const kle=/^(\d+)(th|st|nd|rd)?/i,Ale=/\d+/i,Tle={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Rle={any:[/^b/i,/^(a|c)/i]},Nle={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ile={any:[/1/i,/2/i,/3/i,/4/i]},Ole={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Dle={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jle={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mle={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ple={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Fle={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lle={ordinalNumber:Cle({matchPattern:kle,parsePattern:Ale,valueCallback:e=>parseInt(e,10)}),era:dm({matchPatterns:Tle,defaultMatchWidth:"wide",parsePatterns:Rle,defaultParseWidth:"any"}),quarter:dm({matchPatterns:Nle,defaultMatchWidth:"wide",parsePatterns:Ile,defaultParseWidth:"any",valueCallback:e=>e+1}),month:dm({matchPatterns:Ole,defaultMatchWidth:"wide",parsePatterns:Dle,defaultParseWidth:"any"}),day:dm({matchPatterns:jle,defaultMatchWidth:"wide",parsePatterns:Mle,defaultParseWidth:"any"}),dayPeriod:dm({matchPatterns:Ple,defaultMatchWidth:"any",parsePatterns:Fle,defaultParseWidth:"any"})},$le={code:"en-US",formatDistance:lle,formatLong:fle,formatRelative:ple,localize:xle,match:Lle,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ble(e,t){const n=rs(e,t==null?void 0:t.in);return nle(n,ole(n))+1}function zle(e,t){const n=rs(e,t==null?void 0:t.in),r=+Iv(n)-+rle(n);return Math.round(r/DP)+1}function MP(e,t){var f,h,p,g;const n=rs(e,t==null?void 0:t.in),r=n.getFullYear(),a=Yw(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(p=a.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=oc((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=h0(o,t),u=oc((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=h0(u,t);return+n>=+s?r+1:+n>=+c?r:r-1}function Ule(e,t){var s,u,c,f;const n=Yw(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,a=MP(e,t),i=oc((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),h0(i,t)}function qle(e,t){const n=rs(e,t==null?void 0:t.in),r=+h0(n,t)-+Ule(n,t);return Math.round(r/DP)+1}function ur(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Iu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return ur(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ur(n+1,2)},d(e,t){return ur(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ur(e.getHours()%12||12,t.length)},H(e,t){return ur(e.getHours(),t.length)},m(e,t){return ur(e.getMinutes(),t.length)},s(e,t){return ur(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return ur(a,t.length)}},Tf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},b6={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Iu.y(e,t)},Y:function(e,t,n,r){const a=MP(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return ur(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):ur(i,t.length)},R:function(e,t){const n=jP(e);return ur(n,t.length)},u:function(e,t){const n=e.getFullYear();return ur(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ur(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ur(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Iu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return ur(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=qle(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):ur(a,t.length)},I:function(e,t,n){const r=zle(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):ur(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Iu.d(e,t)},D:function(e,t,n){const r=Ble(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ur(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ur(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ur(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return ur(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Tf.noon:r===0?a=Tf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Tf.evening:r>=12?a=Tf.afternoon:r>=4?a=Tf.morning:a=Tf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Iu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Iu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ur(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):ur(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Iu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Iu.s(e,t)},S:function(e,t){return Iu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return w6(r);case"XXXX":case"XX":return Xc(r);case"XXXXX":case"XXX":default:return Xc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return w6(r);case"xxxx":case"xx":return Xc(r);case"xxxxx":case"xxx":default:return Xc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+v6(r,":");case"OOOO":default:return"GMT"+Xc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+v6(r,":");case"zzzz":default:return"GMT"+Xc(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return ur(r,t.length)},T:function(e,t,n){return ur(+e,t.length)}};function v6(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+ur(i,2)}function w6(e,t){return e%60===0?(e>0?"-":"+")+ur(Math.abs(e)/60,2):Xc(e,t)}function Xc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=ur(Math.trunc(r/60),2),i=ur(r%60,2);return n+a+t+i}const _6=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},PP=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Hle=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return _6(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",_6(r,t)).replace("{{time}}",PP(a,t))},Vle={p:PP,P:Hle},Gle=/^D+$/,Wle=/^Y+$/,Kle=["D","DD","YY","YYYY"];function Zle(e){return Gle.test(e)}function Yle(e){return Wle.test(e)}function Xle(e,t,n){const r=Jle(e,t,n);if(console.warn(r),Kle.includes(e))throw new RangeError(r)}function Jle(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qle=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tue=/^'([^]*?)'?$/,nue=/''/g,rue=/[a-zA-Z]/;function x6(e,t,n){var f,h,p,g;const r=Yw(),a=r.locale??$le,i=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,s=rs(e,n==null?void 0:n.in);if(!ile(s))throw new RangeError("Invalid time value");let u=t.match(eue).map(v=>{const b=v[0];if(b==="p"||b==="P"){const _=Vle[b];return _(v,a.formatLong)}return v}).join("").match(Qle).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:aue(v)};if(b6[b])return{isToken:!0,value:v};if(b.match(rue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(u=a.localize.preprocessor(s,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Yle(b)||Zle(b))&&Xle(b,t,String(e));const _=b6[b[0]];return _(s,b,a.localize,c)}).join("")}function aue(e){const t=e.match(tue);return t?t[1].replace(nue,"'"):e}const iue=".litechat/conversations",FP="/synced_repos",g2="sync_repos";async function oue(e,t,n){n(t.id,"syncing");const r=kr(`${FP}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let o=!1;try{await e.promises.stat(Dl(r,".git")),o=!0}catch(s){if(s.code==="ENOENT")o=!1;else throw s}o?(ot.info(`Pulling latest changes for "${t.name}"...`),await Ww(r,i,a),ot.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(ot.info(`Cloning repository "${t.name}"...`),await kP(r,t.remoteUrl,i,a),ot.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(o){console.error(`Failed to initialize/sync repository ${t.name}:`,o),n(t.id,"error")}}async function sue(e,t,n,r,a,i,o){var h,p;r(t.id,"syncing");const s=kr(`${FP}/${n.id}`),u=Dl(s,iue,`${t.id}.json`),c={username:n.username,password:n.password},f=n.branch||"main";try{try{await e.promises.stat(Dl(s,".git"))}catch(x){if(x.code==="ENOENT"){ot.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}ot.info(`Pulling latest changes for "${n.name}"...`),await Ww(s,f,c);let g=null,v=null;try{const x=await zh(u),S=new TextDecoder().decode(x);g=JSON.parse(S),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${u} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),ot.warning(`Could not read remote version of conversation: ${x.message}`))}const b=t.updatedAt.getTime(),_=((p=t.lastSyncedAt)==null?void 0:p.getTime())??0;if(!g||b>(v??0)||b>_&&b>=(v??0)){ot.info("Local changes detected. Pushing to remote...");const x=await Ht.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,C=JSON.stringify({conversation:E,interactions:x},null,2);await Kw(u,C),await Wk(s,`Sync conversation: ${t.title} (${t.id})`),await Kk(s,f,c),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),ot.success("Conversation synced successfully (pushed).")}else if(v&&v>b){ot.info("Remote changes detected. Updating local conversation...");const x={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await Ht.saveConversation(x),await Ht.deleteInteractionsForConversation(t.id);const S=g.interactions.map(E=>Ht.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&o()==="conversation"&&await Cr.getState().loadInteractions(t.id),r(t.id,"idle"),ot.success("Conversation synced successfully (pulled).")}else ot.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const Lo=zl(Ul((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,isVfsEnabledForItem:!1,vfsKey:null,configuredVfsKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,n&&ot.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(u=>u.parentId===a).map(u=>u.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1})},setIsVfsEnabledForItem:n=>{console.log(`[VfsStore] Setting isVfsEnabledForItem to: ${n}`),e({isVfsEnabledForItem:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):(t().clearSelection(),t().vfsKey===t().configuredVfsKey&&e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}))},setVfsKey:n=>{const r=t().configuredVfsKey;console.log(`[VfsStore] Setting vfsKey to: ${n} (Current configured: ${r})`),e({vfsKey:n}),n!==r?(console.log("[VfsStore] vfsKey changed. Resetting VFS state."),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}),t().initializeVFS(n||"default_fallback_key")):n===r&&!t().fs&&(console.log("[VfsStore] vfsKey matches configured key, but fs not ready. Retrying initialization."),t().initializeVFS(n||"default_fallback_key"))},setConfiguredVfsKey:n=>{e({configuredVfsKey:n})},initializeVFS:async(n=t().vfsKey||"default_fallback_key")=>{if(!n){console.warn("[VfsStore] initializeVFS called without a valid vfsKey.");return}if(t().configuredVfsKey===n&&t().fs||t().loading){console.log(`[VfsStore] Initialization skipped for key "${n}" (already initialized or loading).`);return}const{_setLoading:r,_setError:a,_addNodes:i,_setFsInstance:o,setConfiguredVfsKey:s}=t();r(!0),a(null),o(null),console.log(`[VfsStore] Initializing VFS with key: ${n}`);try{const u=await $se(n);if(!u)throw new Error("Filesystem backend initialization failed.");o(u),s(n),console.log(`[VfsStore] VFS instance set for key: ${n}`);const c="vfs-root";let f=t().nodes[c];try{await u.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(h){if(h.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw h}if(!f||f.path!=="/"){const h=Date.now();f={id:c,parentId:null,name:"",path:"/",type:"folder",createdAt:h,lastModified:h},i([f]),console.log("[VfsStore] Root node added/updated in state.")}e(h=>{h.rootId=f.id,h.currentParentId=f.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${f.id}`),await t().fetchNodes(f.id)}catch(u){console.error("Failed to initialize VFS:",u),a("Failed to initialize VFS."),o(null),s(null)}finally{r(!1)}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:u}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${f}`);const h=await Zk(f);console.log(`[VfsStore] Fetched ${h.length} entries for ${f}`);const p=n??u??"",g=new Set(h.map(_=>_.path)),v=Object.values(s).filter(_=>_.parentId===n&&!g.has(_.path)).map(_=>_.id);v.length>0&&(console.log(`[VfsStore] Removing ${v.length} nodes.`),t()._removeNodes(v));const b=h.map(_=>{const x=Object.values(s).find(E=>E.path===_.path),S=Date.now();return{id:(x==null?void 0:x.id)||Bo(),parentId:n,name:_.name,path:_.path,type:_.isDirectory?"folder":"file",size:_.size,createdAt:(x==null?void 0:x.createdAt)??S,lastModified:_.lastModified.getTime(),mimeType:_.isDirectory?void 0:_.mimeType}});b.length>0&&(console.log(`[VfsStore] Adding/Updating ${b.length} nodes.`),i(b)),e(_=>{const x=b.map(S=>S.id);(!_.childrenMap[p]||JSON.stringify(_.childrenMap[p].sort())!==JSON.stringify(x.sort()))&&(_.childrenMap[p]=x,console.log(`[VfsStore] Updated childrenMap for parent: ${p}`))})}catch(c){console.error("Failed to fetch VFS nodes:",c),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=kr(n);if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i}=t(),o=kr(n),s=r(o);s&&s.type==="folder"?(e(u=>{u.currentParentId=s.id}),t().childrenMap[s.id]||await a(s.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,_addNodes:c}=t();if(!o){i("Filesystem not initialized.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const f=n?s[n]:s[u||""],h=f?f.path:"/",p=ov(h,r.trim());try{throw await o.promises.stat(p),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await RP(p);const g=Date.now(),b={id:Bo(),parentId:n,name:r.trim(),path:p,type:"folder",createdAt:g,lastModified:g};c([b])}catch(f){console.error("Failed to create directory:",f),i(f.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u}=t();if(!o){i("Filesystem not initialized.");return}a(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/";await NP(Array.from(r),f),await t().fetchNodes(n)}catch(c){console.error("Failed to upload files:",c),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{for(const s of n){const u=t().nodes[s];u&&await Zw(u.path,u.type==="folder")}i(n)}catch(s){console.error("Failed to delete nodes:",s),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:u,rootId:c}=t();if(!u){i("Filesystem not initialized.");return}if(!r.trim()){i("Name cannot be empty.");return}const f=s[n];if(!f){i("Item not found.");return}if(f.name!==r.trim()){a(!0);try{const h=f.parentId?s[f.parentId]:s[c||""],p=h?h.path:"/",g=ov(p,r.trim());try{throw await u.promises.stat(g),new Error(`"${r.trim()}" already exists.`)}catch(b){if(b.code!=="ENOENT")throw b}await Use(f.path,g);const v={name:r.trim(),path:g,lastModified:Date.now()};o(n,v),await t().fetchNodes(f.parentId)}catch(h){console.error("Failed to rename item:",h),i(h.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i}=t();if(!a)return i("Filesystem not initialized."),null;const o=r[n];if(!o||o.type!=="file")return i("File not found."),null;try{const s=await zh(o.path),u=o.mimeType||"application/octet-stream",c=new Blob([s],{type:u});return{name:o.name,blob:c}}catch(s){return console.error("Failed to download file:",s),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),lue=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${x6(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${x6(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,u,c,f,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(u=r.prompt.metadata)!=null&&u.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(p=>{n+=`- ${p.name} (${p.type}, ${qm(p.size)}) ${p.source==="vfs"?`(VFS: ${p.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((f=r.metadata)!=null&&f.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n},y2=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},uue="/synced_repos",Kr=zl(Ul((e,t)=>({conversations:[],projects:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{const n=Lo.getState();if(n.fs&&n.configuredVfsKey===g2&&!n.loading)return n.fs;console.log(`[ConversationStore] Sync VFS not ready (key: ${n.configuredVfsKey}, fs: ${!!n.fs}, loading: ${n.loading}). Initializing...`);try{await n.initializeVFS(g2);const r=Lo.getState();if(r.fs&&r.configuredVfsKey===g2)return console.log("[ConversationStore] Sync VFS initialized successfully."),r.fs;throw new Error("VFS initialization did not complete successfully.")}catch(r){return console.error("[ConversationStore] Failed to ensure Sync VFS:",r),ot.error(`Filesystem error for sync: ${r instanceof Error?r.message:String(r)}`),null}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([Ht.loadConversations(),Ht.loadProjects(),Ht.loadSyncRepos()]),i={};n.forEach(o=>{if(o.syncRepoId){const s=o.lastSyncedAt instanceof Date?o.lastSyncedAt.getTime():null,u=o.updatedAt instanceof Date?o.updatedAt.getTime():null;s?u&&u>s?i[o.id]="needs-sync":i[o.id]="idle":i[o.id]="needs-sync"}else i[o.id]="idle"}),e({conversations:n,projects:r,syncRepos:a,conversationSyncStatus:i,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=Bo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const o=t().getConversationById(r);if(o)await Ht.saveConversation(o);else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(u=>u.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([u])=>u!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){const u=o.conversations[s].metadata??{},c=r.metadata??{},f={...u,...c};Object.assign(o.conversations[s],{...r,metadata:f,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),p=o.conversations[s].lastSyncedAt instanceof Date?o.conversations[s].lastSyncedAt.getTime():null,g=o.conversations[s].updatedAt.getTime();"syncRepoId"in r?o.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(!p||g>p)&&(o.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Ht.saveConversation(o)}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const u=s.conversations.findIndex(c=>c.id===n);if(u!==-1){s.conversations[u]=a;const c=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,f=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&c&&f<=c?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){o.conversations[s]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,c=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&c<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await Ht.deleteConversation(n),await Ht.deleteInteractionsForConversation(n),r===n&&a==="conversation"&&await Cr.getState().setCurrentConversationId(null)}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{if(i){s.conversations.push(i);const u=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,c=i.updatedAt.getTime();s.conversationSyncStatus[n]=i.syncRepoId&&u&&c<=u?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},addProject:async n=>{const r=n.parentId??null,a=t().getProjectById(r),i=a?a.path:"/",o=n.name.trim(),s=ov(i,o),u=Bo(),c=new Date,f={id:u,path:s,createdAt:c,updatedAt:c,name:o,parentId:r,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,metadata:n.metadata??{}};e(h=>{h.projects.push(f)});try{const h=t().getProjectById(u);if(h){const p=JSON.parse(JSON.stringify(h));await Ht.saveProject(p)}else throw new Error("Failed to retrieve newly added project state");return u}catch(h){throw console.error("ConversationStore: Error adding project",h),h.name==="ConstraintError"?ot.error(`A project or folder named "${o}" already exists in this location.`):ot.error("Failed to save new project."),e(p=>({error:"Failed to save new project",projects:p.projects.filter(g=>g.id!==u)})),h}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ConversationStore: Project ${n} not found.`);return}let i=a.path,o=a.name;if(r.name!==void 0&&r.name!==a.name){o=r.name.trim();const u=t().getProjectById(a.parentId),c=u?u.path:"/";i=ov(c,o)}e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&Object.assign(u.projects[c],{...r,name:o,path:i,updatedAt:new Date})});const s=t().getProjectById(n);if(s)try{const u=JSON.parse(JSON.stringify(s));await Ht.saveProject(u)}catch(u){throw console.error("ConversationStore: Error updating project",u),u.name==="ConstraintError"?ot.error(`A project or folder named "${o}" already exists in this location.`):ot.error("Failed to save project update."),e(c=>{const f=c.projects.findIndex(h=>h.id===n);f!==-1&&(c.projects[f]=a),c.error="Failed to save project update"}),u}else console.error("ConversationStore: Failed to retrieve updated project state after update."),e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&(u.projects[c]=a),u.error="Failed to save project update (state error)"})},deleteProject:async n=>{const r=t().selectedItemId,a=t().selectedItemType;if(!t().projects.find(c=>c.id===n))return;const o=new Set,s=new Set,u=c=>{o.add(c),t().projects.filter(f=>f.parentId===c).forEach(f=>u(f.id)),t().conversations.filter(f=>f.projectId===c).forEach(f=>s.add(f.id))};u(n),e(c=>({projects:c.projects.filter(f=>!o.has(f.id)),conversations:c.conversations.map(f=>s.has(f.id)?{...f,projectId:null}:f),selectedItemId:o.has(r??"")?null:r,selectedItemType:o.has(r??"")?null:a}));try{await Ht.deleteProject(n),o.has(r??"")&&await Cr.getState().setCurrentConversationId(null)}catch(c){throw console.error("ConversationStore: Error deleting project",c),e({error:"Failed to delete project. Please reload."}),c}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await Cr.getState().setCurrentConversationId(r==="conversation"?n:null)):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{try{const r=await n.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.conversation||!Array.isArray(a.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const i=a.conversation,o=a.interactions;if(!i.id||!i.title||!i.createdAt||!i.updatedAt)throw new Error("Invalid conversation data in import file.");const s=await t().addConversation({title:i.title||"Imported Chat",metadata:i.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(c=>Ht.saveInteraction({...c,conversationId:s,id:Bo()}));await Promise.all(u),await t().selectItem(s,"conversation"),ot.success("Conversation imported successfully.")}catch(r){throw console.error("ConversationStore: Error importing conversation",r),ot.error(`Import failed: ${r instanceof Error?r.message:String(r)}`),r}},exportConversation:async(n,r)=>{try{const a=t().conversations.find(c=>c.id===n);if(!a)throw new Error("Conversation not found.");const i=await Ht.loadInteractionsForConversation(n);let o,s;const u=a.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(r==="json"){const f=JSON.stringify({conversation:a,interactions:i},null,2);o=new Blob([f],{type:"application/json"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.json`}else if(r==="md"){const c=lue(a,i);o=new Blob([c],{type:"text/markdown"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");y2(o,s),ot.success(`Conversation exported as ${r.toUpperCase()}.`)}catch(a){throw console.error("ConversationStore: Error exporting conversation",a),ot.error(`Export failed: ${a instanceof Error?a.message:String(a)}`),a}},exportProject:async n=>{try{const r=t().getProjectById(n);if(!r)throw new Error("Project not found.");const a=t().projects,i=t().conversations,o=async p=>{const g=a.find(x=>x.id===p);if(!g)throw new Error(`Project ${p} not found in state.`);const v=a.filter(x=>x.parentId===p),b=i.filter(x=>x.projectId===p),_=[];for(const x of v)_.push(await o(x.id));for(const x of b){const S=await Ht.loadInteractionsForConversation(x.id);_.push({conversation:x,interactions:S})}return{project:g,children:_}},s=await o(n),u=JSON.stringify(s,null,2),c=new Blob([u],{type:"application/json"}),h=`litechat_project_${r.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${n.substring(0,6)}.json`;y2(c,h),ot.success(`Project "${r.name}" exported.`)}catch(r){throw console.error("ConversationStore: Error exporting project",r),ot.error(`Project export failed: ${r instanceof Error?r.message:String(r)}`),r}},exportAllConversations:async()=>{try{const n=t().conversations,r=[];for(const s of n){const u=await Ht.loadInteractionsForConversation(s.id);r.push({conversation:s,interactions:u})}const a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/json"}),o=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;y2(i,o),ot.success("All conversations exported.")}catch(n){throw console.error("ConversationStore: Error exporting conversations",n),ot.error(`Export failed: ${n instanceof Error?n.message:String(n)}`),n}},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Ht.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=Bo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await Ht.saveSyncRepo(s)}else throw new Error("Failed to retrieve newly added sync repo state");return ot.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(u=>u.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,branch:r.branch||o.syncRepos[s].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Ht.saveSyncRepo(o),ot.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const u=s.syncRepos.findIndex(c=>c.id===n);u!==-1&&(s.syncRepos[u]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(o=>o.id===n);if(!r)return;const a=kr(`${uue}/${n}`);if(!await t()._ensureSyncVfsReady()){ot.error("Filesystem not ready, cannot delete repository folder.");return}e(o=>({syncRepos:o.syncRepos.filter(s=>s.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(o.repoInitializationStatus).filter(([s])=>s!==n))}));try{await Ht.deleteSyncRepo(n),ot.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await Zw(a,!0),ot.info(`Removed local sync folder for "${r.name}".`)}catch(o){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,o),o.code!=="ENOENT"&&ot.warning(`Failed to remove local sync folder: ${o.message}`)}}catch(o){throw console.error("ConversationStore: Error deleting sync repo",o),e(s=>{r&&s.syncRepos.push(r),s.error="Failed to delete sync repository"}),o}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),ot.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){ot.error("Sync repository configuration not found.");return}const a=await t()._ensureSyncVfsReady();if(!a){t()._setRepoInitializationStatus(n,"error");return}await oue(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){ot.error("Conversation not found for syncing.");return}if(!r.syncRepoId){ot.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(s=>s.id===r.syncRepoId);if(!a){ot.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}const i=await t()._ensureSyncVfsReady();if(!i){t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await sue(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const o=t().getConversationById(n);o&&e(s=>{const u=s.conversations.findIndex(c=>c.id===n);u!==-1&&(s.conversations[u]=o)})},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},getTopLevelProjectId:(n,r)=>{if(!n||!r)return null;if(r==="conversation"){const i=t().getConversationById(n);n=(i==null?void 0:i.projectId)??null,r="project"}if(r!=="project"||!n)return null;let a=t().getProjectById(n);for(;a!=null&&a.parentId;){const i=t().getProjectById(a.parentId);if(!i)return a.id;a=i}return(a==null?void 0:a.id)??null},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const o=t().getConversationById(r);if(!o){console.warn("Cannot update tool settings: Selected conversation not found.");return}const s=o.metadata??{},u={...s};n.enabledTools!==void 0&&(u.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(u.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(u)!==JSON.stringify(s)||!o.metadata)&&await i(r,{metadata:u})}}))),fi=zl(Ul(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})}}))),cue=Symbol("Let zodToJsonSchema decide on which parser to use"),S6={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},due=e=>typeof e=="string"?{...S6,name:e}:{...S6,...e},fue=e=>{const t=due(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function LP(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function dr(e,t,n,r,a){e[t]=n,LP(e,t,r,a)}function hue(){return{}}function pue(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Mt.ZodAny&&(n.items=nr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&dr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&dr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(dr(n,"minItems",e.exactLength.value,e.exactLength.message,t),dr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function mue(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function gue(){return{type:"boolean"}}function $P(e,t){return nr(e.type._def,t)}const yue=(e,t)=>nr(e.innerType._def,t);function BP(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>BP(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return bue(e,t)}}const bue=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":dr(n,"minimum",r.value,r.message,t);break;case"max":dr(n,"maximum",r.value,r.message,t);break}return n};function vue(e,t){return{...nr(e.innerType._def,t),default:e.defaultValue()}}function wue(e,t){return t.effectStrategy==="input"?nr(e.schema._def,t):{}}function _ue(e){return{type:"string",enum:Array.from(e.values)}}const xue=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Sue(e,t){const n=[nr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),nr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(xue(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...u}=i;o=u}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function Eue(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let b2;const jo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(b2===void 0&&(b2=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),b2),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function zP(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Mo(n,"email",r.message,t);break;case"format:idn-email":Mo(n,"idn-email",r.message,t);break;case"pattern:zod":ci(n,jo.email,r.message,t);break}break;case"url":Mo(n,"uri",r.message,t);break;case"uuid":Mo(n,"uuid",r.message,t);break;case"regex":ci(n,r.regex,r.message,t);break;case"cuid":ci(n,jo.cuid,r.message,t);break;case"cuid2":ci(n,jo.cuid2,r.message,t);break;case"startsWith":ci(n,RegExp(`^${v2(r.value,t)}`),r.message,t);break;case"endsWith":ci(n,RegExp(`${v2(r.value,t)}$`),r.message,t);break;case"datetime":Mo(n,"date-time",r.message,t);break;case"date":Mo(n,"date",r.message,t);break;case"time":Mo(n,"time",r.message,t);break;case"duration":Mo(n,"duration",r.message,t);break;case"length":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{ci(n,RegExp(v2(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Mo(n,"ipv4",r.message,t),r.version!=="v4"&&Mo(n,"ipv6",r.message,t);break}case"base64url":ci(n,jo.base64url,r.message,t);break;case"jwt":ci(n,jo.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&ci(n,jo.ipv4Cidr,r.message,t),r.version!=="v4"&&ci(n,jo.ipv6Cidr,r.message,t);break}case"emoji":ci(n,jo.emoji(),r.message,t);break;case"ulid":{ci(n,jo.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Mo(n,"binary",r.message,t);break}case"contentEncoding:base64":{dr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{ci(n,jo.base64,r.message,t);break}}break}case"nanoid":ci(n,jo.nanoid,r.message,t)}return n}function v2(e,t){return t.patternStrategy==="escape"?kue(e):e}const Cue=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function kue(e){let t="";for(let n=0;n<e.length;n++)Cue.has(e[n])||(t+="\\"),t+=e[n];return t}function Mo(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):dr(e,"format",t,n,r)}function ci(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:E6(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):dr(e,"pattern",E6(t,r),n,r)}function E6(e,t){var u;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let c=0;c<r.length;c++){if(i){a+=r[c],i=!1;continue}if(n.i){if(o){if(r[c].match(/[a-z]/)){s?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),s=!1):r[c+1]==="-"&&((u=r[c+2])!=null&&u.match(/[a-z]/))?(a+=r[c],s=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=o?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?i=!0:o&&r[c]==="]"?o=!1:!o&&r[c]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function UP(e,t){var r,a,i,o,s,u;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Mt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,f)=>({...c,[f]:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",f]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Mt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...f}=zP(e.keyType._def,t);return{...n,propertyNames:f}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===Mt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===Mt.ZodBranded&&e.keyType._def.type._def.typeName===Mt.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){const{type:c,...f}=$P(e.keyType._def,t);return{...n,propertyNames:f}}}return n}function Aue(e,t){if(t.mapStrategy==="record")return UP(e,t);const n=nr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Tue(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Rue(){return{not:{}}}function Nue(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Ov={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Iue(e,t){if(t.target==="openApi3")return C6(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in Ov&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=Ov[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return C6(e,t)}const C6=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>nr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Oue(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:Ov[e.innerType._def.typeName],nullable:!0}:{type:[Ov[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=nr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=nr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Due(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",LP(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function jue(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let u=i[s];if(u===void 0||u._def===void 0)continue;let c=Pue(u);c&&n&&(u instanceof qo&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),c=!1);const f=nr(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});f!==void 0&&(r.properties[s]=f,c||a.push(s))}a.length&&(r.required=a);const o=Mue(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Mue(e,t){if(e.catchall._def.typeName!=="ZodNever")return nr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Pue(e){try{return e.isOptional()}catch{return!0}}const Fue=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return nr(e.innerType._def,t);const n=nr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Lue=(e,t)=>{if(t.pipeStrategy==="input")return nr(e.in._def,t);if(t.pipeStrategy==="output")return nr(e.out._def,t);const n=nr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=nr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function $ue(e,t){return nr(e.type._def,t)}function Bue(e,t){const r={type:"array",uniqueItems:!0,items:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&dr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&dr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function zue(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>nr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:nr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>nr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Uue(){return{not:{}}}function que(){return{}}const Hue=(e,t)=>nr(e.innerType._def,t),Vue=(e,t,n)=>{switch(t){case Mt.ZodString:return zP(e,n);case Mt.ZodNumber:return Due(e,n);case Mt.ZodObject:return jue(e,n);case Mt.ZodBigInt:return mue(e,n);case Mt.ZodBoolean:return gue();case Mt.ZodDate:return BP(e,n);case Mt.ZodUndefined:return Uue();case Mt.ZodNull:return Nue(n);case Mt.ZodArray:return pue(e,n);case Mt.ZodUnion:case Mt.ZodDiscriminatedUnion:return Iue(e,n);case Mt.ZodIntersection:return Sue(e,n);case Mt.ZodTuple:return zue(e,n);case Mt.ZodRecord:return UP(e,n);case Mt.ZodLiteral:return Eue(e,n);case Mt.ZodEnum:return _ue(e);case Mt.ZodNativeEnum:return Tue(e);case Mt.ZodNullable:return Oue(e,n);case Mt.ZodOptional:return Fue(e,n);case Mt.ZodMap:return Aue(e,n);case Mt.ZodSet:return Bue(e,n);case Mt.ZodLazy:return()=>e.getter()._def;case Mt.ZodPromise:return $ue(e,n);case Mt.ZodNaN:case Mt.ZodNever:return Rue();case Mt.ZodEffects:return wue(e,n);case Mt.ZodAny:return hue();case Mt.ZodUnknown:return que();case Mt.ZodDefault:return vue(e,n);case Mt.ZodBranded:return $P(e,n);case Mt.ZodReadonly:return Hue(e,n);case Mt.ZodCatch:return yue(e,n);case Mt.ZodPipeline:return Lue(e,n);case Mt.ZodFunction:case Mt.ZodVoid:case Mt.ZodSymbol:return;default:return(r=>{})()}};function nr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(u!==cue)return u}if(r&&!n){const u=Gue(r,t);if(u!==void 0)return u}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Vue(e,e.typeName,t),o=typeof i=="function"?nr(i(),t):i;if(o&&Kue(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return a.jsonSchema=o,u}return a.jsonSchema=o,o}const Gue=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Wue(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Wue=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Kue=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Zue=(e,t)=>{const n=fue(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,f])=>({...u,[c]:nr(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=nr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var p0={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},m0={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},g0={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},y0={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},b0={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},Yue=[p0,m0,g0,y0,b0];p0.code+"",m0.code+"",g0.code+"",y0.code+"",b0.code+"";p0.name+"",p0.code,m0.name+"",m0.code,g0.name+"",g0.code,y0.name+"",y0.code,b0.name+"",b0.code;Yue.map(e=>e.code);function Xue(e){const t=["ROOT"];let n=-1,r=null;function a(u,c,f){switch(u){case'"':{n=c,t.pop(),t.push(f),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(f),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(f),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(f),t.push("INSIDE_ARRAY_START");break}}}function i(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function o(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let u=0;u<e.length;u++){const c=e[u];switch(t[t.length-1]){case"ROOT":a(c,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,u);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=u}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=u,t.pop();break}default:{n=u,a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}default:{n=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=u;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,u+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u)):n=u;break}}}let s=e.slice(0,n+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const f=e.substring(r,e.length);"true".startsWith(f)?s+="true".slice(f.length):"false".startsWith(f)?s+="false".slice(f.length):"null".startsWith(f)&&(s+="null".slice(f.length))}}return s}function Jue(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=sd({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=sd({text:Xue(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Que={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},ece={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},tce={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},nce={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},rce={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},ace={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},ice={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},oce={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},sce={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},lce={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},uce={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},cce={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},dce={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},fce={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},hce={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},pce={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},Xw=[Que,ece,tce,nce,rce,ace,ice,oce,sce,lce,uce,cce,dce,fce,hce,pce];Object.fromEntries(Xw.map(e=>[e.code,e]));Object.fromEntries(Xw.map(e=>[e.name,e.code]));Xw.map(e=>e.code);function Wa(e,t){const n=Xw.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function mce(e,t){var n;const r=(n=void 0)!=null?n:!1;return gce(Zue(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var zE=Symbol.for("vercel.ai.schema");function gce(e,{validate:t}={}){return{[zE]:!0,_type:void 0,[Mb]:!0,jsonSchema:e,validate:t}}function yce(e){return typeof e=="object"&&e!==null&&zE in e&&e[zE]===!0&&"jsonSchema"in e&&"validate"in e}function Jw(e){return yce(e)?e:mce(e)}const k6=globalThis||void 0||self;var bce=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof k6=="object"?k6:{},ad="1.9.0",A6=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function vce(e){var t=new Set([e]),n=new Set,r=e.match(A6);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(u){return u===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(u){if(t.has(u))return!0;if(n.has(u))return!1;var c=u.match(A6);if(!c)return i(u);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||a.major!==f.major?i(u):a.major===0?a.minor===f.minor&&a.patch<=f.patch?o(u):i(u):a.minor<=f.minor?o(u):i(u)}}var wce=vce(ad),_ce=ad.split(".")[0],v0=Symbol.for("opentelemetry.js.api."+_ce),w0=bce;function Yk(e,t,n,r){var a;r===void 0&&(r=!1);var i=w0[v0]=(a=w0[v0])!==null&&a!==void 0?a:{version:ad};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==ad){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+ad);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+ad+"."),!0}function _0(e){var t,n,r=(t=w0[v0])===null||t===void 0?void 0:t.version;if(!(!r||!wce(r)))return(n=w0[v0])===null||n===void 0?void 0:n[e]}function Xk(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+ad+".");var n=w0[v0];n&&delete n[e]}var xce=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Sce=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Ece=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fm("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fm("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fm("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fm("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fm("verbose",this._namespace,t)},e}();function fm(e,t,n){var r=_0("diag");if(r)return n.unshift(t),r[e].apply(r,Sce([],xce(n),!1))}var qi;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(qi||(qi={}));function Cce(e,t){e<qi.NONE?e=qi.NONE:e>qi.ALL&&(e=qi.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",qi.ERROR),warn:n("warn",qi.WARN),info:n("info",qi.INFO),debug:n("debug",qi.DEBUG),verbose:n("verbose",qi.VERBOSE)}}var kce=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Ace=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Tce="diag",Dv=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=_0("diag");if(s)return s[a].apply(s,Ace([],kce(i),!1))}}var n=this,r=function(a,i){var o,s,u;if(i===void 0&&(i={logLevel:qi.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var f=_0("diag"),h=Cce((s=i.logLevel)!==null&&s!==void 0?s:qi.INFO,a);if(f&&!i.suppressOverrideMessage){var p=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+p),h.warn("Current logger will overwrite one already registered from "+p)}return Yk("diag",h,n,!0)};n.setLogger=r,n.disable=function(){Xk(Tce,n)},n.createComponentLogger=function(a){return new Ece(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function Rce(e){return Symbol.for(e)}var Nce=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Ice=new Nce,Oce=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Dce=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},jce=function(){function e(){}return e.prototype.active=function(){return Ice},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,Dce([r],Oce(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Mce=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Pce=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},w2="context",Fce=new jce,qP=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Yk(w2,t,Dv.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,Pce([t,n,r],Mce(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return _0(w2)||Fce},e.prototype.disable=function(){this._getContextManager().disable(),Xk(w2,Dv.instance())},e}(),UE;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(UE||(UE={}));var HP="0000000000000000",VP="00000000000000000000000000000000",Lce={traceId:VP,spanId:HP,traceFlags:UE.NONE},wm=function(){function e(t){t===void 0&&(t=Lce),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),Jk=Rce("OpenTelemetry Context Key SPAN");function Qk(e){return e.getValue(Jk)||void 0}function $ce(){return Qk(qP.getInstance().active())}function eA(e,t){return e.setValue(Jk,t)}function Bce(e){return e.deleteValue(Jk)}function zce(e,t){return eA(e,new wm(t))}function GP(e){var t;return(t=Qk(e))===null||t===void 0?void 0:t.spanContext()}var Uce=/^([0-9a-f]{32})$/i,qce=/^[0-9a-f]{16}$/i;function Hce(e){return Uce.test(e)&&e!==VP}function Vce(e){return qce.test(e)&&e!==HP}function WP(e){return Hce(e.traceId)&&Vce(e.spanId)}function Gce(e){return new wm(e)}var _2=qP.getInstance(),KP=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=_2.active());var a=!!(n!=null&&n.root);if(a)return new wm;var i=r&&GP(r);return Wce(i)&&WP(i)?new wm(i):new wm},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var u=o??_2.active(),c=this.startSpan(t,i,u),f=eA(u,c);return _2.with(f,s,void 0,c)}},e}();function Wce(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Kce=new KP,Zce=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Kce},e}(),Yce=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new KP},e}(),Xce=new Yce,T6=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Zce(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Xce},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),jv;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(jv||(jv={}));var x2="trace",Jce=function(){function e(){this._proxyTracerProvider=new T6,this.wrapSpanContext=Gce,this.isSpanContextValid=WP,this.deleteSpan=Bce,this.getSpan=Qk,this.getActiveSpan=$ce,this.getSpanContext=GP,this.setSpan=eA,this.setSpanContext=zce}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=Yk(x2,this._proxyTracerProvider,Dv.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return _0(x2)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Xk(x2,Dv.instance()),this._proxyTracerProvider=new T6},e}(),Qce=Jce.getInstance(),ede=Object.defineProperty,tA=(e,t)=>{for(var n in t)ede(e,n,{get:t[n],enumerable:!0})};function Mv(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function R6(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function N6({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:u}=await i.read();if(s)break;e.write(u)}}catch(s){throw s}finally{e.end()}})()}var ZP="AI_InvalidArgumentError",YP=`vercel.ai.error.${ZP}`,tde=Symbol.for(YP),XP,Fo=class extends xn{constructor({parameter:e,value:t,message:n}){super({name:ZP,message:`Invalid argument for parameter ${e}: ${n}`}),this[XP]=!0,this.parameter=e,this.value=t}static isInstance(e){return xn.hasMarker(e,YP)}};XP=tde;var JP="AI_RetryError",QP=`vercel.ai.error.${JP}`,nde=Symbol.for(QP),eF,I6=class extends xn{constructor({message:e,reason:t,errors:n}){super({name:JP,message:e}),this[eF]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return xn.hasMarker(e,QP)}};eF=nde;var rde=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>tF(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function tF(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(_b(i)||t===0)throw i;const o=jU(i),s=[...a,i],u=s.length;if(u>t)throw new I6({message:`Failed after ${u} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&ga.isInstance(i)&&i.isRetryable===!0&&u<=t)return await IU(n),tF(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw u===1?i:new I6({message:`Failed after ${u} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function ade({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Fo({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Fo({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:rde({maxRetries:t})}}function qE({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function ide({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var ode={startSpan(){return db},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(db);if(typeof n=="function")return n(db);if(typeof r=="function")return r(db)}},db={spanContext(){return sde},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},sde={traceId:"",spanId:"",traceFlags:0};function lde({isEnabled:e=!1,tracer:t}={}){return e?t||Qce.getTracer("ai"):ode}function HE({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:jv.ERROR,message:o.message})):i.setStatus({code:jv.ERROR})}finally{i.end()}throw o}})}function Lf({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var ude=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=Yf(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=CD(this.base64Data)),this.uint8ArrayData}},cde=class extends ude{constructor(e){super(e),this.type="file"}},dde=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function fde(e){for(const t of dde)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var nF="AI_NoObjectGeneratedError",rF=`vercel.ai.error.${nF}`,hde=Symbol.for(rF),aF,O6=class extends xn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:nF,message:e,cause:t}),this[aF]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return xn.hasMarker(e,rF)}};aF=hde;var iF="AI_DownloadError",oF=`vercel.ai.error.${iF}`,pde=Symbol.for(oF),sF,S2=class extends xn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:iF,message:a,cause:r}),this[sF]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return xn.hasMarker(e,oF)}};sF=pde;async function mde({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new S2({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw S2.isInstance(a)?a:new S2({url:r,cause:a})}}var lF="AI_InvalidDataContentError",uF=`vercel.ai.error.${lF}`,gde=Symbol.for(uF),cF,D6=class extends xn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:lF,message:n,cause:t}),this[cF]=!0,this.content=e}static isInstance(e){return xn.hasMarker(e,uF)}};cF=gde;var dF=$.union([$.string(),$.instanceof(Uint8Array),$.instanceof(ArrayBuffer),$.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function fF(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Yf(new Uint8Array(e)):Yf(e)}function Pv(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return CD(e)}catch(t){throw new D6({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new D6({content:e})}function yde(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var hF="AI_InvalidMessageRoleError",pF=`vercel.ai.error.${hF}`,bde=Symbol.for(pF),mF,vde=class extends xn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:hF,message:t}),this[mF]=!0,this.role=e}static isInstance(e){return xn.hasMarker(e,pF)}};mF=bde;function wde(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function _de({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=mde}){const a=await Sde(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>xde(i,a))]}function xde(e,t){var n,r,a,i,o,s;const u=e.role;switch(u){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>Ede(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var f;const h=(f=c.providerOptions)!=null?f:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:fF(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var f;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(f=c.providerOptions)!=null?f:c.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const c=u;throw new vde({role:c})}}}async function Sde(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function Ede(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,u,c;const f=e.type;switch(f){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${f}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){const{mimeType:h,base64Content:p}=wde(u.toString());if(h==null||p==null)throw new Error(`Invalid data URL format in part ${f}`);o=h,c=Pv(p)}else{const h=t[u.toString()];h?(c=h.data,o??(o=h.mimeType)):c=u}else c=Pv(u);switch(f){case"image":return c instanceof Uint8Array&&(o=(r=fde(c))!=null?r:o),{type:"image",image:c,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?fF(c):c,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function Cde({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new Fo({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Fo({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Fo({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Fo({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Fo({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Fo({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Fo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Fo({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function j6(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,u,c;try{[s,u]=i.url.split(","),c=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||u==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:Pv(u)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:yde(Pv(u))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:u,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var gF="AI_MessageConversionError",yF=`vercel.ai.error.${gF}`,kde=Symbol.for(yF),bF,E2=class extends xn{constructor({originalMessage:e,message:t}){super({name:gF,message:t}),this[bF]=!0,this.originalMessage=e}static isInstance(e){return xn.hasMarker(e,yF)}};bF=kde;function Ade(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],u=o===e.length-1,{role:c,content:f,experimental_attachments:h}=s;switch(c){case"system":{i.push({role:"system",content:f});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:f},...j6(h)]:f});else{const p=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...p,...j6(h)]:p})}break}case"assistant":{if(s.parts!=null){let v=function(){const S=[];for(const C of x)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":S.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:S});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new E2({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:D,result:O}=C,N=a[D];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:D,result:N.experimental_toToolResultContent(O),experimental_content:N.experimental_toToolResultContent(O)}:{type:"tool-result",toolCallId:k,toolName:D,result:O}})}),x=[],_=!1,b++},b=0,_=!1,x=[];for(const S of s.parts)switch(S.type){case"text":{_&&v(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==b&&v(),x.push(S),_=!0;break}}v();break}const p=s.toolInvocations;if(p==null||p.length===0){i.push({role:"assistant",content:f});break}const g=p.reduce((v,b)=>{var _;return Math.max(v,(_=b.step)!=null?_:0)},0);for(let v=0;v<=g;v++){const b=p.filter(_=>{var x;return((x=_.step)!=null?x:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...u&&f&&v===0?[{type:"text",text:f}]:[],...b.map(({toolCallId:_,toolName:x,args:S})=>({type:"tool-call",toolCallId:_,toolName:x,args:S}))]}),i.push({role:"tool",content:b.map(_=>{if(!("result"in _))throw new E2({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:x,toolName:S,result:E}=_,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}f&&!u&&i.push({role:"assistant",content:f});break}case"data":break;default:{const p=c;throw new E2({originalMessage:s,message:`Unsupported role: ${p}`})}}}return i}function Tde(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Rde);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Rde(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var VE=$.lazy(()=>$.union([$.null(),$.string(),$.number(),$.boolean(),$.record($.string(),VE),$.array(VE)])),Xr=$.record($.string(),$.record($.string(),VE)),Nde=$.array($.union([$.object({type:$.literal("text"),text:$.string()}),$.object({type:$.literal("image"),data:$.string(),mimeType:$.string().optional()})])),vF=$.object({type:$.literal("text"),text:$.string(),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),Ide=$.object({type:$.literal("image"),image:$.union([dF,$.instanceof(URL)]),mimeType:$.string().optional(),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),wF=$.object({type:$.literal("file"),data:$.union([dF,$.instanceof(URL)]),filename:$.string().optional(),mimeType:$.string(),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),Ode=$.object({type:$.literal("reasoning"),text:$.string(),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),Dde=$.object({type:$.literal("redacted-reasoning"),data:$.string(),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),jde=$.object({type:$.literal("tool-call"),toolCallId:$.string(),toolName:$.string(),args:$.unknown(),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),Mde=$.object({type:$.literal("tool-result"),toolCallId:$.string(),toolName:$.string(),result:$.unknown(),content:Nde.optional(),isError:$.boolean().optional(),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),Pde=$.object({role:$.literal("system"),content:$.string(),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),Fde=$.object({role:$.literal("user"),content:$.union([$.string(),$.array($.union([vF,Ide,wF]))]),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),Lde=$.object({role:$.literal("assistant"),content:$.union([$.string(),$.array($.union([vF,wF,Ode,Dde,jde]))]),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),$de=$.object({role:$.literal("tool"),content:$.array(Mde),providerOptions:Xr.optional(),experimental_providerMetadata:Xr.optional()}),Bde=$.union([Pde,Fde,Lde,$de]);function zde({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new wl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new wl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new wl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new wl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=Tde(e.messages);if(n==="other")throw new wl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?Ade(e.messages,{tools:t}):e.messages;if(r.length===0)throw new wl({prompt:e,message:"messages must not be empty"});const a=xh({value:r,schema:$.array(Bde)});if(!a.success)throw new wl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Ude({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function qde(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Hde="JSON schema:",Vde="You MUST answer with a JSON object that matches the JSON schema above.",Gde="You MUST answer with JSON.";function Wde({prompt:e,schema:t,schemaPrefix:n=t!=null?Hde:void 0,schemaSuffix:r=t!=null?Vde:Gde}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function C2(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}bd({prefix:"aiobj",size:24});var _i=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function M6(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Kde(){let e=[],t=null,n=!1,r=M6();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=M6(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function Zde(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}bd({prefix:"aiobj",size:24});var _F="AI_NoOutputSpecifiedError",xF=`vercel.ai.error.${_F}`,Yde=Symbol.for(xF),SF,Xde=class extends xn{constructor({message:e="No output specified."}={}){super({name:_F,message:e}),this[SF]=!0}static isInstance(e){return xn.hasMarker(e,xF)}};SF=Yde;var EF="AI_ToolExecutionError",CF=`vercel.ai.error.${EF}`,Jde=Symbol.for(CF),kF,Qde=class extends xn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${I0(r)}`}){super({name:EF,message:a,cause:r}),this[kF]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return xn.hasMarker(e,CF)}};kF=Jde;function efe(e){return e!=null&&Object.keys(e).length>0}function tfe({tools:e,toolChoice:t,activeTools:n}){return efe(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:Jw(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var nfe=/^([\s\S]*?)(\s+)(\S*)$/;function rfe(e){const t=e.match(nfe);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var AF="AI_InvalidToolArgumentsError",TF=`vercel.ai.error.${AF}`,afe=Symbol.for(TF),RF,NF=class extends xn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${I0(n)}`}){super({name:AF,message:r,cause:n}),this[RF]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return xn.hasMarker(e,TF)}};RF=afe;var IF="AI_NoSuchToolError",OF=`vercel.ai.error.${IF}`,ife=Symbol.for(OF),DF,GE=class extends xn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:IF,message:n}),this[DF]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return xn.hasMarker(e,OF)}};DF=ife;var jF="AI_ToolCallRepairError",MF=`vercel.ai.error.${jF}`,ofe=Symbol.for(MF),PF,sfe=class extends xn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${I0(e)}`}){super({name:jF,message:n,cause:e}),this[PF]=!0,this.originalError=t}static isInstance(e){return xn.hasMarker(e,MF)}};PF=ofe;async function lfe({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new GE({toolName:e.toolName});try{return await P6({toolCall:e,tools:t})}catch(i){if(n==null||!(GE.isInstance(i)||NF.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>Jw(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new sfe({cause:s,originalError:i})}if(o==null)throw i;return await P6({toolCall:o,tools:t})}}async function P6({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new GE({toolName:e.toolName,availableTools:Object.keys(t)});const a=Jw(r.parameters),i=e.args.trim()===""?xh({value:{},schema:a}):sd({text:e.args,schema:a});if(i.success===!1)throw new NF({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function ufe(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function F6({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const u=[];return u.push({role:"assistant",content:[...n.map(c=>c.type==="text"?{...c,type:"reasoning"}:{...c,type:"redacted-reasoning"}),...t.map(c=>({type:"file",data:c.base64,mimeType:c.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&u.push({role:"tool",id:s(),content:i.map(c=>{const f=r[c.toolName];return(f==null?void 0:f.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:f.experimental_toToolResultContent(c.result),experimental_content:f.experimental_toToolResultContent(c.result)}:{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result}})}),u}bd({prefix:"aitxt",size:24});bd({prefix:"msg",size:24});var cfe={};tA(cfe,{object:()=>pfe,text:()=>hfe});var FF="AI_InvalidStreamPartError",LF=`vercel.ai.error.${FF}`,dfe=Symbol.for(LF),$F,ffe=class extends xn{constructor({chunk:e,message:t}){super({name:FF,message:t}),this[$F]=!0,this.chunk=e}static isInstance(e){return xn.hasMarker(e,LF)}};$F=dfe;var hfe=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),pfe=({schema:e})=>{const t=Jw(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Wde({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=Jue(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=sd({text:n});if(!a.success)throw new O6({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=xh({value:a.value,schema:t});if(!i.success)throw new O6({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function mfe(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function nA(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function u(f){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}async function c(f){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}return new ReadableStream({async pull(f){try{if(o){await c(f);return}if(s){await u(f);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:p}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||f.enqueue(h.value),p===n?(a=void 0,h.done&&(await c(f),o=!0)):(i=void 0,h.done&&(s=!0,await u(f)))}catch(h){f.error(h)}},cancel(){n.cancel(),r.cancel()}})}function gfe({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:u}){let c=null;const f=new ReadableStream({start(x){c=x}}),h={},p=new Set;let g=!1,v;function b(){g&&p.size===0&&(v!=null&&c.enqueue(v),c.close())}const _=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new cde({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await lfe({toolCall:x,tools:e,repairToolCall:u,system:i,messages:o});S.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const D=As();p.add(D),HE({name:"ai.toolCall",attributes:Lf({telemetry:a,attributes:{...qE({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async O=>k.execute(C.args,{toolCallId:C.toolCallId,messages:o,abortSignal:s}).then(N=>{c.enqueue({...C,type:"tool-result",result:N}),p.delete(D),b();try{O.setAttributes(Lf({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(N)}}}))}catch{}},N=>{c.enqueue({type:"error",error:new Qde({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:N})}),p.delete(D),b()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:Ude(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),f.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var yfe=bd({prefix:"aitxt",size:24}),bfe=bd({prefix:"msg",size:24});function vfe({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:u,maxSteps:c=1,experimental_generateMessageId:f=bfe,experimental_output:h,experimental_continueSteps:p=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:_=!1,toolCallStreaming:x=_,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:k,onError:D,onFinish:O,onStepFinish:N,_internal:{now:z=Zde,generateId:H=yfe,currentDate:X=()=>new Date}={},...F}){return new _fe({model:e,telemetry:g,headers:u,settings:F,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:mfe(C),activeTools:S,repairToolCall:E,maxSteps:c,output:h,continueSteps:p,providerOptions:b,onChunk:k,onError:D,onFinish:O,onStepFinish:N,now:z,currentDate:X,generateId:H,generateMessageId:f})}function wfe(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const u=JSON.stringify(s.partial);u!==r&&(a({controller:o,partialOutput:s.partial}),r=u)}},flush(i){n.length>0&&a({controller:i})}})}var _fe=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:u,tools:c,toolChoice:f,toolCallStreaming:h,transforms:p,activeTools:g,repairToolCall:v,maxSteps:b,output:_,continueSteps:x,providerOptions:S,now:E,currentDate:C,generateId:k,generateMessageId:D,onChunk:O,onError:N,onFinish:z,onStepFinish:H}){this.warningsPromise=new _i,this.usagePromise=new _i,this.finishReasonPromise=new _i,this.providerMetadataPromise=new _i,this.textPromise=new _i,this.reasoningPromise=new _i,this.reasoningDetailsPromise=new _i,this.sourcesPromise=new _i,this.filesPromise=new _i,this.toolCallsPromise=new _i,this.toolResultsPromise=new _i,this.requestPromise=new _i,this.responsePromise=new _i,this.stepsPromise=new _i;var X;if(b<1)throw new Fo({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=_;let F="",Z="",L="",de=[],ae=[],ne,ee=[];const se=[],W={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let J=[],Y=[],re,be,we="initial";const Me=[];let Pe;const Ae=new TransformStream({async transform(ce,ie){ie.enqueue(ce);const{part:Q}=ce;if((Q.type==="text-delta"||Q.type==="reasoning"||Q.type==="source"||Q.type==="tool-call"||Q.type==="tool-result"||Q.type==="tool-call-streaming-start"||Q.type==="tool-call-delta")&&await(O==null?void 0:O({chunk:Q})),Q.type==="error"&&await(N==null?void 0:N({error:Q.error})),Q.type==="text-delta"&&(F+=Q.textDelta,Z+=Q.textDelta,L+=Q.textDelta),Q.type==="reasoning"&&(ne==null?(ne={type:"text",text:Q.textDelta},de.push(ne)):ne.text+=Q.textDelta),Q.type==="reasoning-signature"){if(ne==null)throw new xn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});ne.signature=Q.signature,ne=void 0}if(Q.type==="redacted-reasoning"&&de.push({type:"redacted",data:Q.data}),Q.type==="file"&&ae.push(Q),Q.type==="source"&&(se.push(Q.source),ee.push(Q.source)),Q.type==="tool-call"&&J.push(Q),Q.type==="tool-result"&&Y.push(Q),Q.type==="step-finish"){const xe=F6({text:Z,files:ae,reasoning:de,tools:c??{},toolCalls:J,toolResults:Y,messageId:Q.messageId,generateMessageId:D}),Le=Me.length;let Se="done";Le+1<b&&(x&&Q.finishReason==="length"&&J.length===0?Se="continue":J.length>0&&Y.length===J.length&&(Se="tool-result"));const Ve={stepType:we,text:F,reasoning:ufe(de),reasoningDetails:de,files:ae,sources:ee,toolCalls:J,toolResults:Y,finishReason:Q.finishReason,usage:Q.usage,warnings:Q.warnings,logprobs:Q.logprobs,request:Q.request,response:{...Q.response,messages:[...W.messages,...xe]},providerMetadata:Q.experimental_providerMetadata,experimental_providerMetadata:Q.experimental_providerMetadata,isContinued:Q.isContinued};await(H==null?void 0:H(Ve)),Me.push(Ve),J=[],Y=[],F="",ee=[],de=[],ae=[],ne=void 0,Se!=="done"&&(we=Se),Se!=="continue"&&(W.messages.push(...xe),Z="")}Q.type==="finish"&&(W.id=Q.response.id,W.timestamp=Q.response.timestamp,W.modelId=Q.response.modelId,W.headers=Q.response.headers,be=Q.usage,re=Q.finishReason)},async flush(ce){var ie;try{if(Me.length===0)return;const Q=Me[Me.length-1];Ne.warningsPromise.resolve(Q.warnings),Ne.requestPromise.resolve(Q.request),Ne.responsePromise.resolve(Q.response),Ne.toolCallsPromise.resolve(Q.toolCalls),Ne.toolResultsPromise.resolve(Q.toolResults),Ne.providerMetadataPromise.resolve(Q.experimental_providerMetadata),Ne.reasoningPromise.resolve(Q.reasoning),Ne.reasoningDetailsPromise.resolve(Q.reasoningDetails);const xe=re??"unknown",Le=be??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ne.finishReasonPromise.resolve(xe),Ne.usagePromise.resolve(Le),Ne.textPromise.resolve(L),Ne.sourcesPromise.resolve(se),Ne.filesPromise.resolve(Q.files),Ne.stepsPromise.resolve(Me),await(z==null?void 0:z({finishReason:xe,logprobs:void 0,usage:Le,text:L,reasoning:Q.reasoning,reasoningDetails:Q.reasoningDetails,files:Q.files,sources:Q.sources,toolCalls:Q.toolCalls,toolResults:Q.toolResults,request:(ie=Q.request)!=null?ie:{},response:Q.response,warnings:Q.warnings,providerMetadata:Q.providerMetadata,experimental_providerMetadata:Q.experimental_providerMetadata,steps:Me})),Pe.setAttributes(Lf({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>L},"ai.response.toolCalls":{output:()=>{var Se;return(Se=Q.toolCalls)!=null&&Se.length?JSON.stringify(Q.toolCalls):void 0}},"ai.usage.promptTokens":Le.promptTokens,"ai.usage.completionTokens":Le.completionTokens}}))}catch(Q){ce.error(Q)}finally{Pe.end()}}}),Te=Kde();this.addStream=Te.addStream,this.closeStream=Te.close;let qe=Te.stream;for(const ce of p)qe=qe.pipeThrough(ce({tools:c,stopStream(){Te.terminate()}}));this.baseStream=qe.pipeThrough(wfe(_)).pipeThrough(Ae);const{maxRetries:it,retry:Ie}=ade({maxRetries:a}),Re=lde(t),U=ide({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:it}}),Ce=zde({prompt:{system:(X=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?X:o,prompt:s,messages:u},tools:c}),Ne=this;HE({name:"ai.streamText",attributes:Lf({telemetry:t,attributes:{...qE({operationId:"ai.streamText",telemetry:t}),...U,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:u})},"ai.settings.maxSteps":b}}),tracer:Re,endWhenDone:!1,fn:async ce=>{Pe=ce;async function ie({currentStep:Q,responseMessages:xe,usage:Le,stepType:Se,previousStepText:Ve,hasLeadingWhitespace:xt,messageId:ht}){var Et;const Ft=xe.length===0?Ce.type:"messages",Tt=[...Ce.messages,...xe],Ut=await _de({prompt:{type:Ft,system:Ce.system,messages:Tt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Et=e.supportsUrl)==null?void 0:Et.bind(e)}),ge={type:"regular",...tfe({tools:c,toolChoice:f,activeTools:g})},{result:{stream:I,warnings:V,rawResponse:he,request:Oe},doStreamSpan:ve,startTimestampMs:ke}=await Ie(()=>HE({name:"ai.streamText.doStream",attributes:Lf({telemetry:t,attributes:{...qE({operationId:"ai.streamText.doStream",telemetry:t}),...U,"ai.prompt.format":{input:()=>Ft},"ai.prompt.messages":{input:()=>JSON.stringify(Ut)},"ai.prompt.tools":{input:()=>{var zt;return(zt=ge.tools)==null?void 0:zt.map(Gt=>JSON.stringify(Gt))}},"ai.prompt.toolChoice":{input:()=>ge.toolChoice!=null?JSON.stringify(ge.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Re,endWhenDone:!1,fn:async zt=>({startTimestampMs:E(),doStreamSpan:zt,result:await e.doStream({mode:ge,...Cde(r),inputFormat:Ft,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:Ut,providerMetadata:S,abortSignal:i,headers:n})})})),le=gfe({tools:c,generatorStream:I,toolCallStreaming:h,tracer:Re,telemetry:t,system:o,messages:Tt,repairToolCall:v,abortSignal:i}),dt=Oe??{},yt=[],M=[],Be=[],et=[];let me,De="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Ct,ye=!0,q="",B=Se==="continue"?Ve:"",G,pe={id:k(),timestamp:C(),modelId:e.modelId},fe="",Fe=!1,st=!0,Dt=!1;async function un({controller:zt,chunk:Gt}){zt.enqueue(Gt),q+=Gt.textDelta,B+=Gt.textDelta,Fe=!0,Dt=Gt.textDelta.trimEnd()!==Gt.textDelta}Ne.addStream(le.pipeThrough(new TransformStream({async transform(zt,Gt){var Xt,Dn,zn;if(ye){const hr=E()-ke;ye=!1,ve.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":hr}),ve.setAttributes({"ai.response.msToFirstChunk":hr}),Gt.enqueue({type:"step-start",messageId:ht,request:dt,warnings:V??[]})}if(zt.type==="text-delta"&&zt.textDelta.length===0)return;const fr=zt.type;switch(fr){case"text-delta":{if(x){const hr=st&&xt?zt.textDelta.trimStart():zt.textDelta;if(hr.length===0)break;st=!1,fe+=hr;const Mn=rfe(fe);Mn!=null&&(fe=Mn.suffix,await un({controller:Gt,chunk:{type:"text-delta",textDelta:Mn.prefix+Mn.whitespace}}))}else await un({controller:Gt,chunk:zt});break}case"reasoning":{Gt.enqueue(zt),me==null?(me={type:"text",text:zt.textDelta},Be.push(me)):me.text+=zt.textDelta;break}case"reasoning-signature":{if(Gt.enqueue(zt),me==null)throw new ffe({chunk:zt,message:"reasoning-signature without reasoning"});me.signature=zt.signature,me=void 0;break}case"redacted-reasoning":{Gt.enqueue(zt),Be.push({type:"redacted",data:zt.data});break}case"tool-call":{Gt.enqueue(zt),yt.push(zt);break}case"tool-result":{Gt.enqueue(zt),M.push(zt);break}case"response-metadata":{pe={id:(Xt=zt.id)!=null?Xt:pe.id,timestamp:(Dn=zt.timestamp)!=null?Dn:pe.timestamp,modelId:(zn=zt.modelId)!=null?zn:pe.modelId};break}case"finish":{Ke=zt.usage,De=zt.finishReason,Ct=zt.experimental_providerMetadata,G=zt.logprobs;const hr=E()-ke;ve.addEvent("ai.stream.finish"),ve.setAttributes({"ai.response.msToFinish":hr,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/hr});break}case"file":{et.push(zt),Gt.enqueue(zt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Gt.enqueue(zt);break}case"error":{Gt.enqueue(zt),De="error";break}default:{const hr=fr;throw new Error(`Unknown chunk type: ${hr}`)}}},async flush(zt){const Gt=yt.length>0?JSON.stringify(yt):void 0;let Xt="done";Q+1<b&&(x&&De==="length"&&yt.length===0?Xt="continue":yt.length>0&&M.length===yt.length&&(Xt="tool-result")),x&&fe.length>0&&(Xt!=="continue"||Se==="continue"&&!Fe)&&(await un({controller:zt,chunk:{type:"text-delta",textDelta:fe}}),fe="");try{ve.setAttributes(Lf({telemetry:t,attributes:{"ai.response.finishReason":De,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>Gt},"ai.response.id":pe.id,"ai.response.model":pe.modelId,"ai.response.timestamp":pe.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[De],"gen_ai.response.id":pe.id,"gen_ai.response.model":pe.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{ve.end()}zt.enqueue({type:"step-finish",finishReason:De,usage:Ke,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:G,request:dt,response:{...pe,headers:he==null?void 0:he.headers},warnings:V,isContinued:Xt==="continue",messageId:ht});const Dn=qde(Le,Ke);if(Xt==="done")zt.enqueue({type:"finish",finishReason:De,usage:Dn,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:G,response:{...pe,headers:he==null?void 0:he.headers}}),Ne.closeStream();else{if(Se==="continue"){const zn=xe[xe.length-1];typeof zn.content=="string"?zn.content+=q:zn.content.push({text:q,type:"text"})}else xe.push(...F6({text:q,files:et,reasoning:Be,tools:c??{},toolCalls:yt,toolResults:M,messageId:ht,generateMessageId:D}));await ie({currentStep:Q+1,responseMessages:xe,usage:Dn,stepType:Xt,previousStepText:B,hasLeadingWhitespace:Dt,messageId:Xt==="continue"?ht:D()})}}})))}await ie({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:D()})}}).catch(ce=>{Ne.addStream(new ReadableStream({start(ie){ie.enqueue({type:"error",error:ce}),ie.close()}})),Ne.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return C2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return C2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new Xde;return C2(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(Wa("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(Wa("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(Wa("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(Wa("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(Wa("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(Wa("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(Wa("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(Wa("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(Wa("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(Wa("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(Wa("error",e(i.error)));break}case"step-start":{o.enqueue(Wa("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(Wa("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(Wa("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const u=s;throw new Error(`Unknown chunk type: ${u}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c}={}){N6({response:e,status:t,statusText:n,headers:R6(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){N6({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:R6(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?nA(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}),{status:t,statusText:n,headers:Mv(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:Mv(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},xfe=$.object({name:$.string(),version:$.string()}).passthrough(),rA=$.object({_meta:$.optional($.object({}).passthrough())}).passthrough(),x0=rA,Sfe=$.object({method:$.string(),params:$.optional(rA)}),Efe=$.object({experimental:$.optional($.object({}).passthrough()),logging:$.optional($.object({}).passthrough()),prompts:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough()),resources:$.optional($.object({subscribe:$.optional($.boolean()),listChanged:$.optional($.boolean())}).passthrough()),tools:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough())}).passthrough();x0.extend({protocolVersion:$.string(),capabilities:Efe,serverInfo:xfe,instructions:$.optional($.string())});var Cfe=x0.extend({nextCursor:$.optional($.string())}),kfe=$.object({name:$.string(),description:$.optional($.string()),inputSchema:$.object({type:$.literal("object"),properties:$.optional($.object({}).passthrough())}).passthrough()}).passthrough();Cfe.extend({tools:$.array(kfe)});var Afe=$.object({type:$.literal("text"),text:$.string()}).passthrough(),Tfe=$.object({type:$.literal("image"),data:$.string().base64(),mimeType:$.string()}).passthrough(),BF=$.object({uri:$.string(),mimeType:$.optional($.string())}).passthrough(),Rfe=BF.extend({text:$.string()}),Nfe=BF.extend({blob:$.string().base64()}),Ife=$.object({type:$.literal("resource"),resource:$.union([Rfe,Nfe])}).passthrough();x0.extend({content:$.array($.union([Afe,Tfe,Ife])),isError:$.boolean().default(!1).optional()}).or(x0.extend({toolResult:$.unknown()}));var Qw="2.0",Ofe=$.object({jsonrpc:$.literal(Qw),id:$.union([$.string(),$.number().int()])}).merge(Sfe).strict(),Dfe=$.object({jsonrpc:$.literal(Qw),id:$.union([$.string(),$.number().int()]),result:x0}).strict(),jfe=$.object({jsonrpc:$.literal(Qw),id:$.union([$.string(),$.number().int()]),error:$.object({code:$.number().int(),message:$.string(),data:$.optional($.unknown())})}).strict(),Mfe=$.object({jsonrpc:$.literal(Qw)}).merge($.object({method:$.string(),params:$.optional(rA)})).strict();$.union([Ofe,Mfe,Dfe,jfe]);var Pfe={};tA(Pfe,{mergeIntoDataStream:()=>$fe,toDataStream:()=>Ffe,toDataStreamResponse:()=>Lfe});function zF(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function aA(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&L6((a=n.data)==null?void 0:a.chunk,r);return}L6(n,r)}})).pipeThrough(zF(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Wa("text",n))}}))}function Ffe(e,t){return aA(e,t).pipeThrough(new TextEncoderStream)}function Lfe(e,t){var n;const r=aA(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?nA(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:Mv(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function $fe(e,t){t.dataStream.merge(aA(e,t.callbacks))}function L6(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var Bfe={};tA(Bfe,{mergeIntoDataStream:()=>qfe,toDataStream:()=>zfe,toDataStreamResponse:()=>Ufe});function iA(e,t){const n=Hfe();return NU(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(zF(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(Wa("text",r))}}))}function zfe(e,t){return iA(e,t).pipeThrough(new TextEncoderStream)}function Ufe(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=iA(e,i).pipeThrough(new TextEncoderStream),s=a?nA(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:Mv(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function qfe(e,t){t.dataStream.merge(iA(e,t.callbacks))}function Hfe(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}async function $6(e,t){const n=Oa.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}function Vfe(){const e=Cr.getState(),t=Ya.getState(),n=Br.getState(),{providerId:r}=AC(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function Gfe(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}const Wfe=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"];function Kfe(e){try{const t=e.type||"application/octet-stream",n=e.name.toLowerCase(),r=t.startsWith("text/")||t==="application/json"||Wfe.some(i=>n.endsWith(i)),a=t.startsWith("image/");if(r&&e.contentText!==void 0)return{type:"text",text:e.contentText};if(a&&e.contentBase64!==void 0)return{type:"image",image:Gfe(e.contentBase64),mimeType:t};if(!r&&e.contentBase64!==void 0)return console.warn(`AIService: Unsupported file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw new Error(`Missing content or unable to determine type for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),ot.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}class Ab{static async startInteraction(t,n){var N,z,H,X,F,Z,L,de,ae;const r=Cr.getState(),a=r.currentConversationId;if(!a)return r.setError("No active conversation."),ot.error("Cannot start interaction: No active conversation."),null;const i=await $6("middleware:interaction:beforeStart",{prompt:t,conversationId:a});if(i===!1)return console.log("AIService: Interaction start cancelled by middleware."),null;const o=i&&typeof i=="object"?i.prompt:t,s=Bo(),u=new AbortController;this.activeStreams.set(s,u);const f=r.interactions.filter(ne=>ne.conversationId===a),h=f.reduce((ne,ee)=>Math.max(ne,ee.index),-1)+1,p=f.length>0?f[f.length-1].id:null,g=[...o.messages];let v=-1;for(let ne=g.length-1;ne>=0;ne--)if(g[ne].role==="user"){v=ne;break}if(v!==-1&&((N=n.metadata)!=null&&N.attachedFiles)&&n.metadata.attachedFiles.length>0){const ne=g[v],ee=n.metadata.attachedFiles.map(Kfe).filter(W=>W!==null);let se=[];typeof ne.content=="string"?ne.content.trim()&&se.push({type:"text",text:ne.content}):Array.isArray(ne.content)&&(se=ne.content.filter(W=>W&&typeof W=="object"&&"type"in W&&(W.type==="text"||W.type==="image"))),g[v]={...ne,content:[...ee,...se]},console.log(`AIService: Added ${ee.length} file(s) to user message content.`)}const b={id:s,conversationId:a,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...o.metadata,attachedFiles:(z=n.metadata.attachedFiles)==null?void 0:z.map(({contentBase64:ne,contentText:ee,...se})=>se),toolCalls:[],toolResults:[]},index:h,parentId:p};r._addInteractionToState(b),r._addStreamingId(s),Ht.saveInteraction({...b}).catch(ne=>{console.error(`AIService: Failed initial persistence for ${s}`,ne)}),Ci.emit("interaction:started",{interactionId:s,conversationId:a,type:b.type});let _,x="ERROR",S,E,C,k;const D=[],O=[];try{const ne=(H=Ya.getState().getSelectedModel())==null?void 0:H.instance;if(!ne)throw new Error("Selected model instance not available.");const ee=Oa.getState().getRegisteredTools(),W=(((X=o.metadata)==null?void 0:X.enabledTools)??[]).reduce((re,be)=>{const we=ee[be];if(we){const Me={...we.definition};we.implementation&&(Me.execute=async Pe=>{try{const Ae=Vfe(),Te=we.definition.parameters.parse(Pe),qe=we.implementation;return await qe(Te,Ae)}catch(Ae){console.error(`[AIService] Error executing tool ${be} via SDK:`,Ae);const Te=Ae instanceof Error?Ae.message:String(Ae);return Ae instanceof $.ZodError?{_isError:!0,error:`Invalid arguments: ${Ae.errors.map(qe=>`${qe.path.join(".")} (${qe.message})`).join(", ")}`}:{_isError:!0,error:Te}}}),re[be]=Me}return re},{}),J=((F=o.parameters)==null?void 0:F.maxSteps)??Br.getState().toolMaxSteps,Y={model:ne,messages:g,abortSignal:u.signal,maxSteps:J};Object.keys(W).length>0&&(Y.tools=W),Y.toolChoice=o.toolChoice??(Object.keys(W).length>0?"auto":"none"),o.system&&(Y.system=o.system),o.parameters&&(o.parameters.temperature!==void 0&&(Y.temperature=o.parameters.temperature),o.parameters.max_tokens!==void 0&&(Y.maxTokens=o.parameters.max_tokens),o.parameters.top_p!==void 0&&(Y.topP=o.parameters.top_p),o.parameters.top_k!==void 0&&(Y.topK=o.parameters.top_k),o.parameters.presence_penalty!==void 0&&(Y.presencePenalty=o.parameters.presence_penalty),o.parameters.frequency_penalty!==void 0&&(Y.frequencyPenalty=o.parameters.frequency_penalty)),console.log(`AIService: Calling streamText with options for ${s}:`,{modelId:(Z=o.metadata)==null?void 0:Z.modelId,system:!!Y.system,messageCount:(L=Y==null?void 0:Y.messages)==null?void 0:L.length,temperature:Y.temperature,maxTokens:Y.maxTokens,toolChoice:Y.toolChoice,tools:Y.tools?Object.keys(Y.tools):void 0,maxSteps:Y.maxSteps}),_=await vfe(Y);for await(const re of _.fullStream){if(u.signal.aborted)throw console.log(`AIService: Stream ${s} aborted by signal.`),k="stop",new Error("Stream aborted by user.");switch(re.type){case"text-delta":{const be={interactionId:s,chunk:re.textDelta},we=await $6("middleware:interaction:processChunk",be);if(we!==!1){const Me=we&&typeof we=="object"&&"chunk"in we?we.chunk:re.textDelta;Cr.getState().appendInteractionResponseChunk(s,Me),Ci.emit("interaction:stream_chunk",{interactionId:s,chunk:Me})}break}case"tool-call":{const be=JSON.stringify(re);D.push(be),Cr.getState()._updateInteractionInState(s,{metadata:{toolCalls:[...D]}}),console.log(`[AIService] Tool call observed: ${re.toolName}`,re.args);break}case"tool-result":{const be=JSON.stringify(re);O.push(be),Cr.getState()._updateInteractionInState(s,{metadata:{toolResults:[...O]}}),console.log(`[AIService] Tool result observed for ${re.toolName} (Call ID: ${re.toolCallId})`,re.result);break}case"finish":console.log("[AIService] Stream finish part received:",re),k=re.finishReason,E=re.usage,C=re.providerMetadata;break;case"error":throw console.error("[AIService] Stream error part:",re.error),k="error",new Error(`AI Stream Error: ${re.error instanceof Error?re.error.message:re.error}`);case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"file":case"tool-call-streaming-start":case"tool-call-delta":case"step-start":case"step-finish":break}}if(u.signal.aborted)throw k="stop",new Error("Stream aborted by user.");if(k===void 0){console.warn(`[AIService] Stream loop finished for ${s} without receiving a 'finish' part. Inferring reason.`);const re=Cr.getState().activeStreamBuffers[s]||"";D.length>0?k="tool-calls":re.trim()?k="stop":k="other"}}catch(ne){console.error(`AIService: Error during interaction ${s}:`,ne);const ee=ne instanceof Error&&ne.message==="Stream aborted by user.";k=k??(ee?"stop":"error"),S=ee?void 0:ne instanceof Error?ne.message:String(ne),ee?(console.log(`AIService: Interaction ${s} cancelled.`),ot.info("Interaction cancelled.")):ot.error(`AI Interaction Error: ${S}`)}finally{this.activeStreams.delete(s);const ne=Cr.getState().activeStreamBuffers[s]||"";switch(k){case"stop":case"length":case"tool-calls":x="COMPLETED";break;case"error":x="ERROR";break;case"other":default:ne.trim()||D.length>0?(x="COMPLETED",console.warn(`[AIService] Interaction ${s} finished with reason '${k||"unknown"}', but content/tools exist. Marking COMPLETED.`)):(x="WARNING",S=S??"Stream ended unexpectedly without output.",console.warn(`[AIService] Interaction ${s} finished with reason '${k||"unknown"}' and no content/tools. Marking WARNING.`));break}const ee=((de=Cr.getState().interactions.find(re=>re.id===s))==null?void 0:de.metadata)||b.metadata,se={status:x,endedAt:new Date,response:ne,metadata:{...ee,...E&&{promptTokens:E.promptTokens,completionTokens:E.completionTokens,totalTokens:E.totalTokens},...C&&{providerMetadata:C},...(x==="ERROR"||x==="WARNING")&&{error:S},toolCalls:D,toolResults:O,attachedFiles:(ae=b.metadata.attachedFiles)==null?void 0:ae.map(({contentBase64:re,contentText:be,...we})=>we)}};Cr.getState()._updateInteractionInState(s,se),Cr.getState()._removeStreamingId(s);const W=Cr.getState().interactions.find(re=>re.id===s);W?Cr.getState().updateInteractionAndPersist({...W}).catch(re=>{console.error(`AIService: Failed final persistence for ${s}`,re)}):console.error(`AIService: CRITICAL - Could not find final state for interaction ${s} to persist after updates. State might be inconsistent.`);let J=[],Y=[];try{J=D.map(re=>JSON.parse(re)),Y=O.map(re=>JSON.parse(re))}catch(re){console.error("[AIService] Failed to parse tool strings for event emitter:",re)}Ci.emit("interaction:completed",{interactionId:s,status:x,error:S??void 0,toolCalls:J,toolResults:Y}),console.log(`AIService: Finalized interaction ${s} with status ${x}.`)}return s}static stopInteraction(t){const n=this.activeStreams.get(t),r=Cr.getState();if(n&&!n.signal.aborted)console.log(`AIService: Aborting interaction ${t}...`),n.abort();else{console.log(`AIService: No active controller found or already aborted for interaction ${t}. Attempting store cleanup if needed.`);const a=r.interactions.find(i=>i.id===t);if(a&&a.status==="STREAMING"){console.warn(`AIService: Forcing CANCELLED status for interaction ${t} found in STREAMING state without active controller.`);const i=r.activeStreamBuffers[t]||"",o={status:"CANCELLED",endedAt:new Date,response:i,metadata:{...a.metadata||{},error:"Manually stopped (controller missing)"}};r._updateInteractionInState(t,o),r._removeStreamingId(t);const s=Cr.getState().interactions.find(u=>u.id===t);s&&r.updateInteractionAndPersist({...s}).catch(u=>{console.error(`AIService: Failed persistence for forced cancel of ${t}`,u)})}}}}Va(Ab,"activeStreams",new Map);const S0=zl(Ul((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Ht.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),ot.error(r)}},addDbMod:async n=>{const r=Bo(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await Ht.saveMod(a),ot.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(u=>u.id!==r),s.error=o}),ot.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(u=>u.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await Ht.saveMod(o),ot.success(`Mod "${o.name}" updated.`)}catch(s){const u="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(c=>{const f=c.dbMods.findIndex(h=>h.id===n);f!==-1&&a&&(c.dbMods[f]=a,c.dbMods.sort((h,p)=>h.loadOrder-p.loadOrder)),c.error=u}),ot.error(u),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await Ht.deleteMod(n),ot.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder),s.error=o}),ot.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function B6(e){const t=e.id,n=e.name,r=Oa.getState(),a=S0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>r.registerChatControl(o),registerTool:(o,s,u)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,u)),on:(o,s)=>(Ci.on(o,s),()=>Ci.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=Cr.getState(),s=Kr.getState(),u=Br.getState(),c=Ya.getState(),{providerId:f}=AC(c.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(p=>Object.freeze({...p})):[]),isStreaming:o.status==="streaming",selectedProviderId:f,selectedModelId:c.selectedModelId,activeSystemPrompt:u.globalSystemPrompt,temperature:u.temperature,maxTokens:u.maxTokens,theme:u.theme})},showToast:(o,s)=>{ot[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function Zfe(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=B6(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);a=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(u){o=u instanceof Error?u:String(u),console.error(`[ModLoader] Error loading mod "${r.name}":`,u),ot.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=B6(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Ci.emit(s.error?"mod:error":"mod:loaded",{id:r.id,name:r.name,error:s.error}),s}));return Ci.emit("app:loaded",void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var Yfe=(e,t,n,r,a,i,o,s)=>{let u=document.documentElement,c=["light","dark"];function f(g){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",_=b&&i?a.map(x=>i[x]||x):a;b?(u.classList.remove(..._),u.classList.add(i&&i[g]?i[g]:g)):u.setAttribute(v,g)}),h(g)}function h(g){s&&c.includes(g)&&(u.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(t)||n,v=o&&g==="system"?p():g;f(v)}catch{}},Xfe=R.createContext(void 0),Jfe={setTheme:e=>{},themes:[]},Qfe=()=>{var e;return(e=R.useContext(Xfe))!=null?e:Jfe};R.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:u,scriptProps:c})=>{let f=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return R.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Yfe.toString()})(${f})`}})});const ehe=({...e})=>{const{theme:t="system"}=Qfe();return y.jsx(WW,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function oA({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:$t("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const UF=R.memo(R.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)"},a)=>{const i=R.useRef(null),[o,s]=R.useState(e);R.useImperativeHandle(a,()=>({getValue:()=>o,focus:()=>{var p;return(p=i.current)==null?void 0:p.focus()}}));const{focusInputOnNextRender:u,setFocusInputFlag:c}=fi(In(p=>({focusInputOnNextRender:p.focusInputOnNextRender,setFocusInputFlag:p.setFocusInputFlag})));R.useEffect(()=>{u&&i.current&&(c(!1),requestAnimationFrame(()=>{var p;(p=i.current)==null||p.focus()}))},[u,c]);const f=p=>{p.key==="Enter"&&!p.shiftKey&&!n&&(p.preventDefault(),t())},h=p=>{s(p.target.value)};return R.useEffect(()=>{const p=i.current;if(p){p.style.height="auto";const g=p.scrollHeight,v=250;p.style.height=`${Math.min(g,v)}px`}},[o]),R.useEffect(()=>{s(e)},[e]),y.jsx(oA,{ref:i,value:o,onChange:h,onKeyDown:f,disabled:n,placeholder:r,rows:3,className:$t("w-full p-3 border border-[--border] rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-[--primary] outline-none disabled:opacity-50 overflow-y-auto","min-h-[80px] max-h-[250px]"),"aria-label":"Chat input"})}));UF.displayName="InputArea";var the=R.createContext(void 0);function Uh(e){const t=R.useContext(the);return e||t||"ltr"}function E0(e,[t,n]){return Math.min(n,Math.max(t,e))}function nhe(e,t){return R.useReducer((n,r)=>t[n][r]??n,e)}var sA="ScrollArea",[qF,b1e]=Ni(sA),[rhe,Ao]=qF(sA),HF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,u]=R.useState(null),[c,f]=R.useState(null),[h,p]=R.useState(null),[g,v]=R.useState(null),[b,_]=R.useState(null),[x,S]=R.useState(0),[E,C]=R.useState(0),[k,D]=R.useState(!1),[O,N]=R.useState(!1),z=_n(t,X=>u(X)),H=Uh(a);return y.jsx(rhe,{scope:n,type:r,dir:H,scrollHideDelay:i,scrollArea:s,viewport:c,onViewportChange:f,content:h,onContentChange:p,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:D,scrollbarY:b,onScrollbarYChange:_,scrollbarYEnabled:O,onScrollbarYEnabledChange:N,onCornerWidthChange:S,onCornerHeightChange:C,children:y.jsx(Jt.div,{dir:H,...o,ref:z,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});HF.displayName=sA;var VF="ScrollAreaViewport",GF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=Ao(VF,n),s=R.useRef(null),u=_n(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(Jt.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});GF.displayName=VF;var Vs="ScrollAreaScrollbar",WF=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ao(Vs,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return R.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(ahe,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(ihe,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(KF,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(lA,{...r,ref:t}):null});WF.displayName=Vs;var ahe=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ao(Vs,e.__scopeScrollArea),[i,o]=R.useState(!1);return R.useEffect(()=>{const s=a.scrollArea;let u=0;if(s){const c=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(Da,{present:n||i,children:y.jsx(KF,{"data-state":i?"visible":"hidden",...r,ref:t})})}),ihe=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ao(Vs,e.__scopeScrollArea),i=e.orientation==="horizontal",o=t1(()=>u("SCROLL_END"),100),[s,u]=nhe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return R.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,a.scrollHideDelay,u]),R.useEffect(()=>{const c=a.viewport,f=i?"scrollLeft":"scrollTop";if(c){let h=c[f];const p=()=>{const g=c[f];h!==g&&(u("SCROLL"),o()),h=g};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[a.viewport,i,u,o]),y.jsx(Da,{present:n||s!=="hidden",children:y.jsx(lA,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Bt(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Bt(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),KF=R.forwardRef((e,t)=>{const n=Ao(Vs,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=R.useState(!1),s=e.orientation==="horizontal",u=t1(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?c:f)}},10);return bh(n.viewport,u),bh(n.content,u),y.jsx(Da,{present:r||i,children:y.jsx(lA,{"data-state":i?"visible":"hidden",...a,ref:t})})}),lA=R.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Ao(Vs,e.__scopeScrollArea),i=R.useRef(null),o=R.useRef(0),[s,u]=R.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=QF(s.viewport,s.content),f={...r,sizes:s,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,g){return dhe(p,o.current,s,g)}return n==="horizontal"?y.jsx(ohe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollLeft,g=z6(p,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=h(p,a.dir))}}):n==="vertical"?y.jsx(she,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollTop,g=z6(p,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=h(p))}}):null}),ohe=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ao(Vs,e.__scopeScrollArea),[o,s]=R.useState(),u=R.useRef(null),c=_n(t,u,i.onScrollbarXChange);return R.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(YF,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":e1(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(p),tL(p,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Lv(o.paddingLeft),paddingEnd:Lv(o.paddingRight)}})}})}),she=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ao(Vs,e.__scopeScrollArea),[o,s]=R.useState(),u=R.useRef(null),c=_n(t,u,i.onScrollbarYChange);return R.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(YF,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":e1(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(p),tL(p,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Lv(o.paddingTop),paddingEnd:Lv(o.paddingBottom)}})}})}),[lhe,ZF]=qF(Vs),YF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:f,onResize:h,...p}=e,g=Ao(Vs,n),[v,b]=R.useState(null),_=_n(t,z=>b(z)),x=R.useRef(null),S=R.useRef(""),E=g.viewport,C=r.content-r.viewport,k=Ta(f),D=Ta(u),O=t1(h,10);function N(z){if(x.current){const H=z.clientX-x.current.left,X=z.clientY-x.current.top;c({x:H,y:X})}}return R.useEffect(()=>{const z=H=>{const X=H.target;(v==null?void 0:v.contains(X))&&k(H,C)};return document.addEventListener("wheel",z,{passive:!1}),()=>document.removeEventListener("wheel",z,{passive:!1})},[E,v,C,k]),R.useEffect(D,[r,D]),bh(v,O),bh(g.content,O),y.jsx(lhe,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ta(i),onThumbPointerUp:Ta(o),onThumbPositionChange:D,onThumbPointerDown:Ta(s),children:y.jsx(Jt.div,{...p,ref:_,style:{position:"absolute",...p.style},onPointerDown:Bt(e.onPointerDown,z=>{z.button===0&&(z.target.setPointerCapture(z.pointerId),x.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),N(z))}),onPointerMove:Bt(e.onPointerMove,N),onPointerUp:Bt(e.onPointerUp,z=>{const H=z.target;H.hasPointerCapture(z.pointerId)&&H.releasePointerCapture(z.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),Fv="ScrollAreaThumb",XF=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=ZF(Fv,e.__scopeScrollArea);return y.jsx(Da,{present:n||a.hasThumb,children:y.jsx(uhe,{ref:t,...r})})}),uhe=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Ao(Fv,n),o=ZF(Fv,n),{onThumbPositionChange:s}=o,u=_n(t,h=>o.onThumbChange(h)),c=R.useRef(void 0),f=t1(()=>{c.current&&(c.current(),c.current=void 0)},100);return R.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(f(),!c.current){const g=fhe(h,s);c.current=g,s()}};return s(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,f,s]),y.jsx(Jt.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Bt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,b=h.clientY-g.top;o.onThumbPointerDown({x:v,y:b})}),onPointerUp:Bt(e.onPointerUp,o.onThumbPointerUp)})});XF.displayName=Fv;var uA="ScrollAreaCorner",JF=R.forwardRef((e,t)=>{const n=Ao(uA,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(che,{...e,ref:t}):null});JF.displayName=uA;var che=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Ao(uA,n),[i,o]=R.useState(0),[s,u]=R.useState(0),c=!!(i&&s);return bh(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),u(f)}),bh(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),c?y.jsx(Jt.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Lv(e){return e?parseInt(e,10):0}function QF(e,t){const n=e/t;return isNaN(n)?0:n}function e1(e){const t=QF(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function dhe(e,t,n,r="ltr"){const a=e1(n),i=a/2,o=t||i,s=a-o,u=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return eL([u,c],h)(e)}function z6(e,t,n="ltr"){const r=e1(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,u=n==="ltr"?[0,o]:[o*-1,0],c=E0(e,u);return eL([0,o],[0,s])(c)}function eL(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function tL(e,t){return e>0&&e<t}var fhe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function t1(e,t){const n=Ta(e),r=R.useRef(0);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),R.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function bh(e,t){const n=Ta(t);Ba(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var hhe=HF,phe=GF,mhe=JF;function yg({className:e,children:t,...n}){return y.jsxs(hhe,{"data-slot":"scroll-area",className:$t("relative",e),...n,children:[y.jsx(phe,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(ghe,{}),y.jsx(mhe,{})]})}function ghe({className:e,orientation:t="vertical",...n}){return y.jsx(WF,{"data-slot":"scroll-area-scrollbar",orientation:t,className:$t("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(XF,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Qn({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:$t("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const yhe=(e,t)=>{if(!t)return null;let n=Um,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Gn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Ls,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=PC,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=lw,r="text-green-500",a=`Synced with ${t}`;break;default:n=Um,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(n,{className:$t("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(Tn,{side:"right",children:a})]})})},$v=R.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:D,editInputRef:O})=>{const N=e.id===n,z=e.itemType==="project",H=e.id===v&&e.itemType===b,X=z&&f.has(e.id),{projects:F,conversations:Z}=z?p(e.id,g):{projects:[],conversations:[]},L=F.length>0||Z.length>0,de=!z&&e.syncRepoId?r[e.id]:void 0,ae=!z&&e.syncRepoId?a.get(e.syncRepoId):void 0,ne=!z&&ae?yhe(de,ae):null,ee=()=>{H||(z&&L&&h(e.id),i(e.id,e.itemType))},se=re=>{re.stopPropagation(),z?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,re):o(e.id,re)},W=re=>{re.stopPropagation(),E(e)},J=re=>{re.key==="Enter"?(re.preventDefault(),C()):re.key==="Escape"&&k(z&&_==="New Project")};R.useEffect(()=>{var re,be;H&&((re=O.current)==null||re.focus(),(be=O.current)==null||be.select())},[H,O]);const Y=z?e.name:e.title;return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:$t("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!H&&"hover:bg-muted/50 hover:text-primary/80",N&&!H?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",H&&"bg-muted ring-1 ring-primary",!H&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ee,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[z&&L&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:re=>{re.stopPropagation(),h(e.id)},children:X?y.jsx(sw,{className:"h-3 w-3 text-muted-foreground"}):y.jsx(NC,{className:"h-3 w-3 text-muted-foreground"})}),z&&!L&&y.jsx("span",{className:"w-3 flex-shrink-0"}),z?y.jsx(uw,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(aZ,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),H?y.jsx(Qn,{ref:O,value:x,onChange:re=>S(re.target.value),onKeyDown:J,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:re=>re.stopPropagation(),disabled:D}):y.jsx("span",{className:"truncate pr-1",children:Y}),ne]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:H?y.jsxs(y.Fragment,{children:[y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-green-500 hover:text-green-600",onClick:re=>{re.stopPropagation(),C()},disabled:D||!x.trim()||x.trim()===_,"aria-label":"Save changes",children:D?y.jsx(Gn,{className:"h-3 w-3 animate-spin"}):y.jsx(xo,{className:"h-3 w-3"})}),y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:re=>{re.stopPropagation(),k(z&&_==="New Project")},disabled:D,"aria-label":"Cancel edit",children:y.jsx(ql,{className:"h-3 w-3"})})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:W,"aria-label":`Edit ${Y}`,children:y.jsx(DC,{className:"h-3 w-3"})})}),y.jsx(Tn,{side:"top",children:"Edit"})]})}),z?y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:re=>c(e.id,re),"aria-label":`Export project ${Y}`,children:y.jsx(CK,{className:"h-3 w-3"})})}),y.jsx(Tn,{side:"top",children:"Export Project (JSON)"})]})}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx("div",{className:"p-1 rounded hover:bg-muted cursor-pointer","aria-label":`Export ${Y}`,children:y.jsx(rv,{className:"h-3 w-3 text-muted-foreground group-hover/export:text-foreground"})})}),y.jsx(Tn,{side:"top",children:"Export Conversation"})]})}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:re=>re.stopPropagation(),children:[y.jsx(Pt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:re=>u(e.id,"json",re),children:"JSON"}),y.jsx(Pt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:re=>u(e.id,"md",re),children:"MD"})]})]}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-destructive hover:text-destructive/80",onClick:se,"aria-label":`Delete ${Y}`,children:y.jsx(Zu,{className:"h-3 w-3"})})}),y.jsx(Tn,{side:"top",children:"Delete"})]})})]})})]},e.id),z&&X&&y.jsxs(y.Fragment,{children:[F.sort((re,be)=>be.updatedAt.getTime()-re.updatedAt.getTime()).map(re=>y.jsx($v,{item:{...re,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:D,editInputRef:O},re.id)),Z.sort((re,be)=>be.updatedAt.getTime()-re.updatedAt.getTime()).map(re=>y.jsx($v,{item:{...re,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:D,editInputRef:O},re.id))]})]})});$v.displayName="ConversationItemRenderer";const bhe=({updateProject:e,updateConversation:t,deleteProject:n})=>{const[r,a]=R.useState(null),[i,o]=R.useState(null),[s,u]=R.useState(""),[c,f]=R.useState(""),[h,p]=R.useState(!1),g=R.useRef(null),v=R.useCallback(S=>{a(S.id),o(S.itemType);const E=S.itemType==="project"?S.name:S.title;u(E),f(E),p(!1)},[]),b=R.useCallback(()=>{a(null),o(null),u(""),f(""),p(!1)},[]),_=R.useCallback(async()=>{if(!r||!i||h)return;const S=c.trim();if(!S||S===s){S||ot.error("Name cannot be empty."),b();return}p(!0);try{i==="project"?await e(r,{name:S}):await t(r,{title:S}),b()}catch(E){console.error("Failed to save edit:",E),p(!1)}},[r,i,c,s,h,e,t,b]),x=R.useCallback((S=!1)=>{S&&i==="project"&&s==="New Project"&&r&&n(r).catch(E=>{console.error("Failed to delete new project on cancel:",E),ot.error("Failed to clean up new project.")}),b()},[r,i,s,n,b]);return{editingItemId:r,editingItemType:i,editingName:s,localEditingName:c,setLocalEditingName:f,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:_,handleCancelEdit:x}},WE=(e,t,n,r,a,i,o,s,u)=>{if(!n)return!0;const c=`${t}-${e}`;if(u[c]!==void 0)return u[c];let f=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))f=!0;else{const p=s.get(e)||[],g=o.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){f=!0;break}if(!f){for(const v of p)if(WE(v.id,"project",n,r,a,i,o,s,u)){f=!0;break}}}}return u[c]=f,f},vhe=()=>{const{conversations:e,projects:t,selectItem:n,selectedItemId:r,selectedItemType:a,addConversation:i,updateConversation:o,deleteConversation:s,addProject:u,updateProject:c,deleteProject:f,exportConversation:h,exportProject:p,isLoading:g,syncRepos:v,conversationSyncStatus:b,getConversationById:_,getProjectById:x}=Kr(In(Ie=>({conversations:Ie.conversations,projects:Ie.projects,selectItem:Ie.selectItem,selectedItemId:Ie.selectedItemId,selectedItemType:Ie.selectedItemType,addConversation:Ie.addConversation,updateConversation:Ie.updateConversation,deleteConversation:Ie.deleteConversation,addProject:Ie.addProject,updateProject:Ie.updateProject,deleteProject:Ie.deleteProject,exportConversation:Ie.exportConversation,exportProject:Ie.exportProject,isLoading:Ie.isLoading,syncRepos:Ie.syncRepos,conversationSyncStatus:Ie.conversationSyncStatus,getConversationById:Ie.getConversationById,getProjectById:Ie.getProjectById}))),S=fi(Ie=>Ie.setFocusInputFlag),[E,C]=vt.useState(new Set),[k,D]=R.useState(""),{editingItemId:O,editingItemType:N,editingName:z,localEditingName:H,setLocalEditingName:X,isSavingEdit:F,editInputRef:Z,handleStartEditing:L,handleSaveEdit:de,handleCancelEdit:ae}=bhe({updateProject:c,updateConversation:o,deleteProject:f,getProjectById:x,getConversationById:_}),ne=R.useCallback(Ie=>{C(Re=>{const U=new Set(Re);return U.has(Ie)?U.delete(Ie):U.add(Ie),U})},[]),ee=R.useCallback(()=>{if(a==="project")return r;if(a==="conversation"&&r){const Ie=_(r);return(Ie==null?void 0:Ie.projectId)??null}return null},[r,a,_]),se=R.useCallback(async()=>{if(!O)try{const Ie=ee(),Re=await i({title:"New Chat",projectId:Ie});n(Re,"conversation"),setTimeout(()=>S(!0),0)}catch(Ie){console.error("Failed to create new chat:",Ie),ot.error("Failed to create new chat.")}},[O,ee,i,n,S]),W=R.useCallback(async()=>{if(!O)try{const Ie=ee(),Re=await u({name:"New Project",parentId:Ie});n(Re,"project"),C(U=>new Set(U).add(Re)),setTimeout(()=>{const U=x(Re);U?L({...U,itemType:"project"}):(console.warn("New project data not found immediately, using fallback"),L({id:Re,itemType:"project",name:"New Project",parentId:Ie,createdAt:new Date,updatedAt:new Date,path:"/New Project"}))},50)}catch(Ie){console.error("Failed to create new project:",Ie)}},[O,ee,u,n,x,L]),J=R.useCallback((Ie,Re)=>{Ie!==O&&(O&&Ie!==O&&(H.trim()&&H.trim()!==z?de():ae(N==="project"&&z==="New Project")),!(Ie===r&&Re===a)&&(n(Ie,Re),Re==="conversation"&&setTimeout(()=>S(!0),0)))},[O,N,z,H,r,a,de,ae,n,S]),Y=R.useCallback((Ie,Re)=>{Re.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&s(Ie).catch(U=>{console.error("Failed to delete conversation:",U),ot.error("Failed to delete conversation.")})},[s]),re=R.useCallback((Ie,Re)=>{Re.stopPropagation(),f(Ie).catch(U=>{console.error("Failed to delete project:",U),ot.error("Failed to delete project.")})},[f]),be=R.useCallback(async(Ie,Re,U)=>{U.stopPropagation();try{await h(Ie,Re)}catch(Ce){console.error(`Failed to export conversation as ${Re}:`,Ce)}},[h]),we=R.useCallback(async(Ie,Re)=>{Re.stopPropagation();try{await p(Ie)}catch(U){console.error("Failed to export project:",U)}},[p]),Me=R.useMemo(()=>new Map(v.map(Ie=>[Ie.id,Ie.name])),[v]),{projectsById:Pe,conversationsByProjectId:Ae,projectsByParentId:Te}=R.useMemo(()=>{const Ie=new Map(t.map(Ce=>[Ce.id,Ce])),Re=new Map;e.forEach(Ce=>{const Ne=Ce.projectId??null;Re.has(Ne)||Re.set(Ne,[]),Re.get(Ne).push(Ce)});const U=new Map;return t.forEach(Ce=>{const Ne=Ce.parentId??null;U.has(Ne)||U.set(Ne,[]),U.get(Ne).push(Ce)}),{projectsById:Ie,conversationsByProjectId:Re,projectsByParentId:U}},[t,e]),qe=R.useCallback((Ie,Re)=>{const U=Re.toLowerCase(),Ce={},Ne=(Te.get(Ie)||[]).filter(ie=>WE(ie.id,"project",U,t,e,Pe,Ae,Te,Ce)),ce=(Ae.get(Ie)||[]).filter(ie=>ie.title.toLowerCase().includes(U));return Ne.sort((ie,Q)=>Q.updatedAt.getTime()-ie.updatedAt.getTime()),ce.sort((ie,Q)=>Q.updatedAt.getTime()-ie.updatedAt.getTime()),{projects:Ne,conversations:ce}},[t,e,Pe,Ae,Te]),it=R.useMemo(()=>{const Ie=k.toLowerCase(),Re={},U=(Te.get(null)||[]).filter(ce=>WE(ce.id,"project",Ie,t,e,Pe,Ae,Te,Re)),Ce=(Ae.get(null)||[]).filter(ce=>ce.title.toLowerCase().includes(Ie)),Ne=[...U.map(ce=>({...ce,itemType:"project"})),...Ce.map(ce=>({...ce,itemType:"conversation"}))];return Ne.sort((ce,ie)=>ie.updatedAt.getTime()-ce.updatedAt.getTime()),Ne},[t,e,k,Pe,Ae,Te]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{size:"sm",variant:"ghost",onClick:W,"aria-label":"New Project",disabled:g||!!O,className:"h-7 w-7 p-0",children:y.jsx(OC,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"bottom",children:"New Project"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{size:"sm",variant:"ghost",onClick:se,"aria-label":"New Chat",disabled:g||!!O,className:"h-7 w-7 p-0",children:y.jsx(cw,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(fw,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(Qn,{type:"search",placeholder:"Filter...",value:k,onChange:Ie=>D(Ie.target.value),className:"h-8 text-xs pl-8",disabled:g})]}),y.jsx(yg,{className:"flex-grow",children:g?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Pr,{className:"h-8 w-full"}),y.jsx(Pr,{className:"h-8 w-full"}),y.jsx(Pr,{className:"h-8 w-full"})]}):it.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:k.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:it.map(Ie=>y.jsx($v,{item:Ie,level:0,selectedItemId:r,conversationSyncStatus:b,repoNameMap:Me,onSelectItem:J,onDeleteConversation:Y,onDeleteProject:re,onExportConversation:be,onExportProject:we,expandedProjects:E,toggleProjectExpansion:ne,getChildren:qe,filterText:k,editingItemId:O,editingItemType:N,editingName:z,localEditingName:H,setLocalEditingName:X,handleStartEditing:L,handleSaveEdit:de,handleCancelEdit:ae,isSavingEdit:F,editInputRef:Z},Ie.id))})})]})},whe=()=>{const{addConversation:e,addProject:t,selectItem:n,selectedItemId:r,selectedItemType:a,getConversationById:i}=Kr(In(f=>({addConversation:f.addConversation,addProject:f.addProject,selectItem:f.selectItem,selectedItemId:f.selectedItemId,selectedItemType:f.selectedItemType,getConversationById:f.getConversationById}))),o=fi(f=>f.setFocusInputFlag),s=()=>{if(a==="project")return r;if(a==="conversation"&&r){const f=i(r);return(f==null?void 0:f.projectId)??null}return null},u=async()=>{try{const f=s(),h=await e({title:"New Chat",projectId:f});n(h,"conversation"),setTimeout(()=>o(!0),0)}catch(f){console.error("Failed to create new chat:",f)}},c=async()=>{try{const f=s(),h=await t({name:"New Project",parentId:f});n(h,"project")}catch(f){console.error("Failed to create new project:",f)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(OC,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"right",children:"New Project"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(cw,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"right",children:"New Chat"})]})})]})},_he=()=>{const e=Oa(n=>n.registerChatControl),t=Kr(n=>n.isLoading);return vt.useEffect(()=>e({id:"core-conversation-list",status:()=>t?"loading":"ready",panel:"sidebar",renderer:()=>y.jsx(vhe,{}),iconRenderer:()=>y.jsx(whe,{}),show:()=>!0,order:10}),[e,t]),null};var k2="focusScope.autoFocusOnMount",A2="focusScope.autoFocusOnUnmount",U6={bubbles:!1,cancelable:!0},xhe="FocusScope",bg=R.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,u]=R.useState(null),c=Ta(a),f=Ta(i),h=R.useRef(null),p=_n(t,b=>u(b)),g=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(r){let b=function(E){if(g.paused||!s)return;const C=E.target;s.contains(C)?h.current=C:Ou(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const C=E.relatedTarget;C!==null&&(s.contains(C)||Ou(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&Ou(s)};document.addEventListener("focusin",b),document.addEventListener("focusout",_);const S=new MutationObserver(x);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,g.paused]),R.useEffect(()=>{if(s){H6.add(g);const b=document.activeElement;if(!s.contains(b)){const x=new CustomEvent(k2,U6);s.addEventListener(k2,c),s.dispatchEvent(x),x.defaultPrevented||(She(The(nL(s)),{select:!0}),document.activeElement===b&&Ou(s))}return()=>{s.removeEventListener(k2,c),setTimeout(()=>{const x=new CustomEvent(A2,U6);s.addEventListener(A2,f),s.dispatchEvent(x),x.defaultPrevented||Ou(b??document.body,{select:!0}),s.removeEventListener(A2,f),H6.remove(g)},0)}}},[s,c,f,g]);const v=R.useCallback(b=>{if(!n&&!r||g.paused)return;const _=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(_&&x){const S=b.currentTarget,[E,C]=Ehe(S);E&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Ou(E,{select:!0})):b.shiftKey&&x===E&&(b.preventDefault(),n&&Ou(C,{select:!0})):x===S&&b.preventDefault()}},[n,r,g.paused]);return y.jsx(Jt.div,{tabIndex:-1,...o,ref:p,onKeyDown:v})});bg.displayName=xhe;function She(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ou(r,{select:t}),document.activeElement!==n)return}function Ehe(e){const t=nL(e),n=q6(t,e),r=q6(t.reverse(),e);return[n,r]}function nL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function q6(e,t){for(const n of e)if(!Che(n,{upTo:t}))return n}function Che(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function khe(e){return e instanceof HTMLInputElement&&"select"in e}function Ou(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&khe(e)&&t&&e.select()}}var H6=Ahe();function Ahe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=V6(e,t),e.unshift(t)},remove(t){var n;e=V6(e,t),(n=e[0])==null||n.resume()}}}function V6(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function The(e){return e.filter(t=>t.tagName!=="A")}var T2=0;function n1(){R.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??G6()),document.body.insertAdjacentElement("beforeend",e[1]??G6()),T2++,()=>{T2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),T2--}},[])}function G6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Rs=function(){return Rs=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Rs.apply(this,arguments)};function rL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Rhe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Tb="right-scroll-bar-position",Rb="width-before-scroll-bar",Nhe="with-scroll-bars-hidden",Ihe="--removed-body-scroll-bar-size";function R2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Ohe(e,t){var n=R.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Dhe=typeof window<"u"?R.useLayoutEffect:R.useEffect,W6=new WeakMap;function jhe(e,t){var n=Ohe(null,function(r){return e.forEach(function(a){return R2(a,r)})});return Dhe(function(){var r=W6.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||R2(s,null)}),i.forEach(function(s){a.has(s)||R2(s,o)})}W6.set(n,e)},[e]),n}function Mhe(e){return e}function Phe(e,t){t===void 0&&(t=Mhe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var u=function(){var f=o;o=[],f.forEach(i)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(f){o.push(f),c()},filter:function(f){return o=o.filter(f),n}}}};return a}function Fhe(e){e===void 0&&(e={});var t=Phe(null);return t.options=Rs({async:!0,ssr:!1},e),t}var aL=function(e){var t=e.sideCar,n=rL(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,Rs({},n))};aL.isSideCarExport=!0;function Lhe(e,t){return e.useMedium(t),aL}var iL=Fhe(),N2=function(){},r1=R.forwardRef(function(e,t){var n=R.useRef(null),r=R.useState({onScrollCapture:N2,onWheelCapture:N2,onTouchMoveCapture:N2}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,u=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,g=e.noIsolation,v=e.inert,b=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,S=e.gapMode,E=rL(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,k=jhe([n,t]),D=Rs(Rs({},E),a);return R.createElement(R.Fragment,null,f&&R.createElement(C,{sideCar:iL,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),o?R.cloneElement(R.Children.only(s),Rs(Rs({},D),{ref:k})):R.createElement(x,Rs({},D,{className:u,ref:k}),s))});r1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};r1.classNames={fullWidth:Rb,zeroRight:Tb};var $he=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Bhe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$he();return t&&e.setAttribute("nonce",t),e}function zhe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Uhe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qhe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Bhe())&&(zhe(t,n),Uhe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Hhe=function(){var e=qhe();return function(t,n){R.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},oL=function(){var e=Hhe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Vhe={left:0,top:0,right:0,gap:0},I2=function(e){return parseInt(e||"",10)||0},Ghe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[I2(n),I2(r),I2(a)]},Whe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Vhe;var t=Ghe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Khe=oL(),Gf="data-scroll-locked",Zhe=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Nhe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Gf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tb,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Rb,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Tb," .").concat(Tb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rb," .").concat(Rb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Gf,`] {
    `).concat(Ihe,": ").concat(s,`px;
  }
`)},K6=function(){var e=parseInt(document.body.getAttribute(Gf)||"0",10);return isFinite(e)?e:0},Yhe=function(){R.useEffect(function(){return document.body.setAttribute(Gf,(K6()+1).toString()),function(){var e=K6()-1;e<=0?document.body.removeAttribute(Gf):document.body.setAttribute(Gf,e.toString())}},[])},Xhe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Yhe();var i=R.useMemo(function(){return Whe(a)},[a]);return R.createElement(Khe,{styles:Zhe(i,!t,a,n?"":"!important")})},KE=!1;if(typeof window<"u")try{var fb=Object.defineProperty({},"passive",{get:function(){return KE=!0,!0}});window.addEventListener("test",fb,fb),window.removeEventListener("test",fb,fb)}catch{KE=!1}var Rf=KE?{passive:!1}:!1,Jhe=function(e){return e.tagName==="TEXTAREA"},sL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Jhe(e)&&n[t]==="visible")},Qhe=function(e){return sL(e,"overflowY")},epe=function(e){return sL(e,"overflowX")},Z6=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=lL(e,r);if(a){var i=uL(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},tpe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},npe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},lL=function(e,t){return e==="v"?Qhe(t):epe(t)},uL=function(e,t){return e==="v"?tpe(t):npe(t)},rpe=function(e,t){return e==="h"&&t==="rtl"?-1:1},ape=function(e,t,n,r,a){var i=rpe(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,u=t.contains(s),c=!1,f=o>0,h=0,p=0;do{var g=uL(e,s),v=g[0],b=g[1],_=g[2],x=b-_-i*v;(v||x)&&lL(e,s)&&(h+=x,p+=v),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(c=!0),c},hb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Y6=function(e){return[e.deltaX,e.deltaY]},X6=function(e){return e&&"current"in e?e.current:e},ipe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ope=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},spe=0,Nf=[];function lpe(e){var t=R.useRef([]),n=R.useRef([0,0]),r=R.useRef(),a=R.useState(spe++)[0],i=R.useState(oL)[0],o=R.useRef(e);R.useEffect(function(){o.current=e},[e]),R.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=Rhe([e.lockRef.current],(e.shards||[]).map(X6),!0).filter(Boolean);return b.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=R.useCallback(function(b,_){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var x=hb(b),S=n.current,E="deltaX"in b?b.deltaX:S[0]-x[0],C="deltaY"in b?b.deltaY:S[1]-x[1],k,D=b.target,O=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&O==="h"&&D.type==="range")return!1;var N=Z6(O,D);if(!N)return!0;if(N?k=O:(k=O==="v"?"h":"v",N=Z6(O,D)),!N)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=k),!k)return!0;var z=r.current||k;return ape(z,_,b,z==="h"?E:C)},[]),u=R.useCallback(function(b){var _=b;if(!(!Nf.length||Nf[Nf.length-1]!==i)){var x="deltaY"in _?Y6(_):hb(_),S=t.current.filter(function(k){return k.name===_.type&&(k.target===_.target||_.target===k.shadowParent)&&ipe(k.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(X6).filter(Boolean).filter(function(k){return k.contains(_.target)}),C=E.length>0?s(_,E[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),c=R.useCallback(function(b,_,x,S){var E={name:b,delta:_,target:x,should:S,shadowParent:upe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),f=R.useCallback(function(b){n.current=hb(b),r.current=void 0},[]),h=R.useCallback(function(b){c(b.type,Y6(b),b.target,s(b,e.lockRef.current))},[]),p=R.useCallback(function(b){c(b.type,hb(b),b.target,s(b,e.lockRef.current))},[]);R.useEffect(function(){return Nf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",u,Rf),document.addEventListener("touchmove",u,Rf),document.addEventListener("touchstart",f,Rf),function(){Nf=Nf.filter(function(b){return b!==i}),document.removeEventListener("wheel",u,Rf),document.removeEventListener("touchmove",u,Rf),document.removeEventListener("touchstart",f,Rf)}},[]);var g=e.removeScrollBar,v=e.inert;return R.createElement(R.Fragment,null,v?R.createElement(i,{styles:ope(a)}):null,g?R.createElement(Xhe,{gapMode:e.gapMode}):null)}function upe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const cpe=Lhe(iL,lpe);var vg=R.forwardRef(function(e,t){return R.createElement(r1,Rs({},e,{ref:t,sideCar:cpe}))});vg.classNames=r1.classNames;var dpe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},If=new WeakMap,pb=new WeakMap,mb={},O2=0,cL=function(e){return e&&(e.host||cL(e.parentNode))},fpe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=cL(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},hpe=function(e,t,n,r){var a=fpe(t,Array.isArray(e)?e:[e]);mb[n]||(mb[n]=new WeakMap);var i=mb[n],o=[],s=new Set,u=new Set(a),c=function(h){!h||s.has(h)||(s.add(h),c(h.parentNode))};a.forEach(c);var f=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(p){if(s.has(p))f(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",b=(If.get(p)||0)+1,_=(i.get(p)||0)+1;If.set(p,b),i.set(p,_),o.push(p),b===1&&v&&pb.set(p,!0),_===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return f(t),s.clear(),O2++,function(){o.forEach(function(h){var p=If.get(h)-1,g=i.get(h)-1;If.set(h,p),i.set(h,g),p||(pb.has(h)||h.removeAttribute(r),pb.delete(h)),g||h.removeAttribute(n)}),O2--,O2||(If=new WeakMap,If=new WeakMap,pb=new WeakMap,mb={})}},a1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=dpe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),hpe(r,a,n,"aria-hidden")):function(){return null}},i1="Dialog",[dL,v1e]=Ni(i1),[ppe,as]=dL(i1),fL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=R.useRef(null),u=R.useRef(null),[c,f]=Bs({prop:r,defaultProp:a??!1,onChange:i,caller:i1});return y.jsx(ppe,{scope:t,triggerRef:s,contentRef:u,contentId:Xa(),titleId:Xa(),descriptionId:Xa(),open:c,onOpenChange:f,onOpenToggle:R.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};fL.displayName=i1;var hL="DialogTrigger",pL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(hL,n),i=_n(t,a.triggerRef);return y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":fA(a.open),...r,ref:i,onClick:Bt(e.onClick,a.onOpenToggle)})});pL.displayName=hL;var cA="DialogPortal",[mpe,mL]=dL(cA,{forceMount:void 0}),gL=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=as(cA,t);return y.jsx(mpe,{scope:t,forceMount:n,children:R.Children.map(r,o=>y.jsx(Da,{present:n||i.open,children:y.jsx(kh,{asChild:!0,container:a,children:o})}))})};gL.displayName=cA;var Bv="DialogOverlay",yL=R.forwardRef((e,t)=>{const n=mL(Bv,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=as(Bv,e.__scopeDialog);return i.modal?y.jsx(Da,{present:r||i.open,children:y.jsx(ype,{...a,ref:t})}):null});yL.displayName=Bv;var gpe=zu("DialogOverlay.RemoveScroll"),ype=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(Bv,n);return y.jsx(vg,{as:gpe,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(Jt.div,{"data-state":fA(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),pd="DialogContent",bL=R.forwardRef((e,t)=>{const n=mL(pd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=as(pd,e.__scopeDialog);return y.jsx(Da,{present:r||i.open,children:i.modal?y.jsx(bpe,{...a,ref:t}):y.jsx(vpe,{...a,ref:t})})});bL.displayName=pd;var bpe=R.forwardRef((e,t)=>{const n=as(pd,e.__scopeDialog),r=R.useRef(null),a=_n(t,n.contentRef,r);return R.useEffect(()=>{const i=r.current;if(i)return a1(i)},[]),y.jsx(vL,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Bt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:Bt(e.onFocusOutside,i=>i.preventDefault())})}),vpe=R.forwardRef((e,t)=>{const n=as(pd,e.__scopeDialog),r=R.useRef(!1),a=R.useRef(!1);return y.jsx(vL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),vL=R.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=as(pd,n),u=R.useRef(null),c=_n(t,u);return n1(),y.jsxs(y.Fragment,{children:[y.jsx(bg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(Sh,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":fA(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(wpe,{titleId:s.titleId}),y.jsx(xpe,{contentRef:u,descriptionId:s.descriptionId})]})]})}),dA="DialogTitle",wL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(dA,n);return y.jsx(Jt.h2,{id:a.titleId,...r,ref:t})});wL.displayName=dA;var _L="DialogDescription",xL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(_L,n);return y.jsx(Jt.p,{id:a.descriptionId,...r,ref:t})});xL.displayName=_L;var SL="DialogClose",EL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(SL,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Bt(e.onClick,()=>a.onOpenChange(!1))})});EL.displayName=SL;function fA(e){return e?"open":"closed"}var CL="DialogTitleWarning",[w1e,kL]=HZ(CL,{contentName:pd,titleName:dA,docsSlug:"dialog"}),wpe=({titleId:e})=>{const t=kL(CL),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return R.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},_pe="DialogDescriptionWarning",xpe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kL(_pe).contentName}}.`;return R.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},AL=fL,Spe=pL,TL=gL,RL=yL,NL=bL,Epe=wL,Cpe=xL,IL=EL;function o1({...e}){return y.jsx(AL,{"data-slot":"dialog",...e})}function kpe({...e}){return y.jsx(Spe,{"data-slot":"dialog-trigger",...e})}function Ape({...e}){return y.jsx(TL,{"data-slot":"dialog-portal",...e})}function Tpe({...e}){return y.jsx(IL,{"data-slot":"dialog-close",...e})}function Rpe({className:e,...t}){return y.jsx(RL,{"data-slot":"dialog-overlay",className:$t("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function s1({className:e,children:t,...n}){return y.jsxs(Ape,{"data-slot":"dialog-portal",children:[y.jsx(Rpe,{}),y.jsxs(NL,{"data-slot":"dialog-content",className:$t("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(IL,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(ql,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function l1({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:$t("flex flex-col gap-2 text-center sm:text-left",e),...t})}function u1({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:$t("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function c1({className:e,...t}){return y.jsx(Epe,{"data-slot":"dialog-title",className:$t("text-lg leading-none font-semibold",e),...t})}function d1({className:e,...t}){return y.jsx(Cpe,{"data-slot":"dialog-description",className:$t("text-muted-foreground text-sm",e),...t})}function f1(e){const t=e+"CollectionProvider",[n,r]=Ni(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:_,children:x}=b,S=vt.useRef(null),E=vt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:S,children:x})};o.displayName=t;const s=e+"CollectionSlot",u=zu(s),c=vt.forwardRef((b,_)=>{const{scope:x,children:S}=b,E=i(s,x),C=_n(_,E.collectionRef);return y.jsx(u,{ref:C,children:S})});c.displayName=s;const f=e+"CollectionItemSlot",h="data-radix-collection-item",p=zu(f),g=vt.forwardRef((b,_)=>{const{scope:x,children:S,...E}=b,C=vt.useRef(null),k=_n(_,C),D=i(f,x);return vt.useEffect(()=>(D.itemMap.set(C,{ref:C,...E}),()=>void D.itemMap.delete(C))),y.jsx(p,{[h]:"",ref:k,children:S})});g.displayName=f;function v(b){const _=i(e+"CollectionConsumer",b);return vt.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((D,O)=>E.indexOf(D.ref.current)-E.indexOf(O.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var D2="rovingFocusGroup.onEntryFocus",Npe={bubbles:!1,cancelable:!0},wg="RovingFocusGroup",[ZE,OL,Ipe]=f1(wg),[Ope,h1]=Ni(wg,[Ipe]),[Dpe,jpe]=Ope(wg),DL=R.forwardRef((e,t)=>y.jsx(ZE.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(ZE.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(Mpe,{...e,ref:t})})}));DL.displayName=wg;var Mpe=R.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=e,p=R.useRef(null),g=_n(t,p),v=Uh(i),[b,_]=Bs({prop:o,defaultProp:s??null,onChange:u,caller:wg}),[x,S]=R.useState(!1),E=Ta(c),C=OL(n),k=R.useRef(!1),[D,O]=R.useState(0);return R.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(D2,E),()=>N.removeEventListener(D2,E)},[E]),y.jsx(Dpe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:R.useCallback(N=>_(N),[_]),onItemShiftTab:R.useCallback(()=>S(!0),[]),onFocusableItemAdd:R.useCallback(()=>O(N=>N+1),[]),onFocusableItemRemove:R.useCallback(()=>O(N=>N-1),[]),children:y.jsx(Jt.div,{tabIndex:x||D===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Bt(e.onMouseDown,()=>{k.current=!0}),onFocus:Bt(e.onFocus,N=>{const z=!k.current;if(N.target===N.currentTarget&&z&&!x){const H=new CustomEvent(D2,Npe);if(N.currentTarget.dispatchEvent(H),!H.defaultPrevented){const X=C().filter(ae=>ae.focusable),F=X.find(ae=>ae.active),Z=X.find(ae=>ae.id===b),de=[F,Z,...X].filter(Boolean).map(ae=>ae.ref.current);PL(de,f)}}k.current=!1}),onBlur:Bt(e.onBlur,()=>S(!1))})})}),jL="RovingFocusGroupItem",ML=R.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,u=Xa(),c=i||u,f=jpe(jL,n),h=f.currentTabStopId===c,p=OL(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=f;return R.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),y.jsx(ZE.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:y.jsx(Jt.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...s,ref:t,onMouseDown:Bt(e.onMouseDown,_=>{r?f.onItemFocus(c):_.preventDefault()}),onFocus:Bt(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:Bt(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=Lpe(_,f.orientation,f.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=p().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(_.currentTarget);E=f.loop?$pe(E,C+1):E.slice(C+1)}setTimeout(()=>PL(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:b!=null}):o})})});ML.displayName=jL;var Ppe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Fpe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Lpe(e,t,n){const r=Fpe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Ppe[r]}function PL(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function $pe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var FL=DL,LL=ML,p1="Tabs",[Bpe,_1e]=Ni(p1,[h1]),$L=h1(),[zpe,hA]=Bpe(p1),BL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:u="automatic",...c}=e,f=Uh(s),[h,p]=Bs({prop:r,onChange:a,defaultProp:i??"",caller:p1});return y.jsx(zpe,{scope:n,baseId:Xa(),value:h,onValueChange:p,orientation:o,dir:f,activationMode:u,children:y.jsx(Jt.div,{dir:f,"data-orientation":o,...c,ref:t})})});BL.displayName=p1;var zL="TabsList",UL=R.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=hA(zL,n),o=$L(n);return y.jsx(FL,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(Jt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});UL.displayName=zL;var qL="TabsTrigger",HL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=hA(qL,n),s=$L(n),u=WL(o.baseId,r),c=KL(o.baseId,r),f=r===o.value;return y.jsx(LL,{asChild:!0,...s,focusable:!a,active:f,children:y.jsx(Jt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:Bt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Bt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Bt(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!a&&h&&o.onValueChange(r)})})})});HL.displayName=qL;var VL="TabsContent",GL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=hA(VL,n),u=WL(s.baseId,r),c=KL(s.baseId,r),f=r===s.value,h=R.useRef(f);return R.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),y.jsx(Da,{present:a||f,children:({present:p})=>y.jsx(Jt.div,{"data-state":f?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});GL.displayName=VL;function WL(e,t){return`${e}-trigger-${t}`}function KL(e,t){return`${e}-content-${t}`}var Upe=BL,qpe=UL,Hpe=HL,Vpe=GL;function j2({className:e,...t}){return y.jsx(Upe,{"data-slot":"tabs",className:$t("flex flex-col gap-2",e),...t})}function M2({className:e,...t}){return y.jsx(qpe,{"data-slot":"tabs-list",className:$t("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function ho({className:e,...t}){return y.jsx(Hpe,{"data-slot":"tabs-trigger",className:$t("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function po({className:e,...t}){return y.jsx(Vpe,{"data-slot":"tabs-content",className:$t("flex-1 outline-none",e),...t})}var Gpe="Label",ZL=R.forwardRef((e,t)=>y.jsx(Jt.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ZL.displayName=Gpe;var Wpe=ZL;function En({className:e,...t}){return y.jsx(Wpe,{"data-slot":"label",className:$t("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function m1(e){const t=R.useRef({value:e,previous:e});return R.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var g1="Switch",[Kpe,x1e]=Ni(g1),[Zpe,Ype]=Kpe(g1),YL=R.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[p,g]=R.useState(null),v=_n(t,E=>g(E)),b=R.useRef(!1),_=p?f||!!p.closest("form"):!0,[x,S]=Bs({prop:a,defaultProp:i??!1,onChange:c,caller:g1});return y.jsxs(Zpe,{scope:n,checked:x,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":e$(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onClick:Bt(e.onClick,E=>{S(C=>!C),_&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),_&&y.jsx(QL,{control:p,bubbles:!b.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"}})]})});YL.displayName=g1;var XL="SwitchThumb",JL=R.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Ype(XL,n);return y.jsx(Jt.span,{"data-state":e$(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});JL.displayName=XL;var Xpe="SwitchBubbleInput",QL=R.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=R.useRef(null),s=_n(o,i),u=m1(n),c=yw(t);return R.useEffect(()=>{const f=o.current;if(!f)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&g){const v=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(v)}},[u,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});QL.displayName=Xpe;function e$(e){return e?"checked":"unchecked"}var Jpe=YL,Qpe=JL;function $l({className:e,...t}){return y.jsx(Jpe,{"data-slot":"switch",className:$t("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Qpe,{"data-slot":"switch-thumb",className:$t("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var eme=[" ","Enter","ArrowUp","ArrowDown"],tme=[" ","Enter"],md="Select",[y1,b1,nme]=f1(md),[qh,S1e]=Ni(md,[nme,lc]),v1=lc(),[rme,bc]=qh(md),[ame,ime]=qh(md),t$=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:u,dir:c,name:f,autoComplete:h,disabled:p,required:g,form:v}=e,b=v1(t),[_,x]=R.useState(null),[S,E]=R.useState(null),[C,k]=R.useState(!1),D=Uh(c),[O,N]=Bs({prop:r,defaultProp:a??!1,onChange:i,caller:md}),[z,H]=Bs({prop:o,defaultProp:s,onChange:u,caller:md}),X=R.useRef(null),F=_?v||!!_.closest("form"):!0,[Z,L]=R.useState(new Set),de=Array.from(Z).map(ae=>ae.props.value).join(";");return y.jsx(bw,{...b,children:y.jsxs(rme,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:Xa(),value:z,onValueChange:H,open:O,onOpenChange:N,dir:D,triggerPointerDownPosRef:X,disabled:p,children:[y.jsx(y1.Provider,{scope:t,children:y.jsx(ame,{scope:e.__scopeSelect,onNativeOptionAdd:R.useCallback(ae=>{L(ne=>new Set(ne).add(ae))},[]),onNativeOptionRemove:R.useCallback(ae=>{L(ne=>{const ee=new Set(ne);return ee.delete(ae),ee})},[]),children:n})}),F?y.jsxs(S$,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:z,onChange:ae=>H(ae.target.value),disabled:p,form:v,children:[z===void 0?y.jsx("option",{value:""}):null,Array.from(Z)]},de):null]})})};t$.displayName=md;var n$="SelectTrigger",r$=R.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=v1(n),o=bc(n$,n),s=o.disabled||r,u=_n(t,o.onTriggerChange),c=b1(n),f=R.useRef("touch"),[h,p,g]=C$(b=>{const _=c().filter(E=>!E.disabled),x=_.find(E=>E.value===o.value),S=k$(_,b,x);S!==void 0&&o.onValueChange(S.value)}),v=b=>{s||(o.onOpenChange(!0),g()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return y.jsx(P0,{asChild:!0,...i,children:y.jsx(Jt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":E$(o.value)?"":void 0,...a,ref:u,onClick:Bt(a.onClick,b=>{b.currentTarget.focus(),f.current!=="mouse"&&v(b)}),onPointerDown:Bt(a.onPointerDown,b=>{f.current=b.pointerType;const _=b.target;_.hasPointerCapture(b.pointerId)&&_.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:Bt(a.onKeyDown,b=>{const _=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(_&&b.key===" ")&&eme.includes(b.key)&&(v(),b.preventDefault())})})})});r$.displayName=n$;var a$="SelectValue",i$=R.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,u=bc(a$,n),{onValueNodeHasChildrenChange:c}=u,f=i!==void 0,h=_n(t,u.onValueNodeChange);return Ba(()=>{c(f)},[c,f]),y.jsx(Jt.span,{...s,ref:h,style:{pointerEvents:"none"},children:E$(u.value)?y.jsx(y.Fragment,{children:o}):i})});i$.displayName=a$;var ome="SelectIcon",o$=R.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(Jt.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});o$.displayName=ome;var sme="SelectPortal",s$=e=>y.jsx(kh,{asChild:!0,...e});s$.displayName=sme;var gd="SelectContent",l$=R.forwardRef((e,t)=>{const n=bc(gd,e.__scopeSelect),[r,a]=R.useState();if(Ba(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Ns.createPortal(y.jsx(u$,{scope:e.__scopeSelect,children:y.jsx(y1.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(c$,{...e,ref:t})});l$.displayName=gd;var Po=10,[u$,vc]=qh(gd),lme="SelectContentImpl",ume=zu("SelectContent.RemoveScroll"),c$=R.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_,...x}=e,S=bc(gd,n),[E,C]=R.useState(null),[k,D]=R.useState(null),O=_n(t,Pe=>C(Pe)),[N,z]=R.useState(null),[H,X]=R.useState(null),F=b1(n),[Z,L]=R.useState(!1),de=R.useRef(!1);R.useEffect(()=>{if(E)return a1(E)},[E]),n1();const ae=R.useCallback(Pe=>{const[Ae,...Te]=F().map(Ie=>Ie.ref.current),[qe]=Te.slice(-1),it=document.activeElement;for(const Ie of Pe)if(Ie===it||(Ie==null||Ie.scrollIntoView({block:"nearest"}),Ie===Ae&&k&&(k.scrollTop=0),Ie===qe&&k&&(k.scrollTop=k.scrollHeight),Ie==null||Ie.focus(),document.activeElement!==it))return},[F,k]),ne=R.useCallback(()=>ae([N,E]),[ae,N,E]);R.useEffect(()=>{Z&&ne()},[Z,ne]);const{onOpenChange:ee,triggerPointerDownPosRef:se}=S;R.useEffect(()=>{if(E){let Pe={x:0,y:0};const Ae=qe=>{var it,Ie;Pe={x:Math.abs(Math.round(qe.pageX)-(((it=se.current)==null?void 0:it.x)??0)),y:Math.abs(Math.round(qe.pageY)-(((Ie=se.current)==null?void 0:Ie.y)??0))}},Te=qe=>{Pe.x<=10&&Pe.y<=10?qe.preventDefault():E.contains(qe.target)||ee(!1),document.removeEventListener("pointermove",Ae),se.current=null};return se.current!==null&&(document.addEventListener("pointermove",Ae),document.addEventListener("pointerup",Te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",Te,{capture:!0})}}},[E,ee,se]),R.useEffect(()=>{const Pe=()=>ee(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[ee]);const[W,J]=C$(Pe=>{const Ae=F().filter(it=>!it.disabled),Te=Ae.find(it=>it.ref.current===document.activeElement),qe=k$(Ae,Pe,Te);qe&&setTimeout(()=>qe.ref.current.focus())}),Y=R.useCallback((Pe,Ae,Te)=>{const qe=!de.current&&!Te;(S.value!==void 0&&S.value===Ae||qe)&&(z(Pe),qe&&(de.current=!0))},[S.value]),re=R.useCallback(()=>E==null?void 0:E.focus(),[E]),be=R.useCallback((Pe,Ae,Te)=>{const qe=!de.current&&!Te;(S.value!==void 0&&S.value===Ae||qe)&&X(Pe)},[S.value]),we=r==="popper"?YE:d$,Me=we===YE?{side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_}:{};return y.jsx(u$,{scope:n,content:E,viewport:k,onViewportChange:D,itemRefCallback:Y,selectedItem:N,onItemLeave:re,itemTextRefCallback:be,focusSelectedItem:ne,selectedItemText:H,position:r,isPositioned:Z,searchRef:W,children:y.jsx(vg,{as:ume,allowPinchZoom:!0,children:y.jsx(bg,{asChild:!0,trapped:S.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:Bt(a,Pe=>{var Ae;(Ae=S.trigger)==null||Ae.focus({preventScroll:!0}),Pe.preventDefault()}),children:y.jsx(Sh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(we,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Pe=>Pe.preventDefault(),...x,...Me,onPlaced:()=>L(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Bt(x.onKeyDown,Pe=>{const Ae=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Ae&&Pe.key.length===1&&J(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let qe=F().filter(it=>!it.disabled).map(it=>it.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&(qe=qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const it=Pe.target,Ie=qe.indexOf(it);qe=qe.slice(Ie+1)}setTimeout(()=>ae(qe)),Pe.preventDefault()}})})})})})})});c$.displayName=lme;var cme="SelectItemAlignedPosition",d$=R.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=bc(gd,n),o=vc(gd,n),[s,u]=R.useState(null),[c,f]=R.useState(null),h=_n(t,O=>f(O)),p=b1(n),g=R.useRef(!1),v=R.useRef(!0),{viewport:b,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,E=R.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&b&&_&&x){const O=i.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),z=i.valueNode.getBoundingClientRect(),H=x.getBoundingClientRect();if(i.dir!=="rtl"){const it=H.left-N.left,Ie=z.left-it,Re=O.left-Ie,U=O.width+Re,Ce=Math.max(U,N.width),Ne=window.innerWidth-Po,ce=E0(Ie,[Po,Math.max(Po,Ne-Ce)]);s.style.minWidth=U+"px",s.style.left=ce+"px"}else{const it=N.right-H.right,Ie=window.innerWidth-z.right-it,Re=window.innerWidth-O.right-Ie,U=O.width+Re,Ce=Math.max(U,N.width),Ne=window.innerWidth-Po,ce=E0(Ie,[Po,Math.max(Po,Ne-Ce)]);s.style.minWidth=U+"px",s.style.right=ce+"px"}const X=p(),F=window.innerHeight-Po*2,Z=b.scrollHeight,L=window.getComputedStyle(c),de=parseInt(L.borderTopWidth,10),ae=parseInt(L.paddingTop,10),ne=parseInt(L.borderBottomWidth,10),ee=parseInt(L.paddingBottom,10),se=de+ae+Z+ee+ne,W=Math.min(_.offsetHeight*5,se),J=window.getComputedStyle(b),Y=parseInt(J.paddingTop,10),re=parseInt(J.paddingBottom,10),be=O.top+O.height/2-Po,we=F-be,Me=_.offsetHeight/2,Pe=_.offsetTop+Me,Ae=de+ae+Pe,Te=se-Ae;if(Ae<=be){const it=X.length>0&&_===X[X.length-1].ref.current;s.style.bottom="0px";const Ie=c.clientHeight-b.offsetTop-b.offsetHeight,Re=Math.max(we,Me+(it?re:0)+Ie+ne),U=Ae+Re;s.style.height=U+"px"}else{const it=X.length>0&&_===X[0].ref.current;s.style.top="0px";const Re=Math.max(be,de+b.offsetTop+(it?Y:0)+Me)+Te;s.style.height=Re+"px",b.scrollTop=Ae-be+b.offsetTop}s.style.margin=`${Po}px 0`,s.style.minHeight=W+"px",s.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,s,c,b,_,x,i.dir,r]);Ba(()=>E(),[E]);const[C,k]=R.useState();Ba(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const D=R.useCallback(O=>{O&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return y.jsx(fme,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:D,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(Jt.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});d$.displayName=cme;var dme="SelectPopperPosition",YE=R.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Po,...i}=e,o=v1(n);return y.jsx(vw,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});YE.displayName=dme;var[fme,pA]=qh(gd,{}),XE="SelectViewport",f$=R.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=vc(XE,n),o=pA(XE,n),s=_n(t,i.onViewportChange),u=R.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(y1.Slot,{scope:n,children:y.jsx(Jt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Bt(a.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const g=Math.abs(u.current-f.scrollTop);if(g>0){const v=window.innerHeight-Po*2,b=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(b,_);if(x<v){const S=x+g,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});f$.displayName=XE;var h$="SelectGroup",[hme,pme]=qh(h$),mme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Xa();return y.jsx(hme,{scope:n,id:a,children:y.jsx(Jt.div,{role:"group","aria-labelledby":a,...r,ref:t})})});mme.displayName=h$;var p$="SelectLabel",gme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=pme(p$,n);return y.jsx(Jt.div,{id:a.id,...r,ref:t})});gme.displayName=p$;var zv="SelectItem",[yme,m$]=qh(zv),g$=R.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=bc(zv,n),u=vc(zv,n),c=s.value===r,[f,h]=R.useState(i??""),[p,g]=R.useState(!1),v=_n(t,S=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,S,r,a)}),b=Xa(),_=R.useRef("touch"),x=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(yme,{scope:n,value:r,disabled:a,textId:b,isSelected:c,onItemTextChange:R.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(y1.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:y.jsx(Jt.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:Bt(o.onFocus,()=>g(!0)),onBlur:Bt(o.onBlur,()=>g(!1)),onClick:Bt(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:Bt(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:Bt(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:Bt(o.onPointerMove,S=>{var E;_.current=S.pointerType,a?(E=u.onItemLeave)==null||E.call(u):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Bt(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:Bt(o.onKeyDown,S=>{var C;((C=u.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(tme.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});g$.displayName=zv;var gm="SelectItemText",y$=R.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=bc(gm,n),s=vc(gm,n),u=m$(gm,n),c=ime(gm,n),[f,h]=R.useState(null),p=_n(t,x=>h(x),u.onItemTextChange,x=>{var S;return(S=s.itemTextRefCallback)==null?void 0:S.call(s,x,u.value,u.disabled)}),g=f==null?void 0:f.textContent,v=R.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:_}=c;return Ba(()=>(b(v),()=>_(v)),[b,_,v]),y.jsxs(y.Fragment,{children:[y.jsx(Jt.span,{id:u.textId,...i,ref:p}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ns.createPortal(i.children,o.valueNode):null]})});y$.displayName=gm;var b$="SelectItemIndicator",v$=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return m$(b$,n).isSelected?y.jsx(Jt.span,{"aria-hidden":!0,...r,ref:t}):null});v$.displayName=b$;var JE="SelectScrollUpButton",w$=R.forwardRef((e,t)=>{const n=vc(JE,e.__scopeSelect),r=pA(JE,e.__scopeSelect),[a,i]=R.useState(!1),o=_n(t,r.onScrollButtonChange);return Ba(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollTop>0;i(c)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(x$,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});w$.displayName=JE;var QE="SelectScrollDownButton",_$=R.forwardRef((e,t)=>{const n=vc(QE,e.__scopeSelect),r=pA(QE,e.__scopeSelect),[a,i]=R.useState(!1),o=_n(t,r.onScrollButtonChange);return Ba(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<c;i(f)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(x$,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});_$.displayName=QE;var x$=R.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=vc("SelectScrollButton",n),o=R.useRef(null),s=b1(n),u=R.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return R.useEffect(()=>()=>u(),[u]),Ba(()=>{var f;const c=s().find(h=>h.ref.current===document.activeElement);(f=c==null?void 0:c.ref.current)==null||f.scrollIntoView({block:"nearest"})},[s]),y.jsx(Jt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Bt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Bt(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Bt(a.onPointerLeave,()=>{u()})})}),bme="SelectSeparator",vme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(Jt.div,{"aria-hidden":!0,...r,ref:t})});vme.displayName=bme;var eC="SelectArrow",wme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=v1(n),i=bc(eC,n),o=vc(eC,n);return i.open&&o.position==="popper"?y.jsx(ww,{...a,...r,ref:t}):null});wme.displayName=eC;var _me="SelectBubbleInput",S$=R.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=R.useRef(null),i=_n(r,a),o=m1(t);return R.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.select,{...n,style:{...U8,...n.style},ref:i,defaultValue:t})});S$.displayName=_me;function E$(e){return e===""||e===void 0}function C$(e){const t=Ta(e),n=R.useRef(""),r=R.useRef(0),a=R.useCallback(o=>{const s=n.current+o;t(s),function u(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(s)},[t]),i=R.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function k$(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=xme(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function xme(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Sme=t$,Eme=r$,Cme=i$,kme=o$,Ame=s$,Tme=l$,Rme=f$,Nme=g$,Ime=y$,Ome=v$,Dme=w$,jme=_$;function Hh({...e}){return y.jsx(Sme,{"data-slot":"select",...e})}function Vh({...e}){return y.jsx(Cme,{"data-slot":"select-value",...e})}function Gh({className:e,size:t="default",children:n,...r}){return y.jsxs(Eme,{"data-slot":"select-trigger","data-size":t,className:$t("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(kme,{asChild:!0,children:y.jsx(sw,{className:"size-4 opacity-50"})})]})}function Wh({className:e,children:t,position:n="popper",...r}){return y.jsx(Ame,{children:y.jsxs(Tme,{"data-slot":"select-content",className:$t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(Mme,{}),y.jsx(Rme,{className:$t("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(Pme,{})]})})}function Wi({className:e,children:t,...n}){return y.jsxs(Nme,{"data-slot":"select-item",className:$t("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx(Ome,{children:y.jsx(xo,{className:"size-4"})})}),y.jsx(Ime,{children:t})]})}function Mme({className:e,...t}){return y.jsx(Dme,{"data-slot":"select-scroll-up-button",className:$t("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(cK,{className:"size-4"})})}function Pme({className:e,...t}){return y.jsx(jme,{"data-slot":"select-scroll-down-button",className:$t("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(sw,{className:"size-4"})})}var A$=["PageUp","PageDown"],T$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R$={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Kh="Slider",[tC,Fme,Lme]=f1(Kh),[N$,E1e]=Ni(Kh,[Lme]),[$me,w1]=N$(Kh),I$=R.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:u=0,defaultValue:c=[r],value:f,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:v,...b}=e,_=R.useRef(new Set),x=R.useRef(0),E=o==="horizontal"?Bme:zme,[C=[],k]=Bs({prop:f,defaultProp:c,onChange:X=>{var Z;(Z=[..._.current][x.current])==null||Z.focus(),h(X)}}),D=R.useRef(C);function O(X){const F=Gme(C,X);H(X,F)}function N(X){H(X,x.current)}function z(){const X=D.current[x.current];C[x.current]!==X&&p(C)}function H(X,F,{commit:Z}={commit:!1}){const L=Yme(i),de=Xme(Math.round((X-r)/i)*i+r,L),ae=E0(de,[r,a]);k((ne=[])=>{const ee=Hme(ne,ae,F);if(Zme(ee,u*i)){x.current=ee.indexOf(ae);const se=String(ee)!==String(ne);return se&&Z&&p(ee),se?ee:ne}else return ne})}return y.jsx($me,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:C,orientation:o,form:v,children:y.jsx(tC.Provider,{scope:e.__scopeSlider,children:y.jsx(tC.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...b,ref:t,onPointerDown:Bt(b.onPointerDown,()=>{s||(D.current=C)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:O,onSlideMove:s?void 0:N,onSlideEnd:s?void 0:z,onHomeKeyDown:()=>!s&&H(r,0,{commit:!0}),onEndKeyDown:()=>!s&&H(a,C.length-1,{commit:!0}),onStepKeyDown:({event:X,direction:F})=>{if(!s){const de=A$.includes(X.key)||X.shiftKey&&T$.includes(X.key)?10:1,ae=x.current,ne=C[ae],ee=i*de*F;H(ne+ee,ae,{commit:!0})}}})})})})});I$.displayName=Kh;var[O$,D$]=N$(Kh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Bme=R.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:u,onStepKeyDown:c,...f}=e,[h,p]=R.useState(null),g=_n(t,E=>p(E)),v=R.useRef(void 0),b=Uh(a),_=b==="ltr",x=_&&!i||!_&&i;function S(E){const C=v.current||h.getBoundingClientRect(),k=[0,C.width],O=mA(k,x?[n,r]:[r,n]);return v.current=C,O(E-C.left)}return y.jsx(O$,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(j$,{dir:b,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);s==null||s(C)},onSlideEnd:()=>{v.current=void 0,u==null||u()},onStepKeyDown:E=>{const k=R$[x?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:k?-1:1})}})})}),zme=R.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:u,...c}=e,f=R.useRef(null),h=_n(t,f),p=R.useRef(void 0),g=!a;function v(b){const _=p.current||f.current.getBoundingClientRect(),x=[0,_.height],E=mA(x,g?[r,n]:[n,r]);return p.current=_,E(b-_.top)}return y.jsx(O$,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(j$,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const _=v(b.clientY);i==null||i(_)},onSlideMove:b=>{const _=v(b.clientY);o==null||o(_)},onSlideEnd:()=>{p.current=void 0,s==null||s()},onStepKeyDown:b=>{const x=R$[g?"from-bottom":"from-top"].includes(b.key);u==null||u({event:b,direction:x?-1:1})}})})}),j$=R.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:u,...c}=e,f=w1(Kh,n);return y.jsx(Jt.span,{...c,ref:t,onKeyDown:Bt(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):A$.concat(T$).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:Bt(e.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(p)?p.focus():r(h)}),onPointerMove:Bt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Bt(e.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),M$="SliderTrack",P$=R.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=w1(M$,n);return y.jsx(Jt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});P$.displayName=M$;var nC="SliderRange",F$=R.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=w1(nC,n),i=D$(nC,n),o=R.useRef(null),s=_n(t,o),u=a.values.length,c=a.values.map(p=>B$(p,a.min,a.max)),f=u>1?Math.min(...c):0,h=100-Math.max(...c);return y.jsx(Jt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:h+"%"}})});F$.displayName=nC;var rC="SliderThumb",L$=R.forwardRef((e,t)=>{const n=Fme(e.__scopeSlider),[r,a]=R.useState(null),i=_n(t,s=>a(s)),o=R.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(Ume,{...e,ref:i,index:o})}),Ume=R.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=w1(rC,n),s=D$(rC,n),[u,c]=R.useState(null),f=_n(t,S=>c(S)),h=u?o.form||!!u.closest("form"):!0,p=yw(u),g=o.values[r],v=g===void 0?0:B$(g,o.min,o.max),b=Vme(r,o.values.length),_=p==null?void 0:p[s.size],x=_?Wme(_,v,s.direction):0;return R.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${v}% + ${x}px)`},children:[y.jsx(tC.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(Jt.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:Bt(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx($$,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});L$.displayName=rC;var qme="RadioBubbleInput",$$=R.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=R.useRef(null),i=_n(a,r),o=m1(t);return R.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("input",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});$$.displayName=qme;function Hme(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function B$(e,t,n){const i=100/(n-t)*(e-t);return E0(i,[0,100])}function Vme(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Gme(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function Wme(e,t,n){const r=e/2,i=mA([0,50],[0,r]);return(r-i(t)*n)*n}function Kme(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Zme(e,t){if(t>0){const n=Kme(e);return Math.min(...n)>=t}return!0}function mA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Yme(e){return(String(e).split(".")[1]||"").length}function Xme(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Jme=I$,Qme=P$,e0e=F$,t0e=L$;function $f({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=R.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs(Jme,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:$t("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx(Qme,{"data-slot":"slider-track",className:$t("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx(e0e,{"data-slot":"slider-range",className:$t("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,u)=>y.jsx(t0e,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}var n0e="Separator",J6="horizontal",r0e=["horizontal","vertical"],z$=R.forwardRef((e,t)=>{const{decorative:n,orientation:r=J6,...a}=e,i=a0e(r)?r:J6,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(Jt.div,{"data-orientation":i,...s,...a,ref:t})});z$.displayName=n0e;function a0e(e){return r0e.includes(e)}var i0e=z$;function Uv({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(i0e,{"data-slot":"separator-root",decorative:n,orientation:t,className:$t("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const o0e=()=>{const{theme:e,setTheme:t,enableAdvancedSettings:n,setEnableAdvancedSettings:r,enableStreamingMarkdown:a,setEnableStreamingMarkdown:i,streamingRenderFPS:o,setStreamingRenderFPS:s,streamingCodeRenderFPS:u,setStreamingCodeRenderFPS:c,prismThemeUrl:f,setPrismThemeUrl:h,resetGeneralSettings:p}=Br(In(N=>({theme:N.theme,setTheme:N.setTheme,enableAdvancedSettings:N.enableAdvancedSettings,setEnableAdvancedSettings:N.setEnableAdvancedSettings,enableStreamingMarkdown:N.enableStreamingMarkdown,setEnableStreamingMarkdown:N.setEnableStreamingMarkdown,streamingRenderFPS:N.streamingRenderFPS,setStreamingRenderFPS:N.setStreamingRenderFPS,streamingCodeRenderFPS:N.streamingCodeRenderFPS,setStreamingCodeRenderFPS:N.setStreamingCodeRenderFPS,prismThemeUrl:N.prismThemeUrl,setPrismThemeUrl:N.setPrismThemeUrl,resetGeneralSettings:N.resetGeneralSettings}))),[g,v]=R.useState(o),[b,_]=R.useState(u),x=R.useCallback(N=>{v(N[0])},[]),S=R.useCallback(N=>{s(N[0])},[s]),E=R.useCallback(N=>{const z=N.target.value,H=z===""?30:parseInt(z.replace(/[^0-9]/g,""),10);if(!isNaN(H)){const X=Math.max(1,Math.min(60,H));s(X),v(X)}},[s]),C=R.useCallback(N=>{_(N[0])},[]),k=R.useCallback(N=>{c(N[0])},[c]),D=R.useCallback(N=>{const z=N.target.value,H=z===""?10:parseInt(z.replace(/[^0-9]/g,""),10);if(!isNaN(H)){const X=Math.max(1,Math.min(60,H));c(X),_(X)}},[c]);R.useEffect(()=>{v(o)},[o]),R.useEffect(()=>{_(u)},[u]);const O=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&p()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(En,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(Hh,{value:e??"system",onValueChange:N=>t(N),children:[y.jsx(Gh,{id:"theme-select",className:"w-[180px]",children:y.jsx(Vh,{placeholder:"Select theme"})}),y.jsxs(Wh,{children:[y.jsx(Wi,{value:"light",children:"Light"}),y.jsx(Wi,{value:"dark",children:"Dark"}),y.jsx(Wi,{value:"system",children:"System"})]})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-1.5",children:[y.jsx(En,{htmlFor:"prism-theme-url",className:"font-medium",children:"Code Block Theme URL (Optional)"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use the default themes."}),y.jsx(Qn,{id:"prism-theme-url",type:"url",placeholder:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",value:f??"",onChange:N=>h(N.target.value)})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(En,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx($l,{id:"streaming-markdown-switch",checked:a??!0,onCheckedChange:i})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(En,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["General Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how smoothly streaming text appears. (Default: 30)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx($f,{id:"streaming-fps-slider",min:1,max:60,step:1,value:[g],onValueChange:x,onValueCommit:S,className:"flex-grow"}),y.jsx(Qn,{type:"number",min:1,max:60,step:1,value:g,onChange:E,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(En,{htmlFor:"streaming-code-fps-slider",className:"font-medium",children:["Code Block Streaming Update Rate (",b," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Specific update rate when code blocks are streaming (lower values reduce lag). (Default: 10)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx($f,{id:"streaming-code-fps-slider",min:1,max:60,step:1,value:[b],onValueChange:C,onValueCommit:k,className:"flex-grow"}),y.jsx(Qn,{type:"number",min:1,max:60,step:1,value:b,onChange:D,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(Uv,{}),y.jsxs("div",{className:"space-y-2 hidden",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Advanced Settings"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(En,{htmlFor:"advanced-settings-switch",className:"font-medium",children:"Enable Advanced Controls"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Show controls for AI parameters (temperature, etc.) and Assistant settings tab."})]}),y.jsx($l,{id:"advanced-settings-switch",checked:n??!1,onCheckedChange:r})]})]}),y.jsx(Uv,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(Pt,{variant:"outline",size:"sm",onClick:O,children:[y.jsx(yZ,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},s0e=vt.memo(o0e),l0e=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r}=Br(In(i=>({globalSystemPrompt:i.globalSystemPrompt,setGlobalSystemPrompt:i.setGlobalSystemPrompt,toolMaxSteps:i.toolMaxSteps,setToolMaxSteps:i.setToolMaxSteps}))),a=i=>{const o=i.target.value,s=o===""?5:parseInt(o,10);isNaN(s)||r(s)};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),y.jsx(En,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),y.jsx(oA,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:i=>t(i.target.value),rows:4})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),y.jsx(En,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),y.jsx(Qn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:a,className:"w-24"})]})]})},u0e=vt.memo(l0e);function _1({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:$t("w-full caption-bottom text-sm",e),...t})})}function x1({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:$t("[&_tr]:border-b",e),...t})}function S1({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:$t("[&_tr:last-child]:border-0",e),...t})}function Gi({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:$t("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function na({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:$t("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function cr({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:$t("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const c0e=()=>{const{addApiKey:e,deleteApiKey:t,enableApiKeyManagement:n,dbApiKeys:r,dbProviderConfigs:a,isLoading:i}=Ya(In(O=>({addApiKey:O.addApiKey,deleteApiKey:O.deleteApiKey,enableApiKeyManagement:O.enableApiKeyManagement,dbApiKeys:O.dbApiKeys,dbProviderConfigs:O.dbProviderConfigs,isLoading:O.isLoading}))),[o,s]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(""),[p,g]=R.useState(!1),[v,b]=R.useState({}),[_,x]=R.useState({}),S=R.useCallback(async O=>{if(O.preventDefault(),!o.trim()||!u.trim()||!f){ot.error("Please fill in all fields for the API key.");return}g(!0);try{await e(o.trim(),f,u.trim()),s(""),c(""),h("")}catch(N){console.error("Failed to add API key (from component):",N)}finally{g(!1)}},[e,o,u,f]),E=R.useCallback(async(O,N)=>{if(window.confirm(`Are you sure you want to delete the API key "${N}"? This will also unlink it from any providers using it. This action cannot be undone.`)){b(z=>({...z,[O]:!0}));try{await t(O),x(z=>{const H={...z};return delete H[O],H})}catch(z){console.error("Failed to delete API key (from component):",z)}finally{b(z=>({...z,[O]:!1}))}}},[t]),C=R.useMemo(()=>{const O=new Map;return(r||[]).forEach(N=>{const z=(a||[]).filter(H=>H.apiKeyId===N.id);O.set(N.id,z.length===0?"Not linked":z.map(H=>H.name).join(", "))}),O},[r,a]);if(!n)return y.jsxs("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400 flex items-center justify-center gap-2 bg-gray-800/30 rounded-md border border-dashed border-gray-700 min-h-[200px]",children:[y.jsx(b8,{className:"h-5 w-5"}),"API Key Management is disabled in the configuration."]});const k=O=>{x(N=>({...N,[O]:!N[O]}))},D=O=>({openai:"OpenAI",google:"Google",openrouter:"OpenRouter","openai-compatible":"OpenAI-Compatible"})[O]||"Unknown/Custom";return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Add New API Key"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(En,{htmlFor:"new-key-name",children:"Name"}),y.jsx(Qn,{id:"new-key-name",value:o,onChange:O=>s(O.target.value),placeholder:"e.g., My Personal Key",required:!0,className:"mt-1",disabled:p})]}),y.jsxs("div",{children:[y.jsx(En,{htmlFor:"new-key-provider-type",children:"Intended Provider Type"}),y.jsxs(Hh,{value:f,onValueChange:h,required:!0,disabled:p,children:[y.jsx(Gh,{id:"new-key-provider-type",className:"mt-1",children:y.jsx(Vh,{placeholder:"Select Type..."})}),y.jsxs(Wh,{children:[y.jsx(Wi,{value:"openai",children:"OpenAI"}),y.jsx(Wi,{value:"google",children:"Google"}),y.jsx(Wi,{value:"openrouter",children:"OpenRouter"}),y.jsx(Wi,{value:"openai-compatible",children:"OpenAI-Compatible"})]})]})]}),y.jsxs("div",{children:[y.jsx(En,{htmlFor:"new-key-value",children:"API Key Value"}),y.jsx(Qn,{id:"new-key-value",type:"password",value:u,onChange:O=>c(O.target.value),placeholder:"Paste your API key here",required:!0,className:"mt-1",disabled:p})]})]}),y.jsxs(Pt,{type:"submit",disabled:p,children:[p&&y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Key"]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Stored API Keys"}),i?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Pr,{className:"h-10 w-full"}),y.jsx(Pr,{className:"h-10 w-full"}),y.jsx(Pr,{className:"h-10 w-full"})]}):(r||[]).length===0?y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No API keys stored yet. Add one above. Link keys to providers in the 'Providers' tab."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(_1,{children:[y.jsx(x1,{children:y.jsxs(Gi,{children:[y.jsx(na,{children:"Name"}),y.jsx(na,{children:"Type"}),y.jsx(na,{children:"Linked To"}),y.jsx(na,{children:"Key Value"}),y.jsx(na,{className:"text-right",children:"Actions"})]})}),y.jsx(S1,{children:(r||[]).map(O=>{const N=v[O.id];return y.jsxs(Gi,{children:[y.jsx(cr,{className:"font-medium",children:O.name}),y.jsx(cr,{children:D(O.providerId)}),y.jsx(cr,{className:"text-xs text-muted-foreground",children:C.get(O.id)??"Not linked"}),y.jsx(cr,{children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-mono text-xs",children:_[O.id]?O.value:""}),y.jsx(Pt,{variant:"ghost",size:"icon",onClick:()=>k(O.id),className:"h-6 w-6","aria-label":_[O.id]?"Hide key":"Show key",disabled:N,children:_[O.id]?y.jsx(vK,{className:"h-4 w-4"}):y.jsx(_K,{className:"h-4 w-4"})})]})}),y.jsx(cr,{className:"text-right",children:y.jsx(Pt,{variant:"ghost",size:"icon",onClick:()=>E(O.id,O.name),className:"text-red-600 hover:text-red-700 h-8 w-8","aria-label":`Delete key ${O.name}`,disabled:N,children:N?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Zu,{className:"h-4 w-4"})})})]},O.id)})})]})})]})]})},d0e=vt.memo(c0e),f0e=()=>{const{importConversation:e,exportAllConversations:t}=Kr(In(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=R.useRef(null),[r,a]=R.useState(!1),[i,o]=R.useState(!1),[s,u]=R.useState(!1),c=()=>{var g;(g=n.current)==null||g.click()},f=R.useCallback(async g=>{var b;const v=(b=g.target.files)==null?void 0:b[0];if(v){a(!0);try{await e(v)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=R.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),p=R.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await Ht.clearAllData(),ot.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const v="Failed to clear all data";console.error(v,g),ot.error(`${v}: ${g instanceof Error?g.message:String(g)}`),u(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:f,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(Pt,{onClick:c,variant:"outline",disabled:r,children:[r?y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(OZ,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(Pt,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(rv,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(Pt,{onClick:p,variant:"destructive",disabled:s,children:[s?y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Zu,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},h0e=vt.memo(f0e),p0e=pC("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function U$({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:$t(p0e({variant:t}),e),...n})}function q$({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:$t("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function H$({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:$t("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const m0e=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=S0(In(D=>({loadedMods:D.loadedMods,addDbMod:D.addDbMod,updateDbMod:D.updateDbMod,deleteDbMod:D.deleteDbMod,dbMods:D.dbMods,isLoading:D.isLoading}))),[o,s]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(""),[p,g]=R.useState(!1),[v,b]=R.useState({}),[_,x]=R.useState({}),S=R.useCallback(async()=>{if(!o.trim()){ot.error("Mod name cannot be empty.");return}if(!u.trim()&&!f.trim()){ot.error("Either Mod URL or Script Content must be provided.");return}if(u.trim()&&f.trim()){ot.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const D={name:o.trim(),sourceUrl:u.trim()||null,scriptContent:f.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(D),s(""),c(""),h(""),ot.info("Mod added. Reload required for changes to take effect.")}catch(D){console.error("Failed to add mod (from component):",D)}finally{g(!1)}},[o,u,f,t,a==null?void 0:a.length]),E=R.useCallback(async D=>{b(O=>({...O,[D.id]:!0}));try{await n(D.id,{enabled:!D.enabled}),ot.info(`Mod "${D.name}" ${D.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(O){console.error("Failed to update mod (from component):",O)}finally{b(O=>({...O,[D.id]:!1}))}},[n]),C=R.useCallback(async D=>{if(window.confirm(`Are you sure you want to delete the mod "${D.name}"? This cannot be undone.`)){x(O=>({...O,[D.id]:!0}));try{await r(D.id),ot.info("Mod deleted. Reload required for changes to take effect.")}catch(O){console.error("Failed to delete mod (from component):",O)}finally{x(O=>({...O,[D.id]:!1}))}}},[r]),k=R.useCallback(D=>{const O=e.find(z=>z.id===D);if(O)if(O.error){const z=O.error instanceof Error?O.error.message:String(O.error);return{status:"Error",error:O.error,tooltip:z}}else return{status:"Loaded"};const N=(a||[]).find(z=>z.id===D);return N?N.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(U$,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(PC,{className:"h-4 w-4"}),y.jsx(q$,{children:"Security Warning"}),y.jsx(H$,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(En,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(Qn,{id:"mod-name",value:o,onChange:D=>s(D.target.value),placeholder:"My Awesome Mod",disabled:p})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(En,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(Qn,{id:"mod-url",type:"url",value:u,onChange:D=>c(D.target.value),placeholder:"https://example.com/my-mod.js",disabled:p||!!f.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(En,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(oA,{id:"mod-script",value:f,onChange:D=>h(D.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:p||!!u.trim()})]}),y.jsxs(Pt,{onClick:S,disabled:p,children:[p&&y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(Sn,{delayDuration:100,children:y.jsxs(_1,{children:[y.jsx(x1,{children:y.jsxs(Gi,{children:[y.jsx(na,{children:"Name"}),y.jsx(na,{children:"Source"}),y.jsx(na,{children:"Status"}),y.jsx(na,{className:"text-center",children:"Enabled"}),y.jsx(na,{className:"text-right",children:"Actions"})]})}),y.jsx(S1,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Gi,{children:y.jsx(cr,{colSpan:5,children:y.jsx(Pr,{className:"h-10 w-full"})})}),y.jsx(Gi,{children:y.jsx(cr,{colSpan:5,children:y.jsx(Pr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Gi,{children:y.jsx(cr,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(D=>{const{status:O,error:N,tooltip:z}=k(D.id),H=D.sourceUrl?new URL(D.sourceUrl).hostname:"Direct Script",X=v[D.id],F=_[D.id],Z=X||F,L=O==="Error";return y.jsxs(Gi,{children:[y.jsx(cr,{className:"font-medium",children:D.name}),y.jsx(cr,{className:"text-muted-foreground",children:H}),y.jsxs(cr,{children:[y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx("span",{className:L?"text-destructive font-semibold cursor-help":"",children:O})}),z&&y.jsx(Tn,{className:"max-w-xs break-words",children:y.jsx("p",{children:z})})]}),L&&N&&y.jsx("p",{className:"text-xs text-destructive truncate",children:N instanceof Error?N.message:String(N)})]}),y.jsxs(cr,{className:"text-center",children:[y.jsx($l,{checked:D.enabled??!1,onCheckedChange:()=>E(D),disabled:Z,"aria-label":`Enable ${D.name}`}),X&&y.jsx(Gn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(cr,{className:"text-right",children:y.jsx(Pt,{variant:"ghost",size:"icon",onClick:()=>C(D),disabled:Z,"aria-label":`Delete ${D.name}`,className:"text-destructive hover:text-destructive/80",children:F?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Zu,{className:"h-4 w-4"})})})]},D.id)})})]})})})]})]})},g0e=vt.memo(m0e),V$=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48"})=>{const[s,u]=R.useState(""),c=R.useMemo(()=>{if(!s)return t;const f=s.toLowerCase();return t.filter(h=>h.name.toLowerCase().includes(f)||h.id.toLowerCase().includes(f))},[t,s]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Pr,{className:"h-8 w-full"}),y.jsx(Pr,{className:"h-8 w-full"}),y.jsx(Pr,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(Qn,{value:s,onChange:f=>u(f.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx(yg,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:c.map(f=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(En,{htmlFor:`enable-model-${e}-${f.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:f.name||f.id,children:f.name||f.id}),y.jsx($l,{id:`enable-model-${e}-${f.id}`,checked:n.has(f.id),onCheckedChange:h=>r(f.id,h),className:"flex-shrink-0",disabled:i,"aria-label":`Enable model ${f.name||f.id}`})]},f.id))})})]})},y0e=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s})=>{var C;const u=TC(e.type),c=RC(e.type),f=bm(e.type),h=o==="fetching"||s,p=s||o==="fetching",g=s||o==="fetching",b=Ya(k=>k.getAllAvailableModelDefsForProvider)(e.id),_=R.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),x=e.apiKeyId?t.some(k=>k.id===e.apiKeyId):!1,S=u&&!x,E=R.useCallback(async(k,D)=>{const O=new Set(e.enabledModels??[]);D?O.add(k):O.delete(k);const N=Array.from(O);try{await i(e.id,{enabledModels:N})}catch(z){ot.error("Failed to update model status."),console.error("Failed to save model toggle:",z)}},[e.enabledModels,e.id,i]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{children:y.jsx("span",{className:$t("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(Tn,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),S&&y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{children:y.jsx(Ls,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(Tn,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",onClick:n,disabled:p,"aria-label":"Edit provider",className:"h-8 w-8",children:y.jsx(DC,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"top",children:"Edit"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",onClick:r,disabled:g,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",children:s?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Zu,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"top",children:"Delete"})]})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[u&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?x?y.jsx("span",{className:"text-green-400",children:((C=t.find(k=>k.id===e.apiKeyId))==null?void 0:C.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),c&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),f&&y.jsx("div",{className:"pt-1",children:y.jsxs(Pt,{variant:"outline",size:"sm",onClick:a,disabled:h,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Gn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(xo,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(Ls,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(dw,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"font-medium text-card-foreground text-sm",children:"Model Enablement (Saves Immediately):"}),y.jsx(V$,{providerId:e.id,allAvailableModels:b,enabledModelIds:_,onToggleModel:E,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64"})]})]})},b0e=vt.memo(y0e),G$=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var c;const o=f=>{r(f==="none"?null:f)},s=(c=a.find(f=>f.id===n))==null?void 0:c.name,u=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(Hh,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(Gh,{className:$t("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(Vh,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(QK,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):u]})]})})}),y.jsxs(Wh,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx(Wi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(f=>y.jsx(Wi,{value:f.id,children:f.name||`Key ID: ${f.id.substring(0,6)}...`},f.id))]})]})},v0e=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const u=TC(t.type??null),c=RC(t.type??null),f=bm(t.type??null),h=t.isEnabled??!1,p=t.autoFetchModels??!1,g=R.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=R.useCallback((b,_)=>{const x=new Set(t.enabledModels??[]);_?x.add(b):x.delete(b);const S=Array.from(x);s("enabledModels",S)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(En,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(Qn,{id:`edit-name-${e}`,value:t.name||"",onChange:b=>s("name",b.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(En,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(Hh,{value:t.type??"",onValueChange:b=>s("type",b),disabled:a,children:[y.jsx(Gh,{id:`edit-type-${e}`,children:y.jsx(Vh,{placeholder:"Select Type"})}),y.jsx(Wh,{children:c8.map(b=>y.jsx(Wi,{value:b.value,children:b.label},b.value))})]})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(En,{children:"API Key"}),y.jsx(G$,{selectedKeyId:t.apiKeyId??null,onKeySelected:b=>s("apiKeyId",b),apiKeys:n,disabled:a})]}),c&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(En,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(Qn,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:b=>s("baseURL",b.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx($l,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:b=>s("isEnabled",b),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(En,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx($l,{id:`edit-autofetch-${e}`,checked:p,onCheckedChange:b=>s("autoFetchModels",b),disabled:!f||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(En,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:f?"":"text-muted-foreground",children:["Auto-fetch models ",f?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(V$,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(Uv,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Pt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(ql,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(Pt,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(jC,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},w0e=vt.memo(v0e),_0e=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i})=>{const[o,s]=R.useState(!1),[u,c]=R.useState(!1),[f,h]=R.useState(!1),[p,g]=R.useState({}),v=Ya(N=>N.getAllAvailableModelDefsForProvider),[b,_]=R.useState([]),x=R.useMemo(()=>[...b].sort((N,z)=>(N.name||N.id).localeCompare(z.name||z.id)),[b]);R.useEffect(()=>{if(o){const N=v(e.id);_(N),g({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else _([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,e.fetchedModels,v]);const S=()=>s(!0),E=()=>{s(!1),g({}),c(!1)},C=R.useCallback(async()=>{c(!0);try{const N=p.enabledModels&&p.enabledModels.length>0?p.enabledModels:null,z={name:p.name,type:p.type,isEnabled:p.isEnabled,apiKeyId:p.apiKeyId,baseURL:p.baseURL,autoFetchModels:p.autoFetchModels,enabledModels:N};Object.keys(z).forEach(H=>{z[H]===void 0&&delete z[H]}),await n(e.id,z),s(!1),g({}),ot.success(`Provider "${z.name||e.name}" updated.`)}catch(N){console.error("Failed to save provider update:",N),ot.error("Failed to save provider configuration.")}finally{c(!1)}},[p,n,e.id,e.name]),k=R.useCallback((N,z)=>{g(H=>({...H,[N]:z}))},[]),D=R.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(N){console.error("Failed to delete provider:",N),h(!1)}}},[r,e.id,e.name]),O=R.useCallback(async()=>{if(await a(e.id),o){const N=v(e.id);_(N)}},[a,e.id,o,v]);return y.jsx("div",{className:"border-b border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?y.jsx(w0e,{providerId:e.id,editData:p,apiKeys:t,allAvailableModels:x,isSaving:u,onCancel:E,onSave:C,onChange:k,onUpdate:n}):y.jsx(b0e,{provider:e,apiKeys:t,onEdit:S,onDelete:D,onFetchModels:O,onUpdate:n,fetchStatus:i,isDeleting:f})})},x0e=vt.memo(_0e),S0e=({apiKeys:e,onAddProvider:t,onCancel:n})=>{const[r,a]=R.useState(!1),[i,o]=R.useState({name:"",type:"openai",isEnabled:!0,apiKeyId:null,baseURL:null,enabledModels:null,autoFetchModels:!0,fetchedModels:null,modelsLastFetchedAt:null}),s=R.useCallback((p,g)=>{o(v=>{const b={...v,[p]:g};if(p==="type"){const _=g;b.apiKeyId=null,b.baseURL=null,b.autoFetchModels=bm(_),b.enabledModels=null}return(p==="isEnabled"||p==="autoFetchModels")&&(b[p]=!!g),b})},[]),u=R.useCallback(async()=>{if(!i.name||!i.type){ot.error("Provider Name and Type are required.");return}a(!0);try{const p=i.type,g=i.autoFetchModels??bm(p),v={name:i.name,type:p,isEnabled:i.isEnabled??!0,apiKeyId:i.apiKeyId??null,baseURL:i.baseURL??null,enabledModels:null,autoFetchModels:g,fetchedModels:null,modelsLastFetchedAt:null};await t(v),n()}catch(p){console.error("Failed to add provider (from form component):",p)}finally{a(!1)}},[i,t,n]),c=TC(i.type??null),f=RC(i.type??null),h=bm(i.type??null);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Qn,{value:i.name||"",onChange:p=>s("name",p.target.value),placeholder:"Provider Name (e.g., My Ollama)",className:"flex-grow",disabled:r,"aria-label":"Provider Name"}),y.jsxs(Hh,{value:i.type??"openai",onValueChange:p=>s("type",p),disabled:r,children:[y.jsx(Gh,{className:"w-[200px]","aria-label":"Provider Type",children:y.jsx(Vh,{placeholder:"Select Type"})}),y.jsx(Wh,{children:c8.map(p=>y.jsx(Wi,{value:p.value,children:p.label},p.value))})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx($l,{id:"new-enabled",checked:i.isEnabled??!0,onCheckedChange:p=>s("isEnabled",p),disabled:r,"aria-labelledby":"new-enabled-label"}),y.jsx(En,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]})]}),(c||f)&&y.jsxs("div",{className:"flex items-center space-x-2",children:[c&&y.jsx(G$,{label:"API Key:",selectedKeyId:i.apiKeyId??null,onKeySelected:p=>s("apiKeyId",p),apiKeys:e||[],className:"flex-grow",disabled:r}),f&&y.jsx(Qn,{value:i.baseURL||"",onChange:p=>s("baseURL",p.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",className:"flex-grow",disabled:r,"aria-label":"Base URL"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx($l,{id:"new-autofetch",checked:i.autoFetchModels??!1,onCheckedChange:p=>s("autoFetchModels",p),disabled:!h||r,"aria-labelledby":"new-autofetch-label"}),y.jsxs(En,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:h?"":"text-muted-foreground",children:["Auto-fetch models ",h?"":"(Not Supported)"]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Pt,{variant:"ghost",size:"sm",onClick:n,disabled:r,type:"button",children:[y.jsx(ql,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Pt,{variant:"secondary",size:"sm",onClick:u,disabled:r||!i.name||!i.type,type:"button",children:[r&&y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(jC,{className:"h-4 w-4 mr-1"})," ",r?"Adding...":"Add Provider"]})]})]})},E0e=()=>{const{addDbProviderConfig:e,updateDbProviderConfig:t,deleteDbProviderConfig:n,fetchModels:r,providerFetchStatus:a,dbProviderConfigs:i,apiKeys:o,isLoading:s}=Ya(In(v=>({addDbProviderConfig:v.addProviderConfig,updateDbProviderConfig:v.updateProviderConfig,deleteDbProviderConfig:v.deleteProviderConfig,fetchModels:v.fetchModels,providerFetchStatus:v.providerFetchStatus,dbProviderConfigs:v.dbProviderConfigs,apiKeys:v.dbApiKeys,isLoading:v.isLoading}))),[u,c]=R.useState(!1),f=()=>c(!0),h=R.useCallback(()=>c(!1),[]),p=R.useCallback(async v=>{await r(v)},[r]),g=R.useMemo(()=>i||[],[i]);return y.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(S0e,{apiKeys:o||[],onAddProvider:e,onCancel:h}):y.jsxs(Pt,{onClick:f,variant:"outline",className:"w-full",disabled:s,children:[y.jsx(cw,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow overflow-hidden border-t border-border pt-4 mt-4",children:y.jsxs("div",{className:"space-y-2",children:[s&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Pr,{className:"h-24 w-full"}),y.jsx(Pr,{className:"h-24 w-full"}),y.jsx(Pr,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:g.map(v=>y.jsx(x0e,{provider:v,apiKeys:o||[],onUpdate:t,onDelete:n,onFetchModels:p,fetchStatus:a[v.id]||"idle"},v.id))}),!s&&g.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},C0e=vt.memo(E0e);function k0e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const E1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Zh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function gA(e){return"nodeType"in e}function Oi(e){var t,n;return e?Zh(e)?e:gA(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function yA(e){const{Document:t}=Oi(e);return e instanceof t}function _g(e){return Zh(e)?!1:e instanceof Oi(e).HTMLElement}function W$(e){return e instanceof Oi(e).SVGElement}function Yh(e){return e?Zh(e)?e.document:gA(e)?yA(e)?e:_g(e)||W$(e)?e.ownerDocument:document:document:document}const zs=E1?R.useLayoutEffect:R.useEffect;function bA(e){const t=R.useRef(e);return zs(()=>{t.current=e}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function A0e(){const e=R.useRef(null),t=R.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=R.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function C0(e,t){t===void 0&&(t=[e]);const n=R.useRef(e);return zs(()=>{n.current!==e&&(n.current=e)},t),n}function xg(e,t){const n=R.useRef();return R.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function qv(e){const t=bA(e),n=R.useRef(null),r=R.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function aC(e){const t=R.useRef();return R.useEffect(()=>{t.current=e},[e]),t.current}let P2={};function Sg(e,t){return R.useMemo(()=>{if(t)return t;const n=P2[e]==null?0:P2[e]+1;return P2[e]=n,e+"-"+n},[e,t])}function K$(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const s=Object.entries(o);for(const[u,c]of s){const f=i[u];f!=null&&(i[u]=f+e*c)}return i},{...t})}}const Wf=K$(1),k0=K$(-1);function T0e(e){return"clientX"in e&&"clientY"in e}function vA(e){if(!e)return!1;const{KeyboardEvent:t}=Oi(e.target);return t&&e instanceof t}function R0e(e){if(!e)return!1;const{TouchEvent:t}=Oi(e.target);return t&&e instanceof t}function iC(e){if(R0e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return T0e(e)?{x:e.clientX,y:e.clientY}:null}const A0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[A0.Translate.toString(e),A0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Q6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function N0e(e){return e.matches(Q6)?e:e.querySelector(Q6)}const I0e={display:"none"};function O0e(e){let{id:t,value:n}=e;return vt.createElement("div",{id:t,style:I0e},n)}function D0e(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return vt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function j0e(){const[e,t]=R.useState("");return{announce:R.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Z$=R.createContext(null);function M0e(e){const t=R.useContext(Z$);R.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function P0e(){const[e]=R.useState(()=>new Set),t=R.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[R.useCallback(r=>{let{type:a,event:i}=r;e.forEach(o=>{var s;return(s=o[a])==null?void 0:s.call(o,i)})},[e]),t]}const F0e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},L0e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function $0e(e){let{announcements:t=L0e,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=F0e}=e;const{announce:i,announcement:o}=j0e(),s=Sg("DndLiveRegion"),[u,c]=R.useState(!1);if(R.useEffect(()=>{c(!0)},[]),M0e(R.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:g}=h;t.onDragMove&&i(t.onDragMove({active:p,over:g}))},onDragOver(h){let{active:p,over:g}=h;i(t.onDragOver({active:p,over:g}))},onDragEnd(h){let{active:p,over:g}=h;i(t.onDragEnd({active:p,over:g}))},onDragCancel(h){let{active:p,over:g}=h;i(t.onDragCancel({active:p,over:g}))}}),[i,t])),!u)return null;const f=vt.createElement(vt.Fragment,null,vt.createElement(O0e,{id:r,value:a.draggable}),vt.createElement(D0e,{id:s,announcement:o}));return n?Ns.createPortal(f,n):f}var ma;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ma||(ma={}));function Hv(){}function eO(e,t){return R.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function B0e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Jo=Object.freeze({x:0,y:0});function Y$(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function X$(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function z0e(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function tO(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function J$(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function nO(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const U0e=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=nO(t,t.left,t.top),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=Y$(nO(u),a);i.push({id:s,data:{droppableContainer:o,value:c}})}}return i.sort(X$)},q0e=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=tO(t),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=tO(u),f=a.reduce((p,g,v)=>p+Y$(c[v],g),0),h=Number((f/4).toFixed(4));i.push({id:s,data:{droppableContainer:o,value:h}})}}return i.sort(X$)};function H0e(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-r,s=i-n;if(r<a&&n<i){const u=t.width*t.height,c=e.width*e.height,f=o*s,h=f/(u+c-f);return Number(h.toFixed(4))}return 0}const V0e=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:o}=i,s=n.get(o);if(s){const u=H0e(s,t);u>0&&a.push({id:o,data:{droppableContainer:i,value:u}})}}return a.sort(z0e)};function G0e(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Q$(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Jo}function W0e(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((o,s)=>({...o,top:o.top+e*s.y,bottom:o.bottom+e*s.y,left:o.left+e*s.x,right:o.right+e*s.x}),{...n})}}const K0e=W0e(1);function Z0e(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Y0e(e,t,n){const r=Z0e(t);if(!r)return e;const{scaleX:a,scaleY:i,x:o,y:s}=r,u=e.left-o-(1-a)*parseFloat(n),c=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:f,height:h,top:c,right:u+f,bottom:c+h,left:u}}const X0e={ignoreTransform:!1};function Xh(e,t){t===void 0&&(t=X0e);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:f}=Oi(e).getComputedStyle(e);c&&(n=Y0e(n,c,f))}const{top:r,left:a,width:i,height:o,bottom:s,right:u}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:u}}function rO(e){return Xh(e,{ignoreTransform:!0})}function J0e(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Q0e(e,t){return t===void 0&&(t=Oi(e).getComputedStyle(e)),t.position==="fixed"}function ege(e,t){t===void 0&&(t=Oi(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function C1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(yA(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!_g(a)||W$(a)||n.includes(a))return n;const i=Oi(e).getComputedStyle(a);return a!==e&&ege(a,i)&&n.push(a),Q0e(a,i)?n:r(a.parentNode)}return e?r(e):n}function e9(e){const[t]=C1(e,1);return t??null}function F2(e){return!E1||!e?null:Zh(e)?e:gA(e)?yA(e)||e===Yh(e).scrollingElement?window:_g(e)?e:null:null}function t9(e){return Zh(e)?e.scrollX:e.scrollLeft}function n9(e){return Zh(e)?e.scrollY:e.scrollTop}function oC(e){return{x:t9(e),y:n9(e)}}var Aa;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Aa||(Aa={}));function r9(e){return!E1||!e?!1:e===document.scrollingElement}function a9(e){const t={x:0,y:0},n=r9(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,s=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:s,maxScroll:r,minScroll:t}}const tge={x:.2,y:.2};function nge(e,t,n,r,a){let{top:i,left:o,right:s,bottom:u}=n;r===void 0&&(r=10),a===void 0&&(a=tge);const{isTop:c,isBottom:f,isLeft:h,isRight:p}=a9(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!c&&i<=t.top+b.height?(g.y=Aa.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!f&&u>=t.bottom-b.height&&(g.y=Aa.Forward,v.y=r*Math.abs((t.bottom-b.height-u)/b.height)),!p&&s>=t.right-b.width?(g.x=Aa.Forward,v.x=r*Math.abs((t.right-b.width-s)/b.width)):!h&&o<=t.left+b.width&&(g.x=Aa.Backward,v.x=r*Math.abs((t.left+b.width-o)/b.width)),{direction:g,speed:v}}function rge(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function i9(e){return e.reduce((t,n)=>Wf(t,oC(n)),Jo)}function age(e){return e.reduce((t,n)=>t+t9(n),0)}function ige(e){return e.reduce((t,n)=>t+n9(n),0)}function oge(e,t){if(t===void 0&&(t=Xh),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);e9(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const sge=[["x",["left","right"],age],["y",["top","bottom"],ige]];class wA{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=C1(n),a=i9(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,s]of sge)for(const u of o)Object.defineProperty(this,u,{get:()=>{const c=s(r),f=a[i]-c;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _m{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function lge(e){const{EventTarget:t}=Oi(e);return e instanceof t?e:Yh(e)}function L2(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var yo;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(yo||(yo={}));function aO(e){e.preventDefault()}function uge(e){e.stopPropagation()}var Vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Vn||(Vn={}));const o9={start:[Vn.Space,Vn.Enter],cancel:[Vn.Esc],end:[Vn.Space,Vn.Enter,Vn.Tab]},cge=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Vn.Right:return{...n,x:n.x+25};case Vn.Left:return{...n,x:n.x-25};case Vn.Down:return{...n,y:n.y+25};case Vn.Up:return{...n,y:n.y-25}}};class _A{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new _m(Yh(n)),this.windowListeners=new _m(Oi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(yo.Resize,this.handleCancel),this.windowListeners.add(yo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(yo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&oge(r),n(Jo)}handleKeyDown(t){if(vA(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=o9,coordinateGetter:o=cge,scrollBehavior:s="smooth"}=a,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:c}=r.current,f=c?{x:c.left,y:c.top}:Jo;this.referenceCoordinates||(this.referenceCoordinates=f);const h=o(t,{active:n,context:r.current,currentCoordinates:f});if(h){const p=k0(h,f),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const _=t.code,{isTop:x,isRight:S,isLeft:E,isBottom:C,maxScroll:k,minScroll:D}=a9(b),O=rge(b),N={x:Math.min(_===Vn.Right?O.right-O.width/2:O.right,Math.max(_===Vn.Right?O.left:O.left+O.width/2,h.x)),y:Math.min(_===Vn.Down?O.bottom-O.height/2:O.bottom,Math.max(_===Vn.Down?O.top:O.top+O.height/2,h.y))},z=_===Vn.Right&&!S||_===Vn.Left&&!E,H=_===Vn.Down&&!C||_===Vn.Up&&!x;if(z&&N.x!==h.x){const X=b.scrollLeft+p.x,F=_===Vn.Right&&X<=k.x||_===Vn.Left&&X>=D.x;if(F&&!p.y){b.scrollTo({left:X,behavior:s});return}F?g.x=b.scrollLeft-X:g.x=_===Vn.Right?b.scrollLeft-k.x:b.scrollLeft-D.x,g.x&&b.scrollBy({left:-g.x,behavior:s});break}else if(H&&N.y!==h.y){const X=b.scrollTop+p.y,F=_===Vn.Down&&X<=k.y||_===Vn.Up&&X>=D.y;if(F&&!p.x){b.scrollTo({top:X,behavior:s});return}F?g.y=b.scrollTop-X:g.y=_===Vn.Down?b.scrollTop-k.y:b.scrollTop-D.y,g.y&&b.scrollBy({top:-g.y,behavior:s});break}}this.handleMove(t,Wf(k0(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}_A.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=o9,onActivation:a}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const s=i.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function iO(e){return!!(e&&"distance"in e)}function oO(e){return!!(e&&"delay"in e)}class xA{constructor(t,n,r){var a;r===void 0&&(r=lge(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=Yh(o),this.documentListeners=new _m(this.document),this.listeners=new _m(r),this.windowListeners=new _m(Oi(o)),this.initialCoordinates=(a=iC(i))!=null?a:Jo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(yo.Resize,this.handleCancel),this.windowListeners.add(yo.DragStart,aO),this.windowListeners.add(yo.VisibilityChange,this.handleCancel),this.windowListeners.add(yo.ContextMenu,aO),this.documentListeners.add(yo.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(oO(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(iO(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(yo.Click,uge,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(yo.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!a)return;const u=(n=iC(t))!=null?n:Jo,c=k0(a,u);if(!r&&s){if(iO(s)){if(s.tolerance!=null&&L2(c,s.tolerance))return this.handleCancel();if(L2(c,s.distance))return this.handleStart()}if(oO(s)&&L2(c,s.tolerance))return this.handleCancel();this.handlePending(s,c);return}t.cancelable&&t.preventDefault(),o(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const dge={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class SA extends xA{constructor(t){const{event:n}=t,r=Yh(n.target);super(t,dge,r)}}SA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const fge={move:{name:"mousemove"},end:{name:"mouseup"}};var sC;(function(e){e[e.RightClick=2]="RightClick"})(sC||(sC={}));class hge extends xA{constructor(t){super(t,fge,Yh(t.event.target))}}hge.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===sC.RightClick?!1:(r==null||r({event:n}),!0)}}];const $2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class pge extends xA{constructor(t){super(t,$2)}static setup(){return window.addEventListener($2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener($2.move.name,t)};function t(){}}}pge.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var xm;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(xm||(xm={}));var Vv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Vv||(Vv={}));function mge(e){let{acceleration:t,activator:n=xm.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:s=Vv.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:f,delta:h,threshold:p}=e;const g=yge({delta:h,disabled:!i}),[v,b]=A0e(),_=R.useRef({x:0,y:0}),x=R.useRef({x:0,y:0}),S=R.useMemo(()=>{switch(n){case xm.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case xm.DraggableRect:return a}},[n,a,u]),E=R.useRef(null),C=R.useCallback(()=>{const D=E.current;if(!D)return;const O=_.current.x*x.current.x,N=_.current.y*x.current.y;D.scrollBy(O,N)},[]),k=R.useMemo(()=>s===Vv.TreeOrder?[...c].reverse():c,[s,c]);R.useEffect(()=>{if(!i||!c.length||!S){b();return}for(const D of k){if((r==null?void 0:r(D))===!1)continue;const O=c.indexOf(D),N=f[O];if(!N)continue;const{direction:z,speed:H}=nge(D,N,S,t,p);for(const X of["x","y"])g[X][z[X]]||(H[X]=0,z[X]=0);if(H.x>0||H.y>0){b(),E.current=D,v(C,o),_.current=H,x.current=z;return}}_.current={x:0,y:0},x.current={x:0,y:0},b()},[t,C,r,b,i,o,JSON.stringify(S),JSON.stringify(g),v,c,k,f,JSON.stringify(p)])}const gge={x:{[Aa.Backward]:!1,[Aa.Forward]:!1},y:{[Aa.Backward]:!1,[Aa.Forward]:!1}};function yge(e){let{delta:t,disabled:n}=e;const r=aC(t);return xg(a=>{if(n||!r||!a)return gge;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Aa.Backward]:a.x[Aa.Backward]||i.x===-1,[Aa.Forward]:a.x[Aa.Forward]||i.x===1},y:{[Aa.Backward]:a.y[Aa.Backward]||i.y===-1,[Aa.Forward]:a.y[Aa.Forward]||i.y===1}}},[n,t,r])}function bge(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return xg(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function vge(e,t){return R.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...i]},[]),[e,t])}var T0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(T0||(T0={}));var lC;(function(e){e.Optimized="optimized"})(lC||(lC={}));const sO=new Map;function wge(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,o]=R.useState(null),{frequency:s,measure:u,strategy:c}=a,f=R.useRef(e),h=_(),p=C0(h),g=R.useCallback(function(x){x===void 0&&(x=[]),!p.current&&o(S=>S===null?x:S.concat(x.filter(E=>!S.includes(E))))},[p]),v=R.useRef(null),b=xg(x=>{if(h&&!n)return sO;if(!x||x===sO||f.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,k=C?new wA(u(C),C):null;E.rect.current=k,k&&S.set(E.id,k)}return S}return x},[e,i,n,h,u]);return R.useEffect(()=>{f.current=e},[e]),R.useEffect(()=>{h||g()},[n,h]),R.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),R.useEffect(()=>{h||typeof s!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},s))},[s,h,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(c){case T0.Always:return!1;case T0.BeforeDragging:return n;default:return!n}}}function s9(e,t){return xg(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function _ge(e,t){return s9(e,t)}function xge(e){let{callback:t,disabled:n}=e;const r=bA(t),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return R.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function k1(e){let{callback:t,disabled:n}=e;const r=bA(t),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return R.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Sge(e){return new wA(Xh(e),e)}function lO(e,t,n){t===void 0&&(t=Sge);const[r,a]=R.useState(null);function i(){a(u=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=u??n)!=null?c:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=xge({callback(u){if(e)for(const c of u){const{type:f,target:h}=c;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),s=k1({callback:i});return zs(()=>{i(),e?(s==null||s.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),o==null||o.disconnect())},[e]),r}function Ege(e){const t=s9(e);return Q$(e,t)}const uO=[];function Cge(e){const t=R.useRef(e),n=xg(r=>e?r&&r!==uO&&e&&t.current&&e.parentNode===t.current.parentNode?r:C1(e):uO,[e]);return R.useEffect(()=>{t.current=e},[e]),n}function kge(e){const[t,n]=R.useState(null),r=R.useRef(e),a=R.useCallback(i=>{const o=F2(i.target);o&&n(s=>s?(s.set(o,oC(o)),new Map(s)):null)},[]);return R.useEffect(()=>{const i=r.current;if(e!==i){o(i);const s=e.map(u=>{const c=F2(u);return c?(c.addEventListener("scroll",a,{passive:!0}),[c,oC(c)]):null}).filter(u=>u!=null);n(s.length?new Map(s):null),r.current=e}return()=>{o(e),o(i)};function o(s){s.forEach(u=>{const c=F2(u);c==null||c.removeEventListener("scroll",a)})}},[a,e]),R.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>Wf(i,o),Jo):i9(e):Jo,[e,t])}function cO(e,t){t===void 0&&(t=[]);const n=R.useRef(null);return R.useEffect(()=>{n.current=null},t),R.useEffect(()=>{const r=e!==Jo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?k0(e,n.current):Jo}function Age(e){R.useEffect(()=>{if(!E1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Tge(e,t){return R.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,t)},n},{}),[e,t])}function l9(e){return R.useMemo(()=>e?J0e(e):null,[e])}const dO=[];function Rge(e,t){t===void 0&&(t=Xh);const[n]=e,r=l9(n?Oi(n):null),[a,i]=R.useState(dO);function o(){i(()=>e.length?e.map(u=>r9(u)?r:new wA(t(u),u)):dO)}const s=k1({callback:o});return zs(()=>{s==null||s.disconnect(),o(),e.forEach(u=>s==null?void 0:s.observe(u))},[e]),a}function Nge(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return _g(t)?t:e}function Ige(e){let{measure:t}=e;const[n,r]=R.useState(null),a=R.useCallback(c=>{for(const{target:f}of c)if(_g(f)){r(h=>{const p=t(f);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=k1({callback:a}),o=R.useCallback(c=>{const f=Nge(c);i==null||i.disconnect(),f&&(i==null||i.observe(f)),r(f?t(f):null)},[t,i]),[s,u]=qv(o);return R.useMemo(()=>({nodeRef:s,rect:n,setRef:u}),[n,s,u])}const Oge=[{sensor:SA,options:{}},{sensor:_A,options:{}}],Dge={current:{}},Nb={draggable:{measure:rO},droppable:{measure:rO,strategy:T0.WhileDragging,frequency:lC.Optimized},dragOverlay:{measure:Xh}};class Sm extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const jge={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Sm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Hv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Nb,measureDroppableContainers:Hv,windowRect:null,measuringScheduled:!1},Mge={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Hv,draggableNodes:new Map,over:null,measureDroppableContainers:Hv},A1=R.createContext(Mge),u9=R.createContext(jge);function Pge(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Sm}}}function Fge(e,t){switch(t.type){case ma.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ma.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ma.DragEnd:case ma.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ma.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new Sm(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case ma.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new Sm(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case ma.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Sm(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Lge(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=R.useContext(A1),i=aC(r),o=aC(n==null?void 0:n.id);return R.useEffect(()=>{if(!t&&!r&&i&&o!=null){if(!vA(i)||document.activeElement===i.target)return;const s=a.get(o);if(!s)return;const{activatorNode:u,node:c}=s;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[u.current,c.current]){if(!f)continue;const h=N0e(f);if(h){h.focus();break}}})}},[r,t,a,o,i]),null}function $ge(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function Bge(e){return R.useMemo(()=>({draggable:{...Nb.draggable,...e==null?void 0:e.draggable},droppable:{...Nb.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Nb.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function zge(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=R.useRef(!1),{x:o,y:s}=typeof a=="boolean"?{x:a,y:a}:a;zs(()=>{if(!o&&!s||!t){i.current=!1;return}if(i.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const f=n(c),h=Q$(f,r);if(o||(h.x=0),s||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=e9(c);p&&p.scrollBy({top:h.y,left:h.x})}},[t,o,s,r,n])}const c9=R.createContext({...Jo,scaleX:1,scaleY:1});var ju;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ju||(ju={}));const Uge=R.memo(function(t){var n,r,a,i;let{id:o,accessibility:s,autoScroll:u=!0,children:c,sensors:f=Oge,collisionDetection:h=V0e,measuring:p,modifiers:g,...v}=t;const b=R.useReducer(Fge,void 0,Pge),[_,x]=b,[S,E]=P0e(),[C,k]=R.useState(ju.Uninitialized),D=C===ju.Initialized,{draggable:{active:O,nodes:N,translate:z},droppable:{containers:H}}=_,X=O!=null?N.get(O):null,F=R.useRef({initial:null,translated:null}),Z=R.useMemo(()=>{var et;return O!=null?{id:O,data:(et=X==null?void 0:X.data)!=null?et:Dge,rect:F}:null},[O,X]),L=R.useRef(null),[de,ae]=R.useState(null),[ne,ee]=R.useState(null),se=C0(v,Object.values(v)),W=Sg("DndDescribedBy",o),J=R.useMemo(()=>H.getEnabled(),[H]),Y=Bge(p),{droppableRects:re,measureDroppableContainers:be,measuringScheduled:we}=wge(J,{dragging:D,dependencies:[z.x,z.y],config:Y.droppable}),Me=bge(N,O),Pe=R.useMemo(()=>ne?iC(ne):null,[ne]),Ae=Be(),Te=_ge(Me,Y.draggable.measure);zge({activeNode:O!=null?N.get(O):null,config:Ae.layoutShiftCompensation,initialRect:Te,measure:Y.draggable.measure});const qe=lO(Me,Y.draggable.measure,Te),it=lO(Me?Me.parentElement:null),Ie=R.useRef({activatorEvent:null,active:null,activeNode:Me,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:H,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=H.getNodeFor((n=Ie.current.over)==null?void 0:n.id),U=Ige({measure:Y.dragOverlay.measure}),Ce=(r=U.nodeRef.current)!=null?r:Me,Ne=D?(a=U.rect)!=null?a:qe:null,ce=!!(U.nodeRef.current&&U.rect),ie=Ege(ce?null:qe),Q=l9(Ce?Oi(Ce):null),xe=Cge(D?Re??Me:null),Le=Rge(xe),Se=$ge(g,{transform:{x:z.x-ie.x,y:z.y-ie.y,scaleX:1,scaleY:1},activatorEvent:ne,active:Z,activeNodeRect:qe,containerNodeRect:it,draggingNodeRect:Ne,over:Ie.current.over,overlayNodeRect:U.rect,scrollableAncestors:xe,scrollableAncestorRects:Le,windowRect:Q}),Ve=Pe?Wf(Pe,z):null,xt=kge(xe),ht=cO(xt),Et=cO(xt,[qe]),Ft=Wf(Se,ht),Tt=Ne?K0e(Ne,Se):null,Ut=Z&&Tt?h({active:Z,collisionRect:Tt,droppableRects:re,droppableContainers:J,pointerCoordinates:Ve}):null,ge=J$(Ut,"id"),[I,V]=R.useState(null),he=ce?Se:Wf(Se,Et),Oe=G0e(he,(i=I==null?void 0:I.rect)!=null?i:null,qe),ve=R.useRef(null),ke=R.useCallback((et,me)=>{let{sensor:De,options:Ke}=me;if(L.current==null)return;const Ct=N.get(L.current);if(!Ct)return;const ye=et.nativeEvent,q=new De({active:L.current,activeNode:Ct,event:ye,options:Ke,context:Ie,onAbort(G){if(!N.get(G))return;const{onDragAbort:fe}=se.current,Fe={id:G};fe==null||fe(Fe),S({type:"onDragAbort",event:Fe})},onPending(G,pe,fe,Fe){if(!N.get(G))return;const{onDragPending:Dt}=se.current,un={id:G,constraint:pe,initialCoordinates:fe,offset:Fe};Dt==null||Dt(un),S({type:"onDragPending",event:un})},onStart(G){const pe=L.current;if(pe==null)return;const fe=N.get(pe);if(!fe)return;const{onDragStart:Fe}=se.current,st={activatorEvent:ye,active:{id:pe,data:fe.data,rect:F}};Ns.unstable_batchedUpdates(()=>{Fe==null||Fe(st),k(ju.Initializing),x({type:ma.DragStart,initialCoordinates:G,active:pe}),S({type:"onDragStart",event:st}),ae(ve.current),ee(ye)})},onMove(G){x({type:ma.DragMove,coordinates:G})},onEnd:B(ma.DragEnd),onCancel:B(ma.DragCancel)});ve.current=q;function B(G){return async function(){const{active:fe,collisions:Fe,over:st,scrollAdjustedTranslate:Dt}=Ie.current;let un=null;if(fe&&Dt){const{cancelDrop:zt}=se.current;un={activatorEvent:ye,active:fe,collisions:Fe,delta:Dt,over:st},G===ma.DragEnd&&typeof zt=="function"&&await Promise.resolve(zt(un))&&(G=ma.DragCancel)}L.current=null,Ns.unstable_batchedUpdates(()=>{x({type:G}),k(ju.Uninitialized),V(null),ae(null),ee(null),ve.current=null;const zt=G===ma.DragEnd?"onDragEnd":"onDragCancel";if(un){const Gt=se.current[zt];Gt==null||Gt(un),S({type:zt,event:un})}})}}},[N]),le=R.useCallback((et,me)=>(De,Ke)=>{const Ct=De.nativeEvent,ye=N.get(Ke);if(L.current!==null||!ye||Ct.dndKit||Ct.defaultPrevented)return;const q={active:ye};et(De,me.options,q)===!0&&(Ct.dndKit={capturedBy:me.sensor},L.current=Ke,ke(De,me))},[N,ke]),dt=vge(f,le);Age(f),zs(()=>{qe&&C===ju.Initializing&&k(ju.Initialized)},[qe,C]),R.useEffect(()=>{const{onDragMove:et}=se.current,{active:me,activatorEvent:De,collisions:Ke,over:Ct}=Ie.current;if(!me||!De)return;const ye={active:me,activatorEvent:De,collisions:Ke,delta:{x:Ft.x,y:Ft.y},over:Ct};Ns.unstable_batchedUpdates(()=>{et==null||et(ye),S({type:"onDragMove",event:ye})})},[Ft.x,Ft.y]),R.useEffect(()=>{const{active:et,activatorEvent:me,collisions:De,droppableContainers:Ke,scrollAdjustedTranslate:Ct}=Ie.current;if(!et||L.current==null||!me||!Ct)return;const{onDragOver:ye}=se.current,q=Ke.get(ge),B=q&&q.rect.current?{id:q.id,rect:q.rect.current,data:q.data,disabled:q.disabled}:null,G={active:et,activatorEvent:me,collisions:De,delta:{x:Ct.x,y:Ct.y},over:B};Ns.unstable_batchedUpdates(()=>{V(B),ye==null||ye(G),S({type:"onDragOver",event:G})})},[ge]),zs(()=>{Ie.current={activatorEvent:ne,active:Z,activeNode:Me,collisionRect:Tt,collisions:Ut,droppableRects:re,draggableNodes:N,draggingNode:Ce,draggingNodeRect:Ne,droppableContainers:H,over:I,scrollableAncestors:xe,scrollAdjustedTranslate:Ft},F.current={initial:Ne,translated:Tt}},[Z,Me,Ut,Tt,N,Ce,Ne,re,H,I,xe,Ft]),mge({...Ae,delta:z,draggingRect:Tt,pointerCoordinates:Ve,scrollableAncestors:xe,scrollableAncestorRects:Le});const yt=R.useMemo(()=>({active:Z,activeNode:Me,activeNodeRect:qe,activatorEvent:ne,collisions:Ut,containerNodeRect:it,dragOverlay:U,draggableNodes:N,droppableContainers:H,droppableRects:re,over:I,measureDroppableContainers:be,scrollableAncestors:xe,scrollableAncestorRects:Le,measuringConfiguration:Y,measuringScheduled:we,windowRect:Q}),[Z,Me,qe,ne,Ut,it,U,N,H,re,I,be,xe,Le,Y,we,Q]),M=R.useMemo(()=>({activatorEvent:ne,activators:dt,active:Z,activeNodeRect:qe,ariaDescribedById:{draggable:W},dispatch:x,draggableNodes:N,over:I,measureDroppableContainers:be}),[ne,dt,Z,qe,x,W,N,I,be]);return vt.createElement(Z$.Provider,{value:E},vt.createElement(A1.Provider,{value:M},vt.createElement(u9.Provider,{value:yt},vt.createElement(c9.Provider,{value:Oe},c)),vt.createElement(Lge,{disabled:(s==null?void 0:s.restoreFocus)===!1})),vt.createElement($0e,{...s,hiddenTextDescribedById:W}));function Be(){const et=(de==null?void 0:de.autoScrollEnabled)===!1,me=typeof u=="object"?u.enabled===!1:u===!1,De=D&&!et&&!me;return typeof u=="object"?{...u,enabled:De}:{enabled:De}}}),qge=R.createContext(null),fO="button",Hge="Draggable";function Vge(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=Sg(Hge),{activators:o,activatorEvent:s,active:u,activeNodeRect:c,ariaDescribedById:f,draggableNodes:h,over:p}=R.useContext(A1),{role:g=fO,roleDescription:v="draggable",tabIndex:b=0}=a??{},_=(u==null?void 0:u.id)===t,x=R.useContext(_?c9:qge),[S,E]=qv(),[C,k]=qv(),D=Tge(o,t),O=C0(n);zs(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:O}),()=>{const z=h.get(t);z&&z.key===i&&h.delete(t)}),[h,t]);const N=R.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":_&&g===fO?!0:void 0,"aria-roledescription":v,"aria-describedby":f.draggable}),[r,g,b,_,v,f.draggable]);return{active:u,activatorEvent:s,activeNodeRect:c,attributes:N,isDragging:_,listeners:r?void 0:D,node:S,over:p,setNodeRef:E,setActivatorNodeRef:k,transform:x}}function Gge(){return R.useContext(u9)}const Wge="Droppable",Kge={timeout:25};function Zge(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=Sg(Wge),{active:o,dispatch:s,over:u,measureDroppableContainers:c}=R.useContext(A1),f=R.useRef({disabled:n}),h=R.useRef(!1),p=R.useRef(null),g=R.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:_}={...Kge,...a},x=C0(b??r),S=R.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),g.current=null},_)},[_]),E=k1({callback:S,disabled:v||!o}),C=R.useCallback((N,z)=>{E&&(z&&(E.unobserve(z),h.current=!1),N&&E.observe(N))},[E]),[k,D]=qv(C),O=C0(t);return R.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),R.useEffect(()=>(s({type:ma.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:p,data:O}}),()=>s({type:ma.UnregisterDroppable,key:i,id:r})),[r]),R.useEffect(()=>{n!==f.current.disabled&&(s({type:ma.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,s]),{active:o,rect:p,isOver:(u==null?void 0:u.id)===r,node:k,over:u,setNodeRef:D}}function EA(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Yge(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function gb(e){return e!==null&&e>=0}function Xge(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Jge(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const d9=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=EA(t,r,n),o=t[a],s=i[a];return!s||!o?null:{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}},yb={scaleX:1,scaleY:1},Qge=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:o}=e;const s=(t=i[n])!=null?t:r;if(!s)return null;if(a===n){const c=i[o];return c?{x:0,y:n<o?c.top+c.height-(s.top+s.height):c.top-s.top,...yb}:null}const u=eye(i,a,n);return a>n&&a<=o?{x:0,y:-s.height-u,...yb}:a<n&&a>=o?{x:0,y:s.height+u,...yb}:{x:0,y:0,...yb}};function eye(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const f9="Sortable",h9=vt.createContext({activeIndex:-1,containerId:f9,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:d9,disabled:{draggable:!1,droppable:!1}});function tye(e){let{children:t,id:n,items:r,strategy:a=d9,disabled:i=!1}=e;const{active:o,dragOverlay:s,droppableRects:u,over:c,measureDroppableContainers:f}=Gge(),h=Sg(f9,n),p=s.rect!==null,g=R.useMemo(()=>r.map(D=>typeof D=="object"&&"id"in D?D.id:D),[r]),v=o!=null,b=o?g.indexOf(o.id):-1,_=c?g.indexOf(c.id):-1,x=R.useRef(g),S=!Xge(g,x.current),E=_!==-1&&b===-1||S,C=Jge(i);zs(()=>{S&&v&&f(g)},[S,g,v,f]),R.useEffect(()=>{x.current=g},[g]);const k=R.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:_,useDragOverlay:p,sortedRects:Yge(g,u),strategy:a}),[b,h,C.draggable,C.droppable,E,g,_,u,p,a]);return vt.createElement(h9.Provider,{value:k},t)}const nye=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return EA(n,r,a).indexOf(t)},rye=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:o,previousItems:s,previousContainerId:u,transition:c}=e;return!c||!r||s!==i&&a===o?!1:n?!0:o!==a&&t===u},aye={duration:200,easing:"ease"},p9="transform",iye=A0.Transition.toString({property:p9,duration:0,easing:"linear"}),oye={roleDescription:"sortable"};function sye(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,o]=R.useState(null),s=R.useRef(n);return zs(()=>{if(!t&&n!==s.current&&r.current){const u=a.current;if(u){const c=Xh(r.current,{ignoreTransform:!0}),f={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(f.x||f.y)&&o(f)}}n!==s.current&&(s.current=n)},[t,n,r,a]),R.useEffect(()=>{i&&o(null)},[i]),i}function lye(e){let{animateLayoutChanges:t=rye,attributes:n,disabled:r,data:a,getNewIndex:i=nye,id:o,strategy:s,resizeObserverConfig:u,transition:c=aye}=e;const{items:f,containerId:h,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:b,overIndex:_,useDragOverlay:x,strategy:S}=R.useContext(h9),E=uye(r,g),C=f.indexOf(o),k=R.useMemo(()=>({sortable:{containerId:h,index:C,items:f},...a}),[h,a,C,f]),D=R.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:O,node:N,isOver:z,setNodeRef:H}=Zge({id:o,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...u}}),{active:X,activatorEvent:F,activeNodeRect:Z,attributes:L,setNodeRef:de,listeners:ae,isDragging:ne,over:ee,setActivatorNodeRef:se,transform:W}=Vge({id:o,data:k,attributes:{...oye,...n},disabled:E.draggable}),J=k0e(H,de),Y=!!X,re=Y&&!v&&gb(p)&&gb(_),be=!x&&ne,we=be&&re?W:null,Pe=re?we??(s??S)({rects:b,activeNodeRect:Z,activeIndex:p,overIndex:_,index:C}):null,Ae=gb(p)&&gb(_)?i({id:o,items:f,activeIndex:p,overIndex:_}):C,Te=X==null?void 0:X.id,qe=R.useRef({activeId:Te,items:f,newIndex:Ae,containerId:h}),it=f!==qe.current.items,Ie=t({active:X,containerId:h,isDragging:ne,isSorting:Y,id:o,index:C,items:f,newIndex:qe.current.newIndex,previousItems:qe.current.items,previousContainerId:qe.current.containerId,transition:c,wasDragging:qe.current.activeId!=null}),Re=sye({disabled:!Ie,index:C,node:N,rect:O});return R.useEffect(()=>{Y&&qe.current.newIndex!==Ae&&(qe.current.newIndex=Ae),h!==qe.current.containerId&&(qe.current.containerId=h),f!==qe.current.items&&(qe.current.items=f)},[Y,Ae,h,f]),R.useEffect(()=>{if(Te===qe.current.activeId)return;if(Te!=null&&qe.current.activeId==null){qe.current.activeId=Te;return}const Ce=setTimeout(()=>{qe.current.activeId=Te},50);return()=>clearTimeout(Ce)},[Te]),{active:X,activeIndex:p,attributes:L,data:k,rect:O,index:C,newIndex:Ae,items:f,isOver:z,isSorting:Y,isDragging:ne,listeners:ae,node:N,overIndex:_,over:ee,setNodeRef:J,setActivatorNodeRef:se,setDroppableNodeRef:H,setDraggableNodeRef:de,transform:Re??Pe,transition:U()};function U(){if(Re||it&&qe.current.newIndex===C)return iye;if(!(be&&!vA(F)||!c)&&(Y||Ie))return A0.Transition.toString({...c,property:p9})}}function uye(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Gv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const cye=[Vn.Down,Vn.Right,Vn.Up,Vn.Left],dye=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:s}}=t;if(cye.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=a.get(h.id);if(p)switch(e.code){case Vn.Down:r.top<p.top&&u.push(h);break;case Vn.Up:r.top>p.top&&u.push(h);break;case Vn.Left:r.left>p.left&&u.push(h);break;case Vn.Right:r.left<p.left&&u.push(h);break}});const c=q0e({collisionRect:r,droppableRects:a,droppableContainers:u});let f=J$(c,"id");if(f===(o==null?void 0:o.id)&&c.length>1&&(f=c[1].id),f!=null){const h=i.get(n.id),p=i.get(f),g=p?a.get(p.id):null,v=p==null?void 0:p.node.current;if(v&&g&&h&&p){const _=C1(v).some((D,O)=>s[O]!==D),x=m9(h,p),S=fye(h,p),E=_||!x?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:k0(C,E)}}}};function m9(e,t){return!Gv(e)||!Gv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function fye(e,t){return!Gv(e)||!Gv(t)||!m9(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const hye=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:o,transition:s,isDragging:u}=lye({id:e,disabled:n}),c={transform:A0.Transform.toString(o),transition:s,zIndex:u?10:void 0,opacity:n?.5:1};return y.jsxs("div",{ref:i,style:c,...r,...a,className:$t("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",u&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[y.jsx(GK,{className:$t("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),y.jsx(En,{className:$t("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},pye=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r}=Ya(In(h=>({setGlobalModelSortOrder:h.setGlobalModelSortOrder,dbProviderConfigs:h.dbProviderConfigs,globalModelSortOrder:h.globalModelSortOrder,isLoading:h.isLoading}))),[a,i]=R.useState(""),o=R.useMemo(()=>{const h=new Map,p=new Set;t.forEach(_=>{if(!_.isEnabled||!_.enabledModels)return;const x=_.type,S=_.fetchedModels??zm[x]??[],E=new Map(S.map(C=>[C.id,C]));_.enabledModels.forEach(C=>{const k=nd(_.id,C),D=E.get(C);D&&(p.add(k),h.set(k,{id:k,name:D.name||C,providerId:_.id,providerName:_.name,metadata:D.metadata}))})});const g=[],v=new Set;n.forEach(_=>{if(p.has(_)){const x=h.get(_);x&&!v.has(_)&&(g.push(x),v.add(_))}});const b=Array.from(p).filter(_=>!v.has(_)).map(_=>h.get(_)).filter(_=>!!_).sort((_,x)=>_.name.localeCompare(x.name));return[...g,...b]},[t,n]),s=R.useMemo(()=>{if(!a.trim())return o;const h=a.toLowerCase();return o.filter(p=>p.name.toLowerCase().includes(h)||p.providerName.toLowerCase().includes(h)||p.id.toLowerCase().includes(h))},[o,a]),u=R.useMemo(()=>s.map(h=>h.id),[s]),c=R.useCallback(h=>{const{active:p,over:g}=h;if(g&&p.id!==g.id){const v=o.map(E=>E.id),b=p.id,_=g.id,x=v.indexOf(b),S=v.indexOf(_);if(x!==-1&&S!==-1){const E=EA(v,x,S);e(E)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[o,e]),f=B0e(eO(SA),eO(_A,{coordinateGetter:dye}));return r?y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx(Pr,{className:"h-8 w-1/3"}),y.jsx(Pr,{className:"h-6 w-1/2"}),y.jsx(Pr,{className:"h-64 w-full"})]}):y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),y.jsx(Uv,{}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(En,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),y.jsxs("div",{className:"relative",children:[y.jsx(fw,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(Qn,{type:"search",placeholder:"Filter models by name or provider...",value:a,onChange:h=>i(h.target.value),className:"pl-8 w-full",disabled:r})]}),y.jsx(yg,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:s.length>0?y.jsx(Uge,{sensors:f,collisionDetection:U0e,onDragEnd:c,children:y.jsx(tye,{items:u,strategy:Qge,children:s.map(h=>y.jsx(hye,{id:h.id,name:`${h.name} (${h.providerName})`},h.id))})}):y.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:a.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},mye=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=Br(In(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Git User Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set your user name and email for Git commits made within the VFS. This is required for committing changes."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 rounded-lg border p-4 shadow-sm bg-card",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(En,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(Qn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(En,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(Qn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})]})})},gye=vt.memo(mye),yye=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:o}=Kr(In(N=>({syncRepos:N.syncRepos,addSyncRepo:N.addSyncRepo,updateSyncRepo:N.updateSyncRepo,deleteSyncRepo:N.deleteSyncRepo,initializeOrSyncRepo:N.initializeOrSyncRepo,repoInitializationStatus:N.repoInitializationStatus,isLoading:N.isLoading}))),[s,u]=R.useState(!1),[c,f]=R.useState(null),[h,p]=R.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=R.useState(!1),[b,_]=R.useState({}),x=R.useCallback(()=>{p({name:"",remoteUrl:"",branch:"main",username:"",password:""}),u(!1),f(null),v(!1)},[]),S=R.useCallback((N,z)=>{p(H=>({...H,[N]:z}))},[]),E=R.useCallback(async()=>{var N,z,H,X;if(!((N=h.name)!=null&&N.trim())||!((z=h.remoteUrl)!=null&&z.trim())){ot.error("Repository Name and Remote URL are required.");return}v(!0);try{const F={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((H=h.branch)==null?void 0:H.trim())||"main",username:((X=h.username)==null?void 0:X.trim())||null,password:h.password||null};c?await n(c,F):await t(F),x()}catch(F){console.error("Failed to save sync repo:",F)}finally{v(!1)}},[h,c,t,n,x]),C=N=>{f(N.id),p({name:N.name,remoteUrl:N.remoteUrl,branch:N.branch||"main",username:N.username??"",password:N.password??""}),u(!1)},k=R.useCallback(async(N,z)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${z}"? This will unlink it from any conversations and remove the local copy.`)){_(H=>({...H,[N]:!0}));try{await r(N),c===N&&x()}catch(H){console.error("Failed to delete sync repo:",H)}finally{_(H=>({...H,[N]:!1}))}}},[r,c,x]),D=R.useCallback(async N=>{await a(N)},[a]),O=()=>{var N,z;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:c?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(En,{htmlFor:"repo-name",children:"Name"}),y.jsx(Qn,{id:"repo-name",value:h.name||"",onChange:H=>S("name",H.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(En,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(Qn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:H=>S("remoteUrl",H.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(En,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(Qn,{id:"repo-branch",value:h.branch||"",onChange:H=>S("branch",H.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),y.jsxs("div",{className:"pt-2",children:[y.jsx(En,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),y.jsxs(U$,{variant:"destructive",className:"mt-2 mb-3",children:[y.jsx(PC,{className:"h-4 w-4"}),y.jsx(q$,{children:"Security Warning"}),y.jsx(H$,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(En,{htmlFor:"repo-username",children:"Username"}),y.jsx(Qn,{id:"repo-username",value:h.username||"",onChange:H=>S("username",H.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),y.jsxs("div",{children:[y.jsx(En,{htmlFor:"repo-password",children:"Password / Token"}),y.jsx(Qn,{id:"repo-password",type:"password",value:h.password||"",onChange:H=>S("password",H.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Pt,{variant:"ghost",size:"sm",onClick:x,disabled:g,type:"button",children:[y.jsx(ql,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Pt,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((N=h.name)!=null&&N.trim())||!((z=h.remoteUrl)!=null&&z.trim()),type:"button",children:[g&&y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(jC,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!s&&!c&&y.jsxs(Pt,{onClick:()=>u(!0),variant:"outline",className:"w-full mb-4",disabled:o,children:[y.jsx(cw,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(s||c)&&O(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),o&&!s&&!c?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Pr,{className:"h-10 w-full"}),y.jsx(Pr,{className:"h-10 w-full"}),y.jsx(Pr,{className:"h-10 w-full"})]}):e.length===0&&!s&&!c?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(_1,{children:[y.jsx(x1,{children:y.jsxs(Gi,{children:[y.jsx(na,{children:"Name"}),y.jsx(na,{children:"Remote URL"}),y.jsx(na,{children:"Branch"}),y.jsx(na,{children:"Auth"}),y.jsx(na,{className:"text-right",children:"Actions"})]})}),y.jsx(S1,{children:e.map(N=>{const z=b[N.id],H=c===N.id,X=!!N.username||!!N.password,F=i[N.id]||"idle",L=z||g||!!c||F==="syncing";let de=null,ae="Initialize/Sync Repository";return F==="syncing"?(de=y.jsx(Gn,{className:"h-4 w-4 animate-spin mr-1"}),ae="Initializing/Syncing..."):F==="idle"?(de=y.jsx(lw,{className:"h-4 w-4 text-green-500 mr-1"}),ae="Sync Successful / Ready"):F==="error"?(de=y.jsx(Ls,{className:"h-4 w-4 text-destructive mr-1"}),ae="Sync Failed"):de=y.jsx(dw,{className:"h-4 w-4 mr-1"}),y.jsxs(Gi,{className:$t(H?"bg-muted/50":"",L&&!H?"opacity-70":""),children:[y.jsx(cr,{className:"font-medium",children:N.name}),y.jsx(cr,{className:"text-xs truncate max-w-xs",children:N.remoteUrl}),y.jsx(cr,{children:N.branch||"main"}),y.jsx(cr,{className:"text-xs",children:X?"Configured":"None"}),y.jsxs(cr,{className:"text-right space-x-1",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"outline",size:"icon",onClick:()=>D(N.id),className:"h-8 w-8","aria-label":`Initialize or Sync repo ${N.name}`,disabled:L,children:de})}),y.jsx(Tn,{side:"top",children:ae})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",onClick:()=>C(N),className:"h-8 w-8","aria-label":`Edit repo ${N.name}`,disabled:L,children:y.jsx(DC,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"top",children:"Edit"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",onClick:()=>k(N.id,N.name),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete repo ${N.name}`,disabled:L,children:z?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Zu,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"top",children:"Delete"})]})})]})]},N.id)})})]})})]})]})},bye=vt.memo(yye),g9=R.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=Br(In(_=>({enableAdvancedSettings:_.enableAdvancedSettings}))),{enableApiKeyManagement:r}=Ya(In(_=>({enableApiKeyManagement:_.enableApiKeyManagement}))),{customSettingsTabs:a}=S0(In(_=>({customSettingsTabs:_.modSettingsTabs||[]}))),{initialSettingsTab:i,initialSettingsSubTab:o,clearInitialSettingsTabs:s}=fi(In(_=>({initialSettingsTab:_.initialSettingsTab,initialSettingsSubTab:_.initialSettingsSubTab,clearInitialSettingsTabs:_.clearInitialSettingsTabs}))),[u,c]=R.useState(i||"general"),[f,h]=R.useState(o||"");R.useEffect(()=>{e&&(c(i||"general"),h(o||""))},[e,i,o]);const p=_=>{_||(t(),s())},g=_=>{c(_),h("")},v=_=>{h(_)},b=$t("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(o1,{open:e,onOpenChange:p,children:y.jsxs(s1,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(l1,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(c1,{children:"Settings"}),y.jsx(d1,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsxs(j2,{value:u,onValueChange:g,className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(M2,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(ho,{value:"general",className:b,children:"General"}),y.jsx(ho,{value:"providers",className:b,children:"Providers & Models"}),n&&y.jsx(ho,{value:"assistant",className:b,children:"Assistant"}),y.jsx(ho,{value:"git",className:b,children:"Git"}),y.jsx(ho,{value:"data",className:b,children:"Data"}),y.jsx(ho,{value:"mods",className:b,children:"Mods"}),a.map(_=>y.jsx(ho,{value:_.id,className:b,children:_.title},_.id))]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(po,{value:"general",children:y.jsx(s0e,{})}),y.jsx(po,{value:"providers",className:"flex flex-col data-[state=inactive]:hidden",children:y.jsxs(j2,{value:u==="providers"&&f||"model-order",onValueChange:v,className:"flex flex-col",children:[y.jsxs(M2,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(ho,{value:"model-order",className:b,children:"Global Model Order"}),y.jsx(ho,{value:"provider-list",className:b,children:"Provider List & Config"}),r&&y.jsx(ho,{value:"api-keys",className:b,children:"API Keys"})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx(po,{value:"model-order",children:y.jsx(pye,{})}),y.jsx(po,{value:"provider-list",children:y.jsx(C0e,{})}),r&&y.jsx(po,{value:"api-keys",children:y.jsx(d0e,{})})]})]})}),n&&y.jsx(po,{value:"assistant",children:y.jsx(u0e,{})}),y.jsx(po,{value:"git",className:"h-full",children:y.jsxs(j2,{value:u==="git"&&f||"config",onValueChange:v,className:"flex flex-col h-full",children:[y.jsxs(M2,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(ho,{value:"config",className:b,children:"User Config"}),y.jsx(ho,{value:"sync",className:b,children:"Sync Repositories"})]}),y.jsxs("div",{className:"flex-grow mt-4 overflow-y-auto",children:[y.jsx(po,{value:"config",children:y.jsx(gye,{})}),y.jsx(po,{value:"sync",children:y.jsx(bye,{})})]})]})}),y.jsx(po,{value:"data",children:y.jsx(h0e,{})}),y.jsx(po,{value:"mods",children:y.jsx(g0e,{})}),a.map(_=>y.jsx(po,{value:_.id,children:vt.isValidElement(_.component)?_.component:typeof _.component=="function"?y.jsx(_.component,{}):null},_.id))]})]}),y.jsx(u1,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(Pt,{variant:"outline",onClick:()=>p(!1),children:"Close"})})]})})});g9.displayName="SettingsModalComponent";const vye=g9,wye=()=>{const e=fi(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(Pt,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Open Settings",className:"h-8 w-8",children:y.jsx(MC,{className:"h-4 w-4"})})},_ye=()=>{const e=fi(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(MC,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"right",children:"Settings"})]})})},xye=()=>{const e=Oa(r=>r.registerChatControl),{isModalOpen:t,toggleModal:n}=fi(In(r=>({isModalOpen:r.isChatControlPanelOpen.settingsModal??!1,toggleModal:r.toggleChatControlPanel})));return vt.useEffect(()=>e({id:"core-settings-trigger",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(wye,{}),iconRenderer:()=>y.jsx(_ye,{}),show:()=>!0,order:100,settingsConfig:{tabId:"mainSettingsModal",title:"Settings"},settingsRenderer:()=>t?y.jsx(vye,{isOpen:t,onClose:()=>n("settingsModal",!1)}):null}),[e,t,n]),null},y9=({isCollapsed:e,onClick:t})=>y.jsx(Pt,{variant:"ghost",size:"icon",onClick:()=>t(),className:"h-8 w-8","aria-label":e?"Open sidebar":"Close sidebar",children:e?y.jsx(cZ,{className:"h-4 w-4"}):y.jsx(lZ,{className:"h-4 w-4"})}),Sye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=fi(In(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(y9,{isCollapsed:e,onClick:t})},Eye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=fi(In(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(y9,{isCollapsed:e,onClick:t})}),y.jsx(Tn,{side:"right",children:e?"Open Sidebar":"Close Sidebar"})]})})},Cye=()=>{const e=Oa(t=>t.registerChatControl);return vt.useEffect(()=>e({id:"core-sidebar-toggle",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(Sye,{}),iconRenderer:()=>y.jsx(Eye,{}),show:()=>!0,order:10}),[e]),null};var hO=1,kye=.9,Aye=.8,Tye=.17,B2=.1,z2=.999,Rye=.9999,Nye=.99,Iye=/[\\\/_+.#"@\[\(\{&]/,Oye=/[\\\/_+.#"@\[\(\{&]/g,Dye=/[\s-]/,b9=/[\s-]/g;function uC(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?hO:Nye;var s=`${a},${i}`;if(o[s]!==void 0)return o[s];for(var u=r.charAt(i),c=n.indexOf(u,a),f=0,h,p,g,v;c>=0;)h=uC(e,t,n,r,c+1,i+1,o),h>f&&(c===a?h*=hO:Iye.test(e.charAt(c-1))?(h*=Aye,g=e.slice(a,c-1).match(Oye),g&&a>0&&(h*=Math.pow(z2,g.length))):Dye.test(e.charAt(c-1))?(h*=kye,v=e.slice(a,c-1).match(b9),v&&a>0&&(h*=Math.pow(z2,v.length))):(h*=Tye,a>0&&(h*=Math.pow(z2,c-a))),e.charAt(c)!==t.charAt(i)&&(h*=Rye)),(h<B2&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(p=uC(e,t,n,r,c+1,i+2,o),p*B2>h&&(h=p*B2)),h>f&&(f=h),c=n.indexOf(u,c+1);return o[s]=f,f}function pO(e){return e.toLowerCase().replace(b9," ")}function jye(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,uC(e,t,pO(e),pO(t),0,0,{})}var hm='[cmdk-group=""]',U2='[cmdk-group-items=""]',Mye='[cmdk-group-heading=""]',v9='[cmdk-item=""]',mO=`${v9}:not([aria-disabled="true"])`,cC="cmdk-item-select",Df="data-value",Pye=(e,t,n)=>jye(e,t,n),w9=R.createContext(void 0),Eg=()=>R.useContext(w9),_9=R.createContext(void 0),CA=()=>R.useContext(_9),x9=R.createContext(void 0),S9=R.forwardRef((e,t)=>{let n=jf(()=>{var Y,re;return{search:"",value:(re=(Y=e.value)!=null?Y:e.defaultValue)!=null?re:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=jf(()=>new Set),a=jf(()=>new Map),i=jf(()=>new Map),o=jf(()=>new Set),s=E9(e),{label:u,children:c,value:f,onValueChange:h,filter:p,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:_=!0,...x}=e,S=Xa(),E=Xa(),C=Xa(),k=R.useRef(null),D=Wye();yd(()=>{if(f!==void 0){let Y=f.trim();n.current.value=Y,O.emit()}},[f]),yd(()=>{D(6,Z)},[]);let O=R.useMemo(()=>({subscribe:Y=>(o.current.add(Y),()=>o.current.delete(Y)),snapshot:()=>n.current,setState:(Y,re,be)=>{var we,Me,Pe,Ae;if(!Object.is(n.current[Y],re)){if(n.current[Y]=re,Y==="search")F(),H(),D(1,X);else if(Y==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Te=document.getElementById(C);Te?Te.focus():(we=document.getElementById(S))==null||we.focus()}if(D(7,()=>{var Te;n.current.selectedItemId=(Te=L())==null?void 0:Te.id,O.emit()}),be||D(5,Z),((Me=s.current)==null?void 0:Me.value)!==void 0){let Te=re??"";(Ae=(Pe=s.current).onValueChange)==null||Ae.call(Pe,Te);return}}O.emit()}},emit:()=>{o.current.forEach(Y=>Y())}}),[]),N=R.useMemo(()=>({value:(Y,re,be)=>{var we;re!==((we=i.current.get(Y))==null?void 0:we.value)&&(i.current.set(Y,{value:re,keywords:be}),n.current.filtered.items.set(Y,z(re,be)),D(2,()=>{H(),O.emit()}))},item:(Y,re)=>(r.current.add(Y),re&&(a.current.has(re)?a.current.get(re).add(Y):a.current.set(re,new Set([Y]))),D(3,()=>{F(),H(),n.current.value||X(),O.emit()}),()=>{i.current.delete(Y),r.current.delete(Y),n.current.filtered.items.delete(Y);let be=L();D(4,()=>{F(),(be==null?void 0:be.getAttribute("id"))===Y&&X(),O.emit()})}),group:Y=>(a.current.has(Y)||a.current.set(Y,new Set),()=>{i.current.delete(Y),a.current.delete(Y)}),filter:()=>s.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:k}),[]);function z(Y,re){var be,we;let Me=(we=(be=s.current)==null?void 0:be.filter)!=null?we:Pye;return Y?Me(Y,n.current.search,re):0}function H(){if(!n.current.search||s.current.shouldFilter===!1)return;let Y=n.current.filtered.items,re=[];n.current.filtered.groups.forEach(we=>{let Me=a.current.get(we),Pe=0;Me.forEach(Ae=>{let Te=Y.get(Ae);Pe=Math.max(Te,Pe)}),re.push([we,Pe])});let be=k.current;de().sort((we,Me)=>{var Pe,Ae;let Te=we.getAttribute("id"),qe=Me.getAttribute("id");return((Pe=Y.get(qe))!=null?Pe:0)-((Ae=Y.get(Te))!=null?Ae:0)}).forEach(we=>{let Me=we.closest(U2);Me?Me.appendChild(we.parentElement===Me?we:we.closest(`${U2} > *`)):be.appendChild(we.parentElement===be?we:we.closest(`${U2} > *`))}),re.sort((we,Me)=>Me[1]-we[1]).forEach(we=>{var Me;let Pe=(Me=k.current)==null?void 0:Me.querySelector(`${hm}[${Df}="${encodeURIComponent(we[0])}"]`);Pe==null||Pe.parentElement.appendChild(Pe)})}function X(){let Y=de().find(be=>be.getAttribute("aria-disabled")!=="true"),re=Y==null?void 0:Y.getAttribute(Df);O.setState("value",re||void 0)}function F(){var Y,re,be,we;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Me=0;for(let Pe of r.current){let Ae=(re=(Y=i.current.get(Pe))==null?void 0:Y.value)!=null?re:"",Te=(we=(be=i.current.get(Pe))==null?void 0:be.keywords)!=null?we:[],qe=z(Ae,Te);n.current.filtered.items.set(Pe,qe),qe>0&&Me++}for(let[Pe,Ae]of a.current)for(let Te of Ae)if(n.current.filtered.items.get(Te)>0){n.current.filtered.groups.add(Pe);break}n.current.filtered.count=Me}function Z(){var Y,re,be;let we=L();we&&(((Y=we.parentElement)==null?void 0:Y.firstChild)===we&&((be=(re=we.closest(hm))==null?void 0:re.querySelector(Mye))==null||be.scrollIntoView({block:"nearest"})),we.scrollIntoView({block:"nearest"}))}function L(){var Y;return(Y=k.current)==null?void 0:Y.querySelector(`${v9}[aria-selected="true"]`)}function de(){var Y;return Array.from(((Y=k.current)==null?void 0:Y.querySelectorAll(mO))||[])}function ae(Y){let re=de()[Y];re&&O.setState("value",re.getAttribute(Df))}function ne(Y){var re;let be=L(),we=de(),Me=we.findIndex(Ae=>Ae===be),Pe=we[Me+Y];(re=s.current)!=null&&re.loop&&(Pe=Me+Y<0?we[we.length-1]:Me+Y===we.length?we[0]:we[Me+Y]),Pe&&O.setState("value",Pe.getAttribute(Df))}function ee(Y){let re=L(),be=re==null?void 0:re.closest(hm),we;for(;be&&!we;)be=Y>0?Vye(be,hm):Gye(be,hm),we=be==null?void 0:be.querySelector(mO);we?O.setState("value",we.getAttribute(Df)):ne(Y)}let se=()=>ae(de().length-1),W=Y=>{Y.preventDefault(),Y.metaKey?se():Y.altKey?ee(1):ne(1)},J=Y=>{Y.preventDefault(),Y.metaKey?ae(0):Y.altKey?ee(-1):ne(-1)};return R.createElement(Jt.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:Y=>{var re;(re=x.onKeyDown)==null||re.call(x,Y);let be=Y.nativeEvent.isComposing||Y.keyCode===229;if(!(Y.defaultPrevented||be))switch(Y.key){case"n":case"j":{_&&Y.ctrlKey&&W(Y);break}case"ArrowDown":{W(Y);break}case"p":case"k":{_&&Y.ctrlKey&&J(Y);break}case"ArrowUp":{J(Y);break}case"Home":{Y.preventDefault(),ae(0);break}case"End":{Y.preventDefault(),se();break}case"Enter":{Y.preventDefault();let we=L();if(we){let Me=new Event(cC);we.dispatchEvent(Me)}}}}},R.createElement("label",{"cmdk-label":"",htmlFor:N.inputId,id:N.labelId,style:Zye},u),T1(e,Y=>R.createElement(_9.Provider,{value:O},R.createElement(w9.Provider,{value:N},Y))))}),Fye=R.forwardRef((e,t)=>{var n,r;let a=Xa(),i=R.useRef(null),o=R.useContext(x9),s=Eg(),u=E9(e),c=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;yd(()=>{if(!c)return s.item(a,o==null?void 0:o.id)},[c]);let f=C9(a,i,[e.value,e.children,i],e.keywords),h=CA(),p=sc(D=>D.value&&D.value===f.current),g=sc(D=>c||s.filter()===!1?!0:D.search?D.filtered.items.get(a)>0:!0);R.useEffect(()=>{let D=i.current;if(!(!D||e.disabled))return D.addEventListener(cC,v),()=>D.removeEventListener(cC,v)},[g,e.onSelect,e.disabled]);function v(){var D,O;b(),(O=(D=u.current).onSelect)==null||O.call(D,f.current)}function b(){h.setState("value",f.current,!0)}if(!g)return null;let{disabled:_,value:x,onSelect:S,forceMount:E,keywords:C,...k}=e;return R.createElement(Jt.div,{ref:Bu(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!p,"data-disabled":!!_,"data-selected":!!p,onPointerMove:_||s.getDisablePointerSelection()?void 0:b,onClick:_?void 0:v},e.children)}),Lye=R.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=Xa(),s=R.useRef(null),u=R.useRef(null),c=Xa(),f=Eg(),h=sc(g=>a||f.filter()===!1?!0:g.search?g.filtered.groups.has(o):!0);yd(()=>f.group(o),[]),C9(o,s,[e.value,e.heading,u]);let p=R.useMemo(()=>({id:o,forceMount:a}),[a]);return R.createElement(Jt.div,{ref:Bu(s,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&R.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),T1(e,g=>R.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},R.createElement(x9.Provider,{value:p},g))))}),$ye=R.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=R.useRef(null),i=sc(o=>!o.search);return!n&&!i?null:R.createElement(Jt.div,{ref:Bu(a,t),...r,"cmdk-separator":"",role:"separator"})}),Bye=R.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=CA(),o=sc(c=>c.search),s=sc(c=>c.selectedItemId),u=Eg();return R.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),R.createElement(Jt.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":s,id:u.inputId,type:"text",value:a?e.value:o,onChange:c=>{a||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),zye=R.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=R.useRef(null),o=R.useRef(null),s=sc(c=>c.selectedItemId),u=Eg();return R.useEffect(()=>{if(o.current&&i.current){let c=o.current,f=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=c.offsetHeight;f.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return p.observe(c),()=>{cancelAnimationFrame(h),p.unobserve(c)}}},[]),R.createElement(Jt.div,{ref:Bu(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:u.listId},T1(e,c=>R.createElement("div",{ref:Bu(o,u.listInnerRef),"cmdk-list-sizer":""},c)))}),Uye=R.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...s}=e;return R.createElement(AL,{open:n,onOpenChange:r},R.createElement(TL,{container:o},R.createElement(RL,{"cmdk-overlay":"",className:a}),R.createElement(NL,{"aria-label":e.label,"cmdk-dialog":"",className:i},R.createElement(S9,{ref:t,...s}))))}),qye=R.forwardRef((e,t)=>sc(n=>n.filtered.count===0)?R.createElement(Jt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Hye=R.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return R.createElement(Jt.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},T1(e,o=>R.createElement("div",{"aria-hidden":!0},o)))}),Jh=Object.assign(S9,{List:zye,Item:Fye,Input:Bye,Group:Lye,Separator:$ye,Dialog:Uye,Empty:qye,Loading:Hye});function Vye(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Gye(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function E9(e){let t=R.useRef(e);return yd(()=>{t.current=e}),t}var yd=typeof window>"u"?R.useEffect:R.useLayoutEffect;function jf(e){let t=R.useRef();return t.current===void 0&&(t.current=e()),t}function sc(e){let t=CA(),n=()=>e(t.snapshot());return R.useSyncExternalStore(t.subscribe,n,n)}function C9(e,t,n,r=[]){let a=R.useRef(),i=Eg();return yd(()=>{var o;let s=(()=>{var c;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(c=f.current.textContent)==null?void 0:c.trim():a.current}})(),u=r.map(c=>c.trim());i.value(e,s,u),(o=t.current)==null||o.setAttribute(Df,s),a.current=s}),a}var Wye=()=>{let[e,t]=R.useState(),n=jf(()=>new Map);return yd(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Kye(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function T1({asChild:e,children:t},n){return e&&R.isValidElement(t)?R.cloneElement(Kye(t),{ref:t.ref},n(t.props.children)):n(t)}var Zye={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Yye({className:e,...t}){return y.jsx(Jh,{"data-slot":"command",className:$t("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function Xye({className:e,...t}){return y.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[y.jsx(fw,{className:"size-4 shrink-0 opacity-50"}),y.jsx(Jh.Input,{"data-slot":"command-input",className:$t("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function Jye({className:e,...t}){return y.jsx(Jh.List,{"data-slot":"command-list",className:$t("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function Qye({...e}){return y.jsx(Jh.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function ebe({className:e,...t}){return y.jsx(Jh.Group,{"data-slot":"command-group",className:$t("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function tbe({className:e,...t}){return y.jsx(Jh.Item,{"data-slot":"command-item",className:$t("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}var R1="Popover",[k9,C1e]=Ni(R1,[lc]),Cg=lc(),[nbe,wc]=k9(R1),A9=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=Cg(t),u=R.useRef(null),[c,f]=R.useState(!1),[h,p]=Bs({prop:r,defaultProp:a??!1,onChange:i,caller:R1});return y.jsx(bw,{...s,children:y.jsx(nbe,{scope:t,contentId:Xa(),triggerRef:u,open:h,onOpenChange:p,onOpenToggle:R.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:c,onCustomAnchorAdd:R.useCallback(()=>f(!0),[]),onCustomAnchorRemove:R.useCallback(()=>f(!1),[]),modal:o,children:n})})};A9.displayName=R1;var T9="PopoverAnchor",rbe=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=wc(T9,n),i=Cg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return R.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(P0,{...i,...r,ref:t})});rbe.displayName=T9;var R9="PopoverTrigger",N9=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=wc(R9,n),i=Cg(n),o=_n(t,a.triggerRef),s=y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":M9(a.open),...r,ref:o,onClick:Bt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(P0,{asChild:!0,...i,children:s})});N9.displayName=R9;var kA="PopoverPortal",[abe,ibe]=k9(kA,{forceMount:void 0}),I9=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=wc(kA,t);return y.jsx(abe,{scope:t,forceMount:n,children:y.jsx(Da,{present:n||i.open,children:y.jsx(kh,{asChild:!0,container:a,children:r})})})};I9.displayName=kA;var vh="PopoverContent",O9=R.forwardRef((e,t)=>{const n=ibe(vh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=wc(vh,e.__scopePopover);return y.jsx(Da,{present:r||i.open,children:i.modal?y.jsx(sbe,{...a,ref:t}):y.jsx(lbe,{...a,ref:t})})});O9.displayName=vh;var obe=zu("PopoverContent.RemoveScroll"),sbe=R.forwardRef((e,t)=>{const n=wc(vh,e.__scopePopover),r=R.useRef(null),a=_n(t,r),i=R.useRef(!1);return R.useEffect(()=>{const o=r.current;if(o)return a1(o)},[]),y.jsx(vg,{as:obe,allowPinchZoom:!0,children:y.jsx(D9,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Bt(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,c=s.button===2||u;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Bt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),lbe=R.forwardRef((e,t)=>{const n=wc(vh,e.__scopePopover),r=R.useRef(!1),a=R.useRef(!1);return y.jsx(D9,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),D9=R.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:f,...h}=e,p=wc(vh,n),g=Cg(n);return n1(),y.jsx(bg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(Sh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:y.jsx(vw,{"data-state":M9(p.open),role:"dialog",id:p.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),j9="PopoverClose",ube=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=wc(j9,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Bt(e.onClick,()=>a.onOpenChange(!1))})});ube.displayName=j9;var cbe="PopoverArrow",dbe=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Cg(n);return y.jsx(ww,{...a,...r,ref:t})});dbe.displayName=cbe;function M9(e){return e?"open":"closed"}var fbe=A9,hbe=N9,pbe=I9,mbe=O9;function N1({...e}){return y.jsx(fbe,{"data-slot":"popover",...e})}function I1({...e}){return y.jsx(hbe,{"data-slot":"popover-trigger",...e})}function O1({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(pbe,{children:y.jsx(mbe,{"data-slot":"popover-content",align:t,sideOffset:n,className:$t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function gbe({options:e,value:t,onChange:n,placeholder:r="Select...",searchPlaceholder:a="Search...",emptyText:i="Nothing found.",triggerClassName:o,contentClassName:s,disabled:u=!1}){var p;const[c,f]=R.useState(!1),h=(p=e.find(g=>g.value===t))==null?void 0:p.label;return y.jsxs(N1,{open:c,onOpenChange:f,children:[y.jsx(I1,{asChild:!0,children:y.jsxs(Pt,{variant:"outline",role:"combobox","aria-expanded":c,className:$t("w-[200px] justify-between",o),disabled:u,children:[h||r,y.jsx(j0,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),y.jsx(O1,{className:$t("w-[200px] p-0",s),children:y.jsxs(Yye,{children:[y.jsx(Xye,{placeholder:a}),y.jsxs(Jye,{children:[y.jsx(Qye,{children:i}),y.jsx(ebe,{children:e.map(g=>y.jsxs(tbe,{value:g.value,onSelect:v=>{n(v===t?"":v),f(!1)},children:[y.jsx(xo,{className:$t("mr-2 h-4 w-4",t===g.value?"opacity-100":"opacity-0")}),g.label]},g.value))})]})]})})]})}const ybe=({value:e,onChange:t,disabled:n=!1})=>{const{dbProviderConfigs:r,globalModelSortOrder:a,isLoading:i}=Ya(In(u=>({dbProviderConfigs:u.dbProviderConfigs,globalModelSortOrder:u.globalModelSortOrder,isLoading:u.isLoading}))),o=R.useMemo(()=>{const u=new Map,c=new Set;r.forEach(g=>{if(!g.isEnabled||!g.enabledModels)return;const v=g.type,b=g.fetchedModels??zm[v]??[],_=new Map(b.map(x=>[x.id,x]));g.enabledModels.forEach(x=>{const S=nd(g.id,x),E=_.get(x);E&&(c.add(S),u.set(S,{id:S,name:E.name||x,providerId:g.id,providerName:g.name,metadata:E.metadata}))})});const f=[],h=new Set;a.forEach(g=>{if(c.has(g)){const v=u.get(g);v&&!h.has(g)&&(f.push(v),h.add(g))}});const p=Array.from(c).filter(g=>!h.has(g)).map(g=>u.get(g)).filter(g=>!!g).sort((g,v)=>g.name.localeCompare(v.name));return[...f,...p]},[r,a]),s=vt.useMemo(()=>o.map(u=>({value:u.id,label:`${u.name} (${u.providerName})`})),[o]);return i&&s.length===0?y.jsx(Pr,{className:"h-10 w-[250px]"}):y.jsx(gbe,{options:s,value:e??"",onChange:t,placeholder:"Select Model...",searchPlaceholder:"Search models...",emptyText:i?"Loading models...":"No models enabled/found.",triggerClassName:"h-10 w-full min-w-[200px] max-w-[300px] text-xs",contentClassName:"w-[--radix-popover-trigger-width]",disabled:n||i&&s.length===0||s.length===0})};function bbe(){const e=Oa(t=>t.registerPromptControl);R.useEffect(()=>e({id:"core-global-model-selector",order:10,show:()=>!0,triggerRenderer:()=>{const{selectedModelId:n,selectModel:r,isLoading:a}=Ya(In(i=>({selectedModelId:i.selectedModelId,selectModel:i.selectModel,isLoading:i.isLoading})));return y.jsx(ybe,{value:n,onChange:r,disabled:a})},renderer:void 0,getMetadata:()=>{const n=Ya.getState().selectedModelId;if(!n){console.warn("[GlobalModelSelector] getMetadata: No model selected in store."),ot.error("No model selected. Please choose a model.");return}return{modelId:n}},getParameters:void 0,clearOnSubmit:void 0}),[e])}const vbe=({className:e})=>{const{temperature:t,setTemperature:n,topP:r,setTopP:a,maxTokens:i,setMaxTokens:o,topK:s,setTopK:u,presencePenalty:c,setPresencePenalty:f,frequencyPenalty:h,setFrequencyPenalty:p}=Br(In(N=>({temperature:N.temperature,setTemperature:N.setTemperature,topP:N.topP,setTopP:N.setTopP,maxTokens:N.maxTokens,setMaxTokens:N.setMaxTokens,topK:N.topK,setTopK:N.setTopK,presencePenalty:N.presencePenalty,setPresencePenalty:N.setPresencePenalty,frequencyPenalty:N.frequencyPenalty,setFrequencyPenalty:N.setFrequencyPenalty}))),[g,v]=R.useState(t),[b,_]=R.useState(r??1),[x,S]=R.useState(c??0),[E,C]=R.useState(h??0);R.useEffect(()=>v(t),[t]),R.useEffect(()=>_(r??1),[r]),R.useEffect(()=>S(c??0),[c]),R.useEffect(()=>C(h??0),[h]);const k=R.useCallback((N,z)=>{const H=z.target.value,X=H===""?null:parseInt(H,10);(H===""||!isNaN(X)&&X!==null)&&N(X)},[]),D=R.useCallback((N,z)=>{N(z[0])},[]),O=R.useCallback((N,z)=>{N(z[0])},[]);return y.jsxs("div",{className:$t("space-y-4 p-4 w-80",e),children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(En,{htmlFor:"popover-temperature",className:"text-xs",children:["Temperature (",g.toFixed(2),")"]}),y.jsx($f,{id:"popover-temperature",min:0,max:1,step:.01,value:[g],onValueChange:N=>D(v,N),onValueCommit:N=>O(n,N)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(En,{htmlFor:"popover-top-p",className:"text-xs",children:["Top P (",b.toFixed(2),")"]}),y.jsx($f,{id:"popover-top-p",min:0,max:1,step:.01,value:[b],onValueChange:N=>D(_,N),onValueCommit:N=>O(a,N)})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(En,{htmlFor:"popover-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(Qn,{id:"popover-max-tokens",type:"number",placeholder:"Default",value:i??"",onChange:N=>k(o,N),min:"1",className:"h-8 text-xs"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(En,{htmlFor:"popover-top-k",className:"text-xs",children:"Top K"}),y.jsx(Qn,{id:"popover-top-k",type:"number",placeholder:"Default",value:s??"",onChange:N=>k(u,N),min:"1",className:"h-8 text-xs"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(En,{htmlFor:"popover-presence-penalty",className:"text-xs",children:["Presence Penalty (",x.toFixed(2),")"]}),y.jsx($f,{id:"popover-presence-penalty",min:-2,max:2,step:.01,value:[x],onValueChange:N=>D(S,N),onValueCommit:N=>O(f,N)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(En,{htmlFor:"popover-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",E.toFixed(2),")"]}),y.jsx($f,{id:"popover-frequency-penalty",min:-2,max:2,step:.01,value:[E],onValueChange:N=>D(C,N),onValueCommit:N=>O(p,N)})]})]})},wbe=()=>{const e=Oa(u=>u.registerPromptControl),{enableAdvancedSettings:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s}=Br(In(u=>({enableAdvancedSettings:u.enableAdvancedSettings,temperature:u.temperature,maxTokens:u.maxTokens,topP:u.topP,topK:u.topK,presencePenalty:u.presencePenalty,frequencyPenalty:u.frequencyPenalty})));return vt.useEffect(()=>e({id:"core-parameter-control",triggerRenderer:()=>y.jsxs(N1,{children:[y.jsx(I1,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Adjust AI Parameters",children:y.jsx(EZ,{className:"h-5 w-5"})})}),y.jsx(O1,{className:"w-auto p-0",side:"top",align:"end",children:y.jsx(vbe,{})})]}),show:()=>t,getParameters:()=>{const f=Br.getState(),h={};return f.temperature!==.7&&(h.temperature=f.temperature),f.maxTokens!==null&&(h.max_tokens=f.maxTokens),f.topP!==null&&(h.top_p=f.topP),f.topK!==null&&(h.top_k=f.topK),f.presencePenalty!==0&&(h.presence_penalty=f.presencePenalty),f.frequencyPenalty!==0&&(h.frequency_penalty=f.frequencyPenalty),Object.keys(h).length>0?h:void 0},order:20}),[e,t,n,r,a,i,o,s]),null},P9=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],_be=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{if(typeof r.result=="string"){const a=r.result.split(",")[1];a?t(a):n(new Error("Failed to extract base64 content from data URL."))}else n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsDataURL(e)}),xbe=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?t(r.result):n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsText(e)}),Sbe=()=>{const e=Oa(i=>i.registerPromptControl),t=iv(i=>i.addAttachedFile),n=R.useRef(null),r=R.useCallback(()=>{var i;(i=n.current)==null||i.click()},[]),a=R.useCallback(async i=>{const o=i.target.files;if(o){const s=Array.from(o).map(async u=>{try{const c=u.type||"application/octet-stream",f=u.name.toLowerCase();if(c.startsWith("text/")||c==="application/json"||P9.some(p=>f.endsWith(p))){const p=await xbe(u);t({source:"direct",name:u.name,type:c,size:u.size,contentText:p})}else{const p=await _be(u);t({source:"direct",name:u.name,type:c,size:u.size,contentBase64:p})}}catch(c){console.error(`Error reading file ${u.name}:`,c),ot.error(`Failed to read file "${u.name}": ${c instanceof Error?c.message:"Unknown error"}`)}});await Promise.all(s),i.target&&(i.target.value="")}},[t]);return vt.useEffect(()=>e({id:"core-file-control",triggerRenderer:()=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",multiple:!0}),y.jsx(Pt,{type:"button",variant:"ghost",size:"icon",onClick:r,className:"h-10 w-10 rounded-full","aria-label":"Attach file(s)",children:y.jsx(fZ,{className:"h-5 w-5"})})]}),show:()=>!0,order:30}),[e,t,r,a]),null},Ebe=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Gi,{className:"bg-muted/30",children:[y.jsx(cr,{className:"px-2 py-1"}),y.jsx(cr,{className:"px-2 py-1",children:y.jsx(uw,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(cr,{className:"py-1 px-2",colSpan:3,children:y.jsx(Qn,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(cr,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(xo,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"top",children:"Create (Enter)"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(ql,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var D1="Checkbox",[Cbe,k1e]=Ni(D1),[kbe,Abe]=Cbe(D1),F9=R.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[p,g]=R.useState(null),v=_n(t,C=>g(C)),b=R.useRef(!1),_=p?f||!!p.closest("form"):!0,[x,S]=Bs({prop:a,defaultProp:i??!1,onChange:c,caller:D1}),E=R.useRef(x);return R.useEffect(()=>{const C=p==null?void 0:p.form;if(C){const k=()=>S(E.current);return C.addEventListener("reset",k),()=>C.removeEventListener("reset",k)}},[p,S]),y.jsxs(kbe,{scope:n,state:x,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"checkbox","aria-checked":$u(x)?"mixed":x,"aria-required":o,"data-state":z9(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onKeyDown:Bt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Bt(e.onClick,C=>{S(k=>$u(k)?!0:!k),_&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),_&&y.jsx(B9,{control:p,bubbles:!b.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"},defaultChecked:$u(i)?!1:i})]})});F9.displayName=D1;var L9="CheckboxIndicator",$9=R.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Abe(L9,n);return y.jsx(Da,{present:r||$u(i.state)||i.state===!0,children:y.jsx(Jt.span,{"data-state":z9(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});$9.displayName=L9;var Tbe="CheckboxBubbleInput",B9=R.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=R.useRef(null),u=_n(s,o),c=m1(n),f=yw(t);R.useEffect(()=>{const p=s.current;if(!p)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&b){const _=new Event("click",{bubbles:r});p.indeterminate=$u(n),b.call(p,$u(n)?!1:n),p.dispatchEvent(_)}},[c,n,r]);const h=R.useRef($u(n)?!1:n);return y.jsx(Jt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});B9.displayName=Tbe;function $u(e){return e==="indeterminate"}function z9(e){return $u(e)?"indeterminate":e?"checked":"unchecked"}var Rbe=F9,Nbe=$9;function Ibe({className:e,...t}){return y.jsx(Rbe,{"data-slot":"checkbox",className:$t("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Nbe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(xo,{className:"size-3.5"})})})}var dC=["Enter"," "],Obe=["ArrowDown","PageUp","Home"],U9=["ArrowUp","PageDown","End"],Dbe=[...Obe,...U9],jbe={ltr:[...dC,"ArrowRight"],rtl:[...dC,"ArrowLeft"]},Mbe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},kg="Menu",[R0,Pbe,Fbe]=f1(kg),[Id,q9]=Ni(kg,[Fbe,lc,h1]),j1=lc(),H9=h1(),[Lbe,Od]=Id(kg),[$be,Ag]=Id(kg),V9=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=j1(t),[u,c]=R.useState(null),f=R.useRef(!1),h=Ta(i),p=Uh(a);return R.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),y.jsx(bw,{...s,children:y.jsx(Lbe,{scope:t,open:n,onOpenChange:h,content:u,onContentChange:c,children:y.jsx($be,{scope:t,onClose:R.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:p,modal:o,children:r})})})};V9.displayName=kg;var Bbe="MenuAnchor",AA=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=j1(n);return y.jsx(P0,{...a,...r,ref:t})});AA.displayName=Bbe;var TA="MenuPortal",[zbe,G9]=Id(TA,{forceMount:void 0}),W9=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Od(TA,t);return y.jsx(zbe,{scope:t,forceMount:n,children:y.jsx(Da,{present:n||i.open,children:y.jsx(kh,{asChild:!0,container:a,children:r})})})};W9.displayName=TA;var _o="MenuContent",[Ube,RA]=Id(_o),K9=R.forwardRef((e,t)=>{const n=G9(_o,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Od(_o,e.__scopeMenu),o=Ag(_o,e.__scopeMenu);return y.jsx(R0.Provider,{scope:e.__scopeMenu,children:y.jsx(Da,{present:r||i.open,children:y.jsx(R0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(qbe,{...a,ref:t}):y.jsx(Hbe,{...a,ref:t})})})})}),qbe=R.forwardRef((e,t)=>{const n=Od(_o,e.__scopeMenu),r=R.useRef(null),a=_n(t,r);return R.useEffect(()=>{const i=r.current;if(i)return a1(i)},[]),y.jsx(NA,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Bt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Hbe=R.forwardRef((e,t)=>{const n=Od(_o,e.__scopeMenu);return y.jsx(NA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Vbe=zu("MenuContent.ScrollLock"),NA=R.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...b}=e,_=Od(_o,n),x=Ag(_o,n),S=j1(n),E=H9(n),C=Pbe(n),[k,D]=R.useState(null),O=R.useRef(null),N=_n(t,O,_.onContentChange),z=R.useRef(0),H=R.useRef(""),X=R.useRef(0),F=R.useRef(null),Z=R.useRef("right"),L=R.useRef(0),de=v?vg:R.Fragment,ae=v?{as:Vbe,allowPinchZoom:!0}:void 0,ne=se=>{var Pe,Ae;const W=H.current+se,J=C().filter(Te=>!Te.disabled),Y=document.activeElement,re=(Pe=J.find(Te=>Te.ref.current===Y))==null?void 0:Pe.textValue,be=J.map(Te=>Te.textValue),we=rve(be,W,re),Me=(Ae=J.find(Te=>Te.textValue===we))==null?void 0:Ae.ref.current;(function Te(qe){H.current=qe,window.clearTimeout(z.current),qe!==""&&(z.current=window.setTimeout(()=>Te(""),1e3))})(W),Me&&setTimeout(()=>Me.focus())};R.useEffect(()=>()=>window.clearTimeout(z.current),[]),n1();const ee=R.useCallback(se=>{var J,Y;return Z.current===((J=F.current)==null?void 0:J.side)&&ive(se,(Y=F.current)==null?void 0:Y.area)},[]);return y.jsx(Ube,{scope:n,searchRef:H,onItemEnter:R.useCallback(se=>{ee(se)&&se.preventDefault()},[ee]),onItemLeave:R.useCallback(se=>{var W;ee(se)||((W=O.current)==null||W.focus(),D(null))},[ee]),onTriggerLeave:R.useCallback(se=>{ee(se)&&se.preventDefault()},[ee]),pointerGraceTimerRef:X,onPointerGraceIntentChange:R.useCallback(se=>{F.current=se},[]),children:y.jsx(de,{...ae,children:y.jsx(bg,{asChild:!0,trapped:a,onMountAutoFocus:Bt(i,se=>{var W;se.preventDefault(),(W=O.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(Sh,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:g,children:y.jsx(FL,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:D,onEntryFocus:Bt(u,se=>{x.isUsingKeyboardRef.current||se.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(vw,{role:"menu","aria-orientation":"vertical","data-state":cB(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...b,ref:N,style:{outline:"none",...b.style},onKeyDown:Bt(b.onKeyDown,se=>{const J=se.target.closest("[data-radix-menu-content]")===se.currentTarget,Y=se.ctrlKey||se.altKey||se.metaKey,re=se.key.length===1;J&&(se.key==="Tab"&&se.preventDefault(),!Y&&re&&ne(se.key));const be=O.current;if(se.target!==be||!Dbe.includes(se.key))return;se.preventDefault();const Me=C().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);U9.includes(se.key)&&Me.reverse(),tve(Me)}),onBlur:Bt(e.onBlur,se=>{se.currentTarget.contains(se.target)||(window.clearTimeout(z.current),H.current="")}),onPointerMove:Bt(e.onPointerMove,N0(se=>{const W=se.target,J=L.current!==se.clientX;if(se.currentTarget.contains(W)&&J){const Y=se.clientX>L.current?"right":"left";Z.current=Y,L.current=se.clientX}}))})})})})})})});K9.displayName=_o;var Gbe="MenuGroup",IA=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"group",...r,ref:t})});IA.displayName=Gbe;var Wbe="MenuLabel",Z9=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{...r,ref:t})});Z9.displayName=Wbe;var Wv="MenuItem",gO="menu.itemSelect",M1=R.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=R.useRef(null),o=Ag(Wv,e.__scopeMenu),s=RA(Wv,e.__scopeMenu),u=_n(t,i),c=R.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(gO,{bubbles:!0,cancelable:!0});h.addEventListener(gO,g=>r==null?void 0:r(g),{once:!0}),v8(h,p),p.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx(Y9,{...a,ref:u,disabled:n,onClick:Bt(e.onClick,f),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),c.current=!0},onPointerUp:Bt(e.onPointerUp,h=>{var p;c.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:Bt(e.onKeyDown,h=>{const p=s.searchRef.current!=="";n||p&&h.key===" "||dC.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});M1.displayName=Wv;var Y9=R.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=RA(Wv,n),s=H9(n),u=R.useRef(null),c=_n(t,u),[f,h]=R.useState(!1),[p,g]=R.useState("");return R.useEffect(()=>{const v=u.current;v&&g((v.textContent??"").trim())},[i.children]),y.jsx(R0.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:y.jsx(LL,{asChild:!0,...s,focusable:!r,children:y.jsx(Jt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Bt(e.onPointerMove,N0(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Bt(e.onPointerLeave,N0(v=>o.onItemLeave(v))),onFocus:Bt(e.onFocus,()=>h(!0)),onBlur:Bt(e.onBlur,()=>h(!1))})})})}),Kbe="MenuCheckboxItem",X9=R.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(nB,{scope:e.__scopeMenu,checked:n,children:y.jsx(M1,{role:"menuitemcheckbox","aria-checked":Kv(n)?"mixed":n,...a,ref:t,"data-state":DA(n),onSelect:Bt(a.onSelect,()=>r==null?void 0:r(Kv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});X9.displayName=Kbe;var J9="MenuRadioGroup",[Zbe,Ybe]=Id(J9,{value:void 0,onValueChange:()=>{}}),Q9=R.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ta(r);return y.jsx(Zbe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(IA,{...a,ref:t})})});Q9.displayName=J9;var eB="MenuRadioItem",tB=R.forwardRef((e,t)=>{const{value:n,...r}=e,a=Ybe(eB,e.__scopeMenu),i=n===a.value;return y.jsx(nB,{scope:e.__scopeMenu,checked:i,children:y.jsx(M1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":DA(i),onSelect:Bt(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});tB.displayName=eB;var OA="MenuItemIndicator",[nB,Xbe]=Id(OA,{checked:!1}),rB=R.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=Xbe(OA,n);return y.jsx(Da,{present:r||Kv(i.checked)||i.checked===!0,children:y.jsx(Jt.span,{...a,ref:t,"data-state":DA(i.checked)})})});rB.displayName=OA;var Jbe="MenuSeparator",aB=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});aB.displayName=Jbe;var Qbe="MenuArrow",iB=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=j1(n);return y.jsx(ww,{...a,...r,ref:t})});iB.displayName=Qbe;var eve="MenuSub",[A1e,oB]=Id(eve),ym="MenuSubTrigger",sB=R.forwardRef((e,t)=>{const n=Od(ym,e.__scopeMenu),r=Ag(ym,e.__scopeMenu),a=oB(ym,e.__scopeMenu),i=RA(ym,e.__scopeMenu),o=R.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:u}=i,c={__scopeMenu:e.__scopeMenu},f=R.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return R.useEffect(()=>f,[f]),R.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),u(null)}},[s,u]),y.jsx(AA,{asChild:!0,...c,children:y.jsx(Y9,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":cB(n.open),...e,ref:Bu(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Bt(e.onPointerMove,N0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Bt(e.onPointerLeave,N0(h=>{var g,v;f();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const b=(v=n.content)==null?void 0:v.dataset.side,_=b==="right",x=_?-5:5,S=p[_?"left":"right"],E=p[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:S,y:p.bottom}],side:b}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Bt(e.onKeyDown,h=>{var g;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||jbe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});sB.displayName=ym;var lB="MenuSubContent",uB=R.forwardRef((e,t)=>{const n=G9(_o,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Od(_o,e.__scopeMenu),o=Ag(_o,e.__scopeMenu),s=oB(lB,e.__scopeMenu),u=R.useRef(null),c=_n(t,u);return y.jsx(R0.Provider,{scope:e.__scopeMenu,children:y.jsx(Da,{present:r||i.open,children:y.jsx(R0.Slot,{scope:e.__scopeMenu,children:y.jsx(NA,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=u.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Bt(e.onFocusOutside,f=>{f.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Bt(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Bt(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),p=Mbe[o.dir].includes(f.key);h&&p&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),f.preventDefault())})})})})})});uB.displayName=lB;function cB(e){return e?"open":"closed"}function Kv(e){return e==="indeterminate"}function DA(e){return Kv(e)?"indeterminate":e?"checked":"unchecked"}function tve(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function nve(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function rve(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=nve(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function ave(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,p=u.y;f>r!=p>r&&n<(h-c)*(r-f)/(p-f)+c&&(a=!a)}return a}function ive(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return ave(n,t)}function N0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var ove=V9,sve=AA,lve=W9,uve=K9,cve=IA,dve=Z9,fve=M1,hve=X9,pve=Q9,mve=tB,gve=rB,yve=aB,bve=iB,vve=sB,wve=uB,jA="ContextMenu",[_ve,T1e]=Ni(jA,[q9]),yi=q9(),[xve,dB]=_ve(jA),fB=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=R.useState(!1),u=yi(t),c=Ta(r),f=R.useCallback(h=>{s(h),c(h)},[c]);return y.jsx(xve,{scope:t,open:o,onOpenChange:f,modal:i,children:y.jsx(ove,{...u,dir:a,open:o,onOpenChange:f,modal:i,children:n})})};fB.displayName=jA;var hB="ContextMenuTrigger",pB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=dB(hB,n),o=yi(n),s=R.useRef({x:0,y:0}),u=R.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),c=R.useRef(0),f=R.useCallback(()=>window.clearTimeout(c.current),[]),h=p=>{s.current={x:p.clientX,y:p.clientY},i.onOpenChange(!0)};return R.useEffect(()=>f,[f]),R.useEffect(()=>void(r&&f()),[r,f]),y.jsxs(y.Fragment,{children:[y.jsx(sve,{...o,virtualRef:u}),y.jsx(Jt.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Bt(e.onContextMenu,p=>{f(),h(p),p.preventDefault()}),onPointerDown:r?e.onPointerDown:Bt(e.onPointerDown,bb(p=>{f(),c.current=window.setTimeout(()=>h(p),700)})),onPointerMove:r?e.onPointerMove:Bt(e.onPointerMove,bb(f)),onPointerCancel:r?e.onPointerCancel:Bt(e.onPointerCancel,bb(f)),onPointerUp:r?e.onPointerUp:Bt(e.onPointerUp,bb(f))})]})});pB.displayName=hB;var Sve="ContextMenuPortal",mB=e=>{const{__scopeContextMenu:t,...n}=e,r=yi(t);return y.jsx(lve,{...r,...n})};mB.displayName=Sve;var gB="ContextMenuContent",yB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=dB(gB,n),i=yi(n),o=R.useRef(!1);return y.jsx(uve,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var u;(u=e.onCloseAutoFocus)==null||u.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var u;(u=e.onInteractOutside)==null||u.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});yB.displayName=gB;var Eve="ContextMenuGroup",Cve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(cve,{...a,...r,ref:t})});Cve.displayName=Eve;var kve="ContextMenuLabel",Ave=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(dve,{...a,...r,ref:t})});Ave.displayName=kve;var Tve="ContextMenuItem",bB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(fve,{...a,...r,ref:t})});bB.displayName=Tve;var Rve="ContextMenuCheckboxItem",Nve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(hve,{...a,...r,ref:t})});Nve.displayName=Rve;var Ive="ContextMenuRadioGroup",Ove=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(pve,{...a,...r,ref:t})});Ove.displayName=Ive;var Dve="ContextMenuRadioItem",jve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(mve,{...a,...r,ref:t})});jve.displayName=Dve;var Mve="ContextMenuItemIndicator",Pve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(gve,{...a,...r,ref:t})});Pve.displayName=Mve;var Fve="ContextMenuSeparator",vB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(yve,{...a,...r,ref:t})});vB.displayName=Fve;var Lve="ContextMenuArrow",$ve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(bve,{...a,...r,ref:t})});$ve.displayName=Lve;var Bve="ContextMenuSubTrigger",zve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(vve,{...a,...r,ref:t})});zve.displayName=Bve;var Uve="ContextMenuSubContent",qve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=yi(n);return y.jsx(wve,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qve.displayName=Uve;function bb(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Hve=fB,Vve=pB,Gve=mB,Wve=yB,Kve=bB,Zve=vB;function Yve({...e}){return y.jsx(Hve,{"data-slot":"context-menu",...e})}function Xve({...e}){return y.jsx(Vve,{"data-slot":"context-menu-trigger",...e})}function Jve({className:e,...t}){return y.jsx(Gve,{children:y.jsx(Wve,{"data-slot":"context-menu-content",className:$t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function bl({className:e,inset:t,variant:n="default",...r}){return y.jsx(Kve,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:$t("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function yO({className:e,...t}){return y.jsx(Zve,{"data-slot":"context-menu-separator",className:$t("bg-border -mx-1 my-1 h-px",e),...t})}const Qve=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:p,handleDelete:g,setNewName:v,renameInputRef:b,handleGitInit:_,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const k=X=>{X.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||!t&&!i&&s(e)},D=X=>{X.key==="Enter"?h():X.key==="Escape"&&f()},O=e.type==="folder",N=O?r?DK:uw:IK,z=O?r?"text-green-400":"text-yellow-400":"text-blue-400",H=y.jsxs(Gi,{className:$t("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed"),onClick:k,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(cr,{className:"px-2 py-1",children:y.jsx(Ibe,{checked:n,onCheckedChange:X=>u(!!X,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||O})}),y.jsx(cr,{className:"px-2 py-1",children:y.jsx(N,{className:$t("h-5 w-5",z)})}),y.jsx(cr,{className:"py-1 px-2",children:t?y.jsx(Qn,{ref:b,value:a,onChange:X=>v(X.target.value),onBlur:h,onKeyDown:D,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:X=>X.stopPropagation(),disabled:i}):y.jsx("span",{className:$t("truncate",O&&"cursor-pointer hover:underline"),title:e.name,onClick:X=>{O&&(X.stopPropagation(),s(e))},children:e.name})}),y.jsx(cr,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?qm(e.size):""}),y.jsx(cr,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(cr,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:$t("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:X=>{X.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),children:i?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(xo,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"top",children:"Save (Enter)"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:X=>{X.stopPropagation(),f()},"aria-label":"Cancel edit",disabled:i,children:y.jsx(ql,{className:"h-4 w-4"})})}),y.jsx(Tn,{side:"top",children:"Cancel (Esc)"})]})})]}):y.jsxs(y.Fragment,{children:[y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:X=>{X.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||o,children:y.jsx(bE,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:"Rename"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:X=>{X.stopPropagation(),p(e)},"aria-label":O?"Download folder as ZIP":"Download file",disabled:i,children:y.jsx(rv,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:O?"Download folder (.zip)":"Download file"})]})}),y.jsx(Sn,{delayDuration:100,children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:X=>{X.stopPropagation(),g(e)},"aria-label":`Delete ${O?"folder":"file"}`,disabled:i,children:y.jsx(Zu,{className:"h-3.5 w-3.5"})})}),y.jsx(Tn,{side:"top",children:"Delete"})]})})]})})})]},e.id);return O?y.jsxs(Yve,{children:[y.jsx(Xve,{disabled:t||i,asChild:!0,children:H}),y.jsxs(Jve,{children:[y.jsx(bl,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx(yO,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(bl,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(qK,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(bl,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(g8,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(bl,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(y8,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(bl,{onSelect:()=>C(e.path),disabled:i,children:[y.jsx(b8,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(bl,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(Um,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx(yO,{}),y.jsxs(bl,{onSelect:()=>c(e),disabled:i,children:[y.jsx(bE,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(bl,{onSelect:()=>p(e),disabled:i,children:[y.jsx(rv,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(bl,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(Zu,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):H},ewe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,cancelCreatingFolder:p,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:_,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:D,handleGitCommit:O,handleGitPush:N,handleGitStatus:z})=>{const H=R.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx(yg,{className:"flex-grow h-0 border-t border-border",children:y.jsxs(_1,{className:"w-full text-sm",children:[y.jsx(x1,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Gi,{className:"hover:bg-card",children:[y.jsx(na,{className:"w-[40px] px-2"}),y.jsx(na,{className:"w-[40px] px-2"}),y.jsx(na,{children:"Name"}),y.jsx(na,{className:"w-[100px] text-right",children:"Size"}),y.jsx(na,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(na,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs(S1,{children:[r&&y.jsx(Ebe,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:p,newFolderInputRef:E,isOperationLoading:o}),H.map(X=>{const F=t===X.path,Z=i.has(X.id),L=C[X.path]??!1;return y.jsx(Qve,{entry:X,isEditingThis:F,isChecked:Z,isGitRepo:L,newName:F?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:v,handleDelete:b,setNewName:_,renameInputRef:S,handleGitInit:k,handleGitPull:D,handleGitCommit:O,handleGitPush:N,handleGitStatus:z},X.id)}),e.length===0&&!r&&!o&&y.jsx(Gi,{children:y.jsx(cr,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},twe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:u,startCreatingFolder:c,handleUploadClick:f,handleFolderUploadClick:h,handleArchiveUploadClick:p,handleDownloadAll:g,handleCloneClick:v,fileInputRef:b,folderInputRef:_,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:b,onChange:S,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Pt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(KK,{className:"h-4 w-4"})}),y.jsx(Pt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(LK,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(Pt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(dw,{className:"h-4 w-4"})}),y.jsxs(Pt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(OC,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Pt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),f()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(p8,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(Pt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(uw,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Pt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),p()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(SK,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(Pt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Um,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(Pt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(tK,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),nwe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:u})=>y.jsx(o1,{open:e,onOpenChange:t,children:y.jsxs(s1,{children:[y.jsxs(l1,{children:[y.jsx(c1,{children:"Clone Git Repository"}),y.jsxs(d1,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:u}),"."]})]}),y.jsxs("div",{className:"grid gap-4 py-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(En,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(Qn,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(En,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(Qn,{id:"clone-branch",value:a,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]}),y.jsxs(u1,{children:[y.jsx(Pt,{variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),y.jsx(Pt,{onClick:s,disabled:o||!n.trim(),children:o?y.jsxs(y.Fragment,{children:[y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}),"Cloning..."]}):"Clone"})]})]})}),rwe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(o1,{open:e,onOpenChange:t,children:y.jsxs(s1,{children:[y.jsxs(l1,{children:[y.jsx(c1,{children:"Commit Changes"}),y.jsxs(d1,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]})]}),y.jsx("div",{className:"grid gap-4 py-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(En,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(Qn,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})}),y.jsxs(u1,{children:[y.jsx(Pt,{variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),y.jsx(Pt,{onClick:o,disabled:i||!r.trim(),children:i?y.jsxs(y.Fragment,{children:[y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}),"Committing..."]}):"Commit"})]})]})}),wB=R.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,error:a,fetchNodes:i,createDirectory:o,uploadFiles:s,deleteNodes:u,renameNode:c,setCurrentPath:f,initializeVFS:h,rootId:p,fs:g,_setError:v,selectFile:b,deselectFile:_,selectedFileIds:x}=Lo(In(fe=>({nodes:fe.nodes,childrenMap:fe.childrenMap,currentParentId:fe.currentParentId,selectedFileIds:fe.selectedFileIds,loading:fe.loading,error:fe.error,fetchNodes:fe.fetchNodes,createDirectory:fe.createDirectory,uploadFiles:fe.uploadFiles,deleteNodes:fe.deleteNodes,renameNode:fe.renameNode,selectFile:fe.selectFile,deselectFile:fe.deselectFile,setCurrentPath:fe.setCurrentPath,initializeVFS:fe.initializeVFS,rootId:fe.rootId,fs:fe.fs,_setOperationLoading:fe._setOperationLoading,_setError:fe._setError,_addNodes:fe._addNodes,_removeNodes:fe._removeNodes}))),[S,E]=R.useState(""),[C,k]=R.useState(null),[D,O]=R.useState(!1),[N,z]=R.useState(""),[H,X]=R.useState(!1),[F,Z]=R.useState({}),[L,de]=R.useState(!1),[ae,ne]=R.useState(""),[ee,se]=R.useState(""),[W,J]=R.useState(!1),[Y,re]=R.useState(!1),[be,we]=R.useState(null),[Me,Pe]=R.useState(""),[Ae,Te]=R.useState(!1),[qe,it]=R.useState({}),Ie=R.useRef(null),Re=R.useRef(null),U=R.useRef(null),Ce=R.useRef(null),Ne=R.useRef(null),ce=n?e[n]:null,ie=ce?ce.path:"/",xe=(t[n||p||""]||[]).map(fe=>e[fe]).filter(fe=>!!fe).sort((fe,Fe)=>fe.type==="folder"&&Fe.type==="file"?-1:fe.type==="file"&&Fe.type==="folder"?1:fe.name.localeCompare(Fe.name)),Le=R.useMemo(()=>xe.filter(fe=>fe.type==="folder").map(fe=>fe.path),[xe]),Se=r||H||W||Ae;R.useEffect(()=>{!p&&!r&&h("default_vfs_key")},[p,h,r]),R.useEffect(()=>{n!==null&&!t[n]&&!r&&g?i(n):n===null&&p&&!t[p]&&!r&&g&&i(p)},[n,i,t,p,r,g]),R.useEffect(()=>{var fe,Fe;C&&((fe=Ce.current)==null||fe.focus(),(Fe=Ce.current)==null||Fe.select())},[C]),R.useEffect(()=>{var fe;D&&((fe=Ne.current)==null||fe.focus())},[D]),R.useEffect(()=>{(async()=>{if(!g||Le.length===0)return;const Fe={};let st=!1;for(const Dt of Le)try{const un=await Lse(Dt);F[Dt]!==un&&(Fe[Dt]=un,st=!0)}catch(un){console.error(`Error checking git status for ${Dt}:`,un),F[Dt]!==!1&&(Fe[Dt]=!1,st=!0)}st&&Z(Dt=>({...Dt,...Fe}))})()},[Le,g,F]);const Ve=R.useCallback(async(fe,Fe=!0)=>{if(!Se){Fe&&X(!0),v(null);try{await fe()}catch(st){console.error("[FileManager Operation Error]:",st)}finally{Fe&&X(!1)}}},[Se,v]),xt=R.useCallback(fe=>{Se||C||fe.type==="folder"&&Ve(()=>f(fe.path),!1)},[Se,C,f,Ve]),ht=R.useCallback(()=>{if(Se||ie==="/")return;const fe=hw(ie);Ve(()=>f(fe),!1)},[Se,ie,f,Ve]),Et=R.useCallback(()=>{Se||ie==="/"||Ve(()=>f("/"),!1)},[Se,ie,f,Ve]),Ft=R.useCallback(()=>{Ve(()=>i(n))},[Ve,i,n]),Tt=R.useCallback((fe,Fe)=>{const st=e[Fe];st&&st.type==="file"?fe?b(Fe):_(Fe):st&&st.type==="folder"&&ot.info("Folders cannot be attached to the prompt.")},[b,_,e]),Ut=R.useCallback(fe=>{Se||D||(k(fe.path),E(fe.name),O(!1))},[Se,D]),ge=R.useCallback(()=>{k(null),E("")},[]),I=R.useCallback(async()=>{if(!C||!S.trim()){ge();return}const fe=Object.values(e).find(Fe=>Fe.path===C);fe&&fe.name!==S.trim()&&await Ve(()=>c(fe.id,S.trim())),ge()},[C,S,c,ge,e,Ve]),V=R.useCallback(()=>{Se||C||(O(!0),z(""),k(null))},[Se,C]),he=R.useCallback(()=>{O(!1),z("")},[]),Oe=R.useCallback(async()=>{if(!N.trim()){he();return}await Ve(()=>o(n,N.trim())),he()},[N,o,n,he,Ve]),ve=()=>{var fe;return(fe=Ie.current)==null?void 0:fe.click()},ke=()=>{var fe;return(fe=Re.current)==null?void 0:fe.click()},le=()=>{var fe;return(fe=U.current)==null?void 0:fe.click()},dt=R.useCallback(async fe=>{const Fe=fe.target.files;Fe&&Fe.length>0&&(await Ve(()=>s(n,Fe)),fe.target&&(fe.target.value=""))},[s,n,Ve]),yt=R.useCallback(async fe=>{var st;const Fe=(st=fe.target.files)==null?void 0:st[0];Fe&&(await Ve(async()=>{await zse(Fe,ie),await i(n)}),fe.target&&(fe.target.value=""))},[ie,i,n,Ve]),M=R.useCallback(async fe=>{window.confirm(`Delete ${fe.type} "${fe.name}"?${fe.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ve(()=>u([fe.id]))},[u,Ve]),Be=R.useCallback(async fe=>{await Ve(async()=>{fe.type==="file"?await Bse(fe.path):await f6(`${fe.name}.zip`,fe.path)})},[Ve]),et=R.useCallback(async()=>{xe.length!==0&&await Ve(async()=>{const fe=ca(ie)||"root";await f6(`${fe}_export.zip`,ie)})},[ie,xe.length,Ve]),me=R.useCallback(async(fe,Fe)=>{if(!qe[fe]){it(st=>({...st,[fe]:!0})),v(null);try{await Fe()}catch(st){console.error(`[FileManager Git Op Error @ ${fe}]:`,st)}finally{it(st=>({...st,[fe]:!1}))}}},[v,qe]),De=R.useCallback(fe=>{me(fe,async()=>{await AP(fe),Z(Fe=>({...Fe,[fe]:!0}))})},[me]),Ke=R.useCallback(fe=>{me(fe,()=>Ww(fe,"main"))},[me]),Ct=R.useCallback(fe=>{we(fe),Pe(""),re(!0)},[]),ye=R.useCallback(fe=>{me(fe,()=>Kk(fe,"main"))},[me]),q=R.useCallback(fe=>{me(fe,()=>TP(fe))},[me]),B=R.useCallback(()=>{ne(""),se(""),de(!0)},[]),G=R.useCallback(async()=>{if(!ae.trim()){ot.error("Repository URL cannot be empty.");return}J(!0),v(null);try{await kP(ie,ae.trim(),ee.trim()||void 0),de(!1),await Ft()}catch{}finally{J(!1)}},[ae,ee,ie,v,Ft]),pe=R.useCallback(async()=>{if(!be||!Me.trim()){ot.error("Commit message cannot be empty.");return}Te(!0),v(null);try{await Wk(be,Me.trim()),re(!1)}catch{}finally{Te(!1)}},[be,Me,v]);return y.jsxs("div",{className:"flex h-full flex-col bg-card text-card-foreground rounded-lg border border-border shadow-sm overflow-hidden",children:[y.jsx(twe,{currentPath:ie,isAnyLoading:Se,isOperationLoading:H,entries:xe,editingPath:C,creatingFolder:D,handleNavigateHome:Et,handleNavigateUp:ht,handleRefresh:Ft,startCreatingFolder:V,handleUploadClick:ve,handleFolderUploadClick:ke,handleArchiveUploadClick:le,handleDownloadAll:et,handleCloneClick:B,fileInputRef:Ie,folderInputRef:Re,archiveInputRef:U,handleFileChange:dt,handleArchiveChange:yt}),a&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-xs text-center flex-shrink-0",children:["Error: ",a]}),y.jsx(ewe,{entries:xe,editingPath:C,newName:S,creatingFolder:D,newFolderName:N,selectedFileIds:x,isOperationLoading:H||Object.values(qe).some(Boolean),handleNavigate:xt,handleCheckboxChange:Tt,startEditing:Ut,cancelEditing:ge,handleRename:I,cancelCreatingFolder:he,handleCreateFolder:Oe,handleDownload:Be,handleDelete:M,setNewName:E,setNewFolderName:z,renameInputRef:Ce,newFolderInputRef:Ne,gitRepoStatus:F,handleGitInit:De,handleGitPull:Ke,handleGitCommit:Ct,handleGitPush:ye,handleGitStatus:q}),y.jsx(nwe,{isOpen:L,onOpenChange:de,cloneRepoUrl:ae,setCloneRepoUrl:ne,cloneBranch:ee,setCloneBranch:se,isCloning:W,onSubmitClone:G,currentPath:ie}),y.jsx(rwe,{isOpen:Y,onOpenChange:re,commitPath:be,commitMessage:Me,setCommitMessage:Pe,isCommitting:Ae,onSubmitCommit:pe})]})});wB.displayName="FileManager";const awe="core-vfs-control",iwe=e=>{let t="";const n=new Uint8Array(e),r=n.byteLength;for(let a=0;a<r;a++)t+=String.fromCharCode(n[a]);return btoa(t)},owe=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:P9.some(r=>n.endsWith(r))},swe=()=>{const[e,t]=R.useState(!1),[n,r]=R.useState(!1),{nodes:a,selectedFileIds:i,clearSelection:o,uploadFiles:s}=Lo(In(S=>({nodes:S.nodes,selectedFileIds:S.selectedFileIds,clearSelection:S.clearSelection,uploadFiles:S.uploadFiles,currentParentId:S.currentParentId}))),{addAttachedFile:u,attachedFilesMetadata:c}=iv(In(S=>({addAttachedFile:S.addAttachedFile,attachedFilesMetadata:S.attachedFilesMetadata}))),f=vt.useMemo(()=>Array.from(i).map(S=>a[S]).filter(S=>!!S&&S.type==="file"),[i,a]),h=R.useCallback(async()=>{if(f.length===0||n)return;r(!0);let S=0,E=0;const C=f.map(async k=>{try{const D=await zh(k.path),O=k.mimeType||"application/octet-stream",N=owe(k.name,O),z={source:"vfs",name:k.name,type:O,size:k.size,path:k.path};N?z.contentText=new TextDecoder().decode(D):z.contentBase64=iwe(D),u(z),S++}catch(D){E++,console.error(`Failed to read VFS file ${k.path}:`,D),ot.error(`Failed to attach "${k.name}": ${D instanceof Error?D.message:"Read error"}`)}});await Promise.all(C),S>0&&ot.success(`${S} file(s) attached from VFS.`),E>0&&ot.warning(`${E} file(s) could not be attached.`),o(),r(!1),t(!1)},[f,u,o,n]),p=R.useCallback(S=>{S?t(!0):(i.size>0&&o(),t(!1))},[o,i.size]),g=Lo.getState().currentParentId,v=R.useCallback(()=>{const S=g?Lo.getState().nodes[g]:Lo.getState().nodes[Lo.getState().rootId||""];return(S==null?void 0:S.path)||"/"},[g]),b=R.useCallback(async S=>{S.preventDefault(),S.stopPropagation();const E=S.dataTransfer.files;if(E&&E.length>0)try{await s(g,E),ot.success(`${E.length} file(s) added to VFS at ${v()}. Select them in the manager.`)}catch(C){console.error("Error adding files via drop:",C),ot.error("Failed to add dropped files.")}},[s,g,v]),_=R.useCallback(S=>{S.preventDefault(),S.stopPropagation()},[]),x=c.filter(S=>S.source==="vfs").length;return y.jsxs(o1,{open:e,onOpenChange:p,children:[y.jsx(Sn,{children:y.jsxs(kn,{children:[y.jsx(An,{asChild:!0,children:y.jsx("div",{onDrop:b,onDragOver:_,className:"inline-block",children:y.jsx(kpe,{asChild:!0,children:y.jsxs(Pt,{variant:"ghost",size:"icon",className:$t("relative h-10 w-10 rounded-full",x>0&&"text-blue-500 hover:text-blue-600"),"aria-label":`Attach files from VFS (${x} selected)`,children:[y.jsx(MK,{className:"h-5 w-5"}),x>0&&y.jsx("span",{className:"absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-blue-500 text-xs text-white",children:x})]})})})}),y.jsxs(Tn,{children:[y.jsxs("p",{children:["Attach files from VFS (",x," selected)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag & drop enabled"})]})]})}),y.jsxs(s1,{className:"max-w-[1200px] h-[85vh] sm:max-w-4xl flex flex-col",children:[y.jsxs(l1,{children:[y.jsx(c1,{children:"File Manager"}),y.jsx(d1,{children:'Manage files in the virtual filesystem. Select files and click "Attach Selected" to add them to your prompt.'})]}),y.jsx("div",{className:"flex-grow overflow-hidden",children:y.jsx(wB,{})}),y.jsxs(u1,{children:[y.jsx(Tpe,{asChild:!0,children:y.jsx(Pt,{variant:"outline",onClick:()=>p(!1),children:"Cancel"})}),y.jsxs(Pt,{onClick:h,disabled:f.length===0||n,children:[n&&y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Attaching...":`Attach Selected (${f.length})`]})]})]})]})},lwe=()=>{const e=Oa(n=>n.registerPromptControl),{enableVfs:t}=Lo(In(n=>({enableVfs:n.enableVfs})));return R.useEffect(()=>e({id:awe,triggerRenderer:()=>y.jsx(swe,{}),show:()=>t,order:40}),[e,t]),null},uwe=()=>{const{selectedItemId:e,selectedItemType:t,conversations:n,syncRepos:r,conversationSyncStatus:a,linkConversationToRepo:i,syncConversation:o,loadSyncRepos:s}=Kr(In(O=>({selectedItemId:O.selectedItemId,selectedItemType:O.selectedItemType,conversations:O.conversations,syncRepos:O.syncRepos,conversationSyncStatus:O.conversationSyncStatus,linkConversationToRepo:O.linkConversationToRepo,syncConversation:O.syncConversation,loadSyncRepos:O.loadSyncRepos}))),{toggleChatControlPanel:u,setInitialSettingsTabs:c}=fi(In(O=>({toggleChatControlPanel:O.toggleChatControlPanel,setInitialSettingsTabs:O.setInitialSettingsTabs}))),[f,h]=R.useState(!1),[p,g]=R.useState(null),v=n.find(O=>O.id===e&&t==="conversation"),b=v?a[v.id]??"idle":"idle",_=(v==null?void 0:v.syncRepoId)??null,x=r.find(O=>O.id===_);R.useEffect(()=>{r.length===0&&s()},[r.length,s]),R.useEffect(()=>{f&&v&&g(v.syncRepoId??"none")},[f,v]);const S=R.useCallback(async()=>{if(!v)return;const O=p==="none"?null:p;try{await i(v.id,O),h(!1)}catch(N){console.error("Failed to link conversation:",N)}},[v,p,i]),E=R.useCallback(async()=>{if(!(!v||!_))try{await o(v.id)}catch(O){console.error("Failed to sync conversation:",O)}},[v,_,o]),C=()=>{c("git","sync"),u("settingsModal",!0),h(!1)},k=()=>{if(!v)return y.jsx(Um,{className:"h-4 w-4 text-muted-foreground/50"});if(!_)return y.jsx(AN,{className:"h-4 w-4 text-muted-foreground"});switch(b){case"syncing":return y.jsx(Gn,{className:"h-4 w-4 animate-spin text-blue-500"});case"error":return y.jsx(Ls,{className:"h-4 w-4 text-destructive"});case"needs-sync":return y.jsx(Ls,{className:"h-4 w-4 text-orange-500"});case"idle":default:return y.jsx(lw,{className:"h-4 w-4 text-green-500"})}},D=()=>{if(!v)return"Select a conversation to manage sync";if(!_)return"Link conversation to a Git repository";switch(b){case"syncing":return`Syncing with ${x==null?void 0:x.name}...`;case"error":return`Sync error with ${x==null?void 0:x.name}`;case"needs-sync":return`Needs sync with ${x==null?void 0:x.name}`;case"idle":default:return`Synced with ${x==null?void 0:x.name}`}};return y.jsxs(N1,{open:f,onOpenChange:h,children:[y.jsx(I1,{asChild:!0,children:y.jsx(Pt,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:!v,"aria-label":"Git Sync Status",title:D(),children:k()})}),y.jsxs(O1,{className:"w-64 p-3 space-y-3",children:[y.jsx(En,{className:"text-xs font-medium",children:"Conversation Sync"}),r.length===0?y.jsxs("div",{className:"text-xs text-muted-foreground text-center space-y-2",children:[y.jsx("p",{children:"No sync repositories configured."}),y.jsxs(Pt,{variant:"outline",size:"sm",className:"w-full",onClick:C,children:[y.jsx(MC,{className:"h-3 w-3 mr-1"})," Configure Repos"]})]}):y.jsxs(y.Fragment,{children:[y.jsxs(Hh,{value:p??"none",onValueChange:g,children:[y.jsx(Gh,{className:"h-8 text-xs",children:y.jsx(Vh,{placeholder:"Select Repository..."})}),y.jsxs(Wh,{children:[y.jsx(Wi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None (Unlink)"})}),r.map(O=>y.jsx(Wi,{value:O.id,children:O.name},O.id))]})]}),y.jsxs(Pt,{size:"sm",className:"w-full h-8 text-xs",onClick:S,disabled:!p||p===_,children:[p==="none"?y.jsx(AN,{className:"h-3 w-3 mr-1"}):y.jsx(tZ,{className:"h-3 w-3 mr-1"}),p==="none"?"Unlink":"Link"," Repository"]})]}),_&&y.jsxs("div",{className:"border-t pt-3 space-y-2",children:[y.jsxs(Pt,{variant:"outline",size:"sm",className:"w-full h-8 text-xs",onClick:E,disabled:b==="syncing",children:[b==="syncing"?y.jsx(Gn,{className:"h-3 w-3 mr-1 animate-spin"}):b==="needs-sync"?y.jsx(y8,{className:"h-3 w-3 mr-1"}):y.jsx(g8,{className:"h-3 w-3 mr-1"}),b==="syncing"?"Syncing...":"Sync Now"]}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:D()})]})]})]})},cwe=()=>{const e=Oa(n=>n.registerPromptControl),t=Kr(n=>n.syncRepos);R.useEffect(()=>e({id:"core-git-sync",order:50,triggerRenderer:()=>y.jsx(uwe,{}),show:()=>!0}),[e,t])};async function Qh(e){const{fs:t,initializeVFS:n,vfsKey:r}=Lo.getState();if(t)return t;console.log(`[${e}] VFS not ready. Attempting initialization with key: ${r||"default_fallback_key"}...`),ot.info(`Initializing filesystem for ${e}...`);try{await n(r||"default_fallback_key");const{fs:a}=Lo.getState();if(a)return console.log(`[${e}] VFS initialization successful.`),ot.success(`Filesystem ready for ${e}.`),a;throw new Error("VFS initialization failed after attempt.")}catch(a){return console.error(`[${e}] Failed to ensure VFS readiness:`,a),ot.error(`Filesystem unavailable for ${e}: ${a instanceof Error?a.message:String(a)}`),null}}const dwe={description:"Lists files and folders within a specified directory in the Virtual File System (VFS). Use '/' for the root directory.",parameters:$.object({path:$.string().describe("The absolute path of the directory to list (e.g., '/', '/documents', '/project/code').")})},fwe={description:"Reads the content of a specified file from the Virtual File System (VFS). Returns the content as a string.",parameters:$.object({path:$.string().describe("The absolute path of the file to read (e.g., '/documents/notes.txt', '/project/code/main.py').")})},hwe={description:"Writes or overwrites a file with the given content in the Virtual File System (VFS). Creates parent directories if they don't exist.",parameters:$.object({path:$.string().describe("The absolute path where the file should be written (e.g., '/documents/new_notes.txt', '/project/data.json')."),content:$.string().describe("The text content to write into the file.")})},pwe={description:"Creates a new directory (and any necessary parent directories) at the specified path in the Virtual File System (VFS).",parameters:$.object({path:$.string().describe("The absolute path of the directory to create (e.g., '/new_folder', '/project/assets/images').")})},mwe={description:"Deletes a file or an empty directory from the Virtual File System (VFS). Use with caution.",parameters:$.object({path:$.string().describe("The absolute path of the file or empty directory to delete (e.g., '/documents/old_notes.txt', '/temp_folder').")})},gwe={description:"Deletes a directory and ALL its contents (files and subdirectories) recursively from the Virtual File System (VFS). VERY DANGEROUS - USE WITH EXTREME CAUTION.",parameters:$.object({path:$.string().describe("The absolute path of the directory to delete recursively (e.g., '/project_to_delete', '/old_backups'). Cannot be '/'.")})},ywe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_list_directory called for path: ${e.path}`),!await Qh("vfs_list_directory"))return{status:"error",error:"Filesystem not available."};console.log("[VFS Tool Execute] VfsOps.VFS instance state:",qse);try{const r=await Zk(e.path);return{status:"success",isEmpty:r.length===0,content:r.map(a=>({name:a.name,type:a.isDirectory?"folder":"file",size:a.size,lastModified:a.lastModified.toISOString()}))}}catch(r){return{status:"error",error:`Failed to list directory: ${r.message}`}}},bwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_read_file called for path: ${e.path}`),!await Qh("vfs_read_file"))return{status:"error",error:"Filesystem not available."};try{const r=await zh(e.path);return{status:"success",content:new TextDecoder().decode(r)}}catch(r){return{status:"error",error:`Failed to read file: ${r.message}`}}},vwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_write_file called for path: ${e.path}`),!await Qh("vfs_write_file"))return{status:"error",error:"Filesystem not available."};try{return await Kw(e.path,e.content),{status:"success"}}catch(r){return{status:"error",error:`Failed to write file: ${r.message}`}}},wwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_create_directory called for path: ${e.path}`),!await Qh("vfs_create_directory"))return{status:"error",error:"Filesystem not available."};try{return await RP(e.path),{status:"success"}}catch(r){return{status:"error",error:`Failed to create directory: ${r.message}`}}},_we=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_delete called for path: ${e.path}`),!await Qh("vfs_delete"))return{status:"error",error:"Filesystem not available."};if(e.path==="/")return{status:"error",error:"Cannot delete the root directory."};try{return await Zw(e.path,!1),{status:"success"}}catch(r){return{status:"error",error:`Failed to delete item: ${r.message}`}}},xwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_delete_recursive called for path: ${e.path}`),!await Qh("vfs_delete_recursive"))return{status:"error",error:"Filesystem not available."};if(e.path==="/")return{status:"error",error:"Cannot delete the root directory."};try{return await Zw(e.path,!0),{status:"success"}}catch(r){return{status:"error",error:`Failed to delete directory recursively: ${r.message}`}}},Swe=()=>{const{registerTool:e}=Oa();R.useEffect(()=>{const t=[],n=(r,a,i)=>{const o=async(s,u)=>i(s,u);t.push(e("core",r,a,o))};return n("vfs_list_directory",dwe,ywe),n("vfs_read_file",fwe,bwe),n("vfs_write_file",hwe,vwe),n("vfs_create_directory",pwe,wwe),n("vfs_delete",mwe,_we),n("vfs_delete_recursive",gwe,xwe),()=>{console.log("[useVfsToolsRegistration] VFS tools unregistered"),t.forEach(r=>r())}},[e])},Ewe=$.object({path:$.string().describe("The directory path within the VFS to initialize as a Git repository.")}),Cwe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to commit."),message:$.string().describe("The commit message.")}),kwe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:$.string().optional().describe("The branch name to pull.")}),Awe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to push."),branch:$.string().optional().describe("The branch name to push.")}),Twe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to check status.")});function Rwe(){const e=Oa(i=>i.registerTool),{gitUserName:t,gitUserEmail:n}=Br(In(i=>({gitUserName:i.gitUserName,gitUserEmail:i.gitUserEmail}))),[r,a]=R.useState(!1);R.useEffect(()=>{if(r)return;const i=[],o={description:"Initialize an empty Git repository in a VFS directory.",parameters:Ewe};i.push(e("core","gitInit",o,async({path:h})=>{try{return await AP(h),{success:!0,message:`Repository initialized at ${h}`}}catch(p){return{success:!1,error:p.message}}}));const s={description:"Stage all changes and commit them in a VFS Git repository.",parameters:Cwe};i.push(e("core","gitCommit",s,async({path:h,message:p})=>{if(!t||!n)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await Wk(h,p),{success:!0,message:`Changes committed in ${h}`}}catch(g){return{success:!1,error:g.message}}}));const u={description:"Pull changes from the remote repository for the specified branch.",parameters:kwe};i.push(e("core","gitPull",u,async({path:h,branch:p})=>{try{return await Ww(h,p||"main"),{success:!0,message:`Pulled changes for ${h}`}}catch(g){return{success:!1,error:g.message}}}));const c={description:"Push committed changes from the local branch to the remote repository.",parameters:Awe};i.push(e("core","gitPush",c,async({path:h,branch:p})=>{try{return await Kk(h,p||"main"),{success:!0,message:`Pushed changes for ${h}`}}catch(g){return{success:!1,error:g.message}}}));const f={description:"Get the Git status for a VFS repository.",parameters:Twe};return i.push(e("core","gitStatus",f,async({path:h})=>{try{return await TP(h),{success:!0,message:`Status checked for ${h}`}}catch(p){return{success:!1,error:p.message}}})),a(!0),console.log("[Hook] Registered Core Git Tools"),()=>{i.forEach(h=>h()),a(!1),console.log("[Hook] Unregistered Core Git Tools")}},[e,r,t,n])}const Nwe=({className:e,localMaxSteps:t,setLocalMaxSteps:n})=>{const{selectedItemId:r,selectedItemType:a,getConversationById:i,updateCurrentConversationToolSettings:o}=Kr(In(E=>({selectedItemId:E.selectedItemId,selectedItemType:E.selectedItemType,getConversationById:E.getConversationById,updateCurrentConversationToolSettings:E.updateCurrentConversationToolSettings}))),s=Oa(E=>E.tools),[u,c]=R.useState(""),[f,h]=R.useState(new Set);R.useEffect(()=>{var E;if(a==="conversation"&&r){const C=i(r),k=new Set(((E=C==null?void 0:C.metadata)==null?void 0:E.enabledTools)??[]);h(k)}else h(new Set)},[r,a,i]);const p=R.useMemo(()=>Object.entries(s).map(([E,{definition:C,modId:k}])=>({name:E,description:C.description??"No description provided.",modId:k})).sort((E,C)=>E.name.localeCompare(C.name)),[s]),g=R.useMemo(()=>{const E=u.trim().toLowerCase();return E?p.filter(C=>C.name.toLowerCase().includes(E)||C.description.toLowerCase().includes(E)||C.modId.toLowerCase().includes(E)):p},[p,u]),v=R.useCallback((E,C)=>{h(D=>{const O=new Set(D);return C?O.add(E):O.delete(E),O});const k=new Set(f);C?k.add(E):k.delete(E),o({enabledTools:Array.from(k)})},[f,o]),b=R.useCallback(E=>{const C=E?new Set(p.map(k=>k.name)):new Set;h(C),o({enabledTools:Array.from(C)})},[p,o]),_=E=>{const C=E.target.value;if(C===""){n(null);return}const k=parseInt(C,10);isNaN(k)?n(null):n(k)},x=t===null?"":String(t),S=a!=="conversation"||!r;return y.jsxs("div",{className:$t("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[y.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),y.jsxs("div",{className:"relative",children:[y.jsx(fw,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(Qn,{type:"search",placeholder:"Filter tools...",value:u,onChange:E=>c(E.target.value),className:"pl-8 h-9",disabled:S})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs(En,{className:"text-xs text-muted-foreground",children:[g.length," tools shown (",f.size," enabled)"]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx(Pt,{variant:"outline",size:"sm",onClick:()=>b(!0),disabled:S||p.length===0,children:"Enable All"}),y.jsx(Pt,{variant:"outline",size:"sm",onClick:()=>b(!1),disabled:S||p.length===0||f.size===0,children:"Disable All"})]})]}),y.jsx(yg,{className:"h-56 border rounded-md p-2 bg-background/50",children:S?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):p.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):g.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):y.jsx("div",{className:"space-y-1",children:g.map(E=>y.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[y.jsx($l,{id:`tool-switch-${E.name}`,checked:f.has(E.name),onCheckedChange:C=>v(E.name,C),className:"flex-shrink-0",disabled:S}),y.jsxs(En,{htmlFor:`tool-switch-${E.name}`,className:$t("text-sm font-normal flex-grow pl-2 space-y-0.5",S?"cursor-not-allowed":"cursor-pointer"),title:`${E.name} (from ${E.modId})`,children:[y.jsx("span",{className:"block font-medium",children:E.name}),y.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:E.description})]})]},E.name))})}),y.jsxs("div",{className:"pt-2",children:[y.jsx(En,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),y.jsx(Qn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:x,onChange:_,className:"w-20 h-8 text-xs mt-1",placeholder:String(Br.getState().toolMaxSteps??5),disabled:S}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20)."})]})]})},q2="core-tool-selector";function Iwe(){const e=Oa(h=>h.registerPromptControl),t=fi(h=>h.isPromptControlPanelOpen[q2]??!1),n=fi(h=>h.togglePromptControlPanel),{selectedItemId:r,selectedItemType:a,getConversationById:i}=Kr(In(h=>({selectedItemId:h.selectedItemId,selectedItemType:h.selectedItemType,getConversationById:h.getConversationById}))),o=Br(h=>h.toolMaxSteps),[s,u]=R.useState(null),c=R.useRef(null);R.useEffect(()=>{t?(u(o),c.current=null):(u(null),c.current=null)},[t,o]);const f=R.useCallback(h=>{if(u(h),h===null||isNaN(h))c.current=null;else{const p=Math.max(1,Math.min(20,h));c.current=p}},[]);R.useEffect(()=>e({id:q2,order:30,show:()=>!0,triggerRenderer:()=>{var b,_;const p=a==="conversation"&&r?i(r):null,g=((_=(b=p==null?void 0:p.metadata)==null?void 0:b.enabledTools)==null?void 0:_.length)??0,v=a==="conversation"&&!!r;return y.jsxs(N1,{open:t&&v,onOpenChange:x=>{v&&n(q2,x)},children:[y.jsx(I1,{asChild:!0,children:y.jsxs(Pt,{variant:"outline",size:"sm",className:"h-8 px-2 text-xs",disabled:!v,"aria-label":"Select Tools",children:[y.jsx(av,{className:"h-3.5 w-3.5 mr-1"}),"Tools ",g>0?`(${g})`:""]})}),y.jsx(O1,{className:"w-auto p-0",side:"top",align:"start",onOpenAutoFocus:x=>x.preventDefault(),children:y.jsx(Nwe,{localMaxSteps:s||5,setLocalMaxSteps:f})})]})},getMetadata:()=>{var _,x;const p=Kr.getState(),g=Br.getState(),v={};if(p.selectedItemType==="conversation"&&p.selectedItemId){const S=p.getConversationById(p.selectedItemId);(x=(_=S==null?void 0:S.metadata)==null?void 0:_.enabledTools)!=null&&x.length&&(v.enabledTools=[...S.metadata.enabledTools])}const b=c.current;return b!==null&&b!==g.toolMaxSteps&&(v.maxSteps=b),v},clearOnSubmit:()=>{c.current=null}}),[e,t,n,r,a,i,s,f,o])}const Owe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},Dwe=()=>{const[e,t]=R.useState(!0),{selectedItemId:n,selectedItemType:r,loadSidebarItems:a,addConversation:i,selectItem:o,getProjectById:s,getConversationById:u}=Kr(In(L=>({selectedItemId:L.selectedItemId,selectedItemType:L.selectedItemType,loadSidebarItems:L.loadSidebarItems,addConversation:L.addConversation,selectItem:L.selectItem,getProjectById:L.getProjectById,getConversationById:L.getConversationById,isLoading:L.isLoading}))),{interactions:c,status:f}=Cr(In(L=>({interactions:L.interactions,status:L.status}))),{globalError:h,isSidebarCollapsed:p}=fi(In(L=>({globalError:L.globalError,isSidebarCollapsed:L.isSidebarCollapsed}))),g=fi(L=>L.isChatControlPanelOpen.settingsModal??!1),v=Oa(L=>L.chatControls),b=R.useMemo(()=>Object.values(v),[v]),{loadDbMods:_,setLoadedMods:x}=S0(In(L=>({loadDbMods:L.loadDbMods,setLoadedMods:L.setLoadedMods,isLoading:L.isLoading}))),{loadInitialData:S}=Ya(In(L=>({loadInitialData:L.loadInitialData,isLoading:L.isLoading}))),{loadSettings:E,globalSystemPrompt:C}=Br(In(L=>({loadSettings:L.loadSettings,globalSystemPrompt:L.globalSystemPrompt})));_he(),xye(),Cye(),bbe(),wbe(),Sbe(),lwe(),cwe(),Swe(),Rwe(),Iwe(),R.useEffect(()=>{let L=!0;return(async()=>{if(console.log("LiteChat: Starting initialization..."),t(!0),!!L&&(await E(),console.log("LiteChat: Settings loaded."),!!L&&(await S(),console.log("LiteChat: Provider data loaded."),!!L&&(await a(),console.log("LiteChat: Sidebar items loaded."),!!L&&(await _(),console.log("LiteChat: DB Mods loaded."),!!L))))){try{const ae=S0.getState().dbMods;if(console.log(`LiteChat: Loading ${ae.length} mods...`),!L)return;const ne=await Zfe(ae);L&&(x(ne),console.log(`LiteChat: ${ne.length} mods processed.`))}catch(ae){console.error("LiteChat: Failed to load mods:",ae)}L&&(console.log("LiteChat: Initialization complete."),t(!1))}})(),()=>{L=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[E,S,a,_,x]);const k=R.useCallback(L=>L.flatMap(de=>{var ne,ee,se,W,J,Y;const ae=[];if((ne=de.prompt)!=null&&ne.content&&typeof de.prompt.content=="string"?ae.push({role:"user",content:de.prompt.content}):(se=(ee=de.prompt)==null?void 0:ee.metadata)!=null&&se.attachedFiles&&de.prompt.metadata.attachedFiles.length>0&&((W=de.prompt)!=null&&W.content),de.response&&typeof de.response=="string"&&ae.push({role:"assistant",content:de.response}),(J=de.metadata)!=null&&J.toolCalls&&Array.isArray(de.metadata.toolCalls)){const re=[];de.metadata.toolCalls.forEach(be=>{try{const we=JSON.parse(be);we&&we.type==="tool-call"&&we.toolCallId&&we.toolName&&we.args!==void 0?re.push(we):console.warn("[LiteChat] buildHistory: Invalid tool call structure after parsing:",be)}catch(we){console.error("[LiteChat] buildHistory: Failed to parse tool call string:",be,we)}}),re.length>0&&ae.push({role:"assistant",content:re})}if((Y=de.metadata)!=null&&Y.toolResults&&Array.isArray(de.metadata.toolResults)){const re=[];de.metadata.toolResults.forEach(be=>{try{const we=JSON.parse(be);we&&we.type==="tool-result"&&we.toolCallId&&we.toolName&&we.result!==void 0?re.push(we):console.warn("[LiteChat] buildHistory: Invalid tool result structure after parsing:",be)}catch(we){console.error("[LiteChat] buildHistory: Failed to parse tool result string:",be,we)}}),re.length>0&&ae.push({role:"tool",content:re})}return ae}),[]),D=R.useCallback(async L=>{var we,Me,Pe;let de=Kr.getState().selectedItemType==="conversation"?Kr.getState().selectedItemId:null,ae=Kr.getState().selectedItemType==="project"?Kr.getState().selectedItemId:Kr.getState().selectedItemType==="conversation"?((we=Kr.getState().getConversationById(Kr.getState().selectedItemId))==null?void 0:we.projectId)??null:null;const ne=fi.getState().setFocusInputFlag;if(!Ya.getState().selectedModelId){ot.error("Please select a model before sending a message.");return}if(!de){console.log("LiteChat: No conversation selected, creating new one...");try{ae=Kr.getState().selectedItemType==="project"?Kr.getState().selectedItemId:null;const Ae=await i({title:"New Chat",projectId:ae});await o(Ae,"conversation"),de=Kr.getState().selectedItemId,de!==Ae&&(console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),de=Ae),console.log(`LiteChat: New conversation created (${de}), selected, and InteractionStore synced.`),setTimeout(()=>ne(!0),0)}catch(Ae){console.error("LiteChat: Failed to create new conversation",Ae),ot.error("Failed to start new chat.");return}}const W=Cr.getState().interactions.filter(Ae=>Ae.status==="COMPLETED"&&Ae.type==="message.user_assistant"),J=k(W);if(L.content)J.push({role:"user",content:L.content});else if((Pe=(Me=L.metadata)==null?void 0:Me.attachedFiles)!=null&&Pe.length)J.push({role:"user",content:""});else{console.error("LiteChat: Attempting to submit with no content."),ot.error("Cannot send an empty message.");return}const Y=s(ae),be={system:(Y==null?void 0:Y.systemPrompt)??C??void 0,messages:J,parameters:L.parameters,metadata:L.metadata};Ci.emit("prompt:finalised",{prompt:be}),console.log("LiteChat: Submitting prompt to AIService:",be);try{await Ab.startInteraction(be,L),console.log("LiteChat: AIService interaction started.")}catch(Ae){console.error("LiteChat: Error starting AI interaction:",Ae),ot.error(`Failed to start AI interaction: ${Ae instanceof Error?Ae.message:String(Ae)}`)}},[i,o,C,k,s,u]),O=R.useCallback(async L=>{var Te,qe,it,Ie,Re;console.log(`LiteChat: Regenerating interaction ${L}`);const de=Cr.getState(),ae=de.interactions.find(U=>U.id===L);if(!ae||!ae.prompt){console.error(`LiteChat: Cannot regenerate - interaction ${L} or its prompt not found.`),ot.error("Cannot regenerate: Original interaction data missing.");return}if(ae.type!=="message.user_assistant"){console.error(`LiteChat: Cannot regenerate non-user_assistant interaction: ${L}`),ot.error("Can only regenerate from a user message interaction.");return}const ne=u(ae.conversationId),ee=(ne==null?void 0:ne.projectId)??null,se=s(ee),W=Ya.getState().selectedModelId;if(!W){ot.error("Please select a model before regenerating.");return}const{providerId:J,modelId:Y}=Owe(W);if(!J||!Y){ot.error("Invalid model selection for regeneration.");return}const re=ae.index,be=de.interactions.filter(U=>U.conversationId===ae.conversationId&&U.index<re&&U.status==="COMPLETED"&&U.type==="message.user_assistant").sort((U,Ce)=>U.index-Ce.index),we=k(be);if((Te=ae.prompt)!=null&&Te.content&&typeof ae.prompt.content=="string")we.push({role:"user",content:ae.prompt.content});else if((Ie=(it=(qe=ae.prompt)==null?void 0:qe.metadata)==null?void 0:it.attachedFiles)!=null&&Ie.length)we.push({role:"user",content:""});else{console.error(`LiteChat: Cannot regenerate - missing or invalid user prompt content in interaction ${L}.`),ot.error("Cannot regenerate: Original user prompt missing.");return}const Me=(se==null?void 0:se.systemPrompt)??Br.getState().globalSystemPrompt??void 0,Pe={...ae.prompt.metadata,regeneratedFromId:L,providerId:J,modelId:Y,attachedFiles:void 0,enabledTools:(Re=ae.prompt.metadata)==null?void 0:Re.enabledTools},Ae={system:Me,messages:we,parameters:ae.prompt.parameters,metadata:Pe};Ci.emit("prompt:finalised",{prompt:Ae}),console.log(`LiteChat: Submitting regeneration request for ${L}:`,Ae);try{await Ab.startInteraction(Ae,ae.prompt),console.log(`LiteChat: AIService regeneration interaction started for ${L}.`)}catch(U){console.error(`LiteChat: Error starting regeneration for ${L}:`,U),ot.error("Failed to start regeneration.")}},[k,s,u]),N=R.useCallback(L=>{console.log(`LiteChat: Stopping interaction ${L}`),Ab.stopInteraction(L)},[]),z=R.useMemo(()=>b.filter(L=>(L.panel??"main")==="sidebar"&&(L.show?L.show():!0)).sort((L,de)=>(L.order??1/0)-(de.order??1/0)),[b]),H=R.useMemo(()=>b.filter(L=>L.panel==="sidebar-footer"&&(L.show?L.show():!0)).sort((L,de)=>(L.order??1/0)-(de.order??1/0)),[b]),X=R.useMemo(()=>b.filter(L=>L.panel==="header"&&(L.show?L.show():!0)).sort((L,de)=>(L.order??1/0)-(de.order??1/0)),[b]),F=R.useMemo(()=>{var L;return(L=b.find(de=>de.id==="core-settings-trigger"))==null?void 0:L.settingsRenderer},[b]),Z=r==="conversation"?n:null;return e?y.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx(Gn,{className:"h-12 w-12 animate-spin text-primary"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:$t("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:$t("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",p?"w-16":"w-64"),children:[y.jsxs("div",{className:$t("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:$t(p?"hidden":"block"),children:y.jsx(cb,{controls:z,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:$t(p?"block":"hidden"),children:y.jsx(cb,{controls:z,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:$t("flex-shrink-0 border-t border-[--border] p-2",p?"flex flex-col items-center gap-2":"flex items-center justify-between"),children:y.jsx(cb,{controls:H,panelId:"sidebar-footer",renderMode:p?"icon":"full",className:$t("flex",p?"flex-col gap-2":"items-center gap-1")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(cb,{controls:X,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(Jse,{conversationId:Z,interactions:c,onRegenerateInteraction:O,onStopInteraction:N,status:f,className:"flex-grow overflow-y-hidden p-4 space-y-4"}),h&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",h]}),y.jsx(qZ,{InputAreaRenderer:UF,onSubmit:D,className:"border-t border-[--border] bg-card flex-shrink-0"})]})]}),g&&F&&F(),y.jsx(ehe,{richColors:!0,position:"bottom-left",closeButton:!0})]})};function jwe(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(Dwe,{})})})}Jz();function Mwe({children:e}){const t=Br(n=>n.theme);return R.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}J7.createRoot(document.getElementById("root")).render(y.jsx(vt.StrictMode,{children:y.jsx(Mwe,{children:y.jsx(jwe,{})})}));
